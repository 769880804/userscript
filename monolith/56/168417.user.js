// ==UserScript==
// @name MafiaWars Addon | Lucifers MOD
// @namespace 		http://screepts.com
// @version 		0.6.3.9
// @description 	http://screepts.com/MOD/changelog.html
// @copyright 		2010-2013 screepts.com
// @include 		http://apps.facebook.com/inthemafia/*
// @include 		https://apps.facebook.com/inthemafia/*
// @include        	http://facebook.mafiawars.zynga.com/mwfb/remote/html_server.php*
// @include        	https://facebook.mafiawars.zynga.com/mwfb/remote/html_server.php*
// @match          	http://apps.facebook.com/inthemafia/*
// @match          	https://apps.facebook.com/inthemafia/*
// @match          	http://facebook.mafiawars.zynga.com/mwfb/remote/html_server.php*
// @match          	https://facebook.mafiawars.zynga.com/mwfb/remote/html_server.php*
// @icon        	http://mwscripts.screepts.netdna-cdn.com/images/lucifersicon.jpg
// @grant 		    GM_xmlhttpRequest
// @grant       	GM_getValue
// @grant       	GM_setValue
// @grant       	GM_deleteValue
// ==/UserScript==



/* Copyright Notice
 * #################
 * Lucifers MOD is based on the opensource version of MWADDON v(0.5.0.7) - v(0.6.7.2) (Copyright David Cabrera)
 * Lucifers MOD is derived and Unported under the licence of 24th October 2011 gpl 3.0 from MWADDON v(0.5.0.7) - v(0.6.7.2)(Copyright David Cabrera).
 *
 * MWADDON is now licenced under Creative Commons Attribution-NonCommercial-NoDerivs 3.0 Unported License as off Jun 11, 2012 (Copyright David Cabrera)
 * All code is based on MWADDON v(0.5.0.7) - v(0.6.7.2) (Copyright David Cabrera) Lucifers MOD is maintained and updated by Luke Hardiman (luke@hardiman.co.nz)
 *
 * Lucifers MOD is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.
 * http://creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US
 * note: If you use any my code please include refrence to me and also refrence to MWADDON v(0.5.0.7) - v(0.6.7.2) Copyright David Cabrera
 * 
 * http://screepts.com
 */

 
//please note due to file size & hosting bandwidth i have compressed script but you can download uncompressed version from
//http://mwscripts.com/mod/LucifersMOD.fullsource.user.js

function spocktoolbar(){var e=$("#spockholm_toolbar");if(e.length>0){return true}else{return false}}function spocktoolbarVersion(){var e=$("#spocktoolbar_header .sexy_button_new.short.white").attr("title");var t;try{t=/[Ss]pockholm [Mm]afia [Tt]oolbar\s+v(\d+.\d+)/.exec(e)[1]}catch(n){t="could not get version"}return t}function demonVersion(){var e=$("li[id$='demon_frame'] > div").attr("title");var t;try{t=/[Vv]ersion\s+(\d+)/.exec(e)[1]}catch(n){t="could not get version"}return t}function demonInstalled(){var e=$("#demon_frame");if(e.length>0){return true}return false}function demonUpgrade(){if(demonInstalled()==false)return false;var e=$('#demon_upgrade input:checkbox[id$="demon_upgrade"]:checked').eq(1);if(e.length>0){return true}return false}function demonRunning(e){function t(e){var t=$("#demon_"+e+" a[id$='demon_"+e+"'].sexy_button_new.short.red").parent();if($(t).css("display")!=="none"){console.log("Demon "+e+" running");return true}return false}if(demonInstalled()==false)return false;if(typeof e=="string"){return t(e)}if(t("rob")==true)return true;if(t("fight")==true)return true;if(t("boss")==true)return true;if(t("jobs")==true)return true;if(t("arena")==true)return true;if(t("bank")==true)return true;if(t("feed")==true)return true;if(t("upgrade")==true)return true;return false}function checkCitySlots(){function t(){httpAjaxRequest({url:"remote/"+MW.getIntURL("job","view"),success:function(t){var r=n(t);if(r>=0){log("slotsLeft -> "+r);global.MaxCrewSlots=r}else{global.MaxCrewSlots=false;log("was a issue getting slots left");log("slotsLeft -> "+r)}if(e!=7){MW.travel(e)}}})}function n(e){var t,n=h$(e);var r=false;if(n.find("#CityCrewModule .queue_slot").length>0){r=0}if(n.find("#CityCrewModule #crew_queue").length>0){r=parseInt(n.find("#CityCrewModule #crew_queue .crew_empty_slot").length)}else{if(n.find("#crew_queue").length>0){r=parseInt(n.find("#crew_queue .crew_empty_slot").length)}}return r}var e=MW.currentCity();if(e<7){MW.travel(7,t)}else{t()}}function internallink(e){url=unescape(e);url=url.replace("http://apps.facebook.com/inthemafia/track.php?","");url=url.replace("https://apps.facebook.com/inthemafia/track.php?","");url=url.replace(/next_/g,"xw_");var t="";if(params=/params=(\{.*\})/.exec(url)){try{params=$.parseJSON(params[1].replace(/[\+\%]/g,""))}catch(n){}for(x in params){t+="&"+x+"="+params[x]}url=url.substr(0,url.indexOf("&xw_params"))}if(params=/params=(%7B.*%7D)/.exec(url)){try{params=$.parseJSON(unescape(params[1]).replace(/[\+\%]/g,""))}catch(n){}for(x in params){t+="&"+x+"="+params[x]}url=url.substr(0,url.indexOf("&xw_params"))}url=url+t;var r=parseInt((new Date).getTime().toString().substring(0,10));if(url.indexOf("cb=")==-1){url+="&cb="+global.USER_ID+r}if(url.indexOf("tmp=")==-1){url+="&tmp="+r}url="remote/html_server.php?"+url;return url}function unshort(e,t){function r(){$.getJSON("http://api.longurl.org/v2/expand?url="+escape(e)+"&format=json&callback=?",function(e){var n=unescape(e["long-url"]);if(/apps.facebook.com\/inthemafia/.test(n)){t(n)}else{t(false)}})}var n=setTimeout(function(){t(false)},8e3);if(/apps.facebook.com\/inthemafia/.test(e)){t(e)}else if(e.indexOf("spockon.me")!=-1){$.ajax({type:"GET",dataType:"jsonp",url:"https://spockon.me/api.php?action=expand&format=jsonp&shorturl="+escape(e),crossDomain:true,success:function(e){clearTimeout(n);if(Util.isSet(e.longurl)&&/apps.facebook.com\/inthemafia/.test(e.longurl)){t(e.longurl)}else{t(false)}},error:r})}else{r()}}function concat(e){str="";for(prop in e){str+=prop+" value :"+e[prop]+"\n"}return str}function log(e){if(AppInfo.release=="beta")setTimeout(function(){Logger.log("INFO",e)},0)}function SendChromeRequests(e,t){function n(){return"MOD"+Math.floor(Math.random()*9e8)+"callbackID"}if(typeof chrome!=="undefined"){t.callbackID=n();unsafeWindow[t.callbackID]=function(n){if(typeof e==="function"){e.apply(unsafeWindow,arguments)}delete unsafeWindow[t.callbackID]};setTimeout(function(){unsafeWindow.postMessage({mod:JSON.stringify(t)},window.location.href)},50)}else{e(false)}}function concat(e){str="";for(prop in e){str+=prop+" value :"+e[prop]+"\n"}return str}function MWAddonCity(e,t,n,r,i){this.name=e||"Unknow City";this.ratio=n||1;this.currency=r||"$";this.enabled=t===true;this.cashIcon=i;return this}function Config(e,t,n){var r=this;this._isConfigObject=true;this._allusers=n||false;this._key=e||"";this._saving=null;if(Util.isSet(t)&&t!==null){Util.each(t,function(e,t){if(UserConfig.isValidProperty(e,t)){r[e]=t}})}return this}function Collection(e){function s(){if(Util.isFunc(i.Move)){t.Current=r.Items[n];i.Move.apply(t,[n,r.Keys[n],r.Items[n]])}}function o(){if(Util.isFunc(i.End)){i.End.apply(t)}}var t=this;var n=0;var r=new Object;var i=new Object;this.onMove=function(e){if(Util.isFunc(e)){i.Move=e}};this.onEnd=function(e){if(Util.isFunc(e)){i.End=e}};this.MoveFirst=function(){n=0;s()};this.MoveNext=function(){n++;if(n<r.Items.length){s()}else{o()}return null};this.MovePrevious=function(){n--;if(n>0){s()}return null};this.MoveLast=function(){n=Items.length-1;s();o()};this.clear=function(){r=new Object;i=new Object};this.setArray=function(e){r.Keys=new Array;r.Items=new Array;for(var t in e){if(!Util.isFunc(e[t])){r.Keys.push(t);r.Items.push(e[t])}}n=0};if(e){t.setArray(e);return t}else{return false}}function Countdown(e){var t,n=this;this.started=false;this.arguments=e;if(!Util.isNumber(e.delay)){e.delay=10}if(e.selector){e.step=function(t,n){var r=$(e.selector);if(r.length>0){r.html((e.text?e.text+" ":"")+n)}}}this.start=function(r){if(n.started===true){if(!Util.isSet(r)){return}if(t){clearInterval(t);t=null}}else{n.started=true}if(!r||isNaN(r=parseInt(r))){r=e.delay}else{e.delay=r}e.step.apply(n,[r,Util.toDateString(r*1e3,e.format)]);t=setInterval(function(){r--;if(Util.isFunc(e.step)){e.step.apply(n,[r,Util.toDateString(r*1e3,e.format)])}if(r<0){n.clear();if(Util.isFunc(e.success)){e.success.apply(n,[e.id])}}},1e3)};this.clear=function(){if(Util.isFunc(e.stop)){e.stop.apply(n)}if(t){clearInterval(t);t=null}n.started=false};n.clear();return this}function TimerMessage(e){var t=this;var n;this.start=function(r,i,s,o){if(e$(e)===null){return 0}t.clear();$(e).html(r.replace("%N%",i)).show();n=setInterval(function(){$(e).html(r.replace("%N%",i--));if(i<0){t.clear();s.apply(t,o)}},1e3);return n};this.clear=function(){clearInterval(n)};return this}function MafiaMember(e){this.uid=e.uid;this.name=e.name?Base64.decode(e.name):"";this.level=e.level;this.first_name=e.first_name?Base64.decode(e.first_name):"";this.profile_pic=e.profile_pic;e=null;return this}function MafiaMemberCollection(e){var t=this;if(Util.isArray(e)&&e.length>0){Util.each(e,function(e,n){t.add(n)})}e=null;return this}function e$(e,t){var n=$(e,t);if(n.length>0){return n}return null}function h$(e,t){if(typeof e!=="string"){return $(e)}var n=document.implementation.createHTMLDocument("");var r=n.documentElement,i;if(t===true){r.innerHTML=e.replace(/src=['"]*[^'"\s]*/g,"")}else{if(MWAddonInit.FixedGame===true){r.innerHTML=e.replace(/https?:\/\/zyngapv.hs.llnwd.net\/e6/g,"http://mwfb.static.zynga.com")}else{r.innerHTML=e}}i=r.firstElementChild;if(r.childElementCount===1&&i.localName.toLowerCase()==="html"){n.replaceChild(i,r)}return $(r)}function c$(e,t){var n=/^input:(\w+)$/i;var r,i,s;if(typeof e!=="string"){r=$(e)}else if(i=n.exec(e)){r=$('<input type="'+i[1]+'">')}else{if(e=="style"){r=$("<"+e+' type="text/css">')}else if(e=="script"){r=$("<"+e+' type="text/javascript">')}else{r=$("<"+e+">")}}if(r.length<1)return null;if(typeof t==="string"){if((i=t.split(",")).length>1){for(var o=0;o<i.length;o++){if((s=i[o].split(":")).length==2){r.attr($.trim(s[0]),$.trim(s[1]))}}}else if((s=t.split(":")).length==2){r.attr($.trim(s[0]),$.trim(s[1]))}else{r.attr("id",$.trim(t))}}else if(typeof t==="object"){r.attr(t)}return r}function x$(e,t,n,r){if(!n){n="span"}if(!r){r=5}return c$(n).html(t||"").css({cursor:"pointer","margin-right":r}).attr({id:e,name:"checkbox","class":"checkbox",onclick:"$(this).toggleClass('checked');return false;"})}function s$(e){var t,n=40,r,i;Util.each(arguments,function(e,s){if(e>0){switch(typeof s){case"string":t=s;break;case"number":n=s;break;case"object":if(Util.isArray(s)){i=s}else{r=s}break}}});var s=c$("select","id:"+e).css({width:n,margin:"0px 5px 0px 5px"});if(r){Util.each(r,function(e,t){if(Util.isFunc(s[e]))s[e](t)})}if(i){Util.each(i,function(e,t){s.append(t)})}if(Util.isString(t)){s=c$("label","for:"+e).css("margin-right",5).text(t).append(s)}return s}function n$(e,t,n){return t$(e,t,n,{onchange:"if(isNaN(parseFloat(this.value))){this.value=0;}",onclick:"$(this).select();"})}function t$(e){var t,n=40,r;Util.each(arguments,function(e,i){if(e>0){switch(typeof i){case"string":t=i;break;case"number":n=i;break;case"object":r=i;break}}});var i=c$("input:text","id:"+e).css({width:n,margin:"0px 5px 0px 5px"});if(r){Util.each(r,function(e,t){if(Util.isFunc(i[e])&&Util.isFunc(t)){i[e](t)}else{i.attr(e,t)}})}if(Util.isString(t)){i=c$("label","for:"+e).css("margin-right",5).text(t).append(i)}return i}function b$(e,t){var n=c$("span").append(c$("span").html(e));return c$("a",t).addClass("sexy_button_new").append(n)}function httpXDRequest(e,t){var n=Util.isSet(e.onerror)?e.onerror:e.onload;if(global.is_chrome===true){SendChromeRequests(function(r){if(!Util.isSet(r)){if(t!==true){showHelpPopup({icon:"info",title:"Lucifers MOD Connection Error.",message:'Your using a Chromium based browser you need to install chrome version. <a href="'+AppInfo.url+'" target="_TOP" > get chrome version</a><br/>If you are using rockmelt you need to install the rockmelt version from our site.'})}n(false)}else{if(Util.isSet(e.onload)){e.onload(r)}}},e)}else{if(global.xd_support===true){setTimeout(function(){try{GM_xmlhttpRequest(e)}catch(t){Logger.error("httpXDRequest: "+t)}},0)}else{if(t!==true){showHelpPopup({icon:"error",title:"not supported",message:"This feature is not supported by your browser."})}n("Not supported.")}}}function httpRequest(e){try{var t=String((new Date).getTime());var n=new unsafeWindow.XMLHttpRequest;if(!n){throw Error("Can't create XMLHttpRequest object.")}if(typeof e.success!=="function"){throw ReferenceError("success is not defined")}if(typeof e.url!=="string"){throw ReferenceError("url is not defined")}if(typeof e.timeout!=="number"){e.timeout=Math.max(UserConfig.main.rqTimeout||0,30)*1e3}if(e.liteLoad!==1){e.liteLoad=0}if(typeof e.error!=="function"){e.error=e.success}n.is_mw_ajax=true;var r=e.url.indexOf("?")==-1?"?":"&";var i=/^https?/.test(e.url)?"":global.location.protocol+"://"+global.location.host+"/mwfb/";var s={ajax:1,liteload:e.liteLoad,sf_xw_user_id:unsafeWindow.User.id,sf_xw_sig:unsafeWindow.local_xw_sig,clicks:unsafeWindow.User.clicks};if(typeof e.data=="object"){Util.each(e.data,function(e,t){s[e]=t})}global.AjaxRequests[t]=n;var o=setTimeout(function(){if(Util.isSet(global.AjaxRequests[t])){httpAjaxStopRequests(t,"Timeout");e.error&&e.error("timeout.")}},e.timeout);n.onreadystatechange=function(){if(n.readyState==4){clearTimeout(o);delete global.AjaxRequests[t];if(n.status==200){if(n.responseText.substring(0,5)!=="ERROR"||n.responseText.substring(0,2)!=="OK"){unsafeWindow.User.clicks++;e.success(n.responseText);return}}if(n.status==500){log("Detected 500 error ")}e.error(n.statusText)}};n.open("POST",i+e.url+r+"xw_client_id=8",true);n.setRequestHeader("Content-type","application/x-www-form-urlencoded");n.send($.param(s));return n}catch(u){Logger.error(u);e&&e.error&&e.error()}}function httpAjaxRequest(e,t){function u(t){t=Util.parseJSON(t);if(e.update!==false){if(Util.isSet(t.user_fields)){if(Util.isFunc(unsafeWindow.user_fields_update)){unsafeWindow.user_fields_update(t.user_fields)}if(Util.isFunc(unsafeWindow.user_info_update)){unsafeWindow.user_info_update(t.user_fields,t.user_info)}}if(Util.isSet(unsafeWindow.MW)){if(Util.isSet(t.questData)){try{unsafeWindow.MW.QuestBar.update(t.questData)}catch(n){Logger.error("Error updating questData")}}if(Util.isSet(t.worstitems)){try{unsafeWindow.MW.WorstItemsModule.update(t.worstitems)}catch(n){Logger.error("Error updating WorstItemsModule")}}}}e.success(t)}function a(t){if(e.selector==="#inner_page"){var n=$(e.selector);n.html(t);try{var r=Util.substr(t,"!-- Current Page: ","-->",1,18);if(Util.isString(r)){var i=Util.doRgx(/([a-zA-Z]*)?(?:_controller) ([0-9]+)/,r);if(i.$1){n.attr("class",i.$1+"_controller");unsafeWindow.User.page=i.$1}}}catch(s){Logger.error(s)}}else if(Util.isString(e.selector)){$(e.selector).html(t)}e.success(t)}function f(t){return function(n){if(i){loadingScreen()}if(t===true){if((n=Util.trim(n)).charAt(0)==="{"){u(n)}else{a(n)}}else{log("there was a ajax error url -> "+e.url+"\nhtmlText -> "+n);e.error(n)}}}var n=0;var r=1;var i=Util.isString(e.message);var s;var o=0;try{if(Util.isString(e)&&Util.isFunc(t)){var l=e;e={url:l,success:t}}if(!Util.isObject(e)){throw ReferenceError("args is not defined.")}if(!Util.isFunc(e.success)){if(Util.isFunc(t)){e.success=t}else{e.success=Util.noop}}if(!Util.isFunc(e.error)){e.error=e.success}if(!Util.isSet(e.data)){e.data=new Object}if(e.update!==false){e.update=true}if(i){loadingScreen(e.message)}httpRequest({url:e.url,data:e.data,liteLoad:e.liteLoad,timeout:e.timeout,success:f(true),error:f(false)})}catch(c){Logger.error(c);loadingScreen();e&&e.error&&e.error(c.message)}}function httpAjaxStopRequests(e,t){function n(e,n){n.onreadystatechange=function(){};n.abort();delete global.AjaxRequests[e];Logger.debug("Aborted Request id: "+e+" "+(t?t:""))}if(e){n(e,global.AjaxRequests[e])}else{Util.each(global.AjaxRequests,n)}}function showBadResponse(e){showHelpPopup({icon:"error",title:"Bad server response",message:e||"There was a error in the server response. Try again later."})}function getShortURL(e,t,n){function i(e){var r=s.parser(e);if(r){t(r)}else if(n){n("Error parsing short service callback.")}}var r=false;try{if(!Util.isFunc(t)){throw ReferenceError("Success callback is not defined.")}if(!Util.isString(e)||!/http/.test(e)){throw ReferenceError("longURL is not defined.")}var s=URLServices.shorten[UserConfig.main.get("shortServiceID")];if(global.service_error==true){Logger.debug("Shortlink service issue using spockon.me");s=URLServices.shorten["JSON-Spokon.me"]}if(global.xd_support!==true&&s.format!=="jsonp"){s=URLServices.shorten["JSON-TinyUrl"]}var o,u="";if(s.login){o=UserConfig.main.get("shortServiceLogin");u+="&"+s.login.name+"="+o[s.login.name];u+="&"+s.login.key+"="+o[s.login.key]}if(s.format!=="jsonp"){httpXDRequest({method:"POST",url:s.url+escape(e)+u,onerror:n,onload:function(e){var n=e.responseText;if(s.format!=="text"){n=Util.parseJSON(n)}if(s.parser){i(n)}else{t(n)}}},true)}else if(typeof $!=="undefined"){var a=false;var f=setTimeout(function(){a=true;if(global.service_error==false){global.service_error=true;getShortURL(e,t);return}n&&n(Util.setColor("Timeout while unshorting url","red"))},Math.max(UserConfig.main.jsTimeout,5)*1e3);$.ajax({dataType:"jsonp",url:s.url+escape(e)+u,global:false,success:function(e){if(a===false){clearTimeout(f);i(e)}}})}else{n&&n("jQuery not loaded.")}}catch(l){Logger.error(l);n&&n(l.message)}}function getUnshortUrl(e,t,n){function r(e){Logger.error(e);n&&n(e.message)}function i(e){var r=s.parser(e);if(r){t(r)}else if(n){n("Error parsing unshort service callback.")}}try{if(!Util.isFunc(t)){throw ReferenceError("callback is not defined.")}if(!Util.isString(e)||!/http/.test(e)){throw ReferenceError("shortURL is not defined.")}var s=URLServices.unshorten[UserConfig.main.get("unshortServiceID")];if(global.xd_support!==true&&s.format!=="jsonp"){s=URLServices.unshorten["JSON-LongURL"]}if(s.format!=="jsonp"){httpXDRequest({method:"POST",url:s.url+escape(e),onerror:n,onload:function(e){var n=e.responseText;if(s.format!=="text"){n=Util.parseJSON(n)}if(s.parser){i(n)}else{t(n)}}},true)}else if(typeof $!=="undefined"){var o=false;var u=setTimeout(function(){o=true;n&&n(Util.setColor("Timeout while unshorting url","red"))},Math.max(UserConfig.main.jsTimeout,5)*1e3);$.ajax({dataType:"jsonp",url:s.url+escape(e),global:false,success:function(e){if(o===false){clearTimeout(u);i(e)}}})}else{n&&n("jQuery not loaded.")}}catch(a){r(a)}}function PopupObject(e,t){function p(){o.hide();u.fadeOut(200,function(){if(typeof t.onclose=="function"){if(t.onclose.apply(this)!==false){n.destroy()}}else{n.destroy()}});$("#content_row, #inner_page").height("auto");return false}function d(){if(t.closeAfterClick===true){p()}return false}function v(i){if(n.is_closed===true){return}if(i===true){$("#TopField").focus()}if(t.type==="main"){Tooltips.applyTo(e,s)}global.Popups["pop_"+r]={type:t.type,popup:n};if(MWAddonNotify.Initialized===true){MWAddonNotify.hideAll()}f.find("button").button();o.show();u.show()}function m(e){Util.each(e,function(e,t){var n=$("#"+e,u);Util.each(t,function(e,t){n.append(c$("option","value:"+e).text(t))})})}function g(){var t=Util.render(Base64.decode("IyR7aWR9IGlucHV0LCAjJHtpZH0gdGV4dGFyZWEsICMke2lkfSBzZWxlY3Qgew0KZm9udC13ZWlnaHQ6"+"IGJvbGQ7DQpjb2xvcjogI0QwRDBEMDsNCmJvcmRlcjogMXB4IHNvbGlkICM5OTk7DQpiYWNrZ3JvdW5k"+"LWNvbG9yOiBibGFjazsNCi1tb3otYm9yZGVyLXJhZGl1czogM3B4Ow0KYm9yZGVyLXJhZGl1czogM3B4"+"Ow0KLXdlYmtpdC1ib3JkZXItcmFkaXVzOiAzcHg7DQpmb250LXNpemU6IDEzcHg7DQpsaW5lLWhlaWdo"+"dDogMTRweDsNCm1pbi1oZWlnaHQ6IDEwcHg7DQp9"),{id:e});c$("style").prependTo(u).append(t)}var n=this;var r=Math.round((new Date).getTime()/100);if(Util.isObject(e)){t=e;e="mwaddon_popup_"+r}if(!Util.isObject(t)){t=new Object}if(!Util.isString(t.title)){if(t.title&&t.title.html){t.title=c$("div").append(t.title).html()}else{t.title=""}}if(t.autoOpen!==true){t.autoOpen=false}if(!Util.isBoolean(t.center)){t.center=true}if(!Util.isString(t.type)){t.type="normal"}if(!Util.isSet(t.appendTo)){t.appendTo=e$("#fbmw_addon_popup")}if(!Util.isSet(t.zIndex)){t.zIndex=100+Util.length(global.Popups)}var i=t.top||35;if(global.HFCDock||global.BFDock){i=55}var s=c$("div","id:pop_"+r).appendTo(t.appendTo||c$("div","fbmw_addon_popup").prependTo("#final_wrapper"));var o=c$("div","class:pop_bg,pop_bg_"+r).css("display","none").width("100%").appendTo(s);var u=c$("div","class:pop_box,pop_box_"+r).css("display","none").appendTo(s).css("top",t.top||80);var a=c$("div").appendTo(u);var f=c$("div",e).appendTo(u).css("clear","both");var l=c$("div").css("padding","10px 5px").appendTo(u);var c={width:750,border:"4px solid #A99E9E","text-align":"left",top:i,"z-index":501};var h=c$("center").html(t.title).css({"text-transform":"uppercase","font-size":32,position:"absolute",width:"100%"});switch(t.type){case"main":u.css(c);break;case"reqs":s.addClass("request_iframe_pop");break;case"rob":s.addClass("pop_rob");break;case"help":s.addClass("cash_help_box");break;case"simple":s.addClass("simpleWithTitle");break}if(t.width){u.width(t.width)}if(t.height){u.height(t.height)}u.css({background:t.background?t.background:"#121212",left:"50%",margin:"0px -"+String(u.outerWidth()/2)+"px"});u.css("z-index",t.zIndex+1);o.css("z-index",t.zIndex);if(t.hideCloseButton!==true){c$("a").appendTo(u).addClass("pop_close").bind("click",p)}if(t.type=="main"){h.css("opacity","0.5");a.css({background:"black url("+global.zGraphicsURL+"zmc/brick_bg_700x73_01.jpg) no-repeat 0px 0px","border-bottom":"2px solid #2f2f2f",height:70}).append($(Resources.getPicture("mod_icon")).css({"float":"left",margin:2})).append(h.html(t.title).css({"font-family":'Impact, "Trebuchet MS", "Lucida Grande", Tahoma, Verdana, Arial, sans-serif',"font-size":32,top:15}))}else if(t.type=="normal"){a.append(h.html(t.title)).css({"border-bottom":"2px solid #A99E9E","margin-bottom":5,height:45})}else{a.css("height",15)}if(t.content){f.append(t.content)}if(t.center){f.css("text-align","center")}if(Util.isArray(t.buttons)){l.css({"border-top":"2px solid #2F2F2F","background-color":"transparent","text-align":"center","max-height":40,height:40});Util.each(t.buttons,function(e,t){if(!Util.isObject(t)){t=new Object}if(!Util.isString(t.label)){t.label="undefined"}if(!Util.isFunc(t.onclick)){t.onclick=p}var n=b$(t.label);n.css("margin-left",5).click(d).click(t.onclick).addClass(t.addClass);if(Util.isSet(t.id)){n.attr("id",t.id)}n.appendTo(l)})}this.addBase64Style=function(e,t){e=Base64.decode(e);if(Util.isObject(t)){c$("style").append(Util.render(e,t)).prependTo(u)}else{c$("style").append(e).prependTo(u)}};this.addBase64Script=function(e){c$("script").append(Base64.decode(e)).prependTo(u)};this.destroy=function(){s.remove();n.is_closed=true;global.Popups["pop_"+r]=null;delete global.Popups["pop_"+r]};this.applyOptions=m;this.applyCustomClass=g;this.close=p;this.show=v;this.header=a;this.content=f;if(t.autoOpen){v()}return this}function TabObject(e){function i(e){if(Util.isNumber(e)){return e+"px"}return e||"auto"}var t=this;var n=t.main=c$("div",e.id);var r=c$("div","class:tab_header").appendTo(n);this.header=c$("div","class:tab_right").appendTo(r);this.buttons=new Array;this.content=new Array;if(!Util.isSet(e.id)){e.id="new_tab"}if(!Util.isSet(e.height)){e.height="auto"}if(!Util.isSet(e.width)){e.width="auto"}if(!Util.isSet(e.padding)){e.padding=0}if(!Util.isArray(e.tabs)){e.tabs=["Unknow Tab Name"]}n.prepend(c$("style").text(Util.render(Base64.decode("IyR7aWR9IHsNCiAgICB3aWR0aDogJHt3aWR0aH07DQogICAgaGVpZ2h0OiBhdXRvOw0KICAgIG92ZXJmbG93OiBoaWRkZW47DQp9"+"DQojJHtpZH0gLnRhYl9oZWFkZXIgew0KICAgIGhlaWdodDogMzVweDsNCiAgICBvdmVyZmxvdzogaGlkZGVuOw0KfQ0KIyR7aWR9"+"IC50YWJfaGVhZGVyIC50YWJfcmlnaHQgew0KICAgIGZsb2F0OiByaWdodDsNCiAgICBmb250LXNpemU6IDEycHg7DQogICAgbGlu"+"ZS1oZWlnaHQ6IDM2cHg7DQogICAgcGFkZGluZy1sZWZ0OiAxMHB4Ow0KfQ0KIyR7aWR9IC50YWJfaGVhZGVyID4gLnRhYl9idXR0"+"b24gew0KICAgIGZsb2F0OiBsZWZ0Ow0KICAgIG1hcmdpbi1yaWdodDogM3B4Ow0KICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICBw"+"YWRkaW5nLXRvcDogOHB4Ow0KICAgIGZpbHRlcjogYWxwaGEob3BhY2l0eT01MCk7DQogICAgLW1vei1vcGFjaXR5OiAwLjU7DQog"+"ICAgb3BhY2l0eTogMC41Ow0KfQ0KIyR7aWR9IC50YWJfaGVhZGVyID4gLnRhYl9idXR0b24uYWN0aXZlIHsNCiAgICBmaWx0ZXI6"+"IGFscGhhKG9wYWNpdHk9MTAwKTsNCiAgICAtbW96LW9wYWNpdHk6IDEuMDsNCiAgICBvcGFjaXR5OiAxLjA7DQp9DQojJHtpZH0g"+"LnRhYl9oZWFkZXIgPiAudGFiX2J1dHRvbi5kaXNhYmxlZCB7DQogICAgZmlsdGVyOiBhbHBoYShvcGFjaXR5PTEwKTsNCiAgICAt"+"bW96LW9wYWNpdHk6IDAuMTsNCiAgICBvcGFjaXR5OiAwLjE7DQogICAgY3Vyc29yOiBkZWZhdWx0Ow0KfQ0KIyR7aWR9IC50YWJf"+"aGVhZGVyID4gLnRhYl9idXR0b24gLmJ1dHRvbl9zdGFydCB7DQogICAgd2lkdGg6IDNweDsNCiAgICBoZWlnaHQ6IDI4cHg7DQog"+"ICAgZmxvYXQ6IGxlZnQ7DQogICAgYmFja2dyb3VuZDogdXJsKCR7YmFja2dyb3VuZF9iYXNlfWJsYWNrX3RhYnNfbGVmdC5wbmcp"+"IG5vLXJlcGVhdDsNCn0NCiMke2lkfSAudGFiX2hlYWRlciA+IC50YWJfYnV0dG9uIC5idXR0b25fbWlkZGxlIHsNCiAgICBmbG9h"+"dDogbGVmdDsNCiAgICBoZWlnaHQ6IDI4cHg7DQogICAgcGFkZGluZy1sZWZ0OiA1cHg7DQogICAgcGFkZGluZy1yaWdodDogMTBw"+"eDsNCiAgICBwYWRkaW5nLXRvcDogNXB4Ow0KICAgIGJhY2tncm91bmQ6IHVybCgke2JhY2tncm91bmRfYmFzZX1ibGFja190YWJz"+"X3NsaWNlLnBuZyk7DQogICAgY29sb3I6IHdoaXRlOw0KICAgIGZvbnQtc2l6ZTogMTRweDsNCn0NCiMke2lkfSAudGFiX2hlYWRl"+"ciA+IC50YWJfYnV0dG9uIC5idXR0b25fZW5kIHsNCiAgICB3aWR0aDogM3B4Ow0KICAgIGhlaWdodDogMjhweDsNCiAgICBmbG9h"+"dDogbGVmdDsNCiAgICBiYWNrZ3JvdW5kOiB1cmwoJHtiYWNrZ3JvdW5kX2Jhc2V9YmxhY2tfdGFic19yaWdodC5wbmcpIG5vLXJl"+"cGVhdDsNCn0NCiMke2lkfSAudGFiX2xheWVyIHsNCiAgICBoZWlnaHQ6ICR7aGVpZ2h0fTsNCiAgICB3aWR0aDogYXV0bzsNCiAg"+"ICBwYWRkaW5nOiAke3BhZGRpbmd9Ow0KICAgIG1hcmdpbjogMHB4Ow0KICAgIGJhY2tncm91bmQ6ICR7YmFja2dyb3VuZH07DQog"+"ICAgYm9yZGVyOiBzb2xpZCAxcHggIzY2NjsNCiAgICBvdmVyZmxvdzogaGlkZGVuOw0KICAgIGRpc3BsYXk6IG5vbmU7DQp9"),{id:e.id,width:i(e.width),height:i(e.height),padding:i(e.padding),background_base:global.zGraphicsURL,background:e.background||"#111"})));if(e.appendTo){n.appendTo(e.appendTo)}Util.each(e.tabs,function(i,s){var o=c$("div","class:tab_layer").appendTo(n);var u=c$("div","class:tab_button").appendTo(r);if(Util.isString(s)){s={label:s}}c$("div","class:button_start").html(" ").appendTo(u);c$("div","class:button_middle").html(s.label).appendTo(u);c$("div","class:button_end").html(" ").appendTo(u);if(e.overflow){o.css("overflow-y","auto")}if(e.border){o.css("border",e.border)}t.content.push(o);t.buttons.push(u.click(function(){if(u.hasClass("disabled")||u.hasClass("active")){return false}$(".tab_layer",n).hide();$(".tab_button",r).removeClass("active");o.show();u.addClass("active");if(Util.isFunc(s.onclick)){s.onclick()}return false}))});t.content[0].css("display","block");t.buttons[0].addClass("active");return this}function DropDownObject(e,t,n){var r=c$("span","id:"+e).css("margin","0px 2px 0px 2px").attr({name:"checkboxlist",onmouseover:"var c=$('#sort_menu_button',this),p=c.position();p.top+=c.outerHeight();$('#sort_menu',this).css({'left':p.left+1,'top':p.top,'width':c.width()-3}).show();",onmouseout:"$('#sort_menu', this).hide();"});b$("","id:sort_menu_button,class:short black").appendTo(r).width(140).find("span:last").append(c$("span").text(t||"Select").css({"max-width":100,"text-overflow":"ellipsis","float":"left",overflow:"hidden"})).append(c$("img").attr("src",global.zGraphicsURL+"dropdown_travel_arrow.gif").css({"float":"right","margin-top":5})).append(c$("div").css("clear","both"));var i=c$("div","id:sort_menu").appendTo(r);Util.each(n,function(e,t){c$("div").appendTo(i).text(String(t)).css({cursor:"pointer",margin:1}).attr({value:e,name:"checkbox","class":"checkbox",onclick:"$(this).toggleClass('checked');",onmouseover:"$(this).css('background-color','#444')",onmouseout:"$(this).css('background-color','transparent')"})});return r}function showFriendsSelector(e,t){function s(){var e=$(".mfs_selectable ul",r.content);Util.each(global.appFriends,function(t,n){c$("li","class:mfs_add,id:mfs_user_"+n.uid).appendTo(e).text(n.name)});$("li",e).click(i.select)}function o(){var e=$("#fb_friendlists",r.content).empty();c$("option","value:none").appendTo(e).text("Select a Facebook Friendlist");e.attr("curfl","none");facebook.friendlist(function(t){Util.each(t.data,function(t,n){if(n.list_type==="user_created"){c$("option","value:"+n.id).appendTo(e).text(n.name)}})})}function u(){var e=$("#fb_grouplists",r.content).empty();facebook.getGroups(function(t){t[0]="Select a Group";e.attr("curfl","0");Util.each(t,function(t,n){c$("option","value:"+t).appendTo(e).text(n)})})}function a(e){function t(e){Util.each(e,function(e,t){$(".mfs_selectable li#mfs_user_"+t.id,r.content).click()})}if(Util.isSet(n[e])){t(n[e])}else{facebook.friendlistGet(e,function(r){if(r.data){t(n[e]=r.data)}})}}function f(){var e=c$("div","id:mfs_container").appendTo(r.content);c$("div","class:mfs_outer").appendTo(e);e=c$("div","class:mfs_inner").appendTo(e);var t=c$("div","class:mfs").css("float","left").appendTo(e);c$("div","class:mfs_name_filter_container").appendTo(t);c$("div","class:line").appendTo(t);c$("div","class:mfs_selectable").appendTo(t).append(c$("ul"));c$("div","class:line").appendTo(t);c$("div").appendTo(t).append(s$("fb_friendlists",250,{click:i.fbfriendlist_change}));c$("input:text","id:mfs_name_filter,class:mfs_name_filter_box").appendTo(".mfs_name_filter_container").focusin(i.focusin).focusout(i.focusout);t=c$("div","class:mfs").css("float","left").appendTo(e);c$("div","class:mfs_name_title_container").appendTo(t).text("Selected Friends:");c$("div","class:line").appendTo(t);c$("div","class:mfs_selected").appendTo(t).append(c$("ul"));c$("div","class:line").appendTo(t);c$("div").appendTo(t).append(s$("fb_grouplists",250,{click:i.fbgrouplist_change}));c$("div").css("clear","both").appendTo(e);t=c$("div","class:mfs_buttons").appendTo(e);b$("SKIP","class:medium white").appendTo(t).css({"min-width":80,"margin-right":10}).click(i.skip);b$("CLEAR","class:medium white").appendTo(t).css({"min-width":80,"margin-right":10}).click(i.clear);b$("RANDOM FIFTY","class:medium green").appendTo(t).css({"min-width":80,"margin-right":10}).click(i.select_max);b$("SAVE AND CLOSE","class:medium orange").appendTo(t).css({"min-width":80,"margin-right":10}).click(i.save);$("#mfs_name_filter",r.content).keyup(i.filter);r.header.css({"font-size":22,"font-weight":"bold",color:"#FC0","margin-bottom":5,padding:4,"text-align":"center"})}function l(){f();s();o();u();if(t){Util.each(t,function(e,t){$(".mfs_selectable #mfs_user_"+t,r.content).click()})}r.applyCustomClass();r.show();$("#mfs_name_filter",r.content).focus()}var n=new Object;var r=new PopupObject("friend_selection_popup",{type:"normal",title:"Friends Selector",top:50,width:710,background:"black url('"+global.zGraphicsURL+"requests/pop_back.jpg') repeat-x",zIndex:999});var i={skip:function(){r.close();return false},save:function(){r.close();var t=new Array;Util.each(global.appFriends,function(e,n){if(e$(".mfs_selected #mfs_user_"+n.uid,r.content)){t.push({uid:n.uid,name:n.name})}});e(t);return false},select:function(){var e=$(this).clone().removeClass().addClass("mfs_remove");$(".mfs_selected ul",r.content).append(e.click(i.unselect));$(this).addClass("is_added");return false},unselect:function(){$(".mfs_selectable #"+this.id,r.content).removeClass("is_added");$(this).unbind().remove();return false},filter:function(){var e=$(".mfs_selectable",r.content);var t=String($(this).val());if(t.length<1){$("li",e).removeClass("is_hidden")}else{var n=new RegExp(t,"i");Util.each(global.appFriends,function(t,r){var i=$("#mfs_user_"+r.uid,e);if(n.test(r.name)){i.removeClass("is_hidden")}else{i.addClass("is_hidden")}})}return false},focusout:function(){var e=String($(this).val());if(e.length<1){$(this).val("Type a name...")}},focusin:function(){var e=String($(this).val());if(e==="Type a name..."){$(this).val("")}},fbfriendlist_change:function(){var e=$(this).val();var t=$(this).attr("curfl");$(this).attr("curfl",e);if(e!=="none"&&t!==e){a(e)}},fbgrouplist_change:function(){var e=$(this).val();var t=$(this).attr("curfl");$(this).attr("curfl",e);if(e!=="0"&&t!==e){a(e)}},select_max:function(){var e=50;var t=$(".mfs_selectable li:not(.is_added)",r.content);if(t.length>0){e=Math.min(e,t.length);for(;e>0;e--){t.eq(Math.floor(Math.random()*t.length)).click();t=t.filter(":not(.is_added)")}}return false},clear:function(){$(".mfs_selected .mfs_remove",r.content).click();return false}};r.addBase64Style("I2ZyaWVuZF9zZWxlY3Rpb25fcG9wdXAgI21mc19jb250YWluZXIgew0KICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50Ow0KICAg"+"IHdpZHRoOiBhdXRvOw0KICAgIGhlaWdodDogNTQycHg7DQogICAgbWFyZ2luOiAxMHB4IGF1dG87DQp9DQojZnJpZW5kX3NlbGVj"+"dGlvbl9wb3B1cCAjbWZzX2NvbnRhaW5lciAubWZzX291dGVyIHsNCiAgICBib3JkZXI6IDJweCBncm9vdmUgIzQ0NDsNCiAgICBw"+"b3NpdGlvbjogYWJzb2x1dGU7DQogICAgbWFyZ2luOiAwcHggMHB4IDBweCAxMnB4Ow0KICAgIHdpZHRoOiA2NzVweDsNCiAgICBo"+"ZWlnaHQ6IDUyMHB4Ow0KICAgIGJhY2tncm91bmQ6IGJsYWNrOw0KICAgIG9wYWNpdHk6IDAuNjsNCiAgICB0b3A6IDYwcHg7DQog"+"ICAgLW1vei1ib3JkZXItcmFkaXVzOiA4cHg7DQogICAgYm9yZGVyLXJhZGl1czogOHB4Ow0KICAgIC13ZWJraXQtYm9yZGVyLXJh"+"ZGl1czogOHB4Ow0KfQ0KI2ZyaWVuZF9zZWxlY3Rpb25fcG9wdXAgI21mc19jb250YWluZXIgLm1mc19pbm5lciB7DQogICAgcG9z"+"aXRpb246IGFic29sdXRlOw0KICAgIHdpZHRoOiAxMDAlOw0KICAgIGhlaWdodDogNTYwcHg7DQp9DQojZnJpZW5kX3NlbGVjdGlv"+"bl9wb3B1cCAjbWZzX2NvbnRhaW5lciBkaXYubWZzIHsNCiAgICB3aWR0aDogMzExcHg7DQogICAgaGVpZ2h0OiA0MDlweDsNCiAg"+"ICBtYXJnaW4tbGVmdDogMTVweDsNCiAgICBwYWRkaW5nOiAxMHB4Ow0KICAgIGJhY2tncm91bmQ6IHVybCgnJHtiYXNlX3VybH0v"+"cmVxdWVzdHMvTUZTX2JhY2sucG5nJykgbGVmdCB0b3Agbm8tcmVwZWF0Ow0KfQ0KI2ZyaWVuZF9zZWxlY3Rpb25fcG9wdXAgI21m"+"c19jb250YWluZXIgZGl2Lm1mc19uYW1lX2ZpbHRlcl9jb250YWluZXIgew0KICAgIGJhY2tncm91bmQ6IHVybCgnJHtiYXNlX3Vy"+"bH0vcmVxdWVzdHMvYXJyb3cucG5nJykgMTVweCA4cHggbm8tcmVwZWF0Ow0KICAgIHBhZGRpbmc6IDVweCAxMHB4IDVweCA0MHB4"+"Ow0KfQ0KI2ZyaWVuZF9zZWxlY3Rpb25fcG9wdXAgI21mc19jb250YWluZXIgZGl2Lm1mc19uYW1lX3RpdGxlX2NvbnRhaW5lciB7"+"DQogICAgYmFja2dyb3VuZDogdXJsKCcke2Jhc2VfdXJsfS9yZXF1ZXN0cy9hcnJvdy5wbmcnKSAxNXB4IDhweCBuby1yZXBlYXQ7"+"DQogICAgcGFkZGluZzogMTNweCAxMHB4IDVweCAxMDBweDsNCiAgICBjb2xvcjogI0ZDMDsNCiAgICB0ZXh0LWFsaWduOiBsZWZ0"+"Ow0KfQ0KI2ZyaWVuZF9zZWxlY3Rpb25fcG9wdXAgI21mc19jb250YWluZXIgLm1mc19uYW1lX2ZpbHRlcl9ib3ggew0KICAgIGJh"+"Y2tncm91bmQ6IHRyYW5zcGFyZW50Ow0KICAgIGNvbG9yOiB3aGl0ZTsNCiAgICBmb250LXNpemU6IDEzcHg7DQogICAgaGVpZ2h0"+"OiAyNXB4Ow0KICAgIHdpZHRoOiAyNjBweDsNCiAgICBib3JkZXI6IG5vbmU7DQp9DQojZnJpZW5kX3NlbGVjdGlvbl9wb3B1cCAj"+"bWZzX2NvbnRhaW5lciBkaXYubGluZSB7DQogICAgaGVpZ2h0OiAycHg7DQogICAgYmFja2dyb3VuZDogdXJsKCcke2Jhc2VfdXJs"+"fS9yZXF1ZXN0cy9saW5lLnBuZycpIDUwJSA1MCUgbm8tcmVwZWF0Ow0KICAgIGJvcmRlcjogbm9uZTsNCn0NCiNmcmllbmRfc2Vs"+"ZWN0aW9uX3BvcHVwICNtZnNfY29udGFpbmVyIGRpdi5tZnNfc2VsZWN0YWJsZSwNCiNmcmllbmRfc2VsZWN0aW9uX3BvcHVwICNt"+"ZnNfY29udGFpbmVyIGRpdi5tZnNfc2VsZWN0ZWQgew0KICAgIG92ZXJmbG93OiBhdXRvOw0KICAgIG1hcmdpbjogMTBweCA1cHg7"+"DQogICAgaGVpZ2h0OiAzMDBweDsNCn0NCiNmcmllbmRfc2VsZWN0aW9uX3BvcHVwIGRpdi5tZnNfc2VsZWN0ZWQgdWwsICNmcmll"+"bmRfc2VsZWN0aW9uX3BvcHVwIGRpdi5tZnNfc2VsZWN0YWJsZSB1bCB7DQogICAgbWFyZ2luOiAwOw0KICAgIHBhZGRpbmctbGVm"+"dDogMjBweDsNCn0NCiNmcmllbmRfc2VsZWN0aW9uX3BvcHVwIGRpdi5tZnNfc2VsZWN0YWJsZSAubWZzX2FkZCB7DQogICAgY3Vy"+"c29yOiBwb2ludGVyOw0KICAgIGJhY2tncm91bmQ6IHVybCgnJHtiYXNlX3VybH0vcmVxdWVzdHMvcGx1cy5wbmcnKSAxcHggMnB4"+"IG5vLXJlcGVhdDsNCiAgICBwYWRkaW5nLWxlZnQ6IDIwcHg7DQogICAgbGlzdC1zdHlsZS10eXBlOiBub25lOw0KICAgIHRleHQt"+"YWxpZ246IGxlZnQ7DQp9DQojZnJpZW5kX3NlbGVjdGlvbl9wb3B1cCBkaXYubWZzX3NlbGVjdGFibGUgLm1mc19hZGQuaXNfYWRk"+"ZWQsDQojZnJpZW5kX3NlbGVjdGlvbl9wb3B1cCBkaXYubWZzX3NlbGVjdGFibGUgLm1mc19hZGQuaXNfaGlkZGVuIHsNCiAgICBk"+"aXNwbGF5OiBub25lOw0KfQ0KI2ZyaWVuZF9zZWxlY3Rpb25fcG9wdXAgZGl2Lm1mc19zZWxlY3RhYmxlIC5tZnNfYWRkOmhvdmVy"+"IHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjQyNDI0Ow0KfQ0KI2ZyaWVuZF9zZWxlY3Rpb25fcG9wdXAgZGl2Lm1mc19zZWxl"+"Y3RlZCAubWZzX3JlbW92ZSB7DQogICAgY3Vyc29yOiBwb2ludGVyOw0KICAgIGJhY2tncm91bmQ6IHVybCgnJHtiYXNlX3VybH0v"+"cmVxdWVzdHMvY3Jvc3MucG5nJykgMXB4IDJweCBuby1yZXBlYXQ7DQogICAgcGFkZGluZy1sZWZ0OiAyMHB4Ow0KICAgIGxpc3Qt"+"c3R5bGUtdHlwZTogbm9uZTsNCiAgICB0ZXh0LWFsaWduOiBsZWZ0Ow0KfQ0KI2ZyaWVuZF9zZWxlY3Rpb25fcG9wdXAgZGl2Lm1m"+"c19zZWxlY3RlZCAubWZzX3JlbW92ZTpob3ZlciB7DQogICAgYmFja2dyb3VuZC1jb2xvcjogIzI0MjQyNDsNCn0NCiNmcmllbmRf"+"c2VsZWN0aW9uX3BvcHVwIGRpdi5tZnNfYnV0dG9ucyB7DQogICAgdGV4dC1hbGlnbjogcmlnaHQ7DQogICAgbWFyZ2luOiAyMHB4"+"IDQwcHggMCAwOw0KfQ==",{base_url:global.zGraphicsURL});Logger.debug("Loading showUserSelection...");if(global.appFriends){l()}else{loadingScreen("Loading friends...");facebook.getAppFriends(function(e){loadingScreen();if(global.appFriends=e){l()}else{r.destroy();showHelpPopup({icon:"error",message:"Cant load your Mafia Wars Friends."})}})}}function showHelpPopup(e){if(typeof $==="undefined"||typeof e==="undefined"){return}var t=(e.name||"MWAddon")+" says:";var n={info:Resources.getPicture("info_icon"),error:Resources.getPicture("ajax_error"),caution:c$("img").attr("src",global.zGraphicsURL+"cautionTopIcon.png")};if(!Util.isSet(e.message)){e={icon:"info",title:t,message:String(e)}}if(!Util.isSet(e.icon)){e.icon="info"}if(!Util.isSet(e.title)){e.title=t}var r=new PopupObject({type:"help",top:e.top,autoOpen:true,zIndex:99999,closeAfterClick:true,hideCloseButton:e.hideCloseButton,onclose:e.onclose,buttons:e.buttons,width:e.width,content:c$("div").css({"text-align":"left",margin:"5px 30px"}).append(n[e.icon].css("float","left")).append(c$("h4").css("padding","3px 28px").html(e.title)).append(c$("div").css("margin-top",10).html(e.message))});if(!Util.isSet(e.top)){$("#TopField").focus()}if(Util.isSet(e.autoclose)&&parseInt(e.autoclose)>0){setTimeout(r.close,e.autoclose*1e3)}return r}function showPromptPopup(e,t,n,r,i){if(!Util.isString(e)){return}if(!Util.isFunc(n)){return prompt(e,t)}var s=Util.isNumber(r)?c$("textarea").css({width:600,height:r}):c$("input:text").width(600);var o=Util.isNumber(i)?i+"px":"80px";var u=new PopupObject({type:"simple",zIndex:99999,top:o,buttons:[{label:"Accept",onclick:function(){u.close();n&&n(String(s.val()));return false}},{label:"Cancel"}]});c$("div").css("margin","10px 0px 5px 0px").appendTo(u.content).append(c$("h4").css("margin",0).text(e||"write a text:")).append(s);s.val(t||"");u.applyCustomClass();u.show(true)}function showTextPopup(e,t){if(!e||!t){return}var n=c$("textarea","readonly:readonly").css({width:600,height:250}).val(t);var r=new PopupObject({type:"simple",zIndex:99999,buttons:[{label:"Select All",addClass:"short white",onclick:function(){n.select();return false}}]});c$("div").css("margin","10px 0px 5px 0px").append(c$("h4").css("margin",0).text(e)).append(n).appendTo(r.content);r.applyCustomClass();r.show(true)}function showAskPopup(e,t,n,r){if(!Util.isFunc(n)){return confirm(e)}showHelpPopup({icon:"info",title:e,message:t,hideCloseButton:true,buttons:[{label:"Accept",addClass:"short green",onclick:n},{label:"Cancel",addClass:"short white",onclick:r}]})}function showPublishMessage(){if(UserConfig.main.publishPreview===true){return}showHelpPopup({icon:"info",title:"Post Published!",message:"You've published to selected target.",autoclose:3})}function loadingScreen(e){$("#fbmw_menu").mouseleave();if(!Util.isSet(e)||e=="hide"){return $("#overlay_pop").hide()}if(e$("#fbmw_addon_popup #overlay_pop")!==null){$("#loaderText","#overlay_pop").text(e);return $("#overlay_pop").show()}var t=c$("div","id:overlay_pop").hide().appendTo(e$("#fbmw_addon_popup")||c$("div","fbmw_addon_popup").prependTo("#final_wrapper"));c$("div","id:overlay_pop_bg,class:pop_bg").css("z-index",2e4).appendTo(t).show();c$("div","id:overlay_pop_box,class:socialMissionTryAgain").css("z-index",20001).appendTo(t).css("top",100).show().append(c$("div","loaderText").text(e)).append(c$("div").append(c$("img").attr("src","http://mwfb.static.zgncdn.com/mwfb/graphics/socialmissions/ajax-loader.gif")));return t.show()}function showGroupSelection(e,t,n,r){var i=r.top?r.top:150;var s=r.textallowed==false?r.textallowed:true;var o=r.title?r.title:"Post Mafia Wars Message";var u=new PopupObject("target_selection_popup",{type:"simple",top:i,width:560,background:"black url('"+global.zGraphicsURL+"Fight-Explain_bg.jpg') repeat-x",zIndex:99999});var a={select_click:function(){$(this).unbind().addClass("disabled").find("span > span").text("Target Selected!");setTimeout(function(){u.close();t($("#select_fbgroups option:selected",u.content).val(),$("#message_post",u.content).val())},1e3);return false},refresh_click:function(){var t=$(this);if(t.hasClass("disabled")){return false}else{t.addClass("disabled")}global.Groups.refresh(function(){global.Groups.addToSelect("#select_fbgroups",e);t.removeClass("disabled")});return false}};u.addBase64Style("I3RhcmdldF9zZWxlY3Rpb25fcG9wdXAgLmJsYWNrIHsNCglmb250LXdlaWdodDogYm9sZDsNCgljb2xvcjogcmdiKDIwOCwgMjA4LCAyMDgpOyANCglib3JkZXI6IDFweCBzb2xpZCByZ2IoMTUzLCAxNTMsIDE1Myk7IA0KCWJhY2tncm91bmQtY29sb3I6IGJsYWNrOyANCglmb250LXNpemU6IDE0cHg7DQp9DQojdGFyZ2V0X3NlbGVjdGlvbl9wb3B1cCAucG9wdXBfYm9keSB7DQoJbWFyZ2luLXRvcDogMjBweDsNCgltYXJnaW4tcmlnaHQ6IDEwcHg7DQoJbWFyZ2luLWJvdHRvbTogMjBweDsNCgltYXJnaW4tbGVmdDogNTBweDsNCgloZWlnaHQ6IDIwMHB4Ow0KCXRleHQtYWxpZ246IGxlZnQ7DQp9DQojdGFyZ2V0X3NlbGVjdGlvbl9wb3B1cCBhIHsNCgl0ZXh0LWRlY29yYXRpb246IG5vbmU7DQoJZm9udC1zaXplOiAxNHB4Ow0KfQ0KI3RhcmdldF9zZWxlY3Rpb25fcG9wdXAgcCB7DQogICAgbWFyZ2luOiAxcHg7DQoJcGFkZGluZzogMHB4Ow0KfQ==");c$("div","class:popup_body").appendTo(u.content).append(c$("p").text(o+" :").css("margin-bottom",1)).append(c$("textarea","id:message_post").width(450).height(120)).append("<br />").append(c$("p").text("Select Destination:").css("margin-bottom",1)).append(c$("select","id:select_fbgroups").css("margin-right",5).width(400)).append(c$("a","href:#").text("Refresh").click(a.refresh_click)).append("<br />").append(t$("fbGroupFilter","Filter :",150)).append("<br />");c$("a","title:This will set the default group to preload before posting. You can also remove groups from this list in Configuration Menu").text("Set As Default Group").css({position:"relative",right:"125px"}).appendTo(u.content).click(function(){UserConfig.main.set("defaultfbgroup",$("#target_selection_popup #select_fbgroups").val());UserConfig.main.save();$(this).unbind();$(this).text("Updated default")});b$("Publish","class:medium white").appendTo(u.content).click(a.select_click);if(Util.isString(n)){$("#message_post",u.content).val(n)}global.Groups.addToSelect("#target_selection_popup #select_fbgroups",e);if(s==false){$("#message_post",u.content).attr("readonly","readonly")}$("#target_selection_popup #select_fbgroups").val(UserConfig.main.defaultfbgroup);$("#select_fbgroups").filterByText($("#fbGroupFilter"),true);u.applyCustomClass();u.show()}function showVerInfoPopup(e){var t=new PopupObject("version_info_popup",{type:"simple",top:100,width:645,background:"#161616 url('"+global.zGraphicsURL+"clan_chat/settings_popup_bgrnd_1.png') repeat-x",zIndex:9999});c$("div","class:info_header").html(e.message).appendTo(t.content);var n=c$("div","class:info_body").appendTo(t.content);c$("div").appendTo(t.content).css("margin","12px 10px 5px 10px").append(c$("span").text("MWAddon requires some effort, if you think this work deserves a reward, you can donate at:"));c$("a","target:_black").appendTo(t.content).attr("href","https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=BCPYPXA3GDDBN").append(c$("img").attr("src","https://www.paypal.com/en_US/i/btn/btn_donate_SM.gif"));c$("center").css({"padding-top":12,"border-top":"1px dotted #333"}).appendTo(t.content).append(b$(e.isnew?"Update Now!":"Go to Page","class:medium white").attr("onclick","window.open('"+e.url+"', '_blank');return false;"));$("#popup_fodder_zmc").empty();n.append(c$("p").text("Loading version history..."));n.append(c$("span").text("Wait a moment while history is loaded, "));n.append(c$("a","target:_black").attr("href",e.history).text("or click here."));httpXDRequest({method:"GET",url:e.history,onload:function(e){n.html(h$(e.responseText).find("table tr.by-author:first td.body").html())}});t.addBase64Style("I3ZlcnNpb25faW5mb19wb3B1cCAuaW5mb19oZWFkZXIgew0KICAgIGhlaWdodDogNTVweDsNCiAgICBmb250LXNpemU6IDE2cHg7"+"DQogICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQp9DQojdmVyc2lvbl9pbmZvX3BvcHVwIC5pbmZvX2JvZHkgew0KICAgIHRleHQtYWxp"+"Z246IGxlZnQ7DQogICAgb3ZlcmZsb3cteTogYXV0bzsNCiAgICBtYXJnaW46IDBweCAyNXB4IDBweCAzNXB4Ow0KICAgIGhlaWdo"+"dDogMzIwcHg7DQogICAgcGFkZGluZy1yaWdodDogMTBweDsNCiAgICBmb250LXNpemU6IDEycHg7DQp9DQojdmVyc2lvbl9pbmZv"+"X3BvcHVwIC5pbmZvX2JvZHkgcHJlIHsNCiAgICBtYXJnaW46IDBweCAwcHggNXB4IDBweDsNCiAgICBmb250LXNpemU6IDEycHg7"+"DQogICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgYmFja2dyb3VuZC1jb2xvcjogIzMzMzsNCiAgICBib3JkZXI6IDFweCBzb2xp"+"ZCAjNDQ0Ow0KICAgIHBhZGRpbmc6IDFweCA1cHggMXB4IDVweDsNCn0NCiN2ZXJzaW9uX2luZm9fcG9wdXAgLmluZm9fYm9keSB1"+"bCB7DQogICAgbWFyZ2luOiAwcHggMHB4IDVweCAwcHg7DQogICAgYm9yZGVyLWJvdHRvbTogMXB4IGRvdHRlZCAjMzMzOw0KICAg"+"IHBhZGRpbmctYm90dG9tOiAxMHB4Ow0KfQ==");t.show()}function showBookmarkEditor(e,t){var n=/cb|tmp|xw_person/i;var r=new PopupObject("edit_link_popup",{type:"simple",top:150,width:560,background:"black url('"+global.zGraphicsURL+"Fight-Explain_bg.jpg') repeat-x",zIndex:99999,buttons:[{label:"Save",addClass:"short white",onclick:function(){e&&e({name:$("#link_name",r.content).val(),url:$("#link_url",r.content).val()});r.close();return false}}]});if(Util.isSet(t)&&t.url){t.params=new Object;Util.each(Util.uSplit(t.url),function(e,r){if(!n.test(e)){t.params[e]=r}});if(t.params.xw_action!=="travel"){t.params.xw_action="view"}t.city=global.city(t.params.xw_city||1).name;t.url=$.param(t.params)}else{t={}}r.content.css({"font-size":14,padding:"10px 0px 15px 20px","text-align":"left",color:"#FFD927"}).append(c$("div").text("Bookmark Name:").css("margin-bottom",1)).append(c$("input:text","id:link_name").width(500).val(t.name||"")).append(c$("div").text("Destination:").css("margin-bottom",1)).append(c$("input:text","id:link_url").width(500).val(t.url||"")).append(c$("div").css({"margin-top":5,clear:"both"}));if(Util.isSet(t.city)){x$("force_travel","Does this link requires to travel to "+t.city+"?","div").appendTo(r.content).click(function(){var e="xw_controller=travel&xw_action=travel";var n=Util.uSplit(t.url);if($(this).hasClass("checked")){e+="&from="+n.xw_controller+"&destination="+n.xw_city;Util.each(n,function(t,n){if(!/from|destination|xw_controller|xw_action|xw_city/.test(t)){e+="&"+t+"="+n}})}else{e=t.url}$("#link_url",r.content).val(e)})}r.applyCustomClass();r.show()}function MWAddonPlugin(e){var t=this;t.active=false;t.name="New Plugin";t.src=Plugins.SRC_PLAIN_TEXT;t.runat=Plugins.RUNAT_USER_CLICK;t.code=Plugins.CODE_EMPTY;if(e){if(e.click){e.code=e.click}Util.each(t,function(n,r){if(!Util.isFunc(r)){t[n]=UserConfig.toType(e[n],r)}});e=null}return t}function MWAddonReminder(e){var t=this;t.id=e&&e.id||Reminders.collection.length;t.active=false;t.important=false;t.name="New Reminder";t.description="Type here a description";t.lastcheck=0;t.checktype=0;t.every=0;t.resetonload=false;t.resetonloadurl="";if(e&&e.v2){t.v2=true;t.jstest="return true;";t.jsexec=""}else{t.gotocity=false;t.gotocityid=1;t.gotopage=false;t.gotopageurl="";t.runplugin=false;t.runpluginid=0}if(e){Util.each(t,function(n,r){if(!Util.isFunc(r)){t[n]=UserConfig.toType(e[n],r)}});e=null}return t}function FriendSelectorGetTiny(){function l(n){e.ui=function(e,t){t({request:"new_request_id"})};t.Ajax.request=function(e,t){n(e)};t.Request.setTabFriendLists({1:[123456789]});t.Request.setSelectableForTab(1);t.Request.selectFriend(123456789);t.Request.submitMFS()}function c(){var e=document.createElement("input");e.setAttribute("style","position: relative; top: -3px; width: 180px; height: 30px; margin-left: 5px;");e.setAttribute("type","button");e.setAttribute("value","Get Tiny URL");return e}function h(e){var t=document.createElement("input");i.innerHTML="";o.innerHTML="<br><br><span>Your Tiny URL: </span><br><br>";i.appendChild(o);i.appendChild(t);t.setAttribute("style","height: 22px;"+"text-align:center; width: 500px; font-weight: bold; color: rgb(208, 208, 208); "+"border: 1px solid rgb(153, 153, 153); background-color: black; font-size: 14px;");t.setAttribute("type","text");t.setAttribute("readonly","readonly");t.value=a+" => "+e}function p(){var e=c();n+=r+"-"+a+"&url="+escape(f);i.innerHTML="";o.innerHTML="<br><br><span>Click to Open a new Tab: </span><br><br>";i.appendChild(o);i.appendChild(e);e.setAttribute("onclick","window.open('"+n+"'); return false;")}var e=unsafeWindow.FB;var t=unsafeWindow.MW;var n="http://tinyurl.com/create.php?alias=";var r=Math.round((new Date).getTime()/1e3);var i=document.getElementById("mfs_container").parentNode;var s=i.querySelector("div");var o=document.createElement("div");var u=c();var a=i.querySelector(".request_item_container > div").innerText;var f;o.setAttribute("style","font-size:22px; font-weight:bold; color:#FFCC00; margin-bottom:5px; padding:4px; text-align:center;");i.insertBefore(o,s);o.innerHTML="<span>MWAddon Get Tiny URL: </span>";o.appendChild(u);u.addEventListener("click",function(){var e=document.createElement("img");e.setAttribute("src","http://mwfb.static.zgncdn.com/mwfb/graphics/socialmissions/ajax-loader.gif");i.innerHTML="<br><br>";i.appendChild(e);l(function(e){var t=Util.uSplit(e);f=MW.getExtURL("freegifts","accept_gift")+"&next_params="+escape(t.data);getShortURL(f,h,p)})},false);return false}function MWAddonMessage(e){function n(){t.animate({opacity:1,left:"50%"},{complete:function(){t.attr("timeout",setTimeout(function(){t.animate({opacity:0,left:"100%"},{complete:function(){t.remove()}})},5500))}})}var t=e$("#deposit_message");if(Util.isSameString(global.NotifyMsg,e)){return}log(e);global.NotifyMsg=e;if(t!==null){clearTimeout(t.attr("timeout"));setTimeout(function(){try{t.stop().css({opacity:0,left:0})}catch(e){}n()},500)}else{t=c$("div","deposit_message").html(e).prependTo("#mw_masthead").css({opacity:0,position:"absolute",left:0,width:"80%",height:20,top:0,padding:2,background:"url("+global.zGraphicsURL+"empire/header_module_gradient.gif) repeat-x","z-index":999,border:"2px solid #666","text-align":"center","font-weight":"bold"});t.css("margin","0px -"+String(t.outerWidth()/2)+"px")}n()}function AutoActions(e){var t=MW.evaluateUserFields(e);if(!Util.isSet(t)){return}var n=parseInt(UserConfig.main.autoHealIn);var r=parseInt(t["current_city_id"]);var i=t["user_cash"];var s=t["user_health"];var o=t["user_level"];var u=t["exp_to_next_level"];var a=t["user_stamina"];var f=t["user_energy"];if(UserConfig.main.get("opt_clanxp")){var l=(new Date).getTime();var c=10*1e3;if(l>=global.ClanXpCheckTime+c){global.ClanXpCheckTime=l;var h=Math.round(a*2.2)+Math.round(f*2.2);var p=u-h;MW.collectClanXp(p,MWAddonMessage)}else{}}if(demonUpgrade()==false)if(UserConfig.main.autolevel===true&&o>parseInt(UserConfig.main.savedlevel)){MW.levelCollect(o,MWAddonMessage)}if(UserConfig.main.autoHeal===true&&s<UserConfig.main.autoHealWhen&&demonRunning("fight")==false){MW.heal(n===1?n===r?0:1:0,MWAddonMessage)}var d=UserConfig.main.autoDeposit[r];if(d.active===true&&demonRunning("bank")==false){if(i>d.amount){MW.deposit(r,i,MWAddonMessage)}}}function Battlefieldv2(autoCallback){function genMainDom(){function r(e,t){var n=c$("div").appendTo(e).css({"float":"left","text-align":"left",margin:5,width:500});var r=c$("div",t+"_table").appendTo(e).css({"float":"left","padding-top":50});Util.each([{id:"add_new_list",btnclass:"green",name:t,text:"Add New",evt:Events.addNewToList_click},{id:"delete_item_list",btnclass:"orange",name:t,text:"Delete",evt:Events.deleteSelected_click},{id:"clear_list",btnclass:"red",name:t,text:"Clear List",evt:Events.clearList_click},{id:"go_profile",btnclass:"grey",name:t,text:"View Profile",evt:Events.mwProfile_click},{id:"add_from_list",btnclass:"white",name:t,text:"Load List",evt:Events.addFromList_click},{id:"get_current_list",btnclass:"white",name:t,text:"Save List",evt:Events.getList_click}],function(e,t){b$(t.text,"id:"+t.id+",name:"+t.name+",class:short "+t.btnclass+" fightV2AttackBtn").appendTo(c$("dl").appendTo(r).css("margin",5)).click(t.evt)});return n}popupElt.content.css("margin",0);var e=c$("div","id:fv2_widget_wrapper").appendTo(popupElt.content).css({height:350,"max-height":350});c$("div","id:fight_wrapper").appendTo(e);var t=new TabObject({id:"fightOpt",height:310,background:"transparent",appendTo:c$("div","options_wrapper").appendTo(e),tabs:["Config Page 1","Config Page 2","BlackList","WhiteList","FriendClanList","EnemyClanList"]});var n=c$("ul").appendTo(t.getLayout(0));c$("li").appendTo(n).append(x$("bfopt_traveltostartcity","Start City:")).append(s$("bfopt_startcity",100)).append(c$("span").text("Travel To:")).append(DropDownObject("bfopt_travelto","Select cities",global.cityNames)).append(x$("bfopt_timercityactive","After:")).append(n$("bfopt_timercitymins",40)).append(c$("span").text("min.")).append(x$("bfopt_travelautomatic","Automatic."));c$("li").appendTo(n).append(x$("bfopt_healactive","Heal in")).append(s$("bfopt_healcity",100)).append(n$("bfopt_healbelow","Health below",40)).append(n$("bfopt_healminsta","Stamina above",40)).append(x$("bfopt_healattacking","Attacking. ")).append(n$("bfopt_healtimer","Timer:",40)).append(c$("span").text("sec."));c$("li").appendTo(n).append(x$("bfopt_rapidfireactive","Rapid Burst When Health ")).append(s$("bfopt_rapidfirehealth",70)).append(c$("span").text("Burst :")).append(s$("bfopt_rapidburstattacks",50)).append(n$("bfopt_rapidfireattacks","Max. Count:",35)).append(n$("bfopt_rapidfiretiming","Timing:",35)).append(x$("bfopt_rapidfireautotiming","Auto Timing."));c$("li").appendTo(n).append(x$("bfopt_attackusemax","Maximum attacks:")).append(n$("bfopt_attackmax",60)).append(x$("bfopt_attackuseperfoe","Attacks Per Foe:")).append(n$("bfopt_attackperfoe",60)).append(n$("bfopt_attackretries","Error Retries:",40)).append(x$("bfopt_attackpwr","Power Attack!"));c$("li").appendTo(n).append(x$("bfopt_attackrevenge","Revenge thiefs:")).append(s$("bfopt_attackrevengefilter",200)).append(x$("bfopt_timerrivalsactive","Attack Rivals every")).append(n$("bfopt_timerrivalsmins","(min.):",40));c$("li").appendTo(n).append(x$("bfopt_rediceactive","RedICE if attacks below:")).append(n$("bfopt_redicemaxattk",35)).append(x$("bfopt_rediceafterwon","AutoRedICE if you won.")).append(x$("bfopt_rediceepicbattle","AutoRedICE if in Epic Battle."));c$("li").appendTo(n).append(x$("bfopt_attkdelayusea","Delay when attack same player:")).append(s$("bfopt_attkdelaya",70)).append(x$("bfopt_attkdelayuseb","Delay when changing player")).append(s$("bfopt_attkdelayb",70));c$("li").appendTo(n).append(x$("bfopt_levelrangeactive","Level:")).append(n$("bfopt_levelrangemin",40)).append(n$("bfopt_levelrangemax","-",40)).append(s$("bfopt_levelrangemethod","is:",90)).append(s$("bfopt_comparerangemethod",60)).append(x$("bfopt_mafiarangeactive","Mafia:")).append(n$("bfopt_mafiarangemin",40)).append(n$("bfopt_mafiarangemax","-",40)).append(s$("bfopt_mafiarangemethod","is:",90));c$("li").appendTo(n).append(x$("bfopt_publishactive","Auto Publish after:")).append(s$("bfopt_publishafter",80)).append(t$("bfopt_publishto","ices to page/group (empty for wall):",180));c$("li").appendTo(n).append(x$("bfopt_usestampack","Use StaminaPack if exp. above:")).append(n$("bfopt_usestampackwhen",50)).append(x$("bfopt_usehealpack","Use HealthPack if stamina above:")).append(n$("bfopt_usehealpackwhen",50));n=c$("ul").appendTo(t.getLayout(1));c$("li").appendTo(n).append(x$("bfopt_namefilteractive","Name filter:","div").css({width:90,"float":"left"})).append(c$("input:text","id:bfopt_namefilterexpr,readonly:readonly").width(520).css("margin-right",5)).append(c$("a","for:bfopt_namefilterexpr").text("EDIT").click(Events.editFilter));c$("li").appendTo(n).append(x$("bfopt_badgefilteractive","Badge filter:","div").css({width:90,"float":"left"})).append(c$("input:text","id:bfopt_badgefilterexpr,readonly:readonly").width(520).css("margin-right",5)).append(c$("a","for:bfopt_badgefilterexpr").text("EDIT").click(Events.editFilter));c$("li").appendTo(n).append(x$("bfopt_skipiced","Skip Iced targets.")).append(x$("bfopt_skipicedbyme","Skip iced by me.")).append(x$("bfopt_skipusemincash","Skip cash below:")).append(n$("bfopt_skipbymincash",40)).append(x$("bfopt_skipwrongcash","Skip wrong cash."));c$("li").appendTo(n).append(x$("bfopt_refreshon","Maximum opponents per fightlist:")).append(n$("bfopt_refreshmax",40)).append(x$("bfopt_epicbattle","Join family Battles.")).append(n$("bfopt_epicbattlerefresh","Refresh:",40)).append(x$("bfopt_epicbattlefortress","Attack Fortress."));c$("li").appendTo(n).append(x$("bfopt_skipusehealth","Skip health:")).append(s$("bfopt_skiphealth",80)).append(x$("bfopt_skipunderattk","Skip under attack if damage")).append(s$("bfopt_skipunderattkpct",80)).append(x$("bfopt_skiphealed","Skip Healed."));c$("li").appendTo(n).append(x$("bfopt_stopbyices","Stop when ICE amount is more than:")).append(n$("bfopt_stopiceamount",40)).append(x$("bfopt_stopkeepstaon","Stop If stamina is less than:")).append(n$("bfopt_stopkeepsta",40));c$("li").appendTo(n).append(x$("bfopt_stopbylevelup","Stop after LevelUp.")).append(x$("bfopt_stopkeepexpon","Stop before LevelUp and keep:")).append(c$("span").text("Exp.")).append(n$("bfopt_stopkeepexp",40)).append(x$("bfopt_skipbossbots","Skip Boss Bots."));c$("li").appendTo(n).append(x$("bfopt_stopautomatic","Stop AutoFight if health fall down quickly.")).append(x$("bfopt_stopresume","Keep and resume after (min):")).append(n$("bfopt_stopresumedelay",40));c$("li").appendTo(n).append(x$("bfopt_timerstartactive","Start Fighting after (min):")).append(n$("bfopt_timerstartmins",40)).append(x$("bfopt_timerfightactive","AutoPause after (min):")).append(n$("bfopt_timerfightmins",40)).append(n$("bfopt_timerfightresume"," resume after (min): ",40));c$("li").appendTo(n).append(c$("label","for:bfopt_maxloglength").text("Log Length:")).append(s$("bfopt_maxloglength",100).css("margin-left",5)).append(x$("bfopt_showsocialevents","Show social events."));$("a",n).css("margin-left",5);r(t.getLayout(2),"blackList").append(x$("bfopt_useblacklist","Add players who defeat me to BlackList:")).append(c$("a","href:#").text("Hardest Level Range").css("font-weight","bold").click(Events.hardLevelRange_click)).append(c$("div").css({clear:"both","margin-top":5})).append(c$("select","id:bfopt_blacklist,multiple:multiple").width(500).height(270));r(t.getLayout(3),"whiteList").append(x$("bfopt_usewhitelist","Add players i win against & has cash to whitelist:")).append(c$("div").css({clear:"both","margin-top":5})).append(x$("bfopt_whitelistcountactive","Attack list :")).append(n$("bfopt_whitelistcount",40)).append(c$("span").text(" times.")).append(x$("bfopt_randomizewhitelist","Randomize.")).append(c$("div").css({clear:"both","margin-top":5})).append(c$("select","id:bfopt_whitelist,multiple:multiple").width(500).height(250));r(t.getLayout(4),"frdClanList").append(c$("div").text("Add your friendly families to skip here:")).append(c$("div").css({clear:"both","margin-top":5})).append(c$("select","id:bfopt_frdclanlist,multiple:multiple").width(500).height(270));r(t.getLayout(5),"enmClanList").append(c$("div").text("Add your Enemy families to attack here:")).append(c$("div").css({clear:"both","margin-top":5})).append(c$("select","id:bfopt_enmclanlist,multiple:multiple").width(500).height(270));var i=c$("div","id:wrapper_info").appendTo(popupElt.content);var s=c$("div","class:fightV2_msg_ctrl").appendTo(i);c$("div","class:fightV2_result").appendTo(i);c$("div").css("clear","both").appendTo(i);c$("center","ctrlcontainer").appendTo(s).append(c$("span").text("Attack :").css({padding:10})).append(b$("FightList","class:short red fightBtn disabled,title:Fight random mafia players on the fight list").click(Events.autoMode_click)).append(b$("WhiteList!","class:short red fightBtn disabled,title:Fight your battlefield whitelist").css("margin-left",4).click(Events.attackWhiteList_click)).append(b$("Families List!","class:short red fightBtn disabled,title:Fight a family list you have added").css("margin-left",4).click(Events.attackFamily_click)).append(b$("Bucket!","class:short red fightBtn disabled,title:Fight a bucketlist").css("margin-left",4).click(Events.attackBucket_click));c$("center","msgcontainer").css("margin",5).appendTo(s);var o=c$("div","id:wrapper_log_stats").appendTo(popupElt.content);var u=c$("div","class:fightV2_stats").appendTo(o);Util.each([{name:"Current City:",cls:"stat_travel",id:"currcityname"},{name:"Total Fights:",cls:"stamina",id:"fightCount"},{name:"Won Fights:",cls:"attack",id:"fightWon"},{name:"Lost Fights:",cls:"defense",id:"fightLost"},{name:"Foes Attacked:",cls:"attack",id:"foesAttacked"},{name:"Foes Ice/Kill:",cls:"stat_kill",id:["killWon","icesWon"]},{name:"Session Ices:",cls:"stat_kill",id:"session_ices"},{name:"Stolen Ices:",res:"thief_icon",id:"icesLost"},{name:"Revenges:",cls:"attack",id:"revenge"},{name:"Clan fight XP:",cls:"stat_iced",id:["exp_fight_max","exp_fight"]},{name:"Ice Season:",cls:"stat_iced",id:["season_target","season_ices"]},{name:"Total Ices:",cls:"stat_iced",id:"total_ices"},{name:"Attack gained:",cls:"mafia_attack",id:"atkgained"},{name:"Defense gained:",cls:"mafia_defense",id:"defgained"},{name:"Exp. gained:",cls:"experience",id:["exptonextlevel","expGained"]},{name:"Exp. per stamina:",cls:"experience",id:"exp_per_sta"},{name:"Victory Coins:",cls:"stat_victory",id:"coinsGained"},{name:"Cash:",cls:"cash",id:"cash"},{name:"PowerPack:",cls:"stat_powerpack",id:"powerpack"},{name:"Load Rivals:",res:"timer_icon",id:"loadrivals"},{name:"Auto Travel:",res:"timer_icon",id:"timetotravel"},{name:"Auto Pause:",res:"timer_icon",id:"timetopause"}],function(e,t){var n=c$("span").text(t.name);var r=c$("dl").appendTo(u);if(t.cls){r.append(c$("dt","class:"+t.cls).append(n))}else{if(t.icn){r.append(c$("img").attr("src",global.zGraphicsURL+t.icn))}else if(t.res){r.addClass(Resources.className(t.res)).css({width:"auto","padding-left":19})}r.append(c$("dt").append(n))}if(Util.isString(t.id)){r.append(c$("dd","id:mass_stat_"+t.id).text("0"))}else{r.append(c$("dd","id:mass_stat_"+t.id[0]).text("0"));r.append(c$("dd").text("/"));r.append(c$("dd","id:mass_stat_"+t.id[1]).text("0"))}});(function(e){var t,n=c$("div","events_list").appendTo(e);c$("div","class:buttons").appendTo(n).append(c$("a","href:#items,class:selected").text("General").click(Events.showLog_click)).append(c$("a","href:#loot").text("Loot").click(Events.showLog_click)).append(c$("a","href:#iced").text("Ices").click(Events.showLog_click)).append(c$("a","href:#events").text("Events").click(Events.showLog_click));c$("div","id:items_logs,class:player_updates").height(420).appendTo(n);c$("div","id:loot_logs").appendTo(n).append(c$("div","class:buttons").css("text-align","right").append(c$("a","href:#name").text("Name").click(Events.sortloot_click)).append(c$("a","href:#attack").text("Attack").click(Events.sortloot_click)).append(c$("a","href:#defense").text("Defense").click(Events.sortloot_click)).append(c$("a","href:#best").text("Best").click(Events.sortloot_click))).append(c$("ul","id:lootlistlog").height(401));t=c$("div","id:iced_logs").height(420).css("text-align","center").appendTo(n);c$("textarea","readonly:readonly,id:text_plain_ice_log").css({width:"90%",height:"90%",color:"white","background-color":"transparent",border:0}).appendTo(t);c$("div").css("clear","both").appendTo(t);b$("Post Ices","id:post_ice_listings,class:short orange disabled").css({"float":"right","margin-right":15}).click(function(){function n(){showGroupSelection(0,function(e,t){if(e==0)e="me";MWFB.api("/"+e+"/feed","post",{message:t},function(e){if(!e||e.error){log("Error occured")}else{showAskPopup("View Ice Post?","Would you like to view this ice posting?",function(){unsafeWindow.open("http://www.facebook.com/"+e.id,"_blank")});log("Post ID: "+e.id)}})},e,t)}var e=$("#text_plain_ice_log").val();if(e.length<1)return;var t={textallowed:false};if(typeof MWFB=="undefined"){facebook.init(n);return}else{n()}}).appendTo(t);b$("Select All","id:select_ice_listings,class:short green disabled").css({"float":"right","margin-right":15}).attr("onclick","$(this).prevAll('textarea').select(); return false;").appendTo(t);b$("Clear","id:clear_ice_listings,class:short green").css({"float":"right","margin-right":15}).click(function(){UserConfig.main.set("cache_ice_log","");$(this).prevAll("textarea").val("");$(this).hide;return false}).appendTo(t);c$("div","id:events_logs").height(420).appendTo(n).append(c$("ul","id:eventslogger"));t=c$("div","opponents_list").appendTo(e);c$("div","class:header").appendTo(t).append(c$("a","sort_by_name").text("Name").click(Events.sort_click)).append(c$("a","sort_by_level").text("Level").click(Events.sort_click)).append(c$("a","sort_by_mafia").text("Mafia").click(Events.sort_click)).append(c$("a").text("Refresh").click(Events.refresh_click));c$("div","id:opponents_table,class:player_updates").appendTo(t)})(c$("div","class:fightV2_log").appendTo(o));popupElt.applyOptions({bfopt_healcity:global.cityNames,bfopt_startcity:global.cityNames,bfopt_rapidburstattacks:{1:"1",2:"2",3:"3",4:"4"},bfopt_comparerangemethod:{AND:"AND",OR:"OR"},bfopt_attkdelaya:{1:"1-3",2:"2-4",3:"3-5",4:"1-5"},bfopt_attkdelayb:{1:"1",2:"2",3:"3",4:"4"},bfopt_levelrangemethod:{attk:"Attacked",skip:"Skipped"},bfopt_mafiarangemethod:{attk:"Attacked",skip:"Skipped"},bfopt_attackrevengefilter:{0:"Attack to everyone",1:"Attack to any level/mafia",2:"Use all filters"},bfopt_maxloglength:{10:"10",50:"50",100:"100",250:"250",500:"500",1e3:"1000"},bfopt_publishafter:{5:"5",10:"10",15:"15",20:"20"},bfopt_skiphealth:{20:"> 20%",30:"> 30%",40:"> 40%",50:"> 50%",60:"> 60%",70:"> 70%",80:"> 80%",90:"> 90%",100:"> 100%"},bfopt_skipunderattkpct:{5:"> 5%",10:"> 10%",15:"> 15%",20:"> 20%",25:"> 25%",30:"> 30%",40:"> 40%",50:"> 50%"},bfopt_rapidfirehealth:{5:"< 5%",10:"< 10%",15:"< 15%",20:"< 20%",30:"< 30%",40:"< 40%",50:"< 50%",60:"< 60%",70:"< 70%",80:"< 80%",90:"< 90%",100:"< 100%"}})}function showDiv(e,t,n,r){$("div[id*="+t+"],ul[id*="+t+"]",popupElt.content).stop().css("opacity",1).hide();if(n===true){$("#"+e+t,popupElt.content).fadeIn(1e3,r)}else{$("#"+e+t,popupElt.content).show()}}function setAttackTimer(e){if(options.attkdelayUseA!==true){e();return}var t=1,n=3,r=5;switch(options.attkdelayA){case 2:t=2;n=4;break;case 3:t=3;n=5;break;case 4:n=5;break}r=Math.floor(Math.random()*(n-t+1))+t;StatusTimer.start("Ready to attack "+PlayerList.current.anchor()+" in %N% seconds...",r,e)}function setAttackNewTimer(e){if(options.attkdelayUseB!==true){e();return}var t=options.attkdelayB;if(!Util.isSet(t)||t<1){t=2}StatusTimer.start("Ready to attack "+PlayerList.current.anchor()+" in %N% seconds...",t,e)}function addMWProfiles(e,t){if(!Util.isSet(PlayerList[e])){Logger.error("Attempt to add MW Profiles in unknow list name.");return}t=t.replace(/p\|/g,"");var n=/(profile|family).php\?id=([^\n&]+)|user=([^\n&]+)|^([\s\d,\n]+)$/g;var r,i=[];var s=/clanList/i.test(e);var o=new Array;while(r=n.exec(unescape(t))){if(r[2]){r=Util.trim(r[2]);if(r.indexOf("{")!==-1){r=Util.parseJSON(r);r=r.id||r.user;if(r){i.push(Base64.decode(r))}}}else if(r[3]){i.push(Base64.decode(r[3]))}else if(r[4]){i=String(r[4]).split(/[\s,\n]+/);break}}if(i.length<1){return}var u=new Collection(i);u.onMove(function(t,n,r){try{var i;if(PlayerList[e].exists(Util.parseNum(r))){u.MoveNext();return}if(s){i="remote/"+MW.getIntURL("clan")+"&from_red_link=1&id=";i+=Base64.encode(r)}else{if(String(r).charAt(0)!=="p"){r="p|"+r}i="remote/"+MW.getIntURL("stats")+"&user="+r}httpAjaxRequest({url:i,message:"Loading id: "+r,success:function(t){var n;if(s){n=parseClanProfile(t);n.id=r}else{n=getOpponentFromProfile(t)}if(!n.error_msg){PlayerList[e].add(n)}else{o.push(Util.setColor(r,"red")+": "+n.error_msg)}u.MoveNext()}})}catch(a){u.MoveNext();Logger.error(a)}});u.onEnd(function(){options.toDomElements();options.save();u.clear();if(o.length>0){showHelpPopup({icon:"error",title:"Adding profiles to "+e,message:"There has been encountered the following errors:<br><br>"+o.join("<br>")})}});u.MoveFirst()}function getOpponentFromProfile(e){var t=new CSOpponent;var n=h$(e),r;var i="a:regex(href,xw_action=attack), a:regex(onclick,xw_action=attack)";try{if(e$("#change_title",n)!==null){throw"You can't add yourself"}if(!(t.attack_url=Util.toUrl(n.find(i).eq(0)))){throw"Cant get user url."}if(e$(".zy_popup_box_body_dark a:regex(href,xw_action=remove)")!==null){t.isInMafia=true}t.id=Util.parseNum(Util.uSplit(t.attack_url).opponent_id);r=Util.htmlDecode(n.find(".stats_title .stats_title_text:first").text());t.name=Util.substr(r,'"','"',1,0,0,true);t.level=Util.parseNum(r.substr(r.lastIndexOf('"')+1));return t}catch(s){return{error_msg:s}}}function parseClanProfile(e){var t=new Object;var n=h$(e);try{t.name=n.find("#clan_main #clan_header > h3").text()}catch(r){Logger.error(r);return{error_msg:r.message}}return t}function getFamilyOpponents(e){function r(i){var s="remote/"+MW.getIntURL("clan")+"&from_red_link=1&id=";httpAjaxRequest({url:s+Base64.encode(i.id),success:function(i){var s=h$(i);var o={added:0,family:s.find("#clan_main #clan_header > h3").text(),result:"All families loaded, starting"};s.find("ul#member_list li").each(function(e,t){var n;try{n=Util.uSplit($(".name_n_rank a",t).attr("href")).user;n=Base64.decode(n);gVar.FamilyListArrays.original.push(Util.parseNum(n));o.added++}catch(r){Logger.error("AttackFamilies.getFamily:"+r.message)}});if(n.length>0){o.result="Loading next family";r(n.shift())}else{e()}addLog(Util.render(t,o),"help",null,"attackfamily")}})}var t='Found <span style="color:green;">${added}</span> Players in Family ${family}.<br>${result}...';var n=PlayerList.enmClanList.toArray();gVar.FamilyListArrays.original=new Array;sendMessage("Loading families...",true);PlayerList.clear();if(n.length<1){sendMessage("There is no families in your enemy family list.");stopAutoFight()}else{r(n.shift())}}function getBucketListDetails(e){function n(){return c$("div","class:separator_line").css({height:20})}var t=new PopupObject("runbucketlist_popup",{type:"main",title:"BUCKETLIST",height:300,width:450,top:125,onclose:function(){abort_process=true},buttons:[{label:"Run Bucket!",addClass:"short white",id:"run_bucket",onclick:function(){if(!$("#run_bucket").hasClass("disabled")){options.fromDomElements();options.save();t.destroy();$("#ctrlcontainer",popupElt.content).hide();var n="http://mwlists.com/_api/_export.php?bucket="+UserConfig.bfopt.get("mwlists_api_key");if(UserConfig.bfopt.get("mwlists_use_api_key")){n="http://mwlists.com/_api/_getlive.php?bucket="+UserConfig.bfopt.get("mwlists_api_key")+"&authid="+UserConfig.bfopt.get("mwlists_auth_key")}global.bucket_url=n;if(typeof e=="function")e&&e()}}}]});var r=c$("div","class:info_body").appendTo(t.content);r.append(c$("span","id:bucketservers").css({position:"relative",right:20,top:15}).append(s$("bucket_servers","Bucket Server:",150)));var i=c$("div","id:mwlistbucket").appendTo(r);var s=c$("div","id:luciferbucket").appendTo(r);var o=c$("div","id:checkbucket").appendTo(r);o.css({display:"none"});o.append(c$("div","class:separator_line"));o.append(c$("span","id:bucket_check"));s.css({display:"none"});i.append(n);s.append(n);s.append(c$("div").text("OFFLINE").css({color:"red",position:"relative",height:90}));i.append(t$("bfopt_mwlists_api_key","Bucket Key :",150));i.append(n);i.append(c$("span","id:mwlists_auth_key").css("display","none").append(t$("bfopt_mwlists_auth_key","Auth Code :",150)));i.append(n);i.append(x$("bfopt_mwlists_use_api_key","Use Auth Key"));i.append(c$("div","class:separator_line"));t.applyOptions({bucket_servers:{666:"Lucifers Lists",1:"mwlists.com"}});t.addBase64Style("I3J1bmJ1Y2tldGxpc3RfcG9wdXAgI2J1Y2tldF9zZXJ2ZXIgbGFiZWx7DQpwb3NpdGlvbjogcmVsYXRpdmU7DQpyaWdodDogMjBweDsNCnRvcDogMTVweDsNCn0NCg0KDQojcnVuYnVja2V0bGlzdF9wb3B1cCBkaXYuc2VwYXJhdG9yX2xpbmUgew0KICAgIGNsZWFyOiBib3RoOw0KICAgIG1hcmdpbi10b3A6IDVweDsNCiAgICBib3JkZXIgOjFweCBzb2xpZCAjNEY0RjRGLA0KfQ0KDQojcnVuYnVja2V0bGlzdF9wb3B1cCB0ZXh0YXJlYSB7DQogICAgbWFyZ2luLXRvcDogNXB4Ow0KICAgIHdpZHRoOiA0MDBweDsNCiAgICBoZWlnaHQ6IDE1MHB4Ow0KfQ0KDQojcnVuYnVja2V0bGlzdF9wb3B1cCAjbXdsaXN0c19hdXRoX2tleXsNCnBvc2l0aW9uOiBhYnNvbHV0ZTsgDQpib3R0b206IDEyNXB4OyANCnJpZ2h0OiAxMTBweDsNCn0NCg0KI3J1bmJ1Y2tldGxpc3RfcG9wdXAgc2VsZWN0IHsNCmZvbnQtd2VpZ2h0OiBib2xkOw0KY29sb3I6ICNEMEQwRDA7DQpib3JkZXI6IDFweCBzb2xpZCAjOTk5Ow0KYmFja2dyb3VuZC1jb2xvcjogYmxhY2s7DQotbW96LWJvcmRlci1yYWRpdXM6IDNweDsNCmJvcmRlci1yYWRpdXM6IDNweDsNCi13ZWJraXQtYm9yZGVyLXJhZGl1czogM3B4Ow0KZm9udC1zaXplOiAxM3B4Ow0KbGluZS1oZWlnaHQ6IDE0cHg7DQptaW4taGVpZ2h0OiAxMHB4Ow0KfQ==");t.show();options.toDomElements();$("#bucket_servers").change(function(){var e=$(this).val();if(e==1){$("#mwlistbucket").show();$("#luciferbucket").hide();if($("#run_bucket").hasClass("disabled"))$("#run_bucket").removeClass("disabled")}if(e==666){$("#mwlistbucket").hide();$("#luciferbucket").show();if(!$("#run_bucket").hasClass("disabled"))$("#run_bucket").addClass("disabled")}});if($("#bfopt_mwlists_use_api_key").hasClass("checked")){$("#mwlists_auth_key").show()}$("#bfopt_mwlists_use_api_key").click(function(){var e=$(this).hasClass("checked");if(e){$("#mwlists_auth_key").show()}else{$("#mwlists_auth_key").hide()}})}function getBucketListOpponents(e){function t(){if(!global.bucket_url){getBucketListDetails(t);return}else{log("Pulling data from mwlists.com");sendMessage("Loading bucketlist...",true);$.ajax({type:"GET",url:global.bucket_url,cache:false,dataType:"jsonp",timeout:3e4,crossDomain:true,success:function(e){if(e.length>0&&!Util.isSet(e.error)){for(id in e){var t=Util.parseNum(e[id].mwid);var n=e[id].mwname;log("adding from bucket list -> "+t);if(t>0){UserConfig.bfopt.get("bucketList")[t]=n+" (from bucketlist)"}else{}}UserConfig.bfopt.save(getBucketListOpponents)}else{if(Util.isSet(e.error)){$("#ctrlcontainer",popupElt.content).show();global.bucket_url=false;sendMessage(e.error,false);return}}}})}}log("gVar.BucketListArray.length -> "+gVar.BucketListArray.length);log("PlayerList.bucketList.length()  -> "+PlayerList.bucketList.length());if(gVar.BucketListArray.length<1){if(PlayerList.bucketList.length()>1){PlayerList.bucketList.attack_count++;gVar.BucketListArray=PlayerList.bucketList.toArray()}else{log("Need to update list");var n=(new Date).getTime();var r=5*1e3;if(n>=global.BucketCheckTime+r){global.BucketCheckTime=n;t()}else{StatusTimer.start("Reloading bucket in in %N% seconds.",10,getBucketListOpponents)}return}}log("step 1");var i;i=gVar.BucketListArray.shift();log("step 1-1");if(PlayerList.blackList.exists(i.id)){log("step 1-2");PlayerList.bucketList.remove(i.id);log("step 1-3");Logger.debug('Bucketlist enemy "'+i.name+'" is blacklisted.')}log("step 2");if(Util.isSet(gVar.BucketListCache[i.id])){log("step 3");PlayerList.current=gVar.BucketListCache[i.id].clone();setAttackNewTimer(function(){updateNewOpponent();preAttack()})}else{log("step 4");sendMessage("Loading profile ("+i.name+")...",true);httpAjaxRequest({url:"remote/"+MW.getIntURL("stats")+"&user=p|"+i.id,success:function(t){var n=getOpponentFromProfile(t);if(n.isInMafia){n.error_msg="is in your mafia. Removed from buckelist ."}if(n.error_msg){PlayerList.bucketList.remove(i.id);addEventLog(n,n.error_msg);return}(PlayerList.current=n).isWList=true;gVar.BucketListCache[i.id]=n.clone();updateNewOpponent();preAttack();if(typeof e=="function")e&&e()}})}log("step 5")}function fromFamilyList(){if(gVar.FamilyListArrays.original.length<1){sendMessage("There is no more possible enemies to attack in your family list.");stopAutoFight()}if(!Util.isArray(gVar.FamilyListArrays.current)||gVar.FamilyListArrays.current.length<1){gVar.FamilyListArrays.current=gVar.FamilyListArrays.original.slice()}var e;if(gVar.FamilyListArrays.current.length>1){e=gVar.FamilyListArrays.current.splice(Math.random()*gVar.FamilyListArrays.current.length,1).shift()}else{e=gVar.FamilyListArrays.current.shift()}if(PlayerList.blackList.exists(e)){gVar.FamilyListArrays.original.splice(gVar.FamilyListArrays.original.indexOf(e),1);fromFamilyList();Logger.debug('Enemy Family "'+e+'" is blacklisted.');return}if(Util.isSet(gVar.FamilyListCache[e])){PlayerList.current=gVar.FamilyListCache[e].clone();setAttackNewTimer(function(){updateNewOpponent();preAttack()})}else{sendMessage("Loading profile ("+e+")...",true);httpAjaxRequest({url:"remote/"+MW.getIntURL("stats")+"&user=p|"+e,success:function(t){(PlayerList.current=getOpponentFromProfile(t)).isWList=true;gVar.FamilyListCache[e]=PlayerList.current.clone();updateNewOpponent();preAttack()}})}}function fromRandomWhiteList(){if(gVar.WhiteListArray.length<1){if(PlayerList.whiteList.length()>0&&(!options.whiteListCountActive||PlayerList.whiteList.attack_count<options.whiteListCount)){PlayerList.whiteList.attack_count++;gVar.WhiteListArray=PlayerList.whiteList.toArray()}else{if(options.whiteListCountActive){gVar.AttackWhitelist=false;AttackNewOpponent()}else{sendMessage("No enemy in WhiteList. Please add players to attack.");stopAutoFight("No enemy in WhiteList.")}return}}var e;if(options.randomizeWhiteList&&gVar.WhiteListArray.length>1){e=gVar.WhiteListArray.splice(Math.random()*gVar.WhiteListArray.length,1).shift()}else{e=gVar.WhiteListArray.shift()}if(PlayerList.blackList.exists(e.id)){PlayerList.whiteList.remove(e.id);fromRandomWhiteList();Logger.debug('Whitelist enemy "'+e.name+'" is blacklisted.');return}if(Util.isSet(gVar.WhiteListCache[e.id])){PlayerList.current=gVar.WhiteListCache[e.id].clone();setAttackNewTimer(function(){updateNewOpponent();preAttack()})}else{sendMessage("Loading profile ("+e.name+")...",true);httpAjaxRequest({url:"remote/"+MW.getIntURL("stats")+"&user=p|"+e.id,success:function(t){var n=getOpponentFromProfile(t);if(n.isInMafia){n.error_msg="is in your mafia. Removed from whitelist."}if(n.error_msg){PlayerList.whiteList.remove(e.id);addEventLog(n,n.error_msg);fromRandomWhiteList();return}(PlayerList.current=n).isWList=true;gVar.WhiteListCache[e.id]=n.clone();updateNewOpponent();preAttack()}})}}function refreshPlayerList(e){if(gVar.AttackBucketList===true){getBucketListOpponents(e);return}var t={};if(gVar.AttackInBattle===true){t.name="EpicBattle";t.func="loadBattle"}else{t.name="fight";t.func="load"}sendMessage("Loading "+t.name+" page...",true);httpAjaxRequest({url:"remote/"+MW.getIntURL(t.name),liteLoad:1,success:function(n){var r=0;updateUserFields(n);sendMessage();if(/<!--[^:]*:\s*(fight|epicbattle)_controller/.test(n)){r=PlayerList[t.func](n)}else{Logger.error("Unexpected page, looking for a fight or epicbattle page.")}if(Util.isFunc(e)){e(r)}}})}function genEnemyListDom(){if(PlayerList.length()<1){return}var e=$("#opponents_table").empty();var t="${title}<br>${user}<br>${badge}Level: ${level}";var n=global.zGraphicsURL+"home/icon_hitlist_75x75_01.gif";var r=c$("img",{width:40,height:40,src:global.zGraphicsURL+"home/icon_hitlist_75x75_01.gif"});PlayerList.each(function(i,s){var o=s.iced?"#433":"white";var u=Util.render(t,{title:s.title||"",user:s.anchor(),badge:s.badge&&s.badge.length>0?"["+s.badge+"] ":"",level:s.level});c$("div","class:update_item,id:enemy_player_"+i).css("width","99%").append(c$("div","class:update_timestamp")).append(c$("div","class:update_icon").append(r.clone().attr("src",s.badge_url||n))).append(c$("span","id:player_name,class:update_txt").css({color:o,width:260}).html(u)).append(c$("span","id:player_mafia,class:update_txt").width(50).css("padding",5).text(s.mafia)).append(b$("Attack","class:short red,id:attack_id_"+i).click(Events.attack_click).css({"float":"right","margin-right":15})).appendTo(e)})}function checkMaximumLogs(e){var t=$(e||"#items_logs");if(t.children().length>options.maxLogLength){t.children().last().remove()}}function addGenericLoot(e){if(e.type==="coins"){SessionStats.add("coinsGained",Util.parseNum(e.quantity))}if(!options.get("showSocialEvents")){return}var t="Social Event:<br>"+e.title+" "+e.quantity;var n=c$("div","class:update_item,id:generic_item");c$("div","class:update_timestamp").appendTo(n).html((new Date).toUTCString());c$("div","class:update_icon").appendTo(n).append(c$("img").attr({width:40,height:40,src:e.pic}));c$("div","class:update_txt").appendTo(n).html(t);checkMaximumLogs();$("#items_logs").prepend(n)}function addLootLog(e,t){if(!Util.isSet(e)){return}var n=e$("#loot_"+e.item_id,"#lootlistlog");var r=c$("img").css("vertical-align","middle").attr({width:30,height:30,src:e.pic});if(n!==null){$("#item_count",n).text(e.count)}else{c$("li","loot_"+e.item_id).append(r).append(c$("span").css("margin-left",10).text("Found ")).append(c$("span","item_count").css("color","green").text(e.count)).append(c$("span").css("margin-left",5).append(e.toString()))[t?"appendTo":"prependTo"]("#lootlistlog")}}function addLog(e,t,n,r){if(!Util.isString(t)){t="fight"}checkMaximumLogs();var i;var s=c$("img").attr({width:40,height:40,src:logIcon[t]});if(r){r=t+"_item_"+r;i=e$("#items_logs #"+r,popupElt.content)||c$("div","class:update_item,id:"+r)}else{r=t+"_item";i=c$("div","class:update_item,id:"+r)}i.empty();c$("div","class:update_timestamp").appendTo(i).html((new Date).toUTCString());var o=(new Date).getTime();if(/ice|stolen/ig.test(e)){c$("div").appendTo(i);c$("a","spannit:"+o+",class:post_group").text("Post To Group").click(function(){function r(){var t={textallowed:false};showGroupSelection(0,function(t,n){if(t==0)t="me";MWFB.api("/"+t+"/feed","post",{message:n},function(t){if(!t||t.error){log("Error occured")}else{log("Post ID: "+t.id);$(e).unbind();$(e).text("View Post").attr("onclick","window.open('http://www.facebook.com/"+t.id+"');return false;").css("color","yellow")}})},n,t)}var e=$(this);var t=$(e).attr("spannit");var n=$("#"+t).text();if(typeof MWFB=="undefined"){facebook.init(r);return}else{r()}}).css({"font-size":11,margin:15}).appendTo(i)}c$("div","class:update_icon").appendTo(i).append(s);facebook_id=LucifersMOD.returnFBID(n);if(facebook_id!==false){c$("div").addClass("update_pic").appendTo(i).append(c$("a","href:#").attr("onclick","window.open('http://www.facebook.com/profile.php?id="+facebook_id+"');return false;").append(c$("img","href:#").attr({width:40,height:40,title:"View facebook profile",src:"https://graph.facebook.com/"+facebook_id+"/picture"})))}c$("div","id:"+o+",class:update_txt").appendTo(i).html(e);$("a.sexy_button_new",i).css("color","black");$("#items_logs").prepend(i)}function parseLootData(e,t){if(Util.isSet(e)&&e.length>0){var n;for(n=0;n<e.length;n++){if(/fake_item_card/.test(e[n])){addGenericLoot(new CSItemCard(e[n]))}else if(/item_with_preview/.test(e[n])){addLootLog(LootCache.add(new CSItemLoot(e[n],t)))}else if(/item_card_mini ice/.test(e[n])){var r=new CSItemIceEvent(e[n]);checkMaximumLogs("#eventslogger");c$("li").html("&#187; "+Util.setColor("You won: "+r.title,"green")).prependTo("#eventslogger")}else{Logger.error("Unknow Loot Found:\n"+e[n])}}}}function addIcedToLog(e,t){var n="${name} ${event} ${oppname} to get ${count}.";var r="Season ice: ${ices} of ${target} (left ${left} ices).";var i="# [${time}] ${event} ${count} to ${oppname}";var s={time:(new Date).toLocaleTimeString(),name:t.isCBttl?gVar.EpicBattle.userName||"You":"You",event:"ICED",count:e.count,ices:e.season_ices||0,target:e.season_target||0,oppname:t.anchor()};s.left=s.target-s.ices;gVar.IcedPlayerCache[t.id]=true;AutoTravelCounter.reset("stolenIce");if(e.isKilled){SessionStats.add("killWon");AttackerStats.session_ices+=2;s.event="KILLED"}else{SessionStats.add("icesWon");AttackerStats.session_ices++}if(t.isThief){SessionStats.add("revenge");s.event+=" the THIEF"}if(e.season_ices&&e.season_target){n+="<br>"+r}if(e$("#battlefield_docked_ices")){$("#battlefield_docked_ices").text("   Ices [ "+AttackerStats.session_ices+" ]")}addLog(Util.render(n,s)+"<br>"+e.action,"iced",t.image);if(e.description){try{e.description=e.description.replace(/(Need to whack someone|Think you can do better|Need help icing yours).*$/ig,"")}catch(o){}$("#text_plain_ice_log",popupElt.content)[0].value+=e.description+"\n\n"}else{$("#text_plain_ice_log",popupElt.content)[0].value+=Util.render(i,s)}UserConfig.main.set("cache_ice_log",$("#text_plain_ice_log").val());if(options.publishActive&&e.canPublish){AutoPublish.add(e,t.clanId?t.clanName+" "+t.name:t.name)}Events.CheckIcePost()}function addStolenIceToLog(e){function i(){if(e.isCBttl===true){r="But you're in a epic battle.";return true}if(t.inMafia){r="But he/she is in your mafia.";return true}if(options.attackRevenge!==true){r="Set Revenge ON if you want to take your revenge!.";return true}if(PlayerList.blackList.exists(t.id)){r="But was skipped because he/she is in your blacklist.";return true}r="When fighting against "+e.anchor()+".";return false}var t=e.thief;var n="ICE STOLEN BY: ";var r=t.tyClass;SessionStats.addStolenIce(t);AutoTravelCounter.stolenIce();if(i()!==true){PlayerList.revenge=new CSOpponent;PlayerList.revenge.name=t.name;PlayerList.revenge.id=t.id;PlayerList.revenge.attack_url=t.action;PlayerList.revenge.isThief=true;PlayerList.revenge.level=t.level;PlayerList.revenge.clanName=t.clanName}addLog(n+t.anchor()+"<br>"+r,"iced",t.pic,t.id)}function addEventLog(e,t){var n=e$("#eventslogger #skippedlog"+e.id)||c$("li","id:skippedlog"+e.id);var r=t||e.result_text||"Too late, was iced.";n.html(e.toString()+":<br>&#187; "+r);checkMaximumLogs("#eventslogger");n.prependTo("#eventslogger")}function updateStats(){Util.each(AttackerStats,function(e,t){var n=e$("#mass_stat_"+e.toLowerCase());if(n!==null){n.html(String(t))}});Util.each(SessionStats.currentTotal,function(e,t){var n=e$("#mass_stat_"+e);if(n!==null){n.html(String(t))}})}function sendMessage(e,t,n){var r=$("#msgcontainer").empty().show();if(Util.isString(e)){if(t===true){Resources.getPicture("ajax_loader","span").appendTo(r).html(e).css("padding-left",18)}else{r.html(e)}if(Util.isFunc(n)){r.append(c$("a","href:#").text("click here to continue.").click(n))}}else{r.hide()}}function travelTo(e,t){if(gVar.Aborted){return}var n="Traveling to ${city}...";var r="Unexpected city (#${trycount}), taveling to ${city} in %N% seconds.";var i={trycount:1};if(global.city(e).enabled!==true){if(gVar.CurrentCity===(e=gVar.StartCity=1)){t&&t();return}}(function s(){if(gVar.Aborted){return}i.trycount++;i.city=global.city(e).name;sendMessage(Util.render(n,i),true);MW.travel(e,function(o,u){if((gVar.CurrentCity=parseInt(o))===parseInt(e)){sendMessage();addTravelCountdown();t&&t(u)}else{if(i.trycount>3){Logger.error("Can't travel to "+global.city(e).name+" the city will be removed.");global.city(e).enabled=false;e=setNewCurrentCity()||1;i.trycount=0;StatusTimer.start(Util.render(n,i),3,s)}else{StatusTimer.start(Util.render(r,i),3,s)}}},null,"fight")})()}function healPlayer(e){function i(){var r=(new Date).getTime();if(gVar.AutoPaused===true){stopAutoFight("AutoPaused.");gVar.AutoPaused=false;addFightResumeCountdown();return}if(++n<4){t=parseInt(options.healCity)}else if(t!==1){options.healCity=t=1;options.save()}else{StatusTimer.start("Error healing. Try again in %N% seconds.",60,i);return}if(gVar.ReadyToHeal>r){if(!gVar.ForceHeal){gVar.ForceHeal=true;if(options.stopAutomatic===true){addLog("AutoStop:<br>Your health fall down very quickly.","help",null,"autostop");sendMessage("Seem you're under attack!, AutoFight was stopped.");stopAutoFight("AutoStopped.");if(options.stopResume){addFightResumeCountdown(parseInt(options.stopResumeDelay||5))}return}else{AutoTravelCounter.heal()}}if(options.useHealPack&&AttackerStats.powerPack.avail().hospital){usePowerPack("hospital",e,function(){AttackerStats.powerPack.on=false;i()})}else{n--;StatusTimer.start("Ready to heal in %N% seconds.",Math.ceil((gVar.ReadyToHeal-r)/1e3),i)}return}gVar.ForceHeal=false;if(e$("#battlefield_docked_status")){$("#battlefield_docked_status").text(" "+"Healing...")}if(t===1){s("remote/"+MW.getIntURL("hospital","heal")+"&xcity=1")}else if(t!==0&&t!==gVar.CurrentCity){travelTo(t,function(){s("remote/"+MW.getIntURL("hospital","heal",t))})}else{s("remote/"+MW.getIntURL("hospital","heal",t))}}function s(t){sendMessage("Healing at "+global.city(1).name+"...",true);httpAjaxRequest({url:t,success:function(t){try{updateUserFields(t);if(AttackerStats.health<Math.min(options.healBelow,AttackerStats.maxHealth-100)){StatusTimer.start(t.hospital_message+" try again in %N% seconds.",5,i)}else{gVar.ReadyToHeal=(new Date).getTime()+options.healTimer*1e3;MW.getWaitHealTimer(function(e){if(!isNaN(e)){Logger.debug("ReadyToHeal set to: "+e+" secs.");gVar.ReadyToHeal=(new Date).getTime()+parseInt(e)*1e3}});addLog(t.hospital_message,"heal",null,"healmessage");setHealth(0,AttackerStats.healthPct);updateAttackerHealthVal(AttackerStats.health);updateStats();e&&e()}}catch(n){StatusTimer.start("Error healing. Try again in %N% seconds.",5,i)}}})}if(gVar.Aborted){return}var t,n=0,r=false;i()}function usePowerPack(e,t,n){httpAjaxStopRequests();clearAllTimers();addAutoControls(true);sendMessage("Using PowerPack...",true);$("#mass_stat_powerpack").html(Util.setColor("Loading","green"));MW.usePack(function(e){$("#mass_stat_powerpack").html(Util.setColor("Inactive","grey"));if(e){updateUserFields(e);if(e&&e.success){addLog(e.message,"help",null,"powerpack");resetAllTimers();t&&t()}else{addLog("PowerPack:<br>Seem there was a server error.","help",null,"powerpack");n&&n()}}else{AttackerStats.powerPack.on=false;reqSurvey(n)}},e)}function manualAttack(){hideFightControls();if(AttackerStats.stamina<getStaminaSpendPerFight()){showHelpPopup({icon:"info",title:"No stamina left",message:"You need to have some stamina to attack."});Events.runAway_click();return}if(AttackerStats.health<PlayerList.current.requirements().health){healPlayer(Attack);return}Attack(false)}function checkBankMoney(e){var t=UserConfig.main.autoDeposit[gVar.CurrentCity];if(t&&t.active===true){if(AttackerStats.userCash>t.amount){sendMessage("Depositing "+Util.setColor(Util.formatNum(AttackerStats.userCash),"green")+"...",true);MW.deposit(gVar.StartCity,AttackerStats.userCash,function(t){if(t){$("#bank_item","#items_logs").remove();addLog(t,"bank",null,"deposit")}if(Util.isFunc(e)){e()}});return}}if(Util.isFunc(e)){e()}}function updateUserFields(data){var user_fields;try{if(data.user_fields){user_fields=data.user_fields;if(options.epicBattle===true&&data.questData&&data.questData.inClanBattle){if(gVar.EpicBattle){gVar.EpicBattle.update(data.questData.inClanBattle)}else{gVar.EpicBattle=new CSEpicBattle(data.questData.inClanBattle)}}else{gVar.EpicBattle=null}}else if(/var user_fields/.test(data)){eval(Util.substr(String(data),"var user_fields","user_fields_update"))}if(user_fields){gVar.CurrentCity=parseInt(user_fields["current_city_id"]);AttackerStats.health=parseInt(user_fields["user_health"]);AttackerStats.maxHealth=parseInt(user_fields["user_max_health"]);AttackerStats.stamina=parseInt(user_fields["user_stamina"]);AttackerStats.maxStamina=parseInt(user_fields["user_max_stamina"]);AttackerStats.expToNextLevel=parseInt(user_fields["exp_to_next_level"]);AttackerStats.userCash=parseInt(user_fields["user_cash"]);AttackerStats.powerPack.ask=parseInt(user_fields["powerPackAsk"])!=0;AttackerStats.powerPack.time1=parseInt(user_fields["powerPackStaminaUse"]);AttackerStats.powerPack.time2=parseInt(user_fields["powerPackHealthUse"]);AttackerStats.powerPack.count=parseInt(user_fields["powerPackCount"]);AttackerStats.powerPack.on=parseInt(user_fields["powerPackOn"])==2;AttackerStats.healthPct=parseInt(AttackerStats.health*100/AttackerStats.maxHealth)}}catch(err){Logger.error(err)}}function reqSurvey(e){sendMessage("Updating...",true);httpAjaxRequest({url:"remote/"+MW.getIntURL("survey","show_nps_survey"),success:function(t){sendMessage();updateUserFields(t);updateStats();if(Util.isFunc(e)){e()}else{preAttack()}}})}function getStaminaSpendPerFight(){return global.city(gVar.CurrentCity).ratio}function setNewCurrentCity(){if(gVar.AttackInBattle===true){return gVar.StartCity=1}var e=new Array;Util.each(options.travelTo,function(t,n){t=Util.parseNum(t);if(global.city(t).enabled===true&&gVar.StartCity!==t){if(n===true)e.push(t)}});if(e.length>0){gVar.StartCity=parseInt(e[Math.floor(Math.random()*e.length)]);return gVar.StartCity}return false}function resetAllTimers(){addTravelCountdown();addFightCountdown();addRivalsCountdown()}function clearAllTimers(){StatusTimer.clear();TravelCountdown.clear();ResumeCountdown.clear();FightCountdown.clear();RivalsCountdown.clear()}function addTravelCountdown(){TravelCountdown.clear();if(options.timerCityActive){TravelCountdown.start(options.timerCityMins*60)}}function addFightResumeCountdown(e){ResumeCountdown.clear();ResumeCountdown.start((e||options.timerFightResume)*60)}function addFightCountdown(){FightCountdown.clear();if(options.timerFightActive){FightCountdown.start(options.timerFightMins*60)}}function addRivalsCountdown(){RivalsCountdown.clear();if(options.timerRivalsActive){RivalsCountdown.start(options.timerRivalsMins*60)}}function publishCurrentIces(e){var t=false;var n=function(){if(t===false){t=true;sendMessage();e()}};sendMessage("Paused while publishing your ices. ",false,n);AutoPublish.publishTo(options.publishTo,n)}function isWrongCity(e){if(options.travelToStartCity&&gVar.CurrentCity!==gVar.StartCity){travelTo(gVar.StartCity,function(t){if(gVar.AttackInBattle!==true){PlayerList.clear("isFList");PlayerList.load(t)}e()});return true}else{gVar.StartCity=gVar.CurrentCity;return false}}function AttackEpicBattleFortress(){if(gVar.EpicBattleFortress.req>AttackerStats.stamina){gVar.EpicBattle==null;AttackNewOpponent();return}sendMessage("Attacking "+gVar.EpicBattle.opponentName+" Fortress...",true);httpAjaxRequest({url:gVar.EpicBattleFortress.url,liteLoad:1,success:function(e){updateUserFields(e);gVar.EpicBattleFortress=null;var t=h$(e).find(".message_body:first").text();if(t){addLog(t,"help",null,"epicbattlefortress")}PlayerList.loadBattle(e);AttackNewOpponent()}})}function AttackNewOpponent(){if(gVar.Aborted){return}log("AttackNewOpponent()");if(options.publishActive&&AutoPublish.length()>=options.publishAfter){publishCurrentIces(AttackNewOpponent);return}if(PlayerList.current){log("AttackNewOpponent(1)");updateCurrentOppStats();PlayerList.current=null}if(gVar.AutoPaused===true){stopAutoFight();gVar.AutoPaused=false;addFightResumeCountdown();return}if(isWrongCity(AttackNewOpponent)===true){return}if(gVar.AttackInBattle!==true){log("AttackNewOpponent(2)");if(gVar.EpicBattle&&gVar.EpicBattle.inBattle&&gVar.EpicBattle.started){log("gVar.EpicBattle()");addLog(gVar.EpicBattle.toString(),"help",null,"epicbattle");PlayerList.clear();gVar.AttackInBattle=true;setNewCurrentCity();refreshPlayerList(AttackNewOpponent);return}else{if(gVar.AttackWhitelist===true){log("gVar.AttackWhitelist()");fromRandomWhiteList();return}if(gVar.AttackFamilyList===true){log("gVar.AttackFamilyList()");fromFamilyList();return}if(gVar.AttackBucketList===true){log("getting new bucket list");getBucketListOpponents();return}}}else{log("AttackNewOpponent(3)");if(gVar.EpicBattle==null||gVar.EpicBattle.finished()){log("gVar.EpicBattle == null");if(gVar.EpicBattle){log("gVar.EpicBattle");addLog(gVar.EpicBattle.toString(),"help",null,"epicbattle")}log("refreshPlayerList");PlayerList.clear();gVar.AttackInBattle=false;refreshPlayerList(AttackNewOpponent);return}}log("AttackNewOpponent(4)");var e=PlayerList.setLastCurrent();if(gVar.AttackInBattle!==true){log("AttackNewOpponent(5)");if(!e){log("AttackNewOpponent(5-0)");PlayerList.clear();AutoTravelCounter.noTarget();refreshPlayerList(AttackNewOpponent);return}else{log("AttackNewOpponent(5-1)");AutoTravelCounter.reset("noTarget")}}else{log("AttackNewOpponent(6)");if(!e){if(options.epicBattleFortress===true&&gVar.EpicBattleFortress){AttackEpicBattleFortress()}else{PlayerList.clear();StatusTimer.start("No opponents to attack, reloading epic battle in %N%...",options.epicBattleRefresh,function(){refreshPlayerList(AttackNewOpponent)})}return}}log("AttackNewOpponent(7)");if(e.isValid()===false){log("AttackNewOpponent(8)");AttackNewOpponent();return}if(PlayerList.length()<2&&gVar.AttackInBattle!==true){log("AttackNewOpponent(9)");httpAjaxRequest({url:"remote/"+MW.getIntURL("fight"),liteLoad:1,success:PlayerList.load})}log("AttackNewOpponent(10)");if(gVar.AttackBucketList===true){log("getting new bucket list");getBucketListOpponents();return}else{updateNewOpponent();preAttack()}}function preAttack(){if(gVar.Aborted===true||isWrongCity(preAttack)===true){return}if(!Util.isSet(PlayerList.current)){log("preAttack(1)");AttackNewOpponent();return}var e=PlayerList.current;var t=options;var n={Health:AttackerStats.health,Stamina:AttackerStats.stamina,ToLevel:AttackerStats.expToNextLevel,SessionIces:AttackerStats.session_ices,RapidFire:false,Delay:t.stopResumeDelay>0?t.stopResumeDelay*60:300,MinHealth:e.requirements().health,MinStamina:e.requirements().stamina,StaminaPack:AttackerStats.powerPack.avail().stamina,ToIce:e.attacksToIce()};t.healBelow=Math.max(n.MinHealth,t.healBelow);n.KeepSta=Math.max(t.stopKeepStaOn?t.stopKeepSta:0,n.MinStamina);n.KeepHlt=Math.max(t.healActive?t.healBelow:0,n.MinHealth);e.powerAttack=t.attackPwr&&e.hasPwrAtkUrl();if(t.attackUsePerFoe&&t.attackPerFoe<=e.fights){e.skip("Limited attacks per foe reached: "+e.fights)}if(t.attackUseMax&&n.ToIce>0&&t.attackMax<n.ToIce){e.skip("Out Maximum Attacks: "+n.ToIce)}if(t.skipHealed&&e.startedHealthPct&&e.curHealthPct>e.startedHealthPct){e.skip("Seem that was healed.")}if(e.skipped===true){checkBankMoney(AttackNewOpponent);return}if(e.powerAttack&&(!t.attackUseMax||e.fights>2)){if(t.rapidFireActive&&n.ToIce>4){n.RapidFire=e.curHealthPct<t.rapidFireHealth}}if(t.stopKeepExpOn&&n.ToLevel<t.stopKeepExp){n.Stop="AutoFight deactivated, you need "+n.ToLevel+" exp. points to levelup."}else if(n.Stamina<n.KeepSta){if(n.Stamina<n.MinStamina&&n.StaminaPack){checkBankMoney(function(){usePowerPack("stamina",AttackNewOpponent,function(){AttackerStats.powerPack.on=false;preAttack()})});return}if(t.stopResume){n.Pause="No stamina left, continue in %N% seconds."}else{n.Stop="AutoFight deactivated, No stamina left."}}else if(gVar.ForceHeal){healPlayer(preAttack);return}else if(n.Health<n.KeepHlt){if(n.Stamina<t.healMinSta&&!n.StaminaPack){if(n.Health<n.MinHealth){if(t.stopResume){n.Pause="Heal was not possible due your low stamina, continue in %N% seconds."}else{n.Stop="AutoFight deactivated, Heal was not possible due your low stamina."}}}else if(t.healActive!==true){if(t.stopResume){n.Pause="Healing is set off, continue in %N% seconds."}else{n.Stop="AutoFight deactivated, Healing is set off."}}else if(t.healAttacking||e.fights===0||n.Health<n.MinHealth){healPlayer(preAttack);return}}else if(t.stopByIces&&n.SessionIces>=t.stopIceAmount){n.Stop="AutoFight deactivated, you made "+n.SessionIces+" ices."}if(n.Stop){clearAllTimers();checkBankMoney(function(){sendMessage(n.Stop);stopAutoFight("AutoFight was stopped.")});return}if(n.Pause){clearAllTimers();checkBankMoney();addAutoControls(false,true);StatusTimer.start(n.Pause,n.Delay,function(){PlayerList.clear();reqSurvey(function(){resetAllTimers();AttackNewOpponent()})});return}if(!/xw_controller=fight/i.test(e.getAttackUrl())){log("!/xw_controller=fight/i.test(opp.getAttackUrl()"+e.getAttackUrl());AttackNewOpponent();return}if(e.fights>0){addSkipControl()}if(n.RapidFire===true){AttackWithRapidFire()}else{Attack(true)}}function AttackWithRapidFire(){function r(){if(gVar.Aborted===true||n.TotalSent>=n.MaxCount){i()}else{n.ReqsLeft++;showRapidFireTitle(++n.TotalSent);var t=n.Url.replace("click_amt=1","click_amt=2");log("lVar.BurstAttack -> "+n.BurstAttack);sendMessage("Rapid Fire x"+n.TotalSent+" to "+e.anchor()+"...",true);httpAjaxRequest({url:t,liteLoad:1,update:false,success:s})}}function i(){if(n.Stopped!==true){n.Stopped=true;if(n.Instance){clearInterval(n.Instance);n.Instance=null}}}function s(r){n.ReqsLeft--;if(n.timeout){clearTimeout(n.timeout);n.timeout=null}if(gVar.Aborted===true){return}var s={success:ERROR_BAD_RESPONSE};try{s=parseAttack(r,true);if(n.Health>AttackerStats.health){n.Health=AttackerStats.health}if(n.Stamina>AttackerStats.stamina){n.Stamina=AttackerStats.stamina}if(n.ToLevel>AttackerStats.expToNextLevel){n.ToLevel=AttackerStats.expToNextLevel}if(gVar.ForceHeal||n.Stamina<n.MinStamina||n.Health<n.MinHealth||t.stopKeepExpOn&&n.ToLevel<t.stopKeepExp){i()}}catch(o){Logger.error(o.message)}if(s.success!==ERROR_SUCCESS){n.BadRQ++;if(parseInt(n.BadRQ*100/n.MaxCount)>80){e.skip("So many server errors.");i()}}else{n.GoodRQ++;var u=s.fight_result?s.fight_result.defender:false;var a=s.fight_result?s.fight_result.attacker:AttackerStats;n.AtkDamage+=a.damage_dealt;n.DefDamage+=u.damage_dealt;if(n.DefMaxHealth>u.current_health_pct){n.DefMaxHealth=u.current_health_pct}if(n.AtkMaxHealth>a.current_health_pct){n.AtkMaxHealth=a.current_health_pct}a.damage_dealt=n.AtkDamage;a.current_health_pct=n.AtkMaxHealth;u.damage_dealt=n.DefDamage;u.current_health_pct=n.DefMaxHealth;if(s.attack_again===false){n.AttackAgain=false}if(t.skipHealed&&e.startedHealthPct&&u.current_health_pct>e.startedHealthPct){e.skip("Seem that was healed.");n.AttackAgain=false}if(s.levelUp_stop===true){n.AttackAgain=false;n.LevelUp=true}if(n.AttackAgain!==true){i()}}if(n.ReqsLeft<1&&n.Stopped===true&&n.Finished===false){n.Finished=true;log("auto increment timming -> "+t.rapidFireAutoTiming);log("lVar.BadRQ -> "+n.BadRQ);log("lVar.GoodRQ -> "+n.GoodRQ);if(t.rapidFireAutoTiming===true&&n.TotalSent>4&&n.Health>20){if(n.BadRQ>n.GoodRQ){if((t.rapidFireTiming+=50)<1050){addLog("RapidFire Autotiming:<br>Very bad success rate, timing increased by 50.","help",null,"autotiming")}}else if(parseInt(n.GoodRQ*100/n.TotalSent)>80){if((t.rapidFireTiming-=50)>350){addLog("RapidFire Autotiming:<br>Very good success rate, timing decreased by 50.","help",null,"autotiming")}}}AttackerStats.health=n.Health;AttackerStats.stamina=n.Stamina;AttackerStats.expToNextLevel=n.ToLevel;updateFightResponse(s);if(n.AttackAgain&&n.GoodRQ<1){n.AttackAgain=false;e.skip("So many server errors.")}if(n.LevelUp===true){stopAutoFight("Leveled up.");sendMessage("AutoFight deactivated, you Leveled UP!!.")}else if(n.AttackAgain){preAttack()}else{addAutoControls();checkBankMoney(AttackNewOpponent)}}else{n.timeout=setTimeout(function(){n.timeout=null;updateFightResponse(s,true)},100)}}log("loaded AttackWithRapidFire");if(gVar.Aborted){return}var e=PlayerList.current;var t=options;var n={Instance:null,Url:e.getAttackUrl(),LevelUp:false,AttackAgain:true,Stopped:false,Finished:false,AtkMaxHealth:100,DefMaxHealth:100,Stamina:AttackerStats.stamina,Health:AttackerStats.health,BurstAttack:Math.max(Math.min(t.rapidburstattacks,4),1),MaxCount:t.rapidFireAttacks=Math.max(Math.min(options.rapidFireAttacks,80),2),ReqsLeft:0,TotalSent:0,AtkDamage:0,DefDamage:0,MinHealth:e.requirements().health,MinStamina:e.requirements().stamina,ToLevel:AttackerStats.expToNextLevel,GoodRQ:0,BadRQ:0,timeout:null};if(options.attackUsePerFoe){n.MaxCount=Math.max(parseInt((t.attackPerFoe-e.fights)/5),2)}if(t.healActive&&t.healAttacking){n.MinHealth=Math.max(t.healBelow,n.MinHealth)}if(t.stopKeepStaOn){n.MinStamina=Math.max(t.stopKeepSta,n.MinStamina)}r();t.rapidFireTiming=Math.max(Math.min(t.rapidFireTiming,1e3),333);log("opt.rapidFireTiming -> "+t.rapidFireTiming);n.Instance=setInterval(r,t.rapidFireTiming-50)}function Attack(e){if(gVar.Aborted){return}var t=PlayerList.current.getAttackUrl();var n=PlayerList.current.attacksToIce();var r=PlayerList.current.retries;var i="Attacking "+PlayerList.current.anchor()+"...";if(e$("#battlefield_docked_status")){$("#battlefield_docked_status").html(" "+i)}if(PlayerList.current.retries>2){i+="<br>Retry #"+PlayerList.current.retries+"."}if(n=="Infinity"){i+="<br>Calculating attacks to ice..."}else if(n>0){i+="<br>You need ~"+PlayerList.current.attacksToIce()+" attacks to ice."}sendMessage(i,true);var s=1;if(PlayerList.current.attacksToIce()<50){if(/click_amt/.test(t)){s=Math.max(Math.min(options.rapidburstattacks,4),1);t=t.replace("click_amt=1","click_amt=2")}}httpAjaxRequest({url:t,liteLoad:1,update:false,success:function(t){if(gVar.Aborted){return}var n={success:ERROR_BAD_RESPONSE};try{n=parseAttack(t,e!==true);updateFightResponse(n)}catch(r){Logger.error(r.message)}switch(n.success){case ERROR_BAD_RESPONSE:if(e){addAutoControls(true);StatusTimer.start("There was an error, try again in %N% seconds.",8,preAttack)}else{sendMessage("There was an error.");addManualControls(true)}break;case ERROR_NO_FIGHT_RESULT:if(e){if(PlayerList.current.retries<options.attackRetries){PlayerList.current.retries++;preAttack()}else{addAutoControls(true);PlayerList.current.skip("So many server errors.");AttackNewOpponent()}}else{sendMessage("This opponent can't be attacked, go back and try a different one.");PlayerList.current=null;addManualControls(true)}break;case ERROR_SUCCESS:if(e){if(n.levelUp_stop){stopAutoFight("Leveled up.");sendMessage("AutoFight deactivated, you Leveled UP!!.")}else if(n.attack_again){PlayerList.current.retries=0;preAttack()}else{addAutoControls();checkBankMoney(AttackNewOpponent)}}else{updateCurrentOppStats();checkBankMoney(addManualControls)}break}},error:function(t){if(e){if(/OK/.test(t)){Logger.debug("Detected Closed packet :"+t);setTimeout(function(){preAttack()},333)}else{log("error txt-> "+t);addAutoControls(true);StatusTimer.start("ERROR: "+t+", try again in %N% seconds.",3,preAttack)}}else{sendMessage("ERROR: "+t);Logger.debug("error :"+t);addManualControls(true)}}})}function updateAttackerHealthVal(e){$("#bfatt_health",popupElt.content).html(e)}function updateAttackerStaminaVal(e,t){$("#bfatt_stamina",popupElt.content).html(e);$("#bfatt_max_stamina",popupElt.content).html(t)}function setHealth(e,t){function a(e){switch(true){case e<34:return"hpbg_low";case e<67:return"hpbg_mid";default:return"hpbg_high"}}var n;var r;var i;var s;var o=215;var u;if(e==0){s=Math.min(Math.max(t,0),100);u=$("#attacker_hp",popupElt.content);n=s/100*o;r=a(s)}else{i=Math.min(Math.max(t,0),100);u=$("#defender_hp",popupElt.content);n=i/100*o;r=a(i)}if(u.width()==n){return}if(t>0&&t<100){u.stop(true).animate({width:n+"px"},400)}else{u.stop(true).animate({width:n+"px"},100)}u.removeClass("hpbg_low hpbg_mid hpbg_high");u.addClass(r)}function updateAttackerAttackVal(e,t,n){if($("#fightv2_boost_on",popupElt.content).hasClass("checked")||n){$("#attacker_attack",popupElt.content).html(e)}else{$("#attacker_attack",popupElt.content).html(t)}}function updateNewOpponent(){$("#wrapper_defender",popupElt.content).empty();$("#defender_best_items .fightV2ItemList li",popupElt.content).empty();$("#divAttackerDmgTaken",popupElt.content).empty();$("#attacker_fight_status",popupElt.content).empty();$("#wrapper_info .fightV2_result",popupElt.content).empty()}function showOtherDamageTaken(e,t){var n,r,i;if(e==0){n=$("#divAttackerOtherAtkId",popupElt.content);i=$("#spanAttackerOtherAtk",popupElt.content);r=$("#spanAttackerOtherAtkLabel",popupElt.content)}else{n=$("#divDefenderOtherAtkId",popupElt.content);i=$("#spanDefenderOtherAtk",popupElt.content);r=$("#spanDefenderOtherAtkLabel",popupElt.content)}if(!Util.isSet(t)||t==0){n.hide();i.html("");r.html("")}else{var s=-t;n.show();i.removeClass("fv2_dmg_negative");i.removeClass("fv2_dmg_positive");if(s<=0){i.html(s+"%");i.addClass("fv2_dmg_negative");r.html("other attackers")}else{i.html("");i.addClass("fv2_dmg_positive");r.html("healed")}}}function showDamageTaken(e,t){var n;if(e==0){n=$("#divAttackerDmgTaken",popupElt.content)}else{n=$("#divDefenderDmgTaken",popupElt.content)}n.fadeIn(500);n.removeClass("fv2_dmg_negative fv2_dmg_positive");if(t<0){n.html(-t);n.css("color","green")}else{n.html("-"+t);n.css("color","red")}}function showBoostUsed(e,t){var n;if(e==0){n=$("#attacker_boost_used_tag",popupElt.content);$("#attacker_boost_used",popupElt.content).show()}else{n=$("#defender_boost_used_tag",popupElt.content);$("#defender_boost_used",popupElt.content).show()}n.html(t)}function showBoostUsage(e,t,n){var r=0;if(Util.isSet(e)&&e>0){r=e}$(".boost_wgt_boost_count",popupElt.content).html(r);if(r>0){$("#fv2_boost_toggle_ask_btns",popupElt.content).hide()}else{$("#fv2_boost_toggle_ask_btns",popupElt.content).show();if(n>0){$(".fv2_boost_ask_allowed",popupElt.content).hide()}else{$(".fv2_boost_ask_allowed",popupElt.content).show()}}$(".boost_wgt_next_boost",popupElt.content).hide();if(Util.isSet(t)&&t!=""){$(".boost_wgt_next_boost",popupElt.content).html(t);$(".boost_wgt_next_boost",popupElt.content).show()}}function showTopItems(e,t){var n;if(e==0){n="attacker"}else{n="defender"}for(var r in t){if(t[r]!=""){$("#"+n+"attacker_best_item_"+r,popupElt.content).html(t[r])}}}function showFightRewards(e){if(!Util.isSet(e)){$("#wrapper_info .fightV2_result",popupElt.content).empty();return}$("#wrapper_info .fightV2_result",popupElt.content).html(e).find(".impulse_buy, #figthv2_moreinfo_btn").remove();$("#msgcontainer",popupElt.content).empty()}function showRapidFireTitle(e){var t=$("#wrapper_info .fightV2_result",popupElt.content).empty();var n=c$("div").text("RAPID FIRE!").css({"text-align":"center","margin-top":6,height:25,color:"green","font-size":20,"font-weight":"bold","font-family":"tahoma"});var r=c$("div").hide().text("x"+e).css({"text-align":"center","margin-top":1,color:"yellow","font-size":24,"font-weight":"bold"});t.append(n).append(r);r.fadeIn(options.rapidFireTiming-100,function(){n.fadeOut(2e3);r.fadeOut(2e3)})}function showWonLost(e){$("#attacker_fight_status",popupElt.content).css("opacity",0).removeClass("good bad");$("#defender_fight_status",popupElt.content).css("opacity",0).removeClass("good bad");if(Util.isSet(e)&&e==true){$("#attacker_fight_status",popupElt.content).html("Won").addClass("good");$("#defender_fight_status",popupElt.content).html("Lost").addClass("bad")}else{$("#attacker_fight_status",popupElt.content).html("Lost").addClass("bad");$("#defender_fight_status",popupElt.content).html("Won").addClass("good")}$("#attacker_fight_status",popupElt.content).stop(true).animate({opacity:1},300);$("#defender_fight_status",popupElt.content).stop(true).animate({opacity:1},300)}function stopAutoFight(e){gVar.Aborted=true;httpAjaxStopRequests();clearAllTimers();if(e){addAutoControls(true)}if(PlayerList.current){PlayerList.current.skip(e||"AutoFight stopped.");updateCurrentOppStats()}UserConfig.main.set("opt_battlefield_restart",false);PlayerList.clear()}function showIcedOverlays(e,t,n){if(t.ice_state>0){return true}if(e.you_just_killed){t.ice_state=1;$("#fv2_defender_overlay_killed",popupElt.content).show()}else if(e.you_just_iced){t.ice_state=2;$("#fv2_defender_overlay_iced",popupElt.content).show()}else if(e.ice_was_just_stolen){t.ice_state=3;$("#fv2_defender_overlay_stolen",popupElt.content).show();$(".fv2_defender_overlay_name",popupElt.content).html(e.thief_profile);$(".fv2_defender_overlay_level",popupElt.content).html(e.thief_class);$(".fv2_defender_overlay_pic",popupElt.content).html(e.thief_pic);$(e.thief_btn).removeAttr("onclick").attr("href","#").click(Events.revenge_click).appendTo($("#fv2_defender_overlay_stolen_btn",popupElt.content).empty())}else{showIceState(e.defender,n);return false}if(e.show_ice_season){$(".fv2_defender_overlay_next_title",popupElt.content).html("Next Ice Prize");$(".fv2_defender_overlay_next_count",popupElt.content).html(e.ices_so_far+"/"+e.ices_target)}else{$(".fv2_defender_overlay_next_title",popupElt.content).html("Total Ices");$(".fv2_defender_overlay_next_count",popupElt.content).html(e.total_ice_count)}return true}function showIceState(e,t){var n=false;if(e.iced_self){$("#fv2_defender_you_iced",popupElt.content).css("display","none");$("#fv2_defender_iced_self",popupElt.content).css("display","block");$("#fv2_defender_was_iced",popupElt.content).css("display","none");n=true}else if(e.is_iced){$("#fv2_defender_you_iced",popupElt.content).css("display","none");$("#fv2_defender_iced_self",popupElt.content).css("display","none");$("#fv2_defender_was_iced",popupElt.content).css("display","block");n=true}if(!n){$("#fv2_defender_you_iced",popupElt.content).css("display","none");$("#fv2_defender_iced_self",popupElt.content).css("display","none");$("#fv2_defender_was_iced",popupElt.content).css("display","none")}}function genFightWrapper(e){var t=$("#fight_wrapper",popupElt.content).html(e);$(".fv2_btncontainer",t).empty();$("a.close",popupElt.content).remove();$("#fv2_wgt_open_button_wrapper, #fv2_wgt_button_open_link, #wrapper_items_won, .fv2_boost_ask_not_allowed",t).remove();$("#fightv2_boost_on, #fightv2_boost_off",t).removeAttr("onclick").removeClass("checked").css("cursor","pointer").click(Events.use_boost_click);$("#fightv2_boost_"+(gVar.AttackerUsedBoost?"on":"off"),t).addClass("checked");$("#attacker_health",popupElt.content).attr("id","bfatt_health").html(AttackerStats.health);$("#attacker_stamina",popupElt.content).attr("id","bfatt_stamina").html(AttackerStats.stamina);$("#attacker_max_stamina",popupElt.content).attr("id","bfatt_max_stamina").html(AttackerStats.maxStamina)}function toFightScreen(){global.BFRunning=true;$("#ctrlcontainer",popupElt.content).hide();$("#msgcontainer",popupElt.content).show();$("#fightmsgcontainer",popupElt.content).show();$("#options_wrapper",popupElt.content).hide();$("#opponents_table",popupElt.content).empty();$("#fv2_widget_wrapper",popupElt.content).show();$("#fight_wrapper",popupElt.content).html(Base64.decode("PGRpdiBpZD0id3JhcHBlcl9hdHRhY2tlciIgY2xhc3M9InVzZXJib3giIHN0eWxlPSJmbG9hdDpsZWZ0O3Bvc2l0aW9uOnJlbGF0"+"aXZlOyI+PC9kaXY+CQ0KPGRpdiBpZD0iZmlnaHRfYnRuX3BhbmVsIiBzdHlsZT0iZmxvYXQ6IGxlZnQ7Ij4JDQoJPGRpdiBpZD0i"+"YXR0YWNrZXJfYmVzdF9pdGVtcyIgc3R5bGU9ImZsb2F0OiBsZWZ0OyI+DQoJCTxkaXYgY2xhc3M9InN1YmhkciI+VG9wIEl0ZW1z"+"PC9kaXY+DQoJPC9kaXY+CQ0KCTxkaXYgaWQ9IndyYXBwZXJfYWN0aW9ucyIgc3R5bGU9ImZsb2F0OiBsZWZ0OyI+DQoJCTxkaXYg"+"c3R5bGU9Im1hcmdpbi10b3A6IDEwcHg7dGV4dC1hbGlnbjpyaWdodDsgcGFkZGluZy1yaWdodDoxNXB4OyBoZWlnaHQ6IDIwcHg7"+"Ij48L2Rpdj4NCgkJPGRpdiBjbGFzcz0iZnYyX2J0bmNvbnRhaW5lciIgc3R5bGU9InBvc2l0aW9uOnJlbGF0aXZlOyAiPjwvZGl2"+"PgkJCQ0KCTwvZGl2Pg0KCTxkaXYgaWQ9ImRlZmVuZGVyX2Jlc3RfaXRlbXMiIHN0eWxlPSJmbG9hdDogbGVmdDsiPg0KCQk8ZGl2"+"IGNsYXNzPSJzdWJoZHIiPlRvcCBJdGVtczwvZGl2Pg0KCTwvZGl2PgkJDQoJPGRpdiBzdHlsZT0iY2xlYXI6IGJvdGg7Ij48L2Rp"+"dj4NCjwvZGl2PgkNCjxkaXYgaWQ9IndyYXBwZXJfZGVmZW5kZXIiIGNsYXNzPSJ1c2VyYm94IiBzdHlsZT0iZmxvYXQ6bGVmdDtw"+"b3NpdGlvbjpyZWxhdGl2ZTsiPjwvZGl2Pg0KPGRpdiBzdHlsZT0iY2xlYXI6IGJvdGg7Ij48L2Rpdj4J")).show();$("#attacker_health",popupElt.content).attr("id","bfatt_health").html(AttackerStats.health);$("#attacker_stamina",popupElt.content).attr("id","bfatt_stamina").html(AttackerStats.stamina);$("#attacker_max_stamina",popupElt.content).attr("id","bfatt_max_stamina").html(AttackerStats.maxStamina);showDiv("events","_list");showFightRewards()}function toStartScreen(){$("#ctrlcontainer",popupElt.content).show();$("#fightmsgcontainer",popupElt.content).hide();$("#fight_wrapper",popupElt.content).hide();$("#options_wrapper",popupElt.content).show();$("#msgcontainer",popupElt.content).empty().show();$(".fightV2_result",popupElt.content).empty();$("#attacker_boost_used",popupElt.content).empty();showDiv("opponents","_list");hideFightControls();updateNewOpponent()}function addManualControls(e){var t=hideFightControls();var n=PlayerList.current;if(n&&n.alive&&n.hasAtkUrl()){c$("div","fv2_button_row1").appendTo(t).append(b$("Attack again","class:short red fightV2AttackBtn").click(Events.attackAgain_click))}if(options.attackPwr&&n&&n.alive&&n.hasPwrAtkUrl()){c$("div","fv2_button_row2").appendTo(t).append(b$("Power Attack","class:short red fightV2AttackBtn").click(Events.powerAttack_click))}if(t.length<2&&!e&&AttackerStats.healthPct<80){c$("div","fv2_button_row3").appendTo(t).append(b$("Heal","class:short red fightV2AttackBtn").click(Events.heal_click))}c$("div","fv2_button_row3").appendTo(t).append(b$("Run Away","class:fightV2AttackBtn").click(Events.runAway_click))}function addAutoControls(e,t){var n=hideFightControls();if(n.length<1||n.is(":hidden")){return}c$("a","fv2_button_row0").appendTo(n).text("Dock Battlefield").css({height:"20px",background:"url(https://zynga1-a.akamaihd.net/mwfb/mwfb/graphics/v3/target_daily_take_icon.png) no-repeat","padding-left":"24px",position:"relative",bottom:"50px"}).click(LucifersMOD.dock.battlefield);if(e!==true){c$("div","fv2_button_row1").appendTo(n).append(b$("Stop","class:short red fightV2AttackBtn").click(Events.stop_click))}if(e!==true&&AttackerStats.healthPct<80){c$("div","fv2_button_row2").appendTo(n).append(b$("Heal","class:short red fightV2AttackBtn").attr("instantheal",t===true?"1":"0").click(Events.autoHeal_click))}c$("div","fv2_button_row3").appendTo(n).append(b$("Run Away","class:fightV2AttackBtn").click(Events.runAway_click))}function addSkipControl(){var e=hideFightControls();c$("a","fv2_button_row0").appendTo(e).text("Dock Battlefield").css({height:"20px",background:"url(https://zynga1-a.akamaihd.net/mwfb/mwfb/graphics/v3/target_daily_take_icon.png) no-repeat","padding-left":"24px",position:"relative",bottom:"50px"}).click(LucifersMOD.dock.battlefield);c$("div","fv2_button_row3").appendTo(e).append(b$("Stop","class:short red fightV2AttackBtn").click(Events.stop_click));c$("div","fv2_button_row1").appendTo(e).append(b$("Skip","class:short white fightV2AttackBtn").click(Events.skip_click))}function hideFightControls(){return $("#wrapper_actions .fv2_btncontainer").empty()}function parseAttack(e,t){function f(){if(n.cash_city===gVar.CurrentCity){return getStaminaSpendPerFight()}return 1}var n,r;var i=false;var s=PlayerList.current;var o=false;var u=false;var a=false;updateUserFields(e);if(Util.isSet(e.fight_result)){if(e.clanXp&&e.clanXp.exp_fight){AttackerStats.exp_fight=e.clanXp.exp_fight.xp;AttackerStats.exp_fight_max=e.clanXp.exp_fight.xp_max}r=e;if(r.worstitems){gVar.WorstItems=r.worstitems}}else if(/fight_controller/.test(e)||gVar.AttackInBattle===true){r=new CSFightResult(e)}else{log("returning error htmlText -> "+e);return{success:ERROR_NO_FIGHT_RESULT}}if(r.popup&&/levelUpBg/.test(r.popup)){if(options.stopByLevelup){$("#popup_fodder").html(r.popup);u=true;setTimeout(function(){$(".pop_bg, .pop_box","#popup_fodder").show();$(".pop_box","#popup_fodder").css("z-index",1001)},1e3)}}if(!(n=r.fight_result)){return{success:ERROR_NO_FIGHT_RESULT}}s.alive=o=!(n.defender.was_iced||n.defender.is_iced||n.defender.is_killed||n.defender.iced_self||n.defender.you_iced);if(r.fight_wrapper){genFightWrapper(r.fight_wrapper.html());i=true;SessionStats.add("foesAttacked",1);s.startedHealthPct=n.defender.current_health_pct;s.setReqs(Util.parseJSON(r.atkbtn_req),Util.parseJSON(r.poweratkbtn_req));s.attack_url=r.atkbtn_boost_off;s.pwrattack_url=r.poweratkbtn_boost_off;if(r.opponent_icon){s.image=r.opponent_icon}}var l=n.defender.damage_dealt;var c=n.attacker.damage_dealt;var h=n.cash_city===gVar.StartCity;var p,d;if(n.status!="ok"){if(n.status=="failed"){if(Util.isSet(n.error)){Logger.error("parseAttack: "+n.error)}}return{success:ERROR_NO_FIGHT_RESULT,first_attack:i}}gVar.AttackerUsedBoost=n.use_boost;if(Util.isSet(n.loot)){parseLootData(n.loot,f())}if(Util.isSet(n.socialMessageCards)){parseLootData(n.socialMessageCards,f())}if(s.ice_state===0&&!s.thief&&!s.just_beated){if(n.you_just_killed||n.you_just_iced){a=s.just_beated=true;s.result_text=n.you_just_killed?"You just killed and get x2 iced count.":"You just iced and got your ice.";addIcedToLog(new CSIce(n),s)}else if(n.ice_was_just_stolen){a=true;s.thief=new CSStolenIce(n);s.result_text="But ice was just stolen by "+s.thief.anchor();addStolenIceToLog(s)}}if(n.ices_so_far){AttackerStats.season_ices=n.ices_so_far}if(n.ices_target){AttackerStats.season_target=n.ices_target}if(n.total_ice_count){AttackerStats.total_ices=n.total_ice_count}s.exp=n.experience;s.won=n.power_attack.won;s.lost=n.power_attack.lost;s.fights=s.lost+s.won;s.cashFrom=n.cash_city;s.cash=n.cash;s.curHealthPct=n.defender.current_health_pct;s.curOtherDamage=n.defender.other_damage;AttackerStats.healthPct=n.attacker.current_health_pct;AttackerStats.health=n.attacker.health;AttackerStats.stamina=n.attacker.stamina;if(n.attacker.other_damage>0){addLog("You're under attack!<br>Trying to heal...","help",null,"underattack");gVar.ForceHeal=true}if(n.isWin){if(options.get("useWhitelist")&&o==true&&s.cash>1){if(PlayerList.addCurrentToWhiteList()){log("player added")}}AutoTravelCounter.reset("loses");if(gVar.AttackInBattle!==true&&t!==true&&o){if(options.skipUseHealth&&n.defender.current_health_pct>options.skipHealth){s.skip("Health percentage:"+n.defender.current_health_pct+"%");o=false}if(options.skipUseMinCash&&(s.cash<1||parseInt(s.cash/s.fights)<options.skipByMinCash)){s.skip("Cash gained per fight is too low.");o=false}if(options.skipWrongCash&&h!==true){s.skip("Cash gained from different city.");o=false}if(s.ice_state===0&&options.skipUnderAttk&&n.defender.other_damage){if(n.defender.current_health_pct>5&&n.defender.other_damage>options.skipUnderAttkPct){s.skip("So many damage from others ("+n.defender.other_damage+"%).");o=false}}}}else{if(gVar.AttackInBattle===true&&options.redIceEpicBattle===true){if(o===true&&s.autoRedIce!==true){s.autoRedIce=true;addLog("You lost but RedIce for EpicBattle is active.","blacklist",s.image)}}else if(options.redIceActive===true){if(!i&&s.attacksToIce()>=options.redIceMaxAttk){s.skip("So many fights for RedIce:"+s.attacksToIce());o=false}}else if(s.won>0&&options.redIceAfterWon===true){if(o===true&&s.autoRedIce!==true){s.autoRedIce=true;addLog("You lost after win "+s.won+" figths.<br>Red Ice mode temporarily activated for "+s.anchor(),"blacklist",s.image)}}else{if(s.won<1){if(options.get("useBlacklist")){if(PlayerList.addCurrentToBlackList()){addLog('"The beast" '+s.anchor()+" is too strong!, added to BlackList.","blacklist",s.image);if(s.fights>0)s.skip("You lost, blacklisted.")}}AutoTravelCounter.lose()}o=false}}return{success:ERROR_SUCCESS,opponent:s,iced:a,fight_result:n,first_attack:i,attack_again:o,levelUp_stop:u}}function updateCurrentOppStats(){var e=PlayerList.current;if(e.updated!==true){e.updated=true;addEventLog(e);SessionStats.add("fightCount",e.lost+e.won);SessionStats.add("staminaSpend",getStaminaSpendPerFight()*e.fights);SessionStats.add("expGained",e.exp);SessionStats.add("cash",e.cash,e.cashFrom);if(e.won>0){SessionStats.add("fightWon",e.won)}if(e.lost>0){SessionStats.add("fightLost",e.lost)}if(gVar.AttackWhitelist!==true&&gVar.AttackFamilyList!==true&&gVar.AttackInBattle!==true){if(e.isRival!==true){if(e.fights>1||e.startedHealthPct>0||e.ice_state>0){AutoTravelCounter.reset("attack")}else{AutoTravelCounter.attack()}}}}updateStats()}function updateFightResponse(e,t){if(!e||!e.fight_result){return}var n=e.fight_result;setHealth(0,n.attacker.current_health_pct);setHealth(1,n.defender.current_health_pct);updateAttackerHealthVal(n.attacker.health);updateAttackerAttackVal(n.attacker.skill_atk,n.attacker.skill_atk_no_boost,gVar.AttackerUsedBoost);updateAttackerStaminaVal(n.attacker.stamina,n.attacker.max_stamina);showDamageTaken(0,n.attacker.damage_dealt);showDamageTaken(1,n.defender.damage_dealt);showOtherDamageTaken(0,n.attacker.other_damage);showOtherDamageTaken(1,n.defender.other_damage);if(t!==true){showFightRewards(n.fight_info_div)}showWonLost(n.isWin);$("#defender_boost_used, #attacker_boost_used",popupElt.content).hide();if(Util.isSet(n.attacker.boost_used_tag)&&n.attacker.boost_used_tag!=""){showBoostUsed(0,n.attacker.boost_used_tag)}if(Util.isSet(n.defender.boost_used_tag)&&n.defender.boost_used_tag!=""){showBoostUsed(1,n.defender.boost_used_tag)}showBoostUsage(n.boost.total_qty,n.boost.next,n.boost.ask_timeout,n.boost.qty_array);showIcedOverlays(n,e.opponent,e.first_attack);showTopItems(0,n.attacker.top_items);showTopItems(1,n.defender.top_items)}function setHardLevelRange(){var e=new Object;var t={min:0,max:0};var n=0,r=0;var i={insuficient:"Cant determinate your hardest level range.<br>"+"Keep fighting and adding enemies to blacklist, then try again.",result:'Your hardest level range is <span style="color:red;">${min} - ${max}</span>.'+"<br>Would you like to AutoConfigure your level range with this values?"};if(PlayerList.blackList.length()<200){showHelpPopup({icon:"info",message:i.insuficient});return}PlayerList.blackList.each(function(t,n){var r=parseInt(Util.doRgx(/level\s(\d+)/,n).$1);if(Util.isSet(e[r])){e[r]++}else{e[r]=1}});Util.each(e,function(e,t){if(t>n){n=t}if(t>r&&t<n){r=t}});if(n<3){showHelpPopup({icon:"info",message:i.insuficient});return}Util.each(e,function(e,i){e=parseInt(e);if(i==r||i==n){if(t.min>e||t.min==0){t.min=e}if(t.max<e||t.max==0){t.max=e}}});showAskPopup("Hardest Level Range",Util.render(i.result,t),function(){options.levelRangeActive=true;options.levelRangeMin=t.min;options.levelRangeMax=t.max;options.levelRangeMethod="skip";options.toDomElements()})}function Initialize(){try{if(unsafeWindow.FightV2){Logger.debug("Killing FightV2 Class.");if(unsafeWindow.CloseJS){unsafeWindow.CloseJS()}unsafeWindow.FightV2=null}}catch(e){}genMainDom();PlayerList.blackList=new CSList("blackList");PlayerList.whiteList=new CSList("whiteList");PlayerList.bucketList=new CSList("bucketList");PlayerList.enmClanList=new CSList("enmClanList");PlayerList.frdClanList=new CSList("frdClanList");AutoTravelCounter=new CSAutoTravelCounter;AutoPublish=new CSAutoPublish;SessionStats=new CSSessionStats;AttackerStats.exp_per_sta={toString:SessionStats.expPerSta};SessionStats.load();TravelCountdown=new Countdown({success:function(){var e=setNewCurrentCity();if(e!==false){addLog("AutoTravel will force to fight in "+global.city(e).name+".","help",null,"autotravel")}},step:function(e,t){$("#mass_stat_timetotravel").html(t)},stop:function(){$("#mass_stat_timetotravel").html(Util.setColor("Inactive","grey"))}});ResumeCountdown=new Countdown({success:function(){gVar.Aborted=false;sendMessage("Updating...",true);reqSurvey(AttackNewOpponent);resetAllTimers()},step:function(e,t){$("#msgcontainer").html("Resume AutoFight in: "+t)}});FightCountdown=new Countdown({success:function(){gVar.AutoPaused=true;$("#mass_stat_timetopause").html(Util.setColor("Waiting","green"))},step:function(e,t){$("#mass_stat_timetopause").html(t)},stop:function(){$("#mass_stat_timetopause").html(Util.setColor("Inactive","grey"))}});RivalsCountdown=new Countdown({success:function(){if(gVar.AttackInBattle===true){return}$("#mass_stat_loadrivals").html(Util.setColor("Loading","green"));httpAjaxRequest({url:"remote/"+MW.getIntURL("fight")+"&tab=1",liteLoad:1,success:function(e){var t,n=PlayerList.load(e);if(n<1){t="Rival list successfully loaded:<br>No Rivals has been added."}else{t="Rival list successfully loaded:<br>Added "+n+" rivals to be attacked in next rounds."}addLog(t,"help",null,"rivals");addRivalsCountdown()}})},step:function(e,t){$("#mass_stat_loadrivals").html(t)},stop:function(){$("#mass_stat_loadrivals").html(Util.setColor("Inactive","grey"))}});showDiv("items","_logs");toStartScreen();sendMessage("Loading...",true);httpAjaxRequest({url:"remote/"+MW.getIntURL("survey","show_nps_survey"),success:function(e){if(popupElt.content.length<1){return}try{updateUserFields(e);updateStats();if($("#inner_page").attr("class")=="fight_controller"){PlayerList.load($("#inner_page").html());if(PlayerList.length()>0){genEnemyListDom();sendMessage();$("#ctrlcontainer",popupElt.content).show();return}}else{Events.refresh_click()}}catch(t){sendMessage("Error loading stats, please Close and Open again.");return}if(UserConfig.main.autorestart&&UserConfig.main.get("opt_battlefield_restart")==true){setTimeout(function(){Events.autoMode_click()},5e3)}}});options.toDomElements();popupElt.applyCustomClass();popupElt.show();$("#text_plain_ice_log").val(UserConfig.main.get("cache_ice_log"));Events.CheckIcePost()}if(global.BFRunning==true&&global.BFDock==true){LucifersMOD.dock.battlefield();return}var ERROR_SUCCESS=0;var ERROR_BAD_RESPONSE=1;var ERROR_NO_FIGHT_RESULT=2;var gVar={StartCity:MW.currentCity(),CurrentCity:0,ReadyToHeal:0,Aborted:false,AutoPaused:false,AttackWhitelist:false,BucketWhitelist:false,AttackFamilyList:false,AttackInBattle:false,AttackerUsedBoost:false,ForceHeal:false,SaveFromElements:true,WorstItems:new Object,IcedPlayerCache:new Object,WhiteListCache:new Object,WhiteListArray:new Array,BucketListCache:new Object,BucketListArray:new Array,FamilyListCache:new Object,FamilyListArrays:new Object,InventoryData:new Config("cache_loot_name",null,true),EpicBattle:null,EpicBattleFortress:null};var options=UserConfig.bfopt;var StatusTimer=new TimerMessage("#msgcontainer");var TravelCountdown;var ResumeCountdown;var FightCountdown;var RivalsCountdown;var AutoPublish;var LootCache;var SessionStats;var AutoTravelCounter;var logIcon={loot:global.zGraphicsURL+"achievements/mwach_collector_75x75_01.gif",fight:global.zGraphicsURL+"home/icon_fight_75x75_01.gif",iced:global.zGraphicsURL+"home/icon_hitlist_75x75_01.gif",kill:global.zGraphicsURL+"home/icon_hitlist_75x75_01.gif",heal:global.zGraphicsURL+"red_cross_small.gif",bank:global.zGraphicsURL+"home/icon_loot_75x75_01.gif",whitelist:global.zGraphicsURL+"DW_feed_grn_01.png",blacklist:global.zGraphicsURL+"DW_feed_red_01.png",help:global.zGraphicsURL+"home/icon_call_for_help_75x75_01.gif",published:global.zGraphicsURL+"mw_iced_feed1_90x90.gif"};var AttackerStats={health:0,maxHealth:0,healthPct:0,stamina:0,maxStamina:0,userCash:0,atkGained:0,defGained:0,expToNextLevel:0,total_ices:0,season_ices:0,season_target:0,session_ices:0,lastHealth:0,exp_fight:0,exp_fight_max:0,exp_fight_min:0,exp_per_sta:0,currCityName:{toString:function(){return'<span class="good">'+global.city(gVar.CurrentCity).name+"</span>"}},powerPack:{time1:0,time2:0,count:0,on:false,avail:function(){var e=AttackerStats;if(!(e.powerPack.on&&e.powerPack.count>0)){return{hospital:false,stamina:false}}return{hospital:options.useHealPack&&options.useHealPackWhen<e.stamina&&e.powerPack.time2==0,stamina:options.useStamPack&&options.useStamPackWhen<e.expToNextLevel&&e.powerPack.time1==0}},toString:function(){var e=AttackerStats.powerPack.avail();var t=AttackerStats.powerPack.count;t=Util.setColor(t,t>0?"green":"red");if(e.hospital&&e.stamina){return"Both ("+t+")"}if(e.hospital){return"Hospital ("+t+")"}if(e.stamina){return"Stamina ("+t+")"}return Util.setColor("Inactive","grey")}}};var CSEpicBattle=function(e){this.inBattle=e.inBattle;this.userName=e.userName;this.opponentName=e.opponentName;this.userScore=e.userScore;this.opponentScore=e.opponentScore;this.timeStart=e.timeStart;this.timeEnd=e.timeEnd;this.started=e.started;return this};CSEpicBattle.prototype={toString:function(){if(this.inBattle){var e=Util.setColor(this.userName,"red")+" VS "+Util.setColor(this.opponentName,"red");e+=this.timeEnd>5?" Started!":" Finished!";return e+"<br>Score: "+this.userScore+" vs "+this.opponentScore}else{return"Unknow Battle"}},update:function(e){var t=this;Util.each(t,function(n){if(e[n]&&!Util.isFunc(e[n])){t[n]=e[n]}})},finished:function(){return this.timeEnd<5}};var popupElt=new PopupObject("battlefield_popup",{type:"main",title:"BATTLEFIELD",width:750,onclose:function(){stopAutoFight();if(gVar.SaveFromElements===true){options.fromDomElements()}global.bucket_url=false;UserConfig.main.set("opt_battlefield_restart",false);global.BFRunning=false;UserConfig.main.save();options.save()}});var CSFightStats=function(){this.fightCount=0;this.fightWon=new Object;this.fightLost=new Object;this.icesWon=new Object;this.killWon=new Object;this.icesLost=new Object;this.foesAttacked=new Object;this.revenge=new Object;this.cash={won:0,lost:0};this.expGained=0;this.staminaSpend=0;this.coinsGained=0;return this};var CSSessionStats=function(){var e=String(parseInt((new Date).getTime()/1e3));var t=new Config("bf_stats");var n=new Object;var r=new Object;var i=n[e]=new Object;var s=i[0]={fightCount:0,fightWon:0,fightLost:0,icesWon:0,killWon:0,icesLost:0,foesAttacked:0,revenge:0,expGained:0,staminaSpend:0,coinsGained:0,cash:{won:new Object,lost:new Object,toString:function(){var e=global.city(gVar.CurrentCity);var t=this,n='<span class="cur_cash" title="';global.cities.each(function(e,r){if(t["won"][e]){n+=r.name+": "+Util.formatNum(t["won"][e])+" \n"}});n+='">';n+=e.currency+Util.formatNum(t["won"][gVar.CurrentCity]||0);n+="</span>";return n}}};this.expPerSta=function(){var e=s.expGained/s.staminaSpend;return isNaN(e)?0:e.toFixed(2)};this.currentTotal=s;this.get=function(e,t){var r=i;if(e&&n[e]){r=n[e]}if(Util.isSet(t)&&r[t]){r=r[t]}return r};this.addStolenIce=function(e){r[e.id]=e.name;var t=(i[gVar.CurrentCity].icesLost[e.id]||0)+1;i[gVar.CurrentCity].icesLost[e.id]=t;s.icesLost++};this.add=function(e,t,n){var n=n||gVar.CurrentCity;var o=PlayerList.current;var u;if(!Util.isSet(t)){t=1}if(!Util.isNumber(t)){t=0}if(Util.isObject(i[n])){if(e==="cash"){if(t>-1){s["cash"]["won"][n]+=t;i[n]["cash"]["won"]+=t}else{s["cash"]["lost"][n]-=t;i[n]["cash"]["lost"]-=t}}else{if(Util.isObject(u)){u=i[n][e];r[o.id]=o.name;u[o.id]=(parseInt(u[o.id])||0)+t}else{i[n][e]+=t}s[e]+=t}}};this.load=function(i){t.load(function(){t.each(function(e,t){if(e==="opp"){r=t}else{n[e]=t}});i&&i(n,e)})};this.save=function(e){Logger.debug("SessionStats; (fights:"+s.fightCount+", save:"+(s.fightCount>9)+").");if(s.fightCount<10){return}t.add("opp",r);Util.each(n,function(e,n){t.add(e,n)});t.save(e)};this.each=function(e){Util.each(i[gVar.CurrentCity],e)};global.cities.each(function(e){i[e]=new CSFightStats;s.cash.won[e]=s.cash.lost[e]=0});return this};var CSAutoTravelCounter=function(){function r(t){if(gVar.AttackFamilyList!==true&&gVar.AttackWhitelist!==true&&gVar.AttackInBattle!==true){e[t]++}}function i(r){var i,s,o;switch(true){case r===true:i=n["a"][1];break;case e.loses>4:i=n["a"][2];PlayerList.clear();break;case e.stolenIce>4:i=n["a"][3];break;case e.attack>14:i=n["a"][4];PlayerList.clear();break;case e.noTarget>2:i=n["a"][5];break;default:return false}switch(false){case s=options.travelAutomatic:i+=n["b"]["f1"];break;case s=options.travelToStartCity:i+=n["b"]["f2"];break;case s=setNewCurrentCity():i+=n["b"]["f3"];break;default:i+=n["b"]["ok"];break}if(s){i+=global.city(s).name+"."}addLog(i,"help",null,"autotravel");t.reset();return false}var e,t=this;var n={a:{1:"Your health fall down very quickly.<br>",2:"You lost 5 times in a row.<br>",3:"You lost 5 ices in a row.<br>",4:"You fought against 15 dead bodies in a row.<br>",5:"Your fightlist has no valid targets for 3 times.<br>"},b:{f1:'Enable "Automatic" option in Travel line to travel if this happen again.',f2:'Enable "Start City" option in Travel line to travel if this happen again.',f3:"You must select the cities where you want to travel.",ok:"AutoTravel will force to fight in "}};this.stolenIce=function(){r("stolenIce");return i()};this.attack=function(){r("attack");return i()};this.lose=function(){r("loses");return i()};this.noTarget=function(){r("noTarget");return i()};this.heal=function(){return i(true)};this.reset=function(t){if(!t||!Util.isSet(e[t])){e={stolenIce:0,attack:0,loses:0,noTarget:0}}else{e[t]=0}};t.reset();return this};var CSFightResult=function(e){e=h$(e);this.fight_wrapper=$("#fight_wrapper",e);this.atkbtn_req=$("#fightv2_atkbtn_boost_on a",e).attr("requirements");this.poweratkbtn_req=$("#fightv2_poweratkbtn_boost_on a",e).attr("requirements");this.atkbtn_boost_on=$("#fightv2_atkbtn_boost_on a",e).attr("href");this.atkbtn_boost_off=$("#fightv2_atkbtn_boost_off a",e).attr("href");this.poweratkbtn_boost_on=$("#fightv2_poweratkbtn_boost_on a",e).attr("href");this.poweratkbtn_boost_off=$("#fightv2_poweratkbtn_boost_off a",e).attr("href");this.opponent_icon=$("#defender_pic img",e).attr("src");try{this.popup=Util.parsePopup(e)}catch(t){}var n,r,i,s=e.find("script:regex(text,FightV2.init)").text();if(s){n=Util.substr(s,"fight_result = {",";FightV2",15,0);r=Util.substr(s,"var feed","MW.Feed(feed)",0,0)}if(n){this.fight_result=Util.parseJSON(n)}if(r&&(i=e$(".fv2_boost_ask_allowed a",this.fight_wrapper))){i.attr("onclick",r+"MW.Feed(feed);")}n=s=r=e=i=null;return this};var CSOpponent=function(){this.reqs={atk:{stamina:1,health:20},pwr:{stamina:5,health:20}};this.id=0;this.badge="";this.badge_url=null;this.title="";this.name="";this.bossBot=false;this.level=0;this.mafia=0;this.clanName=null;this.clanId=null;this.ice_state=0;this.iced=false;this.fights=0;this.alive=false;this.won=0;this.lost=0;this.isThief=false;this.isRival=false;this.isWList=false;this.isCBttl=false;this.isFList=false;this.retries=0;this.attack_url=null;this.pwrattack_url=null;this.powerAttack=false;return this};CSOpponent.prototype={toString:function(){var e;switch(true){case this.isThief:e=' "Thief" ';break;case this.isRival:e=' "Rival" ';break;case this.isWList:e=' "Whitelist" ';break;case this.isCBttl:e=' "ClanBattle" ';break;default:e=' "Fightlist" ';break}return"Level "+Util.setColor(this.level,"yellow")+Util.setColor(e,"green")+this.anchor()},setReqs:function(e,t){if(e&&e.stamina&&e.health){this.reqs.atk=e}if(t&&t.stamina&&t.health){this.reqs.pwr=t}},skip:function(e){this.skipped=true;if(!this.result_text){this.result_text=e}},hasPwrAtkUrl:function(){return/xw_controller=fight/i.test(this.pwrattack_url)},hasAtkUrl:function(){return/xw_controller=fight/i.test(this.attack_url)},getAttackUrl:function(e){var t="use_boost="+(gVar.AttackerUsedBoost?"1":"0");if(/xw_controller=fight/i.test(this.attack_url)){this.attack_url=this.attack_url.replace(/use_boost=\d+/,t)}if(/xw_controller=fight/i.test(this.pwrattack_url)){this.pwrattack_url=this.pwrattack_url.replace(/use_boost=\d+/,t)}if((this.powerAttack||e)&&this.pwrattack_url){return this.pwrattack_url}else{this.powerAttack=false}return this.attack_url},requirements:function(){if(this.powerAttack&&this.pwrattack_url){return this.reqs.pwr}else{return this.reqs.atk}},attacksToIce:function(){if(this.fights>1&&this.startedHealthPct&&this.curHealthPct){var e=this.startedHealthPct-this.curHealthPct;return Math.ceil(this.curHealthPct/(e/this.fights))}return-1},anchor:function(){return[this.clan(),Util.setAnchor(MW.getProfileLink(this.id),this.name)].join(" ")},profile:function(){return MW.getProfileLink(this.id)},clan:function(){if(this.clanId&&this.clanName){return Util.setAnchor(MW.getFamilyLink(this.clanId),Util.setColor(this.clanName,"red"))}else if(this.clanName){return Util.setColor(this.clanName,"red")}return""},isListed:function(e){return PlayerList[e].exists(this.id)},clone:function(){var e=new CSOpponent;for(m in e){if(typeof e[m]!=="function")e[m]=this[m]}return e},isValid:function(){function t(e){if(options.levelRangeActive!==true){return options.compareRangeMethod==="AND"}if(e>=options.levelRangeMin&&e<=options.levelRangeMax){return options.levelRangeMethod==="attk"}else{return options.levelRangeMethod!=="attk"}}function n(e){if(options.mafiaRangeActive!==true){return options.compareRangeMethod==="AND"}if(e>=options.mafiaRangeMin&&e<=options.mafiaRangeMax){return options.mafiaRangeMethod==="attk"}else{return options.mafiaRangeMethod!=="attk"}}function r(e,t){if(!Util.isString(e)||e.length<1){return false}return(new RegExp(e,"i")).test(t)}var e=true;if(options.skipBossBots===true&&this.bossBot===true){Logger.debug("Skipped Attacking Boss Bot : "+this.name);return false}if(parseInt(this.id)===57256871||parseInt(this.id)===98025069||options.skipIced===true&&this.iced===true){Logger.debug("Skipped Attacking Dev : "+this.id);return false}if(PlayerList.blackList.exists(this.id)){Logger.debug("Skipped blacklisted id: "+this.id);return false}if(options.badgeFilterActive===true){log(" badge filter is on badge -> "+this.badge);if(r(options.badgeFilterExpr,this.badge)){addEventLog(this,"Badge filtered: "+this.badge);Logger.debug("filtered badge: ("+this.badge+") "+this.name);return false}}if(this.isCBttl===true){return true}if(PlayerList.whiteList.exists(this.id)){return true}if(this.isThief===true&&options.attackRevengeFilter==0){return true}if(this.clanId&&PlayerList.frdClanList.exists(this.clanId)){Logger.debug("skipping friendly clan: "+this.clanName);return false}if(options.nameFilterActive===true){if(r(options.nameFilterExpr,this.clanName+" "+this.name)){Logger.debug("filtered name: "+this.clanName+" "+this.name);return false}}if(this.isThief!==true&&options.skipIcedByMe&&Util.isSet(gVar.IcedPlayerCache[this.id])){Logger.debug('skipping "'+this.name+'" because was iced by you.');return false}if(this.isThief===true&&options.attackRevengeFilter==1){return true}if(options.levelRangeActive||options.mafiaRangeActive){if(options.compareRangeMethod==="AND"){e=t(this.level)&&n(this.mafia)}else{e=t(this.level)||n(this.mafia)}}if(!e){Logger.debug("Out level/mafia range. level:"+this.level+", mafia:"+this.mafia);return false}return true}};var CSStolenIce=function(e){this.id=Util.parseNum(e.thief_id);this.name=Util.trim($("<div>"+e.thief_name+"</div>").text());this.level=Util.parseNum(e.thief_class);this.inClan=e.thief_in_clan;this.inMafia=e.thief_isInMafia;this.tyClass=e.thief_class;try{this.action=$(e.thief_btn).attr("href");this.pic=$(e.thief_pic).attr("src")}catch(t){}e=null;return this};CSStolenIce.prototype.anchor=function(){if(this.id&&this.name){return Util.setAnchor(MW.getProfileLink(this.id),this.name)}};var CSItemCard=function(e){var t=c$("div").html(e);this.title=t.find("#fake_item_card_title").text();this.pic=t.find("#fake_item_card_img img").attr("src");this.quantity=t.find("#fake_item_card_qty, #fake_item_card_subtitle").text();if(/victory/.test(this.pic)){this.type="coins"}t.empty();e=t=null;return this};var CSItemLoot=function(e,t){var n=gVar.InventoryData.data;var r=c$("div").html(e);this.name="Unknow";this.type="Unknow";this.item_id=r.find(".item_card_mini").attr("item_id");this.pic=r.find(".item_card_mini img").attr("src");this.attack=Util.parseNum(r.find(".attack").text());this.defense=Util.parseNum(r.find(".defense").text());this.count=parseInt(t);if(Util.isSet(n=n[this.item_id])){this.name=n.name;this.type=n.type}r.empty();e=r=n=null;return this};CSItemLoot.prototype.toString=function(){var e=this.name;if(this.attack){e+=' <span class="attack">'+this.attack+"</span>"}if(this.defense){e+=' <span class="defense">'+this.defense+"</span>"}if(this.increaseAttack){e+=' (<span class="attack" style="color:green;">+'+this.increaseAttack+"</span>)"}if(this.increaseDefense){e+=' (<span class="defense" style="color:green;">+'+this.increaseDefense+"</span>)"}return e};var CSItemIceEvent=function(e){var t=c$("div").html(e);this.title=t.find(".ice > div > div").text();this.pic=t.find(".ice img").attr("src");this.count=Util.parseNum(this.title);this.event=true;this.item_id=String(this.title).toLowerCase().replace(/\s/g,"");if(this.count===0){this.count=1}t.empty();e=t=null;return this};var CSIce=function(fight_result){this.isKilled=fight_result.you_just_killed;this.count=fight_result.total_ice_count;this.season_ices=fight_result.ices_so_far;this.season_target=fight_result.ices_target;this.action="";this.canPublish=false;this.link="";if(fight_result.feed_js&&/MW.Feed/i.test(fight_result.feed_js)){this.canPublish=true;this.action='<a href="javascript: void(0);"'+'class="sexy_button_new medium white sexy_announce_gray" '+'onclick="'+fight_result.feed_js+'"><span><span>Share</span></span></a>';var feed=Util.substr(fight_result.feed_js,"var feed = {","MW.Feed");try{eval(feed);this.link=feed.link;this.description=feed.description}catch(err){Logger.error(err)}}fight_result=null;return this};var CSAutoPublish=function(){var e=new Object;this.add=function(t,n){if(!t){return}var r="["+(new Date).toLocaleTimeString()+"]";if(t.action&&t.canPublish===true){e[r]=(t.isKilled?" KILL ":" ICED ")+t.count+" to "+n}};this.length=function(){return Util.length(e)};this.publishTo=function(t,n){var r="You've ${count} ICES.<br>Auto-Publish has posts all and reset the count.";var i="Error code #${errorcode}<br>${errormsg}";var s=e;e=new Object;facebook.streamPublish({target:t,name:"{*actor*} has eliminated some players!",properties:s},function(e){if(Util.isString(e)){r=Util.render(r,{count:Util.length(s)});addLog(r,"published",null,"autopublish")}else if(e.error_code||e.error){i=Util.render(i,{errorcode:e.error?e.error.code:e.error_code,errormsg:e.error?e.error.message:e.error_msg});addLog(i,"published",null,"autopublish")}n&&n()})};this.clear=function(){e=new Array};return this};var CSLootList=function(){function r(e,t){var n=gVar.InventoryData.data[e.item_id];var r=n&&Util.isObject(gVar.WorstItems)?gVar.WorstItems[n.type]:false;if(n&&r){if(n.attack&&n.attack>r.att){AttackerStats.atkGained+=(e.increaseAttack=n.attack-r.att)*t}if(n.defense&&n.defense>r.def){AttackerStats.defGained+=(e.increaseDefense=n.defense-r.def)*t}}return Util.isSet(n)}function i(e,t){Logger.debug("getItemInfo: Loading loot...");MW.getItemInfo(e.item_id,function(r,i){e.name=r;if(n&&n[i]){e.type=n[i]}if(!Util.isSet(gVar.InventoryData.data[e.item_id])){gVar.InventoryData.add("forceReload",true);gVar.InventoryData.data[e.item_id]={id:e.item_id,name:r,type:n[i],attack:e.attack,defense:e.defense};gVar.InventoryData.save(t)}Logger.debug('Loot Item "'+r+'" loaded.')})}var e=this;var t=new Object;var n=new Object;this.load=function(e){var t=["id","name","type","attack","defense"];gVar.InventoryData.load(function(){if(!gVar.InventoryData.data||gVar.InventoryData.forceReload){gVar.InventoryData.data=new Object;MW.getInventoryData(function(n){if(n&&n.Items){Util.each(n.Items.data,function(e,n){var r=gVar.InventoryData.data[e]=new Object;Util.each(t,function(e,t){r[t]=n[t]})});gVar.InventoryData.forceReload=false;gVar.InventoryData.save(function(){Logger.debug("Inventory Data saved.");e&&e(true)})}else{e&&e(false)}})}else{e&&e(true)}})};this.add=function(e){var n=e.count||1;if(Util.isSet(t[e.item_id])){(e=t[e.item_id]).count+=n}else{t[e.item_id]=e}if(!r(e,n)){i(e,function(){r(e,n)})}return e};this.get=function(e){return t[e]};this.exists=function(e){return Util.isSet(t[e])};this.each=function(e,n){var r=t;var i={name:function(e,t){var n=e.name.toLowerCase();var r=t.name.toLowerCase();return n<r?-1:n>r?1:0},attack:function(e,t){return(t.attack||0)-(e.attack||0)},defense:function(e,t){return(t.defense||0)-(e.defense||0)},best:function(e,t){var n=e.attack||0,r=e.defense||0,i=t.attack||0,s=t.defense||0,o=(e.increaseAttack||0)+(e.increaseDefense||0),u=(t.increaseAttack||0)+(t.increaseDefense||0);switch(true){case o!=u:return u-o;case n!=i:return i-n;case r!=s:return s-r;default:return 0}}};if(Util.isSet(n)&&Util.isSet(i[n])){r=new Array;Util.each(t,function(e,t){r.push(t)});r.sort(i[n])}Util.each(r,e)};if(unsafeWindow.Item&&unsafeWindow.Item.Types){n=new Object;Util.each(unsafeWindow.Item.Types,function(e,t){n[t]=e})}return this};var CSList=function(e){this.id=e;return this};CSList.prototype={add:function(e){var t=(new Date).toDateString();if(!Util.isSet(e.id)||e.id===0){return}if(e.level){options.get(this.id)[e.id]=e.name+"  level "+e.level+" at "+t}else{options.get(this.id)[e.id]=e.name+" at "+t}options.save()},exists:function(e){return Util.isSet(e)&&Util.isString(options.get(this.id)[e])},each:function(e){Util.each(options.get(this.id),e)},remove:function(e){if(Util.isSet(e)&&options.get(this.id)){delete options.get(this.id)[e]}},length:function(){return Util.length(options.get(this.id))},toArray:function(){var e=options.get(this.id);var t=[];if(Util.length(e)>0){Util.each(e,function(e,n){if(parseInt(e)&&Util.isString(n));t.push({id:e,name:n})})}return t}};var CSPlayerList=function(){var e=this;var t=new Array;this.current=null;this.revenge=null;this.blackList=null;this.whiteList=null;this.frdClanList=null;this.enmClanList=null;this.bucketList=null;this.addCurrentToBlackList=function(){var t=!e.blackList.exists(e.current.id);e.blackList.add(e.current);return t};this.addCurrentToWhiteList=function(){var t=!e.whiteList.exists(e.current.id);e.whiteList.add(e.current);return t};this.addCurrentToBucketList=function(){var t=!e.bucketList.exists(e.current.id);e.bucketList.add(e.current);return t};this.setCurrent=function(n){e.current=null;if(e.revenge){e.current=e.revenge;e.revenge=null;return e.current}if(isNaN(n=parseInt(n))||t.length<1){return null}if(n>0){return e.current=t.splice(n,1).shift()}else if(n<0){return e.current=t.pop()}else{return e.current=t.shift()}};this.setRandomCurrent=function(){return e.setCurrent(Math.floor(Math.random()*t.length))};this.setLastCurrent=function(){return e.setCurrent(-1)};this.add=function(n){if(!e.exists(n.id)){t.push(n)}};this.addFrom=function(n){var r=false;Util.each(n,function(n,i){if(!e.blackList.exists(i.id)){t.push(i);r=true}});return r};this.exists=function(e){var n=false;Util.each(t,function(t,r){return!(n=r.id==e)});return n};this.length=function(){return t.length};this.clear=function(e){if(Util.isSet(e)){var n=new Array;Util.each(t,function(t,r){if(r[e]!==true){n.push(r)}});t=n}else{t=new Array}};this.sort=function(e){var n={name:function(e,t){var n=e.name.toLowerCase();var r=t.name.toLowerCase();return n<r?-1:n>r?1:0},level:function(e,t){return t.level-e.level},mafia:function(e,t){return t.mafia-e.mafia},iced:function(e,t){return e.iced?-1:1}};if(t.length>0){t.sort(n[e])}};this.each=function(e){if(typeof e!=="function")return;for(var n=t.length-1;n>=0;n--){e.apply(t[n],[n,t[n]])}};this.load=function(n){var r=0;var i=h$(n);var s=options.skipIced?".fight_table tr:has(td.fight_list_player_alive)":".fight_table tr:has(td[class^=fight_list_player])";options.refreshMax=Math.min(Math.max(options.refreshMax,6),20);i.find(s).each(function(n,i){var s,o;try{if(s=e$("a:regex(href,action=attack)",i)){o=new CSOpponent;o.attack_url=s.attr("href");var u=Util.trim(Util.uSplit(o.attack_url).opponent_id);if(/bot/.test(u)){o.bossBot=true;o.id=u}else{o.id=Util.parseNum(u)}o.setReqs(Util.parseJSON(s.attr("requirements")))}else{return}if(!Util.isSet(o.id)||o.id===0||e.exists(o.id)||e$("td[id^=npc_]",i)!==null){return}if(s=e$("td:eq(0) a:regex(href,controller=clan)",i)){o.clanId=Base64.decode(Util.uSplit(s.attr("href")).id);o.clanName=Util.trim(s.text())}var a=$(".fight_list_badge_area .fight_badge img",i).eq(1).attr("title");if(Util.isSet(a)){o.badge=$(".fight_list_badge_area .fight_badge img",i).attr("title")+" "+a}else{o.badge=$(".fight_list_badge_area .fight_badge img",i).attr("title")}o.isRival=e$("a:regex(href,rivals_remove|rivals_add)",i)!==null;o.badge_url=$(".fight_list_badge_area img",i).attr("src");o.title=Util.trim($("td:eq(0) span:first",i).text());if(o.bossBot===true){o.name=Util.trim($(".fight_list_name_area > span",i).text()).replace(/\d+/g,"")}else{o.name=Util.trim($("td:eq(0) a:regex(href,controller=stats)",i).text())}o.level=Util.parseNum($("td:eq(0) *[class^=fight_list_level]",i).text());o.iced=$("img:regex(src,iced)",i).length>0;o.mafia=Util.parseNum($("td:eq(1)",i).text());if(o.isValid()){o.isFList=true;t.push(o);r++}return options.refreshOn!==true||r<options.refreshMax}catch(f){Logger.error("PlayerList.load: "+f.message)}s=o=null});n=i=null;Logger.debug("Added "+r+" opponents.");return r};this.loadBattle=function(n){var r=0;var i=h$(n);if(i.find("#battle_target_list .fight_entry .fr a:regex(href,action=attack)").length<1){var s=$("#their_wall a:regex(href,xw_action=attackFortress)",i);gVar.EpicBattleFortress={url:s.attr("href"),req:Util.parseJSON(s.attr("requirements")).stamina};return 0}else{gVar.EpicBattleFortress=null}i.find("#battle_target_list .fight_entry").each(function(n,i){var s,o=e$(".fr a:regex(href,action=attack)",i);if(o==null){return}s=new CSOpponent;s.attack_url=o.attr("href");s.id=Util.parseNum(Util.uSplit(s.attack_url).opponent_id);s.setReqs(Util.parseJSON(o.attr("requirements")));if(!Util.isSet(s.id)||s.id===0||e.exists(s.id)){return}if(o=e$(".fl a:regex(href,controller=clan)",i)){s.clanId=Base64.decode(Util.uSplit(o.attr("href")).id);s.clanName=Util.trim(o.text())}s.isCBttl=true;s.iced=false;s.name=Util.trim($(".fl a:regex(href,controller=stats)",i).text());(function(e){var t=Util.doRgx(/Level:\s*(\d+)\s*(\w*)/i,e);s.level=Util.parseNum(t.$1);s.mafia=Util.parseNum(Util.doRgx(/Mafia: (\d+)/i,e).$1);s.title=t.$2||""})($(".fl",i).text());log(s);if(s.isValid()){t.push(s);r++}o=s=user=null});n=i=null;addLog(gVar.EpicBattle+"<br>Found "+r+" opponents.","help",null,"epicbattle");return r};return this};var PlayerList=new CSPlayerList;var Events={hardLevelRange_click:function(){setHardLevelRange();return false},editFilter:function(){var e=$(this).attr("for");var t=$("#"+e,popupElt.content);var n=t.val();var r="Add values delimited by lines:";var i=/([\^\$\.\+\?\*\{\}\(\)\\\/\|\[\]])/g;var s=/\\([\^\$\.\+\?\*\{\}\(\)\\\/\|\[\]])/g;if(Util.isString(n)&&n.length>0){n=n.replace(/([^\\])\|/g,"$1\n").replace(s,"$1")}else{n=""}showPromptPopup(r,n,function(e){var n=new Array;if(Util.isString(e)&&e.length>0){if(i.test(e)){e=e.replace(i,"\\$1")}Util.each(e.split(/\n/),function(e,t){if(Util.isString(t)&&(t=Util.trim(t)).length>0){n.push(t)}})}if(n.length>0){t.val(n.join("|"))}else{t.val("")}},250);return false},sortloot_click:function(){var e=$(this).attr("href").substring(1);$("#lootlistlog",popupElt.content).empty();LootCache.each(function(e,t){addLootLog(t,true)},e);return false},revenge_click:function(){gVar.Aborted=false;if(PlayerList.revenge){PlayerList.current=PlayerList.revenge;updateNewOpponent();manualAttack()}return false},use_boost_click:function(){var e=this.id==="fightv2_boost_on"?"on":"off";httpAjaxRequest({url:"remote/"+MW.getIntURL("fight","setBoostToggle")+"&toggle_state="+e,success:function(){$("#fightv2_boost_on, #fightv2_boost_off",popupElt.content).removeClass("checked");$("#fightv2_boost_"+e,popupElt.content).addClass("checked");gVar.AttackerUsedBoost=e==="on"}});return false},CheckIcePost:function(){if($("#text_plain_ice_log").val().length>0){$("#post_ice_listings").removeClass("disabled");$("#select_ice_listings").removeClass("disabled");$("#clear_ice_listings").show()}else{$("#post_ice_listings").addClass("disabled");$("#select_ice_listings").addClass("disabled");$("#clear_ice_listings").hide()}},showLog_click:function(){var e=String($(this).attr("href")).substring(1);$("#events_list .buttons a").removeClass("selected");$(this).addClass("selected");showDiv(e,"_logs");Events.CheckIcePost();return false},addNewToList_click:function(){var e=$(this).attr("name");var t="Paste all MW profiles OR IDs by line delimited:";showPromptPopup(t,"",function(t){addMWProfiles(e,t)},250);return false},deleteSelected_click:function(){var e=$(this).attr("name").toLowerCase();$("option:selected","#bfopt_"+e).remove();options.fromDomElements();options.save();return false},clearList_click:function(){var e=$(this).attr("name");$("#bfopt_"+e.toLowerCase()).empty();log("clear list -> "+e);options.set(e,{});options.save();return false},mwProfile_click:function(){var e=$(this).attr("name").toLowerCase();var t=$("#bfopt_"+e).find("option:selected");if(t.length===0){showHelpPopup({icon:"info",title:"No opponents selected.",message:"You need to select at least one opponent for go to his profile page."});return}if(t.length<2||confirm("Are you sure to open ALL selected users?")){t.each(function(t,n){if(/clanlist/i.test(e)){unsafeWindow.open(MW.getFamilyLink(n.value))}else{unsafeWindow.open(MW.getProfileLink(n.value))}})}return false},addFromList_click:function(){var e=$(this).attr("name");$("#import_settings").remove();c$("input:file","id:import_settings,name:files[],lst:"+e).css({position:"absolute",width:1,left:"-100px",opacity:0}).appendTo(popupElt.content).change(Events.importData_change).click();return false},importData_change:function(e){var t=options.get($(this).attr("lst"));if(!e.target.files||!t){return}FileSystem.fileReader(e.target.files,function(n){try{Util.each(Util.parseJSON(n),function(e,n){if(parseInt(e))t[e]=n});options.toDomElements();options.save();showHelpPopup({icon:"info",title:"Import List",message:"List imported successfully."})}catch(r){Logger.error(r)}finally{$(e.target).remove()}})},getList_click:function(){var e=$(this).attr("name");var t=Util.toJSON(options.get(e));if(t.length<5){return false}FileSystem.fileSave("data:application/json;base64,"+Base64.encode(t));return true},sort_click:function(){PlayerList.sort(this.id.match(/sort_by_(\w+)/)[1]);genEnemyListDom();return false},refresh_click:function(){$("#opponents_table",popupElt.content).empty();if(!$(".fightBtn").hasClass("disabled"))$(".fightBtn").addClass("disabled");sendMessage();showFightRewards();clearAllTimers();options.fromDomElements();updateStats();setTimeout(function(){PlayerList.clear();$("#opponents_table").empty();refreshPlayerList(function(e){if(e>0){genEnemyListDom()}else{sendMessage('No players found. Try change filters and click "Refresh".')}$("#ctrlcontainer",popupElt.content).show();if($(".fightBtn").hasClass("disabled"))$(".fightBtn").removeClass("disabled")})},500);return false},attack_click:function(){gVar.Aborted=false;options.fromDomElements();options.save();var e=this.id.match(/attack_id_(\d+)/)[1];PlayerList.setCurrent(e);if(options.travelToStartCity){gVar.StartCity=options.startCity}$("#fight_wrapper",popupElt.content).empty();toFightScreen();reqSurvey(function(){gVar.SaveFromElements=false;manualAttack()});return false},powerAttack_click:function(){PlayerList.current.powerAttack=true;manualAttack();return false},attackAgain_click:function(){manualAttack();return false},runAway_click:function(){stopAutoFight();gVar.AttackWhitelist=false;gVar.AttackFamilyList=false;gVar.AttackBucketList=false;options.toDomElements();options.save();gVar.SaveFromElements=true;if(PlayerList.length()>0)genEnemyListDom();toStartScreen();return false},autoMode_click:function(){UserConfig.main.set("opt_battlefield_restart",true);gVar.AttackBucketList=false;UserConfig.main.save();httpAjaxStopRequests();gVar.Aborted=false;options.fromDomElements();options.save();toFightScreen();if(options.travelToStartCity&&gVar.AttackInBattle!==true){gVar.StartCity=options.startCity}AutoTravelCounter.reset();gVar.SaveFromElements=false;options.refreshEvery=Math.min(Math.max(options.refreshEvery,5),15);addAutoControls(true);if(options.timerStartActive===true){addFightResumeCountdown(options.timerStartMins)}else{resetAllTimers();reqSurvey(AttackNewOpponent)}return false},attackWhiteList_click:function(){gVar.AttackWhitelist=true;gVar.AttackFamilyList=false;gVar.AttackBucketList=false;gVar.Aborted=false;PlayerList.whiteList.attack_count=1;gVar.WhiteListArray=PlayerList.whiteList.toArray();gVar.WhiteListCache=new Object;Events.autoMode_click();return false},attackFamily_click:function(){gVar.AttackWhitelist=false;gVar.AttackFamilyList=true;gVar.AttackBucketList=false;gVar.Aborted=false;toFightScreen();getFamilyOpponents(Events.autoMode_click);return false},attackBucket_click:function(){PlayerList.clear();gVar.AttackWhitelist=false;gVar.AttackFamilyList=false;gVar.AttackBucketList=true;gVar.Aborted=false;options.set("bucketList",{});options.save();getBucketListOpponents(Events.autoMode_click);toFightScreen();return false},stop_click:function(){$(this).remove();UserConfig.main.set("opt_battlefield_restart",false);UserConfig.main.save();stopAutoFight("User stopped.");setTimeout(function(){sendMessage("AutoFight was stopped.");addAutoControls(true)},500);return false},skip_click:function(){$(this).remove();PlayerList.current.skip("User skip manually.");return false},autoHeal_click:function(){var e=$(this).attr("instantheal");$(this).remove();gVar.ForceHeal=true;if(parseInt(e)===1){clearAllTimers();healPlayer(function(){resetAllTimers();preAttack()})}return false},heal_click:function(){hideFightControls();healPlayer(addManualControls);return false}};popupElt.addBase64Style("I2JhdHRsZWZpZWxkX3BvcHVwIC5ibGFja19ib3ggew0KCWZvbnQtd2VpZ2h0OiBib2xkOyANCgljb2xvcjogcmdiKDIwOCwgMjA4"+"LCAyMDgpOyANCglib3JkZXI6IDFweCBzb2xpZCByZ2IoMTUzLCAxNTMsIDE1Myk7IA0KCWJhY2tncm91bmQtY29sb3I6IGJsYWNr"+"OyANCglmb250LXNpemU6IDE0cHg7DQp9DQojYmF0dGxlZmllbGRfcG9wdXAgLm1hZmlhX2F0dGFjayAgew0KCWJhY2tncm91bmQ6"+"IHVybChodHRwOi8vbXdmYi5zdGF0aWMuemduY2RuLmNvbS9td2ZiL2dyYXBoaWNzL2ljb25fbWFmaWFfYXR0YWNrXzIyeDE2XzAx"+"LmdpZikgbm8tcmVwZWF0IDBweCA1MCU7DQoJcGFkZGluZy1sZWZ0OiAxOXB4Ow0KICAgIGJhY2tncm91bmQtc2l6ZTogMTZweDsN"+"CiAgICAtbW96LWJhY2tncm91bmQtc2l6ZTogMTZweDsNCn0NCiNiYXR0bGVmaWVsZF9wb3B1cCAubWFmaWFfZGVmZW5zZSB7DQoJ"+"YmFja2dyb3VuZDogdXJsKGh0dHA6Ly9td2ZiLnN0YXRpYy56Z25jZG4uY29tL213ZmIvZ3JhcGhpY3MvaWNvbl9tYWZpYV9kZWZl"+"bnNlXzIyeDE2XzAxLmdpZikgbm8tcmVwZWF0IDBweCA1MCU7DQoJcGFkZGluZy1sZWZ0OiAxOXB4Ow0KICAgIGJhY2tncm91bmQt"+"c2l6ZTogMTZweDsNCiAgICAtbW96LWJhY2tncm91bmQtc2l6ZTogMTZweDsNCn0NCiNiYXR0bGVmaWVsZF9wb3B1cCAuc3RhdF90"+"cmF2ZWwgIHsgDQoJYmFja2dyb3VuZDogdXJsKGh0dHA6Ly9td2ZiLnN0YXRpYy56eW5nYS5jb20vbXdmYi9ncmFwaGljcy9pY29u"+"X3RyYXZlbF8zMngxN18wMS5naWYpIG5vLXJlcGVhdCAwcHggNTAlOw0KCXBhZGRpbmctbGVmdDogMTlweDsNCiAgICBiYWNrZ3Jv"+"dW5kLXNpemU6IDE2cHg7DQogICAgLW1vei1iYWNrZ3JvdW5kLXNpemU6IDE2cHg7DQp9DQojYmF0dGxlZmllbGRfcG9wdXAgLnN0"+"YXRfdmljdG9yeSB7DQoJYmFja2dyb3VuZDogdXJsKGh0dHA6Ly9td2ZiLnN0YXRpYy56eW5nYS5jb20vbXdmYi9ncmFwaGljcy92"+"aWN0b3J5X2ljb24uZ2lmKSBuby1yZXBlYXQgMHB4IDUwJTsNCglwYWRkaW5nLWxlZnQ6IDE5cHg7DQogICAgYmFja2dyb3VuZC1z"+"aXplOiAxNnB4Ow0KICAgIC1tb3otYmFja2dyb3VuZC1zaXplOiAxNnB4Ow0KfQ0KI2JhdHRsZWZpZWxkX3BvcHVwIC5zdGF0X3Bv"+"d2VycGFjayB7DQogICAgYmFja2dyb3VuZDogdXJsKGh0dHA6Ly9td2ZiLnN0YXRpYy56eW5nYS5jb20vbXdmYi9ncmFwaGljcy9I"+"UF9wb3dlcnBhY2sucG5nKSBuby1yZXBlYXQgMHB4IDUwJTsNCiAgICBiYWNrZ3JvdW5kLXNpemU6IDE2cHggMTZweDsNCiAgICAt"+"bW96LWJhY2tncm91bmQtc2l6ZTogMTZweDsNCiAgICBwYWRkaW5nLWxlZnQ6IDE5cHg7DQp9DQojYmF0dGxlZmllbGRfcG9wdXAg"+"LnN0YXRfaWNlZCB7DQoJYmFja2dyb3VuZDogdXJsKGh0dHA6Ly9td2ZiLnN0YXRpYy56Z25jZG4uY29tL213ZmIvZ3JhcGhpY3Mv"+"bWFwX2Jhc2VkX2pvYnMvbWFzdGVyeV9zdGFyc19tZWRfODF4MzBfMDIucG5nKSBuby1yZXBlYXQgLTY0cHggLTEzcHg7DQoJcGFk"+"ZGluZy1sZWZ0OiAxOXB4Ow0KfQ0KI2JhdHRsZWZpZWxkX3BvcHVwIC5zdGF0X2tpbGwgew0KCWJhY2tncm91bmQ6IHVybChodHRw"+"Oi8vbXdmYi5zdGF0aWMuemduY2RuLmNvbS9td2ZiL2dyYXBoaWNzL21hcF9iYXNlZF9qb2JzL21hc3Rlcnlfc3RhcnNfbWVkXzgx"+"eDMwXzAyLnBuZykgbm8tcmVwZWF0IC00N3B4IDJweDsNCglwYWRkaW5nLWxlZnQ6IDE5cHg7DQp9DQojYmF0dGxlZmllbGRfcG9w"+"dXAgI2Z2Ml93aWRnZXRfd3JhcHBlciB7DQogICAgYmFja2dyb3VuZDogYmxhY2sgdXJsKCdodHRwOi8vbXdmYi5zdGF0aWMuemdu"+"Y2RuLmNvbS9td2ZiL2dyYXBoaWNzL2ZpZ2h0L3YyL2ZpZ2h0X21haW5fYmFja2dyb3VuZC5qcGcnKSB0b3AgbGVmdCBuby1yZXBl"+"YXQ7DQogICAgd2lkdGg6IDc1MHB4Ow0KCWhlaWdodDogMzUwcHg7DQoJYm9yZGVyOiAwcHg7DQogICAgdG9wOiAwcHg7DQogICAg"+"bGVmdDogMHB4OyANCglwb3NpdGlvbjogcmVsYXRpdmU7DQp9DQojYmF0dGxlZmllbGRfcG9wdXAgI29wdGlvbnNfd3JhcHBlciB7"+"DQoJYmFja2dyb3VuZDogYmxhY2sgdXJsKGh0dHA6Ly9td2ZiLnN0YXRpYy56eW5nYS5jb20vbXdmYi9ncmFwaGljcy9zb2NpYWxt"+"aXNzaW9ucy9iZ190ZXh0dXJlX21vZHVsZS5qcGcpIG5vLXJlcGVhdCBzY3JvbGwgNTAlIDAlOw0KCXBhZGRpbmc6IDBweCA1cHg7"+"DQoJaGVpZ2h0OiAxMDAlOw0KfQ0KI2JhdHRsZWZpZWxkX3BvcHVwICNmaWdodF93cmFwcGVyIGRpdi51c2VyYm94IHsNCgl3aWR0"+"aDogMjMycHg7DQoJaGVpZ2h0OiAzNDVweDsNCgliYWNrZ3JvdW5kOiB1cmwoJ2h0dHA6Ly9td2ZiLnN0YXRpYy56Z25jZG4uY29t"+"L213ZmIvZ3JhcGhpY3MvZmlnaHQvdjIvZmlnaHRfcGxheWVyYmFja2dyb3VuZC5wbmcnKSAwIDM1cHggbm8tcmVwZWF0Ow0KCXRl"+"eHQtYWxpZ246IGNlbnRlcjsNCglmbG9hdDogbGVmdDsNCiAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQp9DQojYmF0dGxlZmllbGRf"+"cG9wdXAgI2F0dGFja2VyX2ZpZ2h0X3N0YXR1cywgI2RlZmVuZGVyX2ZpZ2h0X3N0YXR1cyB7DQoJaGVpZ2h0OiAzNnB4Ow0KCWZv"+"bnQtc2l6ZTogMjhweDsNCn0NCiNiYXR0bGVmaWVsZF9wb3B1cCAgI2F0dGFja2VyX2ZpZ2h0X3N0YXRzIHsNCgltYXJnaW46IDEw"+"cHggYXV0bzsNCgl3aWR0aDogMjAwcHg7DQp9DQojYmF0dGxlZmllbGRfcG9wdXAgICNhdHRhY2tlcl9waWMgew0KCWZsb2F0OiBs"+"ZWZ0Ow0KCXRleHQtYWxpZ246IHJpZ2h0Ow0KCXdpZHRoOiAxNDdweDsNCn0NCiNiYXR0bGVmaWVsZF9wb3B1cCAuZGl2SFBCYXIg"+"ew0KCWJhY2tncm91bmQ6IHVybCgnaHR0cDovL213ZmIuc3RhdGljLnpnbmNkbi5jb20vbXdmYi9ncmFwaGljcy9maWdodC92Mi9m"+"aWdodF9oZWFsdGhfZ3JleS5wbmcnKSB0b3AgbGVmdCByZXBlYXQteDsNCgl3aWR0aDogMjE1cHg7DQoJaGVpZ2h0OiAyM3B4Ow0K"+"CW1hcmdpbjogNXB4IGF1dG87DQp9DQojYmF0dGxlZmllbGRfcG9wdXAgI2ZpZ2h0X2J0bl9wYW5lbCB7DQoJaGVpZ2h0OiAzNTBw"+"eDsNCglmbG9hdDogbGVmdDsNCn0NCiNiYXR0bGVmaWVsZF9wb3B1cCAjYXR0YWNrZXJfYmVzdF9pdGVtcywgI2RlZmVuZGVyX2Jl"+"c3RfaXRlbXMgew0KCXdpZHRoOiA2NXB4Ow0KCXRleHQtYWxpZ246IGNlbnRlcjsNCgltYXJnaW4tdG9wOiA0NXB4Ow0KfQ0KI2Jh"+"dHRsZWZpZWxkX3BvcHVwICN3cmFwcGVyX2FjdGlvbnMgew0KCXdpZHRoOiAxMzBweDsNCn0NCiNiYXR0bGVmaWVsZF9wb3B1cCAj"+"d3JhcHBlcl9kZWZlbmRlciB7DQoJbWFyZ2luOiA1cHggNXB4IDAgNXB4Ow0KfQ0KI2JhdHRsZWZpZWxkX3BvcHVwICNmaWdodF9i"+"dG5fcGFuZWwgZGl2LmJvb3N0Y29udGFpbmVyIHsNCgl3aWR0aDogMTg1cHg7DQoJbWFyZ2luOiAycHggMCAwIDQwcHg7DQoJdGV4"+"dC1hbGlnbjogY2VudGVyOw0KCW1pbi1oZWlnaHQ6IDc4cHg7DQp9DQojYmF0dGxlZmllbGRfcG9wdXAgI2ZpZ2h0X2J0bl9wYW5l"+"bCBkaXYuYm9vc3Rjb250YWluZXIgew0KCXRleHQtYWxpZ246IGNlbnRlcjsNCn0NCiNiYXR0bGVmaWVsZF9wb3B1cCAubGlzdGVk"+"IHsNCgliYWNrZ3JvdW5kOiB0cmFuc3BhcmVudCB1cmwoaHR0cDovL213ZmIuc3RhdGljLnpnbmNkbi5jb20vbXdmYi9ncmFwaGlj"+"cy92My9pY29uX3dpc2hsaXN0X2FkZF8xOXgxNF8wMS5naWYpIG5vLXJlcGVhdCAtMXB4IDUwJTsNCglwYWRkaW5nLWxlZnQ6IDE5"+"cHg7DQp9DQojYmF0dGxlZmllbGRfcG9wdXAgI2ZpZ2h0T3B0IHsNCgltYXJnaW46IDBweDsNCgl3aWR0aDogNzM4cHg7DQp9DQoj"+"YmF0dGxlZmllbGRfcG9wdXAgI2ZpZ2h0T3B0IHVsIHsNCglsaXN0LXN0eWxlLXR5cGU6IG5vbmU7DQoJaGVpZ2h0OiAxMDAlOw0K"+"CXdpZHRoOiAxMDAlOw0KCW1hcmdpbjogMTBweCAwcHggMHB4Ow0KCXBhZGRpbmc6IDBweDsNCgl0ZXh0LWFsaWduOiBsZWZ0Ow0K"+"CW92ZXJmbG93OiBhdXRvOw0KfQ0KI2JhdHRsZWZpZWxkX3BvcHVwICNmaWdodE9wdCB1bCBsaSB7DQoJZGlzcGxheTogYmxvY2s7"+"DQoJbWFyZ2luOiAwcHggMHB4IDBweCA1cHg7DQoJcGFkZGluZzogMHB4Ow0KCWhlaWdodDogMjhweDsNCgltYXgtaGVpZ2h0OiAy"+"OHB4Ow0KCW92ZXJmbG93OiBoaWRkZW47DQp9DQojYmF0dGxlZmllbGRfcG9wdXAgI3dyYXBwZXJfaW5mbyB7DQoJYmFja2dyb3Vu"+"ZDogdXJsKCdodHRwOi8vbXdmYi5zdGF0aWMuemduY2RuLmNvbS9td2ZiL2dyYXBoaWNzL2ZpZ2h0L3YyL2ZpZ2h0X2xvb3R0cmF5"+"X3NsaXZlci5qcGcnKSB0b3AgbGVmdCByZXBlYXQteDsNCgloZWlnaHQ6IDEyMHB4Ow0KCW1hcmdpbi10b3A6IDBweDsNCgltYXJn"+"aW4tcmlnaHQ6IGF1dG87DQoJbWFyZ2luLWJvdHRvbTogMHB4Ow0KCW1hcmdpbi1sZWZ0OiBhdXRvOw0KCWJvcmRlci1ib3R0b206"+"IDFweCBzb2xpZCAjMzMzOw0KfSANCiNiYXR0bGVmaWVsZF9wb3B1cCAjd3JhcHBlcl9pbmZvIC5maWdodFYyX21zZ19jdHJsIHsN"+"CglmbG9hdDogbGVmdDsNCgl3aWR0aDogNDkwcHg7DQoJaGVpZ2h0OiAxMDBweDsNCgltYXJnaW46IDE0cHggMTFweCAwOw0KCW92"+"ZXJmbG93OiBoaWRkZW47DQoJcG9zaXRpb246IHJlbGF0aXZlOw0KCXotaW5kZXg6IDA7DQp9DQojYmF0dGxlZmllbGRfcG9wdXAg"+"I3dyYXBwZXJfaW5mbyAjY3RybGNvbnRhaW5lciB7DQoJaGVpZ2h0OiA0MHB4Ow0KfQ0KI2JhdHRsZWZpZWxkX3BvcHVwICN3cmFw"+"cGVyX2luZm8gLmZpZ2h0VjJfcmVzdWx0IHsNCglmbG9hdDogcmlnaHQ7DQoJYmFja2dyb3VuZDogdXJsKCdodHRwOi8vbXdmYi5z"+"dGF0aWMuemduY2RuLmNvbS9td2ZiL2dyYXBoaWNzL2ZpZ2h0L3YyL2ZpZ2h0X2xvb3R0cmF5X2xpbmUucG5nJykgMCA1MCUgbm8t"+"cmVwZWF0Ow0KCXdpZHRoOiAyMTBweDsNCgloZWlnaHQ6IDEwMHB4Ow0KCXBhZGRpbmc6IDEwcHggNXB4IDEwcHggMTVweDsNCn0N"+"CiNiYXR0bGVmaWVsZF9wb3B1cCAjd3JhcHBlcl9sb2dfc3RhdHMgew0KCWJhY2tncm91bmQtY29sb3I6IGJsYWNrOw0KCWJhY2tn"+"cm91bmQtaW1hZ2U6IHVybChodHRwOi8vbXdmYi5zdGF0aWMuenluZ2EuY29tL213ZmIvZ3JhcGhpY3MvaXRhbHlfZDQuanBnKTsN"+"CgliYWNrZ3JvdW5kLXBvc2l0aW9uOiA1MCUgMCU7DQoJYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDsNCgloZWlnaHQ6IDQ1"+"MHB4Ow0KfQ0KI2JhdHRsZWZpZWxkX3BvcHVwICN3cmFwcGVyX2xvZ19zdGF0cyAuZmlnaHRWMl9zdGF0cyB7DQoJYmFja2dyb3Vu"+"ZDogdXJsKCdodHRwOi8vbXdmYi5zdGF0aWMuemduY2RuLmNvbS9td2ZiL2dyYXBoaWNzL2ZpZ2h0L3YyL2ZpZ2h0X2xvb3R0cmF5"+"X2xpbmUucG5nJykgMCA1MCUgbm8tcmVwZWF0Ow0KCWZsb2F0OiByaWdodDsNCgloZWlnaHQ6IDk3JTsNCgl3aWR0aDogMjEwcHg7"+"DQoJcGFkZGluZzogMTBweCA1cHggMTBweCAxNXB4Ow0KCXRleHQtYWxpZ246IGxlZnQ7DQp9DQojYmF0dGxlZmllbGRfcG9wdXAg"+"I3dyYXBwZXJfbG9nX3N0YXRzIC5maWdodFYyX3N0YXRzIGRsIHsNCgloZWlnaHQ6IDIwcHg7DQoJbWFyZ2luOiAwcHg7DQp9DQoj"+"YmF0dGxlZmllbGRfcG9wdXAgI3dyYXBwZXJfbG9nX3N0YXRzIC5maWdodFYyX3N0YXRzIGRsIGltZyB7DQoJZmxvYXQ6IGxlZnQ7"+"DQoJaGVpZ2h0OiAxOXB4Ow0KCXdpZHRoOiAxOXB4Ow0KCW1hcmdpbi1yaWdodDogMnB4Ow0KfQ0KI2JhdHRsZWZpZWxkX3BvcHVw"+"ICN3cmFwcGVyX2xvZ19zdGF0cyAuZmlnaHRWMl9zdGF0cyBkbCBkdCB7DQoJZmxvYXQ6IGxlZnQ7DQoJbWFyZ2luOiAwcHg7DQp9"+"DQojYmF0dGxlZmllbGRfcG9wdXAgI3dyYXBwZXJfbG9nX3N0YXRzIC5maWdodFYyX3N0YXRzIGRsIGRkIHsNCglmbG9hdDogcmln"+"aHQ7DQoJbWFyZ2luOiAwcHg7DQp9DQojYmF0dGxlZmllbGRfcG9wdXAgI3dyYXBwZXJfbG9nX3N0YXRzIC5maWdodFYyX3N0YXRz"+"IC5udW1iZXJzIHsNCglmbG9hdDogcmlnaHQ7DQoJZm9udC13ZWlnaHQ6IGJvbGQ7DQoJbWFyZ2luOiAwcHg7DQoJb3ZlcmZsb3c6"+"IGhpZGRlbjsNCglwYWRkaW5nOiAwcHg7DQp9DQojYmF0dGxlZmllbGRfcG9wdXAgI3dyYXBwZXJfbG9nX3N0YXRzIC5maWdodFYy"+"X2xvZyB7DQoJZmxvYXQ6IGxlZnQ7DQoJaGVpZ2h0OiA5OSU7DQoJd2lkdGg6IDUxNXB4Ow0KfQ0KI2JhdHRsZWZpZWxkX3BvcHVw"+"ICN3cmFwcGVyX2xvZ19zdGF0cyAuZmlnaHRWMl9sb2cgI2V2ZW50c19saXN0IHsNCgloZWlnaHQ6IGF1dG87DQoJb3ZlcmZsb3c6"+"IGhpZGRlbjsNCgl0ZXh0LWFsaWduOiBsZWZ0Ow0KCWhlaWdodDogMTAwJTsNCn0NCiNiYXR0bGVmaWVsZF9wb3B1cCAjd3JhcHBl"+"cl9sb2dfc3RhdHMgLmZpZ2h0VjJfbG9nICNldmVudHNfbGlzdCAjZmlnaHRsb2dzIHsNCglib3JkZXI6IDBweDsNCn0NCiNiYXR0"+"bGVmaWVsZF9wb3B1cCAjd3JhcHBlcl9sb2dfc3RhdHMgLmZpZ2h0VjJfbG9nICNldmVudHNfbGlzdCAuYnV0dG9ucyB7DQoJYm9y"+"ZGVyLWJvdHRvbTogMXB4IHNvbGlkICMzMzM7DQoJYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgIzMzMzsNCn0JDQojYmF0dGxlZmll"+"bGRfcG9wdXAgI3dyYXBwZXJfbG9nX3N0YXRzIC5maWdodFYyX2xvZyAjZXZlbnRzX2xpc3QgLmJ1dHRvbnMgYSB7DQoJYm9yZGVy"+"LWxlZnQ6IDFweCBzb2xpZCAjMzMzOw0KCWJvcmRlci1yaWdodDogMXB4IHNvbGlkICMzMzM7DQoJcGFkZGluZy1sZWZ0OiAxMHB4"+"Ow0KCXBhZGRpbmctcmlnaHQ6IDEwcHg7DQoJb3BhY2l0eTogMC41Ow0KfQ0KI2JhdHRsZWZpZWxkX3BvcHVwICN3cmFwcGVyX2xv"+"Z19zdGF0cyAuZmlnaHRWMl9sb2cgI2V2ZW50c19saXN0IC5idXR0b25zIGEuc2VsZWN0ZWQgew0KCWZvbnQtd2VpZ2h0OiBib2xk"+"Ow0KCW9wYWNpdHk6IDE7DQp9DQojYmF0dGxlZmllbGRfcG9wdXAgI3dyYXBwZXJfbG9nX3N0YXRzIC5maWdodFYyX2xvZyAjZXZl"+"bnRzX2xpc3QgLmJ1dHRvbnMgYTpmaXJzdC1jaGlsZCB7DQoJbWFyZ2luLWxlZnQ6IDIwcHg7DQp9DQojYmF0dGxlZmllbGRfcG9w"+"dXAgI3dyYXBwZXJfbG9nX3N0YXRzIC5maWdodFYyX2xvZyAjZXZlbnRzX2xpc3QgdWwgew0KCWxpc3Qtc3R5bGUtdHlwZTogbm9u"+"ZTsNCgltYXJnaW46IDBweDsNCglvdmVyZmxvdzogYXV0bzsNCglwYWRkaW5nOiAwcHg7DQoJdGV4dC1hbGlnbjogbGVmdDsNCgl3"+"aWR0aDogMTAwJTsNCn0NCiNiYXR0bGVmaWVsZF9wb3B1cCAjd3JhcHBlcl9sb2dfc3RhdHMgLmZpZ2h0VjJfbG9nICNldmVudHNf"+"bGlzdCB1bCBsaSB7DQoJbWFyZ2luOiA4cHggNXB4IDBweCAyMHB4Ow0KfQ0KI2JhdHRsZWZpZWxkX3BvcHVwICN3cmFwcGVyX2xv"+"Z19zdGF0cyAuZmlnaHRWMl9sb2cgI2V2ZW50c19saXN0IHVsI2xvb3RsaXN0bG9nIHsNCgltYXJnaW4tdG9wOiA1cHg7DQp9DQoj"+"YmF0dGxlZmllbGRfcG9wdXAgI3dyYXBwZXJfbG9nX3N0YXRzIC5maWdodFYyX2xvZyAjZXZlbnRzX2xpc3QgdWwjZXZlbnRzbG9n"+"Z2VyIHsNCiAgICBmb250LXNpemU6IDEycHg7DQogICAgbWFyZ2luLXRvcDogNXB4Ow0KICAgIGhlaWdodDogNDAwcHg7DQogICAg"+"b3ZlcmZsb3cteTogbm9uZTsNCn0NCiNiYXR0bGVmaWVsZF9wb3B1cCAjd3JhcHBlcl9sb2dfc3RhdHMgLmZpZ2h0VjJfbG9nICNl"+"dmVudHNfbGlzdCB1bCNldmVudHNsb2dnZXIgbGkgew0KICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjMzMzOw0KfQ0KI2Jh"+"dHRsZWZpZWxkX3BvcHVwICNzdGF0c19sb2dzIHRhYmxlIHsNCiAgICB3aWR0aDogOTglOw0KICAgIG1hcmdpbjogMTVweCAwcHgg"+"MHB4IDVweDsNCn0NCiNiYXR0bGVmaWVsZF9wb3B1cCAjc3RhdHNfbG9ncyB0YWJsZSB0cjpmaXJzdC1jaGlsZCB0aDpmaXJzdC1j"+"aGlsZCB7DQogICAgd2lkdGg6IDEwMHB4Ow0KfQ0KI2JhdHRsZWZpZWxkX3BvcHVwICNzdGF0c19sb2dzIHRhYmxlIHRyOmZpcnN0"+"LWNoaWxkIHRoIHsNCiAgICB3aWR0aDogNTBweDsNCn0NCiNiYXR0bGVmaWVsZF9wb3B1cCAjc3RhdHNfbG9ncyB0YWJsZSB0ciB0"+"ZDpmaXJzdC1jaGlsZCB7DQogICAgdGV4dC1hbGlnbjogbGVmdDsNCn0NCiNiYXR0bGVmaWVsZF9wb3B1cCAjc3RhdHNfbG9ncyB0"+"YWJsZSB0ciB0ZCB7DQogICAgdGV4dC1hbGlnbjogY2VudGVyOw0KfQ0KI2JhdHRsZWZpZWxkX3BvcHVwICN3cmFwcGVyX2xvZ19z"+"dGF0cyAuZmlnaHRWMl9sb2cgI29wcG9uZW50c19saXN0IHsNCgloZWlnaHQ6IDEwMCU7DQp9DQojYmF0dGxlZmllbGRfcG9wdXAg"+"I3dyYXBwZXJfbG9nX3N0YXRzIC5maWdodFYyX2xvZyAjb3Bwb25lbnRzX2xpc3QgLmhlYWRlciB7DQoJaGVpZ2h0OiA1JTsNCn0N"+"CiNiYXR0bGVmaWVsZF9wb3B1cCAjd3JhcHBlcl9sb2dfc3RhdHMgLmZpZ2h0VjJfbG9nICNvcHBvbmVudHNfbGlzdCAuaGVhZGVy"+"IGEgew0KCWZsb2F0OiBsZWZ0Ow0KCW1hcmdpbi1sZWZ0OiAyMHB4Ow0KfQ0KI2JhdHRsZWZpZWxkX3BvcHVwICN3cmFwcGVyX2xv"+"Z19zdGF0cyAuZmlnaHRWMl9sb2cgI29wcG9uZW50c19saXN0ICNvcHBvbmVudHNfdGFibGUgew0KCWhlaWdodDogOTUlOw0KfQ0K"+"I2JhdHRsZWZpZWxkX3BvcHVwICN3cmFwcGVyX2xvZ19zdGF0cyAuZmlnaHRWMl9sb2cgLnBsYXllcl91cGRhdGVzIHsNCiAgICBv"+"dmVyZmxvdy14OiBoaWRkZW47DQogICAgdGV4dC1hbGlnbjogbGVmdDsNCn0NCiNiYXR0bGVmaWVsZF9wb3B1cCAjd3JhcHBlcl9s"+"b2dfc3RhdHMgLmZpZ2h0VjJfbG9nIC51cGRhdGVfdHh0IHsNCgl3aWR0aDogMzYwcHg7DQoJZm9udC1mYW1pbHk6IHRyZWJ1Y2hl"+"dCBNUzsNCglmb250LXdlaWdodDogYm9sZDsNCgljb2xvcjogd2hpdGU7DQoJY2xlYXI6IG5vbmU7DQp9DQojYmF0dGxlZmllbGRf"+"cG9wdXAgI3dyYXBwZXJfbG9nX3N0YXRzIC5maWdodFYyX2xvZyAjaXRlbXNfbG9ncyAubG9vdCB7DQoJYmFja2dyb3VuZDogYmxh"+"Y2sgdXJsKGh0dHA6Ly9td2ZiLnN0YXRpYy56eW5nYS5jb20vbXdmYi9ncmFwaGljcy9maWdodF9ib251c2VzL3NpZGVfYm9udXNs"+"b290LnBuZykgbm8tcmVwZWF0IHNjcm9sbCAxMDAlIDUwJTsNCn0NCiNiYXR0bGVmaWVsZF9wb3B1cCAjd3JhcHBlcl9sb2dfc3Rh"+"dHMgLmZpZ2h0VjJfbG9nICNpdGVtc19sb2dzIC5zdGFzaCB7DQoJYmFja2dyb3VuZDogYmxhY2sgdXJsKGh0dHA6Ly9td2ZiLnN0"+"YXRpYy56eW5nYS5jb20vbXdmYi9ncmFwaGljcy9maWdodF9ib251c2VzL3NpZGVfc2VjcmV0c3Rhc2gucG5nKSBuby1yZXBlYXQg"+"c2Nyb2xsIDEwMCUgNTAlOw0KfQ0KI2JhdHRsZWZpZWxkX3BvcHVwICN3cmFwcGVyX2xvZ19zdGF0cyAuZmlnaHRWMl9sb2cgI2l0"+"ZW1zX2xvZ3MgLnN0YXNoIC51cGRhdGVfdHh0IHsNCgliYWNrZ3JvdW5kLWNvbG9yOiBibGFjazsNCglvcGFjaXR5OiAwLjk7DQp9"+"DQojYmF0dGxlZmllbGRfcG9wdXAgI3dyYXBwZXJfbG9nX3N0YXRzIC5maWdodFYyX2xvZyAjaXRlbXNfbG9ncyAubG9vdCAudXBk"+"YXRlX3R4dCB7DQoJYmFja2dyb3VuZC1jb2xvcjogYmxhY2s7DQoJb3BhY2l0eTogMC45Ow0KfQ==");options.add("travelTo",UserConfig.getSettingFrom(global.cityNames,false));options.load(function(){LootCache=new CSLootList;LootCache.load(function(e){if(e===true){Initialize()}else{popupElt.destroy()}})})}function BattlefieldStats(){function i(){r.content.height("auto");c$("img").appendTo(r.content).attr({alt:"Under Construction...",title:"Under Construction...",src:"http://www.icis.com/blogs/green-chemicals/under_construction2.jpg"});return;c$("div","id:stats_logs").css("text-align","center").appendTo($elt).append(c$("div").css("margin-top",15)).append(s$("oldsession_time_select","Select Session:",300).change(Events.sessionstats_change)).append(c$("div").css({clear:"both","margin-top":5})).append(s$("oldsession_type_select","Select Type:",100).change(Events.sessionstats_change)).append(c$("div","id:table_stats"))}function s(){function s(e){result=0;if(Util.isObject(e)){Util.each(e,function(e,t){result+=t});return result}return e||0}function o(e,t){return function(r){function i(){var i=n[r][e],o=n[r][t],u=Util.percent(s(i),s(o));return u.toFixed(Math.abs(u)<10?2:0)}if(n[r]){if(t){return'<span title="'+i()+'%" style="cursor:pointer;">'+s(n[r][e])+"</span>"}else{return s(n[r][e])}}else{return"0"}}}var e=$("#oldsession_type_select").val();var t=$("#oldsession_time_select").val();var n=SessionStats.get(t);var i=Util.clone(global.cityNames);i[0]="Total";if(!n){return}var u={fights:{City:i,Fights:o("fightCount"),Foes:o("foesAttacked","fightCount"),Won:o("fightWon","fightCount"),Lost:o("fightLost","fightCount")},ices:{City:i,Fights:o("fightCount"),Ices:o("icesWon","fightCount"),Kill:o("killWon","fightCount"),Stolen:o("icesLost","fightCount"),Revenges:o("revenge","fightCount")},other:{City:i,"Exp.":o("expGained"),Stamina:o("staminaSpend"),CashWon:o("cashWon"),CashLost:o("cashLost"),Coins:o("coinsGained")}};var a=$("#stats_logs #table_stats",r.content).empty();var f=new TableObject(a,true);var l=1,c=0;f.table.attr({cellspacing:1,border:1});Util.each(u[e||"fights"],function(e,t){f.cell(0,c++).html(e)});c=0;Util.each(i,function(t){Util.each(u[e||"fights"],function(e,n){f.cell(l,c++).html(Util.isFunc(n)?n(t):n[t])});l++})}function o(){e.each(function(e,r){if(e==="opp"){t=r}else{n[e]=r}});i();r.show();return;SessionStats.load(function(e,t){Util.each(e,function(e){var n=c$("option","value:"+e);if(parseInt(t)===parseInt(e)){n.prependTo("#oldsession_time_select");n.attr("selected","selected").html("Current Session")}else{n.appendTo("#oldsession_time_select");n.html((new Date(e*1e3)).toLocaleString())}})})}var e=new Config("bf_stats");var t,n=new Object;var r=new PopupObject("bfstats_popup",{type:"normal",title:"Battlefield Statistics"});e.load(o)}function BountyHunter(){function l(e){return function(){var t=$(this);if(!t.hasClass("disabled")){e.apply(this)}return false}}function c(e){var t=new RegExp(e,"i");$("#main_controls a").each(function(e,n){$(n)[t.test(n.id)?"show":"hide"]()})}function h(e){var t=e.attr("href");var n=Util.uSplit(t);var r=n.id||n.user;try{if(r){r=Base64.decode(r)}}catch(i){}return{id:Util.parseNum(r||""),name:Util.trim(e.text()),url:t}}function p(e){$("#attack_messages").hide().html(e).fadeIn()}function d(e,t){$("#bh_messages").css("padding-left",t===true?20:0).toggleClass("mwa_res_ajax_loader",t===true).html(e)}function v(e,t,n){var r=i.content.find("#content_wrapper .bh_log");var s=Util.setColor("["+(new Date).toLocaleTimeString()+"]","grey");if(!Util.isSet(t)||t=="info"){t="mwa_res_info_icon"}else{t="mwa_res_ajax_error"}if(!n){c$("li","class:"+t).prependTo(r).html(s+"  "+e)}else{(e$("#"+n,r)||c$("li","class:"+t+",id:"+n)).prependTo(r).html(s+"  "+e)}}function m(e,t){httpAjaxRequest({url:"remote/"+MW.getIntURL("hitlist","view",1),liteLoad:1,message:t,success:function(t){b(t);g(t);e&&e()}})}function g(e){n.BountyList.clear();h$(e).find("table.hit_list tr:has(a:regex(href,hitlist))").each(function(e,t){var r=new o(t);if(r.valid){n.BountyList.add(r)}});n.BountyList.sort();v("Found "+n.BountyList.length()+" bounties.");d("Found "+n.BountyList.length()+" bounties.");y()}function y(){var e=$("#content_wrapper .bh_hitlist").empty();n.BountyList.each(function(t,n){c$("li").css("background",'url("'+n.target.badge+'") 0px 50% no-repeat').append(c$("div","class:bounty_user").html(n.target.anchor())).append(c$("div","class:bounty_user").html(n.payer.anchor())).append(c$("div","class:bounty_cash cash").html(Util.formatNum(n.cash))).append(c$("div","class:bounty_attack").append(b$("Hunt!","target:"+t+",class:short red").click(f.attack_click))).appendTo(e)})}function b(e){var t;try{if(e.user_fields){t=e.user_fields}else{t=MW.update(e)}r.city=parseInt(t["current_city_id"]);r.cash=parseInt(t["user_cash"]);r.health=parseInt(t["user_health"]);r.maxHealth=parseInt(t["user_max_health"]);r.stamina=parseInt(t["user_stamina"]);r.maxStamina=parseInt(t["user_max_stamina"]);r.expToNextLevel=parseInt(t["exp_to_next_level"])}catch(n){}}function w(e){function s(){i--;if(i>0){d("Healing at "+global.city(1).name+"...",true);httpAjaxRequest({url:"remote/"+MW.getIntURL("hospital","heal")+"&xcity=1",success:function(i){try{b(i);if(r.health<r.maxHealth-100){t.start(i.hospital_message+" try again in %N% seconds.",5,s)}else{MW.getWaitHealTimer(function(e){if(!isNaN(e)){Logger.debug("ReadyToHeal set to: "+e+" secs.");n.ReadyToHeal=(new Date).getTime()+parseInt(e)*1e3}});e(true,i.hospital_message)}}catch(o){t.start("Error healing. Try again in %N% seconds.",5,s)}}})}else{e(false,"Error healing: so many retries.")}}if(n.Aborted===true||!Util.isFunc(e))return;var i=4;s()}function E(t,i){if(r.city==1&&e.deposit&&(r.cash>n.DepositAmount||i)){d('Depositing <span class="cash">'+Util.formatNum(r.cash)+"</span> Cash...",true);MW.deposit(1,r.cash,function(e,n){if(n){b(n);v(e,"info")}else{v(e,"error")}t()})}else{t()}}function S(){if(n.Aborted===true)return;if(n.BountyList.length()<1){d("No bounties left...");t.start("No bounties left, reload in %N%...",e.delay,function(){m(S)});return}var r=n.BountyList.shift();if(r.valid!==true){S();return}x(r,function(){if(n.Paused===true){d("Hunting Paused...");n.ResumeFunction=S}else{setTimeout(S,1e3)}})}function x(i,o){function l(){if(n.Aborted===true)return;if(n.Paused===true){d("Hunting Paused...");n.ResumeFunction=l;return}if(r.city!==1){d("Traveling to "+global.city(1).name,true);httpAjaxRequest({url:"remote/"+MW.getIntURL("travel","travel")+"&destination=1&from=hitlist&zone=1",success:function(e){n.BountyList.clear();b(e);g(e);l()}});return}d("Attacking to "+i.target.anchor(),true);httpAjaxRequest({url:i.target.link,liteLoad:1,success:c})}function c(c){if(n.Aborted===true)return;var h=new s(c);var d=true;var g=h.response;b(c);if(h.attack_url){i.target.link=h.attack_url}else{d=false}if(h.low_stamina){T();return}if(e.healOn&&r.health<e.healMin){if(e.healOn){w(function(e,t){v(t);if(e===true){l()}else{T()}})}return}else if(h.low_health){t.start("Health so low... check again in %N%",e.delay,function(){n.BountyList.clear();m(l)});return}if(h.won){f.vcns+=h.vCoins;f.expe+=h.exp||0;f.cash+=h.cash||0;f.deal+=h.deal||0;f.take+=h.take||0;f.format_cash=Util.formatNum(f.cash);p(g=Util.render(u,f))}else if(h.lost){n.BlackList.add(i);f.cash-=h.cash||0;f.deal+=h.deal||0;f.take+=h.take||0;f.format_cash=Util.formatNum(f.cash);p(g=Util.render(a,f));d=e.redBounty===true}else if(h.too_late){v($("#attack_messages").html(),"info");d=false}else if(h.valid!==true){d=false;g="Bad luck... someone else took out the bounty."}else{d=h.try_again===true}if(h.knock_out){v(g,"info");d=false;f.earned_cash=Util.formatNum(i.cash);g=Util.render('You knocked out ${user} and earned <span class="cash">${earned_cash}</span>',f)}if(h.in_mafia){d=false;g=Util.render("${user} is in your mafia.",f);n.BlackList.add(i)}if(d===true){if(h.lost&&h.cash&&h.cash>0){E(l,true)}else{l()}}else{$("#attack_messages").empty();v(g,"info");E(function(){o(c)})}}if(n.Paused===true){d("Hunting Paused...");n.ResumeFunction=function(){x(i,o)};return}var u='<span style="color:green;font-weight:bold;">YOU WON!</span>   <span class="attack">${deal}</span> <span class="defense" style="color:red;">${take}</span>   <span class="experience">${expe}</span>   <span class="cash">${format_cash}</span>   <span class="victory">${vcns}</span>';var a='<span style="color:red;font-weight:bold;">YOU LOST!</span>   <span class="attack">${deal}</span> <span class="defense" style="color:red;">${take}</span>   <span class="cash" style="color:red;">${format_cash}</span>';var f={user:null,expe:0,cash:0,vcns:0,deal:0,take:0,format_cash:""};n.DepositAmount=Math.max(n.DepositAmount,1e3);e.healMin=Math.min(Math.max(e.healMin,20),n.MaxHealth);if(i&&i.target&&i.target.link){v("Hunting "+i);f.user=i.target.anchor();l()}else{o()}}function T(){n.Tabs.buttonEnabled(0,n.Aborted=true);d("Hunting Stopped.");httpAjaxStopRequests();t.clear();e.toDomElements();e.save();c("refresh_hitlist|start_hunting")}function N(){function r(e){var t=c$("div","class:ui-right");Util.each(e,function(e,n){var r=Util.toJSON({i:n,e:e});t.append(c$("button").attr("event-data",r).text(e).click(f.list_click))});return t}function s(){var e=c$("div").append(x$("bhopt_deposit","Desposit Cash.")).append(x$("bhopt_healon","Heal when:")).append(n$("bhopt_healmin",40)).append(x$("bhopt_redbounty","BloodHunting.")).append(n$("bhopt_delay","Delay",40)).append(c$("div","class:ui-line"));c$("div","class:ui-blacklist ui-left").appendTo(e).append(c$("div","class:ui-top").append(x$("bhopt_userblackliston","User Blacklist:")).append(r({"import":"user","export":"user",remove:"user",clear:"user"}))).append(c$("select","id:bhopt_userblacklist,multiple:multiple"));c$("div","class:ui-blacklist ui-right").appendTo(e).append(c$("div","class:ui-top").append(x$("bhopt_clanblackliston","Clan Blacklist:")).append(r({"import":"clan","export":"clan",remove:"clan",clear:"clan"}))).append(c$("select","id:bhopt_clanblacklist,multiple:multiple"));return e}var t=i.content.css({padding:"0px 5px","text-align":"left"});c$("div","id:main_controls").appendTo(c$("div","id:main_panel").append(c$("span","id:bh_messages")).appendTo(t)).append(b$("Refresh","id:refresh_hitlist,class:short orange").click(f.refresh_click)).append(b$("Hunt'em","id:start_hunting,class:short green").click(f.start_click)).append(b$("Take A Rest","id:stop_hunting,class:short red").hide().click(f.stop_click));n.Tabs=new TabObject({id:"content_wrapper",appendTo:t,height:400,padding:5,tabs:[{label:"Bounty List",onclick:y},{label:"Settings",onclick:function(){Logger.debug("Hunting will be Paused.");n.Paused=true;e.toDomElements()}},{label:"Hunting Log",onclick:function(){Logger.debug("Hunting will be Resumed.");n.Paused=false;e.fromDomElements();if(Util.isFunc(n.ResumeFunction)){n.ResumeFunction();n.ResumeFunction=null}}}]});n.Tabs.header.attr("id","attack_messages").css({width:380,"text-align":"center"});c$("ul","class:bh_hitlist").appendTo(n.Tabs.content[0]);c$("ul","class:bh_log").appendTo(n.Tabs.content[2]);s().appendTo(n.Tabs.content[1])}function C(){if(n.Expressions=n.Expressions[global.User.locale()]){n.BountyList=new u;n.BlackList=new a("userBlackList");n.ClanList=new a("clanBlackList");if(UserConfig.main.autoDeposit[1]){n.DepositAmount=UserConfig.main.autoDeposit[1].amount}N();e.toDomElements();m(i.show,"Loading Hitlist...")}else{i.destroy();showHelpPopup({icon:"error",message:"Bounty Hunter can't work with the current game language."})}}var e=UserConfig.bhopt;var t=new TimerMessage("#bh_messages");var n={Aborted:false,Paused:false,ReadyToHeal:0,DepositAmount:1e5,MaxHealth:global.User.max_health()-200,ResumeFunction:null,BountyList:null,Tabs:null,BlackList:null,ClanList:null,Expressions:{en_US:[{expr:/You (LOST) the fight along with .([\d,\.]+), taking\s*(\d+) damage and dealing\s*(\d+)/i,fields:["msg","lost","cash","take","deal"],convert:[String,Boolean,Util.parseNum,parseInt,parseInt]},{expr:/You (WON) the fight, taking\s*(\d+) damage and dealing\s*(\d+) damage to your enemy\.\s*You gained\s*.([\d,\.]+) and\s*(\d+) exp/i,fields:["msg","won","take","deal","cash","exp"],convert:[String,Boolean,parseInt,parseInt,Util.parseNum,parseInt]},{expr:/You are too weak to fight/i,fields:["low_health"],convert:[Boolean]},{expr:/This player is currently part of your mafia/i,fields:["in_mafia"],convert:[Boolean]},{expr:/someone else took out/i,fields:["too_late"],convert:[Boolean]},{expr:/have enough stamina to attack anybody on the hitlist/i,fields:["low_stamina"],convert:[Boolean]},{expr:/closer to your level/i,fields:["low_level"],convert:[Boolean]},{expr:/You knocked out/i,fields:["knock_out"],convert:[Boolean]},{expr:/could not be completed\. Please try again/i,fields:["try_again"],convert:[Boolean]}]}};var r={health:0,maxHealth:0,stamina:0,maxStamina:0,expToNextLevel:0,cash:0,city:MW.currentCity()};var i=new PopupObject("bountyhunter_popup",{type:"main",title:"BOUNTY HUNTER",width:700,onclose:function(){n.Aborted=true;httpAjaxStopRequests();t.clear();e.fromDomElements();e.save()}});var s=function(e){var t=this;if((e=e$("table.messages",h$(e)))===null){this.valid=false}else{this.valid=true;this.response=Util.trim(e.text());this.attack_url=e.find("a.sexy_button_new").attr("href");this.vCoins=Util.parseNum(e.find("div:has(img:regex(src,victory_icon))").text())}Util.each(n.Expressions,function(e,n){if(n.expr.test(t.response)){var r=Util.doRgx(n.expr,t.response);Util.each(n.fields,function(e,i){t[i]=n.convert[e](r["$"+e])})}});e=null;return this};var o=function(t){function i(e,t){return Util.setAnchor(MW.getProfileLink(e),t)}function s(e,t){return Util.setAnchor(MW.getFamilyLink(e),Util.setColor(t,"red"))}var r=this;if($(t).is("tr")){this.cash=Util.parseNum($("td:eq(3)",t).text());this.payer={clan:h($("td:eq(2) a:regex(href,xw_controller=clan)",t)),user:h($("td:eq(2) a:regex(href,xw_controller=stats)",t)),anchor:function(){var e="";if(r.payer.clan){e=s(r.payer.clan.id,r.payer.clan.name)+" "}return e+i(r.payer.user.id,r.payer.user.name)}};this.target={badge:$(".fight_badge img",t).attr("src"),clan:h($("td:eq(1) a:regex(href,xw_controller=clan)",t)),user:h($("td:eq(1) a:regex(href,xw_controller=stats)",t)),link:$("a:regex(href,hitlist)",t).attr("href"),anchor:function(){var e="";if(r.target.clan){e=s(r.target.clan.id,r.target.clan.name)+" "}return e+i(r.target.user.id,r.target.user.name)}};this.id=(this.target.clan?this.target.clan.id:"")+this.target.user.id;this.valid=!(n.ClanList.exists(r)||n.BlackList.exists(r)&&e.redBounty!==true)}else{this.valid=false}t=null;return this};o.prototype.toString=function(){if(this.valid){return'Bounty of <span class="cash">'+Util.formatNum(this.cash)+"</span> to "+this.target.anchor()}else{return"Invalid Bounty"}};var u=function(){var e=new Array;this.current=null;this.add=function(t){if(t.valid===true){e.push(t)}};this.get=function(t){return this.current=e.splice(parseInt(t),1).shift()};this.each=function(t){Util.each(e,t)};this.shift=function(){return this.current=e.shift()};this.clear=function(){e=new Array};this.length=function(){return e.length};this.sort=function(){e.sort(function(e,t){return t.cash-e.cash})};return this};var a=function(t){this.toJSON=function(){return Util.toJSON(e.get(t))};this.addID=function(n,r){e.get(t)[n]=r};this.add=function(n){if(!this.exists(n)){try{Logger.debug("Adding To BlackList:"+n.target.user.id);e.get(t)[n.target.user.id]=n.target.user.name;e.save()}catch(r){Logger.debug("CSBlackList.add: "+r.message)}}};this.exists=function(n){try{return Util.isString(e.get(t)[n.target.user.id])}catch(r){return false}};this.each=function(n){Util.each(e.get(t),n)};this.remove=function(n){if(Util.isSet(n)&&e.get(t)){if(Util.isArray(n)){Util.each(n,function(n,r){delete e.get(t)[r]})}else{delete e.get(t)[n]}}};this.clear=function(n){e.set(t,{});e.save(n)};this.length=function(){return Util.length(e.get(t))};this.toArray=function(){var n=[];if(Util.length(e.get(t))>0){Util.each(e.get(t),function(e,t){if(parseInt(e)&&Util.isString(t));n.push({id:e,name:t})})}return n};return this};var f={list_click:function(){var t=Util.parseJSON($(this).attr("event-data"));var r=$("#bhopt_"+t["i"]+"blacklist");var i=t["i"]=="user"?n.BlackList:n.ClanList;if($("option",r).length<1){if(t["e"]!="import"){return false}}switch(t["e"]){case"clear":r.empty();e.fromDomElements();e.save();break;case"export":e.fromDomElements();if(i.length()<1){return false}FileSystem.fileSave("data:application/json;base64,"+Base64.encode(i.toJSON()));break;case"import":c$("input:file","name:files[]").css({position:"absolute",width:1,left:"-100px",opacity:0}).appendTo("body").change(function(t){$(this).remove();if(!t.target.files){return}FileSystem.fileReader(t.target.files,function(t){try{Util.each(Util.parseJSON(t),function(e,t){if(parseInt(e))i.addID(e,t)});e.toDomElements();e.save();showHelpPopup({icon:"info",title:"Import List",message:"List imported successfully."})}catch(n){Logger.error(n)}})}).click();break;case"remove":var s=new Array;$("option:selected",r).each(function(e,t){s.push(t.value)});if(s.length>0){i.remove(s);e.toDomElements();e.save()}break}return false},attack_click:l(function(){var e=n.BountyList.get($(this).attr("target"));if(e){n.Aborted=false;n.Tabs.showTab(2);n.Tabs.buttonEnabled(0,false);c("stop_hunting");x(e,function(e){T();if(e){g(e)}})}return false}),refresh_click:l(function(){$("#main_controls a").addClass("disabled");$(".bh_hitlist .bounty_attack a").unbind().addClass("disabled");d("Loading Hitlist...",true);m(function(){n.Tabs.showTab(0,false);$("#main_controls a").removeClass("disabled")})}),start_click:l(function(){c("stop_hunting");n.Aborted=false;n.Tabs.showTab(2);n.Tabs.buttonEnabled(0,false);S();return false}),stop_click:l(function(){var e=$("#attack_messages").html();if(e){v(e+'<span style="color:grey;float:right;"> CANCELLED </span>',"info");$("#attack_messages").empty()}T();return false})};i.applyCustomClass();i.addBase64Style("I2JvdW50eWh1bnRlcl9wb3B1cCAudmljdG9yeSB7DQogICAgYmFja2dyb3VuZDogdXJsKCR7YmFja2dyb3VuZF91cmx9dmljdG9y"+"eV9pY29uLmdpZikgbm8tcmVwZWF0IDBweCA1MCU7DQogICAgcGFkZGluZy1sZWZ0OiAxOXB4Ow0KICAgIGJhY2tncm91bmQtc2l6"+"ZTogMTZweDsNCiAgICAtbW96LWJhY2tncm91bmQtc2l6ZTogMTZweDsNCn0NCiNib3VudHlodW50ZXJfcG9wdXAgI21haW5fcGFu"+"ZWwgew0KICAgIGJvcmRlci1ib3R0b206IDFweCBkb3R0ZWQgIzMzMzsNCiAgICBtYXJnaW4tYm90dG9tOiA1cHg7DQogICAgaGVp"+"Z2h0OiAzMHB4Ow0KICAgIHBhZGRpbmc6IDVweCAwcHggMHB4IDEwcHg7DQp9DQojYm91bnR5aHVudGVyX3BvcHVwICNtYWluX3Bh"+"bmVsICNtYWluX2NvbnRyb2xzIHsNCiAgICBmbG9hdDogcmlnaHQ7DQp9DQojYm91bnR5aHVudGVyX3BvcHVwICNtYWluX3BhbmVs"+"ICNtYWluX2NvbnRyb2xzIGEgew0KICAgIG1hcmdpbi1yaWdodDogNXB4Ow0KICAgIHdpZHRoOiAxMDBweDsNCn0NCiNib3VudHlo"+"dW50ZXJfcG9wdXAgI21haW5fcGFuZWwgI2JoX21lc3NhZ2VzIHsNCiAgICBsaW5lLWhlaWdodDogMzBweDsNCn0NCiNib3VudHlo"+"dW50ZXJfcG9wdXAgI2NvbnRlbnRfd3JhcHBlciB1bC5iaF9sb2csDQojYm91bnR5aHVudGVyX3BvcHVwICNjb250ZW50X3dyYXBw"+"ZXIgdWwuYmhfaGl0bGlzdCB7DQogICAgbGlzdC1zdHlsZS10eXBlOiBub25lOw0KICAgIG92ZXJmbG93OiBhdXRvOw0KICAgIGZv"+"bnQtc2l6ZTogMTJweDsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBoZWlnaHQ6IDEwMCU7DQogICAgbWFyZ2luOiAwcHg7DQogICAg"+"cGFkZGluZzogMHB4Ow0KfQ0KI2JvdW50eWh1bnRlcl9wb3B1cCAjY29udGVudF93cmFwcGVyIHVsLmJoX2xvZyBsaSB7DQogICAg"+"b3ZlcmZsb3c6IGhpZGRlbjsNCiAgICBib3JkZXItYm90dG9tOiAxcHggZG90dGVkICMyMjI7DQogICAgbWFyZ2luOiAwcHggMHB4"+"IDRweDsNCiAgICBwYWRkaW5nOiAwcHggMHB4IDBweCAxOHB4Ow0KICAgIHdpZHRoOiBhdXRvICFpbXBvcnRhbnQ7DQogICAgYmFj"+"a2dyb3VuZC1zaXplOiAxNnB4ICFpbXBvcnRhbnQ7DQogICAgLW1vei1iYWNrZ3JvdW5kLXNpemU6IDE2cHggIWltcG9ydGFudDsN"+"CiAgICBtaW4taGVpZ2h0OiAxNnB4ICFpbXBvcnRhbnQ7DQp9DQojYm91bnR5aHVudGVyX3BvcHVwICNjb250ZW50X3dyYXBwZXIg"+"dWwuYmhfaGl0bGlzdCBsaSB7DQogICAgYm9yZGVyOiAycHggc29saWQgIzFGMUYxRjsNCiAgICBtYXJnaW46IDBweCAwcHggNHB4"+"Ow0KICAgIHBhZGRpbmc6IDBweCAwcHggMHB4IDM2cHg7DQogICAgd2lkdGg6IGF1dG8gIWltcG9ydGFudDsNCiAgICBiYWNrZ3Jv"+"dW5kLXNpemU6IDMwcHggIWltcG9ydGFudDsNCiAgICAtbW96LWJhY2tncm91bmQtc2l6ZTogMzBweCAhaW1wb3J0YW50Ow0KICAg"+"IG1pbi1oZWlnaHQ6IDMwcHggIWltcG9ydGFudDsNCn0NCiNib3VudHlodW50ZXJfcG9wdXAgI2NvbnRlbnRfd3JhcHBlciB1bC5i"+"aF9oaXRsaXN0IGxpIC5ib3VudHlfdXNlciB7DQogICAgZmxvYXQ6IGxlZnQ7DQogICAgd2lkdGg6IDIwMHB4Ow0KICAgIGxpbmUt"+"aGVpZ2h0OiAzMHB4Ow0KICAgIG92ZXJmbG93OiBoaWRkZW47DQogICAgbWFyZ2luLXJpZ2h0OiAzcHg7DQogICAgYm9yZGVyLXJp"+"Z2h0OiAxcHggc29saWQgIzIyMjsNCiAgICB3aGl0ZS1zcGFjZTogbm93cmFwOw0KfQ0KI2JvdW50eWh1bnRlcl9wb3B1cCAjY29u"+"dGVudF93cmFwcGVyIHVsLmJoX2hpdGxpc3QgbGkgLmJvdW50eV9jYXNoIHsNCiAgICBmbG9hdDogbGVmdDsNCiAgICB3aWR0aDog"+"MTAwcHg7DQogICAgbGluZS1oZWlnaHQ6IDMwcHg7DQogICAgb3ZlcmZsb3c6IGhpZGRlbjsNCn0NCiNib3VudHlodW50ZXJfcG9w"+"dXAgI2NvbnRlbnRfd3JhcHBlciB1bC5iaF9oaXRsaXN0IGxpIC5ib3VudHlfYXR0YWNrIHsNCiAgICB3aWR0aDogNzBweDsNCiAg"+"ICBmbG9hdDogcmlnaHQ7DQogICAgbGluZS1oZWlnaHQ6IDI2cHg7DQp9DQojYm91bnR5aHVudGVyX3BvcHVwICNjb250ZW50X3dy"+"YXBwZXIgLnVpLWxlZnQgew0KICAgIGZsb2F0OiBsZWZ0Ow0KfQ0KI2JvdW50eWh1bnRlcl9wb3B1cCAjY29udGVudF93cmFwcGVy"+"IC51aS1yaWdodCB7DQogICAgZmxvYXQ6IHJpZ2h0Ow0KfQ0KI2JvdW50eWh1bnRlcl9wb3B1cCAjY29udGVudF93cmFwcGVyIC51"+"aS1ibGFja2xpc3Qgew0KICAgIHdpZHRoOiA0OSU7DQp9DQojYm91bnR5aHVudGVyX3BvcHVwICNjb250ZW50X3dyYXBwZXIgLnVp"+"LWJsYWNrbGlzdCBkaXYudWktdG9wIHsNCiAgICBjbGVhcjogYm90aDsNCn0NCiNib3VudHlodW50ZXJfcG9wdXAgI2NvbnRlbnRf"+"d3JhcHBlciAudWktYmxhY2tsaXN0IGRpdi51aS10b3Agc3Bhbi5jaGVja2JveCB7DQogICAgbGluZS1oZWlnaHQ6IDI0cHg7DQp9"+"DQojYm91bnR5aHVudGVyX3BvcHVwICNjb250ZW50X3dyYXBwZXIgLnVpLWJsYWNrbGlzdCBzZWxlY3Qgew0KICAgIHdpZHRoOiAx"+"MDAlOw0KICAgIGhlaWdodDogMzQwcHg7DQp9DQojYm91bnR5aHVudGVyX3BvcHVwIC51aS1saW5lIHsNCiAgICBjbGVhcjogYm90"+"aDsNCiAgICBtYXJnaW46IDVweCAwcHg7DQogICAgYm9yZGVyLWJvdHRvbTogMXB4IGRvdHRlZCAjMzMzOw0KfQ0K",{background_url:global.zGraphicsURL});e.load(C)}function CollectAllCities(){function a(e){var t=c$("div","class:city_booble").appendTo(u.content);var n=c$("div").css({"float":"right","text-align":"left",width:250});c$("div").css("margin",5).appendTo(c$("div","class:city"+e).appendTo(t)).append(s$("caopt_collect_"+e,"Collect: ",100)).append(n);x$("caopt_deposit_"+e,"Deposit cash after collecting.").appendTo(n);if(Util.isSet(s[e])){c$("div").css("clear","both").appendTo(n);x$("caopt_taskmaster_"+e,"Active Taskmaster before collect.").appendTo(n)}t=$("#caopt_collect_"+e,u.content);Util.each(i[e]||{skip:"Skip",all:"All"},function(e,n){t.append(c$("option","value:"+e).text(n))})}function f(e,i,o){function l(e){if(t){return}if(!r.deposit[i]){n.MoveNext();return}a.html("Checking City Cash...");MW.travel(i,function(t){if(t===parseInt(i)){if(parseInt(e)+parseInt(MW.CurrentCityCash)<11){a.html(f);n.MoveNext();return}var r=parseInt(e)+parseInt(MW.CurrentCityCash);a.html("Depositing...");MW.deposit(i,r,function(e){if(!/can\'t|at least/.test(e))a.html(f+"<br>"+e);n.MoveNext()})}else{a.html("Error traveling.");n.MoveNext()}})}function c(e){if(t){return}a.html("Collecting Properties...");MW.collect(i,r.collect[i],function(e){a.html(f=e.message);l(e.cash)})}var a=$("#message_city"+i,u.content);var f="";if(t){return}Logger.debug(r.collect[i]);if(r.collect[i]==="skip"){n.MoveNext();return}if(Util.isSet(s[i])&&r.taskmaster[i]===true){a.html("Activating Taskmaster...");httpAjaxRequest({url:s[i],success:c})}else{c()}}var e=MW.currentCity();var t=false;var n=new Collection(global.cityNames);var r=UserConfig.caopt;var i={7:{skip:"Skip",all:"All",5:"Cash",6:"Energy",7:"Stamina"},8:{skip:"Skip",all:"All",5:"Cash",3:"Health",4:"Rob Squads"},9:{skip:"Skip",all:"All",5:"Cash",6:"Energy",7:"Stamina"}};var s={7:"remote/"+MW.getIntURL("CityCrew","activate",7)+"&isajax=1&crew_city=7&crew_type=prop&crew_dsp_type=prop&crew_slot=1",8:"remote/"+MW.getIntURL("CityCrew","activate",8)+"&isajax=1&crew_city=8&crew_type=prop&crew_dsp_type=prop&crew_slot=1",9:"remote/"+MW.getIntURL("CityCrew","activate",9)+"&isajax=1&crew_city=9&crew_type=prop&crew_dsp_type=prop&crew_slot=1"};var o=function(){if($(this).hasClass("disabled")){return}$(this).addClass("disabled");r.fromDomElements();global.cities.each(function(e){var t=c$("div","class:city_messages,id:message_city"+e);$(".city_booble .city"+e).empty().append(t);if(r.collect[e]==="skip"){t.html("This city is skipped by the user.")}else{t.html("Waiting...")}});r.save(n.MoveFirst)};var u=new PopupObject("collectall_popup",{type:"main",title:"COLLECT ALL CITIES",width:690,onclose:function(){t=true;httpAjaxStopRequests();r.fromDomElements();r.save()},buttons:[{label:"Collect All!",addClass:"short white",onclick:o}]});n.onMove(f);n.onEnd(function(){MW.travel(e)});u.addBase64Style("I2NvbGxlY3RhbGxfcG9wdXAgLmJsYWNrX2JveCB7DQoJZm9udC13ZWlnaHQ6IGJvbGQ7IA0KCWNvbG9yOiByZ2IoMjA4LCAyMDgsIDIwOCk7IA0KCWJvcmRlcjogMXB4IHNvbGlkIHJnYigxNTMsIDE1MywgMTUzKTsgDQoJYmFja2dyb3VuZC1jb2xvcjogYmxhY2s7IA0KCWZvbnQtc2l6ZTogMTRweDsNCn0NCiNjb2xsZWN0YWxsX3BvcHVwIC5jaXR5X2Jvb2JsZSB7DQoJbWFyZ2luOiAxMHB4Ow0KfQ0KI2NvbGxlY3RhbGxfcG9wdXAgLmNpdHlfYm9vYmxlID4gZGl2IHsNCglib3JkZXI6IHRoaW4gc29saWQgIzZCNkI2QjsNCgktd2Via2l0LWJvcmRlci1yYWRpdXM6IDhweDsNCgktbW96LWJvcmRlci1yYWRpdXM6IDhweDsNCglib3JkZXItcmFkaXVzOiA4cHg7DQogICAgcGFkZGluZzogNXB4IDVweCAwIDE4MHB4Ow0KICAgIGhlaWdodDogNzBweDsNCn0NCiNjb2xsZWN0YWxsX3BvcHVwIC5jaXR5X2Jvb2JsZSAuY2l0eV9tZXNzYWdlcyB7DQogICAgYmFja2dyb3VuZC1jb2xvcjogIzEyMTIxMjsNCgktd2Via2l0LWJvcmRlci1yYWRpdXM6IDRweDsNCgktbW96LWJvcmRlci1yYWRpdXM6IDRweDsNCglib3JkZXItcmFkaXVzOiA0cHg7DQogICAgbWluLWhlaWdodDogMzVweDsNCiAgICBib3JkZXI6IHRoaW4gaW5zZXQgIzQ0NDsNCiAgICBmb250LXNpemU6IDEycHg7DQogICAgcGFkZGluZzogNXB4Ow0KfQ0KI2NvbGxlY3RhbGxfcG9wdXAgLmNpdHlfYm9vYmxlIC5zZWxlY3RlZCB7DQoJYm9yZGVyOiB0aGluIHNvbGlkIGdyZWVuOw0KfQ0KI2NvbGxlY3RhbGxfcG9wdXAgLmNpdHkxIHsNCgliYWNrZ3JvdW5kOiBibGFjayB1cmwoaHR0cDovL213ZmIuc3RhdGljLnp5bmdhLmNvbS9td2ZiL2dyYXBoaWNzL21hZmlhX3dhcnNfOTI4eDU2XzAzLmpwZykgbm8tcmVwZWF0IHNjcm9sbCAtNXB4IDAlOw0KYmFja2dyb3VuZC1zaXplOiBBdXRvIDcwcHg7DQoNCn0JDQojY29sbGVjdGFsbF9wb3B1cCAuY2l0eTIgew0KCWJhY2tncm91bmQtY29sb3I6IGJsYWNrOw0KaGVpZ2h0OiAzMHB4Ow0KfQ0KI2NvbGxlY3RhbGxfcG9wdXAgLmNpdHkzIHsNCgliYWNrZ3JvdW5kLWNvbG9yOiBibGFjazsNCmhlaWdodDogMzBweDsNCn0NCiNjb2xsZWN0YWxsX3BvcHVwIC5jaXR5NCB7DQoJYmFja2dyb3VuZC1jb2xvcjogYmxhY2s7DQpiYWNrZ3JvdW5kLXNpemU6IEF1dG8gNzBweDsNCn0NCiNjb2xsZWN0YWxsX3BvcHVwIC5jaXR5NSB7DQoJYmFja2dyb3VuZDogYmxhY2sgdXJsKGh0dHA6Ly9td2ZiLnN0YXRpYy56eW5nYS5jb20vbXdmYi9ncmFwaGljcy92ZWdhc19oZWFkZXJfNzYweDU2XzAxLmdpZikgbm8tcmVwZWF0IHNjcm9sbCAwJSAwJTsNCmJhY2tncm91bmQtc2l6ZTogQXV0byA3MHB4Ow0KfQ0KI2NvbGxlY3RhbGxfcG9wdXAgLmNpdHk2IHsNCgliYWNrZ3JvdW5kOiBibGFjayB1cmwoaHR0cDovL213ZmIuc3RhdGljLnp5bmdhLmNvbS9td2ZiL2dyYXBoaWNzL2l0YWx5X2hlYWRlcl8wMS5qcGcpIG5vLXJlcGVhdCBzY3JvbGwgLTIwcHggMCU7DQpiYWNrZ3JvdW5kLXNpemU6IEF1dG8gNzBweDsNCn0NCiNjb2xsZWN0YWxsX3BvcHVwIC5jaXR5NyB7DQoJYmFja2dyb3VuZDogYmxhY2sgdXJsKGh0dHA6Ly9td2ZiLnN0YXRpYy56eW5nYS5jb20vbXdmYi9ncmFwaGljcy9icmF6aWxfaGVhZGVyXzAxLnBuZykgbm8tcmVwZWF0IHNjcm9sbCAtNXB4IDAlOw0KYmFja2dyb3VuZC1zaXplOiBBdXRvIDcwcHg7DQp9DQojY29sbGVjdGFsbF9wb3B1cCAuY2l0eTggew0KCWJhY2tncm91bmQ6IGJsYWNrIHVybChodHRwOi8vbXdmYi5zdGF0aWMuenluZ2EuY29tL213ZmIvZ3JhcGhpY3MvY2hpY2Fnb19oZWFkZXJfMDEucG5nKSBuby1yZXBlYXQgc2Nyb2xsIC01cHggMCU7DQpiYWNrZ3JvdW5kLXNpemU6IEF1dG8gNzBweDsNCn0NCiNjb2xsZWN0YWxsX3BvcHVwIC5jaXR5OSB7DQoJYmFja2dyb3VuZDogYmxhY2sgdXJsKGh0dHA6Ly9td2ZiLnN0YXRpYy56eW5nYS5jb20vbXdmYi9ncmFwaGljcy9sb25kb25faGVhZGVyXzAxLnBuZykgbm8tcmVwZWF0IHNjcm9sbCAtNXB4IDAlOw0KYmFja2dyb3VuZC1zaXplOiBBdXRvIDcwcHg7DQp9");r.add("collect",UserConfig.getSettingFrom(global.cityNames,"all"));r.add("deposit",UserConfig.getSettingFrom(global.cityNames,true));r.load(function(){global.cities.each(a);r.toDomElements();u.applyCustomClass();u.show()})}function LucifersDrone(){function n(){function n(){return c$("div").css({clear:"both","margin-top":6})}function s(){return c$("div").html("Sorry these configs/settings are <strong>disabled</strong> from display for you in this release<br/>")}c$("div","id:mod_version").appendTo(t.header).html("Version: v"+e).css({"font-family":"Arial","font-size":14,"font-weight":"bold",opacity:"0.5",position:"absolute",top:30,right:110});t.content.css("padding","10px 30px");var r,i=new TabObject({id:"drone_tabs",appendTo:t.content,height:300,tabs:["Console","Settings","Auto Actions","FB Posting","Logs"]});r=i.getLayout(0);c$("div","id:drone_status_div").appendTo(r).text("Status : ").css({"font-family":"Arial","font-size":13,"font-weight":"bold",position:"absolute",color:"gold"}).append(c$("span","id:drone_status").css("color","white"));r.append(c$("ul","id:drone_mod_console,class:console_box"));r=i.getLayout(1);x$("drone_autorestart_drone","Auto Restart Drone on refresh").appendTo(r);r.append(n());x$("drone_autolevel","Auto Collect level up bonus.").appendTo(r);r.append(n());r.append(s);r=i.getLayout(2);c$("span").text("HFC Settings").appendTo(r);r.append(s);r.append(n());c$("span").text("BF/AA Settings").appendTo(r);r.append(s);r.append(n());c$("span").text("Gift Collecting").appendTo(r);r.append(s);r=i.getLayout(3);x$("drone_autoPost_levels","Auto Post Level Up bonus.").appendTo(r);r.append(n());x$("drone_autoPost_levels","Post to multiple facebook groups.").appendTo(r).append(s);r=i.getLayout(4);r.append(s)}if(e$("#lucifers_drone")!==null)return;UserConfig.create("drone",{autorestart_drone:true,autolevel:true});options=UserConfig.drone;var e="1.02";var t=new PopupObject("lucifers_drone",{type:"main",title:"LUCIFERS DRONE",width:650,center:false,buttons:[{label:"RUN!",addClass:"medium green disabled",onclick:function(){return}},{id:"savedrone",label:"SAVE",addClass:"medium white",onclick:function(){options.fromDomElements();options.save();return}}],onclose:function(){t.destroy()}});var r={satus:function(e){$("#drone_status").text(e)},console:function(e){var t=$("#drone_mod_console"),n;var r=c$("li","class:drne_log,id:"+(new Date).getTime());var i=(new Date).toUTCString();r.append(c$("span","class:update_timestamp").text(i));r.append(c$("span").html(e));r.prependTo(t)}};t.addBase64Style("I2x1Y2lmZXJzX2Ryb25lIHVsIHsgDQpsaXN0LXN0eWxlLXR5cGU6IG5vbmU7DQp9DQoNCiNsdWNpZmVyc19kcm9uZSAuZHJuZV9sb2cgew0KYm9yZGVyLWJvdHRvbTogc29saWQgMXB4ICMzMzMzMzMNCn0NCg0KI2x1Y2lmZXJzX2Ryb25lIC5jb25zb2xlX2JveCB7DQoJaGVpZ2h0OiAyODBweDsNCgl3aWR0aDogYXV0bzsNCglwYWRkaW5nOiAwcHg7DQoJbWFyZ2luOiAwcHg7DQoJYmFja2dyb3VuZDogIzExMTsNCglib3JkZXI6IHNvbGlkIDFweCAjNjY2Ow0KCW92ZXJmbG93OiBhdXRvOw0KcG9zaXRpb246cmVsYXRpdmU7DQp0b3A6MjBweDsNCn0NCiNsdWNpZmVyc19kcm9uZSAuYmxhY2tfYm94IHsNCgl3aWR0aDogNDAwcHg7DQoJZm9udC13ZWlnaHQ6IGJvbGQ7IA0KCWNvbG9yOiByZ2IoMjA4LCAyMDgsIDIwOCk7IA0KCWJvcmRlcjogMXB4IHNvbGlkIHJnYigxNTMsIDE1MywgMTUzKTsgDQoJYmFja2dyb3VuZC1jb2xvcjogYmxhY2s7IA0KCWZvbnQtc2l6ZTogMTRweDsNCn0NCiNsdWNpZmVyc19kcm9uZSAuZnJhbWVfYm94IHsNCglib3JkZXI6IDFweCBzb2xpZCAjNEY0RjRGOw0KCW1hcmdpbi1ib3R0b206IDIwcHg7DQoJcGFkZGluZzogMTBweDsNCgl0ZXh0LWFsaWduOiBsZWZ0Ow0KfQ0KI2x1Y2lmZXJzX2Ryb25lIGRpdi5jaGVja2JveCB7DQoJYmFja2dyb3VuZDogdXJsKCJodHRwOi8vbXdmYi5zdGF0aWMuenluZ2EuY29tL213ZmIvZ3JhcGhpY3MvZmxhZ3MvbXdfbWVzc2FnZWJveF9jaGVja2JveDJfbm9ybWFsaXplZC5naWYiKSBuby1yZXBlYXQgc2Nyb2xsIDAlIDAlIHRyYW5zcGFyZW50Ow0KCXRleHQtYWxpZ246IGxlZnQ7DQoJbWFyZ2luLXRvcDogNHB4Ow0KCW1pbi1oZWlnaHQ6IDIwcHg7DQoJd2lkdGg6IGF1dG87IA0KCXBhZGRpbmctbGVmdDogMzBweDsgDQoJaGVpZ2h0OiAyMHB4Ow0KCWN1cnNvcjogcG9pbnRlcjsNCn0NCiNsdWNpZmVyc19kcm9uZSBkaXYuY2hlY2tib3guY2hlY2tlZCB7DQoJYmFja2dyb3VuZDogdXJsKCJodHRwOi8vbXdmYi5zdGF0aWMuenluZ2EuY29tL213ZmIvZ3JhcGhpY3MvZmxhZ3MvbXdfbWVzc2FnZWJveF9jaGVja2JveDFfbm9ybWFsaXplZC5naWYiKSBuby1yZXBlYXQgc2Nyb2xsIDAlIDAlIHRyYW5zcGFyZW50Ow0KfQ==");options.load(function(){n();r.console("loaded...");options.toDomElements();t.applyCustomClass();t.show();c$("div").html('<center><span style="font-size:20px;color:red">Lucifers Drone <span style="font-size:10px">v'+e+"</span></span></center>").appendTo($("#drone_mod_console"));r.satus("Idle....");r.console("Sorry Drone is currently disabled [OFFLINE] :( ...")})}function Configuration(){function o(e){if(!e.target.files){return}FileSystem.fileReader(e.target.files,function(e){try{i.destroy();Util.each(Util.parseJSON(e),function(e,t){if(!Util.isSet(UserConfig[e])){return}UserConfig[e].load(function(){UserConfig[e].fromObject(t);UserConfig[e].save()})});showHelpPopup({icon:"info",title:"Import Setting",message:"File Settings imported successfully.",buttons:[{label:"Accept",addClass:"medium white",onclick:function(){Plugins.reload(function(){Reminders.init(Configuration)})}}]})}catch(t){Logger.error(t)}})}function u(){showHelpPopup({icon:"info",title:"Login Saved",message:"Your login information has been saved successfully."})}function a(e){var t=new Object;var n=new Collection(UserConfig);n.onMove(function(e,r,i){if(i._isConfigObject!==true){n.MoveNext();return}var s=Util.isArray(i._excludedToExport)?new RegExp(i._excludedToExport.join("|"),"i"):false;i.load(function(){t[r]=new Object;i.each(function(e,n){if(s===false||!s.test(e)){t[r][e]=n}});n.MoveNext()})});n.onEnd(function(){e(Util.toJSON(t,true))});c(n.MoveFirst)}function f(){alert("Sorry feature not enabled yet couple more sleeps")}function l(){return c$("input:file","id:import_settings,name:files[]").css({position:"absolute",width:1,left:"-100px",opacity:0}).change(o)}function c(e){var n=$("option:selected","#privacy").val();if(n!=="CUSTOM"){t.set("privacy",{value:n})}else{t.set("privacy",{value:n,friends:"SOME_FRIENDS",allow:$("option:selected","#friendlists").val()})}if(!LucifersMOD.Globals.toolbar==UserConfig.main.get("opt_Toolbar")){if(UserConfig.main.get("opt_Toolbar")!==true){showHelpPopup({icon:"caution",title:"To remove the Toolbar you will need to Reload Mafia Wars.",message:"",buttons:[{label:"Reload Now",addClass:"short green",onclick:function(){unsafeWindow.location.reload()}},{label:"Reload Later",addClass:"short red"}]})}else{if(e$("#mwa_toolbar")===null){MWAddonToolbar.Init()}MWAddonToolbar.Update();LucifersMOD.Globals.toolbar=true}}LucifersMOD.LoadSaveOptions();t.fromDomElements();t.save(function(){if(UserConfig.main.get("opt_underboss")==true){global.isUnderboss=true}if(UserConfig.main.get("opt_Community")==true){MWAddonCommunity.Show();MWAddonCommunity.GetData()}else{MWAddonCommunity.Close()}MWAddonInit.isunderboss(e)})}function h(){c$("div").appendTo(i.header).html("Version: "+AppInfo.version).css({"font-family":"Arial","font-size":14,"font-weight":"bold",opacity:"0.5",position:"absolute",top:50,right:15});i.content.css("padding","10px 30px");var e,o=new TabObject({id:"config_tabs",appendTo:i.content,padding:20,height:300,tabs:["MOD Settings","General","Features","Auto Actions","Services","Publish","Tooltips"]});e=o.getLayout(0);e.append(c$("span").html('<center><a href="http://www.facebook.com/groups/MafriaWarsScripts666/" target="_blank"><img src="http://screepts.com/img/group_img.jpg"><br/><strong>Join Our Facebook Group</strong></a></center>'));Util.each(n,function(t,n){if(n.id=="opt_sendData"){if(AppInfo.release!=="beta")return}var r;if(n.numeric!=true){r=x$("main_"+n.id,n.label).appendTo(e)}else{if(n.width){r=n$("main_"+n.id,n.label,n.width).appendTo(e);log("width")}else{r=n$("main_"+n.id,n.label,50).appendTo(e)}}if(n.padleft){r.css("margin-left",n.padleft)}c$("div").css({clear:"both","margin-top":6}).appendTo(e)});e.append(c$("span").html('<br/><center><a href="http://www.facebook.com/groups/MafriaWarsScripts666/" target="_blank"><br/><strong>Join Our Facebook Group</strong></a></center>'));e=o.getLayout(1).append(c$("span").text("You need to give ")).append(c$("a","href:#,id:give_all_permissions").text("[All required Permission]").click(s.givepermissions_click)).append(c$("span").text(" to Mafia Wars.")).append(c$("div").css({clear:"both","margin-top":5})).append(x$("main_checkForUpdates","Check for MOD updates.")).append(c$("div").css({clear:"both","margin-top":5})).append(x$("main_notificationOnTop","Bring the screen to the top when a Notification shows.")).append(c$("div").css({clear:"both","margin-top":5})).append(x$("main_helpNotes","Add the Help Notes menu at Startup.")).append(c$("div").css({clear:"both","margin-top":5})).append(x$("main_publishPreview","Use Facebook user interface (UI).")).append(c$("div").css({clear:"both","margin-top":5})).append(x$("main_debugMode","Debug Mode, (CTRL + SHIFT + J to open debug window).")).append(c$("div").css({clear:"both",margin:"5px 0px 5px 0px","border-bottom":"1px solid #333"})).append(c$("div").append(n$("main_fbtimeout","Facebook Requests Timeout (sec):",50)).css({"padding-right":200,"text-align":"right"})).append(c$("div").css({clear:"both","margin-top":5})).append(c$("div").append(n$("main_rqtimeout","MafiaWars Requests Timeout (sec):",50)).css({"padding-right":200,"text-align":"right"})).append(c$("div").css({clear:"both","margin-top":5})).append(c$("div").append(n$("main_errorout","MafiaWars Error Requests :",50)).css({"padding-right":200,"text-align":"right"})).append(c$("div").css({clear:"both","margin-top":5})).append(c$("div").append(n$("main_jstimeout","JSON Services Timeout (sec):",50)).css({"padding-right":200,"text-align":"right"})).append(c$("div").css({clear:"both",margin:"5px 0px 10px 0px","border-bottom":"1px solid #333"}));c$("center").appendTo(e).css("margin-top",10).append(l()).append(b$("Import settings","class:short orange").css("margin-right",5).click(s.import_click)).append(b$("Export settings","id:export_settings,class:short orange").css("margin-right",5).click(s.export_click)).append(c$("div")).css({"margin-top":5,clear:"both"});e=o.getLayout(2);Util.each(r,function(t,n){var r;if(n.numeric!=true){r=x$("main_"+n.id,n.label).appendTo(e)}else{if(n.width){r=n$("main_"+n.id,n.label,n.width).appendTo(e)}else{r=n$("main_"+n.id,n.label,50).appendTo(e)}}if(n.padleft){r.css("margin-left",n.padleft)}c$("div").css({clear:"both","margin-top":6}).appendTo(e)});e=o.getLayout(3);x$("main_autorestart","Auto Restart HFC/BF/Assassin-a-nator/Robber if refreshed").css("width",150).appendTo(e);c$("p").appendTo(e);x$("main_autolevel","Auto Collect level up bonus.").css("width",150).appendTo(e);c$("p").appendTo(e);x$("main_CollectDailyFix","Auto Collect Daily Fix.").css("width",150).appendTo(e);c$("p").appendTo(e);x$("main_autoheal","Auto heal,").css("width",150).appendTo(e);n$("main_autohealwhen","when health goes below:").appendTo(e);c$("span").text(" In: ").appendTo(e);s$("main_autohealin",120).appendTo(e);c$("p").text("Autodeposit in:").appendTo(e);e=c$("ul").appendTo(e).css("list-style-type","none");global.cities.each(function(t,n){var r="main_autodeposit_"+t;c$("li","id:"+r).appendTo(e).height(25).append(x$(r+"_active",n.name,"div").css({"float":"left",width:100})).append(t$(r+"_amount"," When cash is more than: ",150))});c$("span").appendTo(e);c$("span").text(" (Suggested amount $500 or more.) ").css("font-size","13px").appendTo(e);e=o.getLayout(4).append(c$("div").text("Select the shortener service:")).append(s$("main_shortserviceid",548).change(s.services_change)).append(c$("div","id:short_service_info").css({"margin-top":5,"min-height":100})).append(c$("div","id:short_service_login").css({"margin-top":5,"min-height":100}).hide()).append(c$("div").css({"border-top":"1px solid #333","padding-top":5}).text("Select the unshortener service:")).append(s$("main_unshortserviceid",548).change(s.services_change)).append(c$("div","id:unshort_service_info").css({"margin-top":5,"min-height":100}));e=$("#short_service_login");b$("Save Login","class:medium white").click(s.savelogin_click).css("float","right").appendTo(e);c$("div").css("float","left").width(420).appendTo(e).append(c$("p").css("margin","2px 0px 2px 0px")).append(c$("span","id:login_name_text").css("color","green")).append(c$("input:text","id:login_name").width(320).css("float","right")).append(c$("div").css("clear","both")).append(c$("span","id:login_key_text").css("color","green")).append(c$("input:text","id:login_key").width(320).css("float","right"));e=o.getLayout(5).append(c$("div").css("margin-bottom",5).text("Wall posts privacy: ")).append(s$("privacy",200).change(s.privacy_change)).append(s$("friendlists",200).hide());e.append(c$("div").css({clear:"both","margin-top":5})).append(c$("div").text("Manage Groups:").css({clear:"both","margin-top":5,"border-top":"1px solid #333"})).append(c$("select","id:groups_list,multiple:multiple").css({"float":"left",width:400,height:200,"margin-right":5})).append(c$("div").css("float","left").append(b$("Refresh","class:green medium").click(s.refreshgroups_click)).append(c$("div").css({clear:"both","margin-top":5})).append(b$("Remove","class:red medium").click(s.removegroup_click)));o.getLayout(6).append(x$("main_tooltips","Enable Tooltips helps.")).append(b$("Tooltip Editor","class:short orange").css("float","right").click(s.tooltipEditor)).append(c$("div").text("Language selection").css({"border-bottom":"1px solid #333",margin:"10px 0px 5px 0px"})).append(c$("div").text("Current Mafia Wars language: "+global.mw_locale)).append(s$("main_tooltiplanguage",300).change(s.language_change).append(c$("option","value:none").text("Use Mafia Wars language"))).append(c$("div","id:language_description").css({"margin-top":8,"border-top":"1px solid #333"}));c$("a","target:_black").appendTo(c$("center").css("margin",5).appendTo(i.content)).attr("href","https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=BCPYPXA3GDDBN").append(c$("img").attr("src","https://www.paypal.com/en_US/i/btn/btn_donate_SM.gif"));i.applyOptions({main_autohealin:{1:"New York",0:"Current City"},main_tooltiplanguage:Tooltips.toArray(),main_shortserviceid:URLServices.toArray("shorten"),main_unshortserviceid:URLServices.toArray("unshorten"),privacy:{EVERYONE:"Everyone",ALL_FRIENDS:"All friends",FRIENDS_OF_FRIENDS:"Friends of friends",SELF:"Myself",CUSTOM:"From friend list"}});global.Groups.addToSelect("#groups_list",0);if(t.privacy){$("#privacy option[value="+t.privacy.value+"]",i.content).attr("selected","selected")}}var e,t=UserConfig.main;var n=[{id:"opt_arrow",label:"Use MWADDON Default Green Arrow."},{id:"opt_sendData",label:"Send Anonymous error/data to server"},{id:"opt_dailypoint_notify",label:"Notify When Daily Point Updates"},{id:"opt_dailypoint_collect",label:"Auto Collect Daily Point",padleft:25,width:150},{id:"opt_underboss",label:"Enable Underboss Features"},{id:"opt_clanxp",label:"Auto Collect Family Clan XP"},{id:"opt_clanxp_at",label:"Don't Collect Clan XP If it will Level Me",padleft:25,width:150},{id:"opt_removebanner",label:"Remove Zynga Adverts/Promo."},{id:"opt_killswitch",label:"Revolver killer (Completely kills the spinning bullets)"}];var r=[{id:"opt_Toolbar",label:"Show MWAddon Toolbar."},{id:"opt_ChromeBM",label:"Add Chrome bookmarks to the Bookmarks menu (if available).",padleft:25},{id:"opt_Community",label:"Show Facebook Group/Page News."},{id:"opt_fanpage_id",label:"FB Group ID",numeric:true,padleft:25,width:150},{id:"opt_CommunityLimit",label:"News Limit:",numeric:true,padleft:25},{id:"opt_JobRates",label:"Modify jobs stats to show ratio & other job features."},{id:"opt_CollectionPage",label:"Modify Collection Page to use Multi Gifter popup for send gifts."},{id:"opt_ProfilePage",label:"Modify User's Profiles to add new actions."},{id:"opt_FamilyPage",label:"Modify Family's Pages to add new actions."},{id:"opt_HomePage",label:"Modify Start Page and Player News."}];var i=new PopupObject("config_popup",{type:"main",title:"CONFIGURATION",width:650,center:false,buttons:[{label:"Save configuration"}],onclose:c});var s={LocalExport:function(){},ServerExport:function(){},tooltipEditor:function(){Tooltips.EditMode=true;showHelpPopup({icon:"info",message:"Tooltip Edit Mode has been activated.<br>Now every time you move your mouse over a control which can be added a tooltip, the editor box will appear."});i.destroy();return false},givepermissions_click:function(){var e="read_stream,publish_stream,user_groups,offline_access,read_friendlists";facebook.requestPermission(e,function(e){Logger.debug("Give All Permissions: "+e)});return false},savelogin_click:function(){var e=$("#short_service_login"),n=t.shortServiceLogin;n[$("#login_name_text",e).text()]=$("#login_name",e).val();n[$("#login_key_text",e).text()]=$("#login_key",e).val();t.save(u)},refreshgroups_click:function(){var e=$(this);if(!e.hasClass("disabled")){e.addClass("disabled");global.Groups.refresh(function(){global.Groups.addToSelect("#groups_list",0);e.removeClass("disabled")})}return false},removegroup_click:function(){var e=$(this);if(e.hasClass("disabled")){return false}e.addClass("disabled");$("option:selected","#groups_list").each(function(e,n){if(parseInt(n.value)!==0){delete t.groups[n.value]}});t.save(function(){global.Groups.addToSelect("#groups_list",0);e.removeClass("disabled")});return false},services_change:function(){var e=$("#short_service_info",i.content),n=$("#short_service_login",i.content),r=t.shortServiceLogin,s=URLServices.shorten[this.value];if(Util.isSet(s)){if(s.login){n.show();e.hide();$("p",n).html(s.description);$("#login_name_text",n).html(s.login.name);$("#login_key_text",n).html(s.login.key);$("#login_name",n).val(r[s.login.name]||"");$("#login_key",n).val(r[s.login.key]||"")}else{n.hide();e.html(s.description).show()}}else if(Util.isSet(s=URLServices.unshorten[this.value])){$("#unshort_service_info").html(s.description)}return false},import_click:function(){$("#import_settings").click();return false},export_click:function(){a(function(e){FileSystem.fileSave(e)});return true},privacy_change:function(){var e=this;var n=t.privacy;var r=$("#friendlists",i.content);if(this.options[this.selectedIndex].value!="CUSTOM"){r.hide();return false}facebook.needAppPermission("read_friendlists",function(t){if(!t){e.selectedIndex=1;return}facebook.friendlist(function(e){if(!e||e.error_code||e.data.length<1){showHelpPopup({icon:"error",title:"friendlist length",message:"Seem that you haven't friendlists."});return}r.empty();Util.each(e.data,function(e,t){var i=c$("option","value:"+t.id).text(t.name);r.append(i);if(n&&n.allow==t.id){i.attr("selected","selected")}});r.show()})});return false},language_change:function(){var e=this.options[this.selectedIndex].value;if(e==="none"){e=global.mw_locale}if(Tooltips.resourceExists(e)){$("#language_description",i.content).empty().append(c$("p").css("color","green").text("Description:")).append(c$("div").html(Tooltips.getResource(e).description))}else{$("#language_description",i.content).empty()}return false}};i.addBase64Style("I2NvbmZpZ19wb3B1cCAuYmxhY2tfYm94IHsNCgl3aWR0aDogNDAwcHg7DQoJZm9udC13ZWlnaHQ6IGJvbGQ7IA0KCWNvbG9yOiBy"+"Z2IoMjA4LCAyMDgsIDIwOCk7IA0KCWJvcmRlcjogMXB4IHNvbGlkIHJnYigxNTMsIDE1MywgMTUzKTsgDQoJYmFja2dyb3VuZC1j"+"b2xvcjogYmxhY2s7IA0KCWZvbnQtc2l6ZTogMTRweDsNCn0NCiNjb25maWdfcG9wdXAgLmZyYW1lX2JveCB7DQoJYm9yZGVyOiAx"+"cHggc29saWQgIzRGNEY0RjsNCgltYXJnaW4tYm90dG9tOiAyMHB4Ow0KCXBhZGRpbmc6IDEwcHg7DQoJdGV4dC1hbGlnbjogbGVm"+"dDsNCn0NCiNjb25maWdfcG9wdXAgZGl2LmNoZWNrYm94IHsNCgliYWNrZ3JvdW5kOiB1cmwoImh0dHA6Ly9td2ZiLnN0YXRpYy56"+"eW5nYS5jb20vbXdmYi9ncmFwaGljcy9mbGFncy9td19tZXNzYWdlYm94X2NoZWNrYm94Ml9ub3JtYWxpemVkLmdpZiIpIG5vLXJl"+"cGVhdCBzY3JvbGwgMCUgMCUgdHJhbnNwYXJlbnQ7DQoJdGV4dC1hbGlnbjogbGVmdDsNCgltYXJnaW4tdG9wOiA0cHg7DQoJbWlu"+"LWhlaWdodDogMjBweDsNCgl3aWR0aDogYXV0bzsgDQoJcGFkZGluZy1sZWZ0OiAzMHB4OyANCgloZWlnaHQ6IDIwcHg7DQoJY3Vy"+"c29yOiBwb2ludGVyOw0KfQ0KI2NvbmZpZ19wb3B1cCBkaXYuY2hlY2tib3guY2hlY2tlZCB7DQoJYmFja2dyb3VuZDogdXJsKCJo"+"dHRwOi8vbXdmYi5zdGF0aWMuenluZ2EuY29tL213ZmIvZ3JhcGhpY3MvZmxhZ3MvbXdfbWVzc2FnZWJveF9jaGVja2JveDFfbm9y"+"bWFsaXplZC5naWYiKSBuby1yZXBlYXQgc2Nyb2xsIDAlIDAlIHRyYW5zcGFyZW50Ow0KfQ==");t.load(function(){h();t.toDomElements();i.applyCustomClass();i.show();$("select",i.content).change()})}function CraftManager(){function s(e){var t="remote/"+MW.getIntURL("travel","travel")+"&from=propertyV2&destination=1";httpAjaxRequest({url:t,success:function(t){var n=h$(t);var r=0;try{n.find("div.propertyLimitedTimeCardContainer").each(function(e,t){var n=Util.parseNum(t.id);r++;if(n){try{var s=Util.parseNum($(".propertyLimitedTimeCardLevel",t).text())}catch(o){s=false}i.ny_props[n]={id:String(n),name:Util.formatText($(".propertyLimitedTimeCardName",t).text()),icon:$(".propertyLimitedTimeCardImg",t).attr("src"),level:s}}});if(typeof e=="function")e&&e()}catch(s){log("PropDIV Error : "+s)}},error:function(e){log("badpacket props:"+e)}})}function c(e){httpAjaxRequest({url:"remote/"+MW.getIntURL("propertyV2","view",1),success:function(t){h$(t).find(".propertyLocalCardContainer ").each(function(){property=h$(this).html();building_type=h$(property).find(".propertyLocalCard").attr("id");building_type=/([0-9]+)/.exec(building_type)[1];property_pic=h$(property).find(".propertyLocalCardImg").attr("src");name=Util.formatText(h$(property).find(".propertyLocalCardName").text());var e="#propertyLocalCardLevel_"+building_type;level=h$(property).find(e).text();var t=true;if(building_type==1)t=false;Logger.debug("Loaded Property => "+name+" level = > "+level);var r=$("#propertyLocalTimer_"+building_type).text();var i="&city=1&building_type="+building_type+"xw_action=buy";var s="ny_cash_"+building_type;var o=new u(s,name,property_pic);o.is_ny_cash=true;o.canUpgrade=t;o.level=parseInt(level);o.upgrade_cost=parseInt("10000");o.build_cost=parseInt("10000");o.last_collected=parseInt(r);o.upgrade="remote/"+MW.getIntURL("propertyV2","buy",1)+"&building_type="+building_type;n.add(o)});i.nyCashProps=true;i.tab.buttonDisplay(2,true);if(typeof e=="function")e&&e()}})}function h(e){function r(e){Util.each(e,function(e,t){if(!Util.isString(t.type)||!/Cash/i.test(t.type)||parseInt(t.maxlevel)!=0){return}var r="ny_cash_"+t.property_id;var i=new u(r,t.name.replace(/\+/g," "),t.property_pic);i.is_ny_cash=true;i.canUpgrade=parseInt(t.maxlevel)==0;i.level=parseInt(t.level);i.upgrade_cost=parseInt(t.upgrade_cost);i.build_cost=parseInt(t.build_cost);i.last_collected=parseInt(t.last_collected);i.upgrade=t.buy_url;n.add(i)});if(Util.isArray(e)&&e.length>0){i.nyCashProps=true;i.tab.buttonDisplay(2,true)}}var t;try{t=Util.trim(Util.substr(e,"var flashvars","swfobject"));t=Util.doRgx(/mw_data:"([^"]+)/,t).$1;if(t=Util.parseJSON(unescape(t))){r(t)}}catch(s){Logger.error(s)}}function p(e,t,n){if(!i.ny_props[e]){return false}$propResponse=h$(t);var r=$propResponse.find("#timerButtonProp"+e);try{var s=$($(r).find(".sexy_button_new.medium.gold.sexy_coin_new.impulse_buy"))}catch(a){}var f=i.ny_props[e];var l=new u(e,f.name,f.icon);l.is_ny=true;var c=$propResponse.find(".propLevel");l.level=Util.parseNum(Util.textNodes($(c)));try{if($("span",c).length>1&&l.level<=0){c=Util.parseNum($("span",c).last().text());l.level=c}}catch(a){}$(".cs_deck_of_cards > div",t).each(function(e,t){$(".cs_outer",t).each(function(e,t){var r=new o;var i=new Array;r.doublebuild=/build 2/.test(s.text());r.rpbuy=s.attr("href");r.name=$(".cd_item_name",t).text();r.level=Util.parseNum($(".cs_recipe_card_banner .cs_bigtext",t).text());r.image=$(".cs_item_image img",t).attr("src");$(".cs_item_stats > span, .cs_item_stats > img",t).each(function(e,t){t=$(t);if(t.hasClass("cs_attack")){r.attack=t.text()}else if(t.hasClass("cs_defense")){r.defense=t.text()}else if(t.hasClass("cs_bonus")){i.push(Util.trim(t.text()+" "+(t.find("img").attr("alt")||"")))}else if(t.is("img")){i.push(Util.trim(Util.textNodes(t.parent())+" "+(t.attr("alt")||"")))}else{i.push(t.text()+" "+t.attr("class"))}});$(".cs_cs_ingredients > .cs_ingredient",t).each(function(e,t){var n=$("img",t);var i=Util.doRgx(/(\d+)\/(\d+)/,$(".num_items",t).text());r.requirements.push({name:n.attr("alt"),icon:n.attr("src"),have:parseInt(i.$1),need:parseInt(i.$2)})});if(i.length>0){r.bonus=i.join(",")}if(l.level<r.level){r.requirements.push({name:l.name+" level",need:r.level,have:l.level})}r.buy=$(".cs_buy_button a:regex(href,xw_action=build|xw_action=craft)",t).attr("href");r.propUrl=n;l.add(r)})});return l}function d(e){if(!e||!e.properties){return}var t=new Object,r,s=parseInt((new Date).getTime()/1e3);if(Util.isArray(e.items)){Util.each(e.items,function(e,n){t[n.id]=n})}Util.each(e.properties,function(a,f){if(!f.purchase_items){return}var l=f.last_purchase_time_stamp+f.purchase_refresh_rate;var c=Util.trim(f.name_unlocalized.toLowerCase().replace(/\s/g,"_"));var h=i.props[c].city;var p="&city="+h+"&building_type="+i.props[c].type;r=new u(c,f.name,f.image_url);r.time_left=Math.max(0,l-s);r.level=Util.parseNum(f.level);r.buy_avail=parseInt(f.available_purchases);r.type=f.type;if(isNaN(r.buy_avail)){r.buy_avail=0}if(r.time_left>0){if(i.countdowns[c]){i.countdowns[c].start(r.time_left)}else{C(c,r.time_left)}}else if(i.countdowns[c]){i.countdowns[c].clear()}Util.each(f.parts_required,function(e,n){if(t[n.id]){return r.canUpgrade=t[n.id].num_owned>n.quantity}else{return r.canUpgrade=false}});if(r.canUpgrade&&Util.isSet(i.props[c])){r.upgrade=p}else{r.canUpgrade=false}Util.each(f.purchase_items,function(t,n){var u=new o;var a=n.property?e.properties[n.property]:f;u.name=n.name;u.level=parseInt(n.unlock_level);u.image=n.image;u.attack=n.attack||0;u.defense=n.defense||0;u.bonus=n.special_ability_text;if(n.price>0&&i.props[c]){u.requirements.push({name:"Cash",type:"cash",icon:global.zGraphicsURL+global.city(h).cashIcon,need:n.price,have:i.cash_by_city[h]||0})}if(n.rp>0){u.requirements.push({name:"Reward Points",type:"rp",icon:global.zGraphicsURL+"v3/icon-gf-coin.gif",need:n.rp,have:global.User.reward_points()})}if(a.level<u.level){u.requirements.push({type:"level",name:a.name+" level",need:u.level,have:a.level})}else if(r.buy_avail&&r.buy_avail>0||s>l&&i.props[c]){u.buy="remote/"+MW.getIntURL("propertyV2","portBuyItem")+p+"&id="+t;u.propUrl=false}r.add(u)});n.add(r)})}function v(){c$("div","id:craft_messages").appendTo(c$("div").css({height:50,"border-bottom":"1px solid #333",padding:"5px 5px 5px 20px"}).appendTo(l.content));i.tab=new TabObject({id:"craft",appendTo:l.content,overflow:true,height:420,tabs:["New York","Other Cities","New York Cash","Event Log"]});i.tab.getLayout(3).append(c$("ul","id:craftingLogger").css({"padding-top":10,height:410}));i.tab.buttonDisplay(2,false);x$("cmopt_opt_hidedisable","Hide Disabled Properties").appendTo(l.content).css({margin:5}).click(function(){r.fromDomElements();r.save(f.Hide_DisabledProps)})}function m(e,t){var n=0,s="build_"+t.id,o=t.id+"_enabled";var u=t.is_ny?"0":t.is_ny_cash?"2":"1";var a=c$("div","class:property_outer,id:prop_id_"+t.id);i.tab.getLayout(u).append(a);a=c$("div","class:property_inner").appendTo(a);if(!t.is_ny_cash){x$("cmopt_"+o,"","div").attr("title","Enable/Disable this property for AutoCrafting.").css({margin:0,width:50,height:60,"float":"left"}).appendTo(a)}var l=c$("div","class:buttons").appendTo(a);if(t.is_ny_cash){b$("Upgrade","class:medium orange,id:upgrade_"+t.id+",name:"+t.id).css("margin-top",15).click(f.upgrade).appendTo(l)}else{b$("Craft","class:short green disabled,id:"+s+",name:"+t.id).click(f.build).appendTo(l);c$("div").css({clear:"both","margin-top":5}).appendTo(l);b$("Upgrade","class:short orange disabled,id:upgrade_"+t.id+",name:"+t.id).click(f.upgrade).appendTo(l)}a=c$("div","class:body,id:"+t.id+"_body").appendTo(a);a.addClass(t.is_ny_cash||t.is_ny?"property_icon":"property_icon");a.css("background-image",'url("'+t.icon+'")');c$("h4").html(t.name+' (Level <span id="level_'+t.id+'">0</span>):').appendTo(a);c$("div","id:"+t.id+"_countdown,class:cdn_timer").appendTo(a);a=c$("p").appendTo(a);if(t.is_ny_cash){n$("upgrade_in_"+t.id,"Upgrade to Level:",100).appendTo(a);$("input",a).val(t.level).change(f.upgrade_change).keyup(f.upgrade_keyup);return}var c=c$("select","id:cmopt_"+s+",name:"+t.id).width(480).appendTo(a);c$("div","id:item_requirements").appendTo(a);t.each(function(e,r){var i="Level "+r.level+" - "+r.name;if(r.attack>0||r.defense>0){i+=" ["+r.attack+"/"+r.defense+"]"}if(r.bonus){i+=" ["+r.bonus+"]"}c$("option","value:"+e).text(i).appendTo(c);if(r.level<=t.level&&r.rp<1){n=e}});if(!t.is_ny_cash){if(!Util.isSet(r[s])){r.add(s,n)}if(!Util.isSet(r[o])){r.add(o,true)}}c.change(f.build_change)}function g(){var e=true;if(l.is_closed===true){return}n.each(function(t,n){if(i.DisabledProperties[t]){return true}var s=$("option:selected","#cmopt_build_"+t).val();var o=n.get(s);if(r.get(t+"_enabled")&&o&&o.canBuy()){b(t,o);return e=false}else{return e}});if(e){var t;Util.each(i.countdowns,function(e,n){if(n.arguments.delay>0){if(!Util.isSet(t)){t=n}else{if(n.arguments.delay<t.arguments.delay){t=n}}}});if(Util.isSet(t)){w('<span id="'+t.arguments.id+'_countdown"></span>');E("AutoCrafting paused: Waiting for the next available item.","info")}else{w("AutoCrafting stopped.");E("AutoCrafting stopped: You can't craft more items.","info")}}}function y(e){Util.each(i.tab.buttons,function(t,n){n.toggleClass("disabled",e===false)})}function b(e,t,n){function s(){httpAjaxRequest({url:t.buy,success:function(t){var t=S(t,r);if(t.success){w(t.message);E(t.message);T(e)}else{if(r>1){i.DisabledProperties[e]=true;if(i.autocrafting){setTimeout(function(){g()},2500)}}else{r++;setTimeout(function(){s()},2500)}}},error:function(e){try{log(e);log(JSON.stringify(e))}catch(n){}if(r>UserConfig.main.errorout){E("Error crafting "+t.name+" (check console).")}else{r++;setTimeout(function(){s()},333)}}})}w("Crafting "+t.name+"...",true);$("#"+e+"_countdown",l.content).html(Util.setColor("Loading...","green"));var r=0;log("going to build link -> "+t.buy);s()}function w(e,t){var n=$("#craft_messages").empty();var r=c$("span").html(e||"");if(t){Resources.getPicture("ajax_loader").css({"float":"left","padding-left":20,width:"auto"}).append(r).prependTo(n)}else{r.appendTo(n).hide().fadeIn(500)}}function E(e,t){var n=Util.setColor("["+(new Date).toLocaleTimeString()+"] ","grey");var r=t==="error"?Resources.getPicture("ajax_error","li"):Resources.getPicture("info_icon","li");if(t!=="error"){e=Util.setColor(e,"#E1E1E1")}else{e=Util.setColor(e,"red")}r.prependTo("#craftingLogger").append(c$("p").html(n+e||""))}function S(e){var t={success:false,message:""};var n=e;if(!e.data){log(e);e=h$(e).find(".pop_box > div > div:eq(2)").html();if(t.success=Util.isString(e)&&e.indexOf("<br>")>-1){t.message=e.substr(0,e.indexOf("<br>"))}else{log("error crafting -> \n"+$(n).html());t.message="Error crafting this item."}}else{var r=Util.parseJSON(e.data);t.success=r.result=="success";t.message=r.purchase_message}return t}function x(e){if(!e.data){return h$(e).find(".message_body:first").text()}var t=Util.parseJSON(e.data);if(t.result&&t.description){return Util.formatText(t.result)+"! "+t.description}else{return t.purchase_message||t.success_message||t.result}}function T(e,t){var r,s=n.get(e);try{r=s.is_ny?i.reqs.newyork:i.reqs[i.props[e].load];log("RefreshProperty -> url -> "+r);if(!s.propUrl){n.each(N);if(i.autocrafting){g()}}else{L(s.propUrl,e,function(e){if(i.autocrafting){n.each(N);g()}})}}catch(o){Logger.debug("RefreshProperty: "+o.message);return}}function N(e,t){function o(){var e=parseInt($("input",r).val());var n=t.level;var i=0;while(n<e){i+=t.build_cost+t.upgrade_cost*n;n++}return"Cost: $"+Util.setColor(Util.formatNum(i),"green")}function u(){var n=$("select option:selected",r).val();var i=t.get(n);if(!i||typeof i=="undefined"){return false}var s=$("#item_requirements",r);var o=$("a#build_"+e),u=$("#upgrade_"+t.id);var a="Craft";if(t.buy_avail&&t.buy_avail>0){a+=" ("+t.buy_avail+")"}o.toggleClass("disabled",i.canBuy()===false).find("span:last").text(a);if(t.canUpgrade){o.removeClass("medium").addClass("short");u.removeClass("disabled").show()}else{o.removeClass("short").addClass("medium").css("margin-top",15);u.addClass("disabled").hide()}if(!t.selectedIndex||t.selectedIndex!=n){t.selectedIndex=n;s.empty()}else{return}if(i.requirements.length>0){c$("div").text("You need:").appendTo(s).css({"float":"left",color:"grey"});Util.each(i.requirements,function(e,t){var r=c$("div","class:req_field").attr("title",t.name).appendTo(s);if(Util.isSet(t.icon)){c$("img").appendTo(r).attr({src:t.icon,alt:t.name})}else{c$("span").text(t.name+": ").appendTo(r)}if(Util.isSet(t.have)){c$("span").text(t.need+"/"+t.have).appendTo(r).css({color:t.have<t.need?"red":"green"});if(t.need<3){$(n).removeClass("checked");$(n).removeAttr("checked")}}else{c$("span").text(Util.formatNum(t.need)).appendTo(r).css("color","yellow")}})}}var r;if(!Util.isObject(t)){t=n.get(e)}if(!(r=e$("#prop_id_"+e,l.content))){return}$("#level_"+e,r).text(t.level);if(t.is_ny_cash){$("#"+e+"_countdown",r).empty();if(t&&t.canUpgrade&&parseInt($("input",r).val())>t.level){$("#upgrade_"+e,r).removeClass("disabled")}else{$("#upgrade_"+e,r).addClass("disabled")}$("#"+e+"_countdown",r).html(o())}else{if(!i.countdowns[e]||i.countdowns[e].started!==true){$("#"+e+"_countdown",r).html(Util.setColor("Ready!","green"))}try{u()}catch(s){log("updateCraftProperty() -> "+s)}}}function C(e,t){i.countdowns[e]=new Countdown({id:e,selector:"#craftmanager_popup #"+e+"_countdown",delay:t,text:"Build new item in:",success:T})}function k(e,t){function u(e){var t=Util.doRgx(/var timeLeft\s?=\s?(\d+)/i,e).$1;var n=Util.doRgx(/id:\s?'buildTimer?Prop([\w\d]+)'/i,e).$1;if(t&&(t=parseInt(t))>0&&n){if(i.countdowns[n]){i.countdowns[n].start(t)}else{C(n,t)}}else if(n&&i.countdowns[n]){i.countdowns[n].clear()}}function f(t){httpAjaxRequest({url:e,success:function(e){if(e.data){try{e=Util.parseJSON(e.data);if(e.cities){Util.each(e.cities,function(e,t){i.cash_by_city[t.city]=t.cash_amt})}d(e);t&&t()}catch(r){Logger.error(r)}}else{h$(e,true).find(".master").each(function(t,r){if(r.id&&/propsDiv/.test(r.id)){var i="";var u=r.id.replace("propsDiv","");var a=h$(e).find("#depotButton"+u).attr("onclick");if(/true/.test(a)){i="remote/html_server.php?xw_controller=LimitedTimeProperty&xw_action=getMasterPropertyDiv"}else{i="remote/html_server.php?xw_controller=LimitedTimeProperty&xw_action=getNewMasterPropertyDiv"}i=i+"&id="+u;var f={id:u,url:i};if(Util.inArray(o,u)){s.push(f)}}else{if(r.id&&/upgradeDiv/.test(r.id)){try{var l=n.get(r.id.replace("upgradeDiv",""));var c=e$("div[id^=cs_buy_all_and_upgrade] a",r);l.canUpgrade=Util.parseJSON(c.attr("requirements")).favor==0;l.upgrade=Util.toUrl($("div[id^=cs_build_or_upgrade] a",r))}catch(r){}}}});l(0)}},error:function(){if(a>UserConfig.main.errorout){E("There was an error while loading properties.","error");t&&t(false)}else{setTimeout(function(){f()},333)}}})}function l(e){if(e>=s.length){t&&t(true);return}var r=s[e];var i=r.url;global.props_loaded=false;httpAjaxRequest({url:i,success:function(t){var s=h$(t,true).find("script:regex(text,addCountdown)");u($(s).text());n.add(p(r.id,t,i));e++;l(e)},error:function(e){log("error shit"+e)}})}var r="";var s=[];var o=UserConfig.cmopt.get("opt_preLoadProps");var a=0;f(t)}function L(e,t,r){function s(e){var t=Util.doRgx(/var timeLeft\s?=\s?(\d+)/i,e).$1;var n=Util.doRgx(/id:\s?'buildTimer?Prop([\w\d]+)'/i,e).$1;if(t&&(t=parseInt(t))>0&&n){if(i.countdowns[n]){i.countdowns[n].start(t)}else{C(n,t)}}else if(n&&i.countdowns[n]){i.countdowns[n].clear()}}httpAjaxRequest({url:e,success:function(i){var o=h$(i,true).find("script:regex(text,addCountdown)");s($(o).text());n.add(p(t,i,e));r&&r(true)}})}function A(){function o(){c(function(){u()})}function u(){function u(e){if(e>=s.length){global.props_loaded=true;return}log("processID -> "+s[e]);k(s[e],function(t){e++;u(e)})}var t=[];log("props_wait_count =>"+e);var s=[];Util.each(i.reqs,function(e,t){s.push(t)});var o=0;u(0);Util.until({retries:1e3,test:function(){return global.props_loaded},success:function(){global.props_loaded=false;E("Properties loaded successfully.","info");loadingScreen();if(n.length()>0){n.each(m,true);r.toDomElements();w("Default items selected.");n.each(function(e,t){if(i.countdowns[e]){i.countdowns[e].start()}else if(!t.is_ny_cash){C(e,0)}N(e)});l.applyCustomClass();l.show();f.Hide_DisabledProps()}else{l.destroy();showHelpPopup({icon:"error",title:"Craft Manager",message:"Can't load your properties. Please, try again later."})}}})}var e=0;var t=0;n=new a;v();loadingScreen("Loading properties...");s(function(){if(!UserConfig.cmopt.get("opt_loadProps")){f.LoadedProps(o)}else{o()}})}var e=false;var t=false;var n;var r=UserConfig.cmopt;var i={DisabledProperties:new Object,cash_by_city:global.User.cash_by_city(),nyCashProps:false,countdowns:new Object,ny_props:{chop_shop:{name:"Chop Shop",icon:"https://zynga1-a.akamaihd.net/mwfb/mwfb/graphics/LimitedTimeProperty/button/chop_shop-off.png",level:0},weapons_depot:{name:"Weapons Depot",icon:"https://zynga1-a.akamaihd.net/mwfb/mwfb/graphics/LimitedTimeProperty/button/weapons_depot-off.png",level:0},armory:{name:"Armory",icon:"https://zynga1-a.akamaihd.net/mwfb/mwfb/graphics/LimitedTimeProperty/button/armory-off.png",level:0},private_zoo:{name:"Private Zoo",icon:"https://zynga1-a.akamaihd.net/mwfb/mwfb/graphics/LimitedTimeProperty/button/private_zoo-off.png",level:0}},props:{black_market:{type:3,city:7,load:"brazil"},workshop:{type:2,city:7,load:"brazil"},warehouse:{type:3,city:8,load:"chicago"},speakeasy:{type:2,city:8,load:"chicago"},nightclub:{type:3,city:9,load:"london"},east_end_pub:{type:2,city:9,load:"london"}},reqs:{newyork:"remote/"+MW.getIntURL("LimitedTimeProperty","showProperties")+"&view_tab=build&page_click=viewV2",brazil:"remote/"+MW.getIntURL("propertyV2","createData")+"&city=7",chicago:"remote/"+MW.getIntURL("propertyV2","createData")+"&city=8",london:"remote/"+MW.getIntURL("propertyV2","createData")+"&city=9",ny_cash:"remote/"+MW.getIntURL("propertyV2","view",1)}};var o=function(){this.name="Unknow";this.level=0;this.attack="0";this.defense="0";this.bonus="";this.requirements=new Array;this.canBuy=function(){if(!Util.isString(this.buy)){return false}var e=true;Util.each(this.requirements,function(t,n){return e=!Util.isSet(n.have)||n.have>=n.need});return e};this.doublebuild=false;this.rpbuy="";this.propUrl;return this};var u=function(e,t,n){var r=new Array;this.id=e;this.icon=String(n).replace(/^https?/,global.location.protocol);this.name=t?t:"Unknow";this.level=0;this.is_ny=false;this.canUpgrade=false;this.length=function(){return r.length};this.get=function(e){return r[e]};this.add=function(e){r.push(e)};this.each=function(e){Util.each(r,e)};return this};var a=function(){var e=new Object;this.add=function(t){if(t&&t.id){e[t.id]=t}};this.getCollection=function(){return new Collection(e)};this.get=function(t){return e[t]};this.length=function(){return Util.length(e)};this.each=function(t,n){var r=e;if(n){r=new Array;Util.each(e,function(e,t){r.push(t)});r.sort(function(e,t){if(e.is_ny_cash&&t.is_ny_cash){return e.upgrade_cost-t.upgrade_cost}if(e.is_ny_cash||t.is_ny_cash){return e.is_ny_cash?-1:1}if((e.type||t.type)&&e.type!=t.type){return e.type==5?-1:1}var n=e.name.toLowerCase();var r=t.name.toLowerCase();return n<r?-1:n>r?1:0})}Util.each(r,t)};return this};var f={LoadedProps:function(e){function r(){return c$("div","class:separator_line").css({height:20})}loadingScreen();var t=Array();t=UserConfig.cmopt.get("opt_preLoadProps");var n=new PopupObject("propLoadlist_popup",{type:"main",title:"LOAD PROPERTIES",width:450,top:125,onclose:function(){abort_process=true},buttons:[{label:"Save!",addClass:"short white",onclick:function(){t=[];$(".lmtdProp.checked").each(function(){var e=$(this).attr("lmtdPropID");t.push(e)});UserConfig.cmopt.set("opt_loadProps",true);UserConfig.cmopt.set("opt_preLoadProps",t);UserConfig.cmopt.save();n.destroy();loadingScreen("Loading properties...");if(typeof e=="function")e&&e()}}]});var s=c$("div","class:info_body").appendTo(n.content);s.append(r);s.append(c$("div","title:If you select all properties it will take longer to process, select only the properties you wish to craft from ").text("Select properties you wish Craft Manager to load").css("height",35));var o=c$("div","id:props_show").appendTo(s);o.css({height:250,overflow:"auto"});Util.each(i.ny_props,function(e){var n=c$("div");var r="lmtdProp";if(Util.inArray(t,e)){r+=" checked"}var s="";if(Util.isSet(i.ny_props[e].level)){var u=parseInt(i.ny_props[e].level);if(u>=1){s=" Level "+i.ny_props[e].level}if(u<5){levelColor="red"}if(u>=5){levelColor="orange"}if(u>=12){levelColor="green"}}x$("lmtdProp_"+e,"","div").attr({title:"Enable/Disable this property for Crafting.",lmtdPropID:e}).addClass(r).css({"margin-left":100,width:200,height:30}).text(i.ny_props[e].name).append(c$("span","level").text(s).css({"font-size":11,color:levelColor})).appendTo(n);o.append(n)});o.append(c$("div","class:separator_line"));n.show()},Hide_DisabledProps:function(){var e=UserConfig.cmopt.get("opt_hidedisable");$("#craftmanager_popup").find(".checkbox").each(function(){var t=$(this).parent().parent();var n=$(t).attr("id");if(n&&n.length>0)if(/prop_id/.test(n)){if(!$(this).hasClass("checked")&&e){$(t).hide()}else{$(t).show()}}})},upgrade:function(){if($(this).hasClass("disabled")){return false}$(".property_inner a",l.content).addClass("disabled");var e=$(this);var t=e.attr("name");var s=n.get(t);var o,u,a;if(!s.upgrade){return}r.fromDomElements();r.save();if(s.is_ny){o=s.upgrade}else if(s.is_ny_cash){u=parseInt($("#upgrade_in_"+s.id,l.content).val());a=$("#level_"+s.id,l.content);o=s.upgrade}else{o="remote/";o+=MW.getIntURL("propertyV2","buy",Util.uSplit(s.upgrade).city);o+=s.upgrade}(function f(){w("Upgrading "+s.name+"...",true);httpAjaxRequest({url:o,liteLoad:1,success:function(e){if(l.is_closed===true||i.autocrafting===true){return}var t=x(e);if(s.is_ny_cash){if(/godfather/i.test(t)){Logger.debug("property id"+s.id);w("Not enough money in bank to upgrade");E(t,"info");return false}if(/bank/i.test(t)){o+="&fundtype=bank";w("Getting money from from bank",true);setTimeout(f,1e3);return false}if(/purchased/i.test(t)){s.level++}if(s.level<u){a.text(s.level);setTimeout(f,1e3)}else{w("Finished...");n.each(N);return false}}else{T(s.id,true)}w(t);E(t,"info")},error:function(e){w(e);E(e,"info")}})})();return false},build:function(){if($(this).hasClass("disabled")){return false}$(".property_inner a",l.content).addClass("disabled");var e=$(this).attr("name");var t=$("option:selected","#cmopt_build_"+e).val();var i=n.get(e).get(t);r.fromDomElements();r.save();b(e,i);return false},build_change:function(){var e=$(this).attr("name");if(e){N(e)}},upgrade_change:function(){var e=Util.doRgx(/upgrade_in_(.*)/,this.id).$1;if(e){N(e)}},upgrade_keyup:function(){var e=$(this);var t=e.attr("timeout");if(t){clearTimeout(t)}e.attr("timeout",setTimeout(function(){e.removeAttr("timeout");e.change()},600))},refresh:function(){global.props_loaded=false;i.restart=true;l.close();return false},autocraft:function(){global.props_loaded=false;var e=$(this);if(e.hasClass("disabled")){return false}r.fromDomElements();r.save();if(e.hasClass("green")){e.removeClass("green").addClass("red disabled");i.tab.showTab(3);i.autocrafting=true;y(false);E("AutoCrafting started.","info");g()}else{e.removeClass("red").addClass("green disabled");i.autocrafting=false;y(true);E("AutoCrafting stopped.","info");w("AutoCrafting stopped.")}setTimeout(function(){e.removeClass("disabled")},5e3);return false}};var l=new PopupObject("craftmanager_popup",{type:"main",title:"CRAFT MANAGER",width:700,background:'url("'+global.zGraphicsURL+'LimitedTimeProperty/generic.png") 0% 0% no-repeat',onclose:function(){i.autocrafting=false;Util.each(i.countdowns,function(e,t){t.clear()});httpAjaxStopRequests();r.fromDomElements();r.save();if(i.restart===true){CraftManager()}},buttons:[{label:"Setup Props!",addClass:"medium orange",onclick:function(){f.LoadedProps(f.refresh)}},{label:"Refresh",addClass:"medium white",onclick:f.refresh},{label:"AutoCraft",addClass:"medium green",onclick:f.autocraft}]});l.addBase64Style("I2NyYWZ0bWFuYWdlcl9wb3B1cCB1bCwgDQojY3JhZnRtYW5hZ2VyX3BvcHVwIGxpLA0KI2NyYWZ0bWFuYWdlcl9wb3B1cCBwIHsNCgltYXJnaW46ID"+"BweDsNCglwYWRkaW5nOiAwcHg7DQp9DQojY3JhZnRtYW5hZ2VyX3BvcHVwIC5ibGFja19ib3ggew0KCWZvbnQtd2VpZ2h0OiBib2xkOyANCgljb2xv"+"cjogcmdiKDIwOCwgMjA4LCAyMDgpOyANCglib3JkZXI6IDFweCBzb2xpZCByZ2IoMTUzLCAxNTMsIDE1Myk7IA0KCWJhY2tncm91bmQtY29sb3I6IG"+"JsYWNrOyANCglmb250LXNpemU6IDE0cHg7DQp9DQojY3JhZnRtYW5hZ2VyX3BvcHVwIC5wcm9wZXJ0eV9vdXRlciB7DQogICAgbWFyZ2luOiAycHg7"+"DQp9DQojY3JhZnRtYW5hZ2VyX3BvcHVwIC5wcm9wZXJ0eV9pbm5lciB7DQogICAgYm9yZGVyOiB0aGluIHNvbGlkICMzMzM7DQogICAgcGFkZGluZz"+"ogNXB4Ow0KfQ0KI2NyYWZ0bWFuYWdlcl9wb3B1cCAucHJvcGVydHlfaW5uZXIgLm55X3Byb3BlcnR5X2ljb24gew0KICAgIC8qYmFja2dyb3VuZC1w"+"b3NpdGlvbjogNXB4IC02MHB4OyovDQogICAgYmFja2dyb3VuZC1zaXplOiA3NXB4IGF1dG87DQogICAgLW1vei1iYWNrZ3JvdW5kLXNpemU6IDc1cH"+"ggYXV0bzsNCiAgICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0Ow0KfQ0KI2NyYWZ0bWFuYWdlcl9wb3B1cCAucHJvcGVydHlfaW5uZXIgLnBy"+"b3BlcnR5X2ljb24gew0KICAgIGJhY2tncm91bmQtcG9zaXRpb246IDVweCAtMTBweDsNCiAgICBiYWNrZ3JvdW5kLXNpemU6IDc1cHggNzVweDsNCi"+"AgICAtbW96LWJhY2tncm91bmQtc2l6ZTogNzVweCA3NXB4Ow0KICAgIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7DQp9DQojY3JhZnRtYW5h"+"Z2VyX3BvcHVwIC5wcm9wZXJ0eV9pbm5lciBkaXYuYm9keSB7DQogICAgbWluLWhlaWdodDogNjJweDsNCiAgICBwYWRkaW5nOiAwcHggODBweCAwcH"+"ggODBweDsNCiAgICB0ZXh0LWFsaWduOiBsZWZ0Ow0KICAgIG1heC1oZWlnaHQ6IDYycHg7DQp9DQojY3JhZnRtYW5hZ2VyX3BvcHVwIC5wcm9wZXJ0"+"eV9pbm5lciBkaXYuYm9keSBoNCB7DQogICAgZmxvYXQ6IGxlZnQ7DQogICAgbWFyZ2luOiAycHggMHB4IDJweCAxMHB4Ow0KfQ0KI2NyYWZ0bWFuYW"+"dlcl9wb3B1cCAucHJvcGVydHlfaW5uZXIgZGl2LmJvZHkgZGl2LmNkbl90aW1lciB7DQogICAgZmxvYXQ6IHJpZ2h0Ow0KICAgIG1hcmdpbjogMnB4"+"IDMwcHggMnB4IDBweDsNCiAgICBmb250LXNpemU6IDEycHg7DQp9DQojY3JhZnRtYW5hZ2VyX3BvcHVwIC5wcm9wZXJ0eV9pbm5lciBkaXYuYm9keS"+"BwIHsNCiAgICBtYXJnaW46IDBweDsNCiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgcGFkZGluZy10b3A6IDIzcHg7DQp9DQojY3JhZnRtYW5h"+"Z2VyX3BvcHVwIC5wcm9wZXJ0eV9pbm5lciBkaXYuYnV0dG9ucyB7DQogICAgcGFkZGluZy10b3A6IDJweDsNCiAgICBmbG9hdDogcmlnaHQ7DQp9DQ"+"ojY3JhZnRtYW5hZ2VyX3BvcHVwIC5wcm9wZXJ0eV9pbm5lciBkaXYuYnV0dG9ucyBhIHsNCiAgICB3aWR0aDogNzVweDsNCn0NCiNjcmFmdG1hbmFn"+"ZXJfcG9wdXAgI2l0ZW1fcmVxdWlyZW1lbnRzIHsNCiAgICBwYWRkaW5nLWxlZnQ6IDM2cHg7DQogICAgdGV4dC1hbGlnbjogbGVmdDsNCiAgICBmb2"+"50LXdlaWdodDogYm9sZDsNCn0NCiNjcmFmdG1hbmFnZXJfcG9wdXAgI2l0ZW1fcmVxdWlyZW1lbnRzIC5yZXFfZmllbGQgew0KICAgIGZsb2F0OiBs"+"ZWZ0Ow0KICAgIG1hcmdpbjogMHB4IDBweCAwcHggMTVweDsNCn0NCiNjcmFmdG1hbmFnZXJfcG9wdXAgI2l0ZW1fcmVxdWlyZW1lbnRzIC5yZXFfZm"+"llbGQgaW1nIHsNCiAgICB3aWR0aDogMThweDsNCiAgICBoZWlnaHQ6IDE4cHg7DQogICAgZmxvYXQ6IGxlZnQ7DQogICAgbWFyZ2luLXJpZ2h0OiAy"+"cHg7DQp9DQojY3JhZnRtYW5hZ2VyX3BvcHVwIHVsIHsNCglsaXN0LXN0eWxlLXR5cGU6IG5vbmU7DQoJb3ZlcmZsb3c6IGF1dG87DQoJdGV4dC1hbG"+"lnbjogbGVmdDsNCn0NCiNjcmFmdG1hbmFnZXJfcG9wdXAgI2NyYWZ0aW5nTG9nZ2VyIGxpIHsNCiAgICBwYWRkaW5nOiAzcHg7DQogICAgYm9yZGVy"+"LWJvdHRvbTogMnB4IHNvbGlkICMyMjI7DQogICAgbWFyZ2luOiAxcHg7DQogICAgd2lkdGg6IGF1dG8gIWltcG9ydGFudDsNCiAgICBiYWNrZ3JvdW"+"5kLXNpemU6IDE4cHggIWltcG9ydGFudDsNCiAgICAtbW96LWJhY2tncm91bmQtc2l6ZTogMThweCAhaW1wb3J0YW50Ow0KICAgIG1pbi1oZWlnaHQ6"+"IDE4cHggIWltcG9ydGFudDsNCiAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiA1cHggNTAlOw0KfQ0KI2NyYWZ0bWFuYWdlcl9wb3B1cCAjY3JhZnRpbm"+"dMb2dnZXIgbGkgcCB7DQogICAgZm9udC1zaXplOiAxMnB4Ow0KICAgIHBhZGRpbmctbGVmdDogMzBweDsNCn0NCiNjcmFmdG1hbmFnZXJfcG9wdXAg"+"I2NyYWZ0X21lc3NhZ2VzIHsNCiAgICBmbG9hdDogbGVmdDsNCiAgICB3aWR0aDogNTUwcHg7DQogICAgbWFyZ2luLXRvcDogMTBweDsNCiAgICB0ZX"+"h0LWFsaWduOiBsZWZ0Ow0KfQ0K");r.load(A)}function FightClubBuyer(){function o(n){var r=t.content;var i="<div>Cost: "+l(n.tokens,"tokens")+(n.favor>0?"  "+l(n.favor,"favor"):"")+"</div>"+'<div>Quantity: <input type="text" id="item_quantity"></div>';$("#item_stats_inner a",r).unbind();$("#item_stats_outer",r).stop(true).animate({scrollLeft:600},"fast","linear",function(){this.scrollLeft=0;$("#item_name",r).text(n.name);$("#item_stats_inner",r).css("background-image","url("+n.icon+")").html(i);$("#item_quantity",r).width(50).val(1);$("#item_stats_outer",r).animate({scrollLeft:300},"fast","linear",function(){var t=$("#item_quantity",r);b$("Add to queue","class:short green").click(function(){e.Queue.add(n,t.val())}).hide().appendTo("#item_stats_inner").fadeIn("normal");t.focus().select()})})}function u(n){function h(e){var t=Resources.getPicture("ajax_loader","span").css("padding-left",18);c.empty().append(t.text(e))}function p(t,n,r){(function s(){if(e.Abort===true)return;h(" Buying "+t.name+"...");httpAjaxRequest({url:t.buy,liteLoad:1,error:function(e){a(e);if(r<n){setTimeout(s,500)}else{i.MoveNext()}},success:function(o){var l=h$(o).find(".messages .message_body");r+=1;e.UserTokens-=t.tokens;e.UserFavor-=t.favor;a($("> span",l).text());$("#current_count",u).text(r);f();if(r<n){setTimeout(s,500)}else{i.MoveNext()}}})})()}var r=t.content;var i=new Collection(n);var s=e.Marketplace.get($("#fc_selectable .selected").attr("index"));var u=$("#item_stats_inner",r);var l=$("#item_stats_outer",r);var c=$("#item_name",r);l.get(0).scrollLeft=0;u.html('<div>Progress: <span id="current_count">0</span> of <span id="total_count">0</span></div>');i.onEnd(function(){$("#item_stats_outer").stop(true).animate({scrollLeft:600},"fast","linear",function(){this.scrollLeft=0;c.html("COMPLETED!");u.empty().addClass("completed").attr("style"," ").append(c$("div").text("Process was finished.")).append(b$("Go back","class:short orange").one("click",function(){$("#fc_selected").show();$("#fc_log, #disable_overlay").hide();u.removeClass("completed");o(s);f()}));l.animate({scrollLeft:300},"fast","linear")})});i.onMove(function(t,n,r){if(e.Abort===true)return;var i=r.item;l.stop(true).animate({scrollLeft:600},"fast","linear",function(){this.scrollLeft=0;u.css("background-image","url("+i.icon+")");$("#total_count",u).text(r.quantity);$("#current_count",u).text(0);l.animate({scrollLeft:300},"fast","linear",function(){p(i,r.quantity,0)})})});$("#fc_log textarea").val("");$("#fc_selected").hide();$("#fc_log, #disable_overlay").show();i.MoveFirst()}function a(e){var t=(new Date).toLocaleTimeString();var n=$("#fc_log textarea").get(0);n.value="["+t+"] "+e+"\n"+n.value}function f(){$("#start_button",t.content).toggleClass("disabled",$("#fc_selected li").length<1);$("#total_tokens",t.content).text(e.UserTokens);$("#total_favor",t.content).text(e.UserFavor);$("#to_spend .tokens",t.content).text(e.Queue.totalCost.tokens);$("#to_spend .favor",t.content).text(e.Queue.totalCost.favor)}function l(e,t){return'<span class="'+t+'">'+e+"</span>"}function c(n){var r=$("#fc_selectable",t.content);if(n&&r.attr("sortedby")==n){return}r.empty().attr("sortedby",n);e.Marketplace.each(function(e,t){if(t.id==0||t.id==1){return}var n=l(t.tokens,"tokens");if(t.attack>0||t.defense>0){n+=l(t.attack,"attack")+l(t.defense,"defense")}var i=c$("li","index:"+e).appendTo(r).append(c$("img").attr("src",t.icon)).append(c$("div","class:item_name").text(t.name)).append(c$("div","class:item_stats").html(n)).click(s.selectItem_click)},n)}function h(){var e=c$("div","id:main_wrapper").appendTo(t.content);c$("div","class:top_header").appendTo(e).append(c$("div").html('Tokens: <span id="total_tokens" class="tokens">0</span>')).append(c$("div").html('Favor: <span id="total_favor" class="favor">0</span>')).append(c$("div","id:to_spend").css("float","right").html("Need: "+l(0,"tokens")+" "+l(0,"favor")));c$("div","class:left_wrapper").appendTo(e).append(c$("div","id:disable_overlay")).append(c$("div","class:sort_list").append(s$("sort_list","Sorted By:",150,{click:s.sort_click}))).append(c$("ul","id:fc_selectable"));e=c$("div","class:right_wrapper").appendTo(e);c$("div","id:more_info").appendTo(e).append(c$("div","id:item_stats_outer").append(c$("div","id:item_name")).append(c$("div","id:item_stats_inner"))).append(c$("ul","id:fc_selected")).append(c$("div","id:fc_log").append(c$("textarea","readonly:readonly"))).append(c$("center").append(b$("START BUYING","class:short green disabled,id:start_button").click(s.start)));t.applyCustomClass();t.applyOptions({sort_list:{name:"Name",att:"Attack",def:"Defense",tokens:"Tokens"}})}function p(){function n(){showHelpPopup({icon:"error",message:"Cannot load the Marketplace Items."});t.destroy()}httpAjaxRequest({url:"remote/"+MW.getIntURL("marketplace","marketplace_category")+"&category=8",message:"Loading Marketplace...",liteLoad:1,error:n,success:function(s){var o=h$(s);e.Marketplace=new r;e.Queue=new i;e.UserFavor=global.User.reward_points();e.UserTokens=Util.parseNum(o.find(".marketplace_heading > div:has(img:regex(src,victory_icon))").text());o.find("#full_list > div:has(a:regex(href,buy))").each(e.Marketplace.add);if(e.Marketplace.length()>0){h();c("name");t.show();f()}else{n()}}})}var e={Abort:false,UserFavor:0,UserTokens:0,Queue:null,Marketplace:null};var t=new PopupObject("fightclubbuyer_popup",{type:"main",title:"FIGHTCLUB BUYER",width:650,top:20,onclose:function(){e.Abort=true;httpAjaxStopRequests()}});var n=function(e){this.icon=$("> div:eq(0) > div:eq(0) img",e).attr("src");this.name=Util.trim($("> div:eq(0) > div:eq(1)",e).text());this.attack=Util.parseNum($("> div:eq(0) > div:last > div:first",e).text());this.defense=Util.parseNum($("> div:eq(0) > div:last > div:last",e).text());this.tokens=Util.parseNum($("> div:eq(1) > div:first > div:eq(0)",e).text());this.favor=Util.parseNum($("> div:eq(1) > div:first > div:eq(1) span",e).text());this.buy=$("> div:eq(1) > div:first > a",e).attr("href");try{this.id=parseInt(Util.uSplit(this.buy).favor_id)}catch(t){}return this};var r=function(){var e=new Array;var t={name:function(e,t){var n=e.name.toLowerCase();var r=t.name.toLowerCase();return n<r?-1:n>r?1:0},att:function(e,t){return t.attack-e.attack},def:function(e,t){return t.defense-e.defense},tokens:function(e,n){if(n.tokens==e.tokens){return t.name(e,n)}return n.tokens-e.tokens}};this.get=function(t){return e[parseInt(t)]};this.getById=function(t){for(var n=0,r;r=e[n];n++){if(r.id==t){return r}}};this.add=function(t,r){if(r){e.push(new n(r))}};this.each=function(t,n){if(Util.isString(n)){this.sort(n)}Util.each(e,t)};this.length=function(){return e.length};this.sort=function(n){if(Util.isSet(t[n])){e.sort(t[n])}};return this};var i=function(){var t=this;var n=new Object;var r="#fc_selected";this.totalCost={tokens:0,favor:0};this.add=function(e,i){if(!Util.isSet(e))return;var s=e$("li#item_id"+e.id,r)||c$("li","id:item_id"+e.id).appendTo(r);i=n[e.id]=parseInt(n[e.id]||0)+parseInt(i);s.html('Buy <span class="quantity">'+i+"</span> "+e.name);s.append(c$("div","class:remove").click(function(){n[e.id]=0;$(this).unbind();$("li#item_id"+e.id,r).remove();t.updateCost();f();return false}));t.updateCost();f()};this.updateCost=function(){t.totalCost={tokens:0,favor:0};e.Marketplace.each(function(e,r){var i=n[r.id];if(i&&i>0){if(r.tokens>0){t.totalCost.tokens+=r.tokens*i}if(r.favor>0){t.totalCost.favor+=r.favor*i}}})};this.clear=function(){t.totalCost={tokens:0,favor:0};n=new Object;$(r).empty();f()};this.toArray=function(){var t=new Array;Util.each(n,function(n,r){if(r&&r>0){t.push({quantity:r,item:e.Marketplace.getById(n)})}});return t};return this};var s={start:function(){function r(e){showHelpPopup({icon:"info",title:"Fight Club Buyer",message:e+"<br>Remove some items and try again."})}var t=$(this);if(t.hasClass("disabled")){return false}var n=e.Queue.toArray();if(n.length>0){if(e.Queue.totalCost.favor>e.UserFavor){r("You've not enough Reward Points.")}else if(e.Queue.totalCost.tokens>e.UserTokens){r("You've not enough Victory Coins.")}else{e.Queue.clear();u(n)}}return false},sort_click:function(){c(this.value)},selectItem_click:function(){if($(this).hasClass("selected")){return false}$("#fc_selectable li",t.content).removeClass("selected");$(this).addClass("selected");o(e.Marketplace.get($(this).attr("index")));return false}};t.addBase64Style("I2ZpZ2h0Y2x1YmJ1eWVyX3BvcHVwIHNwYW4udG9rZW5zIHsNCiAgICBiYWNrZ3JvdW5kOiB1cmwoIiR7YmFzZV91cmx9dmljdG9y"+"eV9pY29uLmdpZiIpIDAgNTAlIG5vLXJlcGVhdDsNCiAgICBwYWRkaW5nLWxlZnQ6IDE2cHg7DQogICAgYmFja2dyb3VuZC1zaXpl"+"OiAxOHB4ICFpbXBvcnRhbnQ7DQogICAgLW1vei1iYWNrZ3JvdW5kLXNpemU6IDE4cHggIWltcG9ydGFudDsNCn0NCiNmaWdodGNs"+"dWJidXllcl9wb3B1cCBzcGFuLmZhdm9yIHsNCiAgICBiYWNrZ3JvdW5kOiB1cmwoIiR7YmFzZV91cmx9L3YzL2ljb24tZ2YtY29p"+"bi5naWYiKSAwIDUwJSBuby1yZXBlYXQ7DQogICAgcGFkZGluZy1sZWZ0OiAxNnB4Ow0KICAgIGJhY2tncm91bmQtc2l6ZTogMTRw"+"eCAhaW1wb3J0YW50Ow0KICAgIC1tb3otYmFja2dyb3VuZC1zaXplOiAxNHB4ICFpbXBvcnRhbnQ7DQp9DQojZmlnaHRjbHViYnV5"+"ZXJfcG9wdXAgI21haW5fd3JhcHBlciB7DQogICAgcGFkZGluZzogMnB4Ow0KICAgIG1hcmdpbjogNXB4Ow0KICAgIGJvcmRlcjog"+"c29saWQgMXB4ICM2NjY7DQogICAgaGVpZ2h0OiA0NDBweDsNCn0NCiNmaWdodGNsdWJidXllcl9wb3B1cCB1bCB7DQogICAgZm9u"+"dC1zaXplOiAxMnB4Ow0KICAgIG1hcmdpbjogMHB4Ow0KICAgIGxpc3Qtc3R5bGUtdHlwZTogbm9uZTsNCiAgICBvdmVyZmxvdzog"+"YXV0bzsNCiAgICB0ZXh0LWFsaWduOiBsZWZ0Ow0KICAgIHBhZGRpbmc6IDBweCA1cHg7DQp9DQojZmlnaHRjbHViYnV5ZXJfcG9w"+"dXAgdWwjZmNfc2VsZWN0YWJsZSB7DQogICAgaGVpZ2h0OiAzODlweDsNCn0NCiNmaWdodGNsdWJidXllcl9wb3B1cCAjZmNfc2Vs"+"ZWN0ZWQsDQojZmlnaHRjbHViYnV5ZXJfcG9wdXAgI2ZjX2xvZyB7DQogICAgaGVpZ2h0OiAyNDhweDsNCiAgICBib3JkZXItdG9w"+"OiBkb3R0ZWQgMXB4ICM2NjY7DQogICAgYm9yZGVyLWJvdHRvbTogZG90dGVkIDFweCAjNjY2Ow0KICAgIHBhZGRpbmctdG9wOiAx"+"cHg7DQp9DQojZmlnaHRjbHViYnV5ZXJfcG9wdXAgI2ZjX2xvZyB7DQogICAgZGlzcGxheTogbm9uZTsNCn0NCiNmaWdodGNsdWJi"+"dXllcl9wb3B1cCAjZmNfbG9nIHRleHRhcmVhIHsNCiAgICB3aWR0aDogOTAlOw0KICAgIGhlaWdodDogMjAwcHg7DQogICAgbWFy"+"Z2luLXRvcDogNXB4Ow0KICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50Ow0KfQ0KI2ZpZ2h0Y2x1YmJ1eWVyX3BvcHVw"+"IHVsI2ZjX3NlbGVjdGFibGUgbGkgew0KICAgIHBhZGRpbmc6IDNweDsNCiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7DQogICAg"+"Ym9yZGVyOiAxcHggc29saWQgIzIyMjsNCiAgICBtYXJnaW46IDFweDsNCiAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgd2lkdGg6"+"IGF1dG8gIWltcG9ydGFudDsNCiAgICBtaW4taGVpZ2h0OiAxOHB4ICFpbXBvcnRhbnQ7DQp9DQojZmlnaHRjbHViYnV5ZXJfcG9w"+"dXAgI2ZjX3NlbGVjdGFibGUgbGk6aG92ZXIgew0KICAgIGJhY2tncm91bmQtY29sb3I6ICMyMjI7DQp9DQojZmlnaHRjbHViYnV5"+"ZXJfcG9wdXAgI2ZjX3NlbGVjdGFibGUgbGkuc2VsZWN0ZWQgew0KICAgIGJvcmRlcjogMXB4IHNvbGlkIHllbGxvdzsNCn0NCiNm"+"aWdodGNsdWJidXllcl9wb3B1cCAjZmNfc2VsZWN0ZWQgbGkgew0KICAgIHBhZGRpbmc6IDNweDsNCiAgICB0ZXh0LWRlY29yYXRp"+"b246IG5vbmU7DQogICAgYm9yZGVyOiAxcHggc29saWQgIzIyMjsNCn0NCiNmaWdodGNsdWJidXllcl9wb3B1cCAjZmNfc2VsZWN0"+"ZWQgbGkgZGl2LnJlbW92ZSB7DQogICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCR7YmFzZV91cmx9cmVxdWVzdHMvY3Jvc3MucG5n"+"KTsNCiAgICBmbG9hdDogcmlnaHQ7DQogICAgd2lkdGg6IDE2cHg7DQogICAgaGVpZ2h0OiAxNnB4Ow0KICAgIGN1cnNvcjogcG9p"+"bnRlcjsNCn0NCiNmaWdodGNsdWJidXllcl9wb3B1cCAjZmNfc2VsZWN0ZWQgbGkgc3Bhbi5xdWFudGl0eSB7DQogICAgY29sb3I6"+"IGdvbGQ7DQp9DQojZmlnaHRjbHViYnV5ZXJfcG9wdXAgdWwgbGkgaW1nIHsNCiAgICBmbG9hdDogbGVmdDsNCiAgICB3aWR0aDog"+"MThweDsNCiAgICBoZWlnaHQ6IDE4cHg7DQp9DQojZmlnaHRjbHViYnV5ZXJfcG9wdXAgdWwgbGkgZGl2Lml0ZW1fbmFtZSB7DQog"+"ICAgbWFyZ2luOiAwcHggMHB4IDBweCA1cHg7DQogICAgZmxvYXQ6IGxlZnQ7DQogICAgb3ZlcmZsb3c6IGhpZGRlbjsNCiAgICBt"+"YXgtaGVpZ2h0OiAyMHB4Ow0KICAgIG1heC13aWR0aDogMjYycHg7DQogICAgaGVpZ2h0OiAyMHB4Ow0KfQ0KI2ZpZ2h0Y2x1YmJ1"+"eWVyX3BvcHVwIHVsIGxpIGRpdi5pdGVtX3N0YXRzIHsNCiAgICBmbG9hdDogcmlnaHQ7DQogICAgbGluZS1oZWlnaHQ6IDE4cHg7"+"DQogICAgZm9udC1zaXplOiAxMXB4Ow0KfQ0KI2ZpZ2h0Y2x1YmJ1eWVyX3BvcHVwIHVsIGxpIGRpdi5pdGVtX3N0YXRzIHNwYW4g"+"ew0KICAgIG1hcmdpbi1yaWdodDogNXB4Ow0KICAgIHBhZGRpbmctbGVmdDogMTZweDsNCn0NCiNmaWdodGNsdWJidXllcl9wb3B1"+"cCBkaXYubGVmdF93cmFwcGVyIHsNCiAgICBmbG9hdDogbGVmdDsNCiAgICB3aWR0aDogMzIwcHg7DQogICAgYm9yZGVyLXJpZ2h0"+"OiBzb2xpZCAxcHggIzY2NjsNCn0NCiNmaWdodGNsdWJidXllcl9wb3B1cCBkaXYubGVmdF93cmFwcGVyICNkaXNhYmxlX292ZXJs"+"YXkgew0KICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICB6LWluZGV4OiAxOw0KICAgIGJhY2tncm91bmQtY29sb3I6IGJsYWNr"+"Ow0KICAgIG9wYWNpdHk6IDAuNDsNCiAgICB3aWR0aDogMzI1cHg7DQogICAgaGVpZ2h0OiA0MjFweDsNCiAgICBkaXNwbGF5OiBu"+"b25lOw0KfQ0KI2ZpZ2h0Y2x1YmJ1eWVyX3BvcHVwIGRpdi5yaWdodF93cmFwcGVyIHsNCiAgICBmbG9hdDogcmlnaHQ7DQogICAg"+"d2lkdGg6IDMwMHB4Ow0KICAgIG1hcmdpbjogMnB4IDZweCAwcHggMnB4Ow0KfQ0KI2ZpZ2h0Y2x1YmJ1eWVyX3BvcHVwIGRpdi5z"+"b3J0X2xpc3Qgew0KICAgIGJvcmRlci1ib3R0b206IDFweCBkb3R0ZWQgIzQ0NDsNCiAgICBwYWRkaW5nOiA1cHggMHB4Ow0KfQ0K"+"I2ZpZ2h0Y2x1YmJ1eWVyX3BvcHVwIGRpdi5uZXdfbGluZSB7DQogICAgY2xlYXI6IGJvdGg7DQogICAgbWFyZ2luLXRvcDogNXB4"+"DQp9DQojZmlnaHRjbHViYnV5ZXJfcG9wdXAgZGl2LnJpZ2h0X3dyYXBwZXIgI21vcmVfaW5mbyB7DQogICAgY2xlYXI6IGJvdGg7"+"DQogICAgaGVpZ2h0OiA0MTBweDsNCiAgICBib3JkZXI6IGRvdHRlZCAxcHggIzY2NjsNCn0NCiNmaWdodGNsdWJidXllcl9wb3B1"+"cCBkaXYucmlnaHRfd3JhcHBlciAjbW9yZV9pbmZvIGNlbnRlciB7DQogICAgcGFkZGluZy10b3A6IDRweDsNCiAgICB3aWR0aDog"+"Mjk4cHg7DQp9DQojZmlnaHRjbHViYnV5ZXJfcG9wdXAgZGl2LnJpZ2h0X3dyYXBwZXIgI21vcmVfaW5mbyAjaXRlbV9zdGF0c19v"+"dXRlciB7DQogICAgd2lkdGg6IDI5OHB4Ow0KICAgIG92ZXJmbG93OiBoaWRkZW47DQp9DQojZmlnaHRjbHViYnV5ZXJfcG9wdXAg"+"ZGl2LnJpZ2h0X3dyYXBwZXIgI21vcmVfaW5mbyAjaXRlbV9zdGF0c19vdXRlciAjaXRlbV9uYW1lIHsNCiAgICBoZWlnaHQ6IDIw"+"cHg7DQogICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICMyMjI7DQogICAgcGFkZGluZzogMHB4IDMwMHB4Ow0KICAgIGxpbmUt"+"aGVpZ2h0OiAyMnB4Ow0KICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7DQogICAgcGFkZGluZzogMHB4IDMwMHB4Ow0KICAgIHdpZHRo"+"OiAzMDBweDsNCiAgICBmb250LXdlaWdodDogYm9sZDsNCn0NCiNmaWdodGNsdWJidXllcl9wb3B1cCBkaXYucmlnaHRfd3JhcHBl"+"ciAjbW9yZV9pbmZvICNpdGVtX3N0YXRzX291dGVyICNpdGVtX3N0YXRzX2lubmVyIHsNCiAgICB0ZXh0LWFsaWduOiBsZWZ0Ow0K"+"ICAgIGhlaWdodDogOTBweDsNCiAgICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0Ow0KICAgIGJhY2tncm91bmQtcG9zaXRp"+"b246IDMxMHB4IDUwJTsNCiAgICBwYWRkaW5nOiAxMHB4IDMwMHB4IDBweCA0MDBweDsNCiAgICB3aGl0ZS1zcGFjZTogbm93cmFw"+"Ow0KICAgIHdpZHRoOiAyMTBweDsNCn0NCiNmaWdodGNsdWJidXllcl9wb3B1cCBkaXYucmlnaHRfd3JhcHBlciAjbW9yZV9pbmZv"+"ICNpdGVtX3N0YXRzX291dGVyICNpdGVtX3N0YXRzX2lubmVyLmNvbXBsZXRlZCB7DQogICAgcGFkZGluZy1sZWZ0OiAzNjBweDsN"+"CiAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJHtiYXNlX3VybH0vaW1wdWxzZV9hcnJvd19hdHRhY2tfMDEucG5nKTsNCiAgICBi"+"YWNrZ3JvdW5kLXBvc2l0aW9uOiAzMTBweCA1MCU7DQp9DQojZmlnaHRjbHViYnV5ZXJfcG9wdXAgLnRvcF9oZWFkZXIgew0KICAg"+"IGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjMzMzOw0KICAgIHRleHQtYWxpZ246IGxlZnQ7DQogICAgaGVpZ2h0OiAyMHB4Ow0K"+"ICAgIG1heC1oZWlnaHQ6IDIwcHg7DQogICAgcGFkZGluZy1yaWdodDogMjBweDsNCiAgICBvdmVyZmxvdzogaGlkZGVuOw0KICAg"+"IHdoaXRlLXNwYWNlOiBub3dyYXA7DQp9DQojZmlnaHRjbHViYnV5ZXJfcG9wdXAgLnRvcF9oZWFkZXIgZGl2IHsNCiAgICBmbG9h"+"dDogbGVmdDsNCiAgICBtYXJnaW4tbGVmdDogMjBweA0KfQ0KI2ZpZ2h0Y2x1YmJ1eWVyX3BvcHVwIC50b3BfaGVhZGVyIHNwYW4g"+"ew0KICAgIG1hcmdpbi1sZWZ0OiA1cHgNCn0=",{base_url:global.zGraphicsURL});p()}function FreeGiftsCenter(){function f(e){if(!Util.isSet(t.FriendList["all"])){return}if(Util.isSet(t.FriendList[e])&&Util.isSet(t.FriendList[e].uids)){var n=$("#send_body #snd_users");Util.each(t.FriendList[e].uids,function(e,r){try{r=parseInt(r);if(!isNaN(r)&&Util.isSet(t.FriendList["all"][r])){var i=e$("option[value="+r+"]",n);if(!i){i=c$("option","value:"+r).appendTo(n)}i.text(t.FriendList["all"][r])}}catch(s){}});w("Friends Loaded.")}}function l(n){var r=t.FriendList["active"]={name:"Most Active Friends",uids:new Array};Util.each(e.activeFriends,function(t,n){if(n>e.activeFRMin){r.uids.push(t)}});Util.each(e.customLists,function(e,n){t.FriendList[e]={name:e.replace(/_/g," "),uids:n}});Util.each(t.FriendList,function(e,t){if(e==="all"){return true}try{var n=$("option[value="+e+"]","#friendlists");if(n.length<1){$("#friendlists").append(c$("option","value:"+e).text(t.name))}else{n.text(t.name)}}catch(r){}})}function c(e){facebook.getAppFriends(function(n){var r=t.FriendList["all"]=new Object;if(!n.error){Util.each(n,function(e,t){r[t.uid]=t.name});e&&e()}})}function h(){$("#snd_messages").empty().append(Resources.getPicture("ajax_loader","span").css("padding-left",18).text("Loading Friend Lists..."));var e="free_gift_id=100&free_gift_cat=1&ajax=1&fbml_iframe=1";httpAjaxRequest({url:"remote/"+MW.getIntURL("requests","friend_selector")+e,liteLoad:1,success:function(e){var r=h$(e);var i=Util.doRgx(/MW.Request.setTabFriendLists\(([^\)]+)/,e).$1;if(i){i=Util.parseJSON(i);Util.each(i,function(e,n){var i=String(r.find("#mfs_tab_"+e).text()||e);t.FriendList[e]={name:i,uids:n}});w("All friendlists loaded.");if($(".tab_bar li.active",n.content).attr("tb")==="send"){l()}}}})}function p(e){var t={to:new Array};if(e&&e.indexOf("sendGiftbackRequest")>-1){try{var n=Util.doRgx(/sendGiftbackRequest\((.*?)\);/i,e).$1;if(n){n=Util.parseJSON('{"a":['+n+"]}").a;t.to.push(String(n[0]));t.message=n[1];t.data=n[2];t.title=n[3];return t}}catch(r){Logger.error("getSendBackRequest: "+r.message)}}return}function d(t,n,r,i){var s=false,o,u,a=false;if(t.send&&t.send.to){m(t.send.to[0])}httpAjaxRequest({url:t.url,liteLoad:1,success:function(f){s=Util.isBoolean(f.is_success)?f.is_success:parseInt(f.is_success)===1;if(s){o=f.item_image_path;u=f.success_message;if(n===true&&t.send&&t.send.to){a=true;x(t.send,i,e.sendInternally)}}else{u=f.fail_message?Util.setColor(f.fail_message,"red"):Util.setColor("There was an error with this request.","red")}if(s&&t.type=="gift"){e.acceptGiftCount+=1;Logger.debug("Gift count increased by 1 ("+e.acceptGiftCount+")")}r({success:s,image:o,message:u,isBackSent:a})},error:function(e){r({success:false,message:e})}})}function v(e,n,r){var i=e.attr("iid");var s=parseInt(e.attr("count"))-t.Collector.amountOf(i);n=Math.min(s,n||s);t.Collector.add({iid:i,name:$(".gift_name",e).text(),icon:$("img",e).attr("src"),action:r||$("#mass_body #mss_action").val(),amount:n});return s-n}function m(t){if(!isNaN(t=parseInt(t))){if(Util.isNumber(e.activeFriends[t])){e.activeFriends[t]++}else{e.activeFriends[t]=1}e.save()}}function g(t){var n=new RegExp(e.excludedPattern,"i");if(e.excludedPattern){return n.test(t)}else{return false}}function y(n){if(Util.isString(e.dailyLimit)&&e.dailyLimit.length>3){if((new RegExp(e.dailyLimit,"i")).test(n)){e.set("acceptGiftCount",t.AcceptGiftLimit);e.save();return true}else{return false}}}function b(){var r=Math.max(t.AcceptGiftLimit-e.acceptGiftCount,0);$("#mss_info",n.content).html("You can collect about "+r+" more gifts today.")}function w(t){if(t){t+="<br>"}else{t=""}t+="You've sent "+e.sendGiftCount+" gifts today.";$("#snd_messages",n.content).html(t)}function E(){function c(e){function n(t,n,r){if(t&&n&&r){p(true);e({message:n,data:t,title:r})}else{p(false);d("Error loading the gift data.","error");e()}}if(r||t.Aborted){v();return}d('Loading and preparing "'+f.name+'" to be send.',"load");if(f.request_id){MW.getCityRequest(f.request_id,n)}else{MW.getGiftRequest(a,f.item_cat,n,f.params)}}function h(){function i(n){if(r||t.Aborted){v();return}if(!Util.isSet(n)){o();return}n.to=s.shift();d('Sending "'+f.name+'" to '+n.to.length+" friend(s).","load");x(n,function(e,t){p(t);d(e);if(t===true){o()}else{if(s.length>0){showAskPopup("Error Sending Requests","Do you want to continue?",o,v)}else{v()}}},e.sendInternally)}function o(){if(r||t.Aborted||s.length<1){v()}else if(u){u.MoveNext();setTimeout(function(){c(i)},50)}else{c(i)}}var n=s.length;$("#snd_messages").empty();d(n+" Requests To Send. "+l+" friend(s) per request.");o()}function p(e){var t=e!==true?"mwa_res_ajax_error":"mwa_res_ok_icon";$("#snd_messages div[name=load]").attr("name","ok").removeClass().addClass(t)}function d(e,t){var n=Resources.getPicture("info_icon");switch(t){case"error":n=Resources.getPicture("ajax_error");break;case"load":n=Resources.getPicture("ajax_loader");break}n.prependTo("#snd_messages").attr("name",t?t:"info").append(c$("span").html(e))}function v(){d("Process Finished.");$("#send_body .start_ctrl a, #friendlists, .snd_selectable, .tab_bar",n.content).removeClass("disabled")}var r=false;var i=new Array;var s=new Array;var o=$(".snd_selectable li:has(.checked)");var u,a,f,l=50;$("#send_body .start_ctrl a, #friendlists, .snd_selectable, .tab_bar",n.content).addClass("disabled");$("#snd_messages").empty();if(o.length<1){d("Check a gift to send.");v();return}$("#send_body #snd_users option").each(function(e,t){i.push(parseInt(t.value))});if(i.length<1){d("Select which friends you want to send to.");v();return}if(o.length===1){f=UserFreeGifts.get(a=o.attr("gid"))}else{u=new Array;o.each(function(e,t){u.push($(t).attr("gid"))});l=Math.min(50,parseInt(i.length/u.length));u=new Collection(u);u.onEnd(u.MoveFirst);u.onMove(function(e,t,n){f=UserFreeGifts.get(a=n)});u.MoveFirst()}while(i.length>0){s.push(i.splice(0,l))}h()}function S(){function l(){$(this).unbind().remove();i=true;m();return false}function c(e,t,n){var r=n.image||global.zGraphicsURL+"v3/icon_gift_27x28_01.png";var i=e+" from "+Util.setAnchor(t.profile,t.name);var s=LucifersMOD.returnFBID(t.icon);var o=Util.isString(s)?c$("img").attr("src","https://graph.facebook.com/"+s+"/picture"):c$("span");c$("li").prependTo("#mss_successlog").append(c$("h4").html(i)).append(o).append(c$("img").attr("src",r)).append(c$("p").html(n.message))}function h(e,t,n){var r=t==="error"?Resources.getPicture("ajax_error","li"):Resources.getPicture("info_icon","li");var i=Util.isSet(n)?Util.setAnchor(n.profile,n.name)+": ":"";if(t!=="error"){e=Util.setColor(e,"#E1E1E1")}else{e=Util.setColor(e,"red")}r.prependTo("#mss_messagelog").append(c$("p").html(i+e))}function p(e){$("#mss_reqname",n.content).html(e)}function v(e,t){$("#mss_messages").toggleClass("mwa_res_ajax_loader",t===true);$("#mss_message",n.content).html(e)}function m(){e.save();o.clear();p("Finished");v(r+" gifts collected.");h("Process finished at "+(new Date).toUTCString(),"info");$("#mss_messages a").remove();t.Collector.clear();b$("Return","class:short green").css("float","right").appendTo("#mss_messages").click(a.finishCollector_click)}var r=0;var i=false;var s,o=new Collection(t.Collector.all());var f=t.Request.toGroup("gift");o.onEnd(m);o.onMove(function(n,a,l){function b(n,a,f){if(i||t.Aborted){return}if(!Util.isSet(f)){s.MoveNext();return}var p=l.name+" ("+(n+1)+" of "+l.amount+")";if(l.action==="ignore"){v("Ignore to "+f.name,true);httpAjaxRequest({url:f.rem,liteLoad:1,success:function(e){t.Request.remove(f.id);h("Request ignored by the user.","info",f);s.MoveNext()}});return}if(l.action==="thank"){v("Thank to "+f.name,true);x(f.send,function(e){t.Request.remove(f.id);h("Thank only: "+e,"info",f);s.MoveNext()},true);return}if(e.ignoreLimits!==true&&u.is(l.iid)){o.MoveNext();return}if(l.action==="accept"){v("Accept and Thank to "+f.name,true)}else{v("Accept to "+f.name,true)}d(f,e.sendBack&&l.action==="accept",function(e){t.Request.remove(f.id);if(i||t.Aborted){return}if(e.success){r+=1;c(p,f,e);if(g(e.message)&&!u.is(l.iid)){u.add(l.iid);h('Limit reached. "'+l.name+'" added to exclude list.')}}else{h(e.message,"error",f)}if(y(e.message)){h("Daily Limit reached, stopped.","info");i=true;m();return}if(e.isBackSent!==true){s.MoveNext()}},function(e){h("Accept and Thank: "+e,"info",f);s.MoveNext()})}if(l.iid){e.useractions[l.iid]=l.action}if(i||t.Aborted){}else if(l.amount<1||!Util.isSet(f[l.iid])){o.MoveNext()}else if(e.ignoreLimits!==true&&u.is(l.iid)){h('"'+l.name+'" skipped. Limits are reached.');o.MoveNext()}else{f[l.iid].sort(function(e,t){var n=e.send&&e.send.to;var r=t.send&&t.send.to;if(l.action==="ignore"||l.action==="okonly"){return n&&!r?1:!n&&r?-1:0}else{return n&&!r?-1:!n&&r?1:0}});p(Util.setColor(l.name,"green")+":");s=new Collection(f[l.iid].splice(0,l.amount));s.onEnd(o.MoveNext);s.onMove(b);s.MoveFirst()}});$(".tab_bar",n.content).addClass("disabled");$("#mss_successlog, #mss_messagelog",n.content).empty();$("#mss_messages a",n.content).remove();$("#mss_reqname, #mss_message",n.content).empty();$("#mss_info").hide();$("#mss_messages").show();b$("STOP","class:short red").css("float","right").appendTo("#mss_messages").click(l);h("Process started at "+(new Date).toUTCString(),"info");o.MoveFirst()}function x(n,r,i){function o(){r(Util.setColor("Can't sent to this user(s) again.","yellow"),false)}var s=new Array;if(n&&Util.isArray(n.to)){if(n.to.length===1){if(t.ThankSent[n.to[0]]===true){o();return}}else{Util.each(n.to,function(e,n){if(t.ThankSent[n]!==true){s.push(n)}});if((n.to=s).length<1){o();return}}}else{o();return}facebook.sendRequest(n,function(i){Util.each(n.to,function(e,n){t.ThankSent[n]=true});if(i===false){r(Util.setColor("Error sending request.","red"),false)}else{e.sendGiftCount+=Util.parseNum(h$(i).text());Logger.debug("Thanks Count increased to "+e.sendGiftCount);r(i,true)}},i)}function N(e){httpAjaxRequest({url:"remote/"+MW.getIntURL("messageCenter","view"),success:function(o){var u=h$(o);var a=u.find("script:regex(ZmcController)");var f=u.find("ul#zmc_message_list_ul li");n.content.append(a);a=unsafeWindow.ZmcController;t.Request=new s;if(Util.isSet(a.allEvents)){Util.each(a.allEvents,function(e,n){t.Request.add(new r(n))})}else{f.each(function(e,n){t.Request.add(new i(n))})}e&&e(true)},error:function(t){if(T>UserConfig.main.errorout){e&&e(false);showBadResponse(t);return}else{T++;setTimeout(function(){N()},333)}}})}function C(e,t,r,i){$("div[id*=_"+t+"]",n.content).hide();var s=$("#"+e+"_"+t,n.content);if(r){s.fadeIn(r,i)}else{s.show()}}function k(){function r(e){var t=c$("div","class:frame_box").appendTo(e);c$("div").css("float","left").appendTo(t).append(t$("filter_text","Search:",150)).append(s$("category_select","Category:",150));c$("div").css("float","right").appendTo(t).append(b$("Clear all","class:short white").click(a.clear_all)).append(b$("Refresh","class:short orange").css("margin-left",5).click(a.refresh_click));c$("ul","id:reqslist,class:req_box").height(560).appendTo(e)}function i(e){var t=c$("div","class:frame_box").appendTo(e);c$("div","id:mss_info").css("min-height",40).appendTo(t);c$("div","id:mss_messages").append(c$("span","id:mss_reqname")).append(c$("span","id:mss_message").css("margin-left",5)).appendTo(t);t=c$("div","id:setup_mass,class:frame_box").appendTo(e).css("height",520);c$("div","class:li_wrapper").appendTo(t).append(c$("div","class:top_ctrl").css("height",60).append(s$("mss_action","Action:",260)).append(c$("div").css({clear:"both","margin-top":4})).append(n$("mss_amount","Amount:",50)).append(b$("Selected","class:short green").click(a.addGift_click)).append(b$("All","class:short white").click(a.addAllGifts_click)).append(b$("All (S)","class:short white,mode:1").click(a.addAllGifts_click))).append(c$("ul","class:mss_selectable").css("height",430));c$("div","class:li_wrapper").appendTo(t).append(c$("ul","class:mss_selected")).append(c$("center","class:start_ctrl").append(b$("CLEAR","class:medium white").click(a.clearCollector_click)).append(b$("START!","class:medium green").click(a.startCollector_click)));e=c$("div","logger_mass").appendTo(e);e.append(c$("ul","mss_messagelog").height(250));e.append(c$("ul","mss_successlog").height(300))}function s(e){var t=c$("div","class:frame_box").appendTo(e);c$("div","id:snd_messages").appendTo(t);t=c$("div","class:frame_box").appendTo(e).css("height",500);c$("div","class:li_wrapper").appendTo(t).append(c$("ul","class:snd_selectable").css("height",484));c$("div","class:li_wrapper").appendTo(t).append(c$("div","class:top_ctrl").appendTo(t).append(s$("friendlists","List:",200)).append(c$("a","id:remove_list_btn").text("Remove").click(a.removeList_click))).append(c$("select","multiple:multiple,id:snd_users").css({height:406,width:"100%"})).append(c$("center","class:start_ctrl").append(b$("CLEAR","class:medium white").click(a.clearFriends_click)).append(b$("EDIT","class:medium orange").click(a.editFriends_click)).append(b$("SAVE","class:medium orange,id:save_friends_btn").click(a.saveFriends_click)).append(b$("SEND","class:medium green").click(a.startSending_click)));$("#friendlists").change(a.friendLists_change)}function o(e){c$("div","class:frame_box").append(x$("fgopt_sendback",'Send requests back (check "Don\'t ask again..." on confirmation box to make it faster).')).append(c$("div").css({clear:"both","margin-bottom":5})).append(x$("fgopt_sendinternally","Send requests internally only (don't send facebook request).")).append(c$("div").css({clear:"both","margin-bottom":5})).append(x$("fgopt_ignorelimits","Continue collecting when limits are reached.")).appendTo(e);c$("div","class:frame_box").append(c$("h4").css("margin",0).text("Daily Limit:")).append(c$("a","href:#").text("Reset internal count.").click(a.resetDailyLimit_click)).append(c$("div").css({clear:"both","margin-bottom":5})).append(c$("input:text","id:fgopt_dailylimit").width("100%")).appendTo(e);c$("div","class:frame_box").append(c$("h4").css("margin",0).text("Excluded Gifts:")).append(c$("a","href:#").text("Reset all gifts in excluded list.").click(a.reset_click)).append(c$("div").css({clear:"both","margin-bottom":5})).append(c$("input:text","id:fgopt_excludedpattern").width("100%")).appendTo(e);c$("div","class:frame_box").append(c$("h4").css("margin",0).text("Active Friends:")).append(n$("fgopt_activefrmin","Active Friends are those who send me",50)).append(c$("span").text("requests or more.  ")).append(c$("div").html("Total Active Friends "+Util.setColor(0,"yellow","total_activefriends"))).append(c$("div").html('Only those friends which you can send requests will be added when you select "Active Friends" list.')).append(c$("div").css({clear:"both","margin-bottom":5})).append(c$("a","href:#").text("Reset active friends list.").click(a.resetActiveFriends_click)).appendTo(e)}function u(){var e={all:"All",search:"Search"};Util.each(t.Events,function(t,n){if(n!=="none"){e[n]=Util.formatText(n.replace(/_/g," "))}});return e}n.content.height(680);var e=c$("ul","class:tab_bar").appendTo(n.content);c$("li","tb:reqs,class:request active").appendTo(e).click(a.tab_click).append(c$("a","href:#").html("<span><em>Requests</em></span>"));c$("li","tb:mass,class:collector").appendTo(e).click(a.tab_click).append(c$("a","href:#").html("<span><em>Collector</em></span>"));c$("li","tb:send,class:sender").appendTo(e).click(a.tab_click).append(c$("a","href:#").html("<span><em>Sender</em></span>"));c$("li","tb:cnfg").appendTo(e).click(a.tab_click).append(c$("a","href:#").html("<span><em>Configuration</em></span>"));c$("div","ajaxloader_body").css("padding-top",40).height(600).appendTo(n.content).append(c$("img").attr("src",global.zGraphicsURL+"socialmissions/ajax-loader.gif"));r(c$("div","reqs_body").height(640).appendTo(n.content));i(c$("div","mass_body").height(640).appendTo(n.content));s(c$("div","send_body").height(640).appendTo(n.content));o(c$("div","cnfg_body").height(640).appendTo(n.content));$("#filter_text",n.content).keypress(a.filter_change).change(a.filter_change);$("#category_select",n.content).change(a.category_change);UserFreeGifts.each(function(e,t){c$("li","gid:"+e).appendTo(".snd_selectable").append(x$("checked_gift_"+e,t.name,"div").css("float","left").prepend(c$("img").attr("src",UserFreeGifts.getImageUrl(t.img))))},true);n.applyOptions({mss_action:{accept:"Accept And Thank",okonly:"Accept Only",thank:"Thank Only",ignore:"Ignore"},category_select:u(),friendlists:{none:"New List",active:"Most Active"}})}function L(){var r=$("#reqslist",n.content).empty();var i=Resources.getPicture("ajax_loader").text("Loading...").css("padding-left",18).attr("id","loading_overlay");t.Request.each(function(t,n){var s='<a href="'+n.profile+'" target="_black">'+n.name+"</a>";var o=c$("span","class:player_pic,title:"+n.name);var u=c$("li","id:req_"+t+",class:"+n.type).appendTo(r);u=c$("div","class:li_wrapper clearfix").appendTo(u);var f=LucifersMOD.returnFBID(n.icon);if(n.icon){o.css("background","url('https://graph.facebook.com/"+f+"/picture') 50% 50% no-repeat")}o.append(c$("span")).appendTo(u);if(e.sendBack&&n.send&&n.send.to){c$("div","class:buttons state_accept").appendTo(u).width(150).append(b$("Accept And Thank","class:medium white,req:"+t).click(a.accept_click)).append(c$("a","href:#,class:acceptonly,req:"+t).text("accept").click(a.accept_click)).append(c$("span").text(" | ")).append(c$("a","href:#,class:thanksonly,req:"+t).text("thanks").click(a.ignore_request_click)).append(c$("span").text(" | ")).append(c$("a","href:#,class:ignore,req:"+t).text("ignore").click(a.ignore_request_click))}else{c$("div","class:buttons state_accept").appendTo(u).append(b$("Accept","class:medium white,req:"+t).click(a.accept_click)).append(c$("a","href:#,class:ignore,req:"+t).text("ignore").click(a.ignore_request_click))}c$("div","class:buttons state_retry").appendTo(u).hide().append(b$("Clear","class:medium white,req:"+t).click(a.clear_request_click)).append(c$("a","href:#,class:ignore,continue:true,req:"+t).text("continue").click(a.accept_click));c$("div","class:buttons state_completed").appendTo(u).hide().append(b$("Clear","class:medium white,req:"+t).click(a.clear_request_click));c$("div","class:body").append("<h4>"+s+"</h4><p>"+n.body+"</p>").appendTo(u).append(i.clone().hide())});if($("li",r).length<1){c$("li").appendTo(r).append(c$("center").css("padding-top",40).text("You don't have request."))}}function A(){var e=$(".mss_selectable",n.content).empty();Util.each(t.Request.toGroup("gift"),function(n,r){var i=r[0].gift,s=r[0].body,o=r.length;o-=t.Collector.amountOf(n);if(o<1){return}c$("li","iid:"+n+",title:"+s+",count:"+r.length).appendTo(e).append(c$("img").attr("src",i.img)).append(c$("div","class:gift_amount").text(r.length+"x")).append(c$("div","class:gift_name").text(i.name)).click(a.selectGift_click)})}function O(){var e=$("#mass_body .mss_selected",n.content).empty();t.Collector.each(function(t,n){var r=$("#mss_action option[value="+n.action+"]","#mass_body").text();r=Util.setColor(r,"green")+" ";r+=Util.setColor(n.amount,"yellow");c$("li").appendTo(e).click(a.removeFromCollector).append(c$("img").attr("src",n.icon)).append(c$("div","class:gift_name").html(r+" "+n.name)).append(c$("div","class:remove,index:"+t).click(a.removeFromCollector))})}function M(){var r=(new Date).getDay();if(e.today!==r){e.set("sendGiftCount",0);a.resetDailyLimit_click()}loadingScreen("Loading requests...");N(function(r){loadingScreen();if(r!==true){n.destroy();return}t.Collector=new o;k();L();e.toDomElements();C("reqs","body");C("control","panel");C("setup","mass");c(h);n.applyCustomClass();n.show()})}if(facebook.initialized!==true){loadingScreen("FB Api failed, Trying to load, maybe reload game.");facebook.init(FreeGiftsCenter);return}var e=UserConfig.fgopt;var t={Aborted:false,AcceptGiftLimit:250,ThankSent:new Object,FriendList:new Object,Events:{3013:"mafia_invite",3012:"gift",3052:"energy_pack",3018:"safehouse",3053:"none",3054:"none",3066:"help",3065:"none",3067:"none",3070:"family"},Request:null,Collector:null};var n=new PopupObject("freegiftscenter_popup",{type:"main",title:"FREE GIFTS CENTER",onclose:function(){e.fromDomElements();e.save()}});var r=function(e){var n=Util.uSplit(e.acceptUrl);var r={to:new Array,message:e.sendbackMsg,data:e.sendbackData,title:""};this.id=e.event_hash;this.type=t.Events[e.event_type];this.url=e.acceptUrl;this.rem=e.ignoreUrl;this.icon=e.sender_pic;this.name=e.sender_name;this.body=e.request_msg;if(e.sendbackData){r.to.push(String(e.sender_id));this.send=r}this.gift={item_id:e.data.item_id,item_cat:e.data.item_cat,name:e.item_name,img:e.item_pic};this.user_id=Util.parseNum(n.from_user);this.profile=MW.getProfileLink(n.from_user);return this};var i=function(e){var t,n,r,i;if(e$(".acceptonly",e)){r=$(".acceptonly",e);i=$(".ignore",e);n=$(".state_accept a:first",e)}else{r=$(".state_accept > a:first",e);i=$(".state_accept > a:eq(1)",e);n=$(".state_sendback .state_sendback_button",e)}this.id=e.id.substr(12);this.type=Util.doRgx(/(\w+)/,$(e).attr("class")).$1||"gift";this.url=Util.toUrl(r);this.rem=Util.toUrl(i);this.icon=Util.getPicture($(".player_pic",e).attr("style"));this.name=Util.trim($(".body > h4",e).text());this.body=Util.trim($(".body > p[id^=zmc_bodytext]",e).text());this.send=p(n.attr("onclick"));var t=Util.uSplit(this.url);var s=UserFreeGifts.getByItemId(t.item_id,t.item_cat);this.gift={item_id:t.item_id,item_cat:t.item_cat,name:s.name,img:UserFreeGifts.getImageUrl(s.img)};this.user_id=Util.parseNum(t.from_user);this.profile=MW.getProfileLink(this.user_id);return this};var s=function(){var e=new Object;var t=new Object;this.add=function(n){var r=n.gift.item_id;t[n.id]=n;if(!Util.isSet(e[r])){e[r]=new Array}e[r].push(n)};this.get=function(e){return t[e]};this.remove=function(e){delete t[e]};this.toArray=function(e){var n=new Array;Util.each(t,function(t,r){if(!Util.isSet(e)||r.type===e){n.push(r)}});return n};this.toGroup=function(e){var n=new Object;Util.each(t,function(t,r){if(!Util.isSet(e)||r.type===e){var i=n[r.gift.item_id];if(!Util.isSet(i)){n[r.gift.item_id]=i=new Array}i.push(r)}});return n};this.each=function(e){Util.each(t,e)};return this};var o=function(){var e=new Array;this.length=function(){return e.length};this.amountOf=function(t){var n=0;Util.each(e,function(e,r){if(r.iid&&parseInt(r.iid)===parseInt(t)){n+=r.amount}});return n};this.add=function(t){e.push(t)};this.get=function(t){return e[t]};this.all=function(){return e};this.each=function(t){Util.each(e,t)};this.remove=function(t){e.splice(t,1)};this.clear=function(){e=new Array};return this};var u={is:function(t){try{var n=parseInt((new Date).getTime()/1e3);var r=e.excludedGifts[t];var i=r?r-n:0;return i>0}catch(s){Logger.error(s)}return false},add:function(t){try{var n=parseInt((new Date).getTime()/1e3)+6*60*60;e.excludedGifts[t]=n;e.save()}catch(r){Logger.error(r)}},reset:function(){e.set("excludedGifts",new Object);e.save()}};var a={removeFromCollector:function(){var e=$(this).attr("index");t.Collector.remove(e);O();A();return false},addAllGifts_click:function(){var t=$(this).attr("mode");$("ul.mss_selectable li",n.content).each(function(n,r){var i=$(r);if(t=="1"){if(e.useractions[i.attr("iid")]){v(i,null,e.useractions[i.attr("iid")]);i.remove()}}else{v(i);i.remove()}});O();return false},addGift_click:function(){var e=e$("ul.mss_selectable li.selected",n.content);if(!e){$("#mss_info",n.content).html("Select a gift first!.");return false}var t=v(e,$("#mass_body #mss_amount").val());if(t<1){e.fadeOut(100,function(){e.remove()})}else{$(".gift_amount",e).text(t+"x")}O();return false},selectGift_click:function(){if($(this).hasClass("selected")){return}$("#mass_body .mss_selectable li").removeClass("selected");$("#mass_body #mss_amount").focus().val($(this).attr("count")||0).select();$(this).addClass("selected");return false},startSending_click:function(){if(!$(this).hasClass("disabled")&&!$("#friendlists").hasClass("loading")){E()}return false},friendLists_change:function(){if($(this).hasClass("disabled")||$(this).hasClass("loading")){return false}var t=$("option:selected",this).val();$("#send_body #snd_users").empty();if(t!=="none"){$("#remove_list_btn")[Util.isSet(e.customLists[t])?"show":"hide"]();$("#snd_messages").html("Adding Friends...");setTimeout(function(){f(t)},200)}else{$("#remove_list_btn").hide()}},editFriends_click:function(){if($(this).hasClass("disabled")||$("#friendlists").hasClass("loading")){return false}var e=new Array;var t=$("#send_body #snd_users");$("option",t).each(function(t,n){e.push(n.value)});showFriendsSelector(function(e){if(e.length>0){t.empty();Util.each(e,function(e,n){c$("option","value:"+n.uid).appendTo(t).text(n.name)})}},e);return false},saveFriends_click:function(){function o(t,n){$("option",r).each(function(e,t){n.push(t.value)});e.save(l);w('Friend list "'+t+'" saved.')}if($(this).hasClass("disabled")){return false}var t=new Array;var n=e.customLists;var r=$("#send_body #snd_users");var i=$("#friendlists option:selected");var s=i.val();if(Util.isSet(e.customLists[s])){o(i.text(),n[s]=new Array)}else{showPromptPopup("Friend List name (SIX char. min.):","Saved List",function(e){if(Util.isString(e)&&e.length>5){o(e,n[e.replace(/\s/g,"_")]=new Array)}})}return false},removeList_click:function(){var n=$("#friendlists");var r=$("option:selected",n).val();var i=$("option:selected",n).text();if(!Util.isSet(e.customLists[r])){$(this).hide();return false}showAskPopup("Remove Friendlist","Are you sure to remove?",function(){delete e.customLists[r];delete t.FriendList[r];e.save();$("option:selected",n).remove();n[0].selectedIndex=0;n.change();w('Friend list "'+i+'" removed.')});return false},clearFriends_click:function(){if(!$(this).hasClass("disabled")){$("#send_body #snd_users").empty()}return false},resetActiveFriends_click:function(){e.set("activeFriends",new Object);e.save(function(){showHelpPopup({icon:"info",title:"Reset Active Friends List",message:"Your active friends list is now empty."})});return false},finishCollector_click:function(){$("#mss_info").show();$("#mss_messages").hide();C("setup","mass");a.clearCollector_click();L();$(".tab_bar",n.content).removeClass("disabled");$(this).unbind().remove();return false},clearCollector_click:function(){$("#mass_body .mss_selected").empty();b();t.Collector.clear();A();return false},startCollector_click:function(){if($(this).hasClass("disabled")){return false}if(t.Collector.length()>0){C("logger","mass");S()}return false},tab_click:function(){if($(".tab_bar",n.content).hasClass("disabled")||$(this).hasClass("active")){return false}var t=$(this).attr("tb");switch(t){case"mass":b();a.clearCollector_click();break;case"send":w();$("#send_body #snd_users").empty();l();$("#friendlists").change();break;case"cnfg":$("#total_activefriends").text(Util.length(e.activeFriends));break}$(".tab_bar li",n.content).removeClass("active");$(this).addClass("active");C(t,"body");e.fromDomElements();e.save();return false},accept_click:function(){if($(this).hasClass("disabled")){return false}$(this).addClass("disabled");var n=$(this).hasClass("acceptonly");var r=$(this).attr("req");var i=t.Request.get(r);var s=$("#reqslist > li#req_"+r);if(!Util.isSet(i)){s.addClass("failed");$(".state_accept",s).hide();$(".state_completed",s).fadeIn(500);$(".body p",s).html("There was an error with this request.");return false}if(e.ignoreLimits!==true&&u.is(i.gift.item_id)&&!s.hasClass("asking")){s.addClass("asking");$(".state_accept",s).hide();$(".state_retry",s).fadeIn(500);$(".body p",s).html("You've reached the limit of this gift.<br>Are you sure to continue?");return false}$(".state_accept, .state_completed, .state_retry",s).hide();s.removeClass("asking").addClass("completed");$(".body #loading_overlay",s).show();$(".body p",s).hide();d(i,e.sendBack&&!n,function(n){var o=n.image?'<img src="'+n.image+'">':"";t.Request.remove(r);e.save();if(g(n.message)){u.add(i.gift.item_id)}$(".body",s).hide().html(o+"<p>"+n.message+"</p>").fadeIn(500);$(".state_completed",s).fadeIn(500)},function(e){$(".body",s).append("<span>"+e+"</span>")});return false},clear_request_click:function(){var e=$(this).attr("req");$("#req_"+e).fadeOut(500,function(){$("#req_"+e).remove()});return false},ignore_request_click:function(){var n=$(this).attr("req");var r=t.Request.get(n);var i=$("#reqslist > li#req_"+n);$(".state_accept, .state_completed, .state_retry",i).hide();$(".body #loading_overlay",i).show();$(".body p",i).hide();if($(this).hasClass("thanksonly")&&r.send&&r.send.to){httpAjaxRequest({url:r.rem,liteLoad:1});x(r.send,function(e){i.removeClass("asking").addClass("completed");$(".body #loading_overlay",i).hide();$(".body p",i).hide().html("<p>"+e+"</p>").fadeIn(500);$(".state_completed",i).fadeIn(500)},e.sendInternally)}else{httpAjaxRequest({url:r.rem,liteLoad:1,success:function(e){$("#req_"+n).fadeOut(500,function(){$("#req_"+n).remove()})}})}return false},refresh_click:function(){C("ajaxloader","body");$("#category_select",n.content).val("all").change();N(function(){L();C("reqs","body")});return false},clear_all:function(){$("#reqslist li.completed").fadeOut(500,function(){$("#reqslist li.completed").remove()})},reset_click:function(){u.reset();showHelpPopup({icon:"info",title:"Reset Exclude list",message:"The gifts added to the exclude list has been reset."});return false},resetDailyLimit_click:function(){Logger.debug("Daily Gift Count was reset.");e.set("today",(new Date).getDay());e.set("acceptGiftCount",0);e.save();return false},category_change:function(e){log("cat changed");var t="req_box";var r=$("option:selected",this).val();log("type -> "+r);if(r&&r!=="all"){t+=" "+r}$("#reqslist",n.content).attr("class",t)},filter_change:function(e){var t=$(this);var r=t.val();clearTimeout(t.attr("timeoutT"));if(!Util.isString(r)||r.length<3){$("#reqslist > li.matched",n.content).removeClass("matched");return true}t.attr("timeoutT",setTimeout(function(){var e=new RegExp(r,"ig");$("#reqslist > li",n.content).each(function(t,n){if(e.test($(".body p",n).text())){$(n).addClass("matched")}else{$(n).removeClass("matched")}});$("#category_select",n.content).val("search");var t="req_box";var i="search";t+=" "+i;$("#reqslist",n.content).attr("class",t)},800))}};var T=0;n.addBase64Style("I2ZyZWVnaWZ0c2NlbnRlcl9wb3B1cCBzcGFuLnBsYXllcl9waWMgew0KCWZsb2F0OiBsZWZ0Ow0KCWRpc3BsYXk6IGJsb2NrOw0KCXdpZHRoOiA1NHB4Ow0KfQ0KI2ZyZWVnaWZ0c2NlbnRlcl9wb3B1cCBzcGFuLnBsYXllcl9waWMgc3BhbiB7DQoJYmFja2dyb3VuZDogdXJsKCIke2Jhc2VfdXJsfXYzL3VzZXJwaWNfb3V0bGluZV81NHg1NF8wMS5wbmciKSA1MCUgNTAlIG5vLXJlcGVhdDsNCglkaXNwbGF5OiBibG9jazsNCgloZWlnaHQ6IDU0cHg7DQp9DQojZnJlZWdpZnRzY2VudGVyX3BvcHVwIC5mcmFtZV9ib3ggew0KCWNsZWFyOiBib3RoOw0KCWJvcmRlcjogMXB4IHNvbGlkICMzMzM7DQoJbWFyZ2luOiA1cHg7DQoJcGFkZGluZzogMTBweCA4cHg7DQoJbWluLWhlaWdodDogMjdweDsNCgl0ZXh0LWFsaWduOiBsZWZ0Ow0KfQ0KI2ZyZWVnaWZ0c2NlbnRlcl9wb3B1cCB1bCB7DQoJbGlzdC1zdHlsZS10eXBlOiBub25lOw0KCW92ZXJmbG93OiBhdXRvOw0KCXRleHQtYWxpZ246IGxlZnQ7DQp9DQojZnJlZWdpZnRzY2VudGVyX3BvcHVwIHVsLnRhYl9iYXIgew0KCWJhY2tncm91bmQ6IHVybCgiJHtiYXNlX3VybH16bWMvdGFic19iZ18xeDQ1XzAxLmdpZiIpIDAgMTAwJSByZXBlYXQteDsNCgloZWlnaHQ6IDQ4cHg7DQoJb3ZlcmZsb3c6IHZpc2libGU7DQoJcGFkZGluZy1sZWZ0OiA2cHg7DQoJdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsNCgl0ZXh0LWFsaWduOiBjZW50ZXI7DQp9DQojZnJlZWdpZnRzY2VudGVyX3BvcHVwIHVsLnRhYl9iYXIgbGkgew0KCWJhY2tncm91bmQ6IHVybCgiJHtiYXNlX3VybH16bWMvdGFiX2RpdmlkZXJfMngyN18wMS5naWYiKSAwIDExcHggbm8tcmVwZWF0Ow0KCWZsb2F0OiBsZWZ0Ow0KCW1hcmdpbi1sZWZ0OiA1cHg7DQoJcGFkZGluZy1sZWZ0OiA2cHg7DQoJd2lkdGg6IDE1MHB4Ow0KfQ0KI2ZyZWVnaWZ0c2NlbnRlcl9wb3B1cCB1bC50YWJfYmFyIGxpOmZpcnN0LWNoaWxkIHsNCgliYWNrZ3JvdW5kOiBub25lOw0KCW1hcmdpbi1sZWZ0OiAwOw0KCXBhZGRpbmctbGVmdDogMDsNCn0NCiNmcmVlZ2lmdHNjZW50ZXJfcG9wdXAgdWwudGFiX2JhciBsaSBhIHsNCgliYWNrZ3JvdW5kOiB1cmwoIiR7YmFzZV91cmx9em1jL3RhYl9pbmFjdGl2ZV8xNTB4OTBfMDEucG5nIikgMCAwIG5vLXJlcGVhdDsNCgljb2xvcjogd2hpdGU7DQoJZGlzcGxheTogYmxvY2s7DQoJaGVpZ2h0OiA0NXB4Ow0KCXBhZGRpbmctbGVmdDogM3B4Ow0KfQ0KI2ZyZWVnaWZ0c2NlbnRlcl9wb3B1cCB1bC50YWJfYmFyIGxpLmFjdGl2ZSBhIHsNCgliYWNrZ3JvdW5kOiB1cmwoIiR7YmFzZV91cmx9em1jL3RhYl9hY3RpdmVfMTUweDEyMF8wMS5wbmciKSAtNHB4IDFweCBuby1yZXBlYXQ7DQp9DQojZnJlZWdpZnRzY2VudGVyX3BvcHVwIHVsLnRhYl9iYXIgbGkgYSBzcGFuIHsNCgliYWNrZ3JvdW5kOiB1cmwoIiR7YmFzZV91cmx9em1jL3RhYl9pbmFjdGl2ZV8xNTB4OTBfMDEucG5nIikgMTAwJSAxMDAlIG5vLXJlcGVhdDsNCglkaXNwbGF5OiBibG9jazsNCgloZWlnaHQ6IDQ1cHg7DQp9DQojZnJlZWdpZnRzY2VudGVyX3BvcHVwIHVsLnRhYl9iYXIgbGkuYWN0aXZlIGEgc3BhbiB7DQoJYmFja2dyb3VuZDogdXJsKCIke2Jhc2VfdXJsfXptYy90YWJfYWN0aXZlXzE1MHgxMjBfMDEucG5nIikgMTAwJSAtNzVweCBuby1yZXBlYXQ7DQp9DQojZnJlZWdpZnRzY2VudGVyX3BvcHVwIHVsLnRhYl9iYXIgbGkgZW0gew0KCWRpc3BsYXk6IGJsb2NrOw0KCWZvbnQtc2l6ZTogMTBweDsNCglmb250LXN0eWxlOiBub3JtYWw7DQoJZm9udC13ZWlnaHQ6IGJvbGQ7DQoJbGluZS1oZWlnaHQ6IDEycHg7DQoJcGFkZGluZy10b3A6IDE2cHg7DQoJaGVpZ2h0OiAyMHB4Ow0KCXBhZGRpbmctbGVmdDogMzVweDsNCgl0ZXh0LWFsaWduOiBsZWZ0Ow0KfQ0KI2ZyZWVnaWZ0c2NlbnRlcl9wb3B1cCB1bC50YWJfYmFyIGxpLmNvbGxlY3RvciBlbSB7DQoJYmFja2dyb3VuZDogdXJsKCIke2Jhc2VfdXJsfXYzL2ljb25fc2hlZXRfMjV4MjRfMDEucG5nIikgMnB4IDEwcHggbm8tcmVwZWF0Ow0KfQ0KI2ZyZWVnaWZ0c2NlbnRlcl9wb3B1cCB1bC50YWJfYmFyIGxpLnJlcXVlc3QgZW0gew0KYmFja2dyb3VuZDogdXJsKCIke2Jhc2VfdXJsfXYzL2ljb25fZ2lmdF8yN3gyOF8wMS5wbmciKSAycHggNXB4IG5vLXJlcGVhdDsNCn0NCiNmcmVlZ2lmdHNjZW50ZXJfcG9wdXAgdWwudGFiX2JhciBsaS5zZW5kZXIgZW0gew0KYmFja2dyb3VuZDogdXJsKCIke2Jhc2VfdXJsfXYzL2ljb25fc2VuZGdpZnRfMjJ4MTZfMDEuZ2lmIikgNXB4IDEzcHggbm8tcmVwZWF0Ow0KfQ0KI2ZyZWVnaWZ0c2NlbnRlcl9wb3B1cCAjbWFzc19ib2R5IHVsLA0KI2ZyZWVnaWZ0c2NlbnRlcl9wb3B1cCAjc2VuZF9ib2R5IHVsIHsNCgloZWlnaHQ6IDQ2MHB4Ow0KCW1hcmdpbi10b3A6IDJweDsNCglib3JkZXI6IHNvbGlkIDFweCAjNjY2Ow0KCXRleHQtYWxpZ246IGxlZnQ7DQoJcGFkZGluZzogNXB4Ow0KfQ0KI2ZyZWVnaWZ0c2NlbnRlcl9wb3B1cCAjbWFzc19ib2R5IHVsIGxpIGltZywNCiNmcmVlZ2lmdHNjZW50ZXJfcG9wdXAgI3NlbmRfYm9keSB1bCBsaSBpbWcgew0KCWZsb2F0OiBsZWZ0Ow0KICAgIHdpZHRoOiAxOHB4Ow0KICAgIGhlaWdodDogMThweDsNCn0NCiNmcmVlZ2lmdHNjZW50ZXJfcG9wdXAgI21hc3NfYm9keSB1bCBsaSwNCiNmcmVlZ2lmdHNjZW50ZXJfcG9wdXAgI3NlbmRfYm9keSB1bCBsaSB7DQoJcGFkZGluZzogM3B4Ow0KCXRleHQtZGVjb3JhdGlvbjogbm9uZTsNCglib3JkZXI6IDFweCBzb2xpZCAjMjIyOw0KCW1hcmdpbjogMXB4Ow0KICAgIHdpZHRoOiBhdXRvICFpbXBvcnRhbnQ7DQogICAgYmFja2dyb3VuZC1zaXplOiAxOHB4ICFpbXBvcnRhbnQ7DQogICAgLW1vei1iYWNrZ3JvdW5kLXNpemU6IDE4cHggIWltcG9ydGFudDsNCiAgICBtaW4taGVpZ2h0OiAxOHB4ICFpbXBvcnRhbnQ7DQogICAgYmFja2dyb3VuZC1wb3NpdGlvbjogNXB4IDUwJTsNCn0NCiNmcmVlZ2lmdHNjZW50ZXJfcG9wdXAgdWwjbXNzX3N1Y2Nlc3Nsb2cgbGkgaDQgew0KCWZvbnQtc2l6ZTogMTRweDsNCglsaW5lLWhlaWdodDogMThweDsNCgltYXJnaW4tYm90dG9tOiA0cHg7DQoJcGFkZGluZy10b3A6IDJweDsNCgl0ZXh0LWFsaWduOiBsZWZ0Ow0KCWNvbG9yOiAjRkZEOTI3Ow0KfQ0KI2ZyZWVnaWZ0c2NlbnRlcl9wb3B1cCB1bCNtc3Nfc3VjY2Vzc2xvZyBsaSBwIHsNCglmb250LXNpemU6IDEycHg7DQoJbWluLWhlaWdodDogMzVweDsNCglwYWRkaW5nLWxlZnQ6IDQwcHg7DQp9DQojZnJlZWdpZnRzY2VudGVyX3BvcHVwIHVsI21zc19tZXNzYWdlbG9nIGxpIHAgew0KCWZvbnQtc2l6ZTogMTJweDsNCgloZWlnaHQ6IDIwcHg7DQoJcGFkZGluZy1sZWZ0OiAzMHB4Ow0KCW1hcmdpbi1ib3R0b206IDFweDsNCn0NCiNmcmVlZ2lmdHNjZW50ZXJfcG9wdXAgI21hc3NfYm9keSAjbXNzX21lc3NhZ2VzIHsNCiAgICBwYWRkaW5nLWxlZnQ6IDIwcHg7DQogICAgZGlzcGxheTogbm9uZTsNCiAgICB3aWR0aDogYXV0byAhaW1wb3J0YW50Ow0KICAgIGxpbmUtaGVpZ2h0OiAzMHB4Ow0KfQ0KI2ZyZWVnaWZ0c2NlbnRlcl9wb3B1cCAjc2VuZF9ib2R5IHVsIGxpIGltZyB7DQoJbWFyZ2luLXJpZ2h0OiA1cHg7DQp9DQojZnJlZWdpZnRzY2VudGVyX3BvcHVwICNzZW5kX2JvZHkgdWwuc25kX3NlbGVjdGFibGUgbGkgZGl2IHsNCgl3aWR0aDogOTAlOw0KfQ0KI2ZyZWVnaWZ0c2NlbnRlcl9wb3B1cCB1bCNtc3Nfc3VjY2Vzc2xvZyBsaSBpbWcgew0KCW1hcmdpbi1yaWdodDogNXB4Ow0KCWhlaWdodDogMzBweDsNCgl3aWR0aDogMzBweDsNCn0NCiNmcmVlZ2lmdHNjZW50ZXJfcG9wdXAgI3NlbmRfYm9keSAjc25kX21lc3NhZ2VzIHsNCiAgICBtaW4taGVpZ2h0OiA4MHB4Ow0KICAgIG92ZXJmbG93LXk6IGF1dG87DQogICAgbWF4LWhlaWdodDogODBweDsNCn0NCiNmcmVlZ2lmdHNjZW50ZXJfcG9wdXAgI3NlbmRfYm9keSAjc25kX21lc3NhZ2VzIGRpdiB7DQogICAgd2lkdGg6IGF1dG8gIWltcG9ydGFudDsNCiAgICBiYWNrZ3JvdW5kLXNpemU6IDE4cHggIWltcG9ydGFudDsNCiAgICAtbW96LWJhY2tncm91bmQtc2l6ZTogMThweCAhaW1wb3J0YW50Ow0KICAgIG1pbi1oZWlnaHQ6IDE4cHggIWltcG9ydGFudDsNCiAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAwcHggNTAlOw0KICAgIHBhZGRpbmc6IDJweCA1cHggMnB4IDIwcHg7DQp9DQojZnJlZWdpZnRzY2VudGVyX3BvcHVwICNtYXNzX2JvZHkgZGl2LmxpX3dyYXBwZXIsDQojZnJlZWdpZnRzY2VudGVyX3BvcHVwICNzZW5kX2JvZHkgZGl2LmxpX3dyYXBwZXIgew0KICAgIHdpZHRoOiAzNDRweDsNCiAgICBmbG9hdDogbGVmdDsNCiAgICBtYXJnaW46IDJweDsNCn0NCiNmcmVlZ2lmdHNjZW50ZXJfcG9wdXAgI21hc3NfYm9keSB1bCNtc3Nfc3VjY2Vzc2xvZyBsaSBpbWcgew0KICAgIHdpZHRoOiAzMnB4Ow0KICAgIGhlaWdodDogMzJweDsNCn0NCiNmcmVlZ2lmdHNjZW50ZXJfcG9wdXAgI21hc3NfYm9keSB1bC5tc3Nfc2VsZWN0YWJsZSBsaSB7DQoJY3Vyc29yOiBwb2ludGVyOw0KfQ0KI2ZyZWVnaWZ0c2NlbnRlcl9wb3B1cCAjbWFzc19ib2R5IHVsLm1zc19zZWxlY3RhYmxlIGxpLnNlbGVjdGVkLA0KI2ZyZWVnaWZ0c2NlbnRlcl9wb3B1cCAjc2VuZF9ib2R5IHVsLnNuZF9zZWxlY3RhYmxlIGxpLnNlbGVjdGVkIHsNCglib3JkZXI6IDFweCBzb2xpZCB5ZWxsb3c7DQp9DQojZnJlZWdpZnRzY2VudGVyX3BvcHVwICNtYXNzX2JvZHkgdWwubXNzX3NlbGVjdGFibGUgbGk6aG92ZXIsDQojZnJlZWdpZnRzY2VudGVyX3BvcHVwICNzZW5kX2JvZHkgdWwuc25kX3NlbGVjdGFibGUgbGk6aG92ZXIgew0KICAgIGJhY2tncm91bmQtY29sb3I6ICMzMzM7DQp9DQojZnJlZWdpZnRzY2VudGVyX3BvcHVwIHVsIGxpIGRpdi5naWZ0X25hbWUgew0KICAgIG1hcmdpbjogMHB4IDBweCAwcHggNXB4Ow0KICAgIGZsb2F0OiBsZWZ0Ow0KICAgIG92ZXJmbG93OiBoaWRkZW47DQogICAgbWF4LWhlaWdodDogMjBweDsNCiAgICBtYXgtd2lkdGg6IDI2MnB4Ow0KICAgIGhlaWdodDogMjBweDsNCn0NCiNmcmVlZ2lmdHNjZW50ZXJfcG9wdXAgdWwgbGkgZGl2LmdpZnRfYW1vdW50IHsNCgltYXJnaW46IDBweCAzcHggMHB4IDhweDsNCglmbG9hdDogbGVmdDsNCglvdmVyZmxvdzogaGlkZGVuOw0KCW1heC1oZWlnaHQ6IDIwcHg7DQoJbWF4LXdpZHRoOiAzMHB4Ow0KCW1pbi13aWR0aDogMjBweDsNCgljb2xvcjogeWVsbG93Ow0KfQ0KI2ZyZWVnaWZ0c2NlbnRlcl9wb3B1cCAjbWFzc19ib2R5IHVsLm1zc19zZWxlY3RlZCBsaSBkaXYucXVhbnRpdHkgew0KCWZsb2F0OiByaWdodDsNCiAgICBtYXJnaW4tcmlnaHQ6IDEwcHg7DQp9DQojZnJlZWdpZnRzY2VudGVyX3BvcHVwICNtYXNzX2JvZHkgdWwubXNzX3NlbGVjdGVkIGxpIGRpdi5xdWFudGl0eSBpbnB1dCB7DQoJZm9udC13ZWlnaHQ6IGJvbGQ7IA0KCWNvbG9yOiByZ2IoMjA4LCAyMDgsIDIwOCk7IA0KCWJvcmRlcjogMXB4IHNvbGlkIHJnYigxNTMsIDE1MywgMTUzKTsgDQoJYmFja2dyb3VuZC1jb2xvcjogYmxhY2s7IA0KCWZvbnQtc2l6ZTogMTRweDsNCgl3aWR0aDogMzBweDsNCgloZWlnaHQ6IDE1cHg7DQp9DQojZnJlZWdpZnRzY2VudGVyX3BvcHVwICNtYXNzX2JvZHkgdWwubXNzX3NlbGVjdGVkIGxpIGEgew0KCW1hcmdpbi1sZWZ0OiAycHg7DQoJZmxvYXQ6IHJpZ2h0Ow0KfQ0KI2ZyZWVnaWZ0c2NlbnRlcl9wb3B1cCAjbWFzc19ib2R5IHVsLm1zc19zZWxlY3RlZCBsaSAucmVtb3ZlIHsNCiAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoaHR0cDovL213ZmIuc3RhdGljLnp5bmdhLmNvbS9td2ZiL2dyYXBoaWNzL3JlcXVlc3RzL2Nyb3NzLnBuZyk7DQogICAgZmxvYXQ6IHJpZ2h0Ow0KICAgIHdpZHRoOiAxNnB4Ow0KICAgIGhlaWdodDogMTZweDsNCiAgICBjdXJzb3I6IHBvaW50ZXI7DQp9DQojZnJlZWdpZnRzY2VudGVyX3BvcHVwIC50b3BfY3RybCB7DQoJYm9yZGVyOiBzb2xpZCAxcHggIzY2NjsNCgloZWlnaHQ6IDIwcHg7DQogICAgcGFkZGluZzogNXB4Ow0KICAgIG1hcmdpbi10b3A6IDJweDsNCn0NCiNmcmVlZ2lmdHNjZW50ZXJfcG9wdXAgLnRvcF9jdHJsIGEgew0KICAgIGZsb2F0OiByaWdodDsNCiAgICBtYXJnaW4tbGVmdDogNXB4Ow0KfQ0KI2ZyZWVnaWZ0c2NlbnRlcl9wb3B1cCAuc3RhcnRfY3RybCB7DQoJaGVpZ2h0OiAzN3B4Ow0KCWJvcmRlcjogc29saWQgMXB4ICM2NjY7DQoJbWFyZ2luLXRvcDogMnB4Ow0KCXBhZGRpbmctdG9wOiAzcHg7DQp9DQojZnJlZWdpZnRzY2VudGVyX3BvcHVwIC5zdGFydF9jdHJsIGEgew0KCW1hcmdpbi1yaWdodDogMTBweDsNCn0NCiNmcmVlZ2lmdHNjZW50ZXJfcG9wdXAgdWwucmVxX2JveCBkaXYubGlfd3JhcHBlciB7DQoJYm9yZGVyLXRvcDogMXB4IHNvbGlkICMyMjI7DQoJcGFkZGluZzogNnB4IDE0cHggMCA1MnB4Ow0KfQ0KI2ZyZWVnaWZ0c2NlbnRlcl9wb3B1cCB1bC5yZXFfYm94IGxpOmZpcnN0LWNoaWxkIHsNCglib3JkZXItd2lkdGg6IDBweDsNCn0NCiNmcmVlZ2lmdHNjZW50ZXJfcG9wdXAgdWwucmVxX2JveCBsaSB7DQoJbWluLWhlaWdodDogNzZweDsNCgltYXgtaGVpZ2h0OiAxNjBweDsNCn0NCiNmcmVlZ2lmdHNjZW50ZXJfcG9wdXAgdWwucmVxX2JveCBsaS5naWZ0IHsNCgliYWNrZ3JvdW5kOiB1cmwoIiR7YmFzZV91cmx9djMvaWNvbl9naWZ0XzI3eDI4XzAxLnBuZyIpIDE3cHggMjBweCBuby1yZXBlYXQ7DQp9DQojZnJlZWdpZnRzY2VudGVyX3BvcHVwIHVsLnJlcV9ib3ggbGkubWFmaWFfaW52aXRlIHsNCiAgICBiYWNrZ3JvdW5kOiB1cmwoIiR7YmFzZV91cmx9djMvaWNvbl9tYWZpYV9oYXRfMzJ4MjVfMDEucG5nIikgMTRweCAyMHB4IG5vLXJlcGVhdDsNCn0NCiNmcmVlZ2lmdHNjZW50ZXJfcG9wdXAgdWwucmVxX2JveCBsaS5lbmVyZ3lfcGFjayB7DQogICAgYmFja2dyb3VuZDogdXJsKCIke2Jhc2VfdXJsfXYzL2ljb25fZW5lcmd5X3BhY2tfMjl4MjdfMDEucG5nIikgMTZweCAyMHB4IG5vLXJlcGVhdDsNCn0NCiNmcmVlZ2lmdHNjZW50ZXJfcG9wdXAgdWwucmVxX2JveCBsaS5oZWxwIHsNCiAgICBiYWNrZ3JvdW5kOiB1cmwoIiR7YmFzZV91cmx9bWFwX2Jhc2VkX2pvYnMvZXhwZXJ0X3ZpZXcvaWNvbl9tZWdhcGhvbmUucG5nIikgMTdweCAyMHB4IG5vLXJlcGVhdDsNCn0NCiNmcmVlZ2lmdHNjZW50ZXJfcG9wdXAgdWwucmVxX2JveCBsaS5mYW1pbHkgew0KICAgIGJhY2tncm91bmQ6IHVybCgiJHtiYXNlX3VybH12My9GYW1pbHlfWk1DX0ljb24ucG5nIikgMTVweCAyMHB4IG5vLXJlcGVhdCAhaW1wb3J0YW50Ow0KfQ0KI2ZyZWVnaWZ0c2NlbnRlcl9wb3B1cCB1bC5tYWZpYV9pbnZpdGUgbGkgew0KICAgIGRpc3BsYXk6IG5vbmU7DQp9DQojZnJlZWdpZnRzY2VudGVyX3BvcHVwIHVsLm1hZmlhX2ludml0ZSBsaS5tYWZpYV9pbnZpdGUgew0KICAgIGRpc3BsYXk6IGJsb2NrOw0KfQ0KI2ZyZWVnaWZ0c2NlbnRlcl9wb3B1cCB1bC5naWZ0IGxpIHsNCiAgICBkaXNwbGF5OiBub25lOw0KfQ0KI2ZyZWVnaWZ0c2NlbnRlcl9wb3B1cCB1bC5naWZ0IGxpLmdpZnQgew0KICAgIGRpc3BsYXk6IGJsb2NrOw0KfQ0KI2ZyZWVnaWZ0c2NlbnRlcl9wb3B1cCB1bC5lbmVyZ3lfcGFjayBsaSB7DQogICAgZGlzcGxheTogbm9uZTsNCn0NCiNmcmVlZ2lmdHNjZW50ZXJfcG9wdXAgdWwuZW5lcmd5X3BhY2sgbGkuZW5lcmd5X3BhY2sgew0KICAgIGRpc3BsYXk6IGJsb2NrOw0KfQ0KI2ZyZWVnaWZ0c2NlbnRlcl9wb3B1cCB1bC5zYWZlaG91c2UgbGkgew0KICAgIGRpc3BsYXk6IG5vbmU7DQp9DQojZnJlZWdpZnRzY2VudGVyX3BvcHVwIHVsLnNhZmVob3VzZSBsaS5zYWZlaG91c2Ugew0KICAgIGRpc3BsYXk6IGJsb2NrOw0KfQ0KI2ZyZWVnaWZ0c2NlbnRlcl9wb3B1cCB1bC5oZWxwIGxpIHsNCiAgICBkaXNwbGF5OiBub25lOw0KfQ0KI2ZyZWVnaWZ0c2NlbnRlcl9wb3B1cCB1bC5oZWxwIGxpLmhlbHAgew0KICAgIGRpc3BsYXk6IGJsb2NrOw0KfQ0KI2ZyZWVnaWZ0c2NlbnRlcl9wb3B1cCB1bC5mYW1pbHkgew0KICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7DQp9DQojZnJlZWdpZnRzY2VudGVyX3BvcHVwIHVsLmZhbWlseSBsaSB7DQogICAgZGlzcGxheTogbm9uZTsNCn0NCiNmcmVlZ2lmdHNjZW50ZXJfcG9wdXAgdWwuZmFtaWx5IGxpLmZhbWlseSB7DQogICAgZGlzcGxheTogYmxvY2s7DQp9DQojZnJlZWdpZnRzY2VudGVyX3BvcHVwIHVsLnNlYXJjaCBsaSB7DQogICAgZGlzcGxheTogbm9uZTsNCn0NCiNmcmVlZ2lmdHNjZW50ZXJfcG9wdXAgdWwuc2VhcmNoIGxpLm1hdGNoZWQgew0KICAgIGRpc3BsYXk6IGJsb2NrOw0KfQ0KI2ZyZWVnaWZ0c2NlbnRlcl9wb3B1cCB1bC5yZXFfYm94IGxpIGRpdi5idXR0b25zIHsNCglmbG9hdDogcmlnaHQ7DQoJZm9udC1zaXplOiAxMHB4Ow0KCWZvbnQtd2VpZ2h0OiBib2xkOw0KCW1hcmdpbjogM3B4IDBweCAwcHggMTRweDsNCgl0ZXh0LWFsaWduOiByaWdodDsNCgl3aWR0aDogNzBweDsNCn0NCiNmcmVlZ2lmdHNjZW50ZXJfcG9wdXAgdWwucmVxX2JveCBsaSBkaXYuYm9keSB7DQoJbWFyZ2luLXJpZ2h0OiAxMDBweDsNCgltYXJnaW4tbGVmdDogNjVweDsNCgltaW4taGVpZ2h0OiA2MHB4Ow0KICAgIGZvbnQtc2l6ZTogMTJweDsNCn0NCiNmcmVlZ2lmdHNjZW50ZXJfcG9wdXAgdWwucmVxX2JveCBsaSBkaXYuYm9keSAjbG9hZGluZ19vdmVybGF5IGltZyB7DQogICAgcG9zaXRpb246IHJlbGF0aXZlOw0KICAgIGJvdHRvbTogLTNweDsNCiAgICBtYXJnaW4tcmlnaHQ6IDVweDsNCn0NCiNmcmVlZ2lmdHNjZW50ZXJfcG9wdXAgdWwucmVxX2JveCBsaSBoNCB7DQoJZm9udC1zaXplOiAxNHB4Ow0KCWxpbmUtaGVpZ2h0OiAxOHB4Ow0KCW1hcmdpbi1ib3R0b206IDRweDsNCglwYWRkaW5nLXRvcDogMnB4Ow0KfQ0KI2ZyZWVnaWZ0c2NlbnRlcl9wb3B1cCB1bC5yZXFfYm94IGxpIHAgew0KCWxpbmUtaGVpZ2h0OiAxNXB4Ow0KCW1hcmdpbi1ib3R0b206IDVweDsNCn0NCiNmcmVlZ2lmdHNjZW50ZXJfcG9wdXAgdWwucmVxX2JveCBsaS5mYWlsZWQgcCB7DQoJY29sb3I6IHJlZDsNCn0NCiNmcmVlZ2lmdHNjZW50ZXJfcG9wdXAgdWwucmVxX2JveCBsaS5hc2tpbmcgcCB7DQoJY29sb3I6IHllbGxvdzsNCn0NCiNmcmVlZ2lmdHNjZW50ZXJfcG9wdXAgdWwucmVxX2JveCBsaSBpbWcgew0KICAgIGZsb2F0OiBsZWZ0Ow0KICAgIG1heC13aWR0aDogNTRweDsNCgltYXgtaGVpZ2h0OiA1NHB4Ow0KICAgIG1hcmdpbi1yaWdodDogNXB4Ow0KfQ0KI2ZyZWVnaWZ0c2NlbnRlcl9wb3B1cCB1bC5yZXFfYm94IGxpIGRpdi5idXR0b25zIGEuc2V4eV9idXR0b25fbmV3IHsNCgltYXJnaW4tYm90dG9tOiA2cHg7DQp9DQojZnJlZWdpZnRzY2VudGVyX3BvcHVwIHVsLnJlcV9ib3ggbGkgZGl2LmJ1dHRvbnMgYS5pZ25vcmUsDQojZnJlZWdpZnRzY2VudGVyX3BvcHVwIHVsLnJlcV9ib3ggbGkgZGl2LmJ1dHRvbnMgYS5hY2NlcHRvbmx5LA0KI2ZyZWVnaWZ0c2NlbnRlcl9wb3B1cCB1bC5yZXFfYm94IGxpIGRpdi5idXR0b25zIGEudGhhbmtzb25seSB7DQoJdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsNCn0NCiNmcmVlZ2lmdHNjZW50ZXJfcG9wdXAgdWwsICNmcmVlZ2lmdHNjZW50ZXJfcG9wdXAgbGksICNmcmVlZ2lmdHNjZW50ZXJfcG9wdXAgZGwsICNmcmVlZ2lmdHNjZW50ZXJfcG9wdXAgZHQsICNmcmVlZ2lmdHNjZW50ZXJfcG9wdXAgZGQsICNmcmVlZ2lmdHNjZW50ZXJfcG9wdXAgaDIsICNmcmVlZ2lmdHNjZW50ZXJfcG9wdXAgaDMsICNmcmVlZ2lmdHNjZW50ZXJfcG9wdXAgaDQsICNmcmVlZ2lmdHNjZW50ZXJfcG9wdXAgcCB7DQoJbWFyZ2luOiAwcHg7DQoJcGFkZGluZzogMHB4Ow0KfQ==",{base_url:global.zGraphicsURL});e.load(M)}function HomeFeedCenter(e){function y(e,t,n){return function(){$(e,n)[t]()}}function b(e,t){var n=new PopupObject({appendTo:$("#minipopup_content").show(),type:"help",autoOpen:true,zIndex:99999,closeAfterClick:true,hideCloseButton:true,content:e,buttons:[{label:"Save",addClass:"short green",onclick:t},{label:"Close",addClass:"short red"}]})}function w(){loadingScreen("Loading Facebook Friend lists...");facebook.friendlist(function(e){loadingScreen();if(!Util.isArray(e.data)){return}var t=c$("div","class:fb_friendlist");Util.each(e.data,function(e,n){if(n.list_type==="user_created"){x$(n.id,n.name,"div").appendTo(t).toggleClass("checked",Util.isSet(u.fbListFilter[n.id]))}});b(c$("div").css("text-align","left").append(c$("center").text("ADDING FRIENDLISTS FILTER")).append(t),function(){u.set("fbListFilter",{});$(".checkbox.checked",t).each(function(e,t){u.fbListFilter[t.id]=$(t).text()});u.toDomElements();u.save()})})}function E(){b(c$("div").css("padding-bottom",10).append(c$("center").text("ADDING WAR LOOT")).append(c$("input:hidden","id:warloot_id")).append(c$("div").css({clear:"both","margin-top":8})).append(t$("warloot_name","Name:",350)).append(c$("div").css({clear:"both","margin-top":8})).append(n$("warloot_att","Attack above:",50)).append(n$("warloot_def","Defense above:",50)).append(c$("div").css({clear:"both","margin-top":8})).append(x$("warloot_enabled","Enabled")),function(){var e=S();if(e.id==="limited"){u.warlootLimited=e}else{u.warloot[e.id]=e}u.save(x)})}function S(e){var t=$("#minipopup_content");var n=Util.isSet(e);e=Util.merge({id:parseInt((new Date).getTime()/1e3),enabled:true,name:"*",att:0,def:0},e);Util.each(e,function(r,i){var s=$("#warloot_"+r,t);if(s.length>0){if(s.is("input, select")){if(n){s.val(i)}else{e[r]=s.val()}}else{if(n){s.toggleClass("checked",i)}else{e[r]=s.hasClass("checked")}}}u.save(x)});if(!Util.isString(e.name)||e.name.length<1){e.name="*"}return e}function x(){var e=$("#warloot_data").empty();var t='${enabled}: "${name}" if > "${att}/${def}".';var n=u.warlootLimited;$("#warlimit_count").text("("+u.warLimitCount+"/5)");$("#warlootlimited_data").val(Util.render(t,{enabled:n.enabled?"ON":"OFF",name:n.name==="*"?"Any":n.name,att:n.att,def:n.def}));Util.each(u.warloot,function(n,r){c$("option","value:"+n).appendTo(e).text(Util.render(t,{enabled:r.enabled?"ON":"OFF",name:r.name==="*"?"Any":r.name,att:r.att,def:r.def}))})}function T(e){var t=$(e);if(!t.length||!t.attr)return"";var n=t.attr("href");if(typeof n=="string"&&/https?/.test(n)){return n}return Util.doRgx(/['"](remote[^'"]*)/,t.attr("onclick")).$1}function N(e){if(!Util.isSet(e)){return""}var t,n;var r="remote/"+MW.getIntURL(e.next_controller,e.next_action);var i=function(e){return Util.doRgx(/"([^"]+)"/,e).$1||e};for(var s in e){if(!/next_|from|zy_track|value/.test(s)){if(s==="friend"){r+="&"+s+"="+Util.parseNum(e[s])}else{r+="&"+s+"="+e[s]}}}if(String(e.next_params).charAt(0)==="{"){Util.each(Util.parseParam(e.next_params),function(e,t){r+="&"+e+"="+t})}if(String(e.value).charAt(0)==="{"){Util.each(Util.parseParam(e.value),function(e,t){r+="&"+e+"="+t})}return r}function C(e){if(typeof e!=="string"){return e}var t=$("<div>"+e.replace(/<div[^>]*>/g,"<div>")+"</div>");$("img, .sexy_button_new, .sexy_button, br, div:empty, .msg_energy_but_col, script",t).remove();return t.html()}function k(e,t,n){n=h$("<div>"+n+"</div>").text();if(!t||!(Util.isString(n)&&n.length>2)){return}c$("a","href:#,class:ignore").text("Comment").appendTo(e).click(function(){var e=$(this);e.unbind().css("opacity",.5);facebook.commentAdd(t,n,function(t){if(!t||t.error){e.replaceWith(Util.setColor("Fail","red")).css("opacity",1)}else{e.replaceWith(Util.setColor("Commented!","yellow")).css("opacity",1)}});return false})}function L(e,t){if(typeof e=="undefined"){return true}return $(e,t).attr("checked")}function A(){var e=parseInt(u.get("refreshDelay"));if(e<2){e=2}return e}function O(){if(UserStreams.content.length>0){Util.each(UserStreams.content,function(e,t){if(t.id&&t.action){if(t.action.group!=="none"&&Util.isSet(f[t.action.group])){o.add(t.id,t.action)}}})}o.add("robbingSpree_feed_accept",{name:"Collect Robbing Event",group:"doClaimBonusAndReward"});o.add("DailyTakeV3_collect_stake",{name:"Daily Take Reward",group:"doDailyTake",next:I,skipif:"You have already collected"});o.add("war_view",{name:"Go to war",group:"doGotoWar",next:j});o.add("war_share_reward_feed_click",{name:"Claim war reward",group:"doClaimBonusAndReward",next:F,fail:"You cannot claim this reward"});o.add("socialmission_joinMission",{name:"Join in a mission",group:"doSocialMissions",next:q});o.add("robbing_mastery_bonus",{name:"Claim robbing mastery bonus",group:"doClaimBonusAndReward",next:".message_body a:regex(href,xw_action=mastery_bonus)"});o.add("index_ach_celeb",{name:"Get archivement reward",group:"doClaimBonusAndReward",next:".message_body a:regex(href,xw_action=ach_celeb)",fail:"You already got the bonus before|This bonus has expired"});o.add("story_claim_boss_bonus",{name:"Claim a boss bonus",group:"doClaimBonusAndReward",next:".message_body a:regex(href,xw_action=claim_boss_bonus)"});o.add("index_crm_levelup_claim",{name:"Get free Loyalty Points",group:"doClaimBonusAndReward",next:".message_body a:regex(href,xw_action=crm_levelup_claim)",skipif:"have already received the maximum amount",fail:"You are too late"});o.add("propertyV2_getBoost",{name:"Get a property boost",group:"doPropertyHelp",next:".message_body a:regex(href,xw_action=getBoost)"});o.add("index_send_energy_mbox",{name:"Send energy",group:"doSendEnergyAndPhones",next:".message_body a:regex(href,xw_action=send_energy_mbox)"});o.add("socialmission_rewardBrag",{name:"Claim social mission reward",group:"doClaimBonusAndReward",fail:"You are too late to claim a reward."});o.add("job_collect_loot",{name:"Collect a loot",group:"doPropertyHelp",skipif:"have to wait"});o.add("limitedTimeProperty_addPropertyPart",{name:"Send Limited Time Property Parts",group:"doPropertyHelp",skipif:"You have already sent \\d+ parts today",fail:"You have already sent|feed have been claimed|feed has expired|has all parts needed|could not be completed"});o.add("limitedTimeProperty_addAnyPropertyPart",{name:'Send "Any" Limited Property Parts',group:"doPropertyHelp",skipif:"You have already sent \\d+ parts today",fail:"You have already sent|feed have been claimed|feed has expired|You can only send parts to friendYou can only send parts to friend"});o.add("limitedTimeProperty_upgradeBragFeed",{name:"Limited Time Property Upgraded",group:"doPropertyHelp",skipif:"You already have all parts needed for this level",fail:"All rewards from this feed have been claimed|You have already collected|feed has expired"});o.add("fight_iced_boost_claim",{name:"Get iced boost",group:"doClaimBonusAndReward",skipif:"You can only receive \\d+ free iced fight boosts per day",fail:"This boost is no longer available"});o.add("fight_send_boost_from_feed",{name:"Collect Fight Boost",group:"doClaimBonusAndReward",fail:"This boost is no longer available|You have already received|You are too late"});o.add("index_levelUpBonusClaim",{name:"Get levelup Bonus",group:"doClaimBonusAndReward",skipif:"You have already collected the maximum",fail:"available bonus rewards have already been claimed|You have already received"});o.add("lootladderevent_share_feed_click",{name:"Collect a Share Loot Event",group:"doClaimBonusAndReward",skipif:"try again tomorrow"});o.add("lootladderevent_ask_feed_click",{name:"Collect an Ask Loot Event",group:"doClaimBonusAndReward",skipif:"try again tomorrow"});o.add("lootladderevent_brag_feed_click",{name:"Collect a Golden Loot Event",group:"doClaimBonusAndReward",skipif:"try again tomorrow"});o.add("Epicclanboss_ask_feed_click",{name:"Collect Boss help item",group:"doClaimBonusAndReward",skipif:"You have already collected \\d+ Rifle Rounds today|You are at max capacity",fail:"You are too late|already collected"});o.add("job_give_help",{name:"Give job help",group:"doGiveSocialHelp",skipif:"Try again tomorrow",fail:"You are too late to help|have already helped|already helped out"});o.add("story_give_help_social",{name:"Give social help",group:"doGiveSocialHelp",skipif:"Try again tomorrow",fail:"You are too late to help|have already helped|already helped out"});o.add("story_give_help_moscow_social",{name:"Give moscow help",group:"doGiveSocialHelp",skipif:"Try again tomorrow",fail:"You are too late to help|have already helped|already helped out|to be social network friends"});o.add("job_sd_boost_get",{name:"Collect 2x loot boosts",group:"doClaimBonusAndReward",skipif:"you can only collect \\d+ boosts from feeds per day",fail:"these boosts have already been claimed|already helped your friend|this request has expired"});o.add("propertyV2_one_click_get",{name:"Get Rob Squad",group:"doPropertyHelp",skipif:"can only collect \\d+ Rob Squads|you have too many Rob Squads in your inventory",fail:"already helped your friend|request has expired"});o.add("propertyV2_collect_all_share",{name:"Get Free Property Parts",group:"doPropertyHelp",skipif:"you have already collected the maximum amount",fail:"already helped your friend|you are too late"});o.add("propertyV2_itemFeedHelp",{name:"Property item Help",group:"doPropertyHelp",skipif:"You have already helped \\d+ people today",fail:"has already received the maximum amount|You have already helped"});o.add("propertyV2_cs_redeem_special_item_feed",{name:"Property special help",group:"doPropertyHelp",fail:"cannot receive any more Exotic Feeds from you today"});o.add("ClanProperty_getPartsFromFeed",{match:{"item_id=20000":{name:"Get Reinforced Concrete"},"item_id=13000":{name:"Get Artillery Shell"}},name:"Get Clan Property Parts",group:"doPropertyHelp",skipif:"already collected the maximum number",fail:"already collected from this request|There was an issue processing your request"});o.add("index_levelup_boost_claim",{name:"Get levelup boost",group:"doClaimBonusAndReward",fail:"All of the available bonus rewards have already been claimed."});o.add("FeedOfTheDay_feed_accept",{name:"Collect Don's Gift",group:"doClaimBonusAndReward",fail:"already helped your friend with this request",skipif:"You have reached your limit for collecting"});o.add("job_mastery_feed_claim",{name:"Collect job Mastery reward",group:"doClaimBonusAndReward",skipif:"have claimed the maximum number",fail:"You can only claim this reward once"});o.add("quest_questFeedReward",{name:"Claim quest reward",group:"doClaimBonusAndReward",skipif:"you may only accept \\d+ rewards a day",fail:"the max number of people have already|you may only collect from a feed once|encountered an error"});o.add("job_accept_city_crew_feed",{name:"Join in a crew",group:"doCityCrew",fail:"Crew queue is full|users already assisted|time limit to assist|You are already",next:B});o.add("job_accept_city_crew",{name:"Join in a crew",group:"doCityCrew"});o.add("index_shortlink",{name:"Process Shortlinks",group:"doShortLinks",skipif:"You already have all parts needed for this level",fail:"already sent parts|All rewards from this feed have been claimed|You have already collected|feed has expired"});o.add("bossfightv2_ask_feed_click",{name:"Collect a Boss Fight item",group:"doClaimBonusAndReward",fail:"feed has expired"});o.add("map_mapboss_reward_claim",{name:"Claim boss reward",group:"doClaimBonusAndReward",fail:"You have already received"});o.add("propertyV2_getCustomer",{name:"Get a customer",group:"doPropertyHelp",fail:"You already helped this user"});o.add("propertyV2_cs_help_item",{name:"Send Property Parts",group:"doPropertyHelp",fail:"has received all the help"});o.add("index_send_energy",{name:"Send energy",group:"doSendEnergyAndPhones",fail:"You have already helped today|has already got their Energy"});o.add("index_power_pack_get",{name:"Send Power Pack",group:"doSendEnergyAndPhones",fail:"already helped|feed is expired|you have too many"});o.add("robbing_call_for_help_get_phone",{name:"Get robbing phone",group:"doSendEnergyAndPhones",fail:"too many friends help|You cannot help"});o.add("robbing_one_click_get",{name:"Get Rob Squad",group:"doSendEnergyAndPhones",fail:"you've already helped"});o.add("robbing_one_click_get",{name:"Get Rob Squad",group:"doSendEnergyAndPhones",fail:"you've already helped"});o.add("MafiaPoker_askCardFeed",{name:"Collect Poker Cards",group:"doClaimBonusAndReward",fail:"This feed is expired|already helped your friend|already collected from this request"});o.add("craftersChoice_feed_accept",{name:"Collect Event Craft Parts",group:"doPropertyHelp"});o.add("propertyV2_cs_help_initial",{name:"Property Started",group:"doPropertyHelp"});o.add("propertyV2_cs_help_final",{name:"Property Upgraded",group:"doPropertyHelp"})}function M(e,n,r){function a(){httpAjaxRequest({url:e,liteLoad:1,success:function(e){var u=h$(e);var a=u.find("script:regex(text,var user_fields)");if(Util.isFunc(n.next)){Logger.debug("is func");n.next.apply(n,[e,r]);return}var l,c=h$(e);if(n.next&&(l=c.find(n.next)).length>0){Logger.debug("Action Next");M(T(l),{},r,true);return}var h=_(e);if(h==false){if(i=="doCityCrew"){var p=$.trim(e);if(p.length<1e3){log("htmlText -> "+e);r("Sorry, you are maxed on joining crews for the day!");return}else{log("is_blank length -> "+p.length);log("htmlText -> "+e)}}if(s>o){log(e);s=0;r(t)}else{f()}}else{r(h,!Util.doRgxTest(n.fail,h))}},error:f})}function f(){if(s>o){log(htmlText);s=0;r(t);return}X("Bad response retry #("+(s+1)+"/"+o+")");s++;setTimeout(function(){a()},4500)}var i=n.group;var s=0;var o=u.get("errorretry");a()}function _(e){var t,n=h$(e);var r=false;if((t=n.find(".fl_Msg")).length>0){r=true}else if((t=n.find(".fl_Box")).length>0){r=true}else if((t=n.find(".message_body")).length>0){r=true}else if((t=n.find(".fl_Sorry1, .fl_Sorry2, div:first")).length>0){r=true}else{r=false}if(r==true){return t.html()}else{log("Failed to find response \nhtmlText.length ->"+e.length);return false}}function D(e){var t=$("li[feed="+e+"]");t.fadeOut(500,y(t,"remove"));s.remove(parseInt(e));$("#total_feeds","#feed_center_header").html(s.length())}function P(){R("feedlist","body");$("#status_panel").empty().append(c$("div").css({"text-align":"center","padding-top":5}).append(c$("span").text("There is some error in facebook response.")).append(b$("Retry","class:short white").css("margin-left",5).click(g.refresh_click)).append(b$("Cancel","class:short white").css("margin-left",5).click(g.skip_click)))}function H(e,t,n){n=String(u.get(n));if(u.get(t)&&n.length>1){return!(new RegExp(n.replace(/\s*,\s*/g,"|"),"i")).test(e)}return false}function B(e,t){var n,r=h$(e);var i=false;if(r.find("#CityCrewModule #crew_queue").length>0){i=r.find("#CityCrewModule #crew_queue .crew_empty_slot").length}else{if(r.find("#crew_queue").length>0){i=r.find("#crew_queue .crew_empty_slot").length}else{}}var s=_(e);if(s!=false){var o=!Util.doRgxTest("Crew queue is full|users already assisted|time limit to assist|You are already",s);if(i!=false){global.MaxCrewSlots=i}else if(o){if(global.MaxCrewSlots!=false)global.MaxCrewSlots--}t(s,o)}else{if(e.length<1e3){t("You have maxed out on joining crews",false)}else{t("There was a error in checking crew",false);log("failed to pass back ");console.log(e)}}}function j(e,t){function l(e){var t=false;var n;var r=false;var i=0;h$(e).find(o.att).each(function(e){t=this;n=h$(this).parent().find("img").attr("src");if(n.length<1)n=false;n=LucifersMOD.returnFBID(n);i++;if(n==false){return false}if(u.userwarfilteron===true&&Util.length(u.userwarfilter)>0&&Util.length(n)>0){Logger.debug("Checking facebook war friends");Util.each(u.userwarfilter,function(e){if(parseInt(n)==parseInt(e)){r=true;t=false}});if(r==true){Logger.debug("Skipping slot "+i+" ("+n+") is in our friends list");return}else{return false}}else{return false}});return t}function c(e,t){log("war url =>"+e);httpAjaxRequest({url:e,success:function(e){var n=Util.parsePopup(e);var r=h$(e);var s=l(e);if(s){c(T(s))}else{if(n&&n.length>0&&n.find){i=n.find(o.scs).text()}else{i=$(_(e)).text();log("message worked ->"+i)}h(r,t)}}})}function h(e,n){var a=true;e.find(o.shr).each(function(e,o){try{var f=Base64.decode(Util.uSplit(o.href).user);if(global.USER_ID===f){if(s){if(Util.isNumber(u.warLimitCount)){u.warLimitCount++}else{u.warLimitCount=1}u.save()}else if(u.warlootSecundaryLimit===true&&n){u.warloot[n].enabled=false}Logger.debug("Helped in War with loot: ( "+r+" )");t(i,true);return a=false}}catch(l){}});if(a){t(i,false)}}function v(e){if(!e.enabled){return false}var t=new RegExp(e.name==="*"?".":e.name,"i");var n=parseInt(Util.doRgx(/Attack:\s?(\d+)/i,r).$1||1);var i=parseInt(Util.doRgx(/Defense:\s?(\d+)/i,r).$1||1);return t.test(r)&&(n>=parseInt(e.att)||i>=parseInt(e.def))}var n=h$(e);var r=n.find(".helpers_rewards ul img").attr("title");var i="Wrong War Loot. ( "+r+" )";var s=false;var o={att:"a:regex(href,xw_controller=war&xw_action=attack)",shr:".war_attacks div.left a:regex(href,controller=stats)",scs:".post_help_results p, .pop_box > div > div > div:eq(1)",msg:".message_body:first"};if(!r){var a=n.find(".pop_box > div > div > div:eq(1)");if(a){log("War error message "+$(a).text());var f=$(a).html();t(f,false)}else{t("Unknow War loot. (check console log)",false);Logger.debug(e)}return}if(Util.length(u.warloot)<1&&u.warlootLimited.enabled!==true){t("Your War Loot filter is empty.",false);return}if(n.find(o.att).length<1){t("This war is already over.",false);return}if(u.warlootLimited.enabled){if(v(u.warlootLimited)){s=true;var p=l(e);c(T(p));return}if(u.warLimitCount<5){t("You need to collect +"+(5-u.warLimitCount)+" of your primary loot: ( "+r+" )",false);return}}for(var d in u.warloot){if(v(u.warloot[d])){var p=l(e);c(T(p),d);return}}t(i,false)}function F(e,t){var n=h$(e);var r=Util.parsePopup(e);var i=String($(".pop_box > div > div > div:eq(1)",r).text()||n.find(".fl_Box").text()||n.find(".message_body:first").text());var s=n.find(".helpers_rewards ul img").attr("title");var o=!Util.doRgxTest(this.fail,i)&&i.length>0;if(i.length<1){var u=n.find(".sexy_button_new skip").text();var o=!Util.doRgxTest(this.fail,i)&&i.length>0;if(s.length<1){if(u.length<1){i="There was some error.  check console html response debug"}}else{i="You cannot claim this reward"}}t(i,o)}function I(e,t){function i(){var e=Util.trim(String(u.dtLootPriority));if(!Util.isString(e)||e.length<1){return}else if(/\n/.test(e)){e=e.split(/\n/).join("|")}return e}function s(e){httpAjaxRequest({url:e.url,success:function(e){var n=h$(e).find("#collectText");if(n.length>0){t(n.text(),true)}else{t("User has received the reward before you.")}}})}var n=Util.parsePopup(e);var r=new v;$("#dt_body_area .collectbox .dt_pop_item",n).each(function(e,t){r.add(new d(t))});if(r.length()<1){if((n=h$(e).find(".message_body")).length>0){t(n.text())}else if((n=h$(e).find(".fl_Msg")).length>0){t(n.text());Logger.debug("Daily take info was .fl_Msg")}else if((n=h$(e).find(".fl_Box")).length>0){t(n.text());Logger.debug("Daily take info was .fl_Msg")}else{t('This "Daily Take" was taken.')}return}if(n=i()){if(n=r.getByName(n)){s(n);return}}if(u.dtCheckMinAtkDef){if(n=r.getByStats(u.dtMinAttack,u.dtMinDefense)){s(n);return}}t("Filtered. ("+r.names()+")")}function q(e,n){var r=h$(e);if(e$(".socialMissionSelector",r)==null){n("You can't join. Try helping out other mafia members.");return}try{var i=u.get("maxFreeSlots");var s=$(".missionSelectHeaderTitle",r).text();var o=$(".missionDifficulty > span",r).attr("class");var a=parseInt($("#hfopt_joinmission").val());var f=parseInt($("#hfopt_joinmissionafter").val());var l="a:regex(onclick,action=selectPosition)";var c=$(l,r).length;var h=new Array;var p="";var d=0;if(H(s,"opUseNameFilter","opNameFilter")){n('Filtered name <span style="color:yellow">"'+s+"</span>.");return}if(c>i){n('Filtered <span style="color:yellow">"'+s+"</span>. Too many slots free ("+c+").");return}if(!u.get("diff_"+o.toLowerCase())){n('Filtered <span style="color:yellow">'+s+"</span>. Difficulty don't match.");return}$(".missionSelectorBox:has("+l+")",r).each(function(e,t){var r=0;var i=e$("dd.experience",t)!==null;var o=e$("dd.energy",t)!==null;var a=e$("dd.stamina",t)!==null;var f=false;if(i&&(a||o)){var c=e$("dd.experience",t).text();log("opExperience ->"+c);var v=0;if(a){log("hasStamina");p="Stamina ";v=parseInt(e$("dd.stamina",t).text());log("opEnergyStamina -> "+v)}if(o){log("hasEnergy");if(/stamina/i.test(p)){p+=" & Energy"}else{p=" Energy"}v=v+parseInt(e$("dd.energy",t).text());log("opEnergyStamina -> "+v)}d=(c/v).toFixed(2);if(d>parseInt(u.misjobratio)==false){n('Filtered <span style="color:yellow">"'+s+"</span> ratio "+d+" was less than "+u.misjobratio);return}}else{log("couldnt find ratio");n("Couldnt find ratio");return}log("misjobratio -> "+u.misjobratio);log("opRatio -> "+d);if((o||a)&&!Util.isSet(h[4])){h[4]=$(l,t)}if(o&&!a){r=1}else if(!o&&a){r=2}else if(o&&a){r=3}if(!Util.isSet(h[r])){Logger.debug("Adding SpendType: "+r);h[r]=$(l,t)}});var v=h[a]||h[f];if(typeof v=="undefined"||v.length<1){n('Filtered <span style="color:yellow">"'+s+"</span> ratio ("+d+") & "+p+" doesn't match filters");return}}catch(m){Logger.error(m);return}var g=T(v);var y="taskDoJob_"+Util.uSplit(g).instance_id;httpAjaxRequest({url:g,success:function(e){var r=new RegExp(y,"ig");if(r.test(e)){n('You have joined in <span style="color:yellow">"'+s+"</span> mission.",true)}else{log("mission_button -> \n"+y);n(t)}}})}function R(e,t,n,r){$("div[id*=_"+t+"]",a.content).hide();var i=$("#"+e+"_"+t,a.content);if(n){i.fadeIn(n,r)}else{i.show()}}function z(e,t){if(Util.isObject(t)){log("action.name -> "+e.action.name);log("isObject -> "+concat(t))}var n=$("#logList");var r=e.action.name;var i=e.feed;if(n.children().length>u.get("maxLogLength")){n.children().last().remove()}var s=c$("li"),o,a;var f=i.attachment;var l;if(Util.isSet(i.actions)||i.actions){l=i.actions[0].link}else{var c=i.id.replace("_","/posts/");l="https://www.facebook.com/"+c}var h=c$("a","target:_black").attr("href",l).text(i.name||i.description);var p=i.picture?c$("img","class:feed_icon,title:"+r).attr("src",i.picture):c$("span");o=c$("div").addClass("li_wrapper clearfix").appendTo(s).append(p);if(u.autolike==true){facebook.likeAdd(i.id);a=c$("div","class:buttons").appendTo(o).append(c$("span","class:ignore,postid:"+i.id).text("Liked!")).append(c$("div").css("clear","both"))}else{a=c$("div","class:buttons").appendTo(o).append(c$("a","href:#,class:ignore,postid:"+i.id).text("Like it").click(g.likeFeed_click)).append(c$("div").css("clear","both"))}c$("div","class:body").append(c$("h4").append(h)).append(c$("p").html(t)).appendTo(o);s.prependTo(n);o.mouseenter(g.selectHelp).mouseleave(g.unselectHelp);if(u.get("CommentOn_"+e.gid)==true){message=$.trim(h$("<div>"+t+"</div>").text());if(!i.id||!(Util.isString(message)&&message.length>2)){return}U++;facebook.commentAdd(i.id,message,function(e){if(!e||e.error){newcmt=/(.*?)\./.exec(message)[1];facebook.commentAdd(i.id,newcmt,function(e){if(!e||e.error){facebook.commentAdd(i.id,"Clicked feed and helped")}})}a.append(c$("span","class:ignore,postid:"+i.id).text("Commented!")).append(c$("div").css("clear","both"))})}else{k(a,i.id,t)}}function W(e,t){var n=Util.setColor("["+(new Date).toLocaleTimeString()+"] ","grey");var r=$("#logSkippedList");var i;if(Util.isSet(e.feed.actions)||e.feed.actions){i=Util.setAnchor(e.feed.actions[0].link,e.action.name)}else{log("feed ->"+JSON.stringify(e));var s=streamfeed.id.replace("_","/posts/");var o="https://www.facebook.com/"+s;i=Util.setAnchor("https://www.facebook.com/"+s,e.action.name)}if(r.children().length>u.get("maxLogLength")){r.children().last().remove()}if(/div/.test(t)){t=$.trim(LucifersMOD.StripHtml(t))}t='<span style="overflow:hidden;">'+t+"</span>";Resources.getPicture("info_icon","li").prependTo(r).append(c$("p").html(n+" "+i+": "+t))}function X(e){if(e$("#homefeedcenter_docked_collecting")){$("#homefeedcenter_docked_collecting").text(e)}Resources.getPicture("ajax_loader","span").css("padding-left",18).appendTo($("#auto_feed_helper_messages").empty()).html(e)}function V(){function l(e,o){if(i){return}$("#completed_helps").text(a);$("#skipped_helps").text(f);if(u.doCityCrewSlots===true){if(global.MaxCrewSlots!==false){$("#crew_slots").text(global.MaxCrewSlots)}}if(e$("#homefeedcenter_docked_status")){$("#homefeedcenter_docked_status").text("Completed : "+a+"  | ")}$("#total_feeds","#feed_center_header").html(s.length());if(s.length()<1){if(e$("#homefeedcenter_docked_collecting")){r.start("All helps finished!. continue in %N% seconds.",t)}n.start("All helps finished!. continue in %N% seconds.",t,p);return}if(!o){h(s.shift())}else{n.start(""+e,o,function(){h(s.shift())})}}function h(t){function n(e){Logger.debug(t.action.name+" skipped.");if(Util.isSet(e)){W(t,e)}f++;l()}if(i){return}if(!Util.isSet(t)||!Util.isSet(t.action)){l();return}try{if(t.isCollected()){n();return}if(!u.doShortLinks&&t.shortlink){n();return}if(!u.get(t.gid)){n();return}if(Util.isSet(u.get(t.gid.substr(2)))){if(u.get(t.gid.substr(2))[t.id]===false){n();return}}if(t.action.skip===true){n();return}if(u.userFilterOn===true){if(t.isFriend===false){X("Skipping help not in friend list in");n();return}}if(u.doCityCrewSlots===true&&t.action.group=="doCityCrew"){log("running max crew");if(global.MaxCrewSlots!==false){log("MaxCrewSlots -> "+global.MaxCrewSlots);if(global.MaxCrewSlots<=0){log("Skipping City Crew Collection");X("Skipping City Crew Collection, Crew Slots are Maxed");n();return}}}var r=/You have already the max|both reached your limit|cannot gift this item|only send parts to friend|collect from friend.s feed|You are at max capacity|You have already sent|has all parts needed|maximum amount of players have|maxed out on rewards|Please try again|You have sent the maximum amount|already collected|have been claimed|cannot receive|error|You are too late|already completed the mission|feed has expired|already received your free boost|can only claim this reward once|already part of the Crew|cannot earn anymore Burners|can only collect 5 Rob Squads|already got their Energy Pack|already in the Crew|only receive 10 free|not friends|have already helped|Sorry/;if(t.gid=="doDailyTake"&&u.dtOnlyGolden){var s=/gold/;if(!Util.doRgxTest(s,t.feed.description)){X("Skipping Daily Take NOT Golden Take");n();return}}if(t.shortlink===false){M(t.url,t.action,function(n,i){X("Helping in:  "+t.action.name);var s=n;n=C(n);t.collected();t.action.skip=Util.doRgxTest(t.action.skipif,n);if(/detected irregular behavior/.test(n)){n="Sorry There was a error check console"}if(t.action.skip||i!==true||Util.doRgxTest(r,n)){W(t,n)}else{z(t,n)}a++;l("Done!, Next in %N%...",e)})}else{var c="";log("feed ->"+JSON.stringify(t));function h(n){if(n<t.shortlinks.length){var i="( "+(n+1)+"/"+t.shortlinks.length+" ) ";X("Processing : "+i+t.shortlinks[n]);unshort(t.shortlinks[n],function(e){if(!e){n++;h(n);return}var i=Util.uSplit(e);try{var s=i.next_controller+"_"+i.next_action;i=N(i);var a=o.get(s,i);var f=a?a.group:"";if(Util.isSet(u.get(f.substr(2)))){if(u.get(f.substr(2))[s]===false){p(n);return}}else{p(n);return}}catch(l){p(n);return}M(i,a,function(e,i){e=C(e);a.skip=Util.doRgxTest(a.skipif,e);log("action.skip -> "+a.skip);if(a.skip||i!==true||Util.doRgxTest(r,e)){try{W(t,e)}catch(s){}}else{c+="Link : "+(n+1)+e}p(n)})})}else{log("feed link -> http://facebook.com/"+t.feed.id);if(c.length>5){try{z(t,c)}catch(s){}}a++;l("Done!, Next in %N%...",e);log("finished")}}h(0);function p(e){e++;h(e)}}}catch(d){Logger.error("collectStream: "+d.message);l()}}function p(){function r(e){n.start(e,t,p)}e=u.get("helpDelay");t=A();if(i){return}X("Refreshing home posts...");if(u.doCityCrewSlots===true&&global.MaxCrewSlots==false){checkCitySlots()}G(function(e){if(e&&e.error){r(e.error.message+" try again in %N%...");return}if(!Util.isArray(e)||e.length<1){r("Error loading posts, try again in %N%...");return}if((s=new c(e,true,true)).length()<1){r("No new posts, try again in %N%...");return}$("#total_feeds","#feed_center_header").html(s.length());h(s.shift())})}global.HFCRunning=true;UserConfig.main.set("opt_hfc_restart",true);UserConfig.main.save();global.hfc_auto=true;u.save();var e=u.get("helpDelay");var t=A();var a=0;var f=0;$("#status_panel").empty();c$("div").appendTo("#status_panel").css({"font-size":12,padding:"5px 0 0 6px","float":"left"}).append(c$("span","title:How many successful feeds you have collected").css("color","green").text("Success: ")).append(c$("span","completed_helps").text(0)).append(c$("span","title:How many city crew slots are availble").css({"font-size":12,color:"green","margin-left":3}).text("Crew : ")).append(c$("span","crew_slots").text(0)).append(c$("span","title:How many feeds have been skipped").css({"font-size":12,color:"green","margin-left":3}).text("Skip: ")).append(c$("span","skipped_helps").text(0));c$("div","auto_feed_helper_messages").appendTo("#status_panel").html("Preparing...").css({padding:"5px 0 0 10px","float":"left"});b$("CANCEL","class:short red").click(g.cancel_click).appendTo("#status_panel").css({"float":"right","margin-right":5});if(global.BFDock==false){b$("DOCK","class:short orange").click(LucifersMOD.dock.hfc).appendTo("#status_panel").css({"float":"right","margin-right":5})}b$("CONFIG","id:modHFCconfig,class:short orange").click(g.config_click).appendTo("#status_panel").css({"float":"right","margin-right":5});R("automode","body");R("status","panel",500);u.fromDomElements();u.save(function(){i=false;if(typeof s.length()!=="undefined"&&s.length()>0){s.slice(u.feedsLimit);h(s.shift())}else{p()}})}function J(){function i(){return c$("center").css("margin-top",10).html("This category don't have any configuration.")}function l(){return c$("div").css({"margin-top":5,border:"1px solid #4F4F4F",height:205}).append(x$("hfopt_doCityCrewSlots","Don't join crew if maxed on city crew slots","div"))}function c(e){var t=c$("div");var n=String(e).toLowerCase();var r=u.get(e);var i=c$("div","class:select_tab,name:checkboxlist,id:hfopt_"+n);i.height(150).width(400).appendTo(t);t$("action_skipif","Skip Check:",335,{change:g.action_issue_change,focusout:g.action_issue_change}).appendTo(t).css({"float":"right",margin:"5px 0px 0px 0px"});t$("action_fail","Fail Check:",335,{change:g.action_issue_change,focusout:g.action_issue_change}).appendTo(t).css({"float":"right",margin:"5px 0px 0px 0px"});o.each(function(t,n){var s=u.actions.skipif[t];var o=u.actions.fail[t];if(n.group!=="do"+e){return}if(!Util.isSet(r[t])){r[t]=true}if(Util.isString(s)&&s.length>0){n.skipif=s}if(Util.isString(o)&&o.length>0){n.fail=o}c$("div","name:"+t).appendTo(i).click(g.subconfig_change).append(x$(t).attr("value",t).css("margin",0)).append(c$("p").text(n.name))});return t}function h(){var e=c$("div");var t=new TabObject({id:"hfc_filters_wrapper",appendTo:e,height:177,tabs:["General","Auto","Friend List","War Friends"]});c$("div").css("padding",5).appendTo(t.content[0]).append("Process Shortlinks").append(x$("hfopt_doShortLinks").append(c$("span").text("spockon.me|tinyurl|bit.ly BETA").css("font-size",10))).append(c$("div").css({clear:"both","margin-top":5})).append(n$("hfopt_feedslimit","Feeds Limit",100)).append(c$("div").css({clear:"both","margin-top":5})).append(s$("hfopt_maxloglength","Log Length:",100)).append(c$("div").css({clear:"both","margin-top":5})).append(s$("hfopt_helpdelay","Help delay:",100)).append(c$("div").css({clear:"both","margin-top":0})).append(s$("hfopt_refreshdelay","Refresh delay:",100)).append(c$("div").css({clear:"both","margin-top":0})).append(n$("hfopt_errorretry","Error retries:",100));c$("div","class:ui-autofeatures").appendTo(t.content[1]).append(c$("div","class:select_tab,name:checkboxlist,id:hfopt_autocomment").height(160).width(400).append(c$("div").css({clear:"both","margin-top":5})).append(x$("hfopt_autolike","Auto Like Posts")).append(c$("div").css({clear:"both","margin-top":5})).append("Auto Comment On :").append(c$("div").css({clear:"both","margin-top":5})).append(x$("hfopt_CommentOn_doGotoWar"," Go to War ")).append(c$("div").css({clear:"both","margin-top":0})).append(x$("hfopt_CommentOn_doGiveSocialHelp"," Give Social Help ")).append(c$("div").css({clear:"both","margin-top":0})).append(x$("hfopt_CommentOn_doDailyTake"," Daily Take ")).append(c$("div").css({clear:"both","margin-top":0})).append(x$("hfopt_CommentOn_doSocialMissions"," Operations ")).append(c$("div").css({clear:"both","margin-top":0})).append(x$("hfopt_CommentOn_doClaimBonusAndReward"," Claim Bonus And Reward ")).append(c$("div").css({clear:"both","margin-top":0})).append(x$("hfopt_CommentOn_doPropertyHelp"," Property Help ")).append(c$("div").css({clear:"both","margin-top":0})).append(x$("hfopt_CommentOn_doSendEnergyAndPhones"," Send Energy And Phones ")).append(c$("div").css({clear:"both","margin-top":0})).append(x$("hfopt_CommentOn_doCityCrew"," City Crew ")).append(c$("div").css({clear:"both","margin-top":0})).append(x$("hfopt_CommentOn_doShortLinks"," Shortlink posts ")).append(c$("div","class:ui-right").css("margin-right",4)));c$("div","class:ui-filterlist").appendTo(t.content[2]).append(c$("div","class:ui-top").append(x$("hfopt_userfilteron","Friends filter ")).append(c$("div","class:ui-right").css("margin-right",4).append(c$("a","href:#,class:ui-button").text("Edit").click(g.addUserToFilter_click)).append(c$("span,id:spacer").html(" | ")).append(c$("a","href:#,class:ui-button").text("Clear").click(g.clearUserFilter_click)))).append(c$("select","id:hfopt_userfilter,multiple:multiple"));c$("div","class:ui-filterlist").appendTo(t.content[3]).append(c$("div","class:ui-top").append(x$("hfopt_userwarfilteron","Skip Hitting War Friends ")).append(c$("div","class:ui-right").css("margin-right",4).append(c$("a","href:#,class:ui-button").text("Edit").click(g.addUserToFilter_click)).append(c$("span,id:spacer").html(" | ")).append(c$("a","href:#,class:ui-button").text("Clear").click(g.clearUserFilter_click)))).append(c$("select","id:hfopt_userwarfilter,multiple:multiple"));return e}function p(){var e=c$("div").append(c$("div").html('Primary Loot <span id="warlimit_count" style="color:green">(0/5)</span>:').append(c$("div","class:ui-right").append(c$("a","href:#,class:ui-button,limited:1").text("Edit").click(g.addWarloot)).append(c$("span").text(" | ")).append(c$("a","href:#,class:ui-button").text("reset").click(g.resetLimitedWarloot)))).append(c$("div").css("clear","both")).append(c$("input:text","id:warlootlimited_data").width(420)).append(c$("div").text("Secundary Loot:").css({clear:"both","margin-top":5}).append(x$("hfopt_warlootsecundarylimit","One time.").css("margin-left",15)).append(c$("div","class:ui-right").append(c$("a","href:#,class:ui-button").text("Add").click(g.addWarloot)).append(c$("span").text(" | ")).append(c$("a","href:#,class:ui-button").text("Edit").click(g.editWarloot)).append(c$("span").text(" | ")).append(c$("a","href:#,class:ui-button").text("Remove").click(g.removeWarloot)).append(c$("span").text(" | ")).append(c$("a","href:#,class:ui-button").text("toggle").click(g.toggleWarloot)))).append(c$("select","id:warloot_data,multiple:multiple").css({width:420,height:110,"margin-top":2}));return e}function d(){return c$("div").append(x$("hfopt_dtOnlyGolden","Only Collect Golden Takes","div")).append(c$("div").text("1st CHECK -> Loot Priority/Filter")).append(c$("textarea","cols:50,rows:8,id:hfopt_dtlootpriority")).append(c$("div").css("clear","both").css("margin-top",5)).append(x$("hfopt_dtcheckminatkdef","2nd Check -> Minimal Attack/Defense","div")).append(n$("hfopt_dtminattack","Minimal Attack:",60)).append(n$("hfopt_dtmindefense","-OR- Minimal Defense:",60))}function v(){var e=c$("div");c$("div").css("margin",5).append(c$("span").text("Mission difficulty: ")).append(c$("input:checkbox","id:hfopt_diff_easy")).append(c$("label","for:hfopt_diff_easy").text("Easy")).append(c$("input:checkbox","id:hfopt_diff_medium")).append(c$("label","for:hfopt_diff_medium").text("Medium")).append(c$("input:checkbox","id:hfopt_diff_hard")).append(c$("label","for:hfopt_diff_hard").text("Hard")).appendTo(e);c$("div").css("margin",5).append(c$("label","for:hfopt_joinmission").text("Join only in: ")).append(c$("select","id:hfopt_joinmission").width(90)).append(c$("label","for:hfopt_joinmissionafter").text(" if not possible then: ")).append(c$("select","id:hfopt_joinmissionafter").width(90)).appendTo(e);c$("div").css("margin",5).append(c$("label","for:hfopt_maxfreeslots").text("And only if remain: ")).append(c$("select","id:hfopt_maxfreeslots").width(110)).append(c$("span").text("Job Ratio: > ").css("margin",10).append(c$("input","type:text,id:hfopt_misjobratio").css({margin:10,width:50}))).appendTo(e);c$("div").css("margin",5).append(x$("hfopt_opusenamefilter","Active Operation Name Filter:")).append(c$("br")).append(c$("textarea","cols:45,rows:6,id:hfopt_opnamefilter")).appendTo(e);return e}var e=c$("div","control_panel").height(35);var t=c$("div","config_panel");var n=c$("select","id:hfopt_grouping").width(152);var r=c$("div","id:main_selector,class:select_tab").css({width:250,height:200});a.content.css("margin-top",5);c$("dl","class:total_requests").appendTo(c$("div","feed_center_header").appendTo(a.header)).append('<dt id="total_feeds">'+s.length()+"</dt>").append("<dd>Total Posts</dd>");c$("div","id:minipopup_overlay").appendTo(a.content);c$("div","id:minipopup_content").appendTo(a.content);c$("div","panel_container").appendTo(a.content).append(c$("div","status_panel").height(35)).append(e).append(t);c$("div","class:search_box").appendTo(e).append(c$("label","for:hfopt_filter").text("Search: ")).append(c$("input:text","id:hfopt_filter").width(149).keyup(g.keyup)).append(n.change(g.change));c$("div","class:control_box").appendTo(e).append(b$("Clear all","class:short white").click(g.clearall)).append(b$("Refresh","class:short orange").css("margin-left",5).click(g.refresh_click)).append(b$("Config","class:short orange").css("margin-left",5).click(g.config_click)).append(b$("Auto Help","class:short orange").css("margin-left",10).click(V));r.appendTo(t);Util.each(f,function(e,t){var i=c$("div","name:"+e).appendTo(r).click(g.config_change);n.append(c$("option","value:"+e).text(t));if(e!=="none"){i.append(x$("hfopt_"+e.toLowerCase()).css("margin",0))}c$("p").text(t).appendTo(i)});$("div[name=none]",r).addClass("selected");t.append(c$("div","class:config_tab,id:none_config").append(h())).append(c$("div","class:config_tab,id:doGotoWar_config").append(p())).append(c$("div","class:config_tab,id:doGiveSocialHelp_config").append(c("GiveSocialHelp"))).append(c$("div","class:config_tab,id:doSocialMissions_config").append(v())).append(c$("div","class:config_tab,id:doClaimBonusAndReward_config").append(c("ClaimBonusAndReward"))).append(c$("div","class:config_tab,id:doPropertyHelp_config").append(c("PropertyHelp"))).append(c$("div","class:config_tab,id:doAcceptGiftEvent_config").append(i())).append(c$("div","class:config_tab,id:doCityCrew_config").append(l())).append(c$("div","class:config_tab,id:doDailyTake_config").append(d())).append(c$("div","class:config_tab,id:doSendEnergyAndPhones_config").append(i())).append(c$("div","class:save_config").append(b$("Save Configuration","class:short orange").click(g.save_click)));c$("div").appendTo(a.content).css({width:"100%",height:35});c$("div","feedlist_body").height(700).appendTo(a.content);c$("div","ajaxloader_body").css("padding-top",25).height(675).append(c$("img").attr("src",global.zGraphicsURL+"socialmissions/ajax-loader.gif")).appendTo(a.content);c$("div","automode_body").height(700).append(c$("ul","id:logList,class:feed_box").height(400)).css("border-bottom","2px solid #333;").append(c$("ul","id:logSkippedList,class:skipped_log").height(300)).appendTo(a.content);a.applyOptions({hfopt_userfilteraction:{skip:"Skipping",help:"Helping"},hfopt_maxloglength:{50:"50",200:"200",500:"500",1e3:"1000"},hfopt_joinmission:{4:"Any",1:"Energy",2:"Stamina",3:"Both"},hfopt_joinmissionafter:{0:"None",1:"Energy",2:"Stamina",3:"Both",4:"Any"},hfopt_maxfreeslots:{100:"Any slots",1:"1 slot",2:"2 slots",3:"3 slots",4:"4 slots"},hfopt_helpdelay:{0:"None",1:"1 sec",2:"2 sec",3:"3 sec",5:"5 sec"},hfopt_refreshdelay:{2:"2 sec",5:"5 sec",15:"15 sec",30:"30 sec",60:"1 min",180:"3 min",300:"5 min",600:"10 min"}})}function K(){var e,t=c$("ul","class:feed_box").height(700);s.each(function(n,r){var i=r.feed;try{var s=i.actions[0].link}catch(o){log("feed ->"+JSON.stringify(i))}var u="";if(Util.isSet(i.actions)||i.actions){u='<a href="'+i.actions[0].link+'" target="_black">'}else{var a=i.id.replace("_","/posts/");u='<a href="https://www.facebook.com/'+a+'" target="_black">'}var f=i.description?i.description:i.name;if(!Util.isSet(i.description)||!i.description){if(Util.isSet(i.message)||i.message){f=i.message;f=f.replace(/\n{1,3}/gi,"<br/>")}}if(!Util.isSet(i.name)||!i.name){u+=i.from.name+" needs your help "+"</a>"}else{u+=(i.name||i.description)+"</a>"}e=c$("li","gid:"+(r.gid||"none")+",feed:"+n).appendTo(t);if(r.isNew){e.addClass("new_post")}e=c$("div","class:li_wrapper clearfix").appendTo(e);if(i.picture){c$("img","class:feed_icon").attr("src",i.picture).appendTo(e)}c$("div","class:buttons state_accept").appendTo(e).append(b$("Help","class:medium white,feed:"+n).click(g.helpFeed_click)).append(c$("a","href:#,class:ignore,feed:"+n).text("ignore").click(g.deleteFeed_click));c$("div","class:buttons state_completed").appendTo(e).css("display","none").append(b$("Clear","class:medium white,feed:"+n).click(g.deleteFeed_click)).append(c$("div").css("clear","both")).append(c$("a","href:#,class:ignore,postid:"+i.id).text("like it").click(g.likeFeed_click)).append(c$("div").css("clear","both"));c$("div","class:body").append("<h4>"+u+"</h4><p>"+f+"</p>").appendTo(e)});$("#feedlist_body").empty().append(t);$("#total_feeds","#feed_center_header").html(s.length());if($("#hfopt_grouping").val()!=="none"){$("#hfopt_grouping").change()}}function Q(){var e=Math.max(parseInt(u.feedsLimit/2),25);if(u.feedsLimit>25){showHelpPopup({icon:"error",title:"No home posts found",message:"There was an error while loading your home posts<br>"+"would you like to reset feeds limit and disable friends filter before try again?.",buttons:[{label:"Yes",addClass:"short white",onclick:function(){u.fbListFilterOn=false;u.userFilterOn=false;u.feedsLimit=50;u.save(Y)}},{label:"No"}]})}else{showHelpPopup({icon:"error",title:"No home posts found",message:"There was an error while loading your home posts<br>"+"And your feed limit is very low, try again later."})}}function G(e){var t="&limit="+u.feedsLimit;if(u.feedsLimit<5)t="";MWFB.api("/me/home/?filter="+AppInfo.id+t,function(t){e(t&&t.data)});return}function Y(){var t=loadingScreen("Loading home posts...");G(function(n){t.hide();if(UserConfig.main.autorestart&&UserConfig.main.get("opt_hfc_restart")==true){if(typeof e=="function"){e&&e()}setTimeout(function(){V()},2500)}if(!Util.isSet(n)||n.error||n.length<1){Q();return}o=new p;O();s=new c(n);Logger.debug("HFC: "+s.length());J();u.toDomElements();K();x();R("feedlist","body");R("control","panel");R("none","config");a.applyCustomClass();a.show()})}if(demonRunning("feed")==true){}if(global.HFCRunning==true&&global.HFCDock==true){LucifersMOD.dock.hfc();return false}overlay=loadingScreen("Loading home posts...");const t="Unexpected server response, check this stream manually by clicking the yellow link.";var n=new TimerMessage("#auto_feed_helper_messages");var r=new TimerMessage("#homefeedcenter_docked_collecting");var i=false;var s;var o;var u=UserConfig.hfopt;var a=new PopupObject("homefeedcenter_popup",{type:"main",title:"HOME FEED CENTER",onclose:function(){UserConfig.main.set("opt_hfc_restart",false);UserConfig.main.save();global.HFCRunning=false;i=true;global.hfc_auto=false;httpAjaxStopRequests();n.clear();u.fromDomElements();u.save()}});var f={none:"General",doGotoWar:"Go to War",doGiveSocialHelp:"Give Social Help",doDailyTake:"Daily Take",doSocialMissions:"Operations",doClaimBonusAndReward:"Claim Bonus And Reward",doPropertyHelp:"Property Help",doSendEnergyAndPhones:"Send Energy And Phones",doCityCrew:"City Crew"};var l=function(e){var t=this;var n,r=false;t.shortlinks=[];try{if(!e.actions){}try{var i=e.actions.length-1;var s=e.actions[i].link;var a=e.actions[i].name}catch(f){}if(!/apps.facebook/.test(s)&&/posts/.test(s)){if(Util.isSet(e.link)){s=e.link}}t.shortlink=false;if(Util.isSet(e.message)||e.message){t.message=e.message;if(/(\b(https?):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig.test(e.message)){var l=/(\b(https?):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig.exec(e.message);if(Util.isSet(l)){var c=e.message.split("\n");for(link_id in c){var h=c[link_id];if(m=/(http\:\/\/[^\s]*)/ig.exec(h)){if(/(spockon.me|tiny|bit.ly|is.gd|goog.le|screepts.com)/.test(h)){t.shortlinks.push(m[1]);r=true;t.shortlink=true}}}}}}t.url=Util.uSplit(s);if(!t.url){throw Error("Stream: Invalid href")}var p=Date.parse(e.created_time);t.id=t.url.next_controller+"_"+t.url.next_action;if(r){t.shortlink=true;t.id="index_shortlink"}t.url=N(t.url);t.action=o.get(t.id,t.url);t.isValid=true;t.feed=e;t.user_name=e.from.name;t.user_id=e.from.id;t.isFriend=false;if(t.url.next_controller=="undefined"){t.isValid=false;log(t.id)}if(t.id=="index_view"){t.isValid=false}if(!/apps.facebook/.test(s)&&!r||/profile.php|cogsObject/.test(s)){t.isValid=false;if(typeof s!=="undefined"&&!/has whacked|iced by|body count/.test(t.message)&&!/scrape|undefined|profile.php|cogsObject|post/ig.test(s)){}}if(u.userFilterOn===true){if(u.userFilterOn===true){Util.each(u.userFilter,function(e){if(e==t.user_id){t.isFriend=true;log("User is friend")}})}}t.isNew=p>u.lastPostTimeListed;t.gid=t.action?t.action.group:""}catch(d){Logger.error(d);t.id="Unknow";t.isValid=false}if(!t.isValid&&!/Declare war on your enemies|iced|kill|boost|whacked|rival|body count|You fought|eliminated some players/.test(t.message)){if(Util.isSet(e.link)&&/Play Now/.test(a)==false){t.url=Util.uSplit(e.link);t.id=t.url.next_controller+"_"+t.url.next_action;t.url=N(t.url);t.action=o.get(t.id,t.url)}}t.isCollected=function(){var t=u.collectedStreams;if(Util.isArray(t)){return t.indexOf(e.id)!==-1}else{u.set("collectedStreams",new Array);u.save()}return false};t.collected=function(){var t=u.collectedStreams;if(!Util.isArray(t)){u.set("collectedStreams",t=new Array)}else if(t.length>199){t=t.splice(0,1)}t.push(e.id);u.save()};return this};var c=function(e,t,n){var r=u.get("lastPostTimeListed");var i=r;var s=new Array;this.get=function(e){return s[e]};this.shift=function(){return s.shift()};this.remove=function(e){s[e]=null};this.length=function(){var e=0;for(var t=0;t<s.length;t++){if(Util.isSet(s[t])){e++}}return e};this.each=function(e){Util.each(s,e)};this.slice=function(e){s=s.slice(0,e)};Util.each(e,function(n){feed=e[n];if(feed&&feed.created_time){var r=parseFloat(facebook.session.uid);var o=parseFloat(feed.from.id);var u=feed.target_id?parseFloat(feed.target_id):null;var a=Date.parse(feed.created_time);if(a>i){i=a}if(o!==r&&(u==null||u==r)){var f=new l(feed);if(f.isValid&&(t!==true||f.isNew)){s.push(f)}}}});u.set("lastPostTimeListed",i);u.save();this.lastTime=i;return this};var h=function(e){this.name=e.name;this.group=e.group;this.next=e.next;this.skipif=e.skipif;this.fail=e.fail;return this};var p=function(){var e=new Object;this.add=function(t,n){e[t]=n};this.get=function(t,n){var r=e[t];if(r&&r.match&&Util.isString(n)){Util.each(r.match,function(e,t){if(n.indexOf(e)>-1){t.skipif=r.skipif;t.group=r.group;t.fail=r.fail;t.next=r.next;r=t;return false}})}return r};this.each=function(t){Util.each(e,t)};return this};var d=function(e){var t=/do_ajax\('popup_fodder','(remote\/html_server.php[^']+)/i;var n=$("div:first img",e);this.pic=n.attr("src");this.url=Util.doRgx(t,$(".collectbutton a",e).attr("onclick")).$1;this.attack=parseInt($(".attack",e).text()||0);this.defense=parseInt($(".defense",e).text()||0);this.name=n.attr("title");return this};var v=function(){var e=new Array;this.add=function(t){if(t&&t.url){e.push(t)}};this.length=function(){return e.length};this.get=function(t){return e[t]};this.getByName=function(t){var n;if(Util.isString(t)&&t.length>0){var r=new RegExp(t,"i");Util.each(e,function(e,t){if(r.test(t.name)){n=t;return false}})}return n};this.getByStats=function(t,n){var r;if(Util.isString(name)&&name.length>0){Util.each(e,function(e,i){if(i.attack>=t||i.defense>=n){r=i;return false}})}return r};this.names=function(){var t=new Array;Util.each(e,function(e,n){t.push(n.name)});return t.join(", ")};this.each=function(t){Util.each(e,t)};return this};var g={toggleWarloot:function(){Util.each(u.warloot,function(e,t){t.enabled=t.enabled!==true});x();return false},selectHelp:function(){var e=$(this),t=$("#logList");var n=e.position(),r=e.width();var i=t.position().top;var s=i+t.height()-e.outerHeight();e.addClass("selected").css({top:Math.max(i,Math.min(s,n.top)),width:r})},unselectHelp:function(){$(this).removeAttr("style").removeClass("selected")},likeFeed_click:function(){var e=$(this);e.unbind().css("opacity",.5);facebook.likeAdd(e.attr("postid"),function(t){if(t===true){e.replaceWith(Util.setColor("Liked!","yellow")).css("opacity",1)}else{e.replaceWith(Util.setColor("Fail","red")).css("opacity",1)}});return false},removeWarloot:function(){var e=$("#warloot_data option:selected");if(e.length>0){e.each(function(e,t){delete u.warloot[t.value]});u.save(x)}return false},editWarloot:function(){var e=$("#warloot_data option:selected:first");if(e.length>0){E();S(u.warloot[e.val()])}return false},addWarloot:function(){E();S($(this).attr("limited")?u.warlootLimited:{});return false},resetLimitedWarloot:function(){u.warLimitCount=0;u.save(x);return false},addFblistToFilter_click:function(){w();return false},addUserToFilter_click:function(){var e=new Array;var t;$("#hfc_filters_wrapper .tab_button").each(function(){if($(this).hasClass("active")){var e=$(this).find(".button_middle").text();if(/War/.test(e)){t=$("#hfopt_userwarfilter")}else{t=$("#hfopt_userfilter")}}});$("option",t).each(function(t,n){e.push(n.value)});showFriendsSelector(function(e){if(e&&e.length>0){t.empty();Util.each(e,function(e,n){c$("option","value:"+n.uid).text(n.name).appendTo(t)})}},e);return false},clearUserFilter_click:function(){$("#hfc_filters_wrapper .tab_button").each(function(){if($(this).hasClass("active")){var e=$(this).find(".button_middle").text();if(/War/.test(e)){$("#hfopt_userwarfilter",a.content).empty()}else{$("#hfopt_userfilter",a.content).empty()}}});return false},clearFblistFilter_click:function(){$("#hfopt_fblistfilter",a.content).empty();u.set("fbListFilter",{});return false},helpFeed_click:function(){function f(e,t){r.hide().html(e).fadeIn(500,function(){i.show()})}if($(this).hasClass("disabled")){return false}$(this).addClass("disabled");var e='Unknow feed.<br>You can still help by <a href="${link}" target="_black">click here</a>.';var t=$(this).attr("feed");var n=$("li[feed="+t+"]");var r=$(".body > p",n).empty();var i=$(".state_completed",n);var o=s.get(t);$(".state_accept, .state_completed",n).hide();if(o&&o.action&&L(o.action.enable)){if(o.shortlink==true){Resources.getPicture("ajax_loader","span").appendTo(r).css("padding-left",18).html("Processing "+o.shortlinks.length+' shortlinks...<span id="shortlink_help"></span>');log("feed ->"+JSON.stringify(o));var u="";function a(e){if(e<o.shortlinks.length){unshort(o.shortlinks[e],function(t){t=internallink(t);M(t,o.action,function(t,r){t=C(t);u+=t;o.collected();n.addClass("collected");if(r===true){k(i,o.feed.id,t)}e++;a(e)})})}else{f(u);log("finished")}}a(0)}else{Resources.getPicture("ajax_loader","span").appendTo(r).css("padding-left",18).text("Loading...");M(o.url,o.action,function(e,t){e=C(e);o.collected();n.addClass("collected");if(t===true){k(i,o.feed.id,e)}f(e)})}}else{f(Util.render(e,{link:o.feed.link}));n.addClass("collected")}return false},deleteFeed_click:function(){D($(this).attr("feed"));return false},skip_click:function(){R("control","panel",500,y("#status_panel","empty"))},refresh_click:function(){R("ajaxloader","body");R("status","panel");c$("div").css("padding-top",5).appendTo($("#status_panel").empty()).text("Loading... Please wait a moment.");G(function(e){if(!Util.isArray(e)||e.length<1){P();return}s=new c(e);K();x();R("feedlist","body");R("control","panel",500)})},cancel_click:function(){UserConfig.main.set("opt_hfc_restart",false);UserConfig.main.save();n.clear();i=true;global.hfc_auto=false;u.save(g.refresh_click);$("#logList, #logSkippedList").empty();return false},config_click:function(){if(global.HFCRunning){if($(this).hasClass("disabled"))return;$(this).addClass("disabled")}$("#control_panel").fadeOut(400,function(){$("#minipopup_overlay").fadeIn(400);$;$("#panel_container").animate({height:310},"normal",function(){$("#config_panel").fadeIn(400)})})},save_click:function(){u.fromDomElements();u.save();if($("#modHFCconfig").hasClass("disabled"))$("#modHFCconfig").removeClass("disabled");$("#config_panel").fadeOut(500,function(){$("#panel_container").animate({height:35},"normal",function(){$("#minipopup_overlay").fadeOut(500);if(global.HFCRunning==false)$("#control_panel").fadeIn(500)})})},keyup:function(){var e=this.value;clearTimeout($(this).attr("timeout"));$(this).attr("timeout",setTimeout(function(){if(Util.isString(e)&&e.length>3){$("li[feed]","#feedlist_body").each(function(t,n){if(Util.doRgxTest(e,$(".body > p",n).text())){$(n).show()}else{$(n).hide()}})}else{$("li[feed]","#feedlist_body").show()}},1e3))},change:function(){var e=$("option:selected",this).val();if(e==="none"){$("li[feed]","#feedlist_body").show();return}$("li[feed]","#feedlist_body").hide();$("li[gid="+e+"]","#feedlist_body").show()},clearall:function(){$("li.collected",a.content).each(function(e,t){D($(t).attr("feed"))})},config_change:function(e){var t=$(this).parent();var n=$(this).attr("name");if(!$(e.target).hasClass("checkbox")&&!$(this).hasClass("selected")){$(".selected",t).toggleClass("selected",false);$(this).toggleClass("selected",true);R(n,"config")}return false},subconfig_change:function(e){var t=$(this).parent().parent();var n=$(this).attr("name");var r=o.get(n);if(!$(e.target).hasClass("checkbox")&&!$(this).hasClass("selected")){$(".selected",t).removeClass("selected");$(this).addClass("selected");if(r){$("#action_skipif",t).attr("name",n).val(r.skipif||"");$("#action_fail",t).attr("name",n).val(r.fail||"")}}return false},action_issue_change:function(){var e=$(this).attr("name");var t=Util.doRgx(/action_(\w+)/,this.id).$1;var n=this.value;if(!Util.isString(e)||!Util.isString(n)){return}if(n.length<1){delete o.get(e)[t];delete u.actions[t][e]}else if(n!==o.get(e)[t]){u.actions[t][e]=n;o.get(e)[t]=n}}};var U=0;a.addBase64Style("I2ZlZWRfY2VudGVyX2hlYWRlciB7DQoJZmxvYXQ6IHJpZ2h0Ow0KCWhlaWdodDogNjRweDsNCgltYXJnaW4tcmlnaHQ6IDUwcHg7"+"DQoJbWFyZ2luLXRvcDogNnB4Ow0KfQ0KI2ZlZWRfY2VudGVyX2hlYWRlciBkbC50b3RhbF9yZXF1ZXN0cyB7DQoJZmxvYXQ6IGxl"+"ZnQ7DQoJZm9udC13ZWlnaHQ6IGJvbGQ7DQoJbWFyZ2luOiAxNHB4IDBweCAwcHg7DQp9DQojZmVlZF9jZW50ZXJfaGVhZGVyIGRs"+"LnRvdGFsX3JlcXVlc3RzIGR0IHsNCgliYWNrZ3JvdW5kOiB1cmwoJHtiYXNlX3VybH16bWMvdG90YWxfcmVxdWVzdHNfYnViYmxl"+"XzM4eDM4XzAxLnBuZykgbm8tcmVwZWF0IDBweCAwcHg7DQoJZmxvYXQ6IGxlZnQ7DQoJZm9udC1zaXplOiAxOHB4Ow0KCWhlaWdo"+"dDogMzhweDsNCglsaW5lLWhlaWdodDogMzhweDsNCgltYXJnaW4tcmlnaHQ6IDZweDsNCgl0ZXh0LWFsaWduOiBjZW50ZXI7DQoJ"+"d2lkdGg6IDM4cHg7DQp9DQojZmVlZF9jZW50ZXJfaGVhZGVyIGRsLnRvdGFsX3JlcXVlc3RzIGRkIHsNCgliYWNrZ3JvdW5kOiB1"+"cmwoJHtiYXNlX3VybH16bWMvdG90YWxfcmVxdWVzdHNfYmdfMjAweDI0XzAxLnBuZykgbm8tcmVwZWF0IDEwMCUgNTAlOw0KCWZv"+"bnQtc2l6ZTogMTJweDsNCgloZWlnaHQ6IDM4cHg7DQoJbGluZS1oZWlnaHQ6IDM4cHg7DQoJbWFyZ2luLWxlZnQ6IDVweDsNCglw"+"YWRkaW5nOiAwcHggMjBweCAwcHggMzlweDsNCgl3aGl0ZS1zcGFjZTogbm93cmFwOw0KfQ0KI2hvbWVmZWVkY2VudGVyX3BvcHVw"+"IC5ibGFja19ib3ggew0KCWZvbnQtd2VpZ2h0OiBib2xkOyANCgljb2xvcjogcmdiKDIwOCwgMjA4LCAyMDgpOyANCglib3JkZXI6"+"IDFweCBzb2xpZCByZ2IoMTUzLCAxNTMsIDE1Myk7IA0KCWJhY2tncm91bmQtY29sb3I6IGJsYWNrOyANCglmb250LXNpemU6IDE0"+"cHg7DQp9DQojaG9tZWZlZWRjZW50ZXJfcG9wdXAgdWwuZmVlZF9ib3ggew0KICAgIGxpc3Qtc3R5bGUtdHlwZTogbm9uZTsNCiAg"+"ICBvdmVyZmxvdzogYXV0bzsNCn0NCiNob21lZmVlZGNlbnRlcl9wb3B1cCB1bC5za2lwcGVkX2xvZyB7DQogICAgbGlzdC1zdHls"+"ZS10eXBlOiBub25lOw0KICAgIG92ZXJmbG93OiBhdXRvOw0KICAgIHBhZGRpbmc6IDNweDsNCiAgICBmb250LXNpemU6IDEycHg7"+"DQogICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICM0NDQ7DQogICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICM0NDQ7DQp9DQoj"+"aG9tZWZlZWRjZW50ZXJfcG9wdXAgdWwuc2tpcHBlZF9sb2cgbGkgew0KICAgIGJvcmRlcjogMnB4IHNvbGlkICMxRjFGMUY7DQog"+"ICAgbWFyZ2luOiAwcHggMHB4IDRweDsNCiAgICBwYWRkaW5nOiAwcHggMHB4IDBweCAxNnB4Ow0KICAgIHdpZHRoOiBhdXRvICFp"+"bXBvcnRhbnQ7DQogICAgYmFja2dyb3VuZC1zaXplOiAxNnB4ICFpbXBvcnRhbnQ7DQogICAgLW1vei1iYWNrZ3JvdW5kLXNpemU6"+"IDE2cHggIWltcG9ydGFudDsNCiAgICBtaW4taGVpZ2h0OiAxNnB4ICFpbXBvcnRhbnQ7DQp9DQojaG9tZWZlZWRjZW50ZXJfcG9w"+"dXAgdWwuc2tpcHBlZF9sb2cgbGkgaW1nIHsNCglmbG9hdDogbGVmdDsNCgl3aWR0aDogMjBweDsNCgloZWlnaHQ6IDIwcHg7DQp9"+"DQojaG9tZWZlZWRjZW50ZXJfcG9wdXAgdWwuc2tpcHBlZF9sb2cgbGkgcCB7DQogICAgbWFyZ2luOiAxcHggMHB4IDBweCAzcHg7"+"DQogICAgaGVpZ2h0OiAyMHB4Ow0KCWxpbmUtaGVpZ2h0OiAyMHB4Ow0KICAgIG92ZXJmbG93LXk6IGhpZGRlbjsNCn0NCiNob21l"+"ZmVlZGNlbnRlcl9wb3B1cCAjZmVlZGxpc3RfYm9keSB1bC5mZWVkX2JveCBsaTpmaXJzdC1jaGlsZCB7DQoJYm9yZGVyLXdpZHRo"+"OiAwcHg7DQp9DQojaG9tZWZlZWRjZW50ZXJfcG9wdXAgdWwuZmVlZF9ib3ggbGkgew0KCW1hcmdpbjogMHB4IDBweCA2cHg7DQoJ"+"aGVpZ2h0OiA4MHB4Ow0KCW1heC1oZWlnaHQ6IDEwMHB4Ow0KfQ0KI2hvbWVmZWVkY2VudGVyX3BvcHVwIHVsLmZlZWRfYm94IGxp"+"Lm5ld19wb3N0IHsNCgliYWNrZ3JvdW5kOiB1cmwoJHtiYXNlX3VybH16bWMvbmV3X21lc3NhZ2VfY2FsbG91dF80NXg0NV8wMS5w"+"bmcpIG5vLXJlcGVhdCAwcHggMHB4Ow0KfQ0KI2hvbWVmZWVkY2VudGVyX3BvcHVwIHVsLmZlZWRfYm94IGRpdi5saV93cmFwcGVy"+"IHsNCiAgICBwYWRkaW5nOiA0cHggMTRweCAycHggNHB4Ow0KICAgIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjMUYxRjFGOw0K"+"ICAgIGJvcmRlci10b3A6IDJweCBzb2xpZCAjMUYxRjFGOw0KfQ0KI2hvbWVmZWVkY2VudGVyX3BvcHVwICNhdXRvbW9kZV9ib2R5"+"IHVsI2xvZ0xpc3QgZGl2LnNlbGVjdGVkIHsNCiAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgYmFja2dyb3VuZC1jb2xvcjog"+"IzEyMTIxMjsNCiAgICBib3JkZXItdG9wOiAycHggc29saWQgIzQ0NDsNCiAgICBib3JkZXItYm90dG9tOiAycHggc29saWQgIzQ0"+"NDsNCn0NCiNob21lZmVlZGNlbnRlcl9wb3B1cCB1bC5mZWVkX2JveCBsaSBpbWcuZmVlZF9pY29uIHsNCglmbG9hdDogbGVmdDsN"+"CglkaXNwbGF5OiBibG9jazsNCgl3aWR0aDogNzBweDsNCn0NCiNob21lZmVlZGNlbnRlcl9wb3B1cCB1bC5mZWVkX2JveCBsaS5u"+"ZXdfcG9zdCBpbWcuZmVlZF9pY29uIHsNCgltYXJnaW46IDE1cHggMCAwIDE1cHg7DQoJd2lkdGg6IDU1cHg7DQp9DQojaG9tZWZl"+"ZWRjZW50ZXJfcG9wdXAgdWwuZmVlZF9ib3ggbGkgZGl2LmJ1dHRvbnMgew0KCWZsb2F0OiByaWdodDsNCglmb250LXNpemU6IDEw"+"cHg7DQoJZm9udC13ZWlnaHQ6IGJvbGQ7DQoJbWFyZ2luOiAzcHggMHB4IDBweCAxNHB4Ow0KCXRleHQtYWxpZ246IHJpZ2h0Ow0K"+"CXdpZHRoOiA3MHB4Ow0KfQ0KI2hvbWVmZWVkY2VudGVyX3BvcHVwIHVsLmZlZWRfYm94IGxpIGRpdi5ib2R5IHsNCgltYXJnaW46"+"IDBweCA4MHB4Ow0KCWhlaWdodDogNzBweDsNCn0NCiNob21lZmVlZGNlbnRlcl9wb3B1cCAjYXV0b21vZGVfYm9keSB1bC5mZWVk"+"X2JveCBsaSBkaXYuYm9keSB7DQoJbWFyZ2luLWxlZnQ6IDgwcHg7DQoJaGVpZ2h0OiA3MHB4Ow0KfQ0KI2hvbWVmZWVkY2VudGVy"+"X3BvcHVwIHVsLmZlZWRfYm94IGxpIGg0IHsNCglmb250LXNpemU6IDE0cHg7DQoJbGluZS1oZWlnaHQ6IDE4cHg7DQoJbWFyZ2lu"+"LWJvdHRvbTogNHB4Ow0KCXBhZGRpbmctdG9wOiAycHg7DQp9DQojaG9tZWZlZWRjZW50ZXJfcG9wdXAgdWwuZmVlZF9ib3ggbGkg"+"cCB7DQoJZm9udC1zaXplOiAxMnB4Ow0KCWxpbmUtaGVpZ2h0OiAxNXB4Ow0KfQ0KI2hvbWVmZWVkY2VudGVyX3BvcHVwIHVsLmZl"+"ZWRfYm94IGxpIGRpdi5idXR0b25zIGEuc2V4eV9idXR0b25fbmV3IHsNCiAgICBtaW4td2lkdGg6IDYycHg7DQoJbWFyZ2luLWJv"+"dHRvbTogNnB4Ow0KfQ0KI2hvbWVmZWVkY2VudGVyX3BvcHVwIHVsLmZlZWRfYm94IGxpIGRpdi5idXR0b25zIGEuaWdub3JlIHsN"+"Cgl0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOw0KfQ0KI2ZlZWRfY2VudGVyX2hlYWRlciBwLCAjaG9tZWZlZWRjZW50ZXJfcG9w"+"dXAgdWwsICNob21lZmVlZGNlbnRlcl9wb3B1cCBsaSwgI2hvbWVmZWVkY2VudGVyX3BvcHVwIGRsLCAjaG9tZWZlZWRjZW50ZXJf"+"cG9wdXAgZHQsICNob21lZmVlZGNlbnRlcl9wb3B1cCBkZCwgI2hvbWVmZWVkY2VudGVyX3BvcHVwIGgyLCAjaG9tZWZlZWRjZW50"+"ZXJfcG9wdXAgaDMsICNob21lZmVlZGNlbnRlcl9wb3B1cCBoNCwgI2hvbWVmZWVkY2VudGVyX3BvcHVwIHAgew0KCW1hcmdpbjog"+"MHB4Ow0KCXBhZGRpbmc6IDBweDsNCn0NCiNob21lZmVlZGNlbnRlcl9wb3B1cCAuc2VsZWN0X3RhYiB7DQoJYm9yZGVyOiAxcHgg"+"c29saWQgIzRGNEY0RjsNCglmbG9hdDogbGVmdDsNCgltaW4taGVpZ2h0OiAxNDBweDsNCgltYXJnaW46IDJweDsNCglvdmVyZmxv"+"dzogYXV0bzsNCglwYWRkaW5nOiA1cHg7DQoJdGV4dC1hbGlnbjogbGVmdDsNCgl3aWR0aDogMjQwcHg7DQp9DQojaG9tZWZlZWRj"+"ZW50ZXJfcG9wdXAgLnNlbGVjdF90YWIgZGl2IHsNCglib3JkZXI6IDFweCBzb2xpZCAjMkYyRjJGOw0KCW92ZXJmbG93OiBoaWRk"+"ZW47DQoJcGFkZGluZzogMHB4IDJweCAycHggNXB4Ow0KfQ0KI2hvbWVmZWVkY2VudGVyX3BvcHVwIC5zZWxlY3RfdGFiIGRpdi5z"+"ZWxlY3RlZCB7DQoJYm9yZGVyOiAxcHggc29saWQgeWVsbG93Ow0KfQ0KI2hvbWVmZWVkY2VudGVyX3BvcHVwIC5zZWxlY3RfdGFi"+"IGRpdiBpbnB1dCB7DQoJZmxvYXQ6IGxlZnQ7DQp9DQojaG9tZWZlZWRjZW50ZXJfcG9wdXAgLnNlbGVjdF90YWIgZGl2IHAgew0K"+"CWZsb2F0OiBsZWZ0Ow0KCWN1cnNvcjogcG9pbnRlcjsNCgl3aWR0aDogODYlOw0KCW92ZXJmbG93OiBoaWRkZW47DQp9DQojaG9t"+"ZWZlZWRjZW50ZXJfcG9wdXAgLmNvbmZpZ190YWIgew0KCWZsb2F0OiBsZWZ0Ow0KCXBhZGRpbmc6IDBweCAxMHB4Ow0KCXRleHQt"+"YWxpZ246IGxlZnQ7DQoJd2lkdGg6IDQyMHB4Ow0KfQ0KI2hvbWVmZWVkY2VudGVyX3BvcHVwIC5zYXZlX2NvbmZpZyB7DQoJY2xl"+"YXI6IGJvdGg7DQoJcGFkZGluZy10b3A6IDE2cHg7DQp9DQojaG9tZWZlZWRjZW50ZXJfcG9wdXAgI2ZlZWRsaXN0X2JvZHksIA0K"+"I2hvbWVmZWVkY2VudGVyX3BvcHVwICNhdXRvbW9kZV9ib2R5ICB7DQoJdGV4dC1hbGlnbjogbGVmdDsNCn0NCiNob21lZmVlZGNl"+"bnRlcl9wb3B1cCAjcGFuZWxfY29udGFpbmVyIHsNCgliYWNrZ3JvdW5kOiAjMTExIHVybCgke2Jhc2VfdXJsfXptYy90YWJzX2Jn"+"XzF4NDVfMDEuZ2lmKSByZXBlYXQteCAwcHggMTAwJTsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBwb3NpdGlvbjogYWJzb2x1dGU7"+"DQogICAgei1pbmRleDogMTA7DQp9DQojaG9tZWZlZWRjZW50ZXJfcG9wdXAgI3BhbmVsX2NvbnRhaW5lciAuc2VhcmNoX2JveCB7"+"DQoJZmxvYXQ6IGxlZnQ7DQoJbWFyZ2luOiAwcHggNXB4Ow0KCXRleHQtYWxpZ246IGxlZnQ7DQoJd2lkdGg6IDM3MHB4Ow0KfQ0K"+"I2hvbWVmZWVkY2VudGVyX3BvcHVwICNwYW5lbF9jb250YWluZXIgLmNvbnRyb2xfYm94IHsNCglmbG9hdDogcmlnaHQ7DQoJbWFy"+"Z2luOiAwcHggNXB4Ow0KCXRleHQtYWxpZ246IGNlbnRlcjsNCgl3aWR0aDogMzQwcHg7DQp9DQojaG9tZWZlZWRjZW50ZXJfcG9w"+"dXAgI3N0YXR1c19wYW5lbCwgDQojaG9tZWZlZWRjZW50ZXJfcG9wdXAgI2NvbnRyb2xfcGFuZWwgIHsNCgloZWlnaHQ6IDM1cHg7"+"DQogICAgd2lkdGg6IDEwMCU7DQp9DQojaG9tZWZlZWRjZW50ZXJfcG9wdXAgI2NvbmZpZ19wYW5lbCB7DQoJaGVpZ2h0OiAyNTBw"+"eDsNCgltYXJnaW46IDVweDsNCiAgICB3aWR0aDogMTAwJTsNCn0NCiNob21lZmVlZGNlbnRlcl9wb3B1cCAjbWluaXBvcHVwX292"+"ZXJsYXkgew0KICAgIGRpc3BsYXk6IG5vbmU7DQogICAgd2lkdGg6IDEwMCU7DQogICAgaGVpZ2h0OiA3NTBweDsNCiAgICBwb3Np"+"dGlvbjogYWJzb2x1dGU7DQogICAgYmFja2dyb3VuZC1jb2xvcjogYmxhY2s7DQogICAgb3BhY2l0eTogMC41Ow0KICAgIHotaW5k"+"ZXg6IDU7DQp9DQojaG9tZWZlZWRjZW50ZXJfcG9wdXAgI21pbmlwb3B1cF9jb250ZW50IGNlbnRlciB7DQogICAgaGVpZ2h0OiAz"+"MHB4Ow0KICAgIGJvcmRlci1ib3R0b206IDFweCBkb3R0ZWQgIzMzMzsNCiAgICBtYXJnaW4tYm90dG9tOiAxNXB4Ow0KICAgIGZv"+"bnQtc2l6ZTogMThweDsNCiAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICBjb2xvcjogIzk4OTg5ODsNCn0NCiNob21lZmVlZGNl"+"bnRlcl9wb3B1cCAjbWluaXBvcHVwX2NvbnRlbnQgLmZiX2ZyaWVuZGxpc3Qgew0KICAgIGhlaWdodDogMjAwcHg7DQogICAgb3Zl"+"cmZsb3c6IGF1dG87DQogICAgbWFyZ2luOiAwcHggMTBweCA1cHg7DQogICAgYm9yZGVyOiAycHggc29saWQgIzQ0NDsNCiAgICBw"+"YWRkaW5nOiA1cHg7DQp9DQojaG9tZWZlZWRjZW50ZXJfcG9wdXAgLndhcmxvb3RfYnV0dG9ucyB7DQogICAgdGV4dC1hbGlnbjog"+"cmlnaHQ7DQp9DQojaG9tZWZlZWRjZW50ZXJfcG9wdXAgLndhcmxvb3RfYnV0dG9ucyBhIHsNCiAgICBtYXJnaW4tbGVmdDogNXB4"+"Ow0KfQ0KI2hvbWVmZWVkY2VudGVyX3BvcHVwIC51aS1maWx0ZXJsaXN0IGRpdi51aS10b3Agew0KICAgIGNsZWFyOiBib3RoOw0K"+"fQ0KI2hvbWVmZWVkY2VudGVyX3BvcHVwIC51aS1maWx0ZXJsaXN0IGRpdi51aS1yaWdodCB7DQogICAgZmxvYXQ6IHJpZ2h0Ow0K"+"fQ0KI2hvbWVmZWVkY2VudGVyX3BvcHVwIC51aS1maWx0ZXJsaXN0IGRpdi51aS10b3Agc3Bhbi5jaGVja2JveCB7DQogICAgbGlu"+"ZS1oZWlnaHQ6IDI0cHg7DQp9DQojaG9tZWZlZWRjZW50ZXJfcG9wdXAgLnVpLWZpbHRlcmxpc3QgPiBzZWxlY3Qgew0KICAgIHdp"+"ZHRoOiAxMDAlOw0KICAgIGhlaWdodDogMTUwcHg7DQp9DQo=",{base_url:global.zGraphicsURL});facebook.init(function(e){if(e===true){facebook.needAppPermission("read_stream",function(e){if(e===true){u.load(Y)}else{a.destroy()}})}else{}})}function InventoryAnalyzer(e){function h(){function n(){var n=UserConfig.mgopt;n.load(function(){var r,i,s=n.giftFav;Util.each(a.get(e,t),function(e,t){if(t.tradeable!==1||t.quantity<1){return}i=Util.uSplit(t.gift_link);if(i.gift_category&&i.gift_id){r=i.gift_category+"_"+i.gift_id;if(s.indexOf(r)===-1){s.push(r)}}});n.save();showAskPopup("Adding to Multi Gifter","All "+e+" were added.<br>Do you like to open MultiGifter now ?",function(){f.close();setTimeout(MultiGifter,1e3)})})}var e=$("#type_filter option:selected",f.content).val();var t="give_away";showAskPopup("Adding to Multi Gifter","Do you want to add all unnecessary "+e+" to<br>MultiGifter Favorites ?",function(){setTimeout(n,1e3)})}function p(){var e="<html><head></head><body>";var t=$(".item_list",f.content).clone();var n=$(".header",f.content).clone();t.find(".space").remove();n.find(".space").remove();t.find("img").replaceWith(function(){var e;var t=$(this).attr("title");var n=$(this).attr("src");var r='<span title="'+t+'">';if(/active-icon/.test(n)){return r+"A</span>"}if(/inactive-icon/.test(n)){return r+"N</span>"}if(e=/Quality:\s*(\w)\w+/.exec(t)){return r+e[1]+"</span>"}return""});t=t.html();n=n.html();t=t.replace(/<li[^>]*>/g,"<tr>").replace(/<\/li>/g,"</tr>");t=t.replace(/<div[^>]*>/g,"<td>").replace(/<\/div>/g,"</td>");n=n.replace(/<div[^>]*>/g,"<th>").replace(/<\/div>/g,"</th>");e+='<table cellspacing="0" cellpadding="4" border="1" style="text-align:center;"><tbody>';e+="<tr>"+n+"</tr>"+t;return e+"</tbody></table></body></html>"}function d(e){try{var t=Util.parseJSON(e.data);if(t&&t.wldata){s=t.wldata;v()}else{showHelpPopup({icon:"error",message:"Error adding item to wishlist"})}}catch(n){Logger.error(n)}}function v(){var e=global.zGraphicsURL+"inventory/ItemCard/icons/Inventory-wishlist2-icon.png";var t=$("#wishlist").empty();Util.each(s,function(n,r){var i=c$("div","class:attack_defense");i.append(c$("span","class:attack").html(r.attack||0));i.append(c$("span","class:defense").html(r.defense||0));c$("div","class:wl_item,title:"+r.name).append(c$("img","class:remove,wid:"+n).attr("src",e).click(l.remWishlist_click)).append(c$("img").attr("src",r.image).width(50).height(50)).append(i).appendTo(t)})}function m(){var e='<span style="color:${color};" title="You ${text} ${amount} from your last snapshot.">${quantity}</span>';var t=$("#type_filter option:selected",f.content).val();var r=$("#show_filter option:selected",f.content).val();var i=parseInt($("#loc_filter option:selected",f.content).val());var s=$("#snapshot_filter").hasClass("checked");var u=/get/.test(r);var c={active:"A",quality:"Q",item_name:"Item Name",list:"",sq:u?"Items needed":"Item quantity",lq:"QT",s1:u?"Attack gained if equipped":"Items equipped in attack",s2:u?"Defense gained if equipped":"Items equipped in defense",s3:u?"Combined gained if equipped":"Items equipped in tournaments",s4:"Attack",s5:"Defense",s6:"Combined",s7:u?"Attack gained if total equipped":"Total attack from this item",s8:u?"Defense gained if total equipped":"Total defense from this item",s9:u?"Combined gained if total equipped":"Total combined from this item",l1:u?"+A":"EA",l2:u?"+D":"ED",l3:u?"+C":"ET",l4:"AT",l5:"DF",l6:"CB",l7:u?"GA":"TA",l8:u?"GD":"TD",l9:u?"GC":"TC"};Util.each(a[t][r],function(t,f){var l=0,h=n[f.id];if(isNaN(h)){h=0}if(i>0&&i!==f.location||s&&h==0){return true}if(u){l=f["need"+r.substr(r.lastIndexOf("_"))]}else{l=f.quantity}c.list+=Util.render(o.list,{index:t,active_title:f.active?"Active item - Your Mafia is using this item in fights/robs.":"Inactive item - Your Mafia is not using this item in fights/robs.",active_url:global.zGraphicsURL+"inventory/ItemCard/icons/"+(f.active?"Inventory-active-icon.png":"Inventory-inactive-icon.png"),quality_icon:(a.Qualities[String(f.quality)]||{}).image,item_name:f.name,quantity:Util.render(e,{quantity:l,text:h>-1?"won":"lost",color:h>0?"green":h==0?"white":"red",amount:h}),v1:u?f.gain_offense:f.equipped_offense,v2:u?f.gain_defense:f.equipped_defense,v3:u?f.gain_combined:f.equipped_combined,v4:f.attack,v5:f.defense,v6:f.combined,v7:u?f.gained_offense:f.attack*f.quantity,v8:u?f.gained_defense:f.defense*f.quantity,v9:u?f.gained_combined:f.combined*f.quantity})});if(c.list.length<1){c.list='<div style="margin-top:25px;">No items match your criteria.</div>'}$("#info_table").html(Util.render(o.table,c)).find("li").click(l.item_click)}function g(e){var t=$("#item_info",f.content).empty();if(!Util.isSet(e)){c$("div").text("Select an item to show extended info.").appendTo(t);return}var n=c$("div","class:info");var r=a.Locations[e.location];var i="http://mafiawars.wikia.com/index.php?title=Special:Search&search="+(Util.isString(e.name)&&e.name.length>0?e.name.replace(/\s+?/g,"+"):"");var s=function(){var t=new Array;if(e.subtypes&&e.subtypes.length){Util.each(e.subtypes,function(e,n){var r=a.Subtypes[String(n)];if(Util.isSet(r)){t.push(r.name)}})}if(t.length>0){return t.join(", ")}else{return}}();t.append(c$("div","class:imagen").html(e.image)).append(n);if(s){c$("div").css({"float":"left","margin-right":5}).html("Item type: "+s+" ").appendTo(n)}if(e.tradeable===1){c$("div").click(l.toMGSend_click).css("cursor","pointer").attr({title:"Open with MultiGifter.","gift-link":e.gift_link}).append(c$("img").attr("src",global.zGraphicsURL+"inventory/ItemCard/icons/Inventory-gift-icon.png")).appendTo(c$("div").css({"float":"right","margin-right":5}).appendTo(n))}if(e.favor_id>0&&parseInt(e.rp_price)>0){c$("div").appendTo(n).css({"float":"left",color:"green"}).html("("+e.rp_price+" RP)")}else if(e.pawn_shop>0&&parseInt(e.lp_price)>0){c$("div").appendTo(n).css({"float":"left",color:"green"}).html("("+e.lp_price+" LP)")}else if(e.purchasable&&parseInt(e.cash_price)>0){c$("div").appendTo(n).css({"float":"left",color:"green"}).html("(buy: "+e.cash_price+")")}c$("div").css("clear","both").html("You can search it at ").appendTo(n).append(c$("a","target:_black").attr("href",i).text("wikia"));if(e.tradeable===1){c$("div").html("This item can be added to ").appendTo(n).append(c$("a","href:#,itemid:"+e.id).text("wishlist").click(l.addWishlist_click))}if(r&&r.link&&r.name){c$("div").html("You can get this item in ").appendTo(n).append(c$("a","target:_black").attr("href",r.link).text(r.name))}}function y(){function i(e,t){var n=c$("div","class:mafia_strength").append(c$("div","class:total_title").append(c$("span").text(e)));Util.each(["Weapons","Armor","Vehicles","Animals","Henchmen","Total"],function(e,r){var i=a.global[r+"_"+t];var s="attack";if(t=="defense"){s="defense"}else if(t=="combined"){s="mwa_res_combined_icon"}c$("div","class:mafia_strength_spacing").appendTo(n).append(c$("div","class:stat_name").text(r+":")).append(c$("span","class:text_positioning "+s).text(i))});return n}function s(){var e=a.global.Qualities;var t=c$("div","class:mafia_strength qualities").append(c$("div","class:total_title").append(c$("span").text("Qualities equipped")));Util.each(a.Qualities,function(n,r){var i=e[n];c$("div","class:mafia_strength_spacing").appendTo(t).append(c$("div").css("float","left").html(r.image).css("margin-left",5)).append(c$("div","class:stat_name").text(r.name+":")).append(c$("span","class:text_positioning").text(i))});c$("div","class:mafia_strength_spacing").appendTo(t).append(c$("div","class:stat_name").text("Total:")).append(c$("span","class:text_positioning").text(e["Total"]));return t}var e=b$("","class:short white button_icon");var t=b$("","class:short white button_icon");var n=b$("","class:short white sexy_send_gift_new button_icon");var r=b$("","class:short white sexy_send_gift_new button_icon");e.find("span:last").replaceWith(Resources.getPicture("snapshot_icon","div"));e.attr("title","Take a new snapshot of your current inventory loot amounts.");t.find("span:last").replaceWith(Resources.getPicture("createtable_icon","div"));t.attr("title","Generate a html table to open in a new tab.");n.attr("title","Send unused loot to the MultiGifter favourites.");r.find("span:last").replaceWith(Resources.getPicture("refresh_icon","div"));r.attr("title","Refresh your inventory (use it to get a fresh copy of your inventory).");c$("div","class:frame_box").height(80).appendTo(f.content).append(c$("div","item_info").text("Select an item to show extended info.")).append(c$("div","wishlist"));c$("div","class:frame_box middle_bar").append(c$("select","id:type_filter").width(120).change(l.filter_click)).append(c$("select","id:show_filter").width(160).change(l.filter_click)).append(c$("select","id:loc_filter").width(160).change(l.filter_click)).append(x$("snapshot_filter","Modified.").click(l.filter_click).attr("title","Show only modified items from the last snapshot.")).append(n.click(l.toMGFav_click)).append(t.click(l.genTable_click)).append(e.click(l.takeSnapshot_click)).append(r.click(l.refresh_click)).appendTo(f.content);c$("div","info_table").appendTo(f.content).css({margin:"0px 2px 2px 2px",padding:"0px 2px 2px 2px"});c$("div","class:frame_box").css({"padding-left":38,height:210}).append(i("Attack Strength","offense")).append(i("Defense Strength","defense")).append(i("Combined Strength","combined")).append(s()).appendTo(f.content);f.applyOptions({type_filter:{Weapons:"Weapons",Armor:"Armor",Vehicles:"Vehicles",Animals:"Animals",Henchmen:"Henchmen"},show_filter:{top_offense:"Top offense",top_defense:"Top defense",top_combined:"Top combined",weak_offense:"Weak offense",weak_defense:"Weak defense",weak_combined:"Weak combined",get_offense:"Need for offense",get_defense:"Need for defense",get_combined:"Need for tournament",give_away:"To given away."},loc_filter:function(){var t={0:"All Locations"};Util.each(a.Locations,function(e,n){t[e]=n.name});return t}()})}function b(e){var s=a.global["Qualities"];var o=t.base;if(t.base){Util.each(t.base,function(e,n){t.add("item_"+e,parseInt(n))});delete t["base"];t.save()}Util.each(e,function(e,o){var u=a[r[i[o.type]]];var f=o.attack+o.defense>0;var l=o.unique!==1;var c=t.get("item_"+e);if(!c||isNaN(c)){t.add("item_"+e,c=0)}if(o.quantity!=c){n[e]=o.quantity-c}try{if(u){o["equipped_combined"]=0;o["need_offense"]=0;o["need_defense"]=0;o["need_combined"]=0;o["gained_offense"]=0;o["gained_defense"]=0;o["gained_combined"]=0;o["need_total"]=0;o["gain_offense"]=0;o["gain_defense"]=0;o["gain_combined"]=0;o["combined"]=o["attack"]+o["defense"];o["offense"]=o["attack"];o["is_equipped"]=o["equipped_offense"]+o["equipped_defense"]>0;o["equipped_quantity"]=Math.max(o["equipped_offense"],o["equipped_defense"]);if(o["is_equipped"]){u["top_combined"].push(o);s[o.quality]+=o["equipped_quantity"];s["Total"]+=o["equipped_quantity"];if(o["equipped_offense"]>0){u["top_offense"].push(o)}if(o["equipped_defense"]>0){u["top_defense"].push(o)}}else if(!o["is_equipped"]&&f&&o.quantity>0){u["top_combined"].push(o);if(o["attack"]>o["defense"]){u["weak_offense"].push(o)}else{u["weak_defense"].push(o)}}if(f&&l){u["get_combined"].push(o);u["get_offense"].push(o);u["get_defense"].push(o)}}}catch(h){Logger.error(h)}});t.save();Util.each(r,function(e,t){var n=a[t];n["top_offense"].sort(c.attack);n["top_defense"].sort(c.defense);n["top_combined"].sort(c.combined);n["weak_offense"].sort(c.attack);n["weak_defense"].sort(c.defense);var r=[];var i=501;Util.each(n["top_combined"],function(e,t){if(i>0){r.push(t);i-=t["quantity"];t["equipped_combined"]=t["quantity"];if(i<0){t["equipped_combined"]+=i}}else{n["weak_combined"].push(t)}});n["weak_combined"].sort(c.combined);(n["top_combined"]=r).sort(c.combined);var s={get_offense:[],get_defense:[],get_combined:[]};Util.each(["offense","defense","combined"],function(e,t){var r="get_"+t;Util.each(n[r],function(e,i){var o=n["top_"+t];var u=501,a=0;var f={gain:"gain_"+t,needed:"need_"+t,gained:"gained_"+t,equipped:"equipped_"+t};for(var l=0;l<o.length;l++){u-=o[l][f.equipped];if(i[t]>o[l][t]){a=i[t]-o[l][t];i[f.needed]+=o[l][f.equipped];i[f.gained]+=a*o[l][f.equipped]}if(u<1){break}}i[f.gain]=a;if(i[f.needed]>0){i["need_total"]=Math.max(i["need_offense"],i["need_defense"]);i["need_total"]=Math.max(i["need_total"],i["need_combined"]);s[r].push(i)}})});(n["get_offense"]=s["get_offense"]).sort(c.attack);(n["get_defense"]=s["get_defense"]).sort(c.defense);(n["get_combined"]=s["get_combined"]).sort(c.combined);var o={};var u=n["weak_offense"].slice();u=u.concat(n["weak_defense"]);Util.each(u.concat(n["weak_combined"]),function(e,t){if(o[String(t.id)]===true){return true}if(t["equipped_offense"]<1&&t["equipped_defense"]<1&&t["equipped_combined"]<1){n["give_away"].push(t);o[String(t.id)]=true}});n["give_away"].sort(c.quantity);Util.each(["offense","defense","combined"],function(e,r){var i=a.global;var s={top:"top_"+r,equipped:"equipped_"+r,groupStrength:t+"_"+r,totalStrength:"Total_"+r};Util.each(n[s.top],function(e,t){var n=t[r]*t[s.equipped];i[s.groupStrength]+=n;i[s.totalStrength]+=n})})})}var t=new Config("LootQuantities");var n=new Object;var r=["Weapons","Armor","Vehicles","Animals","Henchmen"];var i={1:0,2:1,3:2,8:3,13:4};var s,o={list:Base64.decode("PGxpIGlkeD0iJHtpbmRleH0iPg0KICAgIDxkaXYgY2xhc3M9InF1YWxpdHkiPg0KICAgICAgICA8aW1nIHRpdGxlPSIke2FjdGl2"+"ZV90aXRsZX0iIHN0eWxlPSJtYXJnaW4tdG9wOiAxcHg7IiBzcmM9IiR7YWN0aXZlX3VybH0iPg0KICAgIDwvZGl2Pg0KICAgIDxk"+"aXYgY2xhc3M9InF1YWxpdHkiPiR7cXVhbGl0eV9pY29ufTwvZGl2Pg0KICAgIDxkaXYgY2xhc3M9InNwYWNlIj48L2Rpdj4NCiAg"+"ICA8ZGl2IGNsYXNzPSJpdGVtX25hbWUiPiR7aXRlbV9uYW1lfTwvZGl2Pg0KICAgIDxkaXYgY2xhc3M9InNwYWNlIj48L2Rpdj4N"+"CiAgICA8ZGl2IGNsYXNzPSJudW1iZXIgcXVhbnRpdHkiPiR7cXVhbnRpdHl9PC9kaXY+DQogICAgPGRpdiBjbGFzcz0ic3BhY2Ui"+"PjwvZGl2Pg0KICAgIDxkaXYgY2xhc3M9Im51bWJlciI+JHt2MX08L2Rpdj4NCiAgICA8ZGl2IGNsYXNzPSJudW1iZXIiPiR7djJ9"+"PC9kaXY+DQogICAgPGRpdiBjbGFzcz0ibnVtYmVyIj4ke3YzfTwvZGl2Pg0KICAgIDxkaXYgY2xhc3M9InNwYWNlIj48L2Rpdj4N"+"CiAgICA8ZGl2IGNsYXNzPSJudW1iZXIiPiR7djR9PC9kaXY+DQogICAgPGRpdiBjbGFzcz0ibnVtYmVyIj4ke3Y1fTwvZGl2Pg0K"+"ICAgIDxkaXYgY2xhc3M9Im51bWJlciI+JHt2Nn08L2Rpdj4NCiAgICA8ZGl2IGNsYXNzPSJzcGFjZSI+PC9kaXY+DQogICAgPGRp"+"diBjbGFzcz0idG90YWwiPiR7djd9PC9kaXY+DQogICAgPGRpdiBjbGFzcz0idG90YWwiPiR7djh9PC9kaXY+DQogICAgPGRpdiBj"+"bGFzcz0idG90YWwiPiR7djl9PC9kaXY+DQo8L2xpPg=="),table:Base64.decode("PGRpdiBjbGFzcz0iaGVhZGVyIj4NCiAgICA8ZGl2IGNsYXNzPSJxdWFsaXR5Ij4ke2FjdGl2ZX08L2Rpdj4NCiAgICA8ZGl2IGNs"+"YXNzPSJzcGFjZSI+PC9kaXY+DQogICAgPGRpdiBjbGFzcz0icXVhbGl0eSI+JHtxdWFsaXR5fTwvZGl2Pg0KICAgIDxkaXYgY2xh"+"c3M9InNwYWNlIj48L2Rpdj4NCiAgICA8ZGl2IGNsYXNzPSJpdGVtX25hbWUiPiR7aXRlbV9uYW1lfTwvZGl2Pg0KICAgIDxkaXYg"+"Y2xhc3M9InNwYWNlIj48L2Rpdj4NCiAgICA8ZGl2IGNsYXNzPSJudW1iZXIgcXVhbnRpdHkiIHRpdGxlPSIke3NxfSI+JHtscX08"+"L2Rpdj4NCiAgICA8ZGl2IGNsYXNzPSJzcGFjZSI+PC9kaXY+DQogICAgPGRpdiBjbGFzcz0ibnVtYmVyIiB0aXRsZT0iJHtzMX0i"+"PiR7bDF9PC9kaXY+DQogICAgPGRpdiBjbGFzcz0ibnVtYmVyIiB0aXRsZT0iJHtzMn0iPiR7bDJ9PC9kaXY+DQogICAgPGRpdiBj"+"bGFzcz0ibnVtYmVyIiB0aXRsZT0iJHtzM30iPiR7bDN9PC9kaXY+DQogICAgPGRpdiBjbGFzcz0ic3BhY2UiPjwvZGl2Pg0KICAg"+"IDxkaXYgY2xhc3M9Im51bWJlciIgdGl0bGU9IiR7czR9Ij4ke2w0fTwvZGl2Pg0KICAgIDxkaXYgY2xhc3M9Im51bWJlciIgdGl0"+"bGU9IiR7czV9Ij4ke2w1fTwvZGl2Pg0KICAgIDxkaXYgY2xhc3M9Im51bWJlciIgdGl0bGU9IiR7czZ9Ij4ke2w2fTwvZGl2Pg0K"+"ICAgIDxkaXYgY2xhc3M9InNwYWNlIj48L2Rpdj4NCiAgICA8ZGl2IGNsYXNzPSJ0b3RhbCIgdGl0bGU9IiR7czd9Ij4ke2w3fTwv"+"ZGl2Pg0KICAgIDxkaXYgY2xhc3M9InRvdGFsIiB0aXRsZT0iJHtzOH0iPiR7bDh9PC9kaXY+DQogICAgPGRpdiBjbGFzcz0idG90"+"YWwiIHRpdGxlPSIke3M5fSI+JHtsOX08L2Rpdj4NCjwvZGl2Pg0KPHVsIGNsYXNzPSJpdGVtX2xpc3QiPiR7bGlzdH08L3VsPg==")};var u=function(){return{top_offense:new Array,top_defense:new Array,top_combined:new Array,weak_offense:new Array,weak_defense:new Array,weak_combined:new Array,get_offense:new Array,get_defense:new Array,get_combined:new Array,give_away:new Array}};var a={all:new Array,Weapons:u(),Armor:u(),Vehicles:u(),Animals:u(),Henchmen:u(),Qualities:null,ItemTypes:null,Locations:null,global:{Weapons_offense:0,Weapons_defense:0,Weapons_combined:0,Armor_offense:0,Armor_defense:0,Armor_combined:0,Vehicles_offense:0,Vehicles_defense:0,Vehicles_combined:0,Animals_offense:0,Animals_defense:0,Animals_combined:0,Henchmen_offense:0,Henchmen_defense:0,Henchmen_combined:0,Total_offense:0,Total_defense:0,Total_combined:0,Qualities:{Total:0,1:0,2:0,3:0,4:0,5:0}},get:function(e,t){return a[e][t]}};var f=new PopupObject("ianalyzer_popup",{type:"main",title:"INVENTORY ANALYZER"});var l={refresh_click:function(){f.close();InventoryAnalyzer(true);return false},takeSnapshot_click:function(){var e;if(!t.base){t.add("base",e=new Object)}else{e=t.base}Util.each(a.all,function(t,n){e[t]=n.quantity});t.save(function(){showHelpPopup({icon:"info",title:"Inventory Analyzer says:",message:"Snapshot taken successfully."})});m();return false},filter_click:function(){m();return false},tab_click:function(){$(".cs_tabs",f.content).removeClass("activeTab").addClass("inactiveTab");$(this).removeClass("inactiveTab").addClass("activeTab");m();return false},toMGSend_click:function(){var e=Util.uSplit(c$(this).attr("gift-link"));if(e.gift_category&&e.gift_id){f.close();setTimeout(function(){MultiGifter(e.gift_category,e.gift_id,InventoryAnalyzer)},1e3)}},toMGFav_click:function(){h();return false},remWishlist_click:function(){var e=$(this).attr("wid");var t="remote/"+MW.getIntURL("wishlist","remove");httpAjaxRequest({url:t+"&isajax=1&retwl=1&wid="+e,success:d});return false},addWishlist_click:function(){var e=$(this).attr("itemid");for(var t=0;t<s.length;t++){if(parseInt(e)===parseInt(s[t].id)){return false}}var n=$(this).text();var r="remote/"+MW.getIntURL("wishlist","add");$(this).replaceWith(c$("span").text(n));httpAjaxRequest({url:r+"&isajax=1&retwl=1&gift_category=1&gift_id="+e,success:d});return false},item_click:function(){var e=$("#type_filter option:selected",f.content).val();var t=$("#show_filter option:selected",f.content).val();$(".item_list li.selected",f.content).toggleClass("selected",false);$(this).toggleClass("selected",true);g(a.get(e,t)[$(this).attr("idx")])},genTable_click:function(){var e="data:text/html;base64,";e+=Base64.encode(p());unsafeWindow.open(e,"_black")}};var c={attack:function(e,t){return t.attack-e.attack},defense:function(e,t){return t.defense-e.defense},combined:function(e,t){return t.attack+t.defense-(e.attack+e.defense)},quantity:function(e,t){return t.quantity-e.quantity}};f.addBase64Style("I2lhbmFseXplcl9wb3B1cCAuYmxhY2sgew0KCXdpZHRoOiAyNDBweDsNCgltYXJnaW4tcmlnaHQ6IDVweDsNCglmb250LXdlaWdo"+"dDogYm9sZDsgDQoJY29sb3I6IHJnYigyMDgsIDIwOCwgMjA4KTsgDQoJYm9yZGVyOiAxcHggc29saWQgcmdiKDE1MywgMTUzLCAx"+"NTMpOyANCgliYWNrZ3JvdW5kLWNvbG9yOiBibGFjazsgDQoJZm9udC1zaXplOiAxNHB4Ow0KfQ0KI2lhbmFseXplcl9wb3B1cCAu"+"bWVudWJhciB7DQogICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQgdXJsKCR7YmFzZV91cmx9aW52ZW50b3J5L05BVi9JbnZlbnRv"+"cnktbmF2LWJnLnBuZykgbm8tcmVwZWF0IHRvcCBsZWZ0Ow0KICAgIGhlaWdodDogNTBweDsNCn0NCiNpYW5hbHl6ZXJfcG9wdXAg"+"Lm1lbnViYXIgLmlubmVyX2JveCB7DQogICAgcGFkZGluZzogMTJweCA1cHggMHB4IDIxMHB4Ow0KICAgIHRleHQtYWxpZ246IGxl"+"ZnQ7DQogICAgaGVpZ2h0OiAzNXB4Ow0KfQ0KI2lhbmFseXplcl9wb3B1cCAubWVudWJhciAuYnV0dG9uX2JveCB7DQogICAgZmxv"+"YXQ6IHJpZ2h0Ow0KfQ0KI2lhbmFseXplcl9wb3B1cCAubWVudWJhciAuYnV0dG9uX2JveCBhIHsNCiAgICBtYXJnaW4tcmlnaHQ6"+"IDVweDsNCn0NCiNpYW5hbHl6ZXJfcG9wdXAgLmZyYW1lX2JveCB7DQogICAgYm9yZGVyOiAxcHggc29saWQgIzJGMkYyRjsNCiAg"+"ICBtYXJnaW46IDRweCAzcHggNHB4IDNweDsNCiAgICBtaW4taGVpZ2h0OiAyNnB4Ow0KICAgIHBhZGRpbmc6IDRweDsNCiAgICB0"+"ZXh0LWFsaWduOiBsZWZ0Ow0KfQ0KI2lhbmFseXplcl9wb3B1cCBkaXYuaGVhZGVyIHsNCglib3JkZXI6IDFweCBzb2xpZCAjNzc3"+"Ow0KCWhlaWdodDogMjBweDsNCglvdmVyZmxvdzogaGlkZGVuOw0KCXRleHQtYWxpZ246IGNlbnRlcjsNCglwYWRkaW5nOiAycHg7"+"DQp9DQojaWFuYWx5emVyX3BvcHVwIGRpdi5oZWFkZXIgZGl2Lml0ZW1fbmFtZSB7DQoJdGV4dC1hbGlnbjogY2VudGVyOw0KfQ0K"+"I2lhbmFseXplcl9wb3B1cCB1bC5pdGVtX2xpc3Qgew0KCWJvcmRlcjogMXB4IHNvbGlkICM5OTk7DQoJaGVpZ2h0OiAzNzVweDsN"+"CglsaXN0LXN0eWxlLXR5cGU6IG5vbmU7DQoJbWFyZ2luOiAwcHg7DQoJb3ZlcmZsb3cteDogaGlkZGVuOw0KCW92ZXJmbG93LXk6"+"IGF1dG87DQoJcGFkZGluZzogMHB4Ow0KfQ0KI2lhbmFseXplcl9wb3B1cCB1bC5pdGVtX2xpc3QgbGkgew0KCWJvcmRlcjogMXB4"+"IHNvbGlkICMzMzM7DQoJY3Vyc29yOiBwb2ludGVyOw0KCWhlaWdodDogMTlweDsNCgltYXJnaW46IDFweDsNCglvdmVyZmxvdzog"+"aGlkZGVuOw0KCXBhZGRpbmc6IDFweDsNCn0NCiNpYW5hbHl6ZXJfcG9wdXAgdWwuaXRlbV9saXN0IGxpLnNlbGVjdGVkIHsNCgli"+"b3JkZXI6IDFweCBzb2xpZCAjQ0MwOw0KfQ0KI2lhbmFseXplcl9wb3B1cCBkaXYubnVtYmVyIHsNCglmbG9hdDogbGVmdDsNCglt"+"YXgtd2lkdGg6IDMwcHg7DQoJbWluLXdpZHRoOiAzMHB4Ow0KCXBhZGRpbmc6IDFweDsNCgl3aWR0aDogYXV0bzsNCn0NCiNpYW5h"+"bHl6ZXJfcG9wdXAgZGl2Lm51bWJlci5xdWFudGl0eSB7DQoJbWF4LXdpZHRoOiA0MHB4Ow0KCW1pbi13aWR0aDogNDBweDsNCn0N"+"CiNpYW5hbHl6ZXJfcG9wdXAgZGl2LnF1YWxpdHkgew0KCWZsb2F0OiBsZWZ0Ow0KCW1heC13aWR0aDogMTZweDsNCgltaW4td2lk"+"dGg6IDE2cHg7DQoJcGFkZGluZzogMXB4Ow0KCXdpZHRoOiBhdXRvOw0KfQ0KI2lhbmFseXplcl9wb3B1cCBkaXYudG90YWwgew0K"+"CWZsb2F0OiBsZWZ0Ow0KCW1heC13aWR0aDogNTBweDsNCgltaW4td2lkdGg6IDUwcHg7DQoJcGFkZGluZzogMXB4Ow0KCXdpZHRo"+"OiBhdXRvOw0KfQ0KI2lhbmFseXplcl9wb3B1cCBkaXYuc3BhY2Ugew0KCWJhY2tncm91bmQtY29sb3I6ICMzRjNGM0Y7DQoJZmxv"+"YXQ6IGxlZnQ7DQoJaGVpZ2h0OiAxOXB4Ow0KCW1heC13aWR0aDogMXB4Ow0KCW1pbi13aWR0aDogMXB4Ow0KCXdpZHRoOiAxcHg7"+"DQp9DQojaWFuYWx5emVyX3BvcHVwIGRpdi5pdGVtX25hbWUgew0KCWZsb2F0OiBsZWZ0Ow0KCW1heC13aWR0aDogMjIwcHg7DQoJ"+"cGFkZGluZzogMXB4Ow0KCXRleHQtYWxpZ246IGxlZnQ7DQoJd2lkdGg6IDIyMHB4Ow0KCXBhZGRpbmc6IDBweCA1cHg7DQp9DQoj"+"aWFuYWx5emVyX3BvcHVwIC5mcmFtZV9ib3ggZGl2I2l0ZW1faW5mbyB7DQoJZmxvYXQ6IGxlZnQ7DQoJd2lkdGg6IDM3OHB4Ow0K"+"fQ0KI2lhbmFseXplcl9wb3B1cCAuZnJhbWVfYm94IGRpdi5pbWFnZW4gew0KCWJvcmRlcjogMXB4IHNvbGlkICM1RjVGNUY7DQoJ"+"ZmxvYXQ6IGxlZnQ7DQp9DQojaWFuYWx5emVyX3BvcHVwIC5mcmFtZV9ib3ggZGl2LmluZm8gew0KCWZsb2F0OiBsZWZ0Ow0KCWhl"+"aWdodDogODBweDsNCgltYXJnaW4tbGVmdDogNXB4Ow0KCW1heC1oZWlnaHQ6IDgwcHg7DQoJbWF4LXdpZHRoOiAyOTBweDsNCn0N"+"CiNpYW5hbHl6ZXJfcG9wdXAgLmZyYW1lX2JveCBkaXYjd2lzaGxpc3Qgew0KCWZsb2F0OiBsZWZ0Ow0KCXdpZHRoOiAzMDBweDsN"+"Cn0JDQojaWFuYWx5emVyX3BvcHVwIC5mcmFtZV9ib3ggZGl2LndsX2l0ZW0gew0KCWJvcmRlcjogMXB4IHNvbGlkICM0RjRGNEY7"+"DQoJZmxvYXQ6IGxlZnQ7DQoJaGVpZ2h0OiA3MnB4Ow0KCW1hcmdpbjogMXB4Ow0KCXBhZGRpbmc6IDNweDsNCgl0ZXh0LWFsaWdu"+"OiBsZWZ0Ow0KCXdpZHRoOiA5MHB4Ow0KfQ0KI2lhbmFseXplcl9wb3B1cCAuZnJhbWVfYm94IGRpdi53bF9pdGVtIGltZy5yZW1v"+"dmUgew0KCWZsb2F0OiByaWdodDsNCgljdXJzb3I6IHBvaW50ZXI7DQp9DQojaWFuYWx5emVyX3BvcHVwIC5mcmFtZV9ib3ggZGl2"+"LndsX2l0ZW0gLmF0dGFja19kZWZlbnNlIHsNCgltYXJnaW46IDBweDsNCn0NCiNpYW5hbHl6ZXJfcG9wdXAgLmZyYW1lX2JveCBk"+"aXYud2xfaXRlbSAuYXR0YWNrX2RlZmVuc2UgLmRlZmVuc2Ugew0KCW1hcmdpbi1sZWZ0OiA1cHg7DQp9DQojaWFuYWx5emVyX3Bv"+"cHVwIC5tYWZpYV9zdHJlbmd0aCB7DQoJYmFja2dyb3VuZDogdHJhbnNwYXJlbnQgdXJsKCR7YmFzZV91cmx9aW52ZW50b3J5L3N1"+"bW1hcnkvTWFmaWEtc3RyZW5ndGgtYm94Mi5wbmcpIG5vLXJlcGVhdDsNCglmbG9hdDogbGVmdDsNCgloZWlnaHQ6IDIxMHB4Ow0K"+"CXdpZHRoOiAxNjBweDsNCglmb250LXNpemU6IDEycHg7DQp9DQojaWFuYWx5emVyX3BvcHVwIC5tYWZpYV9zdHJlbmd0aCA+IGRp"+"djpsYXN0LWNoaWxkIHsNCgltYXJnaW4tdG9wOiAxNXB4Ow0KfQ0KI2lhbmFseXplcl9wb3B1cCAubWFmaWFfc3RyZW5ndGgucXVh"+"bGl0aWVzID4gZGl2Omxhc3QtY2hpbGQgew0KCW1hcmdpbi10b3A6IDM1cHg7DQp9DQojaWFuYWx5emVyX3BvcHVwIC5tYWZpYV9z"+"dHJlbmd0aCAudG90YWxfdGl0bGUgew0KCWZvbnQtd2VpZ2h0OiBib2xkOw0KCW1hcmdpbi1ib3R0b206IDIxcHg7DQoJbWFyZ2lu"+"LWxlZnQ6IGF1dG87DQoJbWFyZ2luLXJpZ2h0OiBhdXRvOw0KCXBhZGRpbmctdG9wOiAxMHB4Ow0KCXBvc2l0aW9uOiByZWxhdGl2"+"ZTsNCgl0ZXh0LWFsaWduOiBjZW50ZXI7DQoJd2lkdGg6IDE2MHB4Ow0KfQ0KI2lhbmFseXplcl9wb3B1cCAubWFmaWFfc3RyZW5n"+"dGgucXVhbGl0aWVzIC50b3RhbF90aXRsZSB7DQoJbWFyZ2luLWJvdHRvbTogMTNweDsNCn0NCiNpYW5hbHl6ZXJfcG9wdXAgLm1h"+"ZmlhX3N0cmVuZ3RoIC50b3RhbF90aXRsZSBzcGFuIHsNCgljb2xvcjogI0ZGQ0QwMDsNCgl0ZXh0LXRyYW5zZm9ybTogdXBwZXJj"+"YXNlOw0KfQ0KI2lhbmFseXplcl9wb3B1cCAubWFmaWFfc3RyZW5ndGggLm1hZmlhX3N0cmVuZ3RoX3NwYWNpbmcgew0KCWhlaWdo"+"dDogMThweDsNCgltYXJnaW4tbGVmdDogMnB4Ow0KCW1hcmdpbi10b3A6IDdweDsNCn0NCiNpYW5hbHl6ZXJfcG9wdXAgLm1hZmlh"+"X3N0cmVuZ3RoLnF1YWxpdGllcyAubWFmaWFfc3RyZW5ndGhfc3BhY2luZyB7DQoJbWFyZ2luLXRvcDogNHB4Ow0KfQ0KI2lhbmFs"+"eXplcl9wb3B1cCAudGV4dF9wb3NpdGlvbmluZyB7DQoJY29sb3I6ICM5OTk7DQoJZm9udC1zaXplOiAxMXB4Ow0KfQ0KI2lhbmFs"+"eXplcl9wb3B1cCAubWFmaWFfc3RyZW5ndGggLm1hZmlhX3N0cmVuZ3RoX3NwYWNpbmcgLnN0YXRfbmFtZSB7DQoJZmxvYXQ6IGxl"+"ZnQ7DQoJbWFyZ2luLWxlZnQ6IDEwcHg7DQoJd2lkdGg6IDgwcHg7DQp9DQojaWFuYWx5emVyX3BvcHVwIC5zZXh5X2J1dHRvbl9u"+"ZXcuYnV0dG9uX2ljb24gPiBzcGFuIHsNCiAgICB3aWR0aDogMjhweDsNCn0NCiNpYW5hbHl6ZXJfcG9wdXAgLnNleHlfYnV0dG9u"+"X25ldy5idXR0b25faWNvbiA+IHNwYW4gPiBzcGFuIHsNCiAgICBtaW4taGVpZ2h0OiAxNnB4Ow0KICAgIHBhZGRpbmctbGVmdDog"+"MHB4Ow0KfQ0KI2lhbmFseXplcl9wb3B1cCAuc2V4eV9idXR0b25fbmV3LmJ1dHRvbl9pY29uID4gc3BhbiA+IGRpdiB7DQogICAg"+"aGVpZ2h0OiAyNnB4Ow0KfQ0KI2lhbmFseXplcl9wb3B1cCAuZnJhbWVfYm94Lm1pZGRsZV9iYXIgYSB7DQogICAgZmxvYXQ6IHJp"+"Z2h0Ow0KICAgIG1hcmdpbi1sZWZ0OiA1cHg7DQp9DQojaWFuYWx5emVyX3BvcHVwIC5td2FfcmVzX2NvbWJpbmVkX2ljb24gew0K"+"ICAgIGJhY2tncm91bmQtc2l6ZTogMTZweCAhaW1wb3J0YW50Ow0KICAgIC1tb3otYmFja2dyb3VuZC1zaXplOiAxNnB4ICFpbXBv"+"cnRhbnQ7DQogICAgd2lkdGg6IGF1dG8gIWltcG9ydGFudDsNCiAgICBwYWRkaW5nLWxlZnQ6IDE5cHggIWltcG9ydGFudDsNCn0N"+"Cg==",{base_url:global.zGraphicsURL});MW.getInventoryData(function(e){a.ItemTypes=e.Item.Types;a.Locations=e.Item.Locations;a.Qualities=e.Item.Qualities;a.Subtypes=e.Item.Subtypes;a.Locations[7]={name:"Challenge Mission",link:"http://mafiawars.wikia.com/wiki/Challenge_Mission"};a.Locations[8]={name:"Free Gifts",link:"http://mafiawars.wikia.com/wiki/Free_Gifts"};a.Locations[10]={name:"Special Event",link:"http://mafiawars.wikia.com/wiki/Missions"};a.Locations[13]={name:"Operations",link:"http://mafiawars.wikia.com/wiki/Operations"};a.Locations[14]={name:"Crafting",link:"http://mafiawars.wikia.com/wiki/Category:Properties"};t.load(function(){b(a.all=e.Items.data);y();m();httpAjaxRequest({url:"remote/"+MW.getIntURL("wishlist","add")+"&isajax=1&retwl=1&gift_category=0&gift_id=0",success:d});f.applyCustomClass();f.show()})},e)}function MafiaWiper(){function s(){c$("center","class:info").appendTo(r.content).append(c$("div","top_div")).append(c$("div","loading_div").css("margin-top",5).append(c$("div").append(b$("Remove All","class:short red").click(i.removeAll_click))));c$("div","id:create_friend_list").hide().appendTo(c$("div","class:frame_box clearfix").appendTo(r.content)).append(c$("label","for:friendlistname").text("You can create a new Facebook FriendList:")).append(c$("input:text","id:friendlistname").val("No Playing Mafia Wars")).append(b$("Create","class:short white").click(i.createFriendList_click));c$("div","class:clearfix").css("height",25).appendTo(r.content).append(c$("input:checkbox","checked:checked,id:ask_for_delete")).append(c$("label","for:ask_for_delete").text("Ask for remove")).append(c$("a","remove_ignored").text("Reset ignored members").hide().css("margin-left",20).click(i.resetIgnored_click));c$("ul").appendTo(c$("div","class:member_list").appendTo(r.content))}function o(e){var t=new Object;Util.each(e,function(e,n){t[n.uid]=n});return t}function u(){function e(e){r.destroy();showHelpPopup({icon:"error",message:e})}MW.getGiftData(function(n){if(!n||!n.groups_levels){e("Cant load your MafiaWars friends.");return}loadingScreen("Loading Application users...");facebook.getAppFriends(function(i){var u=new Array;if(!i||i.error){e(i.error.message);return}else{i=o(i)}Util.each(n.groups_levels,function(e,n){if(!Util.isSet(i[e])){t.push({id:e,name:n});u.push(e)}});loadingScreen("Checking users wall posts...");facebook.queryUsersFeed(u,function(e){if(e&&!e.error){var n=new Array;u=new Object;Util.each(e,function(e,t){u[t.source_id]=true});Util.each(t,function(e,t){if(u[t.id]!==true){n.push(t)}});t=n}s();$("#top_div").html("Members not playing Mafia Wars: "+t.length);l();loadingScreen();r.applyCustomClass();r.show()})})})}function a(n,r){if(e){return}var i=$("#user_"+n,".member_list").parent();c$("img").attr("src",Resources.content.ajax_loader).appendTo(i.empty());httpAjaxRequest({url:"remote/"+MW.getIntURL("stats")+"&user="+t[n].id,success:function(e){httpAjaxRequest({url:$(".zy_popup_box_body_dark a:regex(href,xw_action=remove)",e).attr("href"),success:function(e){if(MW.update(e)){i.html(Util.setColor("User has been removed.","green"))}else{i.html(Util.setColor("Error. but maybe removed.","red"))}delete t[n];r&&r()}})}})}function f(){function r(){if(e<t.length){if(typeof t[e]!=="undefined"&&n.get("ignored").indexOf(String(t[e].id))===-1){$("#loading_div").html("Deleting "+t[e].name);a(e++,r)}else{e++;r()}}else{$("#loading_div").html("All members has been removed.")}}var e=0;r()}function l(){var e=$(".member_list ul",r.content);var s;for(var o=0,u;u=t[o];o++){if(u.name){s=c$("li").appendTo(e);s.append(c$("span","class:user_name").text(u.name));c$("div","class:buttons").appendTo(s).append(b$("FB Profile","uid:"+u.id+",class:short white").click(i.profile_click)).append(b$("Remove","class:short red,id:user_"+o).click(i.remove_click)).append(b$("Ignore","class:short green,uid:"+u.id).click(i.ignore_click));if(n.get("ignored").indexOf(u.id)!==-1){s.hide()}}}$("#create_friend_list").show();if(n.get("ignored").length>0){$("#remove_ignored").css("display","inline")}}function c(e){var n=c$("span").css("margin-left",5);var r=t.length;$("#create_friend_list").empty().append(c$("img").css("vertical-align","middle").attr("src",Resources.content.ajax_loader)).append(n);var i=new Collection(t);i.onEnd(function(){$("#create_friend_list").html("FriendList successfully created.")});i.onMove(function(t,s,o){if(o&&o.id){n.text("Adding user ("+(t+1)+"/"+r+")...");facebook.friendlistAdd(e,o.id,i.MoveNext)}else{i.MoveNext()}});i.MoveFirst()}var e=false;var t=[];var n=new Config("mwopt",{ignored:[]});var r=new PopupObject("mafiawiper_popup",{type:"main",title:"MAFIA WIPER",onclose:function(){e=true}});var i={resetIgnored_click:function(){$(".member_list ul li").each(function(e,t){$(t).show()});n.set("ignored",[]);n.save();$(this).hide();return false},ignore_click:function(){n.get("ignored").push($(this).attr("uid"));n.save();$(this).parent().parent().fadeOut(500,function(){$("#remove_ignored").css("display","inline")});return false},profile_click:function(){var e=$(this).attr("uid");$(this).removeClass("white").parent().parent().css("border-color","#777");unsafeWindow.open("http://www.facebook.com/profile.php?id="+e,"_black");return false},remove_click:function(){if($("#ask_for_delete").attr("checked")){if(!confirm("Are you sure to remove?"))return false}a(this.id.substring(5));return false},removeAll_click:function(){if(confirm("Are you really sure to remove ALL?")){f()}return false},createFriendList_click:function(){var e=$(this);if(e.hasClass("disabled")){return false}e.addClass("disabled");facebook.needAppPermission("manage_friendlists",function(t){if(t==true){facebook.friendlistCreate($("#friendlistname").val(),function(t){if(t&&t.id){c(t.id)}else{showHelpPopup({icon:"error",title:"Error creating friendlist",message:"Make sure the friendlist name doesn't exists."});e.removeClass("disabled")}})}else{e.removeClass("disabled")}},true)}};r.addBase64Style("I21hZmlhd2lwZXJfcG9wdXAgLmJsYWNrIHsNCglmb250LXdlaWdodDogYm9sZDsNCgljb2xvcjogcmdiKDIwOCwgMjA4LCAyMDgp"+"OyANCglib3JkZXI6IDFweCBzb2xpZCByZ2IoMTUzLCAxNTMsIDE1Myk7IA0KCWJhY2tncm91bmQtY29sb3I6IGJsYWNrOyANCglm"+"b250LXNpemU6IDE0cHg7DQp9DQojbWFmaWF3aXBlcl9wb3B1cCAuZnJhbWVfYm94IHsNCglib3JkZXI6IDFweCBzb2xpZCAjMkYy"+"RjJGOw0KCWhlaWdodDogNDBweDsNCgltYXJnaW46IDVweDsNCglwYWRkaW5nOiAxMHB4IDIwcHggMHB4Ow0KCXRleHQtYWxpZ246"+"IGxlZnQ7DQp9DQojbWFmaWF3aXBlcl9wb3B1cCBpbnB1dCB7DQoJdmVydGljYWwtYWxpZ246IHRvcDsNCn0NCiNtYWZpYXdpcGVy"+"X3BvcHVwIC5mcmFtZV9ib3ggaW5wdXQgew0KCXZlcnRpY2FsLWFsaWduOiBtaWRkbGU7DQoJd2lkdGg6IDIzMHB4Ow0KCW1hcmdp"+"bi1yaWdodDogNXB4Ow0KCW1hcmdpbi1sZWZ0OiA1cHg7DQp9DQojbWFmaWF3aXBlcl9wb3B1cCAuZnJhbWVfYm94IGEgew0KCWZs"+"b2F0OiByaWdodDsNCn0NCiNtYWZpYXdpcGVyX3BvcHVwIC5pbmZvIHsNCgloZWlnaHQ6IDUwcHg7DQoJbWFyZ2luOiA1cHg7DQp9"+"DQojbWFmaWF3aXBlcl9wb3B1cCAubWVtYmVyX2xpc3Qgew0KCWJvcmRlcjogMXB4IHNvbGlkICM5OTk7DQoJaGVpZ2h0OiAzODBw"+"eDsNCgltYXJnaW46IDRweDsNCglwYWRkaW5nOiA1cHg7DQoJb3ZlcmZsb3cteDogaGlkZGVuOw0KCW92ZXJmbG93LXk6IGF1dG87"+"DQp9DQojbWFmaWF3aXBlcl9wb3B1cCAubWVtYmVyX2xpc3QgdWwgew0KCXBhZGRpbmc6IDBweDsNCgltYXJnaW46IDBweDsNCgls"+"aXN0LXN0eWxlLXR5cGU6IG5vbmU7DQp9DQojbWFmaWF3aXBlcl9wb3B1cCAubWVtYmVyX2xpc3QgdWwgbGkgew0KCWJvcmRlcjog"+"MXB4IHNvbGlkICMzMzM7DQoJaGVpZ2h0OiA0NXB4Ow0KCW1hcmdpbjogMXB4Ow0KCW92ZXJmbG93OiBoaWRkZW47DQp9DQojbWFm"+"aWF3aXBlcl9wb3B1cCAubWVtYmVyX2xpc3QgdWwgbGkgc3Bhbi51c2VyX25hbWUgew0KCWZsb2F0OiBsZWZ0Ow0KCW1heC13aWR0"+"aDogNDAwcHg7DQoJcGFkZGluZzogMTJweCA1cHg7DQp9DQojbWFmaWF3aXBlcl9wb3B1cCAubWVtYmVyX2xpc3QgdWwgbGkgLmJ1"+"dHRvbnN7DQoJZmxvYXQ6IHJpZ2h0Ow0KCXBhZGRpbmc6IDhweCA1cHg7DQp9DQojbWFmaWF3aXBlcl9wb3B1cCAubWVtYmVyX2xp"+"c3QgdWwgbGkgLmJ1dHRvbnMgYXsNCgltYXJnaW4tbGVmdDogNXB4Ow0KfQ0K");n.load(u)}function MultiGifter(e,t,n){function p(e){return e==="gift"?s.Inventory:s.Friends}function d(){function n(){var t=parseInt($("form input:checked",e).val());var n=parseInt($("form input:text",e).val());if(t==0&&(isNaN(n)||n<1)){return}Util.each(s.Inventory.getAllItems(),function(e,r){switch(t){case 0:B(n,r,true);break;case 1:B(r.amount,r,true);break;case 2:B(r.amount-1,r,true);break}})}var e=c$("div").css("text-align","left").append(c$("center","class:addtitle").text("ADDING GIFTS TO QUEUE"));c$("form").appendTo(c$("div").appendTo(e).css("padding-left",50)).append(c$("div").css("margin-bottom",8).append(c$("input:radio","id:defined_opt,name:mode,value:0,checked:checked")).append(c$("label","for:defined_opt").text("Quantity:")).append(c$("input:text","name:quantity,value:1"))).append(c$("div").css("margin-bottom",8).append(c$("input:radio","id:all_opt,name:mode,value:1")).append(c$("label","for:all_opt").text("Add all possible."))).append(c$("div").css("margin-bottom",8).append(c$("input:radio","id:butone_opt,name:mode,value:2")).append(c$("label","for:butone_opt").text("Add all but one.")));var t=new PopupObject({appendTo:a.content,type:"help",autoOpen:true,zIndex:99999,closeAfterClick:true,hideCloseButton:true,content:e,buttons:[{label:"Accept",addClass:"short white",onclick:n},{label:"Cancel",addClass:"short red"}]})}function v(){$(document).ready(function(){function l(e,t){c$("ul","class:checkboxlist,name:"+t).appendTo(e);c$("center").css({"float":"left","margin-top":20}).appendTo(e).append(c$("button","name:"+t).text("all").width(40).click(h.selectAll_click)).append(c$("div").css("margin-top",5)).append(c$("button","name:"+t).text("none").width(40).click(h.selectNone_click))}var e=c$("div","id:main_log").appendTo(a.content);var t=c$("div","id:main_container").appendTo(a.content);var n=c$("div","class:controls");var r=c$("div","class:controlbar").appendTo(t);c$("div").css("clear","both").appendTo(t);c$("div","class:leftside").appendTo(r).append(c$("div","id:gift_page_box").append(c$("a","name:gift,id:mgpage_prev,class:active").click(h.prevPage_click)).append(c$("select","id:gift_page").width(70).click(h.giftPage_change)).append(c$("a","name:gift,id:mgpage_next,class:active").click(h.nextPage_click))).append(c$("select","id:gift_category,name:gift").width(200).change(h.category_change)).append(c$("button","id:gift_fav_clear").text("Clear").click(h.clear_click).hide());c$("div","class:rightside").css("text-align","right").appendTo(r).width(290).append(b$("Config","name:config,class:short white").click(h.showTab_click)).append(b$("Filters","name:filter,class:short orange").click(h.showTab_click)).append(b$("Search","name:search,class:short orange").click(h.showTab_click));c$("div","id:gift_list,class:item_list").appendTo(t);var i=c$("div","class:tab_container").appendTo(t);c$("center","tab_selected_gift").appendTo(i).append(c$("div").text("Selected gift:")).append(c$("div","id:giftcard, class:ItemCardBox").css({cursor:"default","margin-top":5,width:"auto"}));var s=c$("div","tab_filter").hide().appendTo(i);c$("div","filter_container_0").css("padding",20).appendTo(s).append(s$("collection_filter_type","Select Collection Type",260,{change:h.collectionFilterType_change})).append(c$("div").css({clear:"both","margin-top":5})).append(s$("collection_filter","Select Collection Name",260,{change:h.collectionFilter_change}));var o=new TabObject({id:"filter_list",appendTo:c$("div","filter_container_1").hide().appendTo(s),height:110,tabs:["GENERAL","TYPE","QUALITY","ORIGIN"]});o.getLayout(0).css("padding","0px 5px").append(c$("input:checkbox","id:active_filter,checked:checked")).append(c$("label","for:active_filter").text("Active items.")).append(c$("input:checkbox","id:inactive_filter,checked:checked")).append(c$("label","for:inactive_filter").text("Inactive items.")).append("<br /><br />").append(c$("span").text("Attack is: ")).append(c$("select","id:attack_more_less")).append(c$("span").text(" than ")).append(c$("input:text","id:attack_amount").width(60)).append("<br />").append(c$("span").text("Defense is: ")).append(c$("select","id:defense_more_less")).append(c$("span").text(" than ")).append(c$("input:text","id:defense_amount").width(60));l(o.getLayout(1),"ItemTypes");l(o.getLayout(2),"Qualities");l(o.getLayout(3),"Locations");c$("center").css("margin-top",2).appendTo("#filter_container_1").append(c$("button").text("Filter Items").width(80).click(h.filterItems_click)).append(c$("button").text("Clear Filter").css("margin-left",5).width(80).click(h.clearFilter_click));c$("div","filter_container_msg").hide().appendTo(s).append(c$("center").css("margin",10).text('Filter work only with "Collection" and "Loot" categories.'));Util.each(u,function(e,t){var n=$("ul[name="+e+"]");Util.each(t,function(t,r){var i=typeof r=="string"?r:r.name;c$("li").appendTo(n).append(c$("input:checkbox","id:"+e+"_"+t+",checked:checked").val(t)).append(c$("label","for:"+e+"_"+t).text(i))})});c$("div","tab_search").css("padding-top",20).hide().appendTo(i).append(c$("div").append(c$("label","for:search_gift").text("Type the text to search:"))).append(c$("input:text","id:search_gift").width(220).focus(h.textFocus).change(h.input_change)).append(c$("button","name:gift").text("Go").click(h.doSearch)).append(c$("button").text("Save").click(h.saveSearch)).append("<br /><br />").append(c$("div").append(c$("label","for:saved_search").text("Select a saved search:"))).append(c$("select","id:saved_search").width(222).change(h.search_change)).append(c$("button").text("Remove").click(h.removeSearch));c$("div","tab_config").css("padding-top",20).hide().appendTo(i).append(x$("mgopt_hidezeroamount","Hide items that i dont have.","div")).append(x$("mgopt_keepone","Keep at least one item.","div")).append(x$("mgopt_giftpages","Show gift list pages.","div")).append(x$("mgopt_userpages","Show user list pages.","div")).append(b$("Save","class:short white").click(h.saveSettings_click));c$("div").css("clear","both").appendTo(t);r=c$("div","class:controlbar").appendTo(t);c$("div","class:leftside").appendTo(r).append(c$("div","id:user_page_box").append(c$("a","name:user,id:mgpage_prev,class:active").click(h.prevPage_click)).append(c$("select","id:user_page").width(70).change(h.userPage_change)).append(c$("a","name:user,id:mgpage_next,class:active").click(h.nextPage_click))).append(c$("select","id:user_category,name:user").width(200).change(h.category_change)).append(c$("button","id:user_fav_clear").text("Clear").click(h.clear_click).hide());c$("div","class:rightside").appendTo(r).append(c$("label","for:search_user").text("Search:")).append(c$("input:text","id:search_user").width(140).focus(h.textFocus).change(h.input_change)).append(c$("button","name:user").text("go").click(h.doSearch)).append(c$("div").css("float","right").append(c$("button","title:Clear all selected friends.").text("Clear").click(h.clearUsers_click)));c$("div").css("clear","both").appendTo(t);c$("div","id:user_list,class:item_list").appendTo(t);c$("div","id:selected_users").appendTo(t);c$("div","id:vertical_spacer").appendTo(a.content);n.appendTo(a.content);c$("div","message_controls").appendTo(n).append('<span id="global_messages">');c$("div","start_controls").appendTo(n).append(c$("div","class:gift_delay").append(c$("label","for:mgopt_delay").html("Delay: ")).append(c$("input:text","id:mgopt_delay").width(30).focus(h.textFocus))).append(c$("span").width(50).append(c$("a","id:count_addrem,action:add").html("ADD").click(h.toggleAction_click))).append(b$("1","amount:1,class:medium green").click(h.addRem_click).width(40)).append(b$("5","amount:5,class:medium green").click(h.addRem_click).width(40)).append(b$("10","amount:10,class:medium green").click(h.addRem_click)).append(b$("25","amount:25,class:medium green").click(h.addRem_click)).append(b$("50","amount:50,class:medium green").click(h.addRem_click)).append(b$("ALL","amount:all,class:short green").click(h.addRem_click)).append(b$("ALL OF ALL","class:short green,title:Add all gifts that you can see.").click(h.addAllGifts_click)).append(b$("CLEAR","class:short red,title:Clear all gifts added.").click(h.delQueue_click)).append(b$("START","class:short orange").click(h.start_click).width(80));c$("center","finish_controls").appendTo(n).append(b$("FINISH").addClass("short orange").click(h.finish_click));b$("CANCEL","id:cancel_button,class:short orange").click(h.cancel_click).appendTo(c$("div","status_controls").appendTo(n));c$("div","mglist_queue").appendTo(a.content);c$("textarea","readonly:readonly").attr("onclick","$(this).select();").appendTo(e);n=c$("div","status_controls").appendTo(e).css("padding",20);Resources.getPicture("ajax_loader").css("float","left").appendTo(n);c$("div","id:next_gift_timer").appendTo(n).css("float","right");c$("div").css("padding-left",35).appendTo(n).append(c$("span").text("Current Job:").css({"margin-right":5,color:"grey"})).append(c$("span","id:status_current_job_text"));c$("div").css({"padding-left":35,"margin-top":10}).appendTo(n).append(c$("span").text("Job Progress:").css({"margin-right":5,color:"grey"})).append(c$("span","id:status_send_message"));c$("div","finish_controls").appendTo(e).append(c$("div").css("padding-left",20).text("Select Group:")).append(c$("select","id:group_selection").css({"margin-left":20,width:580})).append(b$("Publish","class:short white sexy_announce_gray").click(h.publish_click));global.Groups.addToSelect("#group_selection");L("user");L("gift");k();a.applyOptions({attack_more_less:{1:"More","-1":"Less"},defense_more_less:{1:"More","-1":"Less"},gift_category:{0:"Collections",1:"Loot",2:"Boosts",3:"Favorites",4:"Search"},user_category:{0:"All MW Friends",1:"Favorites",2:"Search"},collection_filter_type:{all:"All"}});var c=$("#collection_filter_type");for(var p in f){c.append(c$("option","value:"+p).text(p))}C("all")})}function m(e,t){log("index -> "+t);$("#"+e+"_category")[0].selectedIndex=t;h.category_change(e,t)}function g(e){var t=[];for(var n=0;n<e.length;n++){t.push(s.Friends.getName(e[n]))}return t}function y(e,t){var n=Math.max(e.length,t.length);for(var r=0;r<n;r++){if(e[r]!=t[r]){return false}}return true}function b(e,t){return e===t||e.id==t.id&&e.cat==t.cat}function w(e){var t=[];$("#selected_users").children().each(function(e,n){t.push(n.id.substring(5))});return t}function E(e){if(o.length>1){o.splice(e,1);j()}else{h.delQueue_click()}N()}function S(e,t){if(s.is_working)return;$("*[id*=_controls]",a.content).hide();if(t)$("#"+e+"_controls",a.content).fadeIn(t);else $("#"+e+"_controls",a.content).show()}function x(e){$("*[id^=tab_]",a.content).hide();$("#tab_"+e,a.content).show()}function T(){o=[];s.is_working=false;S("finish","slow")}function N(e){if(o.length>0||s.Inventory.selected.id&&$("#selected_users").children().length>0){S("start",e)}else{$("#global_messages").css("color","white").html("You have "+s.gift_count_avail+" gifts left to send today (10000 daily).");S("message",e)}}function C(e){var t=$("#collection_filter").attr("group",e).empty().append(c$("option","value:all").text("All"));if(typeof f[e]!=="undefined"){for(var n in f[e]){t.append(c$("option","value:"+n).text(n))}}t.change()}function k(){var e=$("#saved_search").empty().append(c$("option","value:-1").text("None"));var t=r.get("search");for(var n=0;n<t.length;n++){e.append(c$("option","value:"+n).text(t[n].name))}}function L(e){var t=$("#"+e+"_page").empty();for(var n=0,i=p(e).pages();n<i;n++){t.append(c$("option","value:"+n).text(n+1+"/"+i))}$("#"+e+"_page_box")[r.get(e+"Pages")?"show":"hide"]()}function O(e){if(e$("#user_"+e)!==null){return}c$("div","user_"+e).appendTo("#selected_users").text(s.Friends.getName(e)).append(c$("a").text("X").click(h.removeUser_click))}function M(e,t){var n,i="";var o={user:function(e){if(!Util.isSet(e)){return""}var t='<li uid="'+e.id+'"><div class="checkbox">'+e.name+"</div>";t+='<a title="Add/Remove from favorites" ';if(r.get("userFav").indexOf(e.id)===-1){t+='class="favorite"></a></li>'}else{t+='class="favorite remove"></a></li>'}return t},gift:function(e){if(!Util.isSet(e)||(!e.amount||e.amount<1)&&r.get("hideZeroAmount")){return""}var t='<li gcat="'+e.cat+'" gid="'+e.id+'">';t+='<img src="'+e.img+'">';t+='<div class="item_name">'+e.name+" (";if(e.active){t+=Util.setColor(Math.max(e.eqoff,e.eqdef),"green","item_equipped")+"/"}t+=Util.setColor(e.amount,"grey","item_quantity")+")";if(e.attack&&e.attack>0||e.defense&&e.defense>0){t+=' (<span class="more_in">';t+=e.attack+"|"+e.defense+"</span>)"}t+='</div><a title="Add/Remove from favorites" ';if(r.get("giftFav").indexOf(e.cat+"_"+e.id)===-1){t+='class="favorite"></a></li>'}else{t+='class="favorite remove"></a></li>'}return t}};var u=p(e).getPageItems(t);for(n=0;n<u.length;n++){i+=o[e](u[n])}$("#"+e+"_list").html("<ul>"+i+"</ul>");$("div","#"+e+"_list").click(h[e+"_click"]);if(e=="user"){$("#selected_users").children().each(function(e,t){$("#user_list li[uid="+t.id.substring(5)+"]").addClass("selected")})}else if(s.Inventory.selected&&s.Inventory.selected.id){n=s.Inventory.selected;$("#gift_list li[gid="+n.id+"][gcat="+n.cat+"]").addClass("selected")}$("a","#"+e+"_list").click(h[e+"AddRemove_click"])}function _(e,t,n){var i=r.get(e+"Fav");if(n===true){i.splice(i.indexOf(t),1)}else{i.push(t)}r.save();p(e).updateFavorites()}function D(){var e={active:$("#active_filter")[0].checked,inactive:$("#inactive_filter")[0].checked,attack:{op:parseInt($("#attack_more_less").val())||0,q:parseInt($("#attack_amount").val())||0},defense:{op:parseInt($("#defense_more_less").val())||0,q:parseInt($("#defense_amount").val())||0}};$(".checkboxlist").each(function(t,n){var r=e[$(n).attr("name")]={};$("input:checkbox",n).each(function(e,t){if(t.checked){r[t.value]=true}})});return e}function P(e){if(!Util.isSet(e)){return}var t;var n="http://mwfb.static.zgncdn.com/mwfb/graphics/inventory/ItemCard/icons/";var r=c$("div","class:defenseCard equipped visible").css({"float":"none","text-align":"left"}).append(c$("div","class:itemCardName").text(e.name)).append(c$("div","class:itemCardQuantity").html("x"+e.amount).append(t=c$("span").css("margin-left",5))).append(c$("div","class:itemCardImage").html(e.image||'<img src="'+e.img+'">'));if(parseInt(e.cat)==1){c$("div","class:attack_defense").appendTo(r).append(c$("span","class:attack").text(e.attack).css({"margin-left":17,"padding-right":6})).append(c$("span","class:defense").text(e.defense));var i=e.active?"Active item - Your Mafia is using this item in fights/robs.":"Inactive item - Your Mafia is not using this item in fights/robs.";c$("div","class:icon equippedIcon").appendTo(r).append(c$("img","title:"+i).attr("src",n+"Inventory-"+(e.active?"":"in")+"active-icon.png"));c$("div","class:icon").appendTo(r).html(u.Qualities[e.quality].image);if(e.eqoff&&e.eqoff>0||e.eqdef&&e.eqdef>0){t.append("(").append(c$("span","title:Number active on attack.").css("color","#FF9121").text(e.eqoff)).append("/").append(c$("span","title:Number active on defense.").css("color","#609AD1").text(e.eqdef)).append(")")}}return r}function H(e,t){var n=e||"You have "+s.gift_count_avail+" gifts left to send today (10000 daily).";if(s.daily_left){$("#global_messages").css("color",t||"white").html("<strong>"+n+"</strong>")}S("message");setTimeout(N,4e3)}function B(e,t,n){var r=-1;var i=w();var u=t.amount||0;var a=0;for(var f=0;f<o.length;f++){if(o[f].quantity){a+=o[f].quantity*o[f].recip.length;if(b(o[f].gift,t)){u-=o[f].quantity*o[f].recip.length;if(y(o[f].recip,i))r=f}}}u=Math.floor(u/i.length);var l=Math.min(u,s.daily_left-a);switch(e){case"all":e=l;break;case"-all":e=t.amount*-1;break;default:e=parseInt(e);break}if(t.cat<0||t.id<1){if(!n)H("Please, select a gift to send.","red");return false}if(i.length<1){if(!n)H("Please, select the user to send gift.","red");return false}if(typeof e=="undefined"){if(!n)H("You need to set the gift amount.","red");return false}if(l<1&&e>0){if(!n)H("You dont have gifts left to send.","red");return false}e=Math.min(e,l);if(r>-1){o[r].quantity+=e}else{r=o.length;o[r]={thisID:r,gift:t,recip:i,quantity:e,giftSend:0}}s.gift_count_avail=s.daily_left-a;s.gift_count_avail-=Math.max(0,e)*i.length;if(o[r].quantity>0)F(r);else E(r);return true}function j(){var e=0;$("#mglist_queue").empty();for(var t=0;t<o.length;t++){o[t].thisID=t;e+=o[t].quantity*o[t].recip.length;F(t)}s.gift_count_avail=s.daily_left-e}function F(e){var t=o[e];var n="queue_item_"+e;var r="Send "+t.quantity+" "+t.gift.name+"(s) To ";if(t.recip.length==1){r+=Util.setColor(s.Friends.getName(t.recip[0]),"yellow")}else{r+='<span title="'+g(t.recip).join(", ");r+='" style="color: yellow; cursor: pointer;">';r+=t.recip.length+" users.</span>"}var i=e$("#"+n)||c$("div","class:queue_item,id:"+n).prependTo("#mglist_queue");i.empty();c$("div","class:update_timestamp").appendTo(i).html((new Date).toUTCString());c$("div","class:status").append(c$("div")).appendTo(i);c$("div","class:icon").appendTo(i).append(c$("img").attr({width:40,height:40,src:t.gift.img}));var u=new TableObject(i);c$("span").css("float","right").text("Job:").appendTo(u.cell(0,0));c$("span").css("float","right").text("Status:").appendTo(u.cell(1,0));c$("span","class:job_txt,id:queue_item_status_"+e).text("Waiting.").appendTo(u.cell(1,1));c$("span","class:job_txt,id:queue_job_name").appendTo(u.cell(0,1)).html(r);b$("delete","delete_id_"+e).click(h.deleteJob_click).appendTo(i).css("float","right")}function I(e){e=parseInt(e);return e>49?50:e>24?25:e>9?10:e>4?5:e>0?e:1}function q(){function f(){t=o[0];e={gift_category:t.gift.cat,gift_count:1,gift_id:t.gift.id,gift_key:global.gift_key,sendkey:""};for(var n=0;n<t.recip.length;n++){e["recipients["+n+"]"]=t.recip[n]}$("#status_current_job_text").text("Sending "+t.quantity*t.recip.length+" "+t.gift.name+"(s)");$("#queue_item_status_"+t.thisID).text("Working...");c()}function l(){r.value+="# ["+(new Date).toLocaleTimeString()+"] Sent "+t.giftSend+" "+t.gift.name;r.value+="(s) to "+g(t.recip).join(", ")+"\n";if(!s.is_working)o=[];else o.splice(0,1);$(".status > div","#queue_item_"+t.thisID).addClass("complete");if(o.length>0)f();else T()}function c(){if(!s.is_working){l();return}e["gift_count"]=I(t.quantity);$("#next_gift_timer").html("Sending now.");$("#status_send_message").html("Sending "+e["gift_count"]+" "+t.gift.name+".");log(concat(e));httpAjaxRequest({url:"remote/"+MW.getIntURL("gift","send"),liteLoad:0,data:e,success:function(r){log("step0");MW.update(r);var i=MW.parseGiftData(r);var o=i.item_amounts[t.gift.cat][t.gift.id]||0;t.gift.amount=o;if(s.Inventory.all[t.gift.id]){s.Inventory.all[t.gift.id].quantity=o}s.gift_count_avail=s.daily_left=i.gifts_daily_left;var a=$("#gift_list li[gid="+t.gift.id+"][gcat="+t.gift.cat+"]");a.find("#item_quantity").text(o);a.find("#item_equipped").text(Math.max(t.gift.eqoff,t.gift.eqdef));n=h$(r).find(".message_body").text();$("#status_send_message").html(n);$("#next_gift_timer").html("Next in "+$("#mgopt_delay").val()+" sec.");if(/You\s*gave|Has\s*dado|Du\s*hast|Vous\s*avez\s*donn|Hai\s*dato/i.test(n)){t.quantity=Math.min(t.quantity-e["gift_count"],o);t.giftSend+=e["gift_count"];if(t.quantity>0){u($("#mgopt_delay").val(),c)}else{u($("#mgopt_delay").val(),l)}}else{u($("#mgopt_delay").val(),l)}$("#queue_item_status_"+t.thisID).html("You have sent "+t.giftSend*t.recip.length+" "+t.gift.name+"(s).")}})}if(o.length<1)return;var e,t,n="";var r=$("#main_log textarea",a.content).get(0);var u=function(e,t){if(isNaN(parseInt(e))){e=3}i.start("Next in %N% sec.",e,t)};r.value="";f()}function R(){s.Inventory=new c(50);s.Friends=new l(50);MW.getGiftData(function(n){s.Friends.update(n);s.daily_left=n.gifts_daily_left;s.gift_count_avail=n.gifts_daily_left;Logger.debug("gift_key: "+global.gift_key);Logger.debug("daily_left: "+n.gifts_daily_left);MW.getInventoryData(function(i){Logger.debug("Loading inventory...");s.Inventory.all=i.Items.data;u.ItemTypes=i.Item.Types;u.Locations=i.Item.Locations;u.Qualities=i.Item.Qualities;s.Inventory.update(n,i.Items);Logger.debug("Inventory loaded...");v();if(e&&t){A(e,t)}m("gift",r.get("giftFav").length>0?3:0);m("user",r.get("userFav").length>0?1:0);H();r.toDomElements();a.applyCustomClass();S("none");a.show()})})}var r=UserConfig.mgopt;var i=new TimerMessage("#next_gift_timer");var s={is_working:false,daily_left:0,gift_count_avail:0,categories:{0:"Collections",1:"Loot",2:"Boosts"},Inventory:null,Friends:null};var o=[];var u=new Object;var a=new PopupObject("multigifter_popup",{type:"main",title:"MULTI GIFTER",onclose:function(){i.clear();h.cancel_click();httpAjaxStopRequests();r.fromDomElements();r.save();if(n){setTimeout(n,1e3)}}});var f={Crew:{"Bring Back the Pack":[300022,300023,300024,300025,300026,300027,300028],"Prototype Carjacking":[300001,300002,300003,300004,300005,300006,300007],"Theft of a Drone":[300008,300009,300010,300011,300012,300013,300014],"Weapons Shipment Hijackin":[300015,300016,300017,300018,300019,300020,300021]},Special:{"Silence Don Romo":[100036,100037,100038,100039,100040,100041,100042],"Mystery Bag":[400008,400009,400010,400011,400012,400013,400014],Slots:[100029,100030,100031,100032,100033,100034,100035],"Global Cup":[100022,100023,100024,100025,100026,100027,100028],"ST. Patrick's Day":[100008,100009,100010,100011,100012,100013,100014],"Chinese New Year":[400001,400002,400003,400004,400005,400006,400007],"Valentine Day":[100001,100002,100003,100004,100005,100006,100007],"Tools of the Trade":[500001,500002,500003,500004,500005,500006,500007],"Stolen Diamond":[500008,500009,500010,500011,500012,500013,500014],"Pantheon Trophies":[705001,705002,705003,705004,705005,705006,705007],"Continental Rings":[705008,705009,705010,705011,705012,705013,705014],"Championship Belts":[705015,705016,705017,705018,705019,705020,705021],"Easter Crime Basket":[100015,100016,100017,100018,100019,100020,100021]},Mission:{Operations:[800001,800002,800003,800004,800005,800006,800007]},"New York":{"Diamond Flush":[1036,1037,1038,1039,1040,1041,1042],"Heart Flush":[1043,1044,1045,1046,1047,1048,1049],Sculptures:[1022,1023,1024,1025,1026,1027,1028],"Poker Chips":[1029,1030,1031,1032,1033,1034,1035],"Club Flush":[1050,1051,1052,1053,1054,1055,1056],Boxing:[1085,1086,1087,1088,1089,1090,1091],Cigars:[1001,1002,1003,1004,1005,1006,1007],"Spade Flush":[1057,1058,1059,1060,1061,1062,1063],Billiards:[1092,1093,1094,1095,1096,1097,1098],Rings:[1008,1009,1010,1011,1012,1013,1014],Ties:[1064,1065,1066,1067,1068,1069,1070],Paintings:[1015,1016,1017,1018,1019,1020,1021],Cufflinks:[1071,1072,1073,1074,1075,1076,1077],Barber:[1099,1100,1101,1102,1103,1104,1105],"Great Race Horses":[1078,1079,1080,1081,1082,1083,1084],"Daily Chance":[1106,1107,1108,1109,1110,1111,1112],"Money Laundering":[1113,1114,1115,1116,1117,1118,1119]},Cuba:{"Rum Drinks":[2001,2002,2003,2004,2005,2006,2007],"Tropical Fruits":[2008,2009,2010,2011,2012,2013,2014],Entertainers:[2015,2016,2017,2018,2019,2020,2021],"Tropical Fish":[2022,2023,2024,2025,2026,2027,2028],Beards:[2029,2030,2031,2032,2033,2034,2035]},Moscow:{"Prison Tattoos":[3001,3002,3003,3004,3005,3006,3007],"Matryoshka Dolls":[3008,3009,3010,3011,3012,3013,3014],"Russian Leaders":[3015,3016,3017,3018,3019,3020,3021],"Vodka Drinks":[3022,3023,3024,3025,3026,3027,3028],"Soviet Memorabilia":[3029,3030,3031,3032,3033,3034,3035],"Faberge Egg":[3036,3037,3038,3039,3040,3041,3042]},"Las Vegas":{Matchbooks:[5057,5058,5059,5060,5061,5062,5063],Cactus:[5036,5037,5038,5039,5040,5041,5042],"Mojave Animals":[5043,5044,5045,5046,5047,5048,5049],"Poker Hands":[5050,5051,5052,5053,5056,5054,5055]},Bangkok:{"Chess Set":[4001,4002,4003,4004,4005,4006,4007],Masks:[4008,4009,4010,4011,4012,4013,4014],Spices:[4015,4016,4017,4018,4019,4020,4021],Carvings:[4022,4023,4024,4025,4026,4027,4028],Orchids:[4029,4030,4031,4032,4033,4034,4035]},Italy:{"Dinner Is Served":[6001,6002,6003,6004,6005,6006,6007],"Roman Standards":[6008,6009,6010,6011,6012,6013,6014],"The Great Inventor":[6015,6016,6017,6018,6019,6020,6021],"Famous Rulers":[6022,6023,6024,6025,6026,6027,6028]},Brazil:{Beaches:[7001,7002,7003,7004,7005,7006,7007],"Musical Instruments":[7008,7009,7010,7011,7012,7013,7014],"Amazonian Plants":[7015,7016,7017,7018,7019,7020,7021],Drinks:[7022,7023,7024,7025,7026,7027,7028],"Head Dresses":[7029,7030,7031,7032,7033,7034,7035]},Chicago:{"Car Bonnets":[8001,8002,8003,8004,8005,8006,8007],Stickpins:[8008,8009,8010,8011,8012,8013,8014],"Sharp Dressers":[8015,8016,8017,8018,8019,8020,8021]}};var l=function(e){function o(){n={0:[],1:[],2:[]};t={};i={0:1,1:1,2:1};s=0}var t,n,i,s=0;this.setItemsPerPage=function(t){e=t};this.setCat=function(e){if(typeof n[e]!=="undefined"){s=e}};this.currentPage=function(e){if(e=parseInt(e)){return i[s]=e<1?1:e>this.pages()?this.pages():e}return i[s]};this.getPageItems=function(t){if(!r.get("userPages")){return n[s]}var i=n[s].length;var o=(this.currentPage(t)-1)*e;var u=o+e;return n[s].slice(o,u>i?i:u)};this.getItem=function(e){return t[e]};this.getName=function(e){if(t[e]){return t[e].name}return"ERROR"};this.pages=function(){if(r.get("giftPages")){return Math.floor(n[s].length/e)+1}return 1};this.updateFavorites=function(){var e=r.get("userFav");n[1]=[];i[1]=1;for(var s=0;s<e.length;s++){n[1].push(t[e[s]])}};this.search=function(e){if(typeof e!=="string"){e=""}n[2]=[];i[2]=1;if(e.length<1){return}for(var t=0;t<n[0].length;t++){if(n[0][t].name.toLowerCase().match(e.toLowerCase()))n[2].push(n[0][t])}};this.update=function(e){o();for(var r in e.groups_levels){if(!e.groups_levels[r].match("Unknown")){n[0].push(t[r]={id:r,name:e.groups_levels[r]})}}n[0].sort(function(e,t){var n=e.name.toLowerCase();var r=t.name.toLowerCase();return n<r?-1:n>r?1:0});this.updateFavorites()};o();return this};var c=function(e){function a(){return n[u]||t[u]}function l(){n={0:null,1:null};t={0:[],1:[],2:[],3:[],4:[],5:[]};i={0:{},1:{},2:{}};o={0:1,1:1,2:1,3:1,4:1};u=0}var t,n,i,o,u=0;this.selected={};this.setItemsPerPage=function(t){e=t};this.setCat=function(e){if(typeof t[e]!=="undefined"){u=e}};this.currentPage=function(e){if(e=parseInt(e)){return o[u]=e<1?1:e>this.pages()?this.pages():e}return o[u]};this.getPageItems=function(t){var n=a();if(!r.get("giftPages")){return n}var i=n.length;var s=(this.currentPage(t)-1)*e;var o=s+e;return n.slice(s,o>i?i:o)};this.getAllItems=function(){return a().slice()};this.getItem=function(e,t){return i[e][t]};this.pages=function(){if(r.get("giftPages")){return Math.floor(a().length/e)+1}return 1};this.lootFilter=function(e){n[1]=[];o[1]=1;var r,i,s,u,a,f,l,c;var h=(parseInt(e.attack.q)||0)*e.attack.op;var p=(parseInt(e.defense.q)||0)*e.defense.op;for(var d=0;d<t[1].length;d++){r=t[1][d];i=r.active==true&&e.active||r.active==false&&e.inactive;u=h==0||r.attack*e.attack.op>h;a=p==0||r.defense*e.defense.op>p;f=e.ItemTypes.length===0||e.ItemTypes[r.type]===true;l=e.Qualities.length===0||e.Qualities[r.quality]===true;c=e.Locations.length===0||e.Locations[r.location]===true;if(i&&u&&a&&f&&l&&c){n[1].push(r)}}};this.clearLootFilter=function(){n[1]=null};this.collectionFilter=function(e,r){if(e=="all"){n[0]=null;return}n[0]=[];o[0]=1;var i=[],s;if(r=="all"){Util.each(f[e],function(e,t){i=$.merge(i,t)})}else{i=f[e][r]}for(var u=0;u<t[0].length;u++){s=t[0][u];if(i.indexOf(parseInt(s.id))!==-1){n[0].push(s)}}};this.clearCollectionFilter=function(){n[0]=null};this.search=function(e){if(typeof e!=="string"){e=""}t[4]=[];o[4]=1;if(e.length<1){return}for(var n in s.categories){for(var r=0;r<t[n].length;r++){if(t[n][r].name.toLowerCase().match(e.toLowerCase()))t[4].push(t[n][r])}}};this.updateFavorites=function(){var e=r.get("giftFav");t[3]=[];o[3]=1;var n=0,s=0;for(var u=0;u<e.length;u++){n=e[u].charAt(0);s=e[u].substring(2);t[3].push(i[n][s])}};this.select=function(e,t){if(Util.isSet(i[e][t])){return this.selected=i[e][t]}return};this.updateAmounts=function(e){var n,r;for(var i in s.categories){for(var o=0;o<t[i].length;o++){n=t[i][o].amount=e[i][t[i][o].id];if(inventory&&inventory[o]){inventory[o].quantity=n}}}};this.update=function(e,n){var r,o;l();for(var u in s.categories){for(var a in e.item_names[u]){t[u].push(r=i[u][a]={cat:u,id:a,name:e.item_names[u][a],amount:e.item_amounts[u][a],img:e.item_imgs[u][a]});if(u==1&&typeof (o=n.data[a])!=="undefined"){r.type=o.type;r.attack=o.attack;r.defense=o.defense;r.quality=o.quality;r.location=o.location;r.active=o.active;r.eqoff=o.equipped_offense;r.eqdef=o.equipped_defense;r.image=o.image}}}this.updateFavorites()};l();return this};var h={saveSettings_click:function(){r.fromDomElements();r.save();L("gift");L("user");$("#gift_page, #user_page").change();return false},publish_click:function(){var e=$(this);if(e.hasClass("disabled")){return false}e.addClass("disabled");var t=String($("#main_log textarea").val());var n=$("#main_log #group_selection").val();var r=new Object;var i=parseInt(n)>0?"http://www.facebook.com/groups/${target}/?id=${id}":"http://www.facebook.com/${target}/posts/${id}";Util.each(t.split(/\n/),function(e,t){var n=Util.doRgx(/^\#\s\[([\d\.:]+)\]\s(.*)/,t);r["["+n.$1+"]"]=n.$2});facebook.streamPublish({target:n,name:"{*actor*} sent inventory items!",properties:r},function(t){if(t){var n=Util.doRgx(/(\d+)_(\d+)/,t);e.unbind().removeClass("sexy_announce_gray disabled").attr({href:Util.render(i,{id:n.$2,target:n.$1}),target:"_black"}).find("span > span").text("View")}});return false},clear_click:function(){var e=$(this).attr("id");showAskPopup("Clearing Favorites","Are you sure to clear your favotires ?",function(){if(e==="gift_fav_clear"){r.set("giftFav",new Array);r.save(function(){s.Inventory.updateFavorites();m("gift",3)})}else{r.set("userFav",new Array);r.save(function(){s.Friends.updateFavorites();m("user",1)})}});return false},addAllGifts_click:function(){d();return false},selectAll_click:function(){$(".checkboxlist[name="+$(this).attr("name")+"] input:checkbox").each(function(e,t){t.checked=true});return false},selectNone_click:function(){$(".checkboxlist[name="+$(this).attr("name")+"] input:checkbox").each(function(e,t){t.checked=false});return false},showTab_click:function(){x($(this).attr("name"));return false},filterItems_click:function(){s.Inventory.lootFilter(D());m("gift",1);return false},clearFilter_click:function(){s.Inventory.clearLootFilter();m("gift",1);return false},collectionFilterType_change:function(){C($(this).val());return false},collectionFilter_change:function(){s.Inventory.collectionFilter($(this).attr("group"),$(this).val());m("gift",0);return false},saveSearch:function(){var e=prompt("Write the name of the new search:","MySearch");if(e){r.get("search").push({name:e,text:$("#search_gift").val()});r.save();k()}return false},removeSearch:function(){var e=$("#saved_search")[0].selectedIndex;if(e===0){return false}if(confirm("Are you sure to delete this Search?")){r.get("search").splice($("#saved_search")[0].selectedIndex-1,1);k();$("#search_gift").val("").change()}return false},textFocus:function(){this.select();return false},giftAddRemove_click:function(){var e=$(this).parent();_("gift",e.attr("gcat")+"_"+e.attr("gid"),$(this).hasClass("remove"));$(this).toggleClass("remove",$(this).hasClass("remove")==false);return false},userAddRemove_click:function(){_("user",$(this).parent().attr("uid"),$(this).hasClass("remove"));$(this).toggleClass("remove",$(this).hasClass("remove")==false);return false},search_change:function(){var e=this.selectedIndex-1;if(e<0){$("#search_gift").val("").change();return false}$("#search_gift").val(r.get("search")[e].text).change();return false},removeUser_click:function(){var e=$(this).parent().attr("id");$(this).parent().remove();$("li[uid="+e.substring(5)+"]").toggleClass("selected",false);N();return false},user_click:function(){var e=$(this).parent();var t=e$("#user_"+e.attr("uid"),"#selected_users");if(t!==null){$("a",t).click();return false}O(e.attr("uid"));e.toggleClass("selected",true);N();return false},gift_click:function(){var e=$(this).parent();A(e.attr("gcat"),e.attr("gid"));return false},clearUsers_click:function(){$("li.selected","#user_list").toggleClass("selected",false);$("#selected_users").empty();N();return false},addRem_click:function(){var e=$("#count_addrem").attr("action");var t=$(this).attr("amount");if(e=="add"){B(t,s.Inventory.selected)}else{B("-"+t,s.Inventory.selected)}return false},finish_click:function(){$("#mglist_queue").empty();H();$("#vertical_spacer").animate({"padding-top":422},500,"linear");$("#mglist_queue").animate({height:320},500,"linear");$("#main_log").fadeOut(500,function(){$("#main_container").fadeIn(500)});return false},toggleAction_click:function(){var e=$(this).attr("action");if(e=="add"){$("#start_controls a[amount]").removeClass("green").addClass("red");$(this).attr("action","remove").html("REM")}else{$("#start_controls a[amount]").removeClass("red").addClass("green");$(this).attr("action","add").html("ADD")}return false},cancel_click:function(){s.is_working=false;return false},delQueue_click:function(){o=[];$("#mglist_queue").empty();s.gift_count_avail=s.daily_left;return false},start_click:function(){if(o.length>0){$('*[id^="delete_id_"]',"#mglist_queue").hide();$("#global_messages").empty();S("message");$("#main_container").fadeOut(500,function(){$("#mglist_queue").animate({height:430},500,"linear");$("#vertical_spacer").animate({"padding-top":300},500,"linear");$("#main_log").fadeIn(500);S("status");s.is_working=true;q()})}else{H("Please, add a job before start.","green")}return false},deleteJob_click:function(){var e=this.id.substring(10);if(!isNaN(e)){E(parseInt(e))}return false},category_change:function(e,t){log("cat change");var n=t||this.selectedIndex;var r;if(typeof e==="object"){r=$(this).attr("name")}else{r=e}log(typeof e);log("index -> "+n+"\nname -> "+r);if(r=="gift"){$("#gift_fav_clear").css("display",n===3?"inline":"none");$("div[id^=filter_container]").hide();(e$("#filter_container_"+n)||$("#filter_container_msg")).show()}else{$("#user_fav_clear").css("display",n===1?"inline":"none")}p(r).setCat(n);L(r);$("#"+r+"_page")[0].selectedIndex=p(r).currentPage()-1;$("#"+r+"_page").change();M(r,n+1)},giftPage_change:function(){M("gift",this.selectedIndex+1)},userPage_change:function(){M("user",this.selectedIndex+1)},prevPage_click:function(){var e=$(this).attr("name");if(p(e).currentPage()>1){$("#"+e+"_page")[0].selectedIndex=p(e).currentPage()-2;$("#"+e+"_page").change();M(e,p(e).currentPage()-1)}return false},nextPage_click:function(){var e=$(this).attr("name");if(p(e).currentPage()<p(e).pages()){$("#"+e+"_page")[0].selectedIndex=p(e).currentPage();$("#"+e+"_page").change();M(e,p(e).currentPage()+1)}return false},doSearch:function(){$("#search_"+$(this).attr("name")).change()},input_change:function(){var e=this.id.substring(7);p(e).search(this.value.toLowerCase());m(e,e=="gift"?4:2)}};var A=function(e,t){var n=s.Inventory.select(e,t);if(Util.isSet(n)){$("li.selected","#gift_list").toggleClass("selected",false);$("li[gcat="+n.cat+"][gid="+n.id+"]","#gift_list").toggleClass("selected",true);$("#giftcard").empty().append(P(n));x("selected_gift")}N()};a.addBase64Style("I211bHRpZ2lmdGVyX3BvcHVwIHsNCiAgICBtaW4taGVpZ2h0OiA3ODVweDsNCn0NCiNtdWx0aWdpZnRlcl9wb3B1cCBkaXYuY29u"+"dHJvbGJhciB7DQoJYmFja2dyb3VuZC1pbWFnZTogdXJsKCR7YmFzZV91cmx9bWFwX2Jhc2VkX2pvYnMvZXhwZXJ0X3ZpZXcvZXhw"+"ZXJ0dmlld19uYXZfbWlkLmdpZik7DQoJYm9yZGVyLWNvbG9yOiBibGFjazsNCgloZWlnaHQ6IDM1cHg7DQogICAgbWF4LWhlaWdo"+"dDogMzVweDsNCiAgICBvdmVyZmxvdy15OiBoaWRkZW47DQoJdGV4dC1hbGlnbjogbGVmdDsNCgl3aWR0aDogYXV0bzsNCgljbGVh"+"cjogYm90aDsNCn0NCiNtdWx0aWdpZnRlcl9wb3B1cCBkaXYuY29udHJvbGJhciBkaXYubGVmdHNpZGUgew0KICAgIGZsb2F0OiBs"+"ZWZ0Ow0KICAgIHdpZHRoOiA0MDBweDsNCiAgICB3aGl0ZS1zcGFjZTogbm93cmFwOw0KICAgIG92ZXJmbG93OiBoaWRkZW47DQog"+"ICAgbGluZS1oZWlnaHQ6IDI4cHg7DQogICAgcGFkZGluZy1sZWZ0OiA1cHg7DQogICAgbWF4LWhlaWdodDogMzBweDsNCiAgICBt"+"YXgtd2lkdGg6IDQwMHB4Ow0KfQ0KI211bHRpZ2lmdGVyX3BvcHVwIGRpdi5jb250cm9sYmFyIGRpdi5yaWdodHNpZGUgew0KICAg"+"IGZsb2F0OiByaWdodDsNCiAgICB3aGl0ZS1zcGFjZTogbm93cmFwOw0KICAgIG92ZXJmbG93OiBoaWRkZW47DQogICAgbGluZS1o"+"ZWlnaHQ6IDI4cHg7DQogICAgbWF4LWhlaWdodDogMzBweDsNCiAgICBtYXJnaW4tcmlnaHQ6IDVweDsNCn0NCiNtdWx0aWdpZnRl"+"cl9wb3B1cCBkaXYuY29udHJvbGJhciBkaXYucmlnaHRzaWRlIGEsDQojbXVsdGlnaWZ0ZXJfcG9wdXAgZGl2LmNvbnRyb2xiYXIg"+"ZGl2LmxlZnRzaWRlIGEsDQojbXVsdGlnaWZ0ZXJfcG9wdXAgI3RhYl9zZWFyY2ggYnV0dG9uLA0KI211bHRpZ2lmdGVyX3BvcHVw"+"ICNmaWx0ZXJfY29udGFpbmVyXzEgYnV0dG9uIHsNCgltYXJnaW4tbGVmdDogNXB4Ow0KfQ0KI211bHRpZ2lmdGVyX3BvcHVwICNm"+"aWx0ZXJfY29udGFpbmVyXzEgPiBjZW50ZXIgYnV0dG9uIHsNCiAgICBmb250LXNpemU6IDEycHggIWltcG9ydGFudDsNCiAgICBs"+"aW5lLWhlaWdodDogMThweCAhaW1wb3J0YW50Ow0KfQ0KI211bHRpZ2lmdGVyX3BvcHVwICN1c2VyX3BhZ2VfYm94LA0KI211bHRp"+"Z2lmdGVyX3BvcHVwICNnaWZ0X3BhZ2VfYm94IHsNCglmbG9hdDogcmlnaHQ7DQp9DQojbXVsdGlnaWZ0ZXJfcG9wdXAgZGl2LnRh"+"Yl9jb250YWluZXIgew0KICAgIHRleHQtYWxpZ246IGxlZnQ7DQogICAgZmxvYXQ6IGxlZnQ7DQogICAgaGVpZ2h0OiAxODBweDsN"+"CiAgICB3aWR0aDogMzEycHg7DQogICAgYm9yZGVyOiAxcHggZG90dGVkICMzMzM7DQogICAgcGFkZGluZzogMXB4IDBweCAxcHgg"+"MTBweDsNCn0NCiNtdWx0aWdpZnRlcl9wb3B1cCBkaXYuY29udHJvbHMgew0KCWJhY2tncm91bmQtaW1hZ2U6IHVybCgke2Jhc2Vf"+"dXJsfW1hcF9iYXNlZF9qb2JzL2V4cGVydF92aWV3L2V4cGVydHZpZXdfbmF2X21pZC5naWYpOw0KCWhlaWdodDogMzhweDsNCgl0"+"ZXh0LWFsaWduOiBjZW50ZXI7DQoJd2lkdGg6IGF1dG87DQoJYm9yZGVyLWNvbG9yOiBibGFjazsNCgljbGVhcjogYm90aDsJDQp9"+"DQojbXVsdGlnaWZ0ZXJfcG9wdXAgZGl2LmNvbnRyb2xzICNzdGFydF9jb250cm9scyBhLm1lZGl1bSB7DQoJbWFyZ2luLWxlZnQ6"+"IDVweDsNCgltYXJnaW4tdG9wOiAycHg7DQp9DQojbXVsdGlnaWZ0ZXJfcG9wdXAgZGl2LmNvbnRyb2xzICNzdGFydF9jb250cm9s"+"cyBhLnNob3J0IHsNCgltYXJnaW4tbGVmdDogNXB4Ow0KfQ0KI211bHRpZ2lmdGVyX3BvcHVwIGRpdi5jb250cm9scyAjZmluaXNo"+"X2NvbnRyb2xzIGEuc2hvcnQgew0KCW1hcmdpbjogNHB4Ow0KfQ0KI211bHRpZ2lmdGVyX3BvcHVwIGRpdi5jb250cm9scyAjbWVz"+"c2FnZV9jb250cm9scyB7DQoJd2lkdGg6IGF1dG87DQoJcGFkZGluZy10b3A6IDEwcHg7DQp9DQojbXVsdGlnaWZ0ZXJfcG9wdXAg"+"ZGl2LmNvbnRyb2xzICNzdGF0dXNfY29udHJvbHMgew0KCWhlaWdodDogMzVweDsNCn0NCiNtdWx0aWdpZnRlcl9wb3B1cCBkaXYu"+"Y29udHJvbHMgI3N0YXR1c19jb250cm9scyAjY2FuY2VsX2J1dHRvbiB7DQoJbWFyZ2luLXJpZ2h0OiAzMHB4Ow0KCW1hcmdpbi10"+"b3A6IDRweDsJDQoJZmxvYXQ6IHJpZ2h0Ow0KfQ0KI211bHRpZ2lmdGVyX3BvcHVwIGRpdi5jb250cm9scyAjc3RhdHVzX2NvbnRy"+"b2xzIGltZ3sNCglmbG9hdDogbGVmdDsNCgltYXJnaW46IDEwcHggMHB4IDEwcHggMTVweDsNCn0NCiNtdWx0aWdpZnRlcl9wb3B1"+"cCBkaXYuY29udHJvbHMgI3N0YXR1c19jb250cm9scyAuam9iX3N0YXR1cyB7DQoJZmxvYXQ6IGxlZnQ7DQoJbWFyZ2luLWxlZnQ6"+"IDQwcHg7DQoJdGV4dC1hbGlnbjogbGVmdDsNCn0NCiNtdWx0aWdpZnRlcl9wb3B1cCBkaXYuY29udHJvbHMgI3N0YXR1c19jb250"+"cm9scyAuam9iX3N0YXR1cyAuY3VycmVudF9qb2Igew0KCWZsb2F0OiBsZWZ0Ow0KCW1hcmdpbi1yaWdodDogNXB4Ow0KCWNvbG9y"+"OiBncmVlbjsNCn0NCiNtdWx0aWdpZnRlcl9wb3B1cCBkaXYuY29udHJvbHMgI3N0YXR1c19jb250cm9scyAuam9iX3N0YXR1cyAj"+"bmV4dF9naWZ0X3RpbWVyIHsNCglmbG9hdDogbGVmdDsNCgltYXJnaW4tbGVmdDogNXB4Ow0KfQ0KI211bHRpZ2lmdGVyX3BvcHVw"+"IGRpdi5jb250cm9scyAjc3RhdHVzX2NvbnRyb2xzIC5qb2Jfc3RhdHVzICNzdGF0dXNfY3VycmVudF9qb2JfdGV4dCB7DQoJd2lk"+"dGg6IDMwMHB4Ow0KCWZsb2F0OiBsZWZ0Ow0KCWNvbG9yOiBncmV5Ow0KCW92ZXJmbG93OiBhdXRvOw0KCW1heC13aWR0aDogMzAw"+"cHg7DQoJbWF4LWhlaWdodDogMTlweDsNCn0NCiNtdWx0aWdpZnRlcl9wb3B1cCBkaXYuY29udHJvbHMgI3N0YXR1c19jb250cm9s"+"cyAuam9iX3N0YXR1cyAjc3RhdHVzX3NlbmRfbWVzc2FnZSB7DQoJd2lkdGg6IDUwMHB4Ow0KCW92ZXJmbG93OiBoaWRkZW47DQoJ"+"bWF4LXdpZHRoOiA1MDBweDsNCgltYXgtaGVpZ2h0OiAxOXB4Ow0KfQ0KI211bHRpZ2lmdGVyX3BvcHVwICBkaXYuZ2lmdF9kZWxh"+"eSB7DQoJZmxvYXQ6IGxlZnQ7DQoJbWFyZ2luOiA1cHg7DQoJdGV4dC1hbGlnbjogY2VudGVyOw0KfQ0KI211bHRpZ2lmdGVyX3Bv"+"cHVwICNtZ3BhZ2VfcHJldiB7DQoJYmFja2dyb3VuZDogdHJhbnNwYXJlbnQgdXJsKCR7YmFzZV91cmx9aW52ZW50b3J5L0ZpbHRl"+"ckRyb3BEb3duL2ludmVudG9yeV9hcnJvd19pbmFjdGl2ZV9sZWZ0LnBuZykgbm8tcmVwZWF0Ow0KCWN1cnNvcjogZGVmYXVsdDsN"+"CglsaW5lLWhlaWdodDogMTZweDsNCglwYWRkaW5nLWxlZnQ6IDE2cHg7DQoJd2lkdGg6IDE2cHg7DQp9DQojbXVsdGlnaWZ0ZXJf"+"cG9wdXAgI21ncGFnZV9wcmV2LmFjdGl2ZSB7DQoJYmFja2dyb3VuZDogdHJhbnNwYXJlbnQgdXJsKCR7YmFzZV91cmx9aW52ZW50"+"b3J5L0ZpbHRlckRyb3BEb3duL2ludmVudG9yeV9hcnJvd19hY3RpdmVfbGVmdC5wbmcpIG5vLXJlcGVhdDsNCgljdXJzb3I6IHBv"+"aW50ZXI7DQp9DQojbXVsdGlnaWZ0ZXJfcG9wdXAgI21ncGFnZV9uZXh0ew0KCWJhY2tncm91bmQ6IHRyYW5zcGFyZW50IHVybCgk"+"e2Jhc2VfdXJsfWludmVudG9yeS9GaWx0ZXJEcm9wRG93bi9pbnZlbnRvcnlfYXJyb3dfaW5hY3RpdmVfcmlnaHQucG5nKSBuby1y"+"ZXBlYXQ7DQoJY3Vyc29yOiBkZWZhdWx0Ow0KCWxpbmUtaGVpZ2h0OiAxNnB4Ow0KCXBhZGRpbmctbGVmdDogMTZweDsNCgl3aWR0"+"aDogMTZweDsNCn0NCiNtdWx0aWdpZnRlcl9wb3B1cCAjbWdwYWdlX25leHQuYWN0aXZlIHsNCgliYWNrZ3JvdW5kOiB0cmFuc3Bh"+"cmVudCB1cmwoJHtiYXNlX3VybH1pbnZlbnRvcnkvRmlsdGVyRHJvcERvd24vaW52ZW50b3J5X2Fycm93X2FjdGl2ZV9yaWdodC5w"+"bmcpIG5vLXJlcGVhdDsNCgljdXJzb3I6IHBvaW50ZXI7DQp9DQojbXVsdGlnaWZ0ZXJfcG9wdXAgI3NlbGVjdGVkX3VzZXJzIHsN"+"CiAgICBmbG9hdDogbGVmdDsNCiAgICB3aWR0aDogMzIwcHg7DQogICAgaGVpZ2h0OiAxNjZweDsNCiAgICBvdmVyZmxvdzogYXV0"+"bzsNCiAgICBmb250LXNpemU6IDEycHg7DQogICAgYm9yZGVyOiAxcHggZG90dGVkICMzMzM7DQogICAgcGFkZGluZzogMHB4IDFw"+"eDsNCn0NCiNtdWx0aWdpZnRlcl9wb3B1cCAgI3NlbGVjdGVkX3VzZXJzIGRpdiB7DQogICAgYmFja2dyb3VuZC1jb2xvcjogIzIx"+"MjEyMTsNCiAgICBtYXJnaW46IDJweDsNCiAgICBwYWRkaW5nOiAycHggOHB4Ow0KICAgIHRleHQtYWxpZ246IGxlZnQ7DQogICAg"+"Ym9yZGVyOiAxcHggc29saWQgIzMzMzsNCn0NCiNtdWx0aWdpZnRlcl9wb3B1cCAgI3NlbGVjdGVkX3VzZXJzIGRpdiBhIHsNCglm"+"bG9hdDogcmlnaHQ7DQoJbWFyZ2luLWxlZnQ6IDVweDsNCn0NCiNtdWx0aWdpZnRlcl9wb3B1cCAjbWdsaXN0X3F1ZXVlIHsNCgl3"+"aWR0aDogYXV0bzsNCgloZWlnaHQ6IDMyMHB4Ow0KCXRleHQtYWxpZ246IGxlZnQ7DQoJcGFkZGluZzogMHB4IDZweDsNCglib3Jk"+"ZXI6IDFweCBzb2xpZCByZ2IoMTUzLCAxNTMsIDE1Myk7DQoJY2xlYXI6IGJvdGg7DQoJb3ZlcmZsb3cteDogaGlkZGVuOw0KCW92"+"ZXJmbG93LXk6IGF1dG87DQp9DQojbXVsdGlnaWZ0ZXJfcG9wdXAgI21nbGlzdF9xdWV1ZSBkaXYucXVldWVfaXRlbSB7DQoJYm9y"+"ZGVyLWJvdHRvbTogMXB4IHNvbGlkICMzMzM7DQoJY2xlYXI6IGJvdGg7DQoJZmxvYXQ6IGxlZnQ7DQoJbWFyZ2luLXRvcDogNXB4"+"Ow0KCXBhZGRpbmctYm90dG9tOiA1cHg7DQoJd2lkdGg6IGF1dG87DQp9DQojbXVsdGlnaWZ0ZXJfcG9wdXAgI21nbGlzdF9xdWV1"+"ZSBkaXYucXVldWVfaXRlbSBkaXYuc3RhdHVzIHsNCgltYXJnaW4tcmlnaHQ6IDEwcHg7DQoJYm9yZGVyOiAwcHg7DQoJZmxvYXQ6"+"IGxlZnQ7DQp9DQojbXVsdGlnaWZ0ZXJfcG9wdXAgI21nbGlzdF9xdWV1ZSBkaXYucXVldWVfaXRlbSBkaXYuc3RhdHVzIGRpdiB7"+"DQoJYmFja2dyb3VuZDogdXJsKCIke2Jhc2VfdXJsfWZsYWdzL213X21lc3NhZ2Vib3hfY2hlY2tib3gyX25vcm1hbGl6ZWQuZ2lm"+"Iikgbm8tcmVwZWF0IHNjcm9sbCAwJSAwJSB0cmFuc3BhcmVudDsNCgltYXJnaW46IDEwcHg7DQoJbWluLWhlaWdodDogMjBweDsN"+"CgltaW4td2lkdGg6IDIwcHg7DQp9DQojbXVsdGlnaWZ0ZXJfcG9wdXAgI21nbGlzdF9xdWV1ZSBkaXYucXVldWVfaXRlbSBkaXYu"+"c3RhdHVzIGRpdi5jb21wbGV0ZSB7DQoJYmFja2dyb3VuZDogdXJsKCIke2Jhc2VfdXJsfWZsYWdzL213X21lc3NhZ2Vib3hfY2hl"+"Y2tib3gxX25vcm1hbGl6ZWQuZ2lmIikgbm8tcmVwZWF0IHNjcm9sbCAwJSAwJSB0cmFuc3BhcmVudDsNCn0NCiNtdWx0aWdpZnRl"+"cl9wb3B1cCAjbWdsaXN0X3F1ZXVlIGRpdi5xdWV1ZV9pdGVtIGRpdi5pY29uIHsNCglib3JkZXI6IDBweDsNCglmbG9hdDogbGVm"+"dDsNCn0NCiNtdWx0aWdpZnRlcl9wb3B1cCAjbWdsaXN0X3F1ZXVlIGRpdi5xdWV1ZV9pdGVtIHRhYmxlIHsNCglmbG9hdDogbGVm"+"dDsNCgltYXJnaW4tbGVmdDogMTBweDsNCn0NCiNtdWx0aWdpZnRlcl9wb3B1cCAjbWdsaXN0X3F1ZXVlIGRpdi5xdWV1ZV9pdGVt"+"IHRhYmxlICNxdWV1ZV9qb2JfbmFtZS5qb2JfdHh0IHsNCglmb250LXdlaWdodDogYm9sZDsNCn0NCiNtdWx0aWdpZnRlcl9wb3B1"+"cCAjbWdsaXN0X3F1ZXVlIGRpdi5xdWV1ZV9pdGVtIHRhYmxlIC5qb2JfdHh0IHsNCglmbG9hdDogbGVmdDsNCglmb250LXNpemU6"+"IDEycHg7DQoJbWFyZ2luLWxlZnQ6IDE1cHg7DQoJdmVydGljYWwtYWxpZ246IHRvcDsNCgljb2xvcjogd2hpdGU7DQoJd2lkdGg6"+"IDQ1MHB4Ow0KfQ0KI211bHRpZ2lmdGVyX3BvcHVwIC5jaGVja2JveGxpc3Qgew0KCWZsb2F0OiBsZWZ0Ow0KCWJvcmRlcjogMXB4"+"IHNvbGlkICM5OTk7DQoJaGVpZ2h0OiAxMDRweDsNCgltYXJnaW46IDFweDsNCglwYWRkaW5nOiAxcHg7DQoJd2lkdGg6IDIyMHB4"+"Ow0KCW92ZXJmbG93LXg6IGhpZGRlbjsNCglvdmVyZmxvdy15OiBhdXRvOw0KfQ0KI211bHRpZ2lmdGVyX3BvcHVwIC50YWJfYm94"+"X2NvbnRlbnQgY2VudGVyIHsNCglmbG9hdDogbGVmdDsNCgltYXJnaW46IDE1cHggMHB4IDBweCAzcHg7DQp9DQojbXVsdGlnaWZ0"+"ZXJfcG9wdXAgLml0ZW1fbGlzdCB7DQogICAgZmxvYXQ6IGxlZnQ7DQogICAgcGFkZGluZzogMXB4Ow0KICAgIHdpZHRoOiA0MDBw"+"eDsNCiAgICBib3JkZXI6IDFweCBkb3R0ZWQgIzMzMzsNCiAgICBvdmVyZmxvdy14OiBoaWRkZW47DQogICAgb3ZlcmZsb3cteTog"+"YXV0bzsNCiAgICBtYXJnaW4tbGVmdDogMXB4Ow0KfQ0KI211bHRpZ2lmdGVyX3BvcHVwIC5pdGVtX2xpc3QgdWwgew0KCW1hcmdp"+"bjogMHB4OyANCglwYWRkaW5nOiAwcHg7DQoJbGlzdC1zdHlsZS10eXBlOiBub25lOw0KfQ0KI211bHRpZ2lmdGVyX3BvcHVwIC5p"+"dGVtX2xpc3QgdWwgbGkgew0KCXdpZHRoOiBhdXRvOw0KCW1hcmdpbjogMXB4OyANCgloZWlnaHQ6IDMwcHg7IA0KCWJvcmRlcjog"+"MXB4IHNvbGlkICMzMzMzMzM7IA0KCW92ZXJmbG93OiBoaWRkZW47IA0KCWN1cnNvcjogcG9pbnRlcjsNCn0NCiNtdWx0aWdpZnRl"+"cl9wb3B1cCAuaXRlbV9saXN0IHVsIGxpIC5mYXZvcml0ZSB7DQoJYmFja2dyb3VuZDogdXJsKCIke2Jhc2VfdXJsfXYzL2ljb25f"+"d2lzaGxpc3RfYWRkXzE5eDE0XzAxLmdpZiIpIG5vLXJlcGVhdCBzY3JvbGwgMCUgMCUgdHJhbnNwYXJlbnQ7DQoJY3Vyc29yOiBw"+"b2ludGVyOw0KCWZsb2F0OiByaWdodDsNCgloZWlnaHQ6IDE0cHg7DQoJbWFyZ2luOiA4cHg7DQoJd2lkdGg6IDE5cHg7DQp9DQoj"+"bXVsdGlnaWZ0ZXJfcG9wdXAgLml0ZW1fbGlzdCB1bCBsaSAuZmF2b3JpdGUucmVtb3ZlIHsNCgliYWNrZ3JvdW5kOiB1cmwoIiR7"+"YmFzZV91cmx9djMvaWNvbl93aXNobGlzdF9yZW1vdmVfMTl4MTRfMDEuZ2lmIikgbm8tcmVwZWF0IHNjcm9sbCAwJSAwJSB0cmFu"+"c3BhcmVudDsNCn0NCiNtdWx0aWdpZnRlcl9wb3B1cCBkaXYjZ2lmdF9saXN0IHsNCgloZWlnaHQ6IDE4MHB4Ow0KfQ0KI211bHRp"+"Z2lmdGVyX3BvcHVwIGRpdiN1c2VyX2xpc3Qgew0KICAgIGhlaWdodDogMTY0cHg7DQp9CQ0KI211bHRpZ2lmdGVyX3BvcHVwIGRp"+"diNnaWZ0X2xpc3QgdWwgbGkgZGl2Lml0ZW1fbmFtZSB7DQoJZmxvYXQ6IGxlZnQ7DQoJd2lkdGg6IDI5MHB4Ow0KCWhlaWdodDog"+"MTdweDsNCglvdmVyZmxvdzogaGlkZGVuOw0KCXBhZGRpbmc6IDZweCAwcHg7DQoJdGV4dC1hbGlnbjogbGVmdDsNCn0NCiNtdWx0"+"aWdpZnRlcl9wb3B1cCBkaXYjZ2lmdF9saXN0IHVsIGxpIGltZyB7DQoJZmxvYXQ6IGxlZnQ7DQoJaGVpZ2h0OiAyNXB4Ow0KCW1h"+"cmdpbjogMnB4IDEwcHg7DQoJd2lkdGg6IDI1cHg7DQp9DQojbXVsdGlnaWZ0ZXJfcG9wdXAgZGl2I3VzZXJfbGlzdCB1bCBsaSBk"+"aXYuY2hlY2tib3ggew0KCWJhY2tncm91bmQ6IHVybCgiJHtiYXNlX3VybH1mbGFncy9td19tZXNzYWdlYm94X2NoZWNrYm94Ml9u"+"b3JtYWxpemVkLmdpZiIpIG5vLXJlcGVhdCBzY3JvbGwgMCUgMCUgdHJhbnNwYXJlbnQ7DQoJdGV4dC1hbGlnbjogbGVmdDsNCglt"+"YXJnaW46IDVweCAwcHggMHB4IDEwcHg7DQoJbWluLWhlaWdodDogMjBweDsNCgl3aWR0aDogMzAwcHg7IA0KCXBhZGRpbmctbGVm"+"dDogMzBweDsgDQoJaGVpZ2h0OiAyMHB4Ow0KCWN1cnNvcjogcG9pbnRlcjsNCglmbG9hdDogbGVmdDsNCn0NCiNtdWx0aWdpZnRl"+"cl9wb3B1cCBkaXYjdXNlcl9saXN0IHVsIGxpLnNlbGVjdGVkIGRpdi5jaGVja2JveCB7DQoJYmFja2dyb3VuZDogdXJsKCIke2Jh"+"c2VfdXJsfWZsYWdzL213X21lc3NhZ2Vib3hfY2hlY2tib3gxX25vcm1hbGl6ZWQuZ2lmIikgbm8tcmVwZWF0IHNjcm9sbCAwJSAw"+"JSB0cmFuc3BhcmVudDsNCn0NCiNtdWx0aWdpZnRlcl9wb3B1cCBkaXYjZ2lmdF9saXN0IHVsIGxpLnNlbGVjdGVkIHsgDQoJYm9y"+"ZGVyOiAxcHggc29saWQgI0ZGRkYwMDsNCn0NCiNtdWx0aWdpZnRlcl9wb3B1cCAjbWFpbl9sb2cgew0KICAgIHRleHQtYWxpZ246"+"IGxlZnQ7DQogICAgd2lkdGg6IDEwMCU7DQogICAgZGlzcGxheTogbm9uZTsNCiAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAg"+"cGFkZGluZzogNXB4Ow0KfQ0KI211bHRpZ2lmdGVyX3BvcHVwICNtYWluX2xvZyB0ZXh0YXJlYSB7DQogICAgd2lkdGg6IDcxNXB4"+"Ow0KICAgIGhlaWdodDogMjAwcHg7DQp9DQojbXVsdGlnaWZ0ZXJfcG9wdXAgI21haW5fbG9nICNzdGF0dXNfY29udHJvbHMgew0K"+"ICAgIHBhZGRpbmc6IDIwcHg7DQp9DQojbXVsdGlnaWZ0ZXJfcG9wdXAgI21haW5fbG9nICNmaW5pc2hfY29udHJvbHMgYSB7DQog"+"ICAgbWFyZ2luLXJpZ2h0OiAyMHB4Ow0KICAgIGZsb2F0OiByaWdodDsNCn0NCiNtdWx0aWdpZnRlcl9wb3B1cCAjbWFpbl9jb250"+"YWluZXIgew0KICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICB3aWR0aDogMTAwJTsNCn0NCiNtdWx0aWdpZnRlcl9wb3B1cCAj"+"dmVydGljYWxfc3BhY2VyIHsNCiAgICBjbGVhcjogYm90aDsNCiAgICBwYWRkaW5nLXRvcDogNDIycHg7DQp9DQojbXVsdGlnaWZ0"+"ZXJfcG9wdXAgLmFkZHRpdGxlIHsNCiAgICBoZWlnaHQ6IDMwcHg7DQogICAgYm9yZGVyLWJvdHRvbTogMXB4IGRvdHRlZCAjMzMz"+"Ow0KICAgIG1hcmdpbi1ib3R0b206IDE1cHg7DQogICAgZm9udC1zaXplOiAxOHB4Ow0KICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0K"+"ICAgIGNvbG9yOiAjOTg5ODk4Ow0KfQ==",{base_url:global.zGraphicsURL});r.load(R)}function OperationsCenter(){function g(e){try{var t=$.parseJSON(Util.uSplit(e).next_params);if(!t.instance_id){throw TypeError('Cant read "instance_id" from url.')}if(!t.feed_key){throw TypeError('Cant read "feed_key" from url.')}if(!t.mission_num){throw TypeError('Cant read "mission_num" from url.')}return s[t.instance_id]=t}catch(n){Logger.error(n);return{key:0,num:0}}}function y(e,t){var n=String($(t).text());var r=Util.doRgx(/postInitActionFeed([\w\d]+)/,n).$1;o[r]="postInitActionFeed"+r+"();";c.content.append(t)}function b(e,t){var n=String($(t).text());var r=Util.doRgx(/id:\s*['"]missionTimer_(.*?)['"]/,n).$1;var i=Util.doRgx(/time_left:\s*(\d+)/,n).$1;f.add(r,i)}function w(e,t,n){httpAjaxRequest({url:"remote/"+MW.getIntURL("socialmission"),liteLoad:1,data:{type:t,page:e},success:function(r){if(!MW.update(r)){n&&n();return}var i,o=h$(r);o.find("script:regex(text,var postInitActionFeed)").each(y);o.find("script:regex(text,missionTimer_)").each(b);while(i=a.exec(r)){if(/joinMission/.test(i[1])){g(unescape(i[1]))}}o.find(".socialMission").each(function(n,r){if(!r.id||r.id.length<14){return}var i,o=r.id.substring(14);Logger.debug("loading mission:"+o);if(Util.isSet(s[o])){u[o]=new h(o,r,e,t)}});var f=o.find(".socialMissionPaging .right");if(f.hasClass("pagingDisabled")||f.attr("disabled")){n&&n()}else{n&&n(Util.doRgx(/viewPage\((\d)\);/i,f.attr("onclick")).$1)}}})}function E(){var r=c$("ul");var s=new Object;$.each(u,function(u,a){if(v.is("ignored",a.instance_id)){return}var f=c$("li","instance:"+u),l;var c=false,h=true,p,d;var g=a.slackers?Util.setColor("Yes","red"):Util.setColor("No","green");if(v.is("published",a.instance_id)){s[a.instance_id]=true}c$("div","class:mission_header").append(c$("span","class:operation_name").text(a.name)).append(c$("span").css("margin-left",10).text("Slots: "+a.slots.free+"/"+a.slots.total)).append(c$("span").css("margin-left",10).html("Slackers: "+g)).append(d=c$("span").css("margin-left",10)).append(c$("span","class:operation_status").html(a.timer)).appendTo(f);c$("img").attr("src",a.missionPic).appendTo(f);var y=c$("div","class:task_buttons").appendTo(f);if(a.taskRatio){c$("div","class:ration").append(c$("span").html('<center><span style="font-size:11px">Ratio : <font color="gold">'+a.taskRatio+'</font> Cost : <font color="gold">'+a.taskCost+'</font><img src="http://mwfb.static.zynga.com/mwfb/graphics/icon_'+a.taskCostType+'_16x16_01.gif" style="width:16px;height:16px;border:none;float:none" /></span></center>')).appendTo(f)}if(!a.is_owner){d.html('Leader: <a href="'+a.leaderLink+'" target="_black">'+a.leader+"</a>")}c$("div","class:stats").appendTo(f).append(a.is_mastered?c$("div","class:mastered_message").text("100% Mastered!"):a.taskMastery).append(l=c$("div","id:operation_slots")).append(c$("div","id:job_result").hide());$.each(a.slots.users,function(e,t){var n=c$("a","target:_black").appendTo(l).attr("href",t.profile);var r=c$("div","class:task_box").appendTo(n);c$("div","class:task_image").appendTo(r).append(c$("img","title:"+t.name).attr("src",t.image));c$("div","class:task_status").appendTo(r).append(c$("div","class:fill").css("width",t.progress))});if(a.status===t){if(!a.is_mastered){p={text:"Do Job",cls:"medium orange",click:m.doTask_click}}else if(a.slots.free>0){if(v.isNot("published",a.instance_id)){p={text:"Publish",cls:"sexy_announce_gray medium white",click:m.publish_click}}else{p={text:"Published!",cls:"sexy_announce_gray medium white",click:m.publishAgain_click}}}else{p={text:"Remember",cls:"sexy_announce_gray medium white",click:o[u]}}}else if(a.status===n){p={text:"Start Now",cls:"medium white",click:m.startMission_click}}else if(a.status===e){p={text:"Collect",cls:"medium green",click:m.collectReward_click};h=false}else if(a.status===i){p={text:"Close",cls:"medium white",click:m.removeMission_click};h=false}else{p={text:"Close",cls:"medium white",click:m.close_click};h=false}if(Util.isSet(p)){var b=b$(p.text,"class:"+p.cls+",instance:"+u).appendTo(y);if(Util.isFunc(p.click)){b.click(p.click)}else{b.attr("onclick",p.click)}}if(h===true){c$("br").appendTo(y);c$("a","href:#,class:ignore,instance:"+u).text("ignore").appendTo(y).click(m.ignore_click)}if(a.is_mastered){f.appendTo(r)}else{f.prependTo(r)}});l.set("publishedOps",s);l.save();$("#operations_list").empty().append(r.children())}function S(e,t,n){var r=e.task_data,i="";var s=$("li[instance="+t+"] #operation_slots",c.content);var o=$("li[instance="+t+"] #job_result",c.content);if(o.length>0){clearTimeout(parseInt(o.attr("timeout")));o.clearQueue()}if(e.do_task_status===2){i+="<div>Gained: ";if(Util.isSet(r.payouts)){var u=r.payouts[0];i+='<span class="'+u.cssClass+'">'+u.amount+"</span>"}i+="</div><div>Spent: ";if(Util.isSet(r.requirements)){var a=r.requirements[0];i+='<span class="'+a.cssClass+'">'+a.amount+"</span>"}}else{i+=Util.setColor("You can't do this mission. You have not enough energy/stamina.","red")}o.html(i).show();s.hide();var f=setTimeout(function(){o.fadeOut(2e3,function(){o.empty().hide();s.show()})},5e3);o.attr("timeout",f)}function x(e,t,n){if(!e.do_task_status==2){return}var r,i,s=e.progress;if((i=$("li[instance="+t+"] .task_mastery")).length<1){return}if(e.is_task_mastered){s=100}r=i.find("div");r[0].mastery_percentage=Math.ceil(parseInt(r.css("width"))/parseInt(i.css("width"))*100);r.clearQueue();r.animate({mastery_percentage:s},{easing:"linear",duration:500,step:function(){var e=$(this);var t=parseInt(this.mastery_percentage)+"% Mastered!";if(this.mastery_percentage>s){this.mastery_percentage=s}e.css("width",this.mastery_percentage+"%");$("p",e).text(t);if(e.parent().length>0)e.parent()[0].firstChild.nodeValue=t},complete:function(){var t=$(this);var r=parseInt(this.mastery_percentage)+"% Mastered!";t.css("width",this.mastery_percentage+"%");$("p",t).text(r);n(e.is_task_mastered)}})}function T(e,t,n,r){$("div[id*=_"+t+"]",c.content).hide();var i=$("#"+e+"_"+t,c.content);if(n){i.fadeIn(n,r)}else{i.show()}}function N(e){var t=new Array;Util.each(u,function(n,r){if(v.isNot("ignored",r.instance_id)&&(v.isNot("published",r.instance_id)||e===true)&&r.is_mastered&&r.slots.free>0){if(r.slackers!==true||l.get("addSlackers")){t.push(r)}}});return t}function C(e,t){var n=$("#select_fbgroups option:selected",c.content).val();var r=e.is_owner===false?'{*actor*} needs your expertise helping to "'+e.leader+'" before time runs out.':"{*actor*} needs your expertise to finish an operation before time runs out.";facebook.streamPublish({target:n,name:e.info(),caption:r,picture:e.missionPic,link:e.getJoinUrl(),actionText:"Join Operation"},function(n){if(n){v.add("published",e.instance_id);t&&t(true)}})}function k(e){if(e&&!e.error){showPublishMessage();return true}else{showHelpPopup({icon:"error",title:"Post Error",message:"There was an error publishing your links.<br>"+e.error.message});return false}}function L(e){var t,n=N();var r=new Object;var i=$("#select_fbgroups option:selected").val();var s,o;if(n.length>1){s=n[1].missionPic;o=n[1].getJoinUrl();Util.each(n,function(e,t){var n=e+1;var i=(n>9?"":"0")+n;o=t.getJoinUrl();r[i]={text:t.info(),href:t.getJoinUrl()}});var u=new Array({text:"Join Operation",href:o});t={target:i,name:"{*actor*} needs help to finish these operations",message:"need help to finish these operations",picture:s,link:o,properties:r,actionLinks:u};facebook.streamPublish(t,function(t){if(k(t)){Util.each(n,function(e,t){v.add("published",t.instance_id)});E()}e()})}else if(n.length===1){C(n[0],function(t){if(k(t)){E()}e()})}else{showHelpPopup({icon:"info",title:"No Valid Operations",message:"To publish missions, they should have at least 1 free slot"+($("#ocopt_addslackers")[0].checked?".":" and no slackers.")});e()}}function A(e){var t="",n,r,i;var s=N(true);if(s.length<1){showHelpPopup({icon:"info",title:"No Valid Operations",message:"To get short links, should be 1 or more slots free and no slackers."});return}var o=new Collection(s);o.onMove(function(e,s,u){n=u;r=n.is_owner===false?" from: "+n.leader+" => ":" => ";i=l.get("todayLinks")[n.instance_id];if(Util.isSet(n.instance_id)&&Util.isSet(i)){t+=n.info()+r+i+"\n";o.MoveNext();return}getShortURL(n.getJoinUrl(),function(e){l.get("todayLinks")[n.instance_id]=e;l.save();t+=n.info()+r+e+"\n";o.MoveNext()},o.MoveNext)});o.onEnd(function(){T("shortlinks","panel");e&&e(t)});T("loading","panel");o.MoveFirst()}function O(){var e=c$("div","id:main_panel,class:extended_info").height(130).appendTo(c.content);c$("div","class:groups_selection").append(c$("label","for:select_fbgroups").css("margin-right",5).text("Publish in:")).append(c$("select","id:select_fbgroups").css("margin-right",5).width(400)).append(c$("a","href:#").text("Default").click(m.setDefault_click)).append(b$("Refresh groups","class:short white").css("float","right").click(m.refreshGroups_click)).appendTo(e);c$("div").width("100%").append(c$("input:checkbox","id:ocopt_addslackers").click(m.checkbox_click)).append(c$("label","for:ocopt_addslackers").text("Publish/Short missions with slackers.")).appendTo(e);c$("div","class:left_box").appendTo(e).append(c$("a","href:#ignored").html('Reset Ignored (<span id="ignored_count">'+v.length("ignored")+"</span>)").click(m.resetList_click)).append("<br />").append(c$("a","href:#published").text("Reset Published").click(m.resetList_click)).append("<br />").append(b$("Refresh operations","class:medium white").click(m.refresh_click));c$("div","class:right_box").appendTo(e).append(b$("Short All Operations","class:sexy_send_gift_new medium white").click(m.shortLinks_click)).append("<br />").append(b$("Publish All Operations","class:sexy_announce_gray medium white").click(m.publishAll_click));c$("div","class:user_stats").appendTo(e).append(c$("div").append($("#stat_energy_cont").clone()).append($("#stat_stamina_cont").clone()));c$("div","id:shortlinks_panel,class:extended_info").height(130).append(c$("textarea","id:shortlinks_area").click(m.selectAll_click)).append(c$("div","class:shorting_buttons").append(b$("Go back","class:medium white").click(m.goBack_click)).append("<br />").append(b$("Select All","class:medium white").click(m.selectAll_click)).append("<br />").append(b$("Post Links","class:medium green").click(m.post_links))).appendTo(c.content);c$("div","id:loading_panel,class:extended_info").css("text-align","center").height(130).append(c$("img").attr("src",global.zGraphicsURL+"socialmissions/ajax-loader.gif")).appendTo(c.content);c$("ul","operations_list").height(600).appendTo(c.content)}function M(e,t,n){function r(e){if(e){loadingScreen("Loading "+t+" operations, page "+e+"...");w(e,t,r)}else{n&&n()}}loadingScreen("Loading "+t+" operations...");w(1,t,r)}function _(){var e=(new Date).getDay();if(l.get("today")!==e){l.set("today",e);l.set("todayOps",{});l.set("todayLinks",{});l.save()}f=new p;M("remote/"+MW.getIntURL("socialmission"),"initiator",function(){M("remote/"+MW.getIntURL("socialmission"),"helper",function(){O();E();global.Groups.addToSelect("#select_fbgroups",l.get("defaultGroup"));l.toDomElements();T("main","panel");loadingScreen("hide");c.applyCustomClass();c.show()})})}var e=0;var t=1;var n=2;var r=3;var i=4;var s=new Object;var o=new Object;var u=new Object;var a=/'?(?:link|href)'?:\s*'([^']+)/g;var f;var l=UserConfig.ocopt;var c=new PopupObject("operationscenter_popup",{type:"main",title:"OPERATIONS CENTER",zIndex:30,onclose:function(){l.fromDomElements();l.save();f.clear()}});var h=function(o,u,a,f){var l=this,c=u,h;this.name=$.trim($(".missionName",c).text());this.difficulty=$.trim($(".missionDifficulty > span",c).text());this.slots={total:0,free:0,users:new Array};this.owner_id=Util.doRgx(/(\d+)/,global.USER_ID).$1;this.instance_id=o;this.feed_key=s[o].feed_key;this.mission_num=s[o].mission_num;this.is_owner=true;this.missionPic=Util.getPicture($(".missionPic",c).attr("style"));this.leader=null;this.slackers=false;this.mastered=100;this.is_mastered=false;this.status=r;this.page=a;this.type=f;this.timer="";this.taskMastery=c$("div").css("display","none");if(e$(".missionTimeText .missionTimer",c)){this.status=t;this.timer=Util.setColor("Mission Started!","yellow")}else if(e$(".missionAction a:regex(onclick,collectReward)",c)){this.status=e;this.timer=Util.setColor("Mission Completed!","green")}else if(e$(".missionAction a:regex(onclick,startMission)",c)){this.status=n;this.timer=Util.setColor("Not Started.","white")}else if(h=e$(".missionAction a:regex(onclick,removeMission)",c)){this.status=i;this.timer=Util.setColor("Leader removed you.","red");this.owner_id=Util.doRgx(/removeMission\(['"](\d+)['"],/,h.attr("onclick")).$1}if(h=e$("*[id^=taskDoJob_"+o+"_]",c)){this.is_owner=false;this.owner_id=h.attr("id").substr(h.attr("id").lastIndexOf("_")+1);this.leader=$(".missionLeader > div:eq(1) > div:eq(1) > div:eq(0)",c).text();this.leaderLink=$(".missionLeader > div:eq(1) > div:eq(1) > div:eq(1) a",c).attr("href");if(h=e$(".doTaskModule",c)){this.taskName=$(".doTaskName",h);this.taskMastery=$(".doTaskMastery",h);this.taskMastery.removeClass().addClass("task_mastery");this.taskName.removeClass().addClass("task_name");this.position=h.attr("id").substr(12,1);this.mastered=parseInt(this.taskMastery.find("div").css("width"));this.is_mastered=this.mastered===100}if(h=e$(".doTaskInfo",c)){this.taskCostType=$("dd.doTaskDDHeight",h);if($(this.taskCostType).hasClass("stamina")){this.taskCostType="stamina"}if($(this.taskCostType).hasClass("energy")){this.taskCostType="energy"}this.taskExperience=parseInt($("dd.experience.doTaskDDHeight",h).text());this.taskCost=parseInt($("dd."+this.taskCostType+".doTaskDDHeight",h).text());log("taskCost-> "+this.taskCost);this.taskRatio=(this.taskExperience/this.taskCost).toFixed(2);log("taskCostType -> "+this.taskCostType)}}else if(this.status===t){this.is_mastered=true}$(".missionTaskBox",c).each(function(e,t){l.slots.total++;if(e$(".missionTaskImage > div",t)==null){l.slots.free++;l.slots.users[e]={name:"Free slot",profile:"#",image:Util.getPicture($(".missionTaskImage",t).attr("style")),progress:"0%"}}else{var n=$(".missionTaskStatus > div",t).css("width");var r=$("#socialmission_box_hover_"+e+"_"+o+"_big tr:first a:first img",c);l.slots.users[e]={name:r.attr("title"),profile:r.parent().attr("href"),image:$(".missionTaskImage img",t).attr("src"),progress:n};if(n!=="100%"){l.slackers=true}}});this.getJoinUrl=function(){return MW.getExtURL("socialmission","joinMission",{zy_track:"feed",sendtime:Math.round((new Date).getTime()/100),friend:"p|"+l.owner_id,next_params:{owner_id:"p|"+l.owner_id,feed_key:l.feed_key,instance_id:l.instance_id,mission_num:l.mission_num}})};this.getUrl=function(e){var t={owner:l.owner_id,instance:l.instance_id,type:l.type,page:l.page};if(e==="doTask"){var t={owner_id:l.owner_id,instance_id:l.instance_id,position:l.position}}else if(e==="sendPostBack"){t={instance:l.instance_id}}return"remote/"+MW.getIntURL("socialmission",e)+"&"+$.param(t)};this.info=function(){return"["+l.difficulty+" ("+l.slots.free+"/"+l.slots.total+")] "+l.name};return this};var p=function(){function t(e){try{clearInterval(e)}catch(t){}}function n(e,n){var r;return function(){if(r=e$("li[instance="+e+"] .mission_header .operation_status span",c.content)){if(n>1){r.text(Util.toDateString(n--*1e3))}else{t(e);$("li[instance="+e+"]").hide()}}}}var e=new Object;this.add=function(r,i){if(Util.isSet(e[r])){t(r)}e[r]=setInterval(n(r,i),1e3)};this.clear=function(){$.each(e,function(e,n){t(n)})};return this};var d=function(e){var t=this;this.id=$(e).attr("instance");this.mission=u[t.id];this.hide=function(){var t=$(e).parent().parent();t.fadeOut(500,t.remove)};this.remove=function(){delete u[t.id];t.hide()};this.isDisable=function(){return $(e).hasClass("disabled")};this.enable=function(){$(e).removeClass("disabled")};this.disable=function(){$(e).addClass("disabled")};return this};var v={add:function(e,t){if(Util.isSet(t)){l.get(e+"Ops")[t]=true;l.save()}if(e==="ignored"){$("#ignored_count",c.content).text(this.length(e))}},is:function(e,t){if(Util.isSet(t)){return l.get(e+"Ops")[t]===true}return false},isNot:function(e,t){return this.is(e,t)!==true},reset:function(e){l.set(e+"Ops",new Object);l.save();if(e==="ignored"){$("#ignored_count",c.content).text(this.length(e))}},length:function(e){var t=0;for(var n in l.get(e+"Ops")){if(n){t++}}return t}};var m={post_links:function(){function t(){var t={textallowed:true};showGroupSelection(0,function(e,t){if(e==0)e="me";MWFB.api("/"+e+"/feed","post",{message:t},function(e){if(!e||e.error){log("Error occured")}else{showAskPopup("View Ice Post?","Would you like to view this ice posting?",function(){unsafeWindow.open("http://www.facebook.com/"+e.id,"_blank")});log("Post ID: "+e.id)}})},e,t)}var e=$("#shortlinks_area").val();if(typeof MWFB=="undefined"){facebook.init(t);return}else{t()}},refresh_click:function(){f.clear();M("remote/"+MW.getIntURL("socialmission"),"initiator",function(){M("remote/"+MW.getIntURL("socialmission"),"helper",function(){loadingScreen("hide");E()})});return false},resetList_click:function(){var e=String($(this).attr("href")).substr(1);v.reset(e);E();showHelpPopup({icon:"info",title:"Reset",message:"List "+e+" has been reset."});return false},ignore_click:function(){var e=new d(this);v.add("ignored",e.id);e.hide();return false},startMission_click:function(){var e=new d(this);if(e.isDisable())return false;e.disable();httpAjaxRequest({url:e.mission.getUrl("startMission"),liteLoad:1,success:function(t){if(MW.update(htmlText)){showHelpPopup({icon:"info",title:"Mission Started!",message:'The mission "'+e.mission.name+'" has been started.<br>You need to refresh all '+"missions to see the changes."});e.remove()}}});return false},collectReward_click:function(){var e=new d(this);if(e.isDisable())return false;e.disable();httpAjaxRequest({url:e.mission.getUrl("collectReward"),liteLoad:1,success:function(t){var n=h$(t).find("script:regex(text,pop_socialmission_collect_dialog)");$("#popup_fodder").empty().append(n);e.remove()}});return false},doTask_click:function(){var e=new d(this);if(e.isDisable())return false;e.disable();httpAjaxRequest({url:e.mission.getUrl("doTask"),success:function(t){try{var n=$.parseJSON(t.data);if(n.do_task_status===2){e.mission.mastered=n.progress;x(n,e.id,function(t){if(e.mission.is_mastered=t){$("#operations_list .task_buttons a").addClass("disabled");w(e.mission.page,e.mission.type,E)}})}S(n,e.id)}catch(r){Logger.error(r)}e.enable()}});return false},removeMission_click:function(){var e=new d(this);if(e.isDisable())return false;e.disable();httpAjaxRequest(e.mission.getUrl("removeMission"),e.remove)},close_click:function(){(new d(this)).remove();return false},refreshGroups_click:function(){var e=new d(this);if(e.isDisable()){return false}e.disable();global.Groups.refresh(function(){global.Groups.addToSelect("#select_fbgroups",l.get("defaultGroup"));e.enable()});return false},setDefault_click:function(){l.set("defaultGroup",$("#select_fbgroups option:selected").val());l.save();showHelpPopup({icon:"info",title:"Default group",message:"The selected group has been saved as default."});return false},publish_click:function(){var e=new d(this);if(e.isDisable())return false;e.disable();C(e.mission,function(){E();e.enable()});return false},publishAgain_click:function(){showHelpPopup({icon:"info",title:"mission published",message:"This mission has been published.<br>Do you want to reset published missions? ",buttons:[{label:"Reset",addClass:"short green",onclick:function(){v.reset("published");E()}},{label:"Close",addClass:"short white"}]});return false},publishAll_click:function(){var e=new d(this);if(e.isDisable())return false;e.disable();L(e.enable);return false},shortLinks_click:function(){A(function(e){$("#shortlinks_area").val(e)});return false},checkbox_click:function(){l.fromDomElements();l.save()},selectAll_click:function(){$("#shortlinks_area",c.content).select();return false},goBack_click:function(){T("main","panel");return false}};c.addBase64Style("I29wZXJhdGlvbnNjZW50ZXJfcG9wdXAgLmJsYWNrIHsNCglmb250LXdlaWdodDogYm9sZDsNCgljb2xvcjogcmdiKDIwOCwgMjA4LCAyMDgpOyANCglib3JkZXI6IDFweCBzb2xpZCByZ2IoMTUzLCAxNTMsIDE1Myk7IA0KCWJhY2tncm91bmQtY29sb3I6IGJsYWNrOyANCglmb250LXNpemU6IDE0cHg7DQp9DQojb3BlcmF0aW9uc2NlbnRlcl9wb3B1cCAuZXh0ZW5kZWRfaW5mbyB7DQoJYm9yZGVyOiAxcHggc29saWQgIzRGNEY0RjsgDQoJaGVpZ2h0OiA4MHB4Ow0KCW1hcmdpbjogNXB4Ow0KCXBhZGRpbmc6IDEwcHg7DQoJdGV4dC1hbGlnbjogbGVmdDsNCn0NCiNvcGVyYXRpb25zY2VudGVyX3BvcHVwIC5leHRlbmRlZF9pbmZvIC5ncm91cHNfc2VsZWN0aW9uIHsNCglib3JkZXItYm90dG9tOiAxcHggc29saWQgIzMzMzsNCgl3aWR0aDogMTAwJTsNCgltYXJnaW4tYm90dG9tOiAycHg7DQoJaGVpZ2h0OiAzMHB4Ow0KfQ0KI29wZXJhdGlvbnNjZW50ZXJfcG9wdXAgLmV4dGVuZGVkX2luZm8gLmxlZnRfYm94IHsNCglmbG9hdDogbGVmdDsNCgltYXJnaW4tdG9wOiA2cHg7DQp9DQojb3BlcmF0aW9uc2NlbnRlcl9wb3B1cCAuZXh0ZW5kZWRfaW5mbyAubGVmdF9ib3ggLnNleHlfYnV0dG9uX25ldyB7DQoJbWFyZ2luLXRvcDogNXB4Ow0KfQ0KI29wZXJhdGlvbnNjZW50ZXJfcG9wdXAgLmV4dGVuZGVkX2luZm8gLnJpZ2h0X2JveCB7DQoJZmxvYXQ6IHJpZ2h0Ow0KCW1hcmdpbi10b3A6IDVweDsNCgl0ZXh0LWFsaWduOiByaWdodDsNCn0NCiNvcGVyYXRpb25zY2VudGVyX3BvcHVwIC5leHRlbmRlZF9pbmZvIC5yaWdodF9ib3ggLnNleHlfYnV0dG9uX25ldyB7DQoJbWFyZ2luLXRvcDogNXB4Ow0KfQ0KI29wZXJhdGlvbnNjZW50ZXJfcG9wdXAgLmV4dGVuZGVkX2luZm8gLnVzZXJfc3RhdHMgew0KCWhlaWdodDogNzBweDsNCgltYXJnaW4tbGVmdDogMjMwcHg7DQoJbWFyZ2luLXJpZ2h0OiAyNTBweDsNCgltYXJnaW4tdG9wOiAyMHB4Ow0KfQ0KI29wZXJhdGlvbnNjZW50ZXJfcG9wdXAgLmV4dGVuZGVkX2luZm8gIC5zdGF0IGg0IHsNCgltYXJnaW46IDBweDsNCn0JDQojb3BlcmF0aW9uc2NlbnRlcl9wb3B1cCAuZXh0ZW5kZWRfaW5mbyAgI3N0YXRfc3RhbWluYV9jb250IGg0IHsNCglwYWRkaW5nLWxlZnQ6IDIwcHg7DQp9DQojb3BlcmF0aW9uc2NlbnRlcl9wb3B1cCAuZXh0ZW5kZWRfaW5mbyB0ZXh0YXJlYSB7DQoJd2lkdGg6IDUwMHB4Ow0KCWhlaWdodDogMTIwcHg7DQp9DQojb3BlcmF0aW9uc2NlbnRlcl9wb3B1cCAuZXh0ZW5kZWRfaW5mbyAuc2hvcnRpbmdfYnV0dG9ucyB7DQoJZmxvYXQ6IHJpZ2h0Ow0KCW1hcmdpbi1yaWdodDogNTBweDsNCgltYXJnaW4tdG9wOiAyMHB4Ow0KfQ0KI29wZXJhdGlvbnNjZW50ZXJfcG9wdXAgdWwgew0KCWxpc3Qtc3R5bGUtdHlwZTogbm9uZTsNCglvdmVyZmxvdzogYXV0bzsNCgl0ZXh0LWFsaWduOiBsZWZ0Ow0KCWJvcmRlcjogMnB4IHNvbGlkICMzMzM7DQoJbWFyZ2luOiA1cHg7DQoJcGFkZGluZzogNXB4Ow0KfQ0KI29wZXJhdGlvbnNjZW50ZXJfcG9wdXAgdWwgbGkgew0KCWhlaWdodDogMTE1cHg7DQoJbWluLWhlaWdodDogMzVweDsNCgltYXgtaGVpZ2h0OiAxMzBweDsNCglwYWRkaW5nOiAwcHggOHB4IDBweCA4cHg7DQoJbWFyZ2luLWJvdHRvbTogNXB4Ow0KCWJvcmRlcjogMXB4IHNvbGlkICMzMzM7DQp9DQojb3BlcmF0aW9uc2NlbnRlcl9wb3B1cCB1bCBsaSAubWlzc2lvbl9oZWFkZXIgew0KCWNsZWFyOiBib3RoOw0KCWhlaWdodDogMjBweDsNCglib3JkZXItYm90dG9tOiAxcHggc29saWQgIzQ0NDsNCgltYXJnaW4tYm90dG9tOiAzcHg7DQp9DQojb3BlcmF0aW9uc2NlbnRlcl9wb3B1cCB1bCBsaSBpbWcgew0KCWJvcmRlcjogMXB4IHNvbGlkIGdyZXk7DQoJZmxvYXQ6IGxlZnQ7DQoJd2lkdGg6IDEyMHB4Ow0KCWhlaWdodDogOTBweDsNCn0NCiNvcGVyYXRpb25zY2VudGVyX3BvcHVwIHVsIGxpIGRpdi5zdGF0cyB7DQoJbWFyZ2luLWxlZnQ6IDEyNXB4Ow0KCWhlaWdodDogNzBweDsNCgltYXJnaW4tcmlnaHQ6IDEyMHB4Ow0KfQ0KI29wZXJhdGlvbnNjZW50ZXJfcG9wdXAgdWwgbGkgLm9wZXJhdGlvbl9zdGF0dXMgew0KCWZvbnQtc2l6ZTogMTRweDsNCglmbG9hdDogcmlnaHQ7DQp9CQ0KI29wZXJhdGlvbnNjZW50ZXJfcG9wdXAgdWwgbGkgLm9wZXJhdGlvbl9uYW1lIHsNCglmb250LXNpemU6IDE1cHg7DQoJY29sb3I6ICNGRkNEMDA7DQoJdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsNCglmb250LXdlaWdodDogYm9sZDsNCgltYXJnaW4tcmlnaHQ6IDE1cHg7DQp9DQojb3BlcmF0aW9uc2NlbnRlcl9wb3B1cCB1bCBsaSAjam9iX3Jlc3VsdCB7DQoJdGV4dC1hbGlnbjogbGVmdDsNCgl3aWR0aDogMTAwJTsNCgloZWlnaHQ6IDEwMCU7DQoJcGFkZGluZzogNXB4IDBweCAwcHggNXB4Ow0KCWZvbnQtc2l6ZTogMTJweDsNCn0NCiNvcGVyYXRpb25zY2VudGVyX3BvcHVwIHVsIGxpIGRpdi50YXNrX2J1dHRvbnMgew0KCWZsb2F0OiByaWdodDsNCglmb250LXNpemU6IDEwcHg7DQoJZm9udC13ZWlnaHQ6IGJvbGQ7DQoJdGV4dC1hbGlnbjogcmlnaHQ7DQoJbWFyZ2luOiAxNXB4IDBweCAwcHggNXB4Ow0KfQ0KI29wZXJhdGlvbnNjZW50ZXJfcG9wdXAgdWwgbGkgZGl2LnRhc2tfYnV0dG9ucyBhLmlnbm9yZSB7DQoJdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsNCn0NCi50YXNrX21hc3Rlcnkgew0KCXBhZGRpbmc6IDAgMTBweCAwIDA7DQoJbWFyZ2luOiAwcHg7DQoJYmFja2dyb3VuZDogdXJsKCJodHRwOi8vbXdmYi5zdGF0aWMuemduY2RuLmNvbS9td2ZiL2dyYXBoaWNzL21hcF9iYXNlZF9qb2JzL21hc3RlcnlfYmFyX2JnLmdpZiIpIDAgMCByZXBlYXQteDsNCglib3JkZXI6IDFweCBzb2xpZCAjOTk5Ow0KCWNvbG9yOiAjOTk5Ow0KCWZvbnQtc2l6ZTogMTFweDsNCgloZWlnaHQ6IDE0cHg7DQoJbGluZS1oZWlnaHQ6IDE2cHg7DQoJcG9zaXRpb246IHJlbGF0aXZlOw0KCXRleHQtYWxpZ246IHJpZ2h0Ow0KCXdpZHRoOiA0MDBweDsNCn0NCiNvcGVyYXRpb25zY2VudGVyX3BvcHVwIHVsIGxpIC50YXNrX21hc3RlcnkgZGl2IHsNCgliYWNrZ3JvdW5kOiB1cmwoImh0dHA6Ly9td2ZiLnN0YXRpYy56Z25jZG4uY29tL213ZmIvZ3JhcGhpY3Mvc29jaWFsbWlzc2lvbnMvcGVyY2VudF9iYXJfeWVsbG93LmdpZiIpIDAgMCByZXBlYXQteDsNCgloZWlnaHQ6IDE0cHg7DQoJb3ZlcmZsb3c6IGhpZGRlbjsNCglwb3NpdGlvbjogYWJzb2x1dGU7DQoJdG9wOiAwcHg7DQoJbGVmdDogMHB4Ow0KfQ0KLnRhc2tfbWFzdGVyeSBkaXYgcCB7DQoJY29sb3I6IGJsYWNrOw0KCW1hcmdpbjogMHB4IDBweCAwcHggNXB4Ow0KCXBhZGRpbmc6IDBweCAwcHggMHB4IDBweDsNCglwb3NpdGlvbjogYWJzb2x1dGU7DQoJdG9wOiAwcHg7DQoJbGVmdDogMHB4Ow0KCXdpZHRoOiA0MDBweDsNCn0NCiNvcGVyYXRpb25zY2VudGVyX3BvcHVwIHVsIGxpIC50YXNrX25hbWUgew0KCWZsb2F0OiBsZWZ0Ow0KCWNvbG9yOiAjRkZDRDAwOw0KCWZvbnQtd2VpZ2h0OiBib2xkOw0KCWZvbnQtc2l6ZTogMTRweDsNCn0NCiNvcGVyYXRpb25zY2VudGVyX3BvcHVwIHVsIGxpIC50YXNrX2JveCB7DQoJd2lkdGg6IDQwcHg7DQoJZmxvYXQ6IGxlZnQ7DQoJbWFyZ2luOiAycHggMnB4IDBweCAwcHg7DQoJcG9zaXRpb246IHJlbGF0aXZlOw0KCWNsZWFyOiBub25lOw0KCWJhY2tncm91bmQtY29sb3I6IGJsYWNrOw0KCWJvcmRlcjogMXB4IHNvbGlkICM5OTk7DQp9DQojb3BlcmF0aW9uc2NlbnRlcl9wb3B1cCB1bCBsaSAudGFza19pbWFnZSB7DQoJaGVpZ2h0OiA0MHB4Ow0KCXdpZHRoOiA0MHB4Ow0KCXRleHQtYWxpZ246IGNlbnRlcjsNCn0NCiNvcGVyYXRpb25zY2VudGVyX3BvcHVwIHVsIGxpIC50YXNrX2ltYWdlIGltZyB7DQoJd2lkdGg6IDM4cHg7DQoJaGVpZ2h0OiAzOHB4Ow0KfQ0KI29wZXJhdGlvbnNjZW50ZXJfcG9wdXAgdWwgbGkgLnRhc2tfc3RhdHVzIHsNCgliYWNrZ3JvdW5kOiB1cmwoaHR0cDovL213ZmIuc3RhdGljLnpnbmNkbi5jb20vbXdmYi9ncmFwaGljcy9zb2NpYWxtaXNzaW9ucy9wZXJjZW50X2Jhcl9ibGFuay5naWYpIDAgMCBuby1yZXBlYXQ7DQoJd2lkdGg6IDQwcHg7DQoJaGVpZ2h0OiA3cHg7DQoJZm9udC1zaXplOiA5cHg7DQoJZm9udC1mYW1pbHk6IGZhbnRhc3k7DQoJZm9udC13ZWlnaHQ6IGJvbGQ7DQoJZmxvYXQ6IGxlZnQ7DQoJcGFkZGluZzogMCAwIDAgMDsNCglkaXJlY3Rpb246IGx0cjsNCgktbW96LW1hcmdpbi1zdGFydDogLTFweDsNCgktd2Via2l0LW1hcmdpbi1zdGFydDogLTFweDsNCglib3JkZXI6IDFweCBzb2xpZCAjOTk5Ow0KCWNvbG9yOiAjOTk5Ow0KCWxpbmUtaGVpZ2h0OiAxNHB4Ow0KCXBvc2l0aW9uOiByZWxhdGl2ZTsNCgl0ZXh0LWFsaWduOiBjZW50ZXI7DQp9DQojb3BlcmF0aW9uc2NlbnRlcl9wb3B1cCB1bCBsaSAudGFza19zdGF0dXMgZGl2IHsNCgliYWNrZ3JvdW5kOiB1cmwoImh0dHA6Ly9td2ZiLnN0YXRpYy56Z25jZG4uY29tL213ZmIvZ3JhcGhpY3Mvc29jaWFsbWlzc2lvbnMvcGVyY2VudF9iYXJfeWVsbG93LmdpZiIpIDAgMCByZXBlYXQteDsNCgloZWlnaHQ6IDE0cHg7DQoJb3ZlcmZsb3c6IGhpZGRlbjsNCglwb3NpdGlvbjogYWJzb2x1dGU7DQoJdG9wOiAwOw0KCWxlZnQ6IDA7DQp9DQojb3BlcmF0aW9uc2NlbnRlcl9wb3B1cCB1bCBsaSAudGFza19zdGF0dXMgZGl2LmZpbGwgew0KCWJhY2tncm91bmQ6IHVybCgiaHR0cDovL213ZmIuc3RhdGljLnpnbmNkbi5jb20vbXdmYi9ncmFwaGljcy9zb2NpYWxtaXNzaW9ucy9wZXJjZW50X2Jhcl9ncmVlbi5naWYiKSAwIDAgcmVwZWF0LXg7DQoJaGVpZ2h0OiAxMDAlOw0KfQ0KI29wZXJhdGlvbnNjZW50ZXJfcG9wdXAgI2lnbm9yZWRfY291bnQgew0KCQljb2xvcjogZ3JlZW47DQp9DQojb3BlcmF0aW9uc2NlbnRlcl9wb3B1cCB1bCBsaSAubWFzdGVyZWRfbWVzc2FnZSB7DQoJY29sb3I6IGdyZWVuOw0KCWZvbnQtc2l6ZTogMTJweDsNCgloZWlnaHQ6IDE2cHg7DQoJZm9udC13ZWlnaHQ6IGJvbGQ7DQp9DQojb3BlcmF0aW9uc2NlbnRlcl9wb3B1cCAucmF0aW97DQoJY29sb3I6IGdyZWVuOw0KCWZvbnQtc2l6ZTogMTBweDsNCiAgICAgICAgcG9zaXRpb246cmVsYXRpdmU7DQogICAgICAgIGxlZnQ6MTAwcHg7DQp9DQoNCiNvcGVyYXRpb25zY2VudGVyX3BvcHVwIGltZyAucmF0aW97DQogYm9yZGVyLXN0eWxlOiBub25lOw0KfQ==");l.load(_)}function PluginManager(){function n(e){$("#app_name").val(e.name||"");$("#app_code").val(e.code||"");$("#app_src").val(e.src||0);$("#app_runat").val(e.runat||0)}function r(e){var t=s();if(!t||!Util.isFunc(t.update)){return}var n=unescape(Util.trim($("#app_code").val()));t.active=$("#app_list li.selected .checkbox").hasClass("checked");t.update({name:$("#app_name").val(),src:parseInt($("#app_src").val()),runat:parseInt($("#app_runat").val()),code:n});$("#app_list li.selected #name").text($("#app_name").val());Plugins.save(e)}function i(){var e=e$("#app_list li.selected");if(e){return parseInt(e.attr("app_id"))}else{return-1}}function s(){var e=i();if(e>-1){return Plugins.get(e)}else{return false}}function o(n,r){c$("li","app_id:"+n).appendTo($("#app_list",e.content)).append(x$("app_id_"+n).addClass(r.active===true?"checked":"")).click(t.field_click).append(c$("span","id:name").text(r.name))}function u(){var n=c$("div","class:frame_box").height(450).appendTo(e.content);c$("ul","app_list").appendTo(n).height(448);c$("div","arrow_controls").appendTo(n).append(Resources.getPicture("up_arrow").attr("name","up").click(t.updown_click)).append(Resources.getPicture("down_arrow").attr("name","down").click(t.updown_click));c$("div","class:right_panel").appendTo(n).append(t$("app_name","Name:",390)).append(c$("div","class:separator_line")).append(s$("app_runat","Run At:",120)).append(s$("app_src","Source:",150)).append(c$("div","class:separator_line")).append(c$("textarea","id:app_code")).append(c$("p").text("Tools")).append(b$("Import","class:short white").click(t.import_click)).append(b$("Export","class:short white").click(t.export_click)).append(b$("Link","class:short white").click(t.installLink_click)).append(b$("Share","class:short green").click(t.shareLink_click)).append(b$("Remove","class:short red").click(t.removeApp_click)).hide();c$("center").appendTo(c$("div","class:frame_box").appendTo(e.content)).append(b$("Add New Plug-In","class:short green").click(t.addApp_click).css("margin","5px")).append(b$("Plugin Downloads","class:short orange").click(LucifersMOD.DownloadPlugins).css("margin","5px"));e.applyOptions({app_src:{0:"Plain Text",1:"Remote JS File"},app_runat:{0:"User Click",1:"Startup"}})}function a(){u();Plugins.each(o);e.applyCustomClass();e.show()}var e=new PopupObject("pluginmanager_popup",{type:"main",title:"PLUG-IN MANAGER",onclose:function(){r(Plugins.init)}});var t={updown_click:function(){var t=i();if(t===-1){return}var n=$(this).attr("name");var r=Plugins.newPosition(t,n==="up"?-1:1);if(r!==t){$("#app_list",e.content).empty();Plugins.each(o);$("li[app_id="+r+"]",e.content).click()}return false},addApp_click:function(){var t=new MWAddonPlugin;var n=1,r=t.name;while(Plugins.exists(r)){r=t.name+" ("+n++ +")"}t.name=r;Plugins.addNew(t,function(t,n){o(t,n);$("li[app_id="+t+"]",e.content).click()});return false},field_click:function(){var t=parseInt($(this).attr("app_id"));if(t===i()){return false}var s=Plugins.get(t);r();$("#app_list li",e.content).toggleClass("selected",false);$(this).toggleClass("selected",true);n(s);$(".right_panel").show();return false},removeApp_click:function(){var t=i();if(t===-1){return}showAskPopup("Remove Selected","Are you sure?",function(){Plugins.remove(t,function(){$("#app_list",e.content).empty();$(".right_panel").hide();Plugins.each(o)})});return false},import_click:function(){var e=s();if(!e){return false}showPromptPopup("Paste here the Plugin encoded settings:","",function(t){if(Util.isString(t)&&t.length>2){e.update(t);Plugins.save(function(){n(e)})}},200);return false},export_click:function(){var e=s();if(!e){return false}showTextPopup("Copy this encoded text to save or share your Plugin:",e.encode());return false},installLink_click:function(){var e=s();if(!e){return false}var t=e.getLink();if(t.length<5e3){showTextPopup("Use the URL below to install this Plugin:",t)}else{showHelpPopup({icon:"error",title:"Install link too long.",message:"You can't create an install link for this Plugin."})}return false},shareLink_click:function(){function r(){function o(e){var t=$("#description").val(),n=t.length,r=parseInt(s-n);if(r<=0){remain_display=0}else{remain_display=r}$("#char_left_count").text(remain_display);if(r<=0){remain_remove=parseInt(n-s);$("#description").val(t.substring(0,n-remain_remove))}}var e=false;if(typeof facebook.user.id=="undefined"){alert("You need to refresh or wait for facebook api to be loaded");return}var r=new PopupObject("publishplugin_popup",{type:"main",title:"PUBLISH PLUGIN",width:450,top:125,onclose:function(){abort_process=true},buttons:[{label:"Publish Plugin!",addClass:"short white",onclick:function(){var i=$("#description").val();if(e)return false;if(i.length<20){alert("You need to enter a description at least 20 Charactors or more");return}e=true;$(this).addClass("disabled");var s={facebook_id:facebook.user.id,facebook_name:facebook.user.name,pugin_name:t,plugin_description:$("#description").val(),plugin_install:n,plugin_install2:n};var o=Base64.encode(JSON.stringify(s));var u={plugin:o};$.ajax({type:"POST",dataType:"jsonp",url:AppInfo.plugins+"postplugin.api.php",data:u,success:function(e){log(e);if(e.status=="ok"){alert("Thank you your plugin has been published...");r.destroy()}else{alert(e.data)}}})}}]});var i=c$("div","class:info_body").appendTo(r.content);i.append(c$("p").text("Plugin Name : "+t));i.append(c$("div","class:separator_line"));i.append(c$("span").text("Plugin Description :"));i.append(c$("textarea","id:description"));i.append(c$("div","class:separator_line").html('<span style="font-size:10px">(minimum 20 characters, maximum 255 characters)</span>'));i.append(c$("span","id:char_left").text("Characters Left :").append(c$("span","id:char_left_count")));i.append(c$("p").text("This will be uploaded to our plugins download centre. It will be autmaticly updated on the every 24hrs"));r.show();r.addBase64Style("I3B1Ymxpc2hwbHVnaW5fcG9wdXAgZGl2LnNlcGFyYXRvcl9saW5lIHsNCiAgICBjbGVhcjogYm90aDsNCiAgICBtYXJnaW4tdG9wOiA1cHg7DQp9DQojcHVibGlzaHBsdWdpbl9wb3B1cCB0ZXh0YXJlYSB7DQogICAgbWFyZ2luLXRvcDogNXB4Ow0KICAgIHdpZHRoOiA0MDBweDsNCiAgICBoZWlnaHQ6IDE1MHB4Ow0KfQ0KDQojcHVibGlzaHBsdWdpbl9wb3B1cCB0ZXh0YXJlYSwgI3B1Ymxpc2hwbHVnaW5fcG9wdXAgc2VsZWN0IHsNCmZvbnQtd2VpZ2h0OiBib2xkOw0KY29sb3I6ICNEMEQwRDA7DQpib3JkZXI6IDFweCBzb2xpZCAjOTk5Ow0KYmFja2dyb3VuZC1jb2xvcjogYmxhY2s7DQotbW96LWJvcmRlci1yYWRpdXM6IDNweDsNCmJvcmRlci1yYWRpdXM6IDNweDsNCi13ZWJraXQtYm9yZGVyLXJhZGl1czogM3B4Ow0KZm9udC1zaXplOiAxM3B4Ow0KbGluZS1oZWlnaHQ6IDE0cHg7DQptaW4taGVpZ2h0OiAxMHB4Ow0KfQ==");var s=255;$("#char_left_count").text(s);$("#description").keypress(o);$("#description").keyup(o);$("#description").keydown(o)}var e=s();if(!e){return false}var t=e.name;var n=e.getLink();showHelpPopup({icon:"info",title:"Share "+t+" Plugin.",message:'You can share this plugin with MOD community in our "Plugin Download" centre.'+"<br/>or you can share this plugin to facebook"+"<br/><br/><center>How would you like to share this plugin?</center>",buttons:[{label:"Facebook",addClass:"short white",onclick:function(){unsafeWindow.open("https://www.facebook.com/sharer/sharer.php?u="+escape(n),"_blank")}},{label:"Community",addClass:"short green",onclick:function(){r()}}]});return false}};e.addBase64Style("I3BsdWdpbm1hbmFnZXJfcG9wdXAgLmZyYW1lX2JveCB7DQogICAgYm9yZGVyOiAxcHggc29saWQgIzJGMkYyRjsNCiAgICBtaW4t"+"aGVpZ2h0OiAyNnB4Ow0KICAgIHBhZGRpbmc6IDVweDsNCiAgICB0ZXh0LWFsaWduOiBsZWZ0Ow0KfQ0KI3BsdWdpbm1hbmFnZXJf"+"cG9wdXAgdWwjYXBwX2xpc3Qgew0KCWJvcmRlcjogMXB4IHNvbGlkICM5OTk7DQoJZmxvYXQ6IGxlZnQ7DQoJd2lkdGg6IDI0MHB4"+"Ow0KCWxpc3Qtc3R5bGUtdHlwZTogbm9uZTsNCgltYXJnaW46IDBweDsNCglvdmVyZmxvdy14OiBoaWRkZW47DQoJb3ZlcmZsb3ct"+"eTogYXV0bzsNCglwYWRkaW5nOiAwcHg7DQogICAgbWluLWhlaWdodDogMjUwcHgNCn0NCiNwbHVnaW5tYW5hZ2VyX3BvcHVwIHVs"+"I2FwcF9saXN0IGxpIHsNCglib3JkZXI6IDFweCBzb2xpZCAjMzMzOw0KCWN1cnNvcjogcG9pbnRlcjsNCgloZWlnaHQ6IDIycHg7"+"DQoJbWFyZ2luOiAxcHg7DQoJb3ZlcmZsb3c6IGhpZGRlbjsNCglwYWRkaW5nLXRvcDogM3B4Ow0KCXBhZGRpbmctbGVmdDogNnB4"+"Ow0KfQ0KI3BsdWdpbm1hbmFnZXJfcG9wdXAgdWwjYXBwX2xpc3QgbGkuc2VsZWN0ZWQgew0KCWJvcmRlcjogMXB4IHNvbGlkICND"+"QzA7DQp9DQojcGx1Z2lubWFuYWdlcl9wb3B1cCAjYXJyb3dfY29udHJvbHMgew0KCWZsb2F0OiBsZWZ0Ow0KCW1hcmdpbi10b3A6"+"IDEyMHB4Ow0KfQ0KI3BsdWdpbm1hbmFnZXJfcG9wdXAgI2Fycm93X2NvbnRyb2xzIGRpdiB7DQoJY3Vyc29yOiBwb2ludGVyOw0K"+"CW1hcmdpbi1ib3R0b206IDEwcHg7DQp9DQojcGx1Z2lubWFuYWdlcl9wb3B1cCAucmlnaHRfcGFuZWwgew0KICAgIG1hcmdpbi1s"+"ZWZ0OiAyNzJweDsNCiAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgaGVpZ2h0OiA0NTBweDsNCiAgICB3aWR0aDogYXV0bzsN"+"Cn0NCiNwbHVnaW5tYW5hZ2VyX3BvcHVwIC5yaWdodF9wYW5lbCBsYWJlbFtmb3I9YXBwX3NyY10gew0KCWZsb2F0OiByaWdodDsN"+"Cn0NCiNwbHVnaW5tYW5hZ2VyX3BvcHVwIC5yaWdodF9wYW5lbCB0ZXh0YXJlYSB7DQogICAgbWFyZ2luLXRvcDogNXB4Ow0KICAg"+"IHdpZHRoOiA0MzBweDsNCiAgICBoZWlnaHQ6IDMxMHB4Ow0KfQ0KI3BsdWdpbm1hbmFnZXJfcG9wdXAgLnJpZ2h0X3BhbmVsIHAg"+"ew0KCW1hcmdpbjogNnB4IDBweCA1cHggMHB4Ow0KCWNvbG9yOiAjODk4OTg5Ow0KICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xp"+"ZCAjMzMzOw0KfQ0KI3BsdWdpbm1hbmFnZXJfcG9wdXAgZGl2LnNlcGFyYXRvcl9saW5lIHsNCiAgICBjbGVhcjogYm90aDsNCiAg"+"ICBtYXJnaW4tdG9wOiA1cHg7DQp9DQojcGx1Z2lubWFuYWdlcl9wb3B1cCAgLnJpZ2h0X3BhbmVsIGEgew0KCW1hcmdpbi1sZWZ0"+"OiA1cHg7DQp9DQo=");Plugins.reload(a)}function ReminderEditor(){function n(e){if(!Util.isString(e)||e.length<1){return""}if(e.indexOf("tab:")!==-1||e.indexOf("run:")!==-1){return e}var t=Util.uSplit(e);if(t.xw_controller&&t.xw_action){var e="";Util.each(t,function(t,n){if(!/cb|tmp|xw_person|xw_client_id|snapi_auth/.test(t)){e+="&"+t+"="+n}});return e.substring(1)}else{return""}}function r(){var e=e$("#app_list li.selected");if(e){return parseInt(e.attr("app_id"))}else{return-1}}function i(){var e=r();if(e>-1){return Reminders.get(e)}else{return false}}function s(n,r){c$("li","app_id:"+n).appendTo($("#app_list",e.content)).append(x$("app_id_"+n).attr("title","Set this reminder on/off.").addClass(r.active?"checked":"")).append(c$("span","app_name").text(r.name)).click(t.field_click)}function o(){var e=r();if(e===-1){return}var t=Reminders.get(e);if(!Util.isFunc(t.values)){return}var i=t.values();t.active=$("li[app_id="+e+"] .checkbox").hasClass("checked");Util.each(i,function(e,t){var r=e$("#reminder_"+e);if(!r){return}if(r.is("input")||r.is("select")||r.is("textarea")){if(e==="gotopageurl"||e==="resetonloadurl"){i[e]=n(r.val())}else{i[e]=r.val()}}else{i[e]=r.hasClass("checked")}});t.update(i);$("#app_list li.selected #app_name").text(t.name);Reminders.save()}function u(e){if(e.v2===true){$("#version_layout").removeClass().addClass("v_two")}else{$("#version_layout").removeClass().addClass("v_one")}Util.each(e.values(),function(e,t){var n=e$("#reminder_"+e);if(!n){return}if(n.is("input")||n.is("select")||n.is("textarea")){n.val(t)}else{n[t===true?"addClass":"removeClass"]("checked")}})}function a(){function i(){var e=c$("div"),n=c$("ul").appendTo(e);c$("li").appendTo(n).append(x$("reminder_gotocity","Go to city:","div")).append(s$("reminder_gotocityid",140));c$("li").appendTo(n).append(x$("reminder_gotopage","Go to Page:","div")).append(t$("reminder_gotopageurl",200)).append(s$("bookmark_gotopageurl",120,{click:t.bookmark_click}));c$("li").appendTo(n).append(x$("reminder_runplugin","Run Plug-In:","div")).append(s$("reminder_runpluginid",240));return e}function s(){var e=new TabObject({id:"v2_reminder",height:141,border:"none",background:"transparent",tabs:["Validate","Execute"]});c$("textarea","id:reminder_jstest").appendTo(e.getLayout(0)).css({width:440,height:135});c$("textarea","id:reminder_jsexec").appendTo(e.getLayout(1)).css({width:440,height:135});return e.main}var n=c$("div","class:frame_box").height(500).appendTo(e.content);var r={0:"Bookmarks"};Util.each(UserConfig.main.userLinks,function(e,t){r[e+1]=t.name});c$("ul","id:app_list").appendTo(n);var o=c$("div","class:right_panel").appendTo(n).append(c$("p").text("Reminder").css("margin-top",0)).append(c$("div","class:mini_title").text("Name:")).append(c$("input:text","id:reminder_name").width(440)).append(c$("div","class:mini_title").text("Message:")).append(c$("textarea","id:reminder_description").width(437).height(50));c$("p").text("Actions").appendTo(o);c$("div").css("margin","5px 0px 5px 0px").appendTo(o).append(c$("span").text("Remember")).append(s$("reminder_checktype",80)).append(n$("reminder_every",":")).append(c$("span").text("hours."));c$("div","id:version_layout,class:v_one").appendTo(o).append(c$("div","id:version_one_layout").append(i())).append(c$("div","id:version_two_layout").append(s()));o.append(c$("p").text("Reset On Page Load")).append(x$("reminder_resetonload","Activated","div")).append(t$("reminder_resetonloadurl",200)).append(s$("bookmark_resetonloadurl",120,{click:t.bookmark_click})).append(c$("p").text("Tools")).append(b$("Import","class:short white").click(t.import_click)).append(b$("Export","class:short white").click(t.export_click)).append(b$("Link","class:short white").click(t.installLink_click)).append(b$("Share","class:short white").click(t.shareLink_click)).append(b$("Reset","class:short orange").click(t.resetApp_click)).append(b$("Remove","class:short red").click(t.removeApp_click)).hide();c$("center").appendTo(c$("div","class:frame_box").css("margin-top",15).appendTo(e.content)).append(b$("Add New Reminder","class:short green").css("margin-right",6).click(t.addApp_click)).append(b$("Add New RemV2 (advanced)","class:short green,version:2").click(t.addApp_click));var u=new Object;Plugins.each(function(e,t){if(t.runat===0){u[""+e]=t.name}});e.applyOptions({reminder_gotocityid:global.cityNames,reminder_runpluginid:u,reminder_checktype:{0:"every",1:"at"},bookmark_resetonloadurl:r,bookmark_gotopageurl:r})}function f(){Reminders.isDisabled=true;a();Reminders.each(s);e.applyCustomClass();e.show()}var e=new PopupObject("remindereditor_popup",{type:"main",title:"REMINDER EDITOR",onclose:function(){o();Reminders.isDisabled=false}});var t={bookmark_click:function(){var e=this.id.substring(9);var t=parseInt($(this).val());var n=UserConfig.main.userLinks[t-1];if(n){$("#reminder_"+e).val(n.url)}return false},addApp_click:function(){var t=$(this).attr("version");var n=new MWAddonReminder(t?{v2:true}:{});var r=1,i=n.name;while(Reminders.exists(i)){i=n.name+" ("+r++ +")"}n.name=i;Reminders.addNew(n,function(t,n){s(t,n);$("li[app_id="+t+"]",e.content).click()});return false},field_click:function(){var t=parseInt($(this).attr("app_id"));if(t===r()){return false}o();$("#app_list li",e.content).toggleClass("selected",false);$(this).toggleClass("selected",true);u(Reminders.get(t));$(".right_panel",e.content).show();return false},resetApp_click:function(){var e=i();if(e){e.start();showHelpPopup({icon:"info",title:"Timer Reset",message:"This reminder has been reset and now will show up!"})}return false},removeApp_click:function(){var t=r();if(t===-1){return false}showAskPopup("Remove Selected","Are you sure?",function(){Reminders.remove(t,function(){$("#app_list",e.content).empty();$(".right_panel",e.content).hide();Reminders.each(s)})});return false},import_click:function(){var e=i();if(!e){return false}showPromptPopup("Paste here the Reminder settings:","",function(t){if(Util.isString(t)&&t.length>2){e.update(t);Reminders.save(function(){u(e)})}},200);return false},export_click:function(){var e=i();if(!e){return false}showTextPopup("Copy this encoded text to save or share your Reminder:",e.encode());return false},installLink_click:function(){var e=i();if(!e){return false}var t=e.getLink();if(t.length<5e3){showTextPopup("Use the URL below to install this Reminder:",t)}else{showHelpPopup({icon:"error",title:"Install link too long.",message:"You can't create an install link for this Reminder."})}return false},shareLink_click:function(){var e=i();if(!e){return false}var t=e.getLink();unsafeWindow.open("https://www.facebook.com/sharer/sharer.php?u="+escape(t),"_blank");return false}};e.addBase64Style("I3JlbWluZGVyZWRpdG9yX3BvcHVwIC5mcmFtZV9ib3ggew0KCWJvcmRlcjogMXB4IHNvbGlkICMyRjJGMkY7DQoJbWFyZ2luOiA1"+"cHg7DQoJbWluLWhlaWdodDogMjZweDsNCglwYWRkaW5nOiA1cHg7DQoJdGV4dC1hbGlnbjogbGVmdDsNCn0NCiNyZW1pbmRlcmVk"+"aXRvcl9wb3B1cCB1bCB7DQoJbGlzdC1zdHlsZS10eXBlOiBub25lOw0KCW92ZXJmbG93LXg6IGhpZGRlbjsNCglvdmVyZmxvdy15"+"OiBhdXRvOw0KCW1hcmdpbjogMHB4Ow0KCXBhZGRpbmc6IDBweDsNCn0NCiNyZW1pbmRlcmVkaXRvcl9wb3B1cCAjYXBwX2xpc3Qg"+"ew0KCWZsb2F0OiBsZWZ0Ow0KCWJvcmRlcjogMXB4IHNvbGlkICM5OTk7DQoJaGVpZ2h0OiA1MDBweDsNCgl3aWR0aDogMjQwcHg7"+"DQp9DQojcmVtaW5kZXJlZGl0b3JfcG9wdXAgdWwjYXBwX2xpc3QgbGkgew0KCWJvcmRlcjogMXB4IHNvbGlkICMzMzM7DQoJY3Vy"+"c29yOiBwb2ludGVyOw0KCWhlaWdodDogMjJweDsNCgltYXJnaW46IDFweDsNCglvdmVyZmxvdzogaGlkZGVuOw0KCXBhZGRpbmct"+"dG9wOiAzcHg7DQoJcGFkZGluZy1sZWZ0OiA2cHg7DQp9DQojcmVtaW5kZXJlZGl0b3JfcG9wdXAgdWwjYXBwX2xpc3QgbGkuc2Vs"+"ZWN0ZWQgew0KCWJvcmRlcjogMXB4IHNvbGlkICNDQzA7DQp9DQojcmVtaW5kZXJlZGl0b3JfcG9wdXAgLnJpZ2h0X3BhbmVsIHsN"+"CiAgICBoZWlnaHQ6IDUwMHB4Ow0KICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgIHdpZHRoOiBhdXRvOw0KICAgIG1hcmdpbi1sZWZ0"+"OiAyNTBweDsNCn0NCiNyZW1pbmRlcmVkaXRvcl9wb3B1cCAucmlnaHRfcGFuZWwgYSB7DQoJbWFyZ2luLWxlZnQ6IDVweDsNCn0N"+"CiNyZW1pbmRlcmVkaXRvcl9wb3B1cCAucmlnaHRfcGFuZWwgcCB7DQoJbWFyZ2luOiAxMHB4IDBweCA1cHggMHB4Ow0KCWNvbG9y"+"OiAjODk4OTg5Ow0KICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjMzMzOw0KfQ0KI3JlbWluZGVyZWRpdG9yX3BvcHVwIC5y"+"aWdodF9wYW5lbCB1bCBsaSB7DQoJbWFyZ2luOiAycHggMHB4IDhweCAwcHg7DQp9DQojcmVtaW5kZXJlZGl0b3JfcG9wdXAgLnJp"+"Z2h0X3BhbmVsIGRpdi5jaGVja2JveCB7DQogICAgd2lkdGg6IDgwcHg7DQogICAgZmxvYXQ6IGxlZnQ7DQp9DQojcmVtaW5kZXJl"+"ZGl0b3JfcG9wdXAgZGl2Lm1pbmlfdGl0bGUgew0KICAgIGZvbnQtc2l6ZTogMTJweDsNCn0NCiNyZW1pbmRlcmVkaXRvcl9wb3B1"+"cCAjdmVyc2lvbl90YWJfYnV0dG9uIHsNCiAgICBtYXJnaW4tcmlnaHQ6IDVweDsNCiAgICBmbG9hdDogcmlnaHQ7DQp9DQojcmVt"+"aW5kZXJlZGl0b3JfcG9wdXAgI3ZlcnNpb25fbGF5b3V0IHsNCiAgICBoZWlnaHQ6IDE4MHB4Ow0KfQ0KI3JlbWluZGVyZWRpdG9y"+"X3BvcHVwICN2ZXJzaW9uX2xheW91dC52X29uZSAjdmVyc2lvbl90d29fbGF5b3V0IHsNCiAgICBkaXNwbGF5OiBub25lOw0KfQ0K"+"I3JlbWluZGVyZWRpdG9yX3BvcHVwICN2ZXJzaW9uX2xheW91dC52X29uZSAjdmVyc2lvbl9vbmVfbGF5b3V0IHsNCiAgICBkaXNw"+"bGF5OiBibG9jazsNCn0NCiNyZW1pbmRlcmVkaXRvcl9wb3B1cCAjdmVyc2lvbl9sYXlvdXQudl90d28gI3ZlcnNpb25fdHdvX2xh"+"eW91dCB7DQogICAgZGlzcGxheTogYmxvY2s7DQp9DQojcmVtaW5kZXJlZGl0b3JfcG9wdXAgI3ZlcnNpb25fbGF5b3V0LnZfdHdv"+"ICN2ZXJzaW9uX29uZV9sYXlvdXQgew0KICAgIGRpc3BsYXk6IG5vbmU7DQp9DQo=");Reminders.init(f)}function UserLinks(){function o(t,r,i){var s=new Object;var o=1;e.fromDomElements();e.save();Util.each(n,function(t,n){if(/http/.test(n.long_url)&&e.get(t)){s["#"+o++]={text:n.name,href:n.long_url}}});facebook.streamPublish({target:t,message:r,name:"{*actor*} wants to share some personal links!",properties:s},i)}function u(e,n,r){$("#"+e+"_link").val(n+" => "+r);t.add(e,r)}function a(){Util.each(n,function(e,t){var n=c$("li").appendTo(c$("ul").appendTo(i.content));x$("ulopt_"+e,t.name+" Link:").appendTo(n);if(Util.isSet(s[e])){b$("Publish","class:short white sexy_announce_gray,isfor:"+e).appendTo(n).click(r.publish_click)}n=c$("div").appendTo(n);n=c$("input:text","readonly:readonly,id:"+e+"_link").appendTo(n);n.width(300).val("Loading...").click(r.text_click)})}function f(){a();Util.each(n,function(e,n){if(t[e]){u(e,n.name,n.short_url=t[e])}else if(n.long_url){getShortURL(n.long_url,function(t){u(e,n.name,t)},function(t){$("#"+e+"_link").val(t)})}});e.load(function(){e.toDomElements();i.applyCustomClass();i.show()})}var e=UserConfig.ulopt;var t=new Config("usershortenlinks",{});var n={profile:{name:"Profile",long_url:MW.getProfileLink()},promote:{name:"Promote",long_url:MW.getExtURL("group","view",{next_params:{promote:"yes",pid:global.USER_ID}})},slots:{name:"Slots",long_url:MW.getExtURL("stats","view",{next_params:{user:global.USER_ID,vegasslots:"1",referrer:"ad_feed"}})},warhelp:{name:"War Help",long_url:MW.getExtURL("war","view",{next_params:{leader_id:global.USER_ID}})},brcrew:{name:"Brazil Crew",long_url:MW.getExtURL("job","accept_city_crew_feed",{next_params:{target_id:global.USER_ID}})},chcrew:{name:"Chicago Crew",long_url:MW.getExtURL("job","accept_city_crew_feed",{next_params:{target_id:global.USER_ID}})}};var r={publishAll_click:function(){var e=$(this);showGroupSelection(0,function(t,n){o(t,n,function(){e.unbind().removeClass("sexy_announce_gray").addClass("disabled").find("span > span").text("Published!")})});return false},resetAll_click:function(){t=new Config("usershortenlinks",{});t.save(function(){i.destroy();UserLinks()});return false},publish_click:function(){var e=$(this);var t=e.attr("isfor");var r=s[t];if(!/http/.test(n[t].long_url)||e.hasClass("disabled")){return false}e.addClass("disabled");r.link=n[t].long_url;showGroupSelection(0,function(t,n){r.target=t;r.message=n;facebook.streamPublish(r,function(){e.unbind().removeClass("sexy_announce_gray").find("span > span").text("Published!")})});return false},text_click:function(){$(this).select();return false}};var i=new PopupObject("user_links",{title:"My Links",type:"normal",buttons:[{label:"Publish All",addClass:"short green sexy_announce_gray",onclick:r.publishAll_click},{label:"Reset all links",addClass:"short white",onclick:r.resetAll_click},{label:"Close"}],onclose:function(){e.fromDomElements();e.save();t.save()}});var s={promote:{name:"Who doesn't want to be a gangster?",caption:"Promote me to your top-mafia and turn you into a really gangster!!",picture:global.zGraphicsURL+"levelup_test_2.jpg",actionText:"Promote me"},slots:{name:"{*actor*} owns a Vegas Slot Machine!",caption:"{*actor*} is offering free spins to all!",picture:global.zGraphicsURL+"vegas_slots_777.png",actionText:"Play Slots"},warhelp:{name:"{*actor*} needs your help in a War",caption:"{*actor*} is gearing up for a war and needs your help to win. Arm yourself and follow {*actor*} into battle. To the victor go the spoils, so you'll both be rewarded handsomely if you emerge victorious.",picture:global.zGraphicsURL+"DW_feed_red_02.png",actionText:"Help"},energy:{name:"{*actor*} wants an energy pack!",caption:"{*actor*} needs an energy pack to help grow their criminal empire.",picture:global.zGraphicsURL+"mw_feed_energypack_90x90_02.gif",actionText:"Send one"},chcrew:{name:"{*actor*} needs your help in Chicago",caption:"Join {*actor*}'s elite crew in Chicago and you'll both get rewarded handsomely.",picture:global.zGraphicsURL+"crew_module/chicago/feed_crew1.png",actionText:"Join Now"},brcrew:{name:"{*actor*} needs your help in Brazil",caption:"Join {*actor*}'s elite crew in Brazil and you'll both get rewarded handsomely.",picture:global.zGraphicsURL+"crew_module/brazil/feed_crew1.png",actionText:"Join Now"},masteryboost:{name:"{*actor*} is sharing a Mastery boost!",caption:"Here is a Mastery boost to help you do jobs faster. If you accept, we'll both get a boost to help us with jobs. Sweet!.",picture:global.zGraphicsURL+"AsnSocialJob/MFS-2x_mastery.jpg",actionText:"Accept"},sdboostget:{name:"Help me loot!",caption:"Please give me 2x loot boosts to help me get powerful loot faster.",picture:global.zGraphicsURL+"boosts/big_item_boost-2xLoot-feed-icon.png",actionText:"Give 2x Loot Boost"}};i.addBase64Style("I3VzZXJfbGlua3MgLmJsYWNrIHsNCgl3aWR0aDogMzAwcHg7DQoJbWFyZ2luLWxlZnQ6IDVweDsNCglmb250LXdlaWdodDogYm9s"+"ZDsgDQoJY29sb3I6IHJnYigyMDgsIDIwOCwgMjA4KTsgDQoJYm9yZGVyOiAxcHggc29saWQgcmdiKDE1MywgMTUzLCAxNTMpOyAN"+"CgliYWNrZ3JvdW5kLWNvbG9yOiBibGFjazsgDQoJZm9udC1zaXplOiAxNHB4Ow0KfQ0KI3VzZXJfbGlua3MgdWwsIGxpIHsNCglt"+"YXJnaW46IDBweDsNCglwYWRkaW5nOiAwcHg7DQp9DQojdXNlcl9saW5rcyB1bCB7DQoJbGlzdC1zdHlsZS10eXBlOiBub25lOw0K"+"CW92ZXJmbG93OiBhdXRvOw0KCXRleHQtYWxpZ246IGxlZnQ7DQp9DQojdXNlcl9saW5rcyB1bCBsaSB7DQoJYm9yZGVyOiAxcHgg"+"c29saWQgIzJGMkYyRjsNCgltaW4taGVpZ2h0OiAyNnB4Ow0KCW1hcmdpbjogNXB4Ow0KCXBhZGRpbmc6IDVweDsNCn0NCiN1c2Vy"+"X2xpbmtzIHVsIGxpIHNwYW4uY2hlY2tib3ggew0KCWZsb2F0OiBsZWZ0Ow0KCW1heC13aWR0aDogMTQwcHg7DQoJb3ZlcmZsb3c6"+"IGhpZGRlbjsNCgltYXgtaGVpZ2h0OiAyMHB4Ow0KCW1hcmdpbi10b3A6IDJweDsNCn0NCiN1c2VyX2xpbmtzIHVsIGxpIGRpdiB7"+"DQoJbWFyZ2luLWxlZnQ6IDIwMHB4Ow0KfQ0KI3VzZXJfbGlua3MgdWwgbGkgYSB7DQoJZmxvYXQ6IHJpZ2h0Ow0KfQ==");t.load(f)}function PageCollection(){if(!UserConfig.main.opt_CollectionPage){return}var e=function(){var e=Util.uSplit($(this).attr("href"));MultiGifter(e.gift_category,e.gift_id);$("#TopField").focus();return false};$("a:regex(href,gift_id)").each(function(t,n){if(n.href&&n.href.indexOf("xw_controller=gift")!==-1){$(n).removeAttr("onclick").click(e)}})}function PageClan(){function t(){function u(){n.set(t,r=new Object);a()}function a(){$("ul#member_list li").each(function(t,n){var i,s,o;try{o=e$("div.name_n_rank a",n);s=e$("td.member_level",n).text();i=Util.uSplit(o.attr("href")).user;i=Base64.decode(i);r[Util.parseNum(i)]=o.text()+" level "+$.trim(s)+" (from family profile)";e++}catch(u){Logger.error("addToList:"+u)}});n.save(function(){log("run here");showHelpPopup({icon:"info",title:"Adding family members to "+t,message:"You've added "+e+" users to Battlefield's "+t+"!",autoclose:5})})}var e=0;var t=$(this).attr("name");log("list_name->"+t);var n=UserConfig.bfopt;var r;if(t=="enmClanList"){log("enmClanList");var i=$("#profile_link").text();if(i.length>0){var s=JSON.parse(unescape(Util.doRgx(/id=([^\n&]+)/,i).$1));s=Base64.decode(s.id);log("clan_link -> "+s);n.load(function(){r=n.get(t);showAskPopup("Clear "+t,"Do you want to clear "+t+" before adding this family to enimes family list?",function(){n.set(t,r=new Object);o()},o)});function o(){r[s]=$.trim($("#clan_header").text())+" (from family profile)";n.save();showHelpPopup({icon:"info",title:"Adding family members to "+t,message:"You've added "+$.trim($("#clan_header").text())+" to Battlefield's Family Enemy List  !",autoclose:5})}return}else{log("profile link < 0 ->"+i)}}else{n.load(function(){r=n.get(t);showAskPopup("Clear "+t,"Do you want to clear "+t+" before add all family's members?",u,a)})}return false}function n(){function i(t,s){if(s<=n){var o=r[s];var u="remote/";switch(t){case"Family":u=u+MW.getIntURL("stats","clan_rivals_add",1);break;case"Personal":u=u+MW.getIntURL("fight","rivals_add",1);break}u+="&rival_id="+escape("p|"+o)+"&user="+escape("p|"+o)+"&src=stats";httpAjaxRequest({url:u,success:function(n){if(($respnse=$(n).find(".message_body:first, #mbox_generic_1 tr:eq(1)")).length>0){$("#rival_adding").text($respnse.text());$("#progressbar").progressbar({value:s});s++;if(/rivals list is full/.test($respnse.text())){showHelpPopup({icon:"error",title:t+" Rivals",message:$respnse.text(),autoclose:10,position:["center",100]});$("#LucifersRivalsADDER").remove();return false}if(e==true){return false}LucifersMOD.Rivals.checklist(t,"add",o);$("#rival_"+o).removeClass("rivals_plus lucifers_bulk_add").addClass("rivals_minus");$("#rival_"+o).attr("title","Lucifers MOD| Remove this user from your Family Rivals");i(t,s)}else{Logger.error(message)}}})}else{e=true;$("#LucifersRivalsADDER").remove()}}var e;var t=$(this).attr("rivals");var n=0;var r=[];$(".lucifers_bulk_add").each(function(){var e=Util.parseNum($(this).attr("id"));r[n]=e;n++});if(r.length>0){$("head").append('<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/ui-darkness/jquery-ui.css" type="text/css" />');$("#popup_fodder").append("<div id='LucifersRivalsADDER' style='font-size: 13px' style='height:20px;overflow:auto;'><br/><div id='progressbar'></div><center><span id='rival_adding'>Please Wait...</span></center></div>");$("#LucifersRivalsADDER").dialog({title:t+" Rivals Bulk Adder",close:function(){e=true;$("#LucifersRivalsADDER").remove()},width:535,height:130,position:["center",100]});$("#progressbar").progressbar();$("#progressbar").progressbar({max:n});i(t,0)}else{alert("Couldn't add family was empty");Logger.error("All Rivals Array empty");return false}}function r(){var e=Util.parseNum($(this).attr("id"));var t;if($(this).hasClass("rivals_minus")==true){t="Removed from";var n="remote/"+MW.getIntURL("stats","clan_rivals_remove",1)}else{t="Added to";var n="remote/"+MW.getIntURL("stats","clan_rivals_add",1)}n+="&rival_id="+escape("p|"+e)+"&user="+escape("p|"+e)+"&src=stats";httpAjaxRequest({url:n,success:function(r){if(($r=$(r).find(".message_body:first, #mbox_generic_1 tr:eq(1)")).length>0){if(/rivals list is full/.test($r.text())){showHelpPopup({icon:"error",title:"Family Rivals Adder",message:$r.text(),autoclose:10,position:["center",100]});return false}if(/Removed/.test(t)){LucifersMOD.Rivals.checklist("Family","remove",e);$("#rival_"+e).removeClass("rivals_minus").addClass("lucifers_bulk_add rivals_plus");$("#rival_"+e).attr("title","Lucifers MOD| Add this user to Family Rivals")}else{LucifersMOD.Rivals.checklist("Family","add",e);$("#rival_"+e).removeClass("rivals_plus lucifers_bulk_add").addClass("rivals_minus");$("#rival_"+e).attr("title","Lucifers MOD| Remove this user from your Family Rivals")}showHelpPopup({icon:"info",title:t+" family rivals",message:$r.text(),autoclose:10,position:["center",100]})}else{Logger.debug("Error Adding to Family Rivals url =>"+n);Logger.debug("HTML Response =>"+r)}}})}function u(){function s(e){var t=r.members[e].userid;var n=r.members[e].name;$("#b2b_war").text("checking "+n);var o="remote/html_server.php?xw_controller=war&xw_action=declare_war&xw_city=7&xw_person="+MW.getUserID()+"&target_id="+escape(t);httpAjaxRequest({url:o,success:function(t){if(/postFeedAndSendCallForHelp/.test(t)){$("#b2b_war").text("Going to war with "+n);try{var r=Util.substr(t,"var postFeedAndSendCallForHelp = {","</script>")}catch(o){}setTimeout(function(){$("#mw_city_wrapper").html(t)},2500);return}if(/You are already at war/.test(t)){$("#b2b_war").text("Cant run you are already in a war");return false}e++;if(e>i){$("#b2b_war").text("Finished!!");return}setTimeout(function(){s(e)},500)}})}var e,t,n=0;var r={members:{}};$("#clan_members").find(".member_sort").each(function(){var i=$(this).find(".name_n_rank > a").attr("href");var s=$(this).find(".name_n_rank > a").text();if(t=/user=([^\n]+)/g.exec(i)){e=atob(unescape(t[1]));if(e.indexOf("p")==0){r.members[n]={name:s,userid:e};n++}}});var i=n;if(r.members[0].userid.length>1){$("#b2b_war").text("Looking for war");s(0)}}if(e$("#bf_actions")!==null||UserConfig.main.opt_FamilyPage!==true||e$("#activity_tab")!==null){return}var e=c$("div");c$("div","bf_actions").text("BATTLEFIELD:").append(e).insertAfter("#clan_profile_link").css({padding:"0px 10px","text-align":"left","font-weight":"bold",height:50,"margin-top":10});c$("strong","class:good").css("font-size",10).appendTo(e);if(global.isUnderboss==true){try{$("ul#member_list li").each(function(e,t){var n,i;clan_mem=$(this).find(".name_n_rank > a").attr("href");i=e$("div.name_n_rank a",t);n=Util.uSplit(i.attr("href")).user;n=Base64.decode(n);var s=n.replace("p|","rival_");var o=$(this).find(".clanmember_stats td:last");if(LucifersMOD.Rivals.check("Family",n)==true){b$("","rivals:Family,id:"+s+",class:sexy_button_new rivals_minus,name:add,title:Lucifers MOD| Add this user to Family Rivals").insertAfter(o).click(r)}else{b$("","rivals:Family,id:"+s+",class:lucifers_bulk_add sexy_button_new rivals_plus,name:add,title:Lucifers MOD| Add this user to Family Rivals").insertAfter(o).click(r)}})}catch(i){Logger.error(i);b$("Add To Family Rivals","rivals:Family,class:medium red,name:rivals_add_all,title:Lucifers MOD| Add this family to your family rivals list").css({"float":"left",margin:"10px 0px 0px 0px"}).appendTo(e).click(n)}}else{$("ul#member_list li").each(function(e,t){var n,i;clan_mem=$(this).find(".name_n_rank > a").attr("href");i=e$("div.name_n_rank a",t);n=Util.uSplit(i.attr("href")).user;n=Base64.decode(n);var s=n.replace("p|","rival_");var o=$(this).find(".clanmember_stats td:last");if(LucifersMOD.Rivals.check("Family",n)==true){b$("","rivals:Personal,id:"+s+",class:sexy_button_new rivals_minus,name:add,title:Lucifers MOD| Add this user to Family Rivals").insertAfter(o).click(r)}else{b$("","rivals:Personal,id:"+s+",class:lucifers_bulk_add sexy_button_new rivals_plus,name:add,title:Lucifers MOD| Add this user to Family Rivals").insertAfter(o).click(r)}})}b$("Add to Whitelist","class:short green,name:whiteList").css("float","left").appendTo(e).click(t);b$("Add to Blacklist","class:short red,name:blackList").css({"float":"left",margin:"0px 5px 0px 5px"}).appendTo(e).click(t);b$("Add to Family List","class:short orange,name:enmClanList").css({"float":"left",margin:"0px 5px 0px 5px"}).appendTo(e).click(t);var s=c$("div");c$("div","bf_family").text("ADD TO:").append(s).insertAfter("#bf_actions").css({padding:"0px 10px","text-align":"left","font-weight":"bold",height:60});var o=c$("div");c$("div","bf_more").text("OTHER:").append(o).insertAfter("#bf_family").css({padding:"0px 10px","text-align":"left","font-weight":"bold",height:60});b$("Personal Rivals","rivals:Personal,class:short green,name:personal_rivals,title:Lucifers MOD| Add this family to your personal rivals list.").css({"float":"left",margin:"5px 5px 0px 0px"}).appendTo(s).click(n);if(global.isUnderboss==true){b$("Family Rivals","rivals:Family,class:short red,name:rivals_add_all,title:Lucifers MOD| Add this family to your Familys Rivals list (if your not a underboss it will add to your rivals list)").css({"float":"left",margin:"5px 5px 0px 0px"}).appendTo(s).click(n)}b$("Declare War","class:short black,name:declare_war,title:Lucifers MOD| Hunt down a clan member whos not in war and declare war on them").css({"float":"left",margin:"5px 5px 0px 0px"}).appendTo(o).click(u);var a=$("#bf_more");c$("div","id:b2b_war").css({padding:"0px 10px","font-size":"10px"}).insertAfter(a);$("#clan_members .box .no_padding").each(function(){var e=false;var t=$(this).find("img");try{var n=$(t).attr("src");e=LucifersMOD.returnFBID(n);if(!/graph.facebook.com/.test(n)&&spocktoolbar()==false){$(t).attr("src","https://graph.facebook.com/"+e+"/picture")}}catch(r){e=false}if(e!==false)$(t).wrap("<a href='http://www.facebook.com/profile.php?id="+e+"' target='_blank' title='Lucifers MOD | View facebook profile'/>")})}function IndexMainPage(){function o(){$("#PlayerUpdateModule .update_txt").each(function(e){var t=$(this).find("a:regex(href,user=)").text();var r=$(this).find("a:regex(href,from_red_link=1)").html();var i=Util.trim($(this).find("a:regex(href,from_red_link=1)").eq(0).attr("href"));var s=Util.trim($(this).find("a:regex(href,user=)").attr("href"));if(t==null)return;if(r!=null){r=r.toString()}else{r=""}var o=$(this).text();var u=$(this).parent();var a=$(this).html();Util.each(n.highlightfilters.split(/\n/),function(e,n){n=Util.trim(n);if(n.length<1)return;var a=o.toString();if(n.indexOf("p|")==0&&s.length>0){s=Base64.decode(Util.uSplit(s).user);if(Util.trim(n)==Util.trim(s)){$(u).css("background-color","rgba(0, 255, 0, 0.2)")}}else if(/\d/.test(n)&&i.length>0){var f=Base64.decode(Util.uSplit(i).id);if(Util.trim(n)==Util.trim(f)){log("reg_test -> "+n+" clan_id -> "+f);$(u).css("background-color","rgba(0, 255, 0, 0.2)")}}else if(a.indexOf(n)==0){$(u).css("background-color","rgba(0, 255, 0, 0.2)")}else if(Util.doRgxTest(n,a)==true){$(u).css("background-color","rgba(0, 255, 0, 0.2)")}else if(Util.doRgxTest(n,r)==true){$(u).css("background-color","rgba(0, 255, 0, 0.2)")}else if(Util.doRgxTest(n,t)==true){$(u).css("background-color","rgba(0, 255, 0, 0.2)")}else{}})})}function u(e){if(!Util.isSet(e)){Logger.error("UserDetails() failed response");return false}var t=$(e).attr("player-details");if(t.length<1)return null;var n="#mod_extra_options_"+t;var r=$(n).attr("player-id");var i=$(n).attr("player-name");var s={id:Base64.decode(r).replace("p|",""),name:i,span:n};return s}function a(){var e=Util.parseNum($(this).attr("id"));var t;if($(this).hasClass("rivals_remove")==true){t="Removed from";var n="remote/"+MW.getIntURL("stats","clan_rivals_remove",1)}else{t="Added to";var n="remote/"+MW.getIntURL("stats","clan_rivals_add",1)}n+="&rival_id="+escape("p|"+e)+"&user="+escape("p|"+e)+"&src=stats";httpAjaxRequest({url:n,success:function(r){if(($r=$(r).find(".message_body:first, #mbox_generic_1 tr:eq(1)")).length>0){if(/rivals list is full/.test($r.text())){showHelpPopup({icon:"error",title:"Family Rivals Adder",message:$r.text(),autoclose:10,position:["center",100]});return false}if(/Removed/.test(t)){LucifersMOD.Rivals.checklist("Family","remove",e);$("#rival_"+e).removeClass("rivals_remove").addClass("rivals_add").text("Add To Family Rivals").attr("title","Lucifers MOD| Add this user to Family Rivals").css({color:"green","font-size":"10px"})}else{LucifersMOD.Rivals.checklist("Family","add",e);$("#rival_"+e).removeClass("rivals_add").addClass("rivals_remove").text("Remove To Family Rivals").attr("title","Lucifers MOD| Remove this user from your Family Rivals").css({color:"red","font-size":"10px"})}showHelpPopup({icon:"info",title:t+" family rivals",message:$r.text(),autoclose:10,position:["center",100]})}else{Logger.debug("Error Adding to Family Rivals url =>"+n);Logger.debug("HTML Response =>"+r)}}})}if(UserConfig.main.CollectDailyFix===true){if(e$("#df_joined_module .info_container .goToBtn")!==null){var e=$("#df_joined_module .info_container .goToBtn").text();if(/collect/ig.test(e)){MW.collectDailyFix()}}if(e$("#df_joined_module .info_container #df_timer")!==null){if(global.CollectDailyUrl.length>1){$(".goToBtn").html('Auto Collected <a href="#" title="Lucifers MOD Auto collected" onclick="do_ajax(\'popup_fodder\',\''+global.CollectDailyUrl+"'); return false;\">View Rewards</a>")}}}var t=UserConfig.bfopt;t.load();var n=UserConfig.main;var r=$(".clan_tag").text();if(n.highlightfilters.length<1&&e$(".clan_tag")!==null){log("updating clan filter -> "+r);n.set("highlightfilters",r);n.save()}var i=$(".tab_box_header .tab_clear").find("a").clone(true);$(".tab_box_header .tab_clear").empty();var s=$(".tab_box_header .tab_clear");c$("span").appendTo(s).text(" [ ");$(i).text("Clear").attr("title","Lucifers | MOD Clear player update news").appendTo(s);c$("span").appendTo(s).text(" | ");c$("a","title:Lucifers | MOD Hightlight Player News Updates Filter checker").appendTo(s).text("HightLight Filter").click(function(){var e=100;if(global.is_chrome){e=990}var t="Enter Clan ID's or Player p| ID's or Paste Clan/Names. (each check on new lines) :";showPromptPopup(t,n.highlightfilters,function(e){n.highlightfilters=e;n.set("highlightfilters",e);n.save(IndexMainPage);o()},250,e)});o();c$("span").appendTo(s).text(" ] ");$("#PlayerUpdateModule .update_pic").each(function(){var e=$(this).find("img");var t=false;t=$(e).attr("src");t=LucifersMOD.returnFBID(t);if(!/graph.facebook.com/.test(e)&&spocktoolbar()==false&&t!=false){$(e).attr("src","https://graph.facebook.com/"+t+"/picture")}if(t!==false)$(this).wrap("<a href='http://www.facebook.com/profile.php?id="+t+"' target='_blank' title='Lucifers MOD | View facebook profile'/>")});$("#PlayerUpdateModule .update_txt").each(function(e){var n=$(this).parent().parent().attr("id");var r=n+"_update_txt_"+e;$(this).attr("id",r);var i=$(this).after();var s=$(this).parent();var o=$(this).find("a:regex(href,user=)").attr("href");var f=$(this).find("a:regex(href,user=)").text();var l=$(this).find("a:regex(href,from_red_link=1)").html();if(f==null)return;f=f.toString();if(l!=null){l=l.toString()}else{l=""}var c=Util.uSplit(o).user;var h="mod_extra_options_"+n+"_"+e;if(e$("#"+h)!==null)return;c$("span","id:"+h+",player-name:"+Base64.encode(f)+",clan-name:"+l+",player-id:"+c).prependTo(s).css({"font-size":"11px"});var p=$("#"+h);var d=$(this).text();c$("span").text(" [ ").appendTo(p);c$("a","title:Lucifers | MOD Post this selected news to a wall or group.,class:buttons,name:add_select,select_text:"+r).appendTo(p).css({color:"yellow"}).text("Post To Group").click(function(){function r(){var t={top:1e3,textallowed:false};showGroupSelection(0,function(t,n){if(t==0)t="me";MWFB.api("/"+t+"/feed","post",{message:n},function(t){if(!t||t.error){log("Error occured")}else{log("Post ID: "+t.id);$(e).unbind();$(e).text("View Post").attr("onclick","window.open('http://www.facebook.com/"+t.id+"');return false;").css("color","yellow")}})},n,t)}var e=$(this);var t=$(e).attr("select_text");var n=$("#"+t).text();if(typeof MWFB=="undefined"){facebook.init(r);return}else{r()}});if(/attacked|robbed/.test(d)){if(/won/.test(d)){c$("span","class:whitelist,id:whitelist_"+r).text(" | ").appendTo(p);var v=$("#whitelist_"+r);if(Util.isSet(t.get("whiteList")[Util.parseNum(Base64.decode(c))])){$(v).hide();c$("span","player-details:"+n+"_"+e+",class:update_timestamp,title:Lucifers | MOD player in battle field whitelist").appendTo(i).text("Player in battlefield whitelist").css("color","white")}else{if(e$("#whitelist_button_"+r)==null)c$("a","player-details:"+n+"_"+e+",id:whitelist_button_"+r+",title:Lucifers | MOD Add user to battlefields whitelist").appendTo(v).css({color:"white"}).text("Add To Whitelist").click(function(){var e=u($(this));if(e===false){$(this).text("failed...");return}t.get("whiteList")[Util.parseNum(e.id)]=e.name+" (from player news)";t.save(function(){$(e.span).find(".whitelist").hide();c$("span","class:update_timestamp,title:Lucifers | MOD player in battle field whitelist").appendTo(i).text("Player added to battlefield whitelist").css("color","white")})})}}else if(/lost/.test(d)&&/attacked/.test(d)){c$("span","class:blacklist,id:blacklist_"+r).text(" | ").appendTo(p);var m=$("#blacklist_"+r);if(Util.isSet(t.get("blackList")[Util.parseNum(Base64.decode(c))])){$(m).hide();c$("span","class:update_timestamp,title:Lucifers | MOD player in battlefield blacklist").insertAfter(i).text("player in battlefield blacklist").css("color","white")}else{if(e$("#blacklist_button_"+r)==null)c$("a","player-details:"+n+"_"+e+",id:blacklist_button_"+r+",title:Lucifers | MOD Add user to battlefields blacklist").appendTo(m).css({color:"orange"}).text("Add To BlackList").click(function(){var e=u($(this));if(e===false){$(this).text("failed...");return}t.get("blackList")[Util.parseNum(e.id)]=f+" (from player news)";t.save(function(){$(e.span).find(".blacklist").hide();c$("span","class:update_timestamp,title:Lucifers | MOD in battle field blacklist").insertAfter(i).text("player added to battlefield blacklist").css("color","white")})})}}if(/lost/.test(d)){c$("span","id:hitlist_"+r).text(" | ").appendTo(p);var g=$("#hitlist_"+r);if(e$("#hitlist_button_"+r)===null)c$("a","player-details:"+n+"_"+e+",id:hitlist_button_"+r+",title:Lucifers | MOD Add user to hitlist [hit list isnt finished off yet... this will be a auto hitlist currently working on],id:hitlist_player").appendTo(g).css({color:"red"}).text("Hitlist").click(function(){var e=$(this).attr("player-id");$(this).text("loading....");var t=u($(this));if(t===false){$(this).text("failed...");return}url="remote/"+MW.getIntURL("stats","view")+"&user="+Base64.encode("p|"+t.id);httpAjaxRequest({url:url,success:function(e){var t=$(e).find("a:regex(href,xw_controller=hitlist)").attr("href");var n=Util.uSplit(t).mwzy_token;var r=Util.uSplit(t).xw_person;var i=Util.uSplit(t).target_pid;log(t);url="remote/html_server.php?xw_controller=hitlist&xw_action=set&xw_city=1&xw_person="+r+"&mwcom=1&target_pid="+i+"&mwzy_token="+n;setTimeout(function(){unsafeWindow.do_ajax("inner_page",url,1,1,0,0);return false},500)}});return})}if(global.isUnderboss){var y=u($(this));if(y===false){$(this).text("failed...");return}c$("span").text(" | ").appendTo(p);if(LucifersMOD.Rivals.check("Family",y.id)==true){c$("a","title:Lucifers | MOD Remove user from your family rivals list,class:rivals_remove scroll,name:remove,id:"+add_button).appendTo(p).css({color:"red","font-size":"10px"}).text("Remove From Family Rivals").click(a)}else{c$("a","title:Lucifers | MOD Add user to your family rivals list,class:rivals_add,name:add,id:"+add_button).appendTo(p).css({color:"green","font-size":"10px"}).text("Add To Family Rivals").click(a)}}}c$("span").text(" ] ").appendTo(p)})}function bosscombofighter(){if(e$(".bossGradient")!==null&&e$(".leftArrow")!==null&&e$("#bossfightv2spocklet")==null){var e=$(".leftArrow").attr("onclick");if(e){if(/BossFightView/.test(e)){var t=$(".bossGradient");c$("a","id:bossfightv2spocklet,title:Lucifers | MOD Load Spockholm Secret Boss Discrict script, helps kill the boss quicker... .,class:scroll, href:#").prependTo(t).css({color:"yellow","font-size":"15px",position:"relative",top:"20px"}).text("Spock Boss Fighter").click(function(){LucifersMOD.SpockServer("secretboss")})}}}}function PageJob(){if(!UserConfig.main.get("opt_JobRates"))return;if(e$(".job_list")!==null){$("tr","table[class=job_list]").each(function(e,t){try{var n=parseInt($('td[class*="job_reward"] > span.experience',t).text());var r=parseInt($('td[class*="job_energy"] > span.energy',t).text());if(n&&r){var i=$('td[class*="job_energy"]',t);(e$("#job_energy_ratio",i)||c$("div","job_energy_ratio").appendTo(i)).html((n/r).toFixed(2)+" Ratio").css({color:"green","font-weight":"bold"})}}catch(s){Logger.error("PageJob: "+s)}})}else if(e$("#new_user_jobs")!==null){$('div[id^="job_"]',"#new_user_jobs").each(function(e,t){try{var n=parseInt($("dd.experience",t).text());var r=parseInt($("dd.energy",t).text());if(n&&r){var i=$("dd.energy",t).parent();(e$("#job_energy_ratio",i)||c$("dt","job_energy_ratio").appendTo(i)).html("("+(n/r).toFixed(2)+")").css({color:"green","font-weight":"bold"})}}catch(s){Logger.error(s)}})}else if(e$("#brazil_jobs")!==null){$(".job","#brazil_jobs").each(function(e,t){try{var n=parseInt($("ul.pays .experience",t).attr("current_value"));var r=parseInt($("ul.uses .energy",t).attr("current_value"));if(n&&r){var i=$("ul.uses",t);(e$("#job_energy_ratio",i)||c$("li","job_energy_ratio").appendTo(i)).html("("+(n/r).toFixed(2)+")").css({color:"green","font-weight":"bold"})}}catch(s){Logger.error(s)}})}}function PageJobMap(){if(!UserConfig.main.get("opt_JobRates"))return;if(e$("#job_panel")!==null){$(".job_container","#job_panel").each(function(e,t){try{var n=e$("dd.experience",t);var r=e$("dd.energy",t)||e$("dd.stamina",t);if(n&&r){var i=r.parent();(e$("#job_energy_ratio",i)||c$("dd","job_energy_ratio").appendTo(i)).html("("+(parseInt(n.text())/parseInt(r.text())).toFixed(2)+")").css({color:"green","font-weight":"bold"})}}catch(s){Logger.error(s)}})}}function PageProfile(){function l(){var e=$(this).attr("name");var n=UserConfig.bfopt;n.load(function(){var r=Util.htmlDecode(t.text());var i=Util.substr(r,'"','"',1,0,0,true);var s=Util.parseNum(r.substr(r.lastIndexOf('"')+1));log(o);if(Util.isSet(n.get(e)[o])){showHelpPopup({icon:"info",title:"Battlefield's "+e,message:"The player "+i+" is already in Battlefield's "+e+".",autoclose:5});return}n.get(e)[o]=i+"  level "+s+" (from profile)";n.save(function(){showHelpPopup({icon:"info",title:"Battlefield's "+e,message:"You've added "+i+" to Battlefield's "+e+"!",autoclose:5})})});return false}if(global.pagerunning||!UserConfig.main.get("opt_ProfilePage")||e$("#modified_profile")||e$("#change_title")){return}global.pagerunning=true;var e=e$(".zy_popup_box_body_dark a:regex(href,xw_action=remove)")!==null;var t=$(".stats_title_text:first").css({overflow:"hidden","max-width":560}).attr("id","modified_profile");var n=$(".title.stats_title").css("height","auto").siblings("table");var r=$(n).prev();var i=Util.toUrl($("a:regex(href,xw_action=attack), a:regex(onclick,xw_action=attack)").eq(0));var s=e$("a:regex(href,xw_action=clan_rivals_remove)")!==null;var o=Util.parseNum(Util.uSplit(i).opponent_id);var u=MW.getIntURL("group","view")+"&promote=yes&pid="+escape("p|"+o);if(!(o&&o!=0)){return}if(s){LucifersMOD.Rivals.checklist("Family","add",o)}else{}c$("div","class:box").appendTo(c$("div","class:motd_outer").insertBefore(n)).append(c$("div","class:box_top").append(c$("div","class:box_top_right"))).append(c$("div","class:box_middle").append(c$("div","class:box_middle_right").css("padding-left",10))).append(c$("div","class:box_bottom").append(c$("div","class:box_bottom_right")));try{var a=$(".motd_outer").clone().insertAfter(".motd_outer").find(".box_middle_right");$(".motd_outer:first .box_middle_right").append(r)}catch(f){log("failed -> "+f)}$("#travel_menu a").each(function(e,t){var n;if(t.href){if(n=/&nextParams=(.*?)&/.exec(t.href)){if(n=/"user".*?"(.+?)"/.exec(unescape(unescape(n[1])))){c$("a","href:#").appendTo(a).text("Facebook Profile").attr("onclick","window.open('http://www.facebook.com/profile.php?id="+Base64.decode(n[1])+"');return false;");c$("span").text(" | ").appendTo(a);return false}}}});c$("a","href:#,name:blackList").appendTo(a).text("Add to Blacklist").click(l);if(e){c$("span").text(" | ").appendTo(a);c$("a","href:#").appendTo(a).text("Promote").attr("onclick","do_ajax('inner_page','remote/"+u+"',1,1,0,0);return false;")}else{c$("span").text(" | ").appendTo(a);c$("a","href:#,name:whiteList").appendTo(a).text("Add to Whitelist").click(l)}global.pagerunning=false}try{document.getElementById("contentCol").removeChild(document.getElementById("rightCol"));document.getElementById("iframe_canvas").style.height="3000px";var ScrareyCreepBox=document.getElementById("rightCol");if(ScrareyCreepBox){ScrareyCreepBox.parentNode.removeChild(ScrareyCreepBox)}}catch(e){}if(typeof chromeFileSystem==="undefined"){if(typeof chrome!=="undefined"){}chromeFileSystem=false}var AppInfo={release:"stable",id:"app_10979261223",fanpage:"183999591658872",version:"0.6.3.9",name:"Lucifers MOD",tag:"LucifersMOD",prefix:"FBMafiaWarsAddon_",url:"http://www.facebook.com/groups/242835359156933/doc/242861775820958/",meta:"http://screepts.com/MOD/addonMOD.meta.js",plugins:"http://plugin.screepts.netdna-cdn.com/",contributionURL:"https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=BCPYPXA3GDDBN"};var cdn="https://mwscripts-screepts.netdna-ssl.com";var Logger={log:function(e,t){var n=(new Date).toLocaleTimeString();if(Util.isObject(t)){t=t.message?t.message:Util.toJSON(t)}(console||unsafeWindow.console).log(AppInfo.tag+" "+e+" ("+n+"): "+t)},debug:function(e){if(UserConfig.main.debugMode!==true){return}Logger.log("DEBUG",e)},error:function(e){Logger.log("ERROR",e)},object:function(e){(console||unsafeWindow.console).log(e)}};var LucifersMOD={dock:{hfc:function(){log("global.HFCDock -> "+global.HFCDock);log("global.HFCRunning -> "+global.HFCRunning);if(global.BFDock==true){alert("Cant dock you have BF in docking mode");log("Cant dock HFC Docked");return}log("HFC running");if(global.HFCDock==true){$(".mod_header").show();if(global.HFCRunning==true){log("we are undocking HFC");var e=$("#homefeedcenter_popup").parent().parent();$(e).css("display","block");global.HFCDock=false;$("#homefeedcenter_docked").remove()}}else{if(global.HFCRunning==true){log("HFC is running");var e=$("#homefeedcenter_popup").parent().parent();$(e).css("display","none");log("Docking HFC");$(".mod_header,").hide();global.HFCDock=true;var t=$("#mod_docking").css("opacity","1");c$("span","homefeedcenter_docked").append(c$("span").html(" | ")).append(c$("a","homefeedcenter_undock").text("[UNDOCK] Homefeed Center").click(LucifersMOD.dock.hfc)).append(c$("span","homefeedcenter_docked_status").text("docked | ").click(LucifersMOD.dock.hfc).css({"margin-left":"10px"})).appendTo(t).css({"margin-left":"10px"}).append(c$("span","homefeedcenter_docked_collecting"));setTimeout(function(){$("#homefeedcenter_undock").animate({color:["red","swing"]},2e3,function(){$("#homefeedcenter_undock").animate({color:["gold","swing"]},3e3)})},500)}}},battlefield:function(){if(global.HFCDock==true){alert("Cant dock you have HFC in docking mode");log("Cant dock HFC Docked");return}log("bf running");log("global.BFDock -> "+global.BFDock);log("global.BFRunning -> "+global.BFRunning);if(global.BFDock==true){$(".mod_header,").show();log("Undocking Battlefield");if(global.BFRunning==true){var e=$("#battlefield_popup").parent().parent();$(e).css("display","block");global.BFDock=false;$("#battlefield_docked").remove()}}else{if(global.BFRunning==true){var e=$("#battlefield_popup").parent().parent();$(e).css("display","none");$(".mod_header,").hide();global.BFDock=true;var t=$("#mod_docking").css("opacity","1");c$("span","battlefield_docked").append(c$("span").html(" | ")).append(c$("a","battlefield_undock").text("[UNDOCK] Battlefield").click(LucifersMOD.dock.battlefield)).append(c$("span","battlefield_docked_ices").text("docked | ").click(LucifersMOD.dock.battlefield).css({"margin-left":"10px"})).appendTo(t).css({"margin-left":"10px"}).append(c$("span","battlefield_docked_status"));setTimeout(function(){$("#battlefield_undock").animate({color:["red","swing"]},2e3,function(){$("#battlefield_undock").animate({color:["gold","swing"]},3e3)})},500)}}}},mwlist:function(e){function t(){LucifersMOD.SpockServer("assassin-a-nator",function(){setTimeout(function(){LucifersMOD.mwlist("aa")},100)})}function i(e){loadingScreen("Getting bucket list");$.ajax({type:"GET",url:"http://mwlists.com/_api/_getlive.php?bucket="+n+"&authid=qZ8wLbRsJUmMVmR7",cache:false,dataType:"jsonp",timeout:3e4,crossDomain:true,success:function(t){loadingScreen();if(t.length>0){e(t)}else{alert("bucket was empty or incorrect bucket API");return false}}})}function s(e){function n(){$("#aan_targets").val("");r()}function r(){var e=0;var n="";for(b in t){var r=t[b].mwid;var i=t[b].mwname;var s=t[b].mwname;e++;n=n+r+"\n"}$("#aan_targets").val($("#aan_targets").val()+"\n"+n);$("#aan_status").prepend('<span class="good">MOD: Imported '+e+" targets into your target list</span><br/>");showHelpPopup({icon:"info",title:"Added bucket list members to Assasins-a-Nator",message:"You've added "+e+" users to Assasins-a-Nator's Target List!",autoclose:5})}var t=e;showAskPopup("Clear Assasins-a-Nator Target List","Do you want to clear your AA Target List before adding bucket list?",n,r)}function o(e){function o(){i.set(r,s=new Object);u()}function u(){for(b in t){var e=t[b].mwid;var o=t[b].mwname;var u=t[b].mwname;s[Util.parseNum(e)]=o+" level "+$.trim(u)+" (from mwlist bucket)";n++;log(Util.parseNum(e))}i.save(function(){showHelpPopup({icon:"info",title:"Adding bucket list members to "+r,message:"You've added "+n+" users to Battlefield's "+r+"!",autoclose:5})})}var t=e;var n=0;var r="whiteList";var i=UserConfig.bfopt;var s;i.load(function(){s=i.get(r);showAskPopup("Clear "+r,"Do you want to clear your "+r+" before adding bucket list?",o,u)})}if(e=="aa"){if($("#aan_targets").length<!0){showHelpPopup({icon:"caution",title:"Assasins-a-Nator Was Not Loaded",message:"You need to have Assasins-a-Nator loaded before you can import a bucket list<br/>Would you like to load Assasins-a-Nator Now?",buttons:[{label:"Load",addClass:"short green",onclick:function(){t();return false}},{label:"Cancel",addClass:"short red"}]});return false}}log(e);var n;var r="Paste your mwlist bucket api eg. tQ00wCrFGyekuTnbop36pDaEyq. Not sure of bucket api vist mwlists.com";showPromptPopup(r,"",function(t){n=t;if(n.length>0){if(e=="bf"){i(o)}if(e=="aa"){i(s)}}else{alert("Empty bucket id");return false}},50)},StripHtml:function(e){var t=document.createElement("DIV");t.innerHTML=e;return t.textContent||t.innerText},ResetRivalsList:function(e){function o(){if(n.length>0){$("head").append('<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/ui-darkness/jquery-ui.css" type="text/css" />');$("#popup_fodder").append("<div id='LucifersRivalsADDER' style='font-size: 13px' style='height:20px;overflow:auto;'><br/><div id='progressbar'></div><center><span id='rival_adding'>Please Wait...</span></center></div>");$("#LucifersRivalsADDER").dialog({title:"Clearing "+t+" Rivals List",close:function(){i=true;$("#LucifersRivalsADDER").remove()},width:535,height:130,position:["center",100]});$("#progressbar").progressbar();$("#progressbar").progressbar({max:n.length});u(0)}else{alert("There was a problem");Logger.error("All Rivals Array empty");return false}}function u(e){if(e<=n.length){var s=n[e];r+="&rival_id="+escape("p|"+s)+"&src=fight";httpAjaxRequest({url:r,success:function(t){if(($respnse=$(t).find(".message_body:first, #mbox_generic_1 tr:eq(1)")).length>0){$("#rival_adding").text("Removed "+e+" of "+n.length);$("#progressbar").progressbar({value:e});if(i==true){return false}e++;u(e)}else{Logger.error(t)}}})}else{switch(t){case"Family":global.FamilyRivalsList=[];break;case"Personal":global.PersonalRivalsList=[];break}i=true;$("#LucifersRivalsADDER").remove();return unsafeWindow.do_ajax("inner_page","remote/html_server.php?xw_controller=fight&xw_action=view&xw_city=1&tab=1",1,1,0,0);return false}}var t=$(this).attr("list");var n=[];var r="remote/";switch(t){case"Family":n=global.FamilyRivalsList;r=r+MW.getIntURL("fight","clan_rivals_remove",1);break;case"Personal":n=global.PersonalRivalsList;r=r+MW.getIntURL("fight","rivals_remove",1);break}var i,s=0;showAskPopup("Clear "+t+" Rivals List","Are you sure you want to <strong>REMOVE "+n.length+"</strong> players from your "+t.toLowerCase()+" rival list?",o)},Rivals:{update:function(e,t,n){n=n||false;if(e==null||typeof e=="undefined"||global.BFRunning===true){return false}var r=e$("a:regex(href,xw_action=clan_rivals_remove)")!==null;var i=e$("a:regex(href,xw_action=rivals_remove)")!==null;if(r||i){t=true}if(t==true){global.FamilyRivalsList=[];Logger.debug("Updating rivals list");$(e).find("tr").each(function(){var e=$(this).find("td:first a:last").text();if(e){var t=$(this).find("td.action a:first").attr("href").replace(/&/g,"&").replace(/remote\/html_server.php\?/,"");var n=$(this).find("td:last a:last").attr("title");if(n){if(/family rivals list/.test(n)){var r=/btn_attack_p(\d+)/.exec(t)[1];LucifersMOD.Rivals.checklist("Family","add",r)}else if(/your rivals list/.test(n)){var i=/btn_attack_p(\d+)/.exec(t)[1];LucifersMOD.Rivals.checklist("Personal","add",i)}}}});if(e$("#rivals_actions")!==null||n==true){return false}log("adding clear list buttons");var s=c$("div");c$("div","rivals_actions").append(s).insertBefore(".fight_table").css({padding:"0px 10px","text-align":"left","font-weight":"bold",height:30,"margin-top":30});if(i){b$("Clear Personal Rivals","list:Personal,class:short orange,name:clear_family_rivals,title:Lucifers MOD | Bulk clear/reset your family rivals").css({"float":"left","margin-top":30}).appendTo(s).click(LucifersMOD.ResetRivalsList)}if(r){b$("Clear Family Rivals","list:Family,class:short red,name:clear_family_rivals,title:Lucifers MOD | Bulk clear/reset your family rivals").css({"float":"left","margin-left":10,"margin-top":30}).appendTo(s).click(LucifersMOD.ResetRivalsList)}}},get:function(e){Logger.debug("Checking Rivals List");global.FamilyRivalsList=[];var t=0;var n="remote/"+MW.getIntURL("fight","view",1);n+="&tab=1";start_at=parseInt((new Date).getTime()),httpAjaxRequest({url:n,success:function(t){LucifersMOD.Rivals.update(t,true,true);var n=parseInt((new Date).getTime())-start_at;Logger.debug("Cached "+(global.PersonalRivalsList.length+global.FamilyRivalsList.length)+" rivals in ("+Util.toDelayString(n)+").");if(typeof e=="function"){e&&e()}}})},check:function(e,t,n){t=Util.parseNum(t);var r=[];switch(e){case"Family":r=global.FamilyRivalsList;break;case"Personal":r=global.PersonalRivalsList;break}for(var i in r){if(r[i]==t){if(n){r.splice(i,1)}return true}}return false},checklist:function(e,t,n){n=Util.parseNum(n);var r=LucifersMOD.Rivals.check(e,n);if(t=="add"&&r==false){Logger.debug("Cached p|"+n+" to "+e+" Rivals");switch(e){case"Family":global.FamilyRivalsList.push(n);break;case"Personal":global.PersonalRivalsList.push(n);break}}else if(t=="remove"&&r==true){LucifersMOD.Rivals.check(e,n,true);Logger.debug("Removed "+n+" to "+e+" Rivals")}else{}}},returnFBID:function(e){var t=false;if(/(\d+)\/picture/.test(e)){t=/(\d+)\/picture/.exec(e)[1]}else{try{t=/([0-9]+)_(\d+)\_?q?.jpg/.exec(e)[1]}catch(n){t=false}}return t},WarProfile:function(){if($("#luciferwar").length==0){var e=$(".leader_info").eq(0).find("img:first").attr("src");var t=$(".leader_info").eq(1).find("img:first").attr("src");var n,r;n=LucifersMOD.returnFBID(e);r=LucifersMOD.returnFBID(t);var i=$(".leader_info").eq(0);c$("a","href:#").appendTo(i).text("Facebook Profile").css("font-size","9px").attr("title","Lucifers MOD Load Facebook Profile").attr("onclick","window.open('http://www.facebook.com/profile.php?id="+n+"');return false;");if(n!=facebook.session.uid){var i=$(".leader_info").eq(0);i=c$("div","luciferwar").appendTo(i);c$("a","href:#").appendTo(i).text("Facebook Profile").css("font-size","9px").attr("title","Lucifers MOD Load Facebook Profile").attr("onclick","window.open('http://www.facebook.com/profile.php?id="+n+"');return false;");c$("span").text(" | ").appendTo(i);c$("a","href:#").appendTo(i).text("Mafia Wars Profile").css("font-size","9px").attr("title","Lucifers MOD Show users Mafia Wars Profile").attr("onclick","do_ajax('inner_page', 'remote/html_server.php?xw_controller=stats&xw_action=view&user=' + "+n+", 1, 1, 0, 0);")}var s=$(".leader_info").eq(1);s=c$("div","luciferwar").appendTo(s);c$("a","href:#").appendTo(s).text("Facebook Profile").css("font-size","9px").attr("title","Lucifers MOD Load Facebook Profile").attr("onclick","window.open('http://www.facebook.com/profile.php?id="+r+"');return false;");c$("span").text(" | ").appendTo(s);c$("a","href:#").appendTo(s).text("Mafia Wars Profile").css("font-size","9px").attr("title","Lucifers MOD Show users Mafia Wars Profile").attr("onclick","do_ajax('inner_page', 'remote/html_server.php?xw_controller=stats&xw_action=view&user=' + "+r+", 1, 1, 0, 0);");var o=$.trim($("#declare_war .side.right > h3").text());var u=$.trim($("#declare_war .side.left > h3").text());var a=false;if(o=="WON"||u=="WON")$("#declare_war .leader_info").parent().find("dd").each(function(){a=$(this).find("img").attr("src");a=LucifersMOD.returnFBID(a);if(a!==false)$(this).wrap("<a href='http://www.facebook.com/profile.php?id="+a+"' target='_blank' title='Lucifers MOD | View facebook profile'/>")});$(".war_attacks").find(".userpic").each(function(){a=$(this).find("img").attr("src");a=LucifersMOD.returnFBID(a);if(a!==false)$(this).wrap("<a href='http://www.facebook.com/profile.php?id="+a+"' target='_blank' title='Lucifers MOD | View facebook profile'/>")})}},gotoURL:function(e){unsafeWindow.open(e)},Globals:{theme:0,toolbar:false},Theme:{loaded:false,ConflictCheck:function(){if(LucifersMOD.Theme.loaded==true){LucifersMOD.Theme.conflict=true}else{LucifersMOD.Theme.loaded=true}},conflict:false,color:"yellow",left:"-182px",style:"I2ZibXdfbWVudXt3aWR0aDoxODBweDttaW4td2lkdGg6MTgwcHg7Ym9yZGVyOjJweCBzb2xpZCAjRkYwO3BhZGRpbmctdG9wOjMwcHg7cGFkZGluZy1ib3R0b206MnB4O2JhY2tncm91bmQ6dXJsKGRhdGE6aW1hZ2UvanBnO2Jhc2U2NCwvOWovNFFBWVJYaHBaZ0FBU1VrcUFBZ0FBQUFBQUFBQUFBQUFBUC9zQUJGRWRXTnJlUUFCQUFRQUFBQWNBQUQvNFFNcGFIUjBjRG92TDI1ekxtRmtiMkpsTG1OdmJTOTRZWEF2TVM0d0x3QThQM2h3WVdOclpYUWdZbVZuYVc0OUl1Kzd2eUlnYVdROUlsYzFUVEJOY0VObGFHbEllbkpsVTNwT1ZHTjZhMk01WkNJL1BpQThlRHA0YlhCdFpYUmhJSGh0Ykc1ek9uZzlJbUZrYjJKbE9tNXpPbTFsZEdFdklpQjRPbmh0Y0hSclBTSkJaRzlpWlNCWVRWQWdRMjl5WlNBMUxqQXRZekEyTUNBMk1TNHhNelEzTnpjc0lESXdNVEF2TURJdk1USXRNVGM2TXpJNk1EQWdJQ0FnSUNBZ0lDSStJRHh5WkdZNlVrUkdJSGh0Ykc1ek9uSmtaajBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TVRrNU9TOHdNaTh5TWkxeVpHWXRjM2x1ZEdGNExXNXpJeUkrSUR4eVpHWTZSR1Z6WTNKcGNIUnBiMjRnY21SbU9tRmliM1YwUFNJaUlIaHRiRzV6T25odGNEMGlhSFIwY0RvdkwyNXpMbUZrYjJKbExtTnZiUzk0WVhBdk1TNHdMeUlnZUcxc2JuTTZlRzF3VFUwOUltaDBkSEE2THk5dWN5NWhaRzlpWlM1amIyMHZlR0Z3THpFdU1DOXRiUzhpSUhodGJHNXpPbk4wVW1WbVBTSm9kSFJ3T2k4dmJuTXVZV1J2WW1VdVkyOXRMM2hoY0M4eExqQXZjMVI1Y0dVdlVtVnpiM1Z5WTJWU1pXWWpJaUI0YlhBNlEzSmxZWFJ2Y2xSdmIydzlJa0ZrYjJKbElGQm9iM1J2YzJodmNDQkRVelVnVjJsdVpHOTNjeUlnZUcxd1RVMDZTVzV6ZEdGdVkyVkpSRDBpZUcxd0xtbHBaRG8wT1RkQlFqUTNNRFUyT1RVeE1VVXhRVGd6TWtSRFJURXdOek01TlRneU55SWdlRzF3VFUwNlJHOWpkVzFsYm5SSlJEMGllRzF3TG1ScFpEbzBPVGRCUWpRM01UVTJPVFV4TVVVeFFUZ3pNa1JEUlRFd056TTVOVGd5TnlJK0lEeDRiWEJOVFRwRVpYSnBkbVZrUm5KdmJTQnpkRkpsWmpwcGJuTjBZVzVqWlVsRVBTSjRiWEF1YVdsa09qUTVOMEZDTkRaRk5UWTVOVEV4UlRGQk9ETXlSRU5GTVRBM016azFPREkzSWlCemRGSmxaanBrYjJOMWJXVnVkRWxFUFNKNGJYQXVaR2xrT2pRNU4wRkNORFpHTlRZNU5URXhSVEZCT0RNeVJFTkZNVEEzTXprMU9ESTNJaTgrSUR3dmNtUm1Pa1JsYzJOeWFYQjBhVzl1UGlBOEwzSmtaanBTUkVZK0lEd3ZlRHA0YlhCdFpYUmhQaUE4UDNod1lXTnJaWFFnWlc1a1BTSnlJajgrLys0QURrRmtiMkpsQUdUQUFBQUFBZi9iQUlRQUVBd01EQTBNRVEwTkVSZ1FEaEFZSFJVUkVSVWRJUmNYRnhjWElTQVpIQnNiSEJrZ0lDWW5LU2NtSURJeU5qWXlNa0ZCUVVGQlFVRkJRVUZCUVVGQlFRRVNFQkFTRkJJV0V4TVdGaEVWRVJZYkZoY1hGaHNvR3hzZEd4c29NeVVnSUNBZ0pUTXRNU2twS1RFdE9EZ3pNemc0UVVGQlFVRkJRVUZCUVVGQlFVRkIvOEFBRVFnQUh3QytBd0VpQUFJUkFRTVJBZi9FQUpZQUFBTUJBUUVCQUFBQUFBQUFBQUFBQUFBRUJRWURBUWNCQUFNQkFRRUFBQUFBQUFBQUFBQUFBQUFCQWdNRUJSQUFBUUlGQWdRREJnUUZCUUFBQUFBQUFRSURBQkVTQkFVaEV6RkJVWkZ4SWdid1lZR2hNaFN4MFVJVjhWSmljcExDSTBNa05oRUFBZ0VEQXdJREJnVUZBQUFBQUFBQUFRSURBQkVTSVRFRVFSTlJjU0poZ1pHaFFpT3gwZkV5VW1LQ2tqTVUvOW9BREFNQkFBSVJBeEVBUHdEVVBYVnV3NDAyODRsQzN6UzBrOFZIb084ZG9pNXBLRjMrSkJsVUxpWW4wVEpSL0FSM3pkOWNXTm9oKzJwS3QxQ1ZoV3ZrVk9memxIaFlYN1lCMWt2djUycnR4MnQ5VlU0SWtKdkh6NmdkdFM3SzFidHR5aVFrRlZKRTU4ZWNlV054ZlpCNVYraGUxWkpDa1d6Qi93Q1VqVGNXZVd2dDFER1FMa2dERU4vbHNLTVQ4cVlaeXJWeGozNzlwQzBJWkN6UzZLU2R0TlhLZWtLWW0xeUtoYlpCeThXNExoSlhjTU9HYUtWaXBHMk9DWmFSTk9TemQ3aFhYTnB0YmEwdkI5eWRDa0lTT1NhaHluRFF5V1F4MkdiZHVReFV0RFRkbUVWYzA4WGF0TkJycEd4aklCVmNMcytOcjVIeXFzU0FRTGFtM2pXamdqTE41SEovdGVTdURjN3lXNkJiM0lRRVRVU0E1UUpjQnlNTldsOWtyYXcvY3NvNGcyNGFUU3dsUCs0U1pCS2llUlY3U2pNd0VYOVNuMVkyNms3MkZTVVBpTjdWZmdqUFltL1ZlM24zZHhmTm9yQlMxajBLMEFQQ3FjcHE5dmRHaG1Pc1JJbUJ4SjFwRmJHMUVFRXgxZ21Pc1JjVXFJSUpqckJNZFlMaWlzcDZxeldVeDEweXphSzJtbE4xbGRBVlVxb2dwbXNFYUFEaDFpemc4b25LMkNiZ2dKZFNhSGtqZ0ZqcDdqeGlQNjFwTE5rRHFDOFFmQ1VTTHhWNTZZeVZ3aXpQL1h1a0hhcTFFandQOXlEN2F4N0VmSGk1SEVoUkZTT2RzeXJmendObXVmZldCWXE3RTNLNmU2OWU1ekpYVjE2Z0RGdGNLYlEwNGhsb3BKQUM1Z0tWSWYxUnVMKzhhc0xSMjdlblEwSmtEaVNkQUI0bVBuOXpqMVdPSngrU0lPKzQ4VnJKNHlNbE5qc2lmeGpRZXMzZ3ZHMnlFSzhqendWVnlwQ1RLZmVjVnlJWXBINGNTVzdZWjRtSTNQYkl5K05Dc1FIWTc2SDQxTGZ2UFZXVVpWZld5WFdyU2NrTnNHa3k5MHZPcnhockZaYk5GbTZ4VG9WKzVJYTNMVlRzdHprU2xWZkV5TXhQNHhybVcybVdrTk5TRGJhUWxBSFFDUWpOM0gvdHJVcDRCZzF5L3NkNC9LTTQrVEZNc2tmWWhSWVVhV093MSszcUEzamZyVEtGYkhKaVdJQjk5UkxGZnFkM0t2dE11cVJmQkZUeVhhWlVDbVhsVUNuOVFscEZaM0srcXNZTjIrdFVQMjZmcldnRGg0dG55L0ZNZDJsQnYxbzlNeTNiY0FlK1FRZjlNYVUwa0VHUkIwSU1MbGN0QTBXVUVETEpERzVHTm0xR3dZZktoRU5qWm1CREVVaGljeGE1Wmd1c1RTdEVnNjByNmtFL2lEMWloR1J3VFRMSHFuSU0yM2x0MHRxQVNQcENxbTlQZ1p4cnBqckhOUEZESHlVQURHSisyK1AxWXZxVnExTEZUNGk0K0ZaekxXVnhldTJydHU2R1YyNmxHb3ptS3FkUi9qSE4zRlBPV2J6Szd4MTkxMEprWFQ1RWxLZ3FZVHJMaER0U3VoN1FWSzZIdEhuTExLcW9vSUFqTjE5SXZ2bHY1MXRtZFBaVXhHSXUwWENYL3VhM0hrTGJ1M0RPY2xpWGtIdWhteHQ4cmJ0dFc2MzJrMjdKMExhU3B4YVFaMG12UVExVXJvZTBGU3VoN1EybWtZV1lJMzlvNmJmalR6TkwyOWc0eGo3dTAzQW8zRzd0NlNTamNUSURuSE4zR3ZQNHEzdEhIRWZjV3hCUXFWVFpvbUVwSUk0UzA0UTVVcm9lMEZTdWg3UXU3SmZLNHZubmUzVzFxV1pwRzR0TXBkMlRsczg1YnRwS1VoRGJTVkJFMHFTcVpKMUhEa0lmYys2VFlvYVpEUzMwcFNraHdIYk1nQXJockhsU3VoN1FWSzZIdENMc1FBUXRsYk93RmhjL3BSblNUV0pMbHlpNnZsTmxiWkNrTk1JRGJZSTExUDFLK01XTjJGS2xkRDJncVYwUGFKa0x5RVpIOW9zQnNBUFlLQ3hOTjdzRzdDbFN1aDdRVks2SHRHZmJwWlUzdXdic0tWSzZIdEJVcm9lMEhib3lxUDZ4TlZrd2Vqc3ArS1QrVVVtV0xiSVkrelZldGg1U0cwTEZjNTFVaWZlUExwVnNXeDk0RWJkUWx1eXBxNWZWemp2VXJvZTBkaDVCL3dDYUdGQXlQQTdzSkFiSDE5QlVZK3BtT29ZQVc4cVM5VG8zc1E1TGkwcExnSGdhVDhsUWhKV2E5TklRalc0dGlBQi9NcG9Ta1BGSjd4WmRVbmFYdkFiVkozSy9wcGxyT2ZLT2RvYmRMQUZtRTdBbkxia1V6NTZpTGg1WGFnUkF2M0lPUjNvMzZBVzlTbnpwTXQySnZveTRtcE5sNnNReFpobTZhV3E1WkZBbEtTNmRCVVR3UFhTSE1KYlhDbjNjdmZURnpjQ1RhRCtocy93N1IyV3JIZmRBdUJuN3JsVlR1VC9HRzZsZEQyaHo4aUVySU9ORDJHNUgrMWkyV20rQ2VDazBLclhHVFpZN2ZtYXpGM2xrTmVwL3UxcElidHp0S2x4SXBLU2ZuRkZlZHlHU216aWJkVFlPaXJsM1FKSHpFKy9oSHQ1YjRseS9RL2N1SVMrM0lGcFNrcHFQNlNwSjFpcUZLbG9ETHdqV2JsY1VwQVY0L2NsaGhXUDdoOUM0L3dCUDFVbFY3dGRyQm12cHZYTEU0NW5HTWxLVHVQdWF2T25pby9sRkRkaFNwWFE5b0tsZEQyamdhU1ZwdSt6WGx5RDVIeEcybnNyU3d4eDZXdFgvMlE9PSkgIzAwMCBuby1yZXBlYXQ7Y29sb3I6I0ZGRjtsZWZ0Oi0xODJweDtib3JkZXItY29sb3I6I0ZGMH0jZmJtd19tZW51IGRpdi5zdWJtZW51IHVse3dpZHRoOjE3MHB4O21pbi13aWR0aDoxNzBweDtib3JkZXI6MXB4IHNvbGlkICNGRjA7Ym9yZGVyLWNvbG9yOiNGRjB9I2ZibXdfbWVudSB1bCBsaXtjb2xvcjojRkZGfSNmYm13X21lbnUgdWwgbGk6aG92ZXJ7Y29sb3I6I0ZGMH0="},AutoDock:function(e){HomeFeedCenter(function(t){if(global.HFCRunning==true&&global.HFCDock==false){LucifersMOD.dock.hfc();switch(e){case"robber":setTimeout(function(){LucifersMOD.robber()},5e3);break;case"assassinanator":setTimeout(function(){LucifersMOD.assassinanator()},5e3);break;case"Battlefieldv2":setTimeout(function(){Battlefieldv2()},5e3);break}}})},assassinanator:function(){LucifersMOD.SpockServer("assassin-a-nator",function(){setTimeout(function(){$("#aan_play").click(function(){UserConfig.main.set("opt_aa_restart",true);UserConfig.main.save()});$("#aan_close").click(function(){UserConfig.main.set("opt_aa_restart",false);UserConfig.main.save()});$("#aan_pause").click(function(){UserConfig.main.set("opt_aa_restart",false);UserConfig.main.save()});if(UserConfig.main.autorestart&&UserConfig.main.get("opt_aa_restart")==true){setTimeout(function(){$("#aan_play").click()},500)}},250)})},robber:function(){LucifersMOD.SpockServer("robber.bg",function(){setTimeout(function(){$("#rob_bg_play").click(function(){UserConfig.main.set("opt_robber_restart",true);UserConfig.main.save()});$("#rob_bg_close").click(function(){UserConfig.main.set("opt_robber_restart",false);UserConfig.main.save()});$("#rob_bg_pause").click(function(){UserConfig.main.set("opt_robber_restart",false);UserConfig.main.save()});if(UserConfig.main.autorestart&&UserConfig.main.get("opt_robber_restart")==true){setTimeout(function(){$("#rob_bg_play").click()},2500)}},250)})},SpockServer:function(e,t){var n="//spocklet.com/bookmarklet/";if(e){$.getScript(n+e+".js?"+Math.random(),function(){if(typeof t=="function")t()})}else{alert("need a script name")}},GetScript:function(e){if(e){$.getScript(e+"?"+Math.random())}},inventorygrouper:function(){$.getScript("http://cdn.screepts.com/leothelion96/InventoryGrouper.js?"+Math.random())},BlackOut:function(){var e=loadingScreen("Loading Black Out...");setTimeout(function(){var e=Util.render(atob("PGh0bWwgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiPjxoZWFkPjx0aXRsZT5NYWZpYVdhcnMgQWRkb248L3RpdGxlPjwvaGVhZD48Ym9keSBzdHlsZT0iYmFja2dyb3VuZDogYmxhY2s7bWFyZ2luOiAwcHg7cGFkZGluZzogMHB4OyBvdmVyZmxvdzogaGlkZGVuOyI+PGlmcmFtZSBzY3JvbGxpbmc9ImF1dG8iIGZyYW1lYm9yZGVyPSIwIiBpZD0iaWZyYW1lX2NhbnZhcyIgbmFtZT0iaWZyYW1lX2NhbnZhcyIgc3JjPSIke3VybH0mc2tpcF9yZXFfZnJhbWU9MSZmaXJzdF9sb2FkPTEmc2ZfeHdfdXNlcl9pZD0ke3VzZXJfaWR9JnNmX3h3X3NpZz0ke3NpZ30mc25hcGlBdXRoSGFzaF8xMDk3OTI2MTIyMz0ke2F1dGhIYXNofSIgc3R5bGU9ImJhY2tncm91bmQ6IGJsYWNrO3dpZHRoOiAxMDAlO2hlaWdodDogMTAwJTtvdmVyZmxvdy14OiBoaWRkZW47Ij48L2lmcmFtZT48L2JvZHk+PC9odG1sPg=="),{url:unsafeWindow.location.href,user_id:unsafeWindow.User.id,sig:unsafeWindow.local_xw_sig,authHash:unsafeWindow.SNAPI.getAuthHash()});unsafeWindow.open(atob("ZGF0YTp0ZXh0L2h0bWw7YmFzZTY0LA==")+btoa(e),"_top")},1e3)},mwhelper:function(){eval(function(e,t,n,r,i,s){i=function(e){return e.toString(36)};if(!"".replace(/^/,String)){while(n--){s[n.toString(t)]=r[n]||n.toString(t)}r=[function(e){return s[e]}];i=function(){return"\\w+"};n=1}while(n--){if(r[n]){e=e.replace(new RegExp("\\b"+i(n)+"\\b","g"),r[n])}}return e}("3 2=9;3 1=2.a('b');1.8='d/5';1.4='7://6.c.l/e.k.m?'+n j().i();2.f('g')[0].h(1);",24,24,"|mwhCODE|mwhDOC|var|src|javascript|www|http|type|document|createElement|script|mwhelper|text|MWHAnalyzer|getElementsByTagName|head|appendChild|getTime|Date|bml|com|js|new".split("|"),0,{}))},LucifersServer:function(e){var t;if(e.indexOf("/")==0){t=cdn+e}else{t=cdn+"/bm/"+e+".js"}$.getScript(t,function(){if(typeof callback=="function")callback()})},LoadSaveOptions:function(){try{if(!UserConfig.main.get("opt_arrow")){$("#fbmw_menu_arrow").removeClass("mwa_res_menu_arrow").addClass("mwa_res_lucifers_arrow")}else{$("#fbmw_menu_arrow").removeClass("mwa_res_lucifers_arrow").addClass("mwa_res_menu_arrow")}}catch(e){}if(UserConfig.main.get("opt_clanchat")){setTimeout(function(){try{MW.ClanChat.logoff(true);$(".clanChat_close_confirm").remove()}catch(e){}setTimeout(function(){$("#clanChat").parent().remove()},2500)},2500)}if(UserConfig.main.get("opt_removebanner")){try{$("#popup_fodder_zmc #pop_zmc").remove();$("#mw_like_button").remove();$('iframe[name="mafiawars_zbar"]').parent().remove();$("#snapi_zbar").parent().remove();$("#zbar").parent().remove();$("#mafia_two_banner").remove();var t=0;var n=setInterval(function(){if(e$("#declare_war_attention")===null&&t>100){clearInterval(n)}else{clearInterval(n);$("#declare_war_attention").remove()}t++},2500);unsafeWindow.resizeIframe=function(){};unsafeWindow.iframeResizePipe=function(){};unsafeWindow.MW.COGS.doCOGSPublish=function(){};if(e$("#divGoToMW")!==null){$("#divGoToMW").trigger("click")}}catch(e){}}if(UserConfig.main.get("opt_killswitch")){try{var r=0;r=unsafeWindow.setInterval(function(){$(document).ready(function(e){if(document.getElementById("LoadingOverlay")){document.getElementById("final_wrapper").removeChild(document.getElementById("LoadingOverlay"));if(document.getElementById("LoadingBackground")){document.getElementById("final_wrapper").removeChild(document.getElementById("LoadingBackground"))}}});unsafeWindow.clearInterval(r)},1e3)}catch(e){}}else{try{var i=String($("#LoadingOverlay").attr("onclick"));$("#LoadingOverlay").attr("onclick","$('#LoadingBackground, #LoadingOverlay').hide();"+i).find("a").text("Kill Revolver!")}catch(e){}}},autoload:function(e,t,n){showHelpPopup({icon:"caution",title:"Restart "+t+' in <span id="restart_countdown">5 seconds</span>',message:"- 'Cancel' will remove the restart action.<br/>"+"- 'Skip' will skip the restart for now, BUT it will reload on next restart",buttons:[{label:"Cancel",addClass:"short red",onclick:function(){clearTimeout(countdown);UserConfig.main.set(n,false);UserConfig.main.save()}},{label:"Skip",addClass:"short white",onclick:function(){clearTimeout(countdown)}}]});var r=5;countdown=setInterval(function(){$("#restart_countdown").html(r+" seconds");if(r==0){$('div[id^="mwaddon_popup_"]').parent().parent().remove();e()}r--},1e3)},StartUp:function(){LucifersMOD.Globals.toolbar=UserConfig.main.get("opt_Toolbar");if(LucifersMOD.Theme.conflict==true){showHelpPopup({icon:"caution",title:"Theme Conflict",message:"You currently have more than 1 theme loading up,<br/>please disable the other themes you don't need to load<br/>You will have to reload MW to have the correct theme running",buttons:[{label:"Change Now",addClass:"short green",onclick:function(){PluginManager()}},{label:"Cancel",addClass:"short red"}]})}if(UserConfig.main.autorestart==true){if(UserConfig.main.get("opt_aa_restart")==true&&UserConfig.main.autorestart==false){log("AA auto start");LucifersMOD.autoload(LucifersMOD.assassinanator,"Assassin-a-nator","opt_aa_restart");return}else if(UserConfig.main.get("opt_aa_restart")==true&&UserConfig.main.get("opt_hfc_restart")==true){LucifersMOD.autoload(LucifersMOD.AutoDock("assassinanator"),"Assassin-a-nator & Docking Homefeed Center","opt_aa_restart");return}if(UserConfig.main.get("opt_robber_restart")==true&&UserConfig.main.get("opt_hfc_restart")==false){LucifersMOD.autoload(LucifersMOD.robber,"Robber","opt_robber_restart");return}else if(UserConfig.main.get("opt_robber_restart")==true&&UserConfig.main.get("opt_hfc_restart")==true){LucifersMOD.autoload(LucifersMOD.AutoDock("robber"),"Robbing & Docking Homefeed Center","opt_robber_restart");return}if(UserConfig.main.get("opt_hfc_restart")==true&&UserConfig.main.get("opt_battlefield_restart")==false){log("HFC auto start");LucifersMOD.autoload(HomeFeedCenter,"Home Feed Center","opt_hfc_restart")}if(UserConfig.main.get("opt_battlefield_restart")==true&&UserConfig.main.get("opt_hfc_restart")==false){log("BF auto start");LucifersMOD.autoload(Battlefieldv2,"Battlefield","opt_battlefield_restart")}if(UserConfig.main.get("opt_battlefield_restart")==true&&UserConfig.main.get("opt_hfc_restart")==true){log("BF Loading & HFC Docking");LucifersMOD.autoload(LucifersMOD.AutoDock("Battlefieldv2"),"Battlefield & Docking Homefeed Center","opt_battlefield_restart")}}},install:function(){function t(e,t){var n=t.length;e.active=true;Util.each(t,function(t,r){if(Util.isSameString(e.name,r.name)){n=t;return false}});t[n]=e}function n(t,n,r){function i(){setTimeout(callback,1e3)}function s(){n(r,i)}$("#content_row > div[id^=popup_]").empty();if(r.runat==1){startup='<span style="font-size:11px">This plugin runs on <strong>STARTUP</strong> you will need to <strong>RELOAD</strong> after install!</span><br/>'}else{startup=""}showAskPopup("New "+t+" Installation!",Util.render(e,{name:r.name||"Unknow",type:t,startup:startup,editor:t==="Plugin"?"Plugin Manager":"Reminder Editor"}),s,i)}function o(){if(i=="plugin"){Plugins.init()}else if(i=="reminder"){Reminders.init()}s.removeClass("green");s.addClass("orange");s.addClass("disabled");s.find("span:last").text("Installed!")}var e='The "${name}" ${type} is ready to be installed.<br>Do you want to proceed?'+'<br><br>${startup}<span style="font-size:11px">You can disable/remove ${type}s by opening ${editor}.</span>';var r=$(this).attr("install");var i=$(this).attr("type");var s=$(this);if(typeof i!=="undefined"&&i!==false){if(i=="plugin"){UserConfig.plugins.load(function(){n("Plugin",function(e){t(new MWAddonPlugin(e),UserConfig.plugins.all);UserConfig.plugins.save(o)},Util.parseJSON(Base64.decode(r)))})}else if(i=="reminder"){UserConfig.reminder.load(function(){n("Reminder",function(e){t(new MWAddonReminder(e),UserConfig.reminder.all);UserConfig.reminder.save(o)},Util.parseJSON(Base64.decode(r)))})}}},DownloadPlugins:function(){function r(){$("#mod_plugin_search").val("");$(".notice").show();var e=$(this).attr("id");$(".info_body li").removeClass("matched");$(".info_body li").removeClass("hideit");$(".tab_btn").removeClass("green");$(".tab").addClass("hideit");$(this).removeClass("black").addClass("green");e=e.replace("btn","div");$("#"+e).removeClass("hideit")}function i(t){var n=$(this);var r=n.val();clearTimeout(n.attr("timeoutT"));if(!Util.isString(r)||r.length<2){$("li",e.content).removeClass("matched");$("li",e.content).removeClass("hideit");$(".notice",e.content).show();return true}$(".tab",e.content).removeClass("hideit");$(".notice",e.content).hide();n.attr("timeoutT",setTimeout(function(){var t=new RegExp(r,"ig");$(".info_body li",e.content).each(function(e,n){if(t.test($("p",n).text())||t.test($("pre",n).text())){if(!$(n).hasClass("matched"))$(n).addClass("matched")}else{if(!$(n).hasClass("hideit"))$(n).addClass("hideit");if($(n).hasClass("matched"))$(n).removeClass("matched")}})},800))}var e=new PopupObject("mod_plugin_downloads",{type:"main",height:555,title:"PLUG-IN & REMINDER DOWNLOADS"});var t=c$("div","class:top_header").appendTo(e.content);b$("Plugins","id:plugins_btn,class:plugindownloads short green tab_btn").css("margin-left","1px").appendTo(t).click(r);b$("Reminders","id:reminders_btn,class:plugindownloads short black tab_btn").css("margin","1px").appendTo(t).click(r);b$("Themes","id:themes_btn,class:plugindownloads short black tab_btn").css("margin","1px").appendTo(t).click(r);b$("Community Plugins","id:public_btn,class:plugindownloads short black tab_btn").css("margin","1px").appendTo(t).click(r);if(AppInfo.release=="beta")b$("BETA","id:beta_btn,class:plugindownloads short black tab_btn").css("margin","5px").appendTo(t).click(r);c$("span","class:search_box").css("margin-left","15px").appendTo(t).append(c$("label").text("Search: ")).append(c$("input:text","id:mod_plugin_search").width(149).keyup(i));var n=c$("div","id:modplugins,class:info_body").appendTo(e.content);c$("div").appendTo(e.content).css("margin","12px 10px 5px 10px").append(c$("span").text("If you think this work deserves a reward, you can donate at:"));c$("a","target:_black").appendTo(e.content).attr("href","https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=BCPYPXA3GDDBN").append(c$("img").attr("src","https://www.paypal.com/en_US/i/btn/btn_donate_SM.gif"));c$("center").css({"padding-top":12,"border-top":"1px dotted #333"}).appendTo(e.content);$("#popup_fodder_zmc").empty();n.append(c$("p").text("Loading Plugin & Reminder Center..."));n.append(c$("span").text("Please wait while plugin center loads, "));n.append(c$("a","target:_black").attr("href",AppInfo.plugins).text("or click here to vist the plugin page."));httpXDRequest({method:"GET",url:AppInfo.plugins+"?"+AppInfo.release,onload:function(e){n.html(h$(e.responseText).find("div.addonplugins").html());n.find("a").each(function(){var e=this.href;var t=$(this);var n=Util.uSplit(e);var r=Util.parseJSON(n.next_params);var i=false;if(r.mwaddon_plugin){plugindetails=Util.parseJSON(Base64.decode(r.mwaddon_plugin));pluginname=$.trim(plugindetails.name);Plugins.each(function(e,t){if(t.name==pluginname){i=true;return}});if(i==true){try{t.removeAttr("href");t.removeAttr("target");t.removeClass("white").addClass("orange").addClass("disabled");t.find("span:last").text("Installed!");t.append(b$("Remove","class:short red").css("margin-left",5).click(LucifersMOD.RemovePlugins(pluginname)))}catch(s){}Logger.debug(pluginname+" Installed")}else{Logger.debug(pluginname+" Not Installed");t.removeAttr("click");t.removeAttr("onclick");t.removeAttr("href");t.attr("type","plugin");t.attr("install",r.mwaddon_plugin);t.click(LucifersMOD.install)}}if(r.mwaddon_reminder){plugindetails=Util.parseJSON(Base64.decode(r.mwaddon_reminder));remindername=$.trim(plugindetails.name);Logger.debug(remindername);Reminders.each(function(e,t){if(t.name==remindername){i=true;return false}});if(i==true){try{t.removeAttr("href");t.removeAttr("target");t.removeClass("white").addClass("orange").addClass("disabled");t.find("span:last").text("Installed")}catch(s){}}else{Logger.debug(pluginname+" Not Installed");t.removeAttr("click");t.removeAttr("onclick");t.removeAttr("href");t.attr("type","reminder");t.attr("install",r.mwaddon_reminder);t.click(LucifersMOD.install)}}});$("#my_plugin_tab").css("display","none")}});e.addBase64Style("I21vZF9wbHVnaW5fZG93bmxvYWRzIC5pbmZvX2hlYWRlciB7DQogICAgaGVpZ2h0OiA1NXB4Ow0KICAgIGZvbnQtc2l6ZTogMTZweDsNCiAgICBmb250LXdlaWdodDogYm9sZDsNCn0NCiNtb2RfcGx1Z2luX2Rvd25sb2FkcyAuaW5mb19oZWFkZXIgcHt3b3JkLXdyYXA6YnJlYWstd29yZDt9DQoNCg0KI21vZF9wbHVnaW5fZG93bmxvYWRzIC5pbmZvX2JvZHkgew0KICAgIHRleHQtYWxpZ246IGxlZnQ7DQogICAgb3ZlcmZsb3cteTogYXV0bzsNCiAgICBvdmVyZmxvdy14OiBoaWRkZW47DQogICAgbWFyZ2luOiAwcHggMjVweCAwcHggMzVweDsNCiAgICBoZWlnaHQ6IDM2MHB4Ow0KICAgIHBhZGRpbmctcmlnaHQ6IDEwcHg7DQogICAgZm9udC1zaXplOiAxMnB4Ow0KfQ0KDQojbW9kX3BsdWdpbl9kb3dubG9hZHMgLmluZm9fYm9keSAuaGlkZWl0ew0KICAgIGRpc3BsYXk6bm9uZTsNCn0NCg0KI21vZF9wbHVnaW5fZG93bmxvYWRzIC5pbmZvX2JvZHkgLm1hdGNoZWQgew0KICAgIGRpc3BsYXk6IGJsb2NrOw0KfQ0KDQojbW9kX3BsdWdpbl9kb3dubG9hZHMgLmluZm9fYm9keSAudGFiIGgyew0KICAgIGJhY2tncm91bmQtY29sb3I6cmdiYSgwLCAyNTUsIDAsIDAuMikNCn0NCg0KI21vZF9wbHVnaW5fZG93bmxvYWRzIC5pbmZvX2JvZHkgcHJlIHsNCiAgICBtYXJnaW46IDBweCAwcHggNXB4IDBweDsNCiAgICBmb250LXNpemU6IDEycHg7DQogICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgYmFja2dyb3VuZC1jb2xvcjogIzMzMzsNCiAgICBib3JkZXI6IDFweCBzb2xpZCAjNDQ0Ow0KICAgIHBhZGRpbmc6IDFweCA1cHggMXB4IDVweDsNCn0NCiNtb2RfcGx1Z2luX2Rvd25sb2FkcyAuaW5mb19ib2R5IHVsIHsNCiAgICBtYXJnaW46IDBweCAwcHggNXB4IDBweDsNCiAgICBib3JkZXItYm90dG9tOiAxcHggZG90dGVkICMzMzM7DQogICAgcGFkZGluZy1ib3R0b206IDEwcHg7DQp9");e.show()}};String.prototype.trunc=function(e){return this.substr(0,e-1)+(this.length>e?"......":"")};MWAddonCity.prototype.toString=function(){return this.name};var MWFB,$;var BrowserStorage={setValue:null,getValue:null,deleteValue:null};var global={CollectDailyUrl:"",MaxCrewSlots:false,facebook_check:false,service_error:false,HFCDock:false,HFCRunning:false,BFDock:false,BFRunning:false,scope:this,USER_ID:"",PERSON_ID:"",mw_locale:"en_US",zGraphicsURL:"http://mwfb.static.zynga.com/mwfb/graphics/",location:null,is_unframed:false,xd_support:false,is_chrome:false,isUnderboss:false,props_loaded:false,prop_finished_timer:"",city_crew:0,city_log:true,safemode:false,NotifyMsg:"",bonuspoint:"",running:false,bucket_url:false,AutoBuildProps:Array(),hfc_auto:false,AjaxRequests:new Object,Popups:new Object,FamilyRivalsList:Array(),PersonalRivalsList:Array(),ClanXpCheckTime:0,BucketCheckTime:0,pages:{story_controller:PageJob,job_controller:PageJob,map_controller:PageJobMap,collection_controller:PageCollection,clan_controller:PageClan,stats_controller:PageProfile,war_controller:LucifersMOD.WarProfile,fight_controller:LucifersMOD.Rivals.update,index_controller:IndexMainPage,bossfightv2_controller:bosscombofighter},cities:{each:function(e){Util.each(global.cities,function(t,n){if(n.name&&n.enabled===true){return e(t,n)}})}},cityNames:null,city:function(e){return global.cities[e]||new MWAddonCity("Unknow City",false,1,"$")},addCity:function(e,t,n,r,i,s){if(Util.isNumber(e)&&Util.isString(t)){global.cities[e]=new MWAddonCity(t,n,r,i,s)}},User:{cash_by_city:function(){return unsafeWindow.User.cash_by_city},locale:function(){return unsafeWindow.User.locale},level:function(){return unsafeWindow.User.user_level||parseInt($("#user_level").text())},health:function(){return unsafeWindow.User.health},max_health:function(){return unsafeWindow.User.max_health},energy:function(){return unsafeWindow.User.energy},max_energy:function(){return unsafeWindow.User.max_energy},stamina:function(){return unsafeWindow.User.stamina},max_stamina:function(){return unsafeWindow.User.max_stamina},expToNextLevel:function(){return unsafeWindow.User["exp_to_next_level"]},expForThisLevel:function(){return unsafeWindow.User["exp_for_this_level"]},cash:function(){return unsafeWindow.User.cash},reward_points:function(){return unsafeWindow.User.favor},mafia_size:function(){return unsafeWindow.User.mafia_size}},Groups:{refresh:function(e){facebook.getGroups(function(t){UserConfig.main.groups=t;UserConfig.main.save(e)})},addToSelect:function(e,t){var n=$(e).empty();Util.each(UserConfig.main.groups,function(e,t){n.append(c$("option","value:"+e).text(t))});if(t){$("option[value="+t+"]",n).attr("selected","selected")}}},loadPage:function(e,t){if(typeof global.pages[e]=="function"){Logger.debug("loading: "+e);setTimeout(function(){try{global.pages[e](t)}catch(n){Logger.error(n)}},500)}else Logger.debug("No handled: "+e)},onPageLoadArray:new Object,onPageLoad:function(e,t){if(e&&Util.isFunc(t)){global.onPageLoadArray[e]=t}},createMWAddonScope:function(e,t,n){return{LucifersMOD:LucifersMOD,id:e,name:t,scope:n,Version:AppInfo.version,Battlefield:Battlefieldv2,FightClubBuyer:FightClubBuyer,CollectAllCities:CollectAllCities,Configuration:Configuration,CraftManager:CraftManager,FreeGiftsCenter:FreeGiftsCenter,HomeFeedCenter:HomeFeedCenter,InventoryAnalyzer:InventoryAnalyzer,MafiaWiper:MafiaWiper,MultiGifter:MultiGifter,OperationsCenter:OperationsCenter,UserLinks:UserLinks,isGameUnframed:global.is_unframed,CrossDomainSupported:global.xd_support,onPageLoad:global.onPageLoad,addMenu:MainMenu.add,addCity:global.addCity,execPluginByName:Plugins.execByName,Util:Util,MW:MW,Facebook:facebook,Ajax:httpAjaxRequest,httpRequest:httpXDRequest,Base64:Base64,Config:Config,PopupObject:PopupObject,CreatePopup:PopupObject,CreateTab:TabObject,CreateDropDown:DropDownObject,CreateConfigSettings:UserConfig.create,UserConfig:UserConfig,ShowHelpPopup:showHelpPopup,ShowPromptPopup:showPromptPopup,ShowTextPopup:showTextPopup,ShowAskPopup:showAskPopup,ShowGroupSelection:showGroupSelection,addFreeGift:UserFreeGifts.add,addStream:UserStreams.add,Collection:Collection,TimerMessage:TimerMessage,Countdown:Countdown,LoadingScreen:loadingScreen,ShortURL:getShortURL,UnshortUrl:getUnshortUrl,addURLService:URLServices.add,Notification:MWAddonNotify.Show,Toolbar:{LinkWatcher:MWAddonToolbar.LinkWatcher},Tooltips:{applyTo:Tooltips.applyTo,addResource:Tooltips.addResource,addResourceContent:Tooltips.addResourceContent,addResourceString:Tooltips.addResourceString,getLocalizedResource:Tooltips.getLocalizedResource}}}};var UserConfig={create:function(e,t){return UserConfig[e]=new Config(e,t)},getSettingFrom:function(e,t){var n=new Object;Util.each(e,function(e,r){if(Util.isObject(t)){n[e]=Util.clone(t)}else{n[e]=t}});return n},isValidProperty:function(e,t){return String(e).charAt(0)!=="_"&&!Util.isFunc(t)},toType:function(e,t){if(!Util.isSet(e)){return t}switch(typeof t){case"string":return String(e);case"number":return isNaN(e=parseInt(e))?t:e;case"boolean":return e===true}return typeof e===typeof t?e:t},each:function(e){Util.each(UserConfig,function(t,n){if(n._isConfigObject===true){e(t,n)}})},toArray:function(){var e=new Array;UserConfig.each(function(t,n){e.push(n)});return e},save:function(e){UserConfig.each(function(e,t){t.save()})},load:function(e){UserConfig.each(function(e,t){t.load()})},setCheckboxValue:function(e,t){if(!e.is){e=$(e)}if(e.is("input:checkbox")){e[0].checked=t}else{e.toggleClass("checked",t)}},getCheckboxValue:function(e){if(!e.is){e=$(e)}if(e.is("input:checkbox")){return e[0].checked}else{return e.hasClass("checked")}},toDomElements:function(e,t){Util.each(e,function(e,n){if(UserConfig.isValidProperty(e,n)){var r=t+"_"+e;if(!UserConfig.setElementValue(r,n)){if(Util.isObject(n)){UserConfig.toDomElements(n,r)}}}})},fromDomElements:function(e,t){Util.each(e,function(n,r){if(UserConfig.isValidProperty(n,r)){var i=t+"_"+n;var s=UserConfig.getElementValue(i);if(Util.isSet(s)){e[n]=UserConfig.toType(s,r)}else if(Util.isObject(r)){UserConfig.fromDomElements(r,i)}}})},setElementValue:function(e,t){var n=e$("#"+e)||e$("#"+e.toLowerCase());if(n===null)return false;if(n.is("input:checkbox")||n.attr("name")==="checkbox"){UserConfig.setCheckboxValue(n,t)}else if(n.is("select[multiple]")){n.empty();Util.each(t,function(e,t){n.append(c$("option","value:"+e).text(t))})}else if(n.attr("name")==="checkboxlist"){Util.each(t,function(e,t){UserConfig.setCheckboxValue($("*[value="+e+"]",n),t)})}else if(n.is("input, select, textarea")){n.val(t)}else{return false}return true},getElementValue:function(e){var t=e$("#"+e)||e$("#"+e.toLowerCase());if(t===null)return;if(t.is("input:checkbox")||t.attr("name")==="checkbox"){return UserConfig.getCheckboxValue(t)}else if(t.is("select[multiple]")){var n=new Object;$("option",t).each(function(e,t){n[t.value]=t.text});return n}else if(t.attr("name")==="checkboxlist"){var r=new Object;$(".checkbox, input:checkbox",t).each(function(e,t){var n=t.getAttribute("value");if(n){r[n]=UserConfig.getCheckboxValue(t)}});return r}else if(t.is("input, select, textarea")){return t.val()}return}};Config.prototype.get=function(e){return this[e]};Config.prototype.set=function(e,t){this[e]=UserConfig.toType(t,this[e])};Config.prototype.add=function(e,t){this[e]=t};Config.prototype.fromObject=function(e){function t(e,n){Util.each(e,function(e,r){if(UserConfig.isValidProperty(e,r)){var i=n[e];if(!Util.isSet(i)){n[e]=r}else if(Util.isArray(i)){if(Util.isArray(r)){n[e]=r}}else if(Util.isObject(i)){if(Util.isObject(r)){t(r,n[e])}}else{n[e]=UserConfig.toType(r,i)}}})}if(!Util.isSet(e)){return}t(e,this)};Config.prototype.fromJSON=function(e){if(Util.isString(e)){try{this.fromObject(Util.parseJSON(e))}catch(t){Logger.error("fromJSON: Error parsing json configuration.")}}};Config.prototype.each=function(e){Util.each(this,function(t,n){if(UserConfig.isValidProperty(t,n)){e(t,n)}})};Config.prototype.toArray=function(){var e=new Array;this.each(function(t,n){e.push(n)});return e};Config.prototype.save=function(e){function i(){var r=t._saving.data;t._saving=null;if(chromeFileSystem===true){BrowserStorage.setValue(n,r,e)}else{BrowserStorage.setValue(n,r);e&&e()}}var t=this;var n=AppInfo[t._allusers?"id":"prefix"]+t._key;var r=new Object;t.each(function(e,t){r[e]=t});if(t._saving&&t._saving.timeout){clearTimeout(t._saving.timeout)}t._saving={data:Util.toJSON(r,true),timeout:setTimeout(i,100)}};Config.prototype.load=function(e){var t=this;var n=AppInfo[t._allusers?"id":"prefix"]+t._key;if(chromeFileSystem===true){BrowserStorage.getValue(n,function(n){if(typeof n=="string"){t.fromJSON(n)}if(typeof e=="function")e.apply(t)})}else{setTimeout(function(){t.fromJSON(BrowserStorage.getValue(n,null));if(typeof e=="function")e.apply(t)},0)}};Config.prototype.toDomElements=function(){return UserConfig.toDomElements(this,this._key)};Config.prototype.fromDomElements=function(){return UserConfig.fromDomElements(this,this._key)};var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");var t="";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<128){t+=String.fromCharCode(r)}else if(r>127&&r<2048){t+=String.fromCharCode(r>>6|192);t+=String.fromCharCode(r&63|128)}else{t+=String.fromCharCode(r>>12|224);t+=String.fromCharCode(r>>6&63|128);t+=String.fromCharCode(r&63|128)}}return t},_utf8_decode:function(e){var t="";var n=0;var r=0,i=0,s=0;while(n<e.length){r=e.charCodeAt(n);if(r<128){t+=String.fromCharCode(r);n++}else if(r>191&&r<224){i=e.charCodeAt(n+1);t+=String.fromCharCode((r&31)<<6|i&63);n+=2}else{i=e.charCodeAt(n+1);s=e.charCodeAt(n+2);t+=String.fromCharCode((r&15)<<12|(i&63)<<6|s&63);n+=3}}return t},encode:function(e){var t="";var n,r,i,s,o,u,a;var f=0;if(!Util.isString(e)||e.length<1){return""}e=Base64._utf8_encode(e);while(f<e.length){n=e.charCodeAt(f++);r=e.charCodeAt(f++);i=e.charCodeAt(f++);s=n>>2;o=(n&3)<<4|r>>4;u=(r&15)<<2|i>>6;a=i&63;if(isNaN(r)){u=a=64}else if(isNaN(i)){a=64}t=t+Base64._keyStr.charAt(s)+Base64._keyStr.charAt(o)+Base64._keyStr.charAt(u)+Base64._keyStr.charAt(a)}return t},decode:function(e){var t="";var n,r,i;var s,o,u,a;var f=0;if(!Util.isString(e)||e.length<2){return""}e=e.replace(/^data:\w+\/\w+;base64,/,"");e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(f<e.length){s=Base64._keyStr.indexOf(e.charAt(f++));o=Base64._keyStr.indexOf(e.charAt(f++));u=Base64._keyStr.indexOf(e.charAt(f++));a=Base64._keyStr.indexOf(e.charAt(f++));n=s<<2|o>>4;r=(o&15)<<4|u>>2;i=(u&3)<<6|a;t=t+String.fromCharCode(n);if(u!=64){t=t+String.fromCharCode(r)}if(a!=64){t=t+String.fromCharCode(i)}}t=Base64._utf8_decode(t);return t}};MafiaMember.prototype.profile=function(){if(this.uid){return MW.getProfileLink(this.uid)}return"#"};MafiaMemberCollection.prototype.exists=function(e){return Util.isSet(this[e])};MafiaMemberCollection.prototype.get=function(e){return this[e]};MafiaMemberCollection.prototype.length=function(){return Util.length(this)};MafiaMemberCollection.prototype.add=function(e){if(e&&e.uid&&e.name){return this[e.uid]=new MafiaMember(e)}return};MafiaMemberCollection.prototype.each=function(e){Util.each(this,e)};var Updater={get:function(e,t){httpXDRequest({method:"GET",url:AppInfo.meta+"?"+(new Date).getTime(),onload:function(t){e(t.responseText)}},t)},parse:function(e,t){var n={version:Util.doRgx(/@version\s*(.+)/,e).$1,name:Util.doRgx(/@name\s*(.+)/,e).$1,history:Util.doRgx(/@description\s*(.+)/,e).$1};n.isNew=AppInfo.version<n.version;if(n.isNew===true){n.message=n.name+" has been updated to version "+n.version+"."}else{n.message="You have already the latest version of "+n.name+"."}t(n)},check:function(e){Updater.get(function(t){Updater.parse(t,function(t){Logger.debug("Updater.check( isNew:"+t.isNew+", bForce:"+e+" )");if(t.isNew===true||e===true){showVerInfoPopup({isnew:t.isNew,message:t.message,history:t.history,url:AppInfo.url})}})},e!==true)}};var Tooltips={Initialized:false,EditMode:false,Showing:false,timeout:null,saveAsPlugin:function(){Tooltips.EditMode=false;var e=Tooltips.getLocalizedResource();var t={},n="No data modified to save.";Util.each(e.content,function(e,n){if(n.edited===true){if(!Util.isSet(t[e]))t[e]={edited:true};Util.each(n,function(n,r){if(Util.isArray(r)&&r[2]){t[e][n]=r}})}});if(Util.length(t)>0){n='The plugin "User Tooltips" has been saved.';var r=Util.toJSON(t);Plugins.addNew({active:true,name:"User Tooltips",runat:Plugins.RUNAT_STARTUP,code:'MWAddon.Tooltips.addResourceContent("'+global.mw_locale+'",'+r+");"})}showHelpPopup({icon:"info",message:n+"<br>Tooltip Editor has been disabled."});Tooltips.$box.mouseleave(Tooltips.LeaveEvent)},getFromElement:function(e){var t=Tooltips.getLocalizedResource();if(e.attr("tooltip")){var n=e.attr("tooltip");var r=t.content[n];var i=r[e.attr("id")]||["Help",""];return{parent:r,title:String(i[0]),message:String(i[1])}}else{return false}},fixToPosition:function(e){var t=Tooltips.$box;var n=$(e).offset();var r={w:t.outerWidth(),h:t.outerHeight()};var i={x:$(unsafeWindow).scrollLeft()+$(unsafeWindow).width(),y:$(unsafeWindow).scrollTop()+$(unsafeWindow).height()};if(i.x<n.left+r.w){t.css({left:"",right:2})}else{t.css({left:n.left,right:""})}t.css("top",Math.max(n.top-r.h,0))},edit:function(e,t){if(!e||!t){return}var n=$(e.target),r;if(n.is("option")){n=$(e.target.parentNode)}var i=Tooltips.getLocalizedResourceContent(t.context);var r=i[t.id];if(!Util.isArray(r)||r.length<2){r=["Help",""]}var s=Tooltips.$box;var o=s.find("#save_tooltip");if(o.length>0){o.click()}s.hide().html(Base64.decode("PGRpdj48aW5wdXQgdHlwZT0idGV4dCIgc3R5bGU9IndpZHRoOiAyNzJweDsiIG9uZm9jdXM9ImE9dGhpcztzZXRUaW1lb3V0KGZ1"+"bmN0aW9uKCl7YS5zZWxlY3QoKTt9LDUpOyI+PGEgaWQ9InNhdmVfdG9vbHRpcCI+U2F2ZTwvYT48YSBpZD0iZmluaXNoX3Rvb2x0"+"aXAiPkZpbmlzaDwvYT48YSBpZD0iY2xvc2VfdG9vbHRpcCI+Q2xvc2U8L2E+PC9kaXY+PHRleHRhcmVhIHN0eWxlPSJ3aWR0aDog"+"Mzg2cHg7IGhlaWdodDogOTBweDsgIiBvbmZvY3VzPSJhPXRoaXM7c2V0VGltZW91dChmdW5jdGlvbigpe2Euc2VsZWN0KCk7fSw1"+"KTsiPjwvdGV4dGFyZWE+")).css({top:0,left:0}).find("a").button();var u=$("input",s);var a=$("textarea",s);u.val(r[0]);a.val(String(r[1]).replace(/<br>/g,"\n"));$("#save_tooltip",s).click(function(){var e=u.val()||"Help",n=(a.val()||"").replace(/\n/g,"<br>");if(e+n===r[0]+r[1]){return}if(Util.isString(n)&&n.length>0){i[t.id]=[e,n,true];i.edited=true}});$("#finish_tooltip",s).click(function(){s.hide();Tooltips.saveAsPlugin()});$("#close_tooltip",s).click(function(){s.hide()});s.show();u.focus()},hide:function(){if(Tooltips.EditMode===true){return}if(Tooltips.Showing===true){$(document).unbind("mousedown",Tooltips.hide);Tooltips.Showing=false}if(Tooltips.$box){if(Tooltips.timeout){clearTimeout(Tooltips.timeout);Tooltips.timeout=null}Tooltips.$box.hide()}},show:function(e,t){if(!e||!t){return}if(Tooltips.EditMode===true){Tooltips.edit(e,t);return}if(Tooltips.timeout){clearTimeout(Tooltips.timeout);Tooltips.timeout=null}var n=$(e.target),r;if(n.is("option")){n=$(e.target.parentNode)}var i=Tooltips.getLocalizedResourceContent(t.context);var r=i[t.id];if(!Util.isArray(r)){return}var s=Tooltips.$box.hide().empty().css({top:0,left:0});c$("div","class:title mwa_res_info_icon").text(r[0]).appendTo(s);c$("div").html(r[1]).appendTo(s);s.find("a").attr("target","_black");Tooltips.fixToPosition(n);Tooltips.timeout=setTimeout(function(){Tooltips.timeout=null;s.fadeIn();Tooltips.Showing=true;$(document).mousedown(Tooltips.hide)},2e3)},resourceExists:function(e){return Util.isSet(Tooltips._Resources[e])},getResource:function(e){var t=Tooltips._Resources[e];if(!(Util.isSet(t)&&Util.isSet(t.content))){return{content:null}}return t},getResourceContent:function(e,t){var n=Tooltips.getResource(e);if(n){return n.content[t]}return},each:function(e){Util.each(Tooltips._Resources,e)},toArray:function(){var e=new Object;Util.each(Tooltips._Resources,function(t,n){e[t]=n.name});return e},getLocalizedResource:function(){var e=UserConfig.main.get("toolTipLanguage");if(!Util.isSet(Tooltips._Resources[e])){e=global.mw_locale}return Tooltips.getResource(e)},getLocalizedResourceContent:function(e){var t=Tooltips.getLocalizedResource();if(t){return t.content[e]}return},addResource:function(e,t){if(!Util.isObject(t)||!(t.name&&t.description&&t.content)){return}var n=Tooltips._Resources[e];if(!Util.isSet(n)){n=Tooltips._Resources[e]=new Object}n.name=t.name;n.description=t.description;n.content=t.content;return n},addResourceContent:function(e,t){var n=Tooltips._Resources[e];if(!Util.isSet(n)||!Util.isSet(n.content)){n=Tooltips.addResource(e,Tooltips._Resources["en_US"]);n.name=e}Util.each(t,function(e,t){if(Util.isSet(n.content[e])){Util.merge(n.content[e],t)}else{n.content[e]=t}})},addResourceString:function(e,t,n,r,i){var s=Tooltips._Resources[e];if(Util.isSet(s)&&Util.isSet(s.content)&&r&&i){if(!Util.isSet(s.content[t])){s.content[t]=new Object}s.content[t][n]=[r,i]}},applyTo:function(e){if(UserConfig.main.toolTips!==true){return}var t=Tooltips.getLocalizedResourceContent(e);if(Tooltips.EditMode===true){if(!Util.isSet(t)){t=Tooltips.getLocalizedResource().content[e]={}}Util.each(t,function(n,r){if(e$("#"+e+" #"+n)===null){t[n]="UNUSED"}});Logger.debug("Editing tooltips for "+e+".");$("a, button, input, select, textarea, .checkbox","#"+e).each(function(t,n){if(n.id){$(n).tooltip({id:n.id,context:e})}});return}if(Util.isSet(t)){Logger.debug("Applying help tooltips to "+e+".");Util.each(t,function(t,n){if(Util.isArray(n)){var r=e$("#"+e+" #"+t);if(r){r.tooltip({id:t,context:e})}}})}},init:function(){if(Tooltips.Initialized===true){return}if(!Tooltips.$box){var e=c$("div").prependTo("body");c$("style").append(Base64.decode("I3Rvb2x0aXBfYm94IHsNCiAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgd2lkdGg6IGF1dG87DQogICAgei1pbmRleDogMTAw"+"MDsNCiAgICB0ZXh0LWFsaWduOiBsZWZ0Ow0KICAgIHBhZGRpbmc6IDAuM2VtIDAuOGVtOw0KICAgIG1heC13aWR0aDogNDAwcHg7"+"DQogICAgbWluLXdpZHRoOiAxMDBweDsNCiAgICBtaW4taGVpZ2h0OiAyMHB4Ow0KICAgIGJhY2tncm91bmQtY29sb3I6ICMxQTFB"+"MUE7DQogICAgZm9udC1zaXplOiA5MiU7DQogICAgLXdlYmtpdC1ib3gtc2hhZG93OiByZ2IoMTUzLCAxNTMsIDE1MykgMHB4IDBw"+"eCAxMnB4Ow0KICAgIC1tb3otYm94LXNoYWRvdzogcmdiKDE1MywgMTUzLCAxNTMpIDBweCAwcHggMTJweDsNCiAgICBib3gtc2hh"+"ZG93OiByZ2IoMTUzLCAxNTMsIDE1MykgMHB4IDBweCAxMnB4Ow0KICAgIC13ZWJraXQtYm9yZGVyLXJhZGl1czogMnB4Ow0KICAg"+"IC1tb3otYm9yZGVyLXJhZGl1czogMnB4Ow0KICAgIGJvcmRlci1yYWRpdXM6IDJweDsNCiAgICBib3JkZXI6IDFweCBzb2xpZCB3"+"aGl0ZTsNCiAgICBjb2xvcjogd2hpdGU7DQp9DQojdG9vbHRpcF9ib3g6aG92ZXIgew0KICAgIGJveC1zaGFkb3c6IHJnYigwLCAw"+"LCAwKSAwcHggMHB4IDEycHg7DQogICAgb3BhY2l0eTogMTsNCn0NCiN0b29sdGlwX2JveCAudGl0bGUgew0KICAgIHBhZGRpbmct"+"bGVmdDogMjJweCAhaW1wb3J0YW50Ow0KICAgIGJhY2tncm91bmQtc2l6ZTogMThweCAhaW1wb3J0YW50Ow0KICAgIC1tb3otYmFj"+"a2dyb3VuZC1zaXplOiAxOHB4ICFpbXBvcnRhbnQ7DQogICAgbWluLWhlaWdodDogMjJweCAhaW1wb3J0YW50Ow0KICAgIHdpZHRo"+"OiBhdXRvICFpbXBvcnRhbnQ7DQogICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgZm9udC1zdHlsZTogaXRhbGljOw0KICAgIGZv"+"bnQtc2l6ZTogMTVweDsNCn0NCiN0b29sdGlwX2JveCBpbnB1dCwgI3Rvb2x0aXBfYm94IHRleHRhcmVhIHsNCiAgICBmb250LXdl"+"aWdodDogYm9sZDsNCiAgICBjb2xvcjogI0QwRDBEMDsNCiAgICBib3JkZXI6IDFweCBzb2xpZCAjOTk5Ow0KICAgIGJhY2tncm91"+"bmQtY29sb3I6IGJsYWNrOw0KICAgIC1tb3otYm9yZGVyLXJhZGl1czogM3B4Ow0KICAgIGJvcmRlci1yYWRpdXM6IDNweDsNCiAg"+"ICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDNweDsNCiAgICBmb250LXNpemU6IDEzcHg7DQogICAgbGluZS1oZWlnaHQ6IDE0cHg7"+"DQogICAgbWluLWhlaWdodDogMTBweDsNCn0=")).appendTo(e);e.prependTo("body");Tooltips.$box=c$("div","id:tooltip_box").css("display","none").appendTo(e)}Tooltips.Initialized=true},_Resources:{en_US:{name:"English (United States)",description:'English Default Tooltip.<br><br>You can edit this Tooltip to create new ones in another language or to fix some typos.<br>Click on "Tooltip Editor" to change Tooltips to this mode.',content:{config_popup:{give_all_permissions:["Permissions","Click to give all required permissions for MWAddon."],main_debugMode:["General","You play, keep it off and your browser will be a bit faster."],main_opt_underboss:["MOD Settings","This will force enable the underboss features for the MOD"],main_opt_clanxp:["MOD Settings","This will collect all your Clan Progressive XP"],main_opt_clanxp_at:["MOD Settings","If you have enough stamina and energy to level this option will not collect the clan XP if you have a possibilty of leveling"],main_opt_JobRates:["Features","Modify the game job pages to show  energy/experince ratios that will help you to know what the best job to do if you've enabled the MWAddon Toolbar and you've access to the energy ratio needed to level up."],main_opt_CollectionPage:["Features","Add a anew event on all gift buttons to send collection items to use MultiGifter instead of goinf to the game gift page."],main_opt_ProfilePage:["Features",'Add new buttons to the user\'s profiles like "Promote", "Facebook Profile", etc...'],main_opt_FamilyPage:["Features","Add two new buttons in family pages which you can use to add all family members to your Battlefield blacklist or whitelist."],main_opt_HomePage:["Features","Modifys the front home page with extra options for easy access to player news updates."],main_autoheal:["Autoheal","When active will heal you automatically if your health goes below the specified amount.<br><br>This works only with page reload."],main_autohealwhen:["Autoheal","Set the health amount to activate auto-heal."],main_autohealin:["Autoheal","Select which City's currency you want to use to be healed."],main_shortserviceid:["Shortening",'Select the shortener service to use.<br><br>[JSON] tagged Services will work in Firefox and Chrome (1).<br><br><span style="font-size:10px">(1) Requires MWAddon Extended to be installed.</span>'],main_unshortserviceid:["Unshortening",'Select the unshortener service to use.<br><br>[JSON] tagged Services will work in Firefox and Chrome (1).<br><br><span style="font-size:10px">(1) Requires MWAddon Extended to be installed.</span>'],privacy:["Privacy","Select the privacy configuration you want to use when publishing."],main_publishPreview:["General","Use the Facebook connection used by the game to send publications.<br>It is very useful when you're getting error messages from facebook."],main_checkForUpdates:["General","MWAddon will search for new updates."],main_fbtimeout:["General","Set the timeout you want to wait until MWAddon cancel a Facebook request."],main_rqtimeout:["General","Set the timeout you want to wait until MWAddon cancel an internal request."],main_errorout:["General","Set the amount of bad request attempts."],main_jstimeout:["General","Set the timeout you want to wait until MWAddon cancel an external request."],main_opt_Toolbar:["Features","Show the MWAddon Toolbar which offers you a new look for your stats and a great bookmark feature!"],main_opt_ChromeBM:["Features",'If you\'re using Google Chrome:<br><br>Load your Browser bookmarks (where you add bookmarklets) and show them in your MWAddon Toolbar Bookmarks menu.<br><br><span style="font-size:8px">REQUIRES MWADDON TOOLBAR ENABLED.</span>'],main_opt_fanpage_id:["Features","Enter in the Facebook Group/Wall/Page id you wish to show news from :<br><br>Dont know how to get your groups facebook id? goto <a href='http://wallflux.com/facebook_id/' target='_blank'>http://wallflux.com/facebook_id/</a>"],main_opt_Community:["Features","Show a bar in your top screen scrolling the most recent news from MWAddon Fan Page."],main_opt_CommunityLimit:["Features","Set the limit of the facebook news that scrolls up top."],main_autodeposit_1_active:["Autodeposit","When your cash goes above the specified amount will be automatically deposited in your bank."],main_autodeposit_1_amount:["Autodeposit","Set the amount of cash you'll keep in hand before autodeposit it."],main_autodeposit_5_amount:["Autodeposit","Set the amount of cash you'll keep in hand before autodeposit it."],main_autodeposit_7_amount:["Autodeposit","Set the amount of cash you'll keep in hand before autodeposit it."],main_autodeposit_8_amount:["Autodeposit","Set the amount of cash you'll keep in hand before autodeposit it."],main_autodeposit_9_amount:["Autodeposit","Set the amount of cash you'll keep in hand before autodeposit it."],main_autodeposit_5_active:["Autodeposit","When your cash goes above the specified amount will be automatically deposited in your bank."],main_autodeposit_7_active:["Autodeposit","When your cash goes above the specified amount will be automatically deposited in your bank."],main_autodeposit_8_active:["Autodeposit","When your cash goes above the specified amount will be automatically deposited in your bank."],main_autodeposit_9_active:["Autodeposit","When your cash goes above the specified amount will be automatically deposited in your bank."],groups_list:["Groups","Remove the groups you want to not be showed in your group list when you're selecting them."],main_helpNotes:["General","Help Notes is a new menu which contains some articles and helps about MWAddon."]},battlefield_popup:{bfopt_traveltostartcity:["AutoTravel","Enable AutoTravel.<br><br>This option should be check if you want to use all other features of this same line."],bfopt_startcity:["AutoTravel","Select the Started city where will travel at first time."],bfopt_timercityactive:["AutoTravel","Enable AutoTravel Cowntdown."],bfopt_timercitymins:["AutoTravel",'Set a timer cowntdown to travel to a different city of the selected cities in "Travel To"'],bfopt_travelautomatic:["Autotravel","Check if you want to enable the Automatic mode.<br>Autotravel will travel to a different city if:<br>- You lost 5 times in a row.<br>- You lost 5 ices in a row.<br>- You fight 15 times with dead bodies.<br>- Your fightlist has no valid targets for 3 times.<br>- Your health fall down very quickly."],bfopt_healactive:["Autoheal","Autoheal feature.<br><br>This option should be checked if you want to use all other features of this same line."],bfopt_healcity:["Autoheal","Select the city you want to use for Autoheal.<br>The selected city's currency will be used."],bfopt_healbelow:["Autoheal","Autoheal will heal you when your health goes below the specified amount."],bfopt_healminsta:["Autoheal","Autoheal will not heal you if your stamina goes below the specified amount."],bfopt_healattacking:["Autoheal",'Check if you want to use Autoheal even when attacking the same player.<br>Disable it for "brute" mode.'],bfopt_healtimer:["Autoheal","Set the time you need to wait before you heal again after you've been healed.<br>Set It to heal you just after healing is available, saving time instead of trying to heal every few seconds.<br>Normally it's 60 seconds for all players, you may want to set it to 61 sec's."],bfopt_rapidfireactive:["Rapid Fire","Rapid Fire feature.<br>Power Attack must be checked to enable Rapid Fire.<br><br>This feature allow you to send multiples attacks in a short time giving you more chance to knock down your opponent."],bfopt_rapidfirehealth:["Rapid Fire","Select when you want to start Rapid Fire.<br>Normally you want to start Radpi Fire when your opponent has a low health, but you can set it at maximum for a fast stamina burn."],bfopt_rapidfireattacks:["Rapid Fire","This value will stop Rapid Fire, forcing to start a new one if the opponent was not iced.<br>Low values are recommended for slow connections."],bfopt_rapidburstattacks:["Rapid Fire","Burst attack allows multiple attacks sent at 1 time, you can send 1 - 4 attacks on the 1 attack request. If this slows down fighting response set this to a lower number."],bfopt_rapidfiretiming:["Rapid Fire","Set the Rapid Fire Timing.<br>Lowering this value attack faster. but will give you more errors.<br>A good success rate will give you more possibilites to get an ice. So, faster don't mean better."],bfopt_rapidfireautotiming:["Rapid Fire","Rapid Fire Autotiming.<br>This feature will ensure you to get a really good success ratio in your attacks, that means that you'll have more chances to ice the opponent.<br>Good success rates will also burn your stamina faster because it will need to send less requests.<br><br>"],bfopt_attackusemax:["Attacks","Check to use Maximum Attacks.<br>Maximum Attacks will be calculated after some attacks, then if the required attacks to ice your enemy are more than the specified value, the foe will be skipped."],bfopt_attackmax:["Attacks","Set the Maximum Attacks you would use on the same opponent.<br>Opponents that requires more than this value will be skipped."],bfopt_attackretries:["Attacks","Set the Maximum Retries you want to perform before skip an opponent when server return an invalid response."],bfopt_attackpwr:["Attacks","Check to enable Power Attack.<br>Use it if you want to use Rapid Fire."],bfopt_attacktonpc:["Attacks",'Check it if you want to fight non-player opponents added by Mafia Wars when you have an active mission availible.<br>You must also configure "Start City" to required city where they are hideing.'],bfopt_attackuseperfoe:["Attacks","Check to enable a limit of attacks per foe.<br>The difference between Maximum Attacks is that this will skip the foe just after you've reached the specified limit."],bfopt_attackperfoe:["Attacks","Set the limit of attacks per opponent."],bfopt_attkdelayusea:["Attacks","A delay between attacks to same player.<br>Uncheck it if you're going for ices."],bfopt_attkdelaya:["Attacks","Set the attack delay for same player."],bfopt_attkdelayuseb:["Attacks","A delay when you're ready to attack a new player.<br>This has low effect when going for ices, recommended to be checked."],bfopt_attkdelayb:["Attacks","Set the ready to attack delay.<br>Recomended to use at least 1 second."],bfopt_rediceactive:["Red ices","Keep attacking the player when you had lost.<br>The Red Ice term means that you can get an ice while losing the fights.<br>You will lose experience points, health and loot when attacking in this way."],bfopt_redicemaxattk:["Red ices",'Set maximum attacks to enable red ice.<br>It only works if "RedIce" is checked.'],bfopt_rediceafterwon:["Red ices",'Sometimes you could lose a fight after you have won, your opponent suddenly got stronger by a boost or leveling up.<br>Check this to allow Red Ice mode for the current opponent after winning at least the first attack.<br>"This function can work Individually".'],bfopt_attackrevenge:["Revenges","Take your revenge from thieves.<br>This feature allows you to AutoAttack the thief that has stolen your ice."],bfopt_attackrevengefilter:["Revenges",'Select the revenge filter.<br>- "Attack everyone": attack any thief without use any filter (skip options still used).<br>- "Attack any mafia/level": attack any thief using filters but not the mafia/level ones.<br>- "Use all filters": attack the thief only if it passed all filters.'],bfopt_timerrivalsactive:["Rivals","Enable to load your rivals list after some time and attack lived targets."],bfopt_timerrivalsmins:["Rivals","Set the minutes you want to wait before load your rival list again."],bfopt_levelrangeactive:["Filtering by level","Check to use a level range filter players."],bfopt_levelrangemin:["Filtering by level","Set the minimal level range."],bfopt_levelrangemax:["Filtering by level","Set the maximum level range."],bfopt_levelrangemethod:["Filtering by level","Select if players IN level range are Attacked or Skipped."],bfopt_mafiarangeactive:["Filtering by mafia","Check to use a mafia range to filter players."],bfopt_mafiarangemin:["Filtering by mafia","Set the minimal mafia range."],bfopt_mafiarangemax:["Filtering by mafia","Set the maximum mafia range."],bfopt_mafiarangemethod:["Filtering by mafia","Select if players IN mafia range are Attacked or Skipped."],bfopt_publishactive:["Autopublish",'Check to enable Autopublish feature.<br>It only works if you using the external Facebook api.<br>By default MWaddon uses this api, to make sure it\'senabled open Configuration and uncheck "Use Facebook user interface (UI)".'],bfopt_publishafter:["Autopublish","Select the amount of ices you need to archive before you publish it."],bfopt_publishto:["Autopublish","Set the group or page id where you want to Autopublish your ices or leave it blank for your wall.<br>When you're in the group/page, look in profile picture link, look for group_id=XXX, copy the XXX number. Add to box"],bfopt_usestampack:["PowerPack","Check to use a powerpack to refill your stamina."],bfopt_usestampackwhen:["PowerPack","Set to use StaminaPack only if your required experience points to level up are more than this."],bfopt_usehealpack:["PowerPack","Check to use a powerpack to refill your health."],bfopt_usehealpackwhen:["PowerPack","Set to use HealthPack only if your stamina points are more than this."],bfopt_maxloglength:["Log events","Select the maximum amount of log events that will be displayed."],bfopt_showsocialevents:["Log events","Check to enable showing social events in general log.<br>Uncheck it if you are going for long sessions to save Memory usage."],bfopt_showlootevents:["Log events","Check to enable showing loot events in general log.<br>Uncheck it if you are going for long sessions to save Memory usage."],bfopt_namefilteractive:["Filtering","Check to skip players by their names."],bfopt_namefilterexpr:["Filtering",'Used when "Skip Names" is checked.<br>Click "EDIT" to set the filter.<br>Put every name/characters you want to skip by lines.'],bfopt_badgefilteractive:["Filtering","Check to skip players by their badges."],bfopt_badgefilterexpr:["Filtering",'Click "EDIT" to set the filter.<br>Set here those badge tiers you want to SKIP by lines.'],bfopt_skipiced:["Filtering","Filter/Skip player by an iced state."],bfopt_skipicedbyme:["Filtering","Filter/Skip players that were iced by you."],bfopt_skipusehealth:["Skipping","Skip a player if the health percentage is more than specified."],bfopt_skiphealth:["Skipping","Select the maximum health percentage allowed before you will attack an opponent."],bfopt_skipusemincash:["Skipping","Skip players based the cash gained for each fight.<br>This feature ensures you gain at least the specified value as minimum per attack after a fight."],bfopt_skipbymincash:["Skipping","Set the minimal cash per fight you should collect."],bfopt_skipwrongcash:["Skipping","Skip the current opponent when cash gained is from a different city.<br>This works very well if you're going for x5 loot in Brazil."],bfopt_skipbossbots:["Skipping","Skip the boss bots that are located in the fight list."],bfopt_skipunderattk:["Skipping","Check if you want to skip a player that is under attack by other players."],bfopt_skipunderattkpct:["Skipping","Set the percentage of damage does by others to the current opponent needed for skip."],bfopt_stopbyices:["Autostop","Stop when you archive a specified amount of session ices."],bfopt_stopiceamount:["Autostop","Set the amount of session ices to archive to stop."],bfopt_stopkeepstaon:["Autostop","Check to stop when your stamina goes below a specified number."],bfopt_stopkeepsta:["Autostop","Set the amount of stamina you want to keep."],bfopt_stopkeepexpon:["Autostop","Stop before you raise a new level."],bfopt_stopkeepexp:["Autostop","Set the amount of experience that you want to keep before level up."],bfopt_stopbylevelup:["Autostop","Check to stop after you raise a new level.<br>It will stop and show the level up popup."],bfopt_stopresume:["Autoresume","Resume AutoFight when it was stopped under some circumstances."],bfopt_stopresumedelay:["Autoresume","Set the amount of minutes to wait before you resume Battlefield after it was stopped."],bfopt_timerfightactive:["Autopause","Pause Battlefield after a specified time."],bfopt_timerfightmins:["Autopause","Set the amount of time in minutes that you want to keep fighting before AutoFight is paused."],bfopt_timerfightresume:["Autopause","Set the amount of time in minutes to wait before you resume Battlefield when it was stopped by the Autopause feature."],bfopt_useblacklist:["Blacklist","Add players who defeat you to blacklist."],bfopt_blacklist:["Blacklist",'The balcklist is used to filter/skip players.<br>If you have an allience with a "player" add them here.<br>By default battlefield does not attack the Blacklist.'],bfopt_whitelistcountactive:["Whitelist","Check if you want to attack the whole whitelist X times.<br>After attack the whole whitelist X times, you'll continue with Random BF Attacks."],bfopt_whitelistcount:["Whitelist",'If "Attack whitelist only" is checked, set here the amount of times that you want to attack the whole whitelist.<br>It will not attack the same Target again until the full list has circulated, Either listed or Randomly.'],bfopt_randomizewhitelist:["Whitelist","Check to attack the whole whitelist in any random order."],bfopt_whitelist:["Whitelist",'You can use the "Attack witelist" button to attack these players, it works like Rival list but allows a greater amount of players.'],bfopt_frdclanlist:["Family",'The Friend Clan list is used to add friendly families.<br>If you just want to skip "freindly allies", add their families using the buttons on the right side.<br>Just add their profile link (located in the family profile page, copy and paste here), or the families IDs.'],bfopt_enmclanlist:["Family","The Enemy Clan list is used to add enemy families.<br>If you just want to FIGHT againts all members of a family, add the family using the buttons on the right side.<br>Just add their profile link (located in the family profile page, copy and paste here), or the families IDs.<br>Click Attack Families to attack them!."],bfopt_refreshon:["Refreshing","This feature will limit the specified amount of opponents loaded per fightlist.<br>A low value will ensures you that you attack more fresh players."],bfopt_skiphealed:["Skipping","It will save the health of your opponents when you start attacking them and will skip them if the health raises the starting amount at any point of the fight.<br><br>This mean the player was Healed."],bfopt_stopautomatic:["AutoStop","If your health fall down in a very short time, normally is because you was attacked by others.<br>Enable it to Stop AutoFight when this happens.<br>You can enable the AutoResume option (next to this one) if you want to resume the fight after the specified time."],bfopt_timerstartactive:["AutoStart","AutoFight will start after the specified time."],bfopt_timerstartmins:["AutoStart","Set the time to wait in minutes before start AutoFight."],bfopt_rediceepicbattle:["Red ices","Used on family Epic Battles to keep fighting against stronged opponents that beat you."],bfopt_epicbattle:["Epic Battle","Enable the Epic Battle Mode.<br><br>When you're in a family epic battle (or family war) the current mode used (random, whitelist or family) is temporary disabled.<br>Then Battlefield will concentre all attacks to the enemy family until the battle end."],bfopt_epicbattlerefresh:["Epic Battle","When you're in a family war, set here the time delay to refresh the battle."]},freegiftscenter_popup:{filter_text:["Searching",'Add a text word to search for.<br>You can add searches separated by the "|" character.<br>Example: join|build|mystery.'],category_select:["Searching","Select the category of the requests you want to show."],mss_action:["Collector","Select what action you want to perform for this gift."],mss_amount:["Collector","Set the amount of this gift you want to collect using the selected action."],friendlists:["Friend Lists",'Select a list to fill your Friends box.<br>Sender will send gifts to all friends showed in your friend box.<br>Use "EDIT" to add/remove friends.<br>Select Custom list and click "SAVE" to save a new friendlist.'],fgopt_sendback:["Send back","Check to send thanks gifts."],fgopt_sendinternally:["Send back","Check send thanks gifts only internally.<br>Faster."],fgopt_activefrmin:["Active Friends",'Set how many gifts should have sent your friends to be considerated as "Active friends".'],fgopt_excludedpattern:["Skipping",'Set the text pattern used to add gifts to your exclude list.<br>You can add different texts separated by "|" character.<br>Example: reached your limit|gold mastery']},remindereditor_popup:{reminder_name:["Reminder Editor","Set the reminder name."],reminder_description:["Reminder Editor","Set a description to remember the task."],reminder_checktype:["Reminder Editor","Select if you want to check every X hours, or after X time clock every day."],reminder_every:["Reminder Editor",'Set the time in hours or the time clock.<br>You can use floating numbers like "0.5" to use a half of a hour.'],reminder_gotocity:["Reminder Editor","Check if you want to go to a specified city."],reminder_gotocityid:["Reminder Editor","Select the city to travel."],reminder_gotopage:["Reminder Editor","Check if you want to go to a specified page."],reminder_gotopageurl:["Reminder Editor","Set the page url to go.<br>You can paste here the full url link copied from a link in Mafia Wars that directs you to the wanted page."],reminder_runplugin:["Reminder Editor","Check to execute a pre-installed plugin."],reminder_runpluginid:["Reminder Editor","Select the plugin to execute."],reminder_resetonload:["Reminder Editor","Check if this reminder will be reset after a page load."],reminder_resetonloadurl:["Reminder Editor",'Set the page that will reset this reminder.<br>Same as "Go To Page", you can paste here a full url link of a Mafia Wars page.'],reminder_jstest:["Reminder Editor","This code is executed before show the message to the user.<br>Return true will ask to the user to run it."],reminder_jsexec:["Reminder Editor",'This code is executed if the user has clicked "yes" after show the message.<br>You can use the MWAddon object to run MWAddon\'s tools.'],bookmark_gotopageurl:["Bookmarks",'Select a previous saved bookmark with your MWAddon Toolbar to set the "Go to page" field.'],bookmark_resetonloadurl:["Bookmarks",'Select a previous saved bookmark with your MWAddon Toolbar to set the "ResetOnLoad" field.']},pluginmanager_popup:{app_name:["Plugin Manager","Set the plugin name."],app_runat:["Plugin Manager",'Set how is this plgin executed.<br>"User Click" means it will appear in the user plugin menu and will be executed if the user click on it.<br>"Startup" means that this plugin will be executed once after MWAddon is initialized.'],app_src:["Plugin Manager",'Set the source of the code.<br>"Plain Text" means the text in the code box is used as the plugin code.<br>"Remote JS File" means the code should be loaded from a remote site, and the text in the code box contains the remote JS file url.'],app_code:["Plugin Manager","Paste the script code to be executed here.<br>You can use the MWAddon object to run MWAddon's tools."]},multigifter_popup:{mgopt_giftpages:["Pagination","Check to enable pagination for items."],mgopt_userpages:["Pagination","Check to enable pagination for users."],mgopt_hidezeroamount:["Item quantity","Check to hide items with zero quantity."],mgopt_delay:["Delay","Set the time in seconds to wait to send a new gift."],gift_page:["Pagination","Select the page you want to go to."],user_page:["Pagination","Select the page you want to go to."],gift_category:["Gift category","Select the item group category to show."],user_category:["User category","Select the user group category to show."],collection_filter_type:["Filtering","Select a collection type to filter."],collection_filter:["Filtering","Select a collection name to filter."],search_gift:["Searching",'Set a search to find gifts.<br>You can set here different searches separating every one by the "|" character.'],saved_search:["Searching","Use a previously saved search."],search_user:["Searching",'Set a search to find users.<br>You can set here different searches separating every one by the "|" character.'],attack_more_less:["Attack Filter","Select if an item Attack should be More or Less than the specified amount."],active_filter:["Active Loot","Check it to show all active loot.<br><br>Active loot is those that you use in your fights."],inactive_filter:["Help","Check it to show all inactive loot.<br><br>Inactive loot is those that you use don't in your fights."],defense_more_less:["Defense Filter","Select if an item Defense should be More or Less than the specified amount."],defense_amount:["Defense Filter","Set the Defense number to check."],attack_amount:["Attack Filter","Set the Attack number to check."],user_fav_clear:["Clearing","Clear your Favourites."],gift_fav_clear:["Clearing","Clear your Favourites."]},homefeedcenter_popup:{hfopt_filter:["Filtering",'Put a search text to filter your posts.<br>You can use "|" character to set diferent searches.<br>Example:Build|operation|mission.'],hfopt_grouping:["Filtering","Select a group of posts to show."],hfopt_dogotowar:["Helping","Check it to help in published wars.<br>Click to open more options."],hfopt_dogivesocialhelp:["Helping","Check it to help in published jobs.<br>Click to open selection menu."],hfopt_dosocialmissions:["Helping","Check it to join in operations.<br>Click to open more options."],hfopt_doclaimbonusandreward:["Helping","Check it to claim/collect all bonuses and rewards published.<br>Click to open selection Menu."],hfopt_docollectloot:["Helping","Check it to collect published loots (actually this option is unnecesary).<br>Click to open search filter. One entry per line."],hfopt_dopropertyhelp:["Helping","Check it to help sending property parts.<br>Click to open selection menu."],hfopt_dogetboost:["Helping","Check it to help in levelup bonuses."],hfopt_dosendenergyandphones:["Helping","Check it to help sending rob phones and energy packs."],hfopt_doacceptgiftevent:["Helping","Check it to help in gift events."],hfopt_dohitlistbounty:["Helping","Check it to help in hitlist bounties.<br>Click to open selection by filter options."],hfopt_dosecretstash:["Helping","Check it to help in secret stashes.<br>Click to open selection by filter options."],hfopt_docitycrew:["Helping","Check it to help your friends by joining their city crew.<br>Click to open selection by filter options."],skiptext_givesocialhelp:["Edit Skip Action","Set the text returned by the server after collect the selected feed when you reached the limit for this feed to skip it."],skiptext_claimbonusandreward:["Edit Skip Action","Set the text returned by the server after collect the selected feed when you reached the limit for this feed to skip it."],skiptext_propertyhelp:["Edit Skip Action","Set the text returned by the server after collect the selected feed when you reached the limit for this feed to skip it."],hfopt_autoclose:["General",'If checked, the help options you click "accept" the link will be autoclosed after a few seconds.'],hfopt_feedslimit:["General",'Set here the limit of posts you want to load when using "AutoHelp".'],hfopt_maxloglength:["General",'Set here the maximum number of log entries when using "AutoHelp".'],hfopt_helpdelay:["General","Set here how much time you want to wait between helping."],hfopt_refreshdelay:["General","Set here how much time you want to wait before refreshing your home posts."],hfopt_useuserfilter:["User Filter","Enable/disable user filter."],hfopt_userfilteraction:["User Filter","Select how you want to use the filter."],hfopt_userfilter:["Filters",'Click "EDIT" to add/remove friends to filter the feeds you want to see adn help in Home Feed Center.'],hfopt_waruseminattack:["War help","Check it if you want to collect only those items with more than the specified attack."],hfopt_warminattack:["War help","Set the minimum war reward item attack need to help in a war."],hfopt_warusemindefense:["War help","Check it if you want to collect only those items with more than the specified defense."],hfopt_warmindefense:["War help","Set the minimum war reward item defense need to help in a war."],hfopt_warusenamefilter:["War help","Check it to use war reward item's name to filter wars. If you check it, you should uncheck minimal attack/defense options."],hfopt_warnamefilter:["War help",'Add war reward item\'s names separated by commas or "|" character.<br>Example:Paraglider|Sharksaw|emu Or Paraglider,Sharksaw,Emu.'],warloot_data:["War Loot",'Secundary loot is used to filter those wars that you would like to help for your mafia but giving you no loot.<br><br>Click "TOGGLE" to enable/disable all war secundary loot.'],warlootlimited_data:["War Loot","It's your desired war loot.<br>You will help in wars for this loot (if enabled) until you've reached the 5/5 limit.<br>If you've reached to the 5/5 limit or you disables it, will check your secundary war loot to determinate if you should help or not."],warloot_name:["War Loot",'Set the name of the loot you want to collect.<br>(Asterisk) "*" means anything.'],warloot_att:["War Loot",'Set the minimal attack a loot should have to help in the war.<br>"0" means anything.'],warloot_def:["War Loot",'Set the minimal defense a loot should have to help in the war.<br>"0" means anything.'],warloot_enabled:["War Loot","Enable/Disable this loot."],hfopt_joinmission:["Operations","Select the slot type where you want to join."],hfopt_joinmissionafter:["Operations","If the previous slot type are not available, select a second slot type to join."],hfopt_maxfreeslots:["Operations","Select the maximum amount of free slots to join in an operation."],hfopt_misjobratio:["Operations","Set the job experiance ratio, event missions usually have greater than 2.5 job to experiance ratio."],hfopt_opusenamefilter:["Operations","Check to filter operations by name.<br>You will try to join only the operations that match the filter name."],hfopt_opnamefilter:["Operations",'Add operatons names separated by "|" character.<br>Example:<br>Fix The Tripple Crown|Steal Government Research'],hfopt_dtlootpriority:["Daily Take","Enter the EXACT name of the items you want ADDON to retrieve.<br>Put one item on each line in the order you want to retrieve them (the most important item first).<br>HINT: You can get the name of the item by hovering over it in the Daily Take window."],hfopt_dtcheckminatkdef:["Daily Take","Check to retrieve fight loot if there is nothing that is on your Priority List available.<br>You can specify a minimum attack and defense.<br>If there is nothing that meets your specifications, the daily take will be ignored."],hfopt_dtminattack:["Daily Take","Set the minimal attack value for the fight loot."],hfopt_dtmindefense:["Daily Take","Set the minimal defense value for the fight loot."],hfopt_dodailytake:["Helping","Check it to help in Daily Takes.<br>Click to open more options."],hfopt_fblistfilteron:["Filters",'Enable or Disable Facebook Friends list Filter.<br><br>Click "EDIT" to show a list of your Facebook friends list which you can select to filter the feeds you want to see adn help in Home Feed Center.'],hfopt_fblistfilter:["Filters",'Click "EDIT" to show a list of your Facebook friends list which you can select to filter the feeds you want to see adn help in Home Feed Center.'],hfopt_userfilteron:["Filters",'Enable or Disable Friends Filter.<br><br>Click "EDIT" to add/remove friends to filter the feeds you want to see adn help in Home Feed Center.'],hfopt_userwarfilteron:["Filters",'Enable or Disable War Friends Filter.These friends will be skipped in a war, they wont be hit.<br>Click "EDIT" to add/remove friends to filter the feeds you want to see adn help in Home Feed Center.'],hfopt_warlootsecundarylimit:["War Loot","Used to colelct all secundary llot one time.<br><br>Once the loot has been collected, it will turn in OFF."],action_skipif:["Skip Check","Used to Skip a feed when the result text from the server match the criteria."],action_fail:["Fail Check","Used to send a feed to the fail log when you was not able to collect it when the result text from the server match the criteria."]},bountyhunter_popup:{bhopt_userblackliston:["Blacklist","All bounties where you lost will be added in this list."],bhopt_clanblackliston:["Blacklist","You can skip bounties if the player is in one of your friendly families."],bhopt_userblacklist:["Blacklist","You can import your Battlefield Blacklist."],bhopt_clanblacklist:["Blacklist","You can import your Battlefield FriendClanlist."],bhopt_deposit:["AutoDeposit",'This option uses the General Config to deposit your cash.<br><br>Open "Configuration" to set it.'],bhopt_healon:["AutoHeal","If your heal goes below the specified amount, you will be healed."],bhopt_healmin:["AutoHeal","Set the how low should be your health before heal you."],bhopt_redbounty:["Blood Hunting","You will continue hitting a bounty even if you lost."],bhopt_delay:["Delay","The time to wait before reload the hitlist."]},operationscenter_popup:{select_fbgroups:["Publish","Select the group where you want to publish your operations."]},craftmanager_popup:{cmopt_opt_hidedisable:["General","This will only show the properties that you have "]}}}}};var FileSystem={fileReader:function(e,t){var n=e&&e[0];if(n){var r=new FileReader;r.onload=function(e){t(e&&e.target&&e.target.result);Logger.debug("fileReader completed, loaded "+n.size+"bytes.")};r.readAsText(n)}else{t(false)}},fileSave:function(e){try{var t=e;var n=new Blob([t],{type:"application/octet-stream"});var r=URL.createObjectURL(n);unsafeWindow.open(r,"_top")}catch(i){log("blob not supported");unsafeWindow.open(FileSystem.createObjectURL(e,"application/octet-stream"),"_top")}},createObjectURL:function(e,t){var n=unsafeWindow.BlobBuilder||unsafeWindow.WebKitBlobBuilder||unsafeWindow.MozBlobBuilder;var r=unsafeWindow.webkitURL||unsafeWindow.URL;if(n){var i=new n;i.append(e);if(FileSystem.lastObjectURL){FileSystem.revokeObjectURL(FileSystem.lastObjectURL)}return FileSystem.lastObjectURL=r.createObjectURL(i.getBlob(t))}},revokeObjectURL:function(e){var t=unsafeWindow.webkitURL||unsafeWindow.URL;if(t&&e){t.revokeObjectURL(e)}}};var Util={inArray:function(e,t){return e.indexOf(t)>-1},isSet:function(e){return typeof e!=="undefined"&&e!==null},isString:function(e){return typeof e==="string"},isBoolean:function(e){return typeof e==="boolean"},isFunc:function(e){return typeof e==="function"},isObject:function(e){if(typeof e==="object"&&e!==null){return/Object/.test(e.constructor)}else{return false}},isArray:function(e){if(Array.isArray){return Array.isArray(e)}else if(typeof e==="object"&&e!==null){return/Array/.test(e.constructor)}else{return false}},isDate:function(){if(typeof obj==="object"&&obj!==null){return/Date/.test(obj.constructor)}else{return false}},isNumber:function(e){return Math.round(e,0)===e},isSameString:function(e,t){if(Util.isString(e)&&Util.isString(t)){return e.toLowerCase()===t.toLowerCase()}else{return false}},toJSON:function(e,t,n){if(JSON&&JSON.stringify){e=JSON.stringify(e)}else if(typeof $!=="undefined"){e=$.toJSON(e)}if(!Util.isString(e)||e.length<1){return""}if(t===true){return"data:"+(n||"application/json")+";base64,"+Base64.encode(e)}return e},parseJSON:function(e){if(!Util.isString(e)){return new Object}if(/^data:\w+\/\w+;base64,/.test(e)){e=Base64.decode(e)}if(JSON&&JSON.parse){return JSON.parse(e)}else if(typeof $!=="undefined"){return $.parseJSON(e)}},length:function(e){var t=0;for(var n in e){if(typeof n!=="undefined"){t++}}return t},parseParam:function(e){try{e=e.replace(/\+/g,"").replace("%ITEM_ID%",'""').replace(/\\"/g,'"');return Util.parseJSON(e)}catch(t){Logger.error("parseParam: "+e);return{}}},padNum:function(e,t){if(!this.isNumber(e)){return e}if(!this.isNumber(t)){t=2}e=e.toString();while(t>e.length){e="0"+e}return e},formatNum:function(e){var t=/(\d+)(\d{3})/,n=String(e);while(t.test(n)){n=n.replace(t,"$1,$2")}return n},toDateString:function(e,t){var n="",r,i,s,o;if((e=parseInt(e))<0){e=0}if(!Util.isArray(t)||t.length!==3){t=["h ","m ","s"]}r=Math.floor(e/1e3);i=Math.floor(r/60);s=Math.floor(i/60);o=Math.floor(s/24);n+=o>0?o+"d ":"";n+=(s=s%24)>0?this.padNum(s)+(t[0]||":"):"";n+=((i=i%60)>0?this.padNum(i):"00")+(t[1]||":");n+=((r=r%60)>0?this.padNum(r):"00")+(t[2]||"");return n},toDelayString:function(e){var t="",n,r,i,s;if(e<0){e=0}n=Math.floor(e/1e3);r=Math.floor(n/60);i=Math.floor(r/60);s=Math.floor(i/24);t+=s>0?s+"d ":"";t+=(i=i%24)>0?Util.padNum(i)+"h : ":"";t+=(r=r%60)>0?Util.padNum(r)+"m : ":"";t+=(n=n%60)>0?Util.padNum(n)+"s : ":"";t+=((e=e%1e3)>0?Util.padNum(e,3):"000")+"ms";return t},uSplit:function(e){var t=new Object;if(!Util.isString(e)){return t}try{e=e.replace(/&/g,"&");e=e.replace(/"/g,'"');if(e.indexOf("?")!==-1){e=String(e.split("?")[1])}this.each(e.split("&"),function(e,n){if((e=n.split("=")).length===2){t[e[0]]=unescape(e[1])}})}catch(n){Logger.error(n)}return t},uParse:function(e){var t=/^(([^:\/?#]+):)(\/\/([^\/?#]*))([^?#]*)(\?([^#]*))?(#(.*))?/gi;var n=this.doRgx(t,e);return{href:e,protocol:n.$2,host:n.$4,path:n.$5,query:n.$7,hash:n.$9}},each:function(e,t){if(typeof $!=="undefined"){$.each(e,t)}else{for(var n in e){if(e.hasOwnProperty(n)){if(t(n,e[n])===false){break}}}}},doRgx:function(e,t){var n,r=new Object;if(Util.isSet(e)&&Util.isSet(t)){if(Util.isString(e)){e=new RegExp(e,"i")}if(e.exec&&(n=e.exec(t))){for(var i=0;i<n.length;i++){r["$"+i]=n[i]}}}return r},doRgxTest:function(e,t){if(Util.isSet(e)&&Util.isSet(t)){if(Util.isString(e)){e=new RegExp(e,"i")}if(e.test){return e.test(t)}}return false},htmlDecode:function(e){if(!Util.isString(e)){return""}try{return Util.trim(c$("textarea").html(e).val())}catch(t){Logger.error(t);return Util.trim(unescape(e))}},setColor:function(e,t,n){return"<span "+(n?'id="'+n+'" ':"")+'style="color:'+t+';">'+e+"</span>"},setAnchor:function(e,t){return' <a href="'+e+'" target="_black">'+t+"</a>"},rgbToHex:function(e){if(typeof e!=="string"||e.length<1){return e}if(e.charAt(0)!=="#"){var t,n;if(t=/rgba?\((\d+)[,\s]*(\d+)[,\s]*(\d+)\)/.exec(e)){n=1<<24|parseInt(t[1])<<16|parseInt(t[2])<<8|parseInt(t[3]);return"#"+n.toString(16).substr(1)}}while(e.length<7){e+="0"}return String(e).toLowerCase()},parseNum:function(e){if(!Util.isSet(e)){return 0}if(!Util.isString(e)){return parseInt(e)}var t=e.replace(/\D+/g,"");return t.length>0?parseInt(t):0},textNodes:function(e){return $(e).contents().filter(function(){return this.nodeType===3}).text()},render:function(e,t){Util.each(t,function(t,n){var r=new RegExp("\\$\\{"+t+"\\}","gi");e=e.replace(r,n)});return e},substr:function(e,t,n,r,i,s,o){if(!(Util.isString(e)&&Util.isString(t)&&Util.isString(n))){return e}r=Util.isNumber(r)?r:0;i=Util.isNumber(i)?i:0;var u,a=e.indexOf(t,s);if(a===-1){return false}if(o!==true){u=e.indexOf(n,a+Math.max(r,1))}else{u=e.lastIndexOf(n)}if(u===-1){return false}a+=r;u+=i;return e.substr(a,u-a)},toUrl:function(e){if(!e.attr){e=$(e)}var t=e.attr("href");if(Util.isString(t)&&/html_server/i.test(t)){return t}return Util.doRgx(/['"](remote[^'"]*)/,e.attr("onclick")).$1},trim:function(e){if(!Util.isString(e)){return""}if(String.trim){return String.trim(e)}else if(typeof $!=="undefined"){return $.trim(e)}else{return e.replace(/^\s*|\s*$/,"")}},toArray:function(e){if(Util.isArray(e)){return e}var t=new Array;Util.each(e,function(e,n){t.push(n)});return t},formatText:function(e){var t=String(e).replace(/_/g," ").split(/\s/g);var n="";for(var r=0;r<t.length;r++){n+=t[r].charAt(0).toUpperCase()+t[r].substr(1).toLowerCase()+" "}return n.replace(/^\s+|\s+$/,"")},pathValue:function(e,t){if(!Util.isString(t)||t.length<1){return null}if(t.indexOf(".")!==-1){var n=t.split(".");for(var r=0;r<n.length;r++){if(!Util.isSet(e[n[r]])){break}e=e[n[r]]}}else{e=e[t]}return e},getPicture:function(e){if(Util.isString(e)){var t=Util.doRgx(/url\(([^\)]+)\)/,e).$1;if(Util.isSet(t)){return String(t).replace(/["']/g,"")}}return""},parsePopup:function(e){try{var t=Util.doRgx(/\$\('#popup_fodder'\).html\("(.*?)"\);\s*?MW.Popup.show/i,e).$1;if(t){t=(new Function('return "'+t+'";'))();return h$(t)}}catch(n){Logger.error("parsePopup: "+n.message)}return $()},percent:function(e,t){e=parseInt(e);t=parseInt(t);if(isNaN(e)||isNaN(t)||e<1||t<1){return 0}else{return parseFloat(e*100/t)}},moveArrayItem:function(e,t,n){var r=t+n,i;if(t<0||t>=e.length){return t}if(r<0||r>=e.length||r===t){return t}i=e[r];e[r]=e[t];e[t]=i;return r},merge:function(e,t){if(!Util.isSet(t)){return e}var n=Util.isArray(e);Util.each(t,function(t,r){if(n){e.push(r)}else{e[t]=r}});return e},noop:function(){return false},clearRegExpMeta:function(e){var t=/([\^\$\.\+\?\*\{\}\(\)\\\/\|\[\]])/g;if(String(e).length>0&&t.test(e)){return String(e).replace(t,"\\$1")}else{return e}},clone:function(e){var t=new Object;Util.each(e,function(e,n){if(!Util.isFunc(n)){t[e]=n}});return t},until:function(e){if(!Util.isNumber(e.retries)){e.retries=50}if(!Util.isNumber(e.delay)){e.delay=100}var t=setInterval(function(){if(e.test()===true||e.retries<0){clearInterval(t);e.success()}e.retries--},e.delay)}};var MW={collectDailyFix:function(){var e=$("#df_joined_module .info_container .goToBtn").text();if(/collect/ig.test(e)){log("Going to collect daily fix");httpAjaxRequest({url:"remote/"+MW.getIntURL("DailyFix","collectRewards"),success:function(e){if(Util.isSet(e.data.popupUrl)){t(e.data.popupUrl)}}});function t(e){httpAjaxRequest({url:e,success:function(t){global.CollectDailyUrl=e;$html=$(t);var n=$html.find(".df_rwd_txt_container").text();unsafeWindow.ModuleUI.reloadModule("JobsModule");if(e$("#df_joined_module .info_container .goToBtn")){var r=0;var i=setInterval(function(){try{if(parseInt($("#df_timer").text())>1||r>200){clearInterval(i);$(".goToBtn").html('Auto Collected <a href="#" title="Lucifers MOD Auto collected" onclick="do_ajax(\'popup_fodder\',\''+e+"'); return false;\">View Rewards</a>");return}else{r++}}catch(t){r++}},150)}}})}}},collectClanXp:function(e,t){if($("#clan_xp_meter .complete").length>0){log("start checking collect xp");$("#clan_xp_meter").find("ul > li.box_middle").each(function(){if($(this).hasClass("complete")&&$(this).find("div.collect_button").css("display")!="none"){try{if(/Ices|Jobs|Property|Helper/.test($(this).find("h4").text())){var n=$(this).find("h4").text();var r=/"([a-zA-Z]+)_star"/.exec($(this).find(".mastery_wrapper").html())[1];var i=$("#clan_xp_meter dd:eq(0)").html();var s=new RegExp(".*?"+r+"_star.*?(\\d+)","g");var o=s.exec(i)[1];if(UserConfig.main.get("opt_clanxp_at")==true){if(o<e){$(this).find("div.collect_button > a:first").trigger("click");log("okay to collect wont level");t("Collected "+n+" Clan XP <span class='"+r+"_star'></span><span class='good'>"+o+"</span> xp ");return false}else{var u=(new Date).getTime();var a=50*1e3;global.ClanXpCheckTime=u+a;log("didnt collect "+n+" experiance as "+o+" would level us")}}else{$(this).find("div.collect_button > a:first").trigger("click");t("Collected "+n+" Clan XP <span class='"+r+"_star'></span><span class='good'>"+o+"</span> xp ");return false}}}catch(f){}}});log("finished checking collect xp")}},levelcollecting:false,levelCollect:function(e,t){if(MW.levelcollecting){return}else{var n=setTimeout(function(){MW.levelcollecting=false},3e4);MW.levelcollecting=true}UserConfig.main.set("savedlevel",e);UserConfig.main.save();httpAjaxRequest({url:"remote/html_server.php?xw_controller=levelUpBonus&xw_action=addBonusItem&xw_city=1&mwcom=1&no_load=1&xw_client_id=8",success:function(e){MW.levelcollecting=false;try{var r=JSON.stringify(e)}catch(i){log(r)}try{clearInterval(n)}catch(i){log(i)}try{var s=e.bonusName}catch(i){}if(typeof s!=="undefined"&&s.length>0)t("Auto Collected : "+Util.formatText(Util.trim(s)))}})},parseGiftData:function(e){var t={};try{t=(new Function(Util.substr(e,"var groups_levels","var friends_names")+"\n return {'gifts_daily_left':gifts_daily_left,"+"'groups_levels':groups_levels,'item_amounts':item_amounts,"+"'item_names':item_names,'item_imgs':item_imgs,"+"'item_def':item_def,'item_atk':item_atk};"))()}catch(n){Logger.error("parseGiftData: "+n.message)}return t},getGiftData:function(e,t){function s(){httpAjaxRequest({url:"remote/"+MW.getIntURL("gift"),timeout:12e4,message:"Loading friends...",success:function(t){if(!MW.update(t,false)){if(i>UserConfig.main.errorout){showBadResponse();e();return}else{i++;setTimeout(function(){s()},333)}}global.gift_key=Util.doRgx(/gift_key['"]\s*value=['"]([^'"]+)/,t).$1;e(MW.parseGiftData(t))}})}if(!Util.isFunc(e)){return}var n=unsafeWindow,r=$("#gift_send input#gift_key");if(r.length>0){global.gift_key=r.val()}if(t!==true&&global.gift_key){if(global.giftData){e(global.giftData);return}if(n.groups_levels&&n.item_amounts&&n.item_names&&n.item_imgs&&n.gifts_daily_left){e(global.giftData={gifts_daily_left:n.gifts_daily_left,groups_levels:n.groups_levels,item_amounts:n.item_amounts,item_names:n.item_names,item_imgs:n.item_imgs,item_def:n.item_def,item_atk:n.item_atk});return}}log("Loading friends");var i=0;s()},parseInventoryData:function(e){var t={};try{t=(new Function(Util.substr(e,"var Items","</script>")+"\n return Items;"))();return global.inventoryData={Item:unsafeWindow.Item,Items:t}}catch(n){Logger.error("parseInventoryData: "+n);return}},getInventoryData:function(e,t){function r(){httpAjaxRequest({url:"remote/"+MW.getIntURL("inventory"),timeout:3e5,message:"Loading inventory data...",success:function(t){if(!MW.update(t,false)){if(n>UserConfig.main.errorout){showBadResponse();e();return}else{n++;setTimeout(function(){r()},333)}}e(MW.parseInventoryData(t))}})}if(!Util.isFunc(e)){return}if(t!==true){if(global.inventoryData){e(global.inventoryData);return}if(unsafeWindow.Item&&unsafeWindow.Items){e(global.inventoryData={Item:unsafeWindow.Item,Items:unsafeWindow.Items});return}}var n=0;r()},getItemInfo:function(e,t){httpAjaxRequest({url:"remote/"+MW.getIntURL("item","get_item_data")+"&item_id="+e,success:function(e){var n,r,i;if(e.popup){i=c$("div").html(e.popup).find("#"+e.popup_id);n=Util.textNodes(i.find("h3"));r=Util.trim(i.find(".info dd:eq(1)").text());t(Util.trim(n),r)}else{t("Unknow")}}})},getSNAPIauth:function(){if(unsafeWindow&&unsafeWindow.SNAPI){return unsafeWindow.SNAPI.getAuthInformation()}else{var e=document.createElement("div");e.setAttribute("onclick","return SNAPI.getAuthInformation();");return e.onclick()}},decodeURL:function(e){try{var t,n=Base64.decode(e);if(t=/i:\d;s:\d+:"([^"]+)";i:\d;s:\d+:"([^"]+)";i:\d;s:\d+:"([^"]+)";/.exec(n)){return{next_controller:t[1],next_action:t[2],next_params:Util.uSplit("?"+t[3])}}return{}}catch(r){Logger.error("decodeURL: "+e);return{}}},getUserID:function(){if(unsafeWindow.User&&unsafeWindow.User.id){return unsafeWindow.User.id}var e=/'sf_xw_user_id':\s?'([^']+)'/.exec($("body").html());if(e){return unescape(e[1])}return null},update:function(e,t){try{var n=h$(e);var r=n.find("script:regex(text,local_xw_sig =|local_xw_sig=)");var i=n.find("script:regex(text,var user_fields)");if(r.length>0){r.appendTo("body")}if(i.length>0){if(t!==false){return MW.evaluateUserFields(i.text())}else{return true}i.appendTo("body")}}catch(s){Logger.error(s)}return true},currentCity:function(){try{var e=String($("#mw_city_wrapper").attr("class")).substring(7);if(parseInt(e)<1){throw Error("unexpected cityId value.")}return parseInt(e)}catch(t){Logger.error(t);return 1}},CurrentCityCash:0,currentPageName:function(){return $("#inner_page").attr("class")},getIntURL:function(e,t,n,r){var i=["xw_controller="+(e||"index"),"xw_action="+(t||"view"),"xw_city="+(Util.isSet(n)?n:MW.currentCity()),"xw_person="+(Util.isSet(r)?r:global.PERSON_ID),"cb="+MW.guid(),"tmp="+MW.guid()];return"html_server.php?"+i.join("&")},getExtURL:function(e,t,n){var r="http://apps.facebook.com/inthemafia/track.php?";if(typeof n!=="object"){n={}}r+="next_controller="+(e||"index");r+="&next_action="+(t||"view");Util.each(n,function(e,t){if(e=="next_params"){t=escape($.toJSON(t))}if(e!="next_controller"&&e!="next_action"){r+="&"+e+"="+t}});return r},getProfileLink:function(e){if(!Util.isSet(e)){e=global.USER_ID}if((e=String(e)).charAt(0)!=="p"){if(!/bot/.test(e))e="p|"+e}var t=Base64.encode(e);return"http://apps.facebook.com/inthemafia/profile.php?id="+escape('{"user":"'+t+'"}')},getFamilyLink:function(e){e=Base64.encode(String(e));return"http://apps.facebook.com/inthemafia/family.php?id="+escape('{"id":"'+e+'"}')},getGiftLink:function(e){try{if(typeof e!=="object"){throw ReferenceError("options is not defined.")}if(typeof e.success!=="function"){throw ReferenceError("callback is not defined.")}var t="";if(e.giftId)e.req_type="gift";switch(e.req_type){case"gift":t=MW.getIntURL("requests","friend_selector")+"&free_gift_id="+(e.giftId||0)+"&free_gift_cat="+(e.giftCat||1);break;case"simple":t=MW.getIntURL("requests","friend_selector_simple",e.city)+"&req_type="+e.req_type+"&req_name="+e.req_name;break;case"safehouse":t=MW.getIntURL("safehouse","safehouse_request");break;case"masteryboost":t=MW.getIntURL("requests","friend_selector")+"&req_controller=AsnSocialJob";break}if(t.length<1){Logger.error("getGiftLink: "+Util.toJSON(e));return}httpAjaxRequest({url:"remote/"+t+"&fbml_iframe=1",data:e.params,liteLoad:1,message:e.message,success:function(t){var n=Util.doRgx(/<fb:req-choice url='([^']+)'/,t).$1;var r=Util.doRgx(/MW.Request.setData\('([^']+)/,t).$1;if(n){e.success(n)}else if(r){e.success(MW.getExtURL("freegifts","accept_gift")+"&next_params="+escape(r))}else{e.success()}}})}catch(n){Logger.error(n)}},getGiftRequest:function(e,t,n,r){var i=MW.getIntURL("requests","friend_selector");e="&free_gift_id="+(e||0);t="&free_gift_cat="+(t||1);httpAjaxRequest({url:"remote/"+i+e+t+"&fbml_iframe=1",liteLoad:1,data:r,success:function(e){var t=h$(e).find("div.request_item_container");n(Util.doRgx(/MW.Request.setData\('([^']+)/,e).$1,Util.doRgx(/MW.Request.setMsg\('([^']+)/,e).$1,Util.doRgx(/MW.Request.setTitle\('([^']+)/,e).$1,Util.formatText(Util.trim($("div:first",t).text())),Util.doRgx(/mwfb\/graphics\/(.+)/,$("img",t).attr("src")).$1)}})},getCityRequest:function(e,t){httpAjaxRequest({url:"remote/"+MW.getIntURL("requests","pop_mfs")+"&request_id="+e,liteLoad:1,success:function(e){t(Util.doRgx(/MW.Request.setData\('([^']+)/,e).$1,Util.doRgx(/MW.Request.setMsg\('([^']+)/,e).$1,Util.doRgx(/MW.Request.setTitle\('([^']+)/,e).$1)}})},getGiftItemId:function(e,t,n){MW.getGiftRequest(e,t,function(e){var t;if(e){try{t=Util.parseJSON(unescape(e).replace(/\\"/g,'"')).item_id}catch(r){Logger.error("getItemId: "+r.message)}}n(t)})},deposit:function(e,t,n){var r="remote/";if(parseInt(t)<11){n("Can't deposit.");return}if(parseInt(e)===5){r+=MW.getIntURL("propertyV2","doaction",e);r+="&doaction=ActionBankDeposit&building_type=6&city="+e}else if(global.city(e).enabled===true){r+=MW.getIntURL("bank","deposit_all",e)+"&city="+global.city(e).name.toLowerCase().replace(/\s/g,"_")}else{n("Error depositing cash: "+Util.setColor("unknow city id.","red"));return}httpAjaxRequest({url:r+"&amount="+t,success:function(r){var i;try{i=r.deposit_message;if(typeof i=="undefined"){i=Util.parseJSON(r.data).success_message;if(/You cannot deposit that much/i.test(i)){if(UserConfig.main.autoDeposit&&UserConfig.main.autoDeposit[e]){UserConfig.main.autoDeposit[e].active=false}i="You can't deposit in this city, autodeposit has been disabled."}}}catch(s){i="Error depositing your cash of: "+t;Logger.error(s)}n(i,r)}})},evaluateUserFields:function(htmlText){var user_fields;try{if(Util.isSet(htmlText.user_fields)){user_fields=htmlText.user_fields}else{user_fields=Util.parseJSON(Util.trim(htmlText)).user_fields}}catch(err){var data=Util.substr(htmlText,"var user_fields","user_fields_update");if(data){eval(Util.substr(htmlText,"var user_fields","user_fields_update"))}}finally{return user_fields}},collectClanXP:function(e,t){httpAjaxRequest({url:"remote/"+MW.getIntURL("clan","collectProgress")+"&exp_type="+e,success:function(e){t&&t(e.msg)}})},collect:function(e,t,n){var r=MW.getIntURL("propertyV2","collectAll",e);if(Util.isFunc(t)){n=t}else if(!Util.isFunc(n)){return}if(isNaN(e=parseInt(e))){e=1}if(t&&t>2){r+="&filter_type="+t}r+="&js=1&version=v2";httpAjaxRequest({url:"remote/"+r,success:function(e){var t=Util.isString(e.data)?Util.parseJSON(e.data):e.data;var r=[];var i=0;if(t.totalcash&&t.totalcash!=0){r.push(t.totalcash)}if(t.stamina&&t.stamina>0){r.push('<span title="you collected '+t.stamina+' stamina" class="stats-icon stamina">'+t.stamina+"</span>")}if(t.energy&&t.energy>0){r.push('<span title="you collected '+t.energy+' energy" class="stats-icon energy">'+t.energy+"</span>")}if(t.health&&t.health>0){r.push('<span title="you collected '+t.health+' health" class="stats-icon health">'+t.health+"</span>")}if(t.rob_squad&&t.rob_squad>0){r.push('<span title="you collected '+t.rob_squad+' rob squads">'+t.rob_squad+' <img title="you collected '+t.rob_squad+' rob squads" src="https://zyngapv.hs.llnwd.net/e6/mwfb/graphics/PropertiesV2/assets/robsquad.png"/></span>')}if(t.chopShopItems&&t.chopShopItems.length>0){var s,o=t.chopShopItems.length,u;for(var s=0;s<o;s++){u=t.chopShopItems[s].text;if(u&&u!=""){r.push(u)}}}r=r.join(", ");if(r.length>0){r="Collected "+r;var a=0;if(Util.isSet(t.totalcash)&&t.totalcash>1){a=Util.parseNum(t.totalcash)}n({success:true,message:r,cash:a})}else{n({success:false,message:"Nothing collected from properties.",cash:0})}}})},usePack:function(e,t){var n="remote/"+MW.getIntURL("module","usePowerPack");httpAjaxRequest({url:n+(t=="hospital"?"&responseType=hospital&packType=1":""),success:function(n){var r=false;if(n&&n.user_fields){if(t=="hospital"){r={health:parseInt(n.user_fields.user_health),success:n.heal_success==0,timer:600};r.message="PowerPack:<br>Health boosted to "+r.health+"."}else{var i=false;Util.each(n.responses,function(e,t){if(t.func=="usedPower"&&t.data){i=t.data.success==0}});r={stamina:parseInt(n.user_fields.user_stamina),success:i,timer:28800};r.success=r.stamina>parseInt(n.user_fields.user_max_stamina);r.message="PowerPack:<br>Stamina boosted to "+r.stamina+"."}r.user_fields=n.user_fields}e&&e(r)}})},heal:function(e,t){var n="remote/"+MW.getIntURL("hospital","heal",e);if(e===1){n="remote/"+MW.getIntURL("hospital","heal")+"&xcity=1"}httpAjaxRequest({url:n,success:function(n){try{t(n.hospital_message)}catch(r){t("Error healing at "+(e===1?"New York":"Current city"))}}})},getWaitHealTimer:function(e){httpAjaxRequest({url:"remote/"+MW.getIntURL("hospital","view"),success:function(t){var n=0;var r=h$(t).find("script:regex(text,var PowerPacks)");if(r.length>0){n=Util.doRgx(/waitHealTimer:\s*(-?\d+),/i,r.text()).$1}e&&e(parseInt(n))}})},travel:function(destination,callback,selector,from){var cityRegex=/current_city_id'.\s*=\s*parseInt."(\d)".;/i;var message=selector?"Traveling to "+global.city(destination).name+"...":null;httpAjaxRequest({url:"remote/"+MW.getIntURL("travel","travel"),liteLoad:1,message:message,selector:selector,data:{destination:destination||1,from:from||"index",zone:1,nextParams:""},success:function(htmlText){var cityId=Util.doRgx(cityRegex,htmlText).$1||0;try{eval(Util.substr(String(htmlText),"var user_fields","user_fields_update"));MW.CurrentCityCash=parseInt(user_fields["user_cash"])}catch(e){MW.CurrentCityCash=0}Logger.debug("MW.CityCash =  "+MW.CurrentCityCash);Logger.debug("MW.travel: "+cityId);callback&&callback(parseInt(cityId),htmlText)}})},goPage:function(e,t,n){var r=Util.uSplit(e);httpAjaxRequest({url:e,liteLoad:1,message:"Loading page "+(r&&r.xw_controller||"..."),selector:t,success:n})},getMyMafia:function(e,t){if(!Util.isFunc(t)){return}if(!Util.isArray(e)){t&&t();return}httpAjaxRequest({url:"remote/"+MW.getIntURL("friendladder","friend_actions")+"&friends="+Util.toJSON(e),success:function(e){try{t(Util.parseJSON(e.data).json_data)}catch(n){Logger.error(n);t()}}})},guid:function(){var e="";for(var t=0;t<8;t++){e+=((1+Math.random())*65536|0).toString(16).substring(1)}return e}};var facebook={user:{first_name:"Unknow"},initialized:false,session:{access_token:null,uid:0},updateSession:function(e){var t=facebook;var n=false;var r=setTimeout(function(){n=true;Logger.error('Request to "updateSession" failed "timeout".');e({error:{message:"timeout"}})},Math.max(UserConfig.main.fbTimeout||0,30)*1e3);MWFB.getLoginStatus(function(i){var s=JSON.stringify(i);if(n!==false){return}clearTimeout(r);if(i&&i.authResponse){t.session.access_token=i.authResponse.accessToken;t.session.uid=i.authResponse.userID}else{try{var o=unsafeWindow.SNAPI.sessionInformation["1"].session;t.session.access_token=o.access_token;t.session.uid=o.user_id}catch(u){Logger.error("Unable to load facebook session.")}}e&&e(t.session)},true)},init:function(e){if(facebook.initialized){e&&e(true);return}try{facebook.updateSession(function(){if(facebook.session.access_token!==null){facebook.initialized=true}MWFB.api("/me",function(t){if(t&&t.first_name){facebook.user=t}else{try{facebook.user.first_name=unsafeWindow.SNAPI.getCurrentUserInfo().name}catch(n){Logger.error("Unable to load facebook user info.")}}e&&e(true)})})}catch(t){Logger.error("Unable to load facebook user info.");e&&e()}},api:function(e,t,n,r){if(facebook.session.access_token==null){n&&n({error:{message:"Invalid OAuth access token."}});return}var i=false,s="https://graph.facebook.com",o=parseInt((new Date).getTime()),u=setTimeout(function(){i=true;Logger.error('Request to "'+e+'" failed "timeout".');n({error:{message:"timeout"}})},Math.max(UserConfig.main.fbTimeout||0,30)*1e3);r=r||new Object;r["format"]="json";r["access_token"]=facebook.session.access_token;if(t==="stream.publish"){s="https://api.facebook.com/method"}Logger.debug(s+(t.charAt(0)==="/"?"":"/")+t+"?callback=?");$.ajax({url:s+(t.charAt(0)==="/"?"":"/")+t+"?callback=?",dataType:"jsonp",global:false,data:r,success:function(t){clearTimeout(u);if(i===false){var r=parseInt((new Date).getTime())-o;if(t.error_code){t.error={code:t.error_code,message:t.error_msg}}if(t&&t.error){Logger.error('Request to "'+e+'" failed "'+t.error.message+'".')}else{Logger.debug('Request to "'+e+'" completed. ('+Util.toDelayString(r)+").")}try{n(t)}catch(s){}}}})},getAppPermissions:function(e){facebook.api("getAppPermissions","me/permissions",e)},requestPermission:function(e,t){if(!Util.isFunc(t)){return}MWFB.login(function(e){if(e&&e.authResponse){t(true)}else{t(false)}},{scope:e})},needAppPermission:function(e,t){if(!Util.isFunc(t)){return}var n=false;facebook.getAppPermissions(function(r){var i=r&&r.data&&r.data[0]?r.data[0]:null;if(!i){facebook.requestPermission(e,t);return}Util.each(e.split(","),function(e,t){return(n=parseInt(i[t])!==1)===false});if(n){facebook.requestPermission(e,t)}else{t(true)}})},sendRequest:function(e,t,n){function s(n){if(!(n&&n.request)){t(false);return}var o="remote/"+MW.getIntURL("requests","postSend");o+="&rid="+n.request;o+="&data="+r;o+="&to="+e.to;httpAjaxRequest({url:o,success:function(e){if(e&&e.data&&e.data.reqsentmsg){t($(e.data.reqsentmsg).find("div:first").html())}else{t(false)}},error:function(e){if(i>0){i--;s(n)}else{t(e)}}})}var r=e.data;e.data="";e.message=String(e.message).replace(/&#39;/gi,"'");if(n!==true){facebook.updateSession(function(t){e["method"]="apprequests";if(Util.isArray(e.to)){e.to=Util.toJSON(e.to)}MWFB.ui(e,s)})}else{s({request:parseInt((new Date).getTime()/1e3)})}var i=3},streamPublish:function(e,t){function o(e){return e.replace(/&#39/gi,"'").replace(/&#34/gi,'"').replace(/\{\*actor\*\}/gi,facebook.user.first_name)}var n,r,i,s=e.actionLinks;if(!Util.isSet(s)&&e.actionText&&e.link){s=new Array({name:e.actionText,link:e.link})}if(e.caption){e.caption=o(e.caption)}if(e.description){e.description=o(e.description)}if(e.name){e.name=o(e.name)}if(!Util.isSet(e.target)||parseInt(e.target)===0){r=Util.toJSON(UserConfig.main.privacy)}else{n=e.target}var u={message:e.message,link:e.link,picture:e.picture,source:e.source,name:e.name,caption:e.caption,description:e.description,actions:s};if(Util.isSet(e.properties)){i={name:e.name,properties:e.properties};if(e.picture&&e.link){i["media"]=[{type:"image",src:e.picture,href:e.link}];i["href"]=e.link}}if(Util.isSet(s)){s=Util.toJSON(s)}facebook.needAppPermission("publish_stream",function(o){if(o!==true){return}if(UserConfig.main.publishPreview===true&&!Util.isSet(n)){if(Util.isSet(i)){MWFB.ui({method:"stream.publish",message:e.message,attachment:i,action_links:s},t)}else{u["method"]="feed";MWFB.ui(u,t)}}else{if(Util.isSet(i)){facebook.api("streamPublish","stream.publish",t,{message:e.message,target_id:e.target,privacy:r,attachment:Util.toJSON(i),action_links:s})}else{u["method"]="post";u["privacy"]=r;u["actions"]=s;facebook.api("streamPublish",(n?n:"me")+"/feed",t,u)}}})},notesCreate:function(e,t,n){facebook.needAppPermission("create_note",function(r){if(r===true){facebook.api("notesCreate","me/notes",n,{method:"post",subject:e,message:t})}})},notesGet:function(e,t){facebook.api("notesGet",(e||"me")+"/notes",t)},likeAdd:function(e,t){facebook.api("likeAdd",e+"/likes",t,{method:"post"})},commentAdd:function(e,t,n){var r={message:t};MWFB.api(e+"/comments","post",r,function(e){if(!e||e.error){console.log("ERROR")}n&&n(e)})},friendlist:function(e){facebook.api("friendlist","/me/friendlists",e)},friendlistGet:function(e,t){facebook.api("friendlistGet","/"+e+"/members",t)},friendlistCreate:function(e,t){facebook.api("friendlistCreate","/me/friendlists",t,{method:"post",name:e})},friendlistAdd:function(e,t,n){facebook.api("friendlistAdd","/"+e+"/members/"+t,n,{method:"post"})},getFeeds:function(e,t,n){n=n||{};n["date_format"]="U";facebook.api("getFeeds",e+"/feed",t,n)},getLinks:function(e,t,n){n=n||{};n["date_format"]="U";facebook.api("getLinks",e+"/links",t,n)},getAppUsers:function(e,t){facebook.api("getAppUsers","",t,{ids:e.join(","),fields:"id,installed,name"})},getUsers:function(e,t){facebook.api("getUsers","",t,{ids:e.join(","),fields:"id,first_name,name,picture,link"})},getAppFriends:function(e){var t="SELECT uid, name FROM user WHERE is_app_user AND uid IN (SELECT uid2 FROM friend WHERE uid1 = me())";facebook.updateSession(function(){facebook.api("getAppFriends","fql",function(t){e(t&&t.data)},{q:t})})},getGroups:function(e){facebook.needAppPermission("user_groups",function(t){var n={0:"My Wall"};if(!t){e(n);return}facebook.api("getGroups","me/groups",function(t){if(t&&t.data){Util.each(t.data,function(e,t){n[t.id]=t.name})}e(n)})})},getGroupsMembers:function(e,t){facebook.needAppPermission("user_groups",function(n){facebook.api("getGroupsMembers",e+"/members",t)})},queryWallFeeds:function(e,t){facebook.updateSession(function(n){if(n.error){t&&t(n);return}if(!Util.isNumber(e)){e=(new Date).getTime()}facebook.api("queryWallFeeds","fql",function(e){t(e&&e.data)},{q:"SELECT post_id, actor_id, target_id, permalink FROM stream "+'WHERE source_id = me() AND app_id= "10979261223" '+"AND created_time < "+e+" limit 150"})})},queryUsersFeed:function(e,t){facebook.updateSession(function(n){if(n.error){t&&t(n);return}facebook.api("queryUsersFeed","fql",function(e){t(e&&e.data)},{q:"SELECT post_id,source_id,created_time,permalink FROM stream "+"WHERE source_id IN ("+e.join(",")+') AND filter_key="'+AppInfo.id+'" '+"AND created_time>0 order by created_time desc limit 300"})})},queryFeed:function(e,t){var n="source_id IN (SELECT uid2 FROM friend WHERE uid1 = me()";if(!Util.isObject(t)){t={}}if(!Util.isNumber(t.limit)){t.limit=150}if(Util.isArray(t.flid)&&t.flid.length>0){n+=" AND uid2 IN (SELECT uid FROM friendlist_member WHERE flid IN ("+t.flid.join(",")+"))";if(Util.isArray(t.uid)&&t.uid.length>0){n+=" OR uid2 IN ("+t.uid.join(",")+")"}}else if(Util.isArray(t.uid)&&t.uid.length>0){n+=" AND uid2 IN ("+t.uid.join(",")+")"}MWFB.api("/me/home/?filter="+AppInfo.id,function(t){e(t&&t.data)})},removeFeed:function(e,t){facebook.api("removeFeed",e,t,{method:"delete"})}};var Resources={content:new Object,_getImageSize:function(e,t){var n=document.createElement("img");var r="if(!window.MWAddonImageSizes) window.MWAddonImageSizes={};\n"+"window.MWAddonImageSizes[this.id] = "+"{id:this.id,width:this.width,height:this.height};";n.setAttribute("id",e);n.setAttribute("onload",r);n.setAttribute("src",t)},add:function(e,t){if(Util.isString(e)&&Util.isString(t)){Resources.content[e]=t;if(t.indexOf("data:image")>-1){Resources._getImageSize(e,t)}}},get:function(e){return Resources.content[e]},getPicture:function(e,t){return c$(t||"div").addClass("mwa_res_"+e)},className:function(e){return"mwa_res_"+e},insertCSS:function(){if(e$("#mwaddon_resources")){$("#mwaddon_resources").remove()}var e="",t=Base64.decode("Lm13YV9yZXNfJHtpZH0gew0KYmFja2dyb3VuZDogdXJsKCR7c3JjfSkgdG9wIGxlZnQgbm8tcmVwZWF0"+"Ow0KYmFja2dyb3VuZC1zaXplOiAke3dpZHRofXB4ICR7aGVpZ2h0fXB4Ow0KYmFja2dyb3VuZC1wb3Np"+"dGlvbjogMHB4IDUwJTsNCm1pbi1oZWlnaHQ6ICR7aGVpZ2h0fXB4Ow0KbWluLXdpZHRoOiAke3dpZHRo"+"fXB4Ow0Kd2lkdGg6ICR7d2lkdGh9cHg7DQp9");try{Util.each(unsafeWindow.MWAddonImageSizes,function(n,r){try{r.src=Resources.content[n];e+=Util.render(t,r)+"\n"}catch(i){log(i.stack)}})}catch(n){log(n.stack)}e+=Base64.decode("LnVpLWJ1dHRvbi51aS1jb3JuZXItYWxsIHsNCi1tb3otYm9yZGVyLXJhZGl1czogM3B4Ow0KLXdlYmtpdC1ib3JkZXItcmFkaXVz"+"OiAzcHg7DQpib3JkZXItcmFkaXVzOiAzcHg7DQpmbG9hdDogbm9uZTsNCn0NCi51aS1idXR0b24gPiAudWktYnV0dG9uLXRleHQg"+"ew0KcGFkZGluZzogMXB4IDRweCAxcHg7DQpmb250LWZhbWlseTogIlRyZWJ1Y2hldCBNUyIsICJMdWNpZGEgR3JhbmRlIiwgVGFo"+"b21hLCBWZXJkYW5hLCBBcmlhbCwgc2Fucy1zZXJpZjsNCmZvbnQtc2l6ZTogMTBweDsNCnRleHQtdHJhbnNmb3JtOiB1cHBlcmNh"+"c2U7DQp9");e+=Base64.decode("I3VpLWRhdGVwaWNrZXItZGl2IHsNCmZvbnQtc2l6ZTogMTFweDsNCn0NCnRhYmxlLnVpLWRhdGVwaWNrZXItY2FsZW5kYXIgdGQg"+"ew0KZm9udC1zaXplOiAuOWVtOw0KfQ==");e+=Base64.decode("LyogUmVwbGFjZSBmb250IGZvciBwbGF5ZXIgcHJvZmlsZXMsIHBsYXllciB1cGRhdGVzLCBhbmQgZmlnaHQgcmVzdWx0cyAqLw0KZGl2LnRpdGxlLCBkaXYudXBkYXRlX3R4dCwgZGl2LmZpZ2h0cmVzX25hbWUsIGRpdi5yb2JfaXRlbV9saXN0X3VzZXIsIGRpdi5zdGF0c190aXRsZV90ZXh0IHsgZm9udC1mYW1pbHk6IFRhaG9tYSwgJ0FyaWFsIFVuaWNvZGUgTVMnLCBzYW5zc2VyaWYgICFpbXBvcnRhbnQ7IH0NCnNwYW4ubGV2ZWxzIHsgZm9udC1mYW1pbHk6IFRhaG9tYSwgJ0FyaWFsIFVuaWNvZGUgTVMnLCBzYW5zc2VyaWYgICFpbXBvcnRhbnQ7IH0NCiNmaWdodF93cmFwcGVyICB7IGZvbnQtZmFtaWx5OiBUYWhvbWEsICdBcmlhbCBVbmljb2RlIE1TJywgc2Fuc3NlcmlmICAhaW1wb3J0YW50OyB9DQoNCi8qIFJlcGxhY2UgZm9udCBmb3IgZmlnaHQgbGlzdCBhbmQgaGl0IGxpc3QgKi8NCnRhYmxlLmZpZ2h0X3RhYmxlLCAuaGl0bGlzdCB7IGZvbnQtZmFtaWx5OiBUYWhvbWEsICdBcmlhbCBVbmljb2RlIE1TJywgc2Fuc3NlcmlmICAhaW1wb3J0YW50OyB9DQoNCi8qIFJlcGxhY2UgZm9udCBmb3IgZ2lmdGluZyBtZXNzYWdlcyAqLw0KdGQubWVzc2FnZV9ib2R5IHsgZm9udC1mYW1pbHk6IFRhaG9tYSwgJ0FyaWFsIFVuaWNvZGUgTVMnLCBzYW5zc2VyaWYgICFpbXBvcnRhbnQ7IH0NCg0KLyogRmFtaWxpZXMgYmV0YSAqLw0KI21lbWJlcl9saXN0LCAjY2xhbl9tYWluIHsgZm9udC1mYW1pbHk6IFRhaG9tYSwgJ0FyaWFsIFVuaWNvZGUgTVMnLCBzYW5zc2VyaWYgICFpbXBvcnRhbnQ7IH0NCg0KLyogTWFmaWEgQWN0aXZpdHkgQm94ICovDQojU29jaWFsTW9kdWxlIHsgZm9udC1mYW1pbHk6IFRhaG9tYSwgJ0FyaWFsIFVuaWNvZGUgTVMnLCBzYW5zc2VyaWYgICFpbXBvcnRhbnQ7IH0NCg0KLyogV2FyIHBhZ2UgICovDQojZGVjbGFyZV93YXIgeyBmb250LWZhbWlseTogVGFob21hLCAnQXJpYWwgVW5pY29kZSBNUycsIHNhbnNzZXJpZiAgIWltcG9ydGFudDsgfQ0KDQovKiBSb2JiaW5nIGRldGFpbHMgKi8NCiNyb2Jfc2xvdDAsICNyb2Jfc2xvdDEsICNyb2Jfc2xvdDIsICNyb2Jfc2xvdDMsICNyb2Jfc2xvdDQsICNyb2Jfc2xvdDUsICNyb2Jfc2xvdDYsICNyb2Jfc2xvdDcsICNyb2Jfc2xvdDggeyBmb250LWZhbWlseTogVGFob21hLCAnQXJpYWwgVW5pY29kZSBNUycsIHNhbnNzZXJpZiAgIWltcG9ydGFudDsgfQ0KDQovKiBGaWdodCBSZXN1bHRzICovDQojbXdfbmV3X2FqYXgsIGEubXdfbmV3X2FqYXggeyBmb250LWZhbWlseTogVGFob21hLCAnQXJpYWwgVW5pY29kZSBNUycsIHNhbnNzZXJpZiAgIWltcG9ydGFudDsgfQ0KDQovKiBSZW1vdmUgRkIgYWR2ZXJ0aXNlbWVudHMgKi8NCmRpdiNzaWRlYmFyX2FkcywgZGl2LmVnb19jb2x1bW4geyBkaXNwbGF5OiBub25lICAhaW1wb3J0YW50OyB9");c$("style","id:mwaddon_resources").text(e).appendTo("head")},init:function(){Resources.add("isUnderboss","data:image/png;base64,"+"iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NDIxRDJERjdBQ0I4MTFFMDg1RTVFQTJDNUQ0NDMxRUMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NDIxRDJERjhBQ0I4MTFFMDg1RTVFQTJDNUQ0NDMxRUMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0MjFEMkRGNUFDQjgxMUUwODVFNUVBMkM1RDQ0MzFFQyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo0MjFEMkRGNkFDQjgxMUUwODVFNUVBMkM1RDQ0MzFFQyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pkod4HMAAAMVSURBVHjazJTLaxNRFMbPnVeaOE2aPtNKmqYNVVvBd7VqK4iChUIV0Y12qzvXuhDFjXQh/iGioODCVQVBFF+tQhVLaxs1NZk2k6aZJPO493hSp9CFiy5cOPCDuZdzztzvzP0OQ0T4V48E//BhW4gJ+HDCJjQiSqhEkVgj3FqgvCmp9r6NaCLChEJEiP5QSB8SArYjciZJLBWPt55PdLWdLpXKIdflOYqxCJQ3yY0xpg6nUp0XIpH644WCRV/HzoGB7Vev3zh3JdGpH5uaSks93frA40dnrt26PTiYz5uJ16+Nd9T2xVqxjVPpmiaPjo8ffDnzZQLfT93B0dG+97T/4MmjwzbiZbTMMdy1U588ckh/VjYOoFfej/cnkp8UhY1sKFT8YtFUT3Do3t3WwZZ2qiExuHm9tX9yctacmV7IH92Tj31Le3YuZ69mMlw8fZq1+3aogefPjarnoe63ZnlDZlsyoY6MX5T2rmZ/gV00IL9SFG8/lNyABg3RsBr8OFMVC4tVtntXIB6ulyPGCpdVFeo9Dp1Zg1vU06zsH7FxdY33NkdhTyKuaeaqgMkXpmStOc0d7WpwOe9BxRZyqlttqdMwauQ92bIQgiEWaGyERKGAsbwp0jWZSVlmw7092r5KBdV02lmXuS2osPqIDF/nKtDSrEIoJIFjC8gseWBVOHTEBAlj4HkC6gLQwRh2K3UBdvbUieC1gYPBdl2XlPnvNih0ViYhdMUD4NIN+rnkQkNYBmo27TMo0s0Swl1fZ3NieW6eP+QcZpRUUr4Uj0vxQpGkVJEC/txkaiytBVDPoGwJKorY1KiATf/WWBaZL7P8lePgrG3DZ+rXFKX8UBwXHbMgXE1T1JLFoebVdVswksARTJO7S1m+mDXEtKJ4xWoVi1YZp4XAWoEV3wG1S+vU8sbaWuSTyS7lUKxV7iLZukBASijmVvj39KL7hgq9oLhZokRU/WRrw0abvRn2bdOuqqyXZDXT4bBqY476MEf7Gd+Dlu/PLRld9Q2t+WvHN7a71akh/2UkCR/PZ8sDj/23w/G3AAMACG5vWMXOrosAAAAASUVORK5CYII=");Resources.add("health","data:image/png;base64,"+"iVBORw0KGgoAAAANSUhEUgAAAA8AAAASCAYAAACEnoQPAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2RpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpCQzdEMzFBODI4NUFFMTExODEzOTgyNjcyMjgyNkUzMiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowQTQ0ODU0OTVBMkYxMUUxOUY5MEE3N0M2RTgyNDY5NCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowQTQ0ODU0ODVBMkYxMUUxOUY5MEE3N0M2RTgyNDY5NCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpCRDdEMzFBODI4NUFFMTExODEzOTgyNjcyMjgyNkUzMiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpCQzdEMzFBODI4NUFFMTExODEzOTgyNjcyMjgyNkUzMiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pq6BCeoAAAI/SURBVHjaxFO/TxRREP7evr27zQFGEoQCNQZFMSHR2NhwhY2xkVoLGwsbGyPGxEQqC7UhwcTG0j/ARE00mhgLfzXHXTQScuAJeKcIUeA4z919+94bZxdQDjspnGSK+fXNvG/mCSLCv4qDLciWit2i2AuC3QXYm15Pz1GRca0qzzwxKhgG0ktAkEvv6LyR6TvQp2Y++0Fl5r6D9GWubaCAPfuKXu/0/OhtCsrjFE5PUO3RPZo6dnysKLuGPp09EzTyLylamCW/9JamTpymPLpfFNDTJvLY+aB9cOBk1/ApmOUGwAQKz4OpLSEsFpAdyAFCwoYhZIuHYPILKudGAYMLLkdyqW4P0fQ4TEOxyQNRnC+R3r8bqjLJL6LEb6QD8n04qTSsUYddwZz5+RJaDmUBbUFriasLXEOKDSEg0hLqfRVkVBLjYlmNKgvbG8/z8A52ACl3vbJJuBbq2wqCd/OQrRJ6yc65DPDUych+zQFd9SHbM6uZm4S0hpkPIVzmJJXEXznMzx0bUSji9xh2aR5Jh0C0QWPbmIQ4kGDyaIIznzmMUdKLdsT+pNi5ChB33qQ2QhI3K6x1O8RZQXJhJqBr/gf9xtTiAAOo5pFtgMSvvxv4H/Utsnj8+zwZ2w+/msEfBfVQzRkmw/CebdwhJgZ60SCc1aiPRdd13V5cZ0Twpfwhhc9VtjpXsr3upVSns004MVFAWDWVoKyvGkV3N1LZVLwGEE9yJNXhjMg2p18v29fc/Ty7K3+t77/9518CDADgzi7SyAuUMQAAAABJRU5ErkJggg==");Resources.add("defense","data:image/png;base64,"+"iVBORw0KGgoAAAANSUhEUgAAAA0AAAANCAYAAABy6+R8AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjVCRTY5QjlCNUEzQzExRTFCOUU3QTQ2NDRFNUYxMTM5IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjVCRTY5QjlDNUEzQzExRTFCOUU3QTQ2NDRFNUYxMTM5Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NUJFNjlCOTk1QTNDMTFFMUI5RTdBNDY0NEU1RjExMzkiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NUJFNjlCOUE1QTNDMTFFMUI5RTdBNDY0NEU1RjExMzkiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5aPwmlAAACAElEQVR42lSR32vTUBTHv7lJs5lsbUZ1c+2Gs0OYgjCxii/CBEHwqfogiAr6tgk++BfoHia4F7f/YP+CL4JvE3zaRCr0Qa1ga1ltXFuT0rRJc5N4bhx0PXDuyb3nfM6vSHt7+4V0Or3MOU8lk8llSZJWdF0D3cEYQ7frVAaDQTEMwy+u66LRaGxJ9Xr9QNf1jO/7cPoefvw+RM12YHsc8ykNZ9JJzJ+cgqqqoIT4Xi4/UXyfZz58LuHdfgm+JENWx0gpgMn4WuXgvofA8zA9MY5nhZvQTmgLiizLsLo99PpuDIhsURSSZbENqYMoCHBw2I7bTSQSUBRFBnljhwgQItG3RAFRGMbvgT8gy4eQqCSgQAACPqpCB+ERQoIEIPwiVlUJcpye1W63jdK3MpiSIFVGIf4fGlcYOp2OaM1SCChOpyZWxLAiK+NKPFcMicrUYkjQ3EwGtm0jCIIia7Vab8/OnoKhjcVb4m4f3HOHllS8X72wKCpZ+fzlXdYwzZ2/lmXdvXFtFDims1OTyC/l0Gw2t8Wi2KOHD6xf1erzc3MzuH/rOgJXQEM9bUzi6b3bME2z+LNS2Yq3iyPZ2Hj1OJvNvuGRZLz/+Altu4MrF5dw6fwi/pjmbq1Wu7O5+doagYSsrq4t5HK5F4ZhFOg/Gf1er0gzb6+vv9w5HvdPgAEAPisl80IKreIAAAAASUVORK5CYII=");Resources.add("energy","data:image/png;base64,"+"iVBORw0KGgoAAAANSUhEUgAAAAoAAAAQCAYAAAAvf+5AAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjlCMEJDNzJENUEzQzExRTE5QTIyQzI2NURDQjZDMjY5IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjlCMEJDNzJFNUEzQzExRTE5QTIyQzI2NURDQjZDMjY5Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OUIwQkM3MkI1QTNDMTFFMTlBMjJDMjY1RENCNkMyNjkiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OUIwQkM3MkM1QTNDMTFFMTlBMjJDMjY1RENCNkMyNjkiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5rkvBPAAABK0lEQVR42mL89+05AwgwfpinwfDryiUgk5UBHfz/t4gFymRi+Holh4HhHxZFf54ycGiXsDD8/8/A8H6TMMPP31EMjIzoJgGtYs/9L5v9GmQiI+Pr/UkM//4KYpr2a9l/7anrwWr+PdvGw3hv6lUGRiY5VFWM3xi4ZBMZ/n5/z8DIwsj4/0BQPMOfbwswrEUGzOx9LAyPjiYy4AdlDLEvulkYfv0tRhIsAuIoJH4xQ/LrPrBD/oN8DQLThISA5EMg5oEqymXIejcFpoMFrvfX32okRekMBR9noXgNbGIXjzSQfRuIOYE4haHsy1x0h0JM/PWvDkiyAXEiQw0wBLAAxv91bCpA+hLYpMafy3B5nYXh979qsEltv1fiDaT/ZUyBIHcSwojgIQAAAgwACeR/I9q8ELgAAAAASUVORK5CYII=");Resources.add("skill","data:image/png;base64,"+"iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAYAAAAxFw7TAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjI1NDQxRDA4NUQzQTExRTE5NDAyQTYyQzE2N0UyOUI3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjI1NDQxRDA5NUQzQTExRTE5NDAyQTYyQzE2N0UyOUI3Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MjU0NDFEMDY1RDNBMTFFMTk0MDJBNjJDMTY3RTI5QjciIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MjU0NDFEMDc1RDNBMTFFMTk0MDJBNjJDMTY3RTI5QjciLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7lt1UtAAAGVUlEQVR42jRVS3McVxU+99HvefTMaEYzIymSsUbIxg6SYoJtXNgBFklYpMpVVIoFKVbs2JAtWxYUS34BXrCBYkMSKgUOJFBFwFCUYyNLlmTJkvGMHjM9r37c27fv5c44maozNd23+zvf+c75zqBXn68DAAIJEgsQaJk0zGW6WByqkW8KOqe28cbrhdvfqRSrzm9273wctoJPZUEdFFShtyMOBweywyiiCgGWSAGQuXcbMEF0kIUXSN1Ypgtey2zNC87mrAfF2z9u/fQna+evfLmen1+8Vr31zSf/2XNVmR0u5c4pBSIhQEQiucxQpmkhIM1364gBR1eNS8bb3u2ijdwSGFkt2ubXb9d/+KO52oLXC7oQxRGY1IRW5eK5nb1HfXeBPJ1RNXHDvAqhGrA9caQIoqDLzNAM8kkVzxgWuIW60WgmIvabYulagfjF45MOxHE8jbPgTL9ArRX38vXgrD87Z883bOzl9btmFZdIhgSiJjLQG/Yte8NaLw2yoeMQp2hH3rwD+dkojCHTKZUu7ouPNPXvAW7YVk7LTccDPnCu2TfKDs4Fv00+iOgybmAfFw0f10oWhDND1XM97FXCcewM1AB0PkBIi6y/pJTAkxSG/TG1Zt1SplKvSuqzHi4gHxfGLdLE9KZ9w/Kx77TFkS68knPAq2IfeSfsmezyLjieDePReCq4m3Mh4xLCbMAq1TxxIV9FCMcdcXRawr5907rBaRXPWjXSKDGV+OOsb1FsFjySmyk0XPbswWFmtC3SY4EuVkHFrYCeEIXqYtysLfkszoqxGhgu8nxNRlBhMDyUAzSWA8AIuRSRCkZZEQRUVldXzUEQ8O2njyB+cwDxG0PY3t+CoNdLL61dlJCiMhDp6xmsavKeJgN9jUVbxoVCpEbeqTyhDrVcW9rV071gfuejBwtHWx0bvZXA1pdOYNKWl67XgP2emfGvw5cWv1GTlZV8INz0eZ8nho/K3gq9UKB9FSChmG1SWhYyrf7rg8dfOf77+DI/zWj6yhi6bwbQFme60wiM1zFUdgXAQ5QbdMJL5rLAa2+vHBsW7cY8HKRYj003O9amy4hCmbn13v6l9vvRBkowYc0RwDsSDtM2WNoPUlN85rTB/gGG8GcxuB0f4FRe/ETeO1t75/wuwhRrGRBtkoVyaA8rn93/bHnzdwfX6MgjSRIC6FJ7dKhnTkGmnT71eyphzzqAmSslCH/FwXEd6Hw4fCW/Yjy4cnOj56LiiO7CViozYTx6b/9qd3dctnJ8Oncnd05BnEXgfT8PIkqnGoKHYXBnBOxDBQ1lQTzSDuon3vYfjq7Wvla+Z2Bb0DN0DGf/DJZ27h5dYJEEhgiYhglk3wS1EoNgMaAYvQAkEuiuPn/sQtyMIUkSSGIGo7/0W5XX3NbcrdpDihHx/vdp96unO8GM4VFgIwymaUJGQNsuA4gEoOEXgAoQJiAIg/GYT/3NOYeoHRcOPzlZb1yv/one3990Nj86WEziBFKMAesQQq8MzRbrh6nQZX48hkzrl38rD5JnwMNwgq03UAxpmkLCGGzffbLgfY/m6XGnVwz+25+LUgYkxkAJhUx7VjIFtmQQ3ufQ/WOkgQBoXQHNHOAaCGvOjCU6OLCUg9xJ5zunvQJlXEAYxEastTCAgqRyWt4EwNCLwC7qOKc7zPUclrkGwxoET3c80xXwz0MmqckSgbBcUE+cDfMez7Qm0edC60h11slmQSUOuZsK/G8rMGdTyPS9KSvOps/FOoQUkFt3/o3mYJcs/nweFS57bXgkG+PDZDEVHGWpAJkp7Q7NVuopDDTnnoJkE2D8VwxJJ4OEv0iK9VHt5dI/ln4x90vjZesherW9XrY8WoQD1WJ/jl/rvz++eXIvWI36SVEoiSdbZtLjFyv2RbcJIOUWrOHMWumx/93837xvuXdhFW/yKBuir7c3bE0lR1ycKxhOLv/UOS+ei3PmsbnQ3RrMDp/FRcyQO/GyNEVcbDrD8oXiCa/zQ1qnB6MltjuS8TCLVKjzjSeAWK94U1/YWmrHNx23ZOXdBWj6IhJuURQKUimqk+oZxGKI+yPq0fAIdYIuH8ZDlsT6PNbEE73VGZ00VIfuIdKqARvyOAoZt9o46CGMKDEJQbr0yV9AppDKpBAoREIokQql97cG0WdCk8omWP8XYADK6msNeq+WeQAAAABJRU5ErkJggg==");Resources.add("stamina","data:image/png;base64,"+"iVBORw0KGgoAAAANSUhEUgAAAAwAAAAPCAYAAADQ4S5JAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkM0QjBBMkI3NUEzQzExRTE4QTUwQzJFODA2QkQzMEFCIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkM0QjBBMkI4NUEzQzExRTE4QTUwQzJFODA2QkQzMEFCIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QzRCMEEyQjU1QTNDMTFFMThBNTBDMkU4MDZCRDMwQUIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QzRCMEEyQjY1QTNDMTFFMThBNTBDMkU4MDZCRDMwQUIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5jlzOqAAAB6UlEQVR42oyQTWsTURSG3/sxmWnVdFotNDbKpBZBgjC6KIoIo6LiypUU3bT/wL/gP9C9C/UXBJduDBVc6MbgolTBkFZtzYd1Op0mmczce7wtfqAN6IXL5Z73POfjBYacdnHW7RRn7w/T+N+BL9MnXPtqUnXme+5/Ac71tGKV4cfPnKV/AhsXvHv2KQSDFYnBJtU+Hp1xm9e8asO8QwG7THfTZQkVAcfX67Vj6/VQFuBNLGbVDz+gPeBdoeS+L5QWBecudRnkJGD+/q6muyxkkfDzV3Tld4cRPFJAiJhBTKWgFsfkLao0571qbgK+WuOwD7FguVAK+NspL8ifpSAjCnWTwSonYJYCqwvPyXig6xzWyRTaQO4c3ZRjp7GAPkNGOhz0CfaqhQO3IySvRkEmnjuTgB/OkLwcBxtnvpQJ85wBd4sX2RvZZtBtAZCAPZf8MoP6EjxPUC2znzJj6ISBrzKQCUpfQcXWPv/J7KeaRk8jM/sYYeSGgpjRgDAFtsWfyQOGdAOIU/2Uf1XZk15EIMcoRqCY77vdFwJbPR1+09lj8XAnWrkzetClNXFO5oytZhpSbK8qbTPs1Dg2XyPcyrJL51ufGuxn2+dHpgNXiAUDecZznxiF/Q4afdJLXa0fXO58DnfzvgswAAkk2dpyhgZvAAAAAElFTkSuQmCC");Resources.add("attack","data:image/png;base64,"+"R0lGODlhEAAPAMZLAPKFAPOGAPu9VPq4VPB9AvesU/itU7JbAuWeTBwHAKBRAvenVHItAJNoLINGAL9YAGEvAfu4VbuMOu92AexuAGdNGu52AO92APqzU/B+Am4uAPCEALVOALxRAEQxDWVBGxQEABkEAHdUIfF+At5nAN9nAFU1FQsGAd+rSr6OPOCsS/qzVJ9RAeawS/q4VQwHASodBCUbBfitVJx5Lvy+VfinVAsBAKBSAhgEAJ15LyUaBb6NO/mzU389APisU/iyU3ZUIAsCAOmyTIE9ACseBRUFAPeyU1U2FfenU/q0VAAAAP///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////yH5BAEAAH8ALAAAAAAQAA8AAAeRgH+Cg38eHoSIfzAxgjM5gjpEiX8tFX8oKn8VQpN/EgIpNAI7AhKdIgMRLqkDQIgNRkmyK7IYPEkYPw2DJggGBb8+Mr8IR4gfSEgLSDXLSB+IDhsB1AEA1wAbDoMQCjcHGQThIwQHLAoQiD0XExbsFkOdDyQaFBQaJQ+TRRwJfx0d/iTgAKKTIAYMDCIKgWNSIAA7");Resources.add("none","data:image/png;base64,"+"R0lGODlhFgAWAFAAACH5BAAAAAAALAAAAAAWABYAhwAAAAAAMwAAZgAAmQAAzAAA/wArAAArMwArZgArmQArzAAr/wBVAABVMwBVZgBVmQBVzABV/wCAAACAMwCAZgCAmQCAzACA/wCqAACqMwCqZgCqmQCqzACq/wDVAADVMwDVZgDVmQDVzADV/wD/AAD/MwD/ZgD/mQD/zAD//zMAADMAMzMAZjMAmTMAzDMA/zMrADMrMzMrZjMrmTMrzDMr/zNVADNVMzNVZjNVmTNVzDNV/zOAADOAMzOAZjOAmTOAzDOA/zOqADOqMzOqZjOqmTOqzDOq/zPVADPVMzPVZjPVmTPVzDPV/zP/ADP/MzP/ZjP/mTP/zDP//2YAAGYAM2YAZmYAmWYAzGYA/2YrAGYrM2YrZmYrmWYrzGYr/2ZVAGZVM2ZVZmZVmWZVzGZV/2aAAGaAM2aAZmaAmWaAzGaA/2aqAGaqM2aqZmaqmWaqzGaq/2bVAGbVM2bVZmbVmWbVzGbV/2b/AGb/M2b/Zmb/mWb/zGb//5kAAJkAM5kAZpkAmZkAzJkA/5krAJkrM5krZpkrmZkrzJkr/5lVAJlVM5lVZplVmZlVzJlV/5mAAJmAM5mAZpmAmZmAzJmA/5mqAJmqM5mqZpmqmZmqzJmq/5nVAJnVM5nVZpnVmZnVzJnV/5n/AJn/M5n/Zpn/mZn/zJn//8wAAMwAM8wAZswAmcwAzMwA/8wrAMwrM8wrZswrmcwrzMwr/8xVAMxVM8xVZsxVmcxVzMxV/8yAAMyAM8yAZsyAmcyAzMyA/8yqAMyqM8yqZsyqmcyqzMyq/8zVAMzVM8zVZszVmczVzMzV/8z/AMz/M8z/Zsz/mcz/zMz///8AAP8AM/8AZv8Amf8AzP8A//8rAP8rM/8rZv8rmf8rzP8r//9VAP9VM/9VZv9Vmf9VzP9V//+AAP+AM/+AZv+Amf+AzP+A//+qAP+qM/+qZv+qmf+qzP+q///VAP/VM//VZv/Vmf/VzP/V////AP//M///Zv//mf//zP///wAAAAAAAAAAAAAAAAj/AAEIHAhgy6tX2bBle7WFoMOBixJKk+YqlTRUCgs9HPhtGipw9PaJ3FfPnLRs3zZ+k/ZtpMuR2VA6rDWt5UuXxLChqjlwy7RsN122m0ivo0YAK+m9mSQS2iRlIodJw8Z0H6qUMVhGE4hmHzEAmfZtmboCgJh9HbVomdZO2cB9bjX1muhun0Bl9KQVKiQNrlmzbhcpJCYyk9l90g72dZtJDFgVP7WMdIvDqqtXiwF0LZhQBYCRhrsm5utu61lGU905PmsXAGG9W7CdgwYgzbyTYPcZINjVZMNsqPZNkjSxlxio+xqjIbwvpueV7fKiChlUZLurAg/ERCWNenXE2WIMOiyELVW77/voYTw6sBZwc9XPnXy1sVC2i+DauXPXztbFbItsJJABtkjE3VTZ1CLgQzFssUghWjS0UUAAOw==");Resources.add("FBicon","data:image/png;base64,"+"iVBORw0KGgoAAAANSUhEUgAAABEAAAAQCAIAAAB/UwMIAAAAAXNSR0IArs4c6QAAAARnQU1BAACx"+"jwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAFiSURBVDhPjY3LSwJRGMW/vSAIggvBhdsggiAi"+"JscmJyaViw/KRQ97SC9tanykKbQppKI2rYogiAJJJDEqhYj+hZatWwXtW3fkwjBwN3P5wRm+8zsM"+"xePxqVTVJpDxKDSzX7z4sAlkxlh/Y5y/r9Q6IunK46x+x0ELTUmUI5EIIXKnb4uVtoh+1Pn8+v3+"+"+QNoocmxkqZphNis9+ZKLRFzgA1aaOOsoKoqITKHr6n8gwj/g3Hc5RW0saihKAoh0gfPSb1hZXr1"+"CvAN/0YLbTS8K8syIeZrT7HsvRVuW0ELbUTTJUmiYTWX2mtH12+tiBu00CD7/f7+JlloaZkbEb40"+"79CGJrd8Ph8hmN4MLV2L8I15hzYY3PB6vYQIZxvBhUsRvjHv0AYCax6PhyYShZ2z3nK1JcI35h0a"+"ZLfb3d9sn3TT5aYI35h3aMFY3uVyESJbf7FJgBlOp5McDofEDJtAxvsHgDGOxa6RkKIAAAAASUVO"+"RK5CYII=");Resources.add("LuckyStash","data:image/png;base64,"+"/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAAeAAD/4QMpaHR0cDov"+"L25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENl"+"aGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4"+"OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjAtYzA2MCA2MS4xMzQ3NzcsIDIwMTAvMDIvMTItMTc6"+"MzI6MDAgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5"+"OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHht"+"bG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6"+"Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUu"+"Y29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBo"+"b3Rvc2hvcCBDUzUgV2luZG93cyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0NDBEOEJDNjdD"+"QjYxMUUxQUQzNkIwMzVFMkVEQzIzQiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0NDBEOEJD"+"NzdDQjYxMUUxQUQzNkIwMzVFMkVEQzIzQiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0"+"YW5jZUlEPSJ4bXAuaWlkOjQ0MEQ4QkM0N0NCNjExRTFBRDM2QjAzNUUyRURDMjNCIiBzdFJlZjpk"+"b2N1bWVudElEPSJ4bXAuZGlkOjQ0MEQ4QkM1N0NCNjExRTFBRDM2QjAzNUUyRURDMjNCIi8+IDwv"+"cmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJy"+"Ij8+/+4ADkFkb2JlAGTAAAAAAf/bAIQAEAsLCwwLEAwMEBcPDQ8XGxQQEBQbHxcXFxcXHx4XGhoa"+"GhceHiMlJyUjHi8vMzMvL0BAQEBAQEBAQEBAQEBAQAERDw8RExEVEhIVFBEUERQaFBYWFBomGhoc"+"GhomMCMeHh4eIzArLicnJy4rNTUwMDU1QEA/QEBAQEBAQEBAQEBA/8AAEQgAEwAQAwEiAAIRAQMR"+"Af/EAHQAAAMBAAAAAAAAAAAAAAAAAAACBAYBAQEAAAAAAAAAAAAAAAAAAAMEEAACAAQDBQcFAAAA"+"AAAAAAABAgASAwQRMRRRoTITBSFBYXGBIkJicjNDBhEAAQIFBQEAAAAAAAAAAAAAAQIyABExwUJh"+"cRIiBAP/2gAMAwEAAhEDEQA/AG05urqpSWqXMzM01SQLKT7cfWE6x0kU+kXjCpTWVJ5EMxJX6inj"+"tim0Fql41eis63bFldSTMX4Wzy8oru7jpZtrhLytRNBQq3Kg4yzgiVpTUYFiMR8uyJvMUKRNPLqq"+"UlE12pFXpP05AKKewFBesZn+W1GlHJ1fE34uRsOPI1Hft3RlP1nizH25HfBBDIya8tvrALxczK2k"+"f//Z");Resources.add("LucifersDonate","data:image/png;base64,"+"iVBORw0KGgoAAAANSUhEUgAAAAwAAAASCAYAAABvqT8MAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEz"+"NDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlw"+"dGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVz"+"b3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTFGMDZGQkY1QTI5MTFFMUE4RjhCQ0VENzZERjlEMUYiIHht"+"cE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTFGMDZGQkU1QTI5MTFFMUE4RjhCQ0VENzZERjlEMUYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIj4gPHhtcE1NOkRl"+"cml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5kaWQ6QkE3RDMxQTgyODVBRTExMTgxMzk4MjY3MjI4MjZFMzIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QkE3RDMxQTgyODVBRTExMTgxMzk4MjY3MjI4MjZFMzIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5gbExpAAABY0lEQVR42mL8//8/AymAiYFEgKFhFYP9KiB+"+"h0sDI8xJS3/bCAKpNCAu12NOEuRmkDzLysDz/tDfyj3RrEc6UTTM/2IOUrwbiI0N2VIxTD3/a3ZFIs/JTriTfn7/nQbExrpMSQx//vxlOPFxmjIQCwHxLBDflLk4DaaZBUT8+P7LBUT/YfvLAOWHAqnV"+"BXJX0ic80rkHZL/XkQtDaPj+9ec9sAYuiAYTrvQOINVx6t3850C5/ErN26tR/FB3Vl4JyD4DxIKOUoUYfpDg1NyjKeDuivDDj9+CQGwCxHt23Oti+At0NzJ+9fWuMVBZA9yGgj0ioLCtmODyphPIVoIF"+"L7ItQDlGhA0/f58F4o7MrfxpQIl7QHYnEINoBihejRJKv378AQmArJ2ZvJZ7JpoXQAFSgRHTscvZ06CaQEEKikiQIWeBeNbiyJ/v4dpBGpBxxEKmVUD8H10chhnpn7wJAYAAAwBWe9R7tV4r9wAAAABJ"+"RU5ErkJggg==");Resources.add("LucifersIcon","data:image/png;base64,"+"iVBORw0KGgoAAAANSUhEUgAAABEAAAAVCAYAAACg/AXsAAAABGdBTUEAALGPC/xhBQAAAAlwSFlz"+"AAAewAAAHsABES62twAAAAd0SU1FB9sJHAY4Cycy1dsAAAL6SURBVDhPjVQ7iBNRFD3zycxkfpl8"+"Nplkd5NVlFXRQlQWBEG0EQRRQSy0EawUS8HGSlBEKwsLW0vBQm1EsBIrEUGwEBFBkRX3l91sVk12"+"rmdm3DUxEb3weN/7O/fcp4z6vuidLjKrXZiKAlMUaFCgIkpmQSwC4d0qN12uuzxZ4YhUFW3TgGJ7"+"ruxbauFVrYYlzqqmxjpUoiINrkm8WttFEiGTtTD1dQbPPC91s7uQl2OeL7aux47/PXRNTuSLsjnI"+"JW/pFnixtIhxutlXqyKvG+vehy3MjIEtlRBm1MW7zmryJDECbh4w5/rMLPaWAhR1faghXc9gcz7A"+"VHsZT1TitdzqMcLlh2YTDSq/bLZwuFxGoPVHpBCrKZ63V9owuhG+LDT7HP3GIGvJawINTZPzY2Pi"+"q1p6p0IOjDcExOye4wj8FIue0Q/k0VwgtwMveXChTkUaPDg2nuxvEMhdQTAM+MFqfHI8qfn0SMU7"+"k1sZAaRk2fLQpXHT+j8jquuIGKaU6mkE+0fr8tYyBcOjSEv8p0StZdwtlXBxdja52tlcwH3XBQj+"+"32QgvNPbthMLVYTecyMjMmszNdOUc5smxTeGErIfE4u9tIZ6lWsB+d+TRpAbqEyajqbpaIRVhNUq"+"btkOT9Iu2aHomKOPU+yVNTns5LAxDDFRG4Vp/OZSXzqhbcvVPL2xP97HlQhDgszZsuQk+VEjBf7g"+"yCCw0+02vnYEj1wPh7I2MD2Ng46V0Hwxo+MzQV4XtkosapZUn2QqvfLY1OAuLOCtdJLjp81FVH4I"+"mvxzemX3SBkOGxIbiH5oGesh+llbrhuGbAsrctNNQb5cKEqhWJD7TCsXE+4X5SdYtUapLOoMOVE3"+"rcRB6Lk4E63iiufjzfQXzCsRzpYr+PitjTk23HEjg8sEuhHkkvd2RsP8ynJSBtlTKiL83kGLPp4z"+"7+/zc8mjDI1d4l9zrVBEdy4lHlwHR/hxxp/IO13DG6YdSxKe4TFMVR1AvlQJh/50hstuV8kh6v4E"+"ydZiQzbEcwMAAAAASUVORK5CYII=");Resources.add("script_scroll","data:image/jpg;base64,"+"/9j/4AAQSkZJRgABAQEAYABgAAD/4QBaRXhpZgAATU0AKgAAAAgABQMBAAUAAAABAAAASgMDAAEA"+"AAABAAAAAFEQAAEAAAABAQAAAFERAAQAAAABAAAOw1ESAAQAAAABAAAOwwAAAAAAAYagAACxj//b"+"AEMAAgEBAgEBAgICAgICAgIDBQMDAwMDBgQEAwUHBgcHBwYHBwgJCwkICAoIBwcKDQoKCwwMDAwH"+"CQ4PDQwOCwwMDP/bAEMBAgICAwMDBgMDBgwIBwgMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwM"+"DAwMDAwMDAwMDAwMDAwMDAwMDAwMDP/AABEIABgAEQMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAA"+"AAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEU"+"MoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2Rl"+"ZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK"+"0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUG"+"BwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS"+"8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4"+"eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri"+"4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APzd/wCCMv8AwRa8Y/8ABVT4pm4la78OfC/Q"+"bhV1rXfKy9w3BNpa54aYr95jlYgQzZJVG9V/4OY/2Ov2dP2Gfjt8NvAfwU0fVdC8U2mgyT+L7V5L"+"iWxkRmjFlPHJMSXmcLc+aUYp8sfRtwr9Jf8Aghn+3Jpvxd/Yh0vSPhYtzceIfCmh6b4Z1bwPHN5Q"+"0i6jURjUVwMR211IjyyXKKdr3EiPlxGT6d/wXQ/Ya+FnxS/4JZeMNe+MPiKLTPFPgW3l13w34jkG"+"06VfvGqjTLdWJd7W6lTYISeWYOqqyZAB/KzRRRQB9/f8EFP2/fhF/wAE8viF8QvF/jq2urPx3c2F"+"pb+E9c/s+XUILCDdMNQt/JjYZlnVrcKzALtilUyRbwW8+/4K7f8ABYHx5/wVb+NZ1LVTc+H/AIe6"+"JO58N+FkuPMisVI2m4nYACW6dfvPgBR8qALnJRQB8hUUUUAf/9k=");Resources.add("lucifers_arrow","data:image/png;base64,"+"iVBORw0KGgoAAAANSUhEUgAAABgAAAAfCAYAAAD9cg1AAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAADF0lEQVRIS7VWXUhTYRh+vvM3p+hGY3UTdBWIV+VNGGldFJZQEeFFBF1VF10EFhGBxC6CTAqJoOwyi6AfoQvph5JCLBGcJRXRD5MUEoTq6Jzbzs45X+87MdR23BbbB+/G4Xzv+7zv8zzft4nEt1ZZWaFDojTLdYFf5jy+jE9g2/5RiFIDcJtCEYBfw5O+ESil6Xt5FekSH5aD4JpweQAW4SThlGWCpfOUFaDsEwjSuqwTkJ/+D0BQa8JQIFRq0XMJuK5TPAAXzdgZPO2PYWpqBkL3JkFKtziA7AESLrq6P2LPoShOtI8hbibAXOdaPGnBGvBmhHR0dI2h4/o4QqEAHj1OoLdv0oMkCUUohQEIlfqokrh0fhiRrhgUvRpJS2BXYw32Nm9YRQY1P4DQqHM3g5NtQ2i/EkN1IEjiKWhpqsH9m/UIrfOD/Z57ZTXQiVeD3tP3ihCqgfisjbZIFN13fiAQDEIlHVp2hHDtwmYEw0HItJozF6CaQoOY+1QnK/1qzi4Un8DLgRkcOB5HKByGoWsI1jjo6XSxsdYHmYTnNa/oAm+i8xDmO8iqCtqYY0ymfiYBXO0J4cGz9dAMjYRzcXDnBE4d+YlKP8iyucnRiZCBUQH1zDFENCrENyyDLA2Hfjz8NGlDfZI8n8LQWxcWVRyM+jCfkGjYlIKmAY7zby47enxKg3r6KCIq0cjFGGRl2JTMm5u3pzE9nUT/a5t0sPB8UMPvaQdNW2kDvV+Zz67+PknnwKbCXGS1SFnAHFF18ayF1t2zME06wYqJG70S9x5ScWqMAZbVoGeH6FNs+shGHpA0gczOAZ3nHBzeZ0OSddcGLNTWLeSzFktr8DPbWcReQfo9RM4lH4tnxoFbd4HGBmBLPZBM/WsSg/YNjxgQn18UB8CgrJmPxOfOrYy3i0aiBpS/3DGHBUaaisZJk2TaOydb16b7iC2WDeqmmFjUziuH9aDbesFFmTwC5zPAau8LdlHRIKyPRRQtWpRtVeqQZFOlnPTw/9SCTnLR9PDtQVb+8NUiF5HlCjnJxYDwxfw+Cly+DfwBhpy/NnSXx8IAAAAASUVORK5CYII=");Resources.add("switchb","data:image/png;base64,"+"iVBORw0KGgoAAAANSUhEUgAAABMAAAARCAIAAACw+gCQAAAABmJLR0QA/wD/AP+gvaeTAAAACXBI"+"WXMAAA7EAAAOxAGVKw4bAAACZElEQVQokZ2Ty04TYRTHz1yZztDiML0MpZSCKQiiomhiFEwQFzyB"+"Ji7cqIkv4TOYmBg18fIELiQhcadB3BgklYtQLJcCxQFabOfWmflm5nNBRBhdGP6rf3LOL+eWQwDI"+"cCyRx8MAgD5wXXcehjO9h2Pa2rf18ZcERXu2ifQq9tx/k9X8FN/Wfe/+iG1jAKBp4vUrr7UzzYRF"+"w7B1Vde3VlCtfJBPATTuO6NUYMT4fNE5399p6C5BQC637Kx+kdraI2KTnIpbjIhMw6trwTmZSDSc"+"OX3r5rXyjsFx4NjIRUj5USkb0CineCl5aXAgOjBCcUKQbOq7mu3pVPdMmsYvno+zDHiOY24ulaYn"+"5/OKkEiyETl9qlvoOBskG5JdcqLZsdGH99PqyszTJ2MIIQColwracm591+IlOZ3NhtK9QZIMxzie"+"d7G/WthQxp+VJ98YxYX9kL40tb1rhqSomEwxsUxwt46p1VQVub5jagCgzU1ocxPNN+5apUVz4ZML"+"JGIFhibd38X+kOZGvricBYaLCFQ1fcZenwUAUmzlxVY6lonKUsXysa1Z28Vgt/bmwtrsjLKjCFKE"+"SpykpDYAcBEafXCbbE6nhgYrwBQLRau0FLynZ6oWcOFYU0XVIzERA4NMg2zpYfsvtl++sKphXmAX"+"345ZuXfg2kdI8F1P/6nu1rhwqKYZEOJIjHy+hb8ytGIQLSfYr48eu1t5rzQfrAkAgOq+tlevVAlT"+"w67je8hriIvDw5imdEx2XB9UPs9iD4G6DQDE0S/DAD4QBLAhoDnwXSJ1DuQ+OCxlDn//CED9TWL4"+"L5G/AFujGupR8ubfAAAAAElFTkSuQmCC");Resources.add("toolbox","data:image/png;base64,"+"iVBORw0KGgoAAAANSUhEUgAAABoAAAASCAYAAABFGc6jAAAAAXNSR0IArs4c6QAAAARnQU1BAACx"+"jwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAATKSURBVEhLnZVZbFRlFMd/986dmc5Mp6XtTCvp"+"olXaxlbClmJdCIsLQYJo1JioD1IS4UEDrryYiAmPCAFN4AG3KJDwokF8QDACVstSlCVture0UNpO"+"29k7673XM1NoaQKJ4WYm+ZZzvv//nPP/zgdg3v7vWOyZHt+5fr/jV+pmnTcFVJ2rmOY3G8wF1hng"+"+wXI+J3Zutr8d1PDNHHl1mF8+nQlb9VXMtw1QF/QIMcmW4qKYrFgMXWGAwneOz8g5jPf2tICNs/3"+"Ek7qKErGXsFq1ej3BXhmzRMszEujfHw066DedlvxYB7XR/2MjceIR/y4HQa2VBBzeIDktW60WHQW"+"SGaiGJCjxnFa09iNSdSwj8SNXkoik1zrv8GEls+Tzim36YiSnyzju6YuNAHq9AeJjs6wyPdAQbGX"+"ToudbGblpwv7UmFvCw+TSqXw9etoDrEr0ZjjKCAx7mPVxnX8fuoC7zcPYxGw7Q1eO0tLcjnT3IMn"+"N4dgaRWftx6meHkVqz9YzxVhl7zu57UaK9VuqHUbPGqPU6yk2XU5xN5Ln6FW2qh9YQkHDl6lMt9G"+"kVsn2NvLyoY69p4fRMuE9WK1h39a2kkKrC75fqS+huZDB+n5o4neirlM+DU8isnJTj+BvknsAqba"+"odCVR6X490XWU7+ikEhKp4IjjIRDlJUVEgyMyX4im7psRFvKNHom4tjtOajxGG1Fy+j/6gDOjnGs"+"oVy6ozquRIhz3RE2nD7LxZY2Rsd8xNIGc2xpxjqvM/+dPbTcLCPx426SIiSvy0nSSEpakwSTt8rg"+"MRIMxyDf4SIUNilbUEO1UCj2KuRWPYwZGMKhqSyRGvT/eZaV+w/jDcTxagaq003sl19pa2vn2YYy"+"HphXiqEbIhSTuK7gE4EtKrCivl7hpGkoSTRtkmdRiEukuohR7AinTCxF5SQCQRwic7cLrJfOELs5"+"SIXs21VFbBXmlMBfHzVypXucvJoGJlMiCotGUEQSMSw87hJCx4YSVJW4mIgaeKRikyLZnt4BopMQ"+"HJPcuvOJy6ImNbJJnm1uJ6rNjmAIa2Eu5IIW0eLpZhxWlXR5OWOZVKXiaGoONUKu8WoMNZrWebkl"+"SONLq3CFIlzUwbA66HlzE5fXvMGp/IdolzVNNJ2QaBNS6MylFLLopkEolOLsUIpWIfH926/S3jdI"+"vwANDgcoyy/kuHcxA1G5uLc7w7frKnmqfB5FDxZDLJTtCqrdRjIUpriuli+27cHmLKSxY5RDR/9m"+"fOdWbjRdYPe+TaQkorRqwRAhZULNKyri3Inz5Ik663adnH1hM7ODz5WysHYRnoSfmM+H6Z9g3FPO"+"5MgYJ64OEi6YS89IiOe3bOP4kR+wdHXx5bvLaY9o1LtiWVIkYvgmItQ1PIayYwpkVmfITOrynKzU"+"4ki5sj0ubSrUFNn5cOMqfj7Rgbu8GGtaukAsSUmug6hEXW6mSKRC7PyplVynSFVypErXyDF09o1n"+"eupdgKZX7xgoTgfG1xs4+VsHK9YuJR5PYYb8mJEwV/pCLLSMcrA/zuZjbXdz//9AHruGb8tyRqUN"+"RYZG0MNBFE3kKfK1aQp2Ge8fjLO9b6oD3OubFsO9DDKtY5104Ej21Zh6Ou78Mq9Ja8wQpc2k6W5n"+"/Qc/MCv6U0q66wAAAABJRU5ErkJggg==");Resources.add("chromeicon","data:image/png;base64,"+"iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAABGdBTUEAALGPC/xhBQAAAAlwSFlz"+"AAAOxAAADsQBlSsOGwAAAAd0SU1FB9sLAhQGJ4GLppcAAAKSSURBVDhPbZJdSBRRGIafOfOzP6Om"+"60+ipGllBFGUaYVWUN150Q8IIRRkGFFBNwVdFAh1VzfdVtCVtxJ0U0TQRUEERWBKkZiFqYum7q6z"+"O7szc6bjLi5BfXA4w5n3+c687zcaEKr1T13v2kk6m6MqGuX+h/H/SdD+htsrK3jSuYPDHZsJhEAT"+"GtItYHg+ryd/Mjj2je+rTrlRGW42DGaOHGBFF+R1Dc3Qi6LQl4Seh1WQJLyA5vcfmA2C4rsiHGmu"+"wLVamKnUCVUTscblXTQlCqVAygihgsN8QKvUaJufZhqnBO8e6eXOw9/sm/QpmCFm6GFcu0q2tolK"+"OUd+6h4eOoYpsCMhE4UUPbdXS/Dp8VO4E2keDHzGrjOZevGWx98s4kKS83SG9hbYn20hNE2EoSwl"+"ArZ01qFv7d8yXL8rgVNjkR6boWfoJpdmW4mvplRYObzVDE8/6ZzvbUVLPUf6ypb6ih9TWUQu4xat"+"x9Ier6638UXWkEymWEy7JFdcteeZXVpmJWhBKw9V4OYCRCRqqW4hmgQjbuEMVLMwn2I+kyWZyZV2"+"1aja/IWSlCrUMHSr5PnkmxP4Tl6lKtFNn+GmUQ7eekYsJpRnGL1xjD67kcAzWRuFbupsPm6X4O67"+"3WzsqlOdJUHgq1QDrnRc5uu0T1Uizs7fZ+mqzRAQQXoGZk0HWtvHEmzX2xwdOaoC8tAslEhSkDm1"+"BJvSS4zsGVO3xvALFpFYnKZDi8wteSo4Vc6Cw/P+F4TCJHQ1hCfUHTZOrpJH26YJnCryaVudbeDi"+"reoiWP7D1nOIJWy2Dm6nobMeT9O5UJHkXM2cStYgGmulse+dmkAJ/AdeP6xtqMdtj3AmuoyvUn35"+"2WA2uVCG1h/+ACp3HH56lNZIAAAAAElFTkSuQmCC");Resources.add("spocky","data:image/png;base64,"+"iVBORw0KGgoAAAANSUhEUgAAAB4AAAAcCAIAAAD5mpj+AAAAAXNSR0IArs4c6QAAAARnQU1BAACx"+"jwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAATDSURBVEhLtZZ7TFNXHMePBcooj7/Y4h7Gv5xZ"+"InNmuj9msiBzm86Z0GxMlyUyAjp1EbIxF9y0VZcJGJ4dtazlVaC01Ja+QMTIqjwmMkQ2cBjrKFsc"+"DaWlPAotFLj7cs52k+3/fvL54/Tcc3/nd373nHtL5ubmlil+v3+NEgqF0AYcxwUCgSUK+8l6+Kvo"+"X6HgFgYbzMYTjJ6nLCwsrFLQnqYsUtjEGM2GIZVZChqYhnUGg0HcDtCPNkDYcIbml4Cp2ErRwyrD"+"qsHSQfp8OixTLAupsVuwLFYZDON7yNTUFCsioiAWQJuFRnEwuoeSl5e3nyIWiz+h1NbW8o8HDRaa"+"xQE+n4/MzMzwT4CfgyWIZHU63SZKREQE+S+JiYlZWVmPKYjFHgxCsSBhDs0/cSyfTYhkWWNwcDAm"+"JoblKhAI+KRFFPazjMLGA+wQ1vB4PMTr9aImgC8TqjxJyc7Oxs0bKEKhMIqCyjxFYZc2U+x2+//S"+"crvd67VG4gAR2RPAoEJKdHS0VCr9lVJcXHySkpOT8zWlq6urs7PzeUpycjLbNgjC5kDAcIaennnk"+"9bghF+ImnwQht8YVXZbAi+dzR37pY1ks+jmX63eI9thv666FuEfjI/VaPczIyEBhAV9Vp9NJXBNP"+"Zn1zMLS0gqAwsOi3Wc3wqy/POB+7lpc4iEfa3X0bOscf2rv1kOPci8F5vd4KJRIJ28HsiAMcKOJx"+"haY9Pjj+x7CxpQb6pt13eu7B9I9PHs867ZrwwFXOze5BMUPcBJyd88rLdduStkCZTMZOmdVq/YmC"+"kxjO0MODf1pMZlhUfC6/8CyUySoKLpXD/PxChbJ07/634IVCiaW9DV63t1fUXIIZGSdOHD1rMDTC"+"oqKiy/9SQEHi5OaNzqH796C8oqy/fwCmpLwrPX8Rlsi/fUe8baNwAIqEFza+uANufnlXQnQhFJLm"+"3a9KPj+zDxoMhp0U7MhKSltbG+npuma1mGDBdyXdtwfgnb7+G/brsE5XvTvldQH5EQpJMC7SC+Nj"+"B2PIGNxArFtfOnbkMzF0OBx4W4HR0dFySkdHR3hD2+ydXbDn1v3c3NNwxHF32DEEbbYHx7PMsc+2"+"wIioGUI81IAozgsJ6dj+Wn7zzTrY29uLLQE0Gk0FxWazEaNe3d5qh6EA1/fzLVggO2XtsMBdO84l"+"EDkhCDpDornI+HWJiCPEAUWRXCyZJ0QCFQoFggKVSsU+fusFsbY2tVMW/OsfQPoOCXJ4Ca5y33zR"+"/HTUp/HECaPIQIJgCMaRBwIyAp8RPYyJbEraroP8J5R/h5jN5nCGVtcr1XUaiDRZ1ssr+Ogtw7u9"+"Y1teeP+9tGPwg/TMPQcPwDcPHjpyVAr3pWY+t3XTKWkaxHuOHXQcV/a3wGg0ElurqUrVABEan9Z1"+"g+7A8l8Q0WVlqleSdsJDH4pTU9+GKcl7Ug+kw71vHP4oLXPaOwn/+RCwFxnFYrGQJq1acaUKNjVa"+"TS3XoP6qRt0ghyZLA9bU3KiGGrW8qbEU6jQVJr0WGjTGH2TKqxotVKvV1RQ0UGWgVCrDGVqp+h57"+"ECgrG6qUOqi4UlNdXQuxpaqqsBoLVClrsRq6oMqS0kKIfabXG+rq6qFWq2WnEYk3UXD1b+1Q0qCU"+"r9GDAAAAAElFTkSuQmCC");Resources.add("ok_icon","data:image/png;base64,"+"iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAALMUlEQVRogc2aa5Ac1XXHf/fe7p7Xzs6+d/YhrVZCoJJVKLIxxgkg5BiDZSJsqEROyXZCVb6lyo5SpEiIDSTOh2Aq4JQfFWMLOUUp/uAPSdkujKjYIkhIQhjQMvvelfY5+5zdefbM7Mz0dD50zz4shB5e"+"aX2qbt2era0753/O/57zv7dH8Hto2g+0x6QQfymkvFchk8pW3SInjqW+mn4JKALlyv+KjXPzUpMvyhphi9d31e3e/cmmu+kIbGUmO8uYeZHuxHsk8rFJ64L1pfi/JM/gALHVRjtdsYrzB7d+afdn2j7HXHaRt+fOE8st4BE+tgVvI2TUVierFh8VQf53qWspBlhyox2v"+"mEQc3lW3e/cdDZ/g9NRbdMV6MIsZUoUUUXOK8cwkDZ4w26p3BgOf9P8rUANovxcAtP/Q9vj1wFMHOw8xkBgmmp1GCkCAECCEIFfKM5ePsdl/C3qNvheoBzzaBvsOgFTihQObHkETGj2LfUjheL8mugIs20IKgUd5AKoAY8MBGD/UD2+rvnXvHQ2f4NT0WddJ6UQfAIFw"+"S42UAikFZdsCUIDYUACeHxk12OLpA5sfYT6/wHRuBimF47hYKZCVzyEjSMHOQ5E53FK6oXtA2OLfP7Pps6Gwv4XfzL+LFBIpJVKq5WflftalRo03xPxSlNK0VSmj1oZlwPdD7746X/1X7gnvYzA5TL6cR0rpRhuEy6FKHloDLVgUmcqNEf9Z/KeACRQ2DIAQ4ujBrYfA"+"hr7EgOu8w/e1zguq9AAhI8h7i6fJDGT+K3kyfRFIbhiAwBH/P+2qu73jltB23pg+jSYVQohLIi+EQCJprQoTNUdYTMQujjw5fgRYAFJsBIWqfhDo9Om+pw50PMJ4JspiIY5Uq6IvxJpMtPibKdkFRhKD5vSLs88Ai0AMyAH2Td/EQhdHH2jfT7URoifRi5ICTUo0JdGU"+"QpNqea72BKk2gvTGz5PqSR1LnkoNAXNAGrcK3dQMBI9UfaGtqn3vPS330RWPUBYWSmpIN9pCuANQUtESaGY8PUJsbjYy8sz4T3AinwBKlTVvGoDqo8EaAUe/eMshFgtxJszJZe5Lscp54dAn7G3GsgtcWOwzp1+aew6HOgtAHrAr6940CgnEM/e27gu1BzbTl+xHkwql"+"FJqS7rwy6j21VHuCvB97h0QkdSxxKjmEE/0Mq84CcJMyUHOkep9fD3ztgU37GU4PY1oZlJJus1qbAV3qNPjqGUkOMzczE7n4zOgHUuemAhBKvvDF7YcQUjCWHUMpBZQpY+HUTLlMpUZfPflyjoH5XjN6ZPay1LlpAOp+XHN4S2jr7q2hWzg1f5qp/DSqIhGEO9vOXGvU"+"Yosy70y/RSKSOBY/lbgsdS4F8G06UfwNgj3YCCBBgV9wgf/h+8xfboEPdf5ITadfCzz9+c5HiWajzOSn0ZXmAlBrgHiUQZOvkcnkGPMz85Ghp0c+lDprAXyHx3y676W9LZ9iW+hW0sUMqWKS3kT3Q4P+3m/xLM/xBP8GLF0LEKnkt+9q+cNQ0BPk7dl3XOfdjVsBIBRS"+"Slp9LZTtEhfmB83okakrUmf5O/gO+3y676W/3nmYP2rex3RmgflsEsoe7mq4j0e3fLm6rqnhmzzPy0AQR4df0RqP1u+r9dcd2Nf+KQbSgxTsJXRNw9A0dKWjKw1D6RiaRoO3nmojSGT2PPFI8tjiyStTp2KK/fznX2z/q44mX5jjEyeILyUxS1nSxQzpYopaby3bq3cQ"+"LY3vzN2dvY3XOI57I3BZ51+urxFCvPrntx6qUUrRlexCUxp6ZWjOrCkNr+alxRdmNHGRoZHhSO/XBp4DZoB5oHClQEkU9+6qu53zsR4KZcevSjcs2iVGU+PkrQIPtf8prU2bvyC+y2nxoOgA9MsuasvDe5o+1tEZ2kYk1e04r6113nCz0eILkyuaRKJd5uSPoldNnYo5"+"e0BAspBy/+SK2GVRJeiN91OlB9hV9zGUVDtmHpp8pVws/4n1K2vUzcayNf+4cY9P9z31YMfnGDVHSVspN9pOk9Kl86ykotaoIWgEeG30TTI92WMLJ+NXTZ2VDDi6FRvbAVzR4cKp1GOZceZzMSbMSWayc9xefwc7w7tv8/yZ8brvb733Ah5Wzh1IJV94oOOzGEpn2BxG"+"kxq6Usucr2TAr3tp8NbTN9fHwkws0v+NoauqOpcCKBOJxM/TWb0ZKdSyDl+ylhhKXCBXck5KUgjihThT2Rm2Vm9nd/jjrcYu/b+rvhrYWwHR8nLzY52hzr0fbbqDrlQXtigvO796GJpGs7cJcylDdzRijl8HdSqmuIfkHLOPfrzxLoQQpAsZFgtxJjNTIEApp1Yr5ZS9"+"ol2kaBdpD26iKRD2xEOxzxt79GnvDs+0sVn/+cHbDnmLFBkyB5c36orzDphao5YaI8TrF15n+tTs9yaOTb0BTLvRt67WeQfArxhM353a0Z/r3bk9uAMhBH2LAyBwD9VqZbg63aJEvpynraqN1mCbZ96YOaBa5P77Ov64/SP1uziXOAeStZHXnOHTvTR5m+iZ6WVwYOhs"+"99/1f49rqDqXAgCb13g1f2e2eoKxOwOqhjpPDaliGiGEG/0VIBX1iIClcp5GfxNtVe1ITTQ+2LGfsdwYsWLskpJpuHPY20y2kOXk4Cmz9xsDjxfjxUkXQJZroM5aAFDi17y59JFcMhGIfbrN10Gdt5Z0KY0Uwo2+dCSwdE9NUoEE0zJp9DfSWbMNKQV96V50pdaUTkNz"+"Gletp4YaPcSvh04wfnzy2dlfzr8DTOEc0K+JOqsB4IIocJLzpduXEgu+2fsbfWEafY2ki2mkFGuiv6zdXWD5co6gUcVkfhIkl9Z9TSOg+Wj2NhOZ7magf+Bs95P9L+LwPsZ1UOe3AVRAlHiD8/YflJOLvtn7w742wv4weSuHLexVGZDu5lwBkbVMl/dqecNq2gqQsDdM"+"ZinDGwMnzZ6vDzxeiBejwCzu4fx6Afz2iawMZEv/XPq+NVZ6oif5G0r2EltDnfg137Jmd0SY81y5PVtRlytzhWq1Ri1e5eX0yBnmT8Sez1wwozib1uQ6VO5q+yBhZgOl0v9Z57WPqmTcO39/g7eZZn8zeSvnltaV24NKZ9UqkZdrS6Zf89HkaaJ7upuB/sGz7/9D37pQ"+"58MALIMonCie13dpE0lv7L4Gf7PR7G8mV86BSyfNlQi60tDkpQ1LV4qwN4xZMDk5eMqMfL3v8cLi+lCnYh92qC8D2eQ3Uy9n38oe7I29m8lbWbYEN+PTvAi3O0shl2klVw0lJbV6LV7l4ezIWeZOxJ7PDK8fdSp2JW1vA1b+7aUJbZM6l66LP+wz/J72wCaWynmEsB1h"+"plbkcaXz+nSHOr1uw+r6+551pc7VAlgGkXsrP2ls1s+ZdcmHA0aVp62q3XlrQmnVHnBnTdHiaSFbMDlz4YzZ9Y+9jxcWC+tKnWsBUDHLPJud9G7xnsvWpx6u8lR5WqvaKAvndmE1iDqjDq/ycnb0DGOvTjwbfWXmd25Y6wEAwEqfyUz6tnjPmXWZh/16wNMaaMMWNmVh"+"oSuFX3caVv9sL6PDY2fffSJyQ6hzvQAArNTp9KR/i++cWZW8M+AP1LcGWpfFXqO3kVQuxfsTXeZ7T0ZuGHUqdr0vuq3Em8lJK2kdL21f+rTURENzIEytp5Z8Mcf7U+8xcTz6bPSV6RtGnYr9Lm/qrezFXLKcLf+y3FbsiGYn2kYTF43x2dG52dNzL3Z/q//nOCpzgRtA"+"nYqtx28ldCAENLBy7bIExHFqfo51qvkfZOv1Yw8N51hpuGtaOCAK3EDnAYRtr/u+uqn2/+06dvy3qQOnAAAAAElFTkSuQmCC");Resources.add("mod_icon","data:image/jpeg;base64,"+"/9j/4AAQSkZJRgABAQEASABIAAD/2wBDAAUDBAQEAwUEBAQFBQUGBwwIBwcHBw8LCwkMEQ8SEhEPERETFhwXExQaFRERGCEYGh0dHx8fExciJCIeJBweHx7/2wBDAQUFBQcGBw4ICA4eFBEUHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4e"+"Hh4eHh4eHh7/wAARCABAAEADASIAAhEBAxEB/8QAHAAAAQQDAQAAAAAAAAAAAAAABwAFBggBAgME/8QANRAAAgEEAQMCBAIJBQEAAAAAAQIDBAUGERIAByETMQgUIlFhcRUWIyRBQlKCkRcyM2KBof/EABkBAQADAQEAAAAAAAAAAAAAAAABAgMFBP/EACIRAAICAgIA"+"BwAAAAAAAAAAAAABAhEDMRIhBBMiQWGh4f/aAAwDAQACEQMRAD8Apl1YS1/DFc66/wCP0Yyb07bd8W/WB682/YgYBd0/H1PqIMkf1ch4Ynj46r31aa0fEFAI7Ji9VdVp7PS0MMMtSqMeKpRvE0XgctGRIW8ePcnoAOdp+0+Q5xklioqmludos96eeOmuzW9pYXeKGSXg"+"myocn0mGg33+3TTesEvMeYVOP4/bb5eDEW9JmtbwzSBNCQmIFioVtr7n286PgGXGu6mI43jOI2Wx1NNTC2VPzlTIYZOZmegnhlZmO+R5yaGvAAUDwOmntZmuJW+XHay7XCNq61W9IITJHIwp/wBs7SHQHk8SNHzrfQDT2O7Ezd0LVS10GRm2lrxLbayM0HqmlVaZpll/"+"5F5BmAj4+NE72fbpo7h9mMkxae30lDDcL7WSWcXa5RUtvbVvjLuo5sC2xqMnZC/l1JuxPd6Pt/Q5vAlYsb3KZJaFtHy3JwxHjx9JU+ft1Obj3mwy55lleS1FypluVbSfo2jneCVv3X5VgQgA0hMrEFiN68ex6Ar5Q9te4VctK1Hg+R1C1cDVFMY7bKRNEvHbr9PlfrTy"+"P6h9+otIjxyNHIrI6khlYaII9wR1Yyl7yQVXde61lZlksON19tgo5oHSVkkj9CJJeBQh4pCYlPNfJ4+d+Oq9XSSOW51UsMkkkTzOyPISXYFjosT7n79AebpdLpdAZUbOt66lmJQYvFL6l5rqhCVI3Frxvx7EdRWBxHPHIVDBGDcT/HR9urR9jbFg15pJqbIO31DXWinp"+"AbjcXWoWVHD8gTIraG10NKUI9yCpOoeRY+2jfFgeZOvYrbJb0rb3HQ2mRZ/XmWKEH6dljob30Wbf2swevqkwqHKqtc1alaqjkNP+5SMYhKsJbeweA5b1r6vJ2OHUVyK5WUdxqmvxi0JaqWBZEpUA8LKGYggHewAQvnewuyNnQnFryKnihrbnSxwfpyksjCKv9WFnecD0"+"4gq8TIWKlDonj5Ka0AvVl6lZlKPGXEAnS63mSSOVo5UZHU6ZWXRB/L+HWnUFRdLpdLoAmdjMHpskvlXeLqxNjsFHJcrkAgJcIP2cK72CzycVHIa1yJB1oyy/ZfOaE2i01KVFwuc7110r/l0ScM/HVOrgeEQKGLDzyd1GgNM24fkEmP8AZf8AVa2QlrvlFaa6saNSZDRU"+"xAhjGvI5TCRt/ZCD79MFPiHcOWmeW24LlFZJKCfVhtU7gD+1etEldsvdQ62xszn5JXpKWghARIdy1AHIs3Jt+f5dHY8e+h0TfhBwaPI+4NHcnpZqpKVw6zcA0cMikk8ixA3x4ka2wJ/268gdS4HnVHYKl7vh2RUpjmXh8za50OmDFvdfbYH+f8nD4Sr1SY/SVlBNT3aa"+"mZlmlFPH6a+qQoYM+gQo1xIL6I34PXkzSpP5Ol4eHmyUo1aX3r9BX8W9tFm79X61K0LpSpTIjR+5X5eMjn/20QPyA6E/RT+LC6wXjv8A5RUwUkFMYp46aX0TtZJIokjd/wD0qf8A5vzvoWdbR0qOZNtybezaJHlkWONGd3IVVUbLE+wA6NOKYJi9gyy14nfaNcnzeulS"+"OW2tUNDbbPtSzGqkjIeZ4xpnRGVVAYFiRroTYrdWsWT2q9pEsrW+thqhGw2HMbh9H8Drp6ospWjvOSXfT1VVd454A7sVYJO25W2P5mTkh/B26kqGrKrx3dx3uDkHbyy6pJ6SjY0lHi1sFKsqGIcHT01MraD72WYhgfPjqO9ysK7l0NrxGpo8izvIbtkNPUzzWueCoFVR"+"tAyK4ZBI7Hy58kDQA+/j2z/EC1fTVVdV03pX2sxuSxVFWF2xQ74ty1veyST+I+3XK3d9jTdrI8LY8pUx+ezpV8DyRZABoHW+OgB+SjqW7JZjKMZ7lYQ+KJjGRZ3dq2/UElXLa4o6mnqqT02AdCkcjMCCTs+NfxHTxJ3G72mkNq/03yC6x04FPXi9W2orJuTgcU9VEjkj"+"2GUj6ix2CD5101v3zgftVJhboJJ2xxLMtUUPJVUEFQdb4nYH9o663HvvTz9s5MVhjEdWcXgsTVYVg0gReJBOt60W9/6z1D7Ck1ojGV4FbL4LhJjtjvOJ5TQ07Vtbid35s8sA2zS0kjhXfiv1GNxy0GKs+uhF0Z7n3Vpq3uHgWWyScmxazU9HKADyqHhD/T5HkOX0fwJ6"+"DHQg/9k=");Resources.add("info_icon","data:image/png;base64,"+"iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAABKZJREFUSImdll1oHFUUx3/3zp2Z3Wyaj23SbNI2S02rrU1t+oUUjBYRqgj6UKHgx4NWCpZqEVTEBxV8UhFUKGJb0CIVK1ifKj4pioKVftivB61JWzHZZNPsJruT3dmZnbk+"+"zG6yaVJBDxzuzNxz/v9zz7nn3hH8i2itASSgAKs2CsBv0FAIcUuMRWdqwAaQKJS87h8ujWwplPyNQoplIvLJtsTNC/fc2X26NWFnAAcIFiNa8KUGbp8fnkh/+dOVfU0x+7GVnS09cdMSShlR+EFAqeLpv28URl3PP7Fr+20fDfQtuwq4N5OIm8HDMIy9dOTHBwtu8MGm"+"vp6VhmGK6RmfiLfBUUBrwiQMq/rCcGak2ZYvvrNn8KSUstxIMo+g7HrqkTe+eqqro/3gwOreeLFcvUVm50tLk+LS1RF3NJt//uvXHz3aFLf9+pxsjH5g7+FBLdTBvp7ueHaqQrkSzCpas3NTip2bukHreXPj+Qrprq6YocwPt+77ZIfvz+Kj6g/x+15LtKdSh+5anY7n"+"HW9+XdDs6E+xfW0nAIUZl5NnMoiGBLhelQ19K+OXh0c/bt/51gBQaFjBLlxt7N+4Jt3nuAGuX52nFa9KwXFnwaYdF9erLrDLOz7b1q1a5QTsp2tXwwrWp6yW5viero6louwtnvdvzmYoewFCwHcXx9HCWNQu2dZKsqXp2Vxn53uMU4kIEnZ/qjPZV6osBNdas3Z5K6AZ"+"Gp8BoMlSTDr+ol3ketDb3ZHOZSc2AKcjAqE3x2Jx6S4SfRCEvPnEAIac3Q8c+/5Pvvj5LwSaBfsXWJJISARb5gi07hbSYH56BEhJGApeOXqW+/uX8fC2XgC8QOMGtfBDDWEARESGlEhDgQ57oF4DraXrBcyuQEiQBmgB0uDUNYfVqSWz1NVQUw4FQgsMIGZKPK9Cvlhm"+"LD/DWHYSdCjnCCA7li9S1iaWaWLZNsqSGEqgTIkUBlWtCYIArTWuHzDtS3y/ilNymcg7eK4L1QrosKaMzxGE+sK0UwqnfVNiWKA8UDYoC2FaIBWDfQ6FQgGATL7EpTEPwioEAWgFhhkBVz3QoSbU56HeB2X/PG5xBGWDUTNWJigLbVhow47SNlseAaYdqbIiW8OMfE0b"+"KoUMvv/bHMHkiEPFOUZQ0UgjMpQNTlLeRFB7lwoMqzaqaAw8cIufMz5ahOjMh5nfoWPrZfAfp23FEqRRi8yCMOTE0ysYvL2VtiYTgBXtNg/dEef42XwEXM+7NCD7xzgl5xmGPis2FhkuT40xYBwgN3yMVL81F6VAKcVoIWC0GDUaWqNMhTAUmpqdsiFz0ac0dYCh6ZGG"+"zd4ga/ZK2ppeYGn6bZYPWPU6YFi1nMei/PsV8F0I/KioVQ9GzvncuPYqufL7DB0K65DzD5TcGU1i/a8EpSuUJu4l1pIgkZwrvFG/ksPZxqKQgeunJsiPPsdU+QhDh8NGyMVv6/QDkFzXi6VeprljN8l0By1dAqs58qg4UMxqctcmKU4eF57/rp66cp2r3y6AuvXvAED6"+"SSGTbUls826N2KylSAEIrceE1ueoVH8Jc8Uc1z9deCD9L0nthu7d/8nlH/ZrI5qfAOMrAAAAAElFTkSuQmCC");Resources.add("ajax_loader","data:image/gif;base64,"+"R0lGODlhEAAQAPYAAAAAAP///yoqKmpqap6enr6+vrq6upCQkFxcXCIiIlpaWtra2tbW1s7OzsjIyMDAwJSUlEREROLi4oyMjBISEhAQEDw8PHR0dK6urqCgoEBAQC4uLsTExOjo6HJyclRUVKKiooKCghwcHHh4ePDw8JaWlmJiYpiYmEhISLi4uPT09E5OTmhoaObm"+"5vj4+BYWFgoKCoaGhnp6eggICHx8fFZWVgQEBAICAj4+PjQ0NAYGBigoKFBQUA4ODiwsLBoaGiAgIDAwMDg4OEJCQh4eHiYmJgwMDCQkJISEhEpKSkxMTLKysqysrKSkpJycnLy8vMLCwjo6OoiIiMzMzBQUFNTU1HBwcKamptLS0uDg4F5eXrCwsOzs7HZ2dpqamsrK"+"yjY2NjIyMhgYGEZGRoCAgGxsbGBgYKioqG5ubrS0tLa2ttzc3FhYWO7u7vLy8lJSUvr6+mRkZNjY2Orq6sbGxoqKitDQ0Pb29o6Ojt7e3qqqqpKSkn5+fgAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJ"+"CgAAACwAAAAAEAAQAAAHjYAAgoOEhYUbIykthoUIHCQqLoI2OjeFCgsdJSsvgjcwPTaDAgYSHoY2FBSWAAMLE4wAPT89ggQMEbEzQD+CBQ0UsQA7RYIGDhWxN0E+ggcPFrEUQjuCCAYXsT5DRIIJEBgfhjsrFkaDERkgJhswMwk4CDzdhBohJwcxNB4sPAmMIlCwkOGh"+"Ro5gwhIGAgAh+QQJCgAAACwAAAAAEAAQAAAHjIAAgoOEhYU7A1dYDFtdG4YAPBhVC1ktXCRfJoVKT1NIERRUSl4qXIRHBFCbhTKFCgYjkII3g0hLUbMAOjaCBEw9ukZGgidNxLMUFYIXTkGzOmLLAEkQCLNUQMEAPxdSGoYvAkS9gjkyNEkJOjovRWAb04NBJlYsWh9K"+"Q2FUkFQ5SWqsEJIAhq6DAAIBACH5BAkKAAAALAAAAAAQABAAAAeJgACCg4SFhQkKE2kGXiwChgBDB0sGDw4NDGpshTheZ2hRFRVDUmsMCIMiZE48hmgtUBuCYxBmkAAQbV2CLBM+t0puaoIySDC3VC4tgh40M7eFNRdH0IRgZUO3NjqDFB9mv4U6Pc+DRzUfQVQ3NzAU"+"LxU2hUBDKENCQTtAL9yGRgkbcvggEq9atUAAIfkECQoAAAAsAAAAABAAEAAAB4+AAIKDhIWFPygeEE4hbEeGADkXBycZZ1tqTkqFQSNIbBtGPUJdD088g1QmMjiGZl9MO4I5ViiQAEgMA4JKLAm3EWtXgmxmOrcUElWCb2zHkFQdcoIWPGK3Sm1LgkcoPrdOKiOCRmA4"+"IpBwDUGDL2A5IjCCN/QAcYUURQIJIlQ9MzZu6aAgRgwFGAFvKRwUCAAh+QQJCgAAACwAAAAAEAAQAAAHjIAAgoOEhYUUYW9lHiYRP4YACStxZRc0SBMyFoVEPAoWQDMzAgolEBqDRjg8O4ZKIBNAgkBjG5AAZVtsgj44VLdCanWCYUI3txUPS7xBx5AVDgazAjC3Q3Ze"+"ghUJv5B1cgOCNmI/1YUeWSkCgzNUFDODKydzCwqFNkYwOoIubnQIt244MzDC1q2DggIBACH5BAkKAAAALAAAAAAQABAAAAeJgACCg4SFhTBAOSgrEUEUhgBUQThjSh8IcQo+hRUbYEdUNjoiGlZWQYM2QD4vhkI0ZWKCPQmtkG9SEYJURDOQAD4HaLuyv0ZeB4IVj8ZN"+"J4IwRje/QkxkgjYz05BdamyDN9uFJg9OR4YEK1RUYzFTT0qGdnduXC1Zchg8kEEjaQsMzpTZ8avgoEAAIfkECQoAAAAsAAAAABAAEAAAB4iAAIKDhIWFNz0/Oz47IjCGADpURAkCQUI4USKFNhUvFTMANxU7KElAhDA9OoZHH0oVgjczrJBRZkGyNpCCRCw8vIUzHmXB"+"hDM0HoIGLsCQAjEmgjIqXrxaBxGCGw5cF4Y8TnybglprLXhjFBUWVnpeOIUIT3lydg4PantDz2UZDwYOIEhgzFggACH5BAkKAAAALAAAAAAQABAAAAeLgACCg4SFhjc6RhUVRjaGgzYzRhRiREQ9hSaGOhRFOxSDQQ0uj1RBPjOCIypOjwAJFkSCSyQrrhRDOYILXFSu"+"Nkpjggwtvo86H7YAZ1korkRaEYJlC3WuESxBggJLWHGGFhcIxgBvUHQyUT1GQWwhFxuFKyBPakxNXgceYY9HCDEZTlxA8cOVwUGBAAA7AAAAAAAAAAAA");Resources.add("ajax_error","data:image/png;base64,"+"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAACYQAAAmEBwTBV+gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAQHSURBVDiNtZVtbxRVFMd/596ZnS1L210otMB2t62gmKA2gVLtC5Ug"+"aGi0Eg2JfgY+AdAWWq0fgKJGE33ZqCQF5EFqCIoJ0RoTXpRATHjY0hYa2i6d7XZ2u7tzfbHttlgKiYn/5M5N7j33N+fMOfeMGGP4P2Q9yyCxSloUxBAioCKIyviW1R9/5N152jlZyeORkOwz6A5VVdWsa2uxamOAonB/hPzoCH4yOahE922acHsxJv9M8L2QbETbp/Sm"+"aNOqtv1Yz20BgeJD5ichf+c23oWzFMbHB4IZ82HVw4epFcET66R8Nu9cKdv9diNbnsefm6Ns46YSbCk4OzmF0gpz+xaZ3369ZgK6tfbm8NgCSy2+QixPVp8MNr/WmF+zlqnECNlwFVODg/gpF991i3PKJTV0HXdiisnbCfIVYZztOxoV1qmlHpfAo9Xhg1a8fm+hJorr"+"ptnyzbfE2ttRL71C8q9r+KkUJpVi5ubfeNqm4Xgvm7/6GncySWFdNToWbxp5+YV9y8DGtj+26hvw3WnKtr6ICgYBiB1pR2/fwaOh68zcukUmVM7mE58jWqMch+DWrRSmXaxYHB1wOh4DJ+pq6iUcaUIUAccmd+ki944dLYUV6zyKtfNVsmvWsfmLL0HrYqK7jpH/7Rec"+"UBkoBRWVzWMtO1tgvo4tJ7BftMafngbbYnWkEvfsGRKFAvGu7iK8qxt8vwgAhjs7mLv0MxWxKH46Db6PaI2xVAy4WrwglhM0+Rz5sVEktAoVClERqcQ908/dQoG6T3vm4ytC7x4+TG7gAhXRDZjZWUw2g8lmAUE5gUjJYyydFKVAFORy+G6qCMnlyD94AIVCKfxiQgwm"+"mynaLZSiZYEojKhFsAScZNFAFY2UYnY6hX5zNw3He0ueLqiup4eEVqR+PEV5TTUoQUQWwJnFqrDVMHYAbBuxbdKpNNa+d2noPbEY/qFD3D18qASPd39CsO0DZianEMsGuziU2P2w5Obdf6Pld5Q0Z9Oz8NY71PV8VoIk2o+QPXcGEJzW94h3dy/udXTA1Ss4kTCIDNZ8"+"39/8WB2LY3dh20gwSObGDXzPm89+J9mfzlFRG6UiFiU7cJ7ho50A+J6Hd30IFQwiWiNK9ZV4S3vFg9Y9g4hqyqZm8Naup2zbNuYuXqA8uuGx7z8zeh979x68oSHK0i7BcCVgBqrHk61cvpxfBp5o27uxoALnjEjjnOdh8gWcSBj5V/IAMo+mUZZFYHUIkGvay71edfp0"+"qcMta5sTbW3lBUefRMneZbQn608t+fer+k6PLV18cqPftcsar15zEOEjDDtXAP5hjHTVfHfy/JM2V/yDLGj8wIF6Uf5+IyYoRpIGPymih9f3/XD1aeeeCf6v+gfLYZXwkd5f2QAAAABJRU5ErkJggg==");Resources.add("menu_arrow","data:image/png;base64,"+"iVBORw0KGgoAAAANSUhEUgAAACcAAAAyCAYAAADfuMIdAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABdRJREFUeNrsmWtoHFUUx+feOzu7yWZNmoeNu6liC9ZqNFAfKEitSbGPTyp+1E8KQkUpgoJSFaz6oT4+iFYFQW1FUFuaNgVtMWkiWGNN"+"LFWhJGKa127SPDabTbLPeXjvcm84ezuTTTITUfDCYSbZmZ3f/s8995xzR1H+xQOt8Bq76y2H8zWHQ5Ip0rkFgCzJ1hROQGBuSDpCIIMfTenoaqglPmcQBByhKRzC5HDQFC8A1WUoR/h1PnD08c8EjE4tD455yd1rAicUYzB+agFqGj/H/MEMJMctK00Vww0gKfGZj8Mw"+"qDJqFQ1blQ17DmpvJ2PGX7PRwkMD/DoC5qRpEzCeKIfAfFO5SgwsxEwLonCwFt9z95MaGfst90E+rWTo/9PUFqjNcUgZaFUKEgc3Eq5YQS1q11CrolatVSj1m3f5dgYqcaS+EYcHuoyoaRR+gMbvQyBQXClIJDAMAoCBBTnYOgZGrc4XQNc1PqRtQwgpofUkUrsJXTt8"+"3ogb+cI9qhSprgCJTVSKCV8OwGoZGLV61Y/CTY9qWxkcs6oGUl8VVupGeowEBYTrn2tAFcwvLAVABXdljQBjpmeVeoRx0Zds3B64ybSwv+NgptPIFb6j1FjWHCRANR+YZ0EOxhRbz8HC1CLUKu96LHCDUE5YzY1qVVUDrrv8oz5jmYtquVJQBfNNuLScR+Y6oBgDa2DQ"+"VDlTlZQT4+bmQISiNp9+PdVumcvy3JIKqtJ8E3Otkrnzia8rX80tKCSXsjQjbyFTt0xVQwRj55S8ZUcgrFiouf2tVFc+Y7kCVEFACDgRodVVYd/1q1k8b91ZFqGuvr/jnQUlu7B6QFVK8EXBgB3ct5zRuKucAW779sCcCVxsrQRQdcihTL0QwUhxM27fXd6gqbj51IFk"+"h56zYK0HAwYGjWGnnBwUTL1yTIjrgvGWXUEaTOiB1pcTulTFwKMdaFFuJZJ6ZcSFW+G4bU9FhIZRy8lX4t8ZeqF6yQATFQ2Wi19VKsNh+tLcuhWOpt3BDSpGLW1vzLRl5swkLxJYsZDiz8s5ZQhkl2O9cGuxgqGNaoA82Pba9Mx83JjmHtI4B7FTzrHL8sqtRVG8o2JL"+"qFp9+Itnxt9PzZoymHCtpYBGxT59YLImtunOYFPL3uo7pAIVrajBoZN4TZrlwd70xfZDM702keoId1VzrK6BW//4fv7SN/tjx1OzxjwPAt2mtSyCs6Q6rNDuEY+Vu3BqduCr/WNn0kljikdp1gawSDl55RaLYw5j76K192Ri5Mhz0XZDt67QPxN8KUkBuCXdKlbvPP9F"+"aa+itad1JvrZs8Pt9DRKbYJaXIIz7JpwVXKnzi9mK3eKeLDO9ZyIx448P3KWno5QGwNwSd61Zbkght2cg+4UqhXaPIzcKdd9bHr0032DnaZhDXLVxqmx+TZLbZ7DQTBbtwo4oRq7MeHGrT8dnYp++dLQDxxslINNUpvhqgmX5kEwOAaEDlRjN8fjsfxwZs4gmXlDy+cs"+"RKth0+dHZPO9lTVLg01GD79wuSubMgcA2MRKwGAu9YEthxCvhOtAUxMRPQS76fDUfdsdXXl8MvbhU32shxhyAybPOREMKVC2+6SEHNbKcKWTu7tbJ6Mf7+0/6wWYHK26VFNhkJQXE7K/jCC78v3csYmhj57u66SuH/UCTA4IxG8UsAiALXbyVLmrstrPJyb7P9nX15HP"+"mOMcyjUYdKsiJWADwMGdTMsfJBoCS8yvp6cvUsXOpOcKKSnOI9I1mN0ijCQl4bZr4f+hai0o3HrpXOL8u4//fjSXNuf4ip/gUK7B7KoSeDPiSwsMCKM24q/GCCmxP1O/vPnIhUMUTN6fS3oB5lTPQTeLtW9RuVRSjyWu5Lo/f7H/PerKCX6NAExzKNdgpbb64ZaYtoI9"+"4YwXYKUqYTnnKiDFZZexm+4KbDlw8gsQ8fBS7yFML97klHpJYtqo+I+9wfnPvvty7GcdoltRPH5r+P9Y7fhbgAEAMJrdIgjV5tQAAAAASUVORK5CYII=");Resources.add("up_arrow","data:image/png;base64,"+"iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAJOgAACToB8GSSSgAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAARfSURBVFiFvVZdbBRVFP7OvXOnLchPKpRNLS1LKRQUywapiqQRYkqB"+"grYQChIbtMSGJvpk4oMxgQQTIhqjxlQjJlAxGIwkxkZ9MD6ZoCIhhaZgKy1UbYAtpD/bn53dudeHmVnuTreyLYs3OTl3ZjPn+875zrl3SSmF6S4jf/HjABDv6/512jGm+6FYuHTdQ5V1xwiAKFy2N9b7x8//GwFRuGxDwca6o00NLwYBoFmIFrOodJ917fJPU41FU5VA"+"FC2vKqja/Ulj/Z7CudkCCsBgNI5PP/+i96/vTzZaVzt+uG8ExKIV1Qs372lueL6uYHaWAYAAAqCAIcvGsZOn/u797sT+aHd7a8YJiOAjtUXVL3xYv7M2f6YwXGyXgLtGYhInvjrdd/Xb469Er1w8nU7ctHpALF65a9G2ve/tqt0WMBlDTDqkSQMnIpicsHt7Tf4pw/go"+"p6TMHOtq+/KeCZjFj9YHn3vpyI6tm/MEI1hSJYAJKsGCCFBQMA2GupqtgW+yxPsPlIbMyOXzLdMmYC4pawjW7Dv87KbKeQYjxKUDkpy5p4ICY05DGIzw8NqKvIgVPTJnxWox2HHusykTMEtC+4PbXz605ZkNuYwIlu0CEwDpZE5Aogc4A6RSuDYwjs6BEcSkjQdDT+Zl"+"Z4nDuSvXmLcvnm1Om4BZEno1uKPxYOXTFXOJaKLmbud7mXNGuBGxcCE8DEtKmBwQ3OmJmavK5+VkGYfml60R4bazH9yVgFkSeq14Z9Ob69etnQ0AMVsm6ax7BYATcKk/gp7BsQSocAl4tqDssdycbHEwECo3r5//7R0dL2kMzaWr31hS1/T6U0+UzzIYS4CQV24X3Xu2"+"pERbeBiRWByCeYDJ4Dqhwc72obaWj9/+5/df3ppAgM2YVS0KSw/w/OLRO01GIAIWLF9Vsn5TdYDcZxDBsm2cuzEECaUBwgUk9J/5sS/S03mFM4ARwIjAGDDQ3TXj5qX2A+NDg61JEsjR4VYAKU+wOVX1Z2IbtwSIAFJAXElcCDvgJk+d+Ujvn71dXx+vSBVPX+ldRkSI"+"J+ZfoeNWBLbSwZMJmJzA9Vm9ZwIAbAVwUui8PQJLSp/OydkL7pQ7YwSInBm/NWph3LYnzVx/x9MrQHoEOBFiysbNMQvCoLt0vEuAZVACRgrXR6PgzA/oPjMtewMQjJAmfpoSQCFqy7RK7+0zWgHO6D873kjRiBmtACM/IHyEJlbkPlZg8tLrpDI6BYzB6X5f06W6eDxC"+"GT0HOKU+bBLZa1PgSTTtk5Ao6dYHAJpfVt7TcfTdYUbkXiyOLN6eMafkRATv8gn39PQTEXdjKN0r7QompZQOylxg5jPy7XXzAygAUvO66e+UUkrpgRgA7pqRwrjmuY+QHjgOwPZ5v9muSU8CPUOdgPCZoXmPiJe5FzQOIOZaXCPprxABIEP7QeLO0gPGXCAxSRX07/WM"+"/VXQvSeHSvwjcvvAL4m+n6wXvDVB4xRe30Mppf4F67SXpvDAfoAAAAAASUVORK5CYII=");Resources.add("down_arrow","data:image/png;base64,"+"iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAJOgAACToB8GSSSgAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAARDSURBVFiFtZddaBxVFMf/Z2Z2Nk1KEkuihSII1WJDW6yIVattLX60"+"aX0piIK+iQULgtQXadAkJkR88lHqo1AffFCTbj4aslmiRZBaaZtufVAMKA1pXOtmE2d2Z+fe48PO3dxMZncnEoc9zJ3L5fzO1z33LjEzGj3mtu1HYdnNAEBUaxWpHwCA/fKffm7+h0a6rYZ0ANbuA+d3Hn/lQRDAvGoBEYE1KgeGCMmYH79wGcAzm2KAsbXNe/6xfQAR"+"JDOEBCQYggHJgETwDsaFko+FTLMXy7k4i4AKGEBDuJQMyYBhxNMcywACIBgAN4YLAKYJmLWLZc0Tz05SkMZww6jAzc2NAEEC4BhwgwIjjHgRiFcDFKQAjeGuEMg5Hsx4/I0UIVZTEQH3hMSiW4LrCyQtgrGZESCq5B9MkfBFx0POLSFhEpIWwbbof4oA1sKJgD8KLgpl"+"H7YGt03a3BqgIPSgVTiD8VveRUmKdXDbos3tAwh2AQI4CPj1bwc+yypQh9sWwdpoCsz2zqeMto49yuPVYwVo6jqQlFzp9YZRCbsOT4bgSZMgik77fV17TxNVzgwj0EsE5ObmvneXl28CAKnT0Ny2fae9a3+q49SZhztbmsDVTkZo39qMztYWGAaQczzccUt14bZFMPwS"+"TPYrcwYhYRFIlDA6NHQlm04/x8yFNQYAgHnPvQ8k9x4cfvzN9/bd39YMCUBIhgw8d32BuSUHiQbwqDnySxjp7/322tj4CWZeqSY3fB8w2zt2NO05ePHR0+f272jdAhmEzjSAuSUHnpQbhsNzMdzfm7kxcekkMzs6b12tinzudvHaTPdP5wev/r7kVOGuL6LhZn04F//B"+"N70fTN2YuNQdhkcaAABiJb/gXk0fm/1s8MqdZQeGAfxV9CLhUTtAwaWzguG+3onZycmTzFyMYtXchrLo5IjoheuQYzjT82SZjEh4rVSIlQJGBvpSN6fSp5i5XItTtw8wc56IjmVJju5+69zTtpmMBfeX8zwy0D+cTU+/zMx+PUbDRsTMBSI6/gtx6pG3ew7byS114V7+"+"rkwNDXyVTU+/ysyikf5YnZCZV4ioexby4hNn3z+abGqJLMLS3ZxIDQ1+eSuTeZ2ZZRzdMTs2wMzO7ctTJ3785MNJKjnrCs/NLfqpocELtzKZ1+LCgdhnQdWIIhG99B3x1y/29HXb7a2wLYKzuOCPf/zR59lM5o2N6FNKNywAEg8dfnb43ekZeXZ0zOs6cuTT/6KHmdd3"+"QgAgWnOlpdBbPYldhw59YRLN/zwz847yR/ctPOYIWNWAAKqLUeMdljCIUbm36GMZMQ/myv8sHajERKU+LG1samO1To+KAomQ+JqoObWOVREqAxQkUUd0w9QuYk2pD6BcRyhYwwCkFVKgoiFC3unhVBBTWx/2vhzyXH3rEWAATMwczr+e83Ba9G+1Xk8Bq9BqoLBUa4GZ"+"+V/8vLMP/1VGiAAAAABJRU5ErkJggg==");Resources.add("thief_icon","data:image/png;base64,"+"iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAORSURBVDhPldRrTJNnFAdwEudcdMucOmEKsnIL0NELpaVMoZcoiFYUitB2VlKtguIlJi5WU+WyoMZCGUwNIqLG"+"Qp1IHZStA6sCBaxZoJS5LoWUljgDFAeB8QGC9m/5oDGD4vbh/fC+z3l/Oc85z3O8XC6Xl6dncnJy6fDw8OrR0dHPxsbGPp2amvpwofh5ocHBQZ+uzi66Xq9/Wq2qctbcqemr+6mux/jYeN9kMtGHhoZ85kPnYDabLfCM/DRStu8AmURycVhsFy+R5+KwOS9plMhXGd+I"+"cam0FP39/YH/BudgP5SWyklh4QgOCED8xngI04WQSvdBKBC53zchwM8fzCg6VLduHfOIzczMLHLXZbm6qrp4rbcPSMSvQCaSQCVTQYuMApVCAyWCDFI4Ed4rP0exsrjZarWGvAu+zWxgYOBLxYXCv8JCw8COY2FzwmakpqRALBRCIt6F3SIhdvL54G3ZCnYsC0wGExXl"+"FTZ3g7zfgG8xg6Et4ejBA2BEEMFwZ0IhEsHjbkC2OBmyTBEyBdsQvyEa0ZFUxMXEgBsTDX1TU/lsl+dgTqdz1ZVLFxVcJgPE0HAczDoAflISwgMJCPH3RTSFhMy9eyDcmY51a9ZAmiGeMHV1Mefd5uzHe5p7AkYkDcoiJdxnDE16PYIDQ7DI6wPsSErGsHMEL178jfTU"+"NMStj3W1trbyPGLqarWERo2aLS46jE/A56eB4O5eAicOQYQgyOU5+MPyJ8Tu48GOZUOrbZB4zqz2riSRw8KKFavh+4UvIoIJuFF0Av84DDiVvQvB6/zgt9YfHy1ZhsOZ+9D4q07qEdPV3ZUUZm0H72sSju/m4eHVk7DqLqL3QSXs+svQKI9gbzIXPHoQ1AoZWpsfijxi"+"DZqa/S0KKTpK9sBWfx4OnRLq84eRny2AUZUL+y9F6K8/h8cKIR6V5z5zOBwEj1h7m2Fr3dksqA6xYLx2AuY7+ei8nY/7V2T4vaYA5h/zYCg7Bq1sC/p+az6z4HUaHx//pKqs+Kb2ZBK0eekwXpfBfDsXFk0BOqtz0FHxLbQ5KdDIBWj8uT7jvXezr7c3tKWyAI3fCdCQ"+"m4pHJfthuJyNB0opdHlpqM0R4Wl7k2lkZGTVe7HZALvdHvDc2t3SpirEE1UB2ipPw1z7PdqrlDC2G7gTExMf/6cR9CZoenp6scViIfeYu+nmbhO9x2ymu8dO0P8ejgv9sNDaa6ZGr5SeoeYHAAAAAElFTkSuQmCC");Resources.add("config_menu_icon","data:image/png;base64,"+"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAC/ElEQVR42mNkAAJpaWnup0+ffmXAA/j4+Fjd3d3DVVVVFc+fP793+/btx0DijHZ2dv7zFyxYlJeXl7p1y5ZV2DQzMTEx5ufnz66srEj+/v3H/w0b1t+urKxy+vbt21NGoMkGy5Yv3/H371/W/Lx8pwcP"+"7l9EN4CRkZFv/4H9j02MTfgKCgpmzZkzpwEo/BKI/zGC5IE2aKelp/fFxsbqJycn+9y4fv00sgFAL9quXLnikKKiEgPQ9gPVNTWBCvIKGi9fvnzEiKROLDExcWpWVrYz0JCAS5cuHoJJ+Pr5tubm5lYBNTAoKSky3L93/92Xr1+58nLz9BjRXCsUGRnZV1xcEpSRkR52"+"5syZHUJCQhIrVq44efr0KTmgXxgkxCUY3r9//3/Z0mVTz507V4RuAAjwBwQGtlVXVyeUlZYVBwT4Z/z89VP/zes3P27dvn31zu3b54ExdgxoyDqg2o/YDAABnqCgoIk1NbVJM2ZMZ+Dl5X05a9bM5M+fvxwGyoGi+y88gLHp1tDQMExKStoCDAep7JxchiunVt08sWXm"+"zLm7vvZjxBC6gKGhoV1CQsL65SuWCRnoG/5U5jn1PCfqnsKT65/fB1T/tb36gOEqTgNsbGx8gkOCly9btpRHT1f/76lTp2pYv1z+URvLUOoayiD1l1Hkx8SODzP61v0p/fCN4Q+KAR4eHtEuLi5zly1fyq6irPr/9evXk/fv318BlPrFxMSgtrKRYYtXmLLSz8//GGZM"+"vb+oZxVD6ruvDL/ABgQEBKTExcVNb2puZJGUkGLg5+dfs2LFihRQKMNcqiLOELW4nmGmupEINwsnE8O8ma/WtSxmiGGUlJRU9/Hxad2xY8fR9PT0XqDNhydOnBgO1PQCLXhY5IQZwpY2MUzTMuDkZ+ViZCir/FbHKCwsbAgMtPLjx49vcHJyKm1rawv59+/ffRzRyyzB"+"z+C7qJphjoQUI7N3wf9AkBfYgSGfC0xxKgcOHOgGZqq7DPgBExcbg+G//wz/f/xmuAAANAw4i9ZGbqAAAAAASUVORK5CYII=");Resources.add("freegifts_menu_icon","data:image/png;base64,"+"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAADA0lEQVR42n2TW0jTURzHv3/nnE7d1C3nLd3cbJuXTDfTckVpYiRSElgZ+LCHKAjxwSKhkL3Ug/UaROJL4gW7MKpZYFhSiWV4DVJDnTh1/r39ne5m2zr7g6Jo/d7OOd/zOd/f5VD4T/h8Pqp1aPTxz3k6"+"O5lyf1/wUK/54yMfq6qqXFsaaueFe89aKwN4Aa2G8vJNhmEUoaGhug9Tlsq+ielTnvU1OB0OD3d6/JqhtrZxG9DX1yfWaDQrdrv9SKPxtfHrwCC1HBJxoEKbzl33AmaKB8H6KiyWGczMzuFmSfFTbVZmjUgkWmMB7e3t55VKZZNcLg8bGBlBo/EN+n9P4pgsAQuLS4g5"+"rIEwWoKzKhnihEKIxSLw+fw/JL7QNH2VamhoSKcoqjsoKChywsNBsNuOxRUG0ugo6LI1kEqTMG/bQI/FCm8wH1lCPhSiCDidTo/ZbBZQdXV1gQqF4j5J4dbo3AJylApotVqEhYVBSF7k8XggD8DtdqOpqxtuH4VLudkgDowSieQCW8S2trZiInjnDAiEzTrHikldkJ+f"+"D6/Xy6798aTzE9IS4nD8kBwul6siPj6+hQU0NzeLuVwu7eWFYGl2Bmurq34BCgoKoFKpWAd+kOFVB/Qnc3FQFAWbzaYkdRvbbqPRaJxa3LAnrS4vAy6nP0fodDqkpqaygGWy/7CrB3dLCsHlcJiY2NhIctm3DTCZTM9naPriFGlVdEgw6yAnJwdpaWns+bzViubBX6g+"+"cwKbm5tdiYmJBbsGqaOj4w5jsz3oGhxGRqwEDocDmZmZyMjIYM/ppSW8H53Eldwsf03qk5OTb+8C6PX6cJKzqXNwWJcnl4F0hbW/BbDQNKaZDajFEXNjY2PnysrKBvaMsh+yES7sPa1Wqv0ppKSkbAOGJqZgZWzfzD96ywwGw+y+f8Efl69XS/NU0jYOh3NUJpOxAPKp"+"fJ8Hhl+87R+90WKoWdyp3wPYckKKZyIDplOr1QyZOH1RUdHL/bT7ArYghYWFjwQCQX1paen4v3R/AeSaS1ILC2JNAAAAAElFTkSuQmCC");Resources.add("inventory_menu_icon","data:image/png;base64,"+"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAANkE3LLaAgAAAoFJREFUeJx1kstL1FEYhp9zzsw45VxSs5Fuk8NITldqMCWKIDCQiogW0UKoDCKCWrUOoj+gVYsocNGiRWBEi6A2CQXahJV2WdSgdNGiJh3NnzO/c2mhjZL2rc7ifR/e872f"+"YIlJH01f3X9sf6ee0VMCgQqryOO7j2/l7+Wv/KsNLAVINTZmujpOrdeeDwJUOMhwLt+UJ79IuyRg2vzSH6cGMZ7BAQGtmBbjZimtWvCWbeeyNzP70scbdsR2xxpCcc+N4zHOpCkw7Sbiq1NrW+q31x38nBt9ALhFCULN5fa9h7PrjO9RcB8IBiUAvnaksisbk7tk45MH"+"uZG/5kWATi8z3P+qt97f4sLxQIyIWIF1mh+M8b00SmSw2jtd3vPpGe8Xf+FEe/Ptg61Nh6rfI/WMJyKp1axZniYarAXrk+iTtLxLy6aGug2ZVCL1qO9DTwVw+dKZqx3ZVR0DAy9qvn7+JnhTxo0Itmw+QKxUz5cbz7G9RX4WCvLr6BfasptSieTWxNP+1w8DAL8nJ5sS"+"1SI1EqlhWbQWJSR+0THWk8M5qJuKUJWO4pxFOkNUlKLC2UxlB8boeFAb9rVuxvkeQkhAYLSPEALZkATncA4sIEtFgk7GKgCrjRZYVm5s5VH3NRz2n7YFAF7ZcqTrIt9z95kpq1IF4CQ+QoKqAhViZ3brAnOlMQZeDEEoPJfEzgOEFT5qtnNjDK8GhnAVo6gAjJk9RhkI"+"YayeBxhEGTl7EkoptjUnsdYgpcLaOZNSvHw7AoDWGmdZkEBILQWApf3kBf437S0OEKhQECtMqZIvHCZ59vjh60gZcDgnhQQxF93N78ACdfFIdaFQLHbfuX9+osTwHy4bB5h5T+YrAAAAAElFTkSuQmCC");Resources.add("list_menu_icon","data:image/png;base64,"+"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAC5ElEQVR42m1TSWjUUBj+XiaZySxtR51aXMBaa2m1FEVEVHA7ePKkCIL0VNFj8eDuyYMo9qAggicRBPHkQXFH8eClKFgUN0a0tbYVu02TTpKXt/i/uMBQXwgvhOTb/u+xyemKdDNpxsDwd2m6lFQQUmI2"+"CAWt3cuWLr6L/yxWDQKlpWS24yQvUqkUGMFprSEJhAuBMIyquay7M5/LvpgDEAShEiJmnuchnU7TxwEaGxcmQGbxOEYYcdQX8pN+NdharK97OwcgCKosqFaJUSY/CimQslJQSkGREqGAfCEPzsX3ahhu7mhdPlgDQIJZGEUQxGZUGAApJByyxSwLnucjkzMAMSqed3TV"+"ypYLNQBRFDLf9+HYNiSxmjgNuwEibEScI53NwnYy8P3ZI+2tzX01AJwAIh4RewYxqUjmQUFS+rRZMAHHFGhMqqa86SNdbW19NVPgUZRk4JB8ij+ZggGSSie5cMR4OvoKQzNjKGUaxtaUVl7jIj67s2uLz2a8WaVkzCqVym//xGobK8QW0/MXPopj/Vcg6UpTwDFZs3QK"+"ve17XpfSDVvY5FRFQSumNCVObEYyJ88mC03V6H5+HMUMUHA0TQZYvWAN9rbtw/77J3Cms+ciG/s5oaIwYDFNIaLb2DAlMiBl6z0eDN9Cg1sE0yHyTgGH153Dw6EXuFO+js3zt02woZEfZEEwmQTGEs8mQE0KXkf3MBk+w56Oy3j85QY6SxtQ567ApZe9aKnnmJfaDvZ5"+"8LsKqUgUJDErKpKdsBtLU4WPGBg/j7WLurGjuRcWAV/o7wWPHsFJZdFSODTN3pe/kgLJ4pj/OwNmpwbBzQG3hw/SCIexfskBuJmNeFrugUNZKJSwa0nfVTbwoayogex3gHQmLQaXSqNphKbGVn4cT76dwkz0FQI52KjCdRZj66KTn1xd3MT6B95J6n9Cij9H2qgwt1I6"+"sVVXb2Nav4EvR1jebqo0ZTpuCiFPty9bO/ELz+W0wwUdlkUAAAAASUVORK5CYII=");Resources.add("weapon_menu_icon","data:image/png;base64,"+"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACE0lEQVR42q2Tz2sTQRTH3/zI7maboIbsph48VJLquU2JIEoPCh5aLKIgBS9eelChB8HiD0IVT4I/qij00H9B/EU9KIWCx4jQg1LbgiTZ0mZjutlNt5v91bc56KlQbR8Mb+YN7zNv5n2HwB6N7Asg13uc"+"/Fz8Ef4X4OnUq3zgBx7jzEMD1/PBRx/NgyCAMAzRh+D7HliWlZEkqSEI4vrDB3crHUDp68JmrabH264L7XYbh4vJLjiO20mKQBHExT0P1z7CRFGsLC0tFl8+fzxDpl5MrxnGhholFwoFaDYNKFeqoOs64GnAGQfTtIDgZaOKfKzQRVBaSecn702UyLUbN0dM00wxxgIu"+"8H48NbHlOBCE4ZFkIpm1W5sbRrOZrdfWulZWloFSCrlcL/TlB5aR+mjHLoxdH+/LKGrifvH2/OXRK0+kuDw+++EtCGIcFEWBVFo98+nju887Am7dKfJEl3yVUdLCdxhuGFb/+zevs6bV6lTRc7Rn7Mv83PSudXDh0ujgqlaZq1Y1sO0t6D6cKS18K+V3DRg+f1Gs1/Xf"+"mqbJtm1DLBaDVOrQwD8p8fTg2dly+dc5Ve0GTVuFZFKe+QM4cWqIUQ6MhAEHCBkOjgJAjzFCMEYY5/CsUV8fiVrp+QF2I/f9L+DkEEVhxwgFAYMCZUSkBER8MBlbfIASctBx7GMIyciyxFAToecFjf35THuxbaMI8dyQO+T6AAAAAElFTkSuQmCC");Resources.add("link_menu_icon","data:image/png;base64,"+"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAwZJREFUeNp0U39IU1EU/vZckhJZQolhg0SWWqbgqEEF1d+NJDMESc0KN8hS26aSmSSas2Z/lNPIWoZm6WZh/oiIkERo/gg1JajQENLE"+"uaGtua29d7v3mWFCDw7n3ffO+e75vnOOxDYwiP89EokEUqkUk5OTpuHhEQ0RBPh5HjHR0XUjo6MajuMgXQkmhIgJawE4TtJssw2k6nWXMD09A4fTgbZnz9UUhP3X/AVgaAEBAaJfBVDb1PQ49WpJMcorDCC8r9K56CpUqVTo6uhQ0/hlAHYTS7ZYrGLJEgZCK+J5Xl2g"+"16GisgrXy68paOiU0Wjc7PN6sxkVMIr/8l3HSgargdCzQP3MzHf88vmgOX9h8KfLJXk/PJodIYsE7/eLl3CrAZY5c6DYolg8Fc3c0IDSK5dhn50VpUpKOo7urk5sCgm1yrbvWAZYEY8JyYwhCzSZUkBZaQnSM85Qy4LqaBK62rsQH6d8aTRW5uNXEKSM+x8QkyDwGkIE"+"EcTv5+nNxcjMzIZ92onu9h54l7yIikyoy8s/W5XRiKkvyAFarW0Y+TDWrNMXEvu8g4yPfyS6giLidrvJyZRTtBwkMjtmQG3aQ5DU+yBp1DLMMJ1uAKSBgYEW2qpknS4fd2pMoIk4cviQWPbct3lktWBI8OBW6Eaod0cBe8P16J+pwtgnaBwLtGG2/oFkvU6LGtNdlJYU"+"KxYXf8D8wIyMzEzE7VGAULF5P3LlEcCCC9gVahC9XEa/C1BzAhWKTZjH7TI0NTYO1ZluK7ZFRGDJ7YHH4wWVBAIloggvQO4+IurFPDszvTkf7bHdYadc1hfQHmhzLuYNxsTGorPjBeQ75S0smY4Gej4bUPZ6uVvMszObNy4xMdH6pPkplEolgjeE3Nh/4CD6ensRn5Dw"+"Sl+UrQUFWHLCOjFNBaPvfV8LRc/OSw5YGaTsXr252mZ7l8zQ/XTCtoaFvamqrDhXX2eZeBt8Ao/SIUu5ieqgUCSzstnYsORWLfJX1o9Kgi2rFtFJbWLNdq+NmWO78VuAAQCvqWY4vpJZwQAAAABJRU5ErkJggg==");Resources.add("reminder_menu_icon","data:image/png;base64,"+"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAm9JREFUOI2N0klIlFEAwPH/e986M6gzOpOayVRoJUYejBKqS4lLHYLoVBDZdujkIY8J3bPoZIZCCEHXoEPbKbKCFujQXoiag5WOM04647e9DmalIviHB+/w+PE2wbLyfcRV"+"qKYBYQi83LvQ0b6UKDq0fNnfxOIk10OlqGi5pm/ef0SraNAQkmDyY6DSbx6Sf9tpH37+YVUg10O1LN83ZO06US1LKhG6DcJEIVH5abxPt9Pkx1qsg49fLQckgLATA9bGsmppzyOYA+UABUSQQRoORtW2UpyfN/3xAWsFMNdLvZ4obZZyFFH4Ct4EMAMqByoL3jcEKbT4"+"uu3e6xsHVgDCEE16Ii6EGQUcEAo0DaT3B8mADjK2HnS3eTmgC0PYQnpgVi3ciAgWjqBcoACaAsMAZSOLw00rdqDmgw/B7DRoEQhc8HPg/gQ/A8IBTYBpIiyJjBY3ei+bSpYA0uSxn5kaU/kJQAdnCtxJCLIgCqADlgmWjohETGHZx5cA1klclc+e93989lU+Bb4DziR4"+"aQh+geaCbf5BDDCilwpDB+JLnjF02rvr/xg/7g2/zgZT71HOLMqdBTe9MLws4KNUwJxbF++4Yl7v6rrw7yMtlrssymRRyTEZi7XIaHSPVl4Rk7EYwtIJAo/vXxyefm7CKKuhu/viYDgc6VgC/F/2apE0k4nd+obyc7I4emI8ZcpbD+Kk3WJOnTnL/fv36O8f2LMq8H/D"+"dxr2dvYWDW6tb9xkmhaBEox+G1eWZdWtCQAoLY0mE/GyR+1trTWjYyna2ttHWlvbduhrBdLpzIht2/ufDD3bWVu7JYiEQy+SyeTMb4VU55rpNi9QAAAAAElFTkSuQmCC");Resources.add("plugin_menu_icon","data:image/png;base64,"+"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAChUlEQVR42o2TX0hTURzHf8c7N53NaWYroWJZONB0IiIjsKUvTgpHRG8VPfXSw14qQ2hOzR4yhaSwQIleknooIpKkECVzqYQoBAWJUjiU4f7cu3t3d++5p3Ov29qqQQd+/P7w+37O75xzL4Icq8VrNdU5"+"bSMNltbTCDGG9ejXLysBv+epe2k6sw/lArgfV3suNfuGjpU1ACuxsC1uw4OFG4vP3XONOQEneg5bEYMqCAEJ5aHm4yddd9yV5ykgCsvBz/BqZmxCjiuDskgSikKQGJVXsgDtY/aprrYBJy/HAKE82GUohUgiDJzMgSDzgBUJQvEgxGQWImIY3k9MdqcBerMOtfTVzw5f"+"eOKISqqI1UxtjkmsBtHipE9gESZHZ/rSAGOFAbX1OpY7O3w1rBzJaubxTsyrNcxBQhFBkHiYerh8CxUdKkBNndU+xDEVtfXV51w17aaUiMc7Is3TXBVy2jQRkJQEfBj+0Y8szt2ugUc9b/YV7wWZnlGAiCYQkoA45oHDYToBnQrTy/SH1zaX2AVzpdG2Oh7wogNnLd7h"+"ez3dDEMomZ4dh6gPaSJ1VxWECdaOiTGBl7fXBzfGA9dpqqMmov0dFt9FX9PNOAnvXAbJdCidawAF4MX97yPBj6FrunJ9YWw2tIWMtqJ215D9dYlRh0RJgeLCfMhEEAJZa21DZpV4gcARQe+/Om9VX0Ff7Ci9kl+uP3LUdfBMVZXRkikgGUEqZpAONjkB3nWtnEo9oway"+"9zd+stoNdX+J05OQdE2g007f/ebJ/BKZWq9jrqyWNP5rV5IFApDohS6OrvZmAUouV7411ZtaUwJCfvs0JFlTaDH47Kf3z79xDzUz/N9SOVu/AItPaIZBhlrUAAAAAElFTkSuQmCC");Resources.add("update_menu_icon","data:image/png;base64,"+"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAuJJREFUeNqkU8lPE1EY/6ad6dAOSwttLcUolIrAASPVWEncIulBjVESl+jZg4l/ggdvnkz06EU8FA9iNMaIYvRgmhASUw2NQJQuLBZZ"+"Oixtp515s/k9iojRxIOT/ObNm2/9fQtjmib8z8PS14n+pft4hP4ijyNuIzhEEYOJhq4TTdNAU9VfDnRdj4Fphi5F/CFFqWTEsgw8eTcP54837hbXiSebk8nsQlkydJhA8fefESz0hd6i6HV4YGg2ziAlqaCCIutAI6nEYATO6gv6HLvPHPZ02lgzgsECvzlQFcUPhtZz"+"OuwN5ZYkqKoCIIqKxgQG32YKo+OL1VJZCa6KcmvkgHs/A/pF0zCcSGczA0L6mr18ML9SwtRNePRyKm5D1pqiACrF57Lrb17FZsqySgLikhTc5ea70OaIjnXYqAFRlJ6GaraeRk1kxBTeRx8+m6jkiE4sFuYjMvMlpnLdHf7ane4aVkGdYyh9UaEgy21WC+PQTANSmeU1"+"XdNuYPS7iHi5WITC6hrNciidWeZRpwl1A2hzELGVgVTWjLyqmRvfRgmpcFwU+xFFCrTFMSmfj1pZVpA0s5YDg+oJW20ksvxhuSDX6gzLe9yCkp3LncLIQxzPw+Z8UIR9vjqnKBtgBbWENl+3d+H97DdxUgQu7WppwlqRozg03TJmgjI42dcTwjPs7mxtRR2Yy4oreB+h"+"sooDQmLTX2YSVU4hmbUK6UBv2F6zwxXBWoQwVUiVGNh3oTeULFvAEOyQHJ9Oos1TOo0bDpDnmlwsPY4PDn9y1NlT83xd0jwULjZePleDxYN1Kw9jBSu46h0wFn0eJ5JEo88XX9+q1KAwcAUs3va0svds+fODUqezLSBAS7NN8ftMOkwGDoXdYsKCAdBx/Wooca+fmk1q"+"ixNRhm4jwzD0B62qh7G7GsDTLkC1n2NI3gBv1zVo2NP2x5qJU5PGyJ2b2x3YEA6EHcH8Y4vpxmm0fD8EGADFhK0+biwMlwAAAABJRU5ErkJggg==");Resources.add("run_menu_icon","data:image/png;base64,"+"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAYJJREFUeNpi/P//PwMlgImBQsASGhqKIsDIyKgEpCyAmJcI/WdZ/v79iyzACzTAsqSkpFJUVET716/fDL9+/WQA0X/+/GX4/58RaAEr"+"AwsLBwMzMxtDW1tFJsufP3+QbTczNzeP+vLli/aHDx8YQHIwDLIIGW8Bgo0bNz5gYWNjg9uuoKBgXlVV5UWM369evXrc1tb2NMvPnz9htpsGBgb6IrsIFzgJBHfu3DkhLCz8luXHjx8gMT5FRUU7ExMTi9+/f+OPNiYmhoULF+4AWnwGZDnLt2/fQIKWISEhXlDDCNl+"+"5ubNm8eBLv4EjkagAfxKSkoOZmZmpr9+/cKrmZWVlWHmzJl7vn//fgKeDoAhbh8dHe3+9etXgrYfOnTo/LVr144BDfj45s0bBpAels+fP5toaWkpsbCw4NX8/v37jz09PUeePn16GKgHEfWcnJyZwDCQIybqgPF/GRhOV4HMd0D8Foi/MQIJLiDmAXmHyOT/D4i/gzQD"+"8W/GAc+NAAEGAH6Du6zbRlpcAAAAAElFTkSuQmCC");Resources.add("timer_icon","data:image/png;base64,"+"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAANhSURBVDiNZZNvaBt1HMaf7+/u8stdclnb2W2ZY223adratHPNdMkyq8hWRaivHPjCPygdVCbKhm8EQV/o"+"Br4QGfSldfO9RTu1IlWnNmTUZXNWdGOJTtc/4XLJpXfJNZfrnS9KR8UHnncPH3geeMj3fWzWp1MX929taxtTFTkZDqvbQ4qMWr2u2auNbLlSGX/skSO5zXnaAIy+doqSBxNnImHlpc8nJ7foJV3q6ekGAOTzeWzfscN95vjxlXqjcWE2O3f67Ntv+XcBI88+R4+mD/+8"+"+Pftzl+v5VqHhobAOUc6fYSICJnMrO84DrLZLB5OpoyOrj13pr/9buDj8XO+CADx3p738jf/6LSMSms6nUYgEIAkSbh6NeczxiBJEhhjSKVSKBQKLY2mg0OJwQ8AvC7c1sr97W1t5zI/fN8aj8fBOb/rwUSCotEo6boOIoLneZBlGddyuWBvX7x78svpGRYOhcYuzXyj"+"7h8YABFBEARIkgTO+fpIRJBlGZxzSJIEQRAQi8Uw8/V0WA2HTzLGKKXrJXFjVcYYRFEE5xzECMQIiqKAcw5RFMEYAxFhpWoIPCAmGQ8Edu7t6kIylSLP8+D7PjZ6EwhKKIR9sfupb6CfBEGAbdvYF7uPjGoVwUBwm8iIrVMZwXEcWJYFIgIAOE0HYkOE67pwXReFQgF3"+"Fhawc9cu+J4HABCbbnPxVr6w9ZPzF3zP86CqKqLRKHZ3dlL+Vt6XJAlVw4CmabAsC3a9jvMTE77nA07TKbI1z5tta2935+fnoes6bNtGrLcHN2/c8OWQQnJIIU3TUK1W1wG2jdXVVXR3d6813bXLzLRq40ePPWE6joNarYbEQwdxZW4OfxYKKJfLWFxY8JeXl1EqlWAY"+"BkzTRLPZxOPDw7UV0/yQfN/HO2ffP2MZlROZny61ch7EmutCVVWoqgrGGBzHgW3bME0TlUoFL748WlVbtkyMvvD8KQYAV365/mbH3j1/DT/5VCWfz0PTNBSLRTzQH6f+Aw/S0tISisUiKoaBV06+Wt3d0fHP7OW50/8701Dq0LstkciJi1NT4d9/mw+4ay4YExDkHAcG"+"E87I0yN1w7Q++jGTfeM/Z9qsz774qm9b+z1jIVlORyKRexU5CMuyFuuNRkbXy+ND6cPXN+f/BU+TggAryQj/AAAAAElFTkSuQmCC");Resources.add("snapshot_icon","data:image/png;base64,"+"iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA7BJREFUeNrsVc1LW1kU/72Xl7x8mxg1ammLzggGygyM4mpAprS29EvEqouuhGLpykUXBdttF/4JFdcOKJ0ZKHQ5ji2UVrQftJB+WGpN"+"rJo0+p7RfGgSe85J4mg3HWjdzYXDve/ee875nd/93fuUnZ0dHGRTccDtwBNoPT09UBRl79z5iYkJ0Pzdbw3O9GulcSvZLzwYGBi4TYaRkZEr3xj/CdmM0t3dzR9XhoeHbzkcjsB/QfW1tVQqlRgaGrpBw9taOBzmuet9fX2BmpoaxGIxtLW1YXBwEFNTU2hvbxenQqGA"+"zc1Ndsb29rbMWa1WOJ1OuFwuqOq/x2m32wO0X3gvJ3jS39/fwI51dXWYnp7G1tYWOjo6kEwmkcvlEI/H2REVFRWw2WwSiPeYponV1VVUV1dD04qMWywW5PP5YoKymmhiX/nsnEgkJPjKygr8fj8Kqgv3H7/G09mHeP/mOUKhEDo7O6WKSCSCYDAoSdioAnVvAks2m5UF"+"VpTb7QZ/c2N0TA8HeP3BxIW+q1AJoZJLCvrR0VGcO9fJJCKTyQoDXAEBU/beA405XFtbE443NjakAqZnbu4d1teTGBsbw6YZw707o/hj4nf8+dddLESiQtvs7Ax03YVw+BWdoUmJ00IRs6L19vZygpNMD9NRPsBPnxIwDJMc4qitrcfS0hL1EUz+8wg//NyFE0c78Obp"+"HfExzTWq2kdVb9FhW2kOnKBI0fj4OPcPurq6jvPmTCYDj8dDVaSILk1M06xiTNXhxp/Q0tIiIDLGWwr0obRuk+BsiiIUFROwJKmFyhUwf8Xz0GlcoNLtFARoaGgUmbocHsy9mindUkMoqq09JJU7HG6Srk1A7Z4Bl05mMt8sQXZk/nmjrjvh9fqJrlWcPn2BEqRQyMaQ"+"/DiJ9cW/ceLUGVKQG62tv2Jx8SOqqoLkp1NYRSjiM1AXFhZAZnJgvmTpdLp0iXQyu/BvGOsyvnTpMiorg4RQJbROROeeUeJuQc8Cqa8/IiossaEyI7syZYnyzeSsPp9PKFJVC10qOxobmzA/P08IAzh79qLonlFmMmlEo1GqMI6mppAkLT4Z2KWonEBhaTL/TFVz87FS"+"AlUQBQJV4ry8vIwXL17ueyqY1lDoGD0X7n1vEjEhsTVd1xnxvWvXbv7o8fgrik+3gi97r9dG6vJK8Hw+JygZECvoi+ee7o3JTTcMA7ziIyX8RpvbvuePhiT9iKqY5AR2MkepV75TfBI2WC1Z5f+f/tfaZwEGAF5e0kpGJ78XAAAAAElFTkSuQmCC");Resources.add("createtable_icon","data:image/png;base64,"+"iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAuHAAALhwGTQIdTAAAACXZwQWcAAAAYAAAAGAB4TKWmAAAC0klEQVRIx7WVT2sTURTFf9GaOEVtcSGoO9NEMMmkTXcVpRVciOJSwQ/gp1BcCeJesFIQEVwE"+"lxUEcW1RaSapYGe6L5RiWpoE0+jc62Le/EltbFB88Jj73sA595577gz855VKHh49fngXmP8boJ+7P6fu3X/g7L0f2XOev37tJtlsFsuy9gXq9XqAAtBsbuH7PhsbG7x7/7Z248b14uLim6+ADCIgm83i+z7tdju6U9Vog6KiKMrS0gdmZi5SqVRYX18H+DI6ap2vVl97"+"Awksy2JhYSEARkHh1u1boKAqoMqy41C2bTqdDplMBoC5uTm63S6AW62+Tg0kSGZtIjAZh1VM2jaK8r3b5emzJ3/szb4E+Xw+JlBhubbcJ5Uph6nJSb5tbvLx8ydSwOkzZ9n8tnEwQaR1mHG5jEKgvUpUTbO5RSY9wuyxWZrNJiI6HMHq6mrIhKKUbRsJSVGcmoNtlxgf"+"H0PE56hl8aO3y9j4Sdy1r31YhwZ0AEWiCkSDzEUUFaFk26hpevpImvTICNlz58jl8sP2IIeIaTCK49RQCRwlxPIFTyOpCpcunxqOIAQPKyiXbQOifVUFEooxmu4H9btErVYLz1vFdV1c18XzvBhUBFGhXq+DBrFKcN9oNIa3qYoZsrDRIsY9gRzFYjG2rKmmWCgMT5DL"+"TURgIDh1J5ZBQ/LwkxFkpKrMXbk6ZAXGnmFcKtkRiCqICuGwicaTflAPothb8/C8NTw3eKoYrTWQaqWxYu6Cs6A0Gl8OlCiOI4cQSRLPBRSKFyJ7RneFC3Q67WSyspcgA9DptMlOTMSWRGnU6wnAQJ6IXCV6N3PxUoh1FOgCkiQ4ErvI+NtUUywVjRwkvkUxeDQP8RoF"+"ensJ/DCoTE/zjyvqZ5Jgt7XTevXi5fM7/4K8vbVdNdkr9P/0U0AaOA6cMGVmgMNGvsMmoZTJUBO7C7SBncT2Q5L/un4B6tEruiWSAgYAAAAASUVORK5CYII=");Resources.add("refresh_icon","data:image/png;base64,"+"iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAABIAAAASABGyWs+AAAGLElEQVRIx62Va2wcVxXHz70zszM7s7PeXe/L2Zft3dhev+omsV23VGmaAiKqmkpRVdQSITVUFSAoCIl8KSDxBaQiVIlIpR9AqloQ"+"lFRNaUuFWrt1CU6CXcd27Gzs2vFjs3Z2vE/vY3bncS8f3JgEJ6EfOB/vvef8dP7ncRGlFL6oEUKAUAoMxoAQ+kI+7P96UNd0tHxNCS+tpfuVXKlN0w3eaZdSLUH3eDwanLOJgnY3f3S3DJavKf4Pxy49ZyLuab/f1yLaZNYEBKWySjcVJVMvF94+PNDxYm9HZOFOGd0R"+"MJVY6f3H5Gcv9Xa3P+R2NyKDYtAJAlUnoBkUNJNAMV+AxcTcxaHOwLcfHuq+cANSq2vMSmoz0ORxKrcFzMyvxkfH51+LhJp6iluVRKlcWUUYO+0OZ08wEnGYmIOaTkAzAWpqFeanJj89dqj7qVjEvzg5t3zv2PTVZ64rWf7ks499f1cN0plCw5t//9cvrVZBokb9Wwf3"+"x95vkMWCpun8zMLafTOTF38Wi3c+yAgSgEEAcwKEO7r2vzUy9SurwF/PEetjDOfytbUKJ91OuboL8NYH40+uKznxua8/cmxfZ+tljHe0NQ4P9Qz73cmrw+Nzv4t13XMIYw7ApGARZfBEux5VqhQ4iw3VUgv5nu49HyOEAN8cPJXOeWYX1nq/+9RXfnCgO3pz8B3r2hta"+"ju1x/jQxO7vJYQQYAVAAYCUHwrwNUUMHRtu6FAv7E7vadGZ+NXr08IHX+zpb5m5X+MJWhb8wvXh/YiX9bKOvSUKIAkYIMKKAEQWBQ1ArlcBvt3zkcsilWwC6YQLPcYqzQeJyhZJkl8UKyzA7d8NjlwY/mUj8sLk5cuTA4ICMeStU6iZgZAJGABghsFoYyJRype540wjD"+"4FsHjWMZKFVr+z6YWPq1U7YuyQJzIeRznN8b8c+4HPI6b2EreyNN53VTI4m5xD1WmxyWGhwSJ4iIYzgwCAWeGMAb5UQ82jm7a5JrdQ1fWVW+1tzVFxIlMQRa9aGNUlFbnrh6ner1WYdkGQv4nOeavM4zQCnN5EvNKSW5f71UG9SB7eVEe8hEWHJLzKi30ZHbBUhuZAM5"+"Fb4ks1bQCQKraAevw2kRWBRmqBE26uqRjVRKe/fjkSuRPY2/OfHEw68euk8cLVfrrJIpeNY2su2LSWVfMOQ5S+E/s7UDmP0sOUhFZ7NqAPAsACEUDNMEA2EAasKmslkuFgqjB/vjv7//3raRBpuoAyCwiYJhC/s3WsP+je620MTwudkOXTcZlmHMHUC9rqMrq5tftTjb"+"LKpOQOYxEEqBEAQIAcxOzWz5ZPZ73zz6wF/sNqt6u72j6Qbzh7+efbq9ZU/CKljMG+d4W55MIKvCg4iXwCQUMBCggIBQAIMgCITDUlnV2jFCxh2Co9fOjH7j0vzqA/290U9vvsPb8lwbYGVXC9IqUF27rCTnJtOYGEAAwCQEnB4fY3V6nz8zPPGjzVxRvOFMKYV0piD/"+"6b2x50fOX/7J418e+GOjQ67csk2rtTr+xStvv1zHwqNe2XJ6qKf51VQ6176UM3/bGu+2sxiAZzFYOQyb68natZXlv7UEGt8UBcv1ak1vzhYrT2xVagcFDr/4zLFDP79ZHgAAlM4U5DMfjj8+0BubjEcDCd7CkapaZ19/558nVdb+QiS6V2AZBDyzPUhUr0E+mzVMQzdc"+"DZIlmy2YqfWNl588MvSCt7Gh9N/yIZMQAEoB41vWEuQKW8Ib75//TkFnf9zR2eWzyzawcBh4FgPPAFTLWzA1PZcEs/7S0cP9rzR5nRWA3fVBlFJQFAWmp6fRwsICWllZwaqq4mQyicvlCruUyg+1xPcd790/2O/z+V3ENMxUci19cfzc2fTalT9Hg+6LgsCbwWCQiqJI"+"gsEgicVipK+vj4ZCoW3A6dOn4dSpU8zi4iKbz+dZVVU5Sin7eRsjAOCBsTSyvOSgxCRmvZoDauQBwADY7gWEkG61Wg2Hw2G0trYaJ06cMI8fP04RpRRM04RyuQyZTAZyuRxKpVJI13VULBZRKpVCAICAUqDbm/nzTkVAKQWv10s9Hg/hOI4GAgHqcrmo2+0GWZYBY3z3"+"T///Yf8GfBnc0hL3m9sAAAAielRYdFNvZnR3YXJlAAB42isvL9fLzMsuTk4sSNXLL0oHADbYBlgQU8pcAAAAAElFTkSuQmCC");Resources.add("chrome_bookmark_icon","data:image/png;base64,"+"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2dJREFUeNpcU21oG2Uc/93lkkvv0iSEyuwSujRsa2kaGyWKDmFRsM4vUtTpXroRma/MT51OUBC/+PLRr9YWKps4FG1BN1BcOHUUv8xm"+"q6vbuqZNmiZb3l/vrte71P8FlM37cDw8z//t9/Jn8L/vuUNH99t5Pub17ozyPO/Xt3QYhlHdyOUkVVU/+/7cV7/eHc/8e3j+8LjLarHMHHh6dCzQ70erJcPG26DrBmRZRrPZxI3lZawkVyVN08a++/pszcyzmL8XjhxzCXZeyqVT0cFgELzdjt77d8Dp6Iaz2wGXywlR"+"EGHhOOzs7fVnc7kDA0PBc0uLVzdZs4Aoih+ePjUR7g8EUCoUsMvnQ/ziL3j39Nt46+RJTH0xCVWRMTQ4AIZhEB55IExpcx0IB48eH3lm9KkEZ7Nhd38/OAuD2dlZfPv7AqyPj2OwpwuV5CK2/4rjo08+haKqkH67BN3QkUyuRllBEGKh0DBu3VpBrV7HMEGYn59H9dGX"+"8ewT+/DBkVGcePUNbHlDmJmeQuH2HRCZcDgcsFksMdbn80bv5Atot9twOrvRkhXUajUYnj647YS524b7RCusuyOoNxpIp1ahNetwiSJcTkeUEwUhXK83CAyDttEmyXSwdG5Q8I83y6ioOjL1Tawnl/Gg14sXDx3G+QsXIMXj0Iy2nzMoiWUZkDQoVyrYIt0jkQhuX/kG"+"f+AgLuda6MoswHsjjidfer/DQaFcwQ5fH7RNFVyj2VxjGNavaVtIpdchdtlRLZUx0m4h//N72CZoPlJl/J0JDIdCWPr7OjKZDSLRgCCKVa5cLktW3hYjKMgRQT+d/wH+XX58fGoCbrfbRNaZSlYUrK6lcHkhgfV0GkEqls/nJY4eZlKpdKynpwfXlq5BI+ftGQpieSUJ"+"NxnIRvJWqzWQlTsTJhIJbJP+LJmKqs9ZFhN/pvoCgWggEPDLrVaHvDbDolgsYSObQ5K6rqXSSGcyuE7jl0olPBR5GKViMXF2evJNznSToqhjVFnaOzAYzmazneRKpQqOupjLYuJtkEdAvR95bB+9lau0YLF7lunYiddcRMqcx+OJFovFjqxut6eTZC6UIArYJNaL+XzC"+"0PXYmenJK/cU+K/QK6/vZ1k2RuxHBYfDb96RP6qKIkum/89Mff7l3fH/CDAA6OOVPZK/40YAAAAASUVORK5CYII=");Resources.add("victory_coin_icon","data:image/jpeg;base64,"+"R0lGODlhFQAVAPepAK0BAa6urwEBAbS1tZ6en7y9vdnZ2dXV1eTk5JeYmKytrcPExLa2t6wLC7u8vJ+foMvLzKamp5iZmUxMTMTFxYmKixISEnl6e3h5eeHh4ZGRkhsbG9LS0iUlJujo6IKCgygpKYODgw0NDZSVljExMcTExHp7fEZHR8fIyLi4uUdHR7JcXMzMzX5+"+"f52dna0MDLy8vB8fINvb29DR0YuLjKROTtra2oCBgoGCg7e3t7GHh+Pj48/Pz69ZWX+Aga9aWioqK5aLjKkzM8LDxC0tLUREROXl5tTU1Lh3eL1oaF9fX5SUlT09PcCVlYOEhYKDg6+vsKenqK+vr0JCQn1+f7E7O9K8vJqQkXd4eXR1dVRUVCQkJIeIiTMzM5WVlbit"+"rrGys4uMjdzc3N7e3szMzI2Oj8vLyxoaG4yNjkZGR0ZGRt/f35GRkawKCqFLS9jY2LycnXx8fQkJCb29vsrKy3t8fLNoaLY1NYqLjLImJs3NzqpUVIWGh4SFhsLCw6wWFsWwsLq6uwICAqRjZJOTlK4NDScnKJ6fn9PT04KDhMPDxOLi4q5YWLW2ttzd3X5/gIiJiqip"+"qS8vMIWFhrOztIuLi+np6dfBwQcHBxcXGEhJSVtbXJCGhwQEBIaHiMFra0NERDU1NpKSk5V1dggICG9vb8XGxr6+vqusrAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAKkALAAAAAAVABUAQAj/AFMJHEiwoEGBncBU0CBBCAAAduDkuWNlDIJQBwUWyZAjxYBGBNh0yChQwKQnDhZAQGQjg5EWQDJKWXLBh6cybgD8UTCgAAVKJEgKHZpKDggmaiRlEiSUSAgCEQIwOGVKzwEx"+"OyxtwlRQBAoqfcIQqgHgxY8qfuhwMJDmYKVDGOrggDQqwYMoULJ0Icq3L18tGOaQMXBgyIQYQkuh4umTxREZizx42XAwwAi7exitQNIkyadLCHgYKmhBkRM8oq40ANDjSyFAM96sOSGAoABHFx7xQRNkNQAdKSGYAWVwSwksJm5w4dRmUFQGMJSQyugiEI04iRZKiPRB"+"E98zE1RMBbHgt29AADs=");Resources.add("combined_icon","data:image/png;base64,"+"iVBORw0KGgoAAAANSUhEUgAAABAAAAAPCAYAAADtc08vAAACu0lEQVQokW2SzWtcZRyFn/fe9351PjKTBGylqVZDqJB2Wkit6EYCgroo6MoudecfoHbbtOBGU8FFF0WEgv9ARWosKFLBpoKlGk0GTNQ0yaQhncncuTP3+/5cNFIoczZndR44nKMYosXFO6pUKjmu63n1"+"eu1A5+HuTJLE03khv1Sq1aYIXd/vpY3G8b4eBihXysc8x71UrZQPR2F0LNFuNURTsjSOZXZty1pBZPv27cVP1DDAg9b2m+1+/5u7a/fZeOjTiXL6mVC2TMYO2IyXbGZPvkAY9D7WANmd15R+8aYAyE2MVrxlb+2k3Pj5N/w4Y6RWxbJs9vKUZtAnCgJOHT3MaMlVjyqk"+"e1Z263hVSeiTtSq17rU3bHmdmmPgGTFSxGRxjolQNhWYYFmW2I4j+wBfo5z3Cik9EOPIpg6b7zjhhDRG/lW9cI9bW8+RFBYgFGlKEoekaSrKMBINoF9tDtLvGwlifi7i/k7YqR4tFvKR8cC89muduysejgbLEKIw4mC9TKfdjlyTZR1dPzGrMGeKkKeVQQWMl0kTRo0d"+"Mzc0U9WId6c32AksFu87tP2YM680iAb9pd1d+UmDEsQ4I6nxtkghgAJFgcmoKbw11ePblYi1TYe+73BycpLpZw7Fgd+9vLR0b1u7Z+/90P9iwlPe2CzKrMHjZRUFg8yl2Z2QtYGnTk+P05g60iJP5ldX17/+8KPzuerOcRpDfaCc0kso4ynAfgxgEOPmf6WTlSYn6HnP"+"/2O6lflWa+vLuQtzAYCWjA5Krkoc/EjBZ/sdkEeMtmH4nx507GXtlu0/i9r6Zlet/h8G0EXM35KwDpxC0QYWgHP7PobAsxc3FuTshpq5/p08+VoFsPs+NopzGCwjJAjzKC4CIcIhhBvjV4iG3V4DSEquLL4iI5eMOooLwB/KpI1gipANCwP8B1REQisrwrTTAAAAAElF"+"TkSuQmCC")}};var URLServices={toArray:function(e){var t=new Object;if(Util.isSet(URLServices[e])){Util.each(URLServices[e],function(e,n){t[e]=n.name})}return t},add:function(e,t,n){var r=URLServices[e];if(Util.isSet(r)&&Util.isSet(n)){r[t]=n}},shorten:{bitly:{name:"bit.ly",url:"http://api.bit.ly/v3/shorten?callback=?&format=json&longUrl=",format:"jsonp",description:'<span style="color:green;">Work with any browser.</span>',login:{name:"login",key:"apiKey"},parser:function(e){if(e.status_code===200){return e.data.url}return false}},"JSON-TinyUrl":{name:"[JSON] TinyUrl",url:"http://json-tinyurl.appspot.com/?callback=?&url=",format:"jsonp",description:'<span style="color:green;">Work with any browser.</span>',parser:function(e){if(e.ok){return e.tinyurl}return false}},TinyUrl:{name:"TinyUrl",url:"http://tinyurl.com/api-create.php?url=",description:'<span style="color:yellow;">Need cross domain capabilities to work.</span>',format:"text",parser:function(e){return Util.doRgx(/http:\/\/tinyurl\.com\/[\w\d]+/,e).$0}},Google:{name:"Google URL Shortener",url:"http://goo.gl/api/shorten?security_token=&url=",format:"json",description:'<span style="color:yellow;">Need cross domain capabilities to work.</span>',parser:function(e){if(e.short_url){return e.short_url}return false}},IsGD:{name:"is.gd",url:"http://is.gd/create.php?opt=0&shorturl=&url=",format:"text",description:'<span style="color:yellow;">Need cross domain capabilities to work.</span>',parser:function(e){if(typeof $!=="undefined"){return h$(e).find("#short_url").val()}else{return Util.doRgx(/value="(http:\/\/is\.gd\/[0-9a-zA-Z]+)"/,e).$1}}},"JSON-Spokon.me":{name:"spockon.me",url:"http://spockon.me/api.php?action=shorturl&format=jsonp&url=",format:"jsonp",description:'<span style="color:green;">spockon.me short services </span>',parser:function(e){if(e.status){return e.shorturl}return false}}},unshorten:{"unshort.me":{name:"unshort.me",url:"http://unshort.me/index.php?r=",format:"text",description:'<span style="color:yellow;">Need cross domain capabilities to work.</span>',parser:function(e){if(typeof $!=="undefined"){return h$(e).find(".result a").attr("href")}else{return Util.doRgx(/class="result".*?href="(.+?)"/,e).$1}}},LongURL:{name:"LongURL",url:"http://longurl.org/expand?url=",format:"text",description:'<span style="color:yellow;">Need cross domain capabilities to work.</span>',parser:function(e){if(typeof $!=="undefined"){return h$(e).find("#content dl:first > dd:last a").attr("href")}else{return false}}},"JSON-LongURL":{name:"[JSON] LongURL",url:"http://api.longurl.org/v2/expand?format=json&url=",format:"jsonp",description:'<span style="color:green;">Work with any browser.</span>',parser:function(e){if(e["long-url"]){return e["long-url"]}return false}}}};TabObject.prototype={showTab:function(e,t){if(this.buttons&&this.buttons[e]&&!this.buttons[e].hasClass("disabled")){if(t===false){Util.each(this.buttons,function(t,n){$(n).toggleClass("active",t==e)});Util.each(this.content,function(t,n){$(n)[t==e?"show":"hide"]()})}else{this.buttons[e].click()}}},getButton:function(e){if(this.buttons&&this.buttons[e]){return this.buttons[e]}},buttonEnabled:function(e,t){var n=this.getButton(e);if(n)n.toggleClass("disabled",t===false)},buttonDisplay:function(e,t){var n=this.getButton(e);if(n)n[t?"show":"hide"]()},getLayout:function(e){return this.content[e]}};var TableObject=function(e,t){var n,r=this;var i=c$("table","cellspacing:0").appendTo(e);var s=c$("tbody").appendTo(i);if(t===true){n=c$("tr","class:table_header").appendTo(s)}this.table=i;this.tbody=s;this.head=n;this.row=function(e){var t=$("tr:eq("+e+")",s);if(t.length!==1){return c$("tr").appendTo(s)}return t};this.cell=function(e,t){var n=r.row(e);var i=n.hasClass("table_header")?"th":"td";var s=$(i,n).eq(t);if(s.length!==1){return c$(i).appendTo(n)}return s};return this};UserConfig.create("plugins",{all:new Array});var Plugins={SRC_PLAIN_TEXT:0,SRC_REMOTE:1,RUNAT_USER_CLICK:0,RUNAT_STARTUP:1,CODE_EMPTY:"",sources:new Array,collection:new Array,getMenu:function(){var e=new Array;e.push({name:"Plug-In Manager",click:PluginManager,resIcon:"plugin_menu_icon",css:{"border-bottom":"1px solid "+LucifersMOD.Theme.color}});e.push({name:"Plug-In Downloads",click:LucifersMOD.DownloadPlugins,resIcon:"plugin_menu_icon",css:{"border-bottom":"1px solid "+LucifersMOD.Theme.color}});Plugins.each(function(t,n){if(n.active===true&&parseInt(n.runat)===Plugins.RUNAT_USER_CLICK){e.push({name:n.name,click:{func:Plugins.exec,params:[t]}})}});return e},reload:function(e){UserConfig.plugins.load(function(){Plugins.collection=new Array;Util.each(UserConfig.plugins.all,function(e,t){Plugins.collection.push(new MWAddonPlugin(t))});e&&e()})},init:function(e){var t=0;Plugins.sources=new Array;UserConfig.plugins.load(function(){Plugins.collection=new Array;Util.each(UserConfig.plugins.all,function(e,n){Plugins.collection.push(n=new MWAddonPlugin(n));if(n.src===Plugins.SRC_REMOTE){if(/http/.test(n.code)){Logger.debug("Downloading Remote JS File: "+n.code);if(n.runat===Plugins.RUNAT_STARTUP){t++}Plugins.getRemoteJS(n.code,function(r){Plugins.addFunc(e,r);if(n.runat===Plugins.RUNAT_STARTUP){t--}})}}else{if(/^javascript:/.test(n.code)){n.code="return "+n.code.substring(11)}Plugins.addFunc(e,n.code)}});if(Util.isFunc(e)){Util.until({test:function(){return t<1},success:e})}})},save:function(e){UserConfig.plugins.all=Plugins.collection;UserConfig.plugins.save(e)},newPosition:function(e,t){return Util.moveArrayItem(Plugins.collection,e,t)},addFunc:function(e,t){try{var n=new Function("unsafeWindow","jQuery","User","Util","MW","FB","alert","confirm","prompt","$","c$","e$","x$","n$","b$","s$","t$","h$","MWAddon",t);if(Util.isFunc(n)){Plugins.sources[e]=n}else{throw"Unexpected function string"}}catch(r){var i=Plugins.get(e).name;showHelpPopup({icon:"error",title:"Plugin Code Error",message:'The code in "'+i+'" contains errors and cant be processed.'})}},getRemoteJS:function(e,t){httpXDRequest({method:"GET",headers:{"Content-Type":"text/javascript"},url:Util.trim(e)+"?"+Math.random(),onload:function(e){t&&t(Util.trim(e.responseText))}})},get:function(e){if(Util.isString(e)){var t;Plugins.each(function(n,r){if(Util.isSameString(e,r.name)){t=r;return false}});return t}if(Util.isNumber(e)){return Plugins.collection[e]}return},exists:function(e){return Util.isSet(Plugins.get(e))},each:function(e){if(Util.isFunc(e)){Util.each(Plugins.collection,e)}},remove:function(e,t){if(Util.isString(e)){Plugins.each(function(t,n){if(Util.isSameString(e,n.name)){e=t;return false}})}if(Util.isNumber(e)){Plugins.collection.splice(e,1);Plugins.save(t)}else{t&&t()}},exec:function(e){var t=Plugins.get(e);if(!Util.isFunc(Plugins.sources[e])||!t||!t.active){return}Logger.debug('Executed: "'+t.name+'" Plugin.');var n=global.createMWAddonScope(e,t.name,"MWAddonPlugin");try{Plugins.sources[e].apply(n,[unsafeWindow,unsafeWindow.jQuery,unsafeWindow.User,unsafeWindow.Util,unsafeWindow.MW,unsafeWindow.FB,function(){return showHelpPopup.apply(n,arguments)},showAskPopup,showPromptPopup,$,c$,e$,x$,n$,b$,s$,t$,h$,n])}catch(r){Logger.error(r)}},execByName:function(e){Plugins.each(function(t,n){if(Util.isSameString(n.name,e)){Plugins.exec(t);return false}})},addNew:function(e,t){if(!e||!Util.isString(e.name)){t&&t();return}var n=Plugins.collection.length;var r=new MWAddonPlugin(e);Plugins.each(function(t,i){if(Util.isSameString(e.name,i.name)){n=t;r.active=i.active;return false}});Plugins.collection[n]=r;Plugins.save(function(){t&&t(n,r)})}};MWAddonPlugin.prototype.constructor=MWAddonPlugin;MWAddonPlugin.prototype.update=function(e){var t=this;if(Util.isString(e)){e=Util.parseJSON(e)}if(e.name&&Plugins.exists(e.name)){delete e.name}Util.each(e,function(e,n){if(e!=="active"&&!Util.isFunc(n)){t[e]=n}})};MWAddonPlugin.prototype.values=function(e){var t=new Object,n=this;Util.each(n,function(e,n){if(e!=="active"&&!Util.isFunc(n)){t[e]=n}});return t};MWAddonPlugin.prototype.getLink=function(){var e=Util.toJSON(this.values());return MW.getExtURL("index","view",{next_params:{mwaddon_plugin:Base64.encode(e)}})};MWAddonPlugin.prototype.encode=function(){return Util.toJSON(this.values(),true)};UserConfig.create("reminder",{all:new Array});var Reminders={isDisabled:false,collection:new Array,init:function(e){UserConfig.reminder.load(function(){Reminders.collection=new Array;Util.each(UserConfig.reminder.all,function(e,t){Reminders.collection.push(new MWAddonReminder(t))});e&&e()})},save:function(e){UserConfig.reminder.all=Reminders.collection;UserConfig.reminder.save(e)},timeIncrease:function(e,t,n,r){if(e&&e>0)t=(t||0)+e*24;if(t&&t>0)n=(n||0)+t*60;if(n&&n>0)r=(r||0)+n*60;var i=r*1e3;return i},getMenu:function(){var e=new Array;Reminders.each(function(t,n){if(n.active!==true||!Util.isFunc(n.remain)){return}e.push({name:n.name,important:n.important,click:{func:Reminders.exec,params:[t]},remain:parseInt(n.remain()/1e3)})});return e},get:function(e){if(Util.isString(e)){var t;Reminders.each(function(n,r){if(Util.isSameString(e,r.name)){t=r;return false}});return t}if(Util.isNumber(e)){return Reminders.collection[e]}return},exists:function(e){return Util.isSet(Reminders.get(e))},each:function(e){if(Util.isFunc(e)){Util.each(Reminders.collection,e)}},remove:function(e,t){if(Util.isString(e)){Reminders.each(function(t,n){if(Util.isSameString(e,n.name)){e=t;return false}})}if(Util.isNumber(e)){Reminders.collection.splice(e,1);Reminders.save(t)}else{t&&t()}},exec:function(key){function doReminderStep1(){rem._loc=false;if(rem.v2){rem.exec();return}if(rem.gotocity===true){if(MW.currentCity()!==parseInt(rem.gotocityid)){MW.travel(rem.gotocityid,doReminderStep2,"#inner_page");return}}doReminderStep2()}function doReminderStep2(){var rgx,url=String(rem.gotopageurl);if(rem.gotopage===true){if(rgx=/^run:(.+)/.exec(url)){setTimeout(function(){eval(rgx[1])},1e3);return}else if(rgx=/^tab:(.+)/.exec(url)){unsafeWindow.open(rgx[1]);return}else if(url=rem.getUrlLink()){MW.goPage(url,"#inner_page",doReminderStep3);return}}doReminderStep3()}function doReminderStep3(){if(rem.runplugin===true){Plugins.exec(rem.runpluginid)}}var rem=key;if(!Util.isFunc(rem.reset)){rem=Reminders.get(key)}if(!Util.isFunc(rem.reset)){return}var zpopups=$("#content_row > div[id^=popup_] div:has(.pop_box:visible)");if(zpopups.length>0||Util.length(global.Popups)>0){var me=this;showAskPopup("Popups Executing","There is popups open, would you like to continue anyway?",function(){zpopups.css("display","none");Util.each(global.Popups,function(e,t){t&&t.popup&&t.popup.close()});setTimeout(function(){rem.reset(doReminderStep1)},1e3)});return}rem.reset(doReminderStep1)},checker:function(e){function t(t,n){if(n.active!==true){return}if(Util.isString(e)&&n.testUrl(e)){Logger.debug('Reset on page load to "'+n.name+'":\n'+e);n.reset()}else if(n.isReady()&&MWAddonNotify.Showing()==0){Reminders.Show(n);return false}}if(Reminders.isDisabled===true){return}Reminders.each(t)},addNew:function(e,t,n){if(!e||!Util.isString(e.name)){t&&t();return}var r=Reminders.collection.length;var i=new MWAddonReminder(e);Reminders.each(function(t,n){if(Util.isSameString(e.name,n.name)){r=t;i.active=n.active;return false}});Reminders.collection[r]=i;Reminders.save(function(){t&&t(r,i)})},Show:function(e){if(!MWAddonNotify.Initialized!==true){MWAddonNotify.init()}if(Util.length(global.Popups)>0){return}e._loc=true;MWAddonNotify.Show(e.name+" says:",e.description,function(t){if(t===true){Reminders.exec(e)}else{e.wait(15*60*1e3)}e._loc=false},e.timeout||15e3,e.id)}};MWAddonReminder.prototype.constructor=MWAddonReminder;MWAddonReminder.prototype.testUrl=function(e){var t=false;if(this.resetonload===true){e=String(e);var n=Util.uSplit(this.resetonloadurl);if(n.xw_controller&&n.xw_action){Util.each(n,function(n,r){return t=e.indexOf(n+"="+r)>-1})}}return t};MWAddonReminder.prototype.remain=function(){function n(e){var n=new Date;if(Util.isSet(t.lastcheck)){n=new Date(t.lastcheck);n.setDate(n.getDate()+1)}if(parseInt(t.every)>23){t.every=0}n.setHours(t.every);n.setMinutes(0);n.setSeconds(0);return n}var e=(new Date).getTime();var t=this;if(t.delay&&t.delay>0){return t.delay-e}if(!(t.every>0)){t.every=.1}switch(parseInt(t.checktype)){case 0:return Math.max(0,t.lastcheck+t.every*60*60*1e3-e);case 1:return Math.max(0,n().getTime()-e)}};MWAddonReminder.prototype.isReady=function(){var e=this;if(e._loc===true){return false}if(!Util.isSet(e.lastcheck)){if(parseInt(e.checktype)===0){return true}}if(e.v2){return e.remain()<1&&e.test()}else{return e.remain()<1}};MWAddonReminder.prototype.reset=function(e,t){this.important=false;this.lastcheck=(new Date).getTime();this.delay=null;Reminders.save(e)};MWAddonReminder.prototype.wait=function(e){this.important=true;this.delay=(new Date).getTime()+e;Reminders.save()};MWAddonReminder.prototype.start=function(e){this.important=false;this.lastcheck=0;Reminders.save(e)};MWAddonReminder.prototype.getUrlLink=function(e){var e=Util.uSplit(this.gotopageurl);if(!e.xw_controller){return false}var t="remote/"+MW.getIntURL(e.xw_controller,e.xw_action||"view");Util.each(e,function(e,n){if(!/xw_/.test(e)){t+="&"+e+"="+n}});return t};MWAddonReminder.prototype.update=function(e){var t=["active","important","lastcheck"];var n=this;if(Util.isString(e)){e=Util.parseJSON(e)}if(e.name&&Reminders.exists(e.name)){delete e.name}Util.each(n.values(),function(t){if(Util.isSet(e[t])&&!Util.isFunc(e[t])){n[t]=e[t]}})};MWAddonReminder.prototype.values=function(e){var t=["active","important","lastcheck"];var n=new Object,r=this;Util.each(r,function(e,r){if(!Util.isFunc(r)&&t.indexOf(e)<0){n[e]=r}});return n};MWAddonReminder.prototype.test=function(){var e=(new Date).getTime();var t=new Function("MWAddon","unsafeWindow","now","timeIncrease",this.jstest);var n=global.createMWAddonScope(null,this.name,"MWAddonReminder");var r=t.apply(this,[n,unsafeWindow,e,Reminders.timeIncrease]);return r};MWAddonReminder.prototype.exec=function(){var e=new Function("MWAddon","unsafeWindow","openURL",this.jsexec);var t=global.createMWAddonScope(null,this.name,"MWAddonReminder");e.apply(this,[t,unsafeWindow,unsafeWindow.open])};MWAddonReminder.prototype.getLink=function(){var e=Util.toJSON(this.values());return MW.getExtURL("index","view",{next_params:{mwaddon_reminder:Base64.encode(e)}})};MWAddonReminder.prototype.encode=function(){return Util.toJSON(this.values(),true)};var UserFreeGifts={content:{ccb:{request_id:"city_crew_brazil",name:"City Crew",img:"buy_hiredguns_75x75_01.gif"},enp:{request_id:"energy",name:"Energy Pack",img:"energy_request_bg.gif"},503:{item_id:8035,name:"Power Pack",img:"huge_item_powerpack_01.png"},441:{item_id:3e3,name:"Mission Crew",img:"buy_hiredguns_75x75_01.gif"},1014:{item_id:2297,name:"Poker Card",img:"huge_item_poker_card_02.png"},1015:{item_id:12218,name:"English Brick",img:"huge_item_englishbrick_01.png"},1016:{item_id:12219,name:"Clay Tiles",img:"huge_item_claytiles_01.png"},1017:{item_id:12220,name:"Sledge Hammer",img:"huge_item_sledgehammer_01.png"},1018:{item_id:12221,name:"Plumb Line",img:"huge_item_plumbline_01.png"},1019:{item_id:12222,name:"Iron Girder",img:"huge_item_irongirder_01.png"},1e3:{item_id:11051,name:"Union Worker",img:"huge_item_union_worker_01.png"},1001:{item_id:11052,name:"Carpenter Nails",img:"huge_item_carpenter_nails_01.png"},1002:{item_id:11053,name:"Lath Strips",img:"huge_item_lath_strips_01.png"},1003:{item_id:11054,name:"Iron Cast",img:"huge_item_iron_cast_01.png"},1004:{item_id:11055,name:"Douglas Fir Beams",img:"huge_item_douglas_fir_beams_01.png"},100:{item_id:527,name:"Blue Mystery Bag",img:"item_mysterybag_blue_1.png"},400:{item_id:4400,name:"Secret Drop",img:"icon_atk_75x75_01.png"},401:{item_id:2600,name:"Italian Hardwood",img:"huge_item_italianhardwood_01.png"},402:{item_id:2601,name:"Marble Slab",img:"huge_item_marbleslab_01.png"},422:{item_id:4604,name:"Exotic Animal Feed",img:"huge_item_exoticanimalfeed_01.png"},444:{item_id:2610,name:"Set of Hidden Charges",img:"huge_item_hiddencharges_01.png"},445:{item_id:2614,name:"Cooked Book",img:"huge_item_cookedbook_01.png"},189:{item_id:2319,name:"Special Part",img:"huge_item_parts_01.png"},417:{item_id:4605,name:"Aquarium",img:"huge_item_aquarium_01.png"},418:{item_id:4606,name:"Big Cage",img:"huge_item_bigcage_01.png"},419:{item_id:4607,name:"Bird Cage",img:"huge_item_birdcage_01.png"},420:{item_id:4608,name:"Feeding Trough",img:"huge_item_feedingtrough_01.png"},421:{item_id:4609,name:"Terrarium",img:"huge_item_terrarium_01.png"},181:{item_id:2196,name:"Hammer",img:"huge_item_hammer_01.png"},182:{item_id:2197,name:"Rivet",img:"huge_item_rivets_01.png"},183:{item_id:2183,name:"Furnace",img:"huge_item_furnace_01.png"},184:{item_id:2184,name:"Vice",img:"huge_item_vice_01.png"},185:{item_id:2185,name:"Anvil",img:"huge_item_anvil_01.png"},75:{item_id:656,name:"Arc Welder",img:"huge_item_arcwelder_01.gif"},76:{item_id:657,name:"Buzzsaw",img:"huge_item_electronicwhetstone_01.gif"},77:{item_id:658,name:"Gunpowder",img:"huge_item_gunpowder_01.gif"},78:{item_id:659,name:"Gun Drill",img:"huge_item_gundrill_01.gif"},79:{item_id:660,name:"Forge",img:"huge_item_forge_01.gif"},70:{item_id:532,name:"Cement Block",img:"huge_item_cinderblock_01.png"},71:{item_id:533,name:"Power Tool",img:"huge_item_powertools_01.png"},72:{item_id:534,name:"Car Lift",img:"huge_item_carlift_01.png"},73:{item_id:535,name:"Acetylene Torch",img:"huge_item_acetylenetorches_01.png"},74:{item_id:536,name:"Shipping Container",img:"huge_item_shippingcontainers_01.png"},161:{item_id:1575,name:"Cinder Block",img:"huge_item_Cinderblock_01.gif"},162:{item_id:1576,name:"Steel Girder",img:"huge_item_buildcasino_steelgirders_01.gif"},163:{item_id:1577,name:"Concrete",img:"huge_item_Concrete_01.gif"},164:{item_id:1578,name:"Construction Tool",img:"huge_item_constructiontools_01.png"},169:{item_id:762,name:"Security Camera",img:"huge_item_securitycamera_01.png"},170:{item_id:763,name:"Reinforced Steel",img:"huge_item_reinforcedsteel_01.png"},171:{item_id:764,name:"Deposit Box",img:"item_depositbox_01.png"},172:{item_id:765,name:"Motion Sensor",img:"item_motionsensor_01.png"},173:{item_id:766,name:"Magnetic Lock",img:"huge_item_magneticlock_01.png"},405:{item_id:2645,name:"Mystery Shipment",img:"huge_item_mysterycontainer_01.png"},redbag:{item_id:736,params:{req_controller:"job"},name:"Red Mystery Bag",img:"item_mysterybag_red.png"},458:{item_id:2645,name:"Construction Worker",img:"huge_item_constructionworker_01.png"},166:{item_id:1580,name:"Chef",img:"huge_item_Chef_01.gif"}},getByItemId:function(e,t){var n={item_id:e,item_cat:t,name:"Unknow Gift",img:"item_mysterybag_blue_1.png"};e=parseInt(e);t=parseInt(t||1);Util.each(UserFreeGifts.content,function(r,i){if(parseInt(i.item_id)===e&&parseInt(i.item_cat)===t){n=i;return false}});return n},get:function(e){return UserFreeGifts.content[e]},add:function(e,t){if(e){UserFreeGifts.content[e]=t}},each:function(e,t){if(t===true){var n=new Array;Util.each(UserFreeGifts.content,function(e,t){n.push({id:e,gt:t})});n.sort(function(e,t){if(e.gt.name>t.gt.name){return 1}if(e.gt.name<t.gt.name){return-1}return 0});Util.each(n,function(t,n){return e(n.id,n.gt)})}else{Util.each(UserFreeGifts.content,e)}},exists:function(e){return Util.isSet(UserFreeGifts.content[e])},getImageUrl:function(e){if(/http/.test(e)){return e}else{return global.zGraphicsURL+e}},update:function(){function e(e){var t=(new Date).getDate();var n=Util.doRgx(/var allCats = (.+?);/,e).$1;var r=0,i=0,s=UserConfig.main.userGiftsIds;if(n){n=Util.parseJSON(n)}else{n=new Object}h$(e).find(".freegift_grid").children().each(function(e,t){try{if(!(t.id&&e$(".freegift_box_stats",t)!==null)){return}var n=parseInt(t.id.substring(13));if(UserFreeGifts.exists(n)){return}var i=$(".freegift_box_itemname",t).text();var s=$(".freegift_box_image img",t).attr("src");UserFreeGifts.add(n,{name:i,img:s});r++}catch(o){Logger.error(o)}});if(!Util.isSet(s.today)||s.today!=t){s=UserConfig.main.userGiftsIds={today:t}}UserFreeGifts.each(function(e,t){t.name=Util.formatText(t.name);if(Util.isSet(t.request_id)){return}t.item_cat=n[e]||1;if(!Util.isSet(t.item_id)){if(Util.isSet(s[e])){t.item_id=s[e]}else{i++;MW.getGiftItemId(e,t.item_cat,function(n){i--;s[e]=parseInt(t.item_id=n);if(i<1){UserConfig.main.save()}})}}});Logger.debug("Added "+r+" new free gifts.")}httpAjaxRequest({url:"remote/"+MW.getIntURL("freegifts"),success:e})}};var MWAddonToolbar={fanPageLinks:new Array,initialized:false,isWatching:false,bookmarks:new Array,countdowns:new Array};MWAddonToolbar.Event={deposit:function(){var e=$(this);if(global.User.cash()>10){if(!e.hasClass("disabled")){e.addClass("disabled");MW.deposit(MW.currentCity(),global.User.cash(),function(t){MWAddonToolbar.Update();e.removeClass("disabled");MWAddonMessage(t)})}}else{MWAddonMessage("You need at least $10 to deposit.")}return false},heal:function(){var e=$(this);if(global.User.health()<global.User.max_health()){if(!e.hasClass("disabled")){e.addClass("disabled");MW.heal(1,function(t){MWAddonToolbar.Update();e.removeClass("disabled");MWAddonMessage(t)})}}else{MWAddonMessage("Your heal is already at maximum.")}return false},new_link:function(){showBookmarkEditor(function(e){if(e&&Util.isString(e.name)&&Util.isString(e.url)){if(e.name.length>0&&e.url.length>0){UserConfig.main.userLinks.push(e);UserConfig.main.save()}}});return false},watcher_link:function(){var e="Link Watcher Active!!<br>Click a link to grab the name and page...";$("a.button_menu_open").mouseleave();if(MWAddonToolbar.isWatching!==true){MWAddonToolbar.LinkWatcher(e,function(e){showBookmarkEditor(function(e){UserConfig.main.userLinks.push(e);UserConfig.main.save()},e)})}return false},edit_plugin:function(){$("a.button_menu_open").mouseleave();PluginManager();return false},edit_reminder:function(){$("a.button_menu_open").mouseleave();ReminderEditor();return false},showMenu:function(){function r(t){return function(){e.mouseleave();setTimeout(function(){t.func.apply(t,t.params)},50);return false}}function i(t){return function(){e.mouseleave();showAskPopup("Remove Link","Are you sure to remove this link?",function(){UserConfig.main.userLinks.splice(t,1);UserConfig.main.save()});return false}}function s(e,i){var s=c$("li","class:mwa_res_"+n+"_menu_icon");c$("span","class:more_in,id:reminder_timer_"+e).appendTo(s);c$("div","class:item_name").text(i.name).appendTo(s).width(180);s.appendTo(t).css("padding-left",21).click(r(i.click));if(i.remain<1){$("#reminder_timer_"+e).html(Util.setColor("Ready","green"));return}if(i.important){s.removeClass().addClass("important")}(MWAddonToolbar.countdowns[e]=new Countdown({selector:"#reminder_timer_"+e,delay:i.remain,format:[":",":",""],stop:function(){$("#reminder_timer_"+e).html(Util.setColor("Ready","green"))}})).start()}function o(e,s){var o=c$("li");if(s.cbm===true){o.addClass("mwa_res_chrome_bookmark_icon")}else{o.addClass("mwa_res_"+n+"_menu_icon");c$("span","class:remove").appendTo(o).click(i(e))}c$("div","class:item_name").text(s.name).appendTo(o).width(220);o.appendTo(t).css("padding-left",21);o.click(r(s.click))}function u(e,i){var s=c$("li","class:mwa_res_"+n+"_menu_icon").text(i.name);s.appendTo(t).css("padding-left",21).click(r(i.click))}var e=$(this);var t=$(".toolbarbox > ul",e);var n="run";if(e.hasClass("button_menu_open")){return}MWAddonNotify.hideAll();switch(this.id){case"mwa_tlbLinks":n="link";Util.each(MWAddonToolbar.GetLinks(),o);break;case"mwa_tlbPlugins":Util.each(Plugins.getMenu(),u);break;case"mwa_tlbReminders":n="reminder";Util.each(Reminders.getMenu(),s);break}e.removeClass("button_menu_closed").addClass("button_menu_open")},hideMenu:function(){var e=$(this).removeClass("button_menu_open").addClass("button_menu_closed");var t=$(".toolbarbox > ul",e);$("li",t).unbind();t.empty();if(MWAddonToolbar.countdowns.length>0){Util.each(MWAddonToolbar.countdowns,function(e,t){t&&t.clear()});MWAddonToolbar.countdowns=new Array}}};MWAddonToolbar.execJS=function(e){if(/^javascript:/i.test(e)){c$("script").text(unescape(e)).appendTo("body")}};MWAddonToolbar.LinkWatcher=function(e,t){function n(){$("a.lockedlink").each(function(e,t){t=$(t);t.removeClass("lockedlink");if(t.data("onclick")){t.attr("onclick",t.data("onclick"));t.removeData("onclick")}try{t.unbind()}catch(n){Logger.error(n)}});MWAddonToolbar.isWatching=false}function r(e){n();t&&t({name:$(this).text(),url:Util.toUrl($(this))});e.preventDefault()}MWAddonToolbar.isWatching=true;MWAddonNotify.Show("Link Watcher",e,Util.noop,3e4);$("a:regex(onclick,xw_controller)").each(function(e,t){t=$(t);t.data("onclick",t.attr("onclick"));t.addClass("lockedlink");t.removeAttr("onclick");t.one("click",r)});$("a:regex(href,xw_controller)").each(function(e,t){t=$(t);if(t.hasClass("lockedlink")){return}t.addClass("lockedlink");t.one("click",r)})};MWAddonToolbar.GetLinks=function(){function r(t){var n=Util.uSplit(t.url);var r="remote/"+MW.getIntURL(n.xw_controller,n.xw_action);Util.each(n,function(t,n){if(!e.test(t)){r+="&"+t+"="+n}});return{func:MW.goPage,params:[r,"#inner_page"]}}function i(e){return{func:MWAddonToolbar.execJS,params:[e.js||e.url]}}var e=/xw_controller|xw_action|xw_city/i;var t=new Array;var n=/^javascript:/i;Util.each(UserConfig.main.userLinks,function(e,s){t.push({name:s.name,click:n.test(s.url)?i(s):r(s)})});if(UserConfig.main.opt_ChromeBM===true&&MWAddonToolbar.bookmarks.length>0){Util.each(MWAddonToolbar.bookmarks,function(e,n){t.push({cbm:true,name:n.name,click:i(n)})})}return t};MWAddonToolbar.Show=function(){if(UserConfig.main.get("opt_Toolbar")!==true){return}if(e$("#mwa_toolbar")===null){MWAddonToolbar.Init()}MWAddonToolbar.Update()};MWAddonToolbar.Update=function(){function e(e){if(e=="Infinity"){return 0}else{return e.toFixed(Math.abs(e)<10?2:0)}}if(MWAddonToolbar.initialized!==true){return}var t=global.User,n={health:{c:t.health(),m:t.max_health(),p:parseInt(Util.percent(t.health(),t.max_health())),o:function(){switch(true){case n.health.c<20:return"red";case n.health.p<40:return"#FFD927;";default:return"white"}}},energy:{c:t.energy(),m:t.max_energy(),p:parseInt(Util.percent(t.energy(),t.max_energy())),r:e(t.expToNextLevel()/t.energy()),o:function(){switch(true){case n.energy.p>99:return"#FFD927;";default:return"white"}}},stamina:{c:t.stamina(),m:t.max_stamina(),p:parseInt(Util.percent(t.stamina(),t.max_stamina())),r:e(t.expToNextLevel()/t.stamina()),o:function(){switch(true){case n.stamina.p>99:return"#FFD927;";default:return"white"}}},experience:{c:t.expToNextLevel(),p:100-parseInt(Util.percent(t.expToNextLevel(),t.expForThisLevel())),r:e(t.expToNextLevel()/(t.energy()+t.stamina())),o:function(){switch(true){case n.experience.p>80:return"#FFD927;";default:return"white"}}}};$("#mwa_toolbar_hospital").css("display",n.health.c<n.health.m?"inline":"none");$("#mwa_user_level").text(global.User.level());Util.each(["health","energy","stamina","experience"],function(e,t){var r=n[t];var i=' <span style="font-size:10px">XPN</span>';var s=Util.setColor(r.c,r.o());$("#mwa_"+t+"_bar_info").html(r.m?s+" / "+r.m:s+i);$("#mwa_"+t+"_bar div").width(100-Math.min(r.p,100)+"%");$("."+t+" .progress_bar").attr("title",Util.formatText(t)+": "+r.p+"%");if(r.r){$("."+t+" .progress_bar .ratio_need").text(r.r)}})};MWAddonToolbar.Init=function(){if(global.is_chrome===true){SendChromeRequests(function(e){var t=/^javascript:/i;(function n(e){try{Util.each(e,function(e,r){if(r.children){n(r.children)}else if(r.url){var i=Util.trim(r.url);if(t.test(i)){MWAddonToolbar.bookmarks.push({name:r.title,js:i})}}})}catch(r){}})(e)},{action:"bookmark"})}$(Util.render(Base64.decode("PGRpdiBpZD0ibXdhX3Rvb2xiYXIiIHN0eWxlPSJtYXJnaW46IDVweCAycHggMHB4IDJweDsgbWluLWhlaWdodDogNjdweDsiPg0K"+"CTxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+DQoJI213YV90b29sYmFyIGRpdi5ib3ggew0KCQlwYWRkaW5nOiAwcHggIWltcG9ydGFu"+"dDsNCgl9DQoJI213YV90b29sYmFyIGRpdi5idXR0b24gew0KCQl0ZXh0LWFsaWduOiBjZW50ZXI7DQoJCWN1cnNvcjogcG9pbnRl"+"cjsNCgkJYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7DQoJCWNvbG9yOiBncmV5Ow0KCQltYXJnaW46IDBweCAxcHggNXB4"+"IDFweDsNCgkJYm9yZGVyLXRvcDogMXB4IHNvbGlkICMyMjI7DQoJCWJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjMjIyOw0KCX0N"+"CgkjbXdhX3Rvb2xiYXIgZGl2LmJ1dHRvbjpob3ZlciB7DQoJCWJhY2tncm91bmQtY29sb3I6IGdyZXk7DQoJCWNvbG9yOiBibGFj"+"azsNCgl9DQoJI213YV90b29sYmFyICNtd2FfdG9vbGJhcm1lbnUgew0KCQlwb3NpdGlvbjogYWJzb2x1dGU7DQoJCXJpZ2h0OiA1"+"cHg7DQoJCWhlaWdodDogMjgwcHg7DQoJCXotaW5kZXg6IDIwOw0KCQlkaXNwbGF5OiBub25lOw0KCX0NCgkjbXdhX3Rvb2xiYXIg"+"I213YV90b29sYmFybWVudSBkaXYudG9vbGJhcmFycm93IHsNCgkJcG9zaXRpb246IGFic29sdXRlOw0KCQlyaWdodDogMjVweDsN"+"Cgl9DQoJI213YV90b29sYmFyICNtd2FfdG9vbGJhcm1lbnUgZGl2LnRvb2xiYXJib3ggew0KCQlib3JkZXI6IDFweCBzb2xpZCAj"+"NDQ0Ow0KCQktbW96LWJvcmRlci1yYWRpdXM6IDE1cHg7DQoJCWJvcmRlci1yYWRpdXM6IDE1cHg7DQoJCXdpZHRoOiAzMDBweDsN"+"CgkJaGVpZ2h0OiAyNjBweDsNCgkJcGFkZGluZzogMTBweDsNCgkJZm9udC1zaXplOiAxMnB4Ow0KCQl0ZXh0LWFsaWduOiBsZWZ0"+"Ow0KCQliYWNrZ3JvdW5kLWNvbG9yOiAjMTMxMzEzOw0KCQltYXJnaW4tdG9wOiAycHg7DQoJfQ0KCSNtd2FfdG9vbGJhciAjbXdh"+"X3Rvb2xiYXJtZW51IGRpdi50b29sYmFyYm94IC5ib3hfdGl0bGUgew0KCQloZWlnaHQ6IDE1cHg7DQoJCXBhZGRpbmc6IDVweCAx"+"MHB4Ow0KCQliYWNrZ3JvdW5kOiAjMzMzOw0KCQlib3JkZXItcmFkaXVzOiA1cHg7DQoJCS1tb3otYm9yZGVyLXJhZGl1czogNXB4"+"Ow0KCQljb2xvcjogZ3JleTsNCgl9DQoJI213YV90b29sYmFyICNtd2FfdG9vbGJhcm1lbnUgZGl2LnRvb2xiYXJib3ggdWwgew0K"+"CQltYXJnaW46IDBweDsNCgkJbGlzdC1zdHlsZTogbm9uZTsNCgkJb3ZlcmZsb3cteTogYXV0bzsNCgkJaGVpZ2h0OiAyMjVweDsN"+"CgkJYm9yZGVyOiAxcHggZG90dGVkICMzMzM7DQoJCW1hcmdpbi10b3A6IDVweDsNCgkJcGFkZGluZzogMHB4IDVweCAwcHggNXB4"+"Ow0KCQlib3JkZXItcmFkaXVzOiA0cHg7DQoJCS1tb3otYm9yZGVyLXJhZGl1czogNHB4Ow0KCQlwYWRkaW5nLXRvcDogNHB4Ow0K"+"CX0NCgkjbXdhX3Rvb2xiYXIgI213YV90b29sYmFybWVudSBkaXYudG9vbGJhcmJveCB1bCBsaSB7DQoJCWNvbG9yOiAjOTk5Ow0K"+"CQlib3JkZXI6IDFweCBzb2xpZCB0cmFuc3BhcmVudDsNCgkJd2lkdGg6IGF1dG8gIWltcG9ydGFudDsNCgkJcGFkZGluZy1sZWZ0"+"OiAyMXB4ICFpbXBvcnRhbnQ7DQoJCWN1cnNvcjogcG9pbnRlcjsNCgkJYm9yZGVyLXJhZGl1czogM3B4Ow0KCQktbW96LWJvcmRl"+"ci1yYWRpdXM6IDNweDsNCgkJYm9yZGVyLWJvdHRvbTogMXB4IGRvdHRlZCAjMjIyOw0KCQlwYWRkaW5nLXRvcDogM3B4Ow0KCQlw"+"YWRkaW5nLWJvdHRvbTogMnB4Ow0KCX0NCgkjbXdhX3Rvb2xiYXIgI213YV90b29sYmFybWVudSBkaXYudG9vbGJhcmJveCB1bCBs"+"aS5pbXBvcnRhbnQgew0KCQliYWNrZ3JvdW5kLWltYWdlOiB1cmwoJyR7YmFzZV91cmx9Y2F1dGlvblRvcEljb24ucG5nJykgIWlt"+"cG9ydGFudDsNCgkJYmFja2dyb3VuZC1wb3NpdGlvbjogMHB4IDUwJSAhaW1wb3J0YW50Ow0KCQliYWNrZ3JvdW5kLXJlcGVhdDog"+"bm8tcmVwZWF0ICFpbXBvcnRhbnQ7DQoJfQ0KCSNtd2FfdG9vbGJhciAjbXdhX3Rvb2xiYXJtZW51IGRpdi50b29sYmFyYm94IHVs"+"IGxpOmhvdmVyIHsNCgkJYmFja2dyb3VuZC1jb2xvcjogIzI4MjgyODsNCgkJY29sb3I6ICNGRkQ5Mjc7DQoJfQ0KCSNtd2FfdG9v"+"bGJhciAjbXdhX3Rvb2xiYXJtZW51IGRpdi50b29sYmFyYm94IHVsIGxpIGRpdi5pdGVtX25hbWUgew0KCQlvdmVyZmxvdzogaGlk"+"ZGVuOw0KCX0NCgkjbXdhX3Rvb2xiYXIgI213YV90b29sYmFybWVudSBkaXYudG9vbGJhcmJveCB1bCBsaSBzcGFuLm1vcmVfaW4g"+"ew0KCQlmbG9hdDogcmlnaHQ7DQoJCW1hcmdpbi1yaWdodDogNXB4Ow0KCX0NCgkjbXdhX3Rvb2xiYXIgI213YV90b29sYmFybWVu"+"dSBkaXYudG9vbGJhcmJveCB1bCBsaSBzcGFuLnJlbW92ZSB7DQoJCWN1cnNvcjogcG9pbnRlcjsNCgkJYmFja2dyb3VuZDogdXJs"+"KCcke2Jhc2VfdXJsfXJlcXVlc3RzL2Nyb3NzLnBuZycpIGxlZnQgdG9wIG5vLXJlcGVhdDsNCgkJZmxvYXQ6IHJpZ2h0Ow0KCQl3"+"aWR0aDogMThweDsNCgkJaGVpZ2h0OiAxOHB4Ow0KCX0NCgkjbXdhX3Rvb2xiYXIgYS5idXR0b25fbWVudV9vcGVuID4gc3BhbiA+"+"IHNwYW4gew0KCQliYWNrZ3JvdW5kOiB1cmwoJyR7YmFzZV91cmx9Y3Jld19tb2R1bGUvcXVldWVfYnRuX2Fycm93X2FjdGl2ZS5w"+"bmcnKSA4NSUgNTAlIG5vLXJlcGVhdDsNCgkJdGV4dC1hbGlnbjogbGVmdDsNCgl9DQoJI213YV90b29sYmFyIGEuYnV0dG9uX21l"+"bnVfb3BlbiAjbXdhX3Rvb2xiYXJtZW51IHsNCgkJZGlzcGxheTogYmxvY2s7DQoJfQ0KCSNtd2FfdG9vbGJhciBhLmJ1dHRvbl9t"+"ZW51X2Nsb3NlZCA+IHNwYW4gPiBzcGFuIHsNCgkJYmFja2dyb3VuZDogdXJsKCcke2Jhc2VfdXJsfWNyZXdfbW9kdWxlL3F1ZXVl"+"X2J0bl9hcnJvd19pbmFjdGl2ZS5wbmcnKSA4NSUgNTAlIG5vLXJlcGVhdDsNCgkJdGV4dC1hbGlnbjogbGVmdDsNCgl9DQoJI213"+"YV90b29sYmFyIGEuYnV0dG9uX21lbnVfY2xvc2VkICNtd2FfdG9vbGJhcm1lbnUgew0KCQlkaXNwbGF5OiBub25lOw0KCX0NCgkj"+"bXdhX3Rvb2xiYXIgLmJ1dHRvbl9iYXIsDQoJI213YV90b29sYmFyIC5idXR0b25fYmFyX2Nhc2ggew0KCQliYWNrZ3JvdW5kLWNv"+"bG9yOiB0cmFuc3BhcmVudDsNCgkJY3Vyc29yOiBwb2ludGVyOw0KCX0NCgkjbXdhX3Rvb2xiYXIgLmJ1dHRvbl9iYXI6aG92ZXIs"+"DQoJI213YV90b29sYmFyIC5idXR0b25fYmFyX2Nhc2g6aG92ZXIJew0KCQliYWNrZ3JvdW5kLWNvbG9yOiAjMjIyOw0KCX0NCgkj"+"bXdhX3Rvb2xiYXIgLmJ1dHRvbl9iYXJfY2FzaCB7DQoJCWZvbnQtc2l6ZTogMTJweDsNCgkJbWFyZ2luOiAwcHggNXB4IDBweCA1"+"cHg7DQoJCW1pbi1oZWlnaHQ6IDIwcHg7DQoJfQ0KCSNtd2FfdG9vbGJhciBkaXYucHJvZ3Jlc3NfYmFyIHsNCgkJb3ZlcmZsb3c6"+"IGhpZGRlbjsNCgkJbGluZS1oZWlnaHQ6IDE0cHg7DQoJCW1pbi1oZWlnaHQ6IDE2cHg7DQoJfQ0KCSNtd2FfdG9vbGJhciBkaXYu"+"cHJvZ3Jlc3NfYmFyIGRpdi5zdGF0X2luZm8gPiBzcGFuOmZpcnN0LWNoaWxkIHsNCgkJZmxvYXQ6IGxlZnQ7DQoJCW1hcmdpbi1s"+"ZWZ0OiA1cHg7DQoJfQ0KCSNtd2FfdG9vbGJhciBkaXYucHJvZ3Jlc3NfYmFyIGRpdi5zdGF0X2luZm8gew0KCQlwYWRkaW5nLXJp"+"Z2h0OiA1cHg7DQoJCWNvbG9yOiAjRTJFMkUyOw0KCQl0ZXh0LWFsaWduOiByaWdodDsNCgkJZm9udC1zaXplOiAxNHB4Ow0KCQls"+"aW5lLWhlaWdodDogMTRweDsNCgkJbWluLWhlaWdodDogMTRweDsNCgl9DQoJI213YV90b29sYmFyIGRpdi5wcm9ncmVzc19iYXIg"+"c3Bhbi5jb3VudGRvd24gew0KCQlmb250LXNpemU6IDEycHg7DQoJCWxpbmUtaGVpZ2h0OiAxMnB4Ow0KCQltYXJnaW4tbGVmdDog"+"NXB4Ow0KCQljb2xvcjogIzg5ODk4OTsNCgl9DQoJI213YV90b29sYmFyIGRpdi5wcm9ncmVzc19iYXIgLm1hc3RlcnlfYmFyIHsN"+"CgkJbWFyZ2luOiAwcHg7DQoJCWhlaWdodDogNXB4Ow0KCQlib3JkZXI6IDFweCBzb2xpZCAjMzMzOw0KCQljb2xvcjogYmxhY2s7"+"DQoJCWZvbnQtc2l6ZTogMTJweDsNCgkJcG9zaXRpb246IHJlbGF0aXZlOw0KCQl0ZXh0LWFsaWduOiByaWdodDsNCgkJLXdlYmtp"+"dC1ib3JkZXItcmFkaXVzOiAycHg7DQoJCWJvcmRlci1yYWRpdXM6IDJweDsNCgkJLW1vei1ib3JkZXItcmFkaXVzOiAycHg7DQoJ"+"CW9wYWNpdHk6IDAuNjsNCgl9DQoJI213YV90b29sYmFyIGRpdi5wcm9ncmVzc19iYXIgLm1hc3RlcnlfYmFyID4gZGl2IHsNCgkJ"+"YmFja2dyb3VuZDogdXJsKCIke2Jhc2VfdXJsfW1hcF9iYXNlZF9qb2JzL21hc3RlcnlfYmFyX2JnLmdpZiIpIDAgMCByZXBlYXQt"+"eDsNCgkJaGVpZ2h0OiA1cHg7DQoJCW92ZXJmbG93OiBoaWRkZW47DQoJCXBvc2l0aW9uOiBhYnNvbHV0ZTsNCgkJdG9wOiAwOw0K"+"CQlyaWdodDogMDsNCgl9DQoJI213YV90b29sYmFyIGRpdi5wcm9ncmVzc19iYXIgLnJhdGlvX25lZWQgew0KCQliYWNrZ3JvdW5k"+"OiB1cmwoJyR7YmFzZV91cmx9Y2xhbi9ncm91cF94cC5wbmcnKSAwJSA1MCUgbm8tcmVwZWF0Ow0KCQlmb250LXNpemU6IDExcHg7"+"DQoJCXBvc2l0aW9uOiBhYnNvbHV0ZTsNCgkJbWFyZ2luLWxlZnQ6IDEyMHB4Ow0KCQliYWNrZ3JvdW5kLXNpemU6IDE0cHg7DQoJ"+"CS1tb3otYmFja2dyb3VuZC1zaXplOiAxNHB4Ow0KCQlsaW5lLWhlaWdodDogMTNweDsNCgkJcGFkZGluZy1sZWZ0OiAxOHB4Ow0K"+"CX0NCgk8L3N0eWxlPg0KICAgIDx0YWJsZSBzdHlsZT0iYm9yZGVyLXNwYWNpbmc6IDBweDsgd2lkdGg6IDEwMCU7Ij4NCiAgICAg"+"ICAgPHRib2R5Pg0KICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICAgIDx0ZD4NCiAgICA8ZGl2IGNsYXNzPSJib3giIHN0"+"eWxlPSJ3aWR0aDoxNTBweDsiPg0KCTxkaXYgY2xhc3M9ImJveF90b3AiPjxkaXYgY2xhc3M9ImJveF90b3BfcmlnaHQiPjwvZGl2"+"PjwvZGl2Pg0KCTxkaXYgY2xhc3M9ImJveF9taWRkbGUiPjxkaXYgY2xhc3M9ImJveF9taWRkbGVfcmlnaHQiIHN0eWxlPSJoZWln"+"aHQ6IDU0cHg7Ij4NCgkJPGRpdiBpZD0ibXdhX3Rvb2xiYXJDYXNoIiBjbGFzcz0iYnV0dG9uX2Jhcl9jYXNoIj48L2Rpdj4NCgkJ"+"PGNlbnRlciBzdHlsZT0icGFkZGluZzogNXB4OyI+DQoJCTxzcGFuIGlkPSJtd2FfdG9vbGJhcl9iYW5rIiBjbGFzcz0iYmFua19k"+"ZXBvc2l0Ij4oPGEgaHJlZj0iIyIgb25jbGljaz0icmV0dXJuIGRvX2FqYXgoJ3BvcHVwX2ZvZGRlcicsICdyZW1vdGUvaHRtbF9z"+"ZXJ2ZXIucGhwP3h3X2NvbnRyb2xsZXI9YmFuayZhbXA7eHdfYWN0aW9uPXZpZXcnLCAxLCAxLCAwLCAwKTsiIGNsYXNzPSJiYW5r"+"X2RlcG9zaXQiPkJhbms8L2E+KTwvc3Bhbj4NCgkJPHNwYW4gaWQ9Im13YV90b29sYmFyX2hvc3BpdGFsIiBjbGFzcz0iYmFua19k"+"ZXBvc2l0Ij4oPGEgaHJlZj0iIyIgb25jbGljaz0icmV0dXJuIGRvX2FqYXgoJ3BvcHVwX2ZvZGRlcicsICdyZW1vdGUvaHRtbF9z"+"ZXJ2ZXIucGhwP3h3X2NvbnRyb2xsZXI9aG9zcGl0YWwmYW1wO3h3X2FjdGlvbj12aWV3JywgMSwgMSwgMCwgMCk7IiBjbGFzcz0i"+"YmFua19kZXBvc2l0Ij5Ib3NwaXRhbDwvYT4pPC9zcGFuPg0KCQk8L2NlbnRlcj4NCgk8L2Rpdj48L2Rpdj4NCgk8ZGl2IGNsYXNz"+"PSJib3hfYm90dG9tIj48ZGl2IGNsYXNzPSJib3hfYm90dG9tX3JpZ2h0Ij48L2Rpdj48L2Rpdj4NCgk8L2Rpdj4NCiAgICAgICAg"+"ICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgIDx0ZD4NCiAgICA8ZGl2IGNsYXNzPSJib3giIHN0eWxlPSJ3aWR0aDo1MTBw"+"eDsiPg0KCTxkaXYgY2xhc3M9ImJveF90b3AiPjxkaXYgY2xhc3M9ImJveF90b3BfcmlnaHQiPjwvZGl2PjwvZGl2Pg0KCTxkaXYg"+"Y2xhc3M9ImJveF9taWRkbGUiPjxkaXYgY2xhc3M9ImJveF9taWRkbGVfcmlnaHQiIHN0eWxlPSJoZWlnaHQ6IDU0cHg7Ij4NCgk8"+"dGFibGUgaWQ9Im1pbmlfbWFzdGVyeSIgc3R5bGU9Im1hcmdpbjowcHggYXV0bzsiPg0KCQk8dGJvZHk+DQoJCTx0cj4NCgkJCTx0"+"ZCBpZD0ibXdhX3Rvb2xiYXJIZWFsdGgiIGNsYXNzPSJidXR0b25fYmFyIiB0aXRsZT0iSGVhbHRoIj4NCgkJCQk8ZGl2IGNsYXNz"+"PSJoZWFsdGgiIHN0eWxlPSJ3aWR0aDogMjAwcHg7Ij4NCgkJCQkJPGRpdiBjbGFzcz0icHJvZ3Jlc3NfYmFyIj4NCgkJCQkJCTxk"+"aXYgY2xhc3M9InN0YXRfaW5mbyI+PHNwYW4gaWQ9Im13YV9oZWFsdGhfYmFyX2luZm8iPjAvMDwvc3Bhbj48c3BhbiBpZD0iY291"+"bnRkb3duU3BhbkhlYWx0aCIgY2xhc3M9ImNvdW50ZG93biI+MDowMDwvc3Bhbj48L2Rpdj4NCgkJCQkJCTxkaXYgaWQ9Im13YV9o"+"ZWFsdGhfYmFyIiBjbGFzcz0ibWFzdGVyeV9iYXIgenlfcHJvZ3Jlc3NfYmFyX2dyZWVuIj48ZGl2IHN0eWxlPSJ3aWR0aDogMCU7"+"Ij48L2Rpdj48L2Rpdj4NCgkJCQkJPC9kaXY+DQoJCQkJPC9kaXY+DQoJCQk8L3RkPg0KCQkJPHRkIHRpdGxlPSJFbmVyZ3kiPg0K"+"CQkJCTxkaXYgY2xhc3M9ImVuZXJneSIgc3R5bGU9IndpZHRoOiAyMDBweDsiPg0KCQkJCQk8ZGl2IGNsYXNzPSJwcm9ncmVzc19i"+"YXIiPg0KCQkJCQkJPGRpdiBjbGFzcz0ic3RhdF9pbmZvIj48c3BhbiBpZD0ibXdhX2VuZXJneV9iYXJfaW5mbyI+MC8wPC9zcGFu"+"PjxkaXYgY2xhc3M9InJhdGlvX25lZWQiIHRpdGxlPSJFbmVyZ3kgZXhwZXJpZW5jZSByYXRpbyB0byBsZXZlbCB1cC4iPjwvZGl2"+"Pg0KCQkJCQkJPHNwYW4gaWQ9ImNvdW50ZG93blNwYW5FbmVyZ3kiIGNsYXNzPSJjb3VudGRvd24iPjA6MDA8L3NwYW4+PC9kaXY+"+"DQoJCQkJCQk8ZGl2IGlkPSJtd2FfZW5lcmd5X2JhciIgY2xhc3M9Im1hc3RlcnlfYmFyIHp5X3Byb2dyZXNzX2Jhcl9ncmVlbiI+"+"PGRpdiBzdHlsZT0id2lkdGg6IDAlOyI+PC9kaXY+PC9kaXY+DQoJCQkJCTwvZGl2Pg0KCQkJCTwvZGl2Pg0KCQkJPC90ZD4NCgkJ"+"PC90cj48dHI+DQoJCQk8dGQgaWQ9Im13YV90b29sYmFyRXhwZXJpZW5jZSIgY2xhc3M9ImJ1dHRvbl9iYXIiIHRpdGxlPSJFeHBl"+"cmllbmNlIj4NCgkJCQk8ZGl2IGNsYXNzPSJleHBlcmllbmNlIiBzdHlsZT0id2lkdGg6IDIwMHB4OyI+DQoJCQkJCTxkaXYgY2xh"+"c3M9InByb2dyZXNzX2JhciI+DQoJCQkJCQk8ZGl2IGNsYXNzPSJzdGF0X2luZm8iPjxzcGFuIGlkPSJtd2FfZXhwZXJpZW5jZV9i"+"YXJfaW5mbyI+PC9zcGFuPg0KCQkJCQkJPGRpdiBjbGFzcz0icmF0aW9fbmVlZCIgc3R5bGU9Im1hcmdpbi1sZWZ0OiAxMDBweDsi"+"IHRpdGxlPSJHbG9iYWwgZXhwZXJpZW5jZSByYXRpbyB0byBsZXZlbCB1cC4iPjwvZGl2Pg0KCQkJCQkJCTxzcGFuIGNsYXNzPSJj"+"b3VudGRvd24iPjxzcGFuIHN0eWxlPSJmb250LXNpemU6IDhweDsgbGluZS1oZWlnaHQ6IDhweDsiPkxWLjwvc3Bhbj48c3BhbiBp"+"ZD0ibXdhX3VzZXJfbGV2ZWwiPjA8L3NwYW4+PC9zcGFuPg0KCQkJCQkJPC9kaXY+DQoJCQkJCQk8ZGl2IGlkPSJtd2FfZXhwZXJp"+"ZW5jZV9iYXIiIGNsYXNzPSJtYXN0ZXJ5X2JhciB6eV9wcm9ncmVzc19iYXJfZ3JlZW4iPjxkaXYgc3R5bGU9IndpZHRoOiAwJTsi"+"PjwvZGl2PjwvZGl2Pg0KCQkJCQk8L2Rpdj4NCgkJCQk8L2Rpdj4NCgkJCTwvdGQ+DQoJCQk8dGQgdGl0bGU9IlN0YW1pbmEiPg0K"+"CQkJCTxkaXYgY2xhc3M9InN0YW1pbmEiIHN0eWxlPSJ3aWR0aDogMjAwcHg7Ij4NCgkJCQkJPGRpdiBjbGFzcz0icHJvZ3Jlc3Nf"+"YmFyIj4NCgkJCQkJCTxkaXYgY2xhc3M9InN0YXRfaW5mbyI+PHNwYW4gaWQ9Im13YV9zdGFtaW5hX2Jhcl9pbmZvIj4wLzA8L3Nw"+"YW4+PGRpdiBjbGFzcz0icmF0aW9fbmVlZCIgdGl0bGU9IlN0YW1pbmEgZXhwZXJpZW5jZSByYXRpbyB0byBsZXZlbCB1cC4iPg0K"+"CQkJCQkJPC9kaXY+PHNwYW4gaWQ9ImNvdW50ZG93blNwYW5TdGFtaW5hIiBjbGFzcz0iY291bnRkb3duIj4wOjAwPC9zcGFuPjwv"+"ZGl2Pg0KCQkJCQkJPGRpdiBpZD0ibXdhX3N0YW1pbmFfYmFyIiBjbGFzcz0ibWFzdGVyeV9iYXIgenlfcHJvZ3Jlc3NfYmFyX2dy"+"ZWVuIj48ZGl2IHN0eWxlPSJ3aWR0aDogMCU7Ij48L2Rpdj48L2Rpdj4NCgkJCQkJPC9kaXY+DQoJCQkJPC9kaXY+DQoJCQk8L3Rk"+"Pg0KCQk8L3RyPg0KCQk8L3Rib2R5Pg0KCTwvdGFibGU+DQoJPC9kaXY+PC9kaXY+DQoJPGRpdiBjbGFzcz0iYm94X2JvdHRvbSI+"+"PGRpdiBjbGFzcz0iYm94X2JvdHRvbV9yaWdodCI+PC9kaXY+PC9kaXY+DQoJPC9kaXY+DQogICAgICAgICAgICAgICAgPC90ZD4N"+"CiAgICAgICAgICAgICAgICA8dGQ+DQoJPGRpdiBjbGFzcz0iYm94IiBzdHlsZT0id2lkdGg6IDkwcHg7Ij4NCgkJPGRpdiBjbGFz"+"cz0iYm94X3RvcCI+PGRpdiBjbGFzcz0iYm94X3RvcF9yaWdodCI+PC9kaXY+PC9kaXY+DQoJCTxkaXYgY2xhc3M9ImJveF9taWRk"+"bGUiPg0KCQk8ZGl2IGNsYXNzPSJib3hfbWlkZGxlX3JpZ2h0IiBzdHlsZT0iaGVpZ2h0OiA1NHB4O3BhZGRpbmctbGVmdDogM3B4"+"OyI+DQoJCQk8YSBpZD0ibXdhX3RsYkxpbmtzIiBjbGFzcz0ic2V4eV9idXR0b25fbmV3IGJ1dHRvbl9tZW51X2Nsb3NlZCI+PHNw"+"YW4+PHNwYW4+PHNwYW4gY2xhc3M9Im13YV9yZXNfbGlua19tZW51X2ljb24iIHN0eWxlPSJwYWRkaW5nLWxlZnQ6IDIwcHg7IG1h"+"cmdpbi1sZWZ0OiAtNXB4OyI+PC9zcGFuPjwvc3Bhbj48L3NwYW4+PC9hPg0KCQkJPGEgaWQ9Im13YV90bGJSZW1pbmRlcnMiIGNs"+"YXNzPSJzZXh5X2J1dHRvbl9uZXcgYnV0dG9uX21lbnVfY2xvc2VkIj48c3Bhbj48c3Bhbj48c3BhbiBjbGFzcz0ibXdhX3Jlc19y"+"ZW1pbmRlcl9tZW51X2ljb24iIHN0eWxlPSJwYWRkaW5nLWxlZnQ6IDIwcHg7IG1hcmdpbi1sZWZ0OiAtNXB4OyI+PC9zcGFuPjwv"+"c3Bhbj48L3NwYW4+PC9hPg0KCQkJPGEgaWQ9Im13YV90bGJQbHVnaW5zIiBzdHlsZT0id2lkdGg6IDgwcHg7IG1hcmdpbi10b3A6"+"IDJweDsiIGNsYXNzPSJzZXh5X2J1dHRvbl9uZXcgYnV0dG9uX21lbnVfY2xvc2VkIj48c3Bhbj48c3Bhbj5QbHVnaW5zPC9zcGFu"+"Pjwvc3Bhbj48L2E+DQoJCQk8ZGl2IGlkPSJtd2FfdG9vbGJhcm1lbnUiPg0KCQkJPGRpdiBjbGFzcz0idG9vbGJhcmFycm93Ij48"+"aW1nIHNyYz0iJHtiYXNlX3VybH1jcmV3X21vZHVsZS9jcmV3X2hvdmVyX2Fycm93LnBuZyI+PC9kaXY+DQoJCQk8ZGl2IGNsYXNz"+"PSJ0b29sYmFyYm94Ij4NCgkJCTxkaXYgY2xhc3M9ImJveF90aXRsZSI+DQoJCQk8ZGl2IHN0eWxlPSJmbG9hdDpsZWZ0OyI+PC9k"+"aXY+DQoJCQk8ZGl2IHN0eWxlPSJmbG9hdDpyaWdodDsiPjwvZGl2Pg0KCQkJPGRpdiBzdHlsZT0iY2xlYXI6IGJvdGgiPjwvZGl2"+"Pg0KCQkJPC9kaXY+DQoJCQk8dWw+PC91bD4NCgkJCTwvZGl2PjwvZGl2Pg0KCQk8L2Rpdj48L2Rpdj4NCgkJPGRpdiBjbGFzcz0i"+"Ym94X2JvdHRvbSI+PGRpdiBjbGFzcz0iYm94X2JvdHRvbV9yaWdodCI+PC9kaXY+PC9kaXY+DQoJPC9kaXY+DQogICAgICAgICAg"+"ICAgICAgPC90ZD4NCiAgICAgICAgICAgIDwvdHI+DQogICAgICAgIDwvdGJvZHk+DQogICAgPC90YWJsZT4NCjwvZGl2Pg=="),{base_url:global.zGraphicsURL})).prependTo($("#stats_row").css("margin",0));$("#game_stats, #user_stats").hide();var e=$("#mwa_toolbarCash").click(MWAddonToolbar.Event.deposit);$("#stat_cash_cont > div").each(function(t,n){var r=$(".stat_numbers strong",n);var i=c$("div","class:cash,id:"+n.id).appendTo(e).css({width:120,display:n.style.display});c$("strong","class:cur_cash,id:"+r.attr("id")).html(r.html()).appendTo(i)});var t=$("#mwa_toolbarmenu"),n=t.clone(),r=t.clone();$(".box_title > div:first",r).append(c$("a").text("ADD NEW").css("opacity",.8).click(MWAddonToolbar.Event.new_link)).append(c$("span").css("margin","0px 5px 0px 5px").html("|")).append(c$("a").text("LINK WATCHER").css("opacity",.8).click(MWAddonToolbar.Event.watcher_link));$(".box_title > div:first",t).append(c$("a").text("EDIT").css("opacity",.8).click(MWAddonToolbar.Event.edit_plugin));$(".box_title > div:first",n).append(c$("a").text("EDIT").css("opacity",.8).click(MWAddonToolbar.Event.edit_reminder));$(".box_title > div:eq(1)",r).text("BOOKMARKS");$(".box_title > div:eq(1)",t).text("PLUGINS");$(".box_title > div:eq(1)",n).text("REMINDERS");$(".toolbararrow",n).css("right",6);$(".toolbararrow",r).css("right",48);$("#mwa_tlbLinks").append(r).click(MWAddonToolbar.Event.showMenu).mouseleave(MWAddonToolbar.Event.hideMenu);$("#mwa_tlbReminders").append(n).click(MWAddonToolbar.Event.showMenu).mouseleave(MWAddonToolbar.Event.hideMenu);$("#mwa_tlbPlugins").append(t).click(MWAddonToolbar.Event.showMenu).mouseleave(MWAddonToolbar.Event.hideMenu);$("#mwa_toolbarExperience").click(MWAddonToolbar.Event.showRatios);$("#mwa_toolbar").mouseenter(MWAddonToolbar.Update);$("#mwa_toolbarHealth").click(MWAddonToolbar.Event.heal);MWAddonToolbar.initialized=true};var MainMenu={root:[{name:"Configuration",resIcon:"config_menu_icon",css:{"border-top":"1px solid "+LucifersMOD.Theme.color,"border-bottom":"1px solid "+LucifersMOD.Theme.color},click:Configuration,menu:function(){return[{name:"Configuration",resIcon:"config_menu_icon",click:Configuration},{name:"Check Updates",click:{func:Updater.check,params:true},resIcon:"update_menu_icon",css:{"border-bottom":"1px solid "+LucifersMOD.Theme.color}},{name:"MOD Facebook Page",click:{func:LucifersMOD.gotoURL,params:"http://facebook.com/mwscripts"},resIcon:"FBicon",css:{"border-bottom":"1px solid "+LucifersMOD.Theme.color}},{name:"MOD Website Page",resIcon:"chromeicon",click:{func:LucifersMOD.gotoURL,params:"http://screepts.com/"},css:{"border-bottom":"1px solid "+LucifersMOD.Theme.color}},{name:"MOD Donations",click:{func:LucifersMOD.gotoURL,params:"https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=BCPYPXA3GDDBN"},resIcon:"LucifersDonate"}]}},{name:"Daily Bonuses",resIcon:"LuckyStash",menu:function(){return[{name:"Daily Toolbar Bonus",click:{func:LucifersMOD.gotoURL,params:"http://screepts.com/bonuslinks.php?get=toolbar"},resIcon:"stamina"},{name:"Daily Bonus Point",click:{func:LucifersMOD.gotoURL,params:"http://mwscripts.com/dailylinks/bonuslinks.php?get=point"},resIcon:global.bonuspoint},{name:"Daily E-Mail Bonus",click:{func:LucifersMOD.gotoURL,params:"http://screepts.com/bonuslinks.php?get=email"},resIcon:"chromeicon"}]}},{name:"Family",resIcon:"stamina",menu:function(){return[{name:"Family Boss Fight",resIcon:"stamina",click:{func:LucifersMOD.SpockServer,params:"family-boss-fighter"}},{name:"Family Battle Info",click:{func:LucifersMOD.LucifersServer,params:"battleresult"},resIcon:"LucifersIcon"},{name:"Family History",resIcon:"spocky",click:{func:LucifersMOD.SpockServer,params:"family_history"}},{name:"Family Progress",resIcon:"spocky",click:{func:LucifersMOD.SpockServer,params:"clanxp"}},{name:"Family Defendor",click:{func:LucifersMOD.SpockServer,params:"defendor"},resIcon:"spocky"}]}},{name:"Underboss",id:"isunderboss",position:3,resIcon:"isUnderboss",css:{"border-bottom":"1px solid "+LucifersMOD.Theme.color},menu:function(){return[{name:"Battles",resIcon:"isUnderboss",menu:function(){return[{name:"Battler Hub",resIcon:"LucifersIcon",click:{func:LucifersMOD.LucifersServer,params:"/happyplace/bm/battlehub.js"}},{name:"Battle History",resIcon:"spocky",click:{func:LucifersMOD.SpockServer,params:"battle_history"}},{name:"Bulk Battle Sending",resIcon:"LucifersIcon",click:{func:LucifersMOD.LucifersServer,params:"prebattler"}},{name:"Auto Battler",resIcon:"LucifersIcon",click:{func:LucifersMOD.LucifersServer,params:"autobattler"}}]}},{name:"More Soon...",resIcon:"isUnderboss"}]}},{name:"Script Toolbox",resIcon:"toolbox",css:{"border-bottom":"1px solid "+LucifersMOD.Theme.color},menu:function(){return[{name:"Lucifers Scripts",resIcon:"LucifersIcon",css:{"border-bottom":"1px solid "+LucifersMOD.Theme.color},menu:function(){return[{name:"Lucifers Scripts Website",resIcon:"chromeicon",css:{"border-bottom":"1px solid "+LucifersMOD.Theme.color},click:{func:LucifersMOD.gotoURL,params:"http://screepts.com/"}},{name:"Facebook Page",click:{func:LucifersMOD.gotoURL,params:"http://facebook.com/mwscripts"},resIcon:"FBicon",css:{"border-bottom":"1px solid "+LucifersMOD.Theme.color}},{name:"New Property Part",click:{func:LucifersMOD.LucifersServer,params:"newprop"},resIcon:"LucifersIcon"},{name:"Family Battle Info",click:{func:LucifersMOD.LucifersServer,params:"battleresult"},resIcon:"LucifersIcon"},{name:"Family Battle Loot",click:{func:LucifersMOD.LucifersServer,params:"battlerewards"},resIcon:"LucifersIcon"},{name:"Gift Sender",resIcon:"LucifersIcon",click:{func:LucifersMOD.LucifersServer,params:"mwgiftlinks"}},{name:"Collect All Clan XP",resIcon:"LucifersIcon",click:{func:LucifersMOD.LucifersServer,params:"clancollectxp"}},{name:"Multi Link Opener",resIcon:"LucifersIcon",click:{func:LucifersMOD.LucifersServer,params:"multiopen"}},{name:"Send Red Mystery Bag",resIcon:"LucifersIcon",click:{func:LucifersMOD.LucifersServer,params:"openmysterybag"}},{name:"Family Boss Fighter",resIcon:"LucifersIcon",click:{func:LucifersMOD.LucifersServer,params:"mwfamsboss5"}},{name:"Any Boss Reset",resIcon:"LucifersIcon",click:{func:LucifersMOD.LucifersServer,params:"mwanyboss"}}]}},{name:"Spockholm Scripts",resIcon:"spocky",css:{"border-bottom":"1px solid "+LucifersMOD.Theme.color},menu:function(){return[{name:"Spockholm Scripts Website",resIcon:"chromeicon",css:{"border-bottom":"1px solid "+LucifersMOD.Theme.color},click:{func:LucifersMOD.gotoURL,params:"http://www.spockholm.com/mafia/bookmarklets.php"}},{name:"Assasins-a-Nator",resIcon:"spocky",click:{func:LucifersMOD.SpockServer,params:"assassin-a-nator"}},{name:"Link-A-Nator",resIcon:"spocky",click:{func:LucifersMOD.SpockServer,params:"link-a-nator"}},{name:"Gift Blaster",resIcon:"spocky",click:{func:LucifersMOD.SpockServer,params:"giftblaster"}},{name:"Gift Collector",resIcon:"spocky",click:{func:LucifersMOD.SpockServer,params:"giftcollector"}},{name:"Stream-Scanner",resIcon:"spocky",click:{func:LucifersMOD.SpockServer,params:"stream-scanner"}},{name:"Mission-Crew",resIcon:"spocky",click:{func:LucifersMOD.SpockServer,params:"missionlink"}},{name:"RepeatJob Vegas/Italy",resIcon:"spocky",click:{func:LucifersMOD.SpockServer,params:"repeatjob.redux"}},{name:"RepeatJob Brazil/Chicago",resIcon:"spocky",click:{func:LucifersMOD.SpockServer,params:"repeatjob-brazil"}},{name:"Family History",resIcon:"spocky",click:{func:LucifersMOD.SpockServer,params:"family_history"}},{name:"Robbit",resIcon:"spocky",click:{func:LucifersMOD.SpockServer,params:"robber.bg"}},{name:"Robber Redux",resIcon:"spocky",click:{func:LucifersMOD.SpockServer,params:"robber.redux"}},{name:"Inventory History",resIcon:"spocky",click:{func:LucifersMOD.SpockServer,params:"inventory_history"}},{name:"Marketplace Fight Club Buyer",resIcon:"spocky",click:{func:LucifersMOD.SpockServer,params:"MarketplaceFCPurchase"}},{name:"Family Info",resIcon:"spocky",click:{func:LucifersMOD.SpockServer,params:"family_info"}},{name:"Property-Manager",resIcon:"spocky",click:{func:LucifersMOD.SpockServer,params:"property.manager"}}]}},{name:"Other Scripts",resIcon:"script_scroll",menu:function(){return[{name:"Chucker",resIcon:"script_scroll",click:{func:LucifersMOD.GetScript,params:"http://scripts.simony.dk/Chucker.js"}},{name:"GuessX - droneX",resIcon:"script_scroll",click:{func:LucifersMOD.GetScript,params:"http://cdn.mrsimy0.net/Mafia/Scripts/DroneFullARS.js"}},{name:"GuessX - iCollectX",resIcon:"script_scroll",click:{func:LucifersMOD.GetScript,params:"http://cdn.mrsimy0.net/Mafia/Scripts/ICollect.js"}},{name:"GuessX - iNeedX",resIcon:"script_scroll",click:{func:LucifersMOD.GetScript,params:"http://www.creallaborate.com/guessx/mw/scripts/ineed.js"}},{name:"GuessX - Crate Buyer",resIcon:"script_scroll",click:{func:LucifersMOD.GetScript,params:"http://cdn.mrsimy0.net/Mafia/Scripts/CrateBuyer.js"}},{name:"GuessX - RobX",resIcon:"script_scroll",click:{func:LucifersMOD.GetScript,params:"http://cdn.mrsimy0.net/Mafia/Scripts/RobX.js"}},{name:"GuessX - PromoteX",resIcon:"script_scroll",click:{func:LucifersMOD.GetScript,params:"http://cdn.mrsimy0.net/Mafia/Scripts/Promote.js"}}]}}]}},{name:"Plugin Scripts",click:PluginManager,resIcon:"plugin_menu_icon",menu:Plugins.getMenu,css:{"border-bottom":"1px solid "+LucifersMOD.Theme.color}},{name:"Lucifers DRONE",id:"lucifersdrone",click:LucifersDrone,resIcon:"isUnderboss"},{name:"Gift Manager",resIcon:"freegifts_menu_icon",click:FreeGiftsCenter,menu:function(){return[{name:"Gifts Center",click:FreeGiftsCenter,resIcon:"freegifts_menu_icon"},{name:"Auto Collect Gifts",resIcon:"inventory_menu_icon",click:{func:LucifersMOD.SpockServer,params:"zmc-beta"}},{name:"Gift Sender",resIcon:"freegifts_menu_icon",click:{func:LucifersMOD.LucifersServer,params:"mwgiftlinks"}},{name:"Gift Collector",resIcon:"spocky",click:{func:LucifersMOD.SpockServer,params:"giftcollector"}},{name:"Gift Blaster",resIcon:"spocky",click:{func:LucifersMOD.SpockServer,params:"giftblaster"}},{name:"Multi Gifter",click:MultiGifter,icon:global.zGraphicsURL+"v3/icon_gift_27x28_01.png"}]}},{name:"Collect All Cities",click:CollectAllCities,icon:global.zGraphicsURL+"v3/icon_vault_23x27_01.png"},{name:"Robbing",resIcon:"stamina",click:{func:LucifersMOD.robber}},{name:"Craft Properties",click:CraftManager,resIcon:"weapon_menu_icon",menu:function(){return[{name:"Craft Manager",click:CraftManager,resIcon:"weapon_menu_icon"},{name:"Property Manager",resIcon:"spocky",click:{func:LucifersMOD.SpockServer,params:"property.manager"}}]}},{name:"Fighting",resIcon:"stamina",menu:function(){return[{name:"Battlefield v2",click:Battlefieldv2,resIcon:"stamina"},{name:"Assasins-a-Nator",resIcon:"spocky",click:{func:LucifersMOD.assassinanator}},{name:"Bounty Hunter",click:BountyHunter,resIcon:"stamina",css:{"border-bottom":"1px solid "+LucifersMOD.Theme.color}},{name:"Mwlist Import",resIcon:"weapon_menu_icon",css:{"border-bottom":"1px solid "+LucifersMOD.Theme.color},menu:function(){return[{name:"Mwlist Homepage",click:{func:LucifersMOD.gotoURL,params:"http://mwlists.com/"},css:{"border-bottom":"1px solid "+LucifersMOD.Theme.color},resIcon:"chromeicon"},{name:"Battlefield",click:{func:LucifersMOD.mwlist,params:"bf"},css:{"border-bottom":"1px solid "+LucifersMOD.Theme.color},resIcon:"stamina"},{name:"Assasins-a-Nator",resIcon:"spocky",click:{func:LucifersMOD.mwlist,params:"aa"}}]}},{name:"Fight Club Buyer",click:FightClubBuyer,resIcon:"victory_coin_icon"}]}},{name:"Stream Feed",icon:global.zGraphicsURL+"v3/icon_mafia_hat_32x25_01.png",menu:function(){return[{name:"Home Feed Center",click:HomeFeedCenter,icon:global.zGraphicsURL+"v3/icon_mafia_hat_32x25_01.png"},{name:"Stream Scanner",resIcon:"spocky",click:{func:LucifersMOD.SpockServer,params:"stream-scanner"}}]}},{name:"Operations Center",click:OperationsCenter,icon:global.zGraphicsURL+"map_based_jobs/expert_view/icon_megaphone.png"},{name:"Inventory Analizer",resIcon:"inventory_menu_icon",menu:function(){return[{name:"MWAddon Inventory",click:InventoryAnalyzer,resIcon:"inventory_menu_icon"},{name:"Inventory Grouper",resIcon:"weapon_menu_icon",click:LucifersMOD.inventorygrouper},{name:"Iventory Helper",resIcon:"weapon_menu_icon",click:LucifersMOD.mwhelper},{name:"Inventory History",resIcon:"spocky",click:LucifersMOD.InvHist}]}},{name:"Links",resIcon:"link_menu_icon",menu:function(){return[{name:"Profile Links",click:UserLinks,resIcon:"link_menu_icon"},{name:"Open Multi Links",resIcon:"link_menu_icon",click:{func:LucifersMOD.LucifersServer,params:"multiopen"}}]}},{name:"Mafia Cleaner",resIcon:"weapon_menu_icon",menu:function(){return[{name:"Mafia Wiper",click:MafiaWiper,resIcon:"list_menu_icon"},{name:"Wall Cleaner",resIcon:"spocky",click:{func:LucifersMOD.SpockServer,params:"remove_mw_posts"}}]}},{name:"Reminder Editor",css:{"border-bottom":"1px solid "+LucifersMOD.Theme.color},click:ReminderEditor,menu:Reminders.getMenu,resIcon:"reminder_menu_icon"}],Events:{click:function(e){if(e.data.url){unsafeWindow.open(e.data.url,"_blank")}else{var t=e.data.func;var n=Util.isArray(e.data.params)?e.data.params:[e.data.params];if(Util.isFunc(t)){n=t.apply(this,n)}}e.stopImmediatePropagation();return false},enter:function(e){var t,n=e.data.func;var r=Util.isArray(e.data.params)?e.data.params:[e.data.params];if(Util.isFunc(n)){var i=n.apply(this,r);if(Util.length(i)<1){return false}if((t=e$(".submenu",this))===null){t=c$("div","class:submenu").appendTo(this)}t.empty().css({left:$(this).outerWidth(),top:$(this).position().top});MainMenu.create(i,c$("ul").appendTo(t));t.show()}return false},leave:function(){$(".submenu",this).hide()},show:function(){var e;while((e=$("#fbmw_menu #like_button span")).length>1){e.last().remove()}$("#fbmw_menu").stop().animate({left:"0px"},"normal")},hide:function(){$(".submenu","#fbmw_menu").hide();$("#fbmw_menu").stop().animate({left:LucifersMOD.Theme.left},"normal")}},init:function(){if(e$("#fbmw_menu_container")!==null){return}$(Base64.decode("PGRpdiBpZD1mYm13X21lbnVfY29udGFpbmVyIHN0eWxlPWRpc3BsYXk6bm9uZTs+PHN0eWxlIHR5cGU9dGV4dC9jc3M+DQojZmJtd19tZW51X2Fycm93e3Bvc2l0aW9uOmFic29sdXRlO3otaW5kZXg6MjU7dG9wOjEwcHg7bGVmdDoycHg7d2lkdGg6NDBweDtoZWlnaHQ6NDBweH0jZmJtd19tZW51e3Bvc2l0aW9uOmFic29sdXRlO3otaW5kZXg6MzA7dG9wOjFweDstbW96LWJvcmRlci1yYWRpdXM6MjBweDstd2Via2l0LWJvcmRlci1yYWRpdXM6MjBweDtib3JkZXItcmFkaXVzOjIwcHggMjBweCAyMHB4IDIwcHg7Ym9yZGVyLXRvcC1sZWZ0LXJhZGl1czowIDA7Ym9yZGVyLXRvcC1yaWdodC1yYWRpdXM6MjBweCAyMHB4O2JvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOjIwcHggMjBweDtib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOjAgMDt0ZXh0LWFsaWduOmxlZnQ7Zm9udC1zaXplOjEycHg7Zm9udC13ZWlnaHQ6NzAwOy1tb3otYm94LXNoYWRvdzoycHggMnB4IDJweCBncmF5Oy13ZWJraXQtYm94LXNoYWRvdzoycHggMnB4IDJweCBncmF5O2JveC1zaGFkb3c6MnB4IDJweCAycHggZ3JheTtib3JkZXItc3R5bGU6c29saWQ7Ym9yZGVyLXdpZHRoOjJweH0jZmJtd19tZW51IHVse2xpc3Qtc3R5bGUtdHlwZTpub25lO2JhY2tncm91bmQtY29sb3I6IzAwMDAxODttYXJnaW46MDtwYWRkaW5nOjB9I2ZibXdfbWVudSA+IHVse21pbi1oZWlnaHQ6MjAwcHh9I2ZibXdfbWVudSBkaXYuc3VibWVudXtkaXNwbGF5Om5vbmU7ei1pbmRleDozMTtwb3NpdGlvbjphYnNvbHV0ZX0jZmJtd19tZW51IGRpdi5zdWJtZW51IHVsey1tb3otYm9yZGVyLXJhZGl1czo1cHg7LXdlYmtpdC1ib3JkZXItcmFkaXVzOjVweDtib3JkZXItcmFkaXVzOjVweCA1cHggNXB4IDVweDtib3JkZXItdG9wLWxlZnQtcmFkaXVzOjAgMDtib3JkZXItdG9wLXJpZ2h0LXJhZGl1czo1cHggNXB4O2JvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOjVweCA1cHg7Ym9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czowIDA7cGFkZGluZy10b3A6MnB4O3BhZGRpbmctYm90dG9tOjJweDtmb250LXNpemU6MTJweDtmb250LXdlaWdodDo3MDA7dGV4dC1hbGlnbjpsZWZ0O21heC1oZWlnaHQ6NTAwcHg7b3ZlcmZsb3cteTphdXRvO2JvcmRlci1zdHlsZTpzb2xpZDtib3JkZXItd2lkdGg6MXB4fSNmYm13X21lbnUgLnJpZ2h0X2Fycm93e2JhY2tncm91bmQ6IzAwMCB1cmwoaHR0cDovL213ZmIuc3RhdGljLnp5bmdhLmNvbS9td2ZiL2dyYXBoaWNzL21hcmtldHBsYWNlX3NtYWxsZXJfYXJyb3dfcmlnaHQuZ2lmKSBuby1yZXBlYXQgOTYlIDUwJX0jZmJtd19tZW51IHVsIGxpe2JhY2tncm91bmQtY29sb3I6IzAwMDtkaXNwbGF5OmJsb2NrO292ZXJmbG93OmhpZGRlbjtoZWlnaHQ6MTZweDtjdXJzb3I6cG9pbnRlcjtwYWRkaW5nOjVweCAxMHB4fSNmYm13X21lbnUgdWwgbGkgc3BhbntiYWNrZ3JvdW5kLXNpemU6MTZweCFpbXBvcnRhbnQ7LW1vei1iYWNrZ3JvdW5kLXNpemU6MTZweCFpbXBvcnRhbnR9I2ZibXdfbWVudSB1bCBsaS5pbXBvcnRhbnQgc3BhbntiYWNrZ3JvdW5kLWltYWdlOnVybChodHRwOi8vbXdmYi5zdGF0aWMuenluZ2EuY29tL213ZmIvZ3JhcGhpY3MvY2F1dGlvblRvcEljb24ucG5nKSFpbXBvcnRhbnQ7YmFja2dyb3VuZC1wb3NpdGlvbjowIDUwJSFpbXBvcnRhbnQ7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0IWltcG9ydGFudH0jZmJtd19tZW51IHVsIGxpOmhvdmVye2JhY2tncm91bmQtY29sb3I6IzMyMzIzMn0jZmJtd19tZW51ICNsaWtlX2J1dHRvbntib3JkZXItdG9wOjFweCBzb2xpZCAjRkZGO3BhZGRpbmc6NHB4IDAgNHB4IDE2cHh9"+LucifersMOD.Theme.style+"PC9zdHlsZT48ZGl2IGlkPSJmYm13X21lbnUiIHN0eWxlPSJsZWZ0OiAwcHg7ICI+PHVsPjwvdWw+DQo8ZGl2IGlkPSJsaWtlX2J1dHRvbiIgY2xhc3M9ImJ1dHRvbl9hY3Rpb24iPg0KICAgIDxmYjpsaWtlIGhyZWY9Imh0dHA6Ly9mYWNlYm9vay5jb20vbXdzY3JpcHRzIiBzZW5kPSJ0cnVlIiBsYXlvdXQ9ImJ1dHRvbl9jb3VudCIgd2lkdGg9IjE1MCIgc2hvd19mYWNlcz0iZmFsc2UiIGNvbG9yc2NoZW1lPSJkYXJrIiBjbGFzcz0iIGZiX2VkZ2Vfd2lkZ2V0X3dpdGhfY29tbWVudCBmYl9pZnJhbWVfd2lkZ2V0Ij48L2ZiOmxpa2U+DQo8L2Rpdj4NCjwvZGl2PjxkaXYgaWQ9ImZibXdfbWVudV9hcnJvdyIgY2xhc3M9Im13YV9yZXNfbWVudV9hcnJvdyI+PC9kaXY+PC9kaXY+")).prependTo("#final_wrapper").hide();var e=$("#fbmw_menu").css("left",LucifersMOD.Theme.left);e.mouseleave(MainMenu.Events.hide);$("#fbmw_menu_arrow").mouseenter(MainMenu.Events.show);MainMenu.create(MainMenu.root,$("ul",e));if(e$("#spockholm_toolbar")!==null){$("#fbmw_menu_container").css({position:"relative",top:"40px"})}if(global.isUnderboss==false){MainMenu.remove("isunderboss")}if(MW.getUserID()!="p|57256871"){MainMenu.remove("lucifersdrone")}$("#fbmw_menu_container").show();try{if(!UserConfig.main.get("opt_arrow")){$("#fbmw_menu_arrow").removeClass("mwa_res_menu_arrow").addClass("mwa_res_lucifers_arrow")}else{$("#fbmw_menu_arrow").removeClass("mwa_res_lucifers_arrow").addClass("mwa_res_menu_arrow")}}catch(t){}try{MWFB.XFBML.parse()}catch(t){Logger.error(t)}try{LucifersMOD.LoadSaveOptions();LucifersMOD.StartUp()}catch(t){log("LoadSaveOptions/StartUp"+t.stack)}},remove:function(e){if(!e){return}for(var t in MainMenu.root){if(e==MainMenu.root[t].id){MainMenu.root.splice(t,1);e$("#"+e).remove();return}}},add:function(e){function t(){for(var t in MainMenu.root){if(e.name==MainMenu.root[t].name){return true}}return false}if(!e.name){return}var n=false;if(t()==false){if(e$("#fbmw_menu_container")!==null){e$("#fbmw_menu_container").remove();n=true}}var r=MainMenu.root.length,i={name:e.name,id:e.id,click:e.action||e.click,icon:e.icon,resIcon:e.resIcon,menu:e.subMenu||e.menu};if(Util.isNumber(e.position)){if(e.position<0){e.position=MainMenu.root.length+e.position}else if(e.position<1){e.position=1}if(e.position>r){e.position=r}}else{e.position=r}MainMenu.root.splice(e.position,0,i);if(n){}},create:function(e,t){if(Util.length(e)<1){return}Util.each(e,function(e,n){var r;if(n.id){n.id=n.id.replace(/\s/g,"");n.id=n.id.toLowerCase();r=c$("li","id:"+n.id)}else{r=c$("li")}var i=c$("span").text(n.name).appendTo(r);if(n.icon){r.prepend(c$("img").attr("src",n.icon).css({"float":"left","margin-right":5,width:16}))}else{if(n.resIcon){i.addClass(Resources.className(n.resIcon))}else{i.addClass(Resources.className("run_menu_icon"))}i.css({"padding-left":21,cursor:"pointer"})}if(n.css){r.css(n.css)}if(n.important){r.prependTo(t).addClass("important")}else{r.appendTo(t)}if(Util.isFunc(n.click)){n.click={func:n.click}}if(Util.isObject(n.click)){r.click(n.click,MainMenu.Events.click)}else{r.attr("onclick",n.click)}if(Util.isFunc(n.menu)){r.addClass("right_arrow");r.mouseenter({func:n.menu},MainMenu.Events.enter);r.mouseleave(MainMenu.Events.leave)}})}};var MWAddonCommunity={feeds:new Array,current:0,refreshTime:0,linksLoaded:false,closed:false,isShowing:false};MWAddonCommunity.Event={click:function(){var e=MWAddonCommunity.feeds[$(this).attr("index")];if(e){unsafeWindow.open(e.link,e.target)}return false},stop:function(){MWAddonCommunity.Event.pause.apply(this);MWAddonCommunity.isShowing=false;MWAddonCommunity.Show()},start:function(){var e=this;var t=parseInt($(this).attr("endPos"));var n=$(this).attr("intval");if(n){clearInterval(n)}if(isNaN(t)){MWAddonCommunity.Event.stop.apply(e);return}$(this).attr("intval",setInterval(function(){var n=e.scrollLeft;e.scrollLeft+=2;if(e.scrollLeft==n||e.scrollLeft>=t){MWAddonCommunity.Event.stop.apply(e)}},40))},pause:function(){var e=$(this).attr("intval");if(e){clearInterval(e);$(this).removeAttr("intval")}},next:function(){$("#marquee_outer").trigger("stop");return false}};MWAddonCommunity.Show=function(){if(UserConfig.main.get("opt_Community")!==true||MWAddonCommunity.isShowing===true){return}if(MWAddonCommunity.feeds.length<1){MWAddonCommunity.GetData(function(e){if(e&&e.length>0){MWAddonCommunity.Show();setInterval(function(){MWAddonCommunity.GetData()},3e5)}});return}if(e$("#mwa_marquee")===null){MWAddonCommunity.Init()}MWAddonCommunity.isShowing=true;var e=MWAddonCommunity.current;var t=MWAddonCommunity.feeds[e];var n=String(t.message).replace(/\n/g," ");var r=$("#marquee_outer");var i=r.get(0);if(++MWAddonCommunity.current>MWAddonCommunity.feeds.length-1){MWAddonCommunity.current=0}if(t.type==="post"){n+=' -- by <span style="color:gold;">'+t.name+"</span> "}else{n+=" -- "+t.action+' <span style="color:gold;">'+t.name+"</span> "+Util.formatText(t.type)}$("#marquee_outer #marquee_inner").html(n);i.scrollLeft=0;r.attr({index:e,title:t.action+" "+t.name+" "+Util.formatText(t.type),endPos:i.scrollWidth-r.outerWidth()});r.trigger("start")};MWAddonCommunity.Close=function(){var e=$("#marquee_outer");e.trigger("pause");e.unbind().removeData("marquee");MWAddonCommunity.isShowing=false;MWAddonCommunity.closed=true;$("#mwa_marquee").remove();$("#mw_like_button").show();$("#final_wrapper").css("margin-top",0);UserConfig.main.set("opt_Community",false);UserConfig.main.save();return false};MWAddonCommunity.GetData=function(e){function i(e){try{var t=Util.uSplit(e);if(t.next_params){var r=Util.doRgx(n,t.next_params);if(r.$0){var i=Util.parseJSON(t.next_params);i=Util.parseJSON(Base64.decode(i[r.$0]));return{type:r.$1,action:"Install",name:i.name}}else if(e.match("apps.facebook.com")){return{type:"link",action:"Get"}}}}catch(s){Logger.error("facebook.getLinks.parseLink: "+s);return{}}}function s(e){if(e.type==="plugin"&&Plugins.exists(e.name)||e.type==="reminder"&&Reminders.exists(e.name)){Logger.debug(e.type+" "+e.name+" exists.");return false}var t=true;var n=MWAddonCommunity.feeds.length;Util.each(MWAddonCommunity.feeds,function(t,r){if(e.type===r.type&&Util.isSameString(e.message,r.message)){if(e.time>r.time){n=t}else{n=-1}}});if(n>-1){MWAddonCommunity.feeds[n]=e;return true}else{return false}}function o(){var e=0,t=new Array;MWAddonCommunity.feeds.sort(function(e,t){return t.time-e.time});Util.each(MWAddonCommunity.feeds,function(n,r){if(r.type!=="post"){t.push(r)}else if(e<UserConfig.main.opt_CommunityLimit){t.push(r);e+=1}});MWAddonCommunity.feeds=t}function u(){facebook.getLinks(t,function(e){if(e&&e.data){Util.each(e.data,function(e,t){var n=i(t.link);if(n&&n.type&&(n.name||t.name||t.description)){s({type:n.type,action:n.action,target:"_top",name:n.name||t.name||t.description,message:t.message,link:t.link,time:t.created_time})}});o()}})}if(MWAddonCommunity.closed===true){return}var t=UserConfig.main.get("opt_fanpage_id");if(t.length<1){Logger.log("info","missing fanpage id");return}var n=/mwaddon_(plugin|reminder)/i;var r=/tinyurl|3bszve6/i;facebook.getFeeds(t,function(t){var n=0;var r=0;if(t&&t.data&&t.data.length>0){Util.each(t.data,function(e,t){r++;var i=t.caption||t.message;if((t.type==="status"||t.type==="photo")&&i){var o=t.actions&&t.actions[0]&&t.actions[0].link;if(n<UserConfig.main.opt_CommunityLimit){log("here "+r);if(s({type:"post",action:"View ",target:"_blank",name:t.from.name,message:t.caption||t.message,link:o,time:t.created_time})){n+=1}}}});o()}if(MWAddonCommunity.linksLoaded!==true){MWAddonCommunity.linksLoaded=true;u()}if(Util.isFunc(e)){e(MWAddonCommunity.feeds)}})};MWAddonCommunity.Init=function(){$(Base64.decode("PGRpdiBpZD0ibXdhX21hcnF1ZWUiPg0KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4NCgkjbXdhX21hcnF1ZWUgZGl2Lm1hcnF1ZWVfYm94IHsNCgkJYmFja2dyb3VuZDogYmxhY2sgdXJsKGh0dHBzOi8venluZ2Fwdi5ocy5sbG53ZC5uZXQvZTYvbXdmYi9ncmFwaGljcy9tYXBfYmFzZWRfam9icy9leHBlcnRfdmlldy9leHBlcnR2aWV3X25hdl9taWQuZ2lmKSAwJSAwJSByZXBlYXQteDsNCgkJcG9zaXRpb246IGFic29sdXRlOw0KCQltYXJnaW46IDBweDsNCgkJd2lkdGg6IDEwMCU7DQoJCW92ZXJmbG93OiBoaWRkZW47DQoJCWNvbG9yOiB3aGl0ZTsNCgkJbGluZS1oZWlnaHQ6IDI4cHg7DQoJCWJvcmRlcjogMXB4IHNvbGlkIGJsYWNrOw0KCQlsZWZ0OiAwcHg7DQoJCXBhZGRpbmc6IDFweDsNCgkJaGVpZ2h0OiAyNHB4Ow0KCQl0b3A6IC0yOXB4Ow0KCQl6LWluZGV4OiA0MDsNCgl9DQoJI213YV9tYXJxdWVlIGRpdi5tYXJxdWVlX2JveCBkaXYjbWFycXVlZV9oZWFkZXIgew0KCQlmbG9hdDogbGVmdDsNCgkJbWFyZ2luLXJpZ2h0OiAycHg7DQoJCWhlaWdodDogMThweDsNCgkJZm9udC1zaXplOiAxMnB4Ow0KCQlwYWRkaW5nOiAycHggMHB4IDBweCA1cHg7DQoJCWxpbmUtaGVpZ2h0OiAxOHB4Ow0KCQl0ZXh0LWFsaWduOiBsZWZ0Ow0KCQlwYWRkaW5nOiAycHggMHB4IDBweCA1cHg7DQoJCWNvbG9yOiAjODk4OTg5Ow0KCX0NCgkjbXdhX21hcnF1ZWUgZGl2Lm1hcnF1ZWVfYm94IGRpdiNtYXJxdWVlX291dGVyIHsNCgkJd2lkdGg6IDY1MHB4Ow0KCQltYXJnaW46IDBweDsNCgkJaGVpZ2h0OiAyMHB4Ow0KCQlib3JkZXI6IDFweCBkb3R0ZWQgIzMzMzsNCgkJYmFja2dyb3VuZC1jb2xvcjogIzExMTsNCgkJb3ZlcmZsb3c6IGhpZGRlbjsNCgkJcGFkZGluZzogMXB4IDFweCAwcHggMXB4Ow0KCQlmb250LXNpemU6IDEycHg7DQoJCWN1cnNvcjogcG9pbnRlcjsNCgkJZmxvYXQ6IGxlZnQ7DQoJfQ0KCSNtd2FfbWFycXVlZSBkaXYubWFycXVlZV9ib3ggZGl2I21hcnF1ZWVfb3V0ZXIgPiBkaXYjbWFycXVlZV9pbm5lciB7DQoJCWN1cnNvcjogcG9pbnRlcjsNCgkJd2hpdGUtc3BhY2U6IG5vd3JhcDsNCgkJbWFyZ2luLXRvcDogMnB4Ow0KCQlsaW5lLWhlaWdodDogMTRweDsNCgkJZmxvYXQ6IGxlZnQ7DQoJCXBhZGRpbmc6IDBweCA1NzBweCAwcHggNTcwcHg7DQoJfQ0KCSNtd2FfbWFycXVlZSBkaXYubWFycXVlZV9ib3ggI21hcnF1ZWVfaGVhZGVyIGEgew0KCQlwb3NpdGlvbjogYWJzb2x1dGU7DQoJCWRpc3BsYXk6IGJsb2NrOw0KCQl3aWR0aDogMjBweDsNCgkJaGVpZ2h0OiAyMHB4Ow0KCQl0ZXh0LWRlY29yYXRpb246IG5vbmU7DQoJCWJhY2tncm91bmQ6IHRyYW5zcGFyZW50IHVybCgnaHR0cHM6Ly93d3cubWFmaWF3YXJzLnp5bmdhLmNvbS9pbWFnZXMvY2xvc2VfYnRuLmdpZicpIDAlIDAlIG5vLXJlcGVhdDsNCgl9DQoJI213YV9tYXJxdWVlIGRpdi5tYXJxdWVlX2JveCAjbWFycXVlZV9oZWFkZXIgYS5jbG9zZV9idXR0b24gew0KCQliYWNrZ3JvdW5kOiB0cmFuc3BhcmVudCB1cmwoJ2h0dHBzOi8vd3d3Lm1hZmlhd2Fycy56eW5nYS5jb20vaW1hZ2VzL2Nsb3NlX2J0bi5naWYnKSAwIDAgbm8tcmVwZWF0Ow0KCQlyaWdodDogNXB4Ow0KCQl0b3A6IDZweDsNCgl9DQoJI213YV9tYXJxdWVlIGRpdi5tYXJxdWVlX2JveCAjbWFycXVlZV9oZWFkZXIgYS5uZXh0X2J1dHRvbiAgew0KCQliYWNrZ3JvdW5kOiB0cmFuc3BhcmVudCB1cmwoJ2h0dHBzOi8venluZ2ExLWEuYWthbWFpaGQubmV0L213ZmIvbXdmYi9ncmFwaGljcy9lbXBpcmUvYnV0dG9uX21pbmlfcGxheS5wbmcnKSAwJSAwJSBuby1yZXBlYXQ7DQoJCXJpZ2h0OiAzMHB4Ow0KCQl0b3A6IDJweDsNCgl9DQo8L3N0eWxlPg0KPGRpdiBjbGFzcz0ibWFycXVlZV9ib3giPjxkaXYgaWQ9Im1hcnF1ZWVfaGVhZGVyIj48c3Bhbj5GQiBOZXdzOjwvc3Bhbj4NCjxhIGhyZWY9IiMiIHRpdGxlPSJDbG9zZSBGQiBOZXdzLiIgY2xhc3M9ImNsb3NlX2J1dHRvbiI+PC9hPjxhIGhyZWY9IiMiIHRpdGxlPSJTaG93IG5leHQgbWVzc2FnZS4iIGNsYXNzPSJuZXh0X2J1dHRvbiI+PC9hPg0KPC9kaXY+DQo8ZGl2IGlkPSJtYXJxdWVlX291dGVyIj48ZGl2IGlkPSJtYXJxdWVlX2lubmVyIj48L2Rpdj48L2Rpdj4NCjwvZGl2Pg0KPC9kaXY+")).prependTo("#final_wrapper");$("#marquee_header .close_button").click(MWAddonCommunity.Close);$("#marquee_header .next_button").click(MWAddonCommunity.Event.next);$("#marquee_outer").click(MWAddonCommunity.Event.click).bind("start mouseleave",MWAddonCommunity.Event.start).bind("pause mouseenter",MWAddonCommunity.Event.pause).bind("stop",MWAddonCommunity.Event.stop);$("#mw_like_button").hide();$("#final_wrapper").css("margin-top",28)};var MWAddonNotify={Initialized:false,context:null,Show:function(e,t,n,r){var i=c$("div","class:notification");var s=Resources.className("reminder_menu_icon");r=Math.max(5e3,r||0);if(Util.isString(e)){c$("div","class:text_title "+s).appendTo(i).text(e)}if(Util.isString(t)){c$("div").html(t.replace(/\n/g,"<br>")).appendTo(i)}else{return}i.click(function(){MWAddonNotify.hideAll();i.remove();if(Util.isFunc(n)){n(true);n=null}}).hover(function(){i.stop(true).removeAttr("style");r=5e3},function(){i.delay(r).fadeOut(function(){i.remove();if(Util.isFunc(n)){n(false)}})});if(UserConfig.main.notificationOnTop===true){$("#TopField").focus()}MWAddonNotify.context.prepend(i.css("display","none"));i.fadeIn("normal",function(){i.mouseout()})},setPosition:function(e){if(position){MWAddonNotify.context.css({top:e.top,right:e.right})}},Showing:function(){return MWAddonNotify.context.find(".notification").length},hideAll:function(){MWAddonNotify.context.find(".notification").hide()},init:function(){if(MWAddonNotify.Initialized){return}MWAddonNotify.context=c$("div","id:notify_container").appendTo("#final_wrapper");c$("style").append(Base64.decode("I25vdGlmeV9jb250YWluZXJ7DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgIHotaW5kZXg6IDEwMDA1OyAvKiB0aGlzIGV2"+"ZW4gbW9yZSByaWRpY3Vsb3VzIHRoYW4geW91cnMuLi4gKi8NCiAgICB0b3A6IDE2MXB4Ow0KICAgIHJpZ2h0OiA0cHg7DQp9DQoj"+"bm90aWZ5X2NvbnRhaW5lciAubm90aWZpY2F0aW9uIHsNCiAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgcGFkZGluZzogMTJweCAx"+"OHB4Ow0KICAgIG1hcmdpbjogMHB4IDBweCA2cHg7DQogICAgYmFja2dyb3VuZC1jb2xvcjogYmxhY2s7DQogICAgY29sb3I6IHdo"+"aXRlOw0KICAgIHdpZHRoOiA0MDBweDsNCiAgICB0ZXh0LWFsaWduOiBsZWZ0Ow0KICAgIG9wYWNpdHk6IDAuOTsNCiAgICAtd2Vi"+"a2l0LWJveC1zaGFkb3c6IHJnYigxNTMsIDE1MywgMTUzKSAwcHggMHB4IDE4cHg7DQogICAgLW1vei1ib3gtc2hhZG93OiByZ2Io"+"MTUzLCAxNTMsIDE1MykgMHB4IDBweCAxOHB4Ow0KICAgIGJveC1zaGFkb3c6IHJnYigxNTMsIDE1MywgMTUzKSAwcHggMHB4IDE4"+"cHg7DQogICAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiAzcHg7DQogICAgLW1vei1ib3JkZXItcmFkaXVzOiAzcHg7DQogICAgYm9y"+"ZGVyLXJhZGl1czogM3B4Ow0KICAgIGJvcmRlcjogMXB4IHNvbGlkIHdoaXRlOw0KfQ0KI25vdGlmeV9jb250YWluZXIgLm5vdGlm"+"aWNhdGlvbjpob3ZlciB7DQogICAgYm94LXNoYWRvdzogcmdiKDAsIDAsIDApIDBweCAwcHggMThweDsNCiAgICBvcGFjaXR5OiAx"+"Ow0KfQ0KI25vdGlmeV9jb250YWluZXIgLm5vdGlmaWNhdGlvbiAudGV4dF90aXRsZSB7DQogICAgd2lkdGg6IGF1dG8gIWltcG9y"+"dGFudDsNCiAgICBwYWRkaW5nLWxlZnQ6IDIwcHg7DQogICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgZm9udC1zdHlsZTogaXRh"+"bGljOw0KICAgIGZvbnQtc2l6ZTogMTRweDsNCiAgICB0ZXh0LXRyYW5zZm9ybTogY2FwaXRhbGl6ZTsNCiAgICB3aGl0ZS1zcGFj"+"ZTogbm93cmFwOw0KICAgIG92ZXJmbG93OiBoaWRkZW47DQp9")).appendTo(MWAddonNotify.context);MWAddonNotify.Initialized=true}};UserConfig.create("main",{_excludedToExport:["isUnderbossCheck","opt_isUnderboss","opt_aa_restart","opt_bucket_key","groups","appLastUpdateCheck","cache_ice_log","dailyBonusCheck","opt_dailypoint_collect","xpnextcheck","opt_dailypoint_notify"],groups:{0:"My wall"},privacy:{value:"ALL_FRIENDS"},publishPreview:false,toolTips:true,toolTipLanguage:"none",checkForUpdates:true,appLastUpdateCheck:0,dailyBonusCheck:0,xpnextcheck:0,dailyBonusPoint:"none",shortServiceID:"TinyUrl",unshortServiceID:"unshort.me",shortServiceLogin:new Object,highlightfilters:"",helpNotes:false,cache_ice_log:"",opt_sendData:true,opt_arrow:false,opt_bucket_key:"",opt_hfc_restart:false,opt_battlefield_restart:false,opt_aa_restart:false,opt_robber_restart:false,opt_underboss:false,opt_isUnderboss:false,isUnderbossCheck:0,opt_highlightfilters:false,opt_dailypoint_notify:true,opt_dailypoint_collect:false,opt_clanxp:false,opt_clanxp_at:false,opt_clanchat:false,opt_removebanner:true,opt_killswitch:false,opt_Toolbar:false,opt_ChromeBM:false,opt_fanpage_id:0xdcdb83524ac5,opt_Community:false,opt_CommunityLimit:10,opt_JobRates:true,opt_CollectionPage:true,opt_ProfilePage:true,opt_FamilyPage:true,opt_HomePage:true,debugMode:false,notificationOnTop:false,defaultfbgroup:0,errorout:2,fbTimeout:60,rqTimeout:30,jsTimeout:10,autoHeal:false,autoHealWhen:25,autoHealIn:1,autolevel:false,CollectDailyFix:false,savedlevel:0,autorestart:false,userGiftsIds:new Object,userLinks:new Array});var MWAddonInit={FixedGame:false,fix:function(e){return String(e).replace(/https?:\/\/zyngapv.hs.llnwd.net\/e6/g,"http://mwfb.static.zynga.com")}};MWAddonInit.googleAnalytics=function(e){$(document).ready(function(){try{function e(e){function i(){n=unsafeWindow._gat._getTracker(e);n._trackPageview("/MOD/"+AppInfo.release)}var t="https:"==document.location.protocol?"https://ssl.":"http://www.",n,r;r=document.createElement("script");r.src=t+"google-analytics.com/ga.js";r.type="text/javascript";r.onloadDone=false;r.onload=function(){r.onloadDone=true;i()};r.onreadystatechange=function(){if(("loaded"===r.readyState||"complete"===r.readyState)&&!r.onloadDone){r.onloadDone=true;i()}};document.getElementsByTagName("head")[0].appendChild(r)}e("UA-26130408-1")}catch(t){Logger.error(t)}})};MWAddonInit.isunderboss=function(e){function r(){var t="Soldier",n="bronze";if(global.isUnderboss==true){n="gold";t="Underboss"}$("#mafia_wars_account_type").html(c$("u","title:Your Mafia Wars account is "+t+" the MOD has adjusted features for your account").text(t).append(c$("span","class:"+n+"_star")));e&&e()}Logger.log("INFO","Underboss Checking.");if(UserConfig.main.get("opt_underboss")==true){Logger.debug("Underboss over ride is enabled");global.isUnderboss=true;r();e&&e();return}var t=(new Date).getTime();var n=1*60*60*1e3;if(t>=UserConfig.main.isUnderbossCheck+n){httpAjaxRequest({url:"remote/"+MW.getIntURL("clan")+"&RMS_tab=1",success:function(e){if($(e).find("#rank_edit_button_0").length<!0){global.isUnderboss=false;UserConfig.main.set("opt_isUnderboss",false);Logger.debug("Detected Soilder Account");r()}else{UserConfig.main.set("opt_isUnderboss",true);global.isUnderboss=true;Logger.debug("Detected Underboss Account");r()}UserConfig.main.set("isUnderbossCheck",t);UserConfig.main.save()},error:function(t){log(t);e&&e()}})}else{log("Read underboss cache");global.isUnderboss=UserConfig.main.opt_isUnderboss;r();e&&e();return}};MWAddonInit.Storage=function(e){function n(n){if(t){clearTimeout(t)}if(n){Logger.log("INFO","Chrome FileSystem detected.")}else{Logger.log("INFO","General LocalStorage detected.");Logger.log("INFO","CAUTION!!, clear browser cookies will remove all saved data.")}BrowserStorage.setValue=n!==true?function(e,t){try{localStorage.setItem(e,t)}catch(n){Logger.error("WARNING! Save data is not possible:");Logger.error(n)}}:function(e,t,n){if(typeof n!=="function"){n=Util.noop}SendChromeRequests(n,{action:"SaveData",file:e,data:t})};BrowserStorage.getValue=n!==true?function(e,t){try{var n=localStorage.getItem(e)}catch(r){}return n?n:t}:function(e,t){if(typeof t!=="function"){return}SendChromeRequests(t,{action:"LoadData",file:e})};BrowserStorage.deleteValue=n!==true?function(e){try{localStorage.removeItem(e)}catch(t){}}:function(e){};e&&e()}var t;if(typeof GM_deleteValue=="undefined"){if(typeof localStorage=="undefined"||typeof localStorage.getItem=="undefined"){if(!(localStorage=unsafeWindow.localStorage)){Logger.error("localStorage is undefined, using a temporal storage.");localStorage=new function(){var e=[];this.setItem=function(t,n){e[t]=n};this.getItem=function(t){return e[t]?e[t]:null};this.removeItem=function(t){e[t]=null};return this}}}if(chromeFileSystem){n(true)}else{n(false)}}else{Logger.log("INFO","Greasemonkey API detected.");BrowserStorage.setValue=GM_setValue;BrowserStorage.getValue=GM_getValue;BrowserStorage.deleteValue=GM_deleteValue;e&&e()}};MWAddonInit.jQuery=function(e){function t(){$.expr[":"].regex=function(e,t,n,r){var i,s,o;if((i=n[3].split(",")).length>1){o=$.trim(i[0]);s=$.trim(i[1])}else{o="html";s=$.trim(n[3])}var r=new RegExp(s,"i");if($(e)[o]){return r.test($(e)[o]())}if($(e).attr(o)){return r.test($(e).attr(o))}return false};$.fn.extend({tooltip:function(e){if(!e||!e.context||!e.id){return}$(this).mouseleave(Tooltips.hide).mouseenter(function(t){Tooltips.show(t,e)})}});$.fn.filterByText=function(e,t){return this.each(function(){var n=this;var r=[];$(n).find("option").each(function(){r.push({value:$(this).val(),text:$(this).text()})});$(n).data("options",r);$(e).bind("change keyup",function(){var e=$(n).empty().scrollTop(0).data("options");var r=$.trim($(this).val());var i=new RegExp(r,"gi");$.each(e,function(t){var r=e[t];if(r.text.match(i)!==null){$(n).append($("<option>").text(r.text).val(r.value))}});if(t===true&&$(n).children().length===1){$(n).children().get(0).selected=true}})})}}Util.until({retries:6,delay:1e3,test:function(){return typeof ($=unsafeWindow.$)!=="undefined"},success:function(){if(typeof $==="undefined"){var n=document.createElement("script");n.setAttribute("type","text/javascript");n.src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js";n.onload=function(){if(typeof ($=unsafeWindow.$)!=="undefined"){MWAddonInit.FixedGame=true;Logger.error("jQuery is not available.");loadingScreen("Fixing Game Issues, Please Wait...")}else{return}Logger.log("INFO","Detected game issues, reanimate module was started!");Logger.log("INFO","Trying to reload and fix header issues...");$("script","head").each(function(e,t){var n=t.src;if(n&&/zyngapv.hs.llnwd.net\/e6/i.test(n)){$(t).remove();c$("script").attr("src",MWAddonInit.fix(n)).appendTo("head")}});$("style","head").each(function(e,t){var n=t.innerHTML;if(n&&/zyngapv.hs.llnwd.net\/e6/i.test(n)){$(t).remove();c$("style").text(MWAddonInit.fix(n)).appendTo("head")}});setTimeout(function(){Logger.log("INFO","Trying to reload and fix body issues...");$("script","body").each(function(e,t){var n=t.innerHTML;$(t).remove();try{c$("script").text(MWAddonInit.fix(n)).appendTo("body")}catch(t){}});MWAddonInit.jQuery(e)},5e3)};document.head.appendChild(n)}else{Logger.log("INFO","jQuery "+$.fn.jquery+" Loaded ");t();$("link:regex(href,ui-lightness)").attr("href","http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.6/themes/ui-darkness/jquery-ui.css");e()}}})};MWAddonInit.Facebook=function(e){function n(){facebook.init(function(n){if(n===true){var r=parseInt((new Date).getTime())-t;Logger.log("INFO","Facebook API Loaded. Detected in ("+Util.toDelayString(r)+").")}else{Logger.log("ERROR","Facebook API Failed.")}e&&e()})}var t=parseInt((new Date).getTime());Util.until({retries:8,delay:1500,test:function(){return typeof (MWFB=unsafeWindow.FB)!=="undefined"},success:function(){if(typeof MWFB=="undefined"){Logger.error("Facebook SDK is missed.");var t=$("script:regex(text,SNAPI.init)");if(t.length>0){Logger.debug("INFO","Trying to fix MWAddon Facebook connection...");try{var r=Util.parseJSON(Util.doRgx(/SNAPI.init\((.+?)\);/,t.text()).$1);MWFB={updateSession:function(e){e&&e()},getLoginStatus:function(e){e&&e()},login:function(e){e&&e()},ui:function(e,t){t&&t({error:{message:"FB SDK not available."}})},api:function(e,t){t&&t({error:{message:"FB SDK not available."}})}};n();return}catch(i){Logger.error(i)}}showHelpPopup({icon:"caution",title:"Facebook API is not available.",message:"Lucifers MOD cant initialize the facebook API."+"<br/>You can try load from 'happyplace' server or try to 'continue' without facebook api"+"<br/>",buttons:[{label:"Try Happyplace",addClass:"short green",onclick:function(){unsafeWindow.open("http://mwscripts.com/happyplace","_top")}},{label:"Try Force API",addClass:"short orange",onclick:function(){unsafeWindow.tryForce=function(){if(typeof (MWFB=unsafeWindow.FB||FB)!=="undefined"){log("Forced load of fb");try{MWFB.init({appId:"10979261223",status:false,cookie:true,xfbml:true})}catch(t){}showHelpPopup({icon:"info",title:"Facebook API",message:"Facebook API forced, Facebook API okay!",autoclose:5});n()}else{log("Failed to load");e&&e()}};(function(e,t){log("trying insert");var n,r="facebook-jssdk",i=e.getElementsByTagName("script")[0];n=e.createElement("script");n.id=r;n.onload=function(){unsafeWindow.tryForce()};n.async=true;n.src="//connect.facebook.net/en_US/all"+(t?"/debug":"")+".js";i.parentNode.insertBefore(n,i)})(document,false)}},{label:"Continue",addClass:"short white",onclick:e}]})}else{n()}}})};MWAddonInit.QuestBar=function(){var e=e$("#quest_tray a:regex(onclick,showQuestRequestFriendSelector)");if(e){try{var t=Util.doRgx(/MW.QuestBar.showTask\((\d+),(\d+)\)/,e.attr("onclick"));if(t.$1&&t.$2){UserFreeGifts.get(441).params={quest:t.$1,task:t.$2};Logger.debug('activeQuest: {"quest":'+t.$1+', "task":'+t.$2+"}");return false}}catch(n){}}};MWAddonInit.sendData=function(){if(UserConfig.main.get("opt_sendData")==false||AppInfo.release!=="beta"){return}var e=$("#df_joined_module .todays_task");if(e.length>0){var t=$.trim($("#df_joined_module .todays_task").text());var n=new Config("dailyfix",{status:""});n.load(function(){if(n.status==t){return}var e=Base64.encode(t);$.ajax({dataType:"jsonp",url:"https://mwscripts.com/mod/dailyfix.php?dailyfix="+e,success:function(e){if(e.status=="updated"){Logger.log("INFO","Data sent to server -> Dailyfix info Success");n.status=t;n.save()}return}})})}};MWAddonInit.DailyBonus=function(e){function r(t){url=unescape(t.url);url=url.replace("http://apps.facebook.com/inthemafia/track.php?","");url=url.replace("https://apps.facebook.com/inthemafia/track.php?","");url=url.replace(/next_/g,"xw_");var n="";if(s=/params=(\{.*\})/.exec(url)){try{s=$.parseJSON(s[1].replace(/[\+\%]/g,""))}catch(r){}for(x in s){n+="&"+x+"="+s[x]}url=url.substr(0,url.indexOf("&xw_params"))}if(s=/params=(%7B.*%7D)/.exec(url)){try{s=$.parseJSON(unescape(s[1]).replace(/[\+\%]/g,""))}catch(r){}for(x in s){n+="&"+x+"="+s[x]}url=url.substr(0,url.indexOf("&xw_params"))}url=url+n;var i=parseInt((new Date).getTime().toString().substring(0,10));if(url.indexOf("cb=")==-1){url+="&cb="+global.USER_ID+i}if(url.indexOf("tmp=")==-1){url+="&tmp="+i}unsafeWindow.User.clicks++;var s={ajax:1,liteload:1,sf_xw_user_id:global.USER_ID,sf_xw_sig:unsafeWindow.local_xw_sig,xw_client_id:8,skip_req_frame:1,clicks:unsafeWindow.User.clicks};var o="http://facebook.mafiawars.zynga.com/mwfb/remote/html_server.php?"+url;$.ajax({type:"POST",url:o,data:s,cache:false,success:function(n){var r,i=false;if(($r=$(n).find(".message_body:first, #mbox_generic_1 tr:eq(1)")).length>0){i=true;r=$.trim($r.text())}else if(($r=$(n).find(".fl_Msg")).length>0){i=true;r=$.trim($r.text())}else if(($r=$(n).find(".fl_Box")).length>0){i=true;r=$.trim($r.text())}else{i=false;r=false}if(i){if(/Congratulations/.test(r)){MWAddonMessage('<font color="silver">Collected Daily Bonus Point </font><font color="gold">'+Util.formatText(t.point)+" Point</font>")}}e&&e()}})}var t=(new Date).getTime();var n=1*60*60*1e3;global.bonuspoint=UserConfig.main.dailyBonusPoint;if(t>=UserConfig.main.dailyBonusCheck+n||global.bonuspoint=="none"){Logger.debug("Checking Daily Bonus Point...");$.ajax({dataType:"jsonp",url:cdn+"/dailylinks/jsondaily.php",success:function(n){var i=n.url||s;if(global.bonuspoint!=n.point){Logger.debug("Bonus point updated to -> "+Util.formatText(n.point));if(UserConfig.main.opt_dailypoint_collect){if(n.url){r(n)}else{log(concat(n));e&&e()}}else if(UserConfig.main.opt_dailypoint_notify){var s="http://mwscripts.com/dailylinks/bonuslinks.php?get=point";MWAddonMessage('Daily Bonus Point Updated <a href="'+i+'" target="_blank"><u>Collect '+Util.formatText(n.point)+" Point</u></a> Now");e&&e()}}else{Logger.debug("Bonus point has not been updated! ")}UserConfig.main.set("dailyBonusCheck",t);UserConfig.main.set("dailyBonusPoint",n.point);UserConfig.main.save()}})}else{Logger.debug("Dont need to check for daily point");e&&e()}};MWAddonInit.Update=function(){var e=(new Date).getTime();var t=4*60*60*1e3;if(UserConfig.main.checkForUpdates){if(e>=UserConfig.main.appLastUpdateCheck+t){UserConfig.main.set("appLastUpdateCheck",e);UserConfig.main.save();setTimeout(function(){Logger.log("INFO","Checking for updates...");Updater.check(false)},1e3)}}};MWAddonInit.User=function(e){if(!(global.USER_ID=MW.getUserID())){showHelpPopup({icon:"caution",title:"MWAddon cannot initializate.",message:"No user id found."});return false}global.PERSON_ID=String(global.USER_ID).match(/(\d+)/)[1];AppInfo.prefix=AppInfo.id+"_"+Util.parseNum(global.USER_ID)+"_";if(Tooltips.resourceExists(global.User.locale())){global.mw_locale=global.User.locale()}UserConfig.main.load(e)};MWAddonInit.Installation=function(e){function r(e,t){var n=t.length;e.active=true;Util.each(t,function(t,r){if(Util.isSameString(e.name,r.name)){n=t;return false}});t[n]=e}function i(t,r,i){function s(){setTimeout(e,1e3)}function o(){r(i,s)}$("#content_row > div[id^=popup_]").empty();showAskPopup("New "+t+" Installation!",Util.render(n,{name:i.name||"Unknow",type:t,editor:t==="Plugin"?"Plugin Manager":"Reminder Editor"}),o,s)}var t=Util.uSplit(global.location.href);var n='The "${name}" ${type} is ready to be installed.<br>Do you want to proceed?'+'<br><br><span style="font-size:11px">You can disable/remove ${type}s by opening ${editor}.</span>';if(!Util.isFunc(e)){return}else if(!t){e();return}try{if(t.mwaddon_plugin){UserConfig.plugins.load(function(){i("Plugin",function(e,t){r(new MWAddonPlugin(e),UserConfig.plugins.all);UserConfig.plugins.save(t)},Util.parseJSON(Base64.decode(t.mwaddon_plugin)))})}else if(t.mwaddon_reminder){UserConfig.reminder.load(function(){i("Reminder",function(e,t){r(new MWAddonReminder(e),UserConfig.reminder.all);UserConfig.reminder.save(t)},Util.parseJSON(Base64.decode(t.mwaddon_reminder)))})}else{e()}}catch(s){e();Logger.error("Plugin Installation: "+s)}};MWAddonInit.HandleAjax=function(){function e(){setTimeout(function(){$("#lucifers_mod_donate").animate({color:["black","swing"]},2e3,function(){$("#lucifers_mod_donate").animate({color:["gold","swing"]},5e3)});MWAddonInit.thirdparty()},5e3)}$(document).bind("ajaxComplete",function(e,t,n){if(!/xw_controller/.test(n.url)){return}if(global.BFRunning){return}MainMenu.init();AutoActions(t.responseText);setTimeout(MWAddonToolbar.Show,20);setTimeout(MWAddonCommunity.Show,50);setTimeout(function(){Reminders.checker(n.url)},2e3);if(n.url.match("xw_action=view_stage_jobs")){setTimeout(PageJob,200);return}var r=Util.doRgx(/<!--\s*Current\s*Page:\s*(\w+)/,t.responseText).$1;if(r){if(MWAddonInit.FixedGame===true){$("img:regex(src,zyngapv)").each(function(e,t){t.src=MWAddonInit.fix(t.src)});$("div:regex(style,zyngapv), a:regex(style,zyngapv)").each(function(e,t){t.style.backgroundImage=MWAddonInit.fix(t.style.backgroundImage)})}global.loadPage(r,t.responseText);if(UserConfig.main.get("opt_removebanner")){var i=$("#cpa_fights_banner");var s=$("#cpa_jobs_banner");if(i.length>0)$("#cpa_fights_banner").remove();if(s.length>0)$("#cpa_jobs_banner").remove()}}Util.each(global.onPageLoadArray,function(e,t){if(Util.isFunc(t)){try{t(n.url,r)}catch(i){}}})});$("#lucifers_mod_safe_mode").fadeOut(2500,function(){e();MainMenu.init()})};MWAddonInit.thirdparty=function(){if(spocktoolbar()==true)Logger.log("INFO","Spockholm toolbar installed version : "+spocktoolbarVersion());if(demonInstalled()==true)Logger.log("INFO","Demon installed version : "+demonVersion())};MWAddonInit.SafeMode=function(){global.safemode=true;Tooltips.init();MWAddonNotify.init();global.loadPage(MW.currentPageName());MainMenu.init();MWAddonInit.HandleAjax()};MWAddonInit.Ready=function(e){function t(){if(UserConfig.main.get("helpNotes")!==true){return}var e=new Array;facebook.notesGet(AppInfo.fanpage,function(t){if(!Util.isArray(t.data)){return}Util.each(t.data,function(t,n){e.push({name:n.subject,click:{url:"http://www.facebook.com/note.php?note_id="+n.id},icon:n.icon})});MainMenu.add({position:5,name:"Help Notes",resIcon:"info_icon",menu:function(){return e}});MainMenu.init()})}Logger.log("INFO","Initialization Completed.");if(MWAddonInit.FixedGame===true){loadingScreen()}MWAddonInit.Facebook(function(){t();MWAddonCommunity.Show();try{MWFB.XFBML.parse()}catch(e){Logger.error(e)}});Plugins.init(function(){try{Plugins.each(function(e,t){if(parseInt(t.runat)===Plugins.RUNAT_STARTUP&&global.safemode!=true){Plugins.exec(e)}})}catch(t){log(t.stack)}if(global.safemode==true){return}Reminders.init(function(){try{Tooltips.init();MWAddonToolbar.Show();MWAddonNotify.init();UserFreeGifts.update()}catch(t){log(t.stack)}e&&e()})})};MWAddonInit.Title=function(e){function t(){unsafeWindow.open("//mwscripts.com/happyplace","_top")}var n=$('div[id^="mw_masthead"]');c$("div","id:mod_header").prependTo(n).append(c$("span").html(AppInfo.name+" v"+AppInfo.version+" | ")).css({"font-weight":"bold","font-size":10,"background-color":"black",opacity:"0.7",position:"absolute",top:-2,"z-index":300});var r=$("#mod_header");c$("a","class:mod_header,id:happyplace_link,target:_self,title:Happyplace play mafia wars from my underground lair....").text("Happy Place!").click(t).appendTo(r);c$("span","class:mod_header,id:happyplace_spacer").html(" | ").appendTo(r);c$("a","id:lucifers_mod_donate,target:_blank").text("Donate").attr("href",AppInfo.contributionURL).attr("title","Help support the MOD... a cup of coffee goes along way.... :) you will feel better").appendTo(r);c$("span","class:mod_header,id:happyplace_spacer").html(" | ").appendTo(r);c$("span","class:mod_header,id:mafia_wars_account_type").appendTo(r);c$("span","class:mod_header,id:mod_status").appendTo(r);c$("span","id:mod_docking").appendTo(r);var i=$("#mod_status");c$("a","id:lucifers_mod_safe_mode,title:Enter safe mode if the MOD is not loading").prependTo(i).click(MWAddonInit.SafeMode).text("Safe Mode");e&&e()};MWAddonInit.addCitys=function(){global.addCity(1,"New York",true,1,"$");global.addCity(2,"Cuba",false,1,"C$");global.addCity(3,"Moscow",false,1,"R$");global.addCity(4,"Bangkok",false,1,"B$");global.addCity(5,"Las Vegas",true,1,"V$");global.addCity(6,"Italy",false,1,"L$");global.addCity(7,"Brazil",true,5,"BRL$","brz_real_sm.png");global.addCity(8,"Chicago",true,5,"¢","chic_clam_sm.png");global.addCity(9,"London",true,5,"£","lond_pound_sm.png");global.cityNames=function(){var e=new Object;global.cities.each(function(t,n){e[t]=n.name});return e}();UserConfig.main.add("autoDeposit",UserConfig.getSettingFrom(global.cityNames,{active:false,amount:5e3}))};MWAddonInit.Start=function(){Logger.log("INFO","Initializating...");Logger.log("INFO","Server Host: "+global.location.host);Resources.init();MWAddonInit.addCitys();MWAddonInit.Storage(function(){MWAddonInit.jQuery(function(){Logger.log("INFO","Initializating...");MWAddonInit.Title(function(){MWAddonInit.User(function(){Resources.insertCSS();Logger.log("INFO","Resources loaded successfully.");Logger.log("INFO","Checking updates.");if(global.safemode!=true)MWAddonInit.Update();MWAddonInit.QuestBar();MWAddonInit.Installation(function(){MWAddonInit.Ready(function(){MWAddonInit.HandleAjax();global.loadPage(MW.currentPageName());try{MWAddonInit.sendData()}catch(e){}MWAddonInit.isunderboss(function(){LucifersMOD.Rivals.get(function(){MWAddonInit.DailyBonus(MWAddonInit.googleAnalytics)})})})})})})})})};UserConfig.create("bfopt",{mwlists_use_api_key:false,mwlists_api_key:"",mwlists_auth_key:"",startCity:1,maxLogLength:250,showSocialEvents:false,collectClanFightXp:false,epicBattle:false,epicBattleFortress:false,epicBattleRefresh:30,useBlacklist:true,useWhitelist:false,useStamPack:false,useStamPackWhen:2e3,useHealPack:false,useHealPackWhen:1e3,blackList:new Object,whiteList:new Object,bucketList:new Object,frdClanList:new Object,enmClanList:new Object,badgeFilterActive:false,badgeFilterExpr:"",nameFilterActive:false,nameFilterExpr:"",healActive:true,healCity:1,healBelow:100,healTimer:60,healAttacking:false,healMinSta:0,attackPwr:true,attackRetries:8,attackUseMax:false,attackMax:60,attackUsePerFoe:false,attackPerFoe:40,attackRevenge:false,attackRevengeFilter:1,attkdelayUseA:false,attkdelayUseB:true,attkdelayA:0,attkdelayB:0,refreshOn:false,refreshMax:6,publishActive:false,publishAfter:15,publishTo:"",levelRangeActive:false,levelRangeMin:0,levelRangeMax:1e4,levelRangeMethod:"attk",mafiaRangeActive:false,mafiaRangeMin:100,mafiaRangeMax:501,mafiaRangeMethod:"attk",compareRangeMethod:"AND",skipIced:true,skipIcedByMe:false,skipUseHealth:false,skipHealth:100,skipHealed:true,skipUnderAttk:false,skipUnderAttkPct:15,skipWrongCash:false,skipBossBots:true,skipUseMinCash:false,skipByMinCash:0,rapidFireActive:true,rapidFireAttacks:40,rapidburstattacks:4,rapidFireHealth:50,rapidFireTiming:500,rapidFireAutoTiming:true,redIceActive:false,redIceMaxAttk:25,redIceAfterWon:true,redIceEpicBattle:false,stopKeepStaOn:false,stopKeepSta:0,stopKeepExpOn:false,stopKeepExp:0,stopByIces:false,stopIceAmount:0,stopByLevelup:true,stopResume:true,stopResumeDelay:5,stopAutomatic:false,timerStartActive:false,timerStartMins:30,timerFightActive:false,timerFightMins:10,timerFightResume:5,timerCityActive:false,timerCityMins:2,timerRivalsActive:false,timerRivalsMins:1,whiteListCountActive:false,whiteListCount:3,randomizeWhiteList:false,travelToStartCity:false,travelAutomatic:true});UserConfig.create("bhopt",{userBlackListOn:true,clanBlackListOn:true,userBlackList:new Object,clanBlackList:new Object,redBounty:false,healOn:true,healMin:100,deposit:false,delay:60});UserConfig.create("caopt",{taskmaster:{7:false,8:false,9:false}});UserConfig.create("cmopt",{opt_hidedisable:false,opt_loadProps:false,opt_preLoadProps:new Array,opt_preLoadProps:["chop_shop","weapons_depot","armory","private_zoo"]});UserConfig.create("fcopt",{});UserConfig.create("fgopt",{_excludedToExport:["excludedGifts","today","acceptGiftCount"],today:0,acceptGiftCount:0,sendGiftCount:0,sendBack:true,sendInternally:true,excludedPattern:"reached your limit|gold mastery|cannot accept more",dailyLimit:"cannot accept any more Free Gifts today",excludedGifts:new Object,activeFriends:new Object,customLists:new Object,useractions:new Object,activeFRMin:1,ignoreLimits:false});UserConfig.create("hfopt",{_excludedToExport:["collectedStreams","lastPostTimeListed"],actions:{skipif:new Object,fail:new Object},maxLogLength:50,lastPostTimeListed:0,collectedStreams:new Array,feedsLimit:100,autolike:false,CommentOn_doGotoWar:false,CommentOn_doGiveSocialHelp:false,CommentOn_doDailyTake:false,CommentOn_doSocialMissions:false,CommentOn_doClaimBonusAndReward:false,CommentOn_doPropertyHelp:false,CommentOn_doSendEnergyAndPhones:false,CommentOn_doCityCrew:false,CommentOn_doShortLinks:false,errorretry:3,fbListFilterOn:false,fbListFilter:new Object,userFilterOn:false,userFilter:new Object,userwarfilteron:false,userwarfilter:new Object,doGotoWar:false,doGiveSocialHelp:true,GiveSocialHelp:new Object,doSocialMissions:false,doClaimBonusAndReward:true,ClaimBonusAndReward:new Object,doPropertyHelp:true,PropertyHelp:new Object,doSendEnergyAndPhones:true,doAcceptGiftEvent:true,doCityCrew:true,doDailyTake:true,doShortLinks:false,doCityCrewSlots:false,helpDelay:3,refreshDelay:60,joinMission:0,joinMissionAfter:0,diff_easy:false,diff_medium:false,diff_hard:true,diff_event:false,maxFreeSlots:100,warlootLimited:{id:"limited",enabled:true,name:"*",att:0,def:0},warLimitCount:0,warloot:new Object,warlootSecundaryLimit:false,opUseNameFilter:false,opNameFilter:"",dtCheckMinAtkDef:false,dtOnlyGolden:false,dtMinAttack:30,misjobratio:"1.0",dtMinDefense:30,dtLootPriority:"Attack Point\nDefense Point"});var UserStreams={content:new Array,add:function(e,t){UserStreams.content.push({id:e,action:t})}};UserConfig.create("mgopt",{delay:3,giftFav:new Array,userFav:new Array,giftPages:true,userPages:true,keepOne:true,search:new Array,hideZeroAmount:true});UserConfig.create("ocopt",{_excludedToExport:["publishedOps","today","todayLinks"],defaultGroup:0,addSlackers:false,today:0,ignoredOps:new Object,publishedOps:new Object,todayLinks:new Object});UserConfig.create("ulopt",{profile:true,promote:true,slots:true,warhelp:false,brcrew:true,chcrew:true});(function(){var e=function(){var e=document.createElement("div");e.setAttribute("onclick","return document.location.href;");return e.onclick()};var t=function(){try{var e=document.createElement("div");e.setAttribute("onclick","return (top == self);");return e.onclick()}catch(t){}return false};try{global.location=Util.uParse(document.location.href)}catch(n){global.location=Util.uParse(e())}global.xd_support=typeof GM_xmlhttpRequest!=="undefined";global.is_unframed=t();if(typeof chrome!=="undefined"){if(typeof unsafewindow=="undefined"){window.unsafeWindow||(unsafeWindow=function(){var e=document.createElement("p");e.setAttribute("onclick","return window;");return e.onclick()}())}global.is_chrome=true}if(/xw_action=friend_selector/.test(global.location.href)){setTimeout(FriendSelectorGetTiny,1e3)}else if(/html_server/.test(global.location.href)){if(document.getElementById("final_wrapper")){MWAddonInit.Start()}}return false})()
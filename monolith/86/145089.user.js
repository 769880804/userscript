// ==UserScript==
// @name        2nite
// @namespace   Eric Prydz
// @description 
// @include     http://facebook.mafiawars.zynga.com/mwfb/remote/html_server.php*
// @include     https://facebook.mafiawars.zynga.com/mwfb/remote/html_server.php*
// @version     x.x.x
// @icon        http://vinylpenetration.com/wp-content/uploads/2011/09/Eric_Prydz-2night.jpg
// ==/UserScript==
/*
 Mafia Demon - This script may not be sold, copied, or used without permission!
*/
var g=void 0,j=!0,r=null,S=!1;function Oa(){function Ca(c,d){this.id=d;this.I=c;this.Pf="function runScript(url)\n{\n\tvar a = document.createElement('script');\n\ta.type = 'text/javascript';\n\ta.src = url+'?'+Math.random();\n\tdocument.getElementsByTagName('head')[0].appendChild(a);\n\tvar timer = setTimeout( function(){ if (window.top != window){ if (FB.CanvasClient._timer == -1){ FB.CanvasClient.startTimerToSizeToContent(); } } }, 3000);\n\treturn false;\n}\n";this.a=r;Ca.prototype.q=function(){$("body").append($("<script/>",
{html:this.Pf}));T(this,'<div class="tabframe"><div style="padding:10px;"><table><tr><td valign="top"><b>Useful Links</b><br/><a href="#0" onclick="do_ajax(\'\',\'remote/html_server.php?xw_controller=index&xw_action=view&playslots=1&fromminifeed=1&wins=10&user_id=p|82686779\',1,0,0,0); return false;">Lucky Stash - 3 Free Spins</a><br/><a href="#0" onclick="do_ajax(\'\',\'remote/html_server.php?xw_controller=levelUpBonus&xw_action=addBonusItem&no_load=1\',1,1,0,0); return false;">Level Up Bonus</a> (<a href="remote/html_server.php?xw_controller=levelUpBonus&xw_action=levelUpW2WBrag" class="mw_new_ajax" selector="#popup_fodder">Share</a>)<br/><a href="remote/html_server.php?xw_controller=LimitedTimeProperty&xw_action=upgradeProp&prop_id=26" class="mw_new_ajax" selector="#popup_fodder">Share Property Upgrade</a><br/></td><td valign="top"><b>Useful Scripts</b><br/><a href="#0" onclick="return runScript(\'http://spocklet.com/bookmarklet/giftblaster.js\');">Gift Blaster</a><br/><a href="#0" onclick="return runScript(\'http://spocklet.com/bookmarklet/giftcollector.js\');">Gift Collector</a><br/><a href="#0" onclick="return runScript(\'http://spocklet.com/bookmarklet/mafia_history.js\');">Mafia Manager</a><br/><a href="#0" onclick="return runScript(\'http://spocklet.com/bookmarklet/war-o-matic.js\');">War-o-matic</a><br/><a href="#0" onclick="return runScript(\'http://spocklet.com/bookmarklet/switch.js\');">Switch</a><br/><a href="#0" onclick="return runScript(\'http://simony.dk/gs/Chucker.js\');">Chucker</a><br/><a href="#0" onclick="var s=prompt(\'Enter a script/bookmarklet link\',\'\'); if (s) document.location=s; return false;">Run a Script\u2026</a><br/></td></tr></table></div></div>'.replace(/%ID%/g,
this.id),"tab_names_top_left","tab_area_top")};this.q()}function ja(c){this.id=c;this.L={};this.Ma=r;this.f={};this.$b=r;this.lc={};this.j=[];this.Pc=this.visible=j;this.r=r;this.f.ea=0;this.ne='<style type="text/css">\n.tornado table { width: 100%; }\n.tornado img { margin: 0px 3px; vertical-align: top; }\n.tornado input { vertical-align: baseline; border: 1px solid #888; margin 1px; padding: 2px; background: #000; color: #FFF; -webkit-border-radius: 4px; -moz-border-radius: 4px; border-radius: 4px; }\n.tornado select { border: 1px solid #888; margin 1px; padding: 1px; background: #000; color: #FFF; -webkit-border-radius: 4px; -moz-border-radius: 4px; border-radius: 4px; }\n.tornado textarea { border: 1px solid #888; margin 1px; padding: 2px; background: #000; color: #FFF; -webkit-border-radius: 4px; -moz-border-radius: 4px; border-radius: 4px; }\n.tornado fieldset { border: 1px solid #3B3B3B; -webkit-border-radius: 5px; -moz-border-radius: 5px; border-radius: 5px; }\n.tornado .ip { color: #8080ff; font-weight: normal; }\n.tornado .good { color: #52e259; font-weight: normal; }\n.tornado .bad { color: #ec2d2d; font-weight: normal; }\n.tornado .yellow { color: #ecec2d; font-weight: normal; }\n.tornado .tab_middle { font-weight: bold; padding-right: 5px; }\n.tornado .divider { clear: both; background: url("https://zyngapv.hs.llnwd.net/e6/mwfb/graphics/black_friday/divider_dotted_horizontal.gif") repeat-x scroll 1px 50% transparent; height: 7px; margin: 0px; }\n.tornado .inv table { border-collapse:collapse; border:0px; margin:0px; padding:0px; }\n.tornado .inv td.inv_count, th.inv_count { width:50px; text-align:left; }\n.tornado .inv td.inv_atk, th.inv_atk { width:60px; text-align:left; }\n.tornado .inv td.inv_def, th.inv_def { width:60px; text-align:left; }\n.tornado .inv td.inv_name, th.inv_name { text-align:left; }\n.tornado .op table { border-collapse:collapse; border:0px; margin:0px; padding:0px; }\n.tornado .op td, .tornado .op th, .tornado .op tr { border:0px; margin:0px; padding:0px 5px; height:22px; }\n.tornado .op td.op_active { background-color:#040; }\n.tornado .op td.op_name { width:250px; text-align:left; }\n.tornado .op td.op_health { width:50px; text-align:left; }\n.tornado .op td.op_level { width:40px; text-align:right; }\n.tornado .op td.op_defense { width:60px; text-align:right; }\n.tornado .op td.op_buttons { text-align:left; }\n.tornado .tabframe { background-color: #0E0E0E; border: 1px solid #3B3B3B; padding:0px; }\n.tornado .stamina { color: orange; }\n.tornado .tab_subtitle { cursor: pointer; }\n.tornado abbr { cursor: help; border: 0px; }\n.tornado a.shorter { vertical-align:inherit; }\n.tornado a.iced { color: #0099ff; }\n.tornado a.killed { color: red; }\n.tornado textarea.textlinks { width:660px; height:32px; min-height:32px; resize:vertical; }\n</style>\n<div class="empire_main_module" style="padding-bottom: 5px;"><div class="clearfix" style="width: 745px;"><table style="border:0px;padding:0px;border-collapse:collapse;"><tr><td style="border:0px;padding:0px;border-collapse:collapse;"><div id="TornadoModule" style="float:left;width:735px;" class="empire_module_header"><div class="empire_module_title" id="%ID%_head" style="border-bottom:0px;"><div style="float:left;margin-top:-4px;"><span><span id="%ID%_toggle" style="cursor:pointer;vertical-align:5px;"><span class="gold_star"></span> Mafia Demon</span></span>&nbsp;&nbsp;'/*+'<iframe src="https://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.facebook.com%2Fmafiademonscript&amp;layout=button_count&amp;show_faces=false&amp;width=90&amp;action=like&amp;colorscheme=dark&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:80px; height:21px; margin-top:4px;" allowTransparency="true"></iframe>'*/+'</div><div style="float:right;margin-right:5px;margin-top:-2px;"><span style="font-size:0.6em;color:#FFF;">Version '+
oa+' -'+ /*'<a href="'+Da+'" target="_blank">Homepage</a>'*/'&nbsp;</span><a href="#0" id="%ID%_close" class="close" style="margin:5px 3px;vertical-align:top;"></a></div></div><div class="clearfix" style="clear: both; border-top: 1px solid gray;" id="%ID%_body"><table class="tornado" style="padding:5px;border:0px;width:733px;"><tbody><tr><td><span id="%ID%_stats">Updating Stats\u2026</span><a href="remote/html_server.php?xw_controller=fight&xw_action=fight_show_items_used_pop&o='+pa+'&gs=501" class="mw_new_ajax" selector="#popup_fodder_hospital"><img src="https://zyngapv.hs.llnwd.net/e6/mwfb/graphics/icon-help.gif" style="margin:2px 3px 0px 3px;vertical-align:top;"></a>&nbsp;&nbsp;<span class="more_in" id="%ID%_stats_heal"></span><br/></td></tr><tr><td><div id="tab_names_top_left" align="left" class="tab_box_header" style="height: 32px; border: 0px; margin: 0px;"></div><div id="tab_area_top" style="border: 1px solid rgb(51,51,51);position:relative;width:100%;"></div></td></tr><tr><td><div id="tab_names_bottom_left" align="left" class="tab_box_header" style="height: 32px; border: 0px; margin: 0px;"></div><div id="tab_area_bottom" style="border: 1px solid rgb(51,51,51);position:relative;width:100%;"></div></td></tr></tbody></table></div></div></td><td style="border:0px;padding:0px;border-collapse:collapse;vertical-align:top;height:100%;"><table style="border:0px;padding:0px;border-collapse:collapse;height:100%;"><tr><td style="border:0px;padding:0px;border-collapse:collapse;"><div style="float: left; background: url(&quot;https://zyngapv.hs.llnwd.net/e6/mwfb/graphics/empire/shadow_upper_right.png&quot;) no-repeat scroll 0% 0% transparent; height: 8px; width: 8px;"></div></td></tr><tr style="height:100%;"><td style="border:0px;padding:0px;border-collapse:collapse;height:100%;"><div style="float: left; background: url(&quot;https://zyngapv.hs.llnwd.net/e6/mwfb/graphics/empire/shadow_right_side.png&quot;) repeat-y scroll 0% 0% transparent; height: 100%; width: 8px;"></div></td></tr></table></td></tr><tr><td colspan="2" style="border:0px;padding:0px;border-collapse:collapse;"><div style="float: left; background: url(&quot;https://zyngapv.hs.llnwd.net/e6/mwfb/graphics/empire/shadow_lower_left.png&quot;) repeat scroll 0% 0% transparent; height: 8px; width: 8px;"></div><div style="float: left; background: url(&quot;https://zyngapv.hs.llnwd.net/e6/mwfb/graphics/empire/shadow_bottom.png&quot;) repeat scroll 0% 0% transparent; height: 8px; width: 727px;"></div><div style="float: left; background: url(&quot;https://zyngapv.hs.llnwd.net/e6/mwfb/graphics/empire/shadow_lower_right.png&quot;) repeat scroll 0% 0% transparent; height: 8px; width: 8px;"></div></td></tr></table></div></div>';
this.Od='<li id="%ID%_quest_icon"><div style="width:50px;" title="Mafia Demon Version '+oa+'"><a class="quest_icon" style="background-image: url(&quot;'+da+'/img/demon_icon_36.png&quot;); background-repeat:no-repeat; !important;"><span></span></a></div></li>';ja.prototype.Oe=function(){this.Pc=this.visible=S;var c=K("minitornado_div");c&&c.removeChild(K(this.id));return S};ja.prototype.q=function(){var c=this;Pa(this.id,this.ne.replace(/%ID%/g,this.id));$("#"+this.id+"_close").click(function(){return c.Oe()});
$("#"+this.id+"_toggle").click(function(){c.visible=V(c.id+"_body",c.id+"_toggle");c.bc();Ea();return S});$("#clan_xp_icon").before(this.Od.replace(/%ID%/g,this.id));$("#"+this.id+"_quest_icon").click(function(){c.Pc=V("minitornado_div");c.bc();Ea();return S});D$.isVisible=I=function(){return c.visible&&c.Pc}};ja.prototype.Cb=function(c,b){this.f=ya(c.user_fields);this.L=Fa(c.fightbar);b&&(this.lc=Ga(b));user_fields_update(c.user_fields);user_info_update(c.user_fields,c.user_info);this.bc()};ja.prototype.fc=
function(c,b){var a,e,u;e=c.responseText.search(/var user_info = \[\];/);u=c.responseText.search(/user_fields_update\(user_fields\);/);if(-1!==e&&-1!==u)try{a=c.responseText.slice(e+19,u),a=a.replace(/user_fields/g,"this['temp1']"),a=a.replace(/user_info/g,"this['temp2']"),this.temp1={},this.temp2={},eval(a),this.f=ya(this.temp1),user_fields_update(this.temp1),user_info_update(this.temp1,this.temp2),this.temp1={},this.temp2={},this.bc()}catch(f){D$(o("Update Status",f))}else s(o("Update Status","Problem Finding User Info"));
b&&(c.responseText&&(a=/local_xw_sig = '([a-f0-9]+)'/.exec(c.responseText))?local_xw_sig=a[1]:s(o("Update Status","Problem Finding Signature")))};ja.prototype.bc=function(){if(I()&&(this.r||(this.r=$("#"+this.id+"_stats")),this.r)){var c=p(this.f.Lb)/p(this.f.Nc),b=p(this.f.Lb)/p(this.f.T),a=p(this.f.Lb)/(p(this.f.Nc)+p(this.f.T)),e=10>Math.abs(c)?2:0,u=10>Math.abs(b)?2:0,f=10>Math.abs(a)?2:0;"Infinity"==c&&(e=c=0);"Infinity"==b&&(u=b=0);"Infinity"==a&&(f=a=0);c='<span class="health">'+v(this.f.Oa)+
"/"+v(this.f.Oc)+'</span>&nbsp;&nbsp;<span class="energy">'+v(this.f.Nc)+"/"+v(this.f.Wf)+'</span> <span class="more_in">('+c.toFixed(e)+')</span>&nbsp;&nbsp;<span class="stamina">'+v(this.f.T)+"/"+v(this.f.Xf)+'</span> <span class="more_in">('+b.toFixed(u)+')</span>&nbsp;&nbsp;<span class="experience">'+v(this.f.Lb)+'</span> <span class="more_in">('+a.toFixed(f)+")</span>";c+="&nbsp;&nbsp;"+ka[this.f.ea];c+="<br/>";if(this.L&&this.Ma)var b=L(this.L.tb),a=L(this.L.Dc),e=L(this.L.rc),u=L(this.L.sc),
f=L(this.Ma.tb),m=L(this.Ma.Dc),n=L(this.Ma.rc),h=L(this.Ma.sc),c=c+('<span class="attack">'+this.L.tb+'</span> <span class="more_in">('+(b-f)+')</span>&nbsp;&nbsp;<span class="defense">'+this.L.Dc+'</span> <span class="more_in">('+(a-m)+')</span>&nbsp;&nbsp;<span class="sexy_mafia_attack">'+this.L.rc+'</span> <span class="more_in">('+(e-n)+')</span>&nbsp;&nbsp;<span class="sexy_mafia_defense">'+this.L.sc+'</span> <span class="more_in">('+(u-h)+")</span>");this.r.html(c)}R.va()};Qa();this.q()}function J(c,
d){this.id=d;this.I=c;this.a=r;J.prototype.z=["Ices","Thieves","Bounties"];this.R=this.clip=r;J.prototype.Rf=function(){var b=$("#"+this.id+"_msg");b&&(b.stop(j,j),b.text("Copied"),b.show(),b.fadeOut(1600))};J.prototype.va=function(){this.clip&&(this.clip.hide(),I()&&this.visible&&this.clip.show())};J.prototype.B=function(){0===this.a.mode?X(this,this.z[this.a.mode]+" ("+this.a.m.length+")"):1===this.a.mode?X(this,this.z[this.a.mode]+" ("+this.a.J.length+")"):2===this.a.mode&&X(this,this.z[this.a.mode]+
" ("+this.a.C.length+")");if(I()&&this.visible){if(!this.clip){var b=this;ZeroClipboard.setMoviePath(qa+"/js/lib/ZeroClipboard.swf");this.clip=new ZeroClipboard.Client;this.clip.glue(this.id+"_copy_button");this.clip.addEventListener("onComplete",function(){b.Rf()})}this.clip&&(0===this.a.mode?this.clip.setText(this.a.m.join("\n").replace(/<\/?[^>]+(>|$)/g,"")):1===this.a.mode?this.clip.setText(this.a.J.join("\n").replace(/<\/?[^>]+(>|$)/g,"")):2===this.a.mode&&this.clip.setText(this.a.C.join("\n").replace(/<\/?[^>]+(>|$)/g,
"")),this.clip.hide(),this.clip.show());this.R||(this.R=$("#"+this.id+"_log"));this.R&&(0===this.a.mode?this.R.html(this.a.m.join("<br/>")):1===this.a.mode?this.R.html(this.a.J.join("<br/>")):2===this.a.mode&&this.R.html(this.a.C.join("<br/>")))}else this.clip&&this.clip.hide()};J.prototype.log=function(b){b&&(this.a.u?this.a.m.push(b):this.a.m.unshift(b));if(0<this.a.size)for(;this.a.m.length>this.a.size;)this.a.u?this.a.m.shift():this.a.m.pop();this.B();this.d()};J.prototype.Ge=function(b){b&&(this.a.u?
this.a.J.push(b):this.a.J.unshift(b));if(0<this.a.size)for(;this.a.J.length>this.a.size;)this.a.u?this.a.J.shift():this.a.J.pop();this.B();this.d()};J.prototype.Fe=function(b){b&&(this.a.u?this.a.C.push(b):this.a.C.unshift(b));if(0<this.a.size)for(;this.a.C.length>this.a.size;)this.a.u?this.a.C.shift():this.a.C.pop();this.B();this.d()};J.prototype.xc=function(b){this.a.size=p($(b).val());this.log();return j};J.prototype.kb=function(){0===this.a.mode?this.a.m=[]:1===this.a.mode?this.a.J=[]:2===this.a.mode&&
(this.a.C=[]);this.B();this.d();return S};J.prototype.wc=function(){this.a.u=!this.a.u;this.a.m.reverse();this.a.J.reverse();this.a.C.reverse();this.B();return S};J.prototype.lb=function(b){this.a.mode=p($(b).val());this.B();this.d();return j};J.prototype.G=function(){this.a={mode:0,m:[],J:[],C:[],size:50,u:S}};J.prototype.d=function(){var b={};b.mode=this.a.mode;b.size=this.a.size;b.invert=this.a.u;b.logs=[];M(b.logs,this.a.m);b.thieves=[];M(b.thieves,this.a.J);b.bounties=[];M(b.bounties,this.a.C);
ea(this.id,b)};J.prototype.H=function(){this.G();try{var b={},a=fa(this.id);b.mode=a.mode;b.size=a.size;b.u=a.invert;b.m=[];M(b.m,a.logs);b.J=[];M(b.J,a.thieves);b.C=[];M(b.C,a.bounties);M(this.a,b)}catch(e){}$("#"+this.id+"_size").val(this.a.size);$("#"+this.id+"_mode").val(this.a.mode);this.B()};J.prototype.q=function(){var b=this;T(this,'<table class="tornado tabframe"><tbody><tr><td valign="top"><div>Show <select id="%ID%_mode"></select> | <input type="text" id="%ID%_size" style="width:30px;"/> Log Size <span class="more_in">(0 for unlimited)</span> | <a href="#0" id="%ID%_clear" class="sexy_button_new shorter black narrow_sexy_button"><span><span>Clear</span></span></a> <span id="%ID%_copy_container"><a id="%ID%_copy_button" href="#0" class="sexy_button_new shorter black narrow_sexy_button"><span><span>Copy</span></span></a></span> <a href="#0" id="%ID%_invert" class="sexy_button_new shorter black narrow_sexy_button"><span><span>Invert</span></span></a> <span id="%ID%_msg"></span></div><div class="divider"></div><div id="%ID%_log"></div></td></tr></tbody></table>'.replace(/%ID%/g,
this.id),"tab_names_bottom_left","tab_area_bottom",function(){b.B()});str="";for(i=0;i<this.z.length;i++)str+='<option value="'+i+'">'+this.z[i]+"</option>";$("#"+this.id+"_mode").html(str);$("#"+this.id+"_mode").change(function(){return b.lb(this)});$("#"+this.id+"_size").change(function(){return b.xc(this)});$("#"+this.id+"_clear").click(function(){return b.kb(this)});$("#"+this.id+"_invert").click(function(){return b.wc(this)})};this.q();this.H()}function N(c,d){this.id=d;this.I=c;this.a=r;this.m=
[];this.R=r;N.prototype.B=function(){X(this,"Log ("+this.m.length+")");I()&&this.visible&&(this.R||(this.R=$("#"+this.id+"_log")),this.R&&this.R.html(this.m.join("<br/>")))};N.prototype.log=function(b){if(b){if(this.a.Bb)var a=new Date,e=a.getHours(),a=a.getMinutes(),b=aa("["+(10>e?"0"+e:e)+":"+(10>a?"0"+a:a)+"] ")+" "+b;this.a.u?this.m.push(b):this.m.unshift(b)}if(0<this.a.size)for(;this.m.length>this.a.size;)this.a.u?this.m.shift():this.m.pop();this.B()};N.prototype.error=function(b){this.a.gb&&
this.log(b)};N.prototype.debug=function(b){this.a.fb&&this.log(b)};N.prototype.xc=function(b){this.a.size=p($(b).val());this.log();this.d();return j};N.prototype.Pe=function(b){this.a.fb=x(b);this.d();return j};N.prototype.Ve=function(b){this.a.gb=x(b);this.d();return j};N.prototype.Ff=function(b){this.a.Bb=x(b);this.d();return j};N.prototype.kb=function(){this.m=[];this.B();return S};N.prototype.wc=function(){this.a.u=!this.a.u;this.m.reverse();this.B();return S};N.prototype.G=function(){this.a=
{gb:S,fb:S,Bb:j,u:S,size:50}};N.prototype.d=function(){var b={};b.log_errors=this.a.gb;b.log_debug=this.a.fb;b.timestamps=this.a.Bb;b.invert=this.a.u;b.size=this.a.size;ea(this.id,b)};N.prototype.H=function(){this.G();try{var b={},a=fa(this.id);b.gb=a.log_errors;b.fb=a.log_debug;b.Bb=a.timestamps;b.u=a.invert;b.size=a.size;M(this.a,b)}catch(e){}$("#"+this.id+"_size").val(this.a.size);A("#"+this.id+"_debug",this.a.fb);A("#"+this.id+"_errors",this.a.gb);A("#"+this.id+"_timestamps",this.a.Bb);this.B()};
N.prototype.q=function(){var b=this;T(this,('<table class="tornado tabframe"><tbody><tr><td valign="top"><div><input type="text" id="%ID%_size" style="width:30px;"/> Log Size <span class="more_in">(0 for unlimited)</span> | '+ba("Log Debug","debug")+" | "+ba("Log Errors","errors")+" | "+ba("Timestamps","timestamps")+' | <a href="#0" id="%ID%_clear" class="sexy_button_new shorter black narrow_sexy_button"><span><span>Clear</span></span></a> <a href="#0" id="%ID%_invert" class="sexy_button_new shorter black narrow_sexy_button"><span><span>Invert</span></span></a></div><div class="divider"></div><div id="%ID%_log"></div></td></tr></tbody></table>').replace(/%ID%/g,
this.id),"tab_names_bottom_left","tab_area_bottom",function(){b.B()});$("#"+this.id+"_size").change(function(){return b.xc(this)});$("#"+this.id+"_debug").click(function(){return b.Pe(this)});$("#"+this.id+"_errors").click(function(){return b.Ve(this)});$("#"+this.id+"_clear").click(function(){return b.kb(this)});$("#"+this.id+"_invert").click(function(){return b.wc(this)});$("#"+this.id+"_timestamps").click(function(){return b.Ff(this)});D$.log=q=function(a){b.log(a)};D$.logError=s=function(a){b.error(a)};
D$.logDebug=la=function(a){b.debug(a)}};this.q();this.H()}function l(f,d){this.id=d;this.I=f;this.w=this.a=r;this.b=[];this.p=this.yc=this.Ja=0;this.ua=120;this.v=[];this.Ia=this.Tb=0;this.ba=20;this.F=[];this.D=[];this.Kc=[];l.prototype.z=["Active","Opponents","Ignored","Favourites"];l.prototype.td=function(b){var a,e;e=this.b[b].enabled&&!this.b[b].Pb?this.b[b].U?"op_active":"":"opacity_50";a='<td class="op_name '+e+'">'+this.b[b].link+"</td>";a+='<td class="op_level '+e+'">'+v(this.b[b].Qb)+"</td>";
a+='<td class="op_defense '+e+'">'+v(this.b[b].fa)+"</td>";this.b[b].Pb?a+='<td class="">Ignored</td>':(a=this.b[b].enabled?a+('<td class="op_buttons"><a href="#0" class="disable_opponent" data-id="'+this.b[b].uid+'">Disable</a> | <a href="#0" class="ignore_opponent" data-id="'+this.b[b].uid+'">Ignore</a>'):a+('<td class="op_buttons"><a href="#0" class="enable_opponent" data-id="'+this.b[b].uid+'">Enable</a> | <a href="#0" class="ignore_opponent" data-id="'+this.b[b].uid+'">Ignore</a>'),a+=' | <a href="#0" class="fav_opponent" data-id="'+
this.b[b].uid+'">Favourite</a>',a+="</td>");return a};l.prototype.Gd=function(b){var a;a=this.b[b].fa?'<td class="zzop_name" style="height:61px;"><div style="float:left;height:36px;margin-top:3px;"><span style="background-image:url(&quot;https://zyngapv.hs.llnwd.net/e6/mwfb'+this.b[b].Sc+'&quot;);background-repeat:no-repeat;padding-left:40px;padding-bottom:18px;"></span></div><div style="float:left;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;width:200px;">'+this.b[b].link+"<br/>Level "+
v(this.b[b].Qb)+" "+this.b[b].rd+'<br/><span class="defense '+(this.b[b].Yc?"good":"bad")+'">???</span><span class="group_defense '+(this.b[b].Xd?"good":"bad")+'" style="margin-left:10px;">'+v(this.b[b].fa)+'</span></div><div style="clear:both;"></div></td>':'<td class="zzop_name" style="height:61px;"><div style="float:left;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;width:240px;">'+this.b[b].link+'<br/><br/></div><div style="clear:both;"></div></td>';a=-1!==this.b[b].ra?a+('<td class="zzop_health" style="width:215px;height:61px;"><div style="float:left;margin-left:5px;margin-top:10px;">Health <span class="health">'+
this.b[b].ra+'%</span></div><div class="divFightAttack" style="font-size:30px;float:right;margin-right:5px;">'+-this.b[b].qd+'</div><div style="clear:both;"></div><div class="divHPBar" style="margin:0px;"><div id="defender_hp" class="'+(33>this.b[b].ra?"hpbg_low":66>this.b[b].ra?"hpbg_mid":"hpbg_high")+'" style="width: '+Math.min(p(215*this.b[b].ra/100),215)+'px;"></div></div></td>'):a+'<td class="zzop_health" style="width:215px;height:61px;"></td>';this.b[b].Pb?a+='<td class="">Ignored</td>':(a+=
'<td class=""><a href="#0" data-id="'+this.b[b].uid+'" class="skip_opponent sexy_button_new shorter black narrow_sexy_button"><span><span>Skip</span></span></a>',a=this.b[b].enabled?a+(' <a href="#0" data-id="'+this.b[b].uid+'" class="disable_opponent sexy_button_new shorter black narrow_sexy_button"><span><span>Disable</span></span></a>'):a+(' <a href="#0" data-id="'+this.b[b].uid+'" class="enable_opponent sexy_button_new shorter black narrow_sexy_button"><span><span>Enable</span></span></a>'),a+=
' <a href="#0" data-id="'+this.b[b].uid+'" class="ignore_opponent sexy_button_new shorter black narrow_sexy_button"><span><span>Ignore</span></span></a>',a+="</td>");return a};l.prototype.na=function(b){var a;1===this.a.mode?I()&&this.visible&&this.w&&this.b.length&&0<this.p&&this.b[b].uid&&(a=$("#"+this.id+"_"+this.b[b].uid))&&a.html(this.td(b)):0===this.a.mode&&this.n()};l.prototype.n=function(){var b,a;if(0===this.a.mode){if(X(this,this.z[this.a.mode]+" ("+this.Ia+")"),I()&&this.visible&&this.w){a=
"";if(this.v.length&&0<this.Ia){a+='<table class="op"><tr><th class="zzop_name">Name</th><th class="zzop_health">Health</th><th class="op_buttons">Options</th></tr>';for(b in this.v)if(this.v.hasOwnProperty(b)){var e=this.v[b];-1!==e&&(this.b[e].A||(a+='<tr id="'+this.id+"_"+this.b[e].uid+'">'+this.Gd(e)+"</tr>"))}a+="</table>"}this.w.html(a)}}else if(1===this.a.mode){if(X(this,this.z[this.a.mode]+" ("+this.p+")"),I()&&this.visible&&this.w){a="";if(this.b.length&&0<this.p){a+='<table class="op"><tr><th class="op_name">Name</th><th class="op_level">Level</th><th class="op_defense">Defense</th><th class="op_buttons">Options</th></tr>';
for(b in this.b)this.b.hasOwnProperty(b)&&this.b[b].uid&&(a+='<tr id="'+this.id+"_"+this.b[b].uid+'">'+this.td(b)+"</tr>");a+="</table>"}this.w.html(a)}}else if(2===this.a.mode){if(X(this,this.z[this.a.mode]+" ("+this.a.k.length+")"),I()&&this.visible&&this.w){a="";if(this.a.k.length){a+='<table class="op">';for(b in this.a.k)this.a.k.hasOwnProperty(b)&&(a+='<tr id="'+this.id+"_"+this.a.k[b].uid+'"><td class="op_name">'+this.a.k[b].name+"</td><td>"+this.a.k[b].reason+'</td><td class="op_buttons"><a href="#0" class="remove_opponent" data-id="'+
this.a.k[b].uid+'">Remove</a></td></tr>');a+="</table>"}this.w.html(a)}}else if(3===this.a.mode&&(X(this,this.z[this.a.mode]+" ("+this.D.length+")"),I()&&this.visible&&this.w)){a="";if(this.D.length){a+='<table class="op">';for(b in this.D)this.D.hasOwnProperty(b)&&(a+='<tr id="'+this.id+"_"+this.D[b].uid+'"><td class="op_name">'+this.D[b].uid+"</td></tr>");a+="</table>"}this.w.html(a)}};l.prototype.wd=function(){var b,a;a=[];for(b in this.D)this.D.hasOwnProperty(b)&&a.push(this.D[b].uid);va.ajax({url:da+
"/api/fav.php",dataType:"jsonp",data:{user:ra,data:a.join()}},function(){})};l.prototype.Jd=function(b){this.D.push(b);this.wd();this.d()};l.prototype.Vd=function(){this.D=[];3===this.a.mode&&this.n();this.wd();this.d()};l.prototype.je=function(b){var a;this.D=[];if(b&&b.data)for(a in b=b.data.split(","),b)b.hasOwnProperty(a)&&this.D.push({uid:b[a]});this.n()};l.prototype.xe=function(){var b=this;va.ajax({url:da+"/api/fav.php",dataType:"jsonp",data:{user:ra}},function(a){b.je(a)})};l.prototype.Id=
function(b){for(var a in this.b)if(this.b.hasOwnProperty(a)&&this.b[a].uid==b){this.Jd({uid:c.b[a].uid});(1===this.a.mode||0===this.a.mode)&&this.na(a);break}};l.prototype.Kd=function(b,a){this.Kc[b]||(this.Kc[b]={ig:a},this.n())};l.prototype.Eb=function(b){this.a.k.push(b);2===this.a.mode&&this.n();this.d()};l.prototype.Wd=function(){this.a.k=[];2===this.a.mode&&this.n();this.d()};l.prototype.ia=function(b){for(var a in this.a.k)if(this.a.k.hasOwnProperty(a)&&this.a.k[a].uid==b)return a;return-1};
l.prototype.Mf=function(b){for(var a in this.a.k)if(this.a.k.hasOwnProperty(a)&&this.a.k[a].uid==b){this.a.k.splice(a,1);2===this.a.mode&&this.n();this.d();break}};l.prototype.Td=function(){this.v=[];for(i=this.Ia=this.Tb=0;i<this.ba;i++)this.v[i]=-1;this.F=[]};l.prototype.Hd=function(b){var a,e;for(a=0;a<this.ba;a++)if(e=(a+this.Tb)%this.ba,-1===this.v[e]){this.v[e]=b;this.Ia++;this.F.push(b);this.b[b].U=j;this.b[b].uc=j;this.b[b].Nb=S;0===this.a.mode&&this.n();return}s(o("Add Opponent","Unable to add opponent "+
b))};l.prototype.Lf=function(b){var a,e;for(a=0;a<this.ba;a++)if(this.v[a]===b){this.v[a]=-1;this.Ia--;for(e in this.F)if(this.F.hasOwnProperty(e)&&this.F[e]===b){this.F.splice(e,1);0===this.a.mode&&this.n();return}s(o("Remove Opponent","Unable to remove opponent from order "+b));return}s(o("Remove Opponent","Unable to remove opponent "+b))};l.prototype.V=function(b){b<this.ua&&(this.b[b]={uid:0,jd:0,name:0,ja:0,link:0,Ob:S,U:S,md:S,Bc:S,Ka:S,fa:0,Xc:0,Wc:0,Qb:0,K:-1,Q:0,da:0,Jb:0,url:0,nd:0,ld:0,
A:S,enabled:j,Pb:S,ra:-1,qd:0,uc:S,Nb:S,ha:0,ga:0,Sc:"",rd:""})};l.prototype.Ud=function(){this.b=[];for(i=this.p=this.yc=this.Ja=0;i<this.ua;i++)this.V(i)};l.prototype.Ca=function(b){for(var a in this.b)if(this.b.hasOwnProperty(a)&&c.b[a].uid==b)return a;return-1};l.prototype.Ba=function(){if(this.p>=this.ua)return-1;for(;0!==this.b[this.Ja].uid;)this.Ja++,this.Ja>=this.ua&&(this.Ja=0);return this.Ja};l.prototype.Yd=function(b){for(var a in this.b)if(this.b.hasOwnProperty(a)&&this.b[a].uid==b){this.b[a].enabled=
S;(1===this.a.mode||0===this.a.mode)&&this.na(a);break}};l.prototype.$d=function(b){for(var a in this.b)if(this.b.hasOwnProperty(a)&&this.b[a].uid==b){this.b[a].enabled=j;(1===this.a.mode||0===this.a.mode)&&this.na(a);break}};l.prototype.qe=function(b){for(var a in this.b)if(this.b.hasOwnProperty(a)&&this.b[a].uid==b){this.Eb({uid:c.b[a].uid,name:c.b[a].link,reason:"Added Manually"});this.b[a].enabled=S;this.b[a].Pb=j;(1===this.a.mode||0===this.a.mode)&&this.na(a);break}};l.prototype.Of=function(b){for(var a in this.b)if(this.b.hasOwnProperty(a)&&
this.b[a].uid==b){this.b[a].A=j;(1===this.a.mode||0===this.a.mode)&&this.na(a);break}};l.prototype.lb=function(b){this.a.mode=p($(b).val());this.n();this.d();return j};l.prototype.pf=function(b){2===this.a.mode&&this.Mf($(b).attr("data-id"));return S};l.prototype.Re=function(b){(1===this.a.mode||0===this.a.mode)&&this.$d($(b).attr("data-id"));return S};l.prototype.Qe=function(b){(1===this.a.mode||0===this.a.mode)&&this.Yd($(b).attr("data-id"));return S};l.prototype.jf=function(b){(1===this.a.mode||
0===this.a.mode)&&this.qe($(b).attr("data-id"));return S};l.prototype.Af=function(b){(1===this.a.mode||0===this.a.mode)&&this.Of($(b).attr("data-id"));return S};l.prototype.Xe=function(b){this.Id($(b).attr("data-id"));return S};l.prototype.kb=function(){2===this.a.mode?this.Wd():3===this.a.mode&&this.Vd();return S};l.prototype.G=function(){this.a={};this.a.mode=2;this.a.k=[]};l.prototype.d=function(){var b={};b.mode=this.a.mode;b.ignore_list=[];for(var a in this.a.k)this.a.k.hasOwnProperty(a)&&b.ignore_list.push({uid:this.a.k[a].uid,
name:this.a.k[a].name,reason:this.a.k[a].reason});ea(this.id,b)};l.prototype.H=function(){this.G();try{var b={},a=fa(this.id);b.mode=a.mode;b.k=[];for(var e in a.ignore_list)a.ignore_list.hasOwnProperty(e)&&b.k.push({uid:a.ignore_list[e].uid,name:a.ignore_list[e].name,reason:a.ignore_list[e].reason});M(this.a,b)}catch(c){}$("#"+this.id+"_mode").val(this.a.mode);this.n()};l.prototype.q=function(){var b=this;T(this,'<table class="tornado tabframe"><tbody><tr><td valign="top"><div>Show <select id="%ID%_mode"></select> | <a href="#0" id="%ID%_clear" class="sexy_button_new shorter black narrow_sexy_button"><span><span>Clear</span></span></a></div><div class="divider"></div><div id="%ID%_opponent_list"></div></td></tr></tbody></table>'.replace(/%ID%/g,
this.id),"tab_names_bottom_left","tab_area_bottom",function(){b.n()});str="";for(i=0;i<this.z.length;i++)str+='<option value="'+i+'">'+this.z[i]+"</option>";$("#"+this.id+"_mode").html(str);$("#"+this.id+"_mode").change(function(){return b.lb(this)});$("#"+this.id+"_clear").click(function(){return b.kb()});this.w=$("#"+this.id+"_opponent_list");this.w.delegate(".remove_opponent","click",function(){return b.pf(this)});this.w.delegate(".disable_opponent","click",function(){return b.Qe(this)});this.w.delegate(".enable_opponent",
"click",function(){return b.Re(this)});this.w.delegate(".ignore_opponent","click",function(){return b.jf(this)});this.w.delegate(".skip_opponent","click",function(){return b.Af(this)});this.w.delegate(".fav_opponent","click",function(){return b.Xe(this)})};this.q();this.H();this.xe()}function ca(c,d){this.id=d;this.I=c;this.s=[];this.la=this.sa=0;ca.prototype.Z=function(b){var a,e,c,f;X(this,"Inventory ("+this.sa+")");e="";if(b===r||b===g){if(I()&&this.visible&&(c=K(this.id+"_loot"))){if(m.j.length){e=
'<table class="inv"><tr><th class="inv_count">Count</th><th class="inv_atk">Attack</th><th class="inv_def">Defense</th><th class="inv_name">Name</th></tr>';for(a in m.j)m.j.hasOwnProperty(a)&&(b=m.j[a],f=S,0===this.la&&b.W?f=j:1===this.la?f=j:2===this.la&&b.U?f=j:3===this.la&&0!==b.Vb?f=j:4===this.la&&0===b.Vb&&(f=j),f?(f="",b.U&&(f=b.Vb==Math.max(b.fd,b.ed)?"yellow":"good"),e+='<tr id="'+this.id+"_"+b.id+'"><td class="inv_count"><span class="good">'+b.W+'x</span></td><td class="inv_atk"><span class="attack">'+
b.Gb+'</span></td><td class="inv_def"><span class="defense">'+b.fa+'</span></td><td class="inv_name"><img id="lootimg" style="width:18px; height:18px;" src="https://zyngapv.hs.llnwd.net/e6/mwfb/graphics/'+b.vc+'" class="item_with_preview" item_id="'+b.id+'">&nbsp;<span class="'+f+'"><abbr title="'+b.id+'">'+b.name+"</abbr></span></td></tr>"):e+='<tr id="'+this.id+"_"+b.id+'" style="display:none;"></tr>');e+="</table><br/>"}for(a=0;a<this.s.length;a++)e+='<span class="good">'+this.s[a][1]+'x</span> <img id="lootimg" style="width: 18px; height: 18px;" src="https://zyngapv.hs.llnwd.net/e6/mwfb/graphics/collections/standard/'+
this.s[a][0]+'"> '+this.s[a][0]+"<br/>";c.innerHTML=e}}else if(I()&&this.visible&&(c=K(this.id+"_"+b)))b=m.j[b],f="",b.U&&(f=b.Vb==Math.max(b.fd,b.ed)?"yellow":"good"),c.innerHTML='<td class="inv_count"><span class="good">'+b.W+'x</span></td><td class="inv_atk"><span class="attack">'+b.Gb+'</span></td><td class="inv_def"><span class="defense">'+b.fa+'</span></td><td class="inv_name"><img id="lootimg" style="width:18px; height:18px;" src="https://zyngapv.hs.llnwd.net/e6/mwfb/graphics/'+b.vc+'" class="item_with_preview" item_id="'+
b.id+'">&nbsp;<span class="'+f+'"><abbr title="'+b.id+'">'+b.name+"</abbr></span></td>",c.style.display=""};ca.prototype.Rc=function(b){var a,e;if(a===r||a===g)a=1;this.sa+=a;if(this.s.length)for(e=0;e<this.s.length;e++)if(this.s[e][0]==b){this.s[e][1]+=a;this.Z();return}for(e in m.j)if(m.j.hasOwnProperty(e)&&m.j[e].vc==b){m.j[e].W+=a;this.Z(e);return}this.s.push([b,a]);this.s.sort();this.Z()};ca.prototype.le=function(b,a){var e;if(a===r||a===g)a=1;if(1<a)for(e in m.j)if(m.j.hasOwnProperty(e)&&m.j[e].If==
b)return e;for(e in m.j)if(m.j.hasOwnProperty(e)&&m.j[e].name==b)return e;return-1};ca.prototype.Qc=function(b,a){var e;if(a===r||a===g)a=1;this.sa+=a;e=this.le(b,a);if(-1!==e)m.j[e].W+=a,this.Z(e);else{if(this.s.length)for(e=0;e<this.s.length;e++)if(this.s[e][0]==b){this.s[e][1]+=a;this.Z();return}this.s.push([b,a]);this.s.sort();this.Z()}};ca.prototype.Fb=function(b){var a;if(a===r||a===g)a=1;this.sa+=a;m.j.length&&m.j[b]?(m.j[b].W+=a,this.Z(b)):s(o("Unknown Item",b))};ca.prototype.sd=function(){this.la=
p($("#"+this.id+"_show_loot").val());this.Z();return j};ca.prototype.q=function(){var b=this;T(this,'<table class="tornado tabframe"><tbody><tr><td valign="top"><div>Show <select id="%ID%_show_loot"><option value="0">Gained</option><option value="1">All</option><option value="2">Active</option><option value="3">Owned</option><option value="4">Not Owned</option></select></div><div class="divider"></div><div id="%ID%_loot"></div></td></tr></tbody></table>'.replace(/%ID%/g,this.id),"tab_names_bottom_left",
"tab_area_bottom",function(){b.Z()});this.la=0;$("#"+this.id+"_show_loot").val(this.la);$("#"+this.id+"_show_loot").change(function(){return b.sd()});this.sd()};this.q()}function O(c,d){this.id=d;this.I=c;this.c=new G(c,d);this.a=r;O.prototype.Wb=function(a,b){$(a)&&($(a).remove(),$(b)&&$(b).css({filter:"100","-moz-opacity":"100",opacity:"100"}))};O.prototype.Dd=function(){this.a.ab?($("#mafia_two_banner")&&$("#mafia_two_banner").hide(),$("#mw_like_button")&&$("#mw_like_button").hide(),$("#snapi_zbar")&&
$("#snapi_zbar").parent("div").hide(),$("#zbar")&&$("#zbar").parent("div").hide(),$("iframe[name=mafiawars_zbar]")&&$("iframe[name=mafiawars_zbar]").parent("div").hide(),$("div[class=footer_text]")&&$("div[class=footer_text]").hide(),$("#clanChat")&&$("#clanChat").hide(),$("#final_wrapper div").filter("div:last")&&$("#final_wrapper div").filter("div:last").hide(),$("#cpa_fights_banner")&&$("#cpa_fights_banner").remove(),$("#cpa_jobs_banner")&&$("#cpa_jobs_banner").remove(),$("div[class=level_stat]")&&
$("div[class=level_stat]").css("min-width","60px")):($("#mafia_two_banner")&&$("#mafia_two_banner").show(),$("#mw_like_button")&&$("#mw_like_button").show(),$("#snapi_zbar")&&$("#snapi_zbar").parent("div").show(),$("#zbar")&&$("#zbar").parent("div").show(),$("iframe[name=mafiawars_zbar]")&&$("iframe[name=mafiawars_zbar]").parent("div").show(),$("div[class=footer_text]")&&$("div[class=footer_text]").show(),$("#clanChat")&&$("#clanChat").show(),$("#final_wrapper div").filter("div:last")&&$("#final_wrapper div").filter("div:last").show())};
O.prototype.Cd=function(){this.a.$a&&(this.Wb("#subscription_icon_container","#subscription_icon_cover"),this.Wb("#buyframe_link_container_anim","#buyframe_link_cover_anim"),this.Wb("#slots_icon_container","#slots_icon_cover"),this.Wb("#free_gift_swf_icon_container","#free_gift_swf_icon_cover"))};O.prototype.Le=function(a){this.a.Ta=x(a);this.d();return j};O.prototype.Ke=function(a){this.a.Sa=x(a);this.d();return j};O.prototype.Je=function(a){this.a.Ra=x(a);this.d();return j};O.prototype.ff=function(a){this.a.ab=
x(a);this.Dd();this.d();return j};O.prototype.ef=function(a){this.a.$a=x(a);this.Cd();this.d();return j};O.prototype.G=function(){this.a={};this.a.cc=8;this.a.ab=S;this.a.$a=S;this.a.Ta=S;this.a.Sa=S;this.a.Ra=S};O.prototype.d=function(){var a={};a.thread_count=this.a.cc;a.hide_rewardville=this.a.ab;a.hide_icons=this.a.$a;a.autorun_rob=this.a.Ta;a.autorun_fight=this.a.Sa;a.autorun_boss=this.a.Ra;ea(this.id,a)};O.prototype.H=function(){this.G();try{var a={},b=fa(this.id);a.cc=b.thread_count;a.ab=b.hide_rewardville;
a.$a=b.hide_icons;a.Ta=b.autorun_rob;a.Sa=b.autorun_fight;a.Ra=b.autorun_boss;M(this.a,a)}catch(c){}this.a.cc=8;A("#"+this.id+"_hide_rewardville",this.a.ab);A("#"+this.id+"_hide_icons",this.a.$a);A("#"+this.id+"_autorun_rob",this.a.Ta);A("#"+this.id+"_autorun_fight",this.a.Sa);A("#"+this.id+"_autorun_boss",this.a.Ra)};O.prototype.q=function(){var a=this,b='<div class="tabframe"><div style="padding:10px;">'+Q("Display","opt_display",F("Hide RewardVile","hide_rewardville")+F("Hide Flash Icons","hide_icons")),
b=b+('<div style="height:8px;clear:both;"></div>'+Q("Autorun","opt_autorun",F("Start <i>Robbing</i> when script is loaded","autorun_rob")+F("Start <i>Fighting</i> when script is loaded","autorun_fight")+F("Start <i>Bosses</i> when script is loaded","autorun_boss")+""));T(this,(b+"</div></div>").replace(/%ID%/g,this.id),"tab_names_top_left","tab_area_top");$("#"+this.id+"_autorun_rob").click(function(){return a.Le(this)});$("#"+this.id+"_autorun_fight").click(function(){return a.Ke(this)});$("#"+this.id+
"_autorun_boss").click(function(){return a.Je(this)});$("#"+this.id+"_hide_rewardville").click(function(){return a.ff(this)});$("#"+this.id+"_hide_icons").click(function(){return a.ef(this)})};O.prototype.Nd=function(){this.c.g=j;q(C("Mafia Wars",""+(new Date(1E3*p(User.bt))).toUTCString()));q(C('<span class="gold_star"></span> Mafia Demon',"Version "+oa));this.Dd();this.Cd();this.c.state=E;this.c.e()};O.prototype.e=function(){this.c.state===E?(this.c.h=7,this.c.ec()):7===this.c.state?(Ra('<a class="profilelink" data-id="'+
pa.substring(2)+'" target="_blank">'+m.lc.name+"</a> ("+(ra?'<a href="http://www.facebook.com/profile.php?id='+ra+'" target="_blank">FB</a>':"FB")+') loaded <span class="gold_star"></span> Mafia Demon ['+oa+'] <span class="more_in">'+navigator.userAgent+"</span>"),this.c.state=23,this.e()):23===this.c.state?(this.c.h=ga,this.c.Ae()):this.c.state===ga&&(this.c.g=S)};var b=this;this.c.e=function(){b.e()};this.q();this.H()}function t(c,d){this.id=d;this.I=c;this.c=new G(c,d);var b=["","bruiser","arsonist",
"racketeer"],a=0,e=r,u=r,W=r,h="",n=8,U=j,k=0,y=0,w=S,l=0,ha=0;this.ma=j;this.a=this.r=r;t.prototype.M=function(){n=8;a=0;W=u=e=r;h="";U=j;this.c.M();return S};t.prototype.N=function(){this.c.N();return S};t.prototype.Ue=function(a){this.a.Wa=p($(a).val());this.d();return j};t.prototype.Te=function(a){this.a.Kb=x(a);this.d();return j};t.prototype.Se=function(a){this.a.ya=x(a);this.d();return j};t.prototype.G=function(){this.a={};this.a.Wa=3;this.a.Kb=j;this.a.ya=j};t.prototype.d=function(){var a=
{};a.epic_role=this.a.Wa;a.epic_help_friends=this.a.Kb;a.epic_ask_boosts=this.a.ya;ea(this.id,a)};t.prototype.H=function(){this.G();try{var a={},b=fa(this.id);a.Wa=b.epic_role;a.Kb=b.epic_help_friends;a.ya=b.epic_ask_boosts;M(this.a,a)}catch(e){}$("#"+this.id+"_epic_role").val(this.a.Wa);A("#"+this.id+"_epic_help_friends",this.a.Kb);A("#"+this.id+"_epic_ask_boosts",this.a.ya)};t.prototype.mb=function(){};t.prototype.q=function(){var a=this;T(this,('<div class="tabframe">'+ma("Options","options")+
Q("Family Bosses","opt_epicboss",'Join Fights <select id="%ID%_epic_role"><option value="1">Bruiser</option><option value="2">Arsonist</option><option value="3">Racketeer</option></select><br/>'+F("Ask for Boosts","epic_ask_boosts")+F("Send Boosts","epic_help_friends"))+'</div></div><div class="module_seperator"></div>'+ma("Stats","stats")+'</div></div><div class="module_seperator"></div><div style="padding:10px;"><span id="%ID%_start_row" style="display:none; vertical-align:text-bottom;"><a class="sexy_button_new short orange" id="%ID%_start"><span><span>Start</span></span></a></span><span id="%ID%_stop_row" style="display:none; vertical-align:text-bottom;"><a class="sexy_button_new short red" id="%ID%_stop"><span><span>Stop</span></span></a></span>&nbsp;&nbsp;&nbsp;<span id="%ID%_status_log" style="vertical-align:text-bottom;"></span></div></div>').replace(/%ID%/g,
this.id),"tab_names_top_left","tab_area_top",function(){a.mb()});$("#"+this.id+"_options_toggle").click(function(){V(a.id+"_options",a.id+"_options_toggle");return S});$("#"+this.id+"_stats_toggle").click(function(){a.ma=V(a.id+"_stats",a.id+"_stats_toggle");a.S();return S});$("#"+this.id+"_start").click(function(){return a.M()});$("#"+this.id+"_stop").click(function(){return a.N()});$("#"+this.id+"_epic_role").change(function(){return a.Ue(this)});$("#"+this.id+"_epic_help_friends").click(function(){return a.Te(this)});
$("#"+this.id+"_epic_ask_boosts").click(function(){return a.Se(this)});this.c.Yb()};t.prototype.S=function(){if(I()&&(this.visible&&this.ma)&&(this.r||(this.r=$("#"+this.id+"_stats")),this.r))this.r.html("Test"),R.va()};t.prototype.Ub=function(){1<n?(n--,U=j):n=-1;this.c.state=E};t.prototype.za=function(){k++;var a=this;z.l(D("xw_controller=Epicclanboss&xw_action=epic_attack&consumable_id=0&boss_id="+n),B(),function(b,e,c){a.ce(c)})};t.prototype.ce=function(b){if(this.c.g&&4==b.readyState)if(200==
b.status){y++;var c=r,f=r;try{if(c=JSON.parse(b.responseText),f=JSON.parse(c.data),f.message.success)if(l+=f.damage.toBoss,ha=Math.min(ha,f.bossHealth),3===e.Pa){if(5<f.staminaRequired||0>=f.pendingRollEffects[3].count)w=j;0===a&&this.a.ya&&(f.askDisplay[2]&&0>=f.pendingRollEffects[2].count?a=2:f.askDisplay[1]&&0>=f.pendingRollEffects[1].count&&(a=1))}else if(2===e.Pa){if(5<=y||0>=f.pendingRollEffects[2].count)w=j}else w=j;else"The fight is over."==f.message||"The boss is dead."==f.message?U||(q(C("Epic Boss",
f.message)),this.Ub()):s(o("Epic Boss",f.message)),w=j}catch(u){s(o("Epic Boss","Problem Hitting Boss - "+u))}w?y>=k&&(q(C("Epic Boss",'<span class="health">'+v(ha)+"</span> "+aa("(-"+v(l)+")"))),2===e.Pa&&(U=j),this.e()):this.za()}else this.za()};t.prototype.he=function(a,b){var c=this;z.l(D("xw_controller=Epicclanboss&xw_action=epic_send_role&cell_id=0&role_id="+e.Pa+"&boss_id="+n+"&target_ppid="+a),B(),function(e,k,f){c.ie(f,a,b)})};t.prototype.ie=function(a,b,c){if(this.c.g&&4==a.readyState)if(200==
a.status){var f=S,d=r,W=r;try{d=JSON.parse(a.responseText),W=JSON.parse(d.data),m.Cb(d),W.message.success?(q(C("Epic Boss","Sent Boosts to "+c)),5<=m.f.T&&(f=j)):("This fight is over!"==W.message.message&&this.Ub(),q(o("Epic Boss","Problem Sending Boosts to "+c+" - "+W.message.message)))}catch(n){s(o("Epic Boss","Problem Sending Boosts to "+c+" - "+n))}this.c.Uc()&&(f=S);if(f)if(b===ra){w=S;l=y=k=0;ha=u.xa;a=1;3===e.Pa&&(a=5);for(b=0;b<a;b++)this.za()}else this.e();else this.c.state=E,this.e()}else s(o("Epic Boss",
"Problem Sending Boosts to "+c)),this.c.state=E,this.e()};t.prototype.Zc=function(){var b=this;z.l(D("xw_controller=Epicclanboss&xw_action=epic_ask_role&role_id="+a+"&boss_id="+n),B(),function(a,e,c){b.be(c)})};t.prototype.be=function(b){if(this.c.g&&4==b.readyState)if(200==b.status)try{var e=JSON.parse(b.responseText);e.data&&e.data.impulseBuy&&e.data.impulseBuy.message?(q(C("Epic Boss",e.data.impulseBuy.message.replace(/<\/?[^>]+(>|$)/g,""))),a=0):s(o("Epic Boss","Problem Asking For Boosts"))}catch(c){s(o("Epic Boss",
"Problem Asking For Boosts - "+c))}else s(o("Epic Boss","Problem Asking For Boosts"))};t.prototype.$c=function(a){var b=this;z.l(D("xw_controller=Epicclanboss&xw_action=epic_collect&boss_id="+a),B(),function(e,c,k){b.de(k,a)})};t.prototype.de=function(a,b){if(this.c.g&&4==a.readyState)if(200==a.status){q(C("Epic Boss","Collected Boss "+b));var e,c=/item_id="(\d+)"/g;for(c.compile(c);e=c.exec(a.responseText);)Y.Fb(p(e[1]));this.e()}else s(o("Epic Boss","Problem Collecting Boss "+b)),this.$c(b)};t.prototype.ad=
function(a){var e=this;z.l(D("xw_controller=Epicclanboss&xw_action=epic_join&role="+b[this.a.Wa]+"&boss_id="+a),B(),function(b,c,k){e.fe(k,a)})};t.prototype.fe=function(a,b){this.c.g&&4==a.readyState&&(200==a.status?(q(C("Epic Boss","Joined Boss "+b)),n=b,U=j,this.e()):(s(o("Epic Boss","Joining Boss "+b)),this.ad(b)))};t.prototype.dd=function(){var a=this;z.l(D("xw_controller=Epicclanboss&xw_action=boss_view&boss_id="+n),B(),function(b,e,c){a.ge(c)})};t.prototype.ge=function(a){if(this.c.g&&4==a.readyState)if(200==
a.status){var b;b=xa(a.responseText,"var userData = ",/;[\r\n]+/);e={userName:b.userName,Yf:b.user_score,Pa:b.user_role,zd:b.stamina_required,Tc:b.boost_C_count,Ld:b.askDisplay_3};b=xa(a.responseText,"var bossData = ",/;[\r\n]+/);u={jc:b.bossName,xa:b.currHealth,Vc:b.current_rage};U=S;e&&u?(q(C("Epic Boss",e.userName+" (Score "+v(e.Yf)+")")),q(C("Epic Boss",u.jc+' <span class="health">'+v(u.xa)+"</span> (Rage "+v(u.Vc)+")")),0===u.xa&&this.Ub()):(q(o("Epic Boss","Boss "+n+" is not active")),this.Ub());
this.e()}else s(o("Epic Boss","Problem Loading Boss Page")),this.dd()};t.prototype.bd=function(){var a=this;z.l(D("xw_controller=Epicclanboss&xw_action=list_view&type=bossfight"),B(),function(b,e,c){a.cd(c)})};t.prototype.ee=function(a){var b=this;z.l(D("xw_controller=Epicclanboss&xw_action=epic_create&boss_id="+a),B(),function(a,e,c){b.cd(c)})};t.prototype.cd=function(a){if(this.c.g&&4==a.readyState)if(200==a.status){var b;/Please wait a moment while we calculate the rewards/.test(a.responseText)?
(q(C("Epic Boss","Waiting for Rewards")),this.c.state=25,this.c.O=5,this.c.h=24,this.c.e()):(b=/xw_controller=Epicclanboss&xw_action=epic_collect.+boss_id=(\d)/.exec(a.responseText))?(q(C("Epic Boss","Ready to Collect Boss "+b[1])),this.$c(p(b[1]))):(b=/BossOperationController.goToFight.(\d)/.exec(a.responseText))?(q(C("Epic Boss","Ready to Join Boss "+b[1])),this.ad(p(b[1]))):(b=/BossOperationController.startFight.(\d)/.exec(a.responseText))?(q(C("Epic Boss","Ready to Start Boss "+b[1])),this.ee(p(b[1]))):
(this.c.state=25,this.c.O=5,this.c.h=24,this.c.e())}else s(o("Epic Boss","Problem Loading List Page")),this.bd()};t.prototype.e=function(){var b;if(this.c.state===E)this.c.h=2,this.c.ec();else if(2===this.c.state)this.c.state=24,this.c.e();else if(24===this.c.state)-1===n?(this.c.i("Checking Epic Boss List\u2026"),this.bd()):U===j?(this.c.h=24,this.c.i("Checking Epic Boss "+n+"\u2026"),this.dd()):W!==r?(this.c.i("Sending Epic Boss Boost to "+h+"\u2026"),this.he(W,h),W=r,h=""):5<=m.f.T?(0!==a&&this.Zc(),
2===e.Pa)?(b=j,5<e.zd&&0===e.Tc?(q(C("Epic Boss","Waiting for Racketeer Boost")),this.a.ya&&(0===a&&e.Ld)&&(a=3,this.Zc()),b=S):500>u.Vc&&(q(C("Epic Boss","Waiting for Higher Rage")),b=S),b)?(this.c.h=E,this.c.i("Attacking "+u.jc+" (Arsonist)\u2026"),w=j,l=y=k=0,ha=u.xa,this.za()):(U=j,this.c.state=25,this.c.O=5,this.c.h=24,this.c.e()):(b=j,5<e.zd&&0===e.Tc&&(q(C("Epic Boss","Waiting for Racketeer Boost")),b=S),b)?(this.c.h=E,this.c.i("Attacking "+u.jc+"\u2026"),w=j,l=y=k=0,ha=u.xa,this.za()):(U=
j,this.c.state=25,this.c.O=30,this.c.h=24,this.c.e()):(w=j,l=y=k=0,ha=u.xa,this.za(),U=j,this.c.state=25,this.c.O=5,this.c.h=24);else if(25==this.c.state){this.c.state=this.c.h;var c=this;this.c.zc(this.c.O,function(){c.e()})}else this.c.state==ga&&this.N()};var Ha=this;this.c.e=function(){Ha.e()};this.q();this.H();na.a.Ra&&this.c.gc(function(){Ha.M()})}function h(f,d){this.id=d;this.I=f;this.c=new G(f,d);this.hd=0;this.Na=S;this.a=r;this.X=this.Qa=this.da=0;this.Da=this.Y=S;this.ma=j;this.r=r;this.o=
{ha:0,ga:0,Ib:0,nc:0,od:0,pd:0,Xb:0};h.prototype.z="Fight List;Hitlist;Family;Family Battle;Single Target;Bucket;Rivals".split(";");this.Bd=r;h.prototype.M=function(){var a;c.Ud();c.Td();c.n();this.X=this.Qa=this.da=0;this.Na=this.Da=this.Y=S;a=this;this.Bd=setInterval(function(){a.o.Xb++;a.S()},1E3);this.c.M();return S};h.prototype.N=function(){clearInterval(this.Bd);Ia.send();Ja.send();this.c.N();return S};h.prototype.Ed=function(){$("#"+this.id+"_opt_fightlist").toggle(0===this.a.mode);$("#"+this.id+
"_opt_battle").toggle(3===this.a.mode);$("#"+this.id+"_opt_family").toggle(2===this.a.mode);$("#"+this.id+"_opt_target").toggle(4===this.a.mode);$("#"+this.id+"_opt_mwlists").toggle(5===this.a.mode);$("#"+this.id+"_opt_hitlist").toggle(1===this.a.mode);$("#"+this.id+"_opt_rivals").toggle(6===this.a.mode)};h.prototype.lb=function(a){this.a.mode=p($(a).val());this.Ed();this.d();return j};h.prototype.Ye=function(a){this.a.oa=p($(a).val());this.d();return j};h.prototype.bf=function(a){this.a.qa=p($(a).val());
this.d();return j};h.prototype.Lc=function(){m.f&&m.f.Oa&&$("#"+this.id+"_heal_pct").html("(about "+p(100*this.a.Fa/m.f.Oc)+"%)")};h.prototype.df=function(a){this.a.Fa=p($(a).val());this.Lc();this.d();return j};h.prototype.cf=function(a){this.a.Ea=x(a);this.d();return j};h.prototype.af=function(a){this.a.pa=x(a);this.d();return j};h.prototype.xf=function(a){this.a.wb=x(a);this.d();return j};h.prototype.yf=function(a){this.a.xb=p($(a).val());this.d();return j};h.prototype.vf=function(a){this.a.ub=
x(a);this.d();return j};h.prototype.wf=function(a){this.a.vb=p($(a).val());this.d();return j};h.prototype.zf=function(a){this.a.La=x(a);this.d();return j};h.prototype.$e=function(a){this.a.Za=p($(a).val());this.d();return j};h.prototype.Ze=function(a){this.a.Ya=x(a);this.d();return j};h.prototype.gf=function(a){this.a.bb=p($(a).val());this.d();return j};h.prototype.We=function(a){this.a.Xa=$(a).val();this.d();return j};h.prototype.Ef=function(a){this.a.Ab=$(a).val();this.d();return j};h.prototype.Df=
function(a){this.a.wa=p($(a).val());this.d();return j};h.prototype.of=function(a){this.a.jb=$(a).val();this.d();return j};h.prototype.lf=function(a){this.a.aa=Math.max(1,Math.min(p($(a).val()),8));$(a).val(this.a.aa);this.d();return j};h.prototype.nf=function(a){this.a.Ha=Math.max(1,Math.min(p($(a).val()),8));$(a).val(this.a.Ha);this.d();return j};h.prototype.uf=function(a){this.a.sb=x(a);this.d();return j};h.prototype.tf=function(a){this.a.rb=x(a);this.d();return j};h.prototype.sf=function(a){this.a.qb=
x(a);this.d();return j};h.prototype.qf=function(a){this.a.pb=x(a);this.d();return j};h.prototype.rf=function(a){this.a.ka=x(a);this.d();return j};h.prototype.Me=function(a){this.a.Ua=x(a);this.d();return j};h.prototype.Cf=function(a){this.a.zb=x(a);this.d();return j};h.prototype.Bf=function(a){this.a.yb=x(a);this.d();return j};h.prototype.Ie=function(a){this.a.P=Math.max(1,Math.min(p($(a).val()),7));$(a).val(this.a.P);this.d();return j};h.prototype.hf=function(a){this.a.cb=$(a).val();this.d();return j};
h.prototype.kf=function(a){this.a.eb=x(a);this.d();return j};h.prototype.G=function(){this.a={};this.a.mode=0;this.a.oa=0;this.a.qa=1;this.a.Fa=500;this.a.Ea=j;this.a.pa=S;this.a.wb=j;this.a.xb=90;this.a.ub=S;this.a.vb=500;this.a.Za=501;this.a.Ya=j;this.a.cb="RedTag1\nRedTag2\n";this.a.eb=S;this.a.La=j;this.a.xd=j;this.a.P=4;this.a.bb=8E3;this.a.Xa="http://apps.facebook.com/inthemafia/family.php?id=%7B%22id%22%3A%22ODEyMA%3D%3D%22%7D";this.a.Ab="http://apps.facebook.com/inthemafia/profile.php";this.a.wa=
0;this.a.jb="http://www.mwlists.com/Bucket/index.php?bucket=3kGyBBCTdSUJrKAtGoxkXSqbospb4PTf";this.a.aa=3;this.a.Ha=3;this.a.sb=j;this.a.rb=j;this.a.qb=j;this.a.pb=j;this.a.ka=j;this.a.Ua=j;this.a.zb=S;this.a.yb=S};h.prototype.d=function(){var a={};a.mode=this.a.mode;a.fight_city=this.a.oa;a.heal_city=this.a.qa;a.heal_value=this.a.Fa;a.heal_manual=this.a.Ea;a.heal_auto=this.a.pa;a.skip_health=this.a.wb;a.skip_health_pct=this.a.xb;a.skip_attacks=this.a.ub;a.skip_attacks_count=this.a.vb;a.fightlist_mafia_size=
this.a.Za;a.fightlist_iced=this.a.Ya;a.max_active_opponents=this.a.aa;a.max_threads=this.a.Ha;a.ignore_chars=this.a.cb;a.ignore_tags=this.a.eb;a.skip_lost=this.a.La;a.send_stats=this.a.xd;a.stamina_use_pack=this.a.zb;a.stamina_buy_refill=this.a.yb;a.attack_burst=this.a.P;a.hitlist_bounty=this.a.bb;a.family_url=this.a.Xa;a.target_url=this.a.Ab;a.target_iced_delay=this.a.wa;a.mwlists_url=this.a.jb;a.rivals_your_rivals=this.a.sb;a.rivals_your_attackers=this.a.rb;a.rivals_you_attacked=this.a.qb;a.rivals_family=
this.a.pb;a.rivals_skip_iced=this.a.ka;a.battle_skip_iced=this.a.Ua;ea(this.id,a)};h.prototype.H=function(){this.G();try{var a={},b=fa(this.id);a.mode=b.mode;a.oa=b.fight_city;a.qa=b.heal_city;a.Fa=b.heal_value;a.Ea=b.heal_manual;a.pa=b.heal_auto;a.wb=b.skip_health;a.xb=b.skip_health_pct;a.ub=b.skip_attacks;a.vb=b.skip_attacks_count;a.cb=b.ignore_chars;a.eb=b.ignore_tags;a.La=b.skip_lost;a.xd=b.send_stats;a.zb=b.stamina_use_pack;a.yb=b.stamina_buy_refill;a.P=b.attack_burst;a.bb=b.hitlist_bounty;a.Za=
b.fightlist_mafia_size;a.Ya=b.fightlist_iced;a.Xa=b.family_url;a.Ab=b.target_url;a.wa=b.target_iced_delay;a.jb=b.mwlists_url;a.aa=b.max_active_opponents;a.Ha=b.max_threads;a.sb=b.rivals_your_rivals;a.rb=b.rivals_your_attackers;a.qb=b.rivals_you_attacked;a.pb=b.rivals_family;a.ka=b.rivals_skip_iced;a.Ua=b.battle_skip_iced;M(this.a,a)}catch(c){}$("#"+this.id+"_mode").val(this.a.mode);$("#"+this.id+"_fight_city").val(this.a.oa);$("#"+this.id+"_heal_city").val(this.a.qa);$("#"+this.id+"_heal_value").val(this.a.Fa);
A("#"+this.id+"_heal_manual",this.a.Ea);A("#"+this.id+"_heal_auto",this.a.pa);A("#"+this.id+"_skip_health",this.a.wb);$("#"+this.id+"_skip_health_pct").val(this.a.xb);A("#"+this.id+"_skip_attacks",this.a.ub);$("#"+this.id+"_skip_attacks_count").val(this.a.vb);$("#"+this.id+"_ignore_chars").val(this.a.cb);A("#"+this.id+"_ignore_tags",this.a.eb);A("#"+this.id+"_skip_lost",this.a.La);$("#"+this.id+"_fightlist_mafia_size").val(this.a.Za);A("#"+this.id+"_fightlist_iced",this.a.Ya);$("#"+this.id+"_max_active_opponents").val(this.a.aa);
$("#"+this.id+"_max_threads").val(this.a.Ha);$("#"+this.id+"_attack_burst").val(this.a.P);$("#"+this.id+"_hitlist_bounty").val(this.a.bb);$("#"+this.id+"_family_url").val(this.a.Xa);$("#"+this.id+"_target_url").val(this.a.Ab);$("#"+this.id+"_target_iced_delay").val(this.a.wa);$("#"+this.id+"_mwlists_url").val(this.a.jb);A("#"+this.id+"_rivals_your_rivals",this.a.sb);A("#"+this.id+"_rivals_your_attackers",this.a.rb);A("#"+this.id+"_rivals_you_attacked",this.a.qb);A("#"+this.id+"_rivals_family",this.a.pb);
A("#"+this.id+"_rivals_skip_iced",this.a.ka);A("#"+this.id+"_battle_skip_iced",this.a.Ua);A("#"+this.id+"_stamina_use_pack",this.a.zb);A("#"+this.id+"_stamina_buy_refill",this.a.yb);this.Ed()};h.prototype.mb=function(){this.Lc();var a=Math.max($("#"+this.id+"_div_heal").height(),$("#"+this.id+"_div_stamina").height());a&&($("#"+this.id+"_div_heal").height(a),$("#"+this.id+"_div_stamina").height(a));this.S()};h.prototype.q=function(){var a,b,c=this;a='<div class="tabframe">'+ma("Options","options")+
'Fight Mode <select id="%ID%_mode"></select><br/><br/>'+Q("Fight List","opt_fightlist",F("Skip opponents who appear to be iced","fightlist_iced")+'Skip opponents with over <span class="mafia_size"></span><input type="text" style="width:30px;" id="%ID%_fightlist_mafia_size"/> mafia members<br/>');a+=Q("Family Battle","opt_battle",F("Skip opponents who appear to be iced","battle_skip_iced")+F("Attack the fortress","battle_fortress"))+Q("Single Target","opt_target","Player to Attack "+aa("(Copy the link from a player profile page)")+
'<br/><input type="text" id="%ID%_target_url" style="width:660px;"/><br/><div style="height:8px;clear:both;"></div>Pause <input type="text" style="width:30px;" id="%ID%_target_iced_delay"/> seconds when the player is iced<br/>')+Q("Bucket","opt_mwlists","Buckets to Attack "+aa("(Copy the full link from MWLists.com)")+'<br/><textarea id="%ID%_mwlists_url" class="textlinks"></textarea><br/>')+Q("Hitlist","opt_hitlist",'Minimum Bounty <input type="text" id="%ID%_hitlist_bounty" size="12"/> Dollars<br/>')+
Q("Family","opt_family","Family to Attack "+aa("(Copy the link from a family page)")+'<br/><input type="text" id="%ID%_family_url" style="width:660px;"/><br/>')+Q("Rivals","opt_rivals",F("Your Rivals","rivals_your_rivals")+F("Your Attackers","rivals_your_attackers")+F("Mafia you Attacked","rivals_you_attacked")+F("Family Rivals","rivals_family")+'<div style="height:8px;clear:both;"></div>'+F("Skip rivals who appear to be iced","rivals_skip_iced"));a+='<div style="height:8px;clear:both;"></div>'+Q("General",
"opt_general",'<div style="width:52%;float:left;">Fight in <select id="%ID%_fight_city"><option value="0">Active City</option><option value="1">New York</option><option value="2" disabled>Cuba</option><option value="3" disabled>Moscow</option><option value="4" disabled>Bangkok</option><option value="5">Las Vegas</option><option value="6" disabled>Italy</option><option value="7">Brazil</option><option value="8">Chicago</option><option value="9">London</option></select><br/><div style="height:8px;clear:both;"></div><span id="%ID%_max_active_opponents_label">Attack up to <input type="text" style="width:20px;" id="%ID%_max_active_opponents"/> opponents at once</span><br/><span id="%ID%_max_threads_label">Attack up to <input type="text" style="width:20px;" id="%ID%_max_threads"/> times per second</span><br/><span id="%ID%_attack_burst_label">Power attack burst rate <input type="text" style="width:20px;" id="%ID%_attack_burst"/></span><br/><div style="height:8px;clear:both;"></div>'+
ba("Skip opponents with over","skip_health")+' <input type="text" style="width:30px;" id="%ID%_skip_health_pct"/> percent health<br/>'+F("Skip opponents when losing fights","skip_lost")+ba("Skip opponents after","skip_attacks")+' <input type="text" style="width:30px;" id="%ID%_skip_attacks_count"/> attacks<br/></div><div style="width:48%;float:right;">'+F("Skip opponents with names/tags containing","ignore_tags")+'<textarea id="%ID%_ignore_chars" style="width:300px;height:80px;resize:none;"></textarea><br/></div>')+
'<div style="height:8px;clear:both;"></div><div style="width:50%;float:left;">'+Q('<span class="health"></span>Healing',"opt_heal",'<div id="%ID%_div_heal">Heal using cash from <select id="%ID%_heal_city"><option value="0">Active City</option><option value="1">New York</option></select><br/>'+ba("Heal when less than","heal_manual")+' <span class="health"></span><input type="text" style="width:40px;" id="%ID%_heal_value"/> <span class="more_in" id="%ID%_heal_pct"></span><br/>'+ba("Heal as soon as possible",
"heal_auto")+' <span class="more_in" id="%ID%_next_heal"></span><br/></div>')+'</div><div style="width:50%;float:right;">'+Q('<span class="stamina"></span>Stamina',"opt_stamina",'<div id="%ID%_div_stamina">'+F("Use <b>Power Pack</b> when out of stamina","stamina_use_pack")+F("Buy <b>Stamina Refill</b> when out of stamina","stamina_buy_refill")+"</div>")+'</div><div style="clear:both;"></div></div></div><div class="module_seperator"></div>'+ma("Stats","stats")+'</div></div><div class="module_seperator"></div><div style="padding:10px;"><span id="%ID%_start_row" style="display:none; vertical-align:text-bottom;"><a class="sexy_button_new short orange" id="%ID%_start"><span><span>Start</span></span></a></span><span id="%ID%_stop_row" style="display:none; vertical-align:text-bottom;"><a class="sexy_button_new short red" id="%ID%_stop"><span><span>Stop</span></span></a></span>&nbsp;&nbsp;&nbsp;<span id="%ID%_status_log" style="vertical-align:text-bottom;"></span></div></div>';
T(this,a.replace(/%ID%/g,this.id),"tab_names_top_left","tab_area_top",function(){c.mb()});b="";for(a=0;a<this.z.length;a++)b+='<option value="'+a+'">'+this.z[a]+"</option>";$("#"+this.id+"_mode").html(b);$("#"+this.id+"_options_toggle").click(function(){V(c.id+"_options",c.id+"_options_toggle");return S});$("#"+this.id+"_stats_toggle").click(function(){c.ma=V(c.id+"_stats",c.id+"_stats_toggle");c.S();return S});$("#"+this.id+"_start").click(function(){return c.M()});$("#"+this.id+"_stop").click(function(){return c.N()});
$("#"+this.id+"_fight_city").change(function(){return c.Ye(this)});$("#"+this.id+"_heal_city").change(function(){return c.bf(this)});$("#"+this.id+"_heal_value").change(function(){return c.df(this)});$("#"+this.id+"_heal_manual").click(function(){return c.cf(this)});$("#"+this.id+"_heal_auto").click(function(){return c.af(this)});$("#"+this.id+"_skip_health").click(function(){return c.xf(this)});$("#"+this.id+"_skip_health_pct").change(function(){return c.yf(this)});$("#"+this.id+"_skip_attacks").click(function(){return c.vf(this)});
$("#"+this.id+"_skip_attacks_count").change(function(){return c.wf(this)});$("#"+this.id+"_fightlist_mafia_size").change(function(){return c.$e(this)});$("#"+this.id+"_fightlist_iced").click(function(){return c.Ze(this)});$("#"+this.id+"_ignore_chars").change(function(){return c.hf(this)});$("#"+this.id+"_ignore_tags").click(function(){return c.kf(this)});$("#"+this.id+"_skip_lost").click(function(){return c.zf(this)});$("#"+this.id+"_attack_burst").change(function(){return c.Ie(this)});$("#"+this.id+
"_mode").change(function(){return c.lb(this)});$("#"+this.id+"_hitlist_bounty").change(function(){return c.gf(this)});$("#"+this.id+"_family_url").change(function(){return c.We(this)});$("#"+this.id+"_target_url").change(function(){return c.Ef(this)});$("#"+this.id+"_target_iced_delay").change(function(){return c.Df(this)});$("#"+this.id+"_mwlists_url").change(function(){return c.of(this)});$("#"+this.id+"_max_active_opponents").change(function(){return c.lf(this)});$("#"+this.id+"_max_threads").change(function(){return c.nf(this)});
$("#"+this.id+"_rivals_your_rivals").click(function(){return c.uf(this)});$("#"+this.id+"_rivals_your_attackers").click(function(){return c.tf(this)});$("#"+this.id+"_rivals_you_attacked").click(function(){return c.sf(this)});$("#"+this.id+"_rivals_family").click(function(){return c.qf(this)});$("#"+this.id+"_rivals_skip_iced").click(function(){return c.rf(this)});$("#"+this.id+"_battle_skip_iced").click(function(){return c.Me(this)});$("#"+this.id+"_stamina_use_pack").click(function(){return c.Cf(this)});
$("#"+this.id+"_stamina_buy_refill").click(function(){return c.Bf(this)});this.c.Yb()};h.prototype.S=function(){if(I()&&(this.visible&&this.ma)&&(this.r||(this.r=$("#"+this.id+"_stats")),this.r)){var a="";this.o.Xb&&(a+="Won: "+v(this.o.ha)+" | Lost: "+v(this.o.ga)+" | Damage Done: "+v(this.o.Ib)+" | Damage Taken: "+v(this.o.nc)+" | Ices: "+v(this.o.od)+" | Kills: "+v(this.o.pd)+"<br/>",a+="Running for: "+v(this.o.Xb)+" seconds | Damage per Second: "+v(p(this.o.Ib/this.o.Xb)));this.r.html(a);R.va()}};
h.prototype.Va=function(a){if(this.a.eb){var b=this.a.cb;if(""!==b&&b!==r)for(var b=b.split("\n"),c=0;c<b.length;c++)if(" "!==b[c]&&""!==b[c]&&b[c]!==r&&b[c].length&&-1!==a.indexOf(b[c]))return la("Skipping Opponent "+a),S}return j};h.prototype.nb=function(a,b,f){var d,m,n,h,k,y,w,o,q,l;q=/href='(remote\/html_server\.php\?xw_controller=fight&xw_action=attack_pop.*tab=\d)'/g;q.compile(q);l=/\t{4}<div class="fight_list_name_area" >.*[\r\n]+.+[\r\n]+.+[\r\n]+.+[\r\n\t]+(.+[\r\n]+)(.+)<\/div>/mg;for(l.compile(l);(w=
q.exec(a))&&(o=l.exec(a));)if(d=p(/opponent_id=p%7C(\d+)&/.exec(w[1])[1]),m=w[1],h=/fight_list_level_dead/.test(o[2])?j:S,k=S,-1!=c.Ca(d)?k=j:h&&b?k=j:1>f?k=j:this.Va(o[1])?-1!=c.ia(d)&&(k=j):k=j,(n=/id=([^&]+)&from_red_link=1.+color:red">([^<]+)<\/span>/.exec(o[1]))?(h=p(atob(n[1].replace(/%3D/g,"="))),y=n[2]):y=h=0,n=(w=/xw_controller=stats.+>(.+)<\/a>/.exec(o[1]))?w[1]:0,!k)k=c.Ba(),-1!==k&&(c.V(k),c.b[k].url=m,c.b[k].uid=d,c.b[k].name=n,c.b[k].ja=n,c.b[k].K=h,c.b[k].Q=y,c.b[k].hb=1,c.b[k].Ka=
S,c.b[k].link=ia(c.b[k].ja,"p|"+c.b[k].uid,c.b[k].Q,c.b[k].K),c.p++)};h.prototype.pc=function(a){var b,f,d,h,n,m,k,y,w,o;if(0===this.a.mode)this.nb(a,this.a.Ya,this.a.Za),c.n();else if(1===this.a.mode){y=/href='(remote\/html_server\.php\?xw_controller=hitlist&xw_action=attack[^']+)'/g;y.compile(y);o=/\t{12}<tr>[\r\n\t]+<td>[\r\n\t]+(.*)<\/td>[\r\n\t]+<td>[\r\n\t]+(.*)<\/td>[\r\n\t]+<td>[\r\n\t]+(.*)<\/td>[\r\n\t]+<td>[\r\n\t]+\$([\d,]+)\t+<\/td>/mg;for(o.compile(o);(m=y.exec(a))&&(n=o.exec(a));)if(f=
p(/target_pid=(\d+)/.exec(m[1])[1]),d=m[1],m=1,h=L(n[4]),k=S,this.Va(n[2])?-1!=c.ia(f)?k=j:h<this.a.bb?k=j:(b=c.Ca(f),-1!==b&&(k=j)):k=j,(h=/id=([^&]+)&from_red_link=1.+color:red">(.+)<\/span>/.exec(n[2]))?(b=p(atob(h[1].replace(/%3D/g,"="))),w=h[2]):w=b=0,h=(h=/xw_controller=stats.+>(.+)<\/a>/.exec(n[2]))?h[1]:0,!k)k=c.Ba(),-1!==k&&(c.V(k),c.b[k].nd=d,c.b[k].url="remote/html_server.php?xw_controller=fight&xw_action=attack_pop&view_style=html&opponent_id=p|"+f+"&origin=fight_page&clkdiv=btn_attack_p"+
f+"&tab=0&use_boost=0",c.b[k].uid=f,c.b[k].name=h,c.b[k].ja=h,c.b[k].K=b,c.b[k].Q=w,c.b[k].hb=m,c.b[k].Ka=S,c.b[k].link=ia(c.b[k].ja,"p|"+c.b[k].uid,c.b[k].Q,c.b[k].K),c.p++);c.n()}else if(2===this.a.mode){o=this.hd;var l,s,wa,v,t,x,A=d=0;b=0;n=[];if((l=/family\.php\?id=%7B%22id%22%3A%22(.+)%22%7D/.exec(a))&&l[1].replace(/%3D/g,"=")==btoa(o)){w=/\t{9}<span>(\d+)<\/span>/g;w.compile(w);w.exec(a);w.exec(a);w.exec(a);w.exec(a);if(s=w.exec(a))b=p(s[1]);if(l=/<h3>(.+)<\/h3>/.exec(a))d=l[1];l=a.search(/<div id="motd_message"/);
-1!==l&&(w=a.slice(l),A=$.trim(w.slice(0,w.search(/<\/p>/)).replace(/<\/?[^>]+(>|$)/g,"")));w=/' member[Ii]d='(\d+)'/g;w.compile(w);wa=/\t{6}<a href="https*:\/\/facebook.mafiawars.zynga.com\/mwfb\/remote\/html_server.php\?xw_controller=stats.+return false; " >(.+)<\/a>/g;wa.compile(wa);v=/<td class="member_level">[\r\n\t]+(\d+)/mg;v.compile(v);t=/<img src="(.*)" class="clan_member_pic">/g;t.compile(t);x=/<div class="name_n_rank" id="rank_text.+[\r\n\t]+<span>(.*)<\/span>/mg;for(x.compile(x);(s=w.exec(a))&&
(f=wa.exec(a))&&(k=v.exec(a))&&(h=t.exec(a))&&(m=x.exec(a));){var z=p(s[1]);l=f[1];var B=p(k[1]);s={id:z,name:l,fg:m[1],K:o,Qb:B};z={id:encodeURIComponent(z),name:encodeURIComponent(Sa.ae($("<textarea/>").html(l).val())),clan:encodeURIComponent(o),level:encodeURIComponent(B)};if(l=/\d+_(\d+)_\d+/.exec(h[1]))l=p(l[1]),s.jd=l,z.fbid=encodeURIComponent(l);n.push(s)}q(C("Family "+o,'<a href="remote/html_server.php?xw_controller=clan&xw_action=view&from_red_link=1&id='+btoa(o).replace(/\=/g,"%3D")+'" class="mw_new_ajax" selector="#inner_page">'+
d+"</a> contains "+b+" members"));A&&la(aa(A))}for(y in n)n.hasOwnProperty(y)&&(f=n[y].id,h=n[y].name,k=S,this.Va(h)?-1!==c.ia(f)?k=j:-1!==c.Ca(f)&&(k=j):k=j,k||(k=c.Ba(),-1!==k&&(c.V(k),c.b[k].url="remote/html_server.php?xw_controller=fight&xw_action=attack_pop&view_style=html&opponent_id=p|"+f+"&origin=fight_page&clkdiv=btn_attack_p"+f+"&tab=0&use_boost=0",c.b[k].uid=f,c.b[k].name=h,c.b[k].hb=1,c.b[k].Ka=S,c.b[k].link=ia(c.b[k].name,"p|"+c.b[k].uid,c.b[k].Q,c.b[k].K),c.p++)));c.n()}else if(3===
this.a.mode){y=/<div class="fight_entry">.*[\r\n]+(.+)[\r\n]+(.+)\t{3}<br>[\r\n]+(.+)[\r\n]+(.+)[\r\n]+(.+)[\r\n]+(.+)/mg;for(y.compile(y);m=y.exec(a);)if(n=/&user=([^"]+).+selector="#inner_page">(.+)<\/a>/.exec(m[2]))if(f=p(atob(n[1].replace(/%3D/g,"=")).substring(2)),h=n[2],n=S,this.a.Ua&&!/btn_attack_p/.test(m[6])&&(n=j),m=1,k=S,n?k=j:this.Va(h)?-1!=c.ia(f)?k=j:(b=c.Ca(f),-1!==b&&(k=j)):k=j,!k)k=c.Ba(),-1!==k&&(c.V(k),c.b[k].url="remote/html_server.php?xw_controller=fight&xw_action=attack_pop&view_style=html&opponent_id=p|"+
f+"&origin=fight_page&clkdiv=btn_attack_p"+f+"&tab=0&use_boost=0",c.b[k].uid=f,c.b[k].name=h,c.b[k].ja=h,c.b[k].hb=m,c.b[k].Ka=S,c.b[k].link=ia(c.b[k].ja,"p|"+c.b[k].uid,c.b[k].Q,c.b[k].K),c.p++);c.n()}else if(6===this.a.mode)this.a.sb&&(y=sa(a,/\t{4}Your Rivals/,/(<th style|<\/table>)/),this.nb(y,this.a.ka,501)),this.a.rb&&(y=sa(a,/\t{4}Your Attackers/,/(<th style|<\/table>)/),this.nb(y,this.a.ka,501)),this.a.qb&&(y=sa(a,/\t{4}Mafia you Attacked/,/(<th style|<\/table>)/),this.nb(y,this.a.ka,501)),
this.a.pb&&(y=sa(a,/\t{4}Family Rivals/,/(<th style|<\/table>)/),this.nb(y,this.a.ka,501)),c.n();else if(4===this.a.mode){m=/<div class="stats_title_text">.*[\r\n]+[^"]+"(.+)" level/m.exec(a);n=/stats&xw_action=view.+&user=p\|(\d+)/.exec(a);if(m&&n&&(f=p(n[1]),k=S,-1!=c.Ca(f)?k=j:this.Va(m[1])?-1!=c.ia(f)&&(k=j):k=j,(h=/id=([^&]+)&from_red_link=1.+color:red">([^<]+)<\/span> <\/a> (.+)$/.exec(m[1]))?(b=p(atob(h[1].replace(/%3D/g,"="))),w=h[2],h=h[3]):(w=b=0,h=m[1]),!k))k=c.Ba(),-1!==k&&(c.V(k),c.b[k].url=
"remote/html_server.php?xw_controller=fight&xw_action=attack_pop&view_style=html&opponent_id=p|"+f+"&origin=fight_page&clkdiv=btn_attack_p"+f+"&tab=0&use_boost=0",c.b[k].uid=f,c.b[k].name=h,c.b[k].ja=h,c.b[k].K=b,c.b[k].Q=w,c.b[k].hb=1,c.b[k].Ka=S,c.b[k].link=ia(c.b[k].ja,"p|"+c.b[k].uid,c.b[k].Q,c.b[k].K),c.p++);c.n()}};h.prototype.ye=function(){if(this.c.g){this.c.i("Loading Fight List\u2026");var a=this;z.l(D("xw_controller=fight&xw_action=view&tab=0"),B(),function(b,c,f){a.Ga(f)})}};h.prototype.Ce=
function(){if(this.c.g){this.c.i("Loading Rivals\u2026");var a=this;z.l(D("xw_controller=fight&xw_action=view&tab=1"),B(),function(b,c,f){a.Ga(f)})}};h.prototype.ze=function(){if(this.c.g){this.c.i("Loading Hitlist\u2026");var a=this;z.l(D("xw_controller=hitlist&xw_action=view"),B(),function(b,c,f){a.Ga(f)})}};h.prototype.we=function(){if(this.c.g){var a=/"id":"(.+)"/.exec(Ka(this.a.Xa));if(a){this.c.i("Loading Family Page\u2026");this.hd=p(atob(a[1].replace(/%3D/g,"=")));var b=this;z.l(D("xw_controller=clan&xw_action=view&from_red_link=1&id="+
a[1]),B(),function(a,c,f){b.Ga(f)})}else q(o("Problem With Family Link","Copy the link from a family page"))}};h.prototype.se=function(){if(this.c.g){this.c.i("Loading Family Battle Page\u2026");var a=this;z.l(D("xw_controller=EpicBattle&xw_action=view"),B(),function(b,c,f){a.Ga(f)})}};h.prototype.Ee=function(){if(this.c.g){var a=/":"(.+)"/.exec(Ka(this.a.Ab));if(a){this.c.i("Loading Player Profile Page\u2026");var b=this;z.l(D("xw_controller=stats&xw_action=view&user="+a[1]),B(),function(a,c,f){b.Ga(f)})}else q(o("Problem With Profile Link",
"Copy the link from a player profile page"))}};this.kc=this.Hb=0;h.prototype.ve=function(){if(this.c.g){this.kc=this.Hb=0;var a,b=/bucket=([0-9a-zA-Z]+)/g;for(b.compile(b);a=b.exec(this.a.jb);)this.c.i('Loading <a href="http://mwlists.com" target="_blank">mwlists.com</a> Buckets\u2026'),this.te(a[1]);0===this.Hb&&q(o("Problem With Bucket Links",'Copy the full links from <a href="http://mwlists.com" target="_blank">mwlists.com</a>'))}};h.prototype.te=function(a){if(this.c.g){this.Hb++;var b=this;$.getJSON("http://mwlists.com/BookMarklets/getlive_unlockedmw.php?&callback=?",
{bucket:a},function(a){b.ue(a)})}};h.prototype.ue=function(a){if(this.c.g){if(a){for(var b in a)if(a.hasOwnProperty(b)){var f=L(a[b].mwid),d=a[b].mwname,h=S;-1!=c.Ca(f)?h=j:-1!=c.ia(f)&&(h=j);h||(i=c.Ba(),-1!==i&&(c.V(i),c.b[i].url="remote/html_server.php?xw_controller=fight&xw_action=attack_pop&view_style=html&opponent_id=p|"+f+"&origin=fight_page&clkdiv=btn_attack_p"+f+"&tab=0&use_boost=0",c.b[i].uid=f,c.b[i].name=d,c.b[i].hb=501,c.b[i].Ka=S,c.b[i].link=ia(c.b[i].name,"p|"+c.b[i].uid,c.b[i].Q,c.b[i].K),
c.p++))}c.n()}this.kc++;this.kc>=this.Hb&&(this.c.state=this.c.h,this.e())}};h.prototype.Ga=function(a){this.c.g&&4==a.readyState&&(200==a.status?(m.fc(a,j),this.pc(a.responseText)):s(o("Load Opponents",a.status)),this.c.state=this.c.h,this.e())};h.prototype.Gb=function(a){var b=this,f,d=c.b[a].md;f=d?decodeURIComponent(qa+"/"+c.b[a].nd):decodeURIComponent(qa+"/"+c.b[a].url.replace(/&use_boost=1/,""))+"&use_boost=0";var h=-1!=f.search("view_style=json")?j:S;this.da++;c.b[a].da++;c.b[a].uc&&(c.b[a].Nb=
j);z.l(f,B(),function(c,f,k){b.Md(k,a,h,d)})};h.prototype.ke=function(){this.c.g&&this.kd()};h.prototype.me=function(){var a,b,f,d;for(a=0;a<c.ua;a++)if(b=(a+c.yc)%c.ua,c.b[b].uid&&!c.b[b].U&&c.b[b].enabled){d=S;for(f=0;f<c.ba;f++)if(c.v[f]===b){d=j;break}if(d)q(o("Find Opponent","Opponent is already active"));else return c.yc=(b+1)%c.ua,b}s(o("Find Opponent","Unable to find new opponent"));return-1};h.prototype.oe=function(){var a,b;for(a=0;a<c.ba;a++)if(b=(a+c.Tb)%c.ba,-1!==c.v[b]&&!c.b[c.v[b]].A&&
!c.b[c.v[b]].Nb)return c.Tb=(b+1)%c.ba,c.v[b];s(o("Get Opponent","Unable to get opponent"));return-1};h.prototype.Sf=function(){var a;if(c.F.length)for(a in c.F)if(c.F.hasOwnProperty(a)){a=c.F[a];1===c.F.length?this.c.i(c.p+" Opponents - Attacking "+c.b[a].link+"\u2026"):2===c.F.length?this.c.i(c.p+" Opponents - Attacking "+c.b[a].link+" and 1 other\u2026"):this.c.i(c.p+" Opponents - Attacking "+c.b[a].link+" and "+(c.F.length-1)+" others\u2026");break}};h.prototype.oc=function(a){c.Lf(a);-1!==c.ia(c.b[a].uid)?
(c.V(a),c.p--,c.n()):3===this.a.mode||2===this.a.mode?(c.b[a].A=S,c.b[a].U=S,c.b[a].Ob=S,c.na(a)):4===this.a.mode?(c.b[a].A=S,c.b[a].U=S,c.b[a].Ob=S,c.na(a),this.Na=j):(c.V(a),c.p--,c.n())};h.prototype.kd=function(){var a,b;if(this.c.g&&!this.Na){for(b=0;b<c.ba;b++)-1!==c.v[b]&&(a=c.v[b],c.b[a].A&&c.b[a].Jb===c.b[a].da&&this.oc(a));for(;c.Ia<this.a.aa;)if(b=this.me(),-1!==b)c.Hd(b);else break;if(5<=m.f.T&&!this.Sb())for(;this.da-this.Qa<Math.min(this.a.Ha,5);)if(b=this.oe(),-1!==b)this.Gb(b);else break;
this.Sf()}};h.prototype.Gf=function(a,b,f){if(!a)return 4===this.a.mode||1===this.a.mode||6===this.a.mode||2===this.a.mode||3===this.a.mode||5===this.a.mode?j:c.b[b].Bc?j:S;if(a.socialMessageCards)for(var d in a.socialMessageCards)if(a.socialMessageCards.hasOwnProperty(d)){var h=/item_id="(\d+)"/.exec(a.socialMessageCards[d]);h&&Y.Fb(p(h[1]))}d=a.isWin?'<span class="good">Won</span> ':'<span class="bad">Lost</span> ';d+=c.b[b].link+' <span class="health">-'+a.defender.damage_dealt+"</span> "+aa("("+
a.defender.current_health_pct+"% remaining)")+" ";c.b[b].ra=a.defender.current_health_pct;c.b[b].qd=a.defender.damage_dealt;d+='<span class="experience">'+a.experience+"</span> ";a.you_just_killed?d+='You Killed! <span class="more_in">('+v(a.total_ice_count)+")</span>":a.you_just_iced?d+='You Iced! <span class="more_in">('+v(a.total_ice_count)+")</span>":a.ice_was_just_stolen?d+="Ice Stolen! "+a.thief_name:a.defender.iced_self?d+="Iced Themself":a.defender.is_iced&&(d+="Already Iced");if(a.defender.you_iced||
a.defender.is_iced)c.b[b].Ob=j;if(a.attacker.boost_used_tag||a.defender.boost_used_tag)c.b[b].fa=0,c.b[b].Xc=0,c.b[b].Wc=0;a.isWin?(this.o.ha+=f?5*this.a.P:1,c.b[b].ha+=f?5*this.a.P:1):(this.o.ga+=f?5*this.a.P:1,c.b[b].ga+=f?5*this.a.P:1);c.b[b].ld+=f?5*this.a.P:1;this.o.Ib+=a.defender.damage_dealt;this.o.nc+=a.attacker.damage_dealt;this.S();q(d);a.isWin||this.a.La&&-1===c.ia(c.b[b].uid)&&c.Eb({uid:c.b[b].uid,name:c.b[b].link,reason:"Lost"});a.feed_js&&(d=/description:'(.+)', userMessage/.exec(a.feed_js),
a.you_just_killed?(this.o.pd++,f="killed"):(this.o.od++,f="iced"),d&&R.log('<a href="#0" class="'+f+'" onclick="'+a.feed_js+'">'+d[1].replace(/ (Need to whack|Think you can|Need help icing|Test your mettle|Get a free fight boost to ice opposing) [^\.]+\./g,"").replace(/\\\'/g,"'")+"</a>"),this.S());a.ice_was_just_stolen&&R.Ge(m.lc.name+" attacked "+c.b[b].link+", but the ice was stolen by "+a.thief_name+".");return!a.isWin&&this.a.La||a.defender.is_iced||a.defender.you_iced||a.defender.current_health_pct>
this.a.xb&&this.a.wb?S:j};h.prototype.Md=function(a,b,f,d){if(this.c.g&&4==a.readyState){if(200==a.status){var h=j,n,l;this.Qa++;c.b[b].Jb++;c.b[b].uc=S;c.b[b].Nb=S;var k=c.b[b].Jb===c.b[b].da?j:S;if(d){if(/This player is currently part of your mafia/.test(a.responseText))q(c.b[b].link+" is in your mafia"),c.Eb({uid:c.b[b].uid,name:c.b[b].link,reason:"In Mafia"});else{(n=/You <strong>(WON|LOST)<\/strong> the fight, taking <strong>(\d+) damage<\/strong> and dealing <strong> (\d+) damage<\/strong> to your enemy\. {2}You gained (.+) and (.+) experience/.exec(a.responseText))&&
("WON"==n[1]?q(C("Hitlist Won",c.b[b].link+' <span class="health">'+n[3]+"</span> "+n[4]+' <span class="experience">'+n[5]+"</span>")):q(o("Hitlist Lost",c.b[b].link+' <span class="health">'+n[3]+"</span> "+n[4]+' <span class="experience">'+n[5]+"</span>")));if(n=/(You knocked out .+ and earned [^!]+!)/.exec(a.responseText))q(n[1]),R.Fe(n[1]);(n=/(Sorry, someone else took out .+ before you got the chance!)/.exec(a.responseText))&&q(n[1])}S||(c.b[b].A=j);c.b[b].enabled||(c.b[b].A=j);k&&c.b[b].A&&this.oc(b);
c.p<this.a.aa&&this.pc(a.responseText)}else{d=r;if(f)try{n=JSON.parse(a.responseText),m.Cb(n),d=n.fight_result}catch(y){s(o("Problem Parsing JSON Fight",y))}else if(m.fc(a,S),/This player is currently part of your mafia/.test(a.responseText))q(c.b[b].link+" is in your mafia"),c.Eb({uid:c.b[b].uid,name:c.b[b].link,reason:"In Mafia"}),h=S;else{d=xa(a.responseText,"msg.fight_result = ",";FightV2.attack");if(n=/(<a href=.+)[\r\n]+\t+<div>Level (\d+) ([^<]*).+[\r\n]+.+[\r\n]+.+"defense (good|bad)".+[\r\n]+.+<span class="group_defense (good|bad)[^>]+>([^<]+)</m.exec(a.responseText)){c.b[b].Qb=
L(n[2]);n[3]&&n[3].length&&(c.b[b].rd=n[3]);c.b[b].Yc="good"==n[4]?j:S;c.b[b].Xd="good"==n[5]?j:S;c.b[b].fa=L(n[6]);c.b[b].Yc?c.b[b].Xc=L(m.L.tb):c.b[b].Wc=L(m.L.tb);if(l=/id=([^&]+)&from_red_link=1.+color:red">([^<]+)<\/span>/.exec(n[1]))c.b[b].K=p(atob(l[1].replace(/%3D/g,"="))),c.b[b].Q=l[2];if(!c.b[b].name&&(l=/&user=([^"]+).+selector="#inner_page">(.+)<\/a>/.exec(n[1])))c.b[b].name=l[2];if(l=/<div id="defender_pic" .+[\r\n\t]+<img src=".+\d+_(\d+)_\d+/.exec(a.responseText))c.b[b].jd=p(l[1]);
c.b[b].link=ia(c.b[b].name,"p|"+c.b[b].uid,c.b[b].Q,c.b[b].K)}else s(o("Unable to find defense/level",c.b[b].link));if(!c.b[b].Bc&&(n=/'(remote\/html_server\.php\?xw_controller=fight&xw_action=power_js_attack[^']+)'/g.exec(a.responseText)))c.b[b].url=n[1].replace(/click_amt=1/,"click_amt="+(100+this.a.P)),c.b[b].Bc=j;if(n=sa(a.responseText,/<div id="defender_fight_status">.*<\/div>/,/^\t\t<\/div>/m))if(l=/(\/graphics\/fight\/badges\/[^"]+)/.exec(n))c.b[b].Sc=l[1].replace(/huge_/g,"");if(n=/<div id="defender_hp" class="[^"]+" style="width: (\d+)px;">/.exec(a.responseText))c.b[b].ra=
p(100*p(n[1])/215)}h&&!c.b[b].A&&(h=this.Gf(d,b,f));c.na(b);h||(c.b[b].Ob&&1===this.a.mode?c.b[b].md=j:c.b[b].A=j);c.b[b].enabled||(c.b[b].A=j);!c.b[b].A&&(this.a.ub&&this.a.vb<=c.b[b].ha+c.b[b].ga)&&(c.b[b].A=j,q("Skipping "+c.b[b].link+" after "+v(c.b[b].ha+c.b[b].ga)+" attacks"));k&&c.b[b].A&&this.oc(b);c.p<this.a.aa&&(0===this.a.mode||6===this.a.mode?f||this.pc(a.responseText):this.a.mode===g&&this.cg())}}else this.Qa++,c.b[b].Jb++,s(o("Problem Fighting Opponent",a.status));this.kd();this.Qa>=
this.da&&(this.c.state=2,this.e())}};h.prototype.Sd=function(){return!this.a.zb?S:0<m.f.Ac?(q(o("Power Pack Not Available","Available in "+p(m.f.Ac/3600)+":"+p(m.f.Ac/60%60))),S):0>=m.f.Jf?(q(o("Power Pack Not Available","You don't have any Power Packs")),S):j};h.prototype.Uf=function(){if(this.c.g){this.c.i("Using Power Pack\u2026");var a=this;z.l(D("xw_controller=module&xw_action=usePowerPack&responseType=hospital&packType=0"),B(),function(b,c,f){a.Vf(f)})}};h.prototype.Vf=function(a){this.c.g&&
4==a.readyState&&(200!=a.status&&s(o("Use Power Pack",a.status)),this.c.state=E,this.e())};h.prototype.Rd=function(){return!this.a.yb?S:m.f.Fd<m.f.yd?(q(o("Stamina Refill","You don't have enough reward points (have "+m.f.Fd+" need "+m.f.yd+")")),S):j};h.prototype.Pd=function(){if(this.c.g){this.c.i("Buying Stamina Refill\u2026");var a=this;z.l(D("xw_controller=marketplace&xw_action=impulseBuy&favor_type=1&favor_id=2&page=impulse_buy_fight"),B(),function(b,c,f){a.Qd(f)})}};h.prototype.Qd=function(a){this.c.g&&
4==a.readyState&&(200!=a.status&&s(o("Buy Stamina Refill",a.status)),this.c.state=E,this.e())};h.prototype.tc=function(a){if(this.c.g){this.Da=j;20===this.c.state&&this.c.i("Healing\u2026");var b=this;z.l(D("xw_controller=hospital&xw_action=heal"+(a?"&xcity="+a:""),a),B(),function(a,c,f){b.pe(f)})}};h.prototype.pe=function(a){if(this.c.g&&4==a.readyState){if(200==a.status)try{var b=JSON.parse(a.responseText);m.Cb(b);var c=Math.max(b.waitHealTimer,0);b.hospital_message&&q(b.hospital_message+" "+aa("Heal available in "+
Z(c)+"."));c&&(this.X=p(c));this.Y||this.Mc()}catch(f){s(o("Heal",f))}else s(o("Heal",a.status));this.Da=S;20===this.c.state?this.e():la("State is "+this.c.state)}};h.prototype.Mc=function(){if(this.c.g){var a=this;0<this.X?($("#"+this.id+"_next_heal").html("(Ready in "+Z(this.X)+")"),$("#"+m.id+"_stats_heal").html("(Heal ready in "+Z(this.X)+")"),20===this.c.state&&this.c.i("Healing in "+Z(this.X)+"\u2026")):($("#"+this.id+"_next_heal").html("(Ready)"),$("#"+m.id+"_stats_heal").html("(Heal ready)"));
if(0<this.X)setTimeout(function(){a.Y=S;a.X--;a.Mc()},1E3),this.Y=j;else if(this.a.pa||this.Sb())m.f.Oa<m.f.Oc&&!this.Da?(this.tc(this.a.qa),this.Y=S):(setTimeout(function(){a.Y=S;a.X--;a.Mc()},1E3),this.Y=j)}else $("#"+this.id+"_next_heal").html(""),$("#"+m.id+"_stats_heal").html("")};h.prototype.Sb=function(){return this.a.Ea&&m.f.Oa<this.a.Fa||20>m.f.Oa};h.prototype.e=function(){if(this.c.state===E)this.c.h=2,this.c.ec();else if(2===this.c.state)this.Lc(),this.a.pa&&(!this.Y&&!this.Da)&&this.tc(this.a.qa),
this.Sb()?(this.a.Ea||this.a.pa?(q(o("Need more Health")),this.c.state=20):(q(o('Waiting for <span class="health">20</span> Health')),this.c.state=25,this.c.O=19>m.f.Oa?30:10,this.c.h=E),this.c.e()):5>m.f.T?(q(o("Need more Stamina")),this.Sd()?this.Uf():this.Rd()?this.Pd():(this.c.state=25,this.c.O=30,this.c.h=E,this.c.e())):0!==this.a.oa&&this.a.oa!=m.f.ea?(this.c.h=2,this.c.dc(this.a.oa,S)):0>=c.p?(q(o("Need more Opponents")),this.c.state=18,this.c.e()):this.Na&&this.a.wa?(q("Pausing "+Z(this.a.wa)),
this.Na=S,this.c.state=25,this.c.O=this.a.wa,this.c.h=E,this.c.e()):(this.Na=S,this.c.state=19,this.e());else if(18===this.c.state)c.p<this.a.aa&&(this.c.h=2,0===this.a.mode?this.ye():6===this.a.mode?this.Ce():1===this.a.mode?this.ze():2===this.a.mode?this.we():3===this.a.mode?this.se():4===this.a.mode?this.Ee():5===this.a.mode&&this.ve());else if(19===this.c.state)this.c.h=2,this.ke();else if(20===this.c.state)this.Sb()?!this.Y&&!this.Da&&this.tc(this.a.qa):(this.c.state=2,this.c.e());else if(25===
this.c.state){this.c.state=this.c.h;var a=this;this.c.zc(this.c.O,function(){a.e()})}else this.c.state===ga&&this.N()};var b=this;this.c.e=function(){b.e()};this.q();this.H();na.a.Sa&&this.c.gc(function(){b.M()})}function H(c,d){this.id=d;this.I=c;this.c=new G(c,d);var b=[],a=[],e=[],h=0,l=0,t=0,n=0;this.t=[];this.ma=j;this.r=r;this.Aa=this.Zb=this.Gc=this.Ic=this.Hc=this.Fc=this.ac=0;this.ta=[];this.a=r;H.prototype.M=function(){t=S;n=0;this.c.M();return S};H.prototype.N=function(){this.c.N();return S};
H.prototype.Ne=function(a){this.a.city=p($(a).val());this.d();return j};H.prototype.mf=function(a){this.a.ib=p($(a).val());this.d();return j};H.prototype.G=function(){this.a={city:1,ib:5}};H.prototype.d=function(){var a={};a.city=this.a.city;a.max_properties=this.a.ib;ea(this.id,a)};H.prototype.H=function(){this.G();try{var a={},b=fa(this.id);a.city=b.city;a.ib=b.max_properties;M(this.a,a)}catch(c){}$("#"+this.id+"_rob_city").val(this.a.city);$("#"+this.id+"_max_properties").val(this.a.ib)};H.prototype.mb=
function(){this.S()};H.prototype.q=function(){var a=this;T(this,('<div class="tabframe">'+ma("Options","options")+'Rob properties in <select id="%ID%_rob_city"><option value="0">Active City</option><option value="1">New York</option><option value="2" disabled>Cuba</option><option value="3" disabled>Moscow</option><option value="4" disabled>Bangkok</option><option value="5">Las Vegas</option><option value="6" disabled>Italy</option><option value="7">Brazil</option><option value="8">Chicago</option><option value="9">London</option></select><br/>Rob up to <input type="text" style="width:20px;" id="%ID%_max_properties"/> properties at once<br/></div></div><div class="module_seperator"></div>'+
ma("Stats","stats")+'</div></div><div class="module_seperator"></div><div style="padding:10px;"><span id="%ID%_start_row" style="display:none; vertical-align:text-bottom;"><a class="sexy_button_new short orange" id="%ID%_start"><span><span>Start</span></span></a></span><span id="%ID%_stop_row" style="display:none; vertical-align:text-bottom;"><a class="sexy_button_new short red" id="%ID%_stop"><span><span>Stop</span></span></a></span>&nbsp;&nbsp;&nbsp;<span id="%ID%_status_log" style="vertical-align:text-bottom;"></span></div></div>').replace(/%ID%/g,
this.id),"tab_names_top_left","tab_area_top",function(){a.mb()});$("#"+this.id+"_options_toggle").click(function(){V(a.id+"_options",a.id+"_options_toggle");return S});$("#"+this.id+"_stats_toggle").click(function(){a.ma=V(a.id+"_stats",a.id+"_stats_toggle");a.S();return S});$("#"+this.id+"_start").click(function(){return a.M()});$("#"+this.id+"_stop").click(function(){return a.N()});$("#"+this.id+"_rob_city").change(function(){return a.Ne(this)});$("#"+this.id+"_max_properties").change(function(){return a.mf(this)});
this.c.Yb()};H.prototype.S=function(){if(I()&&(this.visible&&this.ma)&&(this.r||(this.r=$("#"+this.id+"_stats")),this.r)){var a,b;a=""+('<span class="stamina">'+this.Zb+'</span> <span class="experience">'+this.Aa+'</span> <span class="more_in">('+parseFloat(this.Aa/this.Zb).toFixed(2)+"/sta)</span><br/>");for(b in this.ta)this.ta.hasOwnProperty(b)&&0<this.ta[b]&&(a+='<span class="cash">'+b+v(this.ta[b])+"</span><br/>");a+='Robberies <span class="good">'+this.ac+'</span> Won <span class="good">'+this.Ic+
'</span> <span class="more_in">('+p(100*this.Ic/this.ac)+'%)</span> Lost <span class="bad">'+this.Hc+'</span> <span class="more_in">('+p(100*this.Hc/this.ac)+"%)</span><br/>";a+='Boards <span class="good">'+this.Fc+"</span> Perfect "+this.Gc+' <span class="more_in">('+p(100*this.Gc/this.Fc)+"%)</span><br/>";for(b in this.t)this.t.hasOwnProperty(b)&&(a+='<span class="stamina">'+this.t[b].Ec+"</span> "+this.t[b].name+'&nbsp;<span class="good">Won '+this.t[b].Mb+'</span> <span class="experience">'+this.t[b].qc+
'</span> <span class="more_in">('+parseFloat(this.t[b].qc/this.t[b].Ec).toFixed(2)+'/sta)</span> <span class="bad">Lost '+this.t[b].hc+'</span> <span class="experience">'+this.t[b].ic+'</span> <span class="more_in">('+parseFloat(this.t[b].ic/this.t[b].Ec).toFixed(2)+'/sta)</span> <span class="more_in">('+parseFloat(100*(this.t[b].Mb/p(this.t[b].Mb+this.t[b].hc))).toFixed(0)+"% won)</span><br/>");this.r.html(a);R.va()}};H.prototype.Hf=function(b,c,f){var d=S,h=S,m=S,l=0,u=0,u=0;if(b){u=this.t[e[f]];
if(u===r||u===g)this.t[e[f]]={Mb:0,hc:0,name:e[f],Ec:a[f],qc:0,ic:0},u=this.t[e[f]];/rob_res_success/.test(b)?(this.Ic++,u.Mb++,m=h=j):/rob_res_fail/.test(b)&&(this.Hc++,u.hc++,h=S,m=j);if(m){if(l=/(\d+) Experience/.exec(b))l=p(l[1].replace(/[^0-9]/g,"")),this.Aa+=l,h?u.qc=l:u.ic=l;if(l=/($|C$|R$|B$|V$|L$|BRL$|\u00a2|\u00a3)([\d,]+)/.exec(b))h=/($|C$|R$|B$|V$|L$|BRL$|\u00a2|\u00a3)/.exec(l[1]),u=L(l[2]),this.ta[h[1]]=this.ta[h[1]]?this.ta[h[1]]+u:u;(l=/item_id="(\d+)"/.exec(b))?Y.Fb(p(l[1])):(l=/rob_res_expanded_details_item">(\d+) ([^<]+)</.exec(b))?
Y.Qc(l[2],p(l[1])):(l=/(\/mwfb\/graphics\/collections\/[^"]+)/.exec(b))&&Y.Rc(l[1].substring(l[1].lastIndexOf("/")+1))}}c&&((l=/(\d+) Bonus Experience/.exec(c))?(this.Fc++,u=l[1].replace(/[^0-9]/g,""),this.Aa+=p(u),t=j,n=0,/Your record on this board was 9-0/.test(c)&&this.Gc++,(l=/item_id="(\d+)"/.exec(c))?Y.Fb(p(l[1])):(l=/rob_res_expanded_details_item">(\d+) ([^<]+)</.exec(c))?Y.Qc(l[2],p(l[1])):(l=/(\/mwfb\/graphics\/collections\/[^"]+)/.exec(c))&&Y.Rc(l[1].substring(l[1].lastIndexOf("/")+1))):
/do not have enough stamina to rob/.test(c)&&(d=j));m?(this.ac++,this.Zb+=p(a[f]),c&&this.S()):d?q(o("Problem Robbing "+e[f],"Out of stamina")):s(o("Problem Robbing "+e[f],"Error robbing property"))};H.prototype.Cc=function(a){if(this.c.g){var c=this;z.l(decodeURIComponent(qa+"/"+b[a]),B(),function(b,f,e){c.Kf(e,a)})}};H.prototype.Kf=function(a,c){if(this.c.g&&4==a.readyState)if(200==a.status){var f=r;try{f=JSON.parse(a.responseText)}catch(d){s(o("Problem Robbing "+e[c],d))}f&&this.Hf(f.slot,f.popup,
c);l++;l>=b.length?(f&&m.Cb(f),this.c.state=this.c.h,this.e()):h<b.length&&(this.Cc(h),h++)}else s(o("Problem Robbing "+e[c],a.status)),this.Cc(c)};H.prototype.De=function(){if(this.c.g){this.c.i("Loading Robbing Page\u2026");var a=this;z.l(D("xw_controller=robbing&xw_action=view"),B(),function(b,c,f){a.vd(f)})}};H.prototype.ud=function(){if(this.c.g){this.c.i("Refreshing Robbing Page\u2026");var a=this;z.l(D("xw_controller=robbing&xw_action=refresh"),B(),function(b,c,f){a.vd(f)})}};H.prototype.vd=
function(c){if(this.c.g&&4==c.readyState){l=h=0;t=S;n=0;b=[];e=[];a=[];if(200==c.status)if(m.fc(c,j),c=/(<div class="rob_slot".*)/.exec(c.responseText)){var f=document.createElement("div");f.innerHTML=c[1];var d=f.getElementsByClassName("rob_slot");if(d.length){for(c=f=0;c<d.length;c++){var v=d[c].getElementsByClassName("sexy_button_new short red");if(v.length){b[f]=v[0].href.substring(v[0].href.indexOf("remote/html_server.php"));a[f]=p(d[c].getElementsByClassName("rob_prop_stamina")[0].innerHTML);
try{e[f]=d[c].getElementsByClassName("rob_prop_name_short")[0].innerHTML}catch(x){e[f]=d[c].getElementsByClassName("rob_prop_name")[0].innerHTML}e[f]=e[f].replace(/(<([^>]+)>)/ig,"");f++}}f=0;for(d=j;d;){d=S;f++;for(c=0;c<b.length-f;c++)a[c]>a[c+1]&&(d=a[c],a[c]=a[c+1],a[c+1]=d,d=e[c],e[c]=e[c+1],e[c+1]=d,d=b[c],b[c]=b[c+1],b[c+1]=d,d=j)}}}else q(o("Problem Finding Properties"));else s(o("Problem Loading Properties",c.status));if(b.length){n=a[0];f=m.f.T;for(c=0;c<b.length;c++)f-=a[c],0>f&&(b.length=
c,a.length=c,e.length=c);if(b.length){this.c.i("Robbing "+b.length+" Properties\u2026");for(c=0;c<this.a.ib;c++)h<b.length&&(this.Cc(h),h++)}else q(o("Not enough stamina to rob next property","Have "+m.f.T+" need "+n)),this.c.state=E,this.e()}else this.ud()}};H.prototype.e=function(){if(this.c.state==E)this.c.h=2,this.c.ec();else if(2==this.c.state)m.f.T>=n?this.c.state=9:(q("Need more Stamina"),this.c.state=25,this.c.O=30,this.c.h=E),this.c.e();else if(9==this.c.state)this.c.h=10,t=S,n=0,this.c.dc(this.a.city,
S);else if(10==this.c.state)this.c.h=11,t?(t=S,n=0,this.ud()):this.De();else if(11==this.c.state)this.c.state=this.c.Uc()?E:0!=this.a.city&&this.a.city!=m.f.ea?9:10,this.c.e();else if(25==this.c.state){this.c.state=this.c.h;var a=this;this.c.zc(this.c.O,function(){a.c.e()})}else this.c.state==ga&&this.N()};var x=this;this.c.e=function(){x.e()};this.q();this.H();na.a.Ta&&this.c.gc(function(){x.M()})}function Ra(c){va.ajax({url:da+"/api/log.php",dataType:"jsonp",data:{message:c}},function(){})}function ia(f,
d,b,a){var e="";0<a?(b&&!c.Kc[a]&&c.Kd(a,b),e+='<a href="remote/html_server.php?xw_controller=clan&xw_action=view&from_red_link=1&id='+btoa(a).replace(/\=/g,"%3D")+'" class="mw_new_ajax" selector="#inner_page"><span style="color:red;">'+(b?b:a)+"</span></a> "):b&&(e+=b+" ");d?e+='<a href="remote/html_server.php?xw_controller=stats&xw_action=view&user='+d+'&ref=fight_list" class="mw_new_ajax" selector="#inner_page"><span>'+(f?f:d)+"</span></a>":f&&(e+=f);return e}var La,E,ga;function ma(c,d){return'<div style="padding:10px;"><div class="module_subtitle"><span id="%ID%_'+
d+'_toggle" class="tab_subtitle">'+c+'</span></div><div id="%ID%_'+d+'">'}function Q(c,d,b){return'<fieldset id="%ID%_'+d+'"><legend>'+c+"</legend>"+b+"</fieldset>"}function ba(c,d){return'<input type="checkbox" id="%ID%_'+d+'"/> <label for="%ID%_'+d+'" id="%ID%_'+d+'_label">'+c+"</label>"}function F(c,d){return ba(c,d)+"<br/>"}function Z(c){return c+" second"+(1==c?"":"s")}function C(c,d){return'<span class="good">'+c+"</span>"+(d?" "+d:"")}function o(c,d){return'<span class="bad">'+c+"</span>"+
(d?" "+d:"")}function aa(c){return'<span class="more_in">'+c+"</span>"}function ya(c){return{Oa:c.user_health,Oc:c.user_max_health,Nc:c.user_energy,Wf:c.user_max_energy,T:c.user_stamina,Xf:c.user_max_stamina,jg:c.user_skill,Fd:c.user_favor,Db:c.user_level,ea:c.current_city_id,Lb:c.exp_to_next_level,Jf:c.powerPackCount,Ac:c.powerPackStaminaUse,yd:c.staminaRefillCost}}function Fa(c){return{tb:c.skill_atk,Dc:c.skill_def,rc:c.group_atk,sc:c.group_def}}function Ga(c){return{name:c.name,dg:c.group_size}}
function K(c){return document.getElementById(c)}function p(c){return parseInt(c,10)}function x(c){return $(c).prop("checked")}function A(c,d){$(c).prop("checked",d)}function Qa(){var c=K("minitornado_div");if(c)c.innerHTML="";else{var d=K("content_row");d&&(c=document.createElement("div"),c.id="minitornado_div",c.style.$f="relative",d.parentNode.insertBefore(c,d))}}function Pa(c,d){var b=document.createElement("div");b.id=c;b.innerHTML=d;var a=K("minitornado_div");a&&a.appendChild(b)}function za(c,
d,b){for(var a=0;a<P.length;a++)if(d==Ma[a])if(c==P[a].id)if(!P[a].visible||b){if($("#"+P[a].id+"_show").attr("class","tab tab_active_op"),$("#"+P[a].id).show(),P[a].visible=j,ta[a])ta[a]()}else $("#"+P[a].id).hide(),$("#"+P[a].id+"_show").attr("class","tab tab_inactive_op"),P[a].visible=S;else $("#"+P[a].id).hide(),$("#"+P[a].id+"_show").attr("class","tab tab_inactive_op"),P[a].visible=S;R.va();return S}function Ea(){if(I())for(var c=0;c<P.length;c++)if(P[c].visible&&ta[c])ta[c]()}function T(c,d,
b,a,e){var h=c.id;c.visible=S;P.push(c);Ma.push(a);ta.push(e);e=document.createElement("div");e.id=h;e.innerHTML=d;e.style.display="none";(d=K(a))&&d.appendChild(e);e=document.createElement("span");e.id=h+"_name";e.innerHTML='<div class="tab tab_inactive_op" id="'+h+'_show" style="margin-right: 3px; cursor: pointer; padding-top: 5px;"><div class="tab_start">&nbsp;</div><div class="tab_middle" id="'+c.id+'_tab_name">'+c.I+'</div><div class="tab_end">&nbsp;</div></div>';(d=K(b))&&d.appendChild(e);$("#"+
h+"_show").click(function(){return za(h,a)})}function X(c,d){c.I=d;c.Jc||(c.Jc=K(c.id+"_tab_name"));c.Jc&&(c.Jc.innerHTML=d)}function V(c,d){var b=K(c),a=r;d&&(a=K(d));if("none"!==b.style.display)return b.style.display="none",a!==r&&(a.innerHTML=a.innerHTML.replace("","")),R.va(),S;b.style.display="";a!==r&&(a.innerHTML=a.innerHTML.replace("",""));R.va();return j}function v(c){for(var d;d=/(\d+)(\d{3}.*)/.exec(c);)c=d[1]+","+d[2];return c}function L(c){return c?p(c.replace(/[^\d]/g,"")):0}function M(c,
d){"undefined"!=typeof d&&$.extend(j,c,d)}function ea(c,d){window.localStorage.setItem(c,JSON.stringify(d))}function fa(c){return JSON.parse(window.localStorage.getItem(c))}function ua(c){this.ca=[];this.ob=0;this.He=c;ua.prototype.mc=function(){var c;if(this.ca.length)for(c=this.He?na.a.cc:3;this.ca.length&&(this.ob<c||this.ca[0].re)&&!(this.ca[0].Zd&&0<this.ob);){this.ob++;var b=this.ca.shift();$.ajax(b)}};ua.prototype.l=function(c,b,a){this.ajax({url:c,data:b},a,g,g,g)};ua.prototype.ajax=function(c,
b,a,f,h){var l=this,b={type:"POST",url:r,data:r,dataType:"html",beforeSend:r,cache:S,complete:r,dataFilter:r,global:S,timeout:15E3,Ad:b,gd:a,Zd:f,re:h};M(b,c);b.success=function(a,b,c){l.ob--;"function"!=typeof this.Ad?s(o("Error","Success is not a function")):this.Ad(a,b,c);0<l.ca.length&&l.mc()};b.error=function(a,b,c){l.ob--;"function"!=typeof this.gd?(this.data=r,l.ca.push(this)):this.gd(a,b,c);0<l.ca.length&&l.mc()};this.ca.push(b);this.mc()}}function D(c,d){Na++;var b=qa+"/remote/html_server.php?"+
c+"&xw_city="+(d?d:m.f.ea)+"&cb=",a;a=[];for(var e=0;32>e;e++)a[e]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);a=a.join("");b=b+a+"&js=1&isajax=1&xw_person="+pa.substring(2)+"&xw_client_id=8&clicks="+Na;(a=decodeURIComponent(b))||q(o("Build URL Failure",b));return a}function B(){var c;Aa!=local_xw_sig&&(Aa=local_xw_sig,la(C("Updated Signature",local_xw_sig)));return(c?c+"&":"")+"ajax=1&liteload=1&skip_req_frame=1&sf_xw_user_id="+pa+"&sf_xw_sig="+local_xw_sig}function sa(c,d,b){try{var a,
e;a=c.search(d);if(-1===a)return s(o("Find Data","Unable to find start pattern")),r;c=c.slice(a);if(b){e=c.search(b);if(-1===e)return s(o("Find Data","Unable to find end pattern")),r;c=c.slice(0,e)}return c}catch(h){return s(o("Find Data",h)),r}}function xa(c,d,b,a){try{var e,h;e=c.search(d);if(-1===e)return s(o("Find JSON","Unable to find start pattern")),r;c=c.slice(e);e=c.search("{");if(-1===e)return s(o("Find JSON","Unable to find first brace")),r;h=c.search(b);if(-1===h)return s(o("Find JSON",
"Unable to find end pattern")),r;c=c.slice(e,h);return a?eval("result = "+c+";"):JSON.parse(c)}catch(l){return s(o("Find JSON",l)),r}}function Ka(c){var d=/\?next_params=(.+)/.exec(c);d&&(c=atob(decodeURIComponent(d[1])));c=c.replace(/&amp;/g,"&");c=c.replace(/&quot;/g,'"');c=c.replace(/\+/g," ");c=c.replace(/%22/g,'"');c=c.replace(/%2C/g,",");c=c.replace(/%3A/g,":");c=c.replace(/%7B/g,"{");c=c.replace(/%7C/g,"|");return c=c.replace(/%7D/g,"}")}function Ba(){Ba.prototype.send=function(){}}function G(c,
d){this.id=d;this.I=c;this.g=S;this.Rb=r;this.h=this.state=La;this.e=r;this.O=60;G.prototype.Yb=function(){$("#"+this.id+"_start_row").show();$("#"+this.id+"_stop_row").hide()};G.prototype.Nf=function(){$("#"+this.id+"_start_row").hide();$("#"+this.id+"_stop_row").show()};G.prototype.M=function(){this.g||(this.g=j,this.Nf(),q(this.I+" Started"),this.i(""),this.state=E,this.e())};G.prototype.N=function(){this.g&&(this.g=S,this.Yb(),q(this.I+" Stopped"),this.i(""),this.state=ga)};G.prototype.Uc=function(){return m.f.Db>
m.$b.Db?(q(C("Level Up","Reached level "+v(m.f.Db))),m.$b.Db=m.f.Db,j):S};G.prototype.dc=function(b,a){if(this.g)if(b&&(m.f.ea!=b||a)){this.i("Travelling to "+ka[b]+"\u2026");var c=this;z.l(D("xw_controller=travel&xw_action=travel&destination="+b+"&from=job&zone=1"),B(),function(a,d,f){c.Qf(f,b)})}else this.state=this.h,this.e()};G.prototype.Qf=function(b,a){this.g&&4==b.readyState&&(200==b.status?(m.fc(b,j),m.f.ea==a?(q(C("Travelled to "+ka[a])),this.state=this.h,this.e()):(q(o("Problem Travelling to "+
ka[a],"Arrived in "+ka[m.f.ea])),this.dc(a))):(s(o("Problem Travelling to "+ka[a],b.status)),this.dc(a)))};G.prototype.ec=function(){if(this.g){this.i("Updating Status\u2026");var b=this;z.l(D("xw_controller=propertyV2&xw_action=collect&building_type=6",5),B(),function(a,c,d){b.Tf(d)})}};G.prototype.Tf=function(b){if(this.g&&4==b.readyState){if(200==b.status)try{var a=JSON.parse(b.responseText);if(a&&a.data){var c=JSON.parse(a.data);m.$b===r&&(m.$b=ya(a.user_fields),m.hg={},m.Ma=Fa(a.fightbar),m.gg=
Ga(c.status.active_character));m.Cb(a,c.status.active_character);la(C("Status Updated"));this.state=this.h}}catch(d){s(o("Problem Updating Status",d))}else s(o("Problem Updating Status",b.status));this.e()}};G.prototype.Ae=function(){var b=this;z.l(D("xw_controller=inventory&xw_action=view"),B(),function(a,c,d){b.Be(d)})};G.prototype.Be=function(b){if(this.g&&4===b.readyState){if(200===b.status)if(b=xa(b.responseText,"var Items = ",/;[\r\n]+/,j),m.j=[],b.data){for(var a in b.data)b.data.hasOwnProperty(a)&&
(m.j[a]={Gb:b.data[a].attack,fa:b.data[a].defense,U:b.data[a].active,Vb:b.data[a].quantity,fd:b.data[a].equipped_offense,ed:b.data[a].equipped_defense,vc:b.data[a].imagesrc,id:b.data[a].id,name:b.data[a].name,If:b.data[a].plural_name,W:0});q(C("Inventory Loaded","Found "+v(m.j.length)+" unique items"));this.state=this.h}else s(o("Problem Loading Inventory"));else s(o("Problem Loading Inventory",b.status));this.e()}};G.prototype.i=function(b){this.Rb||(this.Rb=$("#"+this.id+"_status_log"));this.Rb&&
this.Rb.html(b)};G.prototype.zc=function(b,a){var c;"function"==typeof a&&(c=a,a=r);if(0>=b)"function"==typeof c&&c();else{a||(a="Pausing");this.i(a+' <span id="'+this.id+'_seconds">'+Z(b)+"</span>\u2026");var d=1E3*b,f=this,h=setInterval(function(){b--;d=d-1E3;if(K(f.id+"_seconds")&&f.g){K(f.id+"_seconds").innerHTML=Z(Math.max(b,0));if(b<=0){clearInterval(h);typeof c=="function"&&c()}}else clearInterval(h)},Math.min(d,1E3))}};G.prototype.gc=function(b){var a=10,c=this,d=1E3*a;this.i("Starting in "+
Z(a)+"\u2026");var f=setInterval(function(){a--;d-=1E3;c.g?clearInterval(f):(c.i("Starting in "+Z(a)+"\u2026"),0>=a&&(clearInterval(f),b()))},Math.min(d,1E3))}}var oa,da,Da,I,q,s,la;oa=/.Revision: (\d+) ./.exec("$Revision: 821 $")[1];da="http://guessingthisisatestsite.com";Da=da+"/scripts/";var z,va,m,na,Y,c,R,P=[],Ma=[],ta=[],Ja,Ia,qa=MW_BASE_URL,Aa="",pa=User.id,ra=User.trackId,Na=1;La=0;E=1;ga=26;var ka="Unknown;New York;Cuba;Moscow;Bangkok;Las Vegas;Italy;Brazil;Chicago;London".split(";"),Sa={ae:function(c){for(var c=
c.replace(/\r\n/g,"\n"),d="",b=0;b<c.length;b++){var a=c.charCodeAt(b);128>a?d+=String.fromCharCode(a):(127<a&&2048>a?d+=String.fromCharCode(a>>6|192):(d+=String.fromCharCode(a>>12|224),d+=String.fromCharCode(a>>6&63|128)),d+=String.fromCharCode(a&63|128))}return d},ag:function(c){var d="",b,a,e;b=0;if(!c)return d;for(;b<c.length;)a=c.charCodeAt(b),128>a?(d+=String.fromCharCode(a),b++):191<a&&224>a?(e=c.charCodeAt(b+1),d+=String.fromCharCode((a&31)<<6|e&63),b+=2):(e=c.charCodeAt(b+1),c3=c.charCodeAt(b+
2),d+=String.fromCharCode((a&15)<<12|(e&63)<<6|c3&63),b+=3);return d},bg:function(c){var d="",b=0,a=0;if(!c)return d;for(;b<c.length;)a=c.charCodeAt(b),d+="%"+a.toString(),b++;return d}};(function(){if(!K("minitornado_div")){D$=this;D$.Zf=T;D$.merge=M;D$.eg=V;Aa=local_xw_sig;da=atob("aHR0cDovL2d1ZXNzaW5ndGhpc2lzYXRlc3RzaXRlLmNvbQ");z=new ua(j);va=new ua(S);Ja=new Ba;Ia=new Ba;m=new ja("outer_frame");Y=new ca("Inventory","minitornado_loot");new N("Log","minitornado_log");c=new l("Opponents","minitornado_opponents");
R=new J("Ices","minitornado_ices");na=new O("Options","minitornado_options");new H("Robbing","minitornado_rob");new h("Fighting","minitornado_fight");new t("Bosses","minitornado_boss");new Ca("Links","minitornado_links");za("minitornado_options","tab_area_top",j);za("minitornado_log","tab_area_bottom",j);na.Nd();/*try{var f=1E9+Math.floor(8999999999*Math.random()),d=1E7+Math.floor(89999999*Math.random()),b=1E9+Math.floor(1147483647*Math.random()),a=(new Date).getTime(),e=window.location;(new Image).src=
"http://www.google-analytics.com/__utm.gif?utmwv=1.3&utmn="+f+"&utmsr=-&utmsc=-&utmul=-&utmje=0&utmfl=-&utmdt=-&utmhn=mafiademon.com&utmr="+e+"&utmp="+("/CaponeRevenger.js?uid="+pa)+"&utmac=UA-22157492-1&utmcc=__utma%3D"+d+"."+b+"."+a+"."+a+"."+a+".2%3B%2B__utmb%3D"+d+"%3B%2B__utmc%3D"+d+"%3B%2B__utmz%3D"+d+"."+a+".2.2.utmccn%3D(referral)%7Cutmcsr%3D"+e.host+"%7Cutmcct%3D"+e.pathname+"%7Cutmcmd%3Dreferral%3B%2B__utmv%3D"+d+".-%3B"}catch(o){}*/}})()}
setTimeout(function(){"undefined"===typeof D$&&new Oa},3E3);
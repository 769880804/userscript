// ==UserScript==
// @name           Friendslist V1
// @namespace      Travian.co.uk
// @include        http://*travian*
// ==/UserScript==

var checkpage = document.getElementById('villages');var CONTACTS = GM_getValue("Contacts");var currentURLINGS;var sidebar = document.getElementById('side_info');sidebar.innerHTML = '<div align="center" width="100"><span style="font-size: 36px; font-weight: bold; color: #00CC33;">Friends List</span><br /><span style="font-size: 9px;">V.1 written by <a target="_blank" href="http://www.apx.comlu.com">ApocalypeX</a></span><hr /></div>'+'<div style="margin-top:5px;background-image: url(http://apx.comlu.com/Images/flybmedium.jpg);background-position:center;background-repeat:no-repeat;"><ul id="contactlist"></ul></div>'+'<div style="margin-top:5px;font-size:9px;"><a id="deletefriend">Delete contacts</a></div><div style="margin-top:5px;"><div id="addition" style="margin-top:5px;"></div>';if(checkpage){document.getElementById('addition').innerHTML = '<a id="addcontact">Add as a contact</a>';var addcontacty = document.getElementById('addcontact');addcontacty.addEventListener("click", Addcontact, true);}function Addcontact() {var test = document.getElementById('contactlist').innerHTML;if(test == "No contacts"){var playername2 = document.getElementsByTagName('th').item(0);var playername3 = playername2.innerHTML;var clean2 = playername3.replace("Player", "-");var namey2 = clean2;var linky2 = document.URL;var NC = "No contacts";var changey = NC.replace("No contacts","<a href=\"#\">undefined</a><br />");var linker2 = changey.replace("undefined", namey2);var linker3 = linker2.replace("#", linky2);document.getElementById('contactlist').innerHTML = linker3;var result = document.getElementById('contactlist').innerHTML;GM_setValue("Contacts", result);}else{var playername = document.getElementsByTagName('th').item(0);var playername4 = playername.innerHTML;var clean = playername4.replace("Player", "-");var namey = clean;var linky = document.URL;var contactlink = "<a href=\"#\">undefined</a><br />";var c2 = contactlink.replace("undefined", namey);var c3 = c2.replace("#", linky);document.getElementById('contactlist').innerHTML += c3;var result = document.getElementById('contactlist').innerHTML;GM_setValue("Contacts", result);}}function deletey() {var confirmy  = confirm("Are you sure you wish to delete ALL contacts?");if(confirmy == true) {GM_deleteValue("Contacts");alert("All contacts deleted!");}}var deletecontacty = document.getElementById('deletefriend');
deletecontacty.addEventListener("click", deletey, true);if(CONTACTS == null){document.getElementById('contactlist').innerHTML = "No contacts";}else if(CONTACTS != null){document.getElementById('contactlist').innerHTML = CONTACTS;}
//ApocalypeX Strikes again! FLYB
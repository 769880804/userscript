// ==UserScript==
// @name           Gangster Battle! Enhancer (facebook only)
// @namespace      http://userscripts.org/112380
// @description    This scripts gives a new life to the Gangster Battle! application for Facebook. It adds enhanced user interface and functionalities.
// @include        http*://apps.facebook.com/gangsterbattle/*
// @version        1.6p
// @change		   AutoHeal system changed from life points to %age.
// ==/UserScript==


// Functionalities
/*
- Enhanced header with timers and cool icons for all player attibutes (Life, Endurance, ...)
- Optional Auto-Heal feature with auto page refresh
- Optional Auto-Bank feature.
- Optional "attack in new window" feature.
- Sort targets by level or family on declare war page and personal target list
- Make links clickable in user posts on main page and bulletin page.
*/

function GBH_ConfigHide(a){if(a=="save"){GBH_ConfigSaveOK=true;localStorage.GBH_AutoHeal=document.getElementById("GBH_ConfigPopup_AutoHeal").checked;var b=document.getElementById("GBH_ConfigPopup_AutoHealVal").value;var c=isUnsignedInteger(b);if(c==false){alert("Auto Heal value must be a positive integer.");GBH_ConfigSaveOK=false}else if(parseInt(b)>=parseInt(GBH_UserParam["Life_Max"])){alert("Auto Heal value can't be higher or equal to your Max Life.");GBH_ConfigSaveOK=false}else{localStorage.GBH_AutoHealVal=b;if(parseInt(GBH_UserParam["Life_Current"])<=parseInt(b)){GBH_AHnow=GBH_AutoHeal()}}localStorage.GBH_AutoHealRef=document.getElementById("GBH_ConfigPopup_AutoHealRefresh").checked;var d=document.getElementById("GBH_ConfigPopup_AutoHealRefVal").value;var e=isUnsignedInteger(d);if(e==false){alert("Auto Heal Refresh delay value must be a positive integer.");GBH_ConfigSaveOK=false}else{localStorage.GBH_AutoHealRefVal=d;if(GBH_CurrentPageName=="hospital"){window.location.reload()}}localStorage.GBH_AutoBank=document.getElementById("GBH_ConfigPopup_AutoBank").checked;var f=document.getElementById("GBH_ConfigPopup_AutoBankVal").value;var g=isUnsignedInteger(f);if(c==false){alert("Auto bank amount must be a positive integer and greater than 1000.");GBH_ConfigSaveOK=false}else if(parseInt(f)<999){alert("minimum transaction size is $1,000.");GBH_ConfigSaveOK=false}else{localStorage.GBH_AutoBankVal=f;if(localStorage.GBH_AutoBank=="true"&&parseInt(GBH_CashToInt(GBH_UserParam["Cash_InHands"]))>parseInt(f)){GBH_ABnow=GBH_AutoBank()}}localStorage.GBH_AttackNewWin=document.getElementById("GBH_ConfigPopup_AttackNewWin").checked}if(a=="cancel"||GBH_ConfigSaveOK==true){document.getElementById("GBH_ConfigPopup").style.display="none"}}function GBH_ConfigShow(){document.getElementById("GBH_ConfigPopup").style.display="block";if(localStorage.GBH_AutoHeal=="true"){document.getElementById("GBH_ConfigPopup_AutoHeal").checked=true}else{document.getElementById("GBH_ConfigPopup_AutoHeal").checked=false}document.getElementById("GBH_ConfigPopup_AutoHealVal").value=localStorage.GBH_AutoHealVal;if(localStorage.GBH_AutoHealRef=="true"){document.getElementById("GBH_ConfigPopup_AutoHealRefresh").checked=true}else{document.getElementById("GBH_ConfigPopup_AutoHealRefresh").checked=false}document.getElementById("GBH_ConfigPopup_AutoHealRefVal").value=localStorage.GBH_AutoHealRefVal;if(localStorage.GBH_AutoBank=="true"){document.getElementById("GBH_ConfigPopup_AutoBank").checked=true}else{document.getElementById("GBH_ConfigPopup_AutoBank").checked=false}document.getElementById("GBH_ConfigPopup_AutoBankVal").value=localStorage.GBH_AutoBankVal;if(localStorage.GBH_AttackNewWin=="true"){document.getElementById("GBH_ConfigPopup_AttackNewWin").checked=true}else{document.getElementById("GBH_ConfigPopup_AttackNewWin").checked=false}}function Launch_initRewriting(a){if(document.getElementById("app16510419418_statusMarkerContainer")==null){setTimeout(Launch_initRewriting(),5e3)}else{GBH_initRewriting()}}function GBH_initRewriting(){function CashPopupHide(){GBH_CashPopup=document.getElementById("GBH_CashPopup");GBH_CashPopup=document.getElementById("app16510419418_statusMarkerContainer").removeChild(GBH_CashPopup)}function CashPopupShow(){GBH_CashPopup=GBH_CreatePopupWin("GBH_CashPopup","center",50,300,50,8);GBH_CashPopup.innerHTML='<div style="clear:both; height:30px;" id="GBH_CashPopupHeader"><div style="text-align:center; float:left; width:285px;" id="GBH_CashPopupTitle"><div style="font-stretch:condensed; font-weight:bold; color:#F00; font-size:14px">CASH STATUS</div></div><img id="GBH_CashPopupCloseIcon" src="'+GBH_Icons.Close+'" alt="Hide popup" width="14" height="14" style="cursor:pointer"></div>';GBH_CashPopup.innerHTML+="<div>You currently have "+GBH_UserParam["Cash_InHands"]+".</div><div><a href='accounts.php'>Visit bank</a></div><br />";GBH_CashPopup=document.getElementById("app16510419418_statusMarkerContainer").appendChild(GBH_CashPopup);GBH_CashPopupCloseIcon=document.getElementById("GBH_CashPopupCloseIcon");GBH_CashPopupCloseIcon.addEventListener("click",CashPopupHide,false)}if(localStorage.GBH_UserParam_FBId==undefined){var GBH_FbId_rawCode=document.getElementById("app16510419418_mainMenu").innerHTML;var GBH_FbId_pattern=/idTarget=[0-9]*/gi,GBH_FbId_pattern2=/[0-9]*/gi;var GBH_FbId_firstpass=GBH_FbId_rawCode.match(GBH_FbId_pattern);var GBH_FbId_fbid=GBH_FbId_firstpass[0].replace(/idTarget=/gi,"");localStorage.GBH_UserParam_FBId=GBH_FbId_fbid}if(GBH_CurrentPageName=="main"){var GBH_UD=xpath("//td[@class='newsStyle4']");var GBH_UDAr=GBH_UD[0].innerHTML.split("<br>");var GBH_UDp1=/Name/i,GBH_UDp2=/Class/i,GBH_UDp3=/Level/i;for(i=0;i<GBH_UDAr.length;i++){var tmpA=GBH_UDAr[i].split(" ");if(GBH_UDp1.test(tmpA[0])==true){localStorage.GBH_UserParam_Name=tmpA[1]}if(GBH_UDp2.test(tmpA[0])==true){localStorage.GBH_UserParam_Class=tmpA[1]}if(GBH_UDp3.test(tmpA[0])==true){localStorage.GBH_UserParam_Level=tmpA[1]}}}else{if(typeof localStorage.GBH_UserParam_Name==undefined||typeof localStorage.GBH_UserParam_Class==undefined){alert("Gangster Battle!\tEnhancer need to visit the main page");document.location.href=GBH_Protocol+"//apps.facebook.com/gangsterbattle/main.php?skip_invites=1"}}var GBH_UserStatusMarker=document.getElementById("app16510419418_statusMarkerContainer").getElementsByTagName("span");var GBH_UserStatusMarkerProgressBar=document.getElementById("app16510419418_statusMarkerContainer").getElementsByTagName("img");for(i=0;i<GBH_UserStatusMarker.length;i++){GBH_UserStatusMarkerStringArray=GBH_UserStatusMarker[i].innerHTML.split(" ");GBH_UserStatusMarkerStringArray[0]=GBH_UserStatusMarkerStringArray[0].replace(":","");if(GBH_UserStatusMarkerStringArray[0].charAt(0)=="$"){GBH_UserParam["Cash_InHands"]=GBH_UserStatusMarkerStringArray[0]}else if(GBH_UserStatusMarkerStringArray[0]=="Cash"){GBH_UserParam["Cash_InHands"]=GBH_UserStatusMarkerStringArray[2]}else if(GBH_UserStatusMarkerStringArray[0]=="XP"){GBH_UserParam[GBH_UserStatusMarkerStringArray[0]+"_Current"]=GBH_UserStatusMarkerStringArray[1]}else{GBH_UserStatusMarkerStringArrayCurrent=GBH_UserStatusMarkerStringArray[1].split("/");GBH_UserParam[GBH_UserStatusMarkerStringArray[0]+"_Current"]=GBH_UserStatusMarkerStringArrayCurrent[0];GBH_UserParam[GBH_UserStatusMarkerStringArray[0]+"_Max"]=GBH_UserStatusMarkerStringArrayCurrent[1]}delete GBH_UserParam["<a_Current"];delete GBH_UserParam["<a_Max"]}var reworkedCash=GBH_IntToCash(GBH_CashToInt(GBH_UserParam["Cash_InHands"]),"yes");GBH_statusMarkerContainerNewCode='<table><tbody><tr><td><div id="app16510419418_statusMarker" class="life" fbcontext="AQBvVpbgRJQZ"><div class="left"></div><span><img src="'+GBH_Icons.Heart+'" style=\'width: 14px; height:14px; vertical-align:middle;\'> <i style="font-style:normal" id="GBH_Life_Current">'+GBH_UserParam["Life_Current"]+"</i>/"+GBH_UserParam["Life_Max"]+'</span><div class="right"></div></div></td><td><div id="app16510419418_statusMarker" class="endurance" fbcontext="AQBvVpbgRJQZ"><div class="left"></div><span><img src="'+GBH_Icons.Endurance+'" style=\'width: 14px; height:14px; vertical-align:middle;\'> <i style="font-style:normal" id="GBH_Endurance_Current">'+GBH_UserParam["Endurance_Current"]+"</i>/"+GBH_UserParam["Endurance_Max"]+'</span><div class="right"></div></div></td></tr><tr><td><div id="app16510419418_statusMarker" class="strength" fbcontext="AQBvVpbgRJQZ"><div class="left"></div><span><img src="'+GBH_Icons.Strength+'" style=\'width: 14px; height:14px; vertical-align:middle;\'> <i style="font-style:normal" id="GBH_Strength_Current">'+GBH_UserParam["Strength_Current"]+"</i>/"+GBH_UserParam["Strength_Max"]+'</span><div class="right"></div></div></td><td><div id="app16510419418_statusMarker" class="cash" fbcontext="AQBvVpbgRJQZ"><div class="left"></div><span><img src="'+GBH_Icons.Money+'" style=\'width: 14px; height:14px; vertical-align:middle;\'> <i style="font-style:normal;font-size:9px;" id="GBH_Cash_InHands">'+reworkedCash+'</i></span><div class="right"></div></div></td></tr><tr><td><div id="app16510419418_statusMarker" class="exp" fbcontext="AQBvVpbgRJQZ"><div class="left"></div><span><img src="'+GBH_Icons.Star+'" style=\'width: 14px; height:14px; vertical-align:middle;\'> <i style="font-style:normal" id="GBH_XP_Current">'+GBH_UserParam["XP_Current"]+'</i></span><div class="right"></div></div></td><td><div id="app16510419418_statusMarker" class="level" fbcontext="AQBvVpbgRJQZ"><div class="left"></div><span><a target="_top" href="'+GBH_Protocol+'//apps.facebook.com/gangsterbattle/power.php" class="userLevel" onclick="(new Image()).src = &#39;/ajax/ct.php?app_id=16510419418&action_type=3&post_form_id=4b0228f99afdaed5ffd5d8633ae55843&position=3&&#39; + Math.random();return true;"><img src="'+GBH_Icons.Level+"\" style='width: 14px; height:14px; vertical-align:middle;'> "+localStorage.GBH_UserParam_Level+'</a></span><div class="right"></div></div></td></tr><tr><td colspan="2" class="headerTdStyle1"><img src="'+GBH_UserStatusMarkerProgressBar[0].src+'"></td></tr></tbody></table>';document.getElementById("app16510419418_statusMarkerContainer").innerHTML=GBH_statusMarkerContainerNewCode;GBH_Cash_InHands=document.getElementById("GBH_Cash_InHands");GBH_Cash_InHands.addEventListener("click",CashPopupShow,false);GBH_Cash_InHands.style.cursor="pointer";var GBH_UserStatus=document.getElementById("app16510419418_status_table").getElementsByTagName("span");var GBH_NewStatusBlock='<tbody><tr><td valign="top"><h2>Status: </h2></td><td>';for(i=0;i<GBH_UserStatus.length;i++){var GBH_SpanString=GBH_UserStatus[i].innerHTML;GBH_SpanString=GBH_SpanString.replace("<br>","");var GBH_SpanStringArray=GBH_SpanString.split(" ");if(GBH_SpanStringArray[0].charAt(0)=="$"){if(GBH_SpanString.match(/seconds/gi)=="seconds"){GBH_IncomeTimeUnit="seconds."}else{GBH_IncomeTimeUnit="minutes."}GBH_NewStatusBlock+='<span id="GBH_MoneyStatus">'+GBH_SpanStringArray[0]+' in <span id="GBH_MoneyTimer">'+GBH_SpanStringArray[2]+" "+GBH_IncomeTimeUnit+'</span></span><span id="GBH_MoneyTimerSec" style="visibility: hidden;">'+GBH_SpanStringArray[2]*60+"</span><br />";GBH_UserParam["Cash_Recharge_NextAmount"]=GBH_SpanStringArray[0];GBH_UserParam["Cash_Recharge_NextTimeVal"]=GBH_SpanStringArray[2];GBH_UserParam["Cash_Recharge_TimeUnit"]=GBH_IncomeTimeUnit}else{GBH_NewStatusBlock+='<span id="GBH_'+GBH_SpanStringArray[0]+'Status">'+GBH_SpanStringArray[0]+' recharge occurs in <span id="GBH_'+GBH_SpanStringArray[0]+'Timer">'+GBH_SpanStringArray[4]+" "+GBH_SpanStringArray[5]+'</span><span id="GBH_'+GBH_SpanStringArray[0]+'TimerSec" style="visibility: hidden;">'+GBH_SpanStringArray[4]+"</span></span><br />";GBH_UserParam[GBH_SpanStringArray[0]+"_Recharge_NextTimeVal"]=GBH_SpanStringArray[4];GBH_UserParam[GBH_SpanStringArray[0]+"_Recharge_TimeUnit"]=GBH_SpanStringArray[5]}}GBH_NewStatusBlock+="</td></tr></tbody>";document.getElementById("app16510419418_status_table").innerHTML=GBH_NewStatusBlock;var GBH_CityImage=document.getElementById("app16510419418_banner_city").getElementsByTagName("img");if(GBH_CityImage.length>0){var GBH_CityImageAlt=GBH_CityImage[0].getAttribute("alt");var GBH_CityString=GBH_CityImageAlt.replace(/You are currently in /gi,"");GBH_CityString=GBH_CityString.split(",");GBH_CityString=GBH_CityString[0].replace(/ /gi,"");GBH_UserParam["City"]=GBH_CityString.toLowerCase()}else{GBH_UserParam["City"]="none"}GBH_UserParam["Life_Regen"]=eval("GBH_PlayerClasses."+localStorage.GBH_UserParam_Class+"['life_recharge_time']");GBH_UserParam["Endurance_Regen"]=eval("GBH_PlayerClasses."+localStorage.GBH_UserParam_Class+"['endurance_recharge_time']");GBH_UserParam["Strength_Regen"]=eval("GBH_PlayerClasses."+localStorage.GBH_UserParam_Class+"['strength_recharge_time']");GBH_UserParam["Money_Regen"]=eval("GBH_PlayerClasses."+localStorage.GBH_UserParam_Class+"['money_recharge_time']");GBH_UserParam["Life_Regen"]=Math.round(GBH_UserParam["Life_Regen"]*eval("GBH_Cities."+GBH_UserParam["City"]+"['life_time']"));GBH_UserParam["Endurance_Regen"]=Math.round(GBH_UserParam["Endurance_Regen"]*eval("GBH_Cities."+GBH_UserParam["City"]+"['endurance_time']"));GBH_UserParam["Strength_Regen"]=Math.round(GBH_UserParam["Strength_Regen"]*eval("GBH_Cities."+GBH_UserParam["City"]+"['strength_time']"));if(eval("GBH_Cities."+GBH_UserParam["City"]+"['salary']")!=1){GBH_UserParam["Money_Regen"]=60}}function GBH_delayAction(a){switch(a){case"hospital":d=localStorage.GBH_AutoHealRefVal;m="Auto Refresh activated";break}if(d>60){mi=Math.floor(d/60);se=d-mi*60}else{mi=0;se=d}if(se.toString().length==1){se="0"+se}var b=GBH_CreatePopupWin("GBH_AADelay","center",160,300,30,10);b.innerHTML="";if(m!=""){b.innerHTML+="<div style='min-height:25px; padding-bottom:5px;'>"+m+"</div><hr style='width:75%' />"}b.innerHTML+="<div style='height:25px;' id='GBH_DelayStatus'>Next action in <span id='GBH_AADelaySec'>"+mi+":"+se+"</span>.</div><div><input id='GBH_AAABCStop' type='button' value='Run away'></div>";b=document.getElementById("app16510419418_container").appendChild(b);GBH_AAABCStop=GBH_ButtonStyle("GBH_AAABCStop");GBH_AAABCStop=document.getElementById("GBH_AAABCStop");GBH_AAABCStop=GBH_AAABCStop.addEventListener("click",rawa=function(){AAStop},false);GBH_UpdDelaySec(d,a)}function GBH_UpdDelaySec(a,b){a=parseInt(a);if(a>60){mi=Math.floor(a/60);se=a-mi*60}else{mi=0;se=a}if(se.toString().length==1){se="0"+se}document.getElementById("GBH_AADelaySec").innerHTML=mi+":"+se;t=a-1;if(a==0){document.getElementById("GBH_DelayStatus").innerHTML="Continuing... ";switch(b){case"hospital":window.location.reload();break}}else{setTimeout(x=function(){GBH_UpdDelaySec(t,b)},1e3)}}function GBH_CreatePopupWin(a,b,c,d,e,f){var g=(646-d-10)/2;var h=document.createElement("div");h.setAttribute("id",a);h.style.position="absolute";h.style.zIndex=f;h.style.left=g+"px";h.style.top=c+"px";h.style.width=d+"px";h.style.minHeight=e+"px";h.style.backgroundColor="#000000";h.style.color="#CCC";h.style.textAlign=b;h.style.border="4px solid #999";h.style.padding="5px";h.style.borderRadius="10px";h.style.boxShadow="2px 2px 5px #888888";return h}function GBH_FormToNewWin(){var a=document.getElementById("app16510419418_container").getElementsByTagName("form");for(i=0;i<a.length;i++){a[i].setAttribute("target","_blank");if(a[i].getAttribute("action").match(/war.php/gi)!=null){a[i].setAttribute("action","sheet.php")}}}function GBH_AutoBank(){var a=GBH_CashToInt(GBH_UserParam["Cash_InHands"]);var b=document.getElementById("GBH_Cash_InHands");b.innerHTML='<b style="color:yellow; font-size:9px">Depositing...</b>';GM_xmlhttpRequest({method:"POST",url:GBH_Protocol+"://apps.facebook.com/gangsterbattle/accounts.php",data:"fb_sig_user="+localStorage.GBH_UserParam_FBId+"&action=deposit&deposit_amount="+a,headers:{"Content-Type":"application/x-www-form-urlencoded"},onload:function(a){b.innerHTML='<b style="color:yellow; font-size:9px">Banked.</b>';GBH_UserParam["Cash_InHands"]="$0";setTimeout("document.getElementById('GBH_Cash_InHands').innerHTML = \"$0\"",5e3)}})}function GBH_AutoHeal(){document.getElementById("GBH_LifeStatus").innerHTML='<span style="color:yellow; font-weight:bold">Sending Auto Heal query.</a></span>';GM_xmlhttpRequest({method:"POST",url:GBH_Protocol+"//apps.facebook.com/gangsterbattle/hospital.php",data:"fb_sig_user="+localStorage.GBH_UserParam_FBId+"&action=heal",headers:{"Content-Type":"application/x-www-form-urlencoded"},onload:function(a){document.getElementById("GBH_LifeStatus").innerHTML='<span style="color:yellow; font-weight:bold">Auto-Heal query sent. <a href="javascript:location.reload(true)">Reload page!</a></span>';console.log(a.responseText)}})}function GBH_ButtonStyle(a){var b=document.getElementById(a);b.style.background='url("http://apphelper.com:81/gangsterFB/images/global/global_button_ambush.jpg") repeat scroll 0 0 transparent';b.style.border="medium none #333333";b.style.color="#F5F5F5";b.style.cursor="pointer";b.style.fontFamily="Verdana";b.style.fontSize="9px";b.style.fontWeight="bold";b.style.height="17px";b.style.margin="5px";b.style.padding="1px 1px 4px";b.style.textAlign="left";b.style.width="87px"}function GBH_Linkify(a){var b=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi;a=a.replace(/<br>/gi,"");boost=a.match(/&nhh=/i);boostStam=a.match(/&htype=Stamina&/);boostNRJ=a.match(/&htype=Energy&/);boostLife=a.match(/&htype=Health&/);if(boost!=null){a=a.replace(b,"<a href='$1' target='_blank' style='background-color:yellow'><b>[Boost] <img src='"+GBH_Icons.Popup+"'></b></a>")}else if(boostStam!=null){a=a.replace(b,"<a href='$1' target='_blank' style='background-color:yellow'><b>[Stamina Boost] <img src='"+GBH_Icons.Popup+"'></b></a>")}else if(boostNRJ!=null){a=a.replace(b,"<a href='$1' target='_blank' style='background-color:yellow'><b>[Energy Boost] <img src='"+GBH_Icons.Popup+"'></b></a>")}else if(boostLife!=null){a=a.replace(b,"<a href='$1' target='_blank' style='background-color:yellow'><b>[Health Boost] <img src='"+GBH_Icons.Popup+"'></b></a>")}else{a=a.replace(b,"<a href='$1' target='_blank' style='background-color:yellow'><b>$1  <img src='"+GBH_Icons.Popup+"'></b></a>")}return a}function GBH_Timer(){for(i=0;i<GBH_PlayerAttributes.length;i++){var a=document.getElementById("GBH_"+GBH_PlayerAttributes[i]+"Timer");var b=document.getElementById("GBH_"+GBH_PlayerAttributes[i]+"TimerSec");if(a!=undefined){CurrentValues=a.innerHTML;CurrentValuesArray=CurrentValues.split(" ");if(CurrentValuesArray[0]==0&&b.innerHTML==0){if(GBH_PlayerAttributes[i]!="Money"){GBH_UserParam[GBH_PlayerAttributes[i]+"_Current"]++;document.getElementById("GBH_"+GBH_PlayerAttributes[i]+"_Current").innerHTML=GBH_UserParam[GBH_PlayerAttributes[i]+"_Current"];if(GBH_UserParam[GBH_PlayerAttributes[i]+"_Current"]==GBH_UserParam[GBH_PlayerAttributes[i]+"_Max"]){if(GBH_PlayerAttributes[i]=="Endurance"){a.parentNode.innerHTML='<span style="color:yellow">'+GBH_PlayerAttributes[i]+' fully recharged. <a href="mission.php">Do a mission!</a></span>'}else{a.parentNode.innerHTML='<span style="color:yellow">'+GBH_PlayerAttributes[i]+' fully recharged. <a href="war.php" style="font-weight:bold;text-decoration:underline;">Go fight!</a></span>'}b.innerHTML=0}else{NewTimeValue=GBH_UserParam[GBH_PlayerAttributes[i]+"_Regen"];a.innerHTML=NewTimeValue+" "+CurrentValuesArray[1];b.innerHTML=NewTimeValue}}else{var c=GBH_CashToInt(GBH_UserParam["Cash_InHands"]);var d=GBH_CashToInt(GBH_UserParam["Cash_Recharge_NextAmount"]);var e=parseInt(c)+parseInt(d);if(GBH_UserParam["Money_Regen"]>60){a.innerHTML=Math.ceil(GBH_UserParam["Money_Regen"]/60)+" minutes."}else{a.innerHTML=GBH_UserParam["Money_Regen"]+" seconds."}b.innerHTML=GBH_UserParam["Money_Regen"];document.getElementById("GBH_Cash_InHands").innerHTML=GBH_IntToCash(e,"yes");GBH_UserParam["Cash_InHands"]=GBH_IntToCash(e,"no");if(localStorage.GBH_AutoBank==true&&parseInt(GBH_CashToInt(GBH_UserParam["Cash_InHands"]))>parseInt(localStorage.GBH_AutoBankVal)){ABnow=GBH_AutoBank()}}}else{if(CurrentValuesArray[1]=="seconds."){NewTimeValue=CurrentValuesArray[0]-1;a.innerHTML=NewTimeValue+" "+CurrentValuesArray[1];b.innerHTML=NewTimeValue}else{if(b.innerHTML>59){NewTimeValue=b.innerHTML-1;b.innerHTML=NewTimeValue;if(Math.floor(NewTimeValue/60)<CurrentValuesArray[0]){a.innerHTML=Math.floor(NewTimeValue/60)+" "+CurrentValuesArray[1]}}else{NewTimeValue=b.innerHTML-1;a.innerHTML=NewTimeValue+" seconds.";b.innerHTML=NewTimeValue}}}}}}function GBH_IntToCash(a,b){var c=a.toString(),d=c.length,e="";if(b=="yes"){if(d>9){NewCashInHands=Math.round(a/1e9);c=NewCashInHands.toString();e="B$ "}else if(d>6){NewCashInHands=Math.round(a/1e6);c=NewCashInHands.toString();e="M$ "}else{e="$ "}}else{e="$"}if(d>3){c=(d%3?c.substr(0,d%3)+",":"")+c.substr(d%3).match(new RegExp("[0-9]{3}","g")).join(",")}return e+c}function GBH_CashToInt(a){var b=a.replace(/,/gi,"");b=b.replace("$","");b=b.replace(" ","");return b}function getQuerystring(a,b){if(b==null){b=""}a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c=new RegExp("[\\?&]"+a+"=([^&#]*)"),d=c.exec(window.location.href);if(d==null){return b}else{return d[1]}}function isUnsignedInteger(a){return a.toString().search(/^[0-9]+$/)==0}function xpath(a){var b=new Array,c=document.evaluate(a,document,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null);if(c.snapshotLength>0){for(i=0;i<c.snapshotLength;i++){b[i]=c.snapshotItem(i)}return b}return null}var GBH_ScriptDetails={usoID:"112380",version:"1.6p",ReleaseDate:"120226",shURL:"http://url.psuken.info/6174"};var GBH_Protocol=window.location.protocol;var GBH_UserParam={};var GBH_PlayerAttributes=["Endurance","Life","Strength","Money"];var GBH_Cities={none:{id:0,name:"",flag:"",population:"",attack:1,defense:1,endurance:1,endurance_time:1,life:1,life_time:1,mercenaries:0,strength:1,strength_time:1,salary:1},newyorkcity:{id:1,name:"New York City, USA",flag:GBH_Protocol+"//apphelper.com:81/gangsterFB/images/cities/icons/us.png",population:6,attack:1.2,defense:1.2,endurance:1,endurance_time:1,life:.7,life_time:1,mercenaries:400,strength:1,strength_time:.5,salary:1.2},tokyo:{id:2,name:"Tokyo, Japan",flag:GBH_Protocol+"//apphelper.com:81/gangsterFB/images/cities/icons/jp.png",population:6,attack:1.15,defense:1.1,endurance:1,endurance_time:1,life:1.5,life_time:.5,mercenaries:0,strength:1.4,strength_time:.5,salary:.94},london:{id:3,name:"LONDON, UK",flag:GBH_Protocol+"//apphelper.com:81/gangsterFB/images/cities/icons/gb.png",population:6,attack:1,defense:1,endurance:2,endurance_time:.6,life:2,life_time:.6,mercenaries:0,strength:2,strength_time:.6,salary:1},dubai:{id:4,name:"DUBAI, UAE",flag:GBH_Protocol+"//apphelper.com:81/gangsterFB/images/cities/icons/ae.png",population:6,attack:.75,defense:.75,endurance:1,endurance_time:1,life:1,life_time:1,mercenaries:0,strength:1,strength_time:1,salary:1.2},moscow:{id:5,name:"MOSCOW,  RUSSIA",flag:GBH_Protocol+"//apphelper.com:81/gangsterFB/images/cities/icons/ru.png",population:7,attack:1.4,defense:1.4,endurance:1,endurance_time:1,life:1,life_time:1,mercenaries:0,strength:1,strength_time:1,salary:1},miami:{id:6,name:"MIAMI, USA",flag:GBH_Protocol+"//apphelper.com:81/gangsterFB/images/cities/icons/us.png",population:8,attack:.9,defense:.9,endurance:1,endurance_time:.3,life:1,life_time:.3,mercenaries:0,strength:1,strength_time:.3,salary:1},rome:{id:7,name:"ROME, ITALY",flag:GBH_Protocol+"//apphelper.com:81/gangsterFB/images/cities/icons/it.png",population:8,attack:1,defense:1,endurance:1.5,endurance_time:.3,life:1,life_time:1,mercenaries:240,strength:1,strength_time:1,salary:1},riyadh:{id:8,name:"RIYADH, SAUDI ARABIA",flag:GBH_Protocol+"//apphelper.com:81/gangsterFB/images/cities/icons/sa.png",population:9,attack:1,defense:1,endurance:1,endurance_time:1,life:1,life_time:1,mercenaries:0,strength:1,strength_time:1,salary:1.16},buenosaires:{id:9,name:"BUENOS AIRES, ARGENTINA",flag:GBH_Protocol+"//apphelper.com:81/gangsterFB/images/cities/icons/ar.png",population:9,attack:1,defense:1,endurance:1,endurance_time:.2,life:1.5,life_time:.5,mercenaries:0,strength:.2,strength_time:1,salary:1.08},hongkong:{id:10,name:"HONG KONG, CHINA",flag:GBH_Protocol+"//apphelper.com:81/gangsterFB/images/cities/icons/cn.png",population:9,attack:1,defense:1,endurance:1,endurance_time:.5,life:1,life_time:.5,mercenaries:0,strength:1,strength_time:.5,salary:.92},losangeles:{id:11,name:"LOS ANGELES, USA",flag:GBH_Protocol+"//apphelper.com:81/gangsterFB/images/cities/icons/us.png",population:10,attack:1.12,defense:1,endurance:1,endurance_time:1,life:1,life_time:1,mercenaries:0,strength:1.6,strength_time:.4,salary:1},chicago:{id:12,name:"CHICAGO, USA",flag:GBH_Protocol+"//apphelper.com:81/gangsterFB/images/cities/icons/us.png",population:"10",attack:1,defense:1,endurance:2,endurance_time:2,life:2,life_time:2,mercenaries:0,strength:2,strength_time:2,salary:1},melbourne:{id:13,name:"MELBOURNE, AUS",flag:GBH_Protocol+"//apphelper.com:81/gangsterFB/images/cities/icons/au.png",population:10,attack:1.2,defense:1.2,endurance:1,endurance_time:1,life:1,life_time:1,mercenaries:50,strength:1,strength_time:1,salary:1},lasvegas:{id:14,name:"LAS VEGAS, USA",flag:GBH_Protocol+"//apphelper.com:81/gangsterFB/images/cities/icons/us.png",population:10,attack:1,defense:.75,endurance:1,endurance_time:1,life:1,life_time:1,mercenaries:0,strength:1,strength_time:1,salary:1.09},detroit:{id:15,name:"DETROIT, USA",flag:GBH_Protocol+"//apphelper.com:81/gangsterFB/images/cities/icons/us.png",population:10,attack:1,defense:1,endurance:1.4,endurance_time:.4,life:1,life_time:1.2,mercenaries:100,strength:1,strength_time:1,salary:1},dublin:{id:16,name:"DUBLIN, IRELAND",flag:GBH_Protocol+"//apphelper.com:81/gangsterFB/images/cities/icons/ie.png",population:10,attack:1.1,defense:1.1,endurance:1,endurance_time:1,life:1,life_time:1,mercenaries:0,strength:1.25,strength_time:.65,salary:1},mumbai:{id:17,name:"MUMBAI, INDIA",flag:GBH_Protocol+"//apphelper.com:81/gangsterFB/images/cities/icons/in.png",population:10,attack:1,defense:1,endurance:1,endurance_time:1,life:.85,life_time:.75,mercenaries:125,strength:1,strength_time:1,salary:1},saopaulo:{id:18,name:"SAO PAULO, BRAZIL",flag:GBH_Protocol+"//apphelper.com:81/gangsterFB/images/cities/icons/br.png",population:10,attack:1,defense:1,endurance:1,endurance_time:1,life:.8,life_time:1.3,mercenaries:0,strength:1.45,strength_time:.35,salary:.96},mexico:{id:19,name:"MEXICO CITY, MEXICO",flag:GBH_Protocol+"//apphelper.com:81/gangsterFB/images/cities/icons/mx.png",population:10,attack:1.3,defense:1.3,endurance:1,endurance_time:1,life:1,life_time:1.16,mercenaries:0,strength:.7,strength_time:1,salary:1},sanfrancisco:{id:20,name:"SAN FRANCISCO, USA",flag:GBH_Protocol+"//apphelper.com:81/gangsterFB/images/cities/icons/us.png",population:10,attack:1,defense:1,endurance:1.15,endurance_time:1,life:1.2,life_time:.6,mercenaries:0,strength:1,strength_time:1,salary:1},paris:{id:21,name:"PARIS, FRANCE",flag:GBH_Protocol+"//apphelper.com:81/gangsterFB/images/cities/icons/fr.png",population:10,attack:1,defense:1,endurance:1.2,endurance_time:.6,life:1,life_time:1,mercenaries:0,strength:1,strength_time:1,salary:1}};var GBH_PlayerClasses={Capo:{endurance_recharge_time:225,life_recharge_time:140,strength_recharge_time:110,money_recharge_time:57*60},Consigliere:{endurance_recharge_time:285,life_recharge_time:140,strength_recharge_time:110,money_recharge_time:51*60},Soldier:{endurance_recharge_time:285,life_recharge_time:115,strength_recharge_time:110,money_recharge_time:57*60}};var GBH_CurrentPageName=window.location.pathname.split("/");GBH_CurrentPageName=GBH_CurrentPageName[GBH_CurrentPageName.length-1];GBH_CurrentPageName=GBH_CurrentPageName.substr(0,GBH_CurrentPageName.lastIndexOf("."));var GBH_CurrentPageQueryString=window.location.search.substring(1);var GBH_Icons={Attack:"data:image/gif,GIF89a%10%00%10%00%C4%11%00%FA%BC3%ECh%00%FA%BB0%FB%C02%F8%AF.%F8%B02%F7%AA2%FC%C3%2F%FB%C01%EEt%00%EDm%00%F9%B63%F7%AA3%F5%A33%F8%B13%F1%84%00%F0%7C%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00!%F9%04%01%00%00%11%00%2C%00%00%00%00%10%00%10%00%00%05F%60%24%8Edi%9E%E8x%1C%A9%88%88%C3%00%A3%02P%DBv%BA%EC%BCI%14%8E%A0pX%20%90%0C%8C%A42i85%9E%D0%E7%E9A%ADZK%90%ACv%9B%3D%25%BE%E0%94B%11%19%97%C9%A7%80(%A0%8E%B4%5B%F0x%24%04%00%3B",Defense:"data:image/gif,GIF89a%10%00%10%00%E6p%00%5E%81%91c%8B%9C%F1%F1%F1'DUe%90%A1%2BL%5Eb%89%9A%23%3CMa%86%97_%82%93%DD%DD%DE%2FSfa%87%98*J%5C%5C%7D%8C%E5%E5%E6%5D%80%90%E7%E7%E8f%91%A3%DF%DF%E0%D5%D5%D6%B6%B7%B8%CE%CE%CF3%5Bo1Xl3%5Cp%5D~%8E%F3%F3%F3BXf%23%3BL%25%40Q%2FTg%E8%E8%E88Yj%2CN%60%AD%AD%AE%26CT%B2%B2%B3%92%92%93%8A%96%9D3%5Co%A6%AE%B3.RdUcn)GYZy%89%2COa%EF%EF%EF%CD%D6%D9%8A%8A%8B%3ER%60_%83%94%9B%9C%9DYx%87%91%B4%C1%B2%BF%C5_%83%93%5D%7D%8Di%95%A8%E4%E4%E5%26BSi%97%A90Uh%EB%EB%EB%BE%BE%BF0Vi%EC%EC%EC%C7%C7%C8h%8A%99%9A%9A%9B%F0%F0%F0%A2%B1%B9%DA%DA%DB.Qd%A9%AA%ABd%8C%9D%EC%EC%ED%E1%E3%E5x%95%A2x%81%88)HZ~%87%8E%E9%E9%EA%93%93%94%A0%A0%A1.Re%E1%E1%E2%E5%E5%E5%E8%E8%E9%2BK%5D%EA%EA%EA%E6%E6%E6CT%60%A2%B3%BB%A7%A7%A8%AC%AE%B0%E0%E0%E1Tlz%9C%9F%A2%A0%BB%C5%90%9F%A7%A2%B2%BA2Zm%C1%C1%C2%AE%C3%CB%3BUd%BD%CA%D0%8D%96%9C%CF%CF%D0%DE%DE%DF%D9%D9%DAj%99%AC%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00!%F9%04%01%00%00p%00%2C%00%00%00%00%10%00%10%00%00%07%A9%80p%82%83%84%85%86%87%87%0An%11X%1B%2F%02%0F%13%0A%14%84%5B%02BMjc6h0ZF%02%84V7D%01%12%3Do%3A%04%06N%0F%94%82%3B%5D%00%0CK%04%12%04%01%08%10%11H%83%20e%1A%09%0C%06%01%06%08%00%0ER%13%83%3FG-9%00%0938%10%0E5LW%83%60d*Af%17%19(%18%3E!m%84%16)Y.U%0B%1F%0BI%22al%85CiP%0D%05%F9%0D%2C'g%85%15k%3C%90%18%40%90%07%07%20%23%0C%95%88%D2%E1%80C%19_%BC%20%A2%22f%05%97'J%A6%20%12%14%A3%08%0D%13%1BC%0E%0A%04%00%3B",Endurance:"data:image/gif,GIF89a%10%00%10%00%C4%18%00%FF%CDQ%FF%DBW%FF%C5M%FF%D5U%FF%9C%14%FF%8F%0E%FF%95%11%FF%83%09%FF%89%0B%FF%C0P%FF%DFW%FF%CCK%FF%D4S%FF%C4K%FF~%06%FF%DBY%FF%C5N%FF%D4T%FFy%04%FF%DAS%FF%BCH%FF%E0Y%FF%BDI%FF%A2%17%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00!%F9%04%01%00%00%18%00%2C%00%00%00%00%10%00%10%00%00%05%40%20%26%8EdibU%AA*'%F6%040%3C%B5X4%DC%03Cc%40%DF%2F%B4%86%60(%80%EC(%96%A4%D2%920%5D%9E%D0%E7%0EC%A8%12%A6%18%83%16%5B%E8b1%08%C4%F7p%F8b%1Cf%89%D9%1C%02%00%3B",Heart:"data:image/gif,GIF89a%10%00%10%00%E6s%00%EA%84N%E9v5%E9q.%E5a-%EB%93g%EC%9F%7F%CE%00%22%D2%11%24%EB%93h%E9s%2F%E9r.%EB%92g%EC%A0%7F%CC%00%1C%E7j.%E2i%60%D1%0D%24%DEC(%ED%98j%E0K%2B%E4hO%E6e-%F1%BA%A4%EF%B3%9B%CE%01%22%F0%B8%A2%D3%16%25%D8)'%E4%5C%2C%CE%03!%CE%00!%F2%BF%A9%E2T%2C%F3%C3%AA%DFG*%E4%5B-%DEA)%D6!%26%EA%85N%EC%A1%80%EB%85N%DDNX%ED%A3%81%DBAF%DBHY%DC%3A)%E9%91%95%E2b%5D%DFH*%EC%94h%F1%B6%AE%D4%18%23%E9o.%DA%3DW%F7%D9%D1%EA%94x%E4Z*%D5%22%40%DA%2F(%CD%00%1F%D4%18%25%DD%3E)%DD%3E(%E6d-%D3%14%24%E7q%40%E7k%2F%E8n.%E0I*%F1%BB%A5%DFF*%D1%0F%24%E3Y%2C%E8m%2F%E6c-%CF%05!%D6)D%D0%06%24%E2W6%F8%DD%D5%D0%08'%CF%08%25%D6%1F%26%EA%80J%DFE*%D1%0E%24%F4%CB%B0%D4%19%25%CC%00%1D%DA1(%F5%CC%C4%D4%1A%25%EE%A8%87%F2%C2%AC%E9r1%EB%9D%90%E3Z%2C%ED%A2%82%D959%D0%08%23%ED%99k%CD%00%1E%F2%BE%A6%FB%EA%E1%F9%DF%D7%D3%150%CC%00%1B%E9u4%DD%3D)%E4%5D-%E8%82i%D4%1D%3C%DD%3C)%EF%AA%85%E9r%2F%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00!%F9%04%01%00%00s%00%2C%00%00%00%00%10%00%10%00%00%07%AB%80s%82%83%84%85%86%87%87e9LM%83i5o%0D%84Q.Oh2%2Bs%2FZg6%2Cj%82%0D)VE%16%5D%17nf%1F%19!_%1D%82X%0Fq%05%0C%05a%5C'%B4*7P%1Es%3Bb%121%0B%04%04%08%04%0B%08d%14K%06s%063NS%26%00%D5%D5(A-%07%CE%18R%11%3Fk%01%E2%E2%5E8%3E%1A%83%5BF%03%02%0A%02%EF%0A4%23lG%83cp%60C%09r%FC%09%0E%20%3A%0A%F1%980%20%09%3F9B%DA%90%80%60%E8%0A%0C%0EJ*%0C%40%D2%A3%0A%A29YD%10%A1%B2%E1%E2%20%20%25%0Ex%1C9'%10%00%3B",Life:"data:image/gif,GIF89a%10%00%10%00%91%02%00%E8%E8%E8%BF%00%14%00%00%00%00%00%00!%F9%04%01%00%00%02%00%2C%00%00%00%00%10%00%10%00%00%02)%94%8F%A9%CB%06%FF%9A%0B%14H%01h%B02%D7%05%3DZ%C8a%DAy%96%1E%9A%1E%2B%FB9%E1%18%82%E3%B5%96L%8E%D7WS%00%00%3B",Level:"data:image/png,%89PNG%0D%0A%1A%0A%00%00%00%0DIHDR%00%00%00%10%00%00%00%10%08%06%00%00%00%1F%F3%FFa%00%00%00%04gAMA%00%00%AF%C87%05%8A%E9%00%00%00%19tEXtSoftware%00Adobe%20ImageReadyq%C9e%3C%00%00%02%0CIDAT8%CB%7D%92%3Dh%93q%10%C6%7Fo%12i%FA%11%95%88%12%C4%82%D2%8AN%8Ev%C9%E0T%9CD%C1I%5C%04%3B%88%9B%83d%EAP%04%0B%82%9BE%E9(%E2%A2%E8%A68J%A9%16%A4%8B%08%1D%AA%22%22%0Dbc%D3%E6%CD%FB%F1%FF%DF%9DC%92%26i%8A%07%0F7%3D%BF%7B%B8%BB%C0%CC%E8%D4%C5%7B%EF%ED%C6%A5I%3E%FC%A8%A1%DE%10QD%14%15%C5%7B%A5%3Cq%84%85g%AB%7CZ%B8%1At%3C9zJEP5%BCk%1B%7D%AB%8Bo%C9%7BC%BC%F4Z%FA%01%BB%D3%9C%B4L%3D%E6%5D%E0%1E%40%A6%2F%81%17%C2%A6%E3xa%08%97J%9F%C6%0F%0D%D3h%26%88%FC7%81%CC%FD%F9%B6%3C%7Bm%E2%1DG%0B%9F%C9%07uT%8D%D0%8DRugy%FA%E5%02%EA%C7%E6z%3DA%EF%12%E5%E3%A9%990%1Dz8r%F2%F6%18%23g02%98F%98%AB%A3%DBkl%AD%3Dn%0C%B1s%A7x%25Y%1C%00%F8%E5%13S%18%AF%99%7CT%B2%ECA%D4%D7%C0%EF%60%12b%12C%10%808%1A%AB%95%AA%A4%5C.%5D%B7%95%BE%1D%98%B8%0A%E3wK%96%3B%8C%F9-%90%08%93%B8%AD%10M~c%1A%92%3F%7D%AB%E4%B6%A9%0C%EC%40%7DZ%CE%8E%9E%C3%FC6%A6q%5BI%5B1%A6M%D4%FD%253r%0C%17R%1E%B8%82%AA%14-%93%C34%02M%DA%8A%BB%92%18%A4%01%E6%F0)%C5A%80(%98%07M%BB%D1%3B%D3%A5%9B%08K%F0%E9%3E%7F%A0%5Ej%E6%EA%98%B9%3D%D1%E3.%04E%D2%26.%A26%08p%F1%92l%AE%10%04%D9%FE%F8%D2%EE%E6%C8d%86%896~%D2%AC%B34%00%90%98%F9%C6%EA%FD%AA%C6%9B%90%CDc%E61i'A%09r%05%7C%1C%F0%F5%E5%9Bj%142%BF%EF%23m%3C%09f%C41W8%7F%B3t%A08%01%81a%3ED%D2%3A%E1%AFu%D6%9F%BF%ADF!%B3%D3%2Flq_%00%C0%F7%07%C1TZ%A7%E2c%CA%E2)%BA%04%E2%26%B58dI%84%F9%E9W%AD%07%EA%D4%3F%B7%D8%B3%C9%AF%B6%F6%86%00%00%00%00IEND%AEB%60%82",Money:"data:image/gif;base64,R0lGODlhEAAQANU/ACIGBdl/RV8bFUkOCooZGJtNGsBfIKo4IPvmrcpkE3PNKZUcHZk9D/SJILlGIyBeN9p5Efnah3nNKMpoNGOoMO+USb0/HfKhHtE0G/a9NvS2ImusQO9/HOSPUvGSGu+JRfKyZG6zJ0uLL3AWCmC6Jn3KJ3vGKYEbBe+GGYYaG/CJIFypJPOoHvOdJKEpH7k2HTZUHCNoLPSyH5QXDCx3IG60L/SCEfjRapNNILkpC2WZUu6EFtF0LXcSFHYyGgAAACH5BAEAAD8ALAAAAAAQABAAAAaMwJ9wSCwaj8hkEcDAYADKEeSGuHByp5mRAckgNK3G46GwjQZDQYGz8+hiD9KmcUGpZoPFQiAQhWgrc14RMgwCB4gLFAoSIgksEREaCQYvBA4OLhQSCgQ+BQkeEAUgBD8AAyk1JRIWExM4BQYgFVBDMCEmBgG8ARUfaEYAPQ4BHR0fFkqnBAE8tsvRSUEAOw%3D%3D",Star:"data:image/gif,GIF89a%10%00%10%00%E6F%00%A5%E3%FF%A5%E2%FF%0B%A4%FFC%C5%FFw%D7%FF%A3%E1%FF%0D%8B%D2H%C3%FF%08%95%EBo%CF%FF%05%9E%FF%12%A4%F3%0D%8A%D1%9E%E1%FF-%C6%FF%2C%C5%FF%40%CE%FF%9F%E1%FF%24%B6%FFo%CE%FF%12%97%DFB%C4%FF%0E%90%D9%0A%84%CDZ%B6%E6%11%91%D6%0F%9D%ECB%C9%FF%5B%BB%EC%0E%8F%D8%0B%8E%DB%5C%BC%EE%07%A0%FF%10%8F%D5%A9%E6%FF%0D%A4%FB2%B9%FF%0E%A4%FBG%C4%FF%04%9D%FF%12%95%DC%15%AE%FF2%B8%FF%08%A1%FF%24%B4%FF%9A%DD%FFC%CA%FF%5B%BA%EB%23%B4%FF%0B%8F%DC%16%AF%FFI%C3%FF%A7%E4%FFK%C2%FFH%C4%FF%AA%E7%FF%0A%85%CE%0E%95%E2%08%94%EAZ%B7%E8L%C3%FF%8C%E0%FF%23%B5%FF%0E%96%E3%9B%DE%FF1%CA%FFA%C3%FF%11%A3%F3%11%94%DB%A4%E1%FF%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00!%F9%04%01%00%00F%00%2C%00%00%00%00%10%00%10%00%00%07o%80F%82%83%84%85%86%83A%87%8A%10%8A%86%0F%3D%0E%8D%84%1B7.%92%83%04%22%04%87)%3E%07%26B%03%0D4%11%03%1563%122%820%13%05E%01%00%B2%01%01E%09%2C%855-%AFE%BD%40%3C%8A*%18%2F%1F%1C%3B%24%8DC!D%14(%19%0B%8D9%0C%1D%1A%16%06%3F%8A%02%17%1E%23F%2518%02%87%20%3A%85%08%2B%87'%87%0A%97%8A%81%00%3B",Strength:"data:image/gif,GIF89a%10%00%10%00%E6X%00%FA%A6%1A%F8%99%1D%FD%B2%15%F0L%23%ED%20%24%EF%3F%23%F5%81%20%EFE%23%F7%93%1E%F5t%1E%F2j!%EB%5D%20%F0b%1E%F2Z%20%E6O%20%F1d!%ED_%20%FD%B3%12%DE*!%D9*%20%D2%1D%1F%D0%17%1F%CE%17%1E%EE9%23%DD%19!%F6%7B%1C%E7T%20%E2'%22%E9W%20%F4s%1B%EEV!%E7L!%F5z%20%FD%B8%12%F6%7C%1C%EEf%1F%F4f%1F%E7%3B%20%F2z%1E%F4q%20%D9%22!%F1U%23%DB%19!%F7%8B%1E%F8%96%1C%FC%B0%16%C8%16%1D%CB%17%1D%EB(%23%F1%5C%22%F7%8C%1D%E2%1A%22%F9%9A%17%E5%3E!%D8%2B%1F%E9%3D%22%DA%1E!%E7J!%EBT%22%F5t%1D%F1S%22%E1E%20%EFn%20%F4o%1E%F3y%20%EF%3B%23%EEa!%EBS!%EDU!%F1g!%EBU!%F2a%1D%F1W%23%EE.%23%F5%7C%20%EC%1C%24%EA%22%23%FB%A5%16%F0G%22%F2k!%E44%22%E9F%20%F2a%22%F0N%23%E1%1D%22%F3l!%F1h!%F7%8D%1F%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00!%F9%04%01%00%00X%00%2C%00%00%00%00%10%00%10%00%00%07%88%80X%82%83%84%85%86%83K%87%87G%1D%8A%85%0C2%8E%84%25%2B%0F%82Q%92%23R%1E%82%10%26%8EVHO%82FU%0B%86(X1%3F)%3E%1CES%0A%86%1AX%074%0D%03%3C%07%09%03%0E%84%3D%1FX7%19%11%22%3BM!%179%845%05%3A%05%24%02%D2%02-NP%84%1B%04%04I%2C%00%DE%DEAT%84%180'%08%01%E8%E8%08L%863%40W%F0%F1D*%86%2F%12BJ%06%06%20C8%8E%16%14%26%D8%A8%E0%A2P%20%00%3B",Popup:"data:image/gif;base64,R0lGODlhCgAKAKIAAN0xMeuHh50aGskhIf///////zkKCjkKCiH5BAEAAAUALAAAAAAKAAoAAAMmWFrTvgOQScZigw7BxQiaMH1EkG0VaEZoAJgCU4hlFis0dc9dtyQAOw%3D%3D",Close:"data:image/gif;base64,R0lGODlhDgAOAMQYAG9ZAOC0AOG0AHFbANasAOG1AHJcAOO2AIxwAIpuAOK2AHBaAOG2ADUqANOpADMoANetAHJdAIxxAOK3AIpwAOK1ADIpAHJbAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAABgALAAAAAAOAA4AQAVcICYWYomRpjCYonGUAVBeq7gEJZHgpZIQJYcFM0AFVg+HqSIrAVCYiaS0UBSaGASPgBCkEECMr2QIBCIlygsjwDp5sJpoAGcbnFiDFwNpYAAMIgcyDWEieyaBIiEAOw%3D%3D"};if(localStorage.GBH_AutoHeal===null){localStorage.GBH_AutoHeal="false"}if(localStorage.GBH_AutoHealVal===null||typeof localStorage.GBH_AutoHealVal=="undefined"){localStorage.GBH_AutoHealVal=30}if(localStorage.GBH_AutoHealVal>100){localStorage.GBH_AutoHealVal=30;GBH_Misconfig_notice_Heal=GBH_CreatePopupWin("GBH_Misconfig_notice_Heal","center",200,500,200,21);GBH_Misconfig_notice_Heal.innerHTML='<div style="clear:both; height:50px;" id="GBH_ConfigPopupHeader"><div style="text-align:center; float:left; width:485px;" id="GBH_ConfigPopupTitle"><div style="font-stretch:condensed; font-weight:bold; color:#F00; font-size:14px">CONFIGURATION ERROR FOUND</div><div style="font-size:11px">Gangster Battle! Enhancer v'+GBH_ScriptDetails.version+'</div></div><img id="GBH_MisconfigCloseIcon" src="'+GBH_Icons.Close+'" alt="Hide popup" width="14" height="14" style="cursor:pointer"></div><div>';GBH_Misconfig_notice_Heal.innerHTML+='<div style="width:100%;height:75px;">The Auto-Heal system is now using percentage of your max life instead of life points to trigger auto heal. The value stored on your system was above 100 and has been set to 30%. To change this value, please open the Settings Window.</div>';GBH_Misconfig_notice_Heal.innerHTML+='<div style="float:right; margin-right:5px"><input style="font-size:10px" type="button" value="Cancel" id="GBH_MisconfigClose"></div></div>';GBH_Misconfig_notice_Heal=document.getElementById("app16510419418_container").appendChild(GBH_Misconfig_notice_Heal);GBH_MisconfigCloseStyle=GBH_ButtonStyle("GBH_MisconfigClose");GBH_MisconfigCloseEvent=document.getElementById("GBH_MisconfigClose").addEventListener("click",clos=function(){GBH_MisconfigClose()},false);GBH_MisconfigCloseIconEvent=document.getElementById("GBH_MisconfigCloseIcon").addEventListener("click",clos=function(){GBH_MisconfigClose()},false);function GBH_MisconfigClose(){document.getElementById("app16510419418_container").removeChild(GBH_Misconfig_notice_Heal)}}if(localStorage.GBH_AutoHealRef===null){localStorage.GBH_AutoHealRef="false"}if(localStorage.GBH_AutoHealRefVal===null||typeof localStorage.GBH_AutoHealRefVal=="undefined"){localStorage.GBH_AutoHealRefVal=10}if(localStorage.GBH_AutoBank==null){localStorage.GBH_AutoBank="false"}if(localStorage.GBH_AutoBankVal==null||typeof localStorage.GBH_AutoBankVal=="undefined"){localStorage.GBH_AutoBankVal=1e3}if(localStorage.GBH_AttackNewWin==null){localStorage.GBH_AttackNewWin="false"}try{var cT=setInterval(GBH_Timer,1e3);var cR=Launch_initRewriting(0)}catch(err){setTimeout("window.location.reload()",1e4)}var GBH_isErrorLoading=document.getElementsByName("try_again_button");if(GBH_isErrorLoading.length>0){console.log("Problem encountered while loading GB. Reloading page.");window.location.reload()}document.getElementById("app16510419418_webring").innerHTML="You are using Gangster Battle! Enhancer v"+GBH_ScriptDetails.version+". <a href='"+GBH_ScriptDetails.shURL+"' target='_blank'><b>Check updates</b></a>. ";document.getElementById("app16510419418_webring").style.color="#000000";if(localStorage.GBH_AutoHeal==null||localStorage.GBH_AutoHeal=="false"){AHChecked=""}else{AHChecked='checked="checked"'}if(localStorage.GBH_AutoHealVal==null){AHVal=GBH_LifeICU50}else{AHVal=localStorage.GBH_AutoHealVal}if(localStorage.GBH_AutoHealRef==null||localStorage.GBH_AutoHealRef=="false"){AHRChecked=""}else{AHRChecked='checked="checked"'}if(localStorage.GBH_AutoHealRefVal==null){AHRVal=5}else{AHRVal=localStorage.GBH_AutoHealRefVal}if(localStorage.GBH_AutoBank==null||localStorage.GBH_AutoBank=="false"){ABChecked=""}else{ABChecked='checked="checked"'}if(localStorage.GBH_AutoBankVal==null){ABVal=GBH_LifeICU50}else{ABVal=localStorage.GBH_AutoBankVal}if(localStorage.GBH_AttackNewWin==null||localStorage.GBH_AttackNewWin=="false"){ANWChecked=""}else{ANWChecked='checked="checked"'}var GBH_ConfigWin=GBH_CreatePopupWin("GBH_ConfigPopup","left",200,500,200,20);GBH_ConfigWin.style.display="none";GBH_ConfigWin.innerHTML='<div style="clear:both; height:50px;" id="GBH_ConfigPopupHeader"><div style="text-align:center; float:left; width:485px;" id="GBH_ConfigPopupTitle"><div style="font-stretch:condensed; font-weight:bold; color:#F00; font-size:14px">SCRIPT SETTINGS</div><div style="font-size:11px">Gangster Battle! Enhancer v'+GBH_ScriptDetails.version+'</div></div><img id="GBH_ConfigPopupCloseIcon" src="'+GBH_Icons.Close+'" alt="Hide popup" width="14" height="14" style="cursor:pointer"></div><div><form action="" method="get">';var vperc,dropvals;for(vperc=20;vperc<=100;vperc=vperc+5){dropvals+='<option value="'+vperc+'"';if(vperc==AHVal){dropvals+=' selected="selected"'}curlifept=Math.ceil(GBH_UserParam["Life_Max"]*vperc/100);dropvals+=">"+vperc+"% ("+curlifept+")</option>"}GBH_ConfigWin.innerHTML+='<div style="width:100%;height:25px;"><input type="checkbox" style="height:13px" name="AHe" id="GBH_ConfigPopup_AutoHeal" value="On" '+AHChecked+'>Auto heal when life is below <select name="GBH_ConfigPopup_AutoHealVal" id="GBH_ConfigPopup_AutoHealVal" style="height:18px; font-size:10px">'+dropvals+"</select> (Recommended: 30%)</div>";GBH_ConfigWin.innerHTML+='<div style="width:100%;height:25px;"><input type="checkbox" style="height:13px" name="AHeR" id="GBH_ConfigPopup_AutoHealRefresh" value="On" '+AHRChecked+'>Refresh Hospital page every <input id="GBH_ConfigPopup_AutoHealRefVal" name="textfield" style="height:13px; font-size:10px" type="text" size="2" value="'+AHRVal+'"> seconds when Auto-Heal is activated.</div>';GBH_ConfigWin.innerHTML+='<div style="width:100%;height:25px;"><input type="checkbox" style="height:13px" name="ABa" id="GBH_ConfigPopup_AutoBank" value="On" '+ABChecked+'>Auto bank when cash is above <input id="GBH_ConfigPopup_AutoBankVal" name="GBH_ConfigPopup_AutoBankVal" style="height:13px; font-size:10px" type="text" size="16" value="'+ABVal+'"> (Minimum: $1,000)</div>';GBH_ConfigWin.innerHTML+='<div style="width:100%;height:25px;"><input type="checkbox" style="height:13px" name="ANW" id="GBH_ConfigPopup_AttackNewWin" value="On" '+ANWChecked+">Attack in new window or tab (from Declare War and Target List pages).</div>";GBH_ConfigWin.innerHTML+='<div style="float:right; margin-right:5px"><input id="GBH_ConfigPopupSave" type="button" value="Save config"><input style="font-size:10px" type="button" value="Cancel" id="GBH_ConfigPopupCancel"></div> </form></div>';GBH_ConfigWin=document.getElementById("app16510419418_container").appendChild(GBH_ConfigWin);var GBH_ConfigActivate=document.createElement("a");GBH_ConfigActivate.innerHTML="{Settings}";GBH_ConfigActivate.setAttribute("href","#");GBH_ConfigActivate.addEventListener("click",GBH_ConfigShow,false);GBH_ConfigActivate=document.getElementById("app16510419418_webring").appendChild(GBH_ConfigActivate);GBH_ConfigCloseIcon=document.getElementById("GBH_ConfigPopupCloseIcon").addEventListener("click",clos=function(){GBH_ConfigHide("cancel")},false);GBH_ConfigCancel=document.getElementById("GBH_ConfigPopupCancel").addEventListener("click",canc=function(){GBH_ConfigHide("cancel")},false);GBH_ConfigSave=document.getElementById("GBH_ConfigPopupSave").addEventListener("click",sav=function(){GBH_ConfigHide("save")},false);GBH_ConfigPopupSaveStyle=GBH_ButtonStyle("GBH_ConfigPopupSave");GBH_ConfigPopupCancelStyle=GBH_ButtonStyle("GBH_ConfigPopupCancel");GBH_LifePercent=Math.ceil(parseInt(GBH_UserParam["Life_Current"])/parseInt(GBH_UserParam["Life_Max"])*100);if(localStorage.GBH_AutoHeal=="true"&&GBH_LifePercent<=parseInt(localStorage.GBH_AutoHealVal)){GBH_AutoHeal()}if(localStorage.GBH_AutoBank=="true"&&parseInt(GBH_CashToInt(GBH_UserParam["Cash_InHands"]))>parseInt(localStorage.GBH_AutoBankVal)){GBH_AutoBank()}switch(GBH_CurrentPageName){case"main":var GBH_FamilyPosts=xpath("//div[@style='margin-top: 5px; margin-left: 5px;']");for(i=0;i<GBH_FamilyPosts.length;i++){GBH_FamilyPosts[i].innerHTML=GBH_Linkify(GBH_FamilyPosts[i].innerHTML)}break;case"hospital":if(localStorage.GBH_AutoHealRef=="true"){GBH_delayAction("hospital")}break;case"bulletin":var GBH_FamilyPosts=xpath("//div[@class='postContentText']");for(i=0;i<GBH_FamilyPosts.length;i++){GBH_FamilyPosts[i].innerHTML=GBH_Linkify(GBH_FamilyPosts[i].innerHTML)}break;case"targets":if(localStorage.GBH_AttackNewWin=="true"){GBH_FormToNewWin()}var GBH_TList=xpath("//div[@class='target']");if(GBH_TList!=null){function GBH_TSortBy(a){function e(a,b){return d(a)-d(b)}function d(b){if(a=="family"){return b.innerHTML.match(/<b>Family Size<\/b>: ([0-9]*)/)[1]}else if(a=="level"){return b.innerHTML.match(/<b>Level<\/b>: ([0-9]*)/i)[1]}}var b=xpath("//div[@class='target']");var c=new Array;for(var f=0;f<b.length;f++){c[f]=b[f].cloneNode(true)}c.sort(e);for(var f=0;f<b.length;f++){b[f].parentNode.replaceChild(c[f],b[f])}}var GBH_TAddPrefs=document.createElement("div");GBH_TAddPrefs.setAttribute("id","GBH_TAddPrefs");GBH_TAddPrefs.innerHTML="Sort targets by: ";GBH_TAddPrefs.style.padding="3px";GBH_TAddPrefs.style.color="#FFFFFF";GBH_TAddPrefs=document.getElementById("app16510419418_content").insertBefore(GBH_TAddPrefs,document.getElementById("app16510419418_content").childNodes[5]);var GBH_TSortByFamily=document.createElement("a");GBH_TSortByFamily.setAttribute("id","GBH_TSortByFamily");GBH_TSortByFamily.setAttribute("href","#");GBH_TSortByFamily.innerHTML="Family size";GBH_TSortByFamily.addEventListener("click",fam=function(){GBH_TSortBy("family")},false);var GBH_TSortByLevel=document.createElement("a");GBH_TSortByLevel.setAttribute("id","GBH_TSortByLevel");GBH_TSortByLevel.setAttribute("href","#");GBH_TSortByLevel.innerHTML="Target level";GBH_TSortByLevel.addEventListener("click",lev=function(){GBH_TSortBy("level")},false);var separator=document.createElement("span");separator.innerHTML=" | ";GBH_TSortByFamily=GBH_TAddPrefs.appendChild(GBH_TSortByFamily);GBH_TSeparator=GBH_TAddPrefs.appendChild(separator);GBH_TSortByLevel=GBH_TAddPrefs.appendChild(GBH_TSortByLevel)}break;case"war":if(localStorage.GBH_AttackNewWin=="true"){GBH_FormToNewWin()}var GBH_WarTargetList=xpath("//div[@class='war']");var GBH_WarTitleDiv=xpath("//div[@class='warCategory']");var GBH_WarTitle=GBH_WarTitleDiv[0].parentNode;if(GBH_WarTargetList!=null){function GBH_WarSortBy(a){function e(a,b){return d(a)-d(b)}function d(b){if(a=="family"){return b.innerHTML.match(/Family Size: ([0-9]*)/)[1]}else if(a=="level"){return b.innerHTML.match(/Level ([0-9]*) ([a-zA-Z]*)/i)[1]}}var b=xpath("//div[@class='war']");var c=new Array;for(var f=0;f<b.length;f++){c[f]=b[f].cloneNode(true)}c.sort(e);for(var f=0;f<b.length;f++){b[f].parentNode.replaceChild(c[f],b[f])}}var GBH_WarAddPrefs=document.createElement("div");GBH_WarAddPrefs.setAttribute("id","GBH_WarAddPrefs");GBH_WarAddPrefs.innerHTML="Sort targets by: ";GBH_WarAddPrefs.style.padding="10px";GBH_WarAddPrefs.style.color="#FFFFFF";GBH_WarAddPrefsCode=GBH_WarTitle.appendChild(GBH_WarAddPrefs);var GBH_WarLinkSortByFamily=document.createElement("a");GBH_WarLinkSortByFamily.setAttribute("id","GBH_WarLinkSortByFamily");GBH_WarLinkSortByFamily.setAttribute("href","#");GBH_WarLinkSortByFamily.innerHTML="Family size";GBH_WarLinkSortByFamily.addEventListener("click",fam=function(){GBH_WarSortBy("family")},false);var GBH_WarLinkSortByLevel=document.createElement("a");GBH_WarLinkSortByLevel.setAttribute("id","GBH_WarLinkSortByLevel");GBH_WarLinkSortByLevel.setAttribute("href","#");GBH_WarLinkSortByLevel.innerHTML="Target level";GBH_WarLinkSortByLevel.addEventListener("click",lev=function(){GBH_WarSortBy("level")},false);var separator=document.createElement("span");separator.innerHTML=" | ";var separator2=document.createElement("span");separator2.innerHTML=" or access your personal ";var GBH_WarLinkToTarget=document.createElement("a");GBH_WarLinkToTarget.setAttribute("id","GBH_WarLinkToTarget");GBH_WarLinkToTarget.setAttribute("href",GBH_Protocol+"//apps.facebook.com/gangsterbattle/targets.php");GBH_WarLinkToTarget.innerHTML="Target list";GBH_WarLinkSortByFamily=GBH_WarAddPrefsCode.appendChild(GBH_WarLinkSortByFamily);GBH_WarLinkSeparator=GBH_WarAddPrefsCode.appendChild(separator);GBH_WarLinkSortByLevel=GBH_WarAddPrefsCode.appendChild(GBH_WarLinkSortByLevel);GBH_WarLinkSeparator2=GBH_WarAddPrefsCode.appendChild(separator2);GBH_WarLinkToTarget=GBH_WarAddPrefsCode.appendChild(GBH_WarLinkToTarget)}else{var GBH_WarNoTarget=document.createElement("div");GBH_WarNoTarget.style.textAlign="center";GBH_WarNoTarget.innerHTML="<h1>No target available.</h1> <a href='targets.php'>Click here to open your target list</a>";GBH_WarTitle.appendChild(GBH_WarNoTarget)}break}var userscriptUpdater=function(){var css="div.greasemonkey_updater { font-size: 12px; background: #FFC; padding: 10px 15px; border-width: 1px 0; border-style: solid; border-color: #F90; margin: 0 0 30px; } "+"div.greasemonkey_updater h1 { font-size: 16px !important; margin: 0 0 5px 0; font-weight: bold; } "+"div.greasemonkey_updater .greasemonkey_updater_link_to_hide { float: right; text-align: right; width: 125px; font-size: 11px; font-weight: normal; } "+"div.greasemonkey_updater .greasemonkey_updater_link_to_hide a { color: #F00; } "+"div.greasemonkey_updater p { margin: 0 0 15px 0; font-size: 12px !important; line-height: 140%; color: #000; }";var config={checkInterval:604800,injectInto:document.getElementsByTagName("body")[0],updaterCss:css};var lastCheck=localStorage.getItem("lastCheck",0);var lastVersion=localStorage.getItem("lastVersion",0);var currentTime=Math.round((new Date).getTime()/1e3);var meta={name:/@name\s+(.*)[\r\n]/,version:/@version\s+([.\d]+)[\r\n]/,change:/@change\s+(.*)[\r\n]/,depricated:/@depricated\s+(.*)[\r\n]/};var updater;var checkRemoteUserscript=function(){GM_xmlhttpRequest({method:"GET",url:"http://userscripts.org/scripts/source/"+config.scriptId+".meta.js",headers:{"User-agent":"Mozilla/4.0 (compatible) Greasemonkey",Accept:"text/plain"},onload:function(a){localStorage.setItem("lastCheck",currentTime);for(m in meta){meta[m]=meta[m].exec(a.responseText)?meta[m].exec(a.responseText)[1]:null}if(isNewer(meta.version,config.currentVersion)&&isNewer(meta.version,lastVersion)){GM_addStyle(config.updaterCss);updater=build()}}})};var isNewer=function(o,p){/(\d+)\.(\d+)(?:\.(\d+))?\|(\d+)\.(\d+)(?:\.(\d+))?/.exec(o+"|"+p);with(RegExp){if(parseInt($4||"0")<parseInt($1||"0"))return true;if(parseInt($5||"0")<parseInt($2||"0"))return true;if(parseInt($6||"0")<parseInt($3||"0"))return true}return false};var skipUpdate=function(a){a.preventDefault();localStorage.setItem("lastVersion",meta.version);config.injectInto.removeChild(updater)};var initialize=function(a){for(prop in a){if(a[prop]){config[prop]=a[prop]}}if(currentTime>lastCheck+config.checkInterval){checkRemoteUserscript()}};var build=function(){var a=document.createElement("div");a.className="greasemonkey_updater";var b=document.createElement("div");b.className="greasemonkey_updater_link_to_hide";if(meta.depricated==null){var c=document.createElement("a");c.href="";c.addEventListener("click",skipUpdate,false);var d=document.createElement("span");d.appendChild(document.createTextNode("Skip until next Update!"));c.appendChild(d);b.appendChild(c)}var e=document.createElement("h1");e.appendChild(b);e.appendChild(document.createTextNode(meta.depricated==null?"Greasemonkey UserScript Update Notification!":"Depricated Greasemonkey UserScript!"));a.appendChild(e);var f=document.createElement("p");if(meta.depricated==null){var g='There is an update available for <a href="http://userscripts.org/scripts/show/'+config.scriptId+'">'+meta.name+"</a>.<br>";g+=meta.change?"<br>"+meta.change+"<br><br>":"";g+="You are currently running version <b>"+config.currentVersion+"</b>, the newest version on userscripts.org is <b>"+meta.version+'</b>!<br><a href="http://userscripts.org/scripts/source/'+config.scriptId+'.user.js">Update to Version '+meta.version+"</a>"}else{var g='The userscript <a href="http://userscripts.org/scripts/show/'+config.scriptId+'">'+meta.name+"</a> is now depricated.<br>";g+=meta.depricated&&meta.depricated!="true"?"<br>"+meta.depricated+"<br><br>":"";g+="Please remove your script! Thanks for using it."}f.innerHTML=g;a.appendChild(f);var h=config.injectInto&&config.injectInto.firstChild;h?config.injectInto.insertBefore(a,h):config.injectInto.appendChild(a);return a};return{init:initialize}}();userscriptUpdater.init({scriptId:GBH_ScriptDetails.usoID,currentVersion:GBH_ScriptDetails.version,injectInto:document.getElementById("app16510419418_webring"),checkInterval:86400})
// ==UserScript==
// @name			big emo ◄Putri Dhelika Ahmad►
// @author			◄Putri Dhelika Ahmad►
// @description		Big emo by ◄Putri Dhelika Ahmad►
// @version         2.1
// @versionnumber	3.5
// @include         http://*.facebook.com/*
// @include         https://*.facebook.com/*
// @match           http://*.facebook.com/*
// @match           https://*.facebook.com/*
// ==/UserScript==

(function(d){

    const DEBUG = true;

    const script_id = 125562,
          script_version = '0.6';

    /* replaced elements class name */
    const gm_class = ' gm_smileys_replaced';

    /* smileys */
    var smiley = {
        ':-)'   : '1px',       ':)'     : '1px',
        ':-('   : '-16px',     ':('     : '-16px',
        ':-P'   : '-31px',     ':P'     : '-31px',
                               ':-p'    : '-31px',
                               ':p '    : '-31px',
        ':-D'   : '-47px',     ':D'     : '-47px',
        ':-O'   : '-64px',     ':O '    : '-64px',
                               ':-o'    : '-64px',
                               ':o '    : '-64px',
        ';-)'   : '-79px',     ';)'     : '-79px',
        '8-)'   : '-96px',     ' 8)'    : '-96px',
        '8-\|'  : '-111px',    '8\|'    : '-111px',
        '>:-('  : '-128px',    '>:('    : '-128px',
        ':-/'   : '-143px',    ':/'     : '-143px',
        ':\'('  : '-160px',    ':Â´('    : '-160px',
                               ':,('    : '-160px',
        '3:-)'  : '-176px',    '3:)'    : '-176px',
                               ']:->'   : '-176px',
        'O:-)'  : '-192px',    'O:)'    : '-192px',
                               ' o:-)'  : '-192px',
                               ' o:)'   : '-192px',
        ':-*'   : '-208px',    ':*'     : '-208px',
        '<3'    : '-224px',    '♥'      : '-224px',
                               '*IN LOVE*' : '-224px',
        '^_^'   : '-240px',    '^^'     : '-240px',
        '-_-'   : '-256px',
        'o.O'   : '-272px',    'O.o'    : '-272px',
                               'o.o'    : '-272px',
        '>:-O'  : '-288px',    '>:o'  : '-288px',
        ':v'    : '-304px',
        ' :3'   : '-320px',
        '(Y)'   : '-336px',    '(y)'    : '-336px',

        ':putnam:' : 'putnam',
        '<(")'     : 'penguin', '<(\'\')' : 'penguin',
        '(^^^)'    : 'shark',
        ':|]'      : 'robot',
        ':42:'     : '42',
    };


    /* detect https */
    var smileys_url = 'http://static.ak.fbcdn.net/images';

    if (location.protocol == 'https:') {
        smileys_url = 'https://s-static.ak.fbcdn.net/images';
    }


    /* RexExp all smileys */
    var smileys_all = new Array();

    for (smile in smiley) {
        smileys_all.push(
            smile.replace(/[\)\(\^\*\.\:\|]/g, '\\$&').replace(/\u0000/g,
            '\\0')
        );
    }

    const smileys_regex = new RegExp(smileys_all.join("|"), 'g');

    delete smileys_all;



    /* Log function */
    function log(text)
    {
        if (DEBUG === true && typeof GM_log === 'function' && text != null) {
            GM_log(text);
        }
        return false;
    }


    /* Find elements */
    function g(id, parent)
    {
        if(id && typeof id === 'string') {
            var p = parent||d;
            id = p.querySelectorAll(id);
        }
        return id||null;
    }


    /* Replace smileys */
    function replace(elements)
    {
        var count =  elements.length;

        if (count <= 0
            || count == d.getElementsByClassName('gm_smileys_replaced').length
        ) {
            return false;
        }

        var el, class_name, data, matches, childs, child, childValue, smile,
            smile_orig, alt, html, replace_img;

        for(i = 0; i < count; i++) {
            el = elements[i];

            class_name = el.className;

            /* is replaced? */
            if (!el
                || class_name.indexOf(gm_class) >= 0
                || class_name.indexOf('uiStreamPassive') >= 0
                || class_name.indexOf('GenericStory_Report') >= 0
            ) {
                continue;
            }

            /* add class */
            el.className += gm_class;

            data = el.innerHTML;
            /* replace tags */
            data = data.replace('&gt;', '>', 'g').replace('&lt;', '<', 'g');

            /* check smileys */
            matches = data.match(smileys_regex);

            data = null;

            if (!matches) continue;

            childs = el.childNodes;

            for(var k = 0; k < childs.length; k++) {

                child = childs[k];

                /* only text nodes */
                if (child.nodeName != '#text') continue;

                /* get value */
                data = child.nodeValue;

                var replacements = new Array();

                /* create node */
                html = d.createElement('span');

                for(j = 0; j < matches.length; j++) {
                    smile = matches[j];

                    if (data.indexOf(smile) >= 0) {

                        smile_orig = smile;

                        alt = smile_orig;
                        alt = alt.replace('"', '&quot;');
                        alt = alt.replace('♥', '&lt;3');

                        if (smiley[smile_orig].substr(-2) == 'px') {

                            replace_img = '<img'
                                        + ' class="emote_img gm_smiley smiley"'
                                        + ' src="'+ smileys_url + '/blank.gif"'
                                        + ' style="background-position: ' + smiley[smile_orig] + ' 0;"'
                                        + ' title="' + alt + '"'
                                        + ' alt="' + alt + '"'
                                        + '> ';

                            /* special smileys */
                            if (smile == ':-D'
                                || smile == ':D'
                                || smile == 'xD'
                            ) {
                                smile = new RegExp('[:|x]-?D+', 'gi');
                            } else if (smile == ':-)' || smile == ':)') {
                                smile = new RegExp(':-?[\)]+', '');
                            } else if (smile == ';-)' || smile == ';)') {
                                smile = new RegExp(';-?[\)]+', 'g');
                            } else if (smile == ':-(' || smile == ':(') {
                                smile = new RegExp(':-?[\(]+', '');
                            } else if (smile == ':/') {
                                smile = new RegExp(':-?[\/]+[ \z]?', 'g');
                            } else if (new RegExp('^:-?O').test(smile)) {
                                smile = new RegExp('[ \s]?:-?O[\s\z]?', 'gi');
                            }

                            data = data.replace(smile, '%' + j + '%', 'gi');
                            replacements[j] = replace_img;

                        } else {
                            /* extra smileys */
                            data = data.replace(smile_orig, '%' + j + '%', 'gi');
                            replacements[j] = '<img'
                                            + ' class="gm_smiley"'
                                            + ' src="' + smileys_url + '/emote/'
                                                       + smiley[smile_orig] + '.gif"'
                                            + ' title="' + alt + '"'
                                            + ' alt="' + alt + '"'
                                            + '> ';
                        }
                    }
                }

                /* replace tags back */
                data = data.replace('>', '&gt;', 'g').replace('<', '&lt;', 'g');

                /* replace smileys */
                for(r = 0; r < replacements.length; r++) {
                    data = data.replace(
                        new RegExp('%' + r + '%', 'g'),
                        replacements[r]
                    );
                }
                replacements = null;

                html.innerHTML = data;
                el.replaceChild(html, child);

                /* Data reset */
                data = null;
            }
        }

        delete elements, count, el, class_name, matches, childs, child,
               childValue, smile, data, alt, html, replace_img, replacements;

        return false;
    }


    function lookForSmileys(parentNode)
    {
        /* get location (after #) */
        var loc = location.hash;

        if (loc.length == 0 || !new RegExp('#!/|sk=|ref=|php').test(loc)) {
            /* get pathname (after /) */
            loc = location.pathname.replace(new RegExp('^[/]+', ''), '');

            /* if not pathname get search (after ?) */
            if (loc.length == 0) {
                loc = location.search;
            }
        }

        if (location.hostname !== 'www.facebook.com' || loc == 'ai.php') {
            return;
        }

        parentNode = parentNode||d;

//         log(loc);

        /* photo */
        if (new RegExp('photo.php').test(loc)) {
            replace(g(
                '#photocaption, div.commentContent>span',
                parentNode
            ));
        } else
        /* notes */
        if (new RegExp('note.php').test(loc)) {
            replace(g(
                'div.notesBlogText p, div.commentContent>span',
                d.getElementById('contentCol')
            ));
        } else {
            /* statuses */
            replace(g(
                'div.translationEligibleUserMessage, span.messageBody, .UIStory_Message, div.commentContent>span',
                parentNode
            ));
        }

        delete loc, parentNode;


        /* create promo box */
        if (!d.getElementById('pagelet_replacesmileysbox')) {

            if (!d.getElementById('home_stream')) return false;

            if (col = d.getElementById('rightCol')) {

                var html;

                html = '<div class="UIImageBlock mbs phs clearfix">'
                     +   '<img alt=""'
                     +       ' style="background-position: -112px 0px;"'
                     +       ' src="' + smileys_url + '/blank.gif"'
                     +       ' class="emote_img UIImageBlock_Image smiley"'
                     +   '>'

                     +   '<div class="UIImageBlock_Content UIImageBlock_ICON_Content">'

                     +     '<div class="fcb">'
                     +       '<b>Facebook smileys</b> '
                     +       '<small>v' + script_version + '</small>'
                     +     '</div>'

                     +     '<div class="fsm fwn fcg">'
                     +       '<a href="#" id="open-list">Smiley list</a>'
                     +       ' &middot; '
                     +       '<a href="/admir.zuzic">'
                     +         'Author'
                     +       '</a>'
                     +     '</div>'

                     +   '</div>'

                     + '</div>';

                var box = document.createElement('div');
                box.setAttribute('id', 'pagelet_replacesmileysbox');
                box.innerHTML = html;
                col.appendChild(box);

                d.getElementById('open-list').addEventListener(
                    'click',
                    openWindow,
                    false
                );

                delete col, html, box;
            }
        }

        return false;
    }


    function openWindow(e)
    {
        e.preventDefault();
    	return window.open(
            'http://imgim.com/793inciw8628775.jpg',
            null,
            'width=450,height=750,left=25,scrollbars=yes',
            true
        );
    }


    function addStyle(css)
    {
    	if (typeof GM_addStyle !== 'undefined') { return GM_addStyle(css); }
    	else if (head = d.getElementsByTagName('head')[0]) {
    		var style = d.createElement('style');
    		try { style.innerHTML = css; }
    		catch(x) { style.innerText = css; }
    		style.type = 'text/css';
    		head.appendChild(style);
    	}

        delete head, style, css;

        return false;
    }


    function cssStyles()
    {
        /* box */
        addStyle(
         ''
        +' .gm_smiley{margin:0 1px;position:relative;top:-1px;vertical-align:top;}'
        +' .gm_smiley.smiley{background:url('+ smileys_url +'/emote/emote.gif) no-repeat scroll top center;}'
        +' #pagelet_replacesmileysbox{line-height:1.3;margin:15px 0;}'
        +' #pagelet_replacesmileysbox img.UIImageBlock_Image{margin-top:2px;}'
        );

        return false;
    }


    /* Start script */
    var t;
    var content = d.getElementById('content');

    cssStyles();
    lookForSmileys(content);

    function afterDomNodeInserted(e)
    {
        var target = e.target;

        if ((target.nodeName == 'LI')
            || (target.nodeName == 'UL')
            || (target.nodeName == 'DIV')
        ) {
            lookForSmileys(target);
        }

        delete e,target;

        return false;
    }


    function photoBoxUpdated(e)
    {
        target = e.relatedNode;

        if (target.id == 'fbPhotoSnowboxFeedback') {
            replace(g(
                '#fbPhotoSnowboxCaption, span.commentBody',
                d.getElementById('fbPhotoSnowbox')
            ));
        }

    }


    if (content) {
        window.setTimeout(function () {
            d.addEventListener(
                'DOMNodeInserted',
                afterDomNodeInserted,
                false
            );

            if (PhotoBox = d.getElementById('fbPhotoSnowbox')) {
                PhotoBox.addEventListener(
                    'DOMNodeInserted',
                    photoBoxUpdated,
                    false
                );
            }

        }, 2000);
    }

    /* AutoUpdater */
    if (typeof autoUpdate === 'function') {
        autoUpdate (script_id, script_version);
    }

})(document);


// List of emoticons
// :) :( :D >:( -_- :/ o.O :p :'( >:O :v 3:) :o :3 ;) :* :|] 8) <3 :putnam: 8| ^_^ (^^^) O:) <(") :42:

	var version, HttpsOn, ImagesURL, ResourcesURL, storage, emotsInfo, spemotsInfo, headTag, styleTag, ArrowStyleUp, ArrowStyleDown, fEmotBarDom, fEmotsListDom, fArrow;

	version = 0.5

	HttpsOn = window.location.href.match('https://')?true:false;
	ImagesURL = HttpsOn?'http://s-static.ak.fbcdn.net/images/':'http://static.ak.fbcdn.net/images/';
    ProfileImgURL = HttpsOn?'http://profile.ak.fbcdn.net/hprofile-ak-snc4/':'http://profile.ak.fbcdn.net/hprofile-ak-snc4/';
	ResourcesURL = HttpsOn?'http://s-static.ak.fbcdn.net/rsrc.php/':'http://static.ak.fbcdn.net/rsrc.php/';


/* START:  */

	storage = 'none';

	try {
		if (typeof GM_getValue === 'function' && typeof GM_setValue === 'function') {
			GM_setValue('testkey', 'testvalue');
			if (GM_getValue('testkey', false) === 'testvalue') { storage='greasemonkey'; }
		}
	} catch(x) {}
	if (storage=='none' && typeof localStorage == 'object') { storage='localstorage'; }

	function setValue(key, value) {
		switch (storage) {
			case 'greasemonkey':
				GM_setValue('0-'+key, value);
				break;
			case 'localstorage':
				localStorage['femotbar-0-'+key] = value;
				break;
		}
	}

	function getValue(key, value) {
		switch (storage) {
			case 'greasemonkey':
				return GM_getValue('0-'+key, value);
			case 'localstorage':
				var val = localStorage['femotbar-0-'+key];
				if (val=='true') { return true; }
				else if (val=='false') { return false; }
				else if (val) { return val; }
				break;
		}
		return value;
	}
	
	function xmlhttpRequest(params, callBack) {
		if (typeof GM_xmlhttpRequest !== 'undefined') {
			params['onload'] = callBack;
			return GM_xmlhttpRequest(params);
		}
		return null;
	}

	function openInTab(url) {
		if (typeof GM_openInTab !== 'undefined') { GM_openInTab(url); }
		else { window.open(url); }
	}

	function UpdateCheck() {
		if(parseInt(getValue('LastUpdate', '0')) + 500 <= (new Date().getTime())) {
			try {
				xmlhttpRequest( { method: 'GET',
								  url: 'http://userscripts.org/scripts/source/124609.meta.js?' + new Date().getTime(),
								  headers: {'Cache-Control': 'no-cache'} },
								  handleUpdateResponse);
			}
			catch (err) {
				alert('An error occurred while checking for updates:\n' + err);
			}
		}
	}
	
	function handleUpdateResponse(r) {
		setValue('LastUpdate', new Date().getTime() + '');
		if (r.responseText.match(/@versionnumber\s+(\d+\.\d+)/)[1] > version) {
			if(confirm("There is new update available for Facebook Emoji.\n Do you want to install it ?")) openInTab('http://userscripts.org/scripts/source/124609.user.js');
		}
	}
	
/* END */

	function createSelection(field, start, end) {
		if( field.createTextRange ) {
			var selRange = field.createTextRange();
			selRange.collapse(true);
			selRange.moveStart('character', start);
			selRange.moveEnd('character', end);
			selRange.select();
		} else if( field.setSelectionRange ) {
			field.setSelectionRange(start, end);
		} else if( field.selectionStart ) {
			field.selectionStart = start;
			field.selectionEnd = end;
		}
		field.focus();
	}       
	
	function getCursorPosition(field) {
		var CursorPos = 0;
		if (field.selectionStart || field.selectionStart == '0') CursorPos = field.selectionStart;
		return (CursorPos);
	}
	
	UpdateCheck();
	
	emotsInfo = [];
	spemotsInfo = [];
	profilesInfo = [
	
	//Adore
	'[[326674440712502]][[326674444045835]][[326674434045836]][[326674437379169]][[326674447379168]]\n'+
	'[[326674517379161]][[326674527379160]][[326674530712493]][[326674520712494]][[326674524045827]]\n'+
	'[[326674580712488]][[326674584045821]][[326674577379155]][[326674587379154]][[326674574045822]]\n'+
	'[[326674724045807]][[326674727379140]][[326674734045806]][[326674730712473]][[326674720712474]]\n'+
	'[[326674934045786]][[326674930712453]][[326674940712452]][[326674927379120]][[326674937379119]]',
	'402415_371480836214729_100000584485328_1342385_1616507758_n.jpg', //Adore

	//Ah
	'[[361806213843075]][[361806217176408]][[361806210509742]][[361806203843076]][[361806207176409]]\n'+
	'[[361806313843065]][[361806323843064]][[361806320509731]][[361806327176397]][[361806317176398]]\n'+
	'[[361806373843059]][[361806370509726]][[361806377176392]][[361806383843058]][[361806380509725]]\n'+
	'[[361806453843051]][[361806457176384]][[361806447176385]][[361806463843050]][[361806450509718]]\n'+
	'[[361806580509705]][[361806583843038]][[361806573843039]][[361806577176372]][[361806570509706]]',
	'421415_371480876214725_100000584485328_1342387_1182112448_n.jpg', //Ah
	
	//Amazed
	'[[302412099812007]][[302412089812008]][[302412086478675]][[302412096478674]][[302412093145341]]\n'+
	'[[302412229811994]][[302412219811995]][[302412223145328]][[302412216478662]][[302412226478661]]\n'+
	'[[302412313145319]][[302412323145318]][[302412309811986]][[302412319811985]][[302412316478652]]\n'+
	'[[302412389811978]][[302412399811977]][[302412393145311]][[302412396478644]][[302412386478645]]\n'+
	'[[302412486478635]][[302412496478634]][[302412483145302]][[302412489811968]][[302412493145301]]',
	'408850_371480886214724_100000584485328_1342388_1305209740_n.jpg', //Amazed

	//Angry
	'[[351012164929398]][[351012168262731]][[351012171596064]][[351012158262732]][[351012161596065]]\n'+
	'[[351012274929387]][[351012261596055]][[351012271596054]][[351012268262721]][[351012264929388]]\n'+
	'[[351012351596046]][[351012358262712]][[351012348262713]][[351012361596045]][[351012354929379]]\n'+
	'[[351012424929372]][[351012418262706]][[351012428262705]][[351012421596039]][[351012414929373]]\n'+
	'[[351012514929363]][[351012518262696]][[351012511596030]][[351012524929362]][[351012521596029]]',
	'430564_371480989548047_100000584485328_1342391_567180780_n.jpg', //Angry
	
	//Bad Smelly
	'[[303712499689280]][[303712513022612]][[303712503022613]][[303712506355946]][[303712509689279]]\n'+
	'[[303712609689269]][[303712623022601]][[303712613022602]][[303712626355934]][[303712616355935]]\n'+
	'[[303712689689261]][[303712686355928]][[303712683022595]][[303712693022594]][[303712699689260]]\n'+
	'[[303712783022585]][[303712776355919]][[303712773022586]][[303712769689253]][[303712779689252]]\n'+
	'[[303712846355912]][[303712849689245]][[303712843022579]][[303712886355908]][[303712889689241]]',
	'423520_371481026214710_100000584485328_1342393_2093199406_n.jpg', //Bad Smelly
	
	//Baffle
	'[[388522307840715]][[388522304507382]][[388522291174050]][[388522297840716]][[388522301174049]]\n'+
	'[[388522414507371]][[388522411174038]][[388522417840704]][[388522424507370]][[388522427840703]]\n'+
	'[[388522504507362]][[388522507840695]][[388522497840696]][[388522501174029]][[388522511174028]]\n'+
	'[[388522571174022]][[388522581174021]][[388522577840688]][[388522584507354]][[388522574507355]]\n'+
	'[[388522734507339]][[388522721174007]][[388522724507340]][[388522727840673]][[388522731174006]]',
	'419230_371481136214699_100000584485328_1342395_805421827_n.jpg', //Baffle
	
	//Beat Brick
	'[[365022990188944]][[365022986855611]][[365022983522278]][[365022976855612]][[365022980188945]]\n'+
	'[[365023076855602]][[365023073522269]][[365023083522268]][[365023086855601]][[365023080188935]]\n'+
	'[[365023140188929]][[365023133522263]][[365023146855595]][[365023136855596]][[365023143522262]]\n'+
	'[[365023193522257]][[365023196855590]][[365023186855591]][[365023190188924]][[365023200188923]]\n'+
	'[[365023276855582]][[365023286855581]][[365023273522249]][[365023280188915]][[365023283522248]]',
	'401260_371481159548030_100000584485328_1342396_905182729_n.jpg', //Beat Brick
	
	//Beat Plaster
	'[[326668040713142]][[326668050713141]][[326668037379809]][[326668047379808]][[326668044046475]]\n'+
	'[[326668137379799]][[326668130713133]][[326668134046466]][[326668140713132]][[326668144046465]]\n'+
	'[[326668214046458]][[326668204046459]][[326668207379792]][[326668217379791]][[326668210713125]]\n'+
	'[[326668287379784]][[326668290713117]][[326668294046450]][[326668300713116]][[326668297379783]]\n'+
	'[[326668374046442]][[326668377379775]][[326668370713109]][[326668384046441]][[326668380713108]]',
	'395672_371481189548027_100000584485328_1342397_1049857624_n.jpg', //Beat Plaster
	
	//Beat Shot
	'[[159339780850480]][[159339784183813]][[159339787517146]][[159339774183814]][[159339777517147]]\n'+
	'[[159339874183804]][[159339867517138]][[159339870850471]][[159339877517137]][[159339880850470]]\n'+
	'[[159339920850466]][[159339927517132]][[159339924183799]][[159339934183798]][[159339930850465]]\n'+
	'[[159340004183791]][[159340014183790]][[159340010850457]][[159340017517123]][[159340007517124]]\n'+
	'[[159340090850449]][[159340094183782]][[159340097517115]][[159340100850448]][[159340104183781]]',
	'427534_371481232881356_100000584485328_1342398_1748428443_n.jpg', //Beat Shot
	
	//Beated
	'[[212653122166135]][[212653125499468]][[212653118832802]][[212653115499469]][[212653128832801]]\n'+
	'[[212653218832792]][[212653212166126]][[212653208832793]][[212653215499459]][[212653222166125]]\n'+
	'[[212653268832787]][[212653272166120]][[212653262166121]][[212653265499454]][[212653278832786]]\n'+
	'[[212653322166115]][[212653325499448]][[212653332166114]][[212653335499447]][[212653328832781]]\n'+
	'[[212653398832774]][[212653402166107]][[212653388832775]][[212653392166108]][[212653395499441]]',
	'417454_371481269548019_100000584485328_1342399_301710248_n.jpg', //Beated
	
	//Beauty
	'[[351026501594631]][[351026498261298]][[351026504927964]][[351026491594632]][[351026494927965]]\n'+
	'[[351026574927957]][[351026578261290]][[351026581594623]][[351026584927956]][[351026588261289]]\n'+
	'[[351026644927950]][[351026648261283]][[351026638261284]][[351026634927951]][[351026641594617]]\n'+
	'[[351026718261276]][[351026721594609]][[351026714927943]][[351026724927942]][[351026728261275]]\n'+
	'[[351026818261266]][[351026798261268]][[351026808261267]][[351026804927934]][[351026801594601]]',
	'430896_371481292881350_100000584485328_1342401_1116760882_n.jpg', //Beauty

	//Boss
	'[[301533549893258]][[301533543226592]][[301533556559924]][[301533546559925]][[301533553226591]]\n'+
	'[[301533633226583]][[301533636559916]][[301533639893249]][[301533643226582]][[301533646559915]]\n'+
	'[[301533699893243]][[301533703226576]][[301533689893244]][[301533693226577]][[301533696559910]]\n'+
	'[[301533776559902]][[301533763226570]][[301533773226569]][[301533769893236]][[301533766559903]]\n'+
	'[[301533859893227]][[301533853226561]][[301533866559893]][[301533856559894]][[301533863226560]]',
	'422965_371481482881331_100000584485328_1342404_178606208_n.jpg', //Boss
	
	//Burn Joss Stick
	'[[281335995256003]][[281335991922670]][[281336001922669]][[281335998589336]][[281336005256002]]\n'+
	'[[281336111922658]][[281336115255991]][[281336121922657]][[281336118589324]][[281336125255990]]\n'+
	'[[281336178589318]][[281336175255985]][[281336185255984]][[281336181922651]][[281336188589317]]\n'+
	'[[281336255255977]][[281336251922644]][[281336245255978]][[281336258589310]][[281336248589311]]\n'+
	'[[281336338589302]][[281336345255968]][[281336335255969]][[281336341922635]][[281336331922636]]',
	'426756_371481512881328_100000584485328_1342405_1768865548_n.jpg', //Burn Joss Stick
	
	//Canny
	'[[363642070327036]][[363642063660370]][[363642060327037]][[363642073660369]][[363642066993703]]\n'+
	'[[363642166993693]][[363642163660360]][[363642156993694]][[363642160327027]][[363642170327026]]\n'+
	'[[363642223660354]][[363642216993688]][[363642226993687]][[363642220327021]][[363642233660353]]\n'+
	'[[363642290327014]][[363642296993680]][[363642293660347]][[363642286993681]][[363642300327013]]\n'+
	'[[363642366993673]][[363642370327006]][[363642390327004]][[363642393660337]][[363642423660334]]',
	'422392_371481536214659_100000584485328_1342406_822055638_n.jpg', //Canny
	
	//Choler
	'[[212653675499413]][[212653672166080]][[212653682166079]][[212653668832747]][[212653678832746]]\n'+
	'[[212653785499402]][[212653788832735]][[212653782166069]][[212653792166068]][[212653795499401]]\n'+
	'[[212653868832727]][[212653865499394]][[212653872166060]][[212653878832726]][[212653875499393]]\n'+
	'[[212654098832704]][[212654088832705]][[212654092166038]][[212654085499372]][[212654095499371]]\n'+
	'[[212654178832696]][[212654165499364]][[212654168832697]][[212654172166030]][[212654162166031]]',
	'406392_371481549547991_100000584485328_1342407_1321925865_n.jpg', //Choler
	
	//Cool
	'[[390125451013734]][[390125461013733]][[390125457680400]][[390125447680401]][[390125454347067]]\n'+
	'[[390125581013721]][[390125614347051]][[390125584347054]][[390125587680387]][[390125577680388]]\n'+
	'[[390125654347047]][[390125644347048]][[390125657680380]][[390125651013714]][[390125647680381]]\n'+
	'[[390125724347040]][[390125721013707]][[390125717680374]][[390125714347041]][[390125731013706]]\n'+
	'[[390125794347033]][[390125801013699]][[390125807680365]][[390125804347032]][[390125797680366]]',
	'425837_371481592881320_100000584485328_1342408_1015893382_n.jpg', //Cool
	
	//Dhh
	'[[194581527310331]][[194581530643664]][[194581520643665]][[194581533976997]][[194581523976998]]\n'+
	'[[194581660643651]][[194581613976989]][[194581610643656]][[194581617310322]][[194581620643655]]\n'+
	'[[194581680643649]][[194581683976982]][[194581687310315]][[194581673976983]][[194581677310316]]\n'+
	'[[194581740643643]][[194581733976977]][[194581730643644]][[194581743976976]][[194581737310310]]\n'+
	'[[194581803976970]][[194581810643636]][[194581807310303]][[194581800643637]][[194581813976969]]',
	'419546_371481606214652_100000584485328_1342409_892463846_n.jpg', //Dhh
	
	//Doubt
	'[[307441619312107]][[307441629312106]][[307441622645440]][[307441625978773]][[307441632645439]]\n'+
	'[[307441729312096]][[307441722645430]][[307441725978763]][[307441719312097]][[307441715978764]]\n'+
	'[[307441775978758]][[307441785978757]][[307441782645424]][[307441779312091]][[307441772645425]]\n'+
	'[[307441852645417]][[307441855978750]][[307441845978751]][[307441859312083]][[307441849312084]]\n'+
	'[[307441959312073]][[307441955978740]][[307441962645406]][[307441952645407]][[307441965978739]]',
	'405488_371481629547983_100000584485328_1342410_1944821008_n.jpg', //Doubt
	
	//Dribble
	'[[390127587680187]][[390127597680186]][[390127594346853]][[390127584346854]][[390127591013520]]\n'+
	'[[390127674346845]][[390127677680178]][[390127687680177]][[390127684346844]][[390127681013511]]\n'+
	'[[390127754346837]][[390127767680169]][[390127761013503]][[390127764346836]][[390127757680170]]\n'+
	'[[390127814346831]][[390127817680164]][[390127821013497]][[390127831013496]][[390127834346829]]\n'+
	'[[390127917680154]][[390127914346821]][[390127911013488]][[390127907680155]][[390127904346822]]',
	'403031_371481676214645_100000584485328_1342411_248208985_n.jpg', //Dribble
	
	//Ewhz
	'[[160700337381091]][[160700340714424]][[160700347381090]][[160700344047757]][[160700350714423]]\n'+
	'[[160700427381082]][[160700440714414]][[160700437381081]][[160700430714415]][[160700434047748]]\n'+
	'[[160700517381073]][[160700527381072]][[160700530714405]][[160700520714406]][[160700524047739]]\n'+
	'[[160700604047731]][[160700590714399]][[160700597381065]][[160700594047732]][[160700600714398]]\n'+
	'[[160700687381056]][[160700700714388]][[160700690714389]][[160700697381055]][[160700694047722]]',
	'418855_371481706214642_100000584485328_1342412_671292977_n.jpg', //Ewhz
	
	//Extreme Sexy Girl
	'[[367277173296390]][[367277163296391]][[367277169963057]][[367277166629724]][[367277176629723]]\n'+
	'[[367277259963048]][[367277256629715]][[367277253296382]][[367277269963047]][[367277266629714]]\n'+
	'[[367277349963039]][[367277343296373]][[367277346629706]][[367277339963040]][[367277353296372]]\n'+
	'[[367277436629697]][[367277439963030]][[367277433296364]][[367277446629696]][[367277443296363]]\n'+
	'[[367277596629681]][[367277586629682]][[367277593296348]][[367277599963014]][[367277589963015]]',
	'407099_371481779547968_100000584485328_1342413_1544103975_n.jpg', //Extreme Sexy Girl

	//Hungry
	'[[248835798531687]][[248835801865020]][[248835788531688]][[248835795198354]][[248835791865021]]\n'+
	'[[248835925198341]][[248835928531674]][[248835931865007]][[248835921865008]][[248835915198342]]\n'+
	'[[248836011864999]][[248836005198333]][[248836001865000]][[248836015198332]][[248836008531666]]\n'+
	'[[248836065198327]][[248836071864993]][[248836075198326]][[248836068531660]][[248836078531659]]\n'+
	'[[248836141864986]][[248836145198319]][[248836148531652]][[248836151864985]][[248836155198318]]',
	'430507_371481856214627_100000584485328_1342416_1227424447_n.jpg', //Hungry
	
	//Look Down
	'[[363333203690376]][[363333210357042]][[363333197023710]][[363333200357043]][[363333207023709]]\n'+
	'[[363333293690367]][[363333287023701]][[363333283690368]][[363333297023700]][[363333290357034]]\n'+
	'[[363333340357029]][[363333347023695]][[363333350357028]][[363333343690362]][[363333353690361]]\n'+
	'[[363333413690355]][[363333420357021]][[363333423690354]][[363333410357022]][[363333417023688]]\n'+
	'[[363333497023680]][[363333493690347]][[363333503690346]][[363333507023679]][[363333500357013]]',
	'418536_371481902881289_100000584485328_1342417_1171695386_n.jpg', //Look Down
	
	//Misdoubt
	'[[303720506347833]][[303720503014500]][[303720499681167]][[303720509681166]][[303720496347834]]\n'+
	'[[303720613014489]][[303720603014490]][[303720609681156]][[303720606347823]][[303720599681157]]\n'+
	'[[303720676347816]][[303720683014482]][[303720679681149]][[303720686347815]][[303720763014474]]\n'+
	'[[303720776347806]][[303720789681138]][[303720779681139]][[303720786347805]][[303720783014472]]\n'+
	'[[303720853014465]][[303720849681132]][[303720843014466]][[303720839681133]][[303720846347799]]',
	'425917_371481919547954_100000584485328_1342418_439244877_n.jpg', //Misdoubt
	
	//Mother-Ficker Was
	'[[307471339309135]][[307471342642468]][[307471332642469]][[307471335975802]][[307471329309136]]\n'+
	'[[307471425975793]][[307471419309127]][[307471415975794]][[307471422642460]][[307471412642461]]\n'+
	'[[307471479309121]][[307471472642455]][[307471475975788]][[307471469309122]][[307471482642454]]\n'+
	'[[307471529309116]][[307471532642449]][[307471539309115]][[307471535975782]][[307471525975783]]\n'+
	'[[307471612642441]][[307471605975775]][[307471602642442]][[307471615975774]][[307471609309108]]',
	'429713_371481966214616_100000584485328_1342420_350377205_n.jpg', //Mother-Ficker Was
	
	//Nosebleed
	'[[367304259960348]][[367304253293682]][[367304336627007]][[367304263293681]][[367304256627015]]\n'+
	'[[367304349960339]][[367304356627005]][[367304359960338]][[367304353293672]][[367304346627006]]\n'+
	'[[367304409960333]][[367304413293666]][[367304406627000]][[367304506626990]][[367304416626999]]\n'+
	'[[367304529960321]][[367304526626988]][[367304523293655]][[367304519960322]][[367304516626989]]\n'+
	'[[367304653293642]][[367304659960308]][[367304656626975]][[367304666626974]][[367304663293641]]',
	'426834_371481989547947_100000584485328_1342421_155010342_n.jpg', //Nosebleed
	
	//Ops
	'[[248861168529150]][[248861155195818]][[248861158529151]][[248861161862484]][[248861165195817]]\n'+
	'[[248861241862476]][[248861245195809]][[248861248529142]][[248861251862475]][[248861255195808]]\n'+
	'[[248861301862470]][[248861305195803]][[248861311862469]][[248861298529137]][[248861308529136]]\n'+
	'[[248861368529130]][[248861365195797]][[248861371862463]][[248861358529131]][[248861361862464]]\n'+
	'[[248861458529121]][[248861445195789]][[248861448529122]][[248861455195788]][[248861451862455]]',
	'422293_371482006214612_100000584485328_1342422_969603497_n.jpg', //Ops
	
	//Smile
	'[[365058230185420]][[365058233518753]][[365058236852086]][[365058240185419]][[365058243518752]]\n'+
	'[[365058323518744]][[365058326852077]][[365058333518743]][[365058330185410]][[365058336852076]]\n'+
	'[[365058403518736]][[365058396852070]][[365058400185403]][[365058406852069]][[365058410185402]]\n'+
	'[[365058460185397]][[365058456852064]][[365058453518731]][[365058463518730]][[365058450185398]]\n'+
	'[[365058526852057]][[365058523518724]][[365058530185390]][[365058533518723]][[365058536852056]]',
	'432132_371482039547942_100000584485328_1342425_1842230953_n.jpg', //Smile
	
	//Still Dreaming
	'[[234186700008760]][[234186696675427]][[234186690008761]][[234186693342094]][[234186703342093]]\n'+
	'[[234186786675418]][[234186796675417]][[234186793342084]][[234186790008751]][[234186783342085]]\n'+
	'[[234186850008745]][[234186853342078]][[234186846675412]][[234186856675411]][[234186860008744]]\n'+
	'[[234186906675406]][[234186896675407]][[234186900008740]][[234186903342073]][[234186910008739]]\n'+
	'[[234186980008732]][[234186990008731]][[234186976675399]][[234186983342065]][[234186986675398]]',
	'431152_371482106214602_100000584485328_1342427_587078007_n.jpg', //Still Dreaming
	
	//Sweat
	'[[363362980354065]][[363362977020732]][[363362973687399]][[363362970354066]][[363362983687398]]\n'+
	'[[363363067020723]][[363363060354057]][[363363070354056]][[363363063687390]][[363363057020724]]\n'+
	'[[363363123687384]][[363363127020717]][[363363117020718]][[363363120354051]][[363363133687383]]\n'+
	'[[363363207020709]][[363363193687377]][[363363200354043]][[363363197020710]][[363363203687376]]\n'+
	'[[363363270354036]][[363363263687370]][[363363277020702]][[363363267020703]][[363363273687369]]',
	'430401_371482132881266_100000584485328_1342428_770887382_n.jpg', //Sweat
	
	//Sweet Kiss
	'[[303726033013947]][[303726093013941]][[303726039680613]][[303726036347280]][[303726043013946]]\n'+
	'[[303726159680601]][[303726166347267]][[303726163013934]][[303726153013935]][[303726156347268]]\n'+
	'[[303726239680593]][[303726283013922]][[303726246347259]][[303726279680589]][[303726243013926]]\n'+
	'[[303726323013918]][[303726316347252]][[303726426347241]][[303726319680585]][[303726353013915]]\n'+
	'[[303726483013902]][[303726479680569]][[303726489680568]][[303726493013901]][[303726486347235]]',
	'425787_371482146214598_100000584485328_1342429_517794677_n.jpg', //Sweet Kiss
	
	//Zedz
	'[[260376450704886]][[260376444038220]][[260376440704887]][[260376454038219]][[260376447371553]]\n'+
	'[[260376540704877]][[260376534038211]][[260376527371545]][[260376530704878]][[260376537371544]]\n'+
	'[[260376584038206]][[260376590704872]][[260376580704873]][[260376587371539]][[260376594038205]]\n'+
	'[[260376640704867]][[260376644038200]][[260376654038199]][[260376650704866]][[260376647371533]]\n'+
	'[[260376704038194]][[260376694038195]][[260376700704861]][[260376707371527]][[260376697371528]]',
	'425259_371482236214589_100000584485328_1342433_102656753_n.jpg', //Zedz
	
	//Amazing
	'[[361812130509150]][[361812140509149]][[361812133842483]][[361812127175817]][[361812137175816]]\n'+
	'[[361812240509139]][[361812250509138]][[361812237175806]][[361812243842472]][[361812247175805]]\n'+
	'[[361812307175799]][[361812313842465]][[361812300509133]][[361812303842466]][[361812310509132]]\n'+
	'[[361812380509125]][[361812377175792]][[361812390509124]][[361812387175791]][[361812373842459]]\n'+
	'[[361812487175781]][[361812497175780]][[361812490509114]][[361812500509113]][[361812493842447]]',
	'427623_371480919548054_100000584485328_1342389_2026981078_n.jpg', //Amazing
	
	//Anger
	'[[213727155391325]][[213727152057992]][[213727148724659]][[213727145391326]][[213727142057993]]\n'+
	'[[213727235391317]][[213727245391316]][[213727232057984]][[213727238724650]][[213727242057983]]\n'+
	'[[213727292057978]][[213727302057977]][[213727295391311]][[213727298724644]][[213727305391310]]\n'+
	'[[213727358724638]][[213727362057971]][[213727355391305]][[213727365391304]][[213727352057972]]\n'+
	'[[213727438724630]][[213727445391296]][[213727452057962]][[213727442057963]][[213727448724629]]',
	'419892_371480966214716_100000584485328_1342390_1173217471_n.jpg', //Anger
	
	//Bad Egg
	'[[193458774089273]][[193458780755939]][[193458784089272]][[193458770755940]][[193458777422606]]\n'+
	'[[193458880755929]][[193458874089263]][[193458877422596]][[193458884089262]][[193458887422595]]\n'+
	'[[193458940755923]][[193458934089257]][[193458927422591]][[193458937422590]][[193458944089256]]\n'+
	'[[193459000755917]][[193458997422584]][[193458990755918]][[193459004089250]][[193458994089251]]\n'+
	'[[193459114089239]][[193459107422573]][[193459100755907]][[193459097422574]][[193459104089240]]',
	'407548_371481009548045_100000584485328_1342392_309234194_n.jpg', //Bad Egg
	
	//Bad Smile
	'[[306155852774017]][[306155842774018]][[306155849440684]][[306155839440685]][[306155846107351]]\n'+
	'[[306155949440674]][[306155956107340]][[306155952774007]][[306155959440673]][[306155962774006]]\n'+
	'[[306156022774000]][[306156026107333]][[306156029440666]][[306156032773999]][[306156036107332]]\n'+
	'[[306156102773992]][[306156106107325]][[306156112773991]][[306156099440659]][[306156109440658]]\n'+
	'[[306156189440650]][[306156192773983]][[306156186107317]][[306156182773984]][[306156179440651]]',
	'424887_371481076214705_100000584485328_1342394_1204459622_n.jpg', //Bad Smile
	
	//Beaten
	'[[193464157422068]][[193464150755402]][[193464164088734]][[193464154088735]][[193464160755401]]\n'+
	'[[193464294088721]][[193464290755388]][[193464300755387]][[193464304088720]][[193464297422054]]\n'+
	'[[193464374088713]][[193464384088712]][[193464377422046]][[193464390755378]][[193464387422045]]\n'+
	'[[193464434088707]][[193464444088706]][[193464440755373]][[193464437422040]][[193464447422039]]\n'+
	'[[193464650755352]][[193464654088685]][[193464657422018]][[193464644088686]][[193464647422019]]',
	'422765_371481279548018_100000584485328_1342400_905169388_n.jpg', //Beaten
	
	//Big Smile
	'[[363641663660410]][[363641660327077]][[363641650327078]][[363641653660411]][[363641656993744]]\n'+
	'[[363641733660403]][[363641743660402]][[363641736993736]][[363641740327069]][[363641746993735]]\n'+
	'[[363641806993729]][[363641800327063]][[363641810327062]][[363641803660396]][[363641796993730]]\n'+
	'[[363641880327055]][[363641876993722]][[363641870327056]][[363641873660389]][[363641866993723]]\n'+
	'[[363641973660379]][[363641966993713]][[363641963660380]][[363641970327046]][[363641976993712]]',
	'422062_371481339548012_100000584485328_1342402_340760635_n.jpg', //Big Smile
	
		
	//Happy
	'[[260340164041848]][[260340170708514]][[260340160708515]][[260340154041849]][[260340167375181]]\n'+
	'[[260340247375173]][[260340257375172]][[260340254041839]][[260340260708505]][[260340250708506]]\n'+
	'[[260340314041833]][[260340324041832]][[260340320708499]][[260340317375166]][[260340310708500]]\n'+
	'[[260340407375157]][[260340397375158]][[260340400708491]][[260340404041824]][[260340394041825]]\n'+
	'[[260340470708484]][[260340460708485]][[260340474041817]][[260340464041818]][[260340467375151]]',
	'428157_371481799547966_100000584485328_1342414_2061122981_n.jpg', //Happy
	
	//Victory
	'[[207522696008494]][[207522699341827]][[207522702675160]][[207522706008493]][[207522709341826]]\n'+
	'[[207522816008482]][[207522812675149]][[207522806008483]][[207522809341816]][[207522819341815]]\n'+
	'[[207522876008476]][[207522889341808]][[207522879341809]][[207522882675142]][[207522886008475]]\n'+
	'[[207522936008470]][[207522946008469]][[207522939341803]][[207522949341802]][[207522942675136]]\n'+
	'[[207523032675127]][[207523019341795]][[207523029341794]][[207523026008461]][[207523016008462]]',
	'425521_371482209547925_100000584485328_1342431_1460850578_n.jpg', //Victory
	
	//Money
	'[[328037010576245]][[328037000576246]][[328036997242913]][[328037007242912]][[328037003909579]]\n'+
	'[[328037087242904]][[328037090576237]][[328037093909570]][[328037100576236]][[328037097242903]]\n'+
	'[[328037183909561]][[328037173909562]][[328037170576229]][[328037177242895]][[328037180576228]]\n'+
	'[[328037250576221]][[328037247242888]][[328037240576222]][[328037243909555]][[328037253909554]]\n'+
	'[[328037370576209]][[328037363909543]][[328037360576210]][[328037407242872]][[328037367242876]]',
	'401504_371481939547952_100000584485328_1342419_552042548_n.jpg', //Money
	
	//Secret Smile
	'[[305109559549574]][[305109566216240]][[305109569549573]][[305109562882907]][[305109572882906]]\n'+
	'[[305109652882898]][[305109656216231]][[305109659549564]][[305109662882897]][[305109666216230]]\n'+
	'[[305109722882891]][[305109729549557]][[305109716216225]][[305109719549558]][[305109726216224]]\n'+
	'[[305109779549552]][[305109769549553]][[305109782882885]][[305109776216219]][[305109772882886]]\n'+
	'[[305109852882878]][[305109846216212]][[305109856216211]][[305109859549544]][[305109849549545]]',
	'417506_371482029547943_100000584485328_1342424_406558297_n.jpg', //Secret Smile
	
	//What
	'[[307475532642049]][[307475525975383]][[307475539308715]][[307475535975382]][[307475529308716]]\n'+
	'[[307475619308707]][[307475609308708]][[307475612642041]][[307475615975374]][[307475629308706]]\n'+
	'[[307475675975368]][[307475672642035]][[307475679308701]][[307475682642034]][[307475685975367]]\n'+
	'[[307475729308696]][[307475732642029]][[307475735975362]][[307475739308695]][[307475742642028]]\n'+
	'[[307475799308689]][[307475809308688]][[307475802642022]][[307475795975356]][[307475805975355]]',
	'422787_371482226214590_100000584485328_1342432_624984135_n.jpg', //What
	
	//Unhappy
	'[[363362383687458]][[363362377020792]][[363362380354125]][[363362373687459]][[363362387020791]]\n'+
	'[[363362490354114]][[363362493687447]][[363362497020780]][[363362483687448]][[363362500354113]]\n'+
	'[[363362550354108]][[363362560354107]][[363362547020775]][[363362553687441]][[363362557020774]]\n'+
	'[[363362633687433]][[363362630354100]][[363362637020766]][[363362627020767]][[363362643687432]]\n'+
	'[[363362703687426]][[363362710354092]][[363362697020760]][[363362707020759]][[363362700354093]]',
	'424722_371482152881264_100000584485328_1342430_610527696_n.jpg', //Unhappy
	
	//After Boom
	'[[231631746929533]][[231631750262866]][[231631740262867]][[231631743596200]][[231631753596199]]\n'+
	'[[231631866929521]][[231631873596187]][[231631876929520]][[231631863596188]][[231631870262854]]\n'+
	'[[231631933596181]][[231631940262847]][[231631943596180]][[231631930262848]][[231631936929514]]\n'+
	'[[231631996929508]][[231631993596175]][[231632000262841]][[231631990262842]][[231632003596174]]\n'+
	'[[231632113596163]][[231632110262830]][[231632123596162]][[231632120262829]][[231632116929496]]',
	'417493_371480856214727_100000584485328_1342386_897986857_n.jpg', //After Boom
	
	//Black Heart
	'[[390123321013947]][[390123324347280]][[390123314347281]][[390123317680614]][[390123311013948]]\n'+
	'[[390123414347271]][[390123424347270]][[390123417680604]][[390123421013937]][[390123427680603]]\n'+
	'[[390123491013930]][[390123484347264]][[390123487680597]][[390123477680598]][[390123481013931]]\n'+
	'[[390123551013924]][[390123541013925]][[390123554347257]][[390123544347258]][[390123547680591]]\n'+
	'[[390123631013916]][[390123634347249]][[390123641013915]][[390123637680582]][[390123627680583]]',
	'407176_371481392881340_100000584485328_1342403_683184905_n.jpg', //Black Heart
	
	//Hell Boy
	'[[324468427583772]][[324468440917104]][[324468430917105]][[324468437583771]][[324468434250438]]\n'+
	'[[324468524250429]][[324468534250428]][[324468520917096]][[324468527583762]][[324468530917095]]\n'+
	'[[324468630917085]][[324468617583753]][[324468634250418]][[324468627583752]][[324468624250419]]\n'+
	'[[324468690917079]][[324468694250412]][[324468680917080]][[324468684250413]][[324468687583746]]\n'+
	'[[324468777583737]][[324468770917071]][[324468780917070]][[324468784250403]][[324468774250404]]',
	'427477_371481809547965_100000584485328_1342415_1378134083_n.jpg', //Hell Boy

	//Spiderman
	'[[365059600185283]][[365059610185282]][[365059606851949]][[365059596851950]][[365059603518616]]\n'+
	'[[365059686851941]][[365059693518607]][[365059683518608]][[365059680185275]][[365059690185274]]\n'+
	'[[365059766851933]][[365059763518600]][[365059753518601]][[365059756851934]][[365059760185267]]\n'+
	'[[365059810185262]][[365059820185261]][[365059816851928]][[365059813518595]][[365059806851929]]\n'+
	'[[365059870185256]][[365059876851922]][[365059866851923]][[365059880185255]][[365059873518589]]',
	'398667_371482072881272_100000584485328_1342426_10278276_n.jpg', //Spiderman
	];
	headTag = document.getElementsByTagName('head')[0];
    if (headTag) {
		styleTag = document.createElement('style');
		styleTag.type = 'text/css';
		styleTag.innerHTML =
			'.chat_tab_emot_bar {padding-top: 2px; padding-bottom: 6px; line-height: 16px; padding-left: 2px; background:#EEEEEE none repeat scroll 0 0; border-style: solid; border-width: 0px 0px 1px 0px; border-color: #C9D0DA; position: static; }'+
			'.chatstylesbut {width: 15px; height:15px; background-image: url("' + ResourcesURL + 'zx/r/FbCyXQSrD4-.png"); cursor: pointer; border-color: rgb(153, 153, 153) rgb(153, 153, 153) rgb(136, 136, 136); border-style: solid; border-width: 1px; }'+
			'.chat_arrow { background-image: url("'+ ResourcesURL + 'v1/zp/r/SBNTDM0S-7U.png"); background-position: 0 -48px; height: 5px; width: 9px; }';
		headTag.appendChild(styleTag);
	}
	
	ArrowStyleUp = 'cursor: pointer; position: absolute; right: 2px; -moz-transform: rotate(180deg); -webkit-transform: rotate(180deg);'
	ArrowStyleDown = 'cursor: pointer; position: absolute; right: 2px;'
	
	fEmotBarDom = document.createElement('div');
	fEmotBarDom.setAttribute('class','chat_tab_emot_bar');
	
	fEmotsListDom = document.createElement('div');
	fEmotsListDom.setAttribute('name','EmotsList');
	fEmotBarDom.appendChild(fEmotsListDom);
	
	for(i=0;i<emotsInfo.length;i+=1) {
		var fEmotsDom = document.createElement('img');
		fEmotsDom.setAttribute('alt',emotsInfo[i]);
		fEmotsDom.setAttribute('style','cursor: pointer; background-position: -'+ 16*i +'px 0px;');
		fEmotsDom.setAttribute('src',ImagesURL + 'blank.gif');
		fEmotsDom.setAttribute('class','emote_img');
		fEmotsListDom.appendChild(fEmotsDom);
	}
	for(i=0;i<spemotsInfo.length;i+=2) {
		var fEmotsDom = document.createElement('img');
		fEmotsDom.setAttribute('alt',spemotsInfo[i]);
		fEmotsDom.setAttribute('src',ImagesURL + spemotsInfo[i+1]);
		fEmotsDom.setAttribute('style','cursor: pointer;');
		fEmotsDom.setAttribute('class','emote_custom');
		fEmotsListDom.appendChild(fEmotsDom);
	}
	for(i=0;i<profilesInfo.length;i+=2) {
		var fEmotsDom = document.createElement('img');
		fEmotsDom.setAttribute('alt',profilesInfo[i]);
		fEmotsDom.setAttribute('alt-extra',profilesInfo[i]);
		fEmotsDom.setAttribute('src',ProfileImgURL + profilesInfo[i+1]);
		fEmotsDom.setAttribute('style','cursor: pointer;');
		fEmotsDom.setAttribute('class','emote_custom');
		fEmotsListDom.appendChild(fEmotsDom);
	}
	
	fArrow = document.createElement('i');
	fArrow.setAttribute('alt','');
	fArrow.setAttribute('class','img chat_arrow');
	fArrow.setAttribute('style',ArrowStyleUp);
	fEmotBarDom.appendChild(fArrow);
	
	var setting_visible = getValue('visible',true);
	
	document.addEventListener('DOMNodeInserted', fInsertedNodeHandler, false);

	function fInsertedNodeHandler(event) {
		if(event.target.getElementsByClassName && event.target.getElementsByClassName('fbNubFlyout fbDockChatTabFlyout')[0])
			fInsertEmotBar(event.target);
	}

	function fInsertEmotBar(fChatWrapper) {
		fChatToolBox = fChatWrapper.getElementsByClassName('fbNubFlyoutHeader')[0]
		fNewEmotBar = fEmotBarDom.cloneNode(true);
		setVisibility(fNewEmotBar);
		for(i=0;i<fNewEmotBar.firstChild.childNodes.length-2;i++) fNewEmotBar.firstChild.childNodes[i].addEventListener('click', fEmotClickHandler , false);

		fNewEmotBar.firstChild.childNodes[i].addEventListener('click' , fStyleClickHandler , false);
		fNewEmotBar.firstChild.childNodes[i+1].addEventListener('click' , fStyleClickHandler , false);
		
		fNewEmotBar.childNodes[1].addEventListener('click', fHideShowEmotBar , false);
		if(fChatToolBox.childNodes) fChatToolBox.insertBefore(fNewEmotBar,fChatToolBox.childNodes[1]);
	}

	function fEmotClickHandler(event){
		var fChatInput = event.target.parentNode.parentNode.parentNode.parentNode.getElementsByClassName('fbNubFlyoutFooter')[0].getElementsByClassName('inputContainer')[0].getElementsByClassName('uiTextareaAutogrow input')[0];
		var pos = getCursorPosition(fChatInput);
		
		var txtbef = ''; var txtaft = '';
		
		if (fChatInput.value.charAt(pos-1) != ' ' && pos-1 > 0) txtbef = ' ';
		if (fChatInput.value.charAt(pos) != ' ') txtaft = ' ';
		
		var imgAttrExtra = event.target.hasAttribute('alt-extra') ? '-extra' : '';
		fChatInput.value = fChatInput.value.substring(0,pos) + txtbef + event.target.getAttribute('alt'+imgAttrExtra) + txtaft + fChatInput.value.substring(pos);
		createSelection(fChatInput,pos + event.target.getAttribute('alt'+imgAttrExtra).length + txtaft.length + txtbef.length,pos + event.target.getAttribute('alt'+imgAttrExtra).length + txtaft.length + txtbef.length);
	}
	
	function fStyleClickHandler(event){
		var fChatInput = event.target.parentNode.parentNode.parentNode.parentNode.getElementsByClassName('fbNubFlyoutFooter')[0].getElementsByClassName('inputContainer')[0].getElementsByClassName('uiTextareaAutogrow input')[0];
		
		var selectedText = fChatInput.value.substring(fChatInput.selectionStart, fChatInput.selectionEnd);
		
		var pos = getCursorPosition(fChatInput);
		var txtlen = selectedText.length;
		
		var imgAttrExtra = event.target.hasAttribute('alt-extra') ? '-extra' : '';		
		
		if (txtlen == 0) {
			fChatInput.value = fChatInput.value.substring(0,pos) + event.target.getAttribute('alt'+imgAttrExtra) + fChatInput.value.substring(pos);
			createSelection(fChatInput,pos + 1,pos + event.target.getAttribute('alt'+imgAttrExtra).length-1);
		}
		else {
			var txtbef = event.target.getAttribute('alt'+imgAttrExtra).charAt(0);
			var txtaft = event.target.getAttribute('alt'+imgAttrExtra).charAt(0);
			
			while (fChatInput.value.charAt(pos) == ' ') { pos += 1; txtlen -= 1; }
			while (fChatInput.value.charAt(pos+txtlen-1) == ' ') txtlen -= 1;
			
			if (fChatInput.value.charAt(pos-1) != ' ' && pos-1 > 0) txtbef = ' ' + txtbef;
			if (fChatInput.value.charAt(pos+txtlen) != ' ') txtaft += ' ';
			
			fChatInput.value = fChatInput.value.substring(0,pos) + txtbef + fChatInput.value.substring(pos,pos+txtlen) + txtaft + fChatInput.value.substring(pos + txtlen);
			
			createSelection(fChatInput, pos + txtlen + 2, pos + txtlen + 2);
		}
	}

	function fHideShowEmotBar(event){
		fChatBar = document.getElementsByName('EmotsList');
		fChatContainer = document.getElementsByClassName('fbNubFlyoutBody')[0];
		if(fChatBar[0].getAttribute('style') == 'display: none;') {
			for(i=0;i<fChatBar.length;i++) {
				fChatBar[i].setAttribute('style','display: block;');
				fChatBar[i].parentNode.childNodes[1].setAttribute('style',ArrowStyleUp);
			}
			fChatContainer.setAttribute('style','height: ' + (fChatContainer.offsetHeight - 48) + 'px;');
		}
		else {
			for(i=0;i<fChatBar.length;i++) {
				fChatBar[i].setAttribute('style','display: none;');
				fChatBar[i].parentNode.childNodes[1].setAttribute('style',ArrowStyleDown);
			}
			fChatContainer.setAttribute('style','height: ' + (fChatContainer.offsetHeight + 48) + 'px;');
		}
		setValue('visible',!setting_visible);
		setting_visible = !setting_visible;
		
		
		
	}
	
	function setVisibility(DOM) {
		if(setting_visible) {
			DOM.firstChild.setAttribute('style','display: block;');
			DOM.childNodes[1].setAttribute('style',ArrowStyleUp);
		}
		else {
			DOM.firstChild.setAttribute('style','display: none;');
			DOM.childNodes[1].setAttribute('style',ArrowStyleDown);
		}
	}
// ==UserScript==
// @name            IMO.IM Boost 2
// @version         1.0
// @author          Michael J Scarchilli & Bunnies... lots and lots of bunnies!
// @namespace       http://www.mikevision.com
// @description     Fit more friends on the page, choose your own background color! This userscript makes the IMO.IM user experience more enjoyable.
// @icon            https://i.imgur.com/Nit7DZt.png
// @include         https://imo.im/*
// @updateURL	    https://userscripts.org/scripts/source/373148.user.js
// @downloadURL	    https://userscripts.org/scripts/source/373148.user.js  	    
// @grant           none
// 
// ==/UserScript==

function addJQuery(e){var t=document.createElement("script");t.setAttribute("src","https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js");t.addEventListener("load",function(){var t=document.createElement("script");t.textContent="("+e.toString()+")();";document.body.appendChild(t)},false);document.body.appendChild(t)}function main(){jQuery.noConflict();(function(e){jQuery(document).ready(function(){var t=function(){function t(){if(document.getElementById("main")){n();e("#body").unbind();e(document).unbind()}}function n(){var t=document.createElement("div");var n=document.getElementById("main");var o=s("imoBoost2");if(!o){r("imoBoost2","SteelBlue",2020);o="SteelBlue";n.style.backgroundColor="SteelBlue"}else{n.style.backgroundColor=o}e('button[fancy-tooltip*="show_settings"]').on("click",function(){function m(t){var t=e("#dropListChoices li.selected").attr("id");r("imoBoost2",t,2020);o=s("imoBoost2");e(document).unbind();e(d).unbind()}var t=o.replace(/([a-z])([A-Z])/g,"$1 $2");var u;e('.general div:contains("Background color")').hide();e('.general h1:contains("Interface")').after('<div class="pref-section" id="backgroundColorSet"><div class="pref-section-title"><span class="translation_span">Background color</span></div><div class="pref-option"><div id="dropList"><div id="dropListTop"><div id="dropChoice"><span class="swatch" style="background-color:'+o+';"></span>'+t+'</div><div id="dropArrow"><div class="top"></div><div class="arrow"></div><div class="bottom"></div></div></div><div id="dropListBottom"><ul id="dropListChoices"></ul></div></div></div></div>');var a=document.getElementById("dropList");var f=document.getElementById("dropListTop");var l=document.getElementById("dropListBottom");var c=document.getElementById("dropChoice");var h=document.getElementById("dropListChoices");var p=document.getElementById("dropListChoices").getElementsByTagName("li");var d=document.getElementById("dropListChoices").getElementsByTagName("li");var v=["Alice Blue","Antique White","Aqua","Aqua Marine","Azure","Beige","Bisque","Black","Blanched Almond","Blue","Blue Violet","Brown","Burly Wood","Cadet Blue","Chartreuse","Chocolate","Coral","Cornflower Blue","Cornsilk","Crimson","Cyan","Dark Blue","Dark Cyan","Dark Golden Rod","Dark Gray","Dark Khaki","Dark Magenta","Dark Olive Green","Dark Orange","Dark Orchid","Dark Red","Dark Salmon","Dark Sea Green","Dark Slate Blue","Dark Slate Gray","Dark Turquoise","Dark Violet","Deep Pink","Dim Gray","Dodger Blue","Fire Brick","Floral White","Forest Green","Fuchsia","Gainsboro","Gold","Golden Rod","Gray","Green","Green Yellow","Honey Dew","Hot Pink","Indian Red","Indigo","Ivory","Khaki","Lavender","Lavender Blush","Lawn Green","Lemon Chiffon","Light Blue","Light Coral","Light Cyan","Light Golden Rod Yellow","Light Gray","Light Green","Light Pink","Light Salmon","Light Sea Green","Light Sky Blue","Light Slate Gray","Light Steel Blue","Light Yellow","Lime","Lime Green","Linen","Magenta","Maroon","Medium Aqua Marine","Medium Blue","Medium Orchid","Medium Purple","Medium Sea Green","Medium Slate Blue","Medium Spring Green","Medium Turquoise","Medium Violet Red","Midnight Blue","Mint Cream","Misty Rose","Moccasin","Navajo White","Navy","Old Lace","Olive","Olive Drab","Orange","Orange Red","Orchid","Pale Golden Rod","Pale Green","Pale Turquoise","Pale Violet Red","Papaya Whip","Peach Puff","Plum","Pink","Powder Blue","Purple","Red","Rosy Brown","Royal Blue","Saddle Brown","Salmon","Sandy Brown","Sea Green","Sea Shell","Sienna","Silver","Sky Blue","Slate Blue","Slate Grey","Snow","Spring Green","Steel Blue","Tan","Teal","Thistle","Tomato","Turquoise","Violet","Wheat","White","White Smoke","Yellow","#333"];for(i=0;i<v.length;i++){u=v[i].replace(/ /g,"");e(h).append(e('<li id="'+u+'"></li>').html('<span style="background-color:'+u+';border:1px #555 solid;display:inline-block;height:9px;margin:0 3px -1px 6px;width:14px;"></span>'+v[i]))}document.getElementById(o).setAttribute("class","selected");f.onclick=function(){l.style.display="block";document.onclick=function(){l.style.display="none"};a.onclick=function(e){e.stopPropagation()}};e(p).bind("click",function(){for(i=0;i<p.length;i++){p[i].removeAttribute("class")}this.setAttribute("class","selected");n.style.backgroundColor=this.id;c.innerHTML="<span>"+this.innerHTML+"</span>";l.style.display="none"});for(i=0;i<d.length;i++){d[i].onclick=function(){m()}}})}function r(e,t,n){var r=new Date;r.setDate(r.getDate()+n);var i=escape(t)+(n==null?"":"; expires="+r.toUTCString());document.cookie=e+"="+i}function s(e){var t,n,r,i=document.cookie.split(";");for(t=0;t<i.length;t++){n=i[t].substr(0,i[t].indexOf("="));r=i[t].substr(i[t].indexOf("=")+1);n=n.replace(/^\s+|\s+$/g,"");if(n==e){return unescape(r)}}}e(document).bind("keydown",function(e){if(e.keyCode===13){setTimeout(t,500)}});e("#splash_imo_signin").bind("click",function(){setTimeout(t,500)});setTimeout(t,1e3)};t()})})(jQuery);var e=document.createElement("style");e.type="text/css";e.title="IMO.IM Boost";var t=document.createTextNode("div.contacts-bg{width: 350px !important} right-sidebar{width: 350px !important;} contacts h1, chats h1{width: 350px !important;} contact icon{height: 15px !important; width: 15px !important;} contact .wrapper{width: 230px !important;} contact .proto, .star{top: 11px !important} windows{right: 360px !important;} window{width: 400px !important;} .swatch{display: none !important;} settings .content section.general {padding-bottom: 25px !important;} \n/* dropList */ \n#backgroundColorSet ul, #backgroundColorSet li{list-style:none;margin:0;padding:0}#backgroundColorSet{height:55px;}#dropList{font-family:arial,helvetica,sans-serif;font-size:14px;left:0;margin:0;position:relative;top:0;width:200px}.pref-section-title{margin: 1em 0;} #dropListTop{background-color:#fff;height:20px;position:absolute;width:100%}#dropChoice{background-color:#fff;border-color:#abadb3 transparent #e3e9ef #e2e3ea;border-radius:2px;border-style:solid;border-width:1px;height:20px;left:0;line-height:20px;position:absolute;top:0;width:100%}#dropArrow{border-color:#abadb3 #dbdfe6 #e3e9ef transparent;border-radius:0 2px 2px 0;border-style:solid;border-width:1px;height:20px;padding:1px;position:absolute;right:-2px;top:0;width:18px}#dropArrow .arrow{border-style:solid;border-width:4px 4px 0;border-color:#000 transparent transparent;height:0;left:50%;margin:-2px 0 0 -4px;position:relative;top:50%;width:0}#dropArrow .top{float:left;height:50%;width:100%}#dropArrow .bottom{width:100%;height:50%;float:left}#dropList:hover #dropChoice{border-color:#5794bf transparent #c7e2f1 #c5daed}#dropList:hover #dropArrow{border-color:#5794bf #3c7fb1 #3c7fb1}#dropList:hover #dropArrow .top{background-color:#EAF6FD;background-image:-ms-linear-gradient(top,#EAF6FD 0,#D9F0FC 100%);background-image:-moz-linear-gradient(top,#EAF6FD 0,#D9F0FC 100%);background-image:-o-linear-gradient(top,#EAF6FD 0,#D9F0FC 100%);background-image:-webkit-gradient(linear,left top,left bottom,color-stop(0,#EAF6FD),color-stop(1,#D9F0FC));background-image:-webkit-linear-gradient(top,#EAF6FD 0,#D9F0FC 100%);background-image:linear-gradient(to bottom,#EAF6FD 0,#D9F0FC 100%)}#dropList:hover #dropArrow .bottom{background-color:#BCE5FC;background-image:-ms-linear-gradient(top,#BCE5FC 0,#A9DBF6 100%);background-image:-moz-linear-gradient(top,#BCE5FC 0,#A9DBF6 100%);background-image:-o-linear-gradient(top,#BCE5FC 0,#A9DBF6 100%);background-image:-webkit-gradient(linear,left top,left bottom,color-stop(0,#BCE5FC),color-stop(1,#A9DBF6));background-image:-webkit-linear-gradient(top,#BCE5FC 0,#A9DBF6 100%);background-image:linear-gradient(to bottom,#BCE5FC 0,#A9DBF6 100%)}#dropListBottom{background-color:#fff;border-color:#b2b2b2 #000 #000 #b2b2b2;border-radius:2px;border-style:solid;border-width:1px 1px 1px 2px;display:none;height:132px;overflow-x:hidden;position:absolute;top:20px;width:100%; z-index: 3;}#dropListChoices{}#dropListChoices li{cursor:pointer;height:16px;line-height:16px;}#dropListChoices li a{color:#00f;display:block;text-decoration:none;width:100%}#dropListChoices li a:hover{color:#fff}#dropListChoices li:hover{background-color:#39f;color:#fff}.selected{background-color:#e0edff;}.swatch{border:1px #555 solid;display:inline-block;height:9px;margin:0 3px -1px 6px;width:14px;}#imoBoostIcon{width:31px;height:10px;position:absolute;top:25px;left:68px;z-index:9999;}#imoBoostIcon a{width:31px;height:10px;position:absolute;top:0;left:0; background:url(https://i.imgur.com/Nit7DZt.png) no-repeat scroll -1px -19px / 33px 33px transparent;}");e.appendChild(t);document.getElementsByTagName("head")[0].appendChild(e)}addJQuery(main)
// ==UserScript==
// @name          GR-Tools - Pimp your GayRomeo! :-)
// @namespace     http://gr-tools.justlep.net/
// @description   Thumbnail-Zoom, BMI-Filter, opens Profiles without Popups, etc. etc.
// @version v3.11
// @date    20.03.2014 20:15
// @author LeP <gr-tools@justlep.net> (GR: noscript / GR-Club: GR-Tools)
// @downloadURL http://userscripts.org/scripts/source/33184.user.js
// @exclude http*://www.gayromeo.com*saveMyUser.php*
// @include http*://www.gayromeo.com*/pix/popup.php*
// @include http*://www.gayromeo.com*mainpage.php?set=*
// @include http*://www.gayromeo.com*auswertung/album/*
// @include http*://www.gayromeo.com/*mitglieder/administration/pictures/overview.php*
// @include http*://www.gayromeo.com/*mitglieder/administration/pictures/edit.php?id=*
// @include http*://www.gayromeo.com/*mitglieder/administration/pictures/navigation.php
// @include http*://www.gayromeo.com/*main/top.php*
// @include http*://www.gayromeo.com*auswertung/setcard/cluide/navigation.php*
// @include http*://www.gayromeo.com/*/main/bottom.php
// @include http*://www.gayromeo.com*auswertung/setcard/cluide/club_navigation.php?set=*
// @include http*://www.gayromeo.com*/main/index.php*
// @include http*://www.gayromeo.com*/search/index.php*
// @include http*://www.gayromeo.com*myuser/*page=club
// @include http*://www.gayromeo.com*myuser/*page=club*subPage=forum*
// @include http*://www.gayromeo.com*search/*action=execute*
// @include http*://www.gayromeo.com*search/*action=showPage*
// @include http*://www.gayromeo.com*/search/*execute*searchType=*
// @include http*://www.gayromeo.com*main/personalList/PersonalListPage.php?show*
// @include http*://www.gayromeo.com*0/main/
// @include http*://www.gayromeo.com*/settings/*
// @include http*://www.gayromeo.com*/mitglieder/messages/*
// @include http*://www.gayromeo.com*/myuser/*
// @include http*://www.gayromeo.com*auswertung/setcard/cluide/club_profile.php*
// @include http*://www.gayromeo.com/*auswertung/setcard/*set=*
// @include http*://www.gayromeo.com*msg/history.php*
// @include http*://www.gayromeo.com*/auswertung/setcard/romeo/footprint.php?receiverId=*
// @include http*://www.gayromeo.com*/auswertung/setcard/romeo/saveFootprint.php*&grt_taps_id__*
// @exclude http*://www.planetromeo.com*saveMyUser.php*
// @include http*://www.planetromeo.com*/pix/popup.php*
// @include http*://www.planetromeo.com*mainpage.php?set=*
// @include http*://www.planetromeo.com*auswertung/album/*
// @include http*://www.planetromeo.com/*mitglieder/administration/pictures/overview.php*
// @include http*://www.planetromeo.com/*mitglieder/administration/pictures/edit.php?id=*
// @include http*://www.planetromeo.com/*mitglieder/administration/pictures/navigation.php
// @include http*://www.planetromeo.com/*main/top.php*
// @include http*://www.planetromeo.com*auswertung/setcard/cluide/navigation.php*
// @include http*://www.planetromeo.com/*/main/bottom.php
// @include http*://www.planetromeo.com*auswertung/setcard/cluide/club_navigation.php?set=*
// @include http*://www.planetromeo.com*/main/index.php*
// @include http*://www.planetromeo.com*/search/index.php*
// @include http*://www.planetromeo.com*myuser/*page=club
// @include http*://www.planetromeo.com*myuser/*page=club*subPage=forum*
// @include http*://www.planetromeo.com*search/*action=execute*
// @include http*://www.planetromeo.com*search/*action=showPage*
// @include http*://www.planetromeo.com*/search/*execute*searchType=*
// @include http*://www.planetromeo.com*main/personalList/PersonalListPage.php?show*
// @include http*://www.planetromeo.com*0/main/
// @include http*://www.planetromeo.com*/settings/*
// @include http*://www.planetromeo.com*/mitglieder/messages/*
// @include http*://www.planetromeo.com*/myuser/*
// @include http*://www.planetromeo.com*auswertung/setcard/cluide/club_profile.php*
// @include http*://www.planetromeo.com/*auswertung/setcard/*set=*
// @include http*://www.planetromeo.com*msg/history.php*
// @include http*://www.planetromeo.com*/auswertung/setcard/romeo/footprint.php?receiverId=*
// @include http*://www.planetromeo.com*/auswertung/setcard/romeo/saveFootprint.php*&grt_taps_id__*
// @exclude http*://83.98.143.20*saveMyUser.php*
// @include http*://83.98.143.20*/pix/popup.php*
// @include http*://83.98.143.20*mainpage.php?set=*
// @include http*://83.98.143.20*auswertung/album/*
// @include http*://83.98.143.20/*mitglieder/administration/pictures/overview.php*
// @include http*://83.98.143.20/*mitglieder/administration/pictures/edit.php?id=*
// @include http*://83.98.143.20/*mitglieder/administration/pictures/navigation.php
// @include http*://83.98.143.20/*main/top.php*
// @include http*://83.98.143.20*auswertung/setcard/cluide/navigation.php*
// @include http*://83.98.143.20/*/main/bottom.php
// @include http*://83.98.143.20*auswertung/setcard/cluide/club_navigation.php?set=*
// @include http*://83.98.143.20*/main/index.php*
// @include http*://83.98.143.20*/search/index.php*
// @include http*://83.98.143.20*myuser/*page=club
// @include http*://83.98.143.20*myuser/*page=club*subPage=forum*
// @include http*://83.98.143.20*search/*action=execute*
// @include http*://83.98.143.20*search/*action=showPage*
// @include http*://83.98.143.20*/search/*execute*searchType=*
// @include http*://83.98.143.20*main/personalList/PersonalListPage.php?show*
// @include http*://83.98.143.20*0/main/
// @include http*://83.98.143.20*/settings/*
// @include http*://83.98.143.20*/mitglieder/messages/*
// @include http*://83.98.143.20*/myuser/*
// @include http*://83.98.143.20*auswertung/setcard/cluide/club_profile.php*
// @include http*://83.98.143.20/*auswertung/setcard/*set=*
// @include http*://83.98.143.20*msg/history.php*
// @include http*://83.98.143.20*/auswertung/setcard/romeo/footprint.php?receiverId=*
// @include http*://83.98.143.20*/auswertung/setcard/romeo/saveFootprint.php*&grt_taps_id__*
// @icon data:image/gif;base64,R0lGODlhHgAeAOYAAOUvLPn6+rWQZDxjttqus2JOJehbCpbI6eWGWvOGPYiHixCY0Hl5d7S0tUNswCdauvBSQwVPhxQnbUy4SfGsdDFfulHDTSRGmNhJD12HsDygQHGs16wsDPyOIOhwLZ+jpNPLugwWVM00CS1Xr0V6vOxoWPDmsIRsN6x1NQYGBgp0sehiDUFtcec+N/vjjz6zQ6WogytaWMhcXoBuVzhaqdWldh45hiVJcKxnSEqOz2x3hVovF01VjgEpXTJpwc9rNJiBYv6lG/N8HkOHO7FZLEiqReLi4/XOk4+ZntSOT5mvwlVql4tCLaI3UolWefJlCeuTbDJjmuNhG9VhFOIaIwhAbkJZpAZfmV45Sqh2cM4MGHNoYHi44yU6WX5HcwmBvFezVytOouEkKNtuc+NvG8EmHPoaFvAjHuRJQs9/Ts6HP6jeot/AI0hMUE6bWEuVY+tgU+GqMYV1Ivi9e8ZBCi03cFSrWEyySFqe3GafzNebYepvDvRvIS49OkBouzFctiH5BAAAAAAALAAAAAAeAB4AAAf/gA4OA2EDfjQ0Aw5+fgOIiIyRjImRJH4XISESI5khYRUVNp02oKUVPhI2Pn9/hiGqf5x/rz4+FZwjYZojmJupoheDIX+YmJmhm7O6FzYSIRcS0b0jjK8Vr88hvDaxnsOiIcipf9GCxtkV0aW44GHtv5qLt2F/FQ8PVvlW9yP1YSOg/t0akasCI1b2rDiRUaIhHBlO9oFiVa8CxXp/Dj4Y4QUNBAhwQn6EgMbLg4soKTKqEKZJixYjSZJ8CaDJA4spVTpoCQDAy5dofrboecZmTpUDWIg507OpmKdPqUg1Y3JiSj9WXpygAlXMmDFQEJAhI4QMESZYIlwIcw+lHxYW/+6UkQqAwIG7B0ywkdOnR4S/VarEWDKgbcY3Fiyc0EKFABc8GTJA7hKix40IKlT87YIiDhAaJ/3YmUCaA5oDOXLMIBKlR4guAlhc+fLlSoQqWISwUQPaDxjSFoaM4UKCBBMRRNIkSZBlduYvmkP0IRIEhxXfpCe8gLHBxxcmBp4YCM9k9oLztXuoxyEEhx832cFYOKAiyorx41eI4KBjwwEueZDwVwRY8MHHEixkR9oaeZwgHn4GSEEBCEjooMMHSggYwQ8ddIBgEXcoCAMRBqxwX3hQgKADAw00wAADGUaAQhBBZBHGECBm94IcBuwxHgYeHAHEBwEYYUQACiigxOYVOHSYwAA3aJDjHTs+cR8dHGSBBAMBIElkAFsgocAPQnSQxE4xSFmEdkw84SMHHOixRQNGMNBHHwoEUGENBnYggB/ExDCElBoU4KYBdNABBQpENtDGnEjqUIMQUgTBAKAs3SBooSWORwcCeszQJRINFDlDAwgkkIAQSwDKCi+a9kHHgwZ4QAEQDBxZZBs71EDBER3gYNBFFoVxwQ4YdGpAArdukeQWO6SwgwsmJMDDAAOkZFEdZWCwgrfLUlCDAAJQQEEBKRQwhwCtWCJJJBVgUQYd3UohhQcJhIXAHC7Ika4SOTgQCAA7
// ==/UserScript==

/**
 * Each & every line: 
 * Copyright(c) by LeP <gr-tools@justlep.net> (GR: noscript / GR-Club: GR-Tools)
 *
 * Modifications and/or reuse of the GR-Tools code require my explicit consent.
 * You are NOT allowed to publish any changed version of the GR-Tools!
 *
 * All code has been tested with a recent Firefox and Chrome browser.
 * However, the use of this script is at your own risk.
 *
 * ** Privacy **
 * The GR-Tools do NOT and never will include any code to identify you
 * or spy on your data. There is no commercial interest, no backdoors,
 * no line of code intended to harm you and/or your privacy.
 *
 * The latest version of the GR-Tools are always available on userscripts.org: 
 * http://userscripts.org/scripts/show/33184
 */ 

// #####################################################################################################################
// ################################################ BEGIN OF USERSCRIPT ################################################
// #####################################################################################################################



GRT=(function(grtVersion){var DEBUG=false,win=(typeof unsafeWindow!='undefined')?unsafeWindow:self,doc=(win.document.unsafeObject||win.document),version=grtVersion,PAGE_URL=location.href||'',ALLOWED_URLS_REGEX=/^https?:\/\/(?:www\.)?(?:planetromeo\.com|gayromeo\.com|83\.98\.143\.20|(?:gr-tools|ref)\.justlep\.net)/,ANON_URL_HASH='#GRT_ANON_PROFILE',BASE_URL_REGEX=/(https?:\/\/[^\/]*)/,useSSL=location.protocol.indexOf('https')>=0,CONFIG_COOKIE_NAME='grt',CONFIG_COOKIE_TTL=14,config={keep:0,de:1,rc:1,pica:1,dim:0,tit:0,lt:1,sb:1,bmi:1,bmin:17,bmax:27,age:1,amin:18,amax:88,secr:1,popa:1,popt:1,z:1,pl:1,lm:1,yth:1,ytp:1,ytpr:1,taps:1},processors={},processorIdInitOrder=[],moreAllowed=true,modulesNeedDispatcher=false,finalized=false,NOP=function(){},configHtmlProviderFn=null,dispatcher=null,cssQueue=[],cssInjector=null,console=win.console,bodyClass=doc.body.className||'',LOG_ENABLED=DEBUG&&typeof console!='undefined'&&typeof console.log=='function'&&typeof console.log.apply=='function',DOMAIN={GR:'www.gayromeo.com',PR:'www.planetromeo.com',IP:'83.98.143.20'},log=(!LOG_ENABLED)?NOP:function(){console.log.apply(console,arguments);},assertTrue=function(expr,errorMsg){if(expr)return;arguments[1]='(!) '+arguments[1];log.apply(this,Array.prototype.slice.call(arguments,1));throw'GRT assertion error.';},assertIsAllowedUrl=function(url){var isValidUrl=url.indexOf('/')===0||url.match(ALLOWED_URLS_REGEX);assertTrue(isValidUrl,'The given URL seems to link outside GR or the GR-Tools page: ',url);},MIN_AGE=18,MAX_AGE=123,MIN_BMI=10,MAX_BMI=70,setConfig=function(o){o=o||{};for(var key in o){var k=''+key,val=parseInt(''+o[k],10)||0;if(typeof config[k]=='undefined')continue;if(k=='amin')val=Math.max(Math.min(MAX_AGE,val),MIN_AGE);else
if(k=='amax')val=Math.max(Math.min(MAX_AGE,val),MIN_AGE);else
if(k=='bmin')val=Math.max(Math.min(MAX_BMI,val),MIN_BMI);else
if(k=='bmax')val=Math.max(Math.min(MAX_BMI,val),MIN_BMI);config[k]=val;}
var tmp=[config.amin,config.amax];config.amin=Math.min(tmp[0],tmp[1]);config.amax=Math.max(tmp[0],tmp[1]);tmp=[config.bmin,config.bmax];config.bmin=Math.min(tmp[0],tmp[1]);config.bmax=Math.max(tmp[0],tmp[1]);},serializeConfig=function(){var s=[];for(var k in config){s[s.length]=k+':'+config[k];}
return s.join('|');},deserializeConfig=function(s){var cfg={},pairs=s.split('|');for(var i=0;i<pairs.length;i++){var keyVal=pairs[i].split(':');cfg[keyVal[0]]=keyVal[1];}
return cfg;},loadConfigFromCookie=function(){var cookies=(document.cookie||'').split(';');for(var i=0;i<cookies.length;i++){var cookie=cookies[i].trim();if(cookie.substring(0,CONFIG_COOKIE_NAME.length+1)==(CONFIG_COOKIE_NAME+'=')){var serializedConfig=decodeURIComponent(cookie.substring(CONFIG_COOKIE_NAME.length+1)),newConfig=deserializeConfig(serializedConfig);setConfig(newConfig);return;}}
},saveConfigCookie=function(){var expiryDateString='';if(config.keep){var newExpiryDate=new Date();newExpiryDate.setTime(newExpiryDate.getTime()+CONFIG_COOKIE_TTL*24*60*60*1000);expiryDateString=newExpiryDate.toUTCString();}
var cookieData=[CONFIG_COOKIE_NAME,'=',encodeURIComponent(serializeConfig()),'; expires=',expiryDateString,'; path=/'];document.cookie=cookieData.join('');},getVersion=function(){return version;},urlContainsAll=function(){for(var i=arguments.length-1;i>=0;i--){if(PAGE_URL.indexOf(arguments[i])<0)return false;}
return true;},urlContainsAny=function(){for(var i=arguments.length-1;i>=0;i--){if(PAGE_URL.indexOf(arguments[i])>=0)return true;}
return false;},hasProcessor=function(processorID){return!!processors[processorID];},addProcessor=function(processor){assertTrue(!finalized,'Cannot add processor after finalize() called.');var id=(processor||{}).ID;try{assertTrue(!!processor&&typeof processor=='object','Invalid processor: ',processor);assertTrue(moreAllowed,'No more page processors allowed');assertTrue(!processor.EXCLUSIVE||!processorIdInitOrder.length,'Processor <%s> cannot be added alongside other processors. It is exclusive.',id);assertTrue(!!id,'Invalid processor id <%s>',id);assertTrue(!processors[id],'Processor <%s> already registered',id);assertTrue(typeof processor.init=='function','Invalid or missing init-method for processor <%s>',id);processors[id]=processor;moreAllowed&=!processor.EXCLUSIVE;modulesNeedDispatcher|=processor.NEEDS_DISPATCHER;processorIdInitOrder.push(id);if(processor.CSS){for(var i=0;i<processor.CSS.length;i++){cssQueue[cssQueue.length]=processor.CSS[i];}}
}catch(e){}},supportsUrl=function(matcherFn){assertTrue(!finalized,'supportsUrl() not available after finalize() called.');return matcherFn(PAGE_URL,bodyClass);},addClass=function(elem,cls){if(!elem)return;var oldClass=elem.className||'';elem.className=oldClass+' '+cls;},stopEvent=function(e){if(!e)return;e.cancelBubble=true;if(e.preventDefault)e.preventDefault();if(e.stopPropagation)e.stopPropagation();},initProcessors=function(){for(var i=0;i<processorIdInitOrder.length;i++){try{var processorId=processorIdInitOrder[i],processor=processors[processorId],now=+new Date();processor.init(GRT_PUBLIC,HELPERS_FOR_PROCESSORS);var dur=(+new Date())-now;}catch(e){}}},setDispatcher=function(_dispatcher){assertTrue(!finalized,'Cannot set dispatcher after finalize() called.');dispatcher=_dispatcher;dispatcher.init(GRT_PUBLIC,HELPERS_FOR_PROCESSORS);},setCssInjector=function(_injector){assertTrue(!finalized,'Cannot set CSSInjector after finalize() called.');cssInjector=_injector;},needsDispatcher=function(){return modulesNeedDispatcher;},needsCssInjector=function(){return!!cssQueue.length;},anonymousBaseUrl=null,getAnonymousBaseUrl=function(){if(!anonymousBaseUrl){anonymousBaseUrl=top.location.protocol+'//';if(useSSL){anonymousBaseUrl+=((top.location.host==DOMAIN.PR)?DOMAIN.GR:DOMAIN.PR);}else{anonymousBaseUrl+=((top.location.host==DOMAIN.IP)?DOMAIN.PR:DOMAIN.IP);}}
return anonymousBaseUrl;},anonymizeUrl=function(url){return url.replace(BASE_URL_REGEX,getAnonymousBaseUrl())+ANON_URL_HASH+location.host;},unanonymizeUrl=function(url,newDomainIndex){var urlToUse=url,targetHost=DOMAIN[''+newDomainIndex]||'';if(!targetHost)return url;targetHost=location.protocol+'//'+targetHost;if(urlToUse.indexOf('..')===0){urlToUse=urlToUse.replace(/^(?:\.\.\/)+/,'/');}
return urlToUse.replace(BASE_URL_REGEX,targetHost);},xpath=function(xpath,refNode){var n=[],res=(doc).evaluate(xpath,refNode||doc,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null),r=res.iterateNext();while(r){n[n.length]=r;r=res.iterateNext();}
return n;},bodyClassContainsAny=function(){var cls=doc.body.className||'';for(var i=arguments.length-1;i>=0;i--){if(cls.indexOf(arguments[i])>=0)return true;}
return false;},finalize=function(customConfig){assertTrue(!finalized,'Cannot run finalize() twice!');if(customConfig){setConfig(customConfig);}
loadConfigFromCookie();initProcessors();finalized=true;if(dispatcher){dispatcher.finalize();}
if(cssInjector){cssInjector.init(GRT_PUBLIC,HELPERS_FOR_PROCESSORS,cssQueue);}
},isAnonymousUrl=function(url){return url&&url.indexOf(ANON_URL_HASH)>0;},setConfigHtmlProviderFunction=function(fn){assertTrue(typeof fn=='function',"The given ConfigHtmlProvider is NOT a function!");configHtmlProviderFn=fn;},getConfigHtml=function(){return configHtmlProviderFn?configHtmlProviderFn():'No ConfigHtmlProvider registered!';},addExternalRetriggerHandler=function(fn){doc.addEventListener('GRT_RETRIGGER',fn,false);},hashContains=function(s){return(location.hash||'').indexOf(s)>0;},HELPERS_FOR_PROCESSORS={setConfig:setConfig,anonymizeUrl:anonymizeUrl,config:config,unanonymizeUrl:unanonymizeUrl,getAnonymousBaseUrl:getAnonymousBaseUrl,ANON_URL_HASH:ANON_URL_HASH,log:log,assertTrue:assertTrue,xpath:xpath,getVersion:getVersion,doc:doc,win:win,useSSL:useSSL,assertIsAllowedUrl:assertIsAllowedUrl,addClass:addClass,stopEvent:stopEvent,isAnonymousUrl:isAnonymousUrl,urlContainsAny:urlContainsAny,urlContainsAll:urlContainsAll,hashContains:hashContains,bodyClassContainsAny:bodyClassContainsAny,saveConfigCookie:saveConfigCookie,setConfigHtmlProviderFunction:setConfigHtmlProviderFunction,getConfigHtml:getConfigHtml,refreshConfig:loadConfigFromCookie,addExternalRetriggerHandler:addExternalRetriggerHandler},GRT_PUBLIC={supportsUrl:supportsUrl,addProcessor:addProcessor,needsDispatcher:needsDispatcher,needsCssInjector:needsCssInjector,setDispatcher:setDispatcher,setCssInjector:setCssInjector,getVersion:getVersion,hasProcessor:hasProcessor,finalize:finalize,urlContainsAny:urlContainsAny,urlContainsAll:urlContainsAll,hashContains:hashContains,bodyClassContainsAny:bodyClassContainsAny};return GRT_PUBLIC;})('3.11');


// #####################################################################################################################
// ################################################ BEGIN: ADD PROCESSORS ##############################################
// #####################################################################################################################




// -------------------- BEGIN PROCESSOR: Rightclick ----------------------


if(GRT.urlContainsAny('/pix/popup.php','mainpage.php?set=','auswertung/album/')){GRT.addProcessor((function(PROCESSOR_ID){var log=null,init=function(grt,helpers){log=helpers.log;if(!helpers.config.rc)return;var doc=helpers.doc,fuckedObjects=[doc],img=doc.getElementById('picture');if(img)fuckedObjects.push(img);for(var i=fuckedObjects.length-1;i>=0;i--){var o=fuckedObjects[i];o.onmousedown=null;o.ondragstart=null;o.oncontextmenu=null;}};return{ID:PROCESSOR_ID,EXCLUSIVE:true,NEEDS_DISPATCHER:false,init:init};})('Rightclick'));}

// -------------------- END PROCESSOR: Rightclick ------------------------



// -------------------- BEGIN PROCESSOR: PictureAdministration ----------------------


if(GRT.urlContainsAny('mitglieder/administration/pictures/overview.php','mitglieder/administration/pictures/edit.php?id=')){GRT.addProcessor((function(PROCESSOR_ID){var log=null,assertTrue=null,grt=null,doc=null,assertIsAllowedUrl=null,handleImagePage=function(url,imageParam){grt.registerAction('restorePicHTML',function(args){var html=args.html,isMoreThanOne=(html.match(/<img/g)||[]).length>1;if(isMoreThanOne){var h1=doc.getElementsByTagName('h1')[0],div=doc.createElement('div');div.id='grtimageblablubs';div.innerHTML=html;h1.parentNode.insertBefore(div,h1);}
var as=doc.getElementById('grtimageblablubs').getElementsByTagName('a'),currentFound=false,nextImageUrl='';for(var i=0;i<as.length;i++){var a=as[i],isCurrent=a.href.indexOf(imageParam)>=0;if(!isCurrent&&!currentFound)continue;if(!isCurrent&&currentFound){nextImageUrl=a.href;break;}
as[i].className='blubs';currentFound=true;}
grt.callAction('cacheSaveNextImageUrl',{url:nextImageUrl});});grt.callAction('cacheRestorePicHTML');},handleImageOverviewAfterComment=function(){grt.registerAction('restoreNextImageOrGalleryUrl',function(args){var url=args.url;assertIsAllowedUrl(url);self.location.href=url;});grt.callAction('cacheRestoreNextImageOrGalleryUrl');},handleGalleryPage=function(url){var picHTML=[],pics=doc.getElementsByClassName('thumb');for(var i=0;i<pics.length;i++){var html=pics[i].parentNode.parentNode.innerHTML;picHTML.push(html);}
grt.callAction('cacheSetPicHTML',{html:picHTML.join('&nbsp;'),galleryUrl:url});},init=function(_grt,helpers){grt=_grt;if(!helpers.config.pica)return;log=helpers.log;assertIsAllowedUrl=helpers.assertIsAllowedUrl;assertTrue=helpers.assertTrue;doc=helpers.doc;var url=location.href,isGallery=/folder=-?\d+/.test(url),isOverviewAfterComment=/action=comment&id=\d+/.test(url),imageParam=(url.match(/(id=\d+)/)||[])[0],isImage=!!imageParam;if(isOverviewAfterComment){handleImageOverviewAfterComment(url);}else if(isGallery){handleGalleryPage(url);}else if(isImage){handleImagePage(url,imageParam);}};return{ID:PROCESSOR_ID,EXCLUSIVE:false,NEEDS_DISPATCHER:true,CSS:['pictureAdmin'],init:init};})('PictureAdministration'));}

// -------------------- END PROCESSOR: PictureAdministration ------------------------



// -------------------- BEGIN PROCESSOR: PictureAdministrationCache ----------------------


if(GRT.urlContainsAny('mitglieder/administration/pictures/navigation.php')){GRT.addProcessor((function(PROCESSOR_ID){var log=null,assertTrue=null,assertIsAllowedUrl=null,grt=null,doc=null,url=location.href,picHTML=null,lastGalleryUrl=null,nextImageUrl=null,init=function(_grt,helpers){grt=_grt;log=helpers.log;if(!helpers.config.pica)return;assertTrue=helpers.assertTrue;assertIsAllowedUrl=helpers.assertIsAllowedUrl;doc=helpers.doc;grt.registerAction('cacheSaveNextImageUrl',function(args){var url=args.url;if(!url){nextImageUrl=null;}else{assertIsAllowedUrl(url);nextImageUrl=url;}});grt.registerAction('cacheRestoreNextImageOrGalleryUrl',function(){var url=nextImageUrl||lastGalleryUrl;if(!url)return;grt.callAction('restoreNextImageOrGalleryUrl',{url:url});});grt.registerAction('cacheSetPicHTML',function(args){assertIsAllowedUrl(args.galleryUrl);lastGalleryUrl=args.galleryUrl;picHTML=args.html;});grt.registerAction('cacheRestorePicHTML',function(){if(!picHTML)return;grt.callAction('restorePicHTML',{html:picHTML});});};return{ID:PROCESSOR_ID,EXCLUSIVE:false,NEEDS_DISPATCHER:true,CSS:false,init:init};})('PictureAdministrationCache'));}

// -------------------- END PROCESSOR: PictureAdministrationCache ------------------------



// -------------------- BEGIN PROCESSOR: Header ----------------------


if(GRT.urlContainsAny('/main/top.php','auswertung/setcard/cluide/navigation.php')){GRT.addProcessor((function(PROCESSOR_ID){var log=null,doc=null,grt=null,helpers=null,addClass=null,assertTrue=null,version=null,liveVersionInfo=null,UPDATE_INFO_URL='http://gr-tools.justlep.net/v3/builds/updateInfo.php?v=',ALTERNATIVE_TITLE='R..',lastHotlinkFilterSoothTime=0,HOTLINK_FILTER_REFRESH_TIME=60,HANDLERS={CLUB_CLICK:function(){grt.callAction('openClub');},CONFIG_CLICK:function(){grt.callAction('openConfig');},UPDATE_CLICK:function(){if(!liveVersionInfo)return;if(!liveVersionInfo.needsUpdate){return;}
helpers.refreshConfig();var updateInfoUrl=UPDATE_INFO_URL+
encodeURIComponent(liveVersionInfo.currentVersion)+'&lang='+(helpers.config.de?'de':'en');grt.callAction('loadInOverlay',{url:updateInfoUrl});},RECEIVE_LIVE_VERSION:function(newVersionInfo){if(liveVersionInfo)return;liveVersionInfo=newVersionInfo;if(liveVersionInfo.needsUpdate){addClass(doc.getElementById('grtDiv'),'grtUpdateAvailable');}}},sootheHotlinkFilter=function(){var allowedAfter=lastHotlinkFilterSoothTime+(HOTLINK_FILTER_REFRESH_TIME*1000),now=(+new Date);if(now<allowedAfter)return;lastHotlinkFilterSoothTime=now;var img=doc.createElement('img');img.id='grtHLS';img.style.display='none';doc.body.appendChild(img);img.src=helpers.getAnonymousBaseUrl()+'/';},addElements=function(){var div=doc.createElement('div');div.innerHTML='<div id="grtDiv"><div id="grtPimp"><i title="v'+version+'">pimped by<b>GR-Tools v'+helpers.getVersion()+'</b></i></div>'+'<span id="grtClub" title="GR-Tools Club"></span>'+'<span id="grtCfg" title="GR-Tools Setup"></span>'+'<span id="grtUpd" title="GR-Tools Update"></span>'+'</div>';doc.body.appendChild(div.childNodes[0]);doc.getElementById('grtClub').addEventListener('click',HANDLERS.CLUB_CLICK,false);doc.getElementById('grtCfg').addEventListener('click',HANDLERS.CONFIG_CLICK,false);doc.getElementById('grtUpd').addEventListener('click',HANDLERS.UPDATE_CLICK,false);},recheckDimFeature=function(){helpers.refreshConfig();var DIM_CHECK_REGEX=/\s?grtDimLogo/,bodyHasDimClass=DIM_CHECK_REGEX.test(doc.body.className||'');if(helpers.config.dim&&!bodyHasDimClass){doc.body.className+=' grtDimLogo';}else if(!helpers.config.dim&&bodyHasDimClass){doc.body.className=doc.body.className.replace(DIM_CHECK_REGEX,'');}},originalTitle=null,recheckTitleFeature=function(){try{if(!helpers.config.tit&&originalTitle){top.document.title=originalTitle;}else if(helpers.config.tit){if(!originalTitle){originalTitle=top.document.title;}
top.document.title=ALTERNATIVE_TITLE;}}catch(e){}},refreshHeaderConfig=function(dontReloadConfig){if(dontReloadConfig!==true){helpers.refreshConfig();}
recheckDimFeature();recheckTitleFeature();},init=function(_grt,_helpers){log=_helpers.log;doc=_helpers.doc;grt=_grt;helpers=_helpers;addClass=_helpers.addClass;version=_helpers.getVersion();assertTrue=_helpers.assertTrue;var isClub=!!doc.getElementsByClassName('clubBack').length,isGuide=!isClub&&!!doc.getElementsByClassName('cluideBack').length;if(isClub){_helpers.addClass(doc.body,'grtClub');}else if(isGuide){_helpers.addClass(doc.body,'grtGuideClub');}
grt.registerAction('setLatestGRTVersion',HANDLERS.RECEIVE_LIVE_VERSION);grt.registerAction('sootheHotlinkFilter',sootheHotlinkFilter);grt.registerAction('refreshHeaderConfig',refreshHeaderConfig);addElements();refreshHeaderConfig(true);_helpers.saveConfigCookie();};return{ID:PROCESSOR_ID,EXCLUSIVE:false,NEEDS_DISPATCHER:true,CSS:['header'],init:init};})('Header'));}

// -------------------- END PROCESSOR: Header ------------------------



// -------------------- BEGIN PROCESSOR: Version ----------------------


if(GRT.hasProcessor('Header')){GRT.addProcessor((function(PROCESSOR_ID){var log=null,doc=null,grt=null,helpers=null,VERSION_IMG_URL={HTTP:'http://gr-tools.justlep.net/v3/builds/version.php',HTTPS:'https://ssl-account.com/gr-tools.justlep.net/v3/builds/version.php'},assertTrue=null,versionImg=null,latestVersion=null,HANDLERS={VERSION_IMG_LOAD:function(e){assertTrue(!!versionImg,'Version image seems null although it should be loaded.');var latestMajor=(versionImg.width||1)-1,latestMinor=(versionImg.height||1)-1,versionString=latestMajor+'.'+latestMinor,currentVersion=grt.getVersion(),currSplit=currentVersion.split('.'),currentMajor=parseInt(currSplit[0],10),currentMinor=parseInt(currSplit[1],10),needsUpdate=currentMajor<latestMajor||currentMinor<latestMinor;latestVersion={latestMajor:latestMajor,latestMinor:latestMinor,latestVersion:versionString,currentMajor:currentMajor,currentMinor:currentMinor,currentVersion:grt.getVersion(),needsUpdate:needsUpdate};checkLatestGRTVersion();versionImg.removeEventListener('load',HANDLERS.VERSION_IMG_LOAD);}},checkLatestGRTVersion=function(){if(!latestVersion&&versionImg){return;}
if(latestVersion){grt.callAction('setLatestGRTVersion',latestVersion);return;}
versionImg=doc.createElement('img');versionImg.addEventListener('load',HANDLERS.VERSION_IMG_LOAD,false);var imgUrl=(helpers.useSSL)?VERSION_IMG_URL.HTTPS:VERSION_IMG_URL.HTTP;versionImg.src=imgUrl+'?'+(+new Date());},init=function(_grt,_helpers){log=_helpers.log;doc=_helpers.doc;helpers=_helpers;grt=_grt;assertTrue=_helpers.assertTrue;grt.registerAction('checkLatestGRTVersion',checkLatestGRTVersion);checkLatestGRTVersion();};return{ID:PROCESSOR_ID,EXCLUSIVE:false,NEEDS_DISPATCHER:true,CSS:false,init:init};})('Version'));}

// -------------------- END PROCESSOR: Version ------------------------



// -------------------- BEGIN PROCESSOR: ClubOpener ----------------------


if(GRT.urlContainsAny('/main/bottom.php','auswertung/setcard/cluide/club_navigation.php?set=','/main/index.php','/search/index.php')){GRT.addProcessor((function(PROCESSOR_ID){var CLUB_URL='/auswertung/setcard/index.php?set=3053381&t=3&page=club',log=null,win=null,init=function(grt,helpers){log=helpers.log;win=helpers.win;if(typeof win.openUrl=='function'){grt.registerAction('openClub',function(){win.openUrl(CLUB_URL);});}};return{ID:PROCESSOR_ID,EXCLUSIVE:false,NEEDS_DISPATCHER:true,CSS:false,init:init};})('ClubOpener'));}

// -------------------- END PROCESSOR: ClubOpener ------------------------



// -------------------- BEGIN PROCESSOR: ForumLatestThreads ----------------------


if(GRT.urlContainsAll('/myuser/','page=club')){GRT.addProcessor((function(PROCESSOR_ID){var log=null,MONTHS=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],today=new Date(),DEFAULT_DAY_REGEX=/\d{1,2}\.[a-z]{3}\.\d{4}/i,getDayRegex=function(date){if(!date)return DEFAULT_DAY_REGEX;var day=date.getDate(),dayPrefix=(day<10)?'0':'',year=date.getFullYear(),monthName=MONTHS[date.getMonth()];return new RegExp(dayPrefix+day+'\\.'+monthName+'\\.'+year);},regexes={},init=function(grt,helpers){log=helpers.log;if(!helpers.config.lt)return;regexes['today exact']=getDayRegex(today);today.setDate(today.getDate()-1);regexes['today minus1']=getDayRegex(today);today.setDate(today.getDate()-1);regexes['today minus2']=getDayRegex(today);regexes['today older']=getDayRegex();var tds=helpers.doc.getElementById('content').getElementsByTagName('td');for(var i=tds.length-1;i>=0;i--){var td=tds[i];if(td.align!='right')continue;for(var k in regexes){if(!regexes[k].test(td.innerHTML||''))continue;td.parentNode.className=(td.parentNode.className||'')+k;break;}}};return{ID:PROCESSOR_ID,EXCLUSIVE:false,NEEDS_DISPATCHER:false,CSS:['forumLatestThreads'],init:init};})('ForumLatestThreads'));}

// -------------------- END PROCESSOR: ForumLatestThreads ------------------------



// -------------------- BEGIN PROCESSOR: BMIAgeFilter ----------------------


if(GRT.bodyClassContainsAny('searchResults')){GRT.addProcessor((function(PROCESSOR_ID){var log=null,doc=null,stopEvent=null,grt=null,helpers=null,liveHandlerBound=false,DONE_MARKER_CLASS='grtBMIDone',AGE_FILTER_CLASS=' grtOffAge',BMI_FILTER_CLASS=' grtOffBmi',bmiElemPrototype=null,HANDLERS={BMI_CLICK:function(e){if(!e.target||e.button==2||e.target.className!='grtBMI')return;stopEvent(e);var profileUrl=getUrlFromBMILink(e.target);grt.callAction('loadInOverlay',{url:profileUrl,anonymize:helpers.config.secr});}},getUrlFromBMILink=function(bmiElement){if(!bmiElement)return'#';return bmiElement.parentNode.parentNode.getElementsByTagName('a')[0].href;},BMI_REGEX=/(\d{2,3})(?: [A-Za-z]+)?,\s+(\d{2,3}) cm,\s+(?:<[^>]+>)?(\d{1,3}) kg/,determineBMIAndAge=function(td){var txt=(td.textContent||'').replace(/[\r\n]/g,'');if(!BMI_REGEX.exec(txt))return'?';var age=parseInt(RegExp.$1,10),size=parseInt(RegExp.$2,10)/100.0,weight=parseInt(RegExp.$3,10),bmi=Math.round(weight/(size*size));return{bmi:bmi,age:age};},getBMIElementForTD=function(td){if(!bmiElemPrototype){bmiElemPrototype=doc.createElement('i');bmiElemPrototype.className='grtBMI';}
var bmiElem=null,bmiAndAge=determineBMIAndAge(td.nextElementSibling),config=helpers.config;try{var offAge=config.age&&(bmiAndAge.age<config.amin||bmiAndAge.age>config.amax),offBmi=config.bmi&&(bmiAndAge.bmi<config.bmin||bmiAndAge.bmi>config.bmax);if(offAge||offBmi){markParentTrFiltered(offAge,offBmi,td);}}catch(e){}
if(config.sb){bmiElem=bmiElemPrototype.cloneNode(false);bmiElem.textContent='('+(bmiAndAge.bmi||'?')+')';}
return bmiElem;},markParentTablesDone=function(td){var table=td.parentNode;while(table){if(table.nodeName.toLowerCase()=='table'){table.className+=' '+DONE_MARKER_CLASS;}
table=table.parentNode;}},markParentTrFiltered=function(offAge,offBmi,td){var tr=td.parentNode,cls=(offAge?AGE_FILTER_CLASS:'')+(offBmi?BMI_FILTER_CLASS:'');tr.className+=cls;tr.nextElementSibling.className+=cls;},decorateResultList=function(){if((doc.body.className||'').indexOf('searchResults')<0)return;var userLinks=helpers.xpath('//table[not(contains(@class,"'+DONE_MARKER_CLASS+'"))]//td[contains(@class,"resHeadline")]/a[contains(@href,"setcard")]'),td=null;for(var i=0;i<userLinks.length;i++){var link=userLinks[i],username=link.textContent;td=link.parentNode;td.parentNode.setAttribute('username',username);var bmiElem=getBMIElementForTD(td);if(bmiElem){td.appendChild(bmiElem);}
td.className+=' '+DONE_MARKER_CLASS;}
if(td){markParentTablesDone(td);if(!liveHandlerBound&&helpers.config.sb){doc.addEventListener('click',HANDLERS.BMI_CLICK,true);liveHandlerBound=true;grt.callAction('sootheHotlinkFilter');}}},init=function(_grt,_helpers){log=_helpers.log;doc=_helpers.doc;stopEvent=_helpers.stopEvent;grt=_grt;helpers=_helpers;decorateResultList();_helpers.addExternalRetriggerHandler(decorateResultList);};return{ID:PROCESSOR_ID,EXCLUSIVE:false,NEEDS_DISPATCHER:false,CSS:['bmi'],init:init};})('BMIAgeFilter'));}

// -------------------- END PROCESSOR: BMIAgeFilter ------------------------



// -------------------- BEGIN PROCESSOR: HistoryLink ----------------------


if(GRT.hasProcessor('BMIAgeFilter')||GRT.urlContainsAny('main/personalList/PersonalListPage.php?show')){GRT.addProcessor((function(PROCESSOR_ID){var log=null,doc=null,xpath=null,stopEvent=null,assertTrue=null,grt=null,histLinkPrototype=null,randNo=0,liveHandlerBound=false,DONE_MARKER_CLASS='grtHistDone',HANDLERS={HISTORY_ICON_CLICK:function(e){if(!e.target||e.target.className!='grtHist')return;stopEvent(e);var historyUrl=getUrlFromIcon(e.target);grt.callAction('loadInOverlay',{url:historyUrl});}},createIcon=function(userId){if(!histLinkPrototype){histLinkPrototype=doc.createElement('i');histLinkPrototype.className='grtHist';}
var icon=histLinkPrototype.cloneNode(false);icon.id='grtHist_'+userId+'_'+(++randNo);return icon;},getUrlFromIcon=function(icon){if(!icon)return'#';var userId=icon.id.match(/grtHist_(\d*)/)[1];return'/msg/history.php?uid='+userId;},decorateMessageList=function(){var msgList=doc.getElementById('newMessageList'),msgLinks=xpath('//a[contains(@href,"\/msg\/\?id=")]',msgList);for(var i=msgLinks.length-1;i>=0;i--){var a=msgLinks[i],userId=a.parentNode.id.match(/row(\d*)_msg/)[1],icon=createIcon(userId);a.parentNode.className+=' grtHistActive';a.appendChild(icon);}
if(msgLinks.length){msgList.addEventListener('click',HANDLERS.HISTORY_ICON_CLICK,true);}},decorateResultList=function(){if((doc.body.className||'').indexOf('searchResults')<0)return;var userLinks=xpath('//table//td[contains(@class,"resHeadline") and not(contains(@class,"'+DONE_MARKER_CLASS+'"))]/a[contains(@href,"setcard")]'),ID_REGEX=/set=(\d*)/;for(var i=0;i<userLinks.length;i++){var link=userLinks[i],td=link.parentNode,alreadyDecorated=td.className.indexOf(DONE_MARKER_CLASS)>=0;if(alreadyDecorated)continue;var userId=link.href.match(ID_REGEX)[1],icon=createIcon(userId);td.appendChild(icon);td.className+=' '+DONE_MARKER_CLASS;}
if(userLinks.length&&!liveHandlerBound){doc.addEventListener('click',HANDLERS.HISTORY_ICON_CLICK,true);liveHandlerBound=true;}},init=function(_grt,helpers){log=helpers.log;doc=helpers.doc;grt=_grt;stopEvent=helpers.stopEvent;xpath=helpers.xpath;assertTrue=helpers.assertTrue;var url=location.href,isLatestMessagePage=url.indexOf('main/personalList/PersonalListPage')>=0,isResultList=!isLatestMessagePage&&url.indexOf('/search/')>0;if(isLatestMessagePage){decorateMessageList();}else if(isResultList){decorateResultList();helpers.addExternalRetriggerHandler(decorateResultList);}};return{ID:PROCESSOR_ID,EXCLUSIVE:false,NEEDS_DISPATCHER:true,CSS:['historyLink'],init:init};})('HistoryLink'));}

// -------------------- END PROCESSOR: HistoryLink ------------------------



// -------------------- BEGIN PROCESSOR: Overlay ----------------------


if(((location.href.indexOf('/search/')>=0&&GRT.urlContainsAny('action=execute','action=showPage','searchType=advert','searchType=myVisits','searchType=newWithin'))||GRT.urlContainsAny('searchType=picture','/settings/','/mitglieder/messages/','/setcard/cluide/club_profile.php')||GRT.bodyClassContainsAny('mainPage','pUsCe')||document.getElementById('startpageContainerCollection'))&&location.href.indexOf('club_profile.php')<0){GRT.addProcessor((function(PROCESSOR_ID){var PROFILE_URL_REGEX=/auswertung\/setcard\/(?:index\.php)?\?set=/,NO_OVERLAY_HASH='#NO_OVERLAY',HTML='<div id="grtGray"></div>'+'<div id="grtOverlay">'+'<iframe id="grtIframe" src="about:blank"></iframe>'+'<div id="grtHtmlContent"></div>'+'<img id="grtImage" alt="" src="/v18/gemeinsam/skins/allSkins/logo/mainlogo/planetromeoGold.png">'+'<div id="grtUsername"></div>'+'<div id="grtClose"></div>'+'<div id="grtAnon"></div>'+'<div id="grtWait"></div>'+'</div>',CLASSID={GRAY:'grtGray',IFRAME:'grtIframe',HTMLCONTENT:'grtHtmlContent',IMAGE:'grtImage',USERNAME:'grtUsername',WAIT:'grtWait',CLOSE:'grtClose',ANON:' grtAnon'},DEFAULT_URL='about:blank',doc=null,docElem=null,win=null,log=null,grt=null,assertTrue=null,helpers=null,pendingLoadType=null,imageHovered=false,elems={gray:null,overlay:null,iframe:null,htmlContent:null,image:null,username:null,close:null},boundHandlers={},HANDLERS={DISPATCHED_OPEN_CONFIG:function(){loadHtml(helpers.getConfigHtml());grt.callAction('initConfigForm');},DISPATCHED_LOAD_IN_OVERLAY:function(args){pendingLoadType=null;hideAll();assertTrue(args.url,'Received dispatched loadInOverlay() call without a URL!');var url=(args.anonymize)?helpers.anonymizeUrl(args.url):args.url;loadUrl(url);},DISPATCHED_LOAD_IMAGE_IN_OVERLAY:function(args){elems.image.src=DEFAULT_URL;hideAll();assertTrue(args.url,'Received dispatched loadImageInOverlay() call without image URL!');loadImage(args.url,args.username);},DISPATCHED_CLOSE_IMAGE:function(args){if(args.ifNotHovered&&imageHovered)return;if(pendingLoadType!=CLASSID.IMAGE)return;hideAll();},IFRAME_LOADED:function(){if(pendingLoadType!=CLASSID.IFRAME||elems.iframe.src==DEFAULT_URL)return;elems.overlay.className=CLASSID.IFRAME;if(helpers.isAnonymousUrl(elems.iframe.src)){markAnonymous();}},IMAGE_LOADED:function(){if(pendingLoadType!=CLASSID.IMAGE||elems.image.src==DEFAULT_URL)return;imageHovered=false;var username=elems.image.getAttribute('username'),overlayClass=CLASSID.IMAGE;if(username){elems.username.textContent=username;}else{overlayClass+=' grtNoUser';}
elems.overlay.className=overlayClass;},IMAGE_OVER:function(){imageHovered=true;},IMAGE_ERROR:function(){hideAll();},CLICK_TO_CLOSE:function(e){var o=e.target;if(!o||[CLASSID.CLOSE,CLASSID.IMAGE,CLASSID.GRAY].indexOf(o.id||'')<0)return;hideAll();},PROFILE_LINK_CLICK:function(e){if(!e.target)return;if(e.button==2||e.target.nodeName=='IMG'&&!helpers.config.popt)return;var o=e.target,href=o.href,i=0;while(!href&&(++i)<5&&o){href=o.href;o=o.parentNode;}
if(!PROFILE_URL_REGEX.test(href||'')||href.indexOf(NO_OVERLAY_HASH)>0||href.indexOf('page=club')>0)return;e.target.onclick=null;e.cancelBubble=true;e.preventDefault();grt.callAction('loadInOverlay',{url:href});}},DEFAULT_OVERLAY_WIDTH=500,DEFAULT_IMAGE_WIDTH=450,lastHeight=null,updateDimensions=function(){var winWidth=self.innerWidth||680,availabelWidth=winWidth-180,w=Math.min(availabelWidth,DEFAULT_OVERLAY_WIDTH),h=self.innerHeight-28,wPx=w+'px',hPx=h+'px';if(lastHeight==h)return;lastHeight=h;elems.iframe.style.width=wPx;elems.iframe.style.height=hPx;elems.htmlContent.style.width=wPx;elems.htmlContent.style.height=hPx;elems.close.style.height=hPx;elems.image.style.maxWidth=Math.min(availabelWidth,DEFAULT_IMAGE_WIDTH)+'px';elems.image.style.maxHeight=hPx;},initElements=function(){var tmp=doc.createElement('div');tmp.innerHTML=HTML;doc.body.appendChild(tmp.childNodes[1]);doc.body.appendChild(tmp.childNodes[0]);elems={gray:doc.getElementById('grtGray'),overlay:doc.getElementById('grtOverlay'),iframe:doc.getElementById(CLASSID.IFRAME),htmlContent:doc.getElementById(CLASSID.HTMLCONTENT),image:doc.getElementById(CLASSID.IMAGE),username:doc.getElementById(CLASSID.USERNAME),close:doc.getElementById(CLASSID.CLOSE)};updateDimensions();elems.overlay.addEventListener('click',HANDLERS.CLICK_TO_CLOSE,false);},hideAll=function(){elems.gray.style.display='none';doc.body.style.paddingRight=0;elems.overlay.className='';doc.body.style.overflow='auto';pendingLoadType=null;elems.iframe.src=DEFAULT_URL;},showWait=function(){elems.overlay.className=CLASSID.WAIT;},showGray=function(){if(!boundHandlers[CLASSID.GRAY]){boundHandlers[CLASSID.GRAY]=elems.gray.addEventListener('click',HANDLERS.CLICK_TO_CLOSE,false)||1;}
updateDimensions();elems.gray.style.display='block';var widthBefore=doc.body.clientWidth;doc.body.style.overflow='hidden';var widthDiff=doc.body.clientWidth-widthBefore;doc.body.style.paddingRight=widthDiff+'px';},loadUrl=function(url){helpers.assertIsAllowedUrl(url);if(!boundHandlers[CLASSID.IFRAME]){boundHandlers[CLASSID.IFRAME]=elems.iframe.addEventListener('load',HANDLERS.IFRAME_LOADED,false)||1;elems.iframe.addEventListener('error',function(){alert('iframe error!');},false);}
showGray();showWait();elems.iframe.src=url;pendingLoadType=CLASSID.IFRAME;},loadHtml=function(html){showGray();elems.htmlContent.innerHTML=html;elems.overlay.className=CLASSID.HTMLCONTENT;pendingLoadType=CLASSID.HTMLCONTENT;},loadImage=function(imageUrl,username){if(!boundHandlers[CLASSID.IMAGE]){elems.image.addEventListener('load',HANDLERS.IMAGE_LOADED,false);elems.image.addEventListener('error',HANDLERS.IMAGE_ERROR,false);elems.image.addEventListener('mouseover',HANDLERS.IMAGE_OVER,false);boundHandlers[CLASSID.IMAGE]=1;}
showWait();if(elems.image.src==imageUrl){elems.image.src+='?1';}else{elems.image.src=imageUrl;}
elems.image.setAttribute('username',username?('User: '+username):'');pendingLoadType=CLASSID.IMAGE;},markAnonymous=function(){if(elems.overlay.className!=CLASSID.IFRAME)return;elems.overlay.className+=' '+CLASSID.ANON;},bindGenericProfileClickHandler=function(){var isClubsPage=grt.urlContainsAll('/myuser/','page=club'),isLinkingPage=grt.urlContainsAny('page=linking');if(!isClubsPage&&!isLinkingPage){doc.addEventListener('click',HANDLERS.PROFILE_LINK_CLICK,true);}},init=function(_grt,_helpers){log=_helpers.log;doc=_helpers.doc;docElem=doc.documentElement||doc;win=_helpers.win;grt=_grt;assertTrue=_helpers.assertTrue;helpers=_helpers;initElements();_grt.registerAction('closeOverlay',hideAll);_grt.registerAction('loadInOverlay',HANDLERS.DISPATCHED_LOAD_IN_OVERLAY);_grt.registerAction('loadImageInOverlay',HANDLERS.DISPATCHED_LOAD_IMAGE_IN_OVERLAY);_grt.registerAction('closeImageOverlay',HANDLERS.DISPATCHED_CLOSE_IMAGE);_grt.registerAction('markAnonymous',markAnonymous);_grt.registerAction('openConfig',HANDLERS.DISPATCHED_OPEN_CONFIG);if(_helpers.config.popa){bindGenericProfileClickHandler();}};return{ID:PROCESSOR_ID,EXCLUSIVE:false,NEEDS_DISPATCHER:true,CSS:['overlay'],init:init};})('Overlay'));}

// -------------------- END PROCESSOR: Overlay ------------------------



// -------------------- BEGIN PROCESSOR: Config ----------------------


if(GRT.hasProcessor('Overlay')){GRT.addProcessor((function(PROCESSOR_ID){var log=null,doc=null,helpers=null,grt=null,handlersBound=false,HANDLERS={INPUT_CHANGE:function(e){if(!e.target)return;var input=e.target,cfgKey=(input.id||'grt_').match(/^grt_(.*)/)[1];if(!cfgKey)return;var o={};o[cfgKey]=(input.type=='checkbox')?(input.checked?1:0):input.value||'0';helpers.setConfig(o);helpers.saveConfigCookie();if(cfgKey=='de'){grt.callAction('openConfig');}else{initForm();if(cfgKey=='dim'||cfgKey=='tit'){grt.callAction('refreshHeaderConfig');}}}},initForm=function(){for(var k in helpers.config){var input=doc.getElementById('grt_'+k),cfgVal=helpers.config[k];if(!input)continue;if(input.type=='checkbox'){input.checked=cfgVal?'checked':'';}else{input.value=cfgVal;}}},getConfigHtml=function(){if(!handlersBound){doc.addEventListener('change',HANDLERS.INPUT_CHANGE,true);handlersBound=true;}
var BASE_URL=helpers.useSSL?'https://ssl-account.com/gr-tools.justlep.net':'http://gr-tools.justlep.net',styles='<style type="text/css"> #grtcfg2 {padding:10px;color:#D1DEF1;font-family:Tahoma,Arial,Verdana,Helvetica;} #grtcfg2 table {width:auto;margin:10px 0 0;border-collapse:collapse;border-spacing:0} #grtcfg2 input {cursor:pointer} #grtcfg2 h3 {padding:0 4px 5px 0;margin:0;font-size:14px;border-bottom:1px solid #ccc;text-align:right;color:#D1DEF1 !important} #grtcfg2 h4, #grtcfg2 p {padding:0;margin:0} #grtcfg2 td {vertical-align:top;padding:7px 5px 0;color:#D1DEF1;width:auto !important} #grtcfg2 label { cursor:pointer; display:block; padding:2px 0; position:relative; float:left; } #grtcfg2 label.ex b { padding-right:20px; background:transparent url('+BASE_URL+'/img/cfg/show.png) right center no-repeat; } #grtcfg2 label b {color:#fff} #grtcfg2 label img:hover {display:none !important} #grtcfg2 label img { vertical-align:middle; border:1px solid yellow; margin-top:4px; display:none; position:absolute; z-index:2 } #grtcfg2 label.ex:hover img {display:block} #grtcfg2 .grtwarn b {color:#ffb400} #grtcfg2 .bg2, #grtcfg2 .grtwarn {background-color:#2A509F} #bmiDiv, #ageDiv {padding-bottom:5px} #bmiDiv label, #ageDiv label {display:inline} #ageDiv input, #bmiDiv input {border:1px solid #fff;width:30px;margin:0 5px 0 2px;background-color:#85E854;cursor:default;font-size:11px;text-align:center} #grtopts p {opacity:0.9;padding-top:2px;padding-bottom:10px;clear:both} #grtopts td:hover p {opacity:1} #grtSaveConfig { font-size:11px; font-family:Verdana; } #grtcfg2 tr.ind td:last-child {padding-left:26px !important} #grtcfg2 tr.ind2 td {padding-top:0 !important} #grt_de {margin:0 0 0 10px} #grtCookieInfo {padding:0;border:1px solid #ccc;border-radius:5px;margin-top:10px;overflow:hidden} #grtCookieInfo p {padding:5px 0 10px} </style>';if(helpers.config.de){return styles+'<div id="grtcfg2"> <h3> GR-Tools - Einstellungen <select id="grt_de"><option value="1">Deutsch</option><option value="0">English</option></select> </h3> <table cellspacing="5" id="grtopts"> <tr class="bg2"> <td><input type="checkbox" id="grt_z"/></td> <td> <label for="grt_z" class="ex"> <b>Vorschaubild-Lupe</b><img src="'+BASE_URL+'/img/cfg/lupe.png" alt="" class="ex" /> </label> <p>Zeigt das <img src="'+BASE_URL+'/img/lupe2.png" alt="Lupe"/>-Symbol in Vorschaubildern an, um beim Herüberfahren mit der Maus das Originalbild zu sehen.</p> </td> </tr> <tr> <td><input type="checkbox" id="grt_popa"/></td> <td> <label for="grt_popa" class="ex"> <b>Popups vermeiden</b><img src="'+BASE_URL+'/img/cfg/iframe.jpg" alt="" class="ex" /> </label> <p>Nutzerprofile werden in vielen (aber nicht allen!) Bereichen statt in Popups direkt in der Seite geöffnet.</p> </td> </tr> <tr class="ind ind2"> <td><input type="checkbox" id="grt_popt"/></td> <td> <label for="grt_popt"> <b>... auch bei Vorschaubild-Klick</b> </label> <p>Durch Deaktivieren dieser Option bleibt hartnäckigen Popup-Fetischisten ein Weg, trotz aktivierter "Popup-Vermeidung" noch Profil-Popups zu öffnen - per Klick aufs Vorschaubild ;-).</p> </td> </tr> <tr class="bg2"> <td><input type="checkbox" id="grt_sb"/></td> <td> <label for="grt_sb" class="ex"> <b>BMI-Wert anzeigen</b><img src="'+BASE_URL+'/img/cfg/bmi-wert.png" alt="" class="ex" /> </label> <p>Zeigt in Suchergebnissen den BMI-Wert jedes Nutzers hinter seinem Nickname in Klammern an.<br/>Der Body-Mass-Index (BMI) gibt Aufschluss über das Verhältnis von Körpergröße zu Gewicht - je höher der BMI, desto voluminöser der Mensch. BMIs von 20 bis 25 gelten allgemein als "gesund". <u>Kaum Aussagekraft</u> hat der BMI allerdings bei muskulösen oder durchtrainierten Kerlen. Und überhaupt: den BMI bitte nicht überbewerten!</p> </td> </tr> <tr> <td><input type="checkbox" id="grt_bmi"/></td> <td> <label for="grt_bmi" class="ex"> <b>... und nach BMI filtern</b><img src="'+BASE_URL+'/img/cfg/bmi-filter.png" alt="" class="ex" /> </label> <p>Wenn aktiviert, werden Nutzer, die nicht deinem eingestellten "BMI-Wunschraster" entsprechen, in Suchergebislisten halbtransparent dargestellt.</p> <div id="bmiDiv">Dein Traum-BMI: &nbsp; <input type="text" id="grt_bmin"/> - <input type="text" id="grt_bmax"/></div> </td> </tr> <tr class="bg2"> <td><input type="checkbox" id="grt_age"/></td> <td> <label for="grt_age" class="ex"> <b>Alters-Filter</b><img src="'+BASE_URL+'/img/cfg/age-filter.png" alt="" class="ex" /> </label> <p>Wenn aktiviert, werden Nutzername, Alters- und Gewichtsangaben der Nutzer, die nicht in deinem Alters-Wunschbereich liegen, grau bzw. abgeschwächt dargestellt.</p> <div id="ageDiv">Dein Wunschalter: &nbsp; <input type="text" id="grt_amin"/> - <input type="text" id="grt_amax"/></div> </td> </tr> <tr> <td><input type="checkbox" id="grt_pica"/></td> <td> <label for="grt_pica" class="ex"> <b>Bilderverwaltung erleichtern</b><img src="'+BASE_URL+'/img/cfg/picadmin.jpg" alt="" class="ex" /> </label> <p>Zeigt beim Bearbeiten eines Bildes in der Bilderverwaltung die anderen Bilder der aktuellen Galerie klickbar über dem derzeitigen Bild an. Außerdem springst du nach Speichern des Kommentartextes automatisch gleich zum nächsten.</p> </td> </tr> <tr class="bg2"> <td><input type="checkbox" id="grt_taps"/></td> <td> <label for="grt_taps"> <b>Fußtapsen zum Klicken</b> </label> <p>Ein Klick auf eine erhaltene Tapse öffnet das Tapsen-Popup, so dass du direkt eine Antwort-Tapse geben kannst.</p> </td> </tr> <tr> <td><input type="checkbox" id="grt_pl"/></td> <td> <label for="grt_pl" class="ex"> <b>Größere Blätter-Links unter Ergebnissen</b><img src="'+BASE_URL+'/img/cfg/paging.png" alt="" class="ex" /> </label> <p>Die futzeligen "Nächste-/Zurück"-Links in Suchergebnisseiten werden durch große, nicht zu verfehlende Monster-Buttons ersetzt. Nicht nur für Grobmotoriker :).</p> </td> </tr> <tr class="bg2"> <td><input type="checkbox" id="grt_dim"/></td> <td> <label for="grt_dim" class="ex"> <b>Gayromeo/Planetromeo-Logo abdimmen</b><img src="'+BASE_URL+'/img/cfg/logodim.jpg" alt="" class="ex" /> </label> <p>Macht das Gayromeo/Planetromeo-Logo stark durchsichtig, damit nicht jeder Nicht-Kenner schon aus 50 Metern erkennt, wo du gerade surfst ;-).</p> </td> </tr> <tr> <td><input type="checkbox" id="grt_tit"/></td> <td> <label for="grt_tit"> <b>Seitentitel verharmlosen</b> </label> <p>Ändert den Seitentitel in &apos;R..&apos;, so dass in deiner Taskleiste kein &apos;Gayromeo&apos; mehr auftaucht ;-).</p> </td> </tr> <tr class="bg2"> <td><input type="checkbox" id="grt_lm"/></td> <td> <label for="grt_lm" class="ex"> <b>Messageverlauf: letzte Nachricht hervorheben</b><img src="'+BASE_URL+'/img/cfg/lastmsg.jpg" alt="" class="ex" /> </label> <p>Springt im Messageverlauf automatisch zur letzten Nachricht und hebt sie optisch hervor.</p> </td> </tr> <tr> <td><input type="checkbox" id="grt_yth"/></td> <td> <label for="grt_yth" class="ex"> <b>YouTube-Links in Headlines</b><img src="'+BASE_URL+'/img/cfg/yt-list.png" alt="" class="ex" /> </label> <p>YouTube-URLs innerhalb von Nutzer-Headlines in Suchergebnissen werden zu direkt klickbaren Links - denn Copy&Paste sucks ;-).</p> </td> </tr> <tr class="ind2"> <td><input type="checkbox" id="grt_ytp"/></td> <td> <label for="grt_ytp"> <b>YouTube-Links in Profilen</b> </label> <p>YouTube-URLs innerhalb von Nutzer-Profiltexten werden zu direkt klickbaren Links.</p> </td> </tr> <tr class="ind ind2"> <td><input type="checkbox" id="grt_ytpr"/></td> <td> <label for="grt_ytpr" class="ex"> <b>... und Video-Vorschaubild einblenden</b><img src="'+BASE_URL+'/img/cfg/ytpreview.jpg" alt="" class="ex" /> </label> <p>Beim Überfahren von YouTube-Links mit der Maus wird das Vorschaubild des entsprechenden Videos neben dem Cursor eingeblendet.</p> </td> </tr> <tr class="bg2"> <td><input type="checkbox" id="grt_lt"/></td> <td> <label for="grt_lt" class="ex"> <b>Aktuelle Forum-Threads hervorherben</b><img src="'+BASE_URL+'/img/cfg/lthreads.jpg" alt="" class="ex" /> </label> <p>Auf der Forum-Unterseite des Club-Centers werden die Threads der letzten 3 Tage farblich abgestuft hervorgehoben.</p> </td> </tr> <tr> <td><input type="checkbox" id="grt_secr"/></td> <td> <label for="grt_secr" class="ex"> <b>"Geheim"-Klick auf BMI</b><img src="'+BASE_URL+'/img/cfg/bmiclick.jpg" alt="" class="ex" /> </label> <p>Ein Klick auf den BMI-Wert eines Nutzers öffnet sein Profil so, dass du nicht in seiner Besucherliste auftauchst (funktioniert <u>nur</u>, falls er sein Profil für jedermann sichtbar eingestellt hat).<br/> <b>Achtung:</b> falls du gleichzeitig mit mehreren Profilen bei gayromeo.com, planetromeo.com und/oder 83.98.143.20 eingeloggt bist, kann es passieren, dass dein Zweit-/Drittprofil in der Besucherliste des anderen auftaucht! Pech gehabt!</p> </td> </tr> <tr class="ind2"> <td><input type="checkbox" id="grt_rc"/></td> <td> <label for="grt_rc"> <b>Rechtsklicks auf Bilder erlauben</b> </label> <p>Macht es wieder möglich, per Rechtsklick Bilder zu speichern. Alternative <a target="_blank" href="/jump.php?jump=http%3A%2F%2Fwww.com-magazin.de%2Ftipps%2Fuebersicht%2Ftipp-id%2Ffirefox-kontextmenue-reaktivieren.html">hier</a>.</p> </td> </tr> </table> <div id="grtCookieInfo"> <table cellspacing="5" border="0" style="margin:0"> <tr class="grtWarn"> <td><input type="checkbox" id="grt_keep"/></td> <td> <label for="grt_keep"><b>GR-Tools-Cookie auch nach dem Logout behalten</b></label> <p style="clear:both"> <img src="'+BASE_URL+'/img/cfg/warn.png" alt="" style="vertical-align:top" /> Wichtig: Die Lebenszeit des Gayromeo-Cookie&apos;s endet normalerweise mit dem Logout (Session-Cookie). Die GR-Tools verwenden ebenfalls einen Cookie, um deine Einstellungen zu speichern. Diesen kannst du auch über den Logout hinaus behalten, um die Einstellungen nicht bei jedem Login erneut treffen zu müssen. <br/> Aber: falls du nicht an deinem Privat-PC sitzt, lässt ein dauerhafterer Cookie bei anderen Nutzern deines Computer&apos;s Rückschlüsse darauf zu, dass du bei GR unterwegs warst. Bevor du hier den Haken setzt, entscheide deshalb bitte sehr bewusst, ob dir durch einen GayRomeo-Cookie eventuell Probleme entstehen könnten. </p> </td> </tr> </table></div> </div>';}
return styles+'<div id="grtcfg2"> <h3> GR-Tools - Settings <select id="grt_de"><option value="1">Deutsch</option><option value="0">English</option></select> </h3> <table cellspacing="5" id="grtopts"> <tr class="bg2"> <td><input type="checkbox" id="grt_z"/></td> <td> <label for="grt_z" class="ex"> <b>Preview Image Zoom</b><img src="'+BASE_URL+'/img/cfg/lupe.png" alt="" class="ex" /> </label> <p>Adds a <img src="'+BASE_URL+'/img/lupe2.png" alt="Zoom"/> icon to preview images. Moving the mouse on it will show the original image.</p> </td> </tr> <tr> <td><input type="checkbox" id="grt_popa"/></td> <td> <label for="grt_popa" class="ex"> <b>Popup Avoidance</b><img src="'+BASE_URL+'/img/cfg/iframe.jpg" alt="" class="ex" /> </label> <p>In many (but not all) areas of GR, user profiles will be opened directly within the site instead of nasty popup windows.</p> </td> </tr> <tr class="ind ind2"> <td><input type="checkbox" id="grt_popt"/></td> <td> <label for="grt_popt"> <b>... even on thumbnail clicks</b> </label> <p>With activated popup avoidance, <u>de</u>activating this option allows the popup fetishists among you to still open profile popups by clicking the user&apos;s thumbnail ;-).</p> </td> </tr> <tr class="bg2"> <td><input type="checkbox" id="grt_age"/></td> <td> <label for="grt_age" class="ex"> <b>Age Filter</b><img src="'+BASE_URL+'/img/cfg/age-filter.png" alt="" class="ex" /> </label> <p>If activated and a user is below or beyond your prefered age, his nickname, age and weight data will be displayed semitransparently / grayed out.</p> <div id="ageDiv">Your prefered age: &nbsp; <input type="text" id="grt_amin"/> - <input type="text" id="grt_amax"/></div> </td> </tr> <tr> <td><input type="checkbox" id="grt_sb"/></td> <td> <label for="grt_sb" class="ex"> <b>Show BMI values</b><img src="'+BASE_URL+'/img/cfg/bmi-wert.png" alt="" class="ex" /> </label> <p>In result pages, each user&apos;s BMI value will be displayed behind his nickname.<br/>The Body-Mass-Index (BMI) is the relation between body size and weight - the higher the value, the more "voluminous" the guy. Values from 20 to 25 are considered "healthy", though this may vary with age and origin. Moreover, the BMI is quite <u>pointless</u> regarding trained or muscle guys. Just generally: Do not overrate the BMI, please!</p> </td> </tr> <tr class="bg2"> <td><input type="checkbox" id="grt_bmi"/></td> <td> <label for="grt_bmi" class="ex"> <b>BMI Filter</b><img src="'+BASE_URL+'/img/cfg/bmi-filter.png" alt="" class="ex" /> </label> <p>If activated, all users outside your prefered BMI range will be displayed semi-<wbr/>transparently in the result lists.</p> <div id="bmiDiv">Your prefered BMI range: &nbsp; <input type="text" id="grt_bmin"/> - <input type="text" id="grt_bmax"/></div> </td> </tr> <tr> <td><input type="checkbox" id="grt_pica"/></td> <td> <label for="grt_pica" class="ex"> <b>Easier Picture Management</b><img src="'+BASE_URL+'/img/cfg/picadmin.jpg" alt="" class="ex" /> </label> <p>While editing the text of one of your pictures, you will see all the other pictures of the same gallery just above the current image.Also, after saving the changes, you will be automatically redirected to the next picture.</p> </td> </tr> <tr class="bg2"> <td><input type="checkbox" id="grt_taps"/></td> <td> <label for="grt_taps"> <b>Footprints clickable</b> </label> <p>A click on a footprint you&apos;ve been given opens the footprint popup, so you can give a reply footprint right away.</p> </td> </tr> <tr> <td><input type="checkbox" id="grt_pl"/></td> <td> <label for="grt_pl" class="ex"> <b>Bigger Paging Links under Result Lists</b><img src="'+BASE_URL+'/img/cfg/paging.png" alt="" class="ex" /> </label> <p>The tiny "Next/Back" links of result pages will be replaced with huge, non-missable monster arrow buttons :-).</p> </td> </tr> <tr class="bg2"> <td><input type="checkbox" id="grt_dim"/></td> <td> <label for="grt_dim" class="ex"> <b>Dim the Gayromeo/Planetromeo logo</b><img src="'+BASE_URL+'/img/cfg/logodim.jpg" alt="" class="ex" /> </label> <p>Makes the Gayromeo/Planetromeo logo *almost* invisible, so not everyone who doesn&apos;t know GR can recognize from the distance what website you&apos;re surfing ;-).</p> </td> </tr> <tr> <td><input type="checkbox" id="grt_tit"/></td> <td> <label for="grt_tit"> <b>Harmless page title</b> </label> <p>Changes the page title into simple &apos;R..&apos;, so there is no &apos;Gayromeo&apos; in your task bar anymore ;-).</p> </td> </tr> <tr class="bg2"> <td><input type="checkbox" id="grt_lm"/></td> <td> <label for="grt_lm" class="ex"> <b>Message history: Highlight last message</b><img src="'+BASE_URL+'/img/cfg/lastmsg.jpg" alt="" class="ex" /> </label> <p>Jumps automatically to the last message in the message history and highlights it.</p> </td> </tr> <tr> <td><input type="checkbox" id="grt_yth"/></td> <td> <label for="grt_yth" class="ex"> <b>YouTube-Links in Headlines</b><img src="'+BASE_URL+'/img/cfg/yt-list.png" alt="" class="ex" /> </label> <p>YouTube URLs within online-headlines will be turned into real, clickable links -<br/>&apos;coz Copy&Paste sucks ;-).</p> </td> </tr> <tr class="ind2"> <td><input type="checkbox" id="grt_ytp"/></td> <td> <label for="grt_ytp"> <b>YouTube-Links in Profiles</b> </label> <p>YouTube-URLs within user profiles wil be turned into clickable links.</p> </td> </tr> <tr class="ind ind2"> <td><input type="checkbox" id="grt_ytpr"/></td> <td> <label for="grt_ytpr" class="ex"> <b>... Video Preview on mouseover</b><img src="'+BASE_URL+'/img/cfg/ytpreview.jpg" alt="" class="ex" /> </label> <p>When you hold the mouse over a YouTube-Link, the video&apos;s preview image will be displayed next to the mouse cursor.</p> </td> </tr> <tr class="bg2"> <td><input type="checkbox" id="grt_lt"/></td> <td> <label for="grt_lt" class="ex"> <b>Highlight latest Threads on Forum page</b><img src="'+BASE_URL+'/img/cfg/lthreads.jpg" alt="" class="ex" /> </label> <p>On the Forum-subpage of the Club-Center all threads of the recent 3 days will be highlighted.</p> </td> </tr> <tr> <td><input type="checkbox" id="grt_secr"/></td> <td> <label for="grt_secr" class="ex"> <b>"Secret" Click on BMI value</b><img src="'+BASE_URL+'/img/cfg/bmiclick.jpg" alt="" class="ex" /> </label> <p>Clicking a BMI value opens that user&apos;s public profile through a different GayRomeo domain, so the user won&apos;t notice your visit (works <u>only</u>, if his is profile is set public for everyone).<br/> <b>Attention:</b> if you are surfing with multiple profiles simultaneously on gayromeo.com, planetromeo.com and/or 83.98.143.20, it may happen that your second/third profile ends up in the visitor list of the viewed person! Bad luck!</p> </td> </tr> <tr class="ind2"> <td><input type="checkbox" id="grt_rc"/></td> <td> <label for="grt_rc"> <b>Allow Rightclicks on images</b> </label> <p>Re-enables the rightclick on images which GR normally prevents.. just in case you do not want to change JavaScript settings of your browser.</p> </td> </tr> </table> <div id="grtCookieInfo"> <table cellspacing="5" border="0" style="margin:0"> <tr class="grtWarn"> <td><input type="checkbox" id="grt_keep"/></td> <td> <label for="grt_keep"><b>Keep the GR-Tools cookie after logout</b></label> <p style="clear:both"> <img src="'+BASE_URL+'/img/cfg/warn.png" alt="" style="vertical-align:top" /> NOTE: Lifetime of the Gayromeo cookie is normally limited to the period you are logged in (Session Cookie). The GR-Tools use a cookie to save your settings, too. You can keep that cookie even after logout if you want to, just to not have to re-configure your GR-Tools on each login.<br/> But: if you are not working at your private PC, that longer-lasting cookie may reveal to other users of that computer that you&apos;ve been surfing GR lately. Thus, before you make the cross for this option, please decide carefully for yourself whether or not a GayRomeo cookie might get you into trouble! </p> </td> </tr> </table></div> </div>';},init=function(_grt,_helpers){grt=_grt;helpers=_helpers;log=_helpers.log;doc=_helpers.doc;_grt.registerAction('initConfigForm',initForm);_helpers.setConfigHtmlProviderFunction(getConfigHtml);};return{ID:PROCESSOR_ID,EXCLUSIVE:false,NEEDS_DISPATCHER:true,init:init};})('Config'));}

// -------------------- END PROCESSOR: Config ------------------------



// -------------------- BEGIN PROCESSOR: ImageZoom ----------------------


if(GRT.hasProcessor('Overlay')){GRT.addProcessor((function(PROCESSOR_ID){var IMG_POPUP_URL_PREFIX='/auswertung/pix/popup.php/',IMG_POPUP_IMG_REGEX=/<img src="([^"]*\/img\/usr\/[^\.]*\.jpg)"/,HIDE_DELAY=150,log=null,doc=null,grt=null,assertTrue=null,zoomIconProtoype=null,xpath=null,xhr=null,urlCache={},currentThumbId=null,currentUsername=null,visible=0,urlContainsAll=null,HANDLERS={ZOOM_ICON_OVER:function(e){var o=e.target;if(!o||!/^grtZoom/.test(o.className||'')||!o.id)return;e.cancelBubble=true;currentThumbId=o.id.substring(3);currentUsername=e.target.parentNode.parentNode.parentNode.getAttribute('username')||'';visible=true;findAndLoadFullsizeImge(currentThumbId);},ZOOM_ICON_OUT:function(e){if(!/^grtZoom/.test(e.target.className||''))return;currentThumbId=null;e.cancelBubble=true;visible=false;setTimeout(closeOverlayDelayed,HIDE_DELAY);},XHR_SUCCESS:function(e){if(xhr.readyState!=4||xhr.status!=200){return;}
var html=xhr.responseText||'',imageUrl=extractImageUrlFromImagePopup(html);if(imageUrl){if(currentThumbId)urlCache[currentThumbId]=imageUrl;showOverlay(imageUrl);}else{hideOverlay();}},XHR_ERROR:function(){currentThumbId=null;hideOverlay();}},closeOverlayDelayed=function(){if(visible)return;grt.callAction('closeImageOverlay',{ifNotHovered:true});},closeOverlay=function(force){grt.callAction('closeImageOverlay');},showOverlay=function(fullsizeImgUrl){grt.callAction('loadImageInOverlay',{url:fullsizeImgUrl,username:currentUsername});},extractImageUrlFromImagePopup=function(html){return(html.match(IMG_POPUP_IMG_REGEX)||[])[1];},findAndLoadFullsizeImge=function(thumbId){if(urlCache[thumbId]){currentThumbId=null;showOverlay(urlCache[thumbId]);return;}
if(!xhr){xhr=new XMLHttpRequest();xhr.addEventListener('load',HANDLERS.XHR_SUCCESS,false);xhr.addEventListener('error',HANDLERS.XHR_ERROR,false);}
currentThumbId=thumbId;var imagePopupUrl=IMG_POPUP_URL_PREFIX+thumbId;xhr.open('GET',imagePopupUrl,true);xhr.send();},addZoomIcons=function(){if(!zoomIconProtoype){zoomIconProtoype=doc.createElement('i');zoomIconProtoype.className='grtZoom';}
var thumbs=doc.getElementsByClassName('thumb'),isClubCenterPage=urlContainsAll('page=club');if(!thumbs||!thumbs.length)return;for(var i=0;i<thumbs.length;i++){var img=thumbs[i],imgParent=img.parentNode,thumbId=null;if(/grtZoomParent/.test(imgParent.className||''))continue;if(/\/img\/usr\/([0-9a-f]*\.jpg)$/.exec(img.src||'')||/popup\.php\/([0-9a-z\.]+)\.jpg/.exec(imgParent.href||'')){thumbId=RegExp.$1;}
if(!thumbId)return;var icon=zoomIconProtoype.cloneNode(false);icon.id='gz_'+thumbId;imgParent.className+=' grtZoomParent';if(isClubCenterPage&&imgParent.className.indexOf('pop')>=0){icon.className+=' pop';}
imgParent.appendChild(icon);}
doc.body.addEventListener('mouseover',HANDLERS.ZOOM_ICON_OVER,true);doc.body.addEventListener('mouseout',HANDLERS.ZOOM_ICON_OUT,true);},init=function(_grt,helpers){if(!helpers.config.z)return;grt=_grt;log=helpers.log;doc=helpers.doc;urlContainsAll=helpers.urlContainsAll;xpath=helpers.xpath;assertTrue=helpers.assertTrue;addZoomIcons();helpers.addExternalRetriggerHandler(addZoomIcons);};return{ID:PROCESSOR_ID,EXCLUSIVE:false,NEEDS_DISPATCHER:true,CSS:['imageZoom'],init:init};})('ImageZoom'));}

// -------------------- END PROCESSOR: ImageZoom ------------------------



// -------------------- BEGIN PROCESSOR: Profile ----------------------


if(GRT.urlContainsAll('auswertung/setcard/','set=')){var circ=document.getElementById('jsCircle');if(circ){circ.style.width='18px';}
GRT.addProcessor((function(PROCESSOR_ID){var log=null,assertTrue=null,doc=null,win=null,grt=null,helpers=null,isOpenedAnonymously=false,sanitizeAnonymousProfile=function(){var sidebar=doc.getElementById('sidebar'),picbar=doc.getElementById('picbar'),topbar=doc.getElementById('tabse'),targetDomain=(location.hash||'').replace(helpers.ANON_URL_HASH,''),domainIndex=(targetDomain.indexOf('gayromeo')>0)?'GR':(targetDomain.indexOf('planetromeo')>0)?'PR':'IP',replaceLinks=function(links){if(!links)return;for(var i=links.length-1;i>=0;i--){var a=links[i],url=a.href||'',isPartnerLink=url.indexOf('auswertung/setcard/index.php')>=0,isXXXPic=!isPartnerLink&&url.indexOf('page=status')>0;if(url&&!isPartnerLink&&!isXXXPic){a.href=helpers.unanonymizeUrl(url,domainIndex);}}};replaceLinks((sidebar)?sidebar.getElementsByTagName('a'):0);replaceLinks((picbar)?picbar.getElementsByTagName('a'):0);replaceLinks((topbar)?topbar.getElementsByTagName('a'):0);},fixHideVisitClose=function(){win.close=function(){(function($){$('#cancelButton').trigger('click');grt.callAction('markAnonymous');})(win.jQuery);};},init=function(_grt,_helpers){log=_helpers.log;doc=_helpers.doc;win=_helpers.win;helpers=_helpers;grt=_grt;assertTrue=_helpers.assertTrue;isOpenedAnonymously=(location.hash||'').indexOf(_helpers.ANON_URL_HASH)>=0;if(isOpenedAnonymously){sanitizeAnonymousProfile();}else{fixHideVisitClose();}};return{ID:PROCESSOR_ID,EXCLUSIVE:false,NEEDS_DISPATCHER:true,CSS:0,init:init};})('Profile'));}

// -------------------- END PROCESSOR: Profile ------------------------



// -------------------- BEGIN PROCESSOR: PagingLinks ----------------------


if(GRT.hasProcessor('Overlay')){GRT.addProcessor((function(PROCESSOR_ID){var helpers=null,decoratePaging=function(){var prevLink=helpers.xpath('//a[contains(@href,"resultPage")][contains(./strong,"\xab")]')[0],nextLink=helpers.xpath('//a[contains(@href,"resultPage")][contains(./strong,"\xbb")]')[0];if(prevLink){prevLink.id='grtPrev';prevLink.innerHTML='&nbsp;';}
if(nextLink){nextLink.id='grtNext';nextLink.innerHTML='&nbsp;';}},init=function(grt,_helpers){helpers=_helpers;if(!_helpers.config.pl)return;decoratePaging();};return{ID:PROCESSOR_ID,EXCLUSIVE:false,NEEDS_DISPATCHER:false,CSS:['pagingLinks'],init:init};})('PagingLinks'));}

// -------------------- END PROCESSOR: PagingLinks ------------------------



// -------------------- BEGIN PROCESSOR: LatestMessage ----------------------


if(GRT.urlContainsAny('/msg/history.php')){GRT.addProcessor((function(PROCESSOR_ID){var log=null,assertTrue=null,helpers=null,doc=null,attemptsLeft=3,REATTEMPT_DELAY=250,scrollToBottom=function(){helpers.doc.body.scrollTop=9999999;var now=helpers.doc.body.scrollTop||0;if(!now&&--attemptsLeft){setTimeout(scrollToBottom,REATTEMPT_DELAY);}},highlightLastMessage=function(){var lastMsgA=helpers.xpath('//a[contains(@name,"lastmessage")]');if(!lastMsgA.length)return;var tds=helpers.xpath('//tr/td[contains(@class,"body")]');if(!tds.length)return;var td=tds[tds.length-1];td.id='grtLastMessage';td.parentNode.parentNode.parentNode.style.borderCollapse='separate';setTimeout(scrollToBottom,50);},init=function(grt,_helpers){log=_helpers.log;assertTrue=_helpers.assertTrue;helpers=_helpers;if(!helpers.config.lm)return;highlightLastMessage();};return{ID:PROCESSOR_ID,EXCLUSIVE:false,NEEDS_DISPATCHER:false,CSS:['latestMessage'],init:init};})('LatestMessage'));}

// -------------------- END PROCESSOR: LatestMessage ------------------------



// -------------------- BEGIN PROCESSOR: Youtube ----------------------


if(GRT.hasProcessor('Profile')||GRT.bodyClassContainsAny('searchResults')){GRT.addProcessor((function(PROCESSOR_ID){var log=null,doc=null,helpers=null,assertTrue=null,DONE_MARKER_CLASS='grtYTDone',REGEX=/(">)?http:\/\/(?:<wbr>)?(?:[a-z]+\.)?(?:<wbr>)?youtube.(<wbr>)?com\/[^\s\t\n\r\]\)"']+/ig,THUMB_LOAD_BASE_URL='http://ref.justlep.net/ytimg',div=0,currentA=null,HANDLERS={YT_OVER:function(e){var a=e.target;if(!(/%3Fv%3D([a-z0-9_\-]*)/i).exec(a.href))return;div.style.display='none';div.childNodes[0].src=THUMB_LOAD_BASE_URL+RegExp.$1;a.style.cursor='wait';div.on=1;currentA=a;},YT_OUT:function(e){div.style.display='none';div.on=0;},YT_MOVE:function(e){div.style.left=20+e.clientX+'px';div.style.top=15+e.clientY+'px';},YT_IMG_LOAD:function(e){if(!div.on)return;div.style.display='block';if(currentA){currentA.style.cursor='pointer';}},YT_IMG_ERROR:function(e){}},REPLACE_CALLBACK=function(s){if(!s.indexOf('">'))return s;var url=s.replace(/(<wbr>| |<br>?)/g,'').replace('&amp;','&'),jumpURL='/jump.php?jump='+encodeURIComponent(url);return'<a class="ytlink" href="'+jumpURL+'" target="_blank">'+s+'</a>';},markParentTablesDone=function(td){var table=td.parentNode;while(table){if(table.nodeName.toLowerCase()=='table'){table.className+=' '+DONE_MARKER_CLASS;}
table=table.parentNode;}},processHeadlines=function(){if(!helpers.config.yth)return;var ytSpans=helpers.xpath('//table[not(contains(@class,"'+DONE_MARKER_CLASS+'"))]//span[contains(.,"http:")][contains(.,"youtube")]'),lastSpan=null;for(var i=ytSpans.length-1;i>=0;i--){lastSpan=ytSpans[i];lastSpan.innerHTML=lastSpan.innerHTML.replace(REGEX,REPLACE_CALLBACK);}
if(lastSpan){markParentTablesDone(lastSpan);}
addYTPreview();},processProfile=function(){if(!helpers.config.ytp)return;var PROFILE_XPATH='//table[contains(@class,"prfl")]/tbody/tr/td[contains(.,"http:")][contains(.,"youtube")]';try{var tds=helpers.xpath(PROFILE_XPATH);for(var i=tds.length-1;i>=0;i--){var len=tds[i].innerHTML.length,sDone=tds[i].innerHTML.replace(REGEX,REPLACE_CALLBACK);if(sDone.length==len)continue;tds[i].innerHTML=sDone;}
addYTPreview();}catch(e){}},addYTPreview=function(){if(!helpers.config.ytpr)return;var ytAs=doc.getElementsByClassName('ytlink');if(!ytAs.length)return;if(!div){var tmp=doc.createElement('div');tmp.innerHTML='<div id="grtYT" style="position:fixed;display:none"><img /></div>';div=tmp.childNodes[0];doc.body.appendChild(div);div.childNodes[0].addEventListener('load',HANDLERS.YT_IMG_LOAD,false);div.childNodes[0].addEventListener('error',HANDLERS.YT_IMG_ERROR,false);div.childNodes[0].style.marginTop='-33px';}
for(var i=0;i<ytAs.length;i++){var a=ytAs[i];a.ytdiv=div;a.addEventListener('mouseover',HANDLERS.YT_OVER,false);a.addEventListener('mouseout',HANDLERS.YT_OUT,false);a.addEventListener('mousemove',HANDLERS.YT_MOVE,false);}},init=function(grt,_helpers){log=_helpers.log;doc=_helpers.doc;helpers=_helpers;assertTrue=_helpers.assertTrue;var isResultList=_helpers.bodyClassContainsAny('searchResults');if(isResultList){processHeadlines();}else{processProfile();}};return{ID:PROCESSOR_ID,EXCLUSIVE:false,NEEDS_DISPATCHER:true,init:init};})('Youtube'));}

// -------------------- END PROCESSOR: Youtube ------------------------



// -------------------- BEGIN PROCESSOR: Tapse ----------------------


if(GRT.hasProcessor('BMIAgeFilter')||GRT.urlContainsAll('&grt_taps_id__')){GRT.addProcessor((function(PROCESSOR_ID){var doc=null,log=null,helpers=null,grt=null,TAPSE_CLASS='grtTaps',TAPSE_ATTRIB='grttaps',handlerBound=false,TAPSE_USER_ID_PARAM='&grt_taps_id__',HANDLERS={TAPSE_CLICK:function(e){if(!e.target||!e.target.getAttribute(TAPSE_ATTRIB))return;var tr=e.target.parentNode.parentNode,userId=0;while(!userId&&tr){if(tr.getAttribute)
userId=findUserIdInTR(tr);tr=tr.previousSibling;}
if(!userId){return;}
var param=TAPSE_USER_ID_PARAM+userId,tapseUrl='/auswertung/setcard/romeo/footprint.php?receiverId='+userId+'&cameFrom=profile'+param;grt.callAction('loadInOverlay',{url:tapseUrl});}},findUserIdInTR=function(tr){if(!tr)return 0;var links=helpers.xpath('.//td[contains(@class,"resHeadline")]/a[contains(@href,"/setcard/")]',tr);if(links.length){return(links[0].href.match(/set=(\d*)/)||[])[1]||0;}
return 0;},initTapsen=function(){var fPrints=helpers.xpath('//img[contains(@src,"/img/footprints/") and not(contains(@class,"'+TAPSE_CLASS+'"))]');for(var i=fPrints.length-1;i>=0;i--){var fp=fPrints[i];fp.setAttribute(TAPSE_ATTRIB,1);fp.className+=' '+TAPSE_CLASS;}
if(fPrints.length&&!handlerBound){doc.addEventListener('click',HANDLERS.TAPSE_CLICK,true);handlerBound=true;}},getUserIdFromParam=function(){var url=location.href;return userId=url.substring(url.indexOf(TAPSE_USER_ID_PARAM)+TAPSE_USER_ID_PARAM.length)||'';},initTapseSubmitPage=function(){setTimeout(function(){grt.callAction('closeOverlay');},10);},initTapseSelectPage=function(){var userId=getUserIdFromParam();var as=helpers.doc.getElementsByTagName('a');for(var i=0;i<as.length;i++){var a=as[i],url=a.href||'',isTapseLink=url.indexOf('saveFootprint.php')>=0;if(!isTapseLink)continue;a.href=url+TAPSE_USER_ID_PARAM+userId;}},init=function(_grt,_helpers){doc=_helpers.doc;log=_helpers.log;helpers=_helpers;grt=_grt;if(!_helpers.config.taps)return;if(grt.urlContainsAll(TAPSE_USER_ID_PARAM)){var isTapseSubmitPage=grt.urlContainsAll('saveFootprint.php'),isTapseSelectPage=!isTapseSubmitPage;if(isTapseSelectPage){initTapseSelectPage();}else if(isTapseSubmitPage){initTapseSubmitPage();}
return;}
initTapsen();_helpers.addExternalRetriggerHandler(initTapsen);};return{ID:PROCESSOR_ID,EXCLUSIVE:false,NEEDS_DISPATCHER:true,CSS:['tapse'],init:init};})('Tapse'));}

// -------------------- END PROCESSOR: Tapse ------------------------




// #####################################################################################################################
// ################################################ END: ADD PROCESSORS ################################################
// #####################################################################################################################


// ----------------------- BEGIN: Dispatcher --------------------------------------------------


if(GRT.needsDispatcher()){GRT.setDispatcher((function(){var log=null,doc=null,assertTrue=null,initDone=0,actions={},DISPATCH_MSG_NAME='GRT_DISPATCH',TARGET_ACTION='grtTargetAction',DOC_ACTIONS_ATTRIB='grtactions',finalized=false,HANDLERS={DISPATCH_MESSAGE_RECEIVED:function(e){var data=e.data||{},targetAction=data[TARGET_ACTION];assertTrue(!!targetAction,'Invalid message received: missing action name.');delete data[TARGET_ACTION];callAction(targetAction,data,true);}},cloneFlat=function(obj){var o=obj||{},flatClone={};for(var k in o){flatClone[k]=''+o[k];}
return flatClone;},registeredActionsAttribVal=null,registerAction=function(actionName,fn){assertTrue(!finalized,'Cannot add new action <%s> to finalized Dispatcher.',actionName);assertTrue(actionName&&fn,'Invalid actionName or listener for event <%s>',actionName);assertTrue(!actions[actionName],'Action name <%s> already defined.',actionName);actions[actionName]=fn;registeredActionsAttribVal=(registeredActionsAttribVal||'#')+actionName+'#';doc.head.setAttribute(DOC_ACTIONS_ATTRIB,registeredActionsAttribVal);},docSupportsAction=function(doc,actionName){if(!doc||!doc.head||!doc.head.getAttribute)return false;var attrib=doc.head.getAttribute(DOC_ACTIONS_ATTRIB);return attrib&&attrib.indexOf('#'+actionName+'#')>=0;},callAction=function(actionName,actionArgs,noDispatch){var action=actions[actionName];if(action){action.apply(this,[actionArgs]);return;}
if(noDispatch){return;}
var targetDoc=getDocumentForActionName(actionName,top.document);if(!targetDoc){return;}
dispatchAction(actionName,actionArgs,targetDoc);},getDocumentForActionName=function(actionName,startDoc){if(!startDoc){return null;}
var MAX_DEPTH=5,docsToCheck=[startDoc],depth=0;while(docsToCheck.length&&depth<MAX_DEPTH){if(!depth){for(var i=0;i<docsToCheck.length;i++){if(!docSupportsAction(docsToCheck[i],actionName))continue;return docsToCheck[i];}}
var newDocsToCheck=[];for(var k=docsToCheck.length-1;k>=0;k--){var frames=docsToCheck[k].getElementsByTagName('frame');for(var j=0;j<frames.length;j++){var frame=frames[j],doc=frame.contentWindow?frame.contentWindow.document:frame.contentDocument;if(docSupportsAction(doc,actionName)){return doc;}
newDocsToCheck[newDocsToCheck.length]=doc;}}
docsToCheck=newDocsToCheck;depth++;}
return null;},dispatchAction=function(actionName,actionArgs,targetDoc){assertTrue(!!targetDoc,'Invalid target document argument');var msgData=cloneFlat(actionArgs);msgData[TARGET_ACTION]=actionName;try{var msgEvent=targetDoc.createEvent('MessageEvent');if(msgEvent.initMessageEvent){msgEvent.initMessageEvent(DISPATCH_MSG_NAME,false,false,msgData,null,null,null,null);}else{msgEvent=new MessageEvent(DISPATCH_MSG_NAME,{data:msgData});}
targetDoc.dispatchEvent(msgEvent);}catch(e){}},finalize=function(){finalized=true;},init=function(grt,helpers){if(initDone)return;log=helpers.log;doc=helpers.doc;assertTrue=helpers.assertTrue;doc.addEventListener(DISPATCH_MSG_NAME,HANDLERS.DISPATCH_MESSAGE_RECEIVED,false);grt.callAction=callAction;grt.registerAction=registerAction;initDone=true;};return{init:init,finalize:finalize};})());}

// ----------------------- END: Dispatcher --------------------------------------------------


// ----------------------- BEGIN: CSSInjector --------------------------------------------------


if(GRT.needsCssInjector()){GRT.setCssInjector((function(){var initDone=false,log=null,init=function(grt,helpers,cssQueue){helpers.assertTrue(!initDone,'Cannot initialize CSSInjector twice!');log=helpers.log;var usedIds={},distinctIdList=[],doc=helpers.doc;for(var i=0;i<cssQueue.length;i++){var id=cssQueue[i];if(usedIds[id])continue;usedIds[id]=1;distinctIdList[distinctIdList.length]=id;}
var css=getCollectedCss(distinctIdList,helpers.useSSL),styleElem=doc.createElement('style');styleElem.setAttribute('type','text/css');styleElem.innerHTML=css;doc.getElementsByTagName('head')[0].appendChild(styleElem);initDone=true;},getCollectedCss=function(cssIds,useSSL){var css=[];var GRT_DOMAIN=useSSL?'https://ssl-account.com/gr-tools.justlep.net':'http://gr-tools.justlep.net';if(cssIds.indexOf('pictureAdmin')>=0)css[css.length]='#grtimageblablubs img {max-height:40px;max-width:40px}#grtimageblablubs a.blubs img {border:2px solid #fc0}';if(cssIds.indexOf('header')>=0)css[css.length]='#grtDiv {position: absolute;right: 315px;top: 0;overflow: visible;border: 1px solid #A2B3DE;border-top: none;padding: 1px 5px 2px 5px;z-index: 9999;color: #E1DEF1;font:normal 11px Tahoma, Arial, Verdana, Helvetica, sans-serif;line-height:14px;border-radius: 0 0 6px 6px;background:transparent url('+GRT_DOMAIN+'/img/bg.jpg) 0 0 no-repeat;}#grtDiv:hover {border-color: #D1D8EB}#grtDiv.grtRomeo {right: 311px}body.grtClub #grtDiv {left: auto;right: 82px !important;}body.grtGuideClub #grtDiv {left: auto;right: 82px !important;}#grtDiv div, #grtDiv span {float: left;}#grtDiv span {cursor: pointer;vertical-align: middle;opacity: 0.7;margin: 1px 2px 0;width:24px;height:24px;background-repeat:no-repeat;background-position:0 0;display:none;}#grtDiv span:hover {opacity: 1;}#grtDiv #grtPimp {padding: 0 5px 0 2px;position: static;overflow: hidden;}#grtPimp b {display: block;color: #AEE451;font-style: normal}#grtDiv:hover span {display: block}body #grtDiv #grtCfg {display: block;}#grtDiv #grtUpd {/* opacity:0.2; */display:none;}#grtDiv.grtUpdateAvailable #grtUpd {display:block;opacity:0.8;}#grtDiv.grtUpdateAvailable #grtUpd:hover {display:block;opacity:1}body.grtClub #grtDiv #grtClub,body.grtGuideClub #grtDiv #grtClub {display: block;}#grtClub {background-image:url('+GRT_DOMAIN+'/img/home.png)}#grtCfg {background-image:url('+GRT_DOMAIN+'/img/tool.png)}#grtUpd {background-image:url('+GRT_DOMAIN+'/img/flag.png)}body.grtDimLogo #logoblock {opacity: 0.05 !important;}';if(cssIds.indexOf('forumLatestThreads')>=0)css[css.length]='tr.today {font-weight:bold;}tr.today.exact {background:#B4FF7C !important;}tr.today.minus1 {background:#DEFFC6 !important;}tr.today.minus2 {background:#EEFFE2 !important}tr.today.older td, tr.today.older td * {color:#999 !important;font-weight:normal}';if(cssIds.indexOf('bmi')>=0)css[css.length]='.grtBMI:hover {color:#FBBE00;}.grtBMI {color:#ddd;cursor:pointer;font-style:normal;margin-left:3px;margin-right:2px;}tr.grtOffAge td {opacity: 0.5;}tr.grtOffAge td:first-child {opacity:1}tr.grtOffAge td.optionLine:first-child {opacity:0.5}tr.grtOffBmi td {opacity: 0.4;}body tr.grtOffBmi td:first-child {opacity:0.4;}';if(cssIds.indexOf('historyLink')>=0)css[css.length]='.grtHist {display:inline-block;width:10px;height:10px;overflow:hidden;background:transparent url('+GRT_DOMAIN+'/img/hist.gif) left center no-repeat;cursor:pointer;opacity:0.6;vertical-align:top;}.grtHistActive img {display:none; /* hide letter icon */}.grtHist:hover {opacity:1}#newMessageList .grtHistActive {position:relative;}#newMessageList .grtHist {position:absolute;left:4px;top:3px;}.grtHistActive.read img {display:block}.grtHistActive.read .grtHist {display:none}td.resHeadline .grtHist {display:inline;vertical-align:top;display:inline;padding:0 8px;line-height:14px !important;background-position:0 2px;margin-left:2px;}';if(cssIds.indexOf('overlay')>=0)css[css.length]='#grtGray {position: fixed;left: 0;top: 0;width: 100%;height: 100%;background: #000 none;opacity: 0.7;z-index: 5000;display: none;}div#grtOverlay {display: none;width: auto;height: auto;position: fixed;top: 10px;right: 6px;z-index: 6000;border: 1px solid #bbb;border-radius: 5px 0 0 5px;}div#grtWait {background:transparent url('+GRT_DOMAIN+'/img/load.gif) center center no-repeat;width:100px;height:100px;overflow:hidden;}#grtOverlay > * {display:none}/* replaced by the above rule:#grtOverlay #grtIframe,#grtOverlay #grtHtmlContent,#grtOverlay #grtImage,#grtOverlay #grtUsername,#grtOverlay #grtWait,#grtOverlay #grtAnon,#grtOverlay #grtClose {display:none;}*/#grtOverlay.grtHtmlContent #grtClose, #grtOverlay.grtIframe #grtClose,#grtOverlay.grtIframe #grtIframe,#grtOverlay.grtHtmlContent #grtHtmlContent,#grtOverlay.grtImage #grtImage,#grtOverlay.grtWait #grtWait,#grtOverlay.grtAnon #grtAnon,#grtOverlay.grtImage #grtUsername {display:block;}#grtOverlay.grtIframe,#grtOverlay.grtHtmlContent {border-radius:0;border-left-color:#999;}#grtOverlay.grtHtmlContent {background-color:#305AB1;color:#ccc;}#grtOverlay iframe {border:none !important}#grtOverlay.grtImage {overflow:hidden;}#grtHtmlContent {overflow-y:auto;}#grtOverlay.grtHtmlContent,#grtOverlay.grtIframe,#grtOverlay.grtIframe,#grtOverlay.grtHtmlContent,#grtOverlay.grtImage,#grtOverlay.grtWait,#grtOverlay.grtImage {display:block;background-image:none;}#grtImage {cursor: url('+GRT_DOMAIN+'/img/close.cur), default;}#grtClose {position: absolute;left: -51px;top: -1px;background: #236 url('+GRT_DOMAIN+'/img/close.png) center center no-repeat;width: 50px;height: 300px;border:1px solid #bbb;border-right-width: 0;border-radius: 20px 0 0 20px;opacity: 0.6;cursor: pointer;}#grtClose:hover {opacity: 0.8}#grtUsername {color: yellow;background: #305AB1 none;border: 1px solid #bbb;border-width: 0 0 1px 1px;position: absolute;right: 0;top: 0;padding: 0px 5px 3px 9px;border-radius: 0 0 0 5px;opacity: 0.8;z-index: 6005;box-shadow: 0px 0px 7px #fff;}#grtOverlay.grtNoUser #grtUsername {display:none}#grtAnon {width: 26px;height: 26px;background: transparent url('+GRT_DOMAIN+'/img/nogo.png) center center no-repeat;position: absolute;left: -38px;top: 10px;opacity: 0.3;z-index: 999;cursor: pointer;}';if(cssIds.indexOf('imageZoom')>=0)css[css.length]='.grtZoom {width:17px;height:17px;overflow:hidden;position: absolute;right: 0px;bottom: 1px;cursor: pointer;z-index: 2000;opacity: 0.7;background:transparent url('+GRT_DOMAIN+'/img/lupe2.png) 0 0 no-repeat;}.pUsCe .grtZoom {right:8px;bottom:5px;}.searchResults .grtZoom {bottom:3px;}.grtZoom:hover {opacity: 1;}.grtZoomParent {position:relative;}';if(cssIds.indexOf('pagingLinks')>=0)css[css.length]='#grtNext, #grtPrev {text-decoration: none;outline: none;background: transparent url('+GRT_DOMAIN+'/img/next.png) center center no-repeat;opacity: 0.6;padding: 8px 39px;margin: 0 5px;border: 1px dotted #6890E5}a#grtPrev {background-image: url(http://gr-tools.justlep.net/img/prev.png)}#grtPrev:hover, #grtNext:hover {opacity: 1;}';if(cssIds.indexOf('latestMessage')>=0)css[css.length]='td#grtLastMessage {border: 1px solid #738cbe;border-width: 1px 0;background: #203B71 url('+GRT_DOMAIN+'/img/msgHighlight.gif) right top no-repeat;padding-top: 6px;}td#grtLastMessage > b {padding:0 0 0 15px;}td#grtLastMessage > div {padding:5px 0 0 15px;}';if(cssIds.indexOf('tapse')>=0)css[css.length]='.grtTaps {cursor:pointer;}';return css.join('');};return{init:init};})());}

// ----------------------- END: CSSInjector --------------------------------------------------

GRT.finalize(false && {
    keep: 0,         // keep cookie 14 days after login (0|1)
    de: 1,           // use German (1) or English (0)
    rc: 1,           // enable rightclicks on images (0|1)
    pica: 1,         // enable enhanced image administration (0|1)
    dim: 0,          // dim GR/PR logo (0|1)
    tit: 0,          // make title harmless (0|1)
    lt: 1,           // enable thread highlighter (0|1)
    sb: 1,           // show BMI value (0|1)
    bmi: 1,          // enable BMI filter (0|1)
    bmin: 17,        // min. preferred BMI (10-70) (dunno sensible extremes)
    bmax: 27,        // max. preferred BMI (10-70)
    age: 1,          // enable age filter (0|1)
    amin: 18,        // min. preferred age (18-123)
    amax: 88,        // max. preferred age (18-123)
    secr: 1,         // enable secret click on BMI (0|1)
    popa: 1,         // enable popup avoidance (0|1)
    popt: 1,         // enable popup avoidance on thumbnail-click, too (0|1)
    z: 1,            // enable zoom icons (0|1)
    pl: 1,           // enable big paging links (0|1)
    lm: 1,           // enable last message highlighting (0|1)
    yth: 1,          // enable Youtube links in headlines (0|1)
    ytp: 1,          // enable Youtube links in user profiles (0|1)
    ytpr: 1,         // enable Youtube video preview image (0|1)
    taps: 1          // enable clickable footprints (0|1)
});

// #####################################################################################################################
// ################################################ END OF USERSCRIPT ##################################################
// #####################################################################################################################

// ==UserScript==
// @name				shooter_download_link
// @description		shooter.cn (射手字幕网)在列表页面添加一个直接转向下载页面的连接, 高亮字幕格式, 高亮语言类型, 广告过滤.
// @version			1.0
// @author 			jijihome
// @namespace		http://jijihome.googlecode.com
// @require			http://jijihome.googlecode.com/files/jquery.1.42.for.gm.js
// @include			http://shooter.cn/*
// ==/UserScript==
(function(c){function h(){var a,d,b;$('a[onclick*="gotourl"]').each(function(e,i){b=$(i).parent();a=b.html();b.html(a.replace(/(\u683c\u5f0f\uff1a.+)\s+(\u8bed\u8a00\uff1a.+)\s+(\u8c03\u6821\uff1a)/,'<span style="font-weight:800;color:#C40000;font-size:13px;">$1</span> &nbsp;<span style="font-weight:800;color:#229C2F;font-size:13px;">$2</span> &nbsp;$3'));a=a.replace(/[\s\S]+\([\s\S]*?(\/xml\/file\/\d+\/\d+\.xml)[\s\S]*?\)[\s\S]+/img,"$1");d=a.replace(/[\s\S]+\/(\d+)\.xml/img,"$1");b.append('<a class="real_down" file_id="'+
d+'" href="'+a+'" target="blank" style="margin:0 10px; padding-left:18px; background:url(data:image/gif;base64,R0lGODlhEAAQAPf/AHenK3SkLXutJH+vInqqKHKhMH6wIoCzHoO2G4O2HIW5GIq/E4i8FYy6E469Eo3DD4/EDozBEZbNDZjPDZPFEZbNFpnOFprRDZzSDZ7VDZvSFp3SFqHXDqHYDqTaDqfdDqnfD6rcKK/fLangD6ziD6ziEK/kEK/hL7PjNbTkNrjnOrzpQb/sRr/sSL/pVsLuS8LuTKe1nbbBqNn5kMzMzNPT093d3eDq0ebm5unp6e/v7/Ly8v///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/ACH5BAEKAP8ALAAAAAAQABAAAAiOAP8J/PcAgkEIBQcqFPiAx4yHPB4sVLjghYmLLxZMHLigxYgRJTJuFNhgRYkPI1Q0GPlPgQoPHz6oUMDyQAoPOFMcmHig54ETOC+c8NlToAEXLniE4HDBQwgeSAUoFKCBwoWrVylokLqQgIYGFyZcaKCBwMgAXyWQDcDyXwALDSqwbfuvQIUCdAfizUs3IAA7) no-repeat;">\u771f\u7684\u76f4\u63a5\u4e0b\u8f7d</a>')});
$('a:contains("\u641c\u5f71\u7247\u4e0b\u8f7d"),a:contains("\u627e\u5f71\u7247\u8d44\u8baf"),a[href="/wiki/\u5c04\u624b\u7f51\u6269\u5c55\u641c\u7d22\u8bbe\u7f6e"]').remove();j=1;GM_log(document.location.search);$(window).bind("scroll",function(){clearTimeout(f);var e=window.scrollY;f=setTimeout(function(){if(e===window.scrollY&&!g&&document.body.scrollHeight-window.scrollY<document.documentElement.clientHeight*2)g=true},300)})}function k(){for(var a=[".advside","searchsuggestion","div.statline",
"#searchsuggestion"],d=0,b;b=a[d++];)$(b).remove()}var g=false,f=setTimeout(function(){},10),j;$(function(){var a=c.show_topusercp;c.show_topusercp=function(){};c.show_tips=function(){};$("#tipline").text("shooter_download_link \u6cb9\u7334\u811a\u672c\u52a0\u8f7d\u5b8c\u6bd5");setTimeout(a,5E3);c.shtg_suggestkeywords=function(){};k();$(".footext").html("@author jijihome<br />@name shooter_download_link");if(/\/(?:search|xml\/list)\/sub(?::|\/)/i.test(window.location.href))h();else if(/\/xml\/file\/\d+\/\d+\.xml/i.test(window.location.href)){c.getdownlink();
$("#downloadagreementfieldset,#adbox2").hide()}})})(unsafeWindow);

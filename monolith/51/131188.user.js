// ==UserScript==
// @name			Memes en el Chat v2.5
// @description	              Gracias Por usar el script
// @description	       Visita http://www.facebook.com/tusmemeschat
// @description	        reporta bugs memesenelchat@gmail.com
// @description	        Gracias Por usar el script
// @include			http://facebook.com/*
// @include			http://*.facebook.com/*
// @include			https://facebook.com/*
// @include			https://*.facebook.com/*
// @exclude			http://*.channel.facebook.com/*
// @exclude			https://*.channel.facebook.com/*
// @author			CLUPER
// @version			2.5
// @versionnumber	2.5
// @namespace		http://www.facebook.com/tusmemeschat
// ==/UserScript==
//

	var version, storage, spemotsInfo, spemotsTitle, headTag, styleTag, ArrowStyleUp, ArrowStyleDown, fEmotBarDom, fEmotsListDom, fArrow;

	version = 2.5;
	


	storage = 'none';

	try {
		if (typeof GM_getValue === 'function' && typeof GM_setValue === 'function') {
			GM_setValue('testkey', 'testvalue');
			if (GM_getValue('testkey', false) === 'testvalue') { storage='greasemonkey'; }
		}
	} catch(x) {}
	if (storage=='none' && typeof localStorage == 'object') { storage='localstorage'; }

	function setValue(key, value) {
		switch (storage) {
			case 'greasemonkey':
				GM_setValue('0-'+key, value);
				break;
			case 'localstorage':
				localStorage['femotbar-0-'+key] = value;
				break;
		}
	}

	function getValue(key, value) {
		switch (storage) {
			case 'greasemonkey':
				return GM_getValue('0-'+key, value);
			case 'localstorage':
				var val = localStorage['femotbar-0-'+key];
				if (val=='true') { return true; }
				else if (val=='false') { return false; }
				else if (val) { return val; }
				break;
		}
		return value;
	}
	
	function xmlhttpRequest(params, callBack) {
		if (typeof GM_xmlhttpRequest !== 'undefined') {
			params['onload'] = callBack;
			return GM_xmlhttpRequest(params);
		}
		return null;
	}

	function openInTab(url) {
		if (typeof GM_openInTab !== 'undefined') { GM_openInTab(url); }
		else { window.open(url); }
	}

	
	

	function createSelection(field, start, end) {
		if( field.createTextRange ) {
			var selRange = field.createTextRange();
			selRange.collapse(true);
			selRange.moveStart('character', start);
			selRange.moveEnd('character', end);
			selRange.select();
		} else if( field.setSelectionRange ) {
			field.setSelectionRange(start, end);
		} else if( field.selectionStart ) {
			field.selectionStart = start;
			field.selectionEnd = end;
		}
		field.focus();
	}       
	
	function getCursorPosition(field) {
		var CursorPos = 0;
		if (field.selectionStart || field.selectionStart == '0') CursorPos = field.selectionStart;
		return (CursorPos);
	}
	

	var mean = '[[241015455995828]][[241015459329161]][[241015465995827]][[241015452662495]][[241015462662494]]\n'+
'[[241015572662483]][[241015585995815]][[241015579329149]][[241015582662482]][[241015575995816]]\n'+
'[[241015652662475]][[241015659329141]][[241015669329140]][[241015662662474]][[241015655995808]]\n'+
'[[241015749329132]][[241015755995798]][[241015745995799]][[241015742662466]][[241015752662465]]\n'+
'[[241015959329111]][[241015989329108]][[241015965995777]][[241015962662444]][[241015985995775]]'
   var feellikeasir = 
  '[[370455772985037]][[370455776318370]][[370455766318371]][[370455769651704]][[370455762985038]][[370455886318359]]\n'+
'[[370455882985026]][[370455892985025]][[370455889651692]][[370455896318358]][[370455972985017]][[370455979651683]]\n'+
'[[370455982985016]][[370455969651684]][[370455976318350]][[370456059651675]][[370456072985007]][[370456066318341]]\n'+
'[[370456069651674]][[370456062985008]][[370456159651665]][[370456172984997]][[370456166318331]][[370456162984998]]\n'+
'[[370456169651664]][[370456272984987]][[370456259651655]][[370456266318321]][[370456262984988]][[370456269651654]]\n'+
'[[370456352984979]][[370456356318312]][[370456359651645]][[370456362984978]][[370456349651646]]'
  var lol = 
  '[[324818360907766]][[324818364241099]][[324818357574433]][[324818354241100]][[324818367574432]]\n'+ 
'[[324818494241086]][[324818480907754]][[324818490907753]][[324818484241087]][[324818487574420]]\n'+ 
'[[324818560907746]][[324818557574413]][[324818567574412]][[324818564241079]][[324818570907745]]\n'+ 
'[[324818667574402]][[324818654241070]][[324818660907736]][[324818664241069]][[324818657574403]]\n'+ 
'[[324818767574392]][[324818774241058]][[324818777574391]][[324818764241059]][[324818770907725]]\n'+ 
'[[324818857574383]][[324818867574382]][[324818850907717]][[324818860907716]][[324818864241049]]' 
  var fuckyeah = 
 '[[324816030907999]][[324816020908000]][[324816024241333]][[324816017574667]][[324816027574666]][[324816147574654]]\n'+
'[[324816137574655]][[324816140907988]][[324816134241322]][[324816144241321]][[324816220907980]][[324816214241314]]\n'+
'[[324816217574647]][[324816224241313]][[324816227574646]][[324816287574640]][[324816297574639]][[324816294241306]]\n'+
'[[324816290907973]][[324816300907972]][[324816384241297]][[324816380907964]][[324816370907965]][[324816374241298]]\n'+
'[[324816367574632]][[324816477574621]][[324816487574620]][[324816484241287]][[324816480907954]][[324816474241288]]\n'+
'[[324816567574612]][[324816564241279]][[324816554241280]][[324816560907946]][[324816557574613]]'
  var yaoming = 
 '[[229902780441169]][[229902787107835]][[229902783774502]][[229902773774503]]\n'+
'[[229902777107836]][[229902997107814]][[229903003774480]][[229903000441147]]\n'+ 
'[[229902993774481]][[229903007107813]][[229903157107798]][[229903170441130]]\n'+ 
'[[229903173774463]][[229903167107797]][[229903147107799]][[229903337107780]]\n'+ 
'[[229903347107779]][[229903353774445]][[229903350441112]][[229903343774446]]\n'+ 
'[[229903533774427]][[229903527107761]][[229903530441094]][[229903523774428]]'
  var watchingyou = 
 '[[236220869808620]][[236220873141953]][[236220876475286]][[236220879808619]][[236220883141952]]\n'+
'[[236221016475272]][[236221019808605]][[236221023141938]][[236221026475271]][[236221013141939]]\n'+
'[[236221249808582]][[236221243141916]][[236221256475248]][[236221246475249]][[236221253141915]]\n'+
'[[236221393141901]][[236221386475235]][[236221389808568]][[236221396475234]][[236221399808567]]\n'+
'[[236221719808535]][[236221723141868]][[236221713141869]][[236221716475202]][[236221709808536]]\n'+
'[[236221876475186]][[236221893141851]][[236221889808518]][[236221896475184]][[236221886475185]]'
 var stopyou = 
 '[[390771627613200]][[390771630946533]][[390771637613199]][[390771624279867]][[390771634279866]][[390771734279856]]\n'+
'[[390771737613189]][[390771747613188]][[390771744279855]][[390771740946522]][[390771807613182]][[390771824279847]]\n'+
'[[390771814279848]][[390771817613181]][[390771820946514]][[390771910946505]][[390771900946506]][[390771914279838]]\n'+
'[[390771904279839]][[390771907613172]][[390771997613163]][[390772004279829]][[390772010946495]][[390772007613162]]\n'+
'[[390772000946496]][[390772064279823]][[390772067613156]][[390772074279822]][[390772077613155]][[390772070946489]]'
 var notbad = 
 '[[239289962835784]][[239289956169118]][[239289949502452]][[239289959502451]][[239289952835785]]\n'+
'[[239290072835773]][[239290066169107]][[239290076169106]][[239290079502439]][[239290069502440]]\n'+
'[[239290159502431]][[239290162835764]][[239290152835765]][[239290156169098]][[239290149502432]]\n'+
'[[239290249502422]][[239290252835755]][[239290236169090]][[239290239502423]][[239290246169089]]\n'+
'[[239290352835745]][[239290359502411]][[239290356169078]][[239290362835744]][[239290366169077]]'
 var truestory = 
 '[[231611776936196]][[231611780269529]][[231611773602863]][[231611770269530]][[231611766936197]]\n'+
'[[231611896936184]][[231611890269518]][[231611886936185]][[231611900269517]][[231611893602851]]\n'+
'[[231611980269509]][[231611976936176]][[231611983602842]][[231611986936175]][[231611973602843]]\n'+
'[[231612070269500]][[231612066936167]][[231612080269499]][[231612073602833]][[231612076936166]]\n'+
'[[231612180269489]][[231612183602822]][[231612190269488]][[231612176936156]][[231612186936155]]'
 var okay = 
 '[[296238963769967]][[296238960436634]][[296238953769968]][[296238950436635]][[296238957103301]]\n'+
'[[296239070436623]][[296239077103289]][[296239073769956]][[296239080436622]][[296239083769955]]\n'+
'[[296239160436614]][[296239163769947]][[296239170436613]][[296239173769946]][[296239167103280]]\n'+
'[[296239240436606]][[296239243769939]][[296239237103273]][[296239247103272]][[296239250436605]]\n'+
'[[296239363769927]][[296239377103259]][[296239367103260]][[296239373769926]][[296239370436593]]\n'+
'[[296239473769916]][[296239463769917]][[296239460436584]][[296239467103250]][[296239470436583]]'
 var ultragay = 
 '[[390815444275485]][[390815460942150]][[390815454275484]][[390815457608817]][[390815450942151]][[390815634275466]]\n'+
'[[390815637608799]][[390815644275465]][[390815640942132]][[390815647608798]][[390815800942116]][[390815810942115]]\n'+
'[[390815797608783]][[390815807608782]][[390815804275449]][[390815940942102]][[390815944275435]][[390815947608768]]\n'+
'[[390815954275434]][[390815950942101]][[390816090942087]][[390816080942088]][[390816094275420]][[390816084275421]]\n'+
'[[390816087608754]][[390816184275411]][[390816177608745]][[390816167608746]][[390816174275412]][[390816170942079]]\n'+
'[[390816267608736]][[390816270942069]][[390816277608735]][[390816274275402]][[390816284275401]][[390816384275391]]'
var trollface = 
 '[[241123912651649]][[241123915984982]][[241123909318316]][[241123905984983]][[241123902651650]][[241124025984971]]\n'+
'[[241124022651638]][[241124032651637]][[241124029318304]][[241124019318305]][[241124192651621]][[241124199318287]]\n'+
'[[241124189318288]][[241124205984953]][[241124195984954]][[241124325984941]][[241124319318275]][[241124329318274]]\n'+
'[[241124335984940]][[241124345984939]][[241124559318251]][[241124572651583]][[241124565984917]][[241124562651584]]\n'+
'[[241124569318250]][[241124725984901]][[241124712651569]][[241124722651568]][[241124715984902]][[241124719318235]]\n'+
'[[241124785984895]][[241124789318228]][[241124792651561]][[241124795984894]][[241124799318227]][[241124942651546]]'
var pukingrainbows = 
 '[[393321164025793]][[393321150692461]][[393321154025794]][[393321157359127]][[393321160692460]][[393321270692449]]\n'+
'[[393321264025783]][[393321267359116]][[393321274025782]][[393321277359115]][[393321380692438]][[393321384025771]]\n'+
'[[393321374025772]][[393321387359104]][[393321377359105]][[393321460692430]][[393321474025762]][[393321467359096]]\n'+
'[[393321464025763]][[393321470692429]][[393321577359085]][[393321584025751]][[393321587359084]][[393321574025752]]\n'+
'[[393321580692418]][[393321670692409]][[393321667359076]][[393321674025742]][[393321660692410]][[393321664025743]]'
var siclaro =    '[[290918420968688]][[290918017635395]][[290918024302061]][[290918027635394]][[290918030968727]][[290918117635385]][[290918124302051]]\n'+
'[[290918127635384]][[290918137635383]][[290918140968716]][[290918204302043]][[290918207635376]][[290918210968709]][[290918214302042]]\n'+
'[[290918217635375]][[290918300968700]][[290918294302034]][[290918287635368]][[290918290968701]][[290918297635367]][[290918424302021]]\n'+
'[[290918420968688]][[290918427635354]][[290918430968687]][[290918417635355]][[290918484302015]][[290918487635348]][[290918490968681]]\n'+
'[[290918494302014]][[290918497635347]][[290918600968670]][[290918597635337]][[290918587635338]][[290918594302004]][[290918590968671]]'
var motherofgod = '[[241155412648499]][[241155415981832]][[241155409315166]][[241155419315165]][[241155422648498]][[241155535981820]][[241155542648486]]\n'+
'[[241155545981819]][[241155549315152]][[241155539315153]][[241155619315145]][[241155629315144]][[241155625981811]][[241155632648477]]\n'+
'[[241155622648478]][[241155729315134]][[241155732648467]][[241155722648468]][[241155719315135]][[241155725981801]][[241155835981790]]\n'+
'[[241155839315123]][[241155825981791]][[241155829315124]][[241155832648457]][[241155922648448]][[241155909315116]][[241155905981783]]\n'+
'[[241155912648449]][[241155915981782]][[241155995981774]][[241155992648441]][[241156002648440]][[241156005981773]][[241155999315107]]'
var fuuu = '[[202651026498938]][[202651039832270]][[202651036498937]][[202651029832271]][[202651043165603]][[202651156498925]][[202651159832258]]\n'+
'[[202651166498924]][[202651163165591]][[202651153165592]][[202651223165585]][[202651236498917]][[202651233165584]][[202651226498918]]\n'+
'[[202651229832251]][[202651306498910]][[202651313165576]][[202651309832243]][[202651316498909]][[202651326498908]][[202651443165563]]\n'+
'[[202651449832229]][[202651436498897]][[202651446498896]][[202651439832230]][[202651496498891]][[202651493165558]][[202651499832224]]\n'+
'[[202651506498890]][[202651503165557]][[202651579832216]][[202651583165549]][[202651576498883]][[202651586498882]][[202651589832215]]'
var kiddingme = '[[224133361021814]][[224133351021815]][[224133347688482]][[224133357688481]][[224133354355148]]\n'+
'[[224133464355137]][[224133454355138]][[224133451021805]][[224133461021804]][[224133457688471]]\n'+
'[[224133541021796]][[224133547688462]][[224133544355129]][[224133537688463]][[224133534355130]]\n'+
'[[224133624355121]][[224133621021788]][[224133634355120]][[224133631021787]][[224133627688454]]\n'+
'[[224133717688445]][[224133714355112]][[224133724355111]][[224133711021779]][[224133721021778]]'
var fuckyou = '[[337827499603800]][[337827509603799]][[337827506270466]][[337827502937133]][[337827512937132]]\n'+
'[[337827636270453]][[337827642937119]][[337827639603786]][[337827646270452]][[337827632937120]]\n'+
'[[337827729603777]][[337827732937110]][[337827722937111]][[337827726270444]][[337827736270443]]\n'+
'[[337827799603770]][[337827796270437]][[337827802937103]][[337827792937104]][[337827806270436]]\n'+
'[[337827902937093]][[337827912937092]][[337827906270426]][[337827916270425]][[337827909603759]]'
var nothing = '[[380956931928003]][[380956945261335]][[380956938594669]][[380956941928002]][[380956935261336]][[380957041927992]]\n'+
'[[380957048594658]][[380957038594659]][[380957045261325]][[380957051927991]][[380957135261316]][[380957141927982]]\n'+
'[[380957145261315]][[380957131927983]][[380957138594649]][[380957208594642]][[380957215261308]][[380957211927975]]\n'+
'[[380957205261309]][[380957201927976]][[380957345261295]][[380957341927962]][[380957338594629]][[380957348594628]]\n'+
'[[380957335261296]][[380957421927954]][[380957425261287]][[380957428594620]][[380957415261288]]'
var gtfo = '[[268026366623404]][[268026373290070]][[268026369956737]][[268026376623403]][[268026383290069]][[268026483290059]]\n'+
'[[268026479956726]][[268026493290058]][[268026489956725]][[268026486623392]][[268026563290051]][[268026566623384]]\n'+
'[[268026569956717]][[268026576623383]][[268026579956716]][[268026656623375]][[268026659956708]][[268026646623376]]\n'+
'[[268026649956709]][[268026653290042]][[268026749956699]][[268026746623366]][[268026743290033]][[268026739956700]]\n'+
'[[268026736623367]][[268026833290024]][[268026819956692]][[268026826623358]][[268026829956691]][[268026823290025]]'
var reaction = '[[248735251890515]][[248735245223849]][[248735258557181]][[248735255223848]][[248735248557182]]\n'+
'[[248735351890505]][[248735358557171]][[248735355223838]][[248735365223837]][[248735361890504]]\n'+
'[[248735455223828]][[248735458557161]][[248735451890495]][[248735448557162]][[248735445223829]]\n'+
'[[248735541890486]][[248735531890487]][[248735535223820]][[248735538557153]][[248735545223819]]\n'+
'[[248735675223806]][[248735671890473]][[248735668557140]][[248735665223807]][[248735661890474]]'
var nomedigas = '[[377423912288223]][[377423908954890]][[377423902288224]][[377423905621557]][[377423915621556]][[377424012288213]]\n'+
'[[377424015621546]][[377424008954880]][[377424005621547]][[377424002288214]][[377424088954872]][[377424082288206]]\n'+
'[[377424092288205]][[377424095621538]][[377424085621539]][[377424165621531]][[377424178954863]][[377424172288197]]\n'+
'[[377424175621530]][[377424168954864]][[377424268954854]][[377424272288187]][[377424258954855]][[377424262288188]]\n'+
'[[377424265621521]][[377424342288180]][[377424345621513]][[377424348954846]][[377424338954847]][[377424335621514]]'
var soclose = '[[268120616613979]][[268120619947312]][[268120623280645]][[268120626613978]][[268120629947311]]\n'+
'[[268120833280624]][[268120829947291]][[268120826613958]][[268120823280625]][[268120819947292]]\n'+
'[[268120923280615]][[268120913280616]][[268120916613949]][[268120909947283]][[268120919947282]]\n'+
'[[268121003280607]][[268121006613940]][[268121009947273]][[268121016613939]][[268121013280606]]\n'+
'[[268121109947263]][[268121099947264]][[268121096613931]][[268121106613930]][[268121103280597]]'
var megusta = '[[224875517614265]][[224875514280932]][[224875510947599]][[224875507614266]][[224875520947598]]\n'+
'[[224875624280921]][[224875630947587]][[224875620947588]][[224875627614254]][[224875634280920]]\n'+
'[[224875707614246]][[224875704280913]][[224875714280912]][[224875710947579]][[224875717614245]]\n'+
'[[224875790947571]][[224875784280905]][[224875780947572]][[224875797614237]][[224875777614239]]\n'+
'[[224875897614227]][[224875884280895]][[224875890947561]][[224875887614228]][[224875894280894]]'
var hay = '[[431474030212209]][[431474026878876]][[431474020212210]][[431474016878877]][[431474023545543]][[431474146878864]]\n'+
'[[431474160212196]][[431474153545530]][[431474150212197]][[431474156878863]][[431474233545522]][[431474240212188]]\n'+
'[[431474243545521]][[431474246878854]][[431474236878855]][[431474326878846]][[431474313545514]][[431474316878847]]\n'+
'[[431474320212180]][[431474323545513]][[431474443545501]][[431474440212168]][[431474430212169]][[431474436878835]]\n'+
'[[431474446878834]][[431474533545492]][[431474536878825]][[431474530212159]][[431474526878826]][[431474523545493]]'
var challenge = '[[341237112603485]][[341237119270151]][[341237115936818]][[341237109270152]][[341237122603484]][[341237225936807]]\n'+
'[[341237232603473]][[341237229270140]][[341237222603474]][[341237235936806]][[341237322603464]][[341237329270130]]\n'+
'[[341237325936797]][[341237332603463]][[341237319270131]][[341237392603457]][[341237395936790]][[341237399270123]]\n'+
'[[341237402603456]][[341237405936789]][[341237479270115]][[341237482603448]][[341237485936781]][[341237472603449]]\n'+
'[[341237475936782]][[341237552603441]][[341237555936774]][[341237559270107]][[341237562603440]][[341237565936773]]'
var no = '[[341191499274713]][[341191495941380]][[341191505941379]][[341191502608046]][[341191509274712]]\n'+
'[[341191609274702]][[341191602608036]][[341191599274703]][[341191595941370]][[341191605941369]]\n'+
'[[341191732608023]][[341191725941357]][[341191719274691]][[341191715941358]][[341191729274690]]\n'+
'[[341191912608005]][[341191902608006]][[341191929274670]][[341191895941340]][[341191925941337]]\n'+
'[[341192172607979]][[341192175941312]][[341192182607978]][[341192179274645]][[341192185941311]]\n'+
'[[341192319274631]][[341192315941298]][[341192309274632]][[341192305941299]][[341192312607965]]'
var alone = '[[203703696394411]][[203703689727745]][[203703693061078]][[203703699727744]][[203703703061077]][[203703789727735]]\n'+
'[[203703793061068]][[203703783061069]][[203703786394402]][[203703796394401]][[203703863061061]][[203703866394394]]\n'+
'[[203703856394395]][[203703853061062]][[203703859727728]][[203703926394388]][[203703923061055]][[203703919727722]]\n'+
'[[203703916394389]][[203703913061056]][[203704023061045]][[203704009727713]][[203704013061046]][[203704026394378]]\n'+
'[[203704019727712]][[203704106394370]][[203704099727704]][[203704103061037]][[203704096394371]][[203704093061038]]\n'+
'[[203704156394365]][[203704159727698]][[203704169727697]][[203704153061032]][[203704163061031]][[203704226394358]]'
var closeenough = '[[343967595659509]][[343967585659510]][[343967575659511]][[343967582326177]][[343967578992844]][[343967742326161]]\n'+
'[[343967735659495]][[343967732326162]][[343967728992829]][[343967725659496]][[343967828992819]][[343967832326152]]\n'+
'[[343967825659486]][[343967842326151]][[343967838992818]][[343967938992808]][[343967942326141]][[343967948992807]]\n'+
'[[343967945659474]][[343967952326140]][[343968082326127]][[343968092326126]][[343968098992792]][[343968102326125]]\n'+
'[[343968095659459]][[343968185659450]][[343968178992784]][[343968188992783]][[343968175659451]][[343968182326117]]'
var cerealguy = '[[402261879798388]][[402261869798389]][[402261873131722]][[402261883131721]][[402261876465055]][[402262013131708]]\n'+
'[[402262006465042]][[402262019798374]][[402262009798375]][[402262016465041]][[402262103131699]][[402262099798366]]\n'+
'[[402262096465033]][[402262106465032]][[402262109798365]][[402262173131692]][[402262183131691]][[402262176465025]]\n'+
'[[402262179798358]][[402262169798359]][[402262303131679]][[402262313131678]][[402262306465012]][[402262299798346]]\n'+
'[[402262309798345]][[402262389798337]][[402262376465005]][[402262379798338]][[402262383131671]][[402262386465004]]\n'+
'[[402262466464996]][[402262473131662]][[402262459798330]][[402262469798329]][[402262463131663]][[402262529798323]]'
var fap = '[[389747541049822]][[389747537716489]][[389747544383155]][[389747534383156]][[389747531049823]]\n'+
'[[389747657716477]][[389747651049811]][[389747654383144]][[389747647716478]][[389747661049810]]\n'+
'[[389747734383136]][[389747727716470]][[389747737716469]][[389747741049802]][[389747724383137]]\n'+
'[[389747827716460]][[389747824383127]][[389747821049794]][[389747814383128]][[389747817716461]]\n'+
'[[389747931049783]][[389747937716449]][[389747934383116]][[389747944383115]][[389747941049782]]'
var baww = '[[449135841779361]][[449135848446027]][[449135851779360]][[449135838446028]][[449135855112693]]\n'+
'[[449136038446008]][[449136041779341]][[449136048446007]][[449136055112673]][[449136035112675]]\n'+
'[[449136221779323]][[449136211779324]][[449136218445990]][[449136225112656]][[449136228445989]]\n'+
'[[449136295112649]][[449136288445983]][[449136285112650]][[449136298445982]][[449136291779316]]\n'+
'[[449136441779301]][[449136455112633]][[449136448445967]][[449136451779300]][[449136445112634]]\n'+
'[[449136531779292]][[449136535112625]][[449136528445959]][[449136538445958]][[449136525112626]]'
var somuch = '[[286164641477632]][[286164648144298]][[286164638144299]][[286164654810964]][[286164644810965]][[286164868144276]]\n'+
'[[286164854810944]][[286164864810943]][[286164858144277]][[286164861477610]][[286165031477593]][[286165028144260]]\n'+
'[[286165034810926]][[286165038144259]][[286165041477592]][[286165211477575]][[286165218144241]][[286165204810909]]\n'+
'[[286165208144242]][[286165221477574]][[286165328144230]][[286165341477562]][[286165338144229]][[286165334810896]]\n'+
'[[286165331477563]][[286165414810888]][[286165421477554]][[286165418144221]][[286165428144220]][[286165424810887]]\n'+
'[[286165508144212]][[286165514810878]][[286165511477545]][[286165518144211]][[286165504810879]][[286165591477537]]'
var yuno = '[[311066705635860]][[311066708969193]][[311066712302526]][[311066702302527]][[311066698969194]][[311066835635847]]\n'+
'[[311066825635848]][[311066828969181]][[311066832302514]][[311066822302515]][[311066912302506]][[311066905635840]]\n'+
'[[311066915635839]][[311066908969173]][[311066918969172]][[311066985635832]][[311066975635833]][[311066988969165]]\n'+
'[[311066982302499]][[311066978969166]][[311067125635818]][[311067122302485]][[311067128969151]][[311067132302484]]\n'+
'[[311067118969152]][[311067205635810]][[311067195635811]][[311067198969144]][[311067208969143]][[311067202302477]]'
var inglip ='[[322783667782163]][[322783677782162]][[322783671115496]][[322783681115495]][[322783674448829]][[322783787782151]]\n'+
'[[322783777782152]][[322783791115484]][[322783784448818]][[322783781115485]][[322783877782142]][[322783881115475]]\n'+
'[[322783871115476]][[322783874448809]][[322783867782143]][[322783951115468]][[322783944448802]][[322783947782135]]\n'+
'[[322783937782136]][[322783941115469]][[322784034448793]][[322784031115460]][[322784041115459]][[322784044448792]]\n'+
'[[322784037782126]][[322784111115452]][[322784104448786]][[322784114448785]][[322784117782118]][[322784107782119]]\n'+
'[[322784194448777]][[322784204448776]][[322784191115444]][[322784201115443]][[322784197782110]]'
var pokerface ='[[385611918129582]][[385611911462916]][[385611908129583]][[385611914796249]]\n'+
'[[385611904796250]][[385612028129571]][[385612021462905]][[385612024796238]]\n'+ 
'[[385612031462904]][[385612018129572]][[385612101462897]][[385612094796231]]\n'+ 
'[[385612104796230]][[385612098129564]][[385612091462898]][[385612178129556]]\n'+
'[[385612188129555]][[385612184796222]][[385612194796221]][[385612191462888]]\n'+ 
'[[385612291462878]][[385612294796211]][[385612284796212]][[385612288129545]]'
var miradafija = '[[416882258335470]][[416882271668802]][[416882268335469]][[416882261668803]][[416882265002136]][[416882385002124]]\n'+
'[[416882391668790]][[416882381668791]][[416882398335456]][[416882388335457]][[416882471668782]][[416882481668781]]\n'+
'[[416882485002114]][[416882475002115]][[416882478335448]][[416882565002106]][[416882568335439]][[416882578335438]]\n'+
'[[416882575002105]][[416882571668772]][[416882665002096]][[416882658335430]][[416882668335429]][[416882661668763]]\n'+
'[[416882655002097]][[416882735002089]][[416882728335423]][[416882731668756]][[416882741668755]][[416882738335422]]'

var download = ' Visita http://www.facebook.com/tusmemeschat'
 	spemotsInfo = [mean, 'http://graph.facebook.com/364837310227369/picture', feellikeasir, 'http://graph.facebook.com/168040846586189/picture', lol, 'http://graph.facebook.com/163621673695776/picture', fuckyeah, 'http://graph.facebook.com/142935905760229/picture', yaoming, 'http://graph.facebook.com/364837326894034/picture', watchingyou, 'http://graph.facebook.com/117243081697194/picture', stopyou, 'http://graph.facebook.com/364838220227278/picture', notbad, 'http://graph.facebook.com/220611681291318/picture', truestory, 'http://graph.facebook.com/285614544826555/picture', okay, 'http://graph.facebook.com/364838226893944/picture', ultragay, 'http://graph.facebook.com/364842060226894/picture', trollface, 'http://graph.facebook.com/364842046893562/picture', pukingrainbows, 'http://graph.facebook.com/364842030226897/picture', siclaro, 'http://graph.facebook.com/365368090174291/picture', motherofgod, 'http://graph.facebook.com/364838210227279/picture', fuuu, 'http://graph.facebook.com/365348903509543/picture', kiddingme, 'https://graph.facebook.com/370699836307783/picture', fuckyou, 'https://graph.facebook.com/158042224262042/picture', nothing, 'https://graph.facebook.com/157520857644819/picture', gtfo, 'http://graph.facebook.com/370700082974425/picture', reaction, 'http://graph.facebook.com/370699872974446/picture', nomedigas, 'http://graph.facebook.com/313683511991706/picture', soclose, 'http://graph.facebook.com/370700012974432/picture', megusta, 'http://graph.facebook.com/370699802974453/picture', hay, 'http://graph.facebook.com/370700169641083/picture', challenge, 'https://graph.facebook.com/370699906307776/picture', no, 'https://graph.facebook.com/370700192974414/picture', alone, 'https://graph.facebook.com/370700209641079/picture', closeenough, 'https://graph.facebook.com/370699936307773/picture', cerealguy, 'http://graph.facebook.com/370699892974444/picture', fap, 'http://graph.facebook.com/218560678167333/picture', baww, 'http://graph.facebook.com/216013765178317/picture', somuch, 'http://graph.facebook.com/209779235732930/picture', yuno, 'http://graph.facebook.com/100002999731094/picture', inglip, 'http://graph.facebook.com/235037669845328/picture', pokerface, 'http://graph.facebook.com/225347990886311/picture', miradafija, 'http://graph.facebook.com/167979786599783/picture', download, 'http://graph.facebook.com/134799793315286/picture'];
 
    spemotsTitle = ['mean', ' ', 'feellikeasir', ' ','lol', ' ','fuckyeah', ' ', 'yaoming', ' ','watchingyou', ' ','stopyou', ' ','notbad', ' ','truestory', ' ','okay', ' ','ultragay', ' ','trollface',' ','pukingrainbows',' ','siclaro',' ','motherofgod',' ','fuuu',' ','kiddingme',' ','fuckyou',' ','nothing',' ','gtfo',' ','reaction',' ','nomedigas',' ','soclose',' ','megusta',' ','hay',' ','challenge',' ','no',' ','alone',' ','closeenough',' ','cerealguy',' ','fap',' ','baww',' ','somuch',' ','yuno',' ','inglip',' ','pokerface',' ','miradafija'];
    headTag = document.getElementsByTagName('head')[0];
    if (headTag) {
		styleTag = document.createElement('style');
		styleTag.type = 'text/css';
		styleTag.innerHTML =
			'.chat_tab_emot_bar {padding-top: 2px; padding-bottom: 6px; line-height: 16px; padding-left: 2px; background:#EEEEEE none repeat scroll 0 0; border-style: solid; border-width: 0px 0px 1px 0px; border-color: #C9D0DA; position: static; }'+
			'.fbNubFlyoutInner {position:relative !important;bottom:0px !important;}';
		headTag.appendChild(styleTag);
	}
	
	ArrowStyleUp = 'cursor: pointer; position: absolute; right: 2px; -moz-transform: rotate(180deg); -webkit-transform: rotate(180deg);'
	ArrowStyleDown = 'cursor: pointer; position: absolute; right: 2px;'
	
	fEmotBarDom = document.createElement('div');
	fEmotBarDom.setAttribute('class','chat_tab_emot_bar');

	
	fEmotsListDom = document.createElement('div');
	fEmotsListDom.setAttribute('name','EmotsList');
	fEmotBarDom.appendChild(fEmotsListDom);
	
	
	for(i=0;i<spemotsInfo.length;i+=2) {
		var fEmotsDom = document.createElement('img');
		fEmotsDom.setAttribute('alt',spemotsInfo[i]);
		fEmotsDom.setAttribute('title',spemotsTitle[i]);
		fEmotsDom.setAttribute('src','' + spemotsInfo[i+1]);
		fEmotsDom.setAttribute('style','cursor: pointer;');
		fEmotsDom.setAttribute('class','emote_custom');
		fEmotsListDom.appendChild(fEmotsDom);
	}
	
	

	fArrow = document.createElement('i');
	fArrow.setAttribute('alt','');
	fArrow.setAttribute('class','img chat_arrow');
	fArrow.setAttribute('style',ArrowStyleUp);
	fEmotBarDom.appendChild(fArrow);
	
	var setting_visible = getValue('visible',true);
	
	document.addEventListener('DOMNodeInserted', fInsertedNodeHandler, false);

	function fInsertedNodeHandler(event) {
		if(event.target.getElementsByClassName && event.target.getElementsByClassName('fbNubFlyout fbDockChatTabFlyout')[0])
			fInsertEmotBar(event.target);
	}

	function fInsertEmotBar(fChatWrapper) {
		fChatToolBox = fChatWrapper.getElementsByClassName('fbNubFlyoutHeader')[0]
		fNewEmotBar = fEmotBarDom.cloneNode(true);
		setVisibility(fNewEmotBar);
		for(i=0;i<fNewEmotBar.firstChild.childNodes.length-2;i++) fNewEmotBar.firstChild.childNodes[i].addEventListener('click', fEmotClickHandler , false);

		fNewEmotBar.firstChild.childNodes[i].addEventListener('click' , fStyleClickHandler , false);
		fNewEmotBar.firstChild.childNodes[i+1].addEventListener('click' , fStyleClickHandler , false);
		
		fNewEmotBar.childNodes[1].addEventListener('click', fHideShowEmotBar , false);
		if(fChatToolBox.childNodes) fChatToolBox.insertBefore(fNewEmotBar,fChatToolBox.childNodes[1]);
	}

	function fEmotClickHandler(event){
		var fChatInput = event.target.parentNode.parentNode.parentNode.parentNode.getElementsByClassName('fbNubFlyoutFooter')[0].getElementsByClassName('inputContainer')[0].getElementsByClassName('uiTextareaAutogrow input')[0];
		var pos = getCursorPosition(fChatInput);
		
		var txtbef = ''; var txtaft = '';
		
		if (fChatInput.value.charAt(pos-1) != ' ' && pos-1 > 0) txtbef = ' ';
		if (fChatInput.value.charAt(pos) != ' ') txtaft = ' ';
		
		fChatInput.value = fChatInput.value.substring(0,pos) + txtbef + event.target.getAttribute('alt') + txtaft + fChatInput.value.substring(pos);
		createSelection(fChatInput,pos + event.target.getAttribute('alt').length + txtaft.length + txtbef.length,pos + event.target.getAttribute('alt').length + txtaft.length + txtbef.length);
	}
	
	function fStyleClickHandler(event){
		var fChatInput = event.target.parentNode.parentNode.parentNode.parentNode.getElementsByClassName('fbNubFlyoutFooter')[0].getElementsByClassName('inputContainer')[0].getElementsByClassName('uiTextareaAutogrow input')[0];
		
		var selectedText = fChatInput.value.substring(fChatInput.selectionStart, fChatInput.selectionEnd);
		
		var pos = getCursorPosition(fChatInput);
		var txtlen = selectedText.length;
		
		if (txtlen == 0) {
			fChatInput.value = fChatInput.value.substring(0,pos) + event.target.getAttribute('alt') + fChatInput.value.substring(pos);
			createSelection(fChatInput,pos + 1,pos + event.target.getAttribute('alt').length-1);
		}
		else {
			var txtbef = event.target.getAttribute('alt').charAt(0);
			var txtaft = event.target.getAttribute('alt').charAt(0);
			
			while (fChatInput.value.charAt(pos) == ' ') { pos += 1; txtlen -= 1; }
			while (fChatInput.value.charAt(pos+txtlen-1) == ' ') txtlen -= 1;
			
			if (fChatInput.value.charAt(pos-1) != ' ' && pos-1 > 0) txtbef = ' ' + txtbef;
			if (fChatInput.value.charAt(pos+txtlen) != ' ') txtaft += ' ';
			
			fChatInput.value = fChatInput.value.substring(0,pos) + txtbef + fChatInput.value.substring(pos,pos+txtlen) + txtaft + fChatInput.value.substring(pos + txtlen);
			
			createSelection(fChatInput, pos + txtlen + 2, pos + txtlen + 2);
		}
	}

	function fHideShowEmotBar(event){
		fChatBar = document.getElementsByName('EmotsList');
		if(fChatBar[0].getAttribute('style') == 'display: none;') {
			for(i=0;i<fChatBar.length;i++) {
				fChatBar[i].setAttribute('style','display: block;');
				fChatBar[i].parentNode.childNodes[1].setAttribute('style',ArrowStyleUp);
			}
		}
		else {
			for(i=0;i<fChatBar.length;i++) {
				fChatBar[i].setAttribute('style','display: none;');
				fChatBar[i].parentNode.childNodes[1].setAttribute('style',ArrowStyleDown);
			}
		}
		setValue('visible',!setting_visible);
		setting_visible = !setting_visible;
	}
	
	function setVisibility(DOM) {
		if(setting_visible) {
			DOM.firstChild.setAttribute('style','display: block;');
			DOM.childNodes[1].setAttribute('style',ArrowStyleUp);
		}
		else {
			DOM.firstChild.setAttribute('style','display: none;');
			DOM.childNodes[1].setAttribute('style',ArrowStyleDown);
		}
	}


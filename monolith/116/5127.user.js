// ==UserScript==
// @namespace     http://www.tweaksthelimbs.org/greasemonkey/
// @name          Ta-da List Tweaks
// @description   Places a count of your list items next to the list title when in view/add/checkoff mode. Places the add new item control at the top of the list of incomplete items. Adds a favicon to the site.
// @include       http://*.tadalist.com/*
// @version       0.1
// @FF_version    1.5
// @GM_version    0.6.4
// ==/UserScript==

if(/show/.test(location.href)){

	//adds counter to the list
	var t = document.getElementById('incompleted');
	var h = document.getElementsByTagName('h1')[0];
	var s = document.createElement('span');
	s.innerHTML = '0';
	s.setAttribute('id','countie');
	h.appendChild(document.createTextNode(' \('));
	h.appendChild(s);
	h.appendChild(document.createTextNode('\)'));
	
	function countItems(){
	     var tr = t.getElementsByTagName('li').length;
	     document.getElementById('countie').innerHTML = tr;
	}
	
	function addItem(){
	     var old = document.getElementById('countie').innerHTML;
	     document.getElementById('countie').innerHTML = Number(old) + 1;
	}
	
	function removeItem(){
	     var old = document.getElementById('countie').innerHTML;
	     document.getElementById('countie').innerHTML = Number(old) - 1;
	}
	
	t.addEventListener('DOMNodeInserted',addItem,false);
	t.addEventListener('DOMNodeRemoved',removeItem,false);
	countItems();
	
	//places the add new item at the top of the list
	function xpath(query){return document.evaluate(query, document, null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE, null);}
	var addItemNode = xpath("//div[@class='additem']").snapshotItem(0);
	var addItemForm = xpath("//form[@id='add_item_form']").snapshotItem(0);
	var incompleteItemsNode = xpath("//div[@class='tadalist']").snapshotItem(0);
	incompleteItemsNode.parentNode.insertBefore(addItemNode,incompleteItemsNode);
	incompleteItemsNode.parentNode.insertBefore(addItemForm,incompleteItemsNode);

}

// Adds the favicon to the page
var link = document.createElement('link');
link.setAttribute('rel', 'shortcut icon');
link.setAttribute('type', 'image/x-icon');
link.setAttribute("href","data:image/x-icon,%00%00%01%00%02%00%10%10%00%00%00%00%00%00h%05%00%00%26%00%00%00%20%20%00%00%00%00%00%00%A8%08%00%00%8E%05%00%00(%00%00%00%10%00%00%00%20%00%00%00%01%00%08%00%00%00%00%00%40%01%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%FF%FF%FF%00Q%C0p%00%A5N%10%00%D3%C3%8C%00%C1%88%5C%00%BF%DF%C7%00%8F%C8%89%00%F6%DC%B8%00%88%AB%5B%00%E5%DF%E5%00W%A6J%00%BB%AEh%00%A6%CB%AF%00%B7u%3D%00%D6%BF%B0%00l%C4%82%00%3E%B7V%00%CC%9C%7C%00%AD%60%26%00%FB%F3%E5%00%E1%DB%C7%00_%B9%5C%00%DB%CF%9F%00%D0%E2%D7%00%9E%3F%00%00%F0%EA%C7%00z%BA%60%00%D4%B5%9B%00%DF%DF%B3%00%EA%EC%F1%00%7C%C5%8B%00M%AEV%00%F9%F1%F8%00%EB%DE%D4%00E%BDe%00%96%C3%7B%00%D1%A6%88%00%9A%CA%A4%00%60%BBl%00%AA%D9%B4%00%F2%E7%E2%00%95%A6U%00%5E%C3x%00%87%C4%94%00%DB%DC%DC%00%C7%D6%CB%00%E4%EB%E6%00%EB%E0%B4%00%BC%D5%C2%00%E5%D1%C3%00P%BAe%00%E0%D9%D2%00%E4%D9%BB%00%DD%CC%95%00%AC%5D%1C%00%E2%D7%AD%00%EE%F1%E9%00%E9%E6%DA%00%C3%8Dd%00%B5%DB%C4%00%EA%E6%EA%00%FA%FA%FA%00%F1%F1%F1%00F%B9%5E%00L%B3%5C%00%DD%E3%DF%00d%C4%7D%00%BF%B1n%00%D6%C7%92%00%A7S%15%00c%B8b%00%E8%E7%E1%00%F0%EA%EF%00%EF%E6%C2%00%F5%ED%F4%00%E0%E3%E5%00%9D%CE%A8%00U%A9O%00K%BDg%00%5C%BDp%00%AA%CF%B1%00%F6%F7%F7%00%FF%FC%F8%00V%BEn%00%D5%E4%D9%00%D7%DC%D8%00%FC%F5%FB%00%7B%B5%5E%00%F9%F3%E0%00%E5%E5%E5%00%FE%FA%FE%00%ED%EF%EE%00%EB%E7%EF%00%EC%E2%D9%00%D9%E2%DC%00%D1%A5%83%00L%BAb%00%F4%F3%F5%00%E7%E9%ED%00%EA%E7%E5%00F%BCa%00%DF%DA%D6%00%E7%E8%E8%00p%C4%83%00%E0%E1%E1%00%F1%ED%F1%00%E6%EC%EF%00%DD%DF%E0%00%E1%DE%B6%00a%C3z%00%ED%E7%EC%00%85%C6%92%00%FD%FD%FD%00%E8%E1%B3%00N%BDh%00%E0%E4%E2%00U%A7L%00H%BA%60%00%F2%E5%E0%00%FB%F8%FB%00%F6%EF%F5%00%E9%E9%E9%00%E6%E6%E7%00%E2%E3%E3%00%DD%DD%DD%00%DA%DA%DB%00%F3%F3%F3%00%E9%EA%ED%00%E8%E9%EB%00%E3%E4%E5%00%CC%9E%7B%00%FF%FD%FF%00%FE%FE%FE%00%5B%BCo%00%FE%FC%FC%00%F0%F0%F0%00%E1%E2%E2%00%DE%E0%E1%00%EA%DF%B5%00H%B9_%00F%BCe%00R%C1p%00%FB%F6%FB%00%60%C4z%00%EA%E8%E9%00%E8%E8%E9%00%E5%E6%E6%00%E4%DF%E4%00%DF%E0%E0%00%DE%DF%DF%00%DD%DE%DE%00%A7R%15%00%FE%FF%FF%00%E8%E9%E9%00%E7%E7%E8%00%E2%E3%E4%00%DA%DB%DB%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%00%01%01%5B!I%93B_t%91KW%84%01%01%00%01o.%26%1F%10n%2BChpQVy%01%00%5C%2C3e%8D%20u%0BNA%23%40%86%0Dx%00(%11s'*DE%17%04%0C%09TvaU%00%06%8C%02X%08%992%12%22S6GOP%2F%00jM%8E%1B%14%5E%13%19%3B%99m%16%901%8F%00b%94%3C%24Y%25%05%83Fw%1D%07%18%0Aq%00%85~%5D%150%87%01)%03%60rd%3D%97%01%00%01%97%95%9B8%8BJ%1A%0E75%1E%96z%01%00%01%3F%9D%82cH%3A9%1C%98%0Fki%3E%01%00%01%01%9A%9D%7C%7B%81%80%924fl%7F%01%01%00%01%01%85g%9D%96%89%7C%9CL%8A%3F%01%01%01%00%01%01%01%01%88i--%7DZR%01%01%01%01%00%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%80%00%00%00%80%00%00%00%80%00%00%00%80%00%00%00%80%00%00%00%80%00%00%00%80%00%00%00%80%00%00%00%80%00%00%00%80%00%00%00%80%00%00%00%80%00%00%00%80%00%00%00%80%00%00%00%80%00%00%00%FF%FF%00%00(%00%00%00%20%00%00%00%40%00%00%00%01%00%08%00%00%00%00%00%80%04%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%FF%FF%FF%00%AF%90%3B%00%A4%D1%AE%00E%BAa%00%A0E%02%00%E5%C1u%00%F4%E0%B9%00~%A6X%00w%C5%87%00%C3%93o%00%D9%E9%E5%00%AFd%2C%00%BA%C2%85%00%DD%BD%A9%00%D8%A9Q%00%C7%D4%CB%00%87%8E%3D%00%D2%A8%8B%00%5C%AFK%00%5B%C3v%00%BD%80R%00%87%D2%9E%00%E2%D0%90%00%99%B3S%00%CB%BAg%00n%96H%00%A8T%17%00%F1%F1%EB%00%EA%E2%D3%00%E3%CE%BA%00%C6%9CG%00u%C0p%00%B6%D2%BD%00%D9%D5%D9%00k%ABb%00%E3%D7%A8%00X%B2f%00%99%8E%3E%00%E9%E3%E8%00h%A1T%00%B4n9%00%D6%B6%9B%00%DC%CA%82%00%CB%9Dy%00%DA%B4h%00%D4%C0s%00%E5%DF%C4%00U%A7V%00%F0%F2%FA%00%F7%E5%C7%00%83%9BO%00i%C5%7D%00r%CE%91%00%F1%D8%A9%00O%BEj%00%B9vI%00%C1%8A%5B%00%E4%DB%B5%00h%B6Z%00%C9%A0T%00%F1%E7%DE%00%BC%93%3D%00%AC%5C%22%00%D6%C2%B3%00%DF%DF%DF%00%A4L%0C%00%E8%EB%F3%00%95%ABJ%00%80%C8%8F%00%E6%D5%9B%00%9B%CB%A6%00%BD%D6%C3%00y%93E%00%FB%F8%ED%00F%B2Z%00%F4%FB%FF%00%C2%8Df%00%B3%98A%00%EC%DF%B0%00a%B1T%00_%B8k%00%DE%D0%A1%00%DD%C4o%00%E0%C7%B3%00%EE%E9%CD%00%D3%DC%D5%00%8F%8E7%00%B1%DA%BB%00%E9%D8%CA%00%F8%F7%F6%00%BC%D6%B8%00X%BFn%00%E8%E6%DC%00%C8%DD%CD%00%E4%C6%84%00%F0%EF%E2%00%EF%E9%ED%00%E2%E7%E7%00%E1%CA%98%00d%C0w%00%E0%BCp%00%CF%A6T%00%B2i2%00%E5%CA%8D%00_%C7%7D%00M%BBc%00%8D%CE%9A%00%D0%A5%84%00T%C2u%00%C4%97v%00%EF%ED%D9%00%A9%D3%B2%00%80%90%40%00%D4%AE%8F%00%F2%F3%F3%00%E9%EA%EB%00%E3%C2%7C%00%DC%C6v%00%D9%C4%7F%00%CD%D3%CF%00%E9%DB%A8%00%EA%F1%F6%00%BB%7CL%00o%C3%80%00%DC%CA%89%00%FB%FB%FB%00%B1%D5%B9%00%DA%DC%DC%00%96%B3M%00%DD%C7%B9%00%E9%D8%A0%00%B8%D6%BF%00%E3%E3%E3%00%D5%D2%D5%00%D9%C1k%00%A7R%13%00%AEa%24%00%ED%EE%EF%00%DF%D9%DF%00%EB%E1%B6%00%EE%EC%F3%00%A9W%1C%00R%B9i%00_%BFs%00%F4%F8%FB%00E%B8%5D%00R%BFq%00%E9%E7%CD%00b%C4%7B%00%CB%D9%CF%00%E6%DE%B1%00%DE%C4%AF%00%E3%CF%A0%00%A0%CD%AA%00%F5%F5%F0%00Z%C1q%00%95%B2V%00%DD%C7~%00%E7%E7%E7%00%C7%97r%00%CC%A5%88%00%F5%E3%C3%00%E2%DE%E2%00%F4%F7%F5%00U%BDj%00%A4J%08%00%8B%8D9%00%E8%E4%E0%00%F2%E9%CB%00%F8%FC%F9%00Y%C4v%00a%C3w%00%D6%DC%D8%00r%C3%83%00%C6%D8%CA%00%A6O%0E%00I%BA%60%00O%BCf%00%EE%E9%E0%00%EC%E6%DD%00%DA%E1%DC%00%DB%D9%DB%00e%C4z%00%D6%D7%D7%00%D3%D8%D4%00~%C5%8D%00%9C%CF%A7%00%D9%C1o%00%FC%FE%FD%00%F6%F8%F3%00%ED%EF%F5%00%F2%F3%EE%00%EF%F0%F0%00%E6%EB%EE%00%E5%E8%EA%00%E6%E3%E6%00%F0%E5%DB%00%C9%D7%CC%00%CE%A8%89%00%FD%FB%F8%00L%BEh%00%EA%EC%F1%00%EC%EC%EC%00Z%BEo%00%EA%E9%E7%00%5C%C2s%00i%C2%7B%00%DB%C7%B6%00%94%B1K%00%E0%DB%E0%00%DD%DD%DD%00%D8%DA%D9%00t%C5%85%00%EA%E5%E9%00%C3%8Cc%00%CA%D4%CD%00%DD%CB%87%00%F4%FA%FC%00%F4%F6%F2%00V%C2q%00W%C2u%00%EF%EF%E5%00%EE%D8%A8%00%A7R%15%00%A9V%19%00F%B4%5B%00G%B9_%00%F5%F5%F5%00R%BCh%00U%BEl%00%BD%80O%00%E4%E5%E5%00%E5%E1%E5%00%E1%E1%E1%00g%C1y%00%DD%D8%DD%00%B3%D0%BA%00%FA%F9%F9%00%5E%C2u%00m%C3~%00%DB%D5%DB%00%E6%D8%C8%00y%C5%89%00%A3%CF%AC%00%A5O%11%00%A8T%14%00%AAY%1D%00%F8%F9%F8%00H%B8a%00K%BBb%00%EC%F2%F7%00%F6%F3%ED%00%BC%7DN%00%E8%E8%E9%00%5D%BEt%00%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%00%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%00%01%01%01%01%01%01%01%01%01%01%BD~Z%E4%E4%E4%E4%E4%F8~%01%01%01%01%01%01%01%01%01%01%01%00%01%01%01%01%01%01%EE%C1t%C4%85%C4''%C4%C4'''%C4%C4%FE%C1%E4%01%01%01%01%01%01%01%00%01%01%01%01s%85%D2%D2%D2%80%96H%7Fp%BB%BB%03%7F%84%AF%AD%A3%A3%A3%85%CB~%01%01%01%01%00%01%01%E4%EA%EC%B6%C6%03E%CF%90%A5jj%B2%B2%B2j%E5%CCd%09%BBH%D4%D2A%8A%01%01%01%00%01%CB%22%22%ED%BA%CC%E3%B1j%A5%9C%EF%CE%CE%EF%CE%EF%CE%E6%B2%B1%E3%B2%F0%F4%B9%EC%85%BD%01%00%F8%86%D8Ej%E3j%E5%5C%CE%CE7%04%E2KK%E2%F9%C9%DC%14%5C%E5j%E3%E3%EB!%F1%85%01%00%E8x%7C%92j%B2%E5%5C%AB%8F0%1Aq%A7WWW%11I(%25%DD%9C%A5%B2%B2%E3%A5!%22s%00%C4%9A%E3%B2%B2%E5%5C%14%23%26%3Efe_hhhu-%1F%023%FF%9C%A5%B2%B2%92%09%B8%FE%00'G%B1%B2%E5%5C%14QN%06%8Co%DE%A4%DA%91%91%C0%60U%83%0F%08%AB%CC%E5%B2%E3%AE%B8%CB%00%C4%10%CC%B1%A5%CE%14P%BC%9Bs%1C%DB%F2%2C%A0%C7%B4%C0%1C%916Dm%EF%5C%B2%E3%9A%8B%C1%00%9F%8B%F4%FA%E6%AC%EF%13%D9%E4%1C%DB%1C%7BB%88%1B*%9B%1C%DB%A2%D1%93%B7%9C%B1%F3%D3%B6%EE%00%8A%B8%A3%BB%5C%AC%95%13%D9Z%9B%AAl%E0%E1%F7%1B%FD%B3%BE%A42%81%DD%B7%E6%D5V%A3%80%01%00%F8%B8%D3%E9p4i%3B%2B%EE%BDT%8E%88%15)%1B%3F%98%AA~%07%18i%ACk%B5%E9%80%EA%01%00%01%B8%80A'%5E%16%20.%C8Z%E7%05g%3Dl%F5%1B%D7%FC%01%DF%9D5X%9F%C4A%D4t%01%00%01A%D4%D3%EA%D6b%5B%19J~%C5r%1E%01Y%3F%1B%0CY%01%17%0D%0Ba%9F%85A%80Z%01%00%01%8A%D4%D3A%85%9F%8Dw%A9%01%01%01%01%01%BD%15%E0%E0%12%BD%9E%1D%8D%9F%E8%EA%D3%E8%01%01%00%01~%D3%80A%EA%E8CRSJ%01%01%01%01%01%0E%E0%1B8%99%87%CDt%9F%85%EA%D3s%01%01%00%01%01%CB%D4A%EA%E8%9F%FE%7Dv%17FyOOc%89%8E%8E%3C%94%CA%9F%E8%85%D3%E8%BD%01%01%00%01%01~%EA%80A%85%E8%FE%CA%5D%2F%3A%24%24%24%979%1B%88M%FB%FE%E8%85%EA%D3%E4%01%01%01%00%01%01%01s%80%D3%EA%85%E8%9Ft%CA%BF111L%82%B0%A6%F6%D0%CA%E8%EA%D3t%01%01%01%01%00%01%01%01%01t%D4A%EA%E8%E8%9F%9F%FEt%CB%CB%8A%A8%A1n%0A%40%C2%85%D3%85~%01%01%01%01%00%01%01%01%01%BD%E8%80A%EA%85%E8%E8%9F%9F%FE%FE%FEt%FB%FBz%C3%EAAA%F8%01%01%01%01%01%00%01%01%01%01%01~%EA%80A%EA%85%85%E8%E8%E8%E8%E8%E8%E8%E8%85%EAA%D3s%01%01%01%01%01%01%00%01%01%01%01%01%01~%85%D4%D3A%EA%EA%85%85%85%85%85%85%EAA%D3As%01%01%01%01%01%01%01%00%01%01%01%01%01%01%01~%FE%B6%80%D3AA%EA%EA%EAAA%D3%80%85Z%01%01%01%01%01%01%01%01%00%01%01%01%01%01%01%01%01%01s%EA%80%D4%80%80%D3%80%80%80A%CB~%01%01%01%01%01%01%01%01%01%00%01%01%01%01%01%01%01%01%01%01%01s%FE%85AA%EA%9F%C1~%01%01%01%01%01%01%01%01%01%01%01%00%01%01%01%01%01%01%01%01%01%01%01%01%01%01%BD~%BD%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%01%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%80%00%00%00%80%00%00%00%80%00%00%00%80%00%00%00%80%00%00%00%80%00%00%00%80%00%00%00%80%00%00%00%80%00%00%00%80%00%00%00%80%00%00%00%80%00%00%00%80%00%00%00%80%00%00%00%80%00%00%00%80%00%00%00%80%00%00%00%80%00%00%00%80%00%00%00%80%00%00%00%80%00%00%00%80%00%00%00%80%00%00%00%80%00%00%00%80%00%00%00%80%00%00%00%80%00%00%00%80%00%00%00%80%00%00%00%00%00%00%00%FF%FF%FF%FF");
link.setAttribute('height', '16px');
link.setAttribute('width', '16px');
var head = document.getElementsByTagName('head')[0];
head.appendChild(link);

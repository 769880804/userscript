// ==UserScript==
// @name            Posting Tools 2.2
// @author          Duardo// @ contributor          Luke Bonaccorsi AKA SpeedySurfer
// @contributor		CAVX
// @contributor		Sprool
// @contributor		paulmarv
// @namespace       http://gears.speedysurfer.co.uk
// @description     This script adds a number of buttons below the text entry box which insert the text formatting.  NEW: deleted everything under the text formatting except the Forum and PM links.  h3shot removed.  The quote preview cancel submit group is apart of this group
// @license         Creative Commons Attribution License
//   @version	        2.0
// @include         http://*bungie.net/Forums/createpost.aspx*
// @include			http://*bungie.net/fanclub/*/Forums/createpost.aspx*
// @include			http://*bungie.net/account/profile.aspx?uid=*&page=PostMsg
// @include			http://*bungie.net/Account/Profile.aspx?msgID=*&act=reply*
// @include			http://*bungie.net/Account/Profile.aspx?postID=*&act=msg
// @released        2008-08-12
// @compatible      Greasemonkey
// ==/UserScript==
 
/* 
 * This file is a Greasemonkey user script. To install it, you need 
 * the Firefox plugin "Greasemonkey" (URL: http://greasemonkey.mozdev.org/)
 * After you installed the extension, restart Firefox and revisit 
 * this script. Now you will see a new menu item "Install User Script"
 * in your tools menu.
 * 
 * To uninstall this script, go to your "Tools" menu and select 
 * "Manage User Scripts", then select this script from the list
 * and click uninstall :-)
 *
 * Creative Commons Attribution License (--> or Public Domain)
 * http://creativecommons.org/licenses/by/2.5/
*/
function addFormatting()
{
var divArray = document.getElementsByTagName("div");
for (var j = 0; j<divArray.length; j++)
{
if(divArray[j].getAttribute("class") == "list-c" || divArray[j].getAttribute("class") == "list-b" )
{
if(divArray[j].getAttribute("class") == "list-c")
{
	msgBox="ctl00_mainContent_postForm_skin_body";
}else{
	msgBox="ctl00_mainContent_messageForm_skin_body";
}
divArray[j].innerHTML = divArray[j].innerHTML.replace(/<div class=.formgroup3.>/i,"<div class=\"formgroup1\"><div style=\"position:relative; z-index: 5; width: 530px;\"><input type=\"button\" id=\"italbutton\" onClick=\"thisButton=document.getElementById('italbutton');var textbox=document.getElementById('"+msgBox+"');var startPos = textbox.selectionStart;var endPos = textbox.selectionEnd; if(endPos-startPos>0){thisButton.value=thisButton.value.replace('/','');extratext=textbox.value.substring(startPos, endPos)+thisButton.value.replace('[','[/')}else{extratext=''}; textbox.value = textbox.value.substring(0, startPos)+ thisButton.value +extratext+textbox.value.substring(endPos, textbox.value.length); document.getElementById('"+msgBox+"').focus(); caretPos=endPos+thisButton.value.length; textbox.setSelectionRange(caretPos, caretPos); if(extratext==''){if(thisButton.value=='[i]'){thisButton.value='[/i]'}else{thisButton.value='[i]'}};\" value=\"[i]\" style=\"background:#1b1d1f; color:#a3a3a4; border-color:#5c5d5f; border-width:1px; border-style:solid;\" onmouseover=\"thisButton=document.getElementById('italbutton'); thisButton.style.borderColor='#56AACD'; thisButton.style['background']='#17668a'; thisButton.style['color']='#FFFFFF'\" onmouseout=\"thisButton=document.getElementById('italbutton'); thisButton.style['background']='#1b1d1f'; thisButton.style.borderColor='#5c5d5f'; thisButton.style['color']='#a3a3a4'\" />&nbsp;&nbsp;\
																																																																																																																																																																																																																																															<input type=\"button\" id=\"boldbutton\" onClick=\"thisButton=document.getElementById('boldbutton');var textbox=document.getElementById('"+msgBox+"');var startPos = textbox.selectionStart;var endPos = textbox.selectionEnd; if(endPos-startPos>0){thisButton.value=thisButton.value.replace('/','');extratext=textbox.value.substring(startPos, endPos)+thisButton.value.replace('[','[/')}else{extratext=''};textbox.value = textbox.value.substring(0, startPos)+ thisButton.value +extratext+textbox.value.substring(endPos, textbox.value.length); document.getElementById('"+msgBox+"').focus(); caretPos=endPos+thisButton.value.length; textbox.setSelectionRange(caretPos, caretPos); if(extratext==''){if(thisButton.value=='[b]'){thisButton.value='[/b]'}else{thisButton.value='[b]'}};\" value=\"[b]\" style=\"background:#1b1d1f; color:#a3a3a4; border-color:#5c5d5f; border-width:1px; border-style:solid;\" onmouseover=\"thisButton=document.getElementById('boldbutton'); thisButton.style.borderColor='#56AACD'; thisButton.style['background']='#17668a'; thisButton.style['color']='#FFFFFF'\" onmouseout=\"thisButton=document.getElementById('boldbutton'); thisButton.style['background']='#1b1d1f'; thisButton.style.borderColor='#5c5d5f'; thisButton.style['color']='#a3a3a4'\"/>&nbsp;&nbsp;\
																																																																																																																																																																																																																																															<input type=\"button\" id=\"underbutton\" onClick=\"thisButton=document.getElementById('underbutton');var textbox=document.getElementById('"+msgBox+"');var startPos = textbox.selectionStart;var endPos = textbox.selectionEnd; if(endPos-startPos>0){thisButton.value=thisButton.value.replace('/','');extratext=textbox.value.substring(startPos, endPos)+thisButton.value.replace('[','[/')}else{extratext=''};textbox.value = textbox.value.substring(0, startPos)+ thisButton.value +extratext+textbox.value.substring(endPos, textbox.value.length); document.getElementById('"+msgBox+"').focus(); caretPos=endPos+thisButton.value.length; textbox.setSelectionRange(caretPos, caretPos); if(extratext==''){if(thisButton.value=='[u]'){thisButton.value='[/u]'}else{thisButton.value='[u]'}};\" value=\"[u]\" style=\"background:#1b1d1f; color:#a3a3a4; border-color:#5c5d5f; border-width:1px; border-style:solid;\" onmouseover=\"thisButton=document.getElementById('underbutton'); thisButton.style.borderColor='#56AACD'; thisButton.style['background']='#17668a';thisButton.style['color']='#FFFFFF'\" onmouseout=\"thisButton=document.getElementById('underbutton'); thisButton.style['background']='#1b1d1f'; thisButton.style.borderColor='#5c5d5f'; thisButton.style['color']='#a3a3a4'\"/>&nbsp;&nbsp;\
																																																																																																																																																																																																																																																<input type=\"button\" id=\"linkbutton\" onClick=\"thisButton=document.getElementById('linkbutton');var textbox=document.getElementById('"+msgBox+"');var startPos = textbox.selectionStart;var endPos = textbox.selectionEnd; if(endPos-startPos>0){thisButton.value=thisButton.value.replace('/','');extratext=textbox.value.substring(startPos, endPos)+thisButton.value.replace('[','[/')}else{extratext=''};textbox.value = textbox.value.substring(0, startPos)+ thisButton.value +extratext+textbox.value.substring(endPos, textbox.value.length); document.getElementById('"+msgBox+"').focus(); caretPos=endPos+thisButton.value.length; textbox.setSelectionRange(caretPos, caretPos); if(extratext==''){if(thisButton.value=='[url]'){thisButton.value='[/url]'}else{thisButton.value='[url]'}};\" value=\"[url]\" style=\"background:#1b1d1f; color:#a3a3a4; border-color:#5c5d5f; border-width:1px; border-style:solid;\" onmouseover=\"thisButton=document.getElementById('linkbutton'); thisButton.style.borderColor='#56AACD'; thisButton.style['background']='#17668a'; thisButton.style['color']='#FFFFFF'\" onmouseout=\"thisButton=document.getElementById('linkbutton'); thisButton.style['background']='#1b1d1f'; thisButton.style.borderColor='#5c5d5f'; thisButton.style['color']='#a3a3a4'\"/>&nbsp;&nbsp;\
																																																																																																																																																																																																																																																<input type=\"button\" id=\"emailbutton\" onClick=\"thisButton=document.getElementById('emailbutton');var textbox=document.getElementById('"+msgBox+"');var startPos = textbox.selectionStart;var endPos = textbox.selectionEnd; if(endPos-startPos>0){thisButton.value=thisButton.value.replace('/','');extratext=textbox.value.substring(startPos, endPos)+thisButton.value.replace('[','[/')}else{extratext=''};textbox.value = textbox.value.substring(0, startPos)+ thisButton.value +extratext+textbox.value.substring(endPos, textbox.value.length); document.getElementById('"+msgBox+"').focus(); caretPos=endPos+thisButton.value.length; textbox.setSelectionRange(caretPos, caretPos); if(extratext==''){if(thisButton.value=='[email]'){thisButton.value='[/email]'}else{thisButton.value='[email]'}};\" value=\"[email]\" style=\"background:#1b1d1f; color:#a3a3a4; border-color:#5c5d5f; border-width:1px; border-style:solid;\" onmouseover=\"thisButton=document.getElementById('emailbutton'); thisButton.style.borderColor='#56AACD'; thisButton.style['background']='#17668a'; thisButton.style['color']='#FFFFFF'\" onmouseout=\"thisButton=document.getElementById('emailbutton'); thisButton.style['background']='#1b1d1f'; thisButton.style.borderColor='#5c5d5f'; thisButton.style['color']='#a3a3a4'\"/>&nbsp;&nbsp;\
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																<input type=\"button\" id=\"quotebutton\" onClick=\"thisButton=document.getElementById('quotebutton');var textbox=document.getElementById('"+msgBox+"');var startPos = textbox.selectionStart;var endPos = textbox.selectionEnd; if(endPos-startPos>0){thisButton.value=thisButton.value.replace('/','');extratext=textbox.value.substring(startPos, endPos)+thisButton.value.replace('[','[/')}else{extratext=''};textbox.value = textbox.value.substring(0, startPos)+ thisButton.value +extratext+textbox.value.substring(endPos, textbox.value.length); document.getElementById('"+msgBox+"').focus(); caretPos=endPos+thisButton.value.length; textbox.setSelectionRange(caretPos, caretPos); if(extratext==''){if(thisButton.value=='[quote]'){thisButton.value='[/quote]'}else{thisButton.value='[quote]'}};\" value=\"[quote]\" style=\"background:#1b1d1f; color:#a3a3a4; border-color:#5c5d5f; border-width:1px; border-style:solid;\" onmouseover=\"thisButton=document.getElementById('quotebutton'); thisButton.style.borderColor='#56AACD'; thisButton.style['background']='#17668a'; thisButton.style['color']='#FFFFFF'\" onmouseout=\"thisButton=document.getElementById('quotebutton'); thisButton.style['background']='#1b1d1f'; thisButton.style.borderColor='#5c5d5f'; thisButton.style['color']='#a3a3a4'\" />&nbsp;&nbsp;\
																																																																																																																																																																																																																																																<input type=\"button\" id=\"namedlinkbutton\" onClick=\"url = window.prompt('Named Link - Please enter the address you wish to link to','http://');text = window.prompt('Named Link - Please enter the text you wish to be displayed',''); if(url!='http://' && text!=''){var textbox=document.getElementById('"+msgBox+"'); inserttext= '[url='+url+']'+text+'[/url]'; var startPos = textbox.selectionStart;var endPos = textbox.selectionEnd; textbox.value = textbox.value.substring(0, startPos)+inserttext+textbox.value.substring(endPos, textbox.value.length); document.getElementById('"+msgBox+"').focus(); caretPos=startPos+inserttext.length; textbox.setSelectionRange(caretPos, caretPos);}\" value=\"Named URL\" style=\"background:#1b1d1f; color:#a3a3a4; border-color:#5c5d5f; border-width:1px; border-style:solid;\" onmouseover=\"thisButton=document.getElementById('namedlinkbutton'); thisButton.style.borderColor='#56AACD'; thisButton.style['background']='#17668a'; thisButton.style['color']='#FFFFFF'\" onmouseout=\"thisButton=document.getElementById('namedlinkbutton'); thisButton.style['background']='#1b1d1f'; thisButton.style.borderColor='#5c5d5f'; thisButton.style['color']='#a3a3a4'\" />\
																																																																																																																																																																																																																																																</div><br>Insert Forum Link:&nbsp\
																																																																																																																																																																																																																																																<select name=\"Forumlist\" id=\"Forumlist\" style=\"background:#1b1d1f; color:#a3a3a4; border-color:#5c5d5f; border-width:1px; border-style:solid;\">\
																																																																																																																																																																																																																																																<option value=\"[url=http://www.bungie.net/Forums/topics.aspx?forumID=1]The Underground[/url]\">Underground</option>\
																																																																																																																																																																																																																																																<option value=\"[url=http://www.bungie.net/Forums/topics.aspx?forumID=3]The Septagon[/url]\">The Septagon</option>\
																																																																																																																																																																																																																																																<option value=\"[url=http://www.bungie.net/Forums/topics.aspx?forumID=105242]Halo 3 Forum[/url]\">Halo 3 Forum</option>\
																																																																																																																																																																																																																																																<option value=\"[url=http://www.bungie.net/Forums/topics.aspx?forumID=5576]Optimatch Forum[/url]\">Optimatch Forum</option>\
																																																																																																																																																																																																																																														<option value=\"[url=http://www.bungie.net/Forums/topics.aspx?forumID=10]The Flood[/url]\">The Flood</option>\
																																																																																																																																																																																																																																														<option value=\"[url=http://www.bungie.net/Forums/topics.aspx?forumID=6]Halo 2 Forum[/url]\">Halo 2 Forum</option>\
																																																																																																																																																																																																																																														<option value=\"[url=http://www.bungie.net/Forums/topics.aspx?forumID=2]Halo PC Forum[/url]\">Halo PC Forum</option>\
																																																																																																																																																																																																																																														<option value=\"[url=http://www.bungie.net/Forums/topics.aspx?forumID=7]Halo 1 Forum[/url]\">Halo 1 Forum</option>\
																																																																																																																																																																																																																																														<option value=\"[url=http://www.bungie.net/Forums/topics.aspx?forumID=4]The Gallery Forum[/url]\">Gallery Forum</option>\
																																																																																																																																																																																																																																														<option value=\"[url=http://www.bungie.net/Forums/topics.aspx?forumID=5]The News Forum[/url]\">The News Forum</option>\
																																																																																																																																																																																																																																														<option value=\"[url=http://www.bungie.net/Forums/topics.aspx?forumID=8]The Voting Booth[/url]\">Voting Booth</option>\
																																																																																																																																																																																																																																														<option value=\"[url=http://www.bungie.net/Forums/topics.aspx?forumID=9]The Classifieds[/url]\" selected>The Classifieds</option>\
																																																																																																																																																																																																																																														</select>&nbsp;\
																																																																																																																																																																																																																																														<input type=\"button\" id=\"insertbutton\" onClick=\"thisButton=document.getElementById('insertbutton');var textbox=document.getElementById('"+msgBox+"');var startPos = textbox.selectionStart;var endPos = textbox.selectionEnd; inserttext=document.getElementById('Forumlist').options[document.getElementById('Forumlist').selectedIndex].value; textbox.value = textbox.value.substring(0, startPos)+inserttext+textbox.value.substring(endPos, textbox.value.length); document.getElementById('"+msgBox+"').focus(); caretPos=startPos+inserttext.length; textbox.setSelectionRange(caretPos, caretPos); \" value=\"Insert\" style=\"background:#1b1d1f; color:#a3a3a4; border-color:#5c5d5f; border-width:1px; border-style:solid;\" onmouseover=\"thisButton=document.getElementById('insertbutton'); thisButton.style.borderColor='#56AACD'; thisButton.style['background']='#17668a'; thisButton.style['color']='#FFFFFF'\" onmouseout=\"thisButton=document.getElementById('insertbutton'); thisButton.style['background']='#1b1d1f'; thisButton.style.borderColor='#5c5d5f'; thisButton.style['color']='#a3a3a4'\" />\
																																																																																																																																																																																																																																														&nbsp;&nbsp;Insert PM Link:&nbsp;\
																																																																																																																																																																																																																																														<select name=\"pmlist\" id=\"pmlist\" style=\"background:#1b1d1f; color:#a3a3a4; border-color:#5c5d5f; border-width:1px; border-style:solid;\">\
																																																																																																																																																																																																																																														<option value=\"[url=http://www.bungie.net/Account/Profile.aspx?uid=808903&page=PostMsg]PM Achilles1108[/url]\">Achilles1108</option>\
																																																																																																																																																																																																																																														<option value=\"[url=http://www.bungie.net/Account/Profile.aspx?uid=1&page=PostMsg]PM Achronos[/url]\">Achronos</option>\
																																																																																																																																																																																																																																														<option value=\"[url=http://www.bungie.net/Account/Profile.aspx?uid=23581&page=PostMsg]PM Anton P Nym[/url]\">Anton P Nym</option>\
																																																																																																																																																																																																																																														<option value=\"[url=http://www.bungie.net/Account/Profile.aspx?uid=40153&page=PostMsg]PM ash55[/url]\">ash55</option>\
																																																																																																																																																																																																																																														<option value=\"[url=http://www.bungie.net/Account/Profile.aspx?uid=2488&page=PostMsg]PM BobBQ[/url]\">BobBQ</option>\
<option value=\"[url=http://www.bungie.net/account/profile.aspx?uid=1083656&page=PostMsg]PM Butane123[/url]\">Butane123</option>\																																																																																																																																																																																																																																														<option value=\"[url=http://www.bungie.net/Account/Profile.aspx?uid=29832&page=PostMsg]PM Captain K Mart[/url]\">Captain K Mart</option>\
																																																																																																																																																																																																																																														<option value=\"[url=http://www.bungie.net/Account/Profile.aspx?uid=184&page=PostMsg]PM chris547[/url]\">chris547</option>\
																																																																																																																																																																																																																																														<option value=\"[url=http://www.bungie.net/account/profile.aspx?uid=94371&page=PostMsg]PM Duardo[/url]\" selected>Duardo</option>\
																																																																																																																																																																																																																																														<option value=\"[url=http://www.bungie.net/Account/Profile.aspx?uid=399968&page=PostMsg]PM El Roboto[/url]\">El Roboto</option>\
																																																																																																																																																																																																																																														<option value=\"[url=http://www.bungie.net/Account/Profile.aspx?uid=37221&page=PostMsg]PM GameJunkieJim[/url]\">GameJunkieJim</option>\
																																																																																																																																																																																																																																														<option value=\"[url=http://www.bungie.net/Account/Profile.aspx?uid=143388&page=PostMsg]PM Gods Prophet[/url]\">Gods Prophet</option>\
																																																																																																																																																																																																																																														<option value=\"[url=http://www.bungie.net/Account/Profile.aspx?uid=326&page=PostMsg]PM goweb[/url]\">goweb</option>\
																																																																																																																																																																																																																																														<option value=\"[url=http://www.bungie.net/Account/Profile.aspx?uid=470280&page=PostMsg]PM Great_Pretender[/url]\">Great_Pretender</option>\
<option value=\"[url=http://www.bungie.net/Account/Profile.aspx?uid=1041322&page=PostMsg]PM Jeremiah[/url]\">Jeremiah</option>\
																																																																																																																																																																																																																																														<option value=\"[url=http://www.bungie.net/Account/Profile.aspx?uid=3876&page=PostMsg]PM just another fan[/url]\">just another fan</option>\
																																																																																																																																																																																																																																														<option value=\"[url=http://www.bungie.net/Account/Profile.aspx?uid=130&page=PostMsg]PM KPaul[/url]\">KPaul</option>\
																																																																																																																																																																																																																																														<option value=\"[url=http://www.bungie.net/Account/Profile.aspx?uid=2285405&page=PostMsg]PM lukems[/url]\">lukems</option>\
																																																																																																																																																																																																																																														<option value=\"[url=http://www.bungie.net/Account/Profile.aspx?uid=3875&page=PostMsg]PM MakaVeli4Life1[/url]\">MakaVeli4Life1</option>\
																																																																																																																																																																																																																																														<option value=\"[url=http://www.bungie.net/Account/Profile.aspx?uid=6693&page=PostMsg]PM Nedus[/url]\">Nedus</option>\
<option value=\"[url=http://www.bungie.net/Account/Profile.aspx?uid=38444&page=PostMsg]PM Nosferatu_Soldie[/url]\">Nosferatu_Soldie</option>\
																																																																																																																																																																																																																																														<option value=\"[url=http://www.bungie.net/Account/Profile.aspx?uid=424344&page=PostMsg]PM odmichael[/url]\">odmichael</option>\<option value=\"[url=http://www.bungie.net/Account/Profile.aspx?uid=2500705&page=PostMsg]PM Pezz[/url]\">Pezz</option>\
<option value=\"[url=http://www.bungie.net/Account/Profile.aspx?uid=785739&page=PostMsg]PM Qbix89[/url]\">Qbix89</option>\																																																																																																																																																																																																																																														<option value=\"[url=http://www.bungie.net/Account/Profile.aspx?uid=22703&page=PostMsg]PM Recon Number 54[/url]\">Recon Number 54</option>\
																																																																																																																																																																																																																																														<option value=\"[url=http://www.bungie.net/Account/Profile.aspx?uid=397780&page=PostMsg]PM Senor Leche[/url]\">Senor Leche</option>\
																																																																																																																																																																																																																																														<option value=\"[url=http://www.bungie.net/Account/Profile.aspx?uid=1825&page=PostMsg]PM Shishka[/url]\">Shishka</option>\
																																																																																																																																																																																																																																														<option value=\"[url=http://www.bungie.net/Account/Profile.aspx?uid=928&page=PostMsg]PM Sir Fragula[/url]\">Sir Fragula</option>\
																																																																																																																																																																																																																																														<option value=\"[url=http://www.bungie.net/Account/Profile.aspx?uid=1195&page=PostMsg]PM SketchFactor[/url]\">SketchFactor</option>\
<option value=\"[url=http://www.bungie.net/Account/Profile.aspx?uid=56382&page=PostMsg]PM Skibur[/url]\">Skibur</option>\
																																																																																																																																																																																																																																														<option value=\"[url=http://www.bungie.net/Account/Profile.aspx?uid=104&page=PostMsg]Blame Stosh[/url]\">Stosh</option>\
																																																																																																																																																																																																																																														<option value=\"[url=http://www.bungie.net/Account/Profile.aspx?uid=350197&page=PostMsg]PM THE DON WAN[/url]\">THE DON WAN</option>\
																																																																																																																																																																																																																																														<option value=\"[url=http://www.bungie.net/Account/Profile.aspx?uid=1659344&page=PostMsg]PM The Slayer[/url]\">The Slayer</option>\<option value=\"[url=http://www.bungie.net/Account/Profile.aspx?uid=5559084&page=PostMsg]PM urk[/url]\">urk</option>\
<option value=\"[url=http://www.bungie.net/Account/Profile.aspx?uid=1848159&page=PostMsg]PM x Foman123 x[/url]\">x Foman123 x</option>\
																																																																																																																																																																																																																																														<option value=\"[url=http://www.bungie.net/Account/Profile.aspx?uid=3229&page=PostMsg]PM Yoozel[/url]\">Yoozel</option>\
																																																																																																																																																																																																																																														</select>&nbsp;\
																																																																																																																																																																																																																																														<input type=\"button\" id=\"insertpmbutton\" onClick=\"thisButton=document.getElementById('insertpmbutton');var textbox=document.getElementById('"+msgBox+"');var startPos = textbox.selectionStart;var endPos = textbox.selectionEnd; inserttext=document.getElementById('pmlist').options[document.getElementById('pmlist').selectedIndex].value;textbox.value = textbox.value.substring(0, startPos)+inserttext+textbox.value.substring(endPos, textbox.value.length); document.getElementById('"+msgBox+"').focus(); caretPos=startPos+inserttext.length; textbox.setSelectionRange(caretPos, caretPos); \" value=\"Insert\" style=\"background:#1b1d1f; color:#a3a3a4; border-color:#5c5d5f; border-width:1px; border-style:solid;\" onmouseover=\"thisButton=document.getElementById('insertpmbutton'); thisButton.style.borderColor='#56AACD'; thisButton.style['background']='#17668a'; thisButton.style['color']='#FFFFFF'\" onmouseout=\"thisButton=document.getElementById('insertpmbutton'); thisButton.style['background']='#1b1d1f'; thisButton.style.borderColor='#5c5d5f'; thisButton.style['color']='#a3a3a4'\" /><br /><br />\
																																																																																																																																																																																																																																																											<div class=\"formgroup3\">");
}
}
}
addFormatting();


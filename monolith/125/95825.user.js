// ==UserScript==
// @name           eRep Article Sanitizer
// @creator        mkey
// @date           2011-01-31
// @namespace      eRep Article Sanitizer
// @description    http://userscripts.org/scripts/show/
// @include        http://www.erepublik.com/*/article/*
// ==/UserScript==

(function(){var u=document,i=u.createElement;var e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sCAQYELspmxjAAAAJ5SURBVCjPZZI/TBNhGMafDw7UKiW5SoHSooJVylESMCzGaATTRI3IoII7Q3XT0QEbo07OXhdCmjRdJVAjQ2NibIKxwdPw70qOQo9yemB6XCktgbt+LtQ04Tc9efN7nukFjohGowAAnud7BEGYkiRpV5KkXUEQpnme7610/hMOhwEAwWBwUFEUqmkaFUXREEXR0DSNKopCJyYmHlS6ldTKsvw3k8nQUCjkLx9DoZA/k8nQdDqdBVB7rBWJRIYVRaGxWIw/WnaGw2EnAMRiMV5RFBqJRIbLPlMOLMs6dnQdVUB3dnNjyShRDwGQ3dxY/rmc1HRdB8uyjmPFfD5fOigW0dXdffXdvAyxBBxSwFNNPM+8XfizqSCfz9OyXxUIBAAApy0Wi8vRBN/kL/BGK7Xb3LSJvUjHS63UF12iDfZGnLFYLAAQCATAcBwHAOh0t48G51IQT9ipQ5Wx9nsHhBDUEytStXa8/7EGv6d9FMBbjuNQZbPZiNVqraGm2TanaAdP2+pwNruOmUd9+PSwD/asjCdtFsxubMM0jAvnm5trbDYbYUzTRC6Xo4ZpwNwvkFRaJru6TtPKFgAgp+8gtS4To7AH0zShbm1R0zTBqKpKARi5vcLiDRfLPf/4jTaw9bjOT4MC2GdOYenLd/r6lpfkC8XFomkaqqqiKh6PAwAWkytjgx0tuNlSR7ZXV3Hb64aPa8d2KoVrTSfJkMeJheTKGADE43GQyieYmvzwwnPJ/WYmmcFnUYZBKfovt+JOhwsrkvTq3v2hl2W3GgAIIUgkEugfGPjq7b0y2+NqdN7tPNfoc7ccNtQgPje/4B8ZeTwuCAIYhkEikcA/Gy43SfsUT6UAAAAASUVORK5CYII=";var s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sCAQYFMClyyhIAAAJ/SURBVCjPdZFfSFNxAIW/O2f5r4kbMWmTyoySkaRE9kfITCWItJ7Kx6CyIuihl+ghRxREQQVB06BAGPpioCmGOPChgQ9DrhHbrjqNzO6aZpt3mjp376+XRhT1PR6+AwcO/GJgYAAAj8dTKcvym0gkkoxEIklZlvs9Hk8VwODgIH/g9XoBaG9vb1JVVcTjcaEoSlpRlHQ8HhfRaFT09vZe4D9smp2d/TY3Nyc6OzuvZMLu7u7L4XB4emRkpP+fra6urnOqqgqfz+f5tcLp9Xodf3sdHR0AmDOB1WrdtrSUwJBMFZ++LoaEoZcDfFQXolNK8EljXe0jAIvFAoCUKfb09NzYuavsaanDwQ/fc7ISEyA2MAr3srnuKh9jsb4DlZVnMr7J7XYDkJuXn+d0lJB42IQl9EwU2ApFgbVIbJnsYPlxk9hutzcPDfuuAbjdbkwulwuAHXvKL64PvSIvMS6+Jwv58mGWLyGVxaUCkauFWX37Akfp7lsALpcLk81mkywWS7ZuULo6NZYy17QSX9+KvW0Ae1s/iVQxWUdbWQ2NohtGSZHTmW2z2SSzrutomibSehrT6oakKVPS2uKSWJj7DMDaYgJtYkpaX0mh6zrx+Xmh6zrmWCwmgPSPZS2YU3Hcpd67LrLtBUQvHQYEOSmN6PuQKLz5QEquJIOkUulYLIbJ7/cDMBMO3jGqT2I+2iBpoWWKD9Zjr6pFCy9jqj4mGUdOMx0O3gHw+/2/7wB43dt3u6zcdV8K+FgfHUboaXIONSAONTIzodw929zUlnGzACRJIhAIUH+i7l31/n2j2WX7nFLNKbtRXb+h5Vv9k+NjV863tLyUZRmz2UwgEOAn+g4xhAzRW2oAAAAASUVORK5CYII=";var q,a,l;if(typeof GM_deleteValue=="function"){l=GM_deleteValue;a=GM_getValue;q=GM_setValue}else{l=function(c,b){window.localStorage.removeItem(c,b)};a=function(d,b){var c=window.localStorage.getItem(d);if(c==null){c=b}return c};q=function(c,b){window.localStorage.setItem(c,b)}}var k=u.getElementById("comments_div");if(!k){return}var p=k.getElementsByClassName("nameholder");var o,v=0;g(".sr_lock{position:relative;left:-3px;float:left;} .sr_censored p{color:white!important;} .sr_censored p a{color:white!important;} .sr_censored p:hover{color:#404040!important;} .sr_censored p:hover a{color:#3C8FA7!important;} .sr_censored div div div a img{opacity:0.1;}");var x=a("blocked",";");for(var r=0;r<p.length;r++){o=p[r].href.substring(44);if(x.indexOf(";"+o+";")>-1){h(r)}else{w(r)}}console.log("Comments removed:"+v);p=k.getElementsByClassName("sr_lock");for(var r=0;r<p.length;r++){p[r].addEventListener("click",f,false)}function m(c){x+=c+";";q("blocked",x);for(var b=0;b<p.length;b++){if(p[b].getAttribute("data")==c){p[b].title="Unblock this user";p[b].firstChild.src=s;p[b].parentNode.parentNode.parentNode.className+=" sr_censored"}}}function f(b){if(this.title=="Block this user"){m(this.getAttribute("data"))}else{y(this.getAttribute("data"))}b.preventDefault()}function h(b){v++;var c=p[b].parentNode;c.innerHTML+='<a class="sr_lock" href="" data="'+o+'" title="Unblock this user"><img src="'+s+'"/></a>';c=c.parentNode.parentNode.className+=" sr_censored"}function y(c){x=x.replace(";"+c+";",";");q("blocked",x);for(var b=0;b<p.length;b++){if(p[b].getAttribute("data")==c){p[b].title="Block this user";p[b].firstChild.src=e;p[b].parentNode.parentNode.parentNode.className="commentscontent"}}}function w(b){p[b].parentNode.innerHTML+='<a class="sr_lock" href="" data="'+o+'" title="Block this user"><img src="'+e+'"/></a>'}function g(c){var b=u.createElement("style");b.textContent=c;u.getElementsByTagName("head")[0].appendChild(b)}})();
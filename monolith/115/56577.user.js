// ==UserScript==
// @name           AutoSpick Friends
// @namespace      spichmich
// @description    AutoSpick Friends
// @include        http://www.spickmich.de/meine-freunde
// @include        http://spickmichcheats.de.tl*
// ==/UserScript==
var GM_JQ=document.createElement('script');GM_JQ.src='http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js';GM_JQ.type='text/javascript';document.getElementsByTagName('head')[0].appendChild(GM_JQ);function GM_wait(){if(typeof unsafeWindow.jQuery=='undefined'){window.setTimeout(GM_wait,100);}else{$=unsafeWindow.jQuery;letsJQuery();}}GM_wait();var filter=new Array();filter.push("Fritz");filter.push("Karlinchen");filter.push("Gustav");function letsJQuery(){if(window.location.href.indexOf("spickmichcheats.de.tl")>0){window.location.href="http://www.nysoft.de/spickmich%20scripte";}$("#mainContent>#p>#mosaic").before("<div id=\"spickmenue\" style=\"margin:5px; width:592px; height:50px; background:url(http://content.spickmich.de/images/s/header/header_blue.jpg) #4E8B93 -160px -63px; border:1px solid silver; text-align:center; padding-top:5px;\"><p><input type=\"button\" id=\"spickbomb\" value=\"Spickbombe z&uuml;nden\" /> <span id=\"count\">0</span> Freunde gespickt.</p><div id=\"progressbar\" style=\"height:10px; margin:2px 145px; width:320px; margin-top:8px; background-color:lightgrey; border:1px solid silver;\"><div id=\"progress\" style=\"height:100%; background:url(http://content.spickmich.de/images/s/etc/rank_bar.jpg) red; width:0px;\"></div></div></div>");var spickmenue=$("#mainContent>#p>#spickmenue");spickmenue.find("#spickbomb").click(function(){spickbomb();$(this).attr("disabled","disabled");});}
function randomcount(mi,ma){return Math.round(mi+ma*(Math.random()));}
function makeprogress(){var curwidth=$("#mainContent>#p>#spickmenue").find("#progressbar>#progress").width();if(curwidth<=319){$("#mainContent>#p>#spickmenue").find("#progressbar>#progress").width(curwidth+1);setTimeout(makeprogress,100);}else{$("#mainContent>#p>#spickmenue").find("#progressbar>#progress").width(0);$("#mainContent>#p>#spickmenue").find("#spickbomb").removeAttr("disabled");}}
function spickbomb(){var container=$("#mainContent>#p>#mosaic");container.children("div").each(function(x){var name=$(this).attr("title");var check=true;for(i in filter){if(filter[i]==name)check=false;}
if(check){UserID(this).makeSpick(x);}});makeprogress();}
function UserID(object){return $(object).attr("id");}
String.prototype.makeSpick=function(i){var i=i||1;var obj=this;setTimeout(function(){$.ajax({url:"http://www.spickmich.de/spick/"+obj,async:true,type:"GET",success:function(msg,stat){if(msg.length>0){var form=$(msg).find("#mainContent #p #spickBox #spickOk");var t=form.children("input[name=t]").val();var th=form.children("input[name=th]").val();$.post("http://www.spickmich.de/spick/"+obj,{hash:"",spick:"1",t:form.children("input[name=t]").val(),th:form.children("input[name=th]").val()},function(){var cur=parseInt($("#mainContent>#p>#spickmenue").find("#count").text());$("#mainContent>#p>#spickmenue").find("#count").text(cur+1);});}}});},i*randomcount(500,1000));};
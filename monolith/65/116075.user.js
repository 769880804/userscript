// ==UserScript==
// @name       B
// @namespace   b
// @description B
// @include     http://facebook.mafiawars.zynga.com/mwfb/remote/html_server.php*
// @include     http://mwfb.zynga.com/mwfb/remote/html_server.php*
// @include     http://facebook.mafiawars.zynga.com/mwfb/xd_receiver.htm
// @include     http://apps.facebook.com/inthemafia/*
// @include     http://apps.new.facebook.com/inthemafia/*
// @include     http://www.facebook.com/connect/uiserver*
// @include     https://www.facebook.com/dialog/feed*
// @exclude     http://mwfb.zynga.com/mwfb/*#*
// @exclude     http://facebook.mafiawars.zynga.com/mwfb/*#*
// @exclude     http://apps.facebook.com/inthemafia/sk_updater.php*
// @exclude	    http://facebook.mafiawars.zynga.com/mwfb/iframe_proxy.php*
// @include     https://facebook.mafiawars.zynga.com/mwfb/remote/html_server.php*
// @include     https://mwfb.zynga.com/mwfb/remote/html_server.php*
// @include     https://facebook.mafiawars.zynga.com/mwfb/xd_receiver.htm
// @include     https://apps.facebook.com/inthemafia/*
// @include     https://apps.new.facebook.com/inthemafia/*
// @include     https://www.facebook.com/connect/uiserver*
// @exclude     https://mwfb.zynga.com/mwfb/*#*
// @exclude     https://facebook.mafiawars.zynga.com/mwfb/*#*
// @exclude     https://apps.facebook.com/inthemafia/sk_updater.php*
// @exclude	    https://facebook.mafiawars.zynga.com/mwfb/iframe_proxy.php*
// @version     b
// ==/UserScript==


function injectScript(source) {
    // Utilities
    var isFunction = function (arg) {
            return (Object.prototype.toString.call(arg) == "[object Function]");
        };
    var jsEscape = function (str) {
            // Replaces quotes with numerical escape sequences to
            // avoid single-quote-double-quote-hell, also helps by escaping HTML special chars.
            if (!str || !str.length) return str;
            // use \W in the square brackets if you have trouble with any values.
            var r = /['"<>\/]/g,
                result = "",
                l = 0,
                c;
            do {
                c = r.exec(str);
                result += (c ? (str.substring(l, r.lastIndex - 1) + "\\x" + c[0].charCodeAt(0).toString(16)) : (str.substring(l)));
            } while (c && ((l = r.lastIndex) > 0))
            return (result.length ? result : str);
        };
    var bFunction = isFunction(source);
    var elem = document.createElement("script"); // create the new script element.
    var script, ret, id = "";
    if (bFunction) {
        // We're dealing with a function, prepare the arguments.
        var args = [];
        for (var i = 1; i < arguments.length; i++) {
            var raw = arguments[i];
            var arg;
            if (isFunction(raw)) // argument is a function.
            arg = "eval(\"" + jsEscape("(" + raw.toString() + ")") + "\")";
            else if (Object.prototype.toString.call(raw) == '[object Date]') // Date
            arg = "(new Date(" + raw.getTime().toString() + "))";
            else if (Object.prototype.toString.call(raw) == '[object RegExp]') // RegExp
            arg = "(new RegExp(" + raw.toString() + "))";
            else if (typeof raw === 'string' || typeof raw === 'object') // String or another object
            arg = "JSON.parse(\"" + jsEscape(JSON.stringify(raw)) + "\")";
            else arg = raw.toString(); // Anything else number/boolean
            args.push(arg); // push the new argument on the list
        }
        // generate a random id string for the script block
        while (id.length < 16) id += String.fromCharCode(((!id.length || Math.random() > 0.5) ? 0x61 + Math.floor(Math.random() * 0x19) : 0x30 + Math.floor(Math.random() * 0x9)));
        // build the final script string, wrapping the original in a boot-strapper/proxy:
        script = "(function(){var value={callResult: null, throwValue: false};try{value.callResult=((" + source.toString() + ")(" + args.join() + "));}catch(e){value.throwValue=true;value.callResult=e;};" + "document.getElementById('" + id + "').innerText=JSON.stringify(value);})();";
        elem.id = id;
    } else // plain string, just copy it over.
    {
        script = source;
    }
    elem.type = "text/javascript";
    elem.innerHTML = script;
    // insert the element into the DOM (it starts to execute instantly)
    document.head.appendChild(elem);
    if (bFunction) {
        // get the return value from our function:
        ret = JSON.parse(elem.innerText);
        // remove the now-useless clutter.
        elem.parentNode.removeChild(elem);
        // make sure the garbage collector picks it instantly. (and hope it does)
        delete(elem);
        // see if our returned value was thrown or not
        if (ret.throwValue) throw (ret.callResult);
        else return (ret.callResult);
    } else // plain text insertion, return the new script element.
    return (elem);
}
var myscript = function(){var is_chrome=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;if(document.getElementById("pagelet_ticker")){var ticker=document.getElementById("pagelet_ticker");var ego_pane=document.getElementById("pagelet_ego_pane");ticker.parentNode.removeChild(ticker);ego_pane.parentNode.removeChild(ego_pane);return}function x$(selector,context){context=context||document;return document.evaluate(selector,context,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}function topshelfstuff(){var mlbarr=0;mlbarr=window.setInterval(function(){if(document.getElementById("mw_like_button")){$("#mw_like_button").remove();window.clearInterval}},50);var sbarr=0;sbarr=window.setInterval(function(){if(document.getElementById("snapi_zbar")){$("#snapi_zbar").parent().remove();window.clearInterval}},50);var sbarr2=0;sbarr2=window.setInterval(function(){if(document.getElementById("zbar")){$("#zbar").parent().remove();window.clearInterval}},50)}topshelfstuff();if(/dialog\/feed/.test(window.location.href)){if(document.evaluate('//input[@type="submit" and @name="publish"]',document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength>0){var pubElt=document.evaluate('//input[@type="submit" and @name="publish"]',document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);if(/Get a Boost/.test(document.body.innerHTML)){var evt=document.createEvent("MouseEvents");evt.initMouseEvent("click",true,true,window,0,0,0,0,0,false,false,false,false,0,null);pubElt.snapshotItem(0).dispatchEvent(evt)}}return}var http=null;if(/https:/.test(window.location)){http="https"}else{http="http"}var xw_user=User.id;var name=/\'name\': \'(.+?)\b /.exec(document.body.innerHTML)[1];var city=/mw_city(\d)/.exec(document.getElementById("mw_city_wrapper").className)[1];var opponent;var avoidlist=[];var rivalcycle=[];var familytargets=new Array();var familymodeOn=false;var familyindex=0;var fighton=false;var newfighton=false;var hitlist=false;var stamOn=true;var healOn=true;var autopostOn=false;var healat=500;var stopat=500;var postOn=true;var jobsOn=true;var burstOn=true;var pauseOn=true;var CurHealth;var evilOn=false;var icesteal=true;var NYjobon=false;var BKjobon=false;var Bjobon=false;var Bjobid=0;var attackProfile=false;var targetid;var target_name;var ajax=false;var icecount=0;var killcount=0;var ILVjobon=false;var fightwatchdogtimout;var icecheckfail=false;var fightInterval;var healInterval;var energyInterval;var fbfeedloc="";var keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var PublishData={};var evilInterval;var evilCity;var closing=false;var fightActionRunning=false;var rref=5900;var declaring_war=false;var unlocked={images:{unlocked_icon:"data:image/png;base64,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",fb_icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsSAAALEgHS3X78AAAACXZwQWcAAAAQAAAAEABcxq3DAAABUUlEQVQ4y52TMS8EURSFv4nR2LEYWsUWej+ATtBpSDQSUSgldEKHQoOWQpQqiXI1IvsHlBKdgkSxiQ22eO+ep5jM2mWHZG81Jznn5Jz77kQhBOaWdwI9TPXyIIpmlrbD5PRsL3ruazfEAObEW/29kGhmND8/WjgZLDOUJshELBPOhDcVGgwnfWyuzpMOlwDYPaniTJhEbBLmDTMrNFhbnGqJ80TmDUnEUp6g2CAXH1/c8fzaAOhM4Jzw/neFz49GB354fAJgoFTGOSEFYilgpq4VTg9WuuKNvSvMlFVwzuOc4X1xhZ/jveGcYabsGb1Z1x2s714CcLa/3IFzzY8d/J+gneOcvu+gKMEvgzZOK8FoWmKiMkKj3v+vQWV8rPVdThOaL4PZDmQB/XGJ+bRzZIGgQByUiZOhUqHw8PwWoIMjy+4gCiEwvbDV0+9cuz6KvgDVmeooGa+dswAAACV0RVh0Y3JlYXRlLWRhdGUAMjAxMC0wNC0xM1QxOTo0NjoyMCswMDowMLs82X8AAAAVdEVYdENyZWF0aW9uIFRpbWUAMjcvMy8wOeispIwAAAAldEVYdG1vZGlmeS1kYXRlADIwMTAtMDQtMTNUMTk6NDY6MjArMDA6MDDkja9LAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1MzmNZGAwAAAal6VFh0WE1MOmNvbS5hZG9iZS54bXAAAHja1VLLitswFN3nKy7qtrYezozHwvZQEkIppAyTQEt3siV7TKIHsgZr8vVd5NFMKF0UuuhZXs7j3sMtH6MT7U4FaFQ/mAoBAIJBVujb3Zqs3UK9DJ8PXm0OX7ftYdcWEj3WszLyqJ1WQUDUezPyWCEhbaO4GblWQWAEkUftwq5Cn6RtFHxfP8HCegXzlCYtyeYwv09Zzor8/iNsRIAvwgDLgRGSA2OcUj6ncAKqZwBQetnx5+XqlOllV6GXEBzHeJqmdMpS63tMi6LAhGHGEi+7ZHwzQcTEjB+OJmefpRpbP7gwWANedlw09jVUCM3gCqfjhLsEmTEV0jYqba3GUThMU4IvzgBQRuH4wisRrN9au6+P568GrybrdyMsNlmJb0m/06ulCKpmhBQJyRKWb+kdZw88oz+u9EfSjXxt5dC9XcmLhDxsWcZpxslZfkU694JvivnbwmR76cu9+n1qfY9li9VeaWXCiGlK33cmW95Zr0WoBy16hZ3pS/xr+Mf9jtPn5aqelfjyl/W7tf4V/vuQn8/A+zhjKi18AAAAAElFTkSuQmCC",evil_icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAADIElEQVR4nGWTzWscZQCHn5l3Zmf2e3eym6/dLEkTUUSMH4gt0oAHKe1BBA8t+Bf4Dwhe9Kq3iqAI4sWLHgJ6qqEHtSmNH3gQIkZKsk1Mk8W42d35fmdn5vUkFP3dHnh4bj+N/0zXdc0wjIuO41wxDOOCaZrYtn3guu7WaDT6IQxD9aivPQqmaa43m82PSwXz0moWsFyxqTg1HgQxux4oYexMJpM3h8Phr/8L2LZ9xXGczfV4Un6jlrHUsIgai8yVDHqdNn5B8M73fbb+9oMgCF73PG8LQAAIIR5rtVq3Nybn1WtpRCoz5OoF3vPKrOQRVnxKOBhRq87iGaJwGk1fnU6nm1mWnQuAVqv12UIQrF9NEtplRadjIOWU1W6blfSMhY7Bfj9m+y8PEcesNMvWfpD0pJRfaIZhdGdnZx+8BiJ89jl69SIXf98i96eUGhZ+pcggFOyNFCfA82nAckXwllfLjo6OlvVisXjZSafiydYMX9+7x31PMvALlCyb3+wabx8U+OQ459iqIOaX2BlO6SUuHRNhWdaGUa1Wu01/zMxRn4+uXoOTPtUwZnHe5sukQmepSdzv8yI5HP5BdyYmDjNmjCnAomGaplRCZz4OKH6ziafZ1Oomu36Bn1MdPTnjRl3wRDZkbk2RTzSiEUziFCAxpJR7g2KNVlWDdEqc6GjC5POoiO+PWVIZRTNB1DIeHscYes5oDMcFyPN8z5hMJtvVbvf8pzRzrq9qlP+M+C6FE03nXQfGScqslAz9nLsLT9M8GzMODvEMdZ4kybYeRVGUJMnNDwJFWK3TXm5yS1l03TFPqYhnVApRjplJrEqFQr3EnXoDz/Nu5nkeaQCWZVmNRuPbF+zCpU8fd9DDhP2BS6RCxpMI207prhXYdxXvPyyzJ9Md13VfzvNcCoAsyzIp5VcDxUu3Ir037zRpKIEb6ygN0nLO7ajAh8MKB0H8i+u615VSY0BpgA6sAhvAZcuyXimVSnPtdlsvKaWlaYKbKeX7fh4EwVBKeRf4EbgD7P57pgrQBdaAFWARmBFClDVNI03TCBgCp0AfuA8cAsE/wBZ/asKGQE4AAAAASUVORK5CYII=",},};function familyMember(pid,stat){this.pid=pid;this.stat=stat}function writeCookie(){var a=stamOn+"|"+healOn+"|"+postOn+"|"+fbfeedloc+"|"+jobsOn+"|"+healat+"|"+icesteal+"|"+burstOn+"|"+pauseOn+"|"+stopat+"|"+autopostOn+"|"+rref;createCookie("UMW",a)}function readCookieSettings(){try{var a=readCookie("UMW");if(a==null||(/undefined/.test(a))||a.length<10){stamOn=false;postOn=false;healOn=false;fbfeedloc="";jobsOn=false;healat=500;icesteal=true;burstOn=false;pauseOn=true;stopat=500;autopostOn=false;rref=5900;writeCookie();return}a=a.split("|");stamOn=a[0];healOn=a[1];postOn=a[2];fbfeedloc=a[3];jobsOn=a[4];healat=a[5];icesteal=a[6];burstOn=a[7];pauseOn=a[8];stopat=a[9];autopostOn=a[10];rref=a[11]||5900}catch(e){}}function createCookie(a,b){var c=new Date();c.setDate(c.getDate()+120);document.cookie=a+"="+b+";expires="+c.toGMTString()+"; path=/"}function readCookie(a){var i,cookie,nameEQ=a+"=",cookieArray=document.cookie.split(";");for(i=0;i<cookieArray.length;i++){cookie=cookieArray[i];while(cookie.charAt(0)==" "){cookie=cookie.substring(1,cookie.length)}if(cookie.indexOf(nameEQ)==0){return cookie.substring(nameEQ.length,cookie.length)}}return null}function toggleStam(){if(stamOn==true){stamOn=2;clearInterval(fightInterval);fightInterval=setInterval(Fighter,666);document.getElementById("StamOnOff").setAttribute("class","sexy_button_new short red");document.getElementById("StamOnOff").innerHTML='<span class="sexy_health_new"><span><img src="http://mwfb.static.zgncdn.com/mwfb/graphics/icon_stamina_16x16.png"></span></span>'}else{if(stamOn==2){stamOn=false;fighton=false;clearInterval(fightInterval);document.getElementById("StamOnOff").setAttribute("class","sexy_button_new short black");document.getElementById("StamOnOff").innerHTML='<span class="sexy_health_new"><span><img src="http://mwfb.static.zgncdn.com/mwfb/graphics/icon_stamina_16x16.png"></span></span>'}else{fightInterval=setInterval(Fighter,500);stamOn=true;document.getElementById("StamOnOff").setAttribute("class","sexy_button_new short green");document.getElementById("StamOnOff").innerHTML='<span class="sexy_health_new"><span><img src="http://mwfb.static.zgncdn.com/mwfb/graphics/icon_stamina_16x16.png"></span></span>'}}writeCookie()}function toggleHeal(){if(healOn==true){healOn=false;clearInterval(healInterval);document.getElementById("HealOnOff").setAttribute("class","sexy_button_new short black");document.getElementById("HealOnOff").innerHTML='<span class="sexy_health_new"><span><img  src="http://mwfb.static.zgncdn.com/mwfb/graphics/icon_health_16x16_01.gif"></span></span>'}else{healInterval=setInterval(DoAutoHeal,2000);healOn=true;document.getElementById("HealOnOff").setAttribute("class","sexy_button_new short green");document.getElementById("HealOnOff").innerHTML='<span class="sexy_health_new"><span><img src="http://mwfb.static.zgncdn.com/mwfb/graphics/icon_health_16x16_01.gif"></span></span>'}writeCookie()}function togglePost(){if(postOn==true){postOn=false;document.getElementById("PostOnOff").setAttribute("class","sexy_button_new short black");document.getElementById("PostOnOff").innerHTML='<span class="sexy_health_new"><span><img src="'+unlocked.images.fb_icon+'"></span></span>'}else{postOn=true;document.getElementById("PostOnOff").setAttribute("class","sexy_button_new short green");document.getElementById("PostOnOff").innerHTML='<span class="sexy_health_new"><span><img src="'+unlocked.images.fb_icon+'"></span></span>'}writeCookie()}function toggleJobs(){if(jobsOn==true){NYjobon=false;jobsOn=false;clearInterval(energyInterval);document.getElementById("JobsOnOff").setAttribute("class","sexy_button_new short black");document.getElementById("JobsOnOff").innerHTML='<span class="sexy_health_new"><span><img src="http://mwfb.static.zgncdn.com/mwfb/graphics/icon_energy_16x16_01.gif"></span></span>'}else{energyInterval=setInterval(Jobber,1000);jobsOn=true;document.getElementById("JobsOnOff").setAttribute("class","sexy_button_new short green");document.getElementById("JobsOnOff").innerHTML='<span class="sexy_health_new"><span><img src="http://mwfb.static.zgncdn.com/mwfb/graphics/icon_energy_16x16_01.gif"></span></span>'}writeCookie()}function toggleEvil(){if(evilOn==true){evilOn=false;familymodeOn=false;clearInterval(evilInterval);document.getElementById("unlockedStatus").innerHTML="SLAYER STOPPED ICES:"+icecount+"	KILLS:"+killcount+"    TOTAL:"+(icecount+killcount*2);document.getElementById("EvilOnOff").setAttribute("class","sexy_button_new short black");document.getElementById("EvilOnOff").innerHTML='<span class="sexy_health_new"><span><img src="'+unlocked.images.evil_icon+'""></span></span></a>'}else{evilCity=/mw_city(\d)/.exec(document.getElementById("mw_city_wrapper").className)[1];if(/Sucker Punch/.test(document.body.innerHTML)){targetid="p|"+(/user=p\|(\d+)'.+>Profile/.exec(document.body.innerHTML)[1]);target_name=/levels">\((.*?)\)/.exec(document.body.innerHTML)[1];evilInterval=setInterval(PureEvil,15000);evilOn=true;document.getElementById("EvilOnOff").setAttribute("class","sexy_button_new short green");document.getElementById("EvilOnOff").innerHTML='<span class="sexy_health_new"><span><img src="'+unlocked.images.evil_icon+'""></span></span></a>';PureEvil()}else{if(document.evaluate('//li[contains(@class, "tab_on tab_middle")]//a[contains(., "Fighters")]',document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength>0){evilOn=true;document.getElementById("EvilOnOff").setAttribute("class","sexy_button_new short green");document.getElementById("EvilOnOff").innerHTML='<span class="sexy_health_new"><span><img src="'+unlocked.images.evil_icon+'""></span></span></a>';evilInterval=setInterval(Fightlist,5000);Fightlist()}else{if(document.evaluate('//li[contains(@class, "tab_on tab_middle")]//a[contains(., "Rivals")]',document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength>0){evilOn=true;document.getElementById("EvilOnOff").setAttribute("class","sexy_button_new short green");document.getElementById("EvilOnOff").innerHTML='<span class="sexy_health_new"><span><img src="'+unlocked.images.evil_icon+'""></span></span></a>';evilInterval=setInterval(Rivals,5000);Rivals()}else{if(document.evaluate('//li[contains(@class, "tab_on")]//a[contains(., "Robbing")]',document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength>0){evilOn=true;document.getElementById("EvilOnOff").setAttribute("class","sexy_button_new short green");document.getElementById("EvilOnOff").innerHTML='<span class="sexy_health_new"><span><img src="'+unlocked.images.evil_icon+'""></span></span></a>';setTimeout(LetThereBeRobberies,1000);document.getElementById("unlockedStatus").innerHTML="Robbing in progress....."}else{if(document.evaluate('//li[contains(@class, "tab_on tab_first")]//a[contains(., "Families")]',document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength>0){var tabs=document.getElementsByClassName("clan_nav_tab selected");if(tabs.length>0&&tabs[0].id=="battle_tab"){evilOn=true;document.getElementById("EvilOnOff").setAttribute("class","sexy_button_new short green");document.getElementById("EvilOnOff").innerHTML='<span class="sexy_health_new"><span><img src="'+unlocked.images.evil_icon+'""></span></span></a>';familymodeOn=true;var members=document.getElementsByClassName("fl");for(i=1;i<members.length;i++){familytargets[i-1]=new familyMember(decodeID(/user=(.+?)\"/.exec(members[i].innerHTML)[1]),"weak")}evilInterval=setInterval(Battle,10000);document.getElementById("unlockedStatus").innerHTML="Battle Mode Loading";Battle();return}evilOn=true;familymodeOn=true;var j=0;familyindex=0;familytargets.length=0;var members=document.getElementsByClassName("name_n_rank");for(i=0;i<members.length;i++){if(members[i].style.clear=="both"){familytargets[j++]=new familyMember(decodeID(/user=(.+?)\"/.exec(members[i].innerHTML)[1]),"weak")}}document.getElementById("EvilOnOff").setAttribute("class","sexy_button_new short green");document.getElementById("EvilOnOff").innerHTML='<span class="sexy_health_new"><span><img src="'+unlocked.images.evil_icon+'""></span></span></a>';evilInterval=setInterval(FightFamily,5000);document.getElementById("unlockedStatus").innerHTML="Fight Family Loading";FightFamily()}else{if(document.evaluate('//li[contains(@class, "tab_on tab_last")]//a[contains(., "Boosts")]',document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength>0){document.getElementById("EvilOnOff").setAttribute("class","sexy_button_new short red");document.getElementById("EvilOnOff").innerHTML='<span class="sexy_health_new"><span><img src="'+unlocked.images.evil_icon+'""></span></span></a>';if(stamOn==true||stamOn==2){clearInterval(fightInterval);fightInterval=setInterval(Fighter,333)}}else{if(document.getElementById("declare_war_head")&&/Declare war now for/.test(document.body.innerHTML)){alert("Already at war, purchase a timer rest if you really want to declare, then retry.");return}else{if(document.getElementById("declare_war_head")&&document.getElementsByClassName("sexy_button_new medium white")){document.getElementById("EvilOnOff").setAttribute("class","sexy_button_new short green");document.getElementById("EvilOnOff").innerHTML='<span class="sexy_health_new"><span><img src="'+unlocked.images.evil_icon+'""></span></span></a>';evilOn=true;declare_war(null)}}}}}}}}}}function openToolsMenu(){var toolsMenu=document.getElementById("toolsMenu");if(toolsMenu){toolsMenu.style.display="block"}}function closeToolsMenu(){var toolsMenu=document.getElementById("toolsMenu");if(toolsMenu){toolsMenu.style.display="none"}}function toggleToolsMenu(){var toolsMenu=document.getElementById("toolsMenu");if(toolsMenu){if(toolsMenu.style.display=="none"){toolsMenu.style.display="block"}if(toolsMenu.style.display=="block"){toolsMenu.style.display="none"}}}function ExternalLinks(){var toolbar=document.getElementById("mw_masthead");if(toolbar){var toolbar_div;if(document.getElementById("unlock_links")){toolbar_div=document.getElementById("unlock_links");document.getElementById("tools_container").addEventListener("click",toggleToolsMenu,false);document.getElementById("tools_container").addEventListener("mouseover",openToolsMenu,false);document.getElementById("tools_container").addEventListener("mouseout",closeToolsMenu,false);for(var i=0;i<document.getElementsByClassName("unlocked_loadbm").length;i++){document.getElementsByClassName("unlocked_loadbm")[i].onclick=loadbm}}else{toolbar_div=document.createElement("div");toolbar_div.id="unlock_links";toolbar.appendChild(toolbar_div);var toolbarhtml='<style type="text/css">#toolsMenu {border: 1px solid #cdcdcd; border-width: 0 1px 1px; font-size: 12px; font-weight: bold; margin: 0 2px;}</style><div id="tools_container" style="width: 200px; position: relative; left: 40px; top: 173px;"><a class="sexy_button_new short black_white_border" style="width: 95px;"><span><span style="background: transparent url(http://mwfb.static.zynga.com/mwfb/graphics/dropdown_travel_arrow.gif) no-repeat scroll 75px 50%; text-align: left; -moz-background-clip: border; -moz-background-origin: padding; -moz-background-inline-policy: continuous;">Fuяyans</span</span> </a><div id="toolsMenu" style="z-index: 20; display: none;margin-top:-2px;width:250x;" ><a class="unlocked_loadbm" id="switch"><div class="sexy_destination middle">Switch</div></a><a class="unlocked_loadbm" id="boss fight"><div class="sexy_destination middle">Boos Fight</div></a><a class="unlocked_loadbm" id="ass"><div class="sexy_destination middle">Assassin-a-nator</div></a><a class="unlocked_loadbm" id="chucker"><div class="sexy_destination middle">Chucker</div></a><a class="unlocked_loadbm" id="robber"><div class="sexy_destination middle">Robber</div></a><a class="unlocked_loadbm" id="minipack"><div class="sexy_destination middle">Mini-Pack</div><a class="unlocked_loadbm" id="loose slots"><div class="sexy_destination middle">Loose Slots</div></a><a class="unlocked_loadbm" id="lan"><div class="sexy_destination middle">Link-a-nator</div><a class="unlocked_loadbm" id="gan"><div class="sexy_destination middle">Get-a-nator</div><a class="unlocked_loadbm" id="propman"><div class="sexy_destination middle">Property Manager</div> <a class="unlocked_loadbm" id="buyprops"><div class="sexy_destination middle">Buy Properties Beta</div><a class="unlocked_loadbm" id="inventorygroup"><div class="sexy_destination middle">Inventory Groups</div></a><a class="unlocked_loadbm" id="drone"><div class="sexy_destination middle">Drone.〤</div></a></div></div>';toolbar_div.innerHTML=toolbarhtml;document.getElementById("tools_container").addEventListener("click",toggleToolsMenu,false);document.getElementById("tools_container").addEventListener("mouseover",openToolsMenu,false);document.getElementById("tools_container").addEventListener("mouseout",closeToolsMenu,false);for(var i=0;i<document.getElementsByClassName("unlocked_loadbm").length;i++){document.getElementsByClassName("unlocked_loadbm")[i].onclick=loadbm}}}}function loadbm(){var id=this.id;if(id=="switch"){bm_url="http://unlockedmw.com/toolbar/switch.js"} else{if(id=="boss fight"){bm_url="http://spocklet.com/bookmarklet/family-boss-fighter.js"}else{if(id=="ass"){bm_url="http://spocklet.com/bookmarklet/assassin-a-nator.js"}else{if(id=="chucker"){bm_url="http://simony.dk/gs/Chucker.js"}else{if(id=="robber"){bm_url="http://www.spocklet.com/bookmarklet/robber.bg.js"}else{if(id=="minipack"){bm_url="http://www.spockholm.com/mafia/minipack.js"}else{if(id=="loose slots"){bm_url="http://www.exellerate.com/mafia/loose_slots.js"}else{if(id=="lan"){bm_url="http://www.exellerate.com/mafia/link-a-nator.js"}else{if(id=="gan"){bm_url="http://www.exellerate.com/mafia/free_gift_get_a_nator.js"}else{if(id=="propman"){bm_url="http://www.spocklet.com/bookmarklet/property.manager.js"}else{if(id=="buyprops"){bm_url="http://spocklet.com/bookmarklet/buyprops.js"}else{if(id=="inventorygroup"){bm_url="http://spocklet.com/bookmarklet/inventorygroup.js"}else{if(id=="drone"){bm_url=" http://www.creallaborate.com/guessx/mw/scripts/gxsdrone.js"}else{return}}}}}}}}}}}}}var a=document.createElement("script");a.type="text/javascript";a.src=bm_url+"?"+Math.random();document.getElementsByTagName("head")[0].appendChild(a)}function Toolbar(){var toolbar=document.getElementById("menubar");if(toolbar){var toolbar_div;if(document.getElementById("unlock_toolbar")){toolbar_div=document.getElementById("unlock_toolbar");document.getElementById("BankButtonB").addEventListener("click",Bank,false);document.getElementById("PostOnOff").addEventListener("click",togglePost,false);document.getElementById("HealOnOff").addEventListener("click",toggleHeal,false);document.getElementById("StamOnOff").addEventListener("click",toggleStam,false);document.getElementById("unlockSettings").addEventListener("click",Settings,false);document.getElementById("EvilOnOff").addEventListener("click",toggleEvil,false)}else{toolbar_div=document.createElement("div");toolbar_div.id="unlock_toolbar";toolbar.appendChild(toolbar_div);var toolbarhtml='<div id="toolbar_content" class="clearfix empire_module_title" style="height: 30px;width:750px;"><a href="http://www.facebook.com/pages/Fu%D1%8Fyans-Battlefield/123944047665059?sk=app_179191362131547" id="logo" target="_blank" style="position:relative; top:-5px;" > <img src="'+unlocked.images.unlocked_icon+'"></a><a class="sexy_button_new short black" id="BankButtonB" style="position:relative; top:-15px; left:430px;"><span><span><img src="http://mwfb.static.zgncdn.com/mwfb/graphics/icon_cash_16x16_01.gif"></span></span></a><marquee behavior="scroll" direction="left" id="unlockedStatus" width="30%"  style="position:relative; top:-10px; left:80px;" ><iframe src="http://www.facebook.com/plugins/like.php?app_id=116987501735207&amp;href=http%3A%2F%2Fwww.facebook.com%2Fpages%2FUnlockedMW-Unlock-your-Mafia-Wars-Game%2F216635788360770%3Fsk%3Dwall&amp;send=false&amp;layout=button_count&amp;width=50&amp;show_faces=true&amp;action=like&amp;colorscheme=light&amp;font&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:80px; height:21px; position:relative; top:3px;" allowTransparency="true"></iframe>ICES:'+icecount+"  KILLS:"+killcount+" TOTAL:"+(icecount+killcount*2)+'</marquee><a id="unlockSettings" style="position:relative; top:-15px; left:205px;" class="sexy_button_new short black"><span class="sexy_health_new"><span><img src="http://mwfb.static.zgncdn.com/mwfb/graphics/v3/icon_hammer_wrench.png"></span></span></a><a id="EvilOnOff" style="position:relative; top:-15px; left:205px;" class="sexy_button_new short black"><span class="sexy_health_new"><span><img src="'+unlocked.images.evil_icon+'""></span></span></a><a id="PostOnOff" style="position:relative; top:-15px; left:205px;" class="sexy_button_new short black"><span class="sexy_health_new"><span><img src="'+unlocked.images.fb_icon+'"></span></span></a><a id="HealOnOff" style="position:relative; top:-15px; left:205px;" class="sexy_button_new short black"><span class="sexy_health_new"><span><img src="http://mwfb.static.zgncdn.com/mwfb/graphics/icon_health_16x16_01.gif"></span></span></a><a id="StamOnOff" style="position:relative; top:-15px; left:205px;" class="sexy_button_new short black"><span class="sexy_health_new"><span><img src="http://mwfb.static.zgncdn.com/mwfb/graphics/icon_stamina_16x16.png"></span></span></a><a id="JobsOnOff" style="position:relative; top:-15px; left:205px;" class="sexy_button_new short black"><span class="sexy_health_new"><span><img src="http://mwfb.static.zgncdn.com/mwfb/graphics/icon_energy_16x16_01.gif"></span></span></a>';toolbar_div.innerHTML=toolbarhtml;document.getElementById("BankButtonB").addEventListener("click",Bank,false);document.getElementById("PostOnOff").addEventListener("click",togglePost,false);document.getElementById("HealOnOff").addEventListener("click",toggleHeal,false);document.getElementById("StamOnOff").addEventListener("click",toggleStam,false);document.getElementById("JobsOnOff").addEventListener("click",toggleJobs,false);document.getElementById("unlockSettings").addEventListener("click",Settings,false);document.getElementById("EvilOnOff").addEventListener("click",toggleEvil,false);if(stamOn=="true"||stamOn==true){document.getElementById("StamOnOff").setAttribute("class","sexy_button_new short green");document.getElementById("StamOnOff").innerHTML='<span class="sexy_health_new"><span><img src="http://mwfb.static.zgncdn.com/mwfb/graphics/icon_stamina_16x16.png"></span></span>'}else{if(stamOn==2){document.getElementById("StamOnOff").setAttribute("class","sexy_button_new short red");document.getElementById("StamOnOff").innerHTML='<span class="sexy_health_new"><span><img src="http://mwfb.static.zgncdn.com/mwfb/graphics/icon_stamina_16x16.png"></span></span>'}}if(healOn=="true"||healOn==true){document.getElementById("HealOnOff").setAttribute("class","sexy_button_new short green");document.getElementById("HealOnOff").innerHTML='<span class="sexy_health_new"><span><img src="http://mwfb.static.zgncdn.com/mwfb/graphics/icon_health_16x16_01.gif"></span></span>'}if(postOn=="true"||postOn==true){document.getElementById("PostOnOff").setAttribute("class","sexy_button_new short green");document.getElementById("PostOnOff").innerHTML='<span class="sexy_health_new"><span><img src="'+unlocked.images.fb_icon+'"></span></span>'}if(jobsOn=="true"||jobsOn==true){document.getElementById("JobsOnOff").setAttribute("class","sexy_button_new short green");document.getElementById("JobsOnOff").innerHTML='<span class="sexy_health_new"><span><img src="http://mwfb.static.zgncdn.com/mwfb/graphics/icon_energy_16x16_01.gif"></span></span>'}}}ExternalLinks()}function declare_war(arg){var war_target=null;if(parseInt(arg)){war_target=arg}else{if(!arg||arg==undefined){var a=Math.floor(Math.random()*11);if(a>5){b=9999999}else{b=999999}war_target=Math.floor(Math.random()*b)}}var declare_url="remote/html_server.php?xw_controller=war&xw_action=declare_war&xw_city="+city+"&xw_person="+/([\d]+)/.exec(xw_user)[1]+"&target_id=p%7C"+war_target+"&from=declare_war_page";declaring_war=true;do_ajax("inner_page",declare_url,1,1)}function Jobber(){if(NYjobon||BKjobon||ILVjobon||Bjobon){if(pauseOn){if(parseInt(document.getElementById("exp_to_next_level").innerHTML)<stopat){NYjobon=false;BKjobon=false;ILVjobon=false;Bjobon=false;return}}var Job;var url;if(NYjobon){Job=document.evaluate('//div[@class="message_body clearfix"][@style[contains(string(),"border: 1px solid white;")]]',document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);Job=Job.snapshotItem(0).innerHTML;city=/mw_city(\d)/.exec(document.getElementById("mw_city_wrapper").className)[1];if(parseInt(document.getElementById("user_energy").innerHTML)<parseInt((/([\d]+) Energy/.exec(Job))[1])){NYjobon=false;return}url="html_server.php?xw_controller=job&xw_action=dojob&xw_city="+city+"&tmp="+(/tmp=([\da-f]+)/.exec(Job))[1]+"&cb="+(/cb=([\da-f]+)/.exec(Job))[1]+"&xw_person="+(/person=([\d]+)/.exec(Job))[1]+"&job="+(/job=([\d]+)/.exec(Job))[1]+"&tab="+(/tab=([\d]+)/.exec(Job))[1]}else{if(BKjobon){if((/Do This Job Again!/.test(document.getElementById("inner_page").innerHTML))){Job=document.evaluate("//a[@class='sexy_button_new short orange sexy_energy_new'][contains(string(),'Do This Job Again!')]",document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);url="html_server.php?"+(/xw_controller=job&xw_action=dojob([&\w\d\=]+)/.exec(Job.snapshotItem(0).onclick))[0]}else{if((/Do This Job Again/.test(document.getElementById("inner_page").innerHTML))){Job=document.evaluate("//a[@class='sexy_button_new short orange sexy_energy_new'][contains(string(),'Do This Job Again')]",document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);url="html_server.php?"+(/xw_controller=story&xw_action=dojob([&\w\d\=]+)/.exec(Job.snapshotItem(0).onclick))[0]}else{BKjobon=false;return}}}else{if(ILVjobon){if(document.getElementsByClassName("buy_prompt").length>0){ILVjobon=false;return}city=/mw_city(\d)/.exec(document.getElementById("mw_city_wrapper").className)[1];Job=document.evaluate('//div[@class="job_info"][@style[contains(string(),"255, 255, 255")]]',document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);Job=parseInt((/job([\d]+)/.exec(Job.snapshotItem(0).id))[1]);if(([4,6,8,13,16,25,28,31,39,42,46,49,52,59,60,61,70,74,79,82].indexOf(Job)!==-1&&city==6)||([5,11,12,20,23,33,41,46,51,54,56,62,65,67,72,76,78].indexOf(Job)!==-1&&city==5)){ExpertMapController.selectNode(Job);return MapController.doFightJob(Job,(/(p\|[\d]+)/.exec(document.getElementById("fight_list0").onclick))[1],1,(/'p\|([\d]+)',0,'(.+)'\);/.exec(document.getElementById("fight_list0").onclick))[2])}else{ExpertMapController.selectNode(Job);return MapController.panelButtonDoJob(Job)}}else{if(Bjobon){var clickMe=document.getElementById("btn_dojob_"+Bjobid);var evt=document.createEvent("MouseEvents");evt.initMouseEvent("click",true,true,window,0,0,0,0,0,false,false,false,false,0,null);clickMe.dispatchEvent(evt);return}}}}var client=new XMLHttpRequest();client.open("POST",url,true);client.setRequestHeader("X-Requested-With","XMLHttpRequest");client.setRequestHeader("Accept","*/*");client.setRequestHeader("Content-Type","application/x-www-form-urlencoded");client.send("ajax=1&liteload=1&sf_xw_user_id="+xw_user+"&sf_xw_sig="+local_xw_sig+"&skip_req_frame=1");client.onreadystatechange=function(){if(this.readyState==4){response=client.responseText;if((/user_cash_nyc":"([$\d,]+)"/.test(response))){document.getElementById("user_cash_nyc").innerHTML=(/user_cash_nyc":"([$\d,]+)"/.exec(response))[1];document.getElementById("user_cash_bangkok").innerHTML=(/user_cash_bangkok":"([B$\d,]+)"/.exec(response))[1];document.getElementById("user_cash_italy").innerHTML=(/user_cash_italy":"([L$\d,]+)"/.exec(response))[1];document.getElementById("user_cash_vegas").innerHTML=(/user_cash_vegas":"([V$\d,]+)"/.exec(response))[1];document.getElementById("user_cash_brazil").innerHTML=(/user_cash_brazil":"([BRL$\d,]+)"/.exec(response))[1];document.getElementById("level_bar").setAttribute("style","overflow-x: hidden; overflow-y: hidden; background-color: rgb(41, 202, 49); text-align: left; float: left; width: "+(/percent_complete":([\d]+),"/.exec(response))[1]+"%;");document.getElementById("user_stamina").innerHTML=(/"user_stamina":([\d]+),"user_max_stamina/.exec(response))[1]}else{if((/user_cash_nyc'\] = "([$\d,]+)/.test(response))){document.getElementById("inner_page").innerHTML=response;document.getElementById("user_energy").innerHTML=(/user_energy'\] = parseInt\("([\d]+)/.exec(response))[1];document.getElementById("level_bar").setAttribute("style","overflow-x: hidden; overflow-y: hidden; background-color: rgb(41, 202, 49); text-align: left; float: left; width: "+(/percent_complete'\] = "([\d]+)/.exec(response))[1]+"%;");document.getElementsByClassName("cur_cash").innerHTML=(/user_cash'\] = parseInt\("([\d]+)/.exec(response))[1];document.getElementById("exp_to_next_level").innerHTML=(/exp_to_next_level'\] = parseInt\("([\d]+)/.exec(response))[1];document.getElementById("user_cash_nyc").innerHTML=(/user_cash_nyc'\] = "([$\d,]+)"/.exec(response))[1];document.getElementById("user_cash_bangkok").innerHTML=(/user_cash_bangkok'\] = "([B$\d,]+)"/.exec(response))[1];document.getElementById("user_cash_italy").innerHTML=(/'user_cash_italy'\] = "([L$\d,]+)"/.exec(response))[1];document.getElementById("user_cash_vegas").innerHTML=(/'user_cash_vegas'\] = "([V$\d,]+)"/.exec(response))[1];document.getElementById("user_cash_brazil").innerHTML=(/'user_cash_brazil'\] = "([BRL$\d,]+)"/.exec(response))[1]}}}}}}function loadProfile(pid){do_ajax("inner_page","remote/html_server.php?xw_controller=stats&xw_action=view&user="+pid,1,1,0,0)}function Fightlist(){var i;if(fightActionRunning||isFightPopOpen()||(parseInt(document.getElementById("user_stamina").innerHTML)<=10)||(parseInt(document.getElementById("user_health").innerHTML)<healat)){return}if((document.getElementsByClassName("impulse_buy_prompt contextual").length>0)||(document.evaluate('//li[contains(@class, "tab_on tab_middle")]//a[contains(., "Fighters")]',document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength==0)){document.getElementById("unlockedStatus").innerHTML="Re-Loading fightlist   ICES"+icecount+"	KILLS:"+killcount+"    TOTAL:"+(icecount+killcount*2);do_ajax("inner_page","remote/html_server.php?xw_controller=fight&xw_action=view&tab=0",1,1,0,0);return}city=/mw_city(\d)/.exec(document.getElementById("mw_city_wrapper").className)[1];if(evilCity!=city){do_ajax("inner_page","remote/html_server.php?xw_controller=travel&xw_action=travel&destination="+evilCity+"&from=index&nextParams=&menu=travel",1,1,0,0)}fightActionRunning=true;clearTimeout(fightwatchdogtimout);fightwatchdogtimout=setTimeout(resetfightaction,15000);var fightlist=document.evaluate('//table[@class="main_table fight_table"]//a[contains(@href, "opponent_id")]',document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);var randomizer=Math.floor(Math.random()*(fightlist.snapshotLength-1))+1;for(i=fightlist.snapshotLength-randomizer;i>0;i--){var iced=fightlist.snapshotItem(i).parentNode.parentNode.getElementsByTagName("td")[0].className;if(iced!="fight_list_player_dead"){break}}if(fightlist.snapshotItem(i).parentNode.parentNode.getElementsByTagName("td")[0].getElementsByTagName("a")[2]){target_name=fightlist.snapshotItem(i).parentNode.parentNode.getElementsByTagName("td")[0].getElementsByTagName("a")[1].innerHTML+" "+fightlist.snapshotItem(i).parentNode.parentNode.getElementsByTagName("td")[0].getElementsByTagName("a")[2].innerHTML}else{target_name=fightlist.snapshotItem(i).parentNode.parentNode.getElementsByTagName("td")[0].getElementsByTagName("a")[1].innerHTML}document.getElementById("unlockedStatus").innerHTML="Attacking "+target_name+"	ICES:"+icecount+"    KILLS:"+killcount+"   TOTAL:"+(icecount+killcount*2);var evt=document.createEvent("MouseEvents");evt.initMouseEvent("click",true,true,window,0,0,0,0,0,false,false,false,false,0,null);fightlist.snapshotItem(i).dispatchEvent(evt)}Array.prototype.findIndex=function(value){var ctr="";for(var i=0;i<this.length;i++){if(this[i].pid==value){return i}}return ctr};function Battle(){var targets;if(fightActionRunning||isFightPopOpen()||(document.getElementById("user_stamina").innerHTML<=0)||(parseInt(document.getElementById("user_health").innerHTML)<healat)){return}if(document.getElementsByClassName("sexy_button_new short red sexy_attack_new impulse_buy red").length>0){var members=document.getElementsByClassName("fl");if(members.length-1>familytargets.length){for(i=1;i<members.length;i++){var pid=decodeID(/user=(.+?)\"/.exec(members[i].innerHTML)[1]);if(familytargets.findIndex(pid)===""){familytargets[familytargets.length]=new familyMember(pid,"weak")}}}targets=document.getElementsByClassName("sexy_button_new short red sexy_attack_new impulse_buy red");var targnum=Math.floor(Math.random()*targets.length);familyindex=familytargets.findIndex(targets[targnum].id.replace("btn_attack_p","p|"));if(familytargets[familyindex].stat=="strong"){targets=document.getElementsByClassName("sexy_button_new sexy_page_refresh_new");var evt=document.createEvent("MouseEvents");evt.initMouseEvent("click",true,true,window,0,0,0,0,0,false,false,false,false,0,null);targets[0].dispatchEvent(evt)}else{var evt=document.createEvent("MouseEvents");evt.initMouseEvent("click",true,true,window,0,0,0,0,0,false,false,false,false,0,null);targets[targnum].dispatchEvent(evt)}}else{if(document.getElementsByClassName("sexy_button_new medium red sexy_attack_new impulse_buy red").length>0){targets=document.getElementsByClassName("sexy_button_new medium red sexy_attack_new impulse_buy red");var evt=document.createEvent("MouseEvents");evt.initMouseEvent("click",true,true,window,0,0,0,0,0,false,false,false,false,0,null);targets[0].dispatchEvent(evt)}else{targets=document.getElementsByClassName("sexy_button_new sexy_page_refresh_new");var evt=document.createEvent("MouseEvents");evt.initMouseEvent("click",true,true,window,0,0,0,0,0,false,false,false,false,0,null);targets[0].dispatchEvent(evt)}}}function Rivals(){var i;if(fightActionRunning||isFightPopOpen()||(document.getElementById("user_stamina").innerHTML<=0)||(parseInt(document.getElementById("user_health").innerHTML)<healat)){return}if((document.getElementsByClassName("impulse_buy_prompt contextual").length>0)||(document.evaluate('//li[contains(@class, "tab_on tab_middle")]//a[contains(., "Rivals")]',document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength==0)){document.getElementById("unlockedStatus").innerHTML="Re-Loading fightlist   ICES"+icecount+"	KILLS:"+killcount+"    TOTAL:"+(icecount+killcount*2);do_ajax("inner_page","remote/html_server.php?xw_controller=fight&xw_action=view&tab=1",1,1,0,0);return}city=/mw_city(\d)/.exec(document.getElementById("mw_city_wrapper").className)[1];if(evilCity!=city){do_ajax("inner_page","remote/html_server.php?xw_controller=travel&xw_action=travel&destination="+evilCity+"&from=index&nextParams=&menu=travel",1,1,0,0)}fightActionRunning=true;clearTimeout(fightwatchdogtimout);fightwatchdogtimout=setTimeout(resetfightaction,15000);var fightlist=document.evaluate('//table[@class="main_table fight_table"]//a[contains(@href, "opponent_id")]',document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);for(i=fightlist.snapshotLength-11;i>=0;i--){var iced=fightlist.snapshotItem(i).parentNode.parentNode.getElementsByTagName("td")[0].className;if(iced!="fight_list_player_dead"){if(!rivalcycle[i]){rivalcycle[i]=true;break}}}if(i<0){i=0}if(rivalcycle[0]==true){for(var j=0;j<rivalcycle.length;j++){rivalcycle[j]=false}}if(fightlist.snapshotItem(i).parentNode.parentNode.getElementsByTagName("td")[0].getElementsByTagName("a")[2]){target_name=fightlist.snapshotItem(i).parentNode.parentNode.getElementsByTagName("td")[0].getElementsByTagName("a")[1].innerHTML+" "+fightlist.snapshotItem(i).parentNode.parentNode.getElementsByTagName("td")[0].getElementsByTagName("a")[2].innerHTML}else{target_name=fightlist.snapshotItem(i).parentNode.parentNode.getElementsByTagName("td")[0].getElementsByTagName("a")[1].innerHTML}document.getElementById("unlockedStatus").innerHTML="Attacking "+target_name+"	ICES:"+icecount+"    KILLS:"+killcount+"   TOTAL:"+(icecount+killcount*2);var evt=document.createEvent("MouseEvents");evt.initMouseEvent("click",true,true,window,0,0,0,0,0,false,false,false,false,0,null);fightlist.snapshotItem(i).dispatchEvent(evt)}function clearicecheckfail(){icecheckfail=false}function FightFamily(){if(isFightPopOpen()){return}if(document.getElementById("user_stamina").innerHTML<=0){return}if((document.getElementsByClassName("impulse_buy_prompt contextual").length>0)||(/Remove from Mafia/.test(document.body.innerHTML))||familytargets[familyindex].stat=="strong"){document.getElementById("unlockedStatus").innerHTML="Loading Next Family target...	ICES:"+icecount+"	KILLS:"+killcount+"    TOTAL:"+(icecount+killcount*2);familyindex++;if(familyindex>=familytargets.length){familyindex=0}loadProfile(familytargets[familyindex].pid);return}health=parseInt(document.getElementById("user_health").innerHTML);if(health<healat){return}if(/Sucker Punch/.test(document.body.innerHTML)){var hitlist_url=/Sucker Punch.+?<a href="(.+?)".+?>Add to Hitlist/.exec(document.body.innerHTML)[1].replace(/&amp;/g,"&");target_name=/levels">\((.*?)\)/.exec(document.body.innerHTML)[1];if(icecheckfail){document.getElementById("unlockedStatus").innerHTML="Attacking "+target_name+"	ICES:"+icecount+"    KILLS:"+killcount+"   TOTAL:"+(icecount+killcount*2);var elem=document.getElementById("btn_attack_"+familytargets[familyindex].pid.replace("|",""));var evt=document.createEvent("MouseEvents");evt.initMouseEvent("click",true,true,window,0,0,0,0,0,false,false,false,false,0,null);elem.dispatchEvent(evt)}else{document.getElementById("unlockedStatus").innerHTML="Icechecking "+target_name+"   ICES:"+icecount+"	KILLS:"+killcount+"    TOTAL:"+(icecount+killcount*2);var params={ajax:1,liteload:1,sf_xw_user_id:xw_user,sf_xw_sig:local_xw_sig};$.ajax({type:"POST",url:hitlist_url,timeout:30000,data:params,success:function(msg){if(/is already dead or too weak!/.test(msg)){document.getElementById("unlockedStatus").innerHTML=target_name+" is dead...   ICES:"+icecount+"   KILLS:"+killcount+"   TOTAL:"+(icecount+killcount*2);familyindex++;if(familyindex>=familytargets.length){familyindex=0}loadProfile(familytargets[familyindex].pid);return}else{if(/The action was not able to be completed/.test(msg)){icecheckfail=true;setTimeout(clearicecheckfail,45000);document.getElementById("unlockedStatus").innerHTML="Zynga icecheck sucks....    ICES:"+icecount+"	KILLS:"+killcount+"    TOTAL:"+(icecount+killcount*2);return}else{if(/Sucker Punch/.test(document.body.innerHTML)){document.getElementById("unlockedStatus").innerHTML="Attacking "+target_name+"	ICES:"+icecount+"    KILLS:"+killcount+"   TOTAL:"+(icecount+killcount*2);var elem=document.getElementById("btn_attack_"+familytargets[familyindex].pid.replace("|",""));var evt=document.createEvent("MouseEvents");evt.initMouseEvent("click",true,true,window,0,0,0,0,0,false,false,false,false,0,null);elem.dispatchEvent(evt)}}}},error:function(req,status,err){return}})}}else{document.getElementById("unlockedStatus").innerHTML="Loading next faily target...    ICES:"+icecount+"	KILLS:"+killcount+"    TOTAL:"+(icecount+killcount*2);familyindex++;if(familyindex>=familytargets.length){familyindex=0}loadProfile(familytargets[familyindex].pid)}}function decodeID(strID){strID=unescape(strID);if(isNaN(strID)){strID=decode64(strID)}return strID}function decode64(input){var output="";var chr1,chr2,chr3="";var enc1,enc2,enc3,enc4="";var i=0;var base64test=/[^A-Za-z0-9\+\/\=]/g;if(base64test.exec(input)){}input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{enc1=keyStr.indexOf(input.charAt(i++));enc2=keyStr.indexOf(input.charAt(i++));enc3=keyStr.indexOf(input.charAt(i++));enc4=keyStr.indexOf(input.charAt(i++));chr1=(enc1<<2)|(enc2>>4);chr2=((enc2&15)<<4)|(enc3>>2);chr3=((enc3&3)<<6)|enc4;output=output+String.fromCharCode(chr1);if(enc3!=64){output=output+String.fromCharCode(chr2)}if(enc4!=64){output=output+String.fromCharCode(chr3)}chr1=chr2=chr3="";enc1=enc2=enc3=enc4=""}while(i<input.length);return output}function PureEvil(){if(isFightPopOpen()){return}if(document.getElementById("user_stamina").innerHTML<=0){return}if(document.getElementsByClassName("impulse_buy_prompt contextual").length>0){document.getElementById("unlockedStatus").innerHTML="Re-Loading "+target_name+"	ICES:"+icecount+"	KILLS:"+killcount+"    TOTAL:"+(icecount+killcount*2);setTimeout(PureEvil,1500);loadProfile(targetid);return}health=parseInt(document.getElementById("user_health").innerHTML);if(health<healat){return}if(/Sucker Punch/.test(document.body.innerHTML)){var hitlist_url=/Sucker Punch.+?<a href="(.+?)".+?>Add to Hitlist/.exec(document.body.innerHTML)[1].replace(/&amp;/g,"&");document.getElementById("unlockedStatus").innerHTML="Icechecking "+target_name+"   ICES:"+icecount+"	KILLS:"+killcount+"    TOTAL:"+(icecount+killcount*2);var params={ajax:1,liteload:1,sf_xw_user_id:xw_user,sf_xw_sig:local_xw_sig};$.ajax({type:"POST",url:hitlist_url,timeout:30000,data:params,success:function(msg){if(/is already dead or too weak!/.test(msg)){document.getElementById("unlockedStatus").innerHTML=target_name+" is dead...   ICES:"+icecount+"   KILLS:"+killcount+"   TOTAL:"+(icecount+killcount*2);return}else{if(/The action was not able to be completed/.test(msg)){document.getElementById("unlockedStatus").innerHTML="Zynga icecheck sucks....    ICES:"+icecount+"	KILLS:"+killcount+"    TOTAL:"+(icecount+killcount*2);return}else{if(/Sucker Punch/.test(document.body.innerHTML)){document.getElementById("unlockedStatus").innerHTML="Attacking "+target_name+"	ICES:"+icecount+"    KILLS:"+killcount+"   TOTAL:"+(icecount+killcount*2);var elem=document.getElementById("btn_attack_"+targetid.replace("|",""));var evt=document.createEvent("MouseEvents");evt.initMouseEvent("click",true,true,window,0,0,0,0,0,false,false,false,false,0,null);elem.dispatchEvent(evt)}}}},error:function(req,status,err){return}})}else{document.getElementById("unlockedStatus").innerHTML="Loading "+target_name+"	ICES:"+icecount+"	KILLS:"+killcount+"    TOTAL:"+(icecount+killcount*2);setTimeout(PureEvil,1500);loadProfile(targetid)}}function Fighter(){var times;var i;var health;var url;if(newfighton){if(isFightPopOpen()){var elem=document.getElementById("attacker_fight_status");if(!/Lost/.test(elem.innerHTML)||stamOn==2){elem=document.getElementsByClassName("sexy_button_new short red impulse_buy fightV2AttackBtn");if(document.getElementsByClassName("sexy_button_new short red impulse_batch_buy fightV2AttackBtn").length>0){elem[3]=document.getElementsByClassName("sexy_button_new short red impulse_batch_buy fightV2AttackBtn")[1]}if(document.getElementById("fightv2_poweratkbtn_boost_on").style.display=="block"||document.getElementById("fightv2_poweratkbtn_boost_off").style.display=="block"){health=parseInt(document.getElementById("user_health").innerHTML);if(health<healat){return}url=elem[3].href.replace("remote/","");if(burstOn){url=url.replace("click_amt=1","click_amt=4")}var client=new XMLHttpRequest();client.open("POST",url,true);client.setRequestHeader("X-Requested-With","XMLHttpRequest");client.setRequestHeader("Accept","*/*");client.setRequestHeader("Content-Type","application/x-www-form-urlencoded");client.send("ajax=1&liteload=1&sf_xw_user_id="+xw_user+"&sf_xw_sig="+local_xw_sig+"&skip_req_frame=1");client.onreadystatechange=function(){if(this.readyState==4){response=client.responseText;try{var msg=JSON.parse(response)}catch(err){return}msg.user_fields.user_health=CurHealth;FightV2.powerAttack(msg,this);parseNewFightResults(response);var PercentComplete=(/percent_complete":([\d]+),"/.exec(response))[1];document.getElementById("level_bar").setAttribute("style","overflow-x: hidden; overflow-y: hidden; background-color: rgb(41, 202, 49); text-align: left; float: left; width: "+PercentComplete+"%;");document.getElementById("exp_to_next_level").innerHTML=(/exp_to_next_level":([\d]+),/.exec(response))[1];document.getElementById("user_cash_nyc").innerHTML=(/user_cash_nyc":"([$\d,]+)"/.exec(response))[1];document.getElementById("user_cash_italy").innerHTML=(/user_cash_italy":"([L$\d,]+)"/.exec(response))[1];document.getElementById("user_cash_vegas").innerHTML=(/user_cash_vegas":"([V$\d,]+)"/.exec(response))[1];document.getElementById("user_cash_brazil").innerHTML=(/user_cash_brazil":"([BRL$\d,]+)"/.exec(response))[1];document.getElementById("user_cash_chicago").innerHTML=(/user_cash_chicago":"([\\u00a2\d,]+)"/.exec(response))[1];document.getElementById("user_stamina").innerHTML=(/user_stamina":([\d]+)/.exec(response))[1]}};return}}newfighton=false;if(icesteal){if(document.getElementById("fv2_defender_overlay_stolen").style.display=="block"){if(document.getElementsByClassName("sexy_button_new medium red sexy_attack_new impulse_buy").length>0){elem=document.getElementsByClassName("sexy_button_new medium red sexy_attack_new impulse_buy");var evt=document.createEvent("MouseEvents");evt.initMouseEvent("click",true,true,window,0,0,0,0,0,false,false,false,false,0,null);elem[0].dispatchEvent(evt);return}}}if(!closing){setTimeout(closeFightPop,2500)}closing=true}}if(hitlist){element=document.evaluate("//a[@class='sexy_button_new short red sexy_attack_new'][contains(string(),'Attack Again')]",document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);if(element.snapshotLength>0){element=element.snapshotItem(0).href;var HLResult=document.getElementById("content_row").innerHTML;if(!(/message_body">You <strong>LOST<\/strong> the fight/.test(HLResult))){url="html_server.php?"+(/xw_controller=hitlist&xw_action=attack([&\w\d=]+)/.exec(element))[0]}else{hitlist=false;return}}health=parseInt(document.getElementById("user_health").innerHTML);if(health<healat){return}var client=new XMLHttpRequest();client.open("POST",url,true);client.setRequestHeader("X-Requested-With","XMLHttpRequest");client.setRequestHeader("Accept","*/*");client.setRequestHeader("Content-Type","application/x-www-form-urlencoded");client.send("ajax=1&liteload=1&sf_xw_user_id="+xw_user+"&sf_xw_sig="+local_xw_sig+"&skip_req_frame=1");client.onreadystatechange=function(){if(this.readyState==4){response=client.responseText;document.getElementById("exp_to_next_level").innerHTML=(/user_fields\['exp_to_next_level'\] = parseInt\("([\d]+)/.exec(response))[1];document.getElementById("user_cash_nyc").innerHTML=(/user_cash_nyc'\] = "([$\d,]+)"/.exec(response))[1];document.getElementById("user_cash_bangkok").innerHTML=(/user_cash_bangkok'\] = "([B$\d,]+)"/.exec(response))[1];document.getElementById("user_cash_italy").innerHTML=(/'user_cash_italy'\] = "([L$\d,]+)"/.exec(response))[1];document.getElementById("user_cash_vegas").innerHTML=(/'user_cash_vegas'\] = "([V$\d,]+)"/.exec(response))[1];document.getElementById("user_cash_brazil").innerHTML=(/'user_cash_brazil'\] = "([BRL$\d,]+)"/.exec(response))[1];document.getElementById("user_cash_chicago").innerHTML=(/user_cash_chicago":"([\\u00a2\d,]+)"/.exec(response))[1];document.getElementById("user_stamina").innerHTML=(/user_fields\['user_stamina'\] = parseInt\("([\d]+)/.exec(response))[1];document.getElementById("inner_page").innerHTML=response}}}}function parseNewFightResults(response){var elem=document.getElementById("attacker_fight_status");if(familymodeOn){if(/Lost/.test(elem.innerHTML)){familytargets[familyindex].stat="strong"}}if((!/Lost/.test(elem.innerHTML))||(stamOn==2)){if(!newfighton){newfighton=true}}else{newfighton=false;if(stamOn&&isFightPopOpen()){if(icesteal){if(document.getElementById("fv2_defender_overlay_stolen").style.display=="block"){if(document.getElementsByClassName("sexy_button_new medium red sexy_attack_new impulse_buy").length>0){elem=document.getElementsByClassName("sexy_button_new medium red sexy_attack_new impulse_buy");var evt=document.createEvent("MouseEvents");evt.initMouseEvent("click",true,true,window,0,0,0,0,0,false,false,false,false,0,null);elem[0].dispatchEvent(evt);return}}}setTimeout(closeFightPop,2500)}}if(document.getElementById("fv2_defender_overlay_iced").style.display=="block"){if(/Get a boost', 'link': '(.+?)'/.test(response)){icecount++;document.getElementById("unlockedStatus").innerHTML="ICES:"+icecount+"	  KILLS:"+killcount+"	TOTAL:"+(icecount+killcount*2);if(postOn){publishIce(response)}}}if(document.getElementById("fv2_defender_overlay_killed").style.display=="block"){if(/Get a boost', 'link': '(.+?)'/.test(response)){killcount++;document.getElementById("unlockedStatus").innerHTML="ICES:"+icecount+"	  KILLS:"+killcount+"	TOTAL:"+(icecount+killcount*2);if(postOn){publishIce(response)}}}}function publishIce(response){var feed;if(/msg.fight_result =/.test(response)){feed=/'feed_js': '(.+?)'/.exec(response)[0]}else{try{var msg=JSON.parse(response);feed=msg.fight_result.feed_js}catch(err){return}}var mwfeed=eval("("+/var feed = (.+?); MW\.Feed/.exec(feed)[1]+")");if(autopostOn){mwfeed.actionLinks[0].name=mwfeed.actionLinks[0].name.replace("Get a boost","Get a Boost")}if(fbfeedloc!=""){mwfeed.targetId=fbfeedloc}MW.Feed(mwfeed)}function DoAutoHeal(){var url="html_server.php?xw_controller=survey&xw_action=show_nps_survey&xw_client_id=8";var maxHealth=parseInt(document.getElementById("user_max_health").innerHTML);var CurHealth=parseInt(document.getElementById("user_health").innerHTML);var client=new XMLHttpRequest();client.open("POST",url,true);client.setRequestHeader("X-Requested-With","XMLHttpRequest");client.setRequestHeader("Accept","*/*");client.setRequestHeader("Content-Type","application/x-www-form-urlencoded");client.send("ajax=1&liteload=1&sf_xw_user_id="+xw_user+"&sf_xw_sig="+local_xw_sig+"&skip_req_frame=1");client.onreadystatechange=function(){if(this.readyState==4){response=client.responseText;try{CurHealth=User.health=document.getElementById("user_health").innerHTML=(/user_health":([\d]+)."/.exec(response))[1]}catch(err){}}};if(parseInt(CurHealth)<healat){HealNY()}}function Bank(){city=/mw_city(\d)/.exec(document.getElementById("mw_city_wrapper").className)[1];if(city==5){vegascash=/V\$([\d,]+)/.exec(document.getElementById("user_cash_vegas").innerHTML)[1];vegascash=parseInt(vegascash.replace(/\,/g,""));url="html_server.php?xw_controller=propertyV2&xw_action=doaction&xw_city=5&doaction=ActionBankDeposit&amount="+vegascash+"&building_type=6&city=5&xw_client_id=8"}else{url="html_server.php?xw_controller=bank&xw_action=deposit_all&xw_city="+city+"&amount=1000000000"}var client=new XMLHttpRequest();client.open("POST",url,true);client.setRequestHeader("X-Requested-With","XMLHttpRequest");client.setRequestHeader("Accept","*/*");client.setRequestHeader("Content-Type","application/x-www-form-urlencoded");client.send("ajax=1&liteload=1&sf_xw_user_id="+xw_user+"&sf_xw_sig="+local_xw_sig+"&skip_req_frame=1");client.onreadystatechange=function(){if(this.readyState==4){response=client.responseText;if((/user_cash_nyc":"([$\d,]+)"/.test(response))){document.getElementById("user_cash_nyc").innerHTML=(/user_cash_nyc":"([$\d,]+)"/.exec(response))[1];document.getElementById("user_cash_bangkok").innerHTML=(/user_cash_bangkok":"([B$\d,]+)"/.exec(response))[1];document.getElementById("user_cash_italy").innerHTML=(/user_cash_italy":"([L$\d,]+)"/.exec(response))[1];document.getElementById("user_cash_vegas").innerHTML=(/user_cash_vegas":"([V$\d,]+)"/.exec(response))[1];document.getElementById("user_cash_brazil").innerHTML=(/user_cash_brazil":"([BRL$\d,]+)"/.exec(response))[1];document.getElementById("user_cash_chicago").innerHTML="Ã‚Â¢"+(/user_cash_chicago":"\\u00a2([\d,]+)"/.exec(response))[1]}}}}function HealNY(){url="html_server.php?xw_controller=hospital&xw_action=heal&xcity=1";send="ajax=1&liteload=1&sf_xw_user_id="+xw_user+"&sf_xw_sig="+local_xw_sig;var client=new XMLHttpRequest();client.open("POST",url,true);client.setRequestHeader("X-Requested-With","XMLHttpRequest");client.setRequestHeader("Content-Type","application/x-www-form-urlencoded");client.send(send);client.onreadystatechange=function(){if(this.readyState==4){response=client.responseText;CurHealth=parseInt((/user_health":([\d]+),/.exec(response))[1]);document.getElementById("user_health").innerHTML=CurHealth}}}function Settings(){var version=308;var updatebutton="";var postsetting=fbfeedloc;if(!is_chrome){updatebutton='<a target="_top" href="http://www.facebook.com/pages/Fu%D1%8Fyans-Battlefield/123944047665059?sk=app_179191362131547">Get Latest Release</a>'}popupTitle="Fuяyans PRO 308";content='<br>Post ices to &nbsp;<input value="'+postsetting+'" type="text" style="resize:none;width:90px;" id="postformid"><br><br><input type="checkbox" id="autopost" name="autopost" value="Checked"> Autopost Ices<br><br><input type="checkbox" id="followstolen" name="followstolen" value="Checked"> Attack Ice Stealers<br><br><input type="checkbox" id="burst" name="burst" value="Checked"> Burst Attacks<br><br><input type="checkbox" id="pausecheck" name="pausecheck" value="Checked">Pause at XP remaining&nbsp;<input value="'+stopat+'" type="integer" style= "resize:none;width:50px;" id="postformid3"><br><br>Heal Threshold&nbsp;<input value="'+healat+'" type="integer" style= "resize:none;width:50px;" id="postformid2"><br><br>Robbing Refresh Rate&nbsp;<input value="'+(rref/1000)+'" type="integer" style= "resize:none;width:35px;" id="postformid5"><br><br><a id="SaveSettings" class="sexy_button_new black"><span><span>Save</span></span></a><br><br>'+updatebutton+"</div>";height="495";myPop(popupTitle,content,height);document.getElementById("SaveSettings").onclick=saveSettings;if(icesteal){document.getElementById("followstolen").checked=true}if(burstOn){document.getElementById("burst").checked=true}if(pauseOn){document.getElementById("pausecheck").checked=true}if(autopostOn){document.getElementById("autopost").checked=true}}function myPop(popupTitle,content,height,width){if(!height||height==undefined){height="600"}if(!width||width==undefined){width="330"}var popup='<div id="myPopup" class="pop_box " style="position:absolute;top:100px;left:'+(375-(width/2))+"px;display: block;width: "+width+"px;height:"+height+'px;z-index:999999;"><a id="myPop_Close" href="#" class="pop_close"></a><div style="z-index:99999" class="mini_EP_info_pop"><img src="http://mwfb.static.zgncdn.com/mwfb/graphics/empire/bg_gradient_760x200.gif" width="'+width+'" height="75" style="transform:rotate(180deg);-moz-transform:rotate(180deg);-webkit-transform:rotate(180deg);position:absolute;top:0px;left:0px;"><center><img style="position:relative;" src="http://a6.sphotos.ak.fbcdn.net/hphotos-ak-snc7/301349_276136235742906_100000395941354_922603_2001483571_n.jpg"><br><div style="position:relative;top:-5px;width:'+(width-10)+'px;height:20px" class="empire_module_title"><span id="myPopup_title" style="position:relative;top:-5px">'+popupTitle+'</span></div><span style="position:relative;top:5px">'+content+"</span></center></div></div>";document.getElementById("popup_fodder").innerHTML+=popup;document.getElementById("myPop_Close").onclick=myPopupClose}function saveSettings(){setTimeout(function(){document.getElementById("popup_fodder").removeChild(document.getElementById("myPopup"))},10);rref=parseInt(document.getElementById("postformid5").value)*1000;fbfeedloc=document.getElementById("postformid").value;if(document.getElementById("autopost").checked==true){autopostOn=true}else{autopostOn=false}healat=parseInt(document.getElementById("postformid2").value);stopat=parseInt(document.getElementById("postformid3").value);if(document.getElementById("followstolen").checked==true){icesteal=true}else{icesteal=false}if(document.getElementById("burst").checked==true){burstOn=true}else{burstOn=false}if(document.getElementById("pausecheck").checked==true){pauseOn=true}else{pauseOn=false}writeCookie()}function getRadioValue(radioObject){var value=null;var i;for(i=0;i<radioObject.length;i++){if(radioObject[i].checked){value=radioObject[i].value;break}}return value}function myPopupClose(){document.getElementById("popup_fodder").removeChild(document.getElementById("myPopup"))}function startup(){readCookieSettings();Toolbar();if(stamOn=="true"||stamOn==true){stamOn=true;fightInterval=setInterval(Fighter,666)}else{if(stamOn==2){fightInterval=setInterval(Fighter,666)}else{stamOn=false}}if(healOn=="true"||healOn==true){healOn=true;healInterval=setInterval(DoAutoHeal,2000)}else{healOn=false}if(postOn=="true"||postOn==true){postOn=true}else{postOn=false}if(jobsOn=="true"||jobsOn==true){jobsOn=true;energyInterval=setInterval(Jobber,1000)}else{jobsOn=false}if(icesteal=="true"||icesteal==true){icesteal=true}else{icesteal=false}if(pauseOn=="true"||pauseOn==true){pauseOn=true}else{pauseOn=false}if(burstOn=="true"||burstOn==true){burstOn=true}else{burstOn=false}if(autopostOn=="true"||autopostOn==true){autopostOn=true}else{autopostOn=false}setInterval(Toolbar,10000)}if(document.getElementById("unlock_toolbar")){return}else{startup()}function isFightPopOpen(){if(document.getElementById("fv2_widget_wrapper")){if(document.getElementById("fv2_widget_wrapper").style.display!="none"){return true}else{return false}}else{return false}}function closeFightPop(){ajax=true;closing=false;CloseJS()}function CloseDoopidPopup(){if($(".pop_bg").length>0){$(".pop_bg").each(function(){var id=this.id;MW.Popup.hide(id.substr(id.lastIndexOf("_")+1))})}}function LetThereBeRobberies(){var DoesIHaveStam=parseInt(document.getElementById("user_stamina").innerHTML);if(!evilOn){return}if(DoesIHaveStam<50){var anystam=parseInt(document.getElementById("user_stamina").innerHTML);var anyexp=parseInt(document.getElementById("exp_to_next_level").innerHTML);var XPratio=(currexp-anyexp)/(currstam-anystam);alert("Sorry you need more stamina to clear the board!\n\nResults : \n\n Start Stamina : "+currstam+" \n\n End Stamina : "+anystam+"\n\n Stamina Spent : "+(currstam-anystam)+"\n\n Experience Gained : "+(currexp-anyexp)+"\n\n Exp Ratio achieved : "+XPratio+" \n\n***Please note if the stats above look wack its because you leveled halfwaythru and threw the hardcoded calculators outta wack***")}else{for(var i=0;i<10;i++){do_ajax("","remote/html_server.php?xw_controller=robbing&xw_action=rob&xw_city="+evilCity+"&slot="+i,1,0,RobbingController.preRob(i),RobbingController.rob)}setTimeout(RefreshMe,(rref))}}function RefreshMe(){try{var IsEveryoneDeadYet=document.evaluate("//a[@id=\"rob_refresh_cost\"]//span//span[contains(string(),'Refresh: 0')]",document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);if(IsEveryoneDeadYet.snapshotLength>=1){do_ajax("","remote/html_server.php?xw_controller=robbing&xw_action=refresh");setTimeout(KickMeBackToThirdGrade,3000)}else{LetThereBeRobberies()}}catch(err){}}function KickMeBackToThirdGrade(){CloseDoopidPopup();LetThereBeRobberies()}function resetfightaction(){fightActionRunning=false;closeFightPop()}$("body").ajaxComplete(function(e,xhr,settings){var response=xhr.responseText;if(/local_xw_sig = '([\da-f]+)';/.test(response)){local_xw_sig=/local_xw_sig = '([\da-f]+)';/.exec(response)[1]}if(ajax){ajax=false;return}if(fightActionRunning){fightActionRunning=false;clearTimeout(fightwatchdogtimout)}if(document.getElementById("attacker_fight_status")){parseNewFightResults(response)}if(document.evaluate("//a[@class='sexy_button_new short red sexy_attack_new'][contains(string(),'Attack Again')]",document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength>0){hitlist=true}else{if(hitlist){hitlist=false}}if(document.evaluate('//div[@class="message_body clearfix"][@style[contains(string(),"border: 1px solid white;")]]',document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength>0){NYjobon=true}else{if(NYjobon){NYjobon=false}}if((/Do This Job Again/.test(document.getElementById("inner_page").innerHTML))){BKjobon=true}else{if(BKjobon){BKjobon=false}}if(document.evaluate('//div[@class="job_info"][@style[contains(string(),"255, 255, 255")]]',document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength>0&&document.getElementsByClassName("buy_prompt").length==0){ILVjobon=true}else{if(ILVjobon){ILVjobon=false}}if(/jobResult":{"city":7/.test(response)||/jobResult":{"city":8/.test(response)){if(/jobResult":{"city":7/.test(response)){Bjobid=/jobResult":{"city":7,"id":(\d+),/.exec(response)[1]}if(/jobResult":{"city":8/.test(response)){Bjobid=/jobResult":{"city":8,"id":(\d+),/.exec(response)[1]}Bjobon=true}else{if(Bjobon){Bjobon=false}}if(declaring_war==true&&/<!-- Current Page: war_controller ([\d]+) -->/.test(response)){if(/their war status/.test(response)){setTimeout(function(){declare_war(null)},0)}else{if(/too low of a level to declare war/.test(response)){setTimeout(function(){declare_war(null)},0)}else{if(/are already at war/.test(response)){declaring_war=false}else{if(/user not found/i.test(response)||/does not exist/i.test(response)){setTimeout(function(){declare_war(null)},0)}else{setTimeout(function(){var pop_id=/([\d]+)/.exec(document.getElementsByClassName("sexy_button_new short white sexy_call_new")[0].getAttribute("onclick"))[1];MW.Feed(postFeedAndSendCallForHelpNew);$("#declare_war .sexy_call_new").css("display","none");MW.Popup.hideAndRemove(pop_id);declaring_war=false},1500);document.getElementById("EvilOnOff").setAttribute("class","sexy_button_new short black");document.getElementById("EvilOnOff").innerHTML='<span class="sexy_health_new"><span><img src="'+unlocked.images.evil_icon+'""></span></span></a>';evilOn=false}}}}return}});function loadContent(file){var head=document.getElementsByTagName("head").item(0);var scriptTag=document.getElementById("loadScript");if(scriptTag){head.removeChild(scriptTag)}script=document.createElement("script");script.src=file;script.type="text/javascript";script.id="loadScript";head.appendChild(script)}loadContent("http://www.google-analytics.com/ga.js");try{var pageTracker=_gat._getTracker("UA-15652797-2");pageTracker._trackPageview();pageTracker._trackPageview("/script/unlockedpro")}catch(err){}};
injectScript(myscript);
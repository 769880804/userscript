// ==UserScript==
// @name        Ban Them All
// @namespace   Ban Them All
// @description Affiche une liste des personnes à qui vous avez fait une DDB.
// @include     http://www.jeuxvideo.com/cgi-bin/jvforums/avertir_moderateur.cgi*
// @include     http://www.jeuxvideo.com/forums/*
// @version     1.0
// ==/UserScript==

// Colorbox personnalisée si elle n'est pas déjà importée.
if (!$.colorbox) {
	(function(e,t,n){function G(n,r,i){var o=t.createElement(n);return r&&(o.id=s+r),i&&(o.style.cssText=i),e(o)}function Y(e){var t=T.length,n=(U+e)%t;return n<0?t+n:n}function Z(e,t){return Math.round((/%/.test(e)?(t==="x"?tt():nt())/100:1)*parseInt(e,10))}function et(e){return B.photo||/\.(gif|png|jp(e|g|eg)|bmp|ico)((#|\?).*)?$/i.test(e)}function tt(){return n.innerWidth||N.width()}function nt(){return n.innerHeight||N.height()}function rt(){var t,n=e.data(R,i);n==null?(B=e.extend({},r),console&&console.log&&console.log("Error: cboxElement missing settings object")):B=e.extend({},n);for(t in B)e.isFunction(B[t])&&t.slice(0,2)!=="on"&&(B[t]=B[t].call(R));B.rel=B.rel||R.rel||"nofollow",B.href=B.href||e(R).attr("href"),B.title=B.title||R.title,typeof B.href=="string"&&(B.href=e.trim(B.href))}function it(t,n){e.event.trigger(t),n&&n.call(R)}function st(){var e,t=s+"Slideshow_",n="click."+s,r,i,o;B.slideshow&&T[1]?(r=function(){M.text(B.slideshowStop).unbind(n).bind(f,function(){if(B.loop||T[U+1])e=setTimeout(J.next,B.slideshowSpeed)}).bind(a,function(){clearTimeout(e)}).one(n+" "+l,i),g.removeClass(t+"off").addClass(t+"on"),e=setTimeout(J.next,B.slideshowSpeed)},i=function(){clearTimeout(e),M.text(B.slideshowStart).unbind([f,a,l,n].join(" ")).one(n,function(){J.next(),r()}),g.removeClass(t+"on").addClass(t+"off")},B.slideshowAuto?r():i()):g.removeClass(t+"off "+t+"on")}function ot(t){V||(R=t,rt(),T=e(R),U=0,B.rel!=="nofollow"&&(T=e("."+o).filter(function(){var t=e.data(this,i),n;return t&&(n=t.rel||this.rel),n===B.rel}),U=T.index(R),U===-1&&(T=T.add(R),U=T.length-1)),W||(W=X=!0,g.show(),B.returnFocus&&e(R).blur().one(c,function(){e(this).focus()}),m.css({opacity:+B.opacity,cursor:B.overlayClose?"pointer":"auto"}).show(),B.w=Z(B.initialWidth,"x"),B.h=Z(B.initialHeight,"y"),J.position(),d&&N.bind("resize."+v+" scroll."+v,function(){m.css({width:tt(),height:nt(),top:N.scrollTop(),left:N.scrollLeft()})}).trigger("resize."+v),it(u,B.onOpen),H.add(A).hide(),P.html(B.close).show()),J.load(!0))}function ut(){!g&&t.body&&(Q=!1,N=e(n),g=G(K).attr({id:i,"class":p?s+(d?"IE6":"IE"):""}).hide(),m=G(K,"Overlay",d?"position:absolute":"").hide(),L=G(K,"LoadingOverlay").add(G(K,"LoadingGraphic")),y=G(K,"Wrapper"),b=G(K,"Content").append(C=G(K,"LoadedContent","width:0; height:0; overflow:hidden"),A=G(K,"Title"),O=G(K,"Current"),_=G(K,"Next"),D=G(K,"Previous"),M=G(K,"Slideshow").bind(u,st),P=G(K,"Close")),y.append(G(K).append(G(K,"TopLeft"),w=G(K,"TopCenter"),G(K,"TopRight")),G(K,!1,"clear:left").append(E=G(K,"MiddleLeft"),b,S=G(K,"MiddleRight")),G(K,!1,"clear:left").append(G(K,"BottomLeft"),x=G(K,"BottomCenter"),G(K,"BottomRight"))).find("div div").css({"float":"left"}),k=G(K,!1,"position:absolute; width:9999px; visibility:hidden; display:none"),H=_.add(D).add(O).add(M),e(t.body).append(m,g.append(y,k)))}function at(){return g?(Q||(Q=!0,j=w.height()+x.height()+b.outerHeight(!0)-b.height(),F=E.width()+S.width()+b.outerWidth(!0)-b.width(),I=C.outerHeight(!0),q=C.outerWidth(!0),g.css({"padding-bottom":j,"padding-right":F}),_.click(function(){J.next()}),D.click(function(){J.prev()}),P.click(function(){J.close()}),m.click(function(){B.overlayClose&&J.close()}),e(t).bind("keydown."+s,function(e){var t=e.keyCode;W&&B.escKey&&t===27&&(e.preventDefault(),J.close()),W&&B.arrowKey&&T[1]&&(t===37?(e.preventDefault(),D.click()):t===39&&(e.preventDefault(),_.click()))}),e("."+o,t).live("click",function(e){e.which>1||e.shiftKey||e.altKey||e.metaKey||(e.preventDefault(),ot(this))})),!0):!1}var r={transition:"elastic",speed:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,inline:!1,html:!1,iframe:!1,fastIframe:!0,photo:!1,href:!1,title:!1,rel:!1,opacity:.9,preloading:!0,current:"Image {current} sur {total}",previous:"Précédent",next:"Suivant",close:"Fermer",xhrError:"Impossible de charger ce contenu",imgError:"Impossible de charger cette image.",open:!1,returnFocus:!0,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:undefined},i="colorbox",s="cbox",o=s+"Element",u=s+"_open",a=s+"_load",f=s+"_complete",l=s+"_cleanup",c=s+"_closed",h=s+"_purge",p=!e.support.opacity&&!e.support.style,d=p&&!n.XMLHttpRequest,v=s+"_IE6",m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J,K="div",Q;if(e.colorbox)return;e(ut),J=e.fn[i]=e[i]=function(t,n){var s=this;t=t||{},ut();if(at()){if(!s[0]){if(s.selector)return s;s=e("<a/>"),t.open=!0}n&&(t.onComplete=n),s.each(function(){e.data(this,i,e.extend({},e.data(this,i)||r,t))}).addClass(o),(e.isFunction(t.open)&&t.open.call(s)||t.open)&&ot(s[0])}return s},J.position=function(e,t){function f(e){w[0].style.width=x[0].style.width=b[0].style.width=e.style.width,b[0].style.height=E[0].style.height=S[0].style.height=e.style.height}var n,r=0,i=0,o=g.offset(),u,a;N.unbind("resize."+s),g.css({top:-9e4,left:-9e4}),u=N.scrollTop(),a=N.scrollLeft(),B.fixed&&!d?(o.top-=u,o.left-=a,g.css({position:"fixed"})):(r=u,i=a,g.css({position:"absolute"})),B.right!==!1?i+=Math.max(tt()-B.w-q-F-Z(B.right,"x"),0):B.left!==!1?i+=Z(B.left,"x"):i+=Math.round(Math.max(tt()-B.w-q-F,0)/2),B.bottom!==!1?r+=Math.max(nt()-B.h-I-j-Z(B.bottom,"y"),0):B.top!==!1?r+=Z(B.top,"y"):r+=Math.round(Math.max(nt()-B.h-I-j,0)/2),g.css({top:o.top,left:o.left}),e=g.width()===B.w+q&&g.height()===B.h+I?0:e||0,y[0].style.width=y[0].style.height="9999px",n={width:B.w+q,height:B.h+I,top:r,left:i},e===0&&g.css(n),g.dequeue().animate(n,{duration:e,complete:function(){f(this),X=!1,y[0].style.width=B.w+q+F+"px",y[0].style.height=B.h+I+j+"px",B.reposition&&setTimeout(function(){N.bind("resize."+s,J.position)},1),t&&t()},step:function(){f(this)}})},J.resize=function(e){W&&(e=e||{},e.width&&(B.w=Z(e.width,"x")-q-F),e.innerWidth&&(B.w=Z(e.innerWidth,"x")),C.css({width:B.w}),e.height&&(B.h=Z(e.height,"y")-I-j),e.innerHeight&&(B.h=Z(e.innerHeight,"y")),!e.innerHeight&&!e.height&&(C.css({height:"auto"}),B.h=C.height()),C.css({height:B.h}),J.position(B.transition==="none"?0:B.speed))},J.prep=function(t){function o(){return B.w=B.w||C.width(),B.w=B.mw&&B.mw<B.w?B.mw:B.w,B.w}function u(){return B.h=B.h||C.height(),B.h=B.mh&&B.mh<B.h?B.mh:B.h,B.h}if(!W)return;var n,r=B.transition==="none"?0:B.speed;C.remove(),C=G(K,"LoadedContent").append(t),C.hide().appendTo(k.show()).css({width:o(),overflow:B.scrolling?"auto":"hidden"}).css({height:u()}).prependTo(b),k.hide(),e(z).css({"float":"none"}),d&&e("select").not(g.find("select")).filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one(l,function(){this.style.visibility="inherit"}),n=function(){function y(){p&&g[0].style.removeAttribute("filter")}var t,n,o=T.length,u,a="frameBorder",l="allowTransparency",c,d,v,m;if(!W)return;c=function(){clearTimeout($),L.detach().hide(),it(f,B.onComplete)},p&&z&&C.fadeIn(100),A.html(B.title).add(C).show();if(o>1){typeof B.current=="string"&&O.html(B.current.replace("{current}",U+1).replace("{total}",o)).show(),_[B.loop||U<o-1?"show":"hide"]().html(B.next),D[B.loop||U?"show":"hide"]().html(B.previous),B.slideshow&&M.show();if(B.preloading){t=[Y(-1),Y(1)];while(n=T[t.pop()])m=e.data(n,i),m&&m.href?(d=m.href,e.isFunction(d)&&(d=d.call(n))):d=n.href,et(d)&&(v=new Image,v.src=d)}}else H.hide();B.iframe?(u=G("iframe")[0],a in u&&(u[a]=0),l in u&&(u[l]="true"),u.name=s+ +(new Date),B.fastIframe?c():e(u).one("load",c),u.src=B.href,B.scrolling||(u.scrolling="no"),e(u).addClass(s+"Iframe").appendTo(C).one(h,function(){u.src="//about:blank"})):c(),B.transition==="fade"?g.fadeTo(r,1,y):y()},B.transition==="fade"?g.fadeTo(r,0,function(){J.position(0,n)}):J.position(r,n)},J.load=function(t){var n,r,i=J.prep;X=!0,z=!1,R=T[U],t||rt(),it(h),it(a,B.onLoad),B.h=B.height?Z(B.height,"y")-I-j:B.innerHeight&&Z(B.innerHeight,"y"),B.w=B.width?Z(B.width,"x")-q-F:B.innerWidth&&Z(B.innerWidth,"x"),B.mw=B.w,B.mh=B.h,B.maxWidth&&(B.mw=Z(B.maxWidth,"x")-q-F,B.mw=B.w&&B.w<B.mw?B.w:B.mw),B.maxHeight&&(B.mh=Z(B.maxHeight,"y")-I-j,B.mh=B.h&&B.h<B.mh?B.h:B.mh),n=B.href,$=setTimeout(function(){L.show().appendTo(b)},100),B.inline?(G(K).hide().insertBefore(e(n)[0]).one(h,function(){e(this).replaceWith(C.children())}),i(e(n))):B.iframe?i(" "):B.html?i(B.html):et(n)?(e(z=new Image).addClass(s+"Photo").error(function(){B.title=!1,i(G(K,"Error").html(B.imgError))}).load(function(){var e;z.onload=null,B.scalePhotos&&(r=function(){z.height-=z.height*e,z.width-=z.width*e},B.mw&&z.width>B.mw&&(e=(z.width-B.mw)/z.width,r()),B.mh&&z.height>B.mh&&(e=(z.height-B.mh)/z.height,r())),B.h&&(z.style.marginTop=Math.max(B.h-z.height,0)/2+"px"),T[1]&&(B.loop||T[U+1])&&(z.style.cursor="pointer",z.onclick=function(){J.next()}),p&&(z.style.msInterpolationMode="bicubic"),setTimeout(function(){i(z)},1)}),setTimeout(function(){z.src=n},1)):n&&k.load(n,B.data,function(t,n,r){i(n==="error"?G(K,"Error").html(B.xhrError):e(this).contents())})},J.next=function(){!X&&T[1]&&(B.loop||T[U+1])&&(U=Y(1),J.load())},J.prev=function(){!X&&T[1]&&(B.loop||U)&&(U=Y(-1),J.load())},J.close=function(){W&&!V&&(V=!0,W=!1,it(l,B.onCleanup),N.unbind("."+s+" ."+v),m.fadeTo(200,0),g.stop().fadeTo(300,0,function(){g.add(m).css({opacity:1,cursor:"auto"}).hide(),it(h),C.remove(),setTimeout(function(){V=!1,it(c,B.onClosed)},1)}))},J.remove=function(){e([]).add(g).add(m).remove(),g=null,e("."+o).removeData(i).removeClass(o).die()},J.element=function(){return e(R)},J.settings=r})(jQuery,document,window);
	var ColorBox_img_Overlay = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeBAMAAADJHrORAAAAMFBMVEX///8HBwcICAgUFBQXFxcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABuanbkAAAAQUlEQVR4nOzOoQ0AIBDF0K5QNiC3wYUN2H8nJPkai6l5prSOdcPU2jckN8mTZEmWZEmW5EFy8f+e/g4AAAD//wMAKnM4yCLdBHkAAAAASUVORK5CYII="
	var ColorBox_img_Controls = "data:image/png;base64,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"
	var ColorBox_img_Border = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAyAQMAAACnNSPJAAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlOArV5bRgAAABhJREFUeF6VwQENAAAAgjCjG50GbPwzDwUmggsB4+yamQAAAABJRU5ErkJggg=="
	var ColorBox_img_Loading = "data:image/png;base64,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"
	var my_css = document.createElement('style')
	my_css.innerHTML = "#colorbox, #cboxOverlay, #cboxWrapper{position:absolute; top:0; left:0; z-index:2147483647; overflow:hidden;}#cboxOverlay{position:fixed; width:100%; height:100%;}#cboxMiddleLeft, #cboxBottomLeft{clear:left;}#cboxContent{position:relative;}#cboxLoadedContent{overflow:auto;}#cboxTitle{margin:0;}#cboxLoadingOverlay, #cboxLoadingGraphic{position:absolute; top:0; left:0; width:100%; height:100%;}#cboxPrevious, #cboxNext, #cboxClose, #cboxSlideshow{cursor:pointer;}.cboxPhoto{float:left; margin:auto; border:0; display:block; max-width:none;}.cboxIframe{width:100%; height:100%; display:block; border:0;}#colorbox, #cboxContent, #cboxLoadedContent{box-sizing:content-box;}/*User Style:Change the following styles to modify the appearance of ColorBox. They areordered & tabbed in a way that represents the nesting of the generated HTML.*/#cboxOverlay{background:url(" + ColorBox_img_Overlay + ") repeat 0 0;}#colorbox{z-index:2147483648}#cboxTopLeft{width:21px; height:21px; background:url(" + ColorBox_img_Controls + ") no-repeat -101px 0;}#cboxTopRight{width:21px; height:21px; background:url(" + ColorBox_img_Controls + ") no-repeat -130px 0;}#cboxBottomLeft{width:21px; height:21px; background:url(" + ColorBox_img_Controls + ") no-repeat -101px -29px;}#cboxBottomRight{width:21px; height:21px; background:url(" + ColorBox_img_Controls + ") no-repeat -130px -29px;}#cboxMiddleLeft{width:21px; background:url(" + ColorBox_img_Controls + ") left top repeat-y;}#cboxMiddleRight{width:21px; background:url(" + ColorBox_img_Controls + ") right top repeat-y;}#cboxTopCenter{height:21px; background:url(" + ColorBox_img_Border + ") 0 0 repeat-x;}#cboxBottomCenter{height:21px; background:url(" + ColorBox_img_Border + ") 0 -29px repeat-x;}#cboxContent{background:#fff; overflow:hidden;}.cboxIframe{background:#fff;}#cboxError{padding:50px; border:1px solid #ccc;}#cboxLoadedContent{margin-bottom:28px;}#cboxTitle{position:absolute; bottom:4px; left:0; text-align:center; width:100%; color:#949494;}#cboxCurrent{position:absolute; bottom:4px; left:58px; color:#949494;}#cboxSlideshow{position:absolute; bottom:4px; right:30px; color:#0092ef;}#cboxPrevious{position:absolute; bottom:0; left:0; background:url(" + ColorBox_img_Controls + ") no-repeat -75px 0; width:25px; height:25px; text-indent:-9999px;}#cboxPrevious:hover{background-position:-75px -25px;}#cboxNext{position:absolute; bottom:0; left:27px; background:url(" + ColorBox_img_Controls + ") no-repeat -50px 0; width:25px; height:25px; text-indent:-9999px;}#cboxNext:hover{background-position:-50px -25px;}#cboxLoadingGraphic{background:url(" + ColorBox_img_Loading + ") no-repeat center center;}#cboxClose{position:absolute; bottom:0; right:0; background:url(" + ColorBox_img_Controls + ") no-repeat -25px 0; width:25px; height:25px; text-indent:-9999px;}#cboxClose:hover{background-position:-25px -25px;}"
	document.getElementsByTagName('head')[0].appendChild(my_css)
}

// Réupérer les données de la DDB et les enregistrer dans le stockage local.
if (document.URL.indexOf("www.jeuxvideo.com/cgi-bin/jvforums/avertir_moderateur.cgi") >= 0) {
	var url = location.href;
	var forum = url.split("forum=")[1].split("&")[0];
	var topic = url.split("topic=")[1].split("&")[0];
	var numero = url.split("numero=")[1].split("&")[0];
	var page = url.split("page=")[1].split("&")[0];
	var ladate = new Date()
	var jour = ladate.getDate();
	var jour = jour + "";
	if (jour.length == 1) {
		jour = "0" + jour;
	}
	var mois = ladate.getMonth() + 1;
	var mois = mois + ""
	if (mois.length == 1) {
		mois = "0" + mois;
	}
	var date = jour + "/" + mois + "/" + ladate.getFullYear();
	var lien_permanent = "http://www.jeuxvideo.com/forums/1-" + forum + "-" + topic + "-" + page + "-0-1-0-0.htm#message_" + numero;
	var papapseudo = localStorage['bta_UniquePseudo'] + "";
	if ((document.getElementsByTagName("html")[0].innerHTML.match("Votre demande a")) && (papapseudo.split(',').length > 1)) {
		var bta_pseudo_Liste = localStorage["bta_pseudo"] + papapseudo;
		var bta_permanent_Liste = localStorage["bta_permanent"] + "," + lien_permanent;
		var bta_date_Liste = localStorage["bta_date"] + "," + date;
		localStorage["bta_pseudo"] = bta_pseudo_Liste;
		localStorage["bta_permanent"] = bta_permanent_Liste;
		localStorage["bta_date"] = bta_date_Liste;
	} else {
		localStorage.removeItem("bta_UniquePseudo");
		$.get(lien_permanent, function (data) {
				var unique_pseudo = data.split('<div id="message_' + numero)[1].split("<strong")[1].split(">")[1].split("</strong")[0];
				localStorage['bta_UniquePseudo'] = "," + unique_pseudo;
			});

	}
}

// Vérifier le statut de tous les pseudos dans le tableau.
function check_banni() {
	var cdv_psd = this.getElementsByTagName("a")[0].href;
	var lol = this;
	$.get(cdv_psd, function (data) {
			if (data.indexOf('<p class="banni">Le pseudo est banni.</p>') >= 0) {
				lol.getElementsByTagName("td")[2].innerHTML = "<p style='color:red'>Banni</p>";
			} else if (data.indexOf('<p class="banni">Le pseudo est banni temporairement.</p>') >= 0) {
				lol.getElementsByTagName("td")[2].innerHTML = "<p style='color:orange'>Banni</p>";
			} else {
				lol.getElementsByTagName("td")[2].innerHTML = "<p style='color:green'>Non banni</p>";
			}
		});
}

// Construire le tableau des DDB puis l'afficher.
function afficher_ddb() {
	var debut_tableau = "<center><table border='1' style='text-align: center'><thead><tr><th width='13'></th><th>Pseudo</th><th width='60'>Statut</th><th>Date de la DDB</th><th>Message</th><th></th width='13'></tr></thead><tbody id='bta_my_tab'>";
	var fin_tableau = "</tbody></table><br><INPUT type='button' value='Tout supprimer' id='LeBouton'></center>";
	var bta_pseudo_Liste22 = localStorage["bta_pseudo"] + "";
	var bta_permanent_Liste22 = localStorage["bta_permanent"] + "";
	var bta_date_Liste22 = localStorage["bta_date"] + "";
	var bta_pseudo_Liste2 = bta_pseudo_Liste22.split(",");
	var bta_permanent_Liste2 = bta_permanent_Liste22.split(",");
	var bta_date_Liste2 = bta_date_Liste22.split(",");
	if (bta_pseudo_Liste2.length > 1) {
		i = 0;
		while (i < bta_pseudo_Liste2.length - 1) {
			i++;
			pseudo_ban = bta_pseudo_Liste2[i];
			permanent_ban = bta_permanent_Liste2[i];
			date_ban = bta_date_Liste2[i];
			fonction = "'var taille = document.getElementById(\"bta_my_tab\").querySelectorAll(\"tr\").length; if (taille > 1) { var $tr = $(this).closest(\"tr\");var myRow = $tr.index();document.getElementById(\"bta_my_tab\").deleteRow(myRow);var bta_pseudo_Liste222 = localStorage[\"bta_pseudo\"] + \"\";var bta_permanent_Liste222 = localStorage[\"bta_permanent\"] + \"\"; var bta_date_Liste222 = localStorage[\"bta_date\"] + \"\"; var bta_pseudo_Liste3 = bta_pseudo_Liste222.split(\",\"); var bta_permanent_Liste3 = bta_permanent_Liste222.split(\",\"); var bta_date_Liste3 = bta_date_Liste222.split(\",\"); bta_pseudo_Liste3.splice(myRow+1,1); bta_permanent_Liste3.splice(myRow+1,1); bta_date_Liste3.splice(myRow+1,1); var bta_psd = \"undefined\"; var bta_perm = \"undefined\"; var bta_date = \"undefined\"; var i = 1; while (i < bta_pseudo_Liste3.length) { bta_psd = bta_psd + \",\" + bta_pseudo_Liste3[i];i++;}; var j = 1; while (j < bta_permanent_Liste3.length) { bta_perm = bta_perm + \",\" + bta_permanent_Liste3[j]; j++; }; var k = 1; while (k < bta_date_Liste3.length) { bta_date = bta_date + \",\" + bta_date_Liste3[k];k++;};localStorage[\"bta_pseudo\"] = bta_psd;localStorage[\"bta_permanent\"] = bta_perm;localStorage[\"bta_date\"] = bta_date;} else {localStorage.removeItem(\"bta_pseudo\");localStorage.removeItem(\"bta_permanent\");localStorage.removeItem(\"bta_date\");$.colorbox(\{html:\"<br><center>Aucune DDB effectuée.<br></center>\",width:\"33%\"\});}'"
			debut_tableau = debut_tableau + "<tr><td width='13' height='15'><a href='http://www.jeuxvideo.com/profil/" + pseudo_ban.toLowerCase() + ".html'><img src='http://image.jeuxvideo.com/pics/forums/bt_forum_profil.gif' /></a></td><td>" + pseudo_ban + "</td><td>?</td><td>" + date_ban + "</td><td><a href=" + permanent_ban + " target='_blank'>Lien</a></td><td width='13' height='15'><img onclick=" + fonction + " src='http://image.noelshack.com/fichiers/2013/21/1369355231-deleteicon-thumb-0-48.jpg' style='cursor:pointer;' /></td></tr>";
		}
		tableau = debut_tableau + fin_tableau;
	} else {
		tableau = "<br><center>Aucune DDB effectuée.</center><br>"
	}
	$.colorbox({
			html: tableau,
			maxHeight: '80%'
		});
	$.each($("#bta_my_tab > tr"), check_banni);
	
	document.getElementById("LeBouton").addEventListener("click", tout_sup, false);
}

// Supprimer toutes les données liées à Ban Them All présentes dans le stockage local, et donc purger la liste des DDB.
function tout_sup() {
	if (confirm("Êtes-vous certain de vouloir tout supprimer ?")) {
		localStorage.removeItem("bta_pseudo");
		localStorage.removeItem("bta_permanent");
		localStorage.removeItem("bta_date");
		localStorage.removeItem("bta_UniquePseudo");
		afficher_ddb();
	}
}

// Afficher le bouton "Mes DDB" dans l'entête des forums.
var divConnect = document.getElementById("connexion");
var divAfter = document.getElementById("compte");
var divBanThemAll = document.createElement("div");
divBanThemAll.innerHTML = '<a href="#" id="bta_entete">Mes DDB</a>';
divConnect.insertBefore(divBanThemAll, divAfter);
divBanThemAll.addEventListener("click", afficher_ddb, false);
// ==UserScript==
// @name           Dialog To Normal Window
// @namespace      JeffersonScher
// @description    Adds button to redisplay dialog in a normal window. v0.1.3 2011-04-24
// @version        0.1.3
// @include        *
// @license        CC BY http://creativecommons.org/licenses/by/3.0/
// @require        http://www.jeffersonscher.com/gm/AnotherAutoUpdater.php?id=101728&days=5&var=DTNW&show
// ==/UserScript==
w = window;
if (w.location.href == w.top.location.href){ // Try to exclude iframes
  if (!w.menubar.visible && !w.personalbar.visible){
    GM_addStyle(".dtnw{position:fixed;top:2px;right:2px;} @media print{.dtnw{display:none;}}");
    b = document.createElement("button");
    b.appendChild(document.createTextNode("Re-pop"));
    b.className="dtnw";
    w.document.body.appendChild(b);
    b.addEventListener("click", rePop, false);
  }
}
function rePop(e){
  if (confirm("Display page in normal window and close dialog? Probably not compatible with dialogs generated by form submissions.")){
    n = window.open(w.location.href,"_blank");
    n.innerWidth = w.innerWidth;
    n.innerHeight = w.innerHeight;
    w.close();
  }
}
// ==UserScript==
// @name           eRepublik latvian translation
// @description    eRepublik latvian translation 
// @include		http://www.erepublik.com/*
// ==/UserScript== 
 
var strings = { 
//menu 
  "Home" : "Mājas", 
  "Donate" : "Ziedo", 
  "May" : "Maijs", 
  "June" : "Jūnijs", 
  "July" : "Jūlijs", 
  "Day" : "Diena", 
  "of the New World" : "jaunajā pasaulē ", 
  "Rank"   : "Ranks", 
  "Company" : "Kompānija", 
  "Profile":"Profils",  
  "Party" : "Partija",  
  "Newspaper" :"Laikraksts", 
  "Army" : "Armija", 
  "Country administration" : "Valsts pārvalde", 
        "Organizations" : "Organizācija", 
  "Market" : "Tirgus", 
  "Monetary market" : "Naudas tirgus", 
  "Job market" : "Darba tirgus", 
        "Companies for sale" : "Kompānijas pārdošanai", 
        "Get gold &amp; extras" : "Iegūsti zeltu un bonusus", 
  "Rankings" : "Vietas", 
  "Social stats" : "Sociālie rādītāji", 
  "Economic stats" : "Ekanomiskie rādītāji", 
  "Political stats" : "Politiskie rādītāji", 
  "Military stats" : "Militārie rādītāji", 
  "Tools" : "Rīki", 
  "Forum" : "Forums", 
  "News" : "Ziņas", 
  "Invite friends" : "Ielūdz draugu", 
  "eRepublik Shop" : "eRepublik veikals", 
  "Career path" : "Karjeras ceļš", 
  "Ok, thanks, next tip" : "Paldies, nākamo padomu", 
  "I have nothing more to say at the moment" : "Man pašlaik nav ko teikt", 
  "Select" : "Izvēlēties", 
        "Latest events" : "Pēdējie pasākumi", 
   "News" : "Ziņas", 
        "More events" : "Vairāk, pasākumi", 
        "More news" : "Vairāk Ziņas", 
   "more news" : "vairāk ziņas", 
  "Marketplace" : "Tirgus", 
  "Wars" : "Kari", 
        "My Places" : "Manas Vietas", 
        "Info" : "Informācija", 
        "Community" : "Kopienas", 
        "Day of the new world" : "Jaunās pasaules diena", 
        "National" : "Nacionālas", 
        "International" : "Internacionālas", 
   "Latest Events" : "Pēdējie pasākumi", 
        "Shouts" : "ātrās ziņas", 
        "Shout something" : "Paziņo kaut ko", 
        "Shout" : "Paziņo", 
        "Official" : "Officiāls", 
        "Everyone" : "Visi", 
        "Latest" : "Pēdējie", 
        "Search citizen" : "Meklē iedzīvotāju", 
  "Shout" : "Paziņo", 
  "Latest" : "Pēdējie", 
  "one minute ago" : "pirms minūtes", 
  "for 10 shouts/day and more" : "10 paziņojumi / dienā un vairāk", 
  "No more shouts for today" : "šodien ir izsmelts paziņojumu limits", 
  "Top Rated" : "Labākie", 
 
//country page 
  "On the Map" : "Uz kartes", 
  "Total citizens" : "Kopējā Populācija", 
  "New citizens today" : "Jauni iedzīvotāji šodien", 
  "Average citizen level" : "Vidējais iedzīvotāju limits", 
  "Online now": "Pašlaik tiešsaitē", 
  "Citizens" : "Iedzīvotāji", 
  "Who" : "Kas", 
  "details" : "detaļas", 
  "Society" : "Sabiedrība", 
  "Economy" : "Ekanomija", 
  "Politics" : "Politika", 
  "Military" : "Armija", 
  "Administration" : "Adminstrācija", 
  
//countries 
  "Argentina" : "Argentīna", 
  "Australia" : "Austrālija", 
  "Austria" : "Austrija", 
  "Bosnia and Herzegovina" : "Bosnija un Hercegovina", 
  "Brazil" : "Brazīlija", 
  "Bulgaria" : "Bulgārija", 
  "China" : "Ķīna", 
  "Croatia" : "Horvātija", 
  "Canada" : "Kanāda", 
  "Czech Republic" : "Čehija", 
  "Denmark" : "Dānija", 
  "Estonia" : "Igaunija", 
  "Finland" : "Somija", 
  "France" : "Francija", 
  "Germany" : "Vācija", 
  "Greece" : "Grieķija", 
  "Hungary" : "Ungārija", 
  "Indonesia" : "Indonēzija", 
  "Ireland" : "Īrija", 
  "Israel" : "Izrēla", 
  "Italy" : "Itālija", 
  "Iran" : "Irāna", 
  "Japan" : "Japāna", 
  "Latvia" : "Latvija", 
  "Lithuania" : "Lietuva", 
  "Malaysia" : "Malaizija", 
  "Mexico" : "Meksika", 
  "Moldavia" : "Moldāvija", 
  "Netherlands" : "Nīderlande", 
  "Norway" : "Norvēģija", 
  "Pakistan" : "Pakistāna", 
  "Philippines" : "Filipīnas", 
  "Poland" : "Polija", 
  "Portugal" : "Portugāle", 
  "Romania" : "Romānija", 
  "Serbia" : "Serbija", 
  "Singapore" : "Singapūra", 
  "South Africa" : "Dienvidāfrika", 
  "South Korea" : "Dienvidkoreja", 
  "Slovakia" : "Slovākija", 
  "Slovenia" : "Slovēnija", 
  "Switzerland" : "šveice", 
  "Spain" : "Spānijaa", 
  "Sweden" : "Zviedrija", 
  "Russia" : "Krievija", 
  "Thailand" : "Taizeme", 
  "United Kingdom" : "Lielbritānija", 
  "Ukraine" : "Ukraina", 
  "USA" : "ASV", 
  "Turkey" : "Turcija", 
  "World" : "Pasaule", 
// economy 
  "GOLD" : "ZELTS", 
  "Gold" : "Zelts", 
  "Treasury" : "Bagātība", 
  "All accounts" : "Visi konti", 
  "Country trading embargoes" : "Valsts tirdzniecības embargo", 
  "Taxes" : "Nodokļi", 
  "food" : "ēdiens", 
  "gift" : "dāvana", 
  "weapon" : "ierocis", 
  "moving tickets" : "ceļojuma biļetes", 
  "grain" : "graudi", 
  "diamonds" : "dimanti", 
  "iron" : "dzelzs", 
  "oil"  : "nafta", 
  "wood" : "koks", 
  "house" : "māja ", 
  "hospital" : "slimnīca ", 
  "defense system" : "aizsardzības sistēma",
  "Defense system" : "Aizsardzības sistēma",
 
 
  "Salary" : "Alga ", 
  "Minimum" : " Minimālā ", 
  "Average" : " Vidējā ", 
 
  "Gross domestic product (GDP)" : "Iekšzemes kopprodukts  (IKP) ", 
  "Monthly exports" : " Mēneša eksports ", 
  "Monthly imports" : " Mēneša imports ", 
  "Inflation" : "Inflācija ", 
// company 
  "Office" : " Offiss ", 
  "You have already worked today." : " Jūs, jau šodien strādājāt ", 
  "Come back tomorrow." : " Nāc atpakaļ rītdien ", 
  "Resign" : " Aizej no darba ", 
  "Employees" : " Darbinieki" , 
  "Raw materials" : " Materiāli ", 
  "Show all employees" : " Parādīt visus darbiniekus" , 
  "Show all donations" : " Parādīt visus ziedojumus ", 
  "Go to marketplace" :  "Iet uz tirgu ", 
  "Products" : " Produkti ", 
  "Jobs available in this company" : " Pieejamie darbi", 
  "You do not have any active job offers" : " Nav darba piedāvājumu ", 
  "The company offers no products in this market"  : "Kompānijai nav piedāvājumu šajā tirgū", 
  "Amount" : " Daudzums", 
  "Price" : " Cena ", 
  "Price with taxes" : " Cena ar nodokļiem ", 
  "Company Page" : " Kompānijas lapa ", 
  "Today" : "\'d0odien" , 
  "Yesterday" : " Vakar ", 
  "All employees" : " Visi darbinieki" , 
  "Skill" : " Prasme ", 
  "Daily salary" : " Dienas alga ", 
  "Last presence" : " Pēdējā parādīšanās ", 
  "Minimum country wage" : " Minimālā darba alga ", 
 
  "Grain" : " Graudi ", 
  "Food" : "ēdiens ", 
  "Gift" : " Dāvana ", 
  "Weapon" : " Ierocis ", 
  "Moving Tickets" : " Biļetes ", 
  "Diamonds" : " Dimanti ", 
  "Iron" : " Dzelzs ", 
  "Oil"  : " Nafta", 
  "Wood" : " Koks", 
  "House" : " Māja", 
  "Hospital" : " Slimnīca", 
  "Defense System" :  "Aizsardzības sistēma", 
//market 
  "Quality Level" : " Kvalitātes līmenis", 
  "All levels" : " Visi līmeņi", 
  "Level 1" : " 1 Līmenis", 
  "Level 2" : " 2 Līmenis", 
  "Level 3" : " 3 Līmenis", 
  "Level 4" : " 4 Līmenis", 
  "Level 5" : " 5 Līmenis ",
 
  "Provider" : " Piegādātājs", 
  "Quality" : " Kvalitāte", 
  "Stock" : " Daudzums", 
  "Buy" : " Pirkt", 
  "Market" : " Tirgus", 
 
  "Market offers" : " Tirgus piedāvājums", 
  "Amount" : " daudzums", 
  "Price" : " Cena", 
  "Next" : " Nākamais:, 
  "Prev" : " Iepriekšējais", 
  "No products in this market" : " Tirgū nav produktu", 
  "Go to marketplace" : " Iet uz tirgu", 
  "Jobs available in this company" : " Darba piedāvājumi šajā kompānijā", 
  "You don't have any active job offers" : " Tev nav darba piedāvājumu", 
  "You didn't specify the amount of products you wish to buy" :  
   " Tu nenorādiji produktu daudzumu", 
  "You cannot trade with this country as you are at war with it" : 
   " Nevari tirgoties ar šo valsti, jo tā ir karā ar tavu valsti", 
 
// region 
  "Citizens" : " Iedzīvotāji", 
  "Country - Society" : " Valsts - Sabiedrība", 
        "Heal" : " Veseļojies ", 
  "Constructions": " Būvniecība ", 
  "Population": " Tauta ", 
  "Productivity" : " Produktivitāte ", 
  "Resistance War" :  "Pretestības karš ", 
  "Resistance War Active" : " Pretestības karš aktīvs", 
  "You can't start a resistance war in this region because it already belongs to its original owner country" : " Nevar uzsākt pretestības karu šajā reģionā, jo reģions pieder tā oriģinālajai valstij ", 
  "Medium" :  "Vidējs ", 
  "High": " Augsts ", 
  "Neighbors" : " Kaimiņi ", 
//marketplace 
  "Please select an Industry to see the marketplace offers" : 
   " Lūdzu, izvēlieties, Industriju, kuru apskatīt ", 
  "Skill Level" : " Prasmes līmenis ", 
  "All skills" : " Visas prasmes ", 
  "All" : " Visas ", 
//politics 
  "Country Administration" : " Valsts pārvalde ", 
  "Accepted" : " Pieņemts ", 
  "Rejected" : " Noraidīts ", 
  "Pending" : " Apstrādā ", 
  "Congress" : " Parlaments ", 
  "Issue Money" : " Ierosina naudu ", 
  "Law proposals" : " Likuma priekšlikums ", 
  "Minimum Wage" :  "Minimālā alga ", 
  "Mutual Protection Pact" : " Mutiskās aizsardzības pakts ", 
  "Peace Proposal" : " Miera piedāvājums ", 
  "President" : " Prezidents ", 
  "Yes" : " Jā", 
  "No" : " Nē ", 
  "Show all law proposals" : " Parādīt visus likumu priekšlikumus ", 
  "The law voting process takes 24 hours." : " Likumu pieņemšana ilgst 24 stundas. ", 
  "Only congress members and country presidents have the right to vote." : " Tikai parlamenta locekļi un valsts prezidents var balsot ", 
  "You are not a president or a congress member in this country." : " Tu neesi prezidents vai kongresa loceklis .", 
//wars 
  "no allies" : " nav sabiedroto ", 
  "All wars" : " Visi kari ", 
  "All resistance wars" : " Visi pretestības kari ", 
  "All Alliances" : " Visas aliances ", 
  "Alliances" : " Aliances ", 
  "Military force" : " Militārais spēks ", 
  "Average strength" : " Vidējais spēks ", 
  "War > Battlefield" : " Karš > Karalauks", 
  "Basic damage" : " Parastais uzbrukums ", 
  "Weapon quality" : " Ieroču kvalitāte ", 
  "Wellness" : " Izturība ", 
  "Rank" : " Ranks ", 
  "Total damage" : " Kopējais uzbrukums ", 
  
//army 
  "You have trained today. You can train again tomorrow." :  "Tu 'sodien jau trenējies .  Nāc atpakaļ rīt. ", 
  "Force" : " Spēks ", 
  "Military rank" : " Militārais ranks ", 
  "Military achievements" : " Militārie panākumi ", 
  "Active wars list" : " Aktīvo karu saraksts ", 
  "Sergeant" : " Seržants ", 
  "Corporal" : " Kaprālis ", 
  "Private" : " Ierindnieks ", 
  "Show active wars" : " Parādīt aktīvos karus ", 
  "Start a Resistance War" : " Sākt pretestības karu ", 
  "You do not have the necessary amount of Gold to start a resistance war." : " Tev nav pietiekams daudzums zelta, lai sāktu pretestības karu ", 
  "You cannot join this fight because your country is not involved in the war" : " Tu nevari pievienoties šai cīņai, jo tava valsts nav iesaistīta karā .", 
  "There are no resistance wars in this country." : "\'d0ajā valstī nav pretestības kari .", 
  "until the region can be occupied or secured" : " līdz reģions var tikt okupēts vai aizsargāts ", 
  "Attackable on President's decision" : " Var uzbrukta uz Prezidenta izvēles", 
  "Defense Points" : " Aizsardzības punkti ", 
  "Go to Battlefield" : " Doties uz karalauku ", 
  "see finished battles" : " skatīt pabeigtās cīņas ", 
  "Wars list" :  "Karu saraksts ", 
  "War" : " Karš ", 
  "Battle history" : " Cīņu vēsture ", 
  "Fight" : " Cīņa ", 
  "Hero" : " Varonis ", 
  "Started by" : " Sāka ", 
  "started by" : " sāka ", 
  "Fight for resistance" : " Cīnies par pretestību ", 
  "Fight for defenders" : " Cīnies par aizsargātājiem ", 
//party 
  "Get more" : " Iegūsti  vairāk" , 
  "Country presidency" : " Valsts pārvaldība ", 
  "Winner" : " Uzvarētājs ", 
  "Next election in" : " Nākamās vēlēšanas ", 
  "Next elections in" : " Nākamās vēlēšanas ", 
  "No candidate proposed" : " Nav pieteikušos kandidātu ", 
  "candidates" : " kandidāti ", 
  "Candidate" : " Kandidāti ", 
  "days" : " dienas", 
  "GOLD" : " ZELTS ", 
  "Show results" : " Parādīt  ", 
  "Show candidate list" : " Parādīt kandidātu sarakstu" , 
  "Show candidates list" : " Parādīt kandidātu sarakstu ", 
  "You are not a member of a party" : " Tu neesi partijas Biedrs ", 
  "Join a party" : " Pievienojies partijai ", 
  "Create new" : " Uztaisi jaunu ", 
  "congress members" : " parlamenta lockļi ", 
  "of Congress" : " parlamenta ", 
  "Show proposed members of congress" : " Parādīt izvirzītos parlamenta locekļus ", 
  "Run for congress" : " Piedalies vēlēšanas ", 
  "Join" : " Pievienojies ", 
  "See all members" : " Apskatīt visus locekļus ", 
  "Donate Gold" : " Ziedot zeltu ", 
  "Members"  : " Locekļi ", 
  "Orientation" : " Orientācija ", 
  "Show all members" : " Parādīt visus locekļus ", 
 
  "Center" : " Centrs", 
  "Anarchist" : " Anarhists ", 
  "Accounts" : " Konti ", 
  "Elections" : " Vēlēšanas ", 
  "Election results" : " Vēlēšanu rezultāti ", 
  "Next elections" : " Nākamās vēlēšanas ", 
 
  "Country Presidency" : " Valsts prezidentūra" , 
  "Party presidency" : " Partijas prezidentūra ", 
  "Party President" : " Partijas prezidents ", 
  "See results" : " Redzēt rezultus ", 
  "Expires tomorrow" : " Rīt beidzas ", 
 
//articles 
  "Report abuse" : " Ziņot par pārkāpumu", 
  "today" : "šodien" , 
  "yesterday" : " vakar ", 
  "one hour ago" : " pirms stundas ", 
  "Unsubscribe" : " atsakies ", 
  "Subscribe" : " piesakies ", 
  "Article RSS" : " Raksts R SS", 
  "Your comment" : " Tavs komentārs ", 
  "View all comments" : " Skatīt visus komentārus ", 
  "Subscribe to comments" : " Piesakies visiem komentāriem ", 
  "Unsubscribe to comments" : " Atsakies no visiem komentāriem ", 
  "Post a comment" : " Komentē ", 
  "Trackbacks" : " Trackback ", 
//news 
  "You do not have a newspaper" : " Tev nav laikraksta", 
  "A newspaper is an efficient way to communicate your news to the eRepublik world. Read more on the eRepublik Wiki. Create your own newspaper." : " Laikraksts ir efektīvs veids, kā kaut ko paziņot eRepublik pasaulei. Lasi vairārk iekš eRepublik Wiki. Izveido savu avīzi .", 
//profiles 
  "Friends" : " Draugi ", 
  "Fights" : " Cīņas ", 
  "National Rank" : " Nacionālais ranks ", 
  "Forfeit Points" : " Soda punkti ", 
  "ShareThis" : " Padalies ", 
  "Shout something:" : " Paziņo kaut ko ", 
  "Assets" : "īpašumi ", 
  "Press director" : " Preses direktors" , 
  "Inventory" : " Inventārs ", 
  "Get Gold" : " Iegūsti Zeltu ", 
  "Career" : " Karjera ", 
  "Bio" : "Biog rāfija ", 
  "Employee" : " Darbinieki", 
  "No political activity" : " Nav politiskās aktivitātes" , 
  "Wellness" : " Izturība ", 
  "Level" : " Līmenis ", 
  "Strength" : " Spēks ", 
  "Experience" : " Pieredze ", 
  "Skills:" : " Prasmes ", 
  "Land" : " Zemes ", 
  "Manufacturing" : " Manufaktūra ", 
  "Erepublik Age" : " eRepublik vecums ", 
  "Get Extra Storage" : " Iegūsti papildus glabātavu ", 
  "Party Member" : " Partijas biedrs ", 
  "No activity" : " Nav aktivitāšu ", 
  "Total damage:" : " Kopējais trāpijums :", 
  "Hard Worker" : " Cītīgais strādnieks", 
  "Work for 30 days in a row" : " Strādā 30 dienas pēc kārtas ", 
  "Congress Member" : " Parlamenta loceklis ", 
  "Country President" : " Valsts Prezidents ", 
  "Win the Presidential elections" : " Uzvari prezidenta vēlēšanās ", 
  "Media Mogul" : " Mēdiju Moguls ", 
  "Reach 1000 subscribers to your newspaper" : " Iegūsti 1000 abonētājus savam laikrakstam ", 
  "Battle Hero" : " Cīņas varonis ", 
  "Reach the highest total damage in one battle" : " Iegūsti lielāko kopējo uzbrukuma stiprumu vienā cīņā ", 
  "Resistance Hero" : " Pretestības varonis ", 
  "Start a resistance war and liberate that region" : " Sāc pretestības karu un pārņem reģionu ", 
  "Super Soldier" : " Super Kareivis ", 
  "Advanced 5 strength levels" : " Attīsti 5 spēka līmeņus ", 
  "Society Builder" :  "Tautas būvētājs ", 
  "Invite 10 people to eRepublik and  H elp them reach level 6" :  "Ielūdz 10 cilvēkus uz eRepublik un palīdzi tikt tiem līdz 6 līmenim ", 
  "Check your unlocked features" : " Pārbaudi atslēgtās funkcijas ", 
  "Achievements" : " Panākumi ", 
  "Edit profile" : " Rediģē profilu ", 
  "Edit Profile" : " Rediģē Profilu ", 
  "Change residence" : " Maini atrašanās vietu ", 
  "Donations list" : " Ziedojumu saraksts ", 
  
  "Your email here" : " Tavs e-pasts ", 
  "Your birthday" : " Tava dzimšanas diena ", 
  "Citizen Avatar" : " Pilsoņa bilde ", 
  "Change password" : " Nomaini paroli ", 
 
 
  "Worked 30 days in a row" : " Nostrādājis 30 dienas pēc kārtas ", 
  "Win the Congress elections": " Uzvarējis parlamenta vēlēšanās ", 
//fight 
  "Back to battlefield" : " Atpakaļ uz kaujaslauku ", 
  "Fight Again" : " Cīnies atkal ", 
  "Fight bonus" : " Cīņas bonuss ", 
//organizations 
  "In order to log in as an organization you have to log out from your citizen account and log in again with your organization username and password." : " Lai, ieietu spēlē, kā organizācija jums ir jāiziet no pilsoņa konta, un pieslēgties ar organizācijas lietotājvārdu un paroli ", 
  "My Organizations" : " Mana Organizācija ", 
  "Logout" : " Iziet ", 
  "Organizations created by you:" : " Tavas organizācijas :", 
  "You have not created any organization yet." : " Tev vēl nav organizācijas ", 
//career-path 
  "General manager" : " Galvenais menedžeris ", 
  "Hard worker" : " Cītīgs strādnieks", 
//ranking 
  "No." : "Nē.", 
  "Hard worker" : " Cītīgs strādnieks", 
//messages 
        "Inbox" : " Iesūtne ", 
  "Sent" : " Aizūtīt ", 
  "Alerts" : " Paziņoumi ", 
  "Subscriptions" : " Pieraksti ", 
  "new article" : " jauns raksts ", 
  "Write article" : " Uzraksti rakstu ", 
  "Edit newspaper details" : " Izmaini laikraksta detaļas ", 
  "Edit" : " Izmaini ", 
  "Delete" : " Izdzēst ", 
  "Read Message" : " Izlasi ziņas ", 
  "Reply" : " Atbildi ", 
  "From" : " No ", 
  "Back" : " Atpakaļ ", 
  "Picture" : " Bilde ", 
  "only JPG files allowed" : " tikai JPG faili ", 
  "Publish" : " Publicē ", 
//flash menu 
  "My places > Army" : " Armija ", 
  "My places > Newspaper" : " Laikraksts ", 
  "My places > Organizations" : "O rganizācijas ", 
 
//menu  
  "Find out more" :  "Uzzini vairāk" , 
  "logout" : " Atsēdzies " 
}; 
 
trim = function (str) { 
    return str!==null ? str.replace(/^\\s*/, "").replace(/\\s*$/, "") : null; 
}; 
 
var regexps = {}; 
regexps["^(\\d*) allies(\\s*)$"] = "$1  sabiedrotie\lang1033\f0\\\\i"; 
regexps["^Active wars in (.*)$"] = " Aktīvi kari  $1"; 
regexps["(\\s*)Expires in (\\d*) days"] = " Beidzās  $2  dienās "; 
regexps["^(\\d*) comments$"] = "$1  komentāri "; 
regexps["^(\\d*) hours ago$"] = "$1  stundas atpakaļ "; 
regexps["^(\\d*) minutes ago$"] = "$1  minūtes atpakaļ "; 
regexps["^(\\d*) days ago$"] = "$1  dienas atpakaļ "; 
regexps["^Regions \\((\\d*)\\)"] = " Reģioni  ($1)"; 
regexps["^Friends \\((\\d*)\\)"] = " Draugi  ($1)"; 
regexps["^(\\d*) months"] = "$1  mēneši "; 
regexps["^Comments(.*)"] = " Komentāri  $1"; 
 
 
matchRegexps = function(key) {
	if (key===null) {
		return undefined;
	}
	GM_log("check '"+key+"'");
	for (var reg in regexps) {
		var rrrr = new RegExp(reg)
		var result = key.match(rrrr);
		GM_log("match "+reg+" -> "+ rrrr+ " : "+result);
		if (key.match(rrrr)!==null) {
			GM_log("match "+reg+" in "+key);
			return key.replace(rrrr,regexps[reg]);
		}
	}
	return undefined;
};

translate = function(key) {
	if (strings[key]!==undefined) {
	    return strings[key];
	} else {
	    var key2 = trim(key);
	    if (strings[key2]!==undefined) {
		return strings[key2];
	    }
	}
	return undefined;
};

translateWithRegexp = function(key) {
	if (strings[key]!==undefined) {
	    return strings[key];
	} else {
	    var key2 = trim(key);
	    if (strings[key2]!==undefined) {
		return strings[key2];
	    }
	}
	return matchRegexps(key);
};


var allTrans = {
    "span":"" , "a":"", "h2":"","th":"", "td":"", "p":"", "strong":"", "div":""
  "a":"" 
};


militaryPage = function() {
  var _nodes = document.getElementsByTagName("p");
  var _node;
  for (var _key in _nodes) {
    if (_nodes[_key]!==null) {
      _node = _nodes[_key];
      if (_node.childNodes.length==2 && _node.childNodes[1].tagName=="A") {
        var tr = matchRegexps(_node.childNodes[0].nodeValue);
        if (tr!==undefined) {
          _node.childNodes[0].nodeValue = tr;
        }
      }
    }
  }
};

fixFlash = function() {
  var tags = document.getElementsByTagName("embed");
  for (var key in tags) {
    var node = tags[key];
    if (node.src.indexOf("delicious.swf")!=-1) {
      var flashVars = node.attributes.getNamedItem("flashvars").nodeValue;
      var txtValue = flashVars.replace(/txt=(.*)&&(.*)/,"$1");
      var trValue = translateWithRegexp(txtValue);
      if (trValue!==undefined) {
        /* sajnos nem mukodik ...
        var newVal = flashVars.replace(/txt=(.*)&&(.*)/,"txt="+trValue+"&&$2");
        alert("flashvars = "+flashVars + " -> "+txtValue + " -> "+trValue+ " : "+newVal);
        node.attributes.getNamedItem("flashvars").nodeValue = newVal;*/
        node.parentNode.innerHTML = "<span class='x' style='letter-spacing:0px'>"+trValue+"</span>";
      }
    }
  }
}


translateWholePage = function(e) {
  if (document.location.toString().indexOf("/country/military")!=-1) {
    militaryPage();
  }

  var node = undefined;
  for (var tagName in allTrans) {
    var tags = document.getElementsByTagName(tagName);
    for (var key in tags) {
      node = tags[key];
      if (node.childNodes.length==1) {
        var translation = translateWithRegexp(node.innerHTML);
		GM_log("node : "+node.innerHTML + " -> "+translation);
        if (translation!==undefined) {
          node.innerHTML = translation;
        }
      } else {
        if (node.childNodes.length<=3) {
          for (var i=0;i<node.childNodes.length;i++) {
            if (node.childNodes[i].nodeName=="#text") {
GM_log("node "+i+" : "+node.nodeName+" value: "+node.childNodes[i].nodeValue);
              translation = translateWithRegexp(node.childNodes[i].nodeValue);
              if (translation!==undefined) {
                node.childNodes[i].nodeValue = translation;
              }
            }
          }
        }
      }
    }
  }
}



window.addEventListener("load", function(e) { 
  translateWholePage(e); 
  fixFlash();
  setTimeout(500, translateWholePage)
}, false);
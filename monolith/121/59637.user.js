// ==UserScript==
// @author (c) NicoChuu HighResolutionCommittee
// @name zoomeNicoVideoSharpness
// @description Version 0.8.26
// @version 0.8.26 base960
// @include http://*
// ==/UserScript==
if(location.href.match(/:\/\/\w*\.?(translate\.google\.com\/|twitroll\.com\/|addthis\.com\/|spider\-ad\.|adlantis\.|tweetmeme\.com\|digg\.com\/|googleads\.|ad\.|ld\.|dc\.|zoome.jp\/header_ad\.|microad\.)/)){;}else{ti=((2));tn='1001Q1,1000rv,1001Oy,10021A,1006D0,1006Nv,1001zw,10021x,10005K,10001t,1001Nb,1002e5,1007hk,1007hb,1000P8,10018z,1007hj,1004jE';tw='';if((1)){if(1>ti){ti=1}if(tn.length<ti){ti=tn.length}tn=tn.split(',');if(tn.length==ti){ii=0}else{ii=Math.floor(Math.random()*tn.length/ti)*ti}for(i=ii;(ii+ti)>i;i++){tw+='<iframe src="//twitroll.com/slide/'+tn[i%tn.length]+'/15/" frameBorder="0" width="600" height="337" allowtransparency="true" style="background-color:#fff;border:1px solid #ccc;"></iframe>'}}na=navigator.userAgent;
TubuyakuTitle=" ｷﾀﾜｧ.*･゜ﾟ･*:.｡..｡.:*･゜☆n‘∀‘)η ﾟ･*:.｡. .｡.:*･゜ﾟ･*!!!!!☆ ";TubuyakuButton=" ☆n‘∀‘)η つ ぶ や く ";op=0;sf=0;if(na.match(/Opera/)){op=1}if(na.match(/Safari/)){sf=1}if(sf){vo='<form style=display:inline;><a href=//tinyurl.com/2bt2p7k target=_blank><input type=button value="翻訳"></a>'+'<a href=//tinyurl.com/2cax3bq target=_blank><input type=button value="ﾎﾞｲｽ"></a></form>'}else{vo='<form style=display:inline;><input type=button value="翻訳" onClick=window.open(\'//tinyurl.com/2bt2p7k\',\'_blank\')>'+'<input type=button value="ﾎﾞｲｽ" onClick=window.open(\'//tinyurl.com/2cax3bq\',\'_blank\')></form>'}
if((1)){s='///?'}else{s='//?'}if((1)){z='////?'}else{z='///?'}v='/?';w=640;x=914;y=503;m=0;n=0;l='更新';r='拡大';if(0<location.href.indexOf('//?')){v='//?';w=800;x=1143;y=629;l='縮小'}if(0<location.href.indexOf('///?')){v='///?';w=960;x=1371;y=755;if('///?'==z){r='更新'}}if(0<location.href.indexOf('////?')){v='////?';w=1280;x=1828;y=1006;m=Math.floor((document.body.clientWidth-960)*11/24);if(10>m){m=10}n=Math.floor((document.body.clientWidth-960)*4/24);if(10>n){n=10}r='更新'} function zoomeF(){return('<p id=zoomePlus><a target=_top href='+location.href.replace(/(\/*)(\?)/,'$2')+'><b>標準切替</b></a> | <a target=_top href='+location.href.replace('/?','?').replace(/([^\/])(\?)/,'$1/?')+'><b>'+l+'</b></a> | <a target=_top href='+location.href.replace('?','/?').replace('/'+z,z)+'><b>'+r+'</b></a> | <a onFocus=this.blur() href=javascript:; onClick='+t+'><b>動画位置</b></a></p>\n')}
if((location.href.match(/:\/\/(zoome\.jp|circle\.zoome\.jp)\/[\w\-]+\/(diary|media)\/\d+\/?$/i))){location.search==''&&location.replace((location.href+s+'no_bt=1').replace('/'+s,s))}else if((location.href.match(/:\/\/(zoome\.jp|circle\.zoome\.jp)\/[\w\-]+\/(diary|media)\/\d+\/+\??$/i))){location.replace((location.href+'?no_bt=1').replace('??','?'))}else{function addParam(d,p){Array.forEach(d.getElementsByTagName('param'),function(link){link.name=='quality'&&link.value!=p&&link.setAttribute('value',p)});Array.forEach(d.getElementsByTagName('embed'),function(link){link.quality!=p&&link.setAttribute('quality',p)})}
if((location.href.match(/:\/\/(zoome\.jp|circle\.zoome\.jp)\/[\w\-]+\/(diary|media)\/\d+\//i))||(location.href.match(/:\/\/(www|live)\.nicovideo\.jp\/watch\/\w+\//i))){if(((0))&&(0>location.href.indexOf('///?'))){addParam(document.body,unescape('%6c%6f%77'))}b=document.getElementsByTagName('body');b[0].innerHTML=b[0].innerHTML.replace(/(<a )(href="http:\/\/)(zoome\.jp|circle\.zoome\.jp)(\/[\w\-]+\/)(diary|media)(\/\d+)(\/*)(")/ig,'$1$2$3$4$5$6'+v+'no_bt=1$8')}if(location.href.match(/:\/\/(circle\.zoome\.jp)\/[\w\-]+\/(media)\/\d+/i)){t="window.scroll("+Math.floor(((op|sf)*(screen.width==innerWidth)*((w-960)*914/640+20)+(screen.width!=innerWidth)*((w-960)/2+20)))+",document.getElementById('zoomePlus').offsetTop-2)";
if(!location.href.match(/:\/\/(zoome\.jp|circle\.zoome\.jp)\/[\w\-]+\/(diary|media)\/\d+($|\?)/i)){for(i=1;10>i;i++){setTimeout(t,i*100)}b=document.getElementsByTagName('body');b[0].innerHTML=b[0].innerHTML.replace('<param name="scale" value="noscale"><embed ','<param name="scale" value="showall"><param name="wmode" value="opaque"><embed style="position:relative;right:'+(m+15)+'px;" wmode="opaque" ').replace(' scale="noscale"',' scale="showall"' ).split('914px').join(x+'px').split('503px').join(y+'px').split('"914"').join('"'+x+'"').split('"503"').join('"'+y+'"').replace('"media_detail_page">','"media_detail_page">'+zoomeF()).replace('   main\n','')}}if(location.href.match(/:\/\/(zoome\.jp)\/[\w\-]+\/(diary)\/\d+/i)){t="window.scroll("+Math.floor(((op|sf)*(screen.width==innerWidth)*((w-960)/2)+(screen.width!=innerWidth)*(w-960)/2))+",document.getElementById('zoomePlus').offsetTop-2)";
if(!location.href.match(/:\/\/(zoome\.jp|circle\.zoome\.jp)\/[\w\-]+\/(diary|media)\/\d+($|\?)/i)){for(i=1;10>i;i++){setTimeout(t,i*100)}b=document.getElementsByTagName('body');b[0].innerHTML=b[0].innerHTML.replace('<param name="scale" value="noscale"><embed ','<param name="scale" value="showall"><param name="wmode" value="opaque"><embed style="position:relative;right:'+(n-2)+'px;" wmode="opaque" ').replace(' scale="noscale"',' scale="showall"' ).split('640px').join(w+'px').split('503px').join(y+'px').split('480px').join(y+'px').split('"640"').join('"'+w+'"').split('"503"').join('"'+y+'"').split('"480"').join('"'+y+'"').replace('"leader_link">','"leader_link">'+zoomeF()).replace(/(   <a href=")(http:\/\/zoome\.jp\/)([\w\-]+)(">main)(<\/a>\n)/ig,'').replace(' class="rightside">',' class="rightside"><br><br><table width='+Math.floor(960+(w-960)/2)+' height='+y+'><tr><td></td></tr></table><br>')}}}
if((location.href.match(/:\/\/(\w+\.2ch\.net\/\w+\/\w+\.\w+\/\w+\/\d+)\/?/i))){b=document.getElementsByTagName('body');d=b[0].innerHTML;if((0<d.indexOf(' Viewer('))&&(3000>d.indexOf(' Viewer('))&&(0<d.indexOf('://2ch.tora3.net/'))){location.replace(location.href.replace(/(h?t?t?p?s?:\/\/)(\w+)(\.2ch\.net\/\w+\/\w+\.\w+\/)(\w+)(\/)(\w+)(.*)/i,'http://yomi.mobi/read.cgi/mnewsplus/$2_$4_$6$7'))}}if((location.href.match(/:\/\/yomi\.mobi\/\w+\.\w+\/\w+\/\w+_\w+_\d+\/?/i))){b=document.getElementsByTagName('body');b[0].innerHTML=b[0].innerHTML.replace('>1-99<','>1-100<')}l=(sf|op);f='<form style=display:inline; name=form method=get target=_blank action=';st=f+'//find.2ch.net/ accept-charset=euc-jp><input type=submit value="２ちゃん検索"><input name=STR type=text style=width:60px;><input name=COUNT value=50 type=hidden></form>';b=document.getElementsByTagName('body');if(0>b[0].innerHTML.indexOf('//www.nicovideo.jp/thumb_watch/')){
if((location.href.match(/:\/\/(\w+\.2ch\.net|\w+.bbspink.com|\w+.unkar.org|yomi\.mobi|jbbs\.livedoor\.jp)\//i))){b=document.getElementsByTagName('input');for(i=0;b.length>i;i++){d=b[i];if(('書き込む'==d.value)||('投稿する'==d.value)){d.value=TubuyakuButton;d.title=TubuyakuTitle}}b=document.getElementsByTagName('dd');t='<a target=_blank href="h';for(i=0;b.length>i;i++){d=b[i].innerHTML.replace(/(<wbr>)/ig,'').split('&lt;/').join('\n&lt;/').replace(/(<[Aa] [^>]*>)([Hh]?ttps?:\/\/[^<]*)(<\/[Aa]>\[\]=)/g,' $2[]=').replace(/(<[Aa] [^>]*>)([Hh]ttps?:\/\/[^<]*)(<\/[Aa]>)/g,' $2').replace(/(\.)(jpeg|bmp|jpg|gif|png)([^"<>\f\n\r\t\v 　\?\&\/])/ig,'$1$2 $3').replace(/([^\(:='])(H)(ttps?:\/\/\w[^"<>\f\n\r\t\v]+)/g,'$1'+t+'$3">$2$3</a>').replace(/([^\(:="'])(h)(ttps?:\/\/\w[^"<>\f\n\r\t\v 　]+)/g,'$1</a>'+t+'$3">h$3</a>').replace(/([^Hh])(ttps?:\/\/\w[^"<>\f\n\r\t\v 　]+)/g,t+' $2">h$2</a>').replace(/([^t])(tps?:\/\/\w[^"<>\f\n\r\t\v 　]+)/g,t+'t$2">ht$2</a>').replace(/([^t])(ps?:\/\/\w[^"<>\f\n\r\t\v 　]+)/g,t+'tt$2">htt$2</a>');
if((l)){s=1;x='';for(y=0;d.length>y;y++){c=d[y];if('>'==c){s=1}else if('<'==c){s=0}else if(0<='.-+*/=%?|&#'.indexOf(c)){if(s){x+='<wbr>'}}x+=c}d=x}if(b.length-1==i){d+='<br><div style=white-space:nowrap;><form style=display:inline;><input type=button value="+" title="バージョンアップ"onClick=window.open(\'//userscripts.org/scripts/source/59637.user.js\',\'_top\')></form> '+f+'//www.google.co.jp/search accept-charset=utf-8><input type=submit value="したらば検索"><input name=hl value=ja type=hidden><input name=num value=100 type=hidden><input type=hidden name=sitesearch value="jbbs.livedoor.jp"><input name=q value="" type=text style=width:60px;></form> '+st+' '+f+'//www.google.co.jp/search accept-charset=utf-8><input type=submit value="グーグル検索"><input name=q type=text style=width:60px;><input name=num value=80 type=hidden><input name=ie value=utf-8 type=hidden></form> '+vo+'</div><br>'+tw+'<br>'}b[i].innerHTML=d.replace(/(<br)(<)/ig,'$1>$2')}}}}

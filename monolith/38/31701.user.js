// ==UserScript==
// @name           CSM: Transfer balance
// @description    Little transfer helper ;)
// @namespace      http://userscripts.org/users/26666
// @include        http://www1.cs-manager.com/csm/other/?p=other_transfers&c=*
// ==/UserScript==

function G($){return($!=undefined)}function a($){if(!G($))return false;if($.htmlElement)return"element";var _=typeof $;if(_=="object"&&$.nodeName)switch($.nodeType){case 1:return"element";case 3:return(/\S/).test($.nodeValue)?"textnode":"whitespace"}if(_=="object"||_=="function"){switch($.constructor){case Array:return"array";case RegExp:return"regexp";case X:return"class"}if(typeof $.length=="number"){if($.item)return"collection";if($.callee)return"arguments"}}return _}function W(){var A={};for(var B=0;B<arguments.length;B++)for(var $ in arguments[B]){var C=arguments[B][$],_=A[$];if(_&&a(C)=="object"&&a(_)=="object")A[$]=W(_,C);else A[$]=C}return A}var _=function(){var $=arguments;if(!$[1])$=[this,$[0]];for(var _ in $[1])$[0][_]=$[1][_];return $[0]},T=function(){for(var _=0,$=arguments.length;_<$;_++)arguments[_].extend=function(_){for(var $ in _){if(!this.prototype[$])this.prototype[$]=_[$];if(!this[$])this[$]=T.generic($)}}};T.generic=function($){return function(_){return this.prototype[$].apply(_,Array.prototype.slice.call(arguments,1))}};T(Function,Array,String,Number);function C($){return!!($||$===0)}function B(_,$){return G(_)?_:$}function b($,_){return Math.floor(Math.random()*(_-$+1)+$)}function U(){return new Date().getTime()}function V($){clearTimeout($);clearInterval($);return null}var e=function($){$=$||{};$.extend=_;return $},F=new e(window),I=new e(document);document.head=document.getElementsByTagName("head")[0];window.xpath=!!(document.evaluate);if(window.ActiveXObject)window.ie=window[window.XMLHttpRequest?"ie7":"ie6"]=true;else if(document.childNodes&&!document.all&&!navigator.taintEnabled)window.webkit=window[window.xpath?"webkit420":"webkit419"]=true;else if(document.getBoxObjectFor!=null)window.gecko=true;window.khtml=window.webkit;Object.extend=_;if(typeof R!="function"){var R=function(){};if(window.webkit)document.createElement("iframe");R.prototype=(window.webkit)?window["[[DOMElement.prototype]]"]:{}}R.prototype.htmlElement=function(){};if(window.ie6){try{document.execCommand("BackgroundImageCache",false,true)}catch(K){}}var X=function(A){var $=function(){return(arguments[0]!==null&&this.initialize&&a(this.initialize)=="function")?this.initialize.apply(this,arguments):this};_($,this);$.prototype=A;$.constructor=X;return $};X.empty=function(){};X.prototype={extend:function(B){var A=new this(null);for(var _ in B){var $=A[_];A[_]=X.Merge($,B[_])}return new X(A)},implement:function(){for(var A=0,$=arguments.length;A<$;A++)_(this.prototype,arguments[A])}};X.Merge=function(A,B){if(A&&A!=B){var $=a(B);if($!=a(A))return B;switch($){case"function":var _=function(){this.parent=arguments.callee.parent;return B.apply(this,arguments)};_.parent=A;return _;case"object":return W(A,B)}}return B};var O=new X({chain:function($){this.chains=this.chains||[];this.chains.push($);return this},callChain:function(){if(this.chains&&this.chains.length)this.chains.shift().delay(10,this)},clearChain:function(){this.chains=[]}}),N=new X({addEvent:function($,_){if(_!=X.empty){this.$events=this.$events||{};this.$events[$]=this.$events[$]||[];this.$events[$].include(_)}return this},fireEvent:function($,_,A){if(this.$events&&this.$events[$])this.$events[$].each(function($){$.create({"bind":this,"delay":A,"arguments":_})()},this);return this},removeEvent:function($,_){if(this.$events&&this.$events[$])this.$events[$].remove(_);return this}}),P=new X({setOptions:function(){this.options=W.apply(null,[this.options].extend(arguments));if(this.addEvent)for(var $ in this.options)if(a(this.options[$]=="function")&&(/^on[A-Z]/).test($))this.addEvent($,this.options[$]);return this}});Array.extend({forEach:function($,B){for(var A=0,_=this.length;A<_;A++)$.call(B,this[A],A,this)},filter:function(A,$){var _=[];for(var B=0,C=this.length;B<C;B++)if(A.call($,this[B],B,this))_.push(this[B]);return _},map:function(A,$){var _=[];for(var B=0,C=this.length;B<C;B++)_[B]=A.call($,this[B],B,this);return _},every:function($,B){for(var A=0,_=this.length;A<_;A++)if(!$.call(B,this[A],A,this))return false;return true},some:function($,B){for(var A=0,_=this.length;A<_;A++)if($.call(B,this[A],A,this))return true;return false},indexOf:function(A,$){var B=this.length;for(var _=($<0)?Math.max(0,B+$):$||0;_<B;_++)if(this[_]===A)return _;return-1},copy:function(A,$){A=A||0;if(A<0)A=this.length+A;$=$||(this.length-A);var B=[];for(var _=0;_<$;_++)B[_]=this[A++];return B},remove:function(_){var $=0,A=this.length;while($<A)if(this[$]===_){this.splice($,1);A--}else $++;return this},contains:function($,_){return this.indexOf($,_)!=-1},associate:function(A){var $={},B=Math.min(this.length,A.length);for(var _=0;_<B;_++)$[A[_]]=this[_];return $},extend:function($){for(var A=0,_=$.length;A<_;A++)this.push($[A]);return this},merge:function($){for(var A=0,_=$.length;A<_;A++)this.include($[A]);return this},include:function($){if(!this.contains($))this.push($);return this},getRandom:function(){return this[b(0,this.length-1)]||null},getLast:function(){return this[this.length-1]||null}});Array.prototype.each=Array.prototype.forEach;Array.each=Array.forEach;function E($){return Array.copy($)}function J(B,A,$){if(B&&typeof B.length=="number"&&a(B)!="object")Array.forEach(B,A,$);else for(var _ in B)A.call($||B,B[_],_)}Array.prototype.test=Array.prototype.contains;String.extend({test:function($,_){return((a($)=="string")?new RegExp($,_):$).test(this)},toInt:function(){return parseInt(this,10)},toFloat:function(){return parseFloat(this)},camelCase:function(){return this.replace(/-\D/g,function($){return $.charAt(1).toUpperCase()})},hyphenate:function(){return this.replace(/\w[A-Z]/g,function($){return($.charAt(0)+"-"+$.charAt(1).toLowerCase())})},capitalize:function(){return this.replace(/\b[a-z]/g,function($){return $.toUpperCase()})},trim:function(){return this.replace(/^\s+|\s+$/g,"")},clean:function(){return this.replace(/\s{2,}/g," ").trim()},rgbToHex:function(_){var $=this.match(/\d{1,3}/g);return($)?$.rgbToHex(_):false},hexToRgb:function(_){var $=this.match(/^#?(\w{1,2})(\w{1,2})(\w{1,2})$/);return($)?$.slice(1).hexToRgb(_):false},contains:function(_,$){return($)?($+this+$).indexOf($+_+$)>-1:this.indexOf(_)>-1},escapeRegExp:function(){return this.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")}});Array.extend({rgbToHex:function(A){if(this.length<3)return false;if(this.length==4&&this[3]==0&&!A)return"transparent";var B=[];for(var $=0;$<3;$++){var _=(this[$]-0).toString(16);B.push((_.length==1)?"0"+_:_)}return A?B:"#"+B.join("")},hexToRgb:function($){if(this.length!=3)return false;var _=[];for(var A=0;A<3;A++)_.push(parseInt((this[A].length==1)?this[A]+this[A]:this[A],16));return $?_:"rgb("+_.join(",")+")"}});Function.extend({create:function(_){var $=this;_=W({"bind":$,"event":false,"arguments":null,"delay":false,"periodical":false,"attempt":false},_);if(C(_.arguments)&&a(_.arguments)!="array")_.arguments=[_.arguments];return function(D){var C;if(_.event){D=D||window.event;C=[(_.event===true)?D:new _.event(D)];if(_.arguments)C.extend(_.arguments)}else C=_.arguments||arguments;var A=function(){return $.apply(B(_.bind,$),C)};if(_.delay)return setTimeout(A,_.delay);if(_.periodical)return setInterval(A,_.periodical);if(_.attempt){try{return A()}catch(E){return false}}return A()}},pass:function($,_){return this.create({"arguments":$,"bind":_})},attempt:function($,_){return this.create({"arguments":$,"bind":_,"attempt":true})()},bind:function(_,$){return this.create({"bind":_,"arguments":$})},bindAsEventListener:function(_,$){return this.create({"bind":_,"event":true,"arguments":$})},delay:function(A,$,_){return this.create({"delay":A,"bind":$,"arguments":_})()},periodical:function(_,$,A){return this.create({"periodical":_,"bind":$,"arguments":A})()}});Number.extend({toInt:function(){return parseInt(this)},toFloat:function(){return parseFloat(this)},limit:function($,_){return Math.min(_,Math.max($,this))},round:function($){$=Math.pow(10,$||0);return Math.round(this*$)/$},times:function($){for(var _=0;_<this;_++)$(_)}});var d=new X({initialize:function(B,A){if(a(B)=="string"){if(window.ie&&A&&(A.name||A.type)){var $=(A.name)?" name=\""+A.name+"\"":"",_=(A.type)?" type=\""+A.type+"\"":"";delete A.name;delete A.type;B="<"+B+$+_+">"}B=document.createElement(B)}B=L(B);return(!A||!B)?B:B.set(A)}}),Z=new X({initialize:function($){return($)?_($,this):this}});Z.extend=function(_){for(var $ in _){this.prototype[$]=_[$];this[$]=T.generic($)}};function L($){if(!$)return null;if($.htmlElement)return A.collect($);if([window,document].contains($))return $;var B=a($);if(B=="string"){$=document.getElementById($);B=($)?"element":false}if(B!="element")return null;if($.htmlElement)return A.collect($);if(["object","embed"].contains($.tagName.toLowerCase()))return $;_($,d.prototype);$.htmlElement=function(){};return A.collect($)}document.getElementsBySelector=document.getElementsByTagName;function $(){var _=[];for(var B=0,C=arguments.length;B<C;B++){var A=arguments[B];switch(a(A)){case"element":_.push(A);case"boolean":break;case false:break;case"string":A=document.getElementsBySelector(A,true);default:_.extend(A)}}return $.unique(_)}$.unique=function(A){var $=[];for(var _=0,D=A.length;_<D;_++){if(A[_].$included)continue;var E=L(A[_]);if(E&&!E.$included){E.$included=true;$.push(E)}}for(var C=0,B=$.length;C<B;C++)$[C].$included=null;return new Z($)};Z.Multi=function(_){return function(){var C=arguments,F=[],A=true;for(var B=0,E=this.length,D;B<E;B++){D=this[B][_].apply(this[B],C);if(a(D)!="element")A=false;F.push(D)}return(A)?$.unique(F):F}};d.extend=function($){for(var A in $){R.prototype[A]=$[A];d.prototype[A]=$[A];d[A]=T.generic(A);var _=(Array.prototype[A])?A+"Elements":A;Z.prototype[_]=Z.Multi(A)}};d.extend({set:function($){for(var A in $){var _=$[A];switch(A){case"styles":this.setStyles(_);break;case"events":if(this.addEvents)this.addEvents(_);break;case"properties":this.setProperties(_);break;default:this.setProperty(A,_)}}return this},inject:function(B,_){B=L(B);switch(_){case"before":B.parentNode.insertBefore(this,B);break;case"after":var $=B.getNext();if(!$)B.parentNode.appendChild(this);else B.parentNode.insertBefore(this,$);break;case"top":var A=B.firstChild;if(A){B.insertBefore(this,A);break}default:B.appendChild(this)}return this},injectBefore:function($){return this.inject($,"before")},injectAfter:function($){return this.inject($,"after")},injectInside:function($){return this.inject($,"bottom")},injectTop:function($){return this.inject($,"top")},adopt:function(){var _=[];J(arguments,function($){_=_.concat($)});$(_).inject(this);return this},remove:function(){return this.parentNode.removeChild(this)},clone:function($){var A=L(this.cloneNode($!==false));if(!A.$events)return A;A.$events={};for(var _ in this.$events)A.$events[_]={"keys":E(this.$events[_].keys),"values":E(this.$events[_].values)};return A.removeEvents()},replaceWith:function($){$=L($);this.parentNode.replaceChild($,this);return $},appendText:function($){this.appendChild(document.createTextNode($));return this},hasClass:function($){return this.className.contains($," ")},addClass:function($){if(!this.hasClass($))this.className=(this.className+" "+$).clean();return this},removeClass:function($){this.className=this.className.replace(new RegExp("(^|\\s)"+$+"(?:\\s|$)"),"$1").clean();return this},toggleClass:function($){return this.hasClass($)?this.removeClass($):this.addClass($)},setStyle:function(_,$){switch(_){case"opacity":return this.setOpacity(parseFloat($));case"float":_=(window.ie)?"styleFloat":"cssFloat"}_=_.camelCase();switch(a($)){case"number":if(!["zIndex","zoom"].contains(_))$+="px";break;case"array":$="rgb("+$.join(",")+")"}this.style[_]=$;return this},setStyles:function($){switch(a($)){case"object":d.setMany(this,"setStyle",$);break;case"string":this.style.cssText=$}return this},setOpacity:function($){if($==0){if(this.style.visibility!="hidden")this.style.visibility="hidden"}else if(this.style.visibility!="visible")this.style.visibility="visible";if(!this.currentStyle||!this.currentStyle.hasLayout)this.style.zoom=1;if(window.ie)this.style.filter=($==1)?"":"alpha(opacity="+$*100+")";this.style.opacity=this.$tmp.opacity=$;return this},getStyle:function($){$=$.camelCase();var A=this.style[$];if(!C(A)){if($=="opacity")return this.$tmp.opacity;A=[];for(var B in d.Styles)if($==B){d.Styles[B].each(function($){var _=this.getStyle($);A.push(parseInt(_)?_:"0px")},this);if($=="border"){var _=A.every(function($){return($==A[0])});return(_)?A[0]:false}return A.join(" ")}if($.contains("border"))if(d.Styles.border.contains($))return["Width","Style","Color"].map(function(_){return this.getStyle($+_)},this).join(" ");else if(d.borderShort.contains($))return["Top","Right","Bottom","Left"].map(function(_){return this.getStyle("border"+_+$.replace("border",""))},this).join(" ");if(document.defaultView)A=document.defaultView.getComputedStyle(this,null).getPropertyValue($.hyphenate());else if(this.currentStyle)A=this.currentStyle[$]}if(window.ie)A=d.fixStyle($,A,this);if(A&&$.test(/color/i)&&A.contains("rgb"))return A.split("rgb").splice(1,4).map(function($){return $.rgbToHex()}).join(" ");return A},getStyles:function(){return d.getMany(this,"getStyle",arguments)},walk:function(_,$){_+="Sibling";var A=($)?this[$]:this[_];while(A&&a(A)!="element")A=A[_];return L(A)},getPrevious:function(){return this.walk("previous")},getNext:function(){return this.walk("next")},getFirst:function(){return this.walk("next","firstChild")},getLast:function(){return this.walk("previous","lastChild")},getParent:function(){return L(this.parentNode)},getChildren:function(){return $(this.childNodes)},hasChild:function($){return!!E(this.getElementsByTagName("*")).contains($)},getProperty:function(A){var B=d.Properties[A];if(B)return this[B];var $=d.PropertiesIFlag[A]||0;if(!window.ie||$)return this.getAttribute(A,$);var _=this.attributes[A];return(_)?_.nodeValue:null},removeProperty:function(_){var $=d.Properties[_];if($)this[$]="";else this.removeAttribute(_);return this},getProperties:function(){return d.getMany(this,"getProperty",arguments)},setProperty:function($,A){var _=d.Properties[$];if(_)this[_]=A;else this.setAttribute($,A);return this},setProperties:function($){return d.setMany(this,"setProperty",$)},setHTML:function(){this.innerHTML=E(arguments).join("");return this},setText:function($){var _=this.getTag();if(["style","script"].contains(_))if(window.ie){if(_=="style")this.styleSheet.cssText=$;else if(_=="script")this.setProperty("text",$);return this}else{this.removeChild(this.firstChild);return this.appendText($)}this[G(this.innerText)?"innerText":"textContent"]=$;return this},getText:function(){var $=this.getTag();if(["style","script"].contains($))if(window.ie){if($=="style")return this.styleSheet.cssText;else if($=="script")return this.getProperty("text")}else return this.innerHTML;return(B(this.innerText,this.textContent))},getTag:function(){return this.tagName.toLowerCase()},empty:function(){A.trash(this.getElementsByTagName("*"));return this.setHTML("")}});d.fixStyle=function(A,D,_){if(C(parseInt(D)))return D;if(["height","width"].contains(A)){var $=(A=="width")?["left","right"]:["top","bottom"],B=0;$.each(function($){B+=_.getStyle("border-"+$+"-width").toInt()+_.getStyle("padding-"+$).toInt()});return _["offset"+A.capitalize()]-B+"px"}else if(A.test(/border(.+)Width|margin|padding/))return"0px";return D};d.Styles={"border":[],"padding":[],"margin":[]};["Top","Right","Bottom","Left"].each(function(_){for(var $ in d.Styles)d.Styles[$].push($+_)});d.borderShort=["borderWidth","borderStyle","borderColor"];d.getMany=function(B,A,$){var _={};J($,function($){_[$]=B[A]($)});return _};d.setMany=function(B,$,A){for(var _ in A)B[$](_,A[_]);return B};d.Properties=new e({"class":"className","for":"htmlFor","colspan":"colSpan","rowspan":"rowSpan","accesskey":"accessKey","tabindex":"tabIndex","maxlength":"maxLength","readonly":"readOnly","frameborder":"frameBorder","value":"value","disabled":"disabled","checked":"checked","multiple":"multiple","selected":"selected"});d.PropertiesIFlag={"href":2,"src":2};d.Methods={Listeners:{addListener:function($,_){if(this.addEventListener)this.addEventListener($,_,false);else this.attachEvent("on"+$,_);return this},removeListener:function($,_){if(this.removeEventListener)this.removeEventListener($,_,false);else this.detachEvent("on"+$,_);return this}}};window.extend(d.Methods.Listeners);document.extend(d.Methods.Listeners);d.extend(d.Methods.Listeners);var A={elements:[],collect:function($){if(!$.$tmp){A.elements.push($);$.$tmp={"opacity":1}}return $},trash:function(D){for(var $=0,C=D.length,E;$<C;$++){if(!(E=D[$])||!E.$tmp)continue;if(E.$events)E.fireEvent("trash").removeEvents();for(var _ in E.$tmp)E.$tmp[_]=null;for(var B in d.prototype)E[B]=null;A.elements[A.elements.indexOf(E)]=null;E.htmlElement=E.$tmp=E=null}A.elements.remove(null)},empty:function(){A.collect(window);A.collect(document);A.trash(A.elements)}};window.addListener("beforeunload",function(){window.addListener("unload",A.empty);if(window.ie)window.addListener("unload",CollectGarbage)});var M=new X({initialize:function(A){if(A&&A.$extended)return A;this.$extended=true;A=A||window.event;this.event=A;this.type=A.type;this.target=A.target||A.srcElement;if(this.target.nodeType==3)this.target=this.target.parentNode;this.shift=A.shiftKey;this.control=A.ctrlKey;this.alt=A.altKey;this.meta=A.metaKey;if(["DOMMouseScroll","mousewheel"].contains(this.type))this.wheel=(A.wheelDelta)?A.wheelDelta/120:-(A.detail||0)/3;else if(this.type.contains("key")){this.code=A.which||A.keyCode;for(var $ in M.keys)if(M.keys[$]==this.code){this.key=$;break}if(this.type=="keydown"){var _=this.code-111;if(_>0&&_<13)this.key="f"+_}this.key=this.key||String.fromCharCode(this.code).toLowerCase()}else if(this.type.test(/(click|mouse|menu)/)){this.page={"x":A.pageX||A.clientX+document.documentElement.scrollLeft,"y":A.pageY||A.clientY+document.documentElement.scrollTop};this.client={"x":A.pageX?A.pageX-window.pageXOffset:A.clientX,"y":A.pageY?A.pageY-window.pageYOffset:A.clientY};this.rightClick=(A.which==3)||(A.button==2);switch(this.type){case"mouseover":this.relatedTarget=A.relatedTarget||A.fromElement;break;case"mouseout":this.relatedTarget=A.relatedTarget||A.toElement}this.fixRelatedTarget()}return this},stop:function(){return this.stopPropagation().preventDefault()},stopPropagation:function(){if(this.event.stopPropagation)this.event.stopPropagation();else this.event.cancelBubble=true;return this},preventDefault:function(){if(this.event.preventDefault)this.event.preventDefault();else this.event.returnValue=false;return this}});M.fix={relatedTarget:function(){if(this.relatedTarget&&this.relatedTarget.nodeType==3)this.relatedTarget=this.relatedTarget.parentNode},relatedTargetGecko:function(){try{M.fix.relatedTarget.call(this)}catch($){this.relatedTarget=this.target}}};M.prototype.fixRelatedTarget=(window.gecko)?M.fix.relatedTargetGecko:M.fix.relatedTarget;M.keys=new e({"enter":13,"up":38,"down":40,"left":37,"right":39,"esc":27,"space":32,"backspace":8,"tab":9,"delete":46});d.Methods.Events={addEvent:function(B,$){this.$events=this.$events||{};this.$events[B]=this.$events[B]||{"keys":[],"values":[]};if(this.$events[B].keys.contains($))return this;this.$events[B].keys.push($);var A=B,_=d.Events[B];if(_){if(_.add)_.add.call(this,$);if(_.map)$=_.map;if(_.type)A=_.type}if(!this.addEventListener)$=$.create({"bind":this,"event":true});this.$events[B].values.push($);return(d.NativeEvents.contains(A))?this.addListener(A,$):this},removeEvent:function(D,_){if(!this.$events||!this.$events[D])return this;var $=this.$events[D].keys.indexOf(_);if($==-1)return this;var B=this.$events[D].keys.splice($,1)[0],A=this.$events[D].values.splice($,1)[0],C=d.Events[D];if(C){if(C.remove)C.remove.call(this,_);if(C.type)D=C.type}return(d.NativeEvents.contains(D))?this.removeListener(D,A):this},addEvents:function($){return d.setMany(this,"addEvent",$)},removeEvents:function($){if(!this.$events)return this;if(!$){for(var _ in this.$events)this.removeEvents(_);this.$events=null}else if(this.$events[$]){this.$events[$].keys.each(function(_){this.removeEvent($,_)},this);this.$events[$]=null}return this},fireEvent:function($,_,A){if(this.$events&&this.$events[$])this.$events[$].keys.each(function($){$.create({"bind":this,"delay":A,"arguments":_})()},this);return this},cloneEvents:function(_,A){if(!_.$events)return this;if(!A){for(var $ in _.$events)this.cloneEvents(_,$)}else if(_.$events[A])_.$events[A].keys.each(function($){this.addEvent(A,$)},this);return this}};window.extend(d.Methods.Events);document.extend(d.Methods.Events);d.extend(d.Methods.Events);d.Events=new e({"mouseenter":{type:"mouseover",map:function($){$=new M($);if($.relatedTarget!=this&&!this.hasChild($.relatedTarget))this.fireEvent("mouseenter",$)}},"mouseleave":{type:"mouseout",map:function($){$=new M($);if($.relatedTarget!=this&&!this.hasChild($.relatedTarget))this.fireEvent("mouseleave",$)}},"mousewheel":{type:(window.gecko)?"DOMMouseScroll":"mousewheel"}});d.NativeEvents=["click","dblclick","mouseup","mousedown","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","keydown","keypress","keyup","load","unload","beforeunload","resize","move","focus","blur","change","submit","reset","select","error","abort","contextmenu","scroll"];Function.extend({bindWithEvent:function(_,$){return this.create({"bind":_,"arguments":$,"event":M})}});Z.extend({filterByTag:function($){return new Z(this.filter(function(_){return(d.getTag(_)==$)}))},filterByClass:function(A,_){var $=this.filter(function($){return($.className&&$.className.contains(A," "))});return(_)?$:new Z($)},filterById:function(_,A){var $=this.filter(function($){return($.id==_)});return(A)?$:new Z($)},filterByAttribute:function(A,B,C,$){var _=this.filter(function($){var _=d.getProperty($,A);if(!_)return false;if(!B)return true;switch(B){case"=":return(_==C);case"*=":return(_.contains(C));case"^=":return(_.substr(0,C.length)==C);case"$=":return(_.substr(_.length-C.length)==C);case"!=":return(_!=C);case"~=":return _.contains(C," ")}return false});return($)?_:new Z(_)}});function H(_,$){return(L($)||document).getElement(_)}function Y(_,$){return(L($)||document).getElementsBySelector(_)}$.shared={"regexp":/^(\w*|\*)(?:#([\w-]+)|\.([\w-]+))?(?:\[(\w+)(?:([!*^$]?=)["']?([^"'\]]*)["']?)?])?$/,"xpath":{getParam:function(C,$,A,B){var _=[$.namespaceURI?"xhtml:":"",A[1]];if(A[2])_.push("[@id=\"",A[2],"\"]");if(A[3])_.push("[contains(concat(\" \", @class, \" \"), \" ",A[3]," \")]");if(A[4])if(A[5]&&A[6])switch(A[5]){case"*=":_.push("[contains(@",A[4],", \"",A[6],"\")]");break;case"^=":_.push("[starts-with(@",A[4],", \"",A[6],"\")]");break;case"$=":_.push("[substring(@",A[4],", string-length(@",A[4],") - ",A[6].length," + 1) = \"",A[6],"\"]");break;case"=":_.push("[@",A[4],"=\"",A[6],"\"]");break;case"!=":_.push("[@",A[4],"!=\"",A[6],"\"]")}else _.push("[@",A[4],"]");C.push(_.join(""));return C},getItems:function(F,C,D){var _=[],B=document.evaluate(".//"+F.join("//"),C,$.shared.resolver,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null);for(var A=0,E=B.snapshotLength;A<E;A++)_.push(B.snapshotItem(A));return(D)?_:new Z(_.map(L))}},"normal":{getParam:function(_,B,D,C){if(C==0){if(D[2]){var A=B.getElementById(D[2]);if(!A||((D[1]!="*")&&(d.getTag(A)!=D[1])))return false;_=[A]}else _=E(B.getElementsByTagName(D[1]))}else{_=$.shared.getElementsByTagName(_,D[1]);if(D[2])_=Z.filterById(_,D[2],true)}if(D[3])_=Z.filterByClass(_,D[3],true);if(D[4])_=Z.filterByAttribute(_,D[4],D[5],D[6],true);return _},getItems:function(A,B,_){return(_)?A:$.unique(A)}},resolver:function($){return($=="xhtml")?"http://www.w3.org/1999/xhtml":false},getElementsByTagName:function(C,A){var B=[];for(var _=0,$=C.length;_<$;_++)B.extend(C[_].getElementsByTagName(A));return B}};$.shared.method=(window.xpath)?"xpath":"normal";d.Methods.Dom={getElements:function(E,F){var C=[];E=E.trim().split(" ");for(var B=0,_=E.length;B<_;B++){var A=E[B],G=A.match($.shared.regexp);if(!G)break;G[1]=G[1]||"*";var D=$.shared[$.shared.method].getParam(C,this,G,B);if(!D)break;C=D}return $.shared[$.shared.method].getItems(C,this,F)},getElement:function($){return L(this.getElements($,true)[0]||false)},getElementsBySelector:function(B,D){var A=[];B=B.split(",");for(var C=0,_=B.length;C<_;C++)A=A.concat(this.getElements(B[C],true));return(D)?A:$.unique(A)}};d.extend({getElementById:function(_){var A=document.getElementById(_);if(!A)return false;for(var $=A.parentNode;$!=this;$=$.parentNode)if(!$)return false;return A},getElementsByClassName:function($){return this.getElements("."+$)}});document.extend(d.Methods.Dom);d.extend(d.Methods.Dom);d.extend({getValue:function(){switch(this.getTag()){case"select":var $=[];J(this.options,function(_){if(_.selected)$.push(B(_.value,_.text))});return(this.multiple)?$:$[0];case"input":if(!(this.checked&&["checkbox","radio"].contains(this.type))&&!["hidden","text","password"].contains(this.type))break;case"textarea":return this.value}return false},getFormElements:function(){return $(this.getElementsByTagName("input"),this.getElementsByTagName("select"),this.getElementsByTagName("textarea"))},toQueryString:function(){var $=[];this.getFormElements().each(function(C){var _=C.name,A=C.getValue();if(A===false||!_||C.disabled)return;var B=function(A){$.push(_+"="+encodeURIComponent(A))};if(a(A)=="array")A.each(B);else B(A)});return $.join("&")}});d.extend({scrollTo:function(_,$){this.scrollLeft=_;this.scrollTop=$},getSize:function(){return{"scroll":{"x":this.scrollLeft,"y":this.scrollTop},"size":{"x":this.offsetWidth,"y":this.offsetHeight},"scrollSize":{"x":this.scrollWidth,"y":this.scrollHeight}}},getPosition:function(A){A=A||[];var B=this,$=0,_=0;do{$+=B.offsetLeft||0;_+=B.offsetTop||0;B=B.offsetParent}while(B);A.each(function(A){$-=A.scrollLeft||0;_-=A.scrollTop||0});return{"x":$,"y":_}},getTop:function($){return this.getPosition($).y},getLeft:function($){return this.getPosition($).x},getCoordinates:function(A){var _=this.getPosition(A),$={"width":this.offsetWidth,"height":this.offsetHeight,"left":_.x,"top":_.y};$.right=$.left+$.width;$.bottom=$.top+$.height;return $}});d.Events.domready={add:function(_){if(window.loaded){_.call(this);return}var A=function(){if(window.loaded)return;window.loaded=true;window.timer=V(window.timer);this.fireEvent("domready")}.bind(this);if(document.readyState&&window.webkit)window.timer=function(){if(["loaded","complete"].contains(document.readyState))A()}.periodical(50);else if(document.readyState&&window.ie){if(!L("ie_ready")){var $=(window.location.protocol=="https:")?"://0":"javascript:void(0)";document.write("<script id=\"ie_ready\" defer src=\""+$+"\"></script>");L("ie_ready").onreadystatechange=function(){if(this.readyState=="complete")A()}}}else{window.addListener("load",A);document.addListener("DOMContentLoaded",A)}}};window.onDomReady=function($){return this.addEvent("domready",$)};window.extend({getWidth:function(){if(this.webkit419)return this.innerWidth;if(this.opera)return document.body.clientWidth;return document.documentElement.clientWidth},getHeight:function(){if(this.webkit419)return this.innerHeight;if(this.opera)return document.body.clientHeight;return document.documentElement.clientHeight},getScrollWidth:function(){if(this.ie)return Math.max(document.documentElement.offsetWidth,document.documentElement.scrollWidth);if(this.webkit)return document.body.scrollWidth;return document.documentElement.scrollWidth},getScrollHeight:function(){if(this.ie)return Math.max(document.documentElement.offsetHeight,document.documentElement.scrollHeight);if(this.webkit)return document.body.scrollHeight;return document.documentElement.scrollHeight},getScrollLeft:function(){return this.pageXOffset||document.documentElement.scrollLeft},getScrollTop:function(){return this.pageYOffset||document.documentElement.scrollTop},getSize:function(){return{"size":{"x":this.getWidth(),"y":this.getHeight()},"scrollSize":{"x":this.getScrollWidth(),"y":this.getScrollHeight()},"scroll":{"x":this.getScrollLeft(),"y":this.getScrollTop()}}},getPosition:function(){return{"x":0,"y":0}}});var Q={};Q.Base=new X({options:{onStart:X.empty,onComplete:X.empty,onCancel:X.empty,transition:function($){return-(Math.cos(Math.PI*$)-1)/2},duration:500,unit:"px",wait:true,fps:50},initialize:function($){this.element=this.element||null;this.setOptions($);if(this.options.initialize)this.options.initialize.call(this)},step:function(){var $=U();if($<this.time+this.options.duration){this.delta=this.options.transition(($-this.time)/this.options.duration);this.setNow();this.increase()}else{this.stop(true);this.set(this.to);this.fireEvent("onComplete",this.element,10);this.callChain()}},set:function($){this.now=$;this.increase();return this},setNow:function(){this.now=this.compute(this.from,this.to)},compute:function(_,$){return($-_)*this.delta+_},start:function(_,$){if(!this.options.wait)this.stop();else if(this.timer)return this;this.from=_;this.to=$;this.change=this.to-this.from;this.time=U();this.timer=this.step.periodical(Math.round(1000/this.options.fps),this);this.fireEvent("onStart",this.element);return this},stop:function($){if(!this.timer)return this;this.timer=V(this.timer);if(!$)this.fireEvent("onCancel",this.element);return this},custom:function(_,$){return this.start(_,$)},clearTimer:function($){return this.stop($)}});Q.Base.implement(new O,new N,new P);Q.CSS={select:function(A,_){if(A.test(/color/i))return this.Color;var $=a(_);if(($=="array")||($=="string"&&_.contains(" ")))return this.Multi;return this.Single},parse:function(E,B,_){if(!_.push)_=[_];var D=_[0],A=_[1];if(!C(A)){A=D;D=E.getStyle(B)}var $=this.select(B,A);return{"from":$.parse(D),"to":$.parse(A),"css":$}}};Q.CSS.Single={parse:function($){return parseFloat($)},getNow:function($,_,A){return A.compute($,_)},getValue:function(A,_,$){if(_=="px"&&$!="opacity")A=Math.round(A);return A+_}};Q.CSS.Multi={parse:function($){return $.push?$:$.split(" ").map(function($){return parseFloat($)})},getNow:function(A,_,$){var C=[];for(var B=0;B<A.length;B++)C[B]=$.compute(A[B],_[B]);return C},getValue:function(A,_,$){if(_=="px"&&$!="opacity")A=A.map(Math.round);return A.join(_+" ")+_}};Q.CSS.Color={parse:function($){return $.push?$:$.hexToRgb(true)},getNow:function(A,_,$){var C=[];for(var B=0;B<A.length;B++)C[B]=Math.round($.compute(A[B],_[B]));return C},getValue:function($){return"rgb("+$.join(",")+")"}};Q.Style=Q.Base.extend({initialize:function(A,$,_){this.element=L(A);this.property=$;this.parent(_)},hide:function(){return this.set(0)},setNow:function(){this.now=this.css.getNow(this.from,this.to,this)},set:function($){this.css=Q.CSS.select(this.property,$);return this.parent(this.css.parse($))},start:function($,_){if(this.timer&&this.options.wait)return this;var A=Q.CSS.parse(this.element,this.property,[$,_]);this.css=A.css;return this.parent(A.from,A.to)},increase:function(){this.element.setStyle(this.property,this.css.getValue(this.now,this.options.unit,this.property))}});d.extend({effect:function($,_){return new Q.Style(this,$,_)}});Q.Styles=Q.Base.extend({initialize:function(_,$){this.element=L(_);this.parent($)},setNow:function(){for(var $ in this.from)this.now[$]=this.css[$].getNow(this.from[$],this.to[$],this)},set:function(_){var A={};this.css={};for(var $ in _){this.css[$]=Q.CSS.select($,_[$]);A[$]=this.css[$].parse(_[$])}return this.parent(A)},start:function(A){if(this.timer&&this.options.wait)return this;this.now={};this.css={};var B={},_={};for(var $ in A){var C=Q.CSS.parse(this.element,$,A[$]);B[$]=C.from;_[$]=C.to;this.css[$]=C.css}return this.parent(B,_)},increase:function(){for(var $ in this.now)this.element.setStyle($,this.css[$].getValue(this.now[$],this.options.unit,$))}});d.extend({effects:function($){return new Q.Styles(this,$)}});Q.Elements=Q.Base.extend({initialize:function(_,A){this.elements=$(_);this.parent(A)},setNow:function(){for(var $ in this.from){var C=this.from[$],B=this.to[$],_=this.css[$],D=this.now[$]={};for(var A in C)D[A]=_[A].getNow(C[A],B[A],this)}},set:function(C){var E={};this.css={};for(var _ in C){var $=C[_],D=this.css[_]={},A=E[_]={};for(var B in $){D[B]=Q.CSS.select(B,$[B]);A[B]=D[B].parse($[B])}}return this.parent(E)},start:function(_){if(this.timer&&this.options.wait)return this;this.now={};this.css={};var A={},E={};for(var H in _){var B=_[H],$=A[H]={},F=E[H]={},D=this.css[H]={};for(var C in B){var G=Q.CSS.parse(this.elements[H],C,B[C]);$[C]=G.from;F[C]=G.to;D[C]=G.css}}return this.parent(A,E)},increase:function(){for(var A in this.now){var $=this.now[A],B=this.css[A];for(var _ in $)this.elements[A].setStyle(_,B[_].getValue($[_],this.options.unit,_))}}});Q.Scroll=Q.Base.extend({options:{overflown:[],offset:{"x":0,"y":0},wheelStops:true},initialize:function(_,$){this.now=[];this.element=L(_);this.bound={"stop":this.stop.bind(this,false)};this.parent($);if(this.options.wheelStops){this.addEvent("onStart",function(){document.addEvent("mousewheel",this.bound.stop)}.bind(this));this.addEvent("onComplete",function(){document.removeEvent("mousewheel",this.bound.stop)}.bind(this))}},setNow:function(){for(var $=0;$<2;$++)this.now[$]=this.compute(this.from[$],this.to[$])},scrollTo:function($,D){if(this.timer&&this.options.wait)return this;var _=this.element.getSize(),E={"x":$,"y":D};for(var B in _.size){var A=_.scrollSize[B]-_.size[B];if(C(E[B]))E[B]=(a(E[B])=="number")?E[B].limit(0,A):A;else E[B]=_.scroll[B];E[B]+=this.options.offset[B]}return this.start([_.scroll.x,_.scroll.y],[E.x,E.y])},toTop:function(){return this.scrollTo(false,0)},toBottom:function(){return this.scrollTo(false,"full")},toLeft:function(){return this.scrollTo(0,false)},toRight:function(){return this.scrollTo("full",false)},toElement:function(A){var _=this.element.getPosition(this.options.overflown),$=L(A).getPosition(this.options.overflown);return this.scrollTo($.x-_.x,$.y-_.y)},increase:function(){this.element.scrollTo(this.now[0],this.now[1])}});Q.Slide=Q.Base.extend({options:{mode:"vertical"},initialize:function(A,$){this.element=L(A);this.wrapper=new d("div",{"styles":_(this.element.getStyles("margin"),{"overflow":"hidden"})}).injectAfter(this.element).adopt(this.element);this.element.setStyle("margin",0);this.setOptions($);this.now=[];this.parent(this.options);this.open=true;this.addEvent("onComplete",function(){this.open=(this.now[0]===0)});if(window.webkit419)this.addEvent("onComplete",function(){if(this.open)this.element.remove().inject(this.wrapper)})},setNow:function(){for(var $=0;$<2;$++)this.now[$]=this.compute(this.from[$],this.to[$])},vertical:function(){this.margin="margin-top";this.layout="height";this.offset=this.element.offsetHeight},horizontal:function(){this.margin="margin-left";this.layout="width";this.offset=this.element.offsetWidth},slideIn:function($){this[$||this.options.mode]();return this.start([this.element.getStyle(this.margin).toInt(),this.wrapper.getStyle(this.layout).toInt()],[0,this.offset])},slideOut:function($){this[$||this.options.mode]();return this.start([this.element.getStyle(this.margin).toInt(),this.wrapper.getStyle(this.layout).toInt()],[-this.offset,0])},hide:function($){this[$||this.options.mode]();this.open=false;return this.set([-this.offset,0])},show:function($){this[$||this.options.mode]();this.open=true;return this.set([0,this.offset])},toggle:function($){if(this.wrapper.offsetHeight==0||this.wrapper.offsetWidth==0)return this.slideIn($);return this.slideOut($)},increase:function(){this.element.setStyle(this.margin,this.now[0]+this.options.unit);this.wrapper.setStyle(this.layout,this.now[1]+this.options.unit)}});Q.Transition=function($,A){A=A||[];if(a(A)!="array")A=[A];return _($,{easeIn:function(_){return $(_,A)},easeOut:function(_){return 1-$(1-_,A)},easeInOut:function(_){return(_<=0.5)?$(2*_,A)/2:(2-$(2*(1-_),A))/2}})};Q.Transitions=new e({linear:function($){return $}});Q.Transitions.extend=function($){for(var _ in $){Q.Transitions[_]=new Q.Transition($[_]);Q.Transitions.compat(_)}};Q.Transitions.compat=function($){["In","Out","InOut"].each(function(_){Q.Transitions[$.toLowerCase()+_]=Q.Transitions[$]["ease"+_]})};Q.Transitions.extend({Pow:function($,_){return Math.pow($,_[0]||6)},Expo:function($){return Math.pow(2,8*($-1))},Circ:function($){return 1-Math.sin(Math.acos($))},Sine:function($){return 1-Math.sin((1-$)*Math.PI/2)},Back:function($,_){_=_[0]||1.618;return Math.pow($,2)*((_+1)*$-_)},Bounce:function($){var A;for(var B=0,_=1;1;B+=_,_/=2)if($>=(7-4*B)/11){A=-Math.pow((11-6*B-11*$)/4,2)+_*_;break}return A},Elastic:function($,_){return Math.pow(2,10*--$)*Math.cos(20*$*Math.PI*(_[0]||1)/3)}});["Quad","Cubic","Quart","Quint"].each(function($,_){Q.Transitions[$]=new Q.Transition(function($){return Math.pow($,[_+2])});Q.Transitions.compat($)});var S={};S.Base=new X({options:{handle:false,unit:"px",onStart:X.empty,onBeforeStart:X.empty,onComplete:X.empty,onSnap:X.empty,onDrag:X.empty,limit:false,modifiers:{x:"left",y:"top"},grid:false,snap:6},initialize:function(_,$){this.setOptions($);this.element=L(_);this.handle=L(this.options.handle)||this.element;this.mouse={"now":{},"pos":{}};this.value={"start":{},"now":{}};this.bound={"start":this.start.bindWithEvent(this),"check":this.check.bindWithEvent(this),"drag":this.drag.bindWithEvent(this),"stop":this.stop.bind(this)};this.attach();if(this.options.initialize)this.options.initialize.call(this)},attach:function(){this.handle.addEvent("mousedown",this.bound.start);return this},detach:function(){this.handle.removeEvent("mousedown",this.bound.start);return this},start:function(B){this.fireEvent("onBeforeStart",this.element);this.mouse.start=B.page;var A=this.options.limit;this.limit={"x":[],"y":[]};for(var $ in this.options.modifiers){if(!this.options.modifiers[$])continue;this.value.now[$]=this.element.getStyle(this.options.modifiers[$]).toInt();this.mouse.pos[$]=B.page[$]-this.value.now[$];if(A&&A[$])for(var _=0;_<2;_++)if(C(A[$][_]))this.limit[$][_]=(a(A[$][_])=="function")?A[$][_]():A[$][_]}if(a(this.options.grid)=="number")this.options.grid={"x":this.options.grid,"y":this.options.grid};document.addListener("mousemove",this.bound.check);document.addListener("mouseup",this.bound.stop);this.fireEvent("onStart",this.element);B.stop()},check:function(_){var $=Math.round(Math.sqrt(Math.pow(_.page.x-this.mouse.start.x,2)+Math.pow(_.page.y-this.mouse.start.y,2)));if($>this.options.snap){document.removeListener("mousemove",this.bound.check);document.addListener("mousemove",this.bound.drag);this.drag(_);this.fireEvent("onSnap",this.element)}_.stop()},drag:function($){this.out=false;this.mouse.now=$.page;for(var _ in this.options.modifiers){if(!this.options.modifiers[_])continue;this.value.now[_]=this.mouse.now[_]-this.mouse.pos[_];if(this.limit[_])if(C(this.limit[_][1])&&(this.value.now[_]>this.limit[_][1])){this.value.now[_]=this.limit[_][1];this.out=true}else if(C(this.limit[_][0])&&(this.value.now[_]<this.limit[_][0])){this.value.now[_]=this.limit[_][0];this.out=true}if(this.options.grid[_])this.value.now[_]-=(this.value.now[_]%this.options.grid[_]);this.element.setStyle(this.options.modifiers[_],this.value.now[_]+this.options.unit)}this.fireEvent("onDrag",this.element);$.stop()},stop:function(){document.removeListener("mousemove",this.bound.check);document.removeListener("mousemove",this.bound.drag);document.removeListener("mouseup",this.bound.stop);this.fireEvent("onComplete",this.element)}});S.Base.implement(new N,new P);d.extend({makeResizable:function($){return new S.Base(this,W({modifiers:{x:"width",y:"height"}},$))}});S.Move=S.Base.extend({options:{droppables:[],container:false,overflown:[]},initialize:function(D,B){this.setOptions(B);this.element=L(D);this.droppables=$(this.options.droppables);this.container=L(this.options.container);this.position={"element":this.element.getStyle("position"),"container":false};if(this.container)this.position.container=this.container.getStyle("position");if(!["relative","absolute","fixed"].contains(this.position.element))this.position.element="absolute";var A=this.element.getStyle("top").toInt(),_=this.element.getStyle("left").toInt();if(this.position.element=="absolute"&&!["relative","absolute","fixed"].contains(this.position.container)){A=C(A)?A:this.element.getTop(this.options.overflown);_=C(_)?_:this.element.getLeft(this.options.overflown)}else{A=C(A)?A:0;_=C(_)?_:0}this.element.setStyles({"top":A,"left":_,"position":this.position.element});this.parent(this.element)},start:function(A){this.overed=null;if(this.container){var $=this.container.getCoordinates(),_=this.element.getCoordinates();if(this.position.element=="absolute"&&!["relative","absolute","fixed"].contains(this.position.container))this.options.limit={"x":[$.left,$.right-_.width],"y":[$.top,$.bottom-_.height]};else this.options.limit={"y":[0,$.height-_.height],"x":[0,$.width-_.width]}}this.parent(A)},drag:function($){this.parent($);var _=this.out?false:this.droppables.filter(this.checkAgainst,this).getLast();if(this.overed!=_){if(this.overed)this.overed.fireEvent("leave",[this.element,this]);this.overed=_?_.fireEvent("over",[this.element,this]):null}return this},checkAgainst:function($){$=$.getCoordinates(this.options.overflown);var _=this.mouse.now;return(_.x>$.left&&_.x<$.right&&_.y<$.bottom&&_.y>$.top)},stop:function(){if(this.overed&&!this.out)this.overed.fireEvent("drop",[this.element,this]);else this.element.fireEvent("emptydrop",this);this.parent();return this}});d.extend({makeDraggable:function($){return new S.Move(this,$)}});if(unsafeWindow.oLang)var D=function($){return unsafeWindow.oLang[$]};else D=function(){};window.addEvent("domready",function(){var B=D("SOLD"),G=D("BOUGHT"),F=D("FOR"),C=$("td.info"),A=$("tbody tr td.head")[0],_=0,H=0,E=0;C.each(function(A,$){znak=-1;c=A.innerHTML.replace(/<b>(.+?)<\/b>/img,"").replace(/\(id:(.+?)\)/im,"").replace(/csm/im,"").split(" ").join("").split(F);if(c[0].match(B)){znak=1;E+=c[1].toInt();_++}H+=c[1].toInt()*znak});cplus="#3cff00";cmin="#ff0000";if(H>=0)cbal=cplus;else cbal=cmin;A.innerHTML+="<b style=\"float:right;margin-top:-15px;\">"+B+" "+_+" "+F+" <i style=\"color: "+cplus+";\">"+E+"</i> "+G+" "+(C.length-_)+" "+F+" <i style=\"color: "+cmin+";\">"+(H-E)+"</i> Balance: <i style=\"color: "+cbal+";\">"+H+"</i></b>"})
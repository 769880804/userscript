// ==UserScript==
// @name        Wikipedia Amazon search
// @namespace   example
// @include     http://*.wikipedia.*
// @version     1
// ==/UserScript==


am16='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAApVBMVEX///////f/9+//9+b39/f/79b/78Xv7+//5sX/5r3/5rX/5qXv5s7m5ub/3q3/3qXm3tbe3ube3t7W3ub/1pzW1tb/zoTO1t7/znvOzs7/xXP/vVrFxcX/vUr/tVL/tUr/tUK9vb2ttbX/pSH/pRmtra2cnJyUlJSMjIyEhIR7e3tzc3Nra2taWlpKSko6OjoxMTEpKSkhISEZGRkQEBAICAgAAAB/mlyyAAAAAXRSTlMAQObYZgAAAAlwSFlzAAAOwwAADsMBx2+oZAAAAMtJREFUeJw9zlFrAjEMB/B/mnirp2d3DsEHRcYQfPP7fw5lDPY40DnxwXO3O8/2us7qCgnJjyRUEN5zJgr2/G5DLSHmjxRykizWESQjfBemB52drsAX177ic8mkI5xXkKHp/K3dbshL995GWKSwtcvUHSYp3Mdelv8TPcDukavbfuRRMSbQcAsKUAyIZ55bhaSf6gBb01fKl19Tv6n0jwxQvj0ZHA+o2U/Ki5z0mJtDQ6b7IHZXs/hqo/OcybtmVwMu3PBVBVati//4BQy6QvQBnUlFAAAAAElFTkSuQmCC"'
am24='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAAvVBMVEX///////f//+//9+b39/f/997/79b/78Xv7+//5r3/5rXm5ub/3rX/3q3/3pTe3t7/1pz/1pT/1oTW1tb/zoz/zoT/znv/znP/xXvOzs7/xWv/xWP/vWP/vVr/vVLFxcX/tUr/tUK9vb3/rTq1tbX/pRmtra3/nBD/nAj/nAClpaX/lACcnJyUlJSMjIyEhIR7e3tra2tjY2NaWlpSUlJKSkpCQkI6OjoxMTEpKSkhISEZGRkQEBAICAgAAACSeDpBAAAAAXRSTlMAQObYZgAAAAlwSFlzAAAOwwAADsMBx2+oZAAAAUhJREFUeJxdkVtPwjAUx09Zd8GOjHmJgCEkvoiX+IA++P3f1YhvRokkEoyKjOwSNtvVno4Bo8nOafs7t/5HQS/aZyYhUqZfY1jdaOtdak9Ivdd82gK0uC9ieuMN6KMNxnDaUP5wC+ypLxwCPN5ZZfHCvbVr1gtuMgUMytdgNltFGetWZSKwk4ZpkNoucC4YgerSwBmgy5bCNavgSlk5GQEMqsCp47gjfHq1VAfPczzpBL4GehYb5UBgsLgEf7jxnSU7x1Ry9lCCSVfl2LfcLFq4XnTENOALHwsqOeYWA1jE1uK7q8d9vvYwmH+O6I01fQXupxF1swxg6Ph1ESnF+L0dE7cV5A6N3U4QiuV0Nb7IWh68pySgMkzax3maJhxfatuGmP1IkJHqIT5q7KC5r9rnwON5LDda5WFo2L4F2W+a7/4PkSRV2f8BWuhrFQakPxcAAAAASUVORK5CYII='
am32='data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAC9UExURf//////9//37//35vf39//33v/v1v/vzu/v7//mxf/mvf/mtebm5v/erf/epd7e3v/WnP/WlNbW1v/OjP/OhP/Fe87Ozv/Fc//Fa/+9Y/+9WsXFxf+1Qr29vf+tOv+tMbW1tf+lKf+lIf+lGa2trf+cEP+cCP+cAKWlpf+UAJycnJSUlIyMjISEhHt7e3Nze3Nzc2tra2NjY1paWlJSUkpKSkJCQjo6OjExMSkpKSEhIRkZGRAQEAgICAAAAIvb56oAAAABdFJOUwBA5thmAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAIXRFWHRDcmVhdGlvbiBUaW1lADIwMTM6MDI6MjQgMjI6Mzc6MTA4QAx/AAABlUlEQVQ4T42S6XaCMBCFoyKLgFgE6kZVJCqKqAVXwPd/rMIMUKL2nM4PDXc+LrOEkCoUNwijKNy7yq9WO2nH+FFEvBdfEftepvP/y4vJuHoduYhjPbgz6vG1BG0WmEE62WqcFqRwDljgCKIP4gnOIQv4tzh5xFjZDoDTUx+iotsWalsAzm9nQThFt77/ArjxLrzeE6zx1YHbXIvUe0CJUK/iqQYOe3tcD2sbW34CfBBTP1/Suy7EGwAHaA1h1mGMBjiIAB7YQa1Bi7XaqC/MoDbooOeildTpAkMH2KBYLJ5dp4UzSvf25oJs9jAjpCmpAnhwlVymc7+m6VCP4kfcWuKyAb9QlE2Z7xYA8atFhArciCC/lJLcckgLPewoTtP0fnJhFPdt9ssPaVeYE2PQaQCiWJZe3vZs5NKAUpX0RoSo86khNJm5NPj+ZOlNsg4MKUu0Pqk3HxmqxPNtnhfk/mi69DznIzcuXuRNx/O8FaULSrNcFtN+UVvp3FKH08UKcqvFl9lhP4lUoy31DNPoSW0s+r/xA/OLYQF3u2c4AAAAAElFTkSuQmCC'
am='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAApVBMVEX///////f/9+//9+b39/f/79b/78Xv7+//5sX/5r3/5rX/5qXv5s7m5ub/3q3/3qXm3tbe3ube3t7W3ub/1pzW1tb/zoTO1t7/znvOzs7/xXP/vVrFxcX/vUr/tVL/tUr/tUK9vb2ttbX/pSH/pRmtra2cnJyUlJSMjIyEhIR7e3tzc3Nra2taWlpKSko6OjoxMTEpKSkhISEZGRkQEBAICAgAAAB/mlyyAAAAAXRSTlMAQObYZgAAAAlwSFlzAAAOwwAADsMBx2+oZAAAAMtJREFUeJw9zlFrAjEMB/B/mnirp2d3DsEHRcYQfPP7fw5lDPY40DnxwXO3O8/2us7qCgnJjyRUEN5zJgr2/G5DLSHmjxRykizWESQjfBemB52drsAX177ic8mkI5xXkKHp/K3dbshL995GWKSwtcvUHSYp3Mdelv8TPcDukavbfuRRMSbQcAsKUAyIZ55bhaSf6gBb01fKl19Tv6n0jwxQvj0ZHA+o2U/Ki5z0mJtDQ6b7IHZXs/hqo/OcybtmVwMu3PBVBVati//4BQy6QvQBnUlFAAAAAElFTkSuQmCC"'

flag_usa='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAQCAMAAABA3o1rAAADAFBMVEX/5u/35u/35ub33ub31t7W1t7O1ubvxdbF1ubvxc7F1t7ehJTee5TWe5Tea4TWa4TWY4TOUnPOSmvFSmvFKVLFIUq9IUo6UoQxUoQ6SoQ6SnsxSoQpSoQpSnspQns6OnMhQnsxOnMhQnO1ADE6MWshOnMxMWsZOnMZMXMZMWsQMWsQKWsIKWMAKWMAIWMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD5VTxSAAAACXBIWXMAAAsSAAALEgHS3X78AAAAo0lEQVR4nIXOWw6CMBAF0A60AzJUEbbh/rfjBsDUmpaXgEj8MAxJ5361PZlbeasvpnjql/bJCG4R+5GgDRmyJ5t4FbU+YmDpsMcRJ1yUUDmxFVIIiGCKt4euHfgGSC35bE3aqRRn4BWW3BaPAwg8+GRhzvYb6jGpfczAbKqmasrH1WX9OydecRevX9YZWIOQ6v+kDgC/2gEXAmUINCGgQ6AKgA/rrD8QSrc2DwAAAABJRU5ErkJggg=='
flag_uk='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAQCAMAAABA3o1rAAABelBMVEX////3///v////9/f/9+/v9///7/f/7+//5u//5ub35u/35ube7/f/3t733ub33t7v3t7/1tb31t731tbe3u/v1t7W3u/3ztbO3u/3zs7vztbO1ub3xc73xcXF1ubOzt73vcX3vb3exdbFzub3tb29xd61xd7vrbXmrbW1vd6tvdattdbvnKXvlJycrc7vjJTmjJzvhJTmhJS9lK21lK3FjKWtlLW9jKXme4zme4S1jK2MnMWtjK2EnMWljLWljK17nMXmc3vma3t7lL3eY3N7hLXmWmveWmvWWnPWWmvmUmPWUmPmSlrmSlLeSmPeSlrmQlJjc63eQlJac61aa63eOkrWOlJSa61Sa6XeMUreMULWMUpSY6XWMUJKY6VCY6XWKTpCWqVCWpzWITrWITE6WqU6WpwxWqVCUpzWGTHWGSk6Upw6UpQxUpzWECnOECnOECEpSpTOCCEhSpQhQpQIMYwQKYQIKYQAKYQAIYQAIXsAGXsAGXMAEHOa/N36AAAACXBIWXMAAAsSAAALEgHS3X78AAABiUlEQVR4nF1Q20oCURTdzuwZNbSyouxm5mXygt1AC4IIC4Ie66XXvqwvyN6igjIiMOwlJEdTU7OLFQlmmuSkp3Oyh6YFm3P2WmufvTi4DulUS1rqAobi3rpY3dnSs3uzmDX23MTxvWJzJeW4Z94Mf9Esyr2W3EndjoFGJs8sMrVwvyqnUFnKndbt/jEkglfKFGyTsVTCHdQwWYDHpFHKRSrOOQvXwjqlxvuurqUhWU4MMMNHyDT2fFYTlid5KuJ2e+jjTgedyhsLYnqpFj6hk4vFFNrhhiqbRgTDqopBA/yHmsGGqhVpqRkM/Rw8NL+IICjdQbF2VEEQFEUHzR/DGl2sr6fPFa3XXHh6BSAvmhI4vI1by7jwRQAHgSPFSFLnc5VL09wBnenYvI9mnv2LT9kJM/0HDSlE0toZV/nauiQ8skcV9Eqp6LHRP5y9dA+iHE9pZ5m8gqRF2sFavMeZZhbHQx539bPucn7UxwP5k52gR8pchE1T/WgNjBx2LYgE/oHwbvt+LGz9BjZUmVlrSkg6AAAAAElFTkSuQmCC'
flag_de='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAQCAMAAABA3o1rAAADAFBMVEX/1gD/zgD3nADeAADWAAAhAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8vneUAAAACXBIWXMAAAsSAAALEgHS3X78AAAAJklEQVR4nGNhY8APWAjIU0PBf9orIOgGyhUQdMM/QgoYKXYDxQoA9g0FQmNcAkEAAAAASUVORK5CYII='
flag_fr='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAQCAMAAABA3o1rAAAAFVBMVEX////e5vf/zs7vKTrvITEIKZwAIZQ2fcv2AAAACXBIWXMAAAsSAAALEgHS3X78AAAAHklEQVR4nGNhY4CB/3/+w5hMjHBRFgYCYFTBcFIAAFq5A0SuVVsgAAAAAElFTkSuQmCC'
flag_it='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAQCAMAAABA3o1rAAAAElBMVEX////e9+b3zs4IlEoAlELOKTGFuyOzAAAACXBIWXMAAAsSAAALEgHS3X78AAAAHklEQVR4nGNhYYCB///+w5hMzHBRhDwOMKpgOCkAAF6VA0ZU/wYIAAAAAElFTkSuQmCC'
flag_es='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAQCAMAAABA3o1rAAAAn1BMVEX/zgD/xQD3xQD/vQDmvQj3tQDvtRDvtQDWrVLWtRnOtSHFnLXOrTHerQDmpQjWpTHOpTrWpSHOpTG9rSm9pVLOpQDFnELWlBDOjDHOjCm1hJTOhDq9e2PFhBC9e1K1hDHFezHvawjmawjmYwjFcwi9cwi1axC1awi1awCcYzGlWhC1SgilShmlSghzUlqUQgicOhBzQimEOhnFCBnFABmRYVP6AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAfElEQVR4nGMxZsAPWAjIM7AwElLwnpCCu3AmE8M/fFYwSnMy/H/0C1MBlOZhYOf89e2/yBtcCpg4eZg+fmRiZEK3Bm4C619GEaY/bDgVfP3D/peJ/803DHey/IfQvxgecDH++cb/7z+6AiVUPj+GCULoIjiswK2AgDxhBQAuDR58Mun5CAAAAABJRU5ErkJggg=='
flag_ca='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAQCAMAAABA3o1rAAAAVFBMVEX/////9/f/7+//1tb/zs7/xcX/vb3/tbX/ra3/paX/nJz/lJT/jIz/hIT/e3v/c3P/a2v/Y2P/Wlr/UlL/Skr/QkL/Ojr/KSn/ISH/EBD/CAj/AAB2QbmSAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAnUlEQVR4nIWQ6wrDIAyFj9V2LVvXscH+7P3fbjfWslKjZlLZQFEWCMk5fkSjuiDEa0QU+z5UFdsQ2yk2YkCIZiByZYBPNY76VgQq5ypUFoKzwKZVtHSAHqSddQawO7TG1957U26CZLFKnyxtBjCm/rb0O4+uuB660L2fnAPg7ud1xvIorYkRptGKUQRm/1QilAH/2amRal7+AKBEfwBsEjBBB5raHwAAAABJRU5ErkJggg=='

url_usa='http://www.amazon.com/gp/search?ie=UTF8&index=aps&keywords={searchTerms}&tag=metasearch-20'
url_uk='http://www.amazon.co.uk/gp/search?ie=UTF8&index=aps&keywords={searchTerms}&tag=metasearch03-21'
url_de='http://www.amazon.de/gp/search?ie=UTF8&index=aps&keywords={searchTerms}&tag=metasearch-21'
url_fr='http://www.amazon.fr/gp/search?ie=UTF8&index=aps&keywords={searchTerms}&tag=metasearch09-21'
url_it='http://www.amazon.it/gp/search?ie=UTF8&index=aps&keywords={searchTerms}&tag=claudidivizip-21'
url_es='http://www.amazon.es/gp/search?ie=UTF8&index=aps&keywords={searchTerms}&tag=metasearch01-21'
url_ca='http://www.amazon.ca/gp/search?ie=UTF8&&index=aps&keywords={searchTerms}&tag=metasearch0f-20'

function clear(s)
{
	s=s.split('/')[document.URL.split('/').length-1]
	s=s.split('(')[0]
	s=s.replace(/_/g,' ').replace('-',' ')
	return s
}

// CONSTS
	q=clear(document.URL)
	x=200;
	y=0;
	node='body';

// CA
	if (document.URL.indexOf('en.wikipedia')!==-1)
	{
	style='position:fixed;right:'+x+'px;top:'+y+'px;z-index:1000000'
	$('<SPAN style="'+style+'"><A href="'+url_ca.replace('{searchTerms}',q)+'"><IMG src="'+flag_ca+'" title="Amazon.ca"></A></SPAN>').insertAfter(node);
	x=x+33;
	}

// USA
	style='position:fixed;right:'+x+'px;top:'+y+'px;z-index:1000000'
	$('<SPAN style="'+style+'"><A href="'+url_usa.replace('{searchTerms}',q)+'"><IMG src="'+flag_usa+'" title="Amazon.com"></A></SPAN>').insertAfter(node);
	x=x+33;

// UK
	style='position:fixed;right:'+x+'px;top:'+y+'px;z-index:1000000'
	$('<SPAN style="'+style+'"><A href="'+url_uk.replace('{searchTerms}',q)+'"><IMG src="'+flag_uk+'" title="Amazon.co.uk"></A></SPAN>').insertAfter(node);
	x=x+33;

// DE
	if (document.URL.indexOf('de.wikipedia')!==-1)
	{
	style='position:fixed;right:'+x+'px;top:'+y+'px;z-index:1000000'
	$('<SPAN style="'+style+'"><A href="'+url_de.replace('{searchTerms}',q)+'"><IMG src="'+flag_de+'" title="Amazon.de"></A></SPAN>').insertAfter(node);
	x=x+33;
	}

// FR
	if (document.URL.indexOf('fr.wikipedia')!==-1)
	{
	style='position:fixed;right:'+x+'px;top:'+y+'px;z-index:1000000'
	$('<SPAN style="'+style+'"><A href="'+url_fr.replace('{searchTerms}',q)+'"><IMG src="'+flag_fr+'" title="Amazon.fr"></A></SPAN>').insertAfter(node);
	x=x+33;
	}

// IT
	if (document.URL.indexOf('it.wikipedia')!==-1)
	{
	style='position:fixed;right:'+x+'px;top:'+y+'px;z-index:1000000'
	$('<SPAN style="'+style+'"><A href="'+url_it.replace('{searchTerms}',q)+'"><IMG src="'+flag_it+'" title="Amazon.it"></A></SPAN>').insertAfter(node);
	x=x+33;
	}

// ES
	if (document.URL.indexOf('es.wikipedia')!==-1)
	{
	style='position:fixed;right:'+x+'px;top:'+y+'px;z-index:1000000'
	$('<SPAN style="'+style+'"><A href="'+url_es.replace('{searchTerms}',q)+'"><IMG src="'+flag_es+'" title="Amazon.es"></A></SPAN>').insertAfter(node);
	x=x+33;
	}

// ALL
	style='position:fixed;right:'+x+'px;top:'+y+'px;z-index:1000000'
	{$('<SPAN style="'+style+'"><A href="'+url_uk.replace('{searchTerms}',q)+'"><IMG src="'+am+'" title="Amazon.co.uk"></A></SPAN>').insertAfter(node);}
	x=x+17;

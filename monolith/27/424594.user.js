// ==UserScript==
// @name        Pack script
// @description Script multifunzione
// @version     1.1
// @include     *.forumfree.it/*
// @include     *.forumcommunity.net/*
// @include     *.blogfree.net/*
// ==/UserScript==
function oldLayout(){return"BackCompat"==document.compatMode}$.fn.selectRange=function(a,c){c||(c=a);return this.each(function(){if(this.setSelectionRange)this.focus(),this.setSelectionRange(a,c);else if(this.createTextRange){var b=this.createTextRange();b.collapse(!0);b.moveEnd("character",c);b.moveStart("character",a);b.select()}})};var sep_ARR=[],font_ARR=[],origColorSize="",nbColorsList="#000000 #7f0000 #8c4614 #2f4f4f #007f7f #020282 #4b0082 #686868 #b22222 #a52a2a #d9a41f #006300 #3fdfcf #0000cb #810181 #808080 #ff0000 #ff8c00 #ffd801 #008000 #01ffff #0101ff #ef83ef #a9a9a9 #fe9f79 #ffa500 #fefe00 #00fe00 #afeeee #acd7e5 #dda0dd #d4d4d4 #feeff4 #faebd7 #fefedf #f0fff0 #f0ffff #f0f8ff #e7e7fb #ffffff".split(" "); if(-1!=$(location).attr("href").indexOf("&t="))var sezId=$(location).attr("href").split("&f=")[1].split("&t=")[0],topicId=$(location).attr("href").split("&t=")[1],controlPost=!0;else sezId=$(location).attr("href").split("&f=")[1],controlPost=!1;0!=$(".color").length&&(origColorSize=Number($(".color").css("font-size").split("px")[0])); function addTitleBBCode(a,c){var b=$("#TopicTitle").val().length,d=$("#TopicTitle")[0].selectionStart,f=$("#TopicTitle")[0].selectionEnd,e=$("#TopicTitle").val().substring(d,f),e=a+e+c;$("#TopicTitle").val($("#TopicTitle").val().substring(0,d)+e+$("#TopicTitle").val().substring(f,b));b=d==f?d+a.length:b+e.length;$("#TopicTitle").selectRange(b)}$("#TopicTitle").after('<br><button class="codebuttons titleBBCode" title="Inserisci Testo in Grassetto (alt + b)" accesskey="b" type="button">&nbsp;<b>B</b>&nbsp;</button>&nbsp;<button class="codebuttons titleBBCode" title="Inserisci Testo in Corsivo (alt + i)" accesskey="i" type="button">&nbsp;<i>I</i>&nbsp;</button> <button class="codebuttons titleBBCode" title="Inserisci Testo Sottolineato (alt + u)" accesskey="u" type="button">&nbsp;<u>U</u>&nbsp;</button> <button class="codebuttons titleBBCode" title="Inserisci Testo Barrato (alt + s)" accesskey="s" type="button"><del>&nbsp;S&nbsp;</del></button>&nbsp;<select class="codebuttons titleSelBBCode" title="Inserisci tag Tipo Carattere" data-n="font-family"><option value="0">Font</option><option value="Arial">Arial</option><option value="Times">Times</option><option value="Courier">Courier</option><option value="Impact">Impact</option><option value="Geneva">Geneva</option><option value="Optima">Optima</option></select>&nbsp;<select class="codebuttons titleSelBBCode" title="Inserisci tag Grandezza Carattere" data-n="font-size"><option value="0">Dimens.</option><option value="1">8pt</option><option value="2">9pt</option><option value="3">10pt</option><option value="4">11pt</option><option value="5">12pt</option><option value="6">13pt</option><option value="7">14pt</option><option value="8">15pt</option><option value="9">16pt</option><option value="10">17pt</option><option value="11">18pt</option><option value="12">19pt</option><option value="13">20pt</option><option value="14">21pt</option><option value="15">22pt</option><option value="16">23pt</option><option value="17">24pt</option><option value="18">25pt</option><option value="19">26pt</option><option value="20">27pt</option><option value="21">28pt</option><option value="22">29pt</option><option value="23">30pt</option></select>&nbsp<select class="codebuttons titleSelBBCode" title="Inserisci tag Colore Carattere" data-n="color"><option value="0">Colore</option><option style="background:#000000" value="#000000"></option><option style="background:#7f0000" value="#7f0000"></option><option style="background:#8c4614" value="#8c4614"></option><option style="background:#2f4f4f" value="#2f4f4f"></option><option style="background:#007f7f" value="#007f7f"></option><option style="background:#020282" value="#020282"></option><option style="background:#4b0082" value="#4b0082"></option><option style="background:#686868" value="#686868"></option><option style="background:#b22222" value="#b22222"></option><option style="background:#a52a2a" value="#a52a2a"></option><option style="background:#d9a41f" value="#d9a41f"></option><option style="background:#006300" value="#006300"></option><option style="background:#3fdfcf" value="#3fdfcf"></option><option style="background:#0000cb" value="#0000cb"></option><option style="background:#810181" value="#810181"></option><option style="background:#808080" value="#808080"></option><option style="background:#ff0000" value="#ff0000"></option><option style="background:#ff8c00" value="#ff8c00"></option><option style="background:#ffd801" value="#ffd801"></option><option style="background:#008000" value="#008000"></option><option style="background:#01ffff" value="#01ffff"></option><option style="background:#0101ff" value="#0101ff"></option><option style="background:#ef83ef" value="#ef83ef"></option><option style="background:#a9a9a9" value="#a9a9a9"></option><option style="background:#fe9f79" value="#fe9f79"></option><option style="background:#ffa500" value="#ffa500"></option><option style="background:#fefe00" value="#fefe00"></option><option style="background:#00fe00" value="#00fe00"></option><option style="background:#afeeee" value="#afeeee"></option><option style="background:#acd7e5" value="#acd7e5"></option><option style="background:#dda0dd" value="#dda0dd"></option><option style="background:#d4d4d4" value="#d4d4d4"></option><option style="background:#feeff4" value="#feeff4"></option><option style="background:#faebd7" value="#faebd7"></option><option style="background:#fefedf" value="#fefedf"></option><option style="background:#f0fff0" value="#f0fff0"></option><option style="background:#f0ffff" value="#f0ffff"></option><option style="background:#f0f8ff" value="#f0f8ff"></option><option style="background:#e7e7fb" value="#e7e7fb"></option><option style="background:#ffffff" value="#ffffff"></option></select>&nbsp; <input type="text" class="textinput" value="100" style="width: 25px" id="textTitleRemain" readonly>'); $(function(){if(oldLayout()){if(0!=sep_ARR.length)for(a=0;a<sep_ARR.length;a++)$("#f"+sep_ARR[a].sep_ID).after('<tr class="title separator" id="'+sep_ARR[a].sep_ID+'"><td colspan="5" class="sep_title">'+sep_ARR[a].sep_TITLE+"</td></tr>");$(".topic .title .lt").append('&nbsp;&nbsp;<a title="Diminuisci le dimensioni dei font." style="cursor: pointer; font-size: 6pt" class="color_minus" id="colorMinus"><i>A-</i></a>&nbsp;&nbsp;<a title="Ripristina le dimensioni originali dei font." style="cursor: pointer; font-size: 8pt" class="color_restore" id="colorRestore"><u>A=</u></a>&nbsp;&nbsp;<a title="Aumenta le dimensioni dei font." style="cursor: pointer; font-size: 10pt" class="color_plus" id="colorPlus"><b>A+</b></a>'); if(-1!=$(location).attr("href").indexOf("?act=Post&CODE=")){c='<option value="0">Colore</option>';b='<option value="0">Dimens.</option>';for(a=0;a<nbColorsList.length;a++)c+='<option value="'+nbColorsList[a]+'" style="background:'+nbColorsList[a]+'"></option>';$("select[name='COLOR']").html(c);for(a=1;24>a;a++)b+='<option value="'+a+'">'+(a+7)+"pt</option>";$("select[name='SIZE']").html(b);for(a=0;a<font_ARR.length;a++)$("select[name='FONT']").append('<option value="'+font_ARR[a]+'">'+font_ARR[a]+ "</option>");-1==$(location).attr("href").indexOf("?act=Post&CODE=02")&&($("#mod_options, label[for='mod_options']").hide(),$(".forminput[value='Invia la nuova Discussione']").val("Invia e...").after('<input type="checkbox" name="closeSendMess" class="send_check_options"><label for="closeSendMess" class="send_check_label">Chiudi</label><input type="checkbox" name="impSendMess" class="send_check_options"><label for="impSendMess" class="send_check_label">Metti in rilievo</label>'))}}else{for(var a= 0;a<sep_ARR.length;a++)$("#f"+sep_ARR[a].sep_ID).after('<li class="title separator" id="sep'+sep_ARR[a].sep_ID+'"><div class="bb sep_title">'+sep_ARR[a].sep_TITLE+"</div></li>");$(".topic .title .left").append('&nbsp;&nbsp;<a title="Diminuisci le dimensioni dei font." style="cursor: pointer; font-size: 6pt" class="color_minus" id="colorMinus"><i>A-</i></a>&nbsp;&nbsp;<a title="Ripristina le dimensioni originali dei font." style="cursor: pointer; font-size: 8pt" class="color_restore" id="colorRestore"><u>A=</u></a>&nbsp;&nbsp;<a title="Aumenta le dimensioni dei font." style="cursor: pointer; font-size: 10pt" class="color_plus" id="colorPlus"><b>A+</b></a>'); if(-1!=$(location).attr("href").indexOf("?act=Post&CODE=")){for(var c='<option value="0">Colore</option>',b='<option value="0">Dimens.</option>',a=0;a<nbColorsList.length;a++)c+='<option value="'+nbColorsList[a]+'" style="background:'+nbColorsList[a]+'"></option>';$("select[title='Inserisci tag Colore Carattere']").html(c);for(a=1;24>a;a++)b+='<option value="'+a+'">'+(a+7)+"pt</option>";$("select[title='Inserisci tag Grandezza Carattere']").html(b);for(a=0;a<font_ARR.length;a++)$("select[title='Inserisci tag Tipo Carattere']").append('<option value="'+ font_ARR[a]+'">'+font_ARR[a]+"</option>");-1==$(location).attr("href").indexOf("?act=Post&CODE=02")&&($("#mod_options").hide(),$(".forminput[value='Invia la nuova Discussione']").val("Invia e...").after('<input type="checkbox" name="closeSendMess" class="send_check_options"><label for="closeSendMess" class="send_check_label">Chiudi</label><input type="checkbox" name="impSendMess" class="send_check_options"><label for="impSendMess" class="send_check_label">Metti in rilievo</label>'))}}}); $(document).on("click","#colorMinus",function(){var a=Number($(".color").css("font-size").split("px")[0])-1;5<a&&$(".color, .color *").css("font-size",a)});$(document).on("click","#colorPlus",function(){var a=Number($(".color").css("font-size").split("px")[0])+1;30>a&&$(".color, .color *").css("font-size",a)});$(document).on("click","#colorRestore",function(){$(".color, .color *").css("font-size",origColorSize)}); $(document).on("click",".titleBBCode",function(){var a="s"==$(this).attr("accesskey")?"del":$(this).attr("accesskey");addTitleBBCode("<"+a+">","</"+a+">");$("#textTitleRemain").val(100-$("#TopicTitle").val().length)});$(document).on("change",".titleSelBBCode",function(){addTitleBBCode('<span style="'+$(this).attr("data-n")+":"+$(this).find("option:selected").val()+'">',"</span>");$("#textTitleRemain").val(100-$("#TopicTitle").val().length);$(this).prop("selectedIndex",0)}); $(document).on("keyup","#TopicTitle",function(){$("#textTitleRemain").val(100-$("#TopicTitle").val().length)}); $(document).on("click",".send_check_options",function(){"closeSendMess"==$(this).attr("name")?$('#mod_options option[value="close"]').prop("selected",!0):"impSendMess"==$(this).attr("name")&&$('#mod_options option[value="pin"]').prop("selected",!0);"closeSendMess"==$(this).attr("name")&&$(".send_check_options[name='impSendMess']").is(":checked")?$(".send_check_options[name='impSendMess']").prop("checked",!1):"impSendMess"==$(this).attr("name")&&$(".send_check_options[name='closeSendMess']").is(":checked")&& $(".send_check_options[name='closeSendMess']").prop("checked",!1);$(".send_check_options[name='impSendMess']").is(":not(:checked)")&&$(".send_check_options[name='closeSendMess']").is(":not(:checked)")&&$('#mod_options option[value="nowt"]').prop("selected",!0)});
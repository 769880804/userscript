// ==UserScript==
// @name           Simplify Google Reader
// @author         kshift
// @namespace      http://kshift.me/
// @description    Clarifies google reader and makes reading interface fair and distinct. Hope you will like it. :)
// @include        http://*.google.*/reader/*
// @include        https://*.google.*/reader/*
// @include        htt*://*.google.*/reader/view*
// @updateURL      http://userscripts.org/scripts/source/140900.meta.js
// @downloadURL    http://userscripts.org/scripts/source/140900.user.js
// @version        2.4.1
// @license        GPL version 3 or any later version; http://www.gnu.org/copyleft/gpl.html
// @run-at         document-start
// ==/UserScript==
unsafeWindow.AddSearchBar = function() {
    var searchForm = document.getElementById('gbqfw');
    var searchBar = document.createElement('div');
    var buttonX = document.getElementById('stream-prefs-menu');

    searchForm.parentNode.removeChild(searchForm);
    searchBar.setAttribute('id', 'mySearchBar');
    searchBar.innerHTML = '<form id="gbqf" name="gbqf" method="get" action="" onsubmit="gbar.logger.il(31);return executeSearch();" _lpchecked="1"><fieldset class="gbxx"><legend class="gbxx">隐藏字段</legend><div id="gbqffd"></div></fieldset><fieldset class="gbqff" id="gbqff"><legend class="gbxx">Search Reader</legend><div id="gbfwa" class="gbqfwa "><div id="gbqfqw" class="gbqfqw"><div id="gbqfaa"></div><div id="gbqfqwb" class="gbqfqwb"><input id="gbqfq" class="gbqfif" name="q" type="text" autocomplete="off" value="" placeholder="Search Reader"></div><div id="gbqfab"></div><div class="goog-inline-block search-restrict" title="" role="listbox" style="-webkit-user-select: none;" tabindex="0" aria-haspopup="false"><div class="goog-inline-block search-restrict-caption"></div><div class="goog-inline-block search-restrict-dropdown">&nbsp;</div></div></div></div></fieldset></form>';
    buttonX.parentNode.insertBefore(searchBar, buttonX.nextSibling);
}

function ApplyCSS() {
    var cssDefalut = "body,button,input,select,textarea{font-family:Verdana,Arial,Microsoft Yahei,Hiragino Sans GB,WenQuanYi Micro Hei,sans-serif!important;}.tags-edit{margin-top: 45px!important; margin-left: 226px!important;}div.section_header_holder{margin-top: 0!important;}h2.section_header{text-align: left!important;}.entry .entry-container{padding-left: 1em!important; padding-right: 1em!important;}#lhn-add-subscription{top: 50%!important; margin-top: -15px!important; min-width: 60px!important; border-top: 1px solid #FFF!important; background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#F9F9F9), to(#E4E4E4))!important; background: -moz-linear-gradient(top, #F9F9F9, #E4E4E4)!important; background: linear-gradient(top, #F9F9F9, #E4E4E4)!important;}#main #nav{background: rgba(243,241,239,.8)!important; border-bottom: 1px solid #a7a2a0!important;}#lhn-add-subscription-section{height: 52px!important; border-bottom: 1px solid #AEB7BF!important; background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#DFE3E6), to(#B7C0C7))!important; background: -moz-linear-gradient(top, #DFE3E6, #B7C0C7)!important; background: linear-gradient(top, #DFE3E6, #B7C0C7)!important;}.jfk-button-primary{background-color: #F8F8F8!important; background-image: -webkit-linear-gradient(top,#F8F8F8,#ECECEC)!important; background-image: -moz-linear-gradient(top,#F8F8F8,#ECECEC)!important; color: #777!important; border-color: #C6C6C6!important;}#sub-tree-header{border-left: 0!important;}.scroll-tree .lhn-section-primary{border: none!important;}#recs-tree-item-0-name{margin-left: 3px!important;}.lhn-section-primary{display: block!important; margin-left: 0!important; margin-bottom: -2px!important; text-indent: 10px!important; font-size: 12px!important; color: #666!important; text-shadow: #fff 0 1px 0!important;}.lhn-section-primary span{font-weight: 500!important;}div#nav li{background: transparent!important; line-height: 32px!important;}.sub-icon,.folder-toggle,.folder-icon{margin-top: 5px!important;}div#nav ul#sub-tree li.folder ul li.folder ul li.sub{margin-left: 8px!important;}div#nav ul#sub-tree li.folder > ul li.sub > a{border-bottom: 1px solid #f0eeec!important;}div#nav ul#sub-tree li.folder > ul li.sub > a:hover{background: #fff!important;}.scroll-tree li.folder .link,.scroll-tree li.sub{height: 32px!important;}#viewer-header-container{border-bottom: 0!important;}#viewer-header{height: 34px!important;}#viewer-top-controls-container{margin-top: -14px!important;}div#home,div.card div.entry-container{width: 95%!important; margin: 0 auto!important;}body.lhn-hidden div#home,body.lhn-hidden div.card div.entry-container{width: 90%!important; margin: 0 auto!important;}div.entry-container{background: #FAF8F9!important;}div#entries{top: -10px!important; margin-left: -5px!important;}div#viewer-top-controls{height: 26px!important; min-width: 400px!important;}div#chrome{border-left: 1px solid #929393!important; background: #faf9f8!important;}div.card{border: 0!important; background: transparent!important; -webkit-box-shadow: none!important; -moz-box-shadow: none!important; margin-top: 1em!important;}#current-entry .card .card-content,.card .card-content{padding: 1em 0 0!important;}div.entry div.entry-main{margin-left: 24px!important;}a.entry-title-link{background: transparent!important;}.entry .entry-body div.item-body{margin-top: .8em!important;}.entry .entry-body div.item-body h3{clear: both!important; margin-top: 1em!important;}.entry .entry-body div.item-body ol,.entry .entry-body div.item-body ul{display: block!important; padding-left: 0!important; margin-left: 2em!important; clear: left!important;}.entry .entry-body div.item-body ol li,.entry .entry-body div.item-body ul li{margin-bottom: .8em!important;}.entry .entry-body div.item-body dt{color: #000!important;}div.entry-author,.collapsed div.entry-date,div.entry-container div.entry-date{color: #969696!important;}div.entry-container div.entry-date{float: right!important; margin-top: 5px!important;}.collapsed div.entry-date{margin-top: 2px!important; margin-right: 8px!important;}div.single-source .collapsed div.entry-date{margin-top: 10px!important;}h2.entry-title{color: #333!important;}div.card-content h2.entry-title{-webkit-transition-duration: 400ms!important; -moz-transition-duration: 400ms!important; opacity: .6!important; top: 24px!important; position: relative!important; margin-bottom: 36px!important;}h2.entry-title a{color: #2e2e2d!important; font-size: 24px!important; line-height: 28px!important; font-weight: 500!important;}div#current-entry h2.entry-title{opacity: 1!important;}.entry .item-body,.entry .entry-body,.entry .entry-title,.entey .entry-likers{max-width: 96%!important;}div.entry-main{overflow: hidden!important;}div.card div.entry-author{position: absolute!important; top: 4px!important; font-size: 12px!important; clear: left!important; display: block!important;}span.entry-author-parent{display: none!important; font-style: italic!important;}div.card-actions{-moz-border-radius: 0!important; border-radius: 0!important; border-bottom: 1px dotted #c4c1bf!important; padding-bottom: 3.2em!important; padding-left: 22px!important;}div.entry-actions{margin-left: 2.1%!important;}div.entry-actions span{color: #7c7a79!important; opacity: 0!important;}div#current-entry.expanded div.entry-actions span,div.entry:hover div.card-actions span,div#current-entry div.card-actions span{opacity: 1!important;}div.entry-0{padding-top: 0!important;}.entry .item-body,.entry .entry-body{padding-top: 0!important; font-size: 16px!important; line-height: 28px!important; color: #666!important; font-weight: 400!important; text-shadow: #fff 0 1px 0!important;}.entry .item-body p em,.entry .entry-body p em{font-style: italic!important; color: #333335!important;}.entry .entry-body p strong{color: #333335!important; font-weight: bold!important;}.entry .entry-body p small{font-size: 11px!important; color: #999999!important;}.entry .entry-body abbr{padding: 0 2px!important; font-size: 90%!important; text-transform: uppercase!important; border-bottom: 1px dotted #999!important; cursor: help!important;}.entry .entry-body s,.entry .entry-body strike,.entry .entry-body del{text-shadow: none!important;}.entry .entry-body code,.entry .entry-body pre{padding: 0 3px 2px!important; font-family: Menlo,Monaco,'Courier New',monospace!important; font-size: 12px!important; color: #333333!important; -webkit-border-radius: 3px!important; -moz-border-radius: 3px!important; border-radius: 3px!important;}.entry .entry-body code{padding: 2px 3px 1px 3px!important; margin: 2px!important; color: #777!important; background-color: #F7F7F9!important; border: 1px solid #e1e1e8!important;}.entry .entry-body pre{display: block!important; padding: 8.5px!important; margin: 0 0 9px!important; font-size: 12px!important; line-height: 18px!important; background-color: #f5f5f5!important; border: 1px solid #ccc!important; border: 1px solid rgba(0, 0, 0, 0.15)!important; -webkit-border-radius: 4px!important; -moz-border-radius: 4px!important; border-radius: 4px!important; white-space: pre!important; white-space: pre-wrap!important; word-break: break-all!important; word-wrap: break-word!important;}.entry .entry-body pre code{padding: 0!important; color: #586E75!important; background-color: transparent!important; border: 0!important;}.entry .entry-body a{color: #08C!important; text-decoration: none;}.entry .entry-body a:hover{color: #005580!important; text-decoration: underline!important;}.entry .entry-body p img{clear: both!important; display: block!important; max-width: 100%!important; height: auto!important; margin: 1em 4px!important;}.entry .entry-body hr{height: 0!important; border: none!important; border-top: 1px solid #aaaaaf!important; border-bottom: 1px solid #fff!important;}.entry .entry-body blockquote{border-left: 5px solid #DDDDDD!important; margin-left: 4px!important; padding-left: 36px!important; color: #46464b!important; text-shadow: #fff 0 1px 0!important;}.entry .entry-body blockquote p{font-style: italic!important; font-size: 14px!important; font-weight: 300!important; line-height: 22.5px!important;}div.entry ul li,div.entry ol li{margin-bottom: .7em!important;}div.entry-body div dl dd{margin-left: 1.2em!important; margin-bottom: .5em!important;}div.entry ul li,div.entry ol li{margin-bottom: .7em!important;}div.entry-body div dl dd{margin-left: 1.2em!important; margin-bottom: .5em!important;}div#home div#overview span.overview-item-link{font-size: 13px!important; line-height: 20px!important;}div#entries.search div.search-result span.entry-date,div.collapsed span.entry-source-title,.collapsed div.entry-date,div.entry-container div.entry-date{color: #b4b4b4!important;}div#entries.search div.search-result span.entry-date,.collapsed div.entry-date,div.entry-container div.entry-date{font-size: 11px!important; text-transform: uppercase!important;}div#home div#overview span.item-title{font-size: 18px!important; line-height: 22px!important; color: #323232!important; margin-bottom: .4em!important;}div#chrome-header span#chrome-title a{font-size: 14px!important;}::-webkit-scrollbar{width: 4px!important;}::-webkit-scrollbar-thumb{border: none!important;}#viewer-header,#viewer-container,div.card-content{background: #faf9f8!important;}#gbx1,#top-bar{height: 50px!important; background-color: #F8F8F8!important; background-image: -webkit-linear-gradient(top,whiteSmoke,#E9E9E9)!important; border-bottom: 1px solid #CCC!important;}#gbq2,#gbu,h1#logo,#search{padding-top: 8px!important;}#gbx1,#gbq,#gbu,#gb.gbesi #gbx1,#gb.gbesi #gbq,#gb.gbesi #gbu{top: 0!important;}#nav,#logo-container,#lhn-add-subscription-section{max-width: 225px!important; width: 225px!important;}#chrome{margin-left: 225px!important;}#search{margin-left: 225px!important; padding-left: 3px!important;}.lhn-hidden #chrome{margin-left: 0!important;}.folder .folder .name-text{max-width: 92px!important;}.folder .name-text,#reading-list-selector .label{max-width: 85px!important;}.lhn-section-no-unread-counts .folder .folder .name-text,#lhn-recommendations .folder .folder .name-text{max-width: 131px!important;}.lhn-section-no-unread-counts .folder .folder .name-text.folder-name-text{max-width: 138px!important;}#entries.list .collapsed .entry-secondary{margin-right: 7em!important;}#entries .collapsed .entry-date{margin: 0 2em 0 0 !important;}.card-common .card-actions,.entry .entry-actions{height: 0!important; padding: 0!important;}#entries.list .entry .entry-actions > span{background: none!important;}.item-body img,.item-body a img,.item-body embed{max-width: 100%!important; height: auto!important;}#scrollable-sections-bottom-shadow,#scrollable-sections-top-shadow,#gbqfbw,#gbq1,#gbqlt,#logo-section,#title-and-status-holder,.state-stream div.entry-author div.entry-via,div.single-source.cards div.entry-author,#gbzw,#gbx3,#gbar,#guser,#gbx1,#gbq,#gbu,#top-bar,#home-section,#lhn-selectors,a:hover .tree-item-action-container,.menu-open .tree-item-action-container,.entry .entry-title .entry-title-go-to,#chrome-title .chevron,#current-entry.action-area-visible .entry-actions,#current-entry.active-action-area .entry-actions,.entry .entry-actions .item-star,.entry .entry-actions .email,.entry .entry-actions .tag,.entry .entry-actions .item-link{display: none!important;}#entries .entry-body,.entry .entry-title,.name-text{max-width: none!important;}div.entry-main p iframe,div.entry-body span.link.popout{display: none!important;}div.single-source.cards div.card-content h2.entry-title,div#entries.single-source.cards div#current-entry div.card-content h2.entry-title{top: 0!important; margin-bottom: 0!important;}.entry .item-body p,.entry .entry-body p,div#home div#overview div.overview-metadata{margin-bottom: 2em!important;}#gb,#top-bar,#gbqlw,#gbq,#gb{height: auto!important;}#gbx3,#gbx1{position: static!important;}.lhn-section-footer{margin-bottom: 0!important;}.folder .name.name-d-0{padding-left: 0!important; font-weight: 500!important; margin-bottom: -2px!important; color: #666!important;}#current-entry .item-body,.entry .entry-body,.scroll-tree li a .name-unread,.lhn-section-footer a{color: #333!important;}#recommendations-tree>li{margin: 0!important;}#sub-tree,#lhn-recommendations{box-shadow: inset -1px 0 6px -3px #000!important; background-color: #EFEFEF !important;}#scrollable-sections{position: fixed!important; top: 52px!important; left: 0!important; bottom: 0!important; width: 225px!important; border-right: 1px solid #ABA99D!important; background-color: #EFEFEF !important;}#scrollable-sections .selector,#sub-tree .sub,#sub-tree .link,.lhn-section-primary{border-top: 1px solid transparent !important; padding-bottom: 0!important; padding-top: 0!important;}#scrollable-sections .selector:hover,#sub-tree .link:hover{background: none!important;}#scrollable-sections .selector.selected,#sub-tree .tree-link-selected,#lhn-selectors .selected:hover,#sub-tree .tree-link-selected:hover,.lhn-section-primary{border-top: 1px solid #FFF!important; box-shadow: 0 0 2px 0 #555555!important; background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#F9F9F9), to(#E4E4E4))!important; background: -moz-linear-gradient(top, #F9F9F9, #E4E4E4)!important; background: linear-gradient(top, #F9F9F9, #E4E4E4)!important;}.lhn-section-secondary li a{border-left: 3px solid #EFEFEF!important;}#lhn-recommendations-minimize,#lhn-subscriptions-minimize{margin-left: 5px!important;}.section-menubutton{top: 5px!important; right: 5px!important;}#entries.search .entry{background: #FAF8F9!important; border: none!important; border-top: 1px dotted #CCC!important;}#entries.search h2.entry-title a{color: #5e73a7!important; font-size: 18px!important; line-height: 28px!important; font-weight: 500!important; text-decoration: none!important;}#entries.search .item-star{display: none!important;}#entries.search .entry-secondary-snippet{color: #333!important; line-height: 1.5em!important; font-size: 14px; max-width: 980px!important;}#entries.search .entry-attribution{float: right!important;}#mySearchBar{max-width: 200px!important; float: left!important;}.gbqfif,.gbqfsf{font-size: 14px!important;}";
    GM_addStyle(cssDefalut);
}

ApplyCSS();
window.setTimeout('AddSearchBar()', 2500);
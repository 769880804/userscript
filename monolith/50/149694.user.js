/* Copyright license

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///  Sugeng Harto is my name and he is a member of EMWI Reseach Team (Tim Riset EMWI),                                 ///
///  he isn't create this script but just make a little change..bla..bla..bla..                                        ///
///  pake bahasa linggis segala pokoknya modififikator yang gak mampu buat beli sekrup yang MWAP PRO.                  ///
///  wakakak... jangan lupa donasinya ya. :-).                                                                         ///
///  Buat my honey Nunung Nuraini istri yang paling kucintai...(edisi lebay maning)                                    ///
///                                                                                                                    ///
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                      //
// /$$$$$$$$                               /$$        /$$$$$$                      /$$             /$$                  //
// |__  $$__/                              | $$       /$$__  $$                    |__/            | $$                 //
//    | $$    /$$   /$$ /$$   /$$ /$$   /$$| $$      | $$  \__/  /$$$$$$$  /$$$$$$  /$$  /$$$$$$  /$$$$$$    /$$$$$$$   //
//    | $$   | $$  | $$| $$  | $$| $$  | $$| $$      |  $$$$$$  /$$_____/ /$$__  $$| $$ /$$__  $$|_  $$_/   /$$_____/   //
//    | $$   | $$  | $$| $$  | $$| $$  | $$| $$       \____  $$| $$      | $$  \__/| $$| $$  \ $$  | $$    |  $$$$$$    //
//    | $$   | $$  | $$| $$  | $$| $$  | $$| $$       /$$  \ $$| $$      | $$      | $$| $$  | $$  | $$ /$$ \____  $$   //
//    | $$   |  $$$$$$/|  $$$$$$$|  $$$$$$/| $$      |  $$$$$$/|  $$$$$$$| $$      | $$| $$$$$$$/  |  $$$$/ /$$$$$$$/   //
//    |__/    \______/  \____  $$ \______/ |__/       \______/  \_______/|__/      |__/| $$____/    \___/  |_______/    //
//                      /$$  | $$                                                      | $$                             //
//                     |  $$$$$$/                                                      | $$                             //
//                      \______/                                                       |__/                             //
//                                                                                                                      //
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


*/

/**
* @package: Facebook Mafia Wars Autoplayer
* @authors: TinHat Software Ltd.
* @created: March 23, 2009
* @credits: (C) RX6 MWAP www.playerscripts.co.uk - All rights reserved.
* @Modificator : Sugeng Harto
*/

// ==UserScript==
// @name        PS Facebook Mafia Wars Autoplayer (MWAP)
// @namespace   mafiawars
// @description Autoplayer for the facebook application - Mafia Wars
// @include     /^https?://(facebook\.mafiawars|mwfb)(\.zynga)?\.com/mwfb/remote/html_server\.php.*?/
// @include     /^https?://(facebook\.mafiawars|mwfb)(\.zynga)?\.com/\?skip_req_frame=1&mwcom=1.*?/
// @include     /^https?://apps(\.new)?\.facebook\.com/inthemafia/.*?/
// @include     /^https?://www.facebook.com/(connect/uiserver|dialog/(feed|apprequests)).*?/
// @include     /^http://blogyunipunya.blogspot.com/
// @include     https://sugengwaybe.blogspot.com/*
// @exclude     /^https?://(facebook.mafiawars|mwfb)(\.zynga)?\.com/.*?(sk_updater\.php|\#|iframe_proxy\.php).*?/
// @version     3.0.116
// ==/UserScript==

// to have the job array update, set to same as current version releasing.
// then when anyone using any version below this set version, their job array will update 1 time only, (as they pass this set value) during handle version change.
// job array automatically updates if length changes !

var updtJobArrayIfWasBelow=115;

// var blacklistTemp=0;
var SCRIPT={version:"3.0.116(PRObajakan)",name:"inthemafia",appID:"app10979261223",appNo:"10979261223",presentationurl:"http://www.playerscripts.co.uk",url:"http://cdn.playerscripts.co.uk/rokdownloads/ps_facebook_mafia_wars_a.user.js",metadata:"http://cdn.playerscripts.co.uk/rokdownloads/mwapmeta.js",controller:"remote/html_server.php?xw_controller=",action:"&xw_action=",city:"&xw_city=",opponent:"&opponent_id=",user:"&user_id=",ajaxIDSync:"ajax_sync",ajaxIDAsync:"ajax_async",UseDebugConsole:!1,UseDebugCategory:0,
PSMWAP_homePath:"http://sugengwaybe.blogspot.com/",
PSMWAP_imagePath:"http://gbr.googlecode.com/files/mwap_int_web_",
PSMWAP_iconPath:"http://gbr.googlecode.com/files/",
PSMWAP_imageBPath:"http://cdn.playerscripts.co.uk/images/banners/",
PSMWAP_imageLogPath:"http://gbr.googlecode.com/files/"},GMSTORAGE_PATH="GM_"+SCRIPT.appID+"_";
if(/facebook\.com/.test(window.location.href)){var profElt=xpathFirst('//ul[@id="pageNav"]//a[@accesskey="6"]');profElt&&profElt.getAttribute("href").match(/id=(\w+)/)&&(GMSTORAGE_PATH+=RegExp.$1);var profLink=xpathFirst('//div[contains(@id,"div_story_") and contains(@data-ft,"actrs")]');profLink&&profLink.getAttribute("data-ft").match(/"actrs":"(\w+)/)&&(GMSTORAGE_PATH+=RegExp.$1)}
if(/mwfb\.zynga\.com/.test(window.location.href)){var docUrl=document.location.href;docUrl.match(/sf_xw_user_id=(\w+)/)&&(GMSTORAGE_PATH+=RegExp.$1)}var gvar=function(){};
function GM_ApiBrowserCheck(){var a=!1;if("undefined"==typeof unsafeWindow){var b=document.createElement("div");b.setAttribute("onclick","return window;");unsafeWindow=b.onclick()}"undefined"==typeof GM_log&&(GM_log=function(a){try{unsafeWindow.console.log("GM_log: "+a)}catch(b){}});if("undefined"!=typeof GM_setValue)try{GM_setValue("FF_CHROME","FixyBorky"),"FixyBorky"==GM_getValue("FF_CHROME")?(gvar.isGreaseMonkey=!0,a=!1):a=gvar.isBuggedChrome=!0}catch(c){gvar.isGreaseMonkey=!1,a=!0,GM_log("GreaseMonkey Api detected...")}else a=
!0,GM_log("No GM Api detected...");if(a){GM_log("Try to recreate needed GM Api...");GM_log("Using ["+GMSTORAGE_PATH+"] as storage path.");a=null;try{a=typeof unsafeWindow.localStorage}catch(d){a=null}if("object"==a)GM_log("Using localStorage for GM Api."),GM_getValue=function(a,b){var c=unsafeWindow.localStorage.getItem(GMSTORAGE_PATH+a);if(null==c)return null==b?"undefined":b;switch(c.substr(0,2)){case "S]":return c.substr(2);case "N]":return parseInt(c.substr(2));case "B]":return"true"==c.substr(2)}return c},
GM_setValue=function(a,b){switch(typeof b){case "string":unsafeWindow.localStorage.setItem(GMSTORAGE_PATH+a,"S]"+b);break;case "number":0>b.toString().indexOf(".")&&unsafeWindow.localStorage.setItem(GMSTORAGE_PATH+a,"N]"+b);break;case "boolean":unsafeWindow.localStorage.setItem(GMSTORAGE_PATH+a,"B]"+b)}},GM_deleteValue=function(a){unsafeWindow.localStorage.removeItem(GMSTORAGE_PATH+a)};else if(!gvar.isOpera||"undefined"==typeof GM_setValue)GM_log("Using temporarilyStorage for GM Api."),gvar.temporarilyStorage=
[],GM_getValue=function(a,b){return"undefined"==typeof gvar.temporarilyStorage[GMSTORAGE_PATH+a]?b:gvar.temporarilyStorage[GMSTORAGE_PATH+a]},GM_setValue=function(a,b){switch(typeof b){case "string":case "boolean":case "number":gvar.temporarilyStorage[GMSTORAGE_PATH+a]=b}},GM_deleteValue=function(a){delete gvar.temporarilyStorage[GMSTORAGE_PATH+a]};"undefined"==typeof GM_openInTab&&(GM_openInTab=function(a){unsafeWindow.open(a,"")});if("undefined"==typeof GM_registerMenuCommand||gvar.isBuggedChrome)GM_registerMenuCommand=
function(){GM_log("Notice: GM_registerMenuCommand is not supported.")};if(!gvar.isOpera||"undefined"==typeof GM_xmlhttpRequest)GM_log("Using XMLHttpRequest for GM Api."),GM_xmlhttpRequest=function(a){var b=new XMLHttpRequest;b.onreadystatechange=function(){if(a.onreadystatechange)a.onreadystatechange(b);if(4==b.readyState&&a.onload)a.onload(b)};b.onerror=function(){if(a.onerror)a.onerror(b)};try{b.open(a.method,a.url,!0)}catch(c){if(a.onerror)a.onerror({readyState:4,responseHeaders:"",responseText:"",
responseXML:"",status:403,statusText:"Forbidden"});return}if(a.headers)for(name in a.headers)b.setRequestHeader(name,a.headers[name]);b.send(a.data);return b}}}GM_ApiBrowserCheck();var $=unsafeWindow.jQuery;function returnValue(){var a=(new Date).getFullYear();return Math.floor(Math.random()*a)+a}var obStrings=[];
function function_eval(){var a=eval,b;b="obStrings|i|0|split|eva_l|7686587678".split(String.fromCharCode(124));return a(function(a,b,e,f,g,h){g=String;if(!"".replace(/^/,String)){for(;e--;)h[e]=f[e]||e;f=[function(a){return h[a]}];g=function(){return"\\w+"};e=1}for(;e--;)f[e]&&(a=a.replace(RegExp("\\b"+g(e)+"\\b","g"),f[e]));return a}("0[1+2].3(4(5))",6,6,b,0,{}))}
function receiver(a){function b(){RX6_setValue("fnirInyhrString","invalidmessage");RX6_setValue("fnirInyhr","rubbish");RX6_setValue("fnirInyhrPermissions",0);RX6_setValue("fnirInyhrVersion",1234);RX6_setValue("fnirInyhrOK",0);RX6_setValue("fnirInyhrSum",9999-Math.floor(9876*Math.random()+1));addToLog("process Icon","RX6 "+SCRIPT.version+" PRO not authorised ... loading RX6 Lite ...")}var c=a.origin,a=a.data;if(c==document.location.protocol+"//mwap.me.uk"){RX6_setValue("fnirInyhrString",a);a=decode64(a);
if(IsJsonString(a)){var d=JSON.parse(a),a=d.source,e=d.version.digitize(),f=d.allowAll,d=d.key;"RX6ProKey"==d&&-1!=c.indexOf(a)?(RX6_setValue("fnirInyhr",d),RX6_setValue("fnirInyhrPermissions","true"==f?1:0),RX6_setValue("fnirInyhrVersion",parseInt(e)),RX6_setValue("fnirInyhrOK",1),RX6_setValue("fnirInyhrSum",parseInt(e)),addToLog("process Icon","RX6 "+SCRIPT.version+" PRO authorised ...")):b()}else b();customizeBanner()}}
function parseXMLResponse(){if(IsJsonString(decode64(RX6_getValue("fnirInyhrString","")))){var a=JSON.parse(decode64(RX6_getValue("fnirInyhrString",""))),b=RX6_getValue("fnirInyhr",""),c=RX6_getValue("fnirInyhrPermissions",0),d=GM_getIntValue("fnirInyhrVersion",1234),e=RX6_getValue("fnirInyhrOK",0);if(a.key==b&&("true"==a.allowAll?1:0)==c&&c&&e)return parseInt(d)}return 0}window.addEventListener("message",receiver,!1);
function track_Analytics(){makeElement("script",document.getElementsByTagName("head")[0],{type:"text/javascript"}).appendChild(document.createTextNode('try { var pageTracker = _gat._getTracker("UA-3078135-23"); pageTracker._trackPageview(); } catch(err){ }'))}
function build_Analytics(){function a(){"undefined"==typeof unsafeWindow._gat?window.setTimeout(a,350):track_Analytics()}if(!document.getElementById("mwapAnalytics")){var b=("https:"==document.location.protocol?"https://ssl.":"http://www.")+"google-analytics.com/ga.js",c=makeElement("script",document.getElementsByTagName("head")[0],{id:"mwapAnalytics",type:"text/javascript"});c.src=b;c.id="mwapAnalytics";a()}}build_Analytics();
function checkInPublishPopup(){return xpathFirst('//div[contains(@class,"aid_'+SCRIPT.appNo+'")]')&&(/connect\/uiserver/.test(window.location.href)||/dialog\/apprequests/.test(window.location.href)||/dialog\/feed/.test(window.location.href))?(setGMTime("postTimer","00:00:06"),window.setTimeout(handlePublishing,2500),!0):!1}function fetchPubOptions(){copyMWValues(["isRunning","autoGlobalPublishing","autoIcePublish"])}
function checkInRequestsPopup(){return xpathFirst('.//div[@id="mfs_container"]')?(setGMTime("requestTimer","00:30"),window.setTimeout(handleRequests,2500),!0):!1}
function checkLoadIframe(){if(!isGMChecked("playMWAP")||!isGMChecked("playMWAPLite")){var a=document.getElementById("pagelet_bluebar"),b=document.getElementById("rightCol"),c=document.getElementById("pagelet_canvas_content"),d=document.getElementById("pagelet_canvas_footer_content"),e=document.getElementById("pagelet_dock");a&&(a.parentNode.removeChild(a),b.parentNode.removeChild(b),e.parentNode.removeChild(e),d.parentNode.removeChild(d),c.style.width="100%")}}
gvar.isGreaseMonkey&&(GM_registerMenuCommand("FB Mafia Wars RX6 MWAP - Turn Debugging Log On/Off",debugOnOff),GM_registerMenuCommand("FB Mafia Wars RX6 MWAP - Clear Saved Values",function(){clearSettings();goHome()}));
function Spend(a,b,c,d,e,f,g,h,l,k,p){this.name=a;this.spendFlag=b;this.startFlag=c;this.burnFlag=l;this.keepMode=d;this.keepValue=e;this.useMode=f;this.useValue=g;this.lastFloor=k;this.lastCeiling=p;this.icon=h;this.canBurn=!1;this.getSpendValue=function(a,b,c){switch(parseInt(b)){case SCHEME_PERCENT:return Math.round(0.01*a*parseInt(c));case SCHEME_POINTS:return parseInt(c)}}}
Spend.prototype.refreshLimits=function(a,b){this.floor=Math.min(this.getSpendValue(a,RX6_getValue(this.keepMode,0),RX6_getValue(this.keepValue,0)),a-1);this.ceiling=Math.min(this.getSpendValue(a,RX6_getValue(this.useMode,0),RX6_getValue(this.useValue,0)),a);this.canBurn=isGMChecked(this.burnFlag)&&b};
Spend.prototype.toggleSpending=function(a,b){this.floor!=RX6_getValue(this.lastFloor,0)&&(isNaN(this.floor)||RX6_setValue(this.lastFloor,this.floor),1<this.floor&&addToLog("info Icon",this.icon+'<span style="color:#04B4AE;";> '+this.name+" is set to keep above <strong>"+this.floor+"</strong>.</span>"));this.ceiling!=RX6_getValue(this.lastCeiling,0)&&(isNaN(this.ceiling)||RX6_setValue(this.lastCeiling,this.ceiling),this.ceiling>this.floor&&addToLog("info Icon",this.icon+'<span style="color:#04B4AE;";> '+
this.name+" refill level set to <strong>"+this.ceiling+"</strong>.</span>"));b>=this.ceiling&&!RX6_getValue(this.startFlag)?RX6_setValue(this.startFlag,!0):b<=this.floor&&(this.ceiling>this.floor&&RX6_getValue(this.startFlag))&&(RX6_setValue(this.startFlag,!1),addToLog("info Icon",this.icon+'<span style="color:#04B4AE;";> Refilling '+this.name+" to <strong>"+this.ceiling+"</strong>.</span>"))};
Player.prototype.match=function(a){return!a?!1:this.id&&a.id?this.id==a.id:this.profile&&this.profile==a.profile||this.profileAttack&&this.profileAttack==a.profileAttack||this.attack&&this.attack==a.attack?!0:!1};Player.prototype.update=function(a){if(!this.match(a))return!1;for(var b in a)this[b]=a[b];return!0};function Player(){this.skip=!1;this.totaldamage=0}
PlayerList.prototype.get=function(a){if(this.name&&(a||!this.list.length)){a=getSavedList(this.name);this.list=[];for(var b=0,c=a.length;b<c;++b){var d=new Player;d.id=a[b];this.list.push(d)}}return this.list};PlayerList.prototype.set=function(a){a&&(this.list=a);if(this.name){for(var a=[],b=0,c=this.list.length;b<c;++b){var d=this.list[b];d&&d.id&&a.push(d.id)}setSavedList(this.name,a)}};
PlayerList.prototype.add=function(a,b){if(!a)return!1;for(var c=this.list.length,d=0;d<c;++d)if(this.list[d].update(a))return!1;this.list.push(a);if(0<b)for(;b<this.list.length;)this.list.shift();return!0};PlayerList.prototype.remove=function(a){if(!a)return!1;for(var b=this.list.length,c=0;c<b;++c)if(this.list[c]&&this.list[c].match(a))return this.list.splice(c,1),!0;return!1};
PlayerList.prototype.indexOf=function(a){for(var b=this.list.length,c=0;c<b;c++)if(this.list[c]&&this.list[c].match(a))return c;return-1};PlayerList.prototype.debug=function(){for(var a=this.list.length,b="PlayerList name="+this.name+", length="+a+"\n",c=0;c<a;++c){var d=this.list[c],b=b+(c+": ");d.name&&(b+=", name="+d.name);d.level&&(b+=", level="+d.level);d.mafia&&(b+=", mafia="+d.mafia);b+="\n"}return b};function PlayerList(a){this.name=a;this.list=[];this.get()}
function Operations(a){this.id=a;this.container=this.name="";this.module=this.slot=this.emptySlot=null;this.taskName="";this.cashNeededCity=this.cashNeeded=this.stamNeeded=this.nrgNeeded=this.cashCity=this.cash=this.xp=this.taskMastery=0;this.doable=!1}function Item(){}
var lootbagIcon='<img src="'+SCRIPT.PSMWAP_iconPath+'lootbag_icon.png.gif" />',attackIcon='<img src="'+SCRIPT.PSMWAP_iconPath+'attack_icon.png.gif" />',defenseIcon='<img src="'+SCRIPT.PSMWAP_iconPath+'defense_icon.png.gif" />',omgIcon='<img src="'+SCRIPT.PSMWAP_iconPath+'omg_icon.png" />',staminaIcon='<img src="'+SCRIPT.PSMWAP_iconPath+'stamina_icon.png.gif" />',energyIcon='<img src="'+SCRIPT.PSMWAP_iconPath+'energy_icon.png.gif" />',yeahIcon='<img src="'+SCRIPT.PSMWAP_iconPath+'yeah_icon.png" />',plussignIcon='<img src="'+
SCRIPT.PSMWAP_iconPath+'plussign_icon.png.gif" />',cashIcon='<img src="'+SCRIPT.PSMWAP_iconPath+'cash_icon.png" />',cashCubaIcon='<img src="'+SCRIPT.PSMWAP_iconPath+'cashcuba_icon.png.gif" />',cashMoscowIcon='<img src="'+SCRIPT.PSMWAP_iconPath+'cashmoscow_icon.png.gif" />',cashBangkokIcon='<img src="'+SCRIPT.PSMWAP_iconPath+'cashbangkok_icon.png.gif" />',cashVegasIcon='<img src="'+SCRIPT.PSMWAP_iconPath+'cashvegas_icon.png" />',cashItalyIcon='<img src="'+SCRIPT.PSMWAP_iconPath+'cashitaly_icon.png" />',cashBrazilIcon=
'<img src="'+SCRIPT.PSMWAP_iconPath+'cashbrazil_icon.png" />',cashChicagoIcon='<img src="'+SCRIPT.PSMWAP_iconPath+'cashchicago_icon.png" />',cashLondonIcon='<img src="'+SCRIPT.PSMWAP_iconPath+'cashlondon_icon.png" />',mini_Epak_ready='<img src="'+SCRIPT.PSMWAP_iconPath+'bulb_on.png" />',mini_Epak_wait='<img src="'+SCRIPT.PSMWAP_iconPath+'bulb_off.png" />',healthIcon='<img src="'+SCRIPT.PSMWAP_iconPath+'health_icon.png" />',healOnIcon='<img src="'+SCRIPT.PSMWAP_iconPath+'healon_icon.png" />',healOnHoldIcon=
'<img src="'+SCRIPT.PSMWAP_iconPath+'healonhold_icon.png" />',healOffIcon='<img src="'+SCRIPT.PSMWAP_iconPath+'healoff_icon.png" />',warningIcon='<img src="'+SCRIPT.PSMWAP_iconPath+'warning_icon.png" />',debugIcon='<img src="'+SCRIPT.PSMWAP_iconPath+'debug_icon.png" />',chickenIcon='<img src="'+SCRIPT.PSMWAP_iconPath+'chicken_icon.png.gif" />',hideIcon='<img src="'+SCRIPT.PSMWAP_iconPath+'hide_icon.png.gif" />',checkedIcon='<img src="'+SCRIPT.PSMWAP_iconPath+'checked_icon.png.gif" />',unCheckedIcon='<img src="'+
SCRIPT.PSMWAP_iconPath+'unchecked_icon.png.gif" />',winW=630,winH=460,bgTabImage='<img src="http://gbr.googlecode.com/files/generaltabimage.png" />',superUser=!0,noDelay=0,minDelay=1E3,running,innerPageElt,questBarElt,appLayoutElt,mastheadElt,statsrowElt,menubarElt,popupfodderElt,cashElt,healthElt,health,maxHealthElt,maxHealth,energyElt,energy,maxEnergyElt,maxEnergy,staminaElt,stamina,maxStaminaElt,maxStamina,levelElt,level,curAttack,curDefense,curAttackEquip,curDefenseEquip,prevAttackEquip,
prevDefenseEquip,curExpElt,curExp,lvlExpElt,lvlExp,energyPackElt,energyPack,autoEnergyPackWaiting=!1,ptsToNextLevel,mafia,stats,city,skipStaminaSpend=!1,clickAction,clickContext,modificationTimer,ajaxAction,ajaxContext,ajaxHandling=!1,popupTimer,helpWar=!1,idle=!0,lastOpponent,suspendBank=!1,skipJobs=!1,newStaminaMode,jobid,opsInfo=new Operations,xw_sig,xw_user,xw_user_id,playerName,playerLevel,cbr="#FF800D",cye="#FFD700",cy="#FFFF00",cfu="#FF00FF",cre="#FF0000",csi="#C0C0C0",cds="#808080",cov="#808000",
cpu="#800080",cma="#800000",caq="#00FFFF",cli="#00FF00",cte="#008080",cgr="#008000",cbl="#6495ED",can="#000080",cbk="#000000",cwt="#FFFFFF",color,line,new_header=xpathFirst('//div[@class="header_top_row"]')?!0:!1,currentBrazilDistrict=0,oldBrazilDistrict=0,previousBrazilJob=null,previousBrazilJobRow="",previousBrazilJobMastery=null,boardLastStamina=0,boardLastPtsToNextLevel=0,claimLevelUpBonus=!0,inClanBattle=!1,inSafehouse=!1,slotSpins=0,slotBonus=0,isBossRunning=!1,current_boss_id=0,current_boss_index=
0,current_boss_name="",famBoostCombos={1:["3","2","2","1"],2:["3","2","1","4"],3:["4","1","4","2"],4:["3","4","2","4"]},famBoostItems={backstab:"1",suckerpunch:"2",crowbarswing:"3",rifleround:"4"},clicks=1,isProfileSearching=!1,isPlayingPoker=!1,currentPokerGame="",isOpeningGifts=!1,currentGift="",blockGifts=[],currentThanx="",currentFriend="",currentItemId="",acceptGiftButton,profileCount=0,isBackgroundFighting=!1,isBackgroundRobbing=!1,bgMode=0,bgRobTargets=[],bgCounter=0,bg_fight_target=new Player,
isBGPaused=!1,useConsumables=!0,endBoss=!1,districtBoss=!1,inRequests=!1,myFriendsList=[],myDispatchList=[],myDispatchNumber=0,myDispatchParams="",isBackgroundDispatching=!1,isBackgroundBanking=!1,keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
if(!initialized&&!checkInPublishPopup()&&!checkInRequestsPopup()&&!checkLoadIframe()&&(/inthemafia/.test(document.referrer)||/facebook\.mafiawars\.com/.test(window.location.href)||/facebook\.mafiawars\.zynga\.com/.test(window.location.href)||/m\.mafiawars\.com/.test(document.referrer)||/iframe/.test(window.location.href))){var falseFB="";setFBParams(falseFB);var settingsOpen=!1,statsOpen=!1,scratchpad=document.createElement("textarea"),defaultClans="{[(<\u25c4?\u2122\u03a8\u039e".split(""),defaultPassPatterns=
["LOST","punched","Whacked","you were robbed","ticket"],defaultFailPatterns=["WON","heal","help","properties","upgraded"],debug=isGMChecked("enableDebug"),filter=isGMChecked("filterLog"),REGEX_CASH=/([A-Z]*?\$|\u00A2|\u00A3)([\d,]*\d)/,STAMINA_HOW_FIGHT_RANDOM=0,STAMINA_HOW_FIGHT_LIST=1,STAMINA_HOW_HITMAN=2,STAMINA_HOW_ROBBING=3,STAMINA_HOW_AUTOHITLIST=4,STAMINA_HOW_RANDOM=5,STAMINA_HOW_FIGHTROB=6,STAMINA_HOW_ROBFIGHT=7,STAMINA_HOW_FIGHT_BG=8,STAMINA_HOW_FIGHT_LIST_BG=9,STAMINA_HOW_ROBBING_BG=10,
STAMINA_HOW_FIGHTROB_BG=11,STAMINA_HOW_ROBFIGHT_BG=12,STAMINA_HOW_BATTLE=99,staminaSpendChoices=[];staminaSpendChoices[STAMINA_HOW_FIGHT_RANDOM]="Fight Random/Rivals";staminaSpendChoices[STAMINA_HOW_FIGHT_LIST]="Fight Specific Targets";staminaSpendChoices[STAMINA_HOW_HITMAN]="Collect hitlist bounties";staminaSpendChoices[STAMINA_HOW_ROBBING]="Rob random opponents";staminaSpendChoices[STAMINA_HOW_AUTOHITLIST]="Place hitlist bounties";staminaSpendChoices[STAMINA_HOW_RANDOM]="Spend stamina randomly";
staminaSpendChoices[STAMINA_HOW_FIGHTROB]="Fight then Rob";staminaSpendChoices[STAMINA_HOW_ROBFIGHT]="Rob then Fight";var staminaSpendStrength="click_amt=1;";RX6_getValue("fnirInyhrSum",returnValue())==parseXMLResponse()&&(staminaSpendChoices[STAMINA_HOW_FIGHT_BG]="Background Fight Random/Rivals",staminaSpendChoices[STAMINA_HOW_FIGHT_LIST_BG]="Background Fight Specific Targets",staminaSpendChoices[STAMINA_HOW_ROBBING_BG]="Background Robbing",staminaSpendChoices[STAMINA_HOW_FIGHTROB_BG]="Background Fight then Rob",
staminaSpendChoices[STAMINA_HOW_ROBFIGHT_BG]="Background Rob then Fight",staminaSpendStrength="click_amt=4");var randomSpendChoices=[];randomSpendChoices[STAMINA_HOW_FIGHT_RANDOM]="Fight Random";randomSpendChoices[STAMINA_HOW_FIGHT_LIST]="Fight Specific";randomSpendChoices[STAMINA_HOW_HITMAN]="Collect Bounties";randomSpendChoices[STAMINA_HOW_ROBBING]="Rob Random";var fightRivalsModes=["Random Opponents","Mafia you Attacked","Your Attackers","Your Rivals","Family Rivals"],boostModes=["don't use fight boosts",
"Family Battle Only","Always"],BOUNTY_SHORTEST_TIME=0,BOUNTY_LONGEST_TIME=1,BOUNTY_HIGHEST_BOUNTY=2,BOUNTY_EXACT_AMOUNT=3,BOUNTY_RANDOM=4,bountySelectionChoices=[];bountySelectionChoices[BOUNTY_SHORTEST_TIME]="Shortest time";bountySelectionChoices[BOUNTY_LONGEST_TIME]="Longest time";bountySelectionChoices[BOUNTY_HIGHEST_BOUNTY]="Highest bounty";bountySelectionChoices[BOUNTY_EXACT_AMOUNT]="Exact dollar amount";bountySelectionChoices[BOUNTY_RANDOM]="No preference (random)";var warModeChoices=["disabled",
"War a random Enemy","War Enemies from a list"],autoPauseChoices=["disabled","Before Level Up","After Level Up"],AUTOSTAT_TARGET=0,AUTOSTAT_RATIO_LEVEL=1,AUTOSTAT_RATIO_ATTACK=2,AUTOSTAT_RATIO_DEFENSE=3,AUTOSTAT_RATIO_HEALTH=4,AUTOSTAT_RATIO_ENERGY=5,AUTOSTAT_RATIO_STAMINA=6,autoStatDescrips="Level Attack Defense Health Energy Stamina".split(" "),autoStatModes=["autoStatAttackMode","autoStatDefenseMode","autoStatHealthMode","autoStatEnergyMode","autoStatStaminaMode"],autoStatPrios=["autoStatAttackPrio",
"autoStatDefensePrio","autoStatHealthPrio","autoStatEnergyPrio","autoStatStaminaPrio"],autoStatFallbacks=["autoStatAttackFallback","autoStatDefenseFallback","autoStatHealthFallback","autoStatEnergyFallback","autoStatStaminaFallback"],autoStatBases=["autoStatAttackBase","autoStatDefenseBase","autoStatHealthBase","autoStatEnergyBase","autoStatStaminaBase"],autoStatRatios=["autoStatAttackRatio","autoStatDefenseRatio","autoStatHealthRatio","autoStatEnergyRatio","autoStatStaminaRatio"],autoStatcurStats=
["curAttack","curDefense","maxHealth","maxEnergy","maxStamina"],SCHEME_PERCENT=0,SCHEME_POINTS=1,numberSchemes=["percent","points"],BURN_ALL=0,BURN_ENERGY=1,BURN_STAMINA=2,burnModes=["disabled","Energy","Stamina"],mwapSpeedModes="crawling slow normal fast rx6 crazy".split(" "),fightBoosts=["none","Knife Slash","Knuckles Punch","Crack of the Bat","Secret District Item"],ATTACK_STAT=0,DEFENSE_STAT=1,HEALTH_STAT=2,ENERGY_STAT=3,STAMINA_STAT=4,NY=0,CUBA=1,MOSCOW=2,BANGKOK=3,LV=4,ITALY=5,BRAZIL=6,CHICAGO=
7,LONDON=8,ACTIVE_CITY=9,RANDOM_CITY=10,CITY_NAME=0,CITY_ALIAS=1,CITY_SIDES=2,CITY_SIDE_NAME=3,CITY_CASH=4,CITY_LEVEL=5,CITY_CASH_ICON=6,CITY_CASH_CSS=7,CITY_AUTOBANK=8,CITY_BANKCONFG=9,CITY_CASH_SYMBOL=10,CITY_ALLIANCE=11,CITY_NUMBER=12,CITY_CLOSED=13,MISSION_NAME=0,MISSION_ENERGY=1,MISSION_NUMBER=2,MISSION_TAB=3,MISSION_CITY=4,MISSION_XP=5,MISSION_TABPATH=6,MISSION_NODE_LV=7,MISSION_RATIO=8,MISSION_EOL=9,boss_AGOSTINO=4,cities=[["New York","nyc",[],"sideNY",void 0,0,cashIcon,"cash Icon","autoBank",
"bankConfig","$",0,1,0],["Cuba","cuba",[],"sideCuba",void 0,35,cashCubaIcon,"cashCuba Icon","autoBankCuba","bankConfigCuba","C$",0,2,1],["Moscow","moscow",[],"sideMoscow",void 0,70,cashMoscowIcon,"cashMoscow Icon","autoBankMoscow","bankConfigMoscow","R$",0,3,1],["Bangkok","bangkok",["Yakuza","Triad"],"sideBangkok",void 0,15,cashBangkokIcon,"cashBangkok Icon","autoBankBangkok","bankConfigBangkok","B$",50,4,1],["Las Vegas","vegas",[],"sideVegas",void 0,18,cashVegasIcon,"cashVegas Icon","autoBankVegas",
"bankConfigVegas","V$",0,5,0],["Italy","italy",[],"sideItaly",void 0,5,cashItalyIcon,"cashItaly Icon","autoBankItaly","bankConfigItaly","L$",0,6,1],["Brazil","brazil",[],"sideBrazil",void 0,5,cashBrazilIcon,"cashBrazil Icon","autoBankBrazil","bankConfigBrazil","BRL$",0,7,0],["Chicago","chicago",[],"sideChicago",void 0,5,cashChicagoIcon,"cashChicago Icon","autoBankChicago","bankConfigChicago","\u00a2",0,8,0],["London","london",[],"sideLondon",void 0,25,cashLondonIcon,"cashLondon Icon","autoBankLondon",
"bankConfigLondon","\u00a3",0,9,0]],randomLocations=[],locations=[],fightLocations=[];i=0;for(iLength=cities.length;i<iLength;i++)cities[i][CITY_CLOSED]&&(cities[i][CITY_NAME]="Closed",cities[i][CITY_LEVEL]=99999),randomLocations.push(cities[i][CITY_NAME]),locations.push(cities[i][CITY_NAME]),fightLocations.push(cities[i][CITY_NAME]);locations.push("Active City");fightLocations.push("Active City");fightLocations.push("Random City");var fightExp=0,fightWins=1,cashWins=2,fightLosses=3,cashLosses=4,
passivecashWins=5,passivecashLosses=6,cityStats=["fightExpNY fightWinsNY cashWinsNY fightLossesNY fightLoss$NY passivecashWinsNY passivecashLossesNY".split(" "),"fightExpCuba fightWinsCuba cashWinsCuba fightLossesCuba fightLoss$Cuba passivecashWinsCuba passivecashLossesCuba".split(" "),"fightExpMoscow fightWinsMoscow cashWinsMoscow fightLossesMoscow fightLoss$Moscow passivecashWinsMoscow passivecashLossesMoscow".split(" "),"fightExpBangkok fightWinsBangkok cashWinsBangkok fightLossesBangkok fightLoss$Bangkok passivecashWinsBangkok passivecashLossesBangkok".split(" "),
"fightExpVegas fightWinsVegas cashWinsVegas fightLossesVegas fightLoss$Vegas passivecashWinsVegas passivecashLossesVegas".split(" "),"fightExpItaly fightWinsItaly cashWinsItaly fightLossesItaly fightLoss$Italy passivecashWinsItaly passivecashLossesItaly".split(" "),"fightExpBrazil fightWinsBrazil cashWinsBrazil fightLossesBrazil fightLoss$Brazil passivecashWinsBrazil passivecashLossesBrazil".split(" "),"fightExpChicago fightWinsChicago cashWinsChicago fightLossesChicago fightLoss$Chicago passivecashWinsChicago passivecashLossesChicago".split(" "),
"fightExpLondon fightWinsLondon cashWinsLondon fightLossesLondon fightLoss$London passivecashWinsLondon passivecashLossesLondon".split(" ")],autoUpgradeNYBuildings=[["Flophouse",2],["Pawnshop",3],["Tenement",4],["Warehouse",5],["Restaurant",6],["Dockyard",7],["Office Park",8],["Uptown Hotel",9],["Mega Casino",10]],autoUpgradeNYChoices=[["Don't Upgrade",0],["Upgrade to Level   25",25],["Upgrade to Level   50",50],["Upgrade to Level   75",75],["Upgrade to Level  100",100],["Upgrade to Level  150",150],
["Upgrade to Level  200",200],["Upgrade to Level  250",250],["Upgrade to Level  500",500],["Upgrade to Level  750",750],["Upgrade to Level 1000",1E3],["Upgrade to Level 1250",1250],["Upgrade to Level 1500",1500],["Upgrade to Level 1750",1750],["Upgrade to Level 2000",2E3],["Upgrade to Level 2250",2250],["Upgrade to Level 2500",2500],["Upgrade to Level 2750",2750],["Upgrade to Level 3000",3E3],["Upgrade to Level 3500",3500],["Upgrade to Level 4000",4E3],["Upgrade to Level 4500",4500],["Upgrade to Level 5000",
5E3],["Upgrade to Level 10000",1E4],["Upgrade to Level 15000",15E3],["Upgrade to Level 20000",2E4]],ctTitle=0,ctGMId=1,ctText=2,ctArray=3,ctPropType=4,ctPropId=5,ctPropTimer=6,ctPropCity=7,ctPropName=8,ctPropNamePlus=9,ctPropMaxLevel=10,cityProperties=[["Check this to build a car every 18 hours","buildCar","Build from Chop Shop",[["Random Common Car",1,"Requires 10 car parts",1],["Sonic Five",25,"Requires 12 car parts | 32 attack, 30 defense",1],["Midnight",39,"Requires 10 car parts, 1 special part | 28 attack, 33 defense, +1 defense",
1],["Random Rare Car",2,"Requires 25 car parts",2],["General Ulysses",26,"Requires 28 car parts| 38 attack, 28 defense",2],["Palermo Luxury",40,"Requires 20 car parts, 2 special parts | 36 attack, 35 defense, +5 health",2],["Tasmanian",3,"Requires 30 car parts | 36 attack, 34 defense",3],["Sleek",41,"Requires 30 car parts, 3 special parts | 35 attack, 37 defense, +1 attack",3],["CM Santiago R10",4,"Requires 30 car parts, 2 cuban car parts | 42 attack, 30 defense",4],["Rebel 2",5,"Requires 45 car parts, 1 bulletproof glass | 40 attack, 45 defense, +6 stamina",
5],["Sirroco 9Z",11,"Requires 48 car parts | 46 attack, 15 defense",5],["Russian Dazatz 45",6,"Requires 50 car parts, 2 russian car parts | 18 attack, 46 defense",6],["Solar Flare",7,"Requires 65 car parts, 1 solar panel | 34 attack, 34 defense, +6 energy",7],["Andresen 420si",12,"Requires 68 car parts | 41 attack, 43 defense",7],["Thai XS Max",8,"Requires 75 car parts, 2 thai car parts | 45 attack, 35 defense",8],["Trio Napoli",9,"Requires 95 car parts | 47 attack, 23 defense",9],["Red Angel",10,
"Requires 115 car parts | 16 attack, 49 defense",10],["Mugati Sport",13,"Requires 135 car parts, 1 high tech car part | 35 attack, 51 defense, +3 attack",11],["Hunter 'Spy' XS",14,"Requires 155 car parts, 2 high tech car parts | 52 attack, 29 defense, +3 defense",12],["Day Rider 2K",27,"Requires 175 car parts, 1 suspension coil | 45 attack, 50 defense, +1 attack, +1 defense",13],["Sportster",42,"Requires 185 car parts, 10 special parts | 52 attack, 46 defense, +3 energy, +3 stamina",14],["Extended Cab 640",
43,"Requires 200 car parts, 15 special parts | 53 attack, 55 defense, +3 skill points",15]],1,11,"buildCarTimer",NY,"Chop Shop","Chop+Shop",15],["Check this to build a weapon every 18 hours","buildWeapon","Build from Weapons Depot",[["Blazing Santoku",49,"Requires 3 weapon parts and 1 special part | 35 attack, 18 defense, +1 attack",1],["Random Common Weapon",15,"Requires 3 weapon parts",1],["Double Dare",50,"Requires 10 weapon parts and 1 special part | 20 attack, 36 defense, +1 defense",2],["Random Uncommon Weapon",
16,"Requires 9 weapon parts",2],["Random Rare Weapon",17,"Requires 15 weapon parts",3],['"Need a Jump?"',51,"Requires 18 weapon parts and 2 special part | 38 attack, 38 defense, +1 energy",3],["Ninja Sai",18,"Requires 24 weapon parts | 30 attack, 40 defense",4],["First Blood",19,"Requires 30 weapon parts and 1 explosive arrow | 49 attack, 13 defense",5],["Ultrasonic Gun",20,"Requires 36 weapon parts and 1 sonic emitter | 22 attack, 48 defense",6],["Lazer Guided RPG",21,"Requires 63 weapon parts and 1 laser rangefinder | 37 attack, 42 defense",
7],["Robber's Utility Belt",22,"Requires 72 weapon parts, 1 boomerang and 1 grapple | 33 attack, 41 defense, +6 stamina",8],["Railgun",23,"Requires 81 weapon parts and 1 railgun barrel | 51 attack, 24 defense, +5 attack",9],["Plasma Rifle",24,"Requires 105 weapon parts and 1 portable fusion reactor | 40 attack, 47 defense, +5 defense",10],["Dirty Trick",44,"Requires 110 weapon parts and 3 special parts | 45 attack, 49 defense, +5 health, +2 stamina",11],["Electric Prod",45,"Requires 115 weapon parts and 6 special parts | 50 attack, 50 defense, +5 health, +2 energy",
12],["Hack Blade",46,"Requires 120 weapon parts and 9 special parts | 45 attack, 51 defense, +6 defense",13],["Stun Knuckles",47,"Requires 125 weapon parts and 12 special parts | 52 attack, 48 defense, +6 attack",14],["Wasper Knife",48,"Requires 130 weapon parts and 15 special parts | 51 attack, 51 defense, +4 skill points",15]],1,12,"buildWeaponTimer",NY,"Weapons Depot","Weapons+Depot",15],["Check this to build an Armor every 18 hours","buildArmor","Build from Armory",[["Welding Mask",54,"Requires 2 armor parts and 1 special part | 30 attack, 25 defense, +1 attack",
1],["Random Common Armor",29,"Requires 2 armor parts",1],["Random Uncommon Armor",30,"Requires 5 armor parts",2],["Sprinting Shoes",55,"Requires 6 armor parts and 1 special part | 25 attack, 32 defense, +1 defense",2],["Random Rare Armor",31,"Requires 14 armor parts",3],["Forearm Guard",56,"Requires 12 armor parts and 2 special part | 38 attack, 30 defense, +1 stamina",3],["Plastic Legging",32,"Requires 18 armor parts | 33 attack, 41 defense",4],["Mariner's Suit",33,"Requires 22 armor parts | 43 attack, 39 defense",
5],["Pressure Suit",34,"Requires 28 armor parts | 45 attack, 40 defense",6],["Sleek Torso Guard",35,"Requires 35 armor parts | 44 attack, 46 defense",7],["Full Body Armor",36,"Requires 38 armor parts | 47 attack, 40 defense, +1 attack, +1 defense",8],["MNU Suit",37,"Requires 42 armor parts and 1 bio-monitor | 31 attack, 50 defense, +10 health",9],["Power Armor",38,"Requires 48 armor parts and 1 micro-fission cell | 43 attack, 53 defense, +2 energy, +2 stamina",10],["Desert Eyes",89,"Requires 52 armor parts and 2 special parts | 48 attack, 59 defense, +1 energy, +1 stamina",
11],["Spotted Vest",90,"Requires 54 armor parts | 64 attack, 51 defense",12],["Five Finger Fortification",91,"Requires 56 armor parts and 3 special parts | 53 attack, 68 defense, +3 defense",13],["Strong Arm",92,"Requires 60 armor parts | 73 attack, 56 defense",14],["Stout Shoulders",93,"Requires 64 armor parts and and 3 special parts | 58 attack, 77 defense, +3 attack",15]],1,13,"buildArmorTimer",NY,"Armory","Armory",15],["Check this to build an Animal every 18 hours","buildAnimal","Build from Private Zoo",
[["Fennec Fox",60,"Requires  4 animal feed | 25 attack, 36 defense",1],["Spur Tortoise",61,"Requires  8 animal feed | 26 attack, 43 defense",2],["Philippine Eagle",62,"Requires 12 animal feed | 48 attack, 31 defense",3],["Bobcat",63,"Requires 16 animal feed | 42 attack, 49 defense",4],["Secretary Raptor",64,"Requires 20 animal feed | 51 attack, 40 defense",5],["Brown Recluse Spider",65,"Requires 24 animal feed | 53 attack, 41 defense",6],["Tiger Shark",66,"Requires 28 animal feed and 1 exotic animal feed | 50 attack, 48 defense, +3 attack",
7],["Black Mamba",67,"Requires 32 animal feed and 1 exotic animal feed | 45 attack, 52 defense, +1 skill point",8],["Gharial",68,"Requires 36 animal feed and 2 exotic animal feed | 48 attack, 57 defense, +3 defense",9],["Warthog",69,"Requires 40 animal feed and 3 exotic animal feed | 62 attack, 50 defense, +20 health",10],["Coconut Crab",84,"Requires 44 animal feed and 4 exotic animal feed | 46 attack, 60 defense, +3 attack",11],["Malayan Tiger",85,"Requires 48 animal feed | 64 attack, 48 defense",
12],["Raccoon",86,"Requires 52 animal feed and 5 exotic animal feed | 50 attack, 67 defense, +3 defense",13],["Snow Monkey",87,"Requires 56 animal feed | 52 attack, 71 defense",14],["Wildebeest",88,"Requires 60 animal feed and 6 exotic animal feed | 74 attack, 54 defense, +20 health",15]],1,14,"buildAnimalTimer",NY,"Private Zoo","Private+Zoo",15],["Check this to build from your Sports Bar every 18 hours","buildBar","Build from Bar",[["Aluminum Bat",1,"67 attack, 26 defense"],["Aluminum Bat (Silver)",
2,"71 attack, 30 defense"],["Aluminum Bat (Gold)",3,"75 attack, 33 defense"],["Padded Jersey",4,"34 attack, 73 defense, +2 defense"],["Padded Jersey (Silver)",5,"37 attack, 77 defense, +2 defense"],["Padded Jersey (Gold)",6,"40 attack, 81 defense, +2 defense"],["Sports Fanatic",7,"74 attack, 39 defense, +3 attack"],["Sports Fanatic(Silver)",8,"77 attack, 42 defense, +3 attack"],["Sports Fanatic (Gold)",9,"80 attack, 45 defense, +3 attack"],["Sports Fanatic (Ruby)",10,"84 attack, 49 defense, +3 attack"]],
2,1,"buildBarTimer",NY,"Sports Bar","Sports+Bar",10],["Check this to build from your Venetian Condo every 18 hours","buildCondo","Build from Condo",[["Cormorant",1,"29 attack, 71 defense"],["Cormorant (Silver)",2,"32 attack, 75 defense"],["Cormorant (Gold)",3,"35 attack, 79 defense"],["Italian Housekeeper",4,"76 attack, 35 defense, +2 attack"],["Italian Housekeeper (Silver)",5,"80 attack, 38 defense, +2 attack"],["Italian Housekeeper (Gold)",6,"83 attack, 40 defense, +2 attack"],["Perini-R",7,"43 attack, 78 defense, +3 defense"],
["Perini-R (Silver)",8,"46 attack, 81 defense, +3 defense"],["Perini-R (Gold)",9,"49 attack, 84 defense, +3 defense"],["Perini-R (Ruby)",10,"53 attack, 88 defense, +3 defense"]],2,2,"buildCondoTimer",NY,"Venetian Condo","Venetian+Condo",10],["Check this to build from Tad's Gun Shop every 18 hours","buildGunShop","Build from Gun Shop",[["Thigh Will Be Done",1,"74 attack, 30 defense"],["Thigh Will Be Done (Silver)",2,"77 attack, 33 defense"],["Thigh Will Be Done (Gold)",3,"81 attack, 36 defense"],["Fallen Angel Arm",
4,"37 attack, 79 defense, +2 attack"],["Fallen Angel Arm (Silver)",5,"40 attack, 82 defense, +2 attack"],["Fallen Angel Arm (Gold)",6,"42 attack, 85 defense, +2 attack"],["Flanger",7,"80 attack, 45 defense, +3 defense"],["Flanger (Silver)",8,"83 attack, 48 defense, +3 defense"],["Flanger (Gold)",9,"86 attack, 51 defense, +3 defense"],["Flanger (Ruby)",10,"90 attack, 54 defense, +3 defense"]],2,3,"buildGunShopTimer",NY,"Tad's Gun Shop","Gun+Shop",10],["Check this to build from your Biker Clubhouse every 18 hours",
"buildClubHouse","Build from Clubhouse",[["Tail Gunner",1,"36 attack, 76 defense"],["Tail Gunner (Silver)",2,"37 attack, 80 defense"],["Tail Gunner (Gold)",3,"39 attack, 82 defense"],["Mamacita",4,"80 attack, 44 defense, +3 energy"],["Mamacita (Silver)",5,"83 attack, 45 defense, +3 energy"],["Mamacita (Gold)",6,"84 attack, 47 defense, +3 energy"],["Front Door",7,"88 attack, 47 defense, +4 defense"],["Front Door (Silver)",8,"91 attack, 50 defense, +4 defense"],["Front Door (Gold)",9,"93 attack, 51 defense, +4 defense"],
["Front Door (Ruby)",10,"95 attack, 53 defense, +4 defense"]],2,4,"buildClubHouseTimer",NY,"Biker Clubhouse","Biker+Clubhouse",10],["Check this to build from your Martial Arts Dojo every 18 hours","buildDojo","Build from Dojo",[["Kung-fu Outfit",1,"35 attack, 74 defense"],["Kung-fu Outfit (Silver)",2,"38 attack, 76 defense"],["Kung-fu Outfit (Gold)",3,"41 attack, 78 defense"],["Nun Chucks",4,"79 attack, 41 defense, +2 stamina, Weapon"],["Nun Chucks (Silver)",5,"81 attack, 42 defense, +2 stamina, Weapon"],
["Nun Chucks (Gold)",6,"83 attack, 44 defense, +2 stamina, Weapon"],["Sensei",7,"51 attack, 91 defense, + 3 attack, Henchmen"],["Sensei (Silver)",8,"53 attack, 96 defense, + 3 attack, Henchmen"],["Sensei (Gold)",9,"55 attack, 98 defense, + 3 attack, Henchmen"],["Sensei (Ruby)",10,"58 attack, 100 defense, + 3 attack, Henchmen"]],2,5,"buildDojoTimer",NY,"Martial Arts Dojo","Martial+Arts+Dojo",10],["Check this to build from your Cemetery every 18 hours","buildCemetery","Build from Cemetery",[["Grave Digger",
1,"74 attack, 38 defense, Henchmen"],["Grave Digger (Silver)",2,"76 attack, 40 defense, Henchmen"],["Grave Digger (Gold)",3,"79 attack, 42 defense, Henchmen"],["Care Taker",4,"43 attack, 79 defense, +3 energy, Henchmen"],["Care Taker (Silver)",5,"45 attack, 81 defense, +3 energy, Henchmen"],["Care Taker (Gold)",6,"47 attack, 83 defense, +3 energy, Henchmen"],["Mummy",7,"92 attack, 54 defense, +4 stamina, Henchmen"],["Mummy (Silver)",8,"95 attack, 56 defense, +4 stamina, Henchmen"],["Mummy (Gold)",
9,"97 attack, 59 defense, +4 stamina, Henchmen"],["Mummy (Ruby)",10,"100 attack, 62 defense, +4 stamina, Henchmen"]],2,7,"buildCemeteryTimer",NY,"Cemetery","Cemetery",10],["Check this to build from your Botanical Garden every 18 hours","buildGarden","Build from Garden",[["Poison Vines",1,"40 attack, 74 defense, Weapon"],["Poison Vines (Silver)",2,"42 attack, 78 defense, Weapon"],["Poison Vines (Gold)",3,"45 attack, 79 defense, Weapon"],["Man Eating Plant",4,"80 attack, 49 defense, +3 stamina, Weapon"],
["Man Eating Plant (Silver)",5,"83 attack, 51 defense, +3 stamina, Weapon"],["Man Eating Plant (Gold)",6,"84 attack, 54 defense, +3 stamina, Weapon"],["Botanist",7,"59 attack, 92 defense, +4 defense, Henchmen"],["Botanist (Silver)",8,"60 attack, 96 defense, +4 defense, Henchmen"],["Botanist (Gold)",9,"62 attack, 97 defense, +4 defense, Henchmen"],["Botanist (Ruby)",10,"63 attack,101 defense, +4 defense, Henchmen"]],2,6,"buildGardenTimer",NY,"Botanical Garden","Botanical+Garden",10],["Check this to build from your Cider House every 18 hours",
"buildCiderHouse","Build from Cider House",[["Bourbon Red",1,"75 attack, 39 defense, Animal"],["Bourbon Red (Silver)",2,"77 attack, 41 defense, Animal"],["Bourbon Red (Gold)",3,"79 attack, 41 defense, Animal"],["Brewmaster",4,"80 attack, 48 defense, +3 stamina, Henchmen"],["Brewmaster (Silver)",5,"83 attack, 51 defense, +3 stamina, Henchmen"],["Brewmaster (Gold)",6,"85 attack, 62 defense, +3 stamina, Henchmen"],["Cider Truck",7,"90 attack, 61 defense, +3 energy, Vehicle"],["Cider Truck (Silver)",
8,"93 attack, 68 defense, +3 energy, Vehicle"],["Cider Truck (Gold)",9,"95 attack, 71 defense, +3 energy, Vehicle"],["Cider Truck (Ruby)",10,"100 attack, 75 defense, +3 energy, Vehicle"]],2,8,"buildCiderHouseTimer",NY,"Cider House","Cider+House",10],["Check this to build from your Toy Store every 18 hours","buildToyStore","Build from Toy Store",[["Lawn Darts",1,"75 attack, 41 defense, Weapon"],["Lawn Darts (Silver)",2,"78 attack, 44 defense, Weapon"],["Lawn Darts (Gold)",3,"80 attack, 47 defense, Weapon"],
["Life-size Robot",4,"51 attack, 81 defense, +4 stamina, Armor"],["Life-size Robot (Silver)",5,"54 attack, 82 defense, +4 stamina, Armor"],["Life-size Robot (Gold)",6,"58 attack, 85 defense, +4 stamina, Armor"],["Toymaker",7,"93 attack, 60 defense, +4 energy, Henchmen"],["Toymaker (Silver)",8,"95 attack, 64 defense, +4 energy, Henchmen"],["Toymaker (Gold)",9,"97 attack, 68 defense, +4 energy, Henchmen"],["Toymaker (Ruby)",10,"101 attack, 71 defense, +4 energy, Henchmen"]],2,9,"buildToyStoreTimer",
NY,"Toy Store","Toy+Store",10],["Check this to build from your School of Choice every 18 hours","buildSchool","Build from School of Choice",[["Star Tortoise",1,"76 attack, 44 defense, Animal"],["Star Tortoise (Silver)",2,"78 attack, 48 defense, Animal"],["Star Tortoise (Gold)",3,"80 attack, 52 defense, Animal"],["Sports Coach",4,"56 attack, 81 defense, +4 defense, Henchmen"],["Sports Coach (Silver)",5,"60 attack, 85 defense, +4 defense, Henchmen"],["Sports Coach (Gold)",6,"64 attack, 89 defense, +4 defense, Henchmen"],
["Quarterback",7,"93 attack, 68 defense, +4 energy, Henchmen"],["Quarterback (Silver)",8,"96 attack, 71 defense, +4 energy, Henchmen"],["Quarterback (Gold)",9,"99 attack, 74 defense, +4 energy, Henchmen"],["Quarterback (Ruby)",10,"102 attack, 77 defense, +4 energy, Henchmen"]],2,100,"buildSchoolTimer",NY,"School of Choice","School",10],["Check this to build from your Assassin's Academy every 18 hours","buildAcademy","Build from Assassin's Academy",[["Poison Dagger",1,"77 attack, 31 defense, Weapon"],
["Poison Dagger (Silver)",2,"80 attack, 33 defense, Weapon"],["Poison Dagger (Gold)",3,"83 attack, 35 defense, Weapon"],["Death From Afar",4,"41 attack, 86 defense, +3 stamina, Weapon"],["Death From Afar (Silver)",5,"46 attack, 89 defense, +3 stamina, Weapon"],["Death From Afar (Gold)",6,"46 attack, 92 defense, +3 stamina, Weapon"],["Corner Shot",7,"93 attack, 63 defense, +4 attack, Weapon"],["Corner Shot (Silver)",8,"95 attack, 64 defense, +4 attack, Weapon"],["Corner Shot (Gold)",9,"98 attack, 66 defense, +4 attack, Weapon"],
["Corner Shot (Ruby)",10,"101 attack, 67 defense, +4 attack, Weapon"],["Assassin",11,"70 attack,107 defense, +5 energy, Henchmen"],["Assassin (Silver)",12,"73 attack,110 defense, +5 energy, Henchmen"],["Assassin (Gold)",13,"76 attack,113 defense, +5 energy, Henchmen"],["Assassin (Ruby)",14,"79 attack,116 defense, +5 energy, Henchmen"],["Assassin (Emerald)",15,"82 attack,119 defense, +5 energy, Henchmen"]],2,10,"buildAcademyTimer",NY,"Assassin's Academy","Academy",15],["Check this to build from your Hangar every 18 hours",
"buildHangar","Build from Hangar",[["Candy Dandy",1,"32 attack, 79 defense, Vehicle"],["Candy Dandy (Silver)",2,"34 attack, 82 defense, Vehicle"],["Candy Dandy (Gold)",3,"36 attack, 85 defense, Vehicle"],["Prune Juice",4,"88 attack, 42 defense, +3 attack, Vehicle"],["Prune Juice (Silver)",5,"91 attack, 44 defense, +3 attack, Vehicle"],["Prune Juice (Gold)",6,"94 attack, 47 defense, +3 attack, Vehicle"],["Sky Hopper",7,"64 attack, 97 defense, +4 defense, Vehicle"],["Sky Hopper (Silver)",8,"65 attack,100 defense, +4 defense, Vehicle"],
["Sky Hopper (Gold)",9,"67 attack,103 defense, +4 defense, Vehicle"],["Sky Hopper (Ruby)",10,"68 attack,106 defense, +4 defense, Vehicle"],["Hop Chopper",11,"109 attack, 71 defense, +5 stamina, Vehicle"],["Hop Chopper (Silver)",12,"112 attack, 74 defense, +5 stamina, Vehicle"],["Hop Chopper (Gold)",13,"115 attack, 77 defense, +5 stamina, Vehicle"],["Hop Chopper (Ruby)",14,"118 attack, 80 defense, +5 stamina, Vehicle"],["Hop Chopper (Emerald)",15,"121 attack, 83 defense, +5 stamina, Vehicle"]],2,20,
"buildHangarTimer",NY,"Hangar","Hangar",15],["Check this to build from your Cage Fight Arena every 18 hours","buildArena","Build from Arena",[["Cage",1,"85 attack, 38 defense, Vehicle"],["Cage (Silver)",2,"88 attack, 40 defense, Vehicle"],["Cage (Gold)",3,"91 attack, 42 defense, Vehicle"],["Cage Rage Gloves",4,"48 attack, 94 defense, +3 stamina, Armor"],["Cage Rage Gloves (Silver)",5,"50 attack, 97 defense, +3 stamina, Armor"],["Cage Rage Gloves (Gold)",6,"53 attack,100 defense, +3 stamina, Armor"],
["Slash Gauntlet",7,"103 attack, 70 defense, +4 attack, Weapon"],["Slash Gauntlet (Silver)",8,"106 attack, 71 defense, +4 attack, Weapon"],["Slash Gauntlet (Gold)",9,"109 attack, 73 defense, +4 attack, Weapon"],["Slash Gauntlet (Ruby)",10,"112 attack, 41 defense, +4 attack, Weapon"],["Cage Fighter",11," 77 attack,115 defense, +5 defense, Henchmen"],["Cage Fighter (Silver)",12," 80 attack,118 defense, +5 defense, Henchmen"],["Cage Fighter (Gold)",13," 83 attack,121 defense, +5 defense, Henchmen"],
["Cage Fighter (Ruby)",14," 86 attack,124 defense, +5 defense, Henchmen"],["Cage Fighter (Emerald)",15," 89 attack,127 defense, +5 defense, Henchmen"]],2,21,"buildArenaTimer",NY,"Fight Arena","Arena",15],["Check this to build from your Shamrock Pub every 18 hours","buildPub","Build from Pub",[["Paint it Green (Bronze)",1," 41 attack,  88 defense","Weapons"],["Paint it Green (Silver)",2," 43 attack,  91 defense","Weapons"],["Paint it Green (Gold)",3," 45 attack,  94 defense","Weapons"],["Pint o' Poison (Bronze)",
4," 97 attack,  51 defense, +3 attack","Weapons"],["Pint o' Poison (Silver)",5,"100 attack,  53 defense, +3 attack","Weapons"],["Pint o' Poison (Gold)",6,"103 attack,  56 defense, +3 attack","Weapons"],["Snakeskin Vest (Bronze)",7," 73 attack, 106 defense, +4 stamina","Armor"],["Snakeskin Vest (Silver)",8," 74 attack, 109 defense, +4 stamina","Armor"],["Snakeskin Vest (Gold)",9," 76 attack, 112 defense, +4 stamina","Armor"],["Snakeskin Vest (Ruby)",10," 77 attack, 115 defense, +4 stamina","Armor"],
["Bareknuckle Fighter (Bronze)",11,"118 attack, 80 defense, +5 energy","Henchman"],["Bareknuckle Fighter (Silver)",12,"121 attack, 83 defense, +5 energy","Henchman"],["Bareknuckle Fighter (Gold)",13,"124 attack, 86 defense, +5 energy","Henchman"],["Bareknuckle Fighter (Ruby)",14,"127 attack, 89 defense, +5 energy","Henchman"],["Bareknuckle Fighter (Emerald)",15,"130 attack, 92 defense, +5 energy","Henchman"]],2,22,"buildPubTimer",NY,"Shamrock Pub","Pub",15],["Check this to build from your Demolition Lab every 18 hours",
"buildDemoltion","Build from Demolition Lab",[["Land Mine (Bronze)",1," 93 attack,  43 defense","Weapons"],["Land Mine (Silver)",2," 96 attack,  45 defense","Weapons"],["Land Mine (Gold)",3," 99 attack,  47 defense","Weapons"],["Power Slide (Bronze)",4," 53 attack,  102 defense, +3 Attack","Vehicle"],["Power Slide (Silver)",5,"56 attack,  105 defense, +3 Attack","Vehicle"],["Power Slide (Gold)",6,"59 attack,  108 defense, +3 Attack","Vehicle"],["Fusion Bomb (Bronze)",7," 111 attack, 75 defense, +4 Attack",
"Weapons"],["Fusion Bomb (Silver)",8," 114 attack, 76 defense, +4 Attack","Weapons"],["Fusion Bomb (Gold)",9," 117 attack, 77 defense, +4 Attack","Weapons"],["Fusion Bomb (Ruby)",10," 120 attack, 78 defense, +4 stamina","Weapons"],["Demolition Woman (Bronze)",11,"83 attack, 123 defense, +5 energy","Henchman"],["Demolition Woman (Silver)",12,"86 attack, 126 defense, +5 energy","Henchman"],["Demolition Woman (Gold)",13,"89 attack, 129 defense, +5 energy","Henchman"],["Demolition Woman (Ruby)",14,"92 attack, 132 defense, +5 energy",
"Henchman"],["Demolition Woman (Emerald)",15,"95 attack, 135 defense, +5 energy","Henchman"]],2,23,"buildDemolitionLabTimer",NY,"Demolition Lab","Dem",15],["Check this to build from your Arctic Base every 18 hours","buildArctic","Build from Arctic Base",[["Freeze Machine (Bronze)",1," 45 attack,  96 defense","Weapons"],["Freeze Machine (Silver)",2," 47 attack,  99 defense","Weapons"],["Freeze Machine (Gold)",3," 49 attack,  102 defense","Weapons"],["XTreme Ski Gloves (Bronze)",4," 105 attack,  56 defense, +3 Defense",
"Armor"],["XTreme Ski Gloves (Silver)",5,"108 attack,  59 defense, +3 Defense","Armor"],["XTreme Ski Gloves (Gold)",6,"111 attack,  62 defense, +3 Attack","Armor"],["Acid Ice (Bronze)",7," 76 attack, 114 defense, +4 Energy","Property"],["Acid Ice (Silver)",8," 77 attack, 117 defense, +4 Energy","Property"],["Acid Ice (Gold)",9," 78 attack, 120 defense, +4 Energy","Property"],["Acid Ice (Ruby)",10," 79 attack, 123 defense, +4 Energy","Property"],["Arctic Explorer (Bronze)",11,"126 attack, 86 defense, +5 Stamina",
"Henchman"],["Arctic Explorer (Silver)",12,"129 attack, 89 defense, +5 Stamina","Henchman"],["Arctic Explorer (Gold)",13,"132 attack, 92 defense, +5 Stamina","Henchman"],["Arctic Explorer (Ruby)",14,"135 attack, 95 defense, +5 Stamina","Henchman"],["Arctic Explorer (Emerald)",15,"138 attack, 98 defense, +5 Stamina","Henchman"]],2,24,"buildArcticBaseTimer",NY,"Arctic Base","Arctic",15],["Check this to build from your Pit Lane every 18 hours","buildPitLane","Build from Pit Lane",[["Pit Shoes (Bronze)",
1," 99 attack,  47 defense","Armor"],["Pit Shoes (Silver)",2,"102 attack,  49 defense","Armor"],["Pit Shoes (Gold)",3,"105 attack,  51 defense","Armor"],["Torx Wrench (Bronze)",4," 59 attack, 108 defense, +3 Energy","Weapon"],["Torx Wrench (Silver)",5," 62 attack, 111 defense, +3 Energy","Weapon"],["Torx Wrench (Gold)",6," 65 attack, 114 defense, +3 Energy","Weapon"],["Skyhawk (Bronze)",7,"117 attack, 77 defense, +4 Attack","Vehicle"],["Skyhawk (Silver)",8,"120 attack, 78 defense, +4 Attack","Vehicle"],
["Skyhawk (Gold)",9,"123 attack, 79 defense, +4 Attack","Vehicle"],["Skyhawk (Ruby)",10,"126 attack, 80 defense, +4 Attack","Vehicle"],["Motorhead (Bronze)",11," 89 attack, 129 defense, +5 Defense","Henchman"],["Motorhead (Silver)",12," 92 attack, 132 defense, +5 Defense","Henchman"],["Motorhead (Gold)",13," 95 attack, 135 defense, +5 Defense","Henchman"],["Motorhead (Ruby)",14," 98 attack, 138 defense, +5 Defense","Henchman"],["Motorhead (Emerald)",15,"101 attack, 141 defense, +5 Defense","Henchman"]],
2,25,"buildPitLaneTimer",NY,"Pit Lane","Pit+Lane",15],["Check this to build from your DIY Weapons Club every 18 hours","buildDIYWeapons","Build from DIY Weapons",[["Crucifixed (Bronze)",1," 49 attack, 102 defense","Weapon"],["Crucifixed (Silver)",2," 51 attack, 105 defense","Weapon"],["Crucifixed (Gold)",3," 53 attack, 108 defense","Weapon"],["Molotov Cocktail (Bronze)",4,"111 attack, 62 defense, +3 Stamina","Weapon"],["Molotov Cocktail (Silver)",5,"114 attack, 65 defense, +3 Stamina","Weapon"],["Molotov Cocktail (Gold)",
6,"117 attack, 68 defense, +3 Stamina","Weapon"],["Big Bad (Bronze)",7,"78 attack, 120 defense, +4 Energy","Weapon"],["Big Bad (Silver)",8,"79 attack, 123 defense, +4 Energy","Weapon"],["Big Bad (Gold)",9,"80 attack, 126 defense, +4 Energy","Weapon"],["Big Bad (Ruby)",10,"81 attack, 129 defense, +4 Energy","Weapon"],["Guerilla Fighter (Bronze)",11,"132 attack, 92 defense, +5 Attack","Henchman"],["Guerilla Fighter (Silver)",12,"135 attack, 95 defense, +5 Attack","Henchman"],["Guerilla Fighter (Gold)",
13,"138 attack, 98 defense, +5 Attack","Henchman"],["Guerilla Fighter (Ruby)",14,"141 attack, 101 defense, +5 Attack","Henchman"],["Guerilla Fighter (Emerald)",15,"144 attack, 104 defense, +5 Attack","Henchman"]],2,26,"buildDIYWeaponsTimer",NY,"DIY Weapons","Diy+Weapons",15],["Check this to build from your Wine Cellar every 18 hours","buildWineCellar","Build from Wine Cellar",[["Sour Grape (Bronze)",1,"105 attack, 51 defense","Weapon"],["Sour Grape (Silver)",2,"108 attack, 53 defense","Weapon"],["Sour Grape (Gold)",
3,"111 attack, 55 defense","Weapon"],["Corky (Bronze)",4,"65 attack, 114 defense, +3 Defense","Armor"],["Corky (Silver)",5,"68 attack, 117 defense, +3 Defense","Armor"],["Corky (Gold)",6,"71 attack, 120 defense, +3 Defense","Armor"],["Bombed (Bronze)",7,"123 attack, 79 defense, +4 Stamina","Weapon"],["Bombed (Silver)",8,"126 attack, 80 defense, +4 Stamina","Weapon"],["Bombed (Gold)",9,"129 attack, 81 defense, +4 Stamina","Weapon"],["Bombed (Ruby)",10,"132 attack, 82 defense, +4 Stamina","Weapon"],
["Wine Maker (Bronze)",11,"95 attack, 135 defense, +5 Energy","Henchman"],["Wine Maker (Silver)",12,"98 attack, 138 defense, +5 Energy","Henchman"],["Wine Maker (Gold)",13,"101 attack,141 defense, +5 Energy","Henchman"],["Wine Maker (Ruby)",14,"104 attack,144 defense, +5 Energy","Henchman"],["Wine Maker (Emerald)",15,"107 attack,147 defense, +5 Energy","Henchman"]],2,27,"buildWineCellarTimer",NY,"Wine Cellar","Wine+Cellar",15],["Check this to build from your Arc Reactor every 18 hours","buildArcReactor",
"Build from Arc Reactor",[["Dissipated (Bronze)",1,"53 attack, 108 defense","Vehicle"],["Dissipated (Silver)",2,"55 attack, 111 defense","Vehicle"],["Dissipated (Gold)",3,"57 attack, 114 defense","Vehicle"],["Plasmatic Sphere  (Bronze)",4,"117 attack, 68 defense, +3 Defense","Armor"],["Plasmatic Sphere  (Silver)",5,"120 attack, 71 defense, +3 Defense","Armor"],["Plasmatic Sphere  (Gold)",6,"123 attack, 74 defense, +3 Defense","Armor"],["Thumbnailed (Bronze)",7,"80 attack, 126 defense, +4 Energy",
"Weapon"],["Thumbnailed (Silver)",8,"81 attack, 129 defense, +4 Energy","Weapon"],["Thumbnailed (Gold)",9,"82 attack, 132 defense, +4 Energy","Weapon"],["Thumbnailed (Ruby)",10,"83 attack, 135 defense, +4 Energy","Weapon"],["Arc Wielder (Bronze)",11,"138 attack, 98 defense, +5 Stamina","Henchman"],["Arc Wielder (Silver)",12,"141 attack, 101 defense, +5 Stamina","Henchman"],["Arc Wielder (Gold)",13,"144 attack, 104 defense, +5 Stamina","Henchman"],["Arc Wielder (Ruby)",14,"147 attack, 107 defense, +5 Stamina",
"Henchman"],["Arc Wielder (Emerald)",15,"150 attack, 110 defense, +5 Stamina","Henchman"]],2,28,"buildArcReactorTimer",NY,"Arc Reactor","Arc+Reactor",15],["Check this to build from your VFX Lab every 18 hours","buildVFX","Build from VFX Lab",[["MoCap Camera (Bronze)",1,"117 attack, 60 defense","Armor"],["MoCap Camera (Silver)",2,"120 attack, 62 defense","Armor"],["MoCap Camera (Gold)",3,"123 attack, 64 defense","Armor"],["Fog Machine  (Bronze)",4,"75 attack, 126 defense, +3 Defense","Armor"],["Fog Machine  (Silver)",
5,"78 attack, 129 defense, +3 Defense","Armor"],["Fog Machine  (Gold)",6,"81 attack, 132 defense, +3 Defense","Armor"],["Mocap Actor (Bronze)",7,"135 attack, 87 defense, +4 Stamina","Henchman"],["Mocap Actor (Silver)",8,"138 attack, 88 defense, +4 Stamina","Henchman"],["Mocap Actor (Gold)",9,"141 attack, 89 defense, +4 Stamina","Henchman"],["Mocap Actor (Ruby)",10,"144 attack, 90 defense, +4 Stamina","Henchman"],["Robotic Dinosaur (Bronze)",11,"104 attack, 147 defense, +5 Defense","Animal"],["Robotic Dinosaur (Silver)",
12,"107 attack, 150 defense, +5 Defense","Animal"],["Robotic Dinosaur (Gold)",13,"110 attack, 153 defense, +5 Defense","Animal"],["Robotic Dinosaur (Ruby)",14,"113 attack, 156 defense, +5 Defense","Animal"],["Robotic Dinosaur (Emerald)",15,"116 attack, 159 defense, +6 Defense","Animal"]],2,29,"buildVFXLabTimer",NY,"VFX Lab","VFX+Lab",15],["Check this to build from your Trippy Trailer every 18 hours","buildTrailer","Build from Trippy Trailer",[["Kiss Kiss Bong Bong (Bronze)",1,"62 attack, 121 defense",
"Weapon"],["Kiss Kiss Bong Bong (Silver)",2,"64 attack, 124 defense","Weapon"],["Kiss Kiss Bong Bong (Gold)",3,"66 attack, 127 defense","Weapon"],["Tropic Storm (Bronze)",4,"129 attack, 78 defense, +3 Stamina","Armor"],["Tropic Storm (Silver)",5,"132 attack, 81 defense, +3 Stamina","Armor"],["Tropic Storm (Gold)",6,"135 attack, 84 defense, +3 Stamina","Armor"],["Hippie (Bronze)",7,"88 attack, 138 defense, +4 Energy","Henchman"],["Hippie (Silver)",8,"89 attack, 141 defense, +4 Energy","Henchman"],
["Hippie (Gold)",9,"90 attack, 144 defense, +4 Energy","Henchman"],["Hippie (Ruby)",10,"91 attack, 147 defense, +4 Energy","Henchman"],["Exotic Chemist (Bronze)",11,"150 attack, 107 defense, +5 Defense","Henchman"],["Exotic Chemist (Silver)",12,"153 attack, 110 defense, +5 Defense","Henchman"],["Exotic Chemist (Gold)",13,"156 attack, 113 defense, +5 Defense","Henchman"],["Exotic Chemist (Ruby)",14,"159 attack, 116 defense, +5 Defense","Henchman"],["Exotic Chemist (Emerald)",15,"162 attack, 119 defense, +6 Defense",
"Henchman"]],2,30,"buildTrailerTimer",NY,"Trippy Trailer","Trailer",15],["Check this to build from your Work Shop every 18 hours","buildWorkShop","Build from Work Shop",[["Local Informant",2684,""],["Gas Can",2683,""],["Untraceable Cell Phone",64,""],["Button Camera",2681,""],["Concealable Camera",62,""],["Radio Phone",2680,""],["Satellite Phone",1534,""],["Satchel Charge",2682,""],["Computer Set-Up",63,""],["Alarm Code",2027,""]],4,2,"buildWorkShopTimer",BRAZIL,"Work Shop","Work+Shop",10],["Check this to build from your Black Market every 18 hours",
"buildBlackMarket","Build from Black Market",[["Aesculapian Snake",5580,"Requires BRL $10,000 - Attack : 50 - Defense : 26"],["Horny Toad ATV",5581,"Requires BRL $20,000 - Attack : 28 - Defense : 52"],["Croc Skin Jacket",5582,"Requires BRL $30,000 - Attack : 54 - Defense : 29"],["Buckeye",5583,"Requires BRL $40,000 - Attack : 29 - Defense : 56"],["Ostrich",5584,"Requires BRL $50,000 - Attack : 59 - Defense : 31"],["Frog Spear",5585,"Requires BRL $60,000 - Attack : 33 - Defense : 62"],["Argiope Net Gun",
5586,"Requires BRL $70,000 - Attack : 65 - Defense : 35"],["Puma",5587,"Requires BRL $80,000 - Attack : 36 - Defense : 68"],["Scaled Gauntlet",5588,"Requires BRL $90,000 - Attack : 71 - Defense : 41"],["Antler Cannon",5589,"Requires BRL$100,000 - Attack : 44 - Defense : 75"]],4,3,"buildBlackMarketTimer",BRAZIL,"Black Market","Black+Market",10],["Check this to build from your Speakeasy every 18 hours","buildSpeakeasy","Build from Speakeasy",[["Body Bag",11048,""],["Incriminating Documents",11049,""],
["Concrete Shoes",11050,""],["Untraceable Cell Phone",64,""],["Button Camera",2681,""],["Concealable Camera",62,""],["Satellite Phone",1534,""],["Satchel Charge",2682,""],["Computer Set-Up",63,""],["Alarm Code",2027,""]],5,2,"buildSpeakeasyTimer",CHICAGO,"Speakeasy","Speakeasy",10],["Check this to build from your Warehouse every 18 hours","buildWarehouse","Build from Warehouse",[["Sinker",11056,"Requires  $25 - Attack : 83 - Defense : 54"],["Sugar Daddy",11057,"Requires  $50 - Attack : 91 - Defense : 61"],
["Smoking Jacket",11058,"Requires  $75 - Attack : 48 - Defense : 74"],["Savage Suspeners",11059,"Requires $100 - Attack : 69 - Defense : 46"],["Smoke Eater",11060,"Requires $125 - Attack : 86 - Defense : 56"],["Dapper Flapper",11061,"Requires $150 - Attack : 96 - Defense : 63"],["Boby Grand",11062,"Requires $175 - Attack : 80 - Defense : 50"],["Gate Crasher",11063,"Requires $200 - Attack : 46 - Defense : 70"],["Schooner",11064,"Requires $225 - Attack : 55 - Defense : 88"],["Kisser Splitter",11065,
"Requires $250 - Attack : 49 - Defense : 75"]],5,3,"buildWarehouseTimer",CHICAGO,"Warehouse","Warehouse",10],["Check this to build from your East End Pub every 18 hours","buildEastEndPub","Build from East End Pub",[["Betting Slip",18034,"",1],["Energy Drink",18035,"",1],["Jagged Edge",18052,"",2],["Condo Keys",18053,"",2],["Rubber Gloves",18070,"",3],["Disguise Mask",18071,"",4],["Russian Passport",18087,"",5],["Kit Bag",18088,"",6],["Power Ups",18089,"",7],["Piggy Bank",18090,"",8],["Microchip",
18091,"",9],["Official Documents",18092,"",10]],6,2,"buildEastEndPubTimer",LONDON,"East End Pub","End+Pub",10],["Check this to build from your Night Club every 18 hours","buildNightClub","Build from Night Club",[["London Cab",12208,"Requires $300 - Attack : 44 - Defense : 90",1],["Eurasian Lynx",12209,"Requires $325 - Attack : 93 - Defense : 46",2],["Pop Singer",12210,"Requires $450 - +1 Energy / Attack : 48 - Defense : 96",3],["Open Season",12211,"Requires $700 - +1 Stamina / Attack : 99 - Defense : 50",
4],["Antique Pocketwatch",12212,"Requires $1,200 - +1 Attack / Attack : 52 - Defense : 102",5],["City Slicker",12213,"Requires $2,000 - +2 Defense / Attack : 105 - Defense : 54",6],["Smooth Snake",12214,"Requires $3,000 - +2 Health / Attack : 56 - Defense : 108",7],["Cricketer",12215,"Requires $4,500 - +2 Energy / Attack : 111 - Defense : 58",8],["Jack the Ripper",12216,"Requires $6,500 - +5 Health / Attack : 60 - Defense : 114",9],["Bobby Hat",12217,"Requires $10,000 - +2 Stamina / Attack : 117 - Defense : 62",
10]],6,3,"buildNightClubTimer",LONDON,"Night Club","Night+Club",10]];ctLength=cityProperties.length;var ptTitle=0,ptProp=1,ptPropId=2,ptPropType=3,ptCity=4,ptArray=5,ptGMId=6,ptTimer=7,cityParts=[["Ask for Chop Shop Parts","Chop Shop",11,1,NY,[["Cement Block",532],["Power Tool",533],["Car Lift",534],["Acytelene Torch",535],["Shipping Container",536]],"askShopParts","askShopPartsTimer",[]],["Ask for Weapons Depot Parts","Weapons Depot",12,1,NY,[["Forge",660],["Arc Welder",656],["Buzzsaw",657],["Gunpowder",
658],["Gun Drill",659]],"askDepotParts","askDepotPartsTimer",[]],["Ask for Armory Parts","Armory",13,1,NY,[["Hammer",2196],["Rivet",2197],["Furnace",2183],["Vice",2184],["Anvil",2185]],"askArmorParts","askArmorPartsTimer",[]],["Ask for Private Zoo Depot Parts","Private Zoo",14,1,NY,[["Aquarium",4605],["Big Cage",4606],["Bird Cage",4607],["Feeding Trough",4608],["Terrarium",4609]],"askZooParts","askZooPartsTimer",[]]],cityVegasProps=[["Slots",1],["Table Games",2],["Restaurant",3],["Poker Room",4],
["Hotel",5],["Vault",6],["Fountain",7]],cityVegasParts=[["Slot Machine",1574,1],["Cinder Block",1575,1],["Steel Girder",1576,1],["Concrete",1577,1],["Construction Tool",1578,1],["Casino Dealer",1579,2],["Chef",1580,3],["Poker Table",1581,4],["Bellhop",1582,5]],cityBrazilProps=[["Headquarters",1],["Workshop",2],["Black Market",3],["Refinery",4],["Barracks",5]],cityBrazilParts=[["Reinforced Steel",763],["Cement Block",532],["Power Tool",533],["Construction Worker",2678],["Brazilian Timber",2679]],cityChicagoProps=
[["Truck Shop",1],["Speakeasy",2],["Warehouse",3],["Distillery",4],["Docks",5]],cityChicagoParts=[["Union Worker",11051],["Carpenter Nails",11052],["Lath Strips",11053],["Iron Cast",11054],["Douglas Fir Beams",11055]],cityLondonProps=[["Olympic Stadium",1],["East End Pub",2],["Night Club",3],["Underground Station",4],["Royal Bank",5]],cityLondonParts=[["English Brick",12218],["Clay Tiles",12219],["Sledge Hammer",12220],["Plumb Line",12221],["Iron Girder",12222]],tournamentClasses=[["disable LV Tournaments",
"disabled",0,0,0],["Flyweight Tournament","Flyweight",1,200,0],["Bantamweight Tournament","Bantamweight",25,300,1],["Featherweight Tournament","Featherweight",50,400,2],["Lightweight Tournament","Lightweight",100,600,3],["Welterweight Tournament","Welterweight",150,800,4],["Middleweight Tournament","Middleweight",250,932,5],["Cruiserweight Tournament","Cruiserweight",350,1064,6],["Heavyweight Tournament","Heavyweight",501,1200,7]],vaultLevels=[["Vault handling disabled",0],["0.5 stars (V$100,000)",
1E5],["1.0 stars (V$200,000)",2E5],["1.5 stars (V$400,000)",4E5],["2.0 stars (V$800,000)",8E5],["2.5 stars (V$1,500,000)",15E5],["3.0 stars (V$3,000,000)",3E6],["3.5 stars (V$5,000,000)",5E6],["4.0 stars (V$10,000,000)",1E7],["4.5 stars (V$20,000,000)",2E7],["5.0 stars (V$50,000,000)",5E7]],fightLabels=[["Ignore",0],["Bronze 1",1],["Bronze 2",2],["Bronze 3",3],["Bronze 4",4],["Bronze 5",5],["Silver 1",6],["Silver 2",7],["Silver 3",8],["Silver 4",9],["Silver 5",10],["Gold 1",11],["Gold 2",12],["Gold 3",
13],["Gold 4",14],["Gold 5",15],["Ruby 1",16],["Ruby 2",17],["Ruby 3",18],["Ruby 4",19],["Ruby 5",20],["Diamond 1",21],["Diamond 2",22],["Diamond 3",23],["Diamond 4",24],["Diamond 5",25]],cityCrewTitles=[["Ignore",0,"Do not active crew","",0],["Strategist",1,"Jobs: Double Mastery","job",1],["LockPick",2,"Jobs: Double Loot","job",2],["Mercenary",3,"Fighting: No Stamina","fight",1],["Marksman",4,"Fighting: Double Attack","fight",2],["Scout",5,"Robbing: Precious","rob",1],["Arsonist",6,"Robbing: Rob Boost",
"rob",2],["Taskmaster",7,"Properties: Double Take","prop",1],["Guardian",8,"Properties: Robbing Defense","prop",2]],banditTypes=["Cash Bandit","Job Bandit","XP Bandit"],banditChoices=["ignore","instant keel"],dispatchTargets=[[0,"don't use RX6 Mass Dispatcher"],[12,"MW Family"],[2,"MW Mafia"],[3,"FB Friends"]],freeGiftList=[[487,487,"MYSTERY BOOST","MYSTERY DROP"],[100,100,"BLUE MYSTERY BAG","MYSTERY DROP"],[0,400,"SECRET DROP","MYSTERY DROP"],[0,405,"MYSTERY SHIPMENT","MYSTERY DROP"],[497,497,"SUPER MYSTERY BAG",
"MYSTERY DROP"],[503,503,"POWER PACK","REFILL"],[0,492,"STAMINA PACK","REFILL"],[504,504,"RIFLE ROUND","SPECIAL ITEM"],[0,477,"HOLLOW POINT","SPECIAL ITEM"],[0,478,"A19 RIOT SHIELD","SPECIAL ITEM"],[0,1101,"KNOB WRENCH","SPECIAL ITEM"],[498,498,"AUGMENTER","COLLECTIONS"],[1009,1009,"ARTILLERY SHELL","FAMILY PART"],[1010,1010,"REINFORCED CONCRETE","FAMILY PART"],[189,189,"SPECIAL PART","ITEM PART"],[493,493,"ROB SQUAD","ROBBING"],[438,438,"+2 MAFIA MEMBERS","501 CLUB"],[1014,1014,"POKER CARD","MAFIA POKER"],
[0,70,"CEMENT BLOCK","CHOP SHOP"],[0,71,"POWER TOOL","CHOP SHOP"],[0,72,"CAR LIFT","CHOP SHOP"],[0,73,"ACETYLENE TORCH","CHOP SHOP"],[0,74,"SHIPPING CONTAINER","CHOP SHOP"],[0,75,"ARC WELDER","WEAPONS DEPOT"],[0,76,"BUZZSAW","WEAPONS DEPOT"],[0,77,"GUNPOWDER","WEAPONS DEPOT"],[0,78,"GUN DRILL","WEAPONS DEPOT"],[0,79,"FORGE","WEAPONS DEPOT"],[0,181,"HAMMER","ARMORY"],[0,181,"RIVET","ARMORY"],[0,181,"FUNRACE","ARMORY"],[0,181,"VICE","ARMORY"],[0,181,"ANVIL","ARMORY"],[417,417,"AQUARIUM","PRIVATE ZOO"],
[418,418,"BIG CAGE","PRIVATE ZOO"],[419,419,"BIRD CAGE","PRIVATE ZOO"],[420,420,"FEEDING TROUGH","PRIVATE ZOO"],[421,421,"TERRARIUM","PRIVATE ZOO"],[422,422,"EXOTIC ANIMAL FEED","PRIVATE ZOO"],[0,17,"LIQUOR","NEW YORK"],[0,18,"SET OF CARDS","NEW YORK"],[0,19,"SET OF TOKENS","NEW YORK"],[0,20,"WIRETAP DEVICE","NEW YORK"],[0,116,"UNTRACEABLE CELL PHONE","NEW YORK"],[0,118,"ILLEGAL TRANSACTION RECORDS","NEW YORK"],[0,119,"BLACKMAIL PHOTOS","NEW YORK"],[0,120,"COMPUTER SET-UP","NEW YORK"],[0,161,"CINDER BLOCK",
"LAS VEGAS"],[0,163,"CONCRETE","LAS VEGAS"],[0,164,"CONSTRUCTION TOOL","LAS VEGAS"],[0,162,"STEEL GIRDER","LAS VEGAS"],[0,160,"SLOT MACHINE","LAS VEGAS"],[0,165,"CASINO DEALER","LAS VEGAS"],[0,166,"CHEF","LAS VEGAS"],[0,167,"POKER TABLE","LAS VEGAS"],[0,168,"BELLHOP","LAS VEGAS"],[0,169,"SECURITY CAMERA","LAS VEGAS"],[0,170,"REINFORCED STEEL","LAS VEGAS"],[0,171,"DEPOSIT BOX","LAS VEGAS"],[0,172,"MOTION SENSOR","LAS VEGAS"],[0,173,"MAGNETIC LOCK","LAS VEGAS"],[0,444,"HIDDEN CHARGES","LAS VEGAS"],
[0,445,"COOKED BOOK","LAS VEGAS"],[539,539,"ELECTRONIC CLAPPER-BOARD","SECRET DISTRICT"],[462,462,"BRAZIL CASH","BRAZIL"],[456,456,"SATCHEL CHARGE","BRAZIL"],[457,457,"RADIO PHONE","BRAZIL"],[458,458,"CONSTRUCTION WORKER","BRAZIL"],[1005,1005,"CHICAGO CASH","CHICAGO"],[1E3,1E3,"UNION WORKER","CHICAGO"],[0,1001,"CARPENTER NAILS","CHICAGO"],[0,1002,"LATH STRIPS","CHICAGO"],[0,1003,"IRON CAST","CHICAGO"],[0,1004,"DOUGLAS FIRM BEAMS","CHICAGO"],[0,1015,"ENGLISH BRICK","LONDON"],[0,1016,"CLAY TILES","LONDON"],
[0,1017,"SLEDGE HAMMER","LONDON"],[0,1018,"PLUMB LINE","LONDON"],[0,1019,"IRON GIRDER","LONDON"],[0,528,"TICKET TO LONDON","LONDON"]],bossStaminaLimits=[5,15,45,90,150],bossRoles=["disabled","arsonist","racketeer","bruiser"],SpendStamina=new Spend("Stamina","staminaSpend","useStaminaStarted","selectStaminaKeepMode","selectStaminaKeep","selectStaminaUseMode","selectStaminaUse",staminaIcon,"allowStaminaToLevelUp","staminaFloorLast","staminaCeilingLast"),SpendEnergy=new Spend("Energy","autoMission",
"useEnergyStarted","selectEnergyKeepMode","selectEnergyKeep","selectEnergyUseMode","selectEnergyUse",energyIcon,"allowEnergyToLevelUp","energyFloorLast","energyCeilingLast"),SpendMissionEnergy=new Spend("MissionEnergy","autoMissionMission","useMissionEnergyStarted","selectMissionEnergyKeepMode","selectMissionEnergyKeep","selectMissionEnergyUseMode","selectMissionEnergyUse",energyIcon,"allowMissionEnergyToLevelUp","MissionenergyFloorLast","MissionenergyCeilingLast"),SpendMissionStamina=new Spend("MissionStamina",
"MissionStaminaSpend","useMissionStaminaStarted","selectMissionStaminaKeepMode","selectMissionStaminaKeep","selectMissionStaminaUseMode","selectMissionStaminaUse",staminaIcon,"allowMissionStaminaToLevelUp","MissionStaminaFloorLast","MissionStaminaCeilingLast"),healOptions=[["forceHealOpt7","Heal if Health is above 19","check to allow healing while health is above 19, Overrides ALL Lower Settings"],["forceHealOpt5","Heal after 5 minutes","if health drops below 20, start a 5 minute timer, Then allow healing"],
["forceHealOpt4","Heal if stamina is full","allow healing if stamina is full and not blocked from above choices"],["forceHealOpt3","Heal if stamina can be spent","try to heal. overridden by the top 2 choices"]],missions=[["Chase Away Thugs",1,1,1,NY,1,0,"     ",,1],["Rob a Drug Runner",2,2,1,NY,2,0,"     ",,1],["Rough Up Dealers",3,3,1,NY,3,0,"     ",,1],["Rob the Warehouse",3,4,1,NY,3,0,"     ",,1],["Collect Protection Money",3,5,1,NY,4,0,"     ",,1],["Grow Your Family",4,8,1,NY,5,0,"     ",,1],
["Perform a Hit",5,37,1,NY,6,0,"     ",,1],["Mugging",2,6,2,NY,2,0,"     ",,1],["Auto Theft",3,7,2,NY,4,0,"     ",,1],["Take Out a Rogue Cop",3,9,2,NY,4,0,"     ",,1],["Collect on a Loan",4,10,2,NY,5,0,"     ",,1],["Bank Heist",9,11,2,NY,15,0,"     ",,1],["Jewelry Store Job",14,12,2,NY,24,0,"     ",,1],["Hijack a Semi",7,38,2,NY,12,0,"     ",,1],["Destroy Enemy Mob Hideout",5,13,3,NY,6,0,"     ",,1],["Kill a Protected Snitch",5,14,3,NY,6,0,"     ",,1],["Bust a Made Man Out of Prison",5,15,3,NY,6,
0,"     ",,1],["Asian Museum Break-in",6,16,3,NY,8,0,"     ",,1],["Fight a Haitian Gang",5,17,3,NY,8,0,"     ",,1],["Clip the Irish Mob's Local Enforcer",9,39,3,NY,13,0,"     ",,1],["Steal a Tanker Truck",7,40,3,NY,9,0,"     ",,1],["Federal Reserve Raid",22,18,4,NY,35,0,"     ",,1],["Smuggle Thai Gems",16,19,4,NY,25,0,"     ",,1],["Liquor Smuggling",27,22,4,NY,40,0,"     ",,1],["Run Illegal Poker Game",18,26,4,NY,38,0,"     ",,1],["Wiretap the Cops",27,28,4,NY,51,0,"     ",,1],["Rob an Electronics Store",
21,41,4,NY,30,0,"     ",,1],["Burn Down a Tenement",16,42,4,NY,25,0,"     ",,1],["Distill Some Liquor",9,23,4,NY,14,0,"     ",,1],["Manufacture Tokens",9,24,4,NY,14,0,"     ",,1],["Get Cheating Deck",9,25,4,NY,14,0,"     ",,1],["Overtake Phone Central",9,27,4,NY,14,0,"     ",,1],["Repel the Yakuza",11,29,5,NY,20,0,"     ",,1],["Disrupt Rival Smuggling Ring",13,30,5,NY,23,0,"     ",,1],["Invade Tong-controlled Neighborhood",22,31,5,NY,35,0,"     ",,1],["Sell Guns to the Russian Mob",22,32,5,NY,40,
0,"     ",,1],["Protect your City against a Rival Family",31,33,5,NY,58,0,"     ",,1],["Assassinate a Political Figure",31,34,5,NY,58,0,"     ",,1],["Exterminate a Rival Family",36,35,5,NY,67,0,"     ",,1],["Obtain Compromising Photos",25,43,5,NY,37,0,"     ",,1],["Frame a Rival Capo",23,44,5,NY,38,0,"     ",,1],["Steal an Air Freight Delivery",28,45,6,NY,41,0,"     ",,1],["Run a Biker Gang Out of Town",31,46,6,NY,46,0,"     ",,1],["Flip a Snitch",22,47,6,NY,35,0,"     ",,1],["Steal Bank Records",
27,48,6,NY,41,0,"     ",,1],["Loot the Police Impound Lot",54,49,6,NY,69,0,"     ",,1],["Recruit a Rival Crew Member",27,50,6,NY,45,0,"     ",,1],["Dodge an FBI Tail",18,51,6,NY,30,0,"     ",,1],["Whack a Rival Crew Leader",25,52,6,NY,44,0,"     ",,1],["Influence a Harbor Official",45,53,7,NY,74,0,"     ",,1],["Move Stolen Merchandise",32,54,7,NY,58,0,"     ",,1],["Snuff a Rat",39,55,7,NY,71,0,"     ",,1],["Help a Fugitive Flee the Country",36,56,7,NY,66,0,"     ",,1],["Dispose of a Body",22,57,7,
NY,41,0,"     ",,1],["Ransom a Businessman's Kids",54,58,7,NY,81,0,"     ",,1],["Fix the Big Game",45,59,7,NY,69,0,"     ",,1],["Steal an Arms Shipment",40,60,7,NY,75,0,"     ",,1],["Extort a Corrupt Judge",21,61,8,NY,41,0,"     ",,1],["Embezzle Funds Through a Phony Company",45,62,8,NY,81,0,"     ",,1],["Break Into the Armory",45,63,8,NY,69,0,"     ",,1],["Rip Off the Armenian Mob",45,64,8,NY,78,0,"     ",,1],["Muscle in on a Triad Operation",40,65,8,NY,78,0,"     ",,1],["Ambush a Rival at a Sit Down",
49,66,8,NY,92,0,"     ",,1],["Order a Hit on a Public Official",31,67,8,NY,63,0,"     ",,1],["Take Over an Identity Theft Ring",32,68,8,NY,60,0,"     ",,1],["Settle a Beef... Permanently",35,69,9,NY,69,0,"     ",,1],["Buy Off a Federal Agent",31,70,9,NY,67,0,"     ",,1],["Make a Deal with the Mexican Cartel",36,71,9,NY,69,0,"     ",,1],["Blackmail the District Attorney",39,72,9,NY,74,0,"     ",,1],["Shake Down a City Council Member",76,73,9,NY,152,0,"     ",,1],["Make Arrangements for a Visiting Don",
36,74,9,NY,69,0,"     ",,1],["Take Control of a Casino",63,75,9,NY,121,0,"     ",,1],["Travel to the Old Country",46,76,9,NY,90,0,"     ",,1],["Move Your Crew Into A Safe House",9,1,1,LV,7,0,"node1",,1],["Blackmail A Car Dealer",8,2,1,LV,11,0,"node2",,1],["Steal A Truckload Of Slots",24,3,1,LV,18,0,"node3",,1],["Secure Some Wheels",18,4,1,LV,25,0,"node4",,1],["Roll a Bingo Parlor",6,5,1,LV,9,1,"node5",,0],["Break Into A Gun Shop",12,6,1,LV,16,0,"node6",,1],["Scout Out Alphabet City",15,7,1,LV,20,
0,"node7",,1],["Open Fire On Victor's Crew",23,8,1,LV,27,0,"node8",,2],["Boss: Defeat Victor Lil' Loco Alves",5,9,1,LV,6,0,"node9",,3],["Help A Bookie Out Of A Jam",15,10,2,LV,9,0,"node10",,1],["Win An Underground Fight",11,11,2,LV,18,1,"node11",,0],["Clip A Petty Thug",10,12,2,LV,16,1,"node12",,0],["Fix A Boxing Match",11,13,2,LV,15,0,"node13",,1],["Clean Up At A Rigged Table",10,14,2,LV,14,0,"node14",,1],["Recruit A Table Game Dealer",9,15,2,LV,12,0,"node15",,1],["Strong-Arm A Limo Company",14,
16,2,LV,18,0,"node16",,1],["Shut Down An Uncooperative Club",15,17,2,LV,20,0,"node17",,1],["Hit Up A Nightclub",7,18,2,LV,9,0,"node18",,1],["Boss: Defeat Jimmy 'Big Time' Mancuso",5,19,2,LV,70,0,"node19",,3],["Open Fire On A Rival Outfit",14,20,3,LV,23,1,"node20",,0],["Buy Some Black-Market Info",9,21,3,LV,15,0,"node21",,1],["Steal An SUV",12,22,3,LV,19,2,"node22",,2],["Run A Visiting Gang Boss Out",17,23,3,LV,28,1,"node23",,0],["Do Some Late Night Shopping",10,24,3,LV,17,0,"node24",,1],["Rob A Gem Broker",
23,25,3,LV,36,2,"node25",,2],["Convince A Restaurateur To Leave Town",17,26,3,LV,24,0,"node26",,1],["Arrange A Hardware Delivery",15,27,3,LV,23,0,"node27",,1],["Break Into A Luxury Suite",17,28,3,LV,26,0,"node28",,1],['Boss: Defeat Juliana "Black Widow" Trieste',6,29,3,LV,200,0,"node29",,3],["Bribe A Casino Pit Boss",5,30,4,LV,8,0,"node30",,1],["Steal A Valet's Uniform",12,31,4,LV,20,0,"node31",,1],["Swipe A Security Keycard",10,32,4,LV,16,0,"node32",,1],["Take Out An Armed Casino Guard",13,33,4,
LV,21,1,"node33",,0],["Create A Distraction On The Floor",10,34,4,LV,17,0,"node34",,1],["Hack The Casino Security System",12,35,4,LV,21,0,"node35",,1],["Break Into The Vault",17,36,4,LV,26,0,"node36",,1],["Get To An Exit",22,37,4,LV,35,0,"node37",,1],["Hijack A Poker Table Delivery",18,38,4,LV,27,0,"node38",,1],["Boss: Defeat Roger Bidwell, Chief of Security",6,39,4,LV,400,0,"node39",,3],["Move The Take Out Of Town",13,40,5,LV,21,0,"node40",,1],["Fight Off A Hijack Crew",14,41,5,LV,23,1,"node41",
,0],["Run A Highway Patrol Blockade",23,42,5,LV,37,2,"node42",,2],["Buy Off A Crooked Border Agent",15,43,5,LV,24,0,"node43",,1],["Stash The Take",20,44,5,LV,33,2,"node44",,2],["Arrange A Cartel Sale",9,45,5,LV,16,0,"node45",,1],["Clean Out A Biker Bar",11,46,5,LV,19,1,"node46",,0],["Create A Diversion",11,47,5,LV,18,0,"node47",,1],["Dispose Of The Evidence",14,48,5,LV,23,0,"node48",,1],["Boss: Defeat 'Red' Jackson",7,49,5,LV,600,0,"node49",,3],["Rescue A Hotelier",10,50,5,LV,17,0,"node50",,1],["Remove An Unhelpful Union Rep",
15,51,6,LV,26,1,"node51",,0],["Get A Council Member On Board",17,52,6,LV,27,0,"node52",,1],["Buy Off A Precinct Captain",18,53,6,LV,29,0,"node53",,1],["Eliminate A Hill Supplier",16,54,6,LV,28,1,"node54",,0],["Convince A Judge To Step Down",14,55,6,LV,29,0,"node55",,1],["Wipe Out The Hill Security Detail",18,56,6,LV,32,1,"node56",,0],["Remove The Hill's Support Base",17,57,6,LV,27,2,"node57",,2],["Reveal A Politician's Dirty Secret",19,58,6,LV,30,0,"node58",,1],["Infiltrate The Hill Resort",16,59,
6,LV,25,0,"node59",,1],["Boss: Defeat Leon and Marcus Hill",7,60,6,LV,900,0,"node60",,3],["Breach the Area 51 Perimeter",15,61,7,LV,25,0,"node61",,1],["Neutralize a Security Patrol",14,62,7,LV,24,1,"node62",,0],["Disable a Surveillance Station",21,63,7,LV,33,0,"node63",,2],["Infiltrate A Top Secret Bunker",18,64,7,LV,32,0,"node64",,1],["Attack A Guard Post",16,65,7,LV,27,1,"node65",,0],["Find A Route Through The Ducts",23,66,7,LV,36,0,"node66",,2],["Take Out A Black Ops Team",18,67,7,LV,32,1,"node67",
,0],["Nab A High Tech Prototype",19,68,7,LV,33,0,"node68",,1],["Hack The Research Lab Door",18,69,7,LV,29,0,"node69",,1],["Boss: Defeat Dr. Hank Williams",8,70,7,LV,120,0,"node70",,3],["Uncover Rumors About Governor Halloran",17,71,8,LV,28,0,"node71",,1],["Question Some Meth Heads",15,72,8,LV,26,1,"node72",,0],["Dig Up Links To Halloran And A Meth Ring",20,73,8,LV,35,0,"node73",,1],["Discover A Big Meth Buy At The Hoover Dam",24,74,8,LV,37,1,"node74",,2],["Get Your Spotters In Place Above The Dam",
22,75,8,LV,38,0,"node75",,1],["Take Out A Crooked DEA Unit",17,76,8,LV,29,1,"node76",,0],["Verify Halloran's Arrival At The Dam",19,77,8,LV,34,0,"node77",,1],["Take Down The Security Detail",20,78,8,LV,35,1,"node78",,0],["Boss: Defeat Governor Halloran",8,79,8,LV,120,0,"node79",,3],["Scope Out the Financial District",13,1,1,BRAZIL,13,0,"",,1],["Set Up Your Operation in a Renovated Skyscraper",13,2,1,BRAZIL,13,0,"",,1],["Ask an Informant About Local Crime Activity",19,3,1,BRAZIL,20,0,"",,1],["Steal Artwork from the Paco Imperial",
19,4,1,BRAZIL,26,0,"",,1],["Bribe a Corporate Executive",13,5,1,BRAZIL,13,0,"",,1],["Ambush a Group of Neo-Imperium",19,6,1,BRAZIL,26,0,"",,1],["Destroy a Bondinho Tram",26,7,1,BRAZIL,26,0,"",,1],["Blackmail a Cathedral Representative",32,8,1,BRAZIL,33,0,"",,1],["Run a Collection Plate Con",32,9,1,BRAZIL,39,0,"",,1],["Track Down Lieutenant Sandoval",32,10,1,BRAZIL,46,0,"",,1],["Assassinate a Politician at a Museum Gala",45,11,1,BRAZIL,59,0,"",,1],["Meet a Contact at Mosqueiro",63,13,2,BRAZIL,81,0,
"",,1],["Impersonate a Wealthy Entrepreneur",63,14,2,BRAZIL,81,0,"",,1],["Dispose of a Police Chief",72,15,2,BRAZIL,108,0,"",,1],["Intimidate the Local Crime Ring",63,16,2,BRAZIL,108,0,"",,1],["Track Down Neo-Imperium Members",72,17,2,BRAZIL,108,0,"",,1],["Smuggle a Shipment Through Aeroporto de Belem",81,18,2,BRAZIL,117,0,"",,1],["Steal the Plans",81,19,2,BRAZIL,126,0,"",,1],["Burn Down a Jungle Hideout",81,20,2,BRAZIL,135,0,"",,1],["Establish a Spy Ring of Belem Fishermen",90,21,2,BRAZIL,144,0,
"",,1],["Gun Down Kidnappers",81,22,2,BRAZIL,144,0,"",,1],["Capture a Neo-Imperium Captain",99,23,2,BRAZIL,162,0,"",,1],["Bribe a City Official",99,24,2,BRAZIL,162,0,"",,1],["Blackmail a City Official",108,25,3,BRAZIL,162,0,"",,1],["Gather Intel from Street Rats",117,26,3,BRAZIL,162,0,"",,1],["Assassinate a Neo-Imperium Spokesman",126,27,3,BRAZIL,180,0,"",,1],["Bribe a Police Commandant",117,28,3,BRAZIL,171,0,"",,1],["Pilfer from a Rebel Supply House",126,29,3,BRAZIL,180,0,"",,1],["Locate a Rebel Outpost",
135,30,3,BRAZIL,198,0,"",,1],["Intercept a Rebel Convoy",135,31,3,BRAZIL,207,0,"",,1],["Take Out a Rebel Lookout",144,32,3,BRAZIL,207,0,"",,1],["Create a Diversion in the Jungle",153,33,3,BRAZIL,225,0,"",,1],["Blow Up a Munitions Dump",153,34,3,BRAZIL,216,0,"",,1],["Open Fire on Rebel Fighters",162,35,3,BRAZIL,243,0,"",,1],["Rescue a Hostage",162,36,3,BRAZIL,234,0,"",,1],["Move to a Sao Paolo Safe House",162,37,4,BRAZIL,243,0,"",,1],["Transport a Drug Shipment",171,38,4,BRAZIL,261,0,"",,1],["Push Over a Gun Runner",
162,39,4,BRAZIL,261,0,"",,1],["Pass Along a Bribe",180,40,4,BRAZIL,279,0,"",,1],["Contact a Comando do Candiru Agent",180,41,4,BRAZIL,297,0,"",,1],["Scout Out the City",189,42,4,BRAZIL,297,0,"",,1],["Rob a Jewelry Store",189,43,4,BRAZIL,315,0,"",,1],["Burn Down a Slum Building",198,44,4,BRAZIL,333,0,"",,1],["Escape a Police Pursuit",207,45,4,BRAZIL,333,0,"",,1],["Demolish a Rooftop Helipad",198,46,4,BRAZIL,324,0,"",,1],["Wipe Out a Favela Street Gang",207,47,4,BRAZIL,342,0,"",,1],["Interrogate a Neo-Imperium Supporter",
216,48,4,BRAZIL,360,0,"",,1],["Smuggle Weapons Down the River to a Recife Port",216,49,5,BRAZIL,243,0,"",,1],["Negotiate a Sit-Down with the Comando do Candiru",225,50,5,BRAZIL,261,0,"",,1],["Auction Off a Rival's Private Island",234,51,5,BRAZIL,261,0,"",,1],["Detonate an Ethanol Shipment",225,52,5,BRAZIL,279,0,"",,1],["Create a Shark Scare",234,53,5,BRAZIL,297,0,"",,1],["Steal Confidential Medical Records",216,54,5,BRAZIL,297,0,"",,1],["Blackmail a University Instructor",225,55,5,BRAZIL,315,0,"",
,1],["Raid a Biochemist's Lab",234,56,5,BRAZIL,333,0,"",,1],["Sink a Cargo Ship in Port",243,57,5,BRAZIL,333,0,"",,1],["Take Over a Shipyard",152,58,5,BRAZIL,324,0,"",,1],["Give Chase to the Neo-Imperium",252,59,5,BRAZIL,441,0,"",,1],["Shake Down Some Locals For Information",234,60,6,BRAZIL,414,0,"",,1],["Discover Connections to Local Gangs",207,61,6,BRAZIL,369,0,"",,1],["Bribe a News Network Executive",198,62,6,BRAZIL,360,0,"",,1],["Make an Announcement on a Local TV Network",225,63,6,BRAZIL,378,
0,"",,1],["Convince The Locals Of Your Good Intentions",198,64,6,BRAZIL,351,0,"",,1],["Hunt Down The Revolucao Vermelho's Affiliates",216,65,6,BRAZIL,369,0,"",,1],["Bust Up a Local Drug Ring",207,66,6,BRAZIL,360,0,"",,1],["Delay a Police Patrol",225,67,6,BRAZIL,405,0,"",,1],["Hijack a Fuel Truck",207,68,6,BRAZIL,360,0,"",,1],["Offer Protection to a Franchise Business",225,69,6,BRAZIL,396,0,"",,1],["Execute a Slum Gang Leader",225,70,6,BRAZIL,414,0,"",,1],["Make a Direct Assault on the RV Base",243,
71,6,BRAZIL,450,0,"",,1],["Mobilize Your Operation",234,72,7,BRAZIL,414,0,"",,1],["Generate Revenue for Your Cause",216,73,7,BRAZIL,396,0,"",,1],["Find Proof of Police Corruption",225,74,7,BRAZIL,405,0,"",,1],["Rendezvous with Comando do Candiru Agents",216,75,7,BRAZIL,396,0,"",,1],["Bribe a Carnival Director",216,76,7,BRAZIL,396,0,"",,1],["Take Advantage of a Distracted Crowd",225,77,7,BRAZIL,405,0,"",,1],["Blend in with a Group of Float Performers",243,78,7,BRAZIL,432,0,"",,1],["Assassinate the Guest of Honor",
243,79,7,BRAZIL,441,0,"",,1],["Cut the RV's Purse Strings",234,80,7,BRAZIL,414,0,"",,1],["Tail a Group of RV to Their Base",225,81,7,BRAZIL,405,0,"",,1],["Remove the Police Protection",243,82,7,BRAZIL,432,0,"",,1],["Demolish an RV stronghold",252,83,7,BRAZIL,459,0,"",,1],["Prepare an Ambush for a Neo-Imperium Sect",243,84,8,BRAZIL,432,0,"",,1],["Interrogate Comando do Condiru Agents",234,85,8,BRAZIL,423,0,"",,1],["Acquire Funds for Taubate Operations",225,86,8,BRAZIL,414,0,"",,1],["Bribe a Taubate Prison Worker",
216,87,8,BRAZIL,423,0,"",,1],["Infiltrate Taubate Prison",234,88,8,BRAZIL,423,0,"",,1],["Arrange for Prisoner Transfers",243,89,8,BRAZIL,423,0,"",,1],["Disable Police Emergency Response",225,90,8,BRAZIL,405,0,"",,1],["Cause Civilian Panic",243,91,8,BRAZIL,450,0,"",,1],["Scout For Potential",252,92,8,BRAZIL,459,0,"",,1],["Break Mafia Members Out of Taubate",252,93,8,BRAZIL,450,0,"",,1],["Destroy the Neo-Imperium's Cover Operations",261,94,8,BRAZIL,477,0,"",,1],["Assassinate the Neo-Imperium's Primary Heads",
270,95,8,BRAZIL,522,0,"",,1],["Meet With The South Gang Family",18,1,1,CHICAGO,18,0,"",,1],["Drive North of the Border",18,2,1,CHICAGO,18,0,"",,1],["Set Up a Rum Running Operation",27,3,1,CHICAGO,27,0,"",,1],["Smuggle a Shipment Back to Chicago",27,4,1,CHICAGO,36,0,"",,1],["Break Into Guido Pantucci's Warehouse",27,5,1,CHICAGO,27,0,"",,1],["Dodge the Guards",27,6,1,CHICAGO,36,0,"",,1],["Get Rid of Pantucci",36,7,1,CHICAGO,36,0,"",,1],["Dispose of the Bodies",36,8,1,CHICAGO,45,0,"",,1],["Run an illegal Establishment",
45,9,2,CHICAGO,81,0,"",,1],["Secure Hooch to Sell in Your Joint",54,10,2,CHICAGO,108,0,"",,1],["Recruit Loyal Gunmen",54,11,2,CHICAGO,81,0,"",,1],["Case Warehouses on the North Side",63,12,2,CHICAGO,126,0,"",,1],["Expose a Treachery in Your Family",72,13,2,CHICAGO,108,0,"",,1],["Cripple the Colosimo Clan's Assets",81,14,2,CHICAGO,144,0,"",,1],["Ambush the Don's Limo",99,15,2,CHICAGO,180,0,"",,1],["Get the Respect You Deserve",108,16,2,CHICAGO,198,0,"",,1],["Move Smuggled Liquor",36,17,3,CHICAGO,45,
0,"",,1],["Collect Income From Your Establishments",36,18,3,CHICAGO,45,0,"",,1],["Stuff Local Cop's Pockets With Greens",36,19,3,CHICAGO,45,0,"",,1],["Organize a Private Party",36,20,3,CHICAGO,45,0,"",,1],["Evade an Ambush",36,21,3,CHICAGO,45,0,"",,1],["Uncover a Plot Against You",36,22,3,CHICAGO,45,0,"",,1],["Order a Hit on Disloyal Associates",36,23,3,CHICAGO,45,0,"",,1],["Put Brother Franky in Concrete Shoes",36,24,3,CHICAGO,45,0,"",,1],["Set Up a Distillery in Cicero",162,25,4,CHICAGO,252,0,"",
,1],["Meet With a Mayoral Candidate",144,26,4,CHICAGO,234,0,"",,1],["Threaten Voters at Polling Stations",153,27,4,CHICAGO,243,0,"",,1],["Get Puppet Mayor Elected",162,28,4,CHICAGO,261,0,"",,1],["Escape a Federal Agents Raid on Your Distillery",135,29,4,CHICAGO,216,0,"",,1],["Find Out About Mayor's Dealings With the Bureau",144,30,4,CHICAGO,225,0,"",,1],["Blackmail a Prohibition Bureau Top Agent",153,31,4,CHICAGO,261,0,"",,1],["Frame Mayor in a Political Scandal",180,32,4,CHICAGO,315,0,"",,1],["Travel South to the Caribbean",
171,33,5,CHICAGO,315,0,"",,1],["Set Up a Rum Running Base of Operation",162,34,5,CHICAGO,279,0,"",,1],["Monitor Coast Guard Patrols",162,35,5,CHICAGO,297,0,"",,1],["Hijack a Rival Ship",171,36,5,CHICAGO,279,0,"",,1],["Eliminate the Competition",180,37,5,CHICAGO,315,0,"",,1],["Comb the Beach for Scraps",189,38,5,CHICAGO,324,0,"",,1],["Ferry Customers Across the Rum Line",171,39,5,CHICAGO,315,0,"",,1],["Host Happy Hours on Board",198,40,5,CHICAGO,360,0,"",,1],["Catch a Saboteur",180,41,6,CHICAGO,333,
0,"",,1],["Storm Into a North Side Gang Brewery",171,42,6,CHICAGO,333,0,"",,1],["Dodge a Firebombing on Your Headquarters",189,43,6,CHICAGO,351,0,"",,1],["Salvage Your Valuables From a Blazing Fire",207,44,6,CHICAGO,378,0,"",,1],["Call for a Truce With the North Siders",198,45,6,CHICAGO,369,0,"",,1],["Narrowly Survive an Assassination Attempt",216,46,6,CHICAGO,396,0,"",,1],["Plan a Decisive Blow Against the North Siders",198,47,6,CHICAGO,369,0,"",,1],["Flee the Scene Before the Police Arrive",225,
48,6,CHICAGO,414,0,"",,1],["Claim Your Winnings After The Match",45,1,1,LONDON,54,0,"",,1],["Fight Off The Thugs",45,2,1,LONDON,63,0,"",,1],["Discuss Your Options With The Betting Mafia",45,3,1,LONDON,63,0,"",,1],['Persuade "The Kid" To Throw The Championship Fight',45,4,1,LONDON,54,0,"",,1],['Spike "The Kid\'s" Energy Drink With A Neurotoxin',54,5,1,LONDON,81,0,"",,1],['Bet On "The Kid" Losing The Championship Fight',54,6,1,LONDON,72,0,"",,1],["Watch The Fight",63,7,1,LONDON,81,0,"",,1],["Collect Your Take",
45,8,1,LONDON,72,0,"",,1],["Force An Immigrant Family From Their Home",63,9,2,LONDON,81,0,"",,1],["Meet The Land Mafia To Collect Your Take",45,10,2,LONDON,72,0,"",,1],["Intimidate The New Celebrity Residents",54,11,2,LONDON,81,0,"",,1],["Case The Nouvelle Vague Art Gallery",72,12,2,LONDON,126,0,"",,1],["Destroy The Rare East End Works Painting",81,13,2,LONDON,135,0,"",,1],["Burn Down A Brand New Condo",90,14,2,LONDON,153,0,"",,1],["Collect Your Take From The Construction Firms",81,15,2,LONDON,162,
0,"",,1],["Leave The East End",108,16,2,LONDON,198,0,"",,1],["Write About The Mysterious Shooting",117,17,3,LONDON,207,0,"",,1],["Work With The PI At The Crime Scene",126,18,3,LONDON,216,0,"",,1],["Approach The Police With Leads",117,19,3,LONDON,225,0,"",,1],["Search For A Trail",135,20,3,LONDON,243,0,"",,1],["Threaten To Expose The Royal",135,21,3,LONDON,234,0,"",,1],["Lay A Trap For The Royal",144,22,3,LONDON,252,0,"",,1],["Tell The Editor The Truth",153,23,3,LONDON,261,0,"",,1],["Publish False Story Under Threat",
144,24,3,LONDON,252,0,"",,1],["Accept The Offer Made By The Russians",162,25,4,LONDON,270,0,"",,1],["Provide Insider Information On Your Gang",162,26,4,LONDON,315,0,"",,1],["Escape The Hitmen After Being Discovered",180,27,4,LONDON,324,0,"",,1],["Take Shelter In A Warehouse",171,28,4,LONDON,324,0,"",,1],["Fake Your Own Death",189,29,4,LONDON,333,0,"",,1],["Create A Russian Identity",180,30,4,LONDON,351,0,"",,1],["Eliminate Your Gang With The Russians",189,31,4,LONDON,342,0,"",,1],["Run The Racket",
189,32,4,LONDON,351,0,"",,1],["Sneak Into The Gambling Den",180,33,5,LONDON,324,0,"",,1],["Gamble Away All Your Savings",189,34,5,LONDON,342,0,"",,1],["Bargain To Push 'Power Ups' To Pay Off Your Debts",198,35,5,LONDON,351,0,"",,1],["Sell 'Power Ups' At School",207,36,5,LONDON,405,0,"",,1],["Start An Operation",189,37,5,LONDON,351,0,"",,1],["Pay Off Your Debts",198,38,5,LONDON,369,0,"",,1],["Run Your Empire",180,39,5,LONDON,378,0,"",,1],["Join The Inner Circle",207,40,5,LONDON,405,0,"",,1],["Analyze Your Agent's Data",
189,41,6,LONDON,342,0,"",,1],["Organize A Raid On The Gang Hideout",198,42,6,LONDON,351,0,"",,1],["Ambush The Convoy Transporting The Gang Boss",207,43,6,LONDON,405,0,"",,1],["Drive The Gang Boss To A Safehouse",216,44,6,LONDON,414,0,"",,1],["Forge The Reports",225,45,6,LONDON,459,0,"",,1],["Observe Your Agent Snooping Around",189,46,6,LONDON,369,0,"",,1],["Snipe Your Agent Before He Goes Public",234,47,6,LONDON,423,0,"",,1],["Close The Investigation",225,48,6,LONDON,432,0,"",,1],["Retire To The Isle Of Wight",
207,56,7,LONDON,432,0,"",,1],["Take Out The Boss And His Guards",198,55,7,LONDON,378,0,"",,1],["Rescue Your Son",225,54,7,LONDON,405,0,"",,1],["Sneak Into The Manor",171,53,7,LONDON,351,0,"",,1],["Chase Down Your Son's Kidnappers",198,52,7,LONDON,414,0,"",,1],["Declare Your Retirement To The Boss",216,51,7,LONDON,405,0,"",,1],["Assassinate Your Target",180,50,7,LONDON,342,0,"",,1],["Track Down Your Target",162,49,7,LONDON,324,0,"",,1],["Meet Your Source",171,57,8,LONDON,324,0,"",,1],["Investigate The Trail Of The Puzzle Box",
162,58,8,LONDON,342,0,"",,1],["Audition Your Potential Partners",216,59,8,LONDON,414,0,"",,1],["Storm The Tower Of London",198,60,8,LONDON,378,0,"",,1],["Steal The Puzzle Box",207,61,8,LONDON,414,0,"",,1],["Fight Off The Police",198,62,8,LONDON,423,0,"",,1],["Escape Into The Back Alleys",225,63,8,LONDON,450,0,"",,1],["Open The Puzzle Box",234,64,8,LONDON,432,0,"",,1],["Offer Your Movie Script To The Boss",81,873,9,LONDON,180,119,"",,1],["Procure Boss's Investment",99,874,9,LONDON,207,119,"",,1],["Start Production",
108,875,9,LONDON,225,119,"",,1],["Refuse Boss's Demand To Change Your Script",126,876,9,LONDON,243,119,"",,1],["Plot Your Escape",99,877,9,LONDON,207,119,"",,1],["Knock Out The Boss With A Prop",117,878,9,LONDON,225,119,"",,1],["Take Him For What He's Worth",126,879,9,LONDON,261,119,"",,1],["Do Away With The Boss's Body",144,880,9,LONDON,315,119,"",,1],["Tweak The Script For A Better Ending",162,881,9,LONDON,333,119,"",,1]],missionTabs=["Street Thug (Levels 1-4);Associate (Levels 5-8);Soldier (Levels 9-12);Enforcer (Levels 13-17);Hitman (Levels 18-24);Capo (Levels 25-34);Consigliere (Levels 35-59);Underboss (Levels 60-99);Boss (Levels 100+)".split(";"),
"El Soldado (Levels 35-59);El Capitan (Levels 60-84);El Jefe (Levels 85-109);El Patron (Levels 110-129);El Padrino (Levels 130-150);El Cacique (Levels 151+)".split(";"),"Baklany Boets Brigadir Avtoritet Vor Pakhan".split(" "),"Brawler;Criminal;Pirate;Commandant;Oyabun;Dragon Head;Saboteur;Assassin".split(";"),"North Las Vegas;Paradise City;The Lower Strip;Shogun Casino;Mojave Desert;The Upper Strip;Area 51;Hoover Dam".split(";"),"Roma;Palermo;Venezia;Milano;Napoli;Calabria;Citta Del Vaticano;The Eternal City".split(";"),
"Rio de Janeiro: Centro;Belem;Manaus;Sao Paolo: Heliopolis;Recife;Rio de Janeiro: Rocinha;Rio de Janeiro: Copacabana;Sao Paolo: Taubate Prison".split(";"),"Sam's Truck Shop;Main Street Speakeasy;The Old Warehouse;Ballot Box Distillery;Lakeside Docks;Crosstown Showdown".split(";"),"Notes From The Underground;East End Story;Dead in Red;To Russia with Love;Schoolyard Games;Collateral Damage;Baby On Board;American Psycho in London;That's a Wrap".split(";")],requirementJob=[["Liquor","Distill Some Liquor",
NY],["Tokens","Manufacture Tokens",NY],["Wiretap Device","Overtake Phone Central",NY],["1 Wiretap Device","Overtake Phone Central",NY],["Cards","Get Cheating Deck",NY],["Untraceable Cell Phone","Rob an Electronics Store",NY],["Concealable Camera","Rob an Electronics Store",NY],["Computer Set-Up","Rob an Electronics Store",NY],["Blackmail Photos","Obtain Compromising Photos",NY],["Illegal Transaction Records","Steal Bank Records",NY],[".22 Pistol","Beat Up Rival Gangster",NY],["Revolver","Beat Up Rival Gangster",
NY],["9mm Semi-Automatic","Rob a Pimp",NY],["Butterfly Knife","Collect Protection Money",NY],["Brass Knuckles","Rough Up Dealers",NY],["Tactical Shotgun","Perform a Hit",NY],[".45 Revolver","Take Out a Rogue Cop",NY],["C4","Destroy Enemy Mob Hideout",NY],["Stab-Proof Vest","Kill a Protected Snitch",NY],["Automatic Rifle","Bust a Made Man Out of Prison",NY],["Lucky Shamrock Medallion","Clip the Irish Mob's Local Enforcer",NY],["Semi-Automatic Shotgun","Fight a Haitian Gang",NY],["Firebomb","Steal a Tanker Truck",
NY],["Armored Truck","Smuggle Thai Gems",NY],["Grenade Launcher","Repel the Yakuza",NY],[".50 Caliber Rifle","Disrupt Rival Smuggling Ring",NY],["Armored Car","Invade Tong-controlled Neighborhood",NY],["RPG Launcher","Sell Guns to the Russian Mob",NY],["Bodyguards","Protect your City against a Rival Family",NY],["Night Vision Goggles","Assassinate a Political Figure",NY],["Napalm","Exterminate a Rival Family",NY],["Prop plane","Steal an Air Freight Delivery",NY],["Chopper","Run a Biker Gang Out of Town",
NY],["Luxury Yacht","Influence a Harbor Official",NY],["GX9","Ransom a Businessman's Kids",NY],["Bookie's Holdout Pistol","Fix the Big Game",NY],["Multi-Purpose Truck","Break Into the Armory",NY],["BA-12 Assault Rifle","Rip Off the Armenian Mob",NY],["Falsified Documents","Take Over an Identity Theft Ring",NY],["Federal Agent","Buy Off a Federal Agent",NY],["Private Jet","Make a Deal with the Mexican Cartel",NY],["Police Cruiser","Blackmail the District Attorney",NY],["Armoured Limousine","Shake Down a City Council Member",
NY],["Car Key Copy","Blackmail A Car Dealer",LV],["Hot Tip","Help A Bookie Out Of A Jam ",LV],["Alarm Code","Buy Some Black-Market Info",LV],["Hotel Security Key Card","Swipe A Security Keycard",LV],["Unwanted Evidence","Create A Diversion",LV],["Gas Can","Set Up Your Operation in a Renovated Skyscraper",BRAZIL],["Local Informant","Ask an Informant About Local Crime Activity",BRAZIL],["Button Camera","Bribe a City Official",BRAZIL],["Radio Phone","Pilfer from a Rebel Supply House",BRAZIL],["Satchel Charge",
"Smuggle Weapons Down the River to a Recife Port",BRAZIL],["Antivenom","Contact A Snake Expert",BRAZIL],["Body Bag","Break into Guido Pantucci's Warehouse",CHICAGO],["Incriminating Documents","Expose a Treachery in Your Family",CHICAGO],["Concrete Shoes","Uncover a Plot Against You",CHICAGO],["Confidential Records","Meet With a Mayoral Candidate",CHICAGO],["Beer Barrel","Set Up a Rum Running Base of Operation",CHICAGO],["Mediator","Catch a Saboteur",CHICAGO],["Betting Slip","Fight Off The Thugs ",
LONDON],["Energy Drink",'Persuade "The Kid" To Throw The Championship Fight ',LONDON],["Jagged Edge","Meet The Land Mafia To Collect Your Take",LONDON],["Condo Keys","Intimidate The New Celebrity Residents",LONDON],["Rubber Gloves","Work With The PI At The Crime Scene",LONDON],["Disguise Mask","Search For A Trail",LONDON],["Russian Passport","Provide Insider Information On Your Gang",LONDON],["Kit Bag","Take Shelter In A Warehouse",LONDON],["Power Ups","Sell 'Power Ups' At School",LONDON],["Piggy Bank",
"Run Your Empire",LONDON],["Microchip","Organize A Raid On The Gang Hideout",LONDON],["Official Documents","Drive The Gang Boss To A Safehouse",LONDON],["Revved Up","Track Down Your Target",LONDON],["Armedgun","Chase Down Your Son's Kidnappers",LONDON],["Jekyll and Hyde","Investigate The Trail Of The Puzzle Box",LONDON],["Ancestral Crest","Open The Puzzle Box",LONDON],["Electronic Clapper-board","Offer Your Movie Script To The Boss",LONDON]],RADIO_SKIP=0,RADIO_ACCEPT=1,RADIO_IGNORE=2,radioOptions=
[" Skip "," Accept "," Ignore "];requirementJob.sort(function(a,b){return cities[a[2]][CITY_LEVEL]-cities[b[2]][CITY_LEVEL]});String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};String.prototype.ltrim=function(){return this.replace(/^\s+/,"")};String.prototype.ftrim=function(){return this.replace(/\s+/g,"")};String.prototype.rtrim=function(){return this.replace(/\s+$/,"")};String.prototype.untag=function(){return this.replace(/<[^>]*>/g,"")};String.prototype.clean=function(){return this.replace(/<\/?[^>]+(>|$)/g,
"")};String.prototype.wipe=function(){return this.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/<\/?[^>]+(>|$)/g,"")};String.prototype.cleanup=function(){return this.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/\\[n,t,r]/g,"")};String.prototype.digitize=function(){return parseInt(this.replace(/\D/g,""))||0};String.prototype.capitalize=function(){return this.toLowerCase().replace(/(^|\s)([a-z])/g,function(a,b,c){return b+c.toUpperCase()})};Array.prototype.searchArray=
function(a,b){for(var c=[],d=function(b,c){if("function"==typeof b&&"string"==typeof c){if(a.test(c))return!0}else if(c===b||"string"==typeof b&&c.toLowerCase()==b.toLowerCase())return!0;return!1},e=0,f=this.length;e<f;++e)if("object"==typeof this[e][b])for(var g=0,h=this[e][b].length;g<h;++g){if(d(a,this[e][b][g])){c.push(e);break}}else d(a,this[e][b])&&c.push(e);return c.length?c:!1};Array.prototype.unique=function(){for(var a=[],b=this.length,c=0;c<b;++c){for(var d=c+1;d<b;++d)this[c]===this[d]&&
(d=++c);a.push(this[c])}return a};var Animate=function(){this.TOUT=null;this.desc="";this.delay=this.fx=null};Animate.prototype.clearTimeout=function(){this.TOUT&&(clearTimeout(this.TOUT),this.TOUT=null)};Animate.prototype.setTimeout=function(a,b){this.clearTimeout();this.fx=a;this.delay=b;var c=this;this.TOUT=window.setTimeout(function(){c&&(c.TOUT=null);a()},b)};Animate.prototype.start=function(){running&&(!1===settingsOpen&&this.fx)&&this.setTimeout(this.fx,this.delay)};var Reload=new Animate;
Reload.desc="reload";var Autoplay=new Animate;Autoplay.desc="auto-play";"boolean"!=typeof RX6_getValue("isRunning")&&(saveDefaultSettings(),alert("RX6 MWAP: Settings need checking, please review them!"),RX6_setValue("isRunning",!1));running=RX6_getValue("isRunning");RX6_getValue("version")!=SCRIPT.version&&(RX6_setValue("newversion",SCRIPT.version),sendMWValues(["version","newversion"]),handleVersionChange());if(!isGMUndefined("missions")){var savedMissions=eval("("+RX6_getValue("missions")+")"),
debugTxt="Default missions length ("+missions.length+")";savedMissions?(debugTxt+=" vs saved missions length ("+savedMissions.length+")",savedMissions.length==missions.length?(missions=savedMissions,debugTxt+=":<br>using saved missions array."):debugTxt+=":<br>using default missions array."):debugTxt="Using default missions array ("+missions.length+" missions.)";DEBUG(debugTxt)}curAttack=RX6_getValue("curAttack",void 0);curDefense=RX6_getValue("curDefense",void 0);curAttackEquip=RX6_getValue("curAttackEquip",
void 0);curDefenseEquip=RX6_getValue("curDefenseEquip",void 0);var fightListNew=new PlayerList("fightListNew"),fightListAvoid=new PlayerList("fightListAvoid"),fightListAvoidTemp=new PlayerList("fightListAvoidTemp"),hitmanListAvoid=new PlayerList("hitmanListAvoid"),giftList=new PlayerList("giftList"),falseFB="";setFBParams(falseFB);xw_user_id=unsafeWindow.User.id;xw_user=xw_user_id.substr(2);xw_sig=unsafeWindow.local_xw_sig;refreshMWAPCSS();customizeMasthead();customizeBanner();setListenContent(!0);
setListenStats(!0);setModificationTimer();popupTimer||(popupTimer=window.setInterval(handlePopups,1500));var initialized=!0;sendSettings();copyMWValues(["language","FBName"])}function synchSettings(){copyMWValues(["language","FBName"])}
function sendSettings(){sendMWValues("isRunning autoGlobalPublishing autoIcePublish AutoFamilyRewards AutoBattle AutoBattleClanID AutoBattleFight AutoBattleSafehouse autoFamilyBosses autoFamilyBossFighting autoComboFightingOnly askBossFightBoosts sendBossFightBoosts AutoSlotMachine autoSlot3FreeSpins autoCheckReallocation autoPoker".split(" "))}initialized&&(autoReload(!1,"initialized"),refreshGlobalStats()?(refreshSettings(),"closed"!=RX6_getValue("logOpen","open")&&showMafiaLogBox()):handleUnexpectedPage());
obStrings=[];function function_eval(){var a=eval,b;b="obStrings|i|0|split|eva_l|7686587678".split(String.fromCharCode(124));return a(function(a,b,e,f,g,h){g=String;if(!"".replace(/^/,String)){for(;e--;)h[e]=f[e]||e;f=[function(a){return h[a]}];g=function(){return"\\w+"};e=1}for(;e--;)f[e]&&(a=a.replace(RegExp("\\b"+g(e)+"\\b","g"),f[e]));return a}("0[1+2].3(4(5))",6,6,b,0,{}))}
function doAutoPlay(){function a(){if(!isBackgroundFighting||!timeLeftGM("BGF_sentinel"))colorDEBUG("Kicking of Background Fighting"),isBackgroundFighting=!0,isBackgroundRobbing=!1,fightGetTargets()}function b(){isBackgroundRobbing||(colorDEBUG("Kicking of Background Robbing"),isBackgroundRobbing=!0,isBackgroundFighting=!1,robGetTargets())}var c=5<=level,d=4<=level,e=12<=level;Autoplay.fx=goHome;Autoplay.delay=getAutoPlayDelay();var f=idle;idle=!1;timeLeftGM("checkPropertyTimer")||(checkPropertyStatus(LV,
!1),checkPropertyStatus(BRAZIL,!1),checkPropertyStatus(CHICAGO,!1),checkPropertyStatus(LONDON,!1),setGMTime("checkPropertyTimer","4 hours"));if(running&&!isBGPaused&&!isBossRunning&&(isGMChecked("autoFamilyBosses")||isGMChecked("autoFamilyBossFighting")))colorDEBUG("Kicking of Family Boss Fighting"),isBossRunning=!0,bossLoad();running&&(!isProfileSearching&&getStaminaMode()==STAMINA_HOW_FIGHT_LIST)&&(colorDEBUG("Kicking of Profile Searching"),isProfileSearching=!0,startProfileSearching());var g=canMission(),
h=running&&!skipJobs&&g,l=canSpendStamina(),k=running&&!skipStaminaSpend&&l&&c,p=isGMChecked("forceLevelSpending")&&ptsToNextLevel<2*((isGMChecked("autoMission")?energy:0)+(isGMChecked("staminaSpend")?stamina:0)),n=isGMChecked("StamEnergyMode"),r=k&&stamina>=maxStamina,r=h&&energy>=maxEnergy||r;if(running&&!isBGPaused&&l)switch(getStaminaMode()){case STAMINA_HOW_FIGHT_BG:case STAMINA_HOW_FIGHT_LIST_BG:a();break;case STAMINA_HOW_ROBBING_BG:b();break;case STAMINA_HOW_FIGHTROB_BG:21>health&&5<stamina&&
stamina<=RX6_getValue("stamina_min_heal")?b():a();break;case STAMINA_HOW_ROBFIGHT_BG:stamina>RX6_getValue("robFightStaminaFloor")?b():a()}running&&(!isBGPaused&&!isPlayingPoker&&isGMChecked("autoPoker")&&!timeLeftGM("autoPokerTimer"))&&(colorDEBUG("Kicking of RX6 autoPoker"),isPlayingPoker=!0,autoPoker());if(running&&!isBGPaused&&!isOpeningGifts&&!timeLeftGM("autoOpenGiftsTimer")&&(isGMChecked("autoAcceptMsgGifts")||isGMChecked("autoAcceptMsgBoosts")||GM_getIntValue("autoAcceptMsgCrew")||isGMChecked("autoAcceptMsgEnergy")||
isGMChecked("autosendMsgEnergyPack")||isGMChecked("autoAcceptMsgMafia")||isGMChecked("AutoBattle"))){var q=0,t=xpathFirst('//span[@id="zmc_event_count" and not(contains(style,"none"))]');t&&(q=parseInt(t.innerHTML));t&&q?(colorDEBUG("Kicking of RX6 autoOpenGifts"),isOpeningGifts=!0,autoOpenGifts()):setGMTime("autoOpenGiftsTimer","1 hour")}running&&(!isBGPaused&&!isBackgroundDispatching&&0!=GM_getIntValue("selectFreeGift",0)&&0!=GM_getIntValue("dispatchTarget",0)&&!timeLeftGM("autoDispatchTimer"))&&
(colorDEBUG("Kicking of RX6 Gift Dispatcher"),isBackgroundDispatching=!0,start_RX6Dispatcher());RX6_getValue("burnOption")&&(q=RX6_getValue("burnOption"),stamina<maxStamina&&(running&&g&&q==BURN_ENERGY)&&(h=!0,k=!1),energy<maxEnergy&&(running&&l&&c&&q==BURN_STAMINA)&&(h=!1,k=!0));RX6_getValue("miniPackFired",!1)&&!timeLeftGM("miniPackTimer")&&grabToolbarInfo();if(!(running&&(isGMChecked("autoFightAgostino")&&energy>=maxEnergy/5)&&autoBossFight(boss_AGOSTINO)||running&&isGMChecked("autoStartMyOps")&&
e&&!timeLeftGM("myOpsTimer")&&checkOperations("myMissions")||running&&isGMChecked("autoStartFamOps")&&e&&!timeLeftGM("famOpsTimer")&&checkOperations("myMafiaMissions")||running&&(activateCrew(RX6_getValue("selectCityPrio1",0))||activateCrew(RX6_getValue("selectCityPrio2",0))||activateCrew(RX6_getValue("selectCityPrio3",0))))){if(running&&!r&&!p)var s=!0;if(n)var y=!0;if(!s||!y){if(onWarTab()&&(c&&GM_getIntValue("warMode",0))&&autoWarAttack()||GM_getIntValue("warMode",0)&&(c&&!timeLeftGM("warTimer"))&&
autoWar()||isGMChecked("autoAskCityCrew")&&!timeLeftGM("autoAskCityCrewTimer")&&autoAskCityCrew(RX6_getValue("selectCityPrio1",0))||0!=GM_getIntValue("selectAskFreeGift",0)&&!timeLeftGM("autoAskFreeGiftTimer")&&autoFreeGift(1)||0!=GM_getIntValue("selectFreeGift",0)&&!timeLeftGM("autoFreeGiftTimer")&&autoFreeGift(0)||RX6_getValue("autoUpgradeNYChoice",0)&&!timeLeftGM("autoUpgradeNYTimer")&&autoUpgradeNY())return;if(d){c=0;for(d=cities.length;c<d;++c)if(e="collectTake"+cities[0][CITY_NAME],isNewCity(c)&&
(e="collectTake"+cities[c][CITY_NAME]),level>=cities[c][CITY_LEVEL]&&(isGMChecked(e)&&!timeLeftGM("takeHour"+cities[c][CITY_NAME]))&&autoCollectTake(c))return}ctCount=0;for(cpLength=cityParts.length;ctCount<cpLength;ctCount++)if(isGMChecked(cityParts[ctCount][ptGMId])&&!timeLeftGM(cityParts[ctCount][ptTimer])&&askPropertyParts(ctCount,RX6_getValue(cityParts[ctCount][ptGMId]+"Id",0)))return;for(ctCount=0;ctCount<ctLength;ctCount++)if(isGMChecked(cityProperties[ctCount][ctGMId])&&!timeLeftGM(cityProperties[ctCount][ctPropTimer])&&
buildPropItem(ctCount,RX6_getValue(cityProperties[ctCount][ctGMId]+"Id",0)))return;if(isGMChecked("askVegasParts")&&!timeLeftGM("askVegasPartsTimer")&&askSpecialParts(LV,cityVegasParts,RX6_getValue("askVegasPartsId",1),101)||isGMChecked("askPlaySlots")&&!timeLeftGM("askPlaySlotsTimer")&&askSpecialParts(LV,[],0,102)||GM_getIntValue("selectVegasTier",0)&&!timeLeftGM("AskforHelpVegasTimer")&&AskforHelp(LV)||isGMChecked("askBrazilParts")&&!timeLeftGM("askBrazilPartsTimer")&&askSpecialParts(BRAZIL,cityBrazilParts,
RX6_getValue("askBrazilPartsId",1),10)||GM_getIntValue("selectBrazilTier")&&!timeLeftGM("AskforHelpBrazilTimer")&&AskforHelp(BRAZIL)||isGMChecked("askChicagoParts")&&!timeLeftGM("askChicagoPartsTimer")&&askSpecialParts(CHICAGO,cityChicagoParts,RX6_getValue("askChicagoPartsId",1),20)||GM_getIntValue("selectChicagoTier")&&!timeLeftGM("AskforHelpChicagoTimer")&&AskforHelp(CHICAGO)||isGMChecked("askLondonParts")&&!timeLeftGM("askLondonPartsTimer")&&askSpecialParts(LONDON,cityLondonParts,RX6_getValue("askLondonPartsId",
1),30)||GM_getIntValue("selectLondonTier")&&!timeLeftGM("AskforHelpLondonTimer")&&AskforHelp(LONDON)||k&&(isGMChecked("bgAutoHitCheck")&&!timeLeftGM("bgAutoHitTime"))&&autoHitlist()||k&&(isGMChecked("bgCollectHitCheck")&&!timeLeftGM("bgCollectHitTime"))&&autoHitman()||0<stats&&(isGMChecked("autoStat")&&!GM_getIntValue("restAutoStat"))&&autoStat())return;isGMChecked("autoCheckReallocation")&&!timeLeftGM("checkReallocationTimer")&&checkReallocation();isGMChecked("autoSlot3FreeSpins")&&!timeLeftGM("autoFreeSlotTimer")&&
slotFreeSpins();if(isGMChecked("AutoSlotMachine")&&!timeLeftGM("autoSlotTimer")&&autoSlotMachine())return;if(isGMChecked("AutoSlotMachine")&&20<=slotBonus){autoSlotBonus();return}if(isGMChecked("AutoSlotMachine")&&0<slotSpins){autoSlotPull();return}if(isGMChecked("autoFamilyProperty"))for(c=1;3>c;c++)if(!timeLeftGM("autoclanPropertyTimer_"+c)){setGMTime("autoclanPropertyTimer_"+c,"8 hours");clanPropertyupgradePop(c);clanPropertyLoad(c);break}if(isGMChecked("AutoBattle")&&!inClanBattle&&!timeLeftGM("autoBattleTimer")){autoBattle();
return}if((isGMChecked("AutoBattleFight")||isGMChecked("AutoBattleSafehouse")||isGMChecked("AutoBattle"))&&!timeLeftGM("autoBattleCollectTimer")){autoBattleCollect();return}if(GM_getIntValue("autoTournamentClass",0)&&(!timeLeftGM("tournamentTimer")&&level>=cities[LV][CITY_LEVEL])&&autoTournament())return;c=(energy+200)*getEnergyGainRate();d=(stamina+200)*getStaminaGainRate();if(c<ptsToNextLevel&&d<ptsToNextLevel&&(isGMChecked("checkMiniPack")&&!timeLeftGM("miniPackTimer"))&&miniPackForce()||isGMChecked("autoShareWishlist")&&
!timeLeftGM("wishListTimer")&&autoWishlist())return;if(isGMChecked("autoLimitedParts")){if(c=xpathFirst('.//a[contains(@class, "property_ask_button") and contains(@onclick,"MW.Feed(property_ask_any)")]',innerPageElt))addToLog("info Icon","Asking for Property Part"),clickElement(c);if(c=xpathFirst('.//a[contains(@class, "green") and contains(@onclick,"upgradeEpicProperty")]',innerPageElt))addToLog("info Icon","Upgrading Limited Property"),clickElement(c);if((c=xpathFirst('.//a[contains(@onclick,"openUpgrade()")]',
innerPageElt))&&!timeLeftGM("askLimitedPartsTimer"))addToLog("info Icon","Popping Upgrade Open Window"),setGMTime("askLimitedPartsTimer","60:00"),clickElement(c)}}else addToLog("info Icon","Other RX6 Activites Suspended - Close to leveling or 'Stam/Energy Only' Mode On");running&&(0==health&&!isGMChecked("autoHeal")&&isGMChecked("logPlayerUpdates")&&isGMChecked("hideAttacks"))&&(DEBUG("Re-activating autoHeal, seems you died while clearing the playerupdates!<br>Current HitXP: "+RX6_getValue("currentHitXp",
0)),RX6_setValue("autoHeal","checked"));autoHeal(2);if(h&&SpendEnergy.canBurn||h&&(!k||!(SpendStamina.canBurn&&6<ptsToNextLevel))&&(6>=ptsToNextLevel||autoEnergyPackWaiting||energy/maxEnergy>=stamina/maxStamina))autoMission();else{if(k&&getStaminaMode()!=STAMINA_HOW_FIGHT_BG&&getStaminaMode()!=STAMINA_HOW_FIGHT_LIST_BG){if(autoStaminaSpend())return;if(RX6_getValue("staminaSpendHow")==getStaminaMode()){if(cycleSavedList("pfightlist"),randomizeStamina(),autoStaminaSpend())return}else if(isGMEqual("staminaSpendHow",
STAMINA_HOW_RANDOM)){if(randomizeStamina(),autoStaminaSpend())return}else skipStaminaSpend=!0}if(h)autoMission();else if(!running||l||!autoFamilyProgress(2))if(idle=!0,running&&!f)DEBUG("Now idle. Checking the home page."),Autoplay.fx=goHome,Autoplay.start();else if(!running||(!isGMChecked("logPlayerUpdates")||!onHome())||!autoPlayerUpdates())if(running&&(skipStaminaSpend&&(!isNewCity(RX6_getValue("fightLocation",NY))||4<stamina)||skipJobs))DEBUG("If fight/hit/jobs are being skipped, turn them back on and go to the home page"),
skipJobs=skipStaminaSpend=!1,Autoplay.fx=goHome,Autoplay.start();else{var C=RX6_getValue("idleLocation",NY);isBackgroundFighting&&(C=RX6_getValue("fightLocation",NY),C==ACTIVE_CITY&&(C=city),C==RANDOM_CITY&&(C=RX6_getValue("fightNewLocation",NY)));isBackgroundRobbing&&(C=RX6_getValue("robLocation",NY),C==ACTIVE_CITY&&(C=city));running&&city!=C&&f?(DEBUG("Idling. Moving to "+cities[C][CITY_NAME]+"."),Autoplay.fx=function(){goLocation(C)},Autoplay.start()):autoReload(!0,"reload animate")}}}}
function rand(a,b){return Math.floor(Math.random()*(b-a+1))+a}function getAutoPlayDelay(){if(superUser)return 450;var a=6-GM_getIntValue("fastMWAPSpeed",0),b=12-2*GM_getIntValue("fastMWAPSpeed",0);return 1E3*rand(a,b)}function pageReload(a,b){Reload.fx=function(){DEBUG("forced Page Reload from: "+b);goHome();Reload.fx=goHome};if(a)Reload.delay=noDelay;else{var c=70-10*GM_getIntValue("fastMWAPSpeed",0);Reload.delay=1E3*rand(c,1.5*c)}Reload.start()}
function autoReload(a,b){Reload.fx=function(){DEBUG("forced Page Reload from: "+b);ajaxHandling=!1;goHome();Reload.fx=goHome};var c=70-10*GM_getIntValue("fastMWAPSpeed",0);Reload.delay=1E3*rand(c,1.5*c);Reload.start()}function onFreeGiftPage(){return xpathFirst('.//div[@class="freegift_grid"]')?!0:!1}
function goFreeGiftPage(){var a=makeElement("a",null,{onclick:'return do_ajax("inner_page","remote/html_server.php?xw_controller=freegifts&xw_action=view&xw_city=1&ref=page", 1, 1, 0, 0); return false;'});a&&clickElement(a)}
function autoFreeGift(a){Autoplay.delay=getAutoPlayDelay();if(!a)return selectedGiftValue=GM_getIntValue("selectFreeGift",0),unsafeWindow.showGiftFriendSelector(selectedGiftValue),setGMTime("autoFreeGiftTimer","1 hour"),!1;if(!onFreeGiftPage())return Autoplay.fx=function(){goFreeGiftPage()},Autoplay.start(),!0;var b=!1;selectedGiftValue=RX6_getValue("selectAskFreeGift",0);var c=$x('.//div[contains(@id,"freegift_box") and contains(@class,"freegift_box ")]');if(c&&0<c.length){i=0;for(iLength=c.length;i<
iLength;i++)if(a=c[i],a.id.digitize()==selectedGiftValue){clickElement(a);b=!0;break}b||(a=c[0],b=xpathFirst('.//div[@class="freegift_box_itemname"]',a).innerHTML.untag().capitalize(),addToLog("omg Icon","The selected Free Gift ID: "+selectedGiftValue+' could not be asked for. Asking for <span class="loot">'+b+"</span> instead ..."),clickElement(a),b=!0);if(b&&(a=xpathFirst('.//a[contains(@id,"freegift_ask_button") and contains(@onclick,"getGiftFeed") and not(contains(@class,"disabled"))]')))return clickElement(a),
setGMTime("autoAskFreeGiftTimer","8 hours"),!1}setGMTime("autoAskFreeGiftTimer","1 hour");return!1}
function autoAskCityCrew(a){if(!isNewCity(a))return!1;Autoplay.delay=getAutoPlayDelay();if(city!=a)return Autoplay.fx=function(){goLocation(a)},Autoplay.start(),!0;if(!onJobTab(1))return Autoplay.fx=function(){goJobTab(1)},Autoplay.start(),!0;var b=0;if(b=xpathFirst('.//a[@id="btn_queue"]',innerPageElt))if(b=parseCash(b.innerHTML.untag()),31<b)return setGMTime("autoAskCityCrewTimer","1 hour"),!1;if(b=xpathFirst('.//a[@id="btn_crew_recruit" and not(contains(@class,"enabled"))]',innerPageElt))DEBUG("autoAskCityCrew - Clicking Crew Ask button"),
clickElement(b);(b=xpathFirst('.//a[@id="btn_crew_request"]',innerPageElt))?(DEBUG("requestCityCrew - Clicking Crew Request button"),clickElement(b),setGMTime("requestTimer","00:30"),setGMTime("autoAskCityCrewTimer","2 hours")):setGMTime("autoAskCityCrewTimer","1 hour");return!1}
function AskforHelp(a){Autoplay.delay=3E3;var b=0,c=0,d=0,e="";if(city!=a)return Autoplay.fx=function(){goLocation(a)},Autoplay.start(),!0;if(isNewCity(a)){if(a==BRAZIL){if(b=GM_getIntValue("selectBrazilTier"),e="AskforHelpBrazilTimer",b>missionTabs[a].length)return RX6_setValue("selectBrazilTier",0),addToLog("updateBad Icon",'Invalid district settings for "Ask for help in Brazil" ... disabling.'),setGMTime(e,"4 hours"),!1}else if(a==CHICAGO){if(b=GM_getIntValue("selectChicagoTier"),e="AskforHelpChicagoTimer",
b>missionTabs[a].length)return RX6_setValue("selectChicagoTier",0),addToLog("updateBad Icon",'Invalid district settings for "Ask for help in Chicago" ... disabling.'),setGMTime(e,"4 hours"),!1}else if(a==LONDON&&(b=GM_getIntValue("selectLondonTier"),e="AskforHelpLondonTimer",b>missionTabs[a].length))return RX6_setValue("selectLondonTier",0),addToLog("updateBad Icon",'Invalid district settings for "Ask for help in London" ... disabling.'),setGMTime(e,"4 hours"),!1;var f=missions.filter(function(b,
c,d){return d[c][MISSION_CITY]==a});if(c=f.searchArray(b,3)[0])d=f[c][6];d&&(b=d)}else a==LV&&(jobno=GM_getIntValue("selectVegasTier"),b=missions[jobno][MISSION_TAB],c=missions[jobno][MISSION_TABPATH],e="AskforHelpVegasTimer");if(!onJobTab(b))return Autoplay.fx=function(){goJobTab(b)},Autoplay.start(),!0;if(a==LV&&!onJobTabpath(c))return Autoplay.fx=function(){goJobTabPath(c)},Autoplay.start(),!0;isNewCity(a)?((d=xpathFirst('.//div[@class="jobs"]//a[@class="sexy_button_new sexy_call_new medium black mw_new_ajax_feed" and contains(., "Ask")]',
innerPageElt))||(d=xpathFirst('.//div[contains(@id,"job-id")]//a[@class="sexy_button_new sexy_call_new medium black mw_new_ajax_feed" and contains(., "Ask")]',innerPageElt)),d?(f=xpathFirst(".//h4",d.parentNode),addToLog("updateGood Icon","Clicked to Ask for Help in "+cities[a][CITY_NAME]+" - "+missionTabs[a][b-1]+" : "+f.innerHTML.untag()+"."),clickElement(d),setGMTime(e,"8 hours")):setGMTime(e,"1 hour")):(d=xpathFirst('.//div[@class="job_info" and contains(., "'+missions[jobno][MISSION_NAME]+'")]',
innerPageElt))?(f=xpathFirst('.//a[@class="sexy_button_new medium white sexy_call_new ask_for_help"]',d),xpathFirst('.//div[@class="ask_for_job_help_btn" and contains(@style,"display: none;")]',d)?xpathFirst('.//div[@id="ask_for_job_help_time"]',d).innerHTML?setGMTime(e,helptimer):setGMTime(e,"1 hour"):f?(clickElement(f),addToLog("updateGood Icon","Clicked to Ask for Help in "+cities[a][CITY_NAME]+" - "+missions[jobno][0]+"."),setGMTime(e,"8 hours")):setGMTime(e,"1 hour")):(DEBUG("JobContainer for :"+
missions[jobno][0]+" not FOUND!"),setGMTime(e,"1 hour"));return!1}
function autoUpgradeNY(){Autoplay.delay=3E3;if(city!=NY)return Autoplay.fx=function(){goLocation(NY)},Autoplay.start(),!0;if(!onPropertyNav())return Autoplay.fx=goPropertyNav,Autoplay.start(),!0;var a=autoUpgradeNYChoices[RX6_getValue("autoUpgradeNYChoice",0)][1];DEBUG("autoUpgradeNY targetLevel: "+a);var b=xpathFirst('//object[@id="properties_div"]/param[@name="flashvars"]');if(b&&b.value){for(var b=JSON.parse(unescape(b.value).match(/&mw_data=(\[.+\])/)[1]),c="",d=0,e=b.length;d<e;d++){var f=d+
1;if(0==b[d].maxlevel){var g="NYProperty"+f,c=c+("Setting Data for "+d+" - "+b[d].name+"(type:"+f+") - level: "+b[d].level+", max: "+b[d].maxlevel+"<br/>");RX6_setValue(g,parseInt(b[d].level))}else c+="Reading Data for "+d+" - "+b[d].name+"(type:"+f+") - level: "+b[d].level+", max: "+b[d].maxlevel+"<br/>"}DEBUG(c);c=GM_getFloatValue("userBankBalance");if(isNaN(c)||0==c)if(c=createAjaxPage(!0),elt=makeElement("a",null,{onclick:'return do_ajax("'+c+'","remote/html_server.php?xw_controller=propertyV2&xw_action=buy&xw_city=1&building_type=2&requesttype=json", 1, 0, 0, 0); return false;'}))return clickAction=
"autoUpgradeNY_getBalance",clickElement(elt),DEBUG("Clicked to get User Bank Balance"),!0;d=0;for(e=b.length;d<e;d++){var f=d+1,h="upgradeNYProperty"+f;if(0==b[d].maxlevel&&isGMChecked(h)){var g="NYProperty"+f,l=GM_getIntValue(g,a),c=GM_getFloatValue("userBankBalance",0),k=GM_getFloatValue("userMinBalance",0);DEBUG("Property to upgrade: "+d+" - "+b[d].name+"( type:"+f+" ) - screen level: "+b[d].level+" / saved level: "+l+", maxlevel: "+b[d].maxlevel);if(l<a&&c>=k){if(c=createAjaxPage(!0),elt=makeElement("a",
null,{onclick:'return do_ajax("'+c+'","remote/html_server.php?xw_controller=propertyV2&xw_action=buy&xw_city=1&building_type='+f+'&requesttype=json&fundtype=bank", 1, 0, 0, 0); return false;'}))return clickAction="autoUpgradeNY",clickContext=g,clickElement(elt),DEBUG("Clicked to upgrade "+d+" - "+b[d].name),!0}else l>=a?(addToLog("updateGood Icon",d+" - "+b[d].name+" upgraded to selected maximum level. Disabling"),RX6_setValue(h,0)):addToLog("warning Icon","Insufficient funds ("+c+" vs "+k+") to upgrade "+
d+" - "+b[d].name+".")}}}else DEBUG("autoupgradeNY flash vars not found ... Retrying in 24 hours");setGMTime("autoUpgradeNYTimer","24 hours");return!1}
function askPropertyParts(a,b){Autoplay.delay=3E3;var c=cityParts[a][ptCity];if(city!=c)return Autoplay.fx=function(){goLocation(c)},Autoplay.start(),!0;if(!onPropertyNav())return Autoplay.fx=goPropertyNav,Autoplay.start(),!0;var d=parseInt(cityParts[a][ptPropId]),e=parseInt(cityParts[a][ptPropType]),c=cityParts[a][ptCity],f=cityParts[a][ptArray],g=cityParts[a][ptGMId],h=cityParts[a][ptTimer],l="12 hours",k=f[b][0],f=f[b][1],p,n=createAjaxPage(!0);colorDEBUG("RX6 is asking for : "+k+" - "+f+" - "+
d);switch(e){case 1:colorDEBUG("Asking for NY property items",cli);var r=[],q=RX6_getValue("propLevels",JSON.stringify([]));IsJsonString(q)&&(r=JSON.parse(q));q=0;if(0<r.length){var t=r.searchArray(d,0);!1!==t&&(q=r[t][2],colorDEBUG("AksforParts: "+t+" - "+q))}if(q){colorDEBUG("Asking for NY property items - partPropLevel "+q,cli);d=cityProperties.searchArray(d,ctPropId);r=cityProperties[d][ctPropMaxLevel];colorDEBUG("Asking for NY property items - propMaxLevel "+r,cli);if(q>=r)return addToLog("warning Icon",
"Your "+cityProperties[d][ctPropMaxLevel]+" is already fully upgraded. No need to ask for parts. Disabling this setting."),RX6_setValue(g,"unchecked"),!1;p=makeElement("a",null,{onclick:'return do_ajax("'+n+'","remote/html_server.php?xw_controller=propertyV2&xw_action=sendItemFeedNews&xw_city=1&item='+f+"&building_type="+e+'", 1, 0, 0, 0); return false;'});Autoplay.fx=function(){clickElement(p);addToLog("info Icon","Clicked to ask your Mafia to send you "+k+".")}}else colorDEBUG("Property Level could not be defined ... Coming back in 1 hour"),
l="1 hour";break;case 2:p=makeElement("a",null,{onclick:'return do_ajax("'+n+'","remote/html_server.php?xw_controller=propertyV2&xw_action=cs_special_item_feed_update_timestamp&xw_city=1", 1, 0, 0, 0); return false;'}),Autoplay.fx=function(){clickAction="ask parts";clickContext=c;clickElement(p);addToLog("info Icon","Clicked to ask your Mafia to send you "+k+".")}}return p?(Autoplay.start(),DEBUG("RX6 sucessfully asked for : "+k+" - "+f+". Timer Reset : "+l),h&&setGMTime(h,l),!0):!1}
function askSpecialParts(a,b,c,d){Autoplay.delay=3E3;if(city!=a)return Autoplay.fx=function(){goLocation(a)},Autoplay.start(),!0;if(!onPropertyNav())return Autoplay.fx=goPropertyNav,Autoplay.start(),!0;var e="";a==LV&&(e=RX6_getValue("vegasReport",""));a==BRAZIL&&(e=RX6_getValue("brazilReport",""));a==CHICAGO&&(e=RX6_getValue("chicagoReport",""));a==LONDON&&(e=RX6_getValue("londonReport",""));if(!e)return Autoplay.fx=function(){checkPropertyStatus(a,!0)},Autoplay.start(),!0;var f,g,h,l;switch(d){case 10:g=
"askBrazilPartsTimer";h=b[c][0];l="askBrazilPropId";break;case 20:g="askChicagoPartsTimer";h=b[c][0];l="askChicagoPropId";break;case 30:g="askLondonPartsTimer";h=b[c][0];l="askLondonPropId";break;case 101:g="askVegasPartsTimer";h=b[c][0];l="askVegasPropId";break;case 102:g="askPlaySlotsTimer",h="Play Slots"}if(102==d)return e=createAjaxPage(!0),f=makeElement("a",null,{onclick:'return do_ajax("'+e+'","'+SCRIPT.controller+"propertyV2"+SCRIPT.action+"vslot_feed"+SCRIPT.city+'5", 1, 0, 0, 0); return false;'}),
Autoplay.fx=function(){clickAction="play slots";clickContext=a;clickElement(f);DEBUG("Clicked to ask for "+h+" for "+d+" (action: "+clickAction+" - context: "+clickContext)},Autoplay.start(),!0;var k=a+1;if(e){var p=0;e.match(/ask_friends_next_time(.+?)(\d+?),/i)&&(p=parseFloat(RegExp.$2));if(p){var n=Math.round((new Date).getTime()/1E3);if(n<p)return b=parseFloat(p)-parseFloat(n)+10,b=secondsToHMS(b),1==b?b+=" hour":b+=" hours",setGMTime(g,b),DEBUG("Ask for Parts in "+a+": Timer "+g+" reset for "+
b+"."),!1}p='"id":'+b[c][1];if(-1!=e.indexOf(p)){g=RegExp(p+',"type":1,"quantity":(.+?)}',"gi");for(var r=n=0,q=0;match=g.exec(e);)n+=parseInt(match[1]);if(match=RegExp(p+',"type":1,"name":"'+h+'","num_owned":(.+?),"image_url"',"gi").exec(e))q=parseInt(match[1]);r=n-q;0>=r?addToLog("warning Icon","Asking for "+h+" (Total Required: "+n+" - Already Owned: "+q+")."):addToLog("info Icon","Asking for "+h+", still needing "+r+" (Total Required: "+n+" - Already Owned: "+q+").");d=RX6_getValue(l,1);e=createAjaxPage(!0);
f=makeElement("a",null,{onclick:'return do_ajax("'+e+'","'+SCRIPT.controller+"propertyV2"+SCRIPT.action+"getAskForHelpFeed"+SCRIPT.city+k+"&city="+k+"&building_type="+d+"&item_type=1&item_id="+b[c][1]+'", 1, 0, 0, 0); return false;'});Autoplay.fx=function(){clickAction=cities[a][CITY_ALIAS]+" parts";clickContext=a;clickElement(f);DEBUG("Clicked to ask for "+h+" for "+d+" (action: "+clickAction+" - context: "+clickContext)};Autoplay.start();return!0}}DEBUG("Ask for "+cities[a][CITY_NAME]+" Parts - Failed to ask for "+
d+" - "+h+". Timer Reset : 2 hours.");setGMTime(g,"2 hours");return!1}
function buildPropItem(a,b){Autoplay.delay=3E3;var c=cityProperties[a][ctPropCity];if(city!=c)return Autoplay.fx=function(){goLocation(c)},Autoplay.start(),!0;if(!onPropertyNav())return Autoplay.fx=goPropertyNav,Autoplay.start(),!0;var d=cityProperties[a][ctArray],e=cityProperties[a][ctPropId];switch(cityProperties[a][ctPropType]){case 1:var f=makeElement("a",null,{onclick:'return do_ajax("inner_page","remote/html_server.php?xw_controller=propertyV2&xw_action=craft&xw_city=1&recipe='+d[b][1]+"&building_type="+
e+'", 1, 0, 0, 0); return false;'});if(f)return Autoplay.fx=function(){clickAction="build item";clickContext={itemName:d[b][0],buildType:e,propCount:a};clickElement(f);DEBUG("Clicked to build "+clickContext.itemName+".")},Autoplay.start(),!0;break;case 2:var g=createAjaxPage(!0);if(f=makeElement("a",null,{onclick:'return do_ajax("'+g+'","'+SCRIPT.controller+"limitedTimeProperty"+SCRIPT.action+"build"+SCRIPT.city+"1&city=1&prop_id="+e+"&rec_id="+d[b][1]+'", 1, 0, 0, 0); return false;'}))return Autoplay.fx=
function(){clickAction="build limited";clickContext={itemName:d[b][0],buildType:e,propCount:a};clickElement(f);DEBUG("Clicked to build "+clickContext.itemName+" from "+clickContext.buildType+" = "+e+".")},Autoplay.start(),!0;break;case 3:case 4:case 5:case 6:var h=c+1,g=createAjaxPage(!0);if(f=makeElement("a",null,{onclick:'return do_ajax("'+g+'","'+SCRIPT.controller+"propertyV2"+SCRIPT.action+"portBuyItem"+SCRIPT.city+h+"&city="+h+"&building_type="+e+"&id="+d[b][1]+'", 1, 1, 0, 0); return false;'}))return Autoplay.fx=
function(){clickAction="build other";clickContext={itemName:d[b][0],buildType:e,propCount:a};clickElement(f);DEBUG("Clicked to build "+clickContext.itemName+" from "+clickContext.buildType+" = "+e+".")},Autoplay.start(),!0}return!1}function checkPropertyStatus(a,b){if(a){var c=a+1;mwap_do_ajax("propertyV2","createData",c,"&city="+c,b,checkPropertyCallBack)}}
function autoBossFight(a){Autoplay.delay=getAutoPlayDelay();if(city!=NY)return Autoplay.fx=function(){goLocation(NY)},Autoplay.start(),!0;var b=xpathFirst('.//table[@class="boss_fight"]');if(b){Autoplay.delay=noDelay;if(c=xpathFirst('.//a[contains(@href,"xw_controller=bossfight") and contains(@href,"boss='+a+'")]',b))return clickElement(c),!0;if(c=xpathFirst('.//a[contains(@href,"xw_controller=job") and contains(.,"Back to Jobs")]',b))b=c.parentNode.innerHTML,b.match(/(.+)<a/)&&(b=RegExp.$1),b=b.replace(/^<br><br>/,
""),b=b.replace(/<br><br>/g,"<br>"),addToLog("yeah Icon",b),clickElement(c)}else{if(!onJobTab(a))return Autoplay.fx=function(){goJobTab(a)},Autoplay.start(),!0;health<maxHealth&&autoHeal(2);var c=xpathFirst('.//a[contains(@href,"xw_controller=bossfight") and contains(@href,"boss='+a+'")]');if(c)return clickElement(c),!0}return!1}
function activateCrew(a){if(!isNewCity(a))return!1;var b=cities[a][CITY_ALIAS].capitalize(),c="activate"+b+"CrewTimer";if(timeLeftGM(c))return!1;b="select"+b+"Crew";if(city!=a)return Autoplay.fx=function(){goLocation(a)},Autoplay.start(),!0;if(0>=currentJobTab())return Autoplay.fx=function(){goJobTab(1)},Autoplay.start(),!0;var d=0,e=xpathFirst('.//a[@id="btn_queue"]',innerPageElt);e&&(d=parseCash(e.innerHTML.untag()),DEBUG("activateCrew - We have the following count for crew members:  "+d));if(d)for(i=
1;8>=i;i++)if(d=b+i,e=GM_getIntValue(d,0))if(e=xpathFirst('.//a[contains(@href,"crew_type='+cityCrewTitles[e][3]+'") and contains(@href,"crew_slot='+cityCrewTitles[e][4]+'")]',innerPageElt))return colorDEBUG("activateCrew - Clicking Slot: "+i+" - "+RX6_getValue(d,0)),clickElement(e),Autoplay.fx=function(){goJobsNav()},Autoplay.start(),!0;setGMTime(c,"1 hour");return!1}
function autoSlotMachine(){setGMTime("autoSlotTimer","4 hours");var a;a="ajax=1&liteload=1&clicks=1"+("&sf_xw_user_id="+xw_user_id+"&sf_xw_sig="+xw_sig);ts=parseInt((new Date).getTime().toString().substring(0,10));cb=xw_user+ts;GM_xmlhttpRequest({method:"POST",url:document.location.protocol+"//facebook.mafiawars.zynga.com/mwfb/"+SCRIPT.controller+"slotmachine"+SCRIPT.action+"view"+SCRIPT.city+"&xw_person="+xw_user+"&xw_client_id=8&cb="+cb+"&tmp="+ts,data:a,headers:{"Content-Type":"application/x-www-form-urlencoded"},
onload:function(a){var c,d=a.responseText,a=d.indexOf("flashvars = {");-1!=a&&(c=d.indexOf("};",a),d=d.slice(a,c+2),eval(d))}});return!1}
function autoSlotBonus(){if(20<=slotBonus){slotBonus=0;var a=createAjaxPage(!0),b=makeElement("a",null,{onclick:'return do_ajax("'+a+'","'+SCRIPT.controller+"slotmachine"+SCRIPT.action+'award_bonus", 1, 1, 0, 0); return false;'});Autoplay.fx=function(){clickAction="collect slotbonus";clickElement(b)};Autoplay.start();return!0}DEBUG("Not at the correct bonus level");return!1}
function autoSlotPull(){if(0<slotSpins){slotSpins--;var a=createAjaxPage(!0),b=makeElement("a",null,{onclick:'return do_ajax("'+a+'","'+SCRIPT.controller+"slotmachine"+SCRIPT.action+'spin&betAmt=1&friend_id=none", 1, 1, 0, 0); return false;'});Autoplay.fx=function(){clickAction="collect slot";clickElement(b)};Autoplay.start();return!0}DEBUG("No spins left on the slot machine");return!1}
function autoBattleCollect(){onBattlePage(1)||(DEBUG("NOT on Battle Collect Page - going there"),goBattlePage(1))}function autoBattle(){var a=RX6_getValue("AutoBattleClanID",0);0<a&&!onClanNav(a)?(DEBUG("Not on Clan Page - going there"),goClanPage(a)):0==a?DEBUG("No clan specified for AutoBattle"):DEBUG("We passed going to the clan page")}
function goBattlePage(a){var b=makeElement("a",null,{onclick:'return do_ajax("inner_page","remote/html_server.php?xw_controller=EpicBattle&xw_action='+(1==a?"view_no_battle":"view")+'", 1, 1, 0, 0); return false;'});b?(clickAction=1==a?"load battlecollect":"load battlepage",clickElement(b),DEBUG("Clicked to load Battle Page.")):addToLog("warning Icon","Can't make battle link to click.")}
function onBattlePage(a){a=1==a?"battle_history":"battle_target_list";return xpathFirst('.//div[@id="'+a+'"]',innerPageElt)?(DEBUG("Element :"+a+" found"),!0):!1}function goClanPage(a){a=btoa(a);(a=makeElement("a",null,{onclick:'return do_ajax("inner_page","remote/html_server.php?xw_controller=clan&xw_action=view&id='+a+'", 1, 1, 0, 0); return false;'}))?(clickAction="load clan",clickElement(a),DEBUG("Clicked to load Clan Page.")):addToLog("warning Icon","Can't make Clan link to click.")}
function onClanNav(a){if(a){if(xpathFirst('.//div[@id="clan_main"]',innerPageElt)){if($("#profile_link").length)DEBUG("On this clan page: "+$("#profile_link").text().replace(/"/g,"").trim());else return DEBUG("On the wrong clan page?"),!1;return!0}}else if(xpathFirst('.//div[@id="clan_main"]',innerPageElt))return!0;return!1}
function autoFamilyProgress(a){if(!running||!isGMChecked("AutoFamilyRewards"))return 0;var b=0,c=0,d=0,e=[];if(e=xpathFirst('.//li[contains(@class, "quest_reward experience") and contains(., "Experience")]//dd',questBarElt))e=e.innerHTML.untag().replace('"',"").trim().split(/\s+/);else return DEBUG("Unable to locate rewards experience levels"),0;var f=$x('.//li[contains(@class, "box_middle") and contains(@class, "complete") and not (contains(@class, "mastered")) and contains (., "Collect")]',questBarElt);
if(f){for(var g,h=0,l=f.length;h<l;++h){xpathFirst(".//h4",f[h]);var k=xpathFirst('.//span[contains(@class, "_star")]',f[h]);k&&(d=k.getAttribute("class"),d=/bronze/.test(d)?parseInt(e[0]):/silver/.test(d)?parseInt(e[1]):/gold/.test(d)?parseInt(e[2]):0);b+=d;if((k=xpathFirst('.//a[contains(@href, "xw_action=collectProgress") and contains (., "Collect")]',f[h]))&&2==a)if(DEBUG("ptsToNextLevel:"+ptsToNextLevel+"  currentExp:"+d+" selectedExp"+c),0==c||ptsToNextLevel<=d&&c>d||ptsToNextLevel>d&&d<c)c=
d,g=k}if(2==a&&g&&0<c)return addToLog("info Icon","Collecting Family Experience: "+c),clickElement(g),!1}else if(1==a)return 0;if(1==a)return b}
function autoCollectTake(a){isGMUndefined("collectCityAttempt")&&RX6_setValue("collectCityAttempt",!1);isGMUndefined("propertyNavAttempt")&&RX6_setValue("propertyNavAttempt",!1);if(city!=a){if(RX6_getValue("collectCityAttempt",!1))return 0!=a&&setGMTime("takeHour"+cities[a][CITY_NAME],"1 hour"),RX6_setValue("collectCityAttempt",!1),!1;RX6_setValue("collectCityAttempt",!0);Autoplay.fx=function(){goLocation(a)};Autoplay.start();return!0}RX6_setValue("collectCityAttempt",!1);if(!onPropertyNav()){if(RX6_getValue("propertyNavAttempt",
!1))return 0!=a&&setGMTime("takeHour"+cities[a][CITY_NAME],"8 hours"),RX6_setValue("propertyNavAttempt",!1),!1;RX6_setValue("propertyNavAttempt",!0);Autoplay.fx=goPropertyNav;Autoplay.start();return!0}RX6_setValue("propertyNavAttempt",!1);var b=createAjaxPage(!0),c=makeElement("a",null,{onclick:'return do_ajax("'+b+'","'+SCRIPT.controller+"propertyV2"+SCRIPT.action+"collectall"+SCRIPT.city+(a+1)+'&requesttype=json", 1, 1, 0, 0); return false;'});Autoplay.fx=function(){clickAction="collect take";clickContext=
a;clickElement(c)};Autoplay.start();return!0}
function autoPlayerUpdates(){var a=xpath('.//div[@id="player_updates_all"]/div[@class="update_item"]',innerPageElt),b=a.snapshotLength,c=RX6_getValue("logPlayerUpdatesCount");isUndefined(c)&&(c=b,RX6_setValue("logPlayerUpdatesCount",c));if(0<b&&c>b||0==b&&0<c)0<b&&c>b?DEBUG("Discrepancy in player updates; new count: "+b+", old count: "+c):DEBUG("Player updates were cleared."),c=0,RX6_setValue("logPlayerUpdatesCount",0);if(c<b){DEBUG("Parsing new player updates.");for(var d=b-c-1;0<=d;d--){if(!parsePlayerUpdates(a.snapshotItem(d)))return!0;
RX6_setValue("logPlayerUpdatesCount",++c)}}return b>RX6_getValue("logPlayerUpdatesMax",25)&&c==b?(Autoplay.fx=goDeleteNews,Autoplay.start(),!0):!1}
function old_miniPackForce(){timeLeftGM("miniPackTimer")||setGMTime("miniPackTimer","1 hour");RX6_setValue("miniPackFired",!0);colorDEBUG("Redirecting to use mini pack ... 1st step");GM_xmlhttpRequest({method:"GET",url:"http://toolbar.zynga.com/game_iframe_proxy.php?playing=true",onload:function(a){200==a.status&&(colorDEBUG("Redirecting to use mini pack ... goto next step"),GM_xmlhttpRequest({method:"HEAD",url:"http://toolbar.zynga.com/click.php?to=mwgamestatsplaynow",onload:function(a){if(200==
a.status){if(colorDEBUG("Redirecting to use mini pack ... 2nd step"),colorDEBUG(a.responseHeaders),colorDEBUG(a.responseText),a=/Location: ([^\n]*)\n/.exec(a.responseHeaders)[1])colorDEBUG("Redirecting to use mini pack ... 3rd step"),document.location.href=a}else colorDEBUG(a.status),colorDEBUG(a.responseHeaders)}}))}});return!1}
function miniPackForce(){timeLeftGM("miniPackTimer")||setGMTime("miniPackTimer","1 hour");RX6_setValue("miniPackFired",!0);colorDEBUG("Redirecting to use mini pack ... 1st step");GM_xmlhttpRequest({method:"GET",url:"http://toolbar.zynga.com/click.php?to=mwgamestatsplaynow",onload:function(a){colorDEBUG("Redirecting to use mini pack ... 2nd step");200==a.status?a.responseText.untag().match(/inthemafia(.+)zy_track(.+)00257D/)&&(a=RegExp.$2,colorDEBUG(a),a="http://facebook.mafiawars.zynga.com/mwfb/track.php?zy_track"+
a.replace(/\\/g,""),colorDEBUG(a),GM_xmlhttpRequest({method:"GET",url:a,onload:function(a){colorDEBUG("Redirecting to use mini pack ... 3rd step");200==a.status?(a=a.responseText.untag().replace('top.location.href = "',"").replace('";',""),colorDEBUG(a),GM_xmlhttpRequest({method:"GET",url:a,onload:function(a){colorDEBUG("Redirecting to use mini pack ... 4th step");colorDEBUG(a.responseText.untag());200==a.status?colorDEBUG("Redirecting to use mini pack ...  SUCCESS"):colorDEBUG("Redirecting to use mini pack ...  FAILED")}})):
colorDEBUG("Redirecting to use mini pack ...  FAILED")}})):colorDEBUG("Redirecting to use mini pack ...  FAILED")}});return!1}
function autoStatVars(a){for(var b=[],c="",d=[curAttack,curDefense,maxHealth,maxEnergy,maxStamina],e=[level,curAttack,curDefense,maxHealth,maxEnergy,maxStamina],f=Array(d.length),g=0,h=0,l=autoStatPrios.length,k=0,p=d.length;k<p;++k){var n=new Number(RX6_getValue(autoStatRatios[k])),r=new Number(RX6_getValue(autoStatBases[k])),q=new Number(RX6_getValue(autoStatPrios[k])),n=Math.max(0,n*e[RX6_getValue(autoStatModes[k])]+r-d[k]);if(0<n&&q<l||n>g&&q<=l)g=n,h=k,l=q;f[k]=isGMChecked(autoStatFallbacks[k])?
k:""}0>=g&&isGMChecked("autoStatDisable")&&(addToLog("info Icon","All status goals met, please update your goals."),RX6_setValue("autoStat",0));if(0>=g)if(""!=f.join("")){DEBUG("Status GOALS reached, using fallback method.",10);for(e=GM_getIntValue("nextStat",ATTACK_STAT);-1==f.indexOf(e);)e=(e+1)%d.length;h=e}else DEBUG("Status GOALS reached, waiting till next level up."),RX6_setValue("restAutoStat",1);else DEBUG("Next stat to increment : "+autoStatDescrips[h+1]+" ("+g+" points to goal) "),RX6_setValue("restAutoStat",
0);switch(h){case ATTACK_STAT:c="attack";break;case DEFENSE_STAT:c="defense";break;case HEALTH_STAT:c="max_health";break;case ENERGY_STAT:c="max_energy";break;case STAMINA_STAT:c="max_stamina"}b[0]=c;b[1]=4<a&&(4<g||0>=g)?5:1;return b}
function autoStat(){if(!onProfileNav()||isUndefined(curAttack))return Autoplay.fx=goMyProfile,Autoplay.start(),!0;if(onProfileNav()){isValidElt(xpathFirst('.//div[@class="stats_title_text"]')).match(/"(.+)"\s?level\s?(\d+)/i)&&(RX6_setValue("playerName",RegExp.$1),RX6_setValue("playerLevel",RegExp.$2));var a=[],b=xpathFirst('.//span[@id="user_skill"]'),c=0;b&&(c=parseInt(b.innerHTML));a=autoStatVars(c);DEBUG("AutoStat upgrading "+a[0]+" - "+a[1]);if(""!=a[0]&&0!=a[1]){var d=xpathFirst('.//a[contains(@onclick,"upgrade_key='+
a[0]+'") and contains(@onclick,"upgrade_amt='+a[1]+'")]',innerPageElt);d||(d=xpathFirst('.//a[contains(@onclick,"upgrade_key='+a[0]+'")]',innerPageElt));if(!d)return DEBUG("Couldn't find link to upgrade stat."),!1;Autoplay.fx=function(){clickAction="stats";clickElement(d);DEBUG("Clicked to upgrade: "+a[0]+" ("+a[1]+")")};Autoplay.delay=getAutoPlayDelay();Autoplay.start();return!0}return!1}RX6_setValue("autoStat",0);return!1}
function calcJobratio(a){var b=Math.round(100*(missions[a][MISSION_XP]/missions[a][MISSION_ENERGY]))/100,b=isNaN(b)?0:b;missions[a][MISSION_RATIO]=b;RX6_setValue("missions",JSON.stringify(missions));return b}function canSalvageEnergy(a){if(energy<=maxEnergy)return!1;a=energy-Math.ceil(ptsToNextLevel/missions[a][MISSION_XP])*missions[a][MISSION_ENERGY]-maxEnergy;return 0<a?a:!1}
function canSalvageStamina(a){if(stamina<=maxStamina)return!1;a=stamina-Math.ceil(ptsToNextLevel/missions[a][MISSION_XP])*missions[a][MISSION_ENERGY]-maxStamina;return 0<a?a:!1}
function canMission(){function a(a){c=0;for(y=a.length;c<y;++c){d=a[c];var b=missions[d];if(b){var h=energy,k=0;if(0==b[MISSION_EOL]||3==b[MISSION_EOL])h=stamina,k=1;var l=b[MISSION_TAB];isNewCity(b[MISSION_CITY])&&b[MISSION_TABPATH]&&(l=b[MISSION_TABPATH]);var n=!1;if(!(null!=e[b[MISSION_CITY]][l]&&-1==e[b[MISSION_CITY]][l].indexOf(parseInt(d)))){if(isNaN(b[MISSION_RATIO])||!b[MISSION_RATIO])b[MISSION_RATIO]=calcJobratio(d);b[MISSION_ENERGY]<=h&&(q=!0,b[MISSION_XP]>=g&&(r.push([d,b[MISSION_ENERGY],
b[MISSION_XP]]),n=!0));if(isGMChecked("repeatJob")||!(null!=f[b[MISSION_CITY]][l]&&-1!=f[b[MISSION_CITY]][l].indexOf(parseInt(d))&&!1==n))k&&(!t&&canSalvageStamina(d)?t=!0:!t&&canSalvageEnergy(d)&&(t=!0)),p.push(d)}}}}if(!energy||!isGMChecked("autoMission"))return!1;var b=RX6_getValue("selectMission",1);missions[b]||(b=1);var c,d;if(0==getSavedList("jobsToDo").length){var e=eval("("+RX6_getValue("availableJobs","({0:{},1:{},2:{},3:{},4:{},5:{},6:{},7:{},8:{},9:{}})")+")"),f=eval("("+RX6_getValue("masteredJobs",
"({0:{},1:{},2:{},3:{},4:{},5:{},6:{},7:{},8:{},9:{}})")+")"),g=ptsToNextLevel,h=Math.ceil(100*(g/energy))/100,l=Math.ceil(100*(g/stamina))/100,k=getSavedList("selectMissionMultiple"),p=[],n=[],r=[],q=!1,t=!1,s=getSavedList("masteryJobsList");c=0;for(y=s.length;c<y;++c)d=s[c],-1==k.indexOf(d)&&k.push(d);a(k);if(!q)if(isGMChecked("endLevelOptimize")&&2.2>=h){k=[];c=0;for(y=missions.length;c<y;++c)s=!0,isGMChecked("endLevelNYOnly")&&missions[c][MISSION_CITY]!=NY&&(s=!1),1==missions[c][MISSION_EOL]&&
(missions[c][MISSION_RATIO]>=h&&missions[c][MISSION_ENERGY]<energy&&s)&&k.push(c);a(k);if(!q)return!1}else if(isGMChecked("endLevelOptimize")&&2.2>=l&&!isGMChecked("staminaSpend")){k=[];c=0;for(y=missions.length;c<y;++c)s=!0,isGMChecked("endLevelNYOnly")&&missions[c][MISSION_CITY]!=NY&&(s=!1),0==missions[c][MISSION_EOL]&&(missions[c][MISSION_RATIO]>=l&&missions[c][MISSION_ENERGY]<stamina&&s)&&k.push(c);a(k);if(!q)return!1}else return!1;k=void 0;p.sort(function(a,b){return missions[b][MISSION_RATIO]-
missions[a][MISSION_RATIO]});if(0<r.length&&!t){if(r.sort(function(a,b){return b[2]-a[2]}),k=r[0][0],isGMChecked("endLevelOptimize")){h=isGMChecked("endLevelNYOnly")?function(a,b,c){return 6<b&&b<r[0][0]&&(1==c[b][MISSION_EOL]||2==c[b][MISSION_EOL])&&c[b][MISSION_CITY]==NY&&c[b][MISSION_ENERGY]<0.5*r[0][1]?1:0}:function(a,b,c){return 6<b&&b<r[0][0]&&(1==c[b][MISSION_EOL]||2==c[b][MISSION_EOL])&&c[b][MISSION_ENERGY]<0.5*r[0][1]&&!isSecretDistrict(c[b][MISSION_CITY],c[b][MISSION_TAB])?1:0};h=missions.filter(h);
h.sort(function(a,b){return b[MISSION_XP]-a[MISSION_XP]});c=0;for(var y=h.length;c<y;++c)if(l=h[c],energy-r[0][1]>l[1]&&g>=1.5*Math.floor(l[5])+1){k=missions.searchArray(l[0],0)[0];break}}}else{for(c=0;c<p.length;c++)0==missions[p[c]][MISSION_EOL]||3==missions[p[c]]?stamina>=missions[p[c]][MISSION_ENERGY]&&l<=missions[p[c]][MISSION_RATIO]&&n.push(p[c]):energy>=missions[p[c]][MISSION_ENERGY]&&h<=missions[p[c]][MISSION_RATIO]&&n.push(p[c]);if(0==n.length){if(p.length){k=p[0];if(1==missions[k][MISSION_TABPATH]||
3==missions[k][MISSION_EOL]){c=0;for(y=p.length;c<y;c++)if(newJob=p[c],1!=missions[newJob][MISSION_TABPATH]&&energy>missions[newJob][MISSION_ENERGY]){k=newJob;break}}if(1!=missions[k][MISSION_TABPATH]){c=0;for(y=p.length;c<y;c++)if(newJob=p[c],1==missions[newJob][MISSION_TABPATH]&&stamina>missions[newJob][MISSION_ENERGY]){k=newJob;break}}}}else k=t?n[0]:n[n.length-1]}if(b!=k){if(isUndefined(k))return DEBUG("canMission : currently no jobs available"),!1;addToLog("info Icon",'Switching job to <span class="job">'+
missions[k][MISSION_NAME]+"</span>. (canMission)");RX6_setValue("selectMission",k);b=k}}if(0==missions[b][MISSION_EOL]||3==missions[b][MISSION_EOL]){if(stamina<missions[b][MISSION_ENERGY])return DEBUG("Skipping jobs: stamina="+stamina+", cost="+missions[b][MISSION_ENERGY]),!1;b=missions[b][MISSION_ENERGY];if(stamina-b<SpendStamina.floor&&!SpendStamina.canBurn)return DEBUG("Not spending Job Stamina: Stamina="+stamina+", floor="+SpendStamina.floor+", nextJobStamina="+b+", burn="+SpendStamina.canBurn),
!1;if(stamina<SpendStamina.ceiling&&!SpendStamina.canBurn&&!RX6_getValue("useStaminaStarted"))return DEBUG("Rebuilding energy: Stamina="+stamina+", ceiling="+SpendStamina.ceiling+", burn="+SpendStamina.canBurn),!1}else{if(energy<missions[b][MISSION_ENERGY])return DEBUG("Skipping jobs: energy="+energy+", cost="+missions[b][MISSION_ENERGY]),!1;b=missions[b][MISSION_ENERGY];if(energy-b<SpendEnergy.floor&&!SpendEnergy.canBurn)return DEBUG("Not spending Job energy: energy="+energy+", floor="+SpendEnergy.floor+
", nextJobEnergy="+b+", burn="+SpendEnergy.canBurn),!1;if(energy<SpendEnergy.ceiling&&!SpendEnergy.canBurn&&!RX6_getValue("useEnergyStarted"))return DEBUG("Rebuilding energy: energy="+energy+", ceiling="+SpendEnergy.ceiling+", burn="+SpendEnergy.canBurn),!1}return!0}
function autoMission(){Autoplay.delay=getAutoPlayDelay();jobid=RX6_getValue("selectMission",1);if(!missions[jobid])return!1;var a=missions[jobid][MISSION_NAME],b=missions[jobid][MISSION_NUMBER],c=missions[jobid][MISSION_TAB],d=missions[jobid][MISSION_CITY],e=missions[jobid][MISSION_TABPATH]?missions[jobid][MISSION_TABPATH]:0;SpendEnergy.floor&&(isGMChecked("allowEnergyToLevelUp")&&RX6_getValue("autoEnergyBurn")!==SpendEnergy.canBurn)&&(RX6_setValue("autoEnergyBurn",SpendEnergy.canBurn),SpendEnergy.canBurn?
addToLog("process Icon",energyIcon+'<span style="color:#009966; font-weight: bold;">Burning through energy reserve to level up.</span>'):DEBUG("Not within reach of a level up. Energy burning is off."));if(city!=d)return Autoplay.fx=function(){goLocation(d)},Autoplay.start(),!0;if(!districtBoss){var f=c;isNewCity(city)&&e&&(f=e);if(!onJobTab(f))return Autoplay.fx=function(){goJobTab(f)},Autoplay.start(),!0;if(city==LV&&!onJobTabpath(e))return Autoplay.fx=function(){goJobTabPath(e)},Autoplay.start(),
!0}if(isNewCity(city)&&!timeLeftGM("districtBossTimer")&&(isGMChecked("autoStamFightBosses")||isGMChecked("autoBoostFightBosses"))){var g=xpathFirst('.//div[@class="boss_operation"]',innerPageElt),h=xpathFirst('.//div[@id="bossv2_wrapper"]',innerPageElt),l=xpathFirst('.//div[@class="boss_operation"]//img[contains(@src,"DefeatedCross")]',innerPageElt);if((g||h)&&!l)return colorDEBUG("districtBoss not yet defeated",caq),Autoplay.fx=function(){goFightBosses()},Autoplay.start(),!0;colorDEBUG("no districtBoss or districtBoss already defeated",
caq);districtBoss=!1;setGMTime("districtBossTimer","00:15:00")}if(getJobRowItems(a))DEBUG(" - - need items jobid="+jobid+" selectMission="+RX6_getValue("selectMission",1)),jobid!=RX6_getValue("selectMission",1)&&(Autoplay.fx=autoMission),Autoplay.start();else return colorDEBUG("autoMission - City: "+cities[d][CITY_NAME]+" ("+missionTabs[d][c-1]+") - job :"+a+" (jobNo: "+b+")"),Autoplay.fx=function(){goJob(b)||(addToLog("warning Icon",'Unable to perform <span class="job">'+a+"</span>."),0==getSavedList("jobsToDo",
"").length?(DEBUG("No more jobs to perform."),skipJobs=!0,goHome()):(DEBUG("Looking for the next job to perform."),popJob()))},Autoplay.start(),!0}
function goFightBosses(){try{var a="",b=xpathFirst('.//div[@class="boss_operation"]//div[@class="box_middle_right" and contains(.,"DEFEAT")]',innerPageElt);b&&(a=b.innerHTML.untag());var c=xpathFirst('.//a[@class="rightArrow" and contains(@onclick,"goToFight")]',innerPageElt);if(c)return districtBoss=!0,clickElement(c),DEBUG("District Bosses : Clicked to "+a+".",cli),!0;if(!document.getElementById("bossv2_wrapper"))return!0;if(isGMChecked("autoBoostFightBosses")){var a=0,b=[],d=$x('.//div[@class="corner_number"]',
innerPageElt);if(d&&0<d.length){var e="consumable_4";isGMChecked("autoUseAllBoosts")&&(e="consumable_99");i=0;for(iLength=d.length;i<iLength;i++){var f=d[i].parentNode.id;0<d[i].innerHTML.digitize()&&f!=e?(b[f.toString()]=1,a++):b[f.toString()]=0}}if(a){for(var g=Math.floor(3*Math.random()+1),h="consumable_"+g;1!=b[h.toString()];)g=Math.floor(3*Math.random()+1),h="consumable_"+g;DEBUG("District Bosses : Boosts - using "+h);var l=xpathFirst('.//div[@id="'+h+'"]',innerPageElt);if(l&&l.hasAttribute("requirements")){var k=
JSON.parse(l.getAttribute("requirements")),p=k.health;DEBUG("District Bosses - requirements: "+p+" health.",cli);if(health>p){var n;l.hasAttribute("href")&&(n=l.getAttribute("href"));var r=createAjaxPage(!0);l.setAttribute("onclick",'do_ajax("'+r+"\",'"+n+"',1);return false;");Autoplay.fx=function(){clickAction="districtBoss";clickContext=l;clickElement(l);DEBUG('District Bosses - Clicked to Attack Secret District Boss using a "'+fightBoosts[h.digitize()]+'".',cli)};Autoplay.delay=getAutoPlayDelay();
Autoplay.start()}else DEBUG("BossFight - Not Enough Health to Attack Secret District Boss.",cre),autoHeal(0);return!0}}else DEBUG("Boosts : boosts NOT FOUND ...",cre)}if(isGMChecked("autoStamFightBosses"))if((c=xpathFirst('.//a[contains(@href,"xw_controller=bossfightv2")]',innerPageElt))&&c.hasAttribute("requirements")){var k=JSON.parse(c.getAttribute("requirements")),p=k.health,q=k.stamina;DEBUG("District Bosses - requirements: "+p+" health and "+q+" stamina.",cli);var t=RX6_getValue("autoStamFightBossesLimit",
0);if(t&&t>q){if(stamina>q&&health>p)return c.hasAttribute("href")&&(n=c.getAttribute("href")),r=createAjaxPage(!0),c.setAttribute("onclick",'do_ajax("'+r+"\",'"+n+"',1);return false;"),Autoplay.fx=function(){clickAction="districtBoss";clickContext=c;clickElement(c);DEBUG("District Bosses - Clicked to Attack Secret District Boss using "+q+" stamina.",cli)},Autoplay.delay=getAutoPlayDelay(),Autoplay.start(),!0;DEBUG("BossFight - Not Enough Stamina/Health to Attack Secret District Boss.");if(health<
p)return autoHeal(1),!0}else DEBUG("BossFight - Stam Limit to Attack Secret District Boss reached")}else DEBUG("BossFight - no attack button found",cli);setGMTime("districtBossTimer","00:05:00");DEBUG("reset districtBossTimer for 5 mins");districtBoss=!1;return!0}catch(s){colorDEBUG("districtBoss Error: "+s,cre)}}
function getCurrentBrazilDistrict(){currentBrazilDistrict=0;var a=xpathFirst('.//div[@id="brazil_jobs"]//div[@class="jobs" and not(contains(@style,"none"))]',innerPageElt);a||(a=xpathFirst('.//div[@id="brazil_jobs"]//div[contains(@id,"job-id") and not(contains(@style,"none"))]',innerPageElt));a&&(currentBrazilDistrict=isValidElt(a.parentNode,"district_id"));currentBrazilDistrict||isValidElt(xpathFirst('.//div[@id="brazil_jobs"]/div[@class="districts"]',innerPageElt),"style").match(/: -?(\d+)px/)&&
RegExp.$2&&(currentBrazilDistrict=parseInt(RegExp.$1/54+1));return currentBrazilDistrict}function currentJobTab(){return isNewCity(city)?parseInt(getCurrentBrazilDistrict()):isValidElt(xpathFirst('.//li[contains(@class, "tab_on")]//a',innerPageElt),"onclick").match(/tab=(\d+)/)?parseInt(RegExp.$1):-1}function currentJobTabPath(){return isValidElt(xpathFirst('.//div[@id="job_paths"]//div[contains(@class, "path_on")]',innerPageElt),"id").match(/(\d+)/)?parseInt(RegExp.$1):-1}
function onJobTab(a){return currentJobTab()==parseInt(a)?!0:!1}function onJobTabpath(a){return currentJobTabPath()==parseInt(a)?!0:!1}
function canHeal(){unsafeWindow.User.stamina&&(stamina=unsafeWindow.User.stamina);unsafeWindow.User.health&&(health=unsafeWindow.User.health);if(!running||!isGMChecked("autoHeal")||health>=RX6_getValue("healthLevel",0)||stamina<=RX6_getValue("stamina_min_heal"))return!1;switch(RX6_getValue("staminaSpendHow")){case STAMINA_HOW_ROBFIGHT:case STAMINA_HOW_ROBFIGHT_BG:if(stamina>RX6_getValue("robFightStaminaFloor"))return DEBUG(" STAMINA_HOW_ROBFIGHT - blocked autoheal because you are above the RobFight stamina level."),
!1}return!isGMChecked("hideInHospital")?!0:19<health&&isGMChecked("forceHealOpt7")?(DEBUG("heal if above 19 is checked, and true, in canforceheal "),!0):SpendStamina.canBurn&&0<stamina&&isGMChecked("allowStaminaToLevelUp")?(DEBUG("enough stamina left to level up, and burn to level up, checked in canforceheal "),!0):isGMChecked("forceHealOpt5")&&RX6_getValue("healWaitStarted")&&timeLeftGM("healWaitTime")?(DEBUG(" healing blocked "+RX6_getValue("healWaitStarted")+" due to 5 minute wait timer. remaining:"+
timeLeftGM("healWaitTime")),!1):isGMChecked("forceHealOpt5")?(DEBUG("5 minute timer is up, Allowing Heal"),RX6_setValue("healWaitStarted",!1),!0):isGMChecked("forceHealOpt4")&&stamina>=maxStamina||isGMChecked("forceHealOpt3")&&canSpendStamina(0)?!0:!1}
function canSpendStamina(a){if(!running)return!1;unsafeWindow.User.stamina&&(stamina=unsafeWindow.User.stamina);unsafeWindow.User.health&&(health=unsafeWindow.User.health);if(!stamina||!isGMChecked("staminaSpend"))return!1;if(5>stamina&&isNewCity(RX6_getValue("fightLocation",NY)))return DEBUG("Not spending stamina: stamina = "+stamina+", fight city = "+cities[RX6_getValue("fightLocation",NY)][CITY_NAME]),!1;isNaN(a)&&(a=21);var b=getStaminaMode();switch(b){case STAMINA_HOW_AUTOHITLIST:case STAMINA_HOW_ROBBING:case STAMINA_HOW_ROBBING_BG:a=
0;break;case STAMINA_HOW_FIGHTROB:case STAMINA_HOW_FIGHTROB_BG:5<stamina&&(a=0);break;case STAMINA_HOW_ROBFIGHT:case STAMINA_HOW_ROBFIGHT_BG:stamina>RX6_getValue("robFightStaminaFloor")&&(a=0)}return health<a?(DEBUG("Not spending stamina: health="+health+", minimum="+a),!1):stamina<=SpendStamina.floor&&!SpendStamina.canBurn?(DEBUG("Not spending stamina: stamina="+stamina+", floor="+SpendStamina.floor+", burn="+SpendStamina.canBurn),!1):stamina<SpendStamina.ceiling&&!SpendStamina.canBurn&&!RX6_getValue("useStaminaStarted")?
(DEBUG("Rebuilding stamina: stamina="+stamina+", ceiling="+SpendStamina.ceiling+", burn="+SpendStamina.canBurn),!1):b==STAMINA_HOW_ROBBING||b==STAMINA_HOW_FIGHTROB||b==STAMINA_HOW_FIGHTROB_BG||STAMINA_HOW_ROBBING_BG?5<=stamina:!0}
function autoHitlist(){var a=RX6_getValue("autoHitListLoc",NY);if(a<=cities.length-1&&city!=a)return Autoplay.fx=function(){goLocation(a)},Autoplay.delay=getAutoPlayDelay(),Autoplay.start(),!0;if(!onFightTab()&&!autoHitlist.profileSearch&&!autoHitlist.setBounty)return Autoplay.fx=goFightTab,Autoplay.start(),!0;var b=GM_getIntValue("pautoHitOpponentList","");if(!b){if(isGMEqual("staminaSpendHow",STAMINA_HOW_RANDOM))return!1;addToLog("warning Icon","Can't autohit because the list of opponents is empty or invalid. Turning automatic hitlisting off.");
RX6_setValue("staminaSpend",0);isGMChecked("bgAutoHitCheck")&&RX6_setValue("bgAutoHitCheck",0);return!1}opponent=new Player;opponent.id=String(b);if(!onProfileNav()&&!autoHitlist.setBounty)return autoHitlist.profileSearch=opponent,Autoplay.fx=function(){goProfileNav(opponent)},Autoplay.start(),!0;if(autoHitlist.profileSearch&&onProfileNav()){opponent=autoHitlist.profileSearch;autoHitlist.profileSearch=void 0;opponent.profileHitlist=xpathFirst('.//a[contains(., "Add to Hitlist")]',innerPageElt);DEBUG("Hitlisting from profile");
autoHitlist.setBounty=!0;var c=xpathFirst('.//a[contains(., "Add to Hitlist")]',innerPageElt);if(c)return Autoplay.fx=function(){clickAction="autohit";clickContext=opponent;clickElement(c);DEBUG('Clicked "Add to Hitlist".')},Autoplay.start(),!0}b=parseCash(RX6_getValue("autoHitListBounty",0))-cities[NY][CITY_CASH];if(0<b)return DEBUG("We need "+b+" for hitlisting. Going to the bank of "+cities[NY][CITY_NAME]),suspendBank=!0,autoBankWithdraw(b);if(autoHitlist.setBounty){autoHitlist.setBounty=void 0;
var b=xpathFirst('.//form[@id="createhit"]',innerPageElt),d=xpathFirst('.//input[@type="text"]',b);if(!d)return isGMChecked("bgAutoHitCheck")&&setGMTime("bgAutoHitTime","01:00"),!0;d.value=isGMChecked("autoHitListRandom")?Math.pow(10,Math.floor(4*Math.random())+4):parseCash(RX6_getValue("autoHitListBounty",0));var e=xpathFirst('.//button[@type="submit"]',b);if(!e)return isGMChecked("bgAutoHitCheck")&&setGMTime("bgAutoHitTime","01:00"),!0;Autoplay.fx=function(){clickAction="autohit";clickContext=opponent;
e.click();DEBUG("Clicked to Set Bounty")};Autoplay.start();return!0}}
function autoFight(a){Autoplay.delay=noDelay;var b=RX6_getValue("fightLocation",NY);b==RANDOM_CITY&&(b=RX6_getValue("fightNewLocation",NY));if(b!=ACTIVE_CITY&&city!=b)return Autoplay.fx=function(){goLocation(b)},Autoplay.start(),!0;if(!onFightTab()&&!autoFight.profileSearch&&a!=STAMINA_HOW_BATTLE)return Autoplay.fx=goFightTab,Autoplay.start(),!0;if(a!=STAMINA_HOW_FIGHT_LIST){if(a==STAMINA_HOW_BATTLE&&!onBattlePage(2))return Autoplay.fx=goBattlePage(2),Autoplay.start(),!0;if(a==STAMINA_HOW_BATTLE&&
xpathFirst('//a[contains(@href,"xw_controller=epicBattle") and contains(@href,"xw_action=optIn")]',innerPageElt))return elt=xpathFirst('//a[contains(@href,"xw_controller=epicBattle") and contains(@href,"xw_action=optIn")]',innerPageElt),clickElement(elt),Autoplay.start(),!0;var c=RX6_getValue("fightRivalsMode",0);if(onFightersTab()&&!autoFight.profileSearch&&c&&a!=STAMINA_HOW_BATTLE)return Autoplay.fx=goRivalsTab,Autoplay.start(),!0;if(onRivalsTab()&&!autoFight.profileSearch&&!c&&a!=STAMINA_HOW_BATTLE)return Autoplay.fx=
goFightersTab,Autoplay.start(),!0}var d;if(autoFight.revengeTarget)d=autoFight.revengeTarget,lastOpponent=autoFight.revengeTarget=void 0;else if(autoFight.profileSearch&&onProfileNav()){d=autoFight.profileSearch;if(xpathFirst('.//a[contains(., "Remove from Mafia")]',innerPageElt))return removeSavedListItem("pfightlist",d.id),lastOpponent=autoFight.profileSearch=void 0,!1;lastOpponent=autoFight.profileSearch=void 0;isGMChecked("staminaPowerattack")&&(d.profileAttack=xpathFirst('.//a[(contains(@onclick,"xw_action=power_attack") or contains(@href,"xw_action=power_attack")) and contains(., "Power Attack")]',
innerPageElt));d.profileAttack||(d.profileAttack=xpathFirst('.//a[(contains(@onclick,"xw_action=attack") or contains(@href,"xw_action=attack")) and contains(., "Attack")]',innerPageElt));isValidElt(xpathFirst('//div[@class="stats_title_text"]')).match(/[^"]"(.+)" level (\d+)/)&&(d.name=RegExp.$1,d.level=RegExp.$2,d.linkedName=d.name);d.mafia="unknown"}else if(a==STAMINA_HOW_FIGHT_LIST){id=parseInt(RX6_getValue("pfightlist",""));if(!id){if(isGMEqual("staminaSpendHow",STAMINA_HOW_RANDOM))return!1;addToLog("warning Icon",
"Can't fight because the list of opponents is empty or invalid. Turning automatic fighting off.");RX6_setValue("staminaSpend",0);return!1}d=new Player;d.id=String(id);a=RX6_getValue("profileList","");a=IsJsonString(a)?JSON.parse(a):[];c=a.searchArray(d.id,0)[0];isNaN(c)||(d.profileAttack=makeElement("a",null,{href:a[c][1]}))}else if(d=findFightOpponent(innerPageElt,a),-1===d)return DEBUG("No opponents even after seeing the fight list."),setNextFightCity(),!1;if(!d)return!1;a=d.profileAttack;!a&&d.attack&&
(a=d.attack);lastOpponent&&(lastOpponent.attackAgain&&d.match(lastOpponent))&&(a=lastOpponent.attackAgain);if(!a){if(d.id&&!onProfileNav())return autoFight.profileSearch=d,Autoplay.fx=function(){goProfileNav(d)},Autoplay.start(),!0;DEBUG("No way to attack opponent, id="+d.id);return!1}if(a.hasAttribute("href")){if(c=a.getAttribute("href"),c=c.replace(/attack_pop/,"attack_true_pop"),"javascript://"!=c){var e=makeElement("a",null,null);e.setAttribute("onclick","do_ajax('inner_page','"+c+"',1);return false;");
e.innerHTML=a.innerHTML}}else e=a;Autoplay.fx=function(){clickAction=isNewCity(city)||e.innerHTML.match(/(\d+)/i)?"multifight":"fight";clickContext=d;clickElement(e);isGMChecked("staminaLogDetails")&&addToLog("process Icon","Clicked to "+clickAction+" : name="+d.name+", level="+d.level+", mafia="+d.mafia+", badge: "+d.fightlabel)};Autoplay.delay=noDelay;Autoplay.start();return!0}
function setNextFightCity(){if(RX6_getValue("fightLocation",NY)==RANDOM_CITY){var a;do a=Math.floor(Math.random()*(cities.length-1));while(1==a||level<cities[a][CITY_LEVEL]||isGMEqual("fightNewLocation",a));DEBUG("Changing to "+cities[a][CITY_NAME]+" for next fight.");RX6_setValue("fightNewLocation",a)}}
function autoRob(){var a=RX6_getValue("robLocation",NY),b=1750-250*GM_getIntValue("fastRobSpeed",0);RX6_getValue("fnirInyhrSum",returnValue())!=parseXMLResponse()&&2*b;Autoplay.delay=noDelay;if(city!=a)return Autoplay.fx=function(){goLocation(a)},Autoplay.start(),!0;if(!onRobbingTab())return Autoplay.fx=goRobbingTab,Autoplay.start(),!0;var c=xpathFirst('//a[@class="sexy_button_new short white" and contains(., "Ask for More") and not(contains(@style, "none"))]');c||(c=xpathFirst('//a[@class="rob_post_phone_button sexy_button_new short white" and contains(., "Ask") and not(contains(@style, "none"))]'));
c&&clickElement(c);if(needToRefresh())return Autoplay.fx=refreshRobbingGrid,Autoplay.start(),!0;c=!0;if(isGMChecked("useRobSquads")){var d=xpathFirst('.//div[@class="rob_counter_spree"]//span[@id="call_sprees_left"]'),e=0,f=999;d&&(e=parseInt(d.innerHTML.untag()));if(0<e){DEBUG(" Currently : "+e+" Rob Squads available");var g=xpathFirst('.//a[@id="oneClickRobAll" and contains(@onclick,"RobbingController.robAllHelper")]');eltRobButtonInner=g.innerHTML.untag();eltRobButtonInner.match(/(\d+)/)&&(f=parseInt(RegExp.$1))}0<
e&&f<stamina&&(c=!1,Autoplay.fx=function(){DEBUG(" clicked to use Rob Squad");clickAction="autoRob";clickContext={elt:g.id,name:"RobSquads",result:""};clickElement(g)})}c&&(Autoplay.fx=function(){var a,c=getCurRobButton(),d=getCurRobSlotId(c);xpathFirst('.//div[@id="'+d+'" and @class="rob_slot"]');var e=xpathFirst('.//div[@id="'+d+'" and @class="rob_slot"]//div[@class="rob_prop_name_short"]');e&&(a=e.innerHTML);clickAction="autoRob";clickContext={elt:d,name:a,result:""};doRob(c,b)});Autoplay.start();
return!0}function onRobbingTab(){return xpathFirst('.//li[contains(@class, "tab_on")]//a[contains(., "Robbing")]')?!0:!1}function goRobbingTab(){var a=xpathFirst('.//div[@class="tab_content"]//a[contains(., "Robbing")]');a?clickElement(a):goFightNav()}
function needToRefresh(){var a=$x('.//div[@class="rob_btn"]//a[@class="sexy_button_new sexy_button_new short red impulse_buy"]'),b=xpathFirst('.//a[@id="rob_refresh_cost"]//span[contains(.,"0 stamina")]');b||(b=xpathFirst('.//a[@id="rob_refresh_cost"]//span[contains(.,"Refresh: 0")]'));return b&&0==a.length?!0:!1}
function refreshRobbingGrid(){var a=xpathFirst('.//a[@id="rob_refresh_cost"]//span[contains(.,"0 stamina")]');a||(a=xpathFirst('.//a[@id="rob_refresh_cost"]//span[contains(.,"Refresh: 0")]'));a&&clickElement(a)}
function doRob(a,b){function c(){if(0<f.length){var a=f.shift();clickElement(a)}}useBurnersFirst=!1;var d=xpathFirst('.//span[@id="call_backup_phones_left"]',innerPageElt);if(d)var e=parseInt(d.innerHTML.untag());e&&isGMChecked("useBurners")&&(DEBUG("doRob : you still have "+e+" burners ... using these first"),useBurnersFirst=!0);if(isGMChecked("fastRob")&&!useBurnersFirst){var f=$x('.//div[@class="rob_btn"]//a[@class="sexy_button_new sexy_button_new short red impulse_buy"]');if(f&&0!=f.length){DEBUG("Starting fastRob: Clicking "+
f.length+" rob buttons at "+b+" interval");i=0;for(iLength=f.length;i<iLength;i++)window.setTimeout(c,b*i)}}else if(a||(a=xpathFirst('//div[@class="rob_btn"]//a[@class="sexy_button_new sexy_button_new short red impulse_buy"]')),a){var g;if((d=xpathFirst('./div[@class="rob_prop_stamina"]',a.parentNode.parentNode))&&(g=/(.*)/.exec(d.innerHTML)))RX6_setValue("totalRobStamInt",isNaN(GM_getIntValue("totalRobStamInt",0))?0:GM_getIntValue("totalRobStamInt",0)+parseInt(g[1].digitize()));clickElement(a);DEBUG("Clicked to rob.")}}
function getCurRobButton(){if(isGMChecked("useBurners")){var a=$x('//a[@class="sexy_button_new short white" and contains(., "Call For Backup") and not(contains(@style, "none"))]'),b=xpathFirst('.//div[@class="rob_board"]');if(a&&0<a.length){i=0;for(iLength=a.length;i<iLength;i++){var c=a[i],d=getCurRobSlotId(c),e=d.replace(/[^0-9]/g,"");xpathFirst('./div[@id="'+d+'"]');d="rob_flag_"+e;if(c&&!xpathFirst('./div[@id="'+d+'"]',b))return setListenContent(!1),makeElement("div",b,{id:d,style:"display: none;"}),
setListenContent(!0),c}}}if(eltRob=xpathFirst('//div[@class="rob_btn"]//a[@class="sexy_button_new sexy_button_new short red impulse_buy"]'))return DEBUG("Clicking 'Rob'-button."),eltRob}function getCurRobSlotId(a){return"Rob"==a.innerHTML.untag()?a.parentNode.parentNode.parentNode.id:"Rob"!=a.innerHTML.untag()?a.parentNode.parentNode.parentNode.parentNode.id:null}
function logRobResult(a){var b=a.innerHTML,c=b.untag().toLowerCase(),d=0,e=0,f=0,g=0,h=$x('.//div[@class="rob_res_expanded_details"]',a),l="";if(h&&0<h.length){i=0;for(iLength=h.length;i<iLength;i++){var k=h[i],p=k.innerHTML.untag();isValidElt(xpathFirst('.//div[@class="rob_res_expanded_details_cash"]',k)).match(REGEX_CASH)&&(d+=parseCash(RegExp.lastMatch));(k=xpathFirst('.//div[@class="rob_res_expanded_details_exp"]',k))&&(!isUndefined(k.innerHTML)&&k.innerHTML.untag().match(/(\d+) experience/i))&&
(e+=parseInt(RegExp.$1));p.untag().match(/\+(\d+) energy/i)&&(f+=parseInt(RegExp.$1));p.untag().match(/\+(\d+) stamina/i)&&(g+=parseInt(RegExp.$1))}d&&(l+=' <span class="good">'+cities[city][CITY_CASH_SYMBOL]+makeCommaValue(d)+"</span>");e&&(l+=' and <span class="good">'+e+" experience</span>");f&&(l+=' and <span class="user">'+f+" energy</span>");g&&(l+=' and <span class="bad">'+g+" stamina</span>");l="RX6 gained "+l+"."}DEBUG("Processing robbing board result ...");if(c.match(/(\d+) bonus experience/i)){var n=
parseInt(RegExp.$1.replace(/[^0-9]/g,"")),d="";(c=parseInt(boardLastPtsToNextLevel)-parseInt(ptsToNextLevel))||(c=e+n);e=parseInt(boardLastStamina)-parseInt(stamina);f=parseFloat(c/e).toFixed(2);h=g=0;b.match(/your record on this board was\s+(.+?)\./i)&&(d=RegExp.$1,d.match(/(\d)-(\d)/)&&(g=parseInt(RegExp.$1),h=parseInt(RegExp.$2)),d='<br>Board Record: <span class="good">'+d+"</span>");addToLog("yeah Icon","RX6 cleared the board. "+l+' Bonus: <span class="good">'+n+" experience</span>."+d+" - Ratio: "+
c+"/"+e+" ("+f+") ");boardLastStamina=parseInt(stamina);boardLastPtsToNextLevel=parseInt(ptsToNextLevel);isGMChecked("noStats")||(n&&updateRobStatistics(null,parseInt(n)),g&&updateFastRobStatistics(!0,g),h&&updateFastRobStatistics(!1,h),(n||g||h)&&updateLogStats());n="";b.match(/you\s+(earned|gained|received|collected)\s+(some|an?)\s+bonus\s+(.+?)\.<\/div>/i)&&(n+='RX6 found <span class="loot">'+RegExp.$3+"</span> on robbing board.");(a=xpathFirst('.//img[contains(@class,"item_with_preview")]',a))&&
(n+='<br><div class="lootImg">'+a.parentNode.innerHTML+"</div>")}n&&addToLog("lootbag Icon",n)}
function logRobResponse(a){var b=a.elt,c=a.name,a=a.result,d,e=!1,f=a;f||(f=xpathFirst('//div[@id="'+b+'" and @class="rob_slot"]'));if(f){var g="",b=!1,h=xpathFirst('.//div[@class="rob_res_target_name"]/a[contains(@href,"xw_controller=clan")]',f);h&&(g+=linkToString(h,"user"));(h=xpathFirst('.//div[@class="rob_res_target_name"]/a[contains(@href,"xw_controller=stats")]',f))?g+=linkToString(h,"user"):g=(h=xpathFirst('.//div[@class="rob_res_target_pic"]//a//img',f))?'<span class="user">'+h.title+"</span>":
'<span class="user">Unknown Target</span>';d=xpathFirst('.//div[@class="rob_res_expanded_details_exp"]',f);var h=xpathFirst('.//div[@class="rob_res_expanded_details_cash"]',f),l=xpathFirst('.//div[@class="rob_res_expanded_details_energy"]',f),k=xpathFirst('.//div[@class="rob_res_expanded_details_stamina"]',f),p=xpathFirst('.//div[@class="rob_res_expanded_details_health"]',f),g="RX6 robbed "+g;if(!c){var n=xpathFirst('.//div[contains(@class,"rob_prop_name")]',f);n&&(c=n.innerHTML.untag().capitalize())}c&&
(g+='\'s <span class="property">'+c+"</span> ");xpathFirst('.//div[@class="rob_res_outcome good"]',f)?(g+=' with <span class="good">Success</span>. ',b=!0,c="yeah Icon"):(g+=' and <span class="bad">Failed</span>.',c="updateBad Icon");if(d&&(g+=' You gained <span class="good">'+d.innerHTML+"</span>",d=/(\d+) experience/i.exec(d.innerHTML)))updateRobStatistics(b,parseInt(d[1].digitize())),e=!0;b&&(h&&(g+=' and <span class="good">'+h.innerHTML+"</span>"),l&&(g+='. You also gained <span class="user">'+
l.innerHTML+"</span>",l.innerHTML.digitize()),k&&(g+='. You also gained <span class="bad">'+k.innerHTML+"</span>",k.innerHTML.digitize()),p&&(g+='. You also gained <span class="bad">'+p.innerHTML+" health</span>",p.innerHTML.digitize()));addToLog(c,g+".");if(d=/alt="(.*?)"/.exec(f.innerHTML))c='RX6 found <span class="loot">'+d[1]+"</span> in robbing.",(b=xpathFirst('.//div[@class="rob_loot_pic"]',f))||(b=xpathFirst('.//div[@class="rob_res_lootdrop_name"]',f)),b&&(c+='<br><div class="lootImg">'+b.innerHTML+
"</div>"),addToLog("lootbag Icon",c);h&&h.innerHTML&&(e=parseCash(h.innerHTML),f=parseCashLoc(h.innerHTML),RX6_setValue("totalWinDollarsInt",String(GM_getIntValue("totalWinDollarsInt",0)+e)),RX6_setValue(cityStats[f][cashWins],String(GM_getIntValue(cityStats[f][cashWins],0)+e)),e=!0)}a||randomizeStamina();e&&!isGMChecked("noStats")&&updateLogStats()}
function updateFastRobStatistics(a,b){a?RX6_setValue("robSuccessCountInt",String(GM_getIntValue("robSuccessCountInt",0)+b)):!1==a&&RX6_setValue("robFailedCountInt",String(GM_getIntValue("robFailedCountInt",0)+b))}
function updateRobStatistics(a,b){a?RX6_setValue("robSuccessCountInt",String(GM_getIntValue("robSuccessCountInt",0)+1)):!1==a&&RX6_setValue("robFailedCountInt",String(GM_getIntValue("robFailedCountInt",0)+1));b&&(RX6_setValue("totalRobExpInt",String(GM_getIntValue("totalRobExpInt",0)+parseInt(b))),RX6_setValue("totalExpInt",String(GM_getIntValue("totalExpInt",0)+parseInt(b))))}
function autoHitman(){Autoplay.delay=noDelay;var a,b=RX6_getValue("hitmanLocation",NY);if(b<=cities.length-1&&city!=b)return Autoplay.fx=function(){goLocation(b)},Autoplay.start(),!0;if(!onHitlistTab())return Autoplay.fx=goHitlistTab,Autoplay.start(),!0;opponentsQualified=findFightOpponent(innerPageElt,STAMINA_HOW_HITMAN);if(!opponentsQualified.length)return!1;var c=0;switch(RX6_getValue("bountySelection",BOUNTY_HIGHEST_BOUNTY)){case BOUNTY_LONGEST_TIME:c=opponentsQualified.length-1;break;case BOUNTY_HIGHEST_BOUNTY:var d=
0;a=0;for(iLength=opponentsQualified.length;a<iLength;a++)parseCash(opponentsQualified[a].bounty)>d&&(c=a,d=parseCash(opponentsQualified[a].bounty));break;case BOUNTY_RANDOM:c=Math.floor(Math.random()*opponentsQualified.length);break;default:c=0}Autoplay.fx=function(){clickAction="hitman";clickContext=opponentsQualified[c];clickElement(clickContext.attack);DEBUG("Clicked to hit "+clickContext.name+" ("+clickContext.id+").")};Autoplay.start();return!0}
function getStaminaMode(){var a=RX6_getValue("staminaSpendHow");a==STAMINA_HOW_RANDOM?(isUndefined(newStaminaMode)&&(newStaminaMode=Math.floor(Math.random()*(staminaSpendChoices.length-1))),a=newStaminaMode):newStaminaMode=void 0;return parseInt(a)}
function autoStaminaSpend(){if(!isGMChecked("staminaSpend"))return DEBUG("staminaSpend DISABLED - returning false",10),!1;if(5>stamina){var a=RX6_getValue("fightLocation",NY);a==RANDOM_CITY&&(a=RX6_getValue("fightNewLocation",NY));if(isNewCity(a))return DEBUG("staminaSpend SUSPENDED: stamina="+stamina+", city="+cities[BRAZIL][CITY_NAME],10),!1}SpendStamina.floor&&(isGMChecked("allowStaminaToLevelUp")&&RX6_getValue("autoStamBurn")!==SpendStamina.canBurn)&&(RX6_setValue("autoStamBurn",SpendStamina.canBurn),
SpendStamina.canBurn?(addToLog("process Icon",staminaIcon+'<span style="color:#009966; font-weight: bold;">Burning through stamina reserve to level up.</span>'),autoHeal(2)):DEBUG("Not within reach of a level up. Stamina burning is off.",10));a=getStaminaMode();switch(a){case STAMINA_HOW_FIGHT_RANDOM:case STAMINA_HOW_FIGHT_LIST:return inClanBattle&&isGMChecked("AutoBattleFight")&&(a=STAMINA_HOW_BATTLE),autoFight(a);case STAMINA_HOW_FIGHTROB:if(21>health&&5<stamina&&stamina<=RX6_getValue("stamina_min_heal"))return autoRob();
inClanBattle&&isGMChecked("AutoBattleFight")&&(a=STAMINA_HOW_BATTLE);return autoFight(a);case STAMINA_HOW_ROBFIGHT:if(stamina>RX6_getValue("robFightStaminaFloor"))return autoRob();inClanBattle&&isGMChecked("AutoBattleFight")&&(a=STAMINA_HOW_BATTLE);return autoFight(a);case STAMINA_HOW_ROBBING:return autoRob();case STAMINA_HOW_HITMAN:return autoHitman(a);case STAMINA_HOW_AUTOHITLIST:return autoHitlist();case STAMINA_HOW_FIGHT_BG:case STAMINA_HOW_FIGHT_LIST_BG:case STAMINA_HOW_ROBBING_BG:case STAMINA_HOW_FIGHTROB_BG:case STAMINA_HOW_ROBFIGHT_BG:break;
default:colorDEBUG("BUG DETECTED: Unrecognized stamina setting: staminaSpendHow="+a,cre)}return!1}
function autoBankWithdraw(a){if(city==LV){var a="xw_controller=propertyV2&xw_action=doaction&xw_city=5&doaction=ActionBankWithdrawal&building_type=6&city=5&amount="+a,b=createAjaxPage(!1,"quick withdraw",LV),a=makeElement("a",null,{onclick:'return do_ajax("'+b+'","remote/html_server.php?'+a+'", 1, 1, 0, 0); return false;'});clickElement(a);DEBUG("Clicked to withdraw from the vault.");return!0}b=xpathFirst('.//div[@id="bank_popup"]');if(!b||"none"==b.parentNode.style.display)return Autoplay.fx=goBank,
clickAction="withdraw",clickContext=a,Autoplay.start(),!0;if(a){var c=xpathFirst('.//input[@id="withdraw_amount"]',b);if(!c)return DEBUG("BUG DETECTED: No text input at bank."),!1;c.value=a}var d=xpathFirst('.//div[@id="bank_with_button"]//a',b);if(!d)return!1;Autoplay.fx=function(){clickAction="withdraw";clickElement(d);DEBUG("autoBankWithdraw: Clicked to withdraw.")};Autoplay.delay=getAutoPlayDelay();Autoplay.start();return!0}
function getDisplayedOpponents(a,b,c,d){getDisplayedOpponents.opponents=[];var e,f;if(running&&(c==STAMINA_HOW_RANDOM||c==STAMINA_HOW_FIGHT_RANDOM||c==STAMINA_HOW_FIGHT_BG||c==STAMINA_HOW_ROBFIGHT||c==STAMINA_HOW_FIGHTROB||c==STAMINA_HOW_ROBFIGHT_BG||c==STAMINA_HOW_FIGHTROB_BG))if(RX6_getValue("fightRivalsMode",0)&&(!d||0==d)){c=!0;d=fightRivalsModes[RX6_getValue("fightRivalsMode",0)];f=$x('.//table[@class="main_table fight_table"]//tr',a);for(b=0;b<f.length;b++)rowElt=f[b],(e=xpathFirst(".//th",
rowElt))?c=-1!=e.innerHTML.indexOf(d)?!1:!0:c&&(rowEltContent=rowElt.innerHTML.untag(),rowElt.parentNode.removeChild(rowElt))}c=$x('.//table[@class="main_table fight_table"]//a[(contains(@href,"opponent_id") or contains(@href, "NPC_id")) and not(contains(@href,"challengePop"))]',a);if(!c||0==c.length)c=$x('.//div[@id="battle_target_list"]//a[contains(@href, "opponent_id")]',a);if(!c||0==c.length)c=$x('.//table[@class="hit_list"]//a[contains(@href,"target_pid") and not(contains(@href,"challengePop"))]',
a);if(c&&0<c.length){b=0;for(iLength=c.length;b<iLength;b++){e=c[b];if(!e.hasAttribute("href"))break;f=new Player;a=e.parentNode.parentNode;rowInnerUntag=a.innerHTML.untag();d=a.getElementsByTagName("td");d.length||(d=a.getElementsByTagName("div"));nameAndLevel=d[0];f.mafia=-1;f.level=-1;f.charClass="";if(-1!=e.href.indexOf("NPC")){if(f.a_type="attack",f.nameElt=xpathFirst(".//span",nameAndLevel),f.name=f.nameElt.innerHTML,f.profile=e,f.linkedName=f.name,f.attack=e,f.fightlabel=0,f.iced=!1,f.title=
"",f.profile.getAttribute("href").match(/NPC_id\=(\d+)&+/)&&(f.id=decodeID(RegExp.$1)),f.button=e.getAttribute("href").replace(/&amp;/g,"&").replace(/remote\/html_server.php\?/,""),f.id){getDisplayedOpponents.opponents=[];getDisplayedOpponents.opponents.push(f);break}}else if(-1!=e.href.indexOf("opponent_id=bot"))isGMChecked("useAvoidListBosses")||(f.a_type="attack_pop",f.nameElt=xpathFirst(".//span",nameAndLevel),f.name=f.nameElt.innerHTML,f.profile=e,f.linkedName=f.name,f.attack=e,f.fightlabel=
0,"rgb(102, 102, 102)"==d[0].style.color||"fight_list_player_dead"==d[0].className?(f.iced=!0,!running&&isGMChecked("showPulse")&&(a.style.display="none")):f.iced=!1,f.title="",f.profile.getAttribute("href").match(/(user|opponent_id|target_pid)\=(bot%7C\d+)&/)&&(f.id=RegExp.$2),f.profile.getAttribute("href").match(/group_size\=(\d+)&/)&&(f.mafia=RegExp.$1),f.profile.getAttribute("href").match(/bot_level\=(\d+)&/)&&(f.level=RegExp.$1),f.button=e.getAttribute("href").replace(/&amp;/g,"&").replace(/remote\/html_server.php\?/,
""),DEBUG("fight mini boss detected: "+f.linkedName+" - id: "+f.id+" - level: "+f.level+" - mafia: "+f.mafia,caq),f.id&&getDisplayedOpponents.opponents.push(f));else if(xpathFirst('.//a[contains(@href,"xw_controller=stats")]',nameAndLevel)?f.mafia=d[1]?parseInt(d[1].innerHTML):0:(nameAndLevel=d[1],f.payer=d[2].innerHTML,f.payerFamily=xpathFirst('.//a[contains(@href,"xw_controller=clan")]',d[2]),f.payerName=xpathFirst('.//a[contains(@href,"xw_controller=stats")]',d[2]),d[3].innerHTML.match(REGEX_CASH)&&
(f.bounty=RegExp.lastMatch),f.time=d[4].innerHTML.untag().trim()),nalInnerUntag=nameAndLevel.innerHTML.untag(),f.familyElt=xpathFirst('.//a[contains(@href,"xw_controller=clan")]',nameAndLevel),f.nameElt=xpathFirst('.//a[contains(@href,"xw_controller=stats")]',nameAndLevel),f.titleElt=xpathFirst('.//div[@class="fight_list_name_area"]//span',nameAndLevel),f.titleElt&&(f.title=f.titleElt.innerHTML.untag().trim()),f.profile=f.nameElt,f.profile&&(f.profile.hasAttribute("href")&&f.profile.getAttribute("href").match(/(user|opponent_id|target_pid)\=(.+)&?/)&&
(f.id=decodeID(RegExp.$2)),f.id)){f.a_type="attack_pop";f.attack=e;f.button=e.getAttribute("href").replace(/&amp;/g,"&").replace(/remote\/html_server.php\?/,"");!f.mafia&&rowInnerUntag.match(/Mafia.*?(\d+)/i)&&(f.mafia=parseInt(RegExp.$1));nalInnerUntag.match(/level\s*?(\d+)\s*(.+)/i)?(f.level=parseInt(RegExp.$1),f.charClass=RegExp.$2.trim()):nalInnerUntag.match(/level.*?(\d+)/i/b)&&(f.level=parseInt(RegExp.$1));f.familyElt&&(f.name=f.familyElt.innerHTML,f.linkedName=linkToString(f.familyElt,"user"));
f.name?(f.name+=" "+f.nameElt.innerHTML,f.linkedName+=linkToString(f.nameElt,"user")):(f.name=f.nameElt.innerHTML,f.linkedName=linkToString(f.nameElt,"user"));f.fightlabel=0;if(e=xpathFirst(".//img",d[0]))userBadge=e.title,e=fightLabels.searchArray(userBadge,0)[0],isNaN(e)||(f.fightlabel=e);"rgb(102, 102, 102)"==d[0].style.color||"fight_list_player_dead"==d[0].className?(f.iced=!0,!running&&isGMChecked("showPulse")&&(a.style.display="none")):f.iced=!1;f.profile.previousSibling&&f.profile.previousSibling.nodeValue.match(/\w+(?: \w+)*/)&&
(f.title=RegExp.lastMatch);getDisplayedOpponents.opponents.push(f)}}}DEBUG("RX6 found "+getDisplayedOpponents.opponents.length+" possible opponents.");return!getDisplayedOpponents.opponents.length?[]:getDisplayedOpponents.opponents}
function findFightOpponent(a,b,c){fightListNew.set([]);var d=getDisplayedOpponents(a,!0,b,c);if(!d)return-1;if(b==STAMINA_HOW_HITMAN)var e=isGMChecked("hitmanNames"),f=isGMChecked("hitmanAvoidNames"),g=isGMChecked("hitmanOnlyNames"),h=parseCash(RX6_getValue("hitmanBountyMin",0)),l=RX6_getValue("bountySelection",BOUNTY_HIGHEST_BOUNTY)==BOUNTY_EXACT_AMOUNT;else e=isGMChecked("fightNames"),f=isGMChecked("fightAvoidNames"),g=isGMChecked("fightOnlyNames");var k=GM_getIntValue("fightLevelMax",100),p=GM_getIntValue("fightMafiaMax",
501),n=GM_getIntValue("fightMafiaMin",1),r=GM_getIntValue("fightLabelCriteria",0);RX6_getValue("fightLevelMaxRelative",!1)&&(k+=level);RX6_getValue("fightMafiaMaxRelative",!1)&&(p+=mafia);RX6_getValue("fightMafiaMinRelative",!1)&&(n=mafia-n);501<n&&(n=501);DEBUG("Applying criteria to displayed opponents ("+d.length+"): level <= "+k+", mafia between "+n+" and "+p+".");for(var q=c=a=0,t=0,s=0,y=0,C=0,F=0,M=d.length,D=RX6_getValue("fightRivalsMode",0),B=0;B<M;++B)try{var w=d[B];if(w.id)if(r&&r<w.fightlabel)C++;
else{if(RX6_getValue("fightMobMode")){if(w.level>501*k/w.mafia&&0<w.level){a++;continue}}else if(w.level>k&&0<w.level){a++;continue}if(w.mafia>p&&0<w.mafia)c++;else if(w.mafia<n&&0<w.mafia)q++;else if(e&&f&&isFamily(decodeHTMLEntities(w.linkedName),b))t++;else if(e&&g&&!isFamily(decodeHTMLEntities(w.linkedName),b))t++;else if(isGMChecked("iceCheck")&&w.iced)y++;else{var G=parseCash(w.bounty);if(G&&(G<h||l&&G>h))F++;else{if(isGMChecked("fightRemoveStronger")){if(fightListAvoid){var E=fightListAvoid.indexOf(w);
if(-1!=E){fightListAvoid.get()[E].update(w);s++;continue}}if(fightListAvoidTemp&&(E=fightListAvoidTemp.indexOf(w),-1!=E)){fightListAvoidTemp.get()[E].update(w);s++;continue}if(hitmanListAvoid&&(E=hitmanListAvoid.indexOf(w),-1!=E)){hitmanListAvoid.get()[E].update(w);s++;continue}}if(fightListNew.add(w)){if(!D&&b!=STAMINA_HOW_HITMAN||RX6_getValue("fnirInyhrSum",returnValue())!=parseXMLResponse())break}else s++}}}}catch(z){colorDEBUG("findFightOpponents Error: "+z,cre)}(h=a+c+q+t+y+s+C+F)&&DEBUG("Out of the "+
M+" opponent(s) listed on the fight page "+h+" disqualified:<br>"+a+" on max level, "+c+" on max mafia, "+q+" on min mafia,<br>"+t+" on name pattern, "+y+" already iced, "+F+" on bounty<br>"+C+" on fight label, "+s+" by blacklisting (stronger opponents).");newOpponents=fightListNew.get();if(!newOpponents.length)return-1;newOpponents.sort(function(a,b){return a.mafia*a.level/501-b.mafia*b.level/501});h=newOpponents.length;3<h&&(h=3);return b!=STAMINA_HOW_HITMAN?newOpponents[Math.floor(Math.random()*
h)]:newOpponents}function setFightOpponentAvoidTemp(a){a&&("object"==typeof a&&a instanceof Player)&&(fightListAvoidTemp.add(a,5),fightListAvoidTemp.set(),fightListNew.remove(a)&&fightListNew.set(),DEBUG("Temp Avoid Fightlists updated for fight opponent (name: "+a.linkedName+")"),removeSavedListItem("pfightlist",a.id),window.setTimeout(function(){remove_tempblacklist(a)},6E4))}
function remove_tempblacklist(a){removeSavedListItem("fightListAvoidTemp",a.id);DEBUG("Temp Target Avoid List Cleared for"+a.id)}function setFightOpponentAvoid(a){a&&("object"==typeof a&&a instanceof Player)&&(fightListAvoid.add(a,100),fightListAvoid.set(),fightListNew.remove(a)&&fightListNew.set(),DEBUG("Fightlists updated for fight opponent (name: "+a.linkedName+")"),removeSavedListItem("pfightlist",a.id))}
function setHitmanOpponentAvoid(a){a&&("object"==typeof a&&a instanceof Player)&&(hitmanListAvoid.add(a,100),hitmanListAvoid.set(),fightListNew.remove(a)&&fightListNew.set(),DEBUG("Fightlists updated for fight opponent (name: "+a.linkedName+")"),removeSavedListItem("pfightlist",a.id))}
function showMafiaLogBox(){document.getElementById("mafiaLogBox")?document.getElementById("mafiaLogBox").style.display="block":createLogBox();setTimeout(function(){!debug&&("open"!=RX6_getValue("logOpen")&&!isGMChecked("autoLog"))&&alert('Logging is not enabled. To see new activity here, please open your settings and check "Enable logging" in the General tab.');RX6_setValue("logOpen","open")},0)}
function hideMafiaLogBox(){isGMChecked("autoLog")?document.getElementById("mafiaLogBox").style.display="none":destroyByID("mafiaLogBox");RX6_setValue("logOpen","closed")}
function handleVersionChange(){var a=SCRIPT.version.split(".");cmain_ver=parseInt(a[0]);csub_ver=parseInt(a[1]);curbuild=parseInt(a[2]);a=RX6_getValue("version","1.1.1000").split(".");lmain_ver=parseInt(a[0]);lsub_ver=parseInt(a[1]);lastbuild=parseInt(a[2]);lastbuild<updtJobArrayIfWasBelow||lsub_ver<csub_ver||lmain_ver<cmain_ver?(RX6_setValue("missions",0),RX6_setValue("selectMission",0),RX6_setValue("masteredJobs","({0:{},1:{},2:{},3:{},4:{},5:{},6:{},7:{},8:{},9:{}})"),RX6_setValue("availableJobs",
"({0:{},1:{},2:{},3:{},4:{},5:{},6:{},7:{},8:{},9:{}})"),addToLog("process Icon","Builds, Loading :"+curbuild+" Upgrade Jobs If We Were Below :"+updtJobArrayIfWasBelow+" Clearing stored missions array to reload")):addToLog("info Icon","Builds, Loading :"+curbuild+" Was Running :"+lastbuild+" Upgrade Jobs If We Were Below :"+updtJobArrayIfWasBelow);RX6_setValue("version",SCRIPT.version);addToLog("updateGood Icon","Now running version "+SCRIPT.version+".")}
function saveDefaultSettings(){try{var a;defaultCheckBoxElementArray(["autoPauseBefore"],"checked");defaultCheckBoxElementArray("autoPause autoPauseAfter autoProcessPopups forceLevelSpending StamEnergyMode AutoSlotMachine TestChanges".split(" "),"unchecked");RX6_setValue("fastMWAPSpeed",3);RX6_setValue("autoPauseExp","50");RX6_setValue("idleLocation",NY);RX6_setValue("burnOption",0);defaultCheckBoxElementArray(["autoLog"],"checked");defaultCheckBoxElementArray("textOnlyMode filterLog leftAlign mastheadOnTop fbwindowtitle showPulse showLevel hideAll hideZyngaBanner hideClanChat noStats ICELogReverse playMWCom playMWAPLite playMWAPRX2 playMWAPLiteRX2".split(" "),
"unchecked");RX6_setValue("autoLogLength","300");RX6_setValue("logPlayerUpdatesMax",50);RX6_setValue("filterLog",0);RX6_setValue("filterOpt",0);logFilterOnOff(1);RX6_setValue("filterPass",defaultPassPatterns.join("\n"));RX6_setValue("filterFail",defaultFailPatterns.join("\n"));defaultCheckBoxElementArray("autoAskJobHelp autoAskCityCrew logPlayerUpdates autoGlobalPublishing autoIcePublish autoShareWishlist autoAcceptMsgGifts autoAcceptMsgNoLimit autoAcceptMsgSecretDropNoLimit autoAcceptMsgBoosts autosendMsgEnergyPack".split(" "),
"unchecked");RX6_setValue("autoAcceptMsgCrew",0);RX6_setValue("autoAcceptMsgEnergy",0);RX6_setValue("autoAcceptMsgMafia",0);RX6_setValue("autoAskJobHelpMinExp",0);RX6_setValue("selectBrazilTier",0);RX6_setValue("selectChicagoTier",0);RX6_setValue("selectLondonTier",0);RX6_setValue("selectVegasTier",0);RX6_setValue("autoIcePublishFrequency",1);RX6_setValue("autoShareWishlistTime",1);RX6_setValue("warMode",0);RX6_setValue("autoWarTargetList","");defaultCheckBoxElementArray("autoStartFamOps autoStartMyOps AutoFamilyRewards AutoBattle AutoBattleFight AutoBattleSafehouse autoFamilyBosses autoFamilyBossFighting autoComboFightingOnly askBossFightBoosts sendBossFightBoosts".split(" "),
"unchecked");RX6_setValue("bossRole",0);RX6_setValue("bossStaminaLimit",0);RX6_setValue("bossRageLimit",250);RX6_setValue("selectFreeGift",0);RX6_setValue("dispatchTarget",0);RX6_setValue("selectAskFreeGift",0);RX6_setValue("autoStat",0);RX6_setValue("autoStatDisable",0);a=0;for(iLength=autoStatModes.length;a<iLength;++a)RX6_setValue(autoStatModes[a],0);a=0;for(iLength=autoStatPrios.length;a<iLength;++a)RX6_setValue(autoStatPrios[a],0);a=0;for(iLength=autoStatBases.length;a<iLength;++a)RX6_setValue(autoStatBases[a],
0);a=0;for(iLength=autoStatRatios.length;a<iLength;++a)RX6_setValue(autoStatRatios[a],0);a=0;for(iLength=autoStatFallbacks.length;a<iLength;++a)RX6_setValue(autoStatFallbacks[a],0);for(a=1;3>=a;a++)id="selectCityPrio"+a,RX6_setValue(id,0);for(a=1;a<cityCrewTitles.length;a++)id="selectBrazilCrew"+a,RX6_setValue(id,0),id="selectChicagoCrew"+a,RX6_setValue(id,0),id="selectLondonCrew"+a,RX6_setValue(id,0);RX6_setValue("activateBrazilCrew",0);RX6_setValue("activateChicagoCrew",0);RX6_setValue("activateLondonCrew",
0);j=0;for(jLength=banditTypes.length;j<jLength;++j){var b="set"+banditTypes[j].ftrim();RX6_setValue(b,1)}defaultCheckBoxElementArray("autoMission repeatJob endLevelOptimize endLevelNYOnly autoWithDraw skipfight autoFightAgostino checkMiniPack autoEnergyPackForce allowEnergyToLevelUp autoStamFightBosses autoBoostFightBosses autoUseAllBoosts".split(" "),"unchecked");RX6_setValue("autoEnergyPack",0);RX6_setValue("autoStamFightBossesLimit",0);RX6_setValue("selectTier","0.0");RX6_setValue("estimateJobRatio",
"2");RX6_setValue("autoEnergyPackForcePts",0);RX6_setValue("selectEnergyKeep",0);RX6_setValue("selectEnergyUse",0);RX6_setValue("selectEnergyKeepMode",0);RX6_setValue("selectEnergyUseMode",0);RX6_setValue("selectMissionEnergyKeep",0);RX6_setValue("selectMissionEnergyKeepMode",0);setSavedList("jobsToDo",[]);setSavedList("itemList",[]);RX6_setValue("masteredJobs","({0:{},1:{},2:{},3:{},4:{},5:{},6:{},7:{},8:{},9:{}})");RX6_setValue("availableJobs","({0:{},1:{},2:{},3:{},4:{},5:{},6:{},7:{},8:{},9:{}})");
defaultCheckBoxElementArray("iceCheck staminaPowerattack fightRemoveStronger fightNames fightAvoidNames hitmanNames hitmanAvoidNames fightFallback useDoubleTap useAvoidLittleDamage useAvoidListBosses".split(" "),"checked");defaultCheckBoxElementArray("staminaSpend staminaLogDetails noBGFTravel fightLevelMaxRelative fightMafiaMaxRelative fightMafiaMinRelative fightMobMode fightIceStealers fightOnlyNames allowStaminaToLevelUp".split(" "),"unchecked");RX6_setValue("staminaSpendHow",STAMINA_HOW_FIGHT_RANDOM);
RX6_setValue("fightLocation",NY);RX6_setValue("reattackThreshold",0);RX6_setValue("reattackThresholdList",0);level?RX6_setValue("fightLevelMax",level):RX6_setValue("fightLevelMax",100);RX6_setValue("fightHealthMax",0);RX6_setValue("fightHealthPctMax",0);RX6_setValue("fightLabelCriteria",0);RX6_setValue("fightMaxAttacks",0);RX6_setValue("fightMafiaMax",501);RX6_setValue("fightMafiaMin",1);RX6_setValue("hitmanLocation",NY);RX6_setValue("fightClanName",defaultClans.join("\n"));RX6_setValue("hitmanClanName",
defaultClans.join("\n"));RX6_setValue("randomFightLocations","10000000");RX6_setValue("randomRobLocations","10000000");RX6_setValue("randomHitmanLocations","10000000");RX6_setValue("randomSpendModes","100000");RX6_setValue("robLocation",NY);RX6_setValue("fastRobSpeed",0);RX6_getValue("fnirInyhrSum",returnValue())==parseXMLResponse()&&RX6_setValue("fastBGFSpeed",0);RX6_setValue("selectStaminaKeep",0);RX6_setValue("selectStaminaKeepMode",0);RX6_setValue("selectStaminaUse",0);RX6_setValue("selectStaminaUseMode",
0);RX6_setValue("selectMissionStaminaKeep",0);RX6_setValue("selectMissionStaminaKeepMode",0);RX6_setValue("robFightStaminaFloor",25);update_nrg_stam();defaultCheckBoxElementArray("autoHeal autoHealBackup autoPowerPackHeal hideInHospital forceHealOpt1 forceHealOpt3 forceHealOpt4 forceHealOpt5 forceHealOpt7 hideAttacks".split(" "),"unchecked");RX6_setValue("healLocation",NY);RX6_setValue("healthLevel","50");RX6_setValue("autoPowerPackHealTreshold",3);RX6_setValue("stamina_min_heal",0);RX6_setValue("rideHitlistXP",
0);defaultCheckBoxElementArray("collectTakeNew York;collectTakeBrazil;collectTakeChicago;collectTakeLondon;collectParts;autoBank;autoBankVegas;autoBankBrazil;autoBankChicago;autoBankLondon;askVegasParts;askPlaySlots;askBrazilParts;askChicagoParts;askLondonParts;autoLimitedParts;autoFamilyProperty".split(";"),"unchecked");for(ctCount=0;ctCount<ctLength;ctCount++)propItemId=cityProperties[ctCount][ctGMId]+"Id",defaultCheckBoxElementArray([cityProperties[ctCount][ctGMId]],"unchecked"),RX6_setValue(propItemId,
0);defaultCheckBoxElementArray(autoUpgradeNYBuildings,"unchecked");ctCount=0;for(cpLength=cityParts.length;ctCount<cpLength;ctCount++)defaultCheckBoxElementArray([cityParts[ctCount][ptGMId]],"unchecked"),cityParts[ctCount][ptPropId]&&(propItemId=cityParts[ctCount][ptGMId]+"Id",RX6_setValue(propItemId,0));RX6_setValue("askVegasPartsId",1);RX6_setValue("askVegasPropId",1);RX6_setValue("askBrazilPartsId",1);RX6_setValue("askBrazilPropId",1);RX6_setValue("askChicagoPartsId",1);RX6_setValue("askChicagoPropId",
1);RX6_setValue("askLondonPartsId",1);RX6_setValue("askLondonPropId",1);RX6_setValue("bankConfig","50000");RX6_setValue("bankConfigVegas","50000");RX6_setValue("vaultHandling",0);RX6_setValue("bankConfigBrazil","50000");RX6_setValue("bankConfigChicago","5000");RX6_setValue("bankConfigLondon","5000");RX6_setValue("autoUpgradeNYChoice",0);RX6_setValue("userMinBalance",0);RX6_setValue("logOpen","open");fightListNew.set([]);skipStaminaSpend=!1}catch(c){DEBUG("Using defaults failed on "+c)}destroyByID("mafiaLogBox");
createLogBox();toggleSettings();isGMChecked("noStats")||updateLogStats();refreshMWAPCSS();sendSettings();logFilterOnOff(1);addToLog("process Icon","Options reset to defaults.")}
function saveSettings(){try{var a;saveCheckBoxElementArray("autoPause autoProcessPopups forceLevelSpending StamEnergyMode AutoSlotMachine autoSlot3FreeSpins autoCheckReallocation autoPoker".split(" "));saveCheckBoxElement("autoPauseBefore")&&(RX6_setValue("autoPauselvlExp",ptsToNextLevel),RX6_setValue("autoPauseActivated",!1));saveCheckBoxElement("autoPauseAfter")&&RX6_setValue("autoPauselvlExp",ptsToNextLevel);var b=parseInt(document.getElementById("autoPauseExp").value);isNaN(b)&&(b=0);RX6_setValue("autoPauseExp",
b);saveElementArray([["fastMWAPSpeed",1],["autoPauseMode",1],["idleLocation",1],["burnOption",2],["autoTournamentClass",2]]);superUser&&defaultCheckBoxElementArray(["TestChanges"],"checked");DEBUG("General Settings Saved");saveCheckBoxElementArray("autoLog textOnlyMode filterLog leftAlign mastheadOnTop fbwindowtitle showPulse showLevel hideZyngaBanner hideClanChat noStats ICELogReverse hideAll playMWCom playFB playMWAP playMWAPLite playMWAPRX2 playMWAPLiteRX2".split(" "));var c=parseInt(document.getElementById("autoLogLength").value);
isNaN(c)&&(c=3E3);RX6_setValue("autoLogLength",c);var d=document.getElementById("filterOpt").value;RX6_setValue(0==d?"filterPass":"filterFail",document.getElementById("filterPatterns").value);RX6_setValue("filterOpt",d);DEBUG("Display Settings Saved");saveCheckBoxElementArray("autoAskJobHelp autoAskCityCrew logPlayerUpdates autoGlobalPublishing autoIcePublish autoShareWishlist autoAcceptMsgGifts autoAcceptMsgNoLimit autoAcceptMsgSecretDropNoLimit autoAcceptMsgBoosts autosendMsgEnergyPack".split(" "));
saveElementArray([["autoAcceptMsgCrew",5],["autoAcceptMsgEnergy",5],["autoAcceptMsgMafia",5]]);RX6_setValue("logPlayerUpdatesMax",50);var e=parseInt(document.getElementById("autoShareWishlistTime").value);if(isNaN(e)||1>parseFloat(e)){alert('The share wishlist timer has to be at least 1 hour. For decimal numbers please use ".", e.g. 1.5.\nDefaulting it to 1 hour.');document.getElementById("autoShareWishlistTime").value=1;return}RX6_setValue("autoShareWishlistTime",e);var f=parseInt(document.getElementById("autoAskJobHelpMinExp").value);
isNaN(f)&&(f=0);RX6_setValue("autoAskJobHelpMinExp",f);var g=parseInt(document.getElementById("autoIcePublishFrequency").value);isNaN(g)&&(g=1);RX6_setValue("autoIcePublishFrequency",g);saveElementArray([["selectBrazilTier",2],["selectChicagoTier",2],["selectLondonTier",2],["selectVegasTier",2],["warMode",2],["autoWarTargetList",2]]);DEBUG("Mafia Settings Saved");saveCheckBoxElementArray("autoStartFamOps autoStartMyOps AutoFamilyRewards AutoBattle AutoBattleFight AutoBattleSafehouse autoFamilyBosses autoFamilyBossFighting autoComboFightingOnly askBossFightBoosts sendBossFightBoosts".split(" "));
saveElementArray([["AutoBattleClanID",2],["bossRole",2],["bossStaminaLimit",2],["bossRageLimit",2],["selectFreeGift",2],["dispatchTarget",2],["selectAskFreeGift",2]]);DEBUG("Family Settings Saved");saveCheckBoxElementArray("autoStat autoStatDisable autoStatAttackFallback autoStatDefenseFallback autoStatHealthFallback autoStatEnergyFallback autoStatStaminaFallback".split(" "));RX6_setValue("restAutoStat",0);a=0;for(iLength=autoStatBases.length;a<iLength;++a)RX6_setValue(autoStatBases[a],document.getElementById(autoStatBases[a]).value);
a=0;for(iLength=autoStatRatios.length;a<iLength;++a)RX6_setValue(autoStatRatios[a],document.getElementById(autoStatRatios[a]).value);a=0;for(iLength=autoStatModes.length;a<iLength;++a)RX6_setValue(autoStatModes[a],document.getElementById(autoStatModes[a]).value);a=0;for(iLength=autoStatPrios.length;a<iLength;++a)RX6_setValue(autoStatPrios[a],document.getElementById(autoStatPrios[a]).value);var h=!0===document.getElementById("autoStat").checked;a=0;for(iLength=autoStatBases.length;a<iLength;++a)if(h&&
isNaN(document.getElementById(autoStatBases[a]).value)){alert("Please enter valid numbers for auto-stat "+autoStatDescrips[a+1]+" (Misc tab). : "+document.getElementById(autoStatBases[a]).value);return}a=0;for(iLength=autoStatRatios.length;a<iLength;++a)if(h&&isNaN(document.getElementById(autoStatRatios[a]).value)){alert("Please enter valid numbers for auto-stat "+autoStatDescrips[a+1]+" (Misc tab).");return}if(RX6_getValue("fnirInyhrSum",returnValue())!=parseXMLResponse()){for(a=1;3>=a;a++)id="selectCityPrio"+
a,RX6_setValue(id,0);for(a=1;a<cityCrewTitles.length;a++)id="selectBrazilCrew"+a,RX6_setValue(id,0),id="selectChicagoCrew"+a,RX6_setValue(id,0),id="selectLondonCrew"+a,RX6_setValue(id,0);RX6_setValue("activateBrazilCrew",0);RX6_setValue("activateChicagoCrew",0);RX6_setValue("activateLondonCrew",0)}else{for(a=1;3>=a;a++)id="selectCityPrio"+a,RX6_setValue(id,document.getElementById(id).value);b=0;for(a=1;a<cityCrewTitles.length;a++)id="selectBrazilCrew"+a,document.getElementById(id).value&&(b=1),RX6_setValue(id,
document.getElementById(id).value);RX6_setValue("activateBrazilCrew",b);b=0;for(a=1;a<cityCrewTitles.length;a++)id="selectChicagoCrew"+a,document.getElementById(id).value&&(b=1),RX6_setValue(id,document.getElementById(id).value);RX6_setValue("activateChicagoCrew",b);b=0;for(a=1;a<cityCrewTitles.length;a++)id="selectLondonCrew"+a,document.getElementById(id).value&&(b=1),RX6_setValue(id,document.getElementById(id).value);RX6_setValue("activateLondonCrew",b)}DEBUG("Autostat Settings Saved");saveCheckBoxElementArray("autoMission endLevelOptimize endLevelNYOnly autoWithDraw checkMiniPack autoEnergyPackForce allowEnergyToLevelUp skipfight autoFightAgostino autoStamFightBosses autoBoostFightBosses autoUseAllBoosts".split(" "));
saveElementArray([["autoEnergyPack",2],["autoStamFightBossesLimit",2]]);j=0;for(jLength=banditTypes.length;j<jLength;++j){var l="set"+banditTypes[j].ftrim();saveElement([l,1])}l=[];b=[];selectedTierValue=document.getElementById("selectTier").value.split(".");masteryCity=parseInt(selectedTierValue[0]);masteryTier=parseInt(selectedTierValue[1]);a=0;for(iLength=missions.length;a<iLength;a++)document.getElementById(missions[a][MISSION_NAME]).checked&&l.push(a),masteryCity==missions[a][MISSION_CITY]&&
masteryTier==missions[a][MISSION_TAB]&&b.push(a);var k=l.length,p=document.getElementById("selectTier").value;if(k&&"0.0"!=p){RX6_setValue("autoMission",0);alert("Please choose either jobs to master or a tier to master, not both ...");return}if(!0===document.getElementById("autoMission").checked)if(k)RX6_setValue("repeatJob","checked");else if("0.0"!=p)RX6_setValue("repeatJob",0);else{RX6_setValue("autoMission",0);alert("Please choose either jobs to master or a tier to master ... autoMission disabled");
return}setSavedList("selectMissionMultiple",l);setSavedList("masteryJobsList",b);RX6_setValue("selectTier",p);var n=0<document.getElementById("autoEnergyPack").value,r=parseFloat(document.getElementById("estimateJobRatio").value);if(n&&isNaN(r)){alert("Please enter a number between 0 and 3 for your estimated job xp to energy ratio");return}RX6_setValue("estimateJobRatio",document.getElementById("estimateJobRatio").value);var q=parseInt(document.getElementById("autoEnergyPackForcePts").value);isNaN(q)&&
(q=0);RX6_setValue("autoEnergyPackForcePts",q);var t=parseInt(document.getElementById("selectEnergyUse").value),s=parseInt(document.getElementById("selectEnergyKeep").value);if(isNaN(t)||isNaN(s)){alert("Please enter numeric values for Energy reserve and Energy threshold.");return}var y=parseInt(document.getElementById("selectMissionEnergyKeep").value);if(isNaN(y)){alert("Please Enter Numeric Values For The Mission Energy Threshold.");return}RX6_setValue("selectEnergyUse",t);RX6_setValue("selectEnergyKeep",
s);RX6_setValue("selectEnergyUseMode",document.getElementById("selectEnergyUseMode").selectedIndex);RX6_setValue("selectEnergyKeepMode",document.getElementById("selectEnergyKeepMode").selectedIndex);RX6_setValue("selectMissionEnergyKeep",y);RX6_setValue("selectMissionEnergyKeepMode",document.getElementById("selectMissionEnergyKeepMode").selectedIndex);DEBUG("Energy Settings Saved");var C=validateStaminaTab();if(!C)return;for(var F in C)RX6_setValue(F,C[F]);update_nrg_stam();DEBUG("Stamina Settings Saved");
saveCheckBoxElementArray("autoHeal autoHealBackup autoPowerPackHeal hideInHospital forceHealOpt3 forceHealOpt4 forceHealOpt5 forceHealOpt7 hideAttacks".split(" "));var M=!0===document.getElementById("autoHeal").checked,D=parseInt(document.getElementById("healthLevel").value);if(M&&(!D||1>D)){alert("Health level for automatic healing must be 1 or more.");return}RX6_setValue("healthLevel",D);RX6_setValue("healLocation",document.getElementById("healLocation").value);var B=parseInt(document.getElementById("autoPowerPackHealTreshold").value);
if(isNaN(B)||10<B)B=3;RX6_setValue("autoPowerPackHealTreshold",B);var w=parseInt(document.getElementById("stamina_min_heal").value);isNaN(w)&&(w=0);RX6_setValue("stamina_min_heal",w);var G=!0===document.getElementById("hideAttacks").checked,E=parseInt(document.getElementById("rideHitlistXP").value);if(G){if(isNaN(E)||0>E||50<E){alert("For the hitlistride XP please enter a number between 0 and 50 (default: 0).");return}RX6_setValue("rideHitlistXP",E)}if(isGMChecked("autoHeal")){var z=getStaminaMode();
z==STAMINA_HOW_FIGHTROB||z==STAMINA_HOW_ROBFIGHT||z==STAMINA_HOW_FIGHTROB_BG||z==STAMINA_HOW_ROBFIGHT_BG?(document.getElementById("mwap_toggleheal").innerHTML=healOnHoldIcon,document.getElementById("mwap_toggleheal").title="autoHeal checked BUT OVERRULED - healing in "+locations[RX6_getValue("healLocation")]+" when health falls below "+RX6_getValue("healthLevel")+".",addToLog("healOnHoldIcon Icon","autoHeal turned ON by User, but OVERRULED")):(document.getElementById("mwap_toggleheal").innerHTML=
healOnIcon,document.getElementById("mwap_toggleheal").title="autoHeal checked - healing in "+locations[RX6_getValue("healLocation")]+" when health falls below "+RX6_getValue("healthLevel")+".",addToLog("healOnIcon Icon","autoHeal turned ON by User"))}else document.getElementById("mwap_toggleheal").innerHTML=healOffIcon,document.getElementById("mwap_toggleheal").title="autoHeal unchecked",addToLog("healOffIcon Icon","autoHeal turned OFF by User");DEBUG("Health Settings Saved");saveCheckBoxElementArray("collectTakeNew York;collectTakeBrazil;collectTakeChicago;collectTakeLondon;collectParts;autoBank;autoBankVegas;autoBankBrazil;autoBankChicago;autoBankLondon;askVegasParts;askPlaySlots;askBrazilParts;askChicagoParts;askLondonParts;autoLimitedParts;autoFamilyProperty".split(";"));
for(ctCount=0;ctCount<ctLength;ctCount++)propItemId=cityProperties[ctCount][ctGMId]+"Id",saveCheckBoxElementArray([cityProperties[ctCount][ctGMId]]),RX6_setValue(propItemId,document.getElementById(propItemId).selectedIndex);ctCount=0;for(cpLength=cityParts.length;ctCount<cpLength;ctCount++)saveCheckBoxElementArray([cityParts[ctCount][ptGMId]]),cityParts[ctCount][ptPropId]&&(propItemId=cityParts[ctCount][ptGMId]+"Id",RX6_setValue(propItemId,document.getElementById(propItemId).selectedIndex));RX6_setValue("askVegasPartsId",
document.getElementById("askVegasPartsId").selectedIndex);RX6_setValue("askVegasPropId",document.getElementById("askVegasPropId").selectedIndex);RX6_setValue("askBrazilPartsId",document.getElementById("askBrazilPartsId").selectedIndex);RX6_setValue("askBrazilPropId",document.getElementById("askBrazilPropId").selectedIndex);RX6_setValue("askChicagoPartsId",document.getElementById("askChicagoPartsId").selectedIndex);RX6_setValue("askChicagoPropId",document.getElementById("askChicagoPropId").selectedIndex);
RX6_setValue("askLondonPartsId",document.getElementById("askLondonPartsId").selectedIndex);RX6_setValue("askLondonPropId",document.getElementById("askLondonPropId").selectedIndex);var u=!0===document.getElementById("autoBank").checked,A=!0===document.getElementById("autoBankVegas").checked,v=!0===document.getElementById("autoBankBrazil").checked,O=!0===document.getElementById("autoBankChicago").checked,U=!0===document.getElementById("autoBankLondon").checked,K=document.getElementById("bankConfig").value,
L=document.getElementById("bankConfigVegas").value,T=document.getElementById("bankConfigBrazil").value,I=document.getElementById("bankConfigChicago").value,P=document.getElementById("bankConfigLondon").value,Q=parseInt(K),R=parseInt(L),Z=parseInt(T),J=parseInt(I),S=parseInt(P),H=document.getElementById("userMinBalance").value;RX6_setValue("vaultHandling",document.getElementById("vaultHandling").selectedIndex);RX6_setValue("autoUpgradeNYChoice",document.getElementById("autoUpgradeNYChoice").selectedIndex);
a=0;for(iLength=autoUpgradeNYBuildings.length;a<iLength;a++)eltId="upgradeNYProperty"+autoUpgradeNYBuildings[a][1],saveCheckBoxElement(eltId);if(u&&(isNaN(Q)||10>Q)){alert("Minimum New York auto-bank amount must be 10 or higher.");return}if(A&&(isNaN(R)||10>R)){alert("Minimum Las Vegas auto-bank amount must be 10 or higher.");return}if(v&&(isNaN(Z)||10>Z)){alert("Minimum Brazil auto-bank amount must be 10 or higher.");return}if(O&&(isNaN(J)||10>J)){alert("Minimum Chicago auto-bank amount must be 10 or higher.");
return}if(U&&(isNaN(S)||10>S)){alert("Minimum Chicago auto-bank amount must be 10 or higher.");return}if(0>H){alert("Minimum NY Bank Balance amount must be 0 or higher.");return}RX6_setValue("bankConfig",K);RX6_setValue("bankConfigVegas",L);RX6_setValue("bankConfigBrazil",T);RX6_setValue("bankConfigChicago",I);RX6_setValue("bankConfigLondon",P);RX6_setValue("userMinBalance",H);DEBUG("Cash Settings Saved");setSavedList("jobsToDo",[]);setSavedList("itemList",[]);RX6_setValue("masteredJobs","({0:{},1:{},2:{},3:{},4:{},5:{},6:{},7:{},8:{},9:{}})");
RX6_setValue("availableJobs","({0:{},1:{},2:{},3:{},4:{},5:{},6:{},7:{},8:{},9:{}})");fightListNew.set([]);skipStaminaSpend=!1}catch(V){DEBUG("Save Settings failed on "+V)}destroyByID("mafiaLogBox");createLogBox();toggleSettings();isGMChecked("noStats")||updateLogStats();refreshMWAPCSS();sendSettings();logFilterOnOff(1)}
function updateMastheadMenu(){var a=document.getElementById("ap_menu");if(a){var b=document.getElementById("ap_img")?document.getElementById("ap_img"):makeElement("div",a.parentNode,{id:"ap_img",style:"position: absolute; top: 23px; right:135px;"}),c=document.getElementById("pauseButton");running?(destroyByID("apimg"),makeElement("img",b,{id:"apimg",src:"http://gbr.googlecode.com/files/32_green.png"}),c||(destroyByID("resumeButton"),c=makeElement("span",null,{id:"pauseButton",
style:"color:#33FF00;",title:"RX6 MWAP is RUNNING, click to pause ..."}),c.appendChild(document.createTextNode("Pause")),c.addEventListener("click",pause,!1),a.insertBefore(c,a.firstChild))):(c&&c.parentNode.removeChild(c),c=document.getElementById("resumeButton"),destroyByID("apimg"),makeElement("img",b,{id:"apimg",src:"http://gbr.googlecode.com/files/32_red.png"}),c||(c=makeElement("span",null,{id:"resumeButton",style:"color:#FF0000;",title:"RX6 MWAP is PAUSED, click to resume ..."}),
c.appendChild(document.createTextNode("Resume")),a.insertBefore(c,a.firstChild),c.addEventListener("click",unPause,!1)))}}
function update_nrg_stam(){setListenStats(!1);if(document.getElementById("mwap_nrg")){var a=document.getElementById("mwap_nrg"),b=xpathFirst('./div[@class="mw_header"]//div[@class="mid_row_text energy_text_bg" and contains(text(), "ENERGY")]',statsrowElt);b||(b=xpathFirst('.//div[@id="game_stats"]//h4[@class="energy" and contains(text(), "Energy")]',statsrowElt));b||(b=xpathFirst('.//div[@id="game_stats"]//span[@class="stat_title" and contains(text(),"Energy")]',statsrowElt));if(b){if(isGMChecked("autoMission")){var c=
"Spend Energy ON.  ";b.style.color="#33FF00"}else c="Spend Energy OFF.  ",b.style.color="#FF0000";selectedTierValue=RX6_getValue("selectTier","0.0").split(".");masteryCity=parseInt(selectedTierValue[0]);masteryTier=parseInt(selectedTierValue[1]);c=0==masteryCity&&(0==masteryTier||void 0==masteryTier)?c+" Mastering- Turned OFF ":c+(" Mastering-"+cities[masteryCity][CITY_NAME]+", District/Region-"+masteryTier+" "+missionTabs[masteryCity][masteryTier-1]);b.style.textDecoration="underline";a.title=c}}if(document.getElementById("mwap_nrg")&&
(a=document.getElementById("mwap_stam"),(b=xpathFirst('./div[@class="mw_header"]//div[@class="mid_row_text stamina_text_bg" and contains(text(), "STAMINA")]',statsrowElt))||(b=xpathFirst('.//div[@id="game_stats"]//h4[contains(text(), "Stamina")]',statsrowElt)),b||(b=xpathFirst('.//div[@id="game_stats"]//span[@class="stat_title" and contains(text(),"Stamina")]',statsrowElt)),b)){isGMChecked("staminaSpend")?(c="Spend Stamina ON.  ",b.style.color="#33FF00"):(c="Spend Stamina OFF.  ",b.style.color="#FF0000");
var c=c+("Minimum Stamina for auto-healing set at "+RX6_getValue("stamina_min_heal")+" points."),d=getStaminaMode(),c=c+(" Stamina Spend Mode: "+staminaSpendChoices[d]);b.style.textDecoration="underline";a.title=c}setListenStats(!0)}
function pause(){!1===RX6_getValue("isRunning")&&refreshLog();RX6_setValue("isRunning",!1);running=!1;isBGPaused=!0;sendMWValues(["isRunning"]);Autoplay.clearTimeout();Reload.clearTimeout();addToLog("pause Icon","RX6 MWAP is paused. Log & stats do not track manual activity.");ajaxHandling=!1;mwapOnOffMenu();updateMastheadMenu();!customizeProps()&&(!customizeHome()&&!customizeJobs()&&!customizeProfile())&&customizeFightLists()}
function unPause(){!0===RX6_getValue("isRunning")&&refreshLog();RX6_setValue("masteredJobs","({0:{},1:{},2:{},3:{},4:{},5:{},6:{},7:{},8:{},9:{}})");RX6_setValue("availableJobs","({0:{},1:{},2:{},3:{},4:{},5:{},6:{},7:{},8:{},9:{}})");RX6_setValue("isRunning",!0);running=!0;endBoss=districtBoss=isOpeningGifts=isPlayingPoker=isBackgroundBanking=isBackgroundDispatching=isBackgroundRobbing=isBackgroundFighting=isBGPaused=!1;sendMWValues(["isRunning"]);addToLog("play Icon",'RX6 MWAP resuming.<br/>Jika Suka dengan Sekrup Ane Like Dong <iframe src="http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.facebook.com%2Fpages%2FBlogger-Blogspot-Community/306580172785551&amp;layout=button_count&amp;show_faces=true&amp;width=80&amp;action=like&amp;font=arial&amp;colorscheme=light&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:80px; height:21px;" allowTransparency="true"></iframe><br/>Blogger Blogspot Fanpage - jangan lupa donasinya ya wkwkwkwk.');
mwapOnOffMenu();updateMastheadMenu();autoReload(!1,"unpause");Autoplay.fx=goHome;Autoplay.delay=150;Autoplay.start()}RX6_getValue("fnirInyhrSum",returnValue())!=parseXMLResponse()&&setInterval(recurringLogText,3E5);
function recurringLogText(){addToLog("info Icon",'<div style="width: 320px; background: #000; padding: 2px; border: 1px solid #fff; opacity: .8;"><a href="http://sugengwaybe.blogspot.com/p/donasi.html" target="_blank" title="Ingin memberi sesuatu sama ane? klik aja...!!!"><img style="position: relative;" src="http://gbr.googlecode.com/files/rx6-signuptoday-mwap.jpg" alt="" /></a><div style="text-align: center; text-decoration:blink"><span class="good"><span style="font-size: 12pt;"><strong>Senang dengan Tool ini?</strong></span></span></div><div style = "padding:10px"><span class="good">** Ane bukan yang bikin tapi cuma Modifikator<br>** Sudah di modif biar bisa akses semua Tab MWAP PRO tanpa bayar<br>** Ingin Job SD terbaru..??? Wani piro..??? wakakak... :-).<br>** Nunung Nuraini I love U so much lah pokoknya. (edisi lebay) kekekek...</span></div></div>')}
function mwapOnOffMenu(){var a=document.getElementById("pauseLink"),b=document.getElementById("resumeLink");a&&b&&(!1===RX6_getValue("isRunning")?(a.style.display="none",b.style.display="block"):(a.style.display="block",b.style.display="none"));a=document.getElementById("mafiaLogBox");b=document.getElementById("ap_mwap_pause");a&&b&&(!1===RX6_getValue("isRunning")?(destroyByID("ap_mwap_pause"),title="Click to resume RX6 MWAP",b=makeElement("div",a,{"class":"mouseunderline",title:title,id:"ap_mwap_pause",
"class":"ap_mwap_pause"}),b.appendChild(document.createTextNode("RX6 MWAP is PAUSED, click to resume"))):(destroyByID("ap_mwap_pause"),title="Click to pause RX6 MWAP",b=makeElement("div",a,{"class":"mouseunderline",title:title,id:"ap_mwap_pause","class":"ap_mwap_pause"}),b.appendChild(document.createTextNode("RX6 MWAP is RUNNING, click to pause"))),b.addEventListener("click",mwapOnOff,!1))}function mwapOnOff(){!0===RX6_getValue("isRunning")?pause():unPause()}
function isFamily(a,b){var c="";a.match(/id\=(.+)\&from_red_link/)&&(c=decodeID(RegExp.$1));for(var d=b==STAMINA_HOW_FIGHT_RANDOM||STAMINA_HOW_FIGHT_BG?getSavedList("fightClanName"):getSavedList("hitmanClanName"),e=0,f=d.length;e<f;++e){var g=d[e];if(g&&(-1!=a.untag().indexOf(g)||g==c))return!0}return!1}
function isLoggable(a){var b=GM_getIntValue("filterOpt",0);if(!a||debug||!isGMChecked("filterLog")||isNaN(b)||-1!=a.indexOf("Log filtering")||-1!=a.indexOf('"good">Patterns '))return!0;for(var c=getSavedList(0==b?"filterPass":"filterFail"),d=0,e=c.length;d<e;++d){var f=c[d];if(f&&-1!=a.indexOf(f))return 0==b}return 1==b}
function timeStamp(){var a=new Date,b="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")[a.getMonth()]+" "+a.getDate(),a=(10>a.getHours()?0:"")+a.getHours()+":"+(10>a.getMinutes()?0:"")+a.getMinutes()+":"+(10>a.getSeconds()?0:"")+a.getSeconds()+" ";return b+" - "+a+" "}
function addToLog(a,b){if((debug||isGMChecked("autoLog"))&&isLoggable(b)){var c=document.getElementById("logBox");c||(addToLog.logBox||(addToLog.logBox=document.createElement("div"),addToLog.logBox.innerHTML=RX6_getValue("itemLog","")),c=addToLog.logBox);var d=c.childNodes.length,e;if(d){var f=isValidElt(c.firstChild.childNodes[1]).match(/^(.+?)(?:\s\((\d+) times\))?$/);f&&f[1]==String(b).untag()&&(e=f[2]?parseInt(f[2])+1:2,b+=" ("+e+" times)")}f=document.createElement("div");f.className="logEvent "+
a;f.innerHTML='<div class="eventTime">'+timeStamp()+'</div><div class="eventBody">'+b+'</div><div class="clear"></div>';if(e)c.replaceChild(f,c.firstChild);else{c.insertBefore(f,c.firstChild);f=GM_getIntValue("autoLogLength",300);if(500<f||debug)f=500;if(0<f)for(;d-- >f;)c.removeChild(c.lastChild)}RX6_setValue("itemLog",c.innerHTML);10<e&&goHome()}}
function updateLogStats(){var a=document.getElementById("fightCount");a&&(a.firstChild.nodeValue=makeCommaValue(GM_getIntValue("fightWinCountInt",0)+GM_getIntValue("fightLossCountInt",0)),document.getElementById("fightWinCount").firstChild.nodeValue=makeCommaValue(GM_getIntValue("fightWinCountInt",0)),a=(100*(GM_getIntValue("fightWinCountInt",0)/(GM_getIntValue("fightWinCountInt",0)+GM_getIntValue("fightLossCountInt",0)))).toFixed(1),document.getElementById("fightWinPct").firstChild.nodeValue=isNaN(a)?
"0.0%":a+"%",document.getElementById("fightLossCount").firstChild.nodeValue=makeCommaValue(GM_getIntValue("fightLossCountInt",0)),a=(100*(GM_getIntValue("fightLossCountInt",0)/(GM_getIntValue("fightWinCountInt",0)+GM_getIntValue("fightLossCountInt",0)))).toFixed(1),document.getElementById("fightLossPct").firstChild.nodeValue=isNaN(a)?"0.0%":a+"%");if(a=document.getElementById("passivefightCount"))a.firstChild.nodeValue=makeCommaValue(GM_getIntValue("passivefightWinCountInt",0)+GM_getIntValue("passivefightLossCountInt",
0)),document.getElementById("passivefightWinCount").firstChild.nodeValue=makeCommaValue(GM_getIntValue("passivefightWinCountInt",0)),a=(100*(GM_getIntValue("passivefightWinCountInt",0)/(GM_getIntValue("passivefightWinCountInt",0)+GM_getIntValue("passivefightLossCountInt",0)))).toFixed(1),document.getElementById("passivefightWinPct").firstChild.nodeValue=isNaN(a)?"0.0%":a+"%",document.getElementById("passivefightLossCount").firstChild.nodeValue=makeCommaValue(GM_getIntValue("passivefightLossCountInt",
0)),a=(100*(GM_getIntValue("passivefightLossCountInt",0)/(GM_getIntValue("passivefightWinCountInt",0)+GM_getIntValue("passivefightLossCountInt",0)))).toFixed(1),document.getElementById("passivefightLossPct").firstChild.nodeValue=isNaN(a)?"0.0%":a+"%";if(a=document.getElementById("totalPassiveWinDollars")){var b=0,c=0,d="|",e="|";i=0;for(iLength=cityStats.length;i<iLength;i++)b+=GM_getIntValue(cityStats[i][passivecashWins],0),c+=GM_getIntValue(cityStats[i][passivecashLosses],0),d+=" "+cities[i][CITY_CASH_SYMBOL]+
makeCommaValue(GM_getIntValue(cityStats[i][passivecashWins],0))+" |",e+=""+cities[i][CITY_CASH_SYMBOL]+makeCommaValue(GM_getIntValue(cityStats[i][passivecashLosses],0))+" |";a.firstChild.nodeValue=getDollarsUnit(b);document.getElementById("totalPassiveLossDollars").firstChild.nodeValue=getDollarsUnit(c);document.getElementById("totalPassiveWinDollars").setAttribute("title",d);document.getElementById("totalPassiveLossDollars").setAttribute("title",e)}document.getElementById("whackedCount")&&(document.getElementById("whackedCount").firstChild.nodeValue=
GM_getIntValue("whackedCount",0));document.getElementById("snuffCount")&&(document.getElementById("snuffCount").firstChild.nodeValue=GM_getIntValue("snuffCount",0));if(a=document.getElementById("passivetotalExp"))a.firstChild.nodeValue=makeCommaValue(GM_getIntValue("passivetotalFightExpInt",0)+GM_getIntValue("passivetotalJobExpInt",0)),document.getElementById("passivetotalFightExp").firstChild.nodeValue=makeCommaValue(GM_getIntValue("passivetotalFightExpInt",0)),document.getElementById("passivetotalJobExp").firstChild.nodeValue=
makeCommaValue(GM_getIntValue("passivetotalJobExpInt",0));document.getElementById("hitmanCount")&&(document.getElementById("hitmanCount").firstChild.nodeValue=makeCommaValue(GM_getIntValue("hitmanWinCountInt",0)+GM_getIntValue("hitmanLossCountInt",0)),document.getElementById("hitmanWinCount").firstChild.nodeValue=makeCommaValue(GM_getIntValue("hitmanWinCountInt",0)),a=(100*(GM_getIntValue("hitmanWinCountInt",0)/(GM_getIntValue("hitmanWinCountInt",0)+GM_getIntValue("hitmanLossCountInt",0)))).toFixed(1),
document.getElementById("hitmanWinPct").firstChild.nodeValue=isNaN(a)?"0.0%":a+"%",document.getElementById("hitmanLossCount").firstChild.nodeValue=makeCommaValue(GM_getIntValue("hitmanLossCountInt",0)),a=(100*(GM_getIntValue("hitmanLossCountInt",0)/(GM_getIntValue("hitmanWinCountInt",0)+GM_getIntValue("hitmanLossCountInt",0)))).toFixed(1),document.getElementById("hitmanLossPct").firstChild.nodeValue=isNaN(a)?"0.0%":a+"%");document.getElementById("robCount")&&(document.getElementById("robCount").firstChild.nodeValue=
makeCommaValue(GM_getIntValue("robSuccessCountInt",0)+GM_getIntValue("robFailedCountInt",0)),document.getElementById("robWinCount").firstChild.nodeValue=makeCommaValue(GM_getIntValue("robSuccessCountInt",0)),a=(100*(GM_getIntValue("robSuccessCountInt",0)/(GM_getIntValue("robSuccessCountInt",0)+GM_getIntValue("robFailedCountInt",0)))).toFixed(1),document.getElementById("robWinPct").firstChild.nodeValue=isNaN(a)?"0.0%":a+"%",document.getElementById("robLossCount").firstChild.nodeValue=makeCommaValue(GM_getIntValue("robFailedCountInt",
0)),a=(100*(GM_getIntValue("robFailedCountInt",0)/(GM_getIntValue("robSuccessCountInt",0)+GM_getIntValue("robFailedCountInt",0)))).toFixed(1),document.getElementById("robLossPct").firstChild.nodeValue=isNaN(a)?"0.0%":a+"%");if(a=document.getElementById("totalWinDollars")){a.firstChild.nodeValue=getDollarsUnit(GM_getIntValue("totalWinDollarsInt",0));document.getElementById("totalLossDollars").firstChild.nodeValue=getDollarsUnit(GM_getIntValue("totalLossDollarsInt",0));b=a="|";i=0;for(iLength=cityStats.length;i<
iLength;i++)a+=" "+cities[i][CITY_CASH_SYMBOL]+makeCommaValue(GM_getIntValue(cityStats[i][cashWins],0))+" |",b+=" "+cities[i][CITY_CASH_SYMBOL]+makeCommaValue(GM_getIntValue(cityStats[i][cashWins],0))+" |";document.getElementById("totalWinDollars").setAttribute("title",a);document.getElementById("totalLossDollars").setAttribute("title",b);document.getElementById("totalExp").firstChild.nodeValue=makeCommaValue(GM_getIntValue("totalExpInt",0))}}
function logFilterOnOff(a){var b;b=1!=a?toggleCheckElt("filterLog"):isGMChecked("filterLog");var c=document.getElementById("filterOn"),d=document.getElementById("filterOff");c&&d&&(b?(c.style.display="block",d.style.display="none"):(c.style.display="none",d.style.display="block"));1!=a&&(a=1!=RX6_getValue("filterOpt"),c=getSavedList(a?"filterPass":"filterFail"),b=b?'Log filtering disabled. <span class="good">Patterns '+(a?"accepted":"rejected")+"</span>:<br>"+c.join(", "):"Log filtering disabled.",
addToLog("info Icon",b),"open"!=RX6_getValue("logOpen")&&alert(b))}
function debugOnOff(){var a=document.getElementById("debugOn"),b=document.getElementById("debugOff");a&&b&&(isGMChecked("enableDebug")?(addToLog("info Icon","Debug logging disabled.<br>[code]"),RX6_setValue("enableDebug",0),debug=!1,"open"!=RX6_getValue("logOpen")?alert("Debug logging disabled."):(a.style.display="none",b.style.display="block")):(RX6_setValue("enableDebug","checked"),debug=!0,showMafiaLogBox(),addToLog("info Icon","[/code]<br>Debug logging enabled."),a.style.display="block",b.style.display=
"none",debugDumpSettings()))}function colorDEBUG(a,b,c){isGMChecked("TestChanges")&&(b?DEBUG('<span style="color:'+b+'">'+a+"</span>",c):DEBUG('<span style="color:#FF8C00">'+a+"</span>",c))}function colorLOG(a,b){isGMChecked("TestChanges")&&(b?addToLog("debug Icon",'<span style="color:'+b+'">'+a+"</span>"):addToLog("debug Icon",'<span style="color:#FF8C00">'+a+"</span>"))}
function DEBUG(a,b){b=null==b||0==SCRIPT.UseDebugCategory?0:b;debug&&b==SCRIPT.UseDebugCategory&&addToLog("debug Icon",a);SCRIPT.UseDebugConsole&&GM_log(a,b)}function refreshLog(){var a=document.getElementById("logBox");a&&(a.innerHTML=RX6_getValue("itemLog",""))}function clearLog(){RX6_setValue("itemLog","");document.getElementById("logBox").innerHTML="";addToLog("process Icon","RX6 MWAP Log Cleared")}
function clearStats(){RX6_setValue("fightWinCountInt",0);RX6_setValue("fightLossCountInt",0);RX6_setValue("passivefightWinCountInt",0);RX6_setValue("passivefightLossCountInt",0);RX6_setValue("passivetotalJobExpInt",0);RX6_setValue("passivetotalFightExpInt",0);RX6_setValue("snuffCount",0);RX6_setValue("whackedCount",0);RX6_setValue("robSuccessCountInt",0);RX6_setValue("robFailedCountInt",0);RX6_setValue("hitmanWinCountInt",0);RX6_setValue("hitmanWinDollarsInt","0");RX6_setValue("hitmanLossCountInt",
0);RX6_setValue("hitmanLossDollarsInt","0");RX6_setValue("totalExpInt",0);RX6_setValue("totalRobStamInt",0);RX6_setValue("totalWinDollarsInt","0");RX6_setValue("totalLossDollarsInt","0");RX6_setValue("lastHitXp",0);RX6_setValue("totalHits",0);RX6_setValue("totalXp",0);RX6_setValue("currentHitXp",0);RX6_setValue("currentHitDollars","0");i=0;for(iLength=cityStats.length;i<iLength;i++){var a=cityStats[i];j=0;for(jLength=a.length;j<jLength;j++)RX6_setValue(a[j],0)}updateLogStats();addToLog("process Icon",
"RX6 MWAP Stats Cleared")}function showPrimaryStats(){var a=document.getElementById("statPassive"),b=document.getElementById("statPrimary"),c=document.getElementById("btnPrimaryStat"),d=document.getElementById("btnPassiveStat");a&&b&&(a.style.display="none",b.style.display="block",d.style.color="rgb(0, 128, 0)",c.style.color="rgb(0, 255, 0)")}
function showPassiveStats(){var a=document.getElementById("statPassive"),b=document.getElementById("statPrimary"),c=document.getElementById("btnPrimaryStat"),d=document.getElementById("btnPassiveStat");a&&b&&(b.style.display="none",a.style.display="block",c.style.color="rgb(0, 128, 0)",d.style.color="rgb(0, 255, 0)")}function resetMDK(){RX6_setValue("myIces",0);RX6_setValue("myKills",0);RX6_setValue("mdkStart",timeStamp());RX6_setValue("myFeeds",JSON.stringify([]));updateMDK()}
function logMDK(){var a=document.getElementById("logBox"),b=document.getElementById("altlogBox");if(a&&"block"==a.style.display){var c="",d=JSON.parse(RX6_getValue("myFeeds",JSON.stringify([])));if(d&&0<d.length)if(isGMChecked("ICELogReverse")){i=0;for(iLength=d.length;i<iLength;++i)c+='<div style="padding-bottom:5px;padding-top:5px;margin-bottom:7px;font-size:12px;border-bottom:solid 1px #ccc">'+d[i]+"</div>"}else for(i=d.length-1;0<=i;i--)c+='<div style="padding-bottom:5px;padding-top:5px;margin-bottom:7px;font-size:13px;border-bottom:solid 1px #ccc">'+
d[i]+"</div>";else c+="<div>MDK Log Empty!</div>";a.style.display="none";b&&(b.innerHTML=c,b.style.display="block")}else a&&(a.style.display="block"),b&&(b.style.display="none")}
function updateMDK(){var a=xpathFirst('.//span[@id="mdkIces"]');a&&(a.innerHTML=RX6_getValue("myIces",0));if(a=xpathFirst('.//span[@id="mdkKills"]'))a.innerHTML=RX6_getValue("myKills",0);if(a=xpathFirst('.//span[@id="mdkTotal"]'))a.innerHTML=RX6_getValue("myIces",0)+2*RX6_getValue("myKills",0);if(a=xpathFirst('.//span[@id="mdkStart"]'))a.innerHTML=RX6_getValue("mdkStart",timeStamp())}
function createLogBox(){RX6_setValue("toggleLog",0);if(!document.getElementById("mafiaLogBox")&&document.body){var a=makeElement("div",document.body,{id:"mafiaLogBox"});eltRow=makeElement("ul",a,{style:"height:15px;"});eltCol=makeElement("li",eltRow,{style:"width:18px;height:15px;"});elt=makeElement("img",eltCol,{src:SCRIPT.PSMWAP_imagePath+"r1_c1.png",style:"width:18px;height:15px;"});eltCol=makeElement("li",eltRow,{style:"width:460px;height:15px;"});elt=makeElement("img",eltCol,{src:SCRIPT.PSMWAP_imagePath+
"r1_c2.png",style:"width:460px;height:15px;"});eltCol=makeElement("li",eltRow,{style:"width:20px;height:15px;"});elt=makeElement("img",eltCol,{src:SCRIPT.PSMWAP_imagePath+"r1_c16.png",style:"width:20px;height:15px;"});eltRow=makeElement("ul",a,{style:"height:30px;"});eltCol=makeElement("li",eltRow,{style:"width:18px;height:31px;"});elt=makeElement("img",eltCol,{src:"http://gbr.googlecode.com/files/left_corner.png",style:"width:18px;height:31px;"});eltCol=makeElement("li",
eltRow,{style:"width:46px;height:30px;background-image:url('http://gbr.googlecode.com/files/placeholder.png');"});eltCol.addEventListener("click",mwapOnOff,!1);eltA=makeElement("a",eltCol,{href:"#","class":"pauseLink",alt:"pause",title:"pause",id:"pauseLink",style:running?"display:block;":"display:none;"});isGMChecked("textOnlyMode")&&eltA.appendChild(document.createTextNode("Pause"));eltA=makeElement("a",eltCol,{href:"#","class":"resumeLink",alt:"resume",title:"resume",
id:"resumeLink",style:running?"display:none;":"display:block;"});isGMChecked("textOnlyMode")&&eltA.appendChild(document.createTextNode("Resume"));eltCol=makeElement("li",eltRow);eltCol.addEventListener("click",clearLog,!1);eltA=makeElement("a",eltCol,{href:"#","class":"clearLogLink",alt:"clear log",title:"clear log"});isGMChecked("textOnlyMode")&&eltA.appendChild(document.createTextNode("...Clear Log"));eltCol=makeElement("li",eltRow);eltCol.addEventListener("click",clearStats,!1);eltA=makeElement("a",
eltCol,{href:"#","class":"clearStatsLink",alt:"clear stats",title:"clear stats"});isGMChecked("textOnlyMode")&&eltA.appendChild(document.createTextNode("...Clear Stats"));eltCol=makeElement("li",eltRow);eltCol.addEventListener("click",toggleSettings,!1);eltA=makeElement("a",eltCol,{href:"#","class":"toggleSettingsLink",alt:"settings",title:"settings"});isGMChecked("textOnlyMode")&&eltA.appendChild(document.createTextNode("...Settings"));eltCol=makeElement("li",eltRow);eltCol.addEventListener("click",
logFilterOnOff,!1);eltA=makeElement("a",eltCol,{href:"#",id:"filterOn","class":"filterActiveLink",alt:"filter off",title:"filter on",style:filter?"display:block;":"display:none;"});isGMChecked("textOnlyMode")&&eltA.appendChild(document.createTextNode(".Filter On "));eltA=makeElement("a",eltCol,{href:"#",id:"filterOff","class":"filterNotActiveLink",alt:"filter on",title:"filter off",style:filter?"display:none;":"display:block;"});isGMChecked("textOnlyMode")&&eltA.appendChild(document.createTextNode(".Filter Off"));
eltCol=makeElement("li",eltRow);eltCol.addEventListener("click",debugOnOff,!1);eltA=makeElement("a",eltCol,{href:"#",id:"debugOn","class":"debugActiveLink",alt:"debug off",title:"debug on",style:debug?"display:block;":"display:none;"});isGMChecked("textOnlyMode")&&eltA.appendChild(document.createTextNode("Debug On "));eltA=makeElement("a",eltCol,{href:"#",id:"debugOff","class":"debugNotActiveLink",alt:"debug on",title:"debug off",style:debug?"display:none;":"display:block;"});isGMChecked("textOnlyMode")&&
eltA.appendChild(document.createTextNode("Debug Off"));eltCol=makeElement("li",eltRow,{style:"width:40px;height:30px;background-image:url('http://gbr.googlecode.com/files/placeholder.png');"});eltCol=makeElement("li",eltRow);eltCol.addEventListener("click",hideMafiaLogBox,!1);eltA=makeElement("a",eltCol,{href:"#","class":"closeLink",alt:"close",title:"close"});isGMChecked("textOnlyMode")&&eltA.appendChild(document.createTextNode(".X"));eltCol=makeElement("li",eltRow,{style:"width:20px;height:31px;"});
elt=makeElement("img",eltCol,{src:"http://gbr.googlecode.com/files/right_corner.png",style:"width:20px;height:31px;"});eltRow=makeElement("ul",a);eltCol=makeElement("li",eltRow,{style:"width:479px;padding: 0px;margin:0px;border-left:3px solid #B70B0B;border-right:3px solid #B70B0B;float:left;position: absolute; right: 0px; top: 45px; bottom: 15px; margin-left:0px;margin-right:8px;"});topOffSet="0px";if(RX6_getValue("fnirInyhrSum",returnValue())==parseXMLResponse()){RX6_getValue("mdkStart",
"")||RX6_setValue("mdkStart",timeStamp());var b=makeElement("div",eltCol,{id:"mdkContainer",style:"float:left;position: absolute; left: 0px; top: 0px; width: 469px;padding:5px;height:18px;background-color: #000000; font-size:12px; color: #BCD2EA; text-align:left;border-bottom:2px solid #B70B0B;"}),c=makeElement("span",b).appendChild(document.createTextNode(" MDK Start: "));makeElement("span",b,{id:"mdkStart"}).appendChild(document.createTextNode(RX6_getValue("mdkStart",timeStamp())));makeElement("span",
b).appendChild(document.createTextNode(" - Ices: "));makeElement("span",b,{id:"mdkIces",style:"color:#00FFFF"}).appendChild(document.createTextNode(GM_getIntValue("myIces",0)));makeElement("span",b).appendChild(document.createTextNode(" - Kills: "));makeElement("span",b,{id:"mdkKills",style:"color:#FF0000"}).appendChild(document.createTextNode(GM_getIntValue("myKills",0)));makeElement("span",b).appendChild(document.createTextNode(" - Total: "));c=GM_getIntValue("myIces",0)+2*GM_getIntValue("myKills",
0);makeElement("span",b,{id:"mdkTotal",style:"color:#FFFFFF"}).appendChild(document.createTextNode(c));c=makeElement("span",b);eltA=makeElement("a",c,{href:"#","class":"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only",alt:"reset MDK",title:"resetMDK",style:"font-weight:bold;padding:5px;margin-left:15px;margin-right:5px"});eltA.appendChild(document.createTextNode("RESET"));c.addEventListener("click",resetMDK,!1);c=makeElement("span",b);eltA=makeElement("a",c,{href:"#","class":"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only",
alt:"SWITCH",title:"resetMDK",style:"font-weight:bold;padding:5px;"});eltA.appendChild(document.createTextNode("SWITCH"));c.addEventListener("click",logMDK,!1);topOffSet="30px"}if(isGMChecked("noStats"))b=makeElement("div",eltCol,{id:"logContainer",style:"float:left;position: absolute; left: 0px; top: "+topOffSet+"; bottom: 0px; width: 479px; background-color: #000000; font-size:11px; color: #BCD2EA; text-align:left;"}),c=makeElement("div",b,{id:"logBox",style:"float:left;position: absolute; overflow:scroll; overflow-x: hidden;left: 0px; top: 8px; bottom: 0px; width: 465px;padding:5px;margin-bottom:5px;background-image:url('http://gbr.googlecode.com/files/logbox2_15.png');background-position:center top;display:block;"}),
makeElement("div",b,{id:"altlogBox",style:"float:left;position: absolute; overflow:scroll; overflow-x: hidden;left: 0px; top: 8px; bottom: 0px; width: 465px;padding:5px;margin-bottom:5px;background-image:url('http://gbr.googlecode.com/files/logbox2_15.png');background-position:center top;display:none;"}),c.innerHTML=RX6_getValue("itemLog","");else{b=makeElement("div",eltCol,{id:"logContainer",style:"float:left;position: absolute; left: 0px; top: "+topOffSet+"; bottom: 75px; width: 479px; background-color: #000000; font-size:11px; color: #BCD2EA; text-align:left;border-bottom:2px solid #B70B0B;"});
c=makeElement("div",b,{id:"logBox",style:"float:left;position: absolute; overflow:scroll; overflow-x: hidden;left: 0px; top: 8px; bottom: 0px; width: 465px;padding:5px;margin-bottom:5px;background-image:url('http://gbr.googlecode.com/files/logbox2_15.png');background-position:center top;display:block;"});makeElement("div",b,{id:"altlogBox",style:"float:left;position: absolute; overflow:scroll; overflow-x: hidden;left: 0px; top: 8px; bottom: 0px; width: 465px;padding:5px;margin-bottom:5px;background-image:url('http://gbr.googlecode.com/files/logbox2_15.png');background-position:center top;display:none;"});
c.innerHTML=RX6_getValue("itemLog","");var b=makeElement("div",a,{id:"statPrimary",style:"display: block;"}),c=makeElement("div",a,{id:"statPassive",style:"display: none;"}),d=makeElement("div",a,{id:"btnPrimaryStat","class":"mouseunderline",style:"position: absolute; left: 10px; bottom: 76px; font-weight: 600; cursor: pointer; color: rgb(0, 255, 0);"});d.appendChild(document.createTextNode("primary"));d.addEventListener("click",showPrimaryStats,!1);d=makeElement("div",a,{id:"btnPassiveStat","class":"mouseunderline",
style:"position: absolute; left: 90px; bottom: 76px; font-weight: 600; cursor: pointer; color: rgb(0, 128, 0);"});d.appendChild(document.createTextNode("passive"));d.addEventListener("click",showPassiveStats,!1);makeElement("div",c,{style:"position: absolute; left: 15px; bottom: 65px; font-size: 10px; font-weight: 100;color: #666666;"}).appendChild(document.createTextNode("Exp Gained:"));makeElement("div",c,{id:"passivetotalExp",style:"position: absolute; right: 325px; bottom: 65px; font-size: 10px; font-weight: 600;color: #52E259;"}).appendChild(document.createTextNode(makeCommaValue(RX6_getValue("passivetotalFightExpInt",
0)+RX6_getValue("passivetotalJobExpInt",0))));makeElement("div",c,{style:"position: absolute; right: 262px; bottom: 65px; font-size: 10px; font-weight: 100;color: #666666;"}).appendChild(document.createTextNode("Fights:"));makeElement("div",c,{id:"passivetotalFightExp",style:"position: absolute; right: 225px; bottom: 65px; font-size: 10px; font-weight: 600;color: #52E259;"}).appendChild(document.createTextNode(makeCommaValue(RX6_getValue("passivetotalFightExpInt",0))));makeElement("div",c,{style:"position: absolute; right: 175px; bottom: 65px; font-size: 10px; font-weight: 100;color: #666666;"}).appendChild(document.createTextNode("Jobs:"));
makeElement("div",c,{id:"passivetotalJobExp",style:"position: absolute; right: 135px; bottom: 65px; font-size: 10px; font-weight: 600;color: #52E259;"}).appendChild(document.createTextNode(makeCommaValue(RX6_getValue("passivetotalJobExpInt",0))));makeElement("hr",c,{style:"position: absolute; left: 0; bottom: 57px; height: 1px; border: 0px; width: 475px; margin-left:10px; color: #666666; background-color: #666666"});makeElement("div",c,{style:"position: absolute; left: 15px; bottom: 48px; font-weight: 100;color: #666666;"}).appendChild(document.createTextNode("Attacks:"));
makeElement("div",c,{id:"passivefightCount",style:"position: absolute; right: 360px; bottom: 48px; font-weight: 600;color: #BCD2EA;"}).appendChild(document.createTextNode(makeCommaValue(GM_getIntValue("passivefightWinCountInt",0)+GM_getIntValue("passivefightLossCountInt",0))));makeElement("div",c,{style:"position: absolute; left: 15px; bottom: 33px; font-weight: 100;color: #666666;"}).appendChild(document.createTextNode("Won:"));makeElement("div",c,{id:"passivefightWinCount",style:"position: absolute; right: 360px; bottom: 33px; font-weight: 600;color: #52E259;"}).appendChild(document.createTextNode(makeCommaValue(RX6_getValue("passivefightWinCountInt",
0))));d=(100*(RX6_getValue("passivefightWinCountInt",0)/(RX6_getValue("passivefightWinCountInt",0)+RX6_getValue("passivefightLossCountInt",0)))).toFixed(1);makeElement("div",c,{id:"passivefightWinPct",style:"position: absolute; right: 325px; bottom: 33px; font-size: 10px; font-weight: 100;color: #52E259;"}).appendChild(document.createTextNode(isNaN(d)?"0.0%":d+"%"));makeElement("div",c,{style:"position: absolute; left: 15px; bottom: 18px; font-weight: 100;color: #666666;"}).appendChild(document.createTextNode("Lost:"));
makeElement("div",c,{id:"passivefightLossCount",style:"position: absolute; right: 360px; bottom: 18px; font-weight: 600;color: #EC2D2D;"}).appendChild(document.createTextNode(makeCommaValue(RX6_getValue("passivefightLossCountInt",0))));d=(100*(RX6_getValue("passivefightLossCountInt",0)/(RX6_getValue("passivefightWinCountInt",0)+RX6_getValue("passivefightLossCountInt",0)))).toFixed(1);makeElement("div",c,{id:"passivefightLossPct",style:"position: absolute; right: 325px; bottom: 18px; font-size: 10px; font-weight: 100;color: #EC2D2D;"}).appendChild(document.createTextNode(isNaN(d)?
"0.0%":d+"%"));makeElement("div",c,{style:"position: absolute; left: 190px; bottom: 48px; font-weight: 100;color: #666666;"}).appendChild(document.createTextNode("HitListed:"));makeElement("div",c,{id:"whackedCount",style:"position: absolute; right: 220px; bottom: 48px; font-weight: 600;color: #BCD2EA;"}).appendChild(document.createTextNode(RX6_getValue("whackedCount",0)));makeElement("div",c,{style:"position: absolute; left: 190px; bottom: 33px; font-weight: 100;color: #666666;"}).appendChild(document.createTextNode("Snuffed:"));
makeElement("div",c,{id:"snuffCount",style:"position: absolute; right: 220px; bottom: 33px; font-weight: 600;color: #52E259;"}).appendChild(document.createTextNode(RX6_getValue("snuffCount",0)));makeElement("div",c,{style:"position: absolute; right: 15px; bottom: 48px; font-weight: 100;color: #666666;"}).appendChild(document.createTextNode("Total $ Won/Lost"));var e=d=0,f="|",g="|";i=0;for(iLength=cityStats.length;i<iLength;i++)d+=GM_getIntValue(cityStats[i][passivecashWins],0),e+=GM_getIntValue(cityStats[i][passivecashLosses],
0),f+=" "+cities[i][CITY_CASH_SYMBOL]+makeCommaValue(RX6_getValue(cityStats[i][passivecashWins],0))+" |",g+=""+cities[i][CITY_CASH_SYMBOL]+makeCommaValue(RX6_getValue(cityStats[i][passivecashLosses],0))+" |";makeElement("div",c,{id:"totalPassiveWinDollars",title:f,style:"position: absolute; right: 15px; bottom: 33px; font-weight: 600;color: #52E259;"}).appendChild(document.createTextNode(getDollarsUnit(d)));makeElement("div",c,{id:"totalPassiveLossDollars",title:g,style:"position: absolute; right: 15px; bottom: 18px; font-weight: 600;color: #EC2D2D;"}).appendChild(document.createTextNode(getDollarsUnit(e)));
makeElement("div",b,{style:"position: absolute; left: 15px; bottom: 43px; font-weight: 100;color: #666666;"}).appendChild(document.createTextNode("Fights:"));makeElement("div",b,{id:"fightCount",style:"position: absolute; right: 380px; bottom: 43px; font-weight: 600;color: #BCD2EA;"}).appendChild(document.createTextNode(makeCommaValue(GM_getIntValue("fightWinCountInt",0)+GM_getIntValue("fightLossCountInt",0))));makeElement("div",b,{style:"position: absolute; left: 15px; bottom: 28px; font-weight: 100;color: #666666;"}).appendChild(document.createTextNode("Won:"));
makeElement("div",b,{id:"fightWinCount",style:"position: absolute; right: 380px; bottom: 28px; font-weight: 600;color: #52E259;"}).appendChild(document.createTextNode(makeCommaValue(RX6_getValue("fightWinCountInt",0))));c=(100*(RX6_getValue("fightWinCountInt",0)/(RX6_getValue("fightWinCountInt",0)+RX6_getValue("fightLossCountInt",0)))).toFixed(1);makeElement("div",b,{id:"fightWinPct",style:"position: absolute; right: 345px; bottom: 28px; font-size: 10px; font-weight: 100;color: #52E259;"}).appendChild(document.createTextNode(isNaN(c)?
"0.0%":c+"%"));makeElement("div",b,{style:"position: absolute; left: 15px; bottom: 13px; font-weight: 100;color: #666666;"}).appendChild(document.createTextNode("Lost:"));makeElement("div",b,{id:"fightLossCount",style:"position: absolute; right: 380px; bottom: 13px; font-weight: 600;color: #EC2D2D;"}).appendChild(document.createTextNode(makeCommaValue(RX6_getValue("fightLossCountInt",0))));c=(100*(RX6_getValue("fightLossCountInt",0)/(RX6_getValue("fightWinCountInt",0)+RX6_getValue("fightLossCountInt",
0)))).toFixed(1);makeElement("div",b,{id:"fightLossPct",style:"position: absolute; right: 345px; bottom: 13px; font-size: 10px; font-weight: 100;color: #EC2D2D;"}).appendChild(document.createTextNode(isNaN(c)?"0.0%":c+"%"));makeElement("div",b,{style:"position: absolute; left: 170px; bottom: 43px; font-weight: 100;color: #666666;"}).appendChild(document.createTextNode("Hits:"));makeElement("div",b,{id:"hitmanCount",style:"position: absolute; right: 260px; bottom: 43px; font-weight: 600;color: #BCD2EA;"}).appendChild(document.createTextNode(makeCommaValue(GM_getIntValue("hitmanWinCountInt",
0)+GM_getIntValue("hitmanLossCountInt",0))));makeElement("div",b,{style:"position: absolute; left: 170px; bottom: 28px; font-weight: 100;color: #666666;"}).appendChild(document.createTextNode("Succ:"));makeElement("div",b,{id:"hitmanWinCount",style:"position: absolute; right: 260px; bottom: 28px; font-weight: 600;color: #52E259;"}).appendChild(document.createTextNode(makeCommaValue(RX6_getValue("hitmanWinCountInt",0))));c=(100*(RX6_getValue("hitmanWinCountInt",0)/(RX6_getValue("hitmanWinCountInt",
0)+RX6_getValue("hitmanLossCountInt",0)))).toFixed(1);makeElement("div",b,{id:"hitmanWinPct",style:"position: absolute; right: 225px; bottom: 28px; font-size: 10px; font-weight: 100;color: #52E259;"}).appendChild(document.createTextNode(isNaN(c)?"0.0%":c+"%"));makeElement("div",b,{style:"position: absolute; left: 170px; bottom: 13px; font-weight: 100;color: #666666;"}).appendChild(document.createTextNode("Fail:"));makeElement("div",b,{id:"hitmanLossCount",style:"position: absolute; right: 260px; bottom: 13px; font-weight: 600;color: #EC2D2D;"}).appendChild(document.createTextNode(makeCommaValue(RX6_getValue("hitmanLossCountInt",
0))));c=(100*(RX6_getValue("hitmanLossCountInt",0)/(RX6_getValue("hitmanWinCountInt",1)+RX6_getValue("hitmanLossCountInt",0)))).toFixed(1);makeElement("div",b,{id:"hitmanLossPct",style:"position: absolute; right: 225px; bottom: 13px; font-size: 10px; font-weight: 100;color: #EC2D2D;"}).appendChild(document.createTextNode(isNaN(c)?"0.0%":c+"%"));makeElement("div",b,{style:"position: absolute; left: 280px; bottom: 43px; font-weight: 100;color: #666666;"}).appendChild(document.createTextNode("Robs:"));
makeElement("div",b,{id:"robCount",style:"position: absolute; right: 135px; bottom: 43px; font-weight: 600;color: #BCD2EA;"}).appendChild(document.createTextNode(makeCommaValue(GM_getIntValue("robSuccessCountInt",0)+GM_getIntValue("robFailedCountInt",0))));makeElement("div",b,{style:"position: absolute; left: 280px; bottom: 28px; font-weight: 100;color: #666666;"}).appendChild(document.createTextNode("Succ:"));makeElement("div",b,{id:"robWinCount",style:"position: absolute; right: 135px; bottom: 28px; font-weight: 600;color: #52E259;"}).appendChild(document.createTextNode(makeCommaValue(RX6_getValue("robSuccessCountInt",
0))));c=(100*(RX6_getValue("robSuccessCountInt",0)/(RX6_getValue("robSuccessCountInt",0)+RX6_getValue("robFailedCountInt",0)))).toFixed(1);makeElement("div",b,{id:"robWinPct",style:"position: absolute; right: 100px; bottom: 28px; font-size: 10px; font-weight: 100;color: #52E259;"}).appendChild(document.createTextNode(isNaN(c)?"0.0%":c+"%"));makeElement("div",b,{style:"position: absolute; left: 280px; bottom: 13px; font-weight: 100;color: #666666;"}).appendChild(document.createTextNode("Fail:"));makeElement("div",
b,{id:"robLossCount",style:"position: absolute; right: 135px; bottom: 13px; font-weight: 600;color: #EC2D2D;"}).appendChild(document.createTextNode(makeCommaValue(RX6_getValue("robFailedCountInt",0))));c=(100*(RX6_getValue("robFailedCountInt",0)/(RX6_getValue("robSuccessCountInt",1)+RX6_getValue("robFailedCountInt",0)))).toFixed(1);makeElement("div",b,{id:"robLossPct",style:"position: absolute; right: 100px; bottom: 13px; font-size: 10px; font-weight: 100;color: #EC2D2D;"}).appendChild(document.createTextNode(isNaN(c)?
"0.0%":c+"%"));makeElement("div",b,{style:"position: absolute; right: 15px; bottom: 43px; font-weight: 100;color: #666666;"}).appendChild(document.createTextNode("Total $ Won/Lost"));d=c="|";i=0;for(iLength=cityStats.length;i<iLength;i++)c+=" "+cities[i][CITY_CASH_SYMBOL]+makeCommaValue(RX6_getValue(cityStats[i][cashWins],0))+" |",d+=""+cities[i][CITY_CASH_SYMBOL]+makeCommaValue(RX6_getValue(cityStats[i][cashLosses],0))+" |";makeElement("div",b,{id:"totalWinDollars",title:c,style:"position: absolute; right: 15px; bottom: 28px; font-weight: 600;color: #52E259;"}).appendChild(document.createTextNode(getDollarsUnit(GM_getIntValue("totalWinDollarsInt",
0))));makeElement("div",b,{id:"totalLossDollars",title:d,style:"position: absolute; right: 15px; bottom: 13px; font-weight: 600;color: #EC2D2D;"}).appendChild(document.createTextNode(getDollarsUnit(GM_getIntValue("totalLossDollarsInt",0))));makeElement("div",b,{style:"position: absolute; left: 15px; bottom: 65px; font-size: 10px; font-weight: 100;color: #666666;"}).appendChild(document.createTextNode("Exp Gained:"));makeElement("div",b,{id:"totalExp",style:"position: absolute; right: 369px; bottom: 65px; font-size: 10px; font-weight: 600;color: #52E259;"}).appendChild(document.createTextNode(makeCommaValue(RX6_getValue("totalExpInt",
0))));makeElement("hr",b,{style:"position: absolute; left: 0; bottom: 57px; height: 1px; border: 0px; width: 475px; margin-left:10px; color: #666666; background-color: #666666"});makeElement("div",b,{style:"position: absolute; right: 287px; bottom: 65px; font-size: 10px; font-weight: 100;color: #666666;"}).appendChild(document.createTextNode("Gain Rate:"));c=getStaminaGainRate();makeElement("div",b,{id:"expRate",style:"position: absolute; right: 260px; bottom: 65px; font-size: 10px; font-weight: 600;color: #04B4AE;"}).appendChild(document.createTextNode(c.toFixed(2)));
makeElement("div",b,{style:"position: absolute; right: 195px; bottom: 65px; font-size: 10px; font-weight: 100;color: #666666;"}).appendChild(document.createTextNode("Nxt Lvl In:"));makeElement("div",b,{id:"expToNext",style:"position: absolute; right: 161px; bottom: 65px; font-size: 10px; font-weight: 600;color: #04B4AE;"}).appendChild(document.createTextNode(makeCommaValue(ptsToNextLevel)));makeElement("div",b,{style:"position: absolute; right: 56px; bottom: 65px; font-size: 10px; font-weight: 100;color: #666666;"}).appendChild(document.createTextNode("Stam Req'd to Lvl:"));
makeElement("div",b,{id:"stamToNext",style:"position: absolute; right: 22px; bottom: 65px; font-size: 10px; font-weight: 600;color: #04B4AE;"}).appendChild(document.createTextNode(c?(ptsToNextLevel/c).toFixed(0):"n/a"))}eltRow=makeElement("ul",a,{style:"height:15px;position: absolute; overflow: hidden; right: 0px; bottom: 0px;margin:0px;padding:0px;"});eltCol=makeElement("li",eltRow,{style:"width:18px;height:15px;"});elt=makeElement("img",eltCol,{src:SCRIPT.PSMWAP_imagePath+"r6_c1.png",style:"width:18px;height:15px;"});
eltCol=makeElement("li",eltRow,{style:"width:460px;height:15px;"});elt=makeElement("img",eltCol,{src:SCRIPT.PSMWAP_imagePath+"r6_c2.png",style:"width:460px;height:15px;"});eltCol=makeElement("li",eltRow,{style:"width:20px;height:15px;"});elt=makeElement("img",eltCol,{src:SCRIPT.PSMWAP_imagePath+"r6_c16.png",style:"width:20px;height:15px;"})}}function getDollarsUnit(a){for(var b=0;1E3<a;)a/=1E3,b++;return" K M G T P".split(" ")[b]+"$"+a.toFixed(3)}
function createGeneralTab(){var a,b,c,d,e,f,g,h;RX6_getValue("fnirInyhrSum",returnValue())==parseXMLResponse()&&(g=!0);var l=makeElement("div",null,{id:"generalTab","class":"tabcontent"}),k=makeElement("div",l,{"class":"jsRX6Tabs"});d=makeElement("div",k);var p=[["fastMWAPSpeed","General RX6 Speed:","font-size: 10px;color:yellow;padding-top:3px","NOTE: This option does not decide SPEED for Fighting or Robbing",4,"width:46%;float:left","Choose the General Speed for RX6",7,0,0,0,11,0,0,0,0],["idleLocation",
"When idle, fly to: ","font-size: 10px;color:yellow;padding-top:3px","NOTE: When BACKGROUND Fighting/Robbing, Idle in the same CITY",4,"width:46%;float:right","If RX6 has nothing to do, choose a city to IDLE in",0,8,0,0,11,0,0,0,0],["burnOption","Prioritise Energy / Stamina: ","font-size: 10px;color:yellow;padding-top:3px","NOTE: When BACKGROUND Fighting/Robbing, set to DISABLED",4,"width:46%;float:left","What would you like to spend first?",0,0,9,"BURN_ALL",11,0,0,0,0],["autoPause","Enable auto-pause",
"Check this to enable auto-pause before or after level up.",0,4,"width:46%;float:right;padding-bottom:13px","Would you like to pause RX6 before or after Levelling?",0,0,0,0,0,11,0,0,0],["autoPauseBefore"," Before level up  ","Check this to enable auto-pause before after level up.",0,0,0,0,0,0,0,0,0,0,13,0,0],["autoPauseAfter"," After level up  ","Check this to enable auto-pause after after level up.",0,0,0,0,0,0,0,0,0,0,13,0,0],["autoPauseExp"," Experience left to pause at: ","Experience left to pause at",
0,0,0,0,0,0,0,0,0,0,0,14,0],["autoProcessPopups"," Try to process all popups when RX6 MWAP is running","Try to process all popups when RX6 MWAP is running",0,4,"width:46%;float:right;padding-bottom:72px","Process Popups",0,0,0,0,0,0,0,0,15]];for(a=0;a<p.length;a++){h=p[a];h[4]&&(f=makeElement("div",d,{"class":"jqRX6buttonId1",style:h[5]}),makeElement("div",f,{"class":"jsRX6BoxHeading"}).appendChild(document.createTextNode(h[6])));if(h[11]){makeElement("font",f,{style:"padding-right:2px"}).appendChild(document.createTextNode(h[1]));
var n=makeElement("select",f,{id:h[0],"class":"RX6dropdown2",style:"width:70px",type:"text"})}if(h[7]){iLength=mwapSpeedModes.length;g||(iLength-=2);for(b=0;b<iLength;++b)e=document.createElement("option"),e.value=b,e.appendChild(document.createTextNode(mwapSpeedModes[b])),n.appendChild(e)}if(h[8]){b=0;for(iLength=cities.length;b<iLength;++b)e=document.createElement("option"),e.value=b,b<cities.length&&cities[b][CITY_CLOSED]&&(e.style.display="none"),e.appendChild(document.createTextNode(cities[b][CITY_NAME])),
GM_getIntValue(h[0],NY)==b&&(n.selected=!0),n.appendChild(e)}if(h[9]){b=0;for(iLength=burnModes.length;b<iLength;++b)e=document.createElement("option"),e.value=b,e.appendChild(document.createTextNode(burnModes[b])),n.appendChild(e)}h[11]&&(makeElement("br",f,{"class":"hide"}),makeElement("font",f,{style:h[2]}).appendChild(document.createTextNode(h[3])),n.selectedIndex=RX6_getValue(h[0],h[10]));h[12]&&(b=makeElement("input",f,{type:"checkbox",id:h[0],value:"checked"},h[0]),makeElement("label",f,{"for":h[0],
"class":"jqSpacer"}).appendChild(document.createTextNode(h[1])),b.addEventListener("click",clickAutoPause,!1));h[13]&&(makeElement("input",f,{type:"radio",name:"r3",id:h[0],value:"checked"},h[0]),makeElement("label",f,{"for":h[0]}).appendChild(document.createTextNode(h[1])));h[14]&&(makeElement("br",f,{"class":"hide"}),f.appendChild(document.createTextNode(h[1])),makeElement("input",f,{"class":"jqDrop70",type:"text",value:RX6_getValue(h[0],"50"),id:h[0],size:"2"}));h[15]&&(makeElement("input",f,{type:"checkbox",
id:h[0],value:"checked"},h[0]),makeElement("label",f,{"for":c}).appendChild(document.createTextNode(h[1])))}RX6_getValue("fnirInyhrSum",returnValue())==parseXMLResponse()&&(g=!0);d=makeElement("div",k);f=makeElement("div",d,{"class":"jqRX6buttonId1",style:"width:46%;float:left;"});h="autoPoker, Slots Collection, Free Spins & Allocation Popup";g?makeElement("div",f,{"class":"jsRX6BoxHeading"}).appendChild(document.createTextNode(h)):(h+=" - RX6 PRO FEATURE Only",makeElement("div",f,{"class":"jsRX6BoxHeading",
style:"opacity: 0.5 !important"}).appendChild(document.createTextNode(h)));c=[["AutoSlotMachine","Enable Auto Slot Machine Collection","Auto Slot Machine Collection"],["autoSlot3FreeSpins","Enable Free 3 Slot Spins Daily Collection","Free 3 Slot Spins Daily Collection"],["autoCheckReallocation","Enable Reallocation Check (Popup)","Reallocation Check (Popup)"],["autoPoker","Enable autoPoker (background)","Enable autoPoker (background)"]];for(b=0;b<c.length;b++)h=c[b],a=makeElement("input",f,{type:"checkbox",
id:h[0],value:"checked"},h[0]),makeElement("label",f,{"for":h[0],title:h[1],"class":"jqSpacer"}).appendChild(document.createTextNode(h[2])),makeElement("br",f,{"class":"hide"}),g||(a.checked=!1,a.enabled=!0);f=makeElement("div",d,{"class":"jqRX6buttonId1"});h="Force Energy and Stamina Spending";g?makeElement("div",f,{"class":"jsRX6BoxHeading"}).appendChild(document.createTextNode(h)):(h+=" - RX6 PRO FEATURE Only",makeElement("div",f,{"class":"jsRX6BoxHeading",style:"opacity: 0.5 !important"}).appendChild(document.createTextNode(h)));
c="forceLevelSpending";b=" Force MWAP RX6 to spend all energy and stamina first, when close to level (ignoring other MWAP features)";a=makeElement("input",f,{type:"checkbox",id:c,value:"checked"},c);makeElement("label",f,{"for":c}).appendChild(document.createTextNode(b));g||(a.checked=!1,a.enabled=!0);makeElement("br",f,{"class":"hide"});c="StamEnergyMode";b=" Force RX6 to only Spend Stamina and/or Energy (ignoring other MWAP features - great for battles and wars!)";a=makeElement("input",f,{type:"checkbox",
id:c,value:"checked"},c);makeElement("label",f,{"for":c}).appendChild(document.createTextNode(b));g||(a.checked=!1,a.disabled=!0);f=makeElement("div",d,{"class":"jqRX6buttonId1"});h="Enable LV Tournamanents";makeElement("div",f,{"class":"jsRX6BoxHeading"}).appendChild(document.createTextNode(h));makeElement("label",f,{"for":c,title:b}).appendChild(document.createTextNode("autoPerform LV Tournaments: "));d=makeElement("select",f,{id:"autoTournamentClass",title:"Choose the weight class"});b=0;for(iLength=
tournamentClasses.length;b<iLength;++b)e=document.createElement("option"),e.value=b,e.appendChild(document.createTextNode(tournamentClasses[b][1]+" (min mafia: "+tournamentClasses[b][2]+")")),d.appendChild(e);d.selectedIndex=RX6_getValue("autoTournamentClass",0);return l}
function createDisplayTab(){var a,b,c,d,e,f=makeElement("div",null,{id:"displayTab","class":"tabcontent"});b=makeElement("div",f,{"class":"jsRX6Tabs"});c=makeElement("div",b);e=makeElement("div",c,{"class":"jqRX6buttonId1",style:"float:left;width:46%"});makeElement("div",e,{"class":"jsRX6BoxHeading"}).appendChild(document.createTextNode("Choose Logging and Filtering Options"));b="autoLog";a="Check this to enable logging.";makeElement("input",e,{type:"checkbox",id:b,value:"checked"},b);makeElement("label",
e,{"for":b,title:a,"class":"jqSpacer"}).appendChild(document.createTextNode("Enable logging:"));b="autoLogLength";makeElement("input",e,{type:"text",id:b,value:RX6_getValue(b,"300"),size:"2",style:"text-align: left"});e.appendChild(document.createTextNode(" max # of messages in log"));makeElement("br",e,{"class":"hide"});makeElement("br",e,{"class":"hide"});b="filterLog";makeElement("input",e,{type:"checkbox",title:"Check this to enable log filtering",id:b,value:"checked"},b);makeElement("label",
e,{"for":b,"class":"jqSpacer"}).appendChild(document.createTextNode("Enable log filtering:"));b="filterOpt";var g=makeElement("select",e,{id:b,"class":"RX6dropdown2"}),h=["Accept patterns","Reject patterns"];a=0;for(iLength=h.length;a<iLength;++a)d=document.createElement("option"),d.value=a,d.appendChild(document.createTextNode(h[a])),g.appendChild(d);g.selectedIndex=RX6_getValue(b,0);makeElement("br",e,{"class":"hide"});b="filterPatterns";var l=makeElement("textarea",e,{style:"position: static; margin-left:128px;width: 15em; height: 7em;",
id:b,title:"Enter each pattern on a separate line."});l.appendChild(document.createTextNode(""));makeElement("br",e);makeElement("font",e,{style:"font-size: 10px;"}).appendChild(document.createTextNode("Enter each name pattern on a separate line."));a=function(){var a=0==g.selectedIndex?defaultPassPatterns.join("\n"):defaultFailPatterns.join("\n");l.firstChild.nodeValue=RX6_getValue(0==g.selectedIndex?"filterPass":"filterFail",a)};a();g.addEventListener("change",a,!1);d=[["leftAlign","Align game to the left",
"Align game to the left ",1,"float:right;width:46%","Format Options for Browser",1],["mastheadOnTop","Enable to elevate RX6 MWAP-Header (pause/resume/settings etc) so that it's always on top","Elevate RX6 MWAP-Header ",0,0,0,1],["fbwindowtitle","Set window title to name on Facebook account","Set window title to name on Facebook account ",0,0,0,0],["showPulse","Hide iced targets on the fight list page"," Hide iced targets on the fight list page",1,"padding-bottom:14px;float:right;width:46%","Choose to show Iced Targets or their Level",
1],["showLevel","Show player level on the hit list page","Show player level on the hit list page",0,0,0,0],["hideAll","Hide All MW Icons","Hide All MW Icons ",1,"padding-bottom:16px;float:left;width:46%","Choose to hide Zynga Game Elements",1],["hideZyngaBanner","Hide Z Promo Banner ","Hide Z Promo Banner ",0,0,0,1],["hideClanChat","Hide Clan Chat","Clan Chat",0,0,0,0],["noStats","Disable MWAP Stats","Disable MWAP Stats",1,"padding-bottom:37px;float:right;width:46%","Disable RX6 Stats (Logging Display)",
1],["ICELogReverse","Reverse MDK ICE Log","Reverse ICE Log",0,0,"Reverse ICE Log SWITCH (MDK Logging Display)",0]];for(a=0;a<d.length;a++)h=d[a],h[3]&&(e=makeElement("div",c,{"class":"jqRX6buttonId1",style:h[4]}),makeElement("div",e,{"class":"jsRX6BoxHeading"}).appendChild(document.createTextNode(h[5]))),makeElement("input",e,{type:"checkbox",id:h[0],value:"checked"},h[0]),makeElement("label",e,{"for":b,title:h[1],"class":"jqSpacer"}).appendChild(document.createTextNode(h[2])),h[6]&&makeElement("br",
e,{"class":"hide"});e=makeElement("div",c,{"class":"jqRX6buttonId1"});makeElement("div",e,{"class":"jsRX6BoxHeading",style:"width:47%"}).appendChild(document.createTextNode("Choose to play on mwap.me or facebook"));RX6_getValue("fnirInyhrSum",returnValue())!=parseXMLResponse()?(b="playMWAPLite",a="RX6 MWAP LITE Page Play",makeElement("input",e,{type:"checkbox",id:b,value:"checked"},b),makeElement("label",e,{"for":b,title:a,"class":"jqSpacer"}).appendChild(document.createTextNode("Play on Unframe Pribadi ")),
b="playMWAPLiteRX2",a="RX6 MWAP LITE (2) Link, this resolves problems for clicking in-game",makeElement("input",e,{type:"checkbox",id:b,value:"checked"},b),makeElement("label",e,{"for":b,title:a,"class":"jqSpacer"}).appendChild(document.createTextNode("Use RX6 LITE 2nd Link")),playMWAPRX2=playMWAP=0):(b="playMWAP",a="RX6 MWAP Pro Page Play",makeElement("input",e,{type:"checkbox",id:b,value:"checked"},b),makeElement("label",e,{"for":b,title:a,"class":"jqSpacer"}).appendChild(document.createTextNode("Play on mwap.me.uk (PRO) ")),
b="playMWAPRX2",a="RX6 MWAP Pro (2) Link, this resolves problems for clicking in-game",makeElement("input",e,{type:"checkbox",id:b,value:"checked"},b),makeElement("label",e,{"for":b,title:a,"class":"jqSpacer"}).appendChild(document.createTextNode("Use RX6 PRO 2nd Link ")),playMWAPLiteRX2=playMWAPLite=0);makeElement("br",e,{"class":"hide"});makeElement("font",e,{style:"width:760px;font:size:10px;color:yellow"}).appendChild(document.createTextNode("RX6 2nd Link - use if you have probs clicking in-game such as Daily Take. Playing on mwap.me.uk is faster than facebook,"));
makeElement("p",e,{"class":"hide"});makeElement("font",e,{style:"width:760px;font:size:10px;color:yellow"}).appendChild(document.createTextNode("but if you do have any problems, unclick both and play on FACEBOOK."));return f}
function createMafiaTab(){var a,b,c,d,e,f,g,h=makeElement("div",null,{id:"mafiaTab","class":"tabcontent"});RX6_getValue("fnirInyhrSum",returnValue())==parseXMLResponse()&&(g=!0);var l=makeElement("div",h,{"class":"jsRX6Tabs"});d=makeElement("div",l);var k=[["autoAskJobHelp","Check if you want to ask for help automatically with jobs.","Ask for job help at ",3,0,"Would you like help with jobs?",6,0,0],["autoAskJobHelpMinExp","Enter the minimum experience to ask for job help, or 0 for no minimum."," minimum experience",
0,0,0,0,7,8],["selectBrazilTier","Ask for Help on Brazil Jobs - Be carefull to only choose available Jobs / Tiers !","Brazil:",0,"margin-left:24px;margin-right:31px",0,0,0,0,9,void 0,void 0,BRAZIL,"no Help in Brazil",14,0],["selectChicagoTier","Ask for Help on Chicago Jobs - Be carefull to only choose available Jobs / Tiers !","Chicago:",0,"margin-left:12px;margin-right:17px",0,0,0,0,9,void 0,void 0,CHICAGO,"no Help in Chicago",14,0],["selectLondonTier","Ask for Help on London Jobs - Be carefull to only choose available Jobs / Tiers !",
"London:",0,"margin-left:12px;margin-right:29px",0,0,0,8,9,void 0,void 0,LONDON,"no Help in London",14,0],["selectVegasTier","Ask for Help on Vegas Jobs - Be carefull to only choose available Jobs / Tiers !","Vegas:",0,"margin-left:22px;margin-right:21px !important",0,0,0,0,9,void 0,void 0,0,"no Help in Vegas",0,15],["autoAskCityCrew","Automatically ask to join City Crews","Ask to Join City Crews ",3,"width:46%;float:left","Join City Crews",6,0,0,0,0,0,0,0,0,0,16],["logPlayerUpdates","Process and Log Player Updates",
"Auto Process Player Updates ",3,"width:46%;float:right","Process All Player Updates",6],["autoGlobalPublishing","Automatically click Publish on every Post Popup.","Global Publishing ",3,"width:46%;float:left;padding-bottom:31px","Enable publishing to FB Wall",6,0,8],["autoIcePublish","Automatically post iced opponent bonus.","Ice bonus, every",0,0,0,6],["autoIcePublishFrequency","Enter the publishing Frequency"," th time",0,0,0,0,7,8],["autoShareWishlist","Check if you want to share wishlist.","Wishlist every ",
0,0,0,6],["autoShareWishlistTime","Enter the number of hours to wait before sharing wishlist again. Has to be at least 1 hour, and can be decimal (e.g. 1.5)."," hour(s)",0,"margin-left:10px",0,0,7],["autoAcceptMsgGifts","Check to Auto Accept Message Centre Gifts","Auto Accept Gifts",3,"width:46%;float:right","Message Center",6,0,8],["autoAcceptMsgNoLimit","Check to Ignore Daily Item Limit (20)","Ignore the Daily Item Limit (20)",0,0,0,6,0,8],["autoAcceptMsgSecretDropNoLimit","Check to Ignore Daily Secret Drop Limit (3)",
"Ignore the Daily Secret Drop Limit (3)",0,0,0,6,0,8],["autoAcceptMsgBoosts","Check to Auto Accept Message Center Boosts","Auto Accept Boosts",0,0,0,6,0,8],["autoAcceptMsgCrew","Check to auto Skip , Accept or Ignore Message Crew Requests","Crew Requests",0,0,0,7,0,8],["autoAcceptMsgEnergy","Check to auto Skip , Accept or Ignore Energy Packs","Energy Packs",0,0,0,7,0,8],["autosendMsgEnergyPack","Send Energy Packs from Message Center","Auto Send Energy Packs",0,0,0,6,0,8],["autoAcceptMsgMafia","Check to auto Skip , Accept or Ignore Mafia Invitations ",
"Mafia Invitations ",0,0,0,7]];c=0;b=1;var p="";g&&(p="");for(e=0;e<k.length;e++){var n=k[e];n[3]&&(f=makeElement("div",d,{"class":"jqRX6buttonId1",style:n[4]}),makeElement("div",f,{"class":"jsRX6BoxHeading"}).appendChild(document.createTextNode(n[5])));6==n[6]&&(a=makeElement("input",f,{type:"checkbox",id:n[c],value:"checked"},n[c]),makeElement("label",f,{"for":n[c],title:n[b],"class":"jqSpacer"}).appendChild(document.createTextNode(n[2]+p)),n[16]&&(g||(a.checked=!1,a.disabled=!0)));if(7==n[6]){for(var r=
GM_getIntValue(n[c],0),q=0,t=radioOptions.length;q<t;q++)a=makeElement("input",f,{type:"radio",name:n[c],value:q}),f.appendChild(document.createTextNode(radioOptions[q])),r==q&&(a.checked="checked"),n[16]&&(g||(a.checked=!1,a.disabled=!0));makeElement("label",f,{"for":n[c],title:n[b],"class":"jqSpacer"}).appendChild(document.createTextNode(n[2]+p))}n[7]&&(makeElement("input",f,{type:"text",value:RX6_getValue(n[c],"0"),title:n[b],id:n[c],size:"2",style:n[4]}),f.appendChild(document.createTextNode(n[2])));
n[8]&&makeElement("br",f,{"class":"hide"});if(n[9]){a=makeElement("label",f,{"for":n[c],title:n[b]});a.appendChild(document.createTextNode(n[2]));n[10]=makeElement("select",f,{id:n[c],title:n[b],"class":"RX6dropdown2",style:n[4]});n[11]=document.createElement("option");n[11].text=n[13];n[11].value="0";"0"==RX6_getValue(n[c])&&(n[11].selected=!0);n[10].appendChild(n[11]);if(n[14]){RX6_getValue(n[c],0)-1>missionTabs[n[12]].length&&RX6_setValue(n[c],0);j=0;for(jLength=missionTabs[n[12]].length;j<jLength;j++)n[11]=
document.createElement("option"),n[11].text=missionTabs[n[12]][j],n[11].value=j+1,RX6_getValue(n[c],0)-1==j&&(n[11].selected=!0),n[10].appendChild(n[11])}if(n[15])for(a=0;a<missions.length;a++)missions[a][MISSION_CITY]==LV&&2==missions[a][MISSION_EOL]&&(n[11]=document.createElement("option"),n[11].text=missions[a][MISSION_NAME],n[11].value=a,RX6_getValue(n[c])==a&&(n[11].selected=!0),n[10].appendChild(n[11]))}}d=makeElement("div",l);f=makeElement("div",d,{"class":"jqRX6buttonId1"});makeElement("div",
f,{"class":"jsRX6BoxHeading",style:"width:48%"}).appendChild(document.createTextNode("Auto War Random Enemies or from a list"));a=makeElement("label",f,{"class":"jqSpacer"});a.appendChild(document.createTextNode("Enable Auto-War:"));var s=makeElement("select",f,{id:"warMode","class":"RX6dropdown2"});e=0;for(iLength=warModeChoices.length;e<iLength;++e)b=document.createElement("option"),b.value=e,b.appendChild(document.createTextNode(warModeChoices[e])),s.appendChild(b);s.selectedIndex=RX6_getValue("warMode",
0);b="Enter opponents Mafia Wars ID";c="autoWarTargetList";var y=makeElement("font",f,{style:"font-size: 10px;"});y.appendChild(document.createTextNode("Enter each target on a separate line. Add the userid part of the p|userid."));makeElement("br",f,{"class":"hide"});var C=makeElement("textarea",f,{style:"width: 12em; height: 6em;margin-left:50px:margin-top:5px",id:c,title:"Enter each Mafia Wars ID on a separate line. This will not work with the Facebook ID."});C.appendChild(document.createTextNode(RX6_getValue("autoWarTargetList",
"")));
e=function(){C.style.display=2==s.selectedIndex?"":"none";y.style.display=2==s.selectedIndex?"":"none"};e();s.addEventListener("change",e,!1);return h}
function createFamilyTab(){function a(a){f=makeElement("div",a);
g=makeElement("div",f,{"class":"jqRX6buttonId1"})}function b(a){h||(a.checked=!1,a.enabled=!0)}var c,d,e,f,g,h,l=makeElement("div",null,{id:"familyTab","class":"tabcontent"});RX6_getValue("fnirInyhrSum",returnValue())==parseXMLResponse()&&(h=!0);var k=makeElement("div",l,{"class":"jsRX6Tabs"});
f=makeElement("div",k);
g=makeElement("div",f,{"class":"jqRX6buttonId1",style:"width:46%;float:left"});makeElement("div",g,{"class":"jsRX6BoxHeading"}).appendChild(document.createTextNode("Operations Settings"));
var p=[["autoStartMyOps","Enable Personal Operations","Enable Personal Operations","position: absolute; text-align: left; top: 20px; left: 10px;"],["autoStartFamOps","Participate In Family Operations","Participate In Family Operations","position: absolute; text-align: left; top: 20px; left: 200px;"]];for(d=0;d<p.length;d++)e=p[d],1==d&&makeElement("br",g,{"class":"unhide"}),makeElement("div",g,{style:e[3]}),makeElement("input",g,{type:"checkbox",id:e[0],value:"checked"},e[0]),makeElement("label",g,
{"for":e[0],title:e[1],"class":"jqSpacer"}).appendChild(document.createTextNode(e[2]));
g=makeElement("div",f,{"class":"jqRX6buttonId1",style:"width:46%;float:right;padding-bottom:28px"});
d="Family Rewards";h||(d+=" - RX6 PRO FEATURE Only");makeElement("div",g,{"class":"jsRX6BoxHeading"}).appendChild(document.createTextNode(d));
e="AutoFamilyRewards";d="Enable Auto Family Rewards Collection";
c=makeElement("input",g,{type:"checkbox",id:e,value:"checked"},e);makeElement("label",g,{"for":e,title:d,"class":"jqSpacer"}).appendChild(document.createTextNode("Enable Auto Family Rewards Collect"));
b(c);a(k);d="Family Boss Fight Settings";h||(d+=" - RX6 PRO FEATURE Only");makeElement("div",g,{"class":"jsRX6BoxHeading",style:"width:95%"}).appendChild(document.createTextNode(d));p=[["autoFamilyBosses","Enable Family Bosses","Enable Family Bosses",1],["autoFamilyBossFighting","Enable Family Boss Fighting","Enable Family Boss Fighting",1],["autoComboFightingOnly","use Boost Combo's Only","use Boost Combo's Only",1],["sendBossFightBoosts","Send Family Boss Boosts","Send Family Boss Boosts",1],["askBossFightBoosts",
"Ask for Family Boss Boosts","Ask for Family Boss Boosts",1],["AutoBattleFight","Enable AutoBattle Fighting","Enable AutoBattle Fighting",0],["AutoBattleSafehouse","Enable Battle Safehouse Attacking","Enable Battle Safehouse Attacking",0],["AutoBattle","Enable AutoBattle","Enable AutoBattle (Only if Underboss/GF)",0]];for(idx=0;idx<p.length;idx++){if(2==idx){makeElement("br",g,{"class":"unhide"});e=[["bossRole","Boss Role","Boss Role:"],["bossStaminaLimit","Boss Stamina Limit","Boss Stamina Limit:"]];
for(idx=0;idx<e.length;idx++){d=e[idx];makeElement("label",g,{"for":d[0],title:d[1],"class":"jqSpacer"}).appendChild(document.createTextNode(d[2]));var n=makeElement("select",g,{id:d[0],"class":"RX6dropdown2",style:"width:70px"});if(0==idx){iLength=bossRoles.length;for(d=0;d<iLength;++d)c=document.createElement("option"),c.value=d,c.appendChild(document.createTextNode(bossRoles[d].capitalize())),n.appendChild(c);n.selectedIndex=RX6_getValue("bossRole",0)}if(1==idx){iLength=bossStaminaLimits.length;
for(d=0;d<iLength;++d)c=document.createElement("option"),c.value=d,c.appendChild(document.createTextNode(bossStaminaLimits[d])),n.appendChild(c);n.selectedIndex=RX6_getValue("bossStaminaLimit",0)}h||(n.enabled=!0,n.setAttribute("class","RX6dropdown2lite"),n.selectedIndex=bossRoles[0])}e="bossRageLimit";d="Boss Rage Limit (0 - 1000)";makeElement("label",g,{"for":e,title:d}).appendChild(document.createTextNode("Boss Rage Limit:"));c=makeElement("input",g,{style:"text-align: right;",type:"text",value:RX6_getValue(e,
"0"),id:e,size:"6",style:"margin-left:5px;"});b(c);makeElement("br",g,{"class":"unhide"})}5==idx&&(a(k),d="Family Battle Settings",h||(d+=" - RX6 PRO FEATURE Only"),makeElement("div",g,{"class":"jsRX6BoxHeading",style:"width:95%"}).appendChild(document.createTextNode(d)));7==idx&&makeElement("br",g,{"class":"unhide"});e=p[idx];d=makeElement("input",g,{type:"checkbox",id:e[0],value:"checked"},e[0]);makeElement("label",g,{"for":e[0],title:e[1],"class":"jqSpacer"}).appendChild(document.createTextNode(e[2]));
b(d)}e="AutoBattleClanID";d="ClanID";c=makeElement("input",g,{style:"text-align: right;",type:"text",value:RX6_getValue(e,"0"),id:e,size:"6"});makeElement("label",g,{"for":e,title:d,"class":"jqSpacer"}).appendChild(document.createTextNode("Clan / Family ID"));b(c);makeElement("br",g,{"class":"unhide"});c=makeElement("input",g,{type:"text",id:"familyListSingleLink",title:"Enter MW Family Link",style:"text-align: left;width: 250px;margin-left;margin-left:252px;margin-top:3px"});b(c);d="Add Family ID from MW Family Link";
eltA=makeElement("a",g,{id:"familySingleAdd",href:"#",alt:d,title:d,"class":"jqSpacer"});eltA.appendChild(document.createTextNode("Add Family ID"));eltA.addEventListener("click",addSingleFamilyID,!1);a(k);d="FreeGifts";h||(d+=" - RX6 PRO FEATURE Only");makeElement("div",g,{"class":"jsRX6BoxHeading",style:"width:95%"}).appendChild(document.createTextNode(d));d="Enable Auto Free Gifting:";makeElement("label",g,{"for":"autoFreeGift",title:d,"class":"jqSpacer"}).appendChild(document.createTextNode(d));
selectFreeGift=makeElement("select",g,{id:"selectFreeGift",title:d,"class":"RX6dropdown2"});choiceFreeGift=document.createElement("option");choiceFreeGift.text="don't send free gifts";choiceFreeGift.value=0;0==RX6_getValue("selectFreeGift",0)&&(choiceFreeGift.selected=!0);selectFreeGift.appendChild(choiceFreeGift);freeGiftList.sort(function(a,b){return a[3]<b[3]?-1:a[3]>b[3]?1:0});k="";for(d=0;d<freeGiftList.length;d++)freeGiftList[d][1]&&(k!=freeGiftList[d][3]&&(choiceGroup=document.createElement("optgroup"),
choiceGroup.className="ap_optgroup1",choiceGroup.label=freeGiftList[d][3].toUpperCase(),selectFreeGift.appendChild(choiceGroup),k=freeGiftList[d][3]),choiceFreeGift=document.createElement("option"),choiceFreeGift.text=freeGiftList[d][2].capitalize(),choiceFreeGift.value=freeGiftList[d][1],RX6_getValue("selectFreeGift",0)==freeGiftList[d][1]&&(choiceFreeGift.selected=!0),selectFreeGift.appendChild(choiceFreeGift));h||(selectFreeGift.enabled=!0,selectFreeGift.setAttribute("class","RX6dropdown2lite"),
selectFreeGift.selectedIndex=choiceFreeGift.text);
e="autoAskFreeGift";d="Enable Asking for Free Gifts:";makeElement("div",g);makeElement("label",g,{"for":e,title:d,"class":"jqSpacer"}).appendChild(document.createTextNode(d));k=makeElement("select",g,{id:"selectAskFreeGift",title:d,"class":"RX6dropdown2"});choiceAskFreeGift=document.createElement("option");choiceAskFreeGift.text="don't ask for free gifts";choiceAskFreeGift.value=0;0==RX6_getValue("selectAskFreeGift",0)&&(choiceAskFreeGift.selected=
!0);k.appendChild(choiceAskFreeGift);freeGiftList.sort(function(a,b){return a[2]<b[2]?-1:a[2]>b[2]?1:0});for(d=0;d<freeGiftList.length;d++)freeGiftList[d][0]&&(choiceAskFreeGift=document.createElement("option"),choiceAskFreeGift.text=freeGiftList[d][2].capitalize(),choiceAskFreeGift.value=freeGiftList[d][0],RX6_getValue("selectAskFreeGift",0)==freeGiftList[d][0]&&(choiceAskFreeGift.selected=!0),k.appendChild(choiceAskFreeGift));h||(k.enabled=!0,k.setAttribute("class","RX6dropdown2lite"),k.selectedIndex=
choiceAskFreeGift.text);
e="autoDispatch";d="Enable RX6 Gift Dispatcher";k=makeElement("div",g);makeElement("label",k,{"for":e,title:d,"class":"jqSpacer"}).appendChild(document.createTextNode(d+" to: "));k=makeElement("select",g,{id:"dispatchTarget",title:"RX6 Gift Dispatch Targets","class":"RX6dropdown2"});d=0;for(iLength=dispatchTargets.length;d<iLength;d++)p=document.createElement("option"),p.text=dispatchTargets[d][1],p.value=dispatchTargets[d][0],RX6_getValue("dispatchTarget",0)==dispatchTargets[d][0]&&
(p.selected=!0),k.appendChild(p);h||(k.enabled=!0,k.setAttribute("class","RX6dropdown2lite"),k.selectedIndex=k.text);return l}function addSingleFamilyID(){var a,b=document.getElementById("AutoBattleClanID");decodeURIComponent(document.getElementById("familyListSingleLink").value).match(/"id":"(.+)"/)?(a=decodeID(RegExp.$1).digitize(),b.value=a,b.innerHTML=a):alert("Invalid family link.");document.getElementById("familyListSingleLink").value=""}
function createAutostatTab(){function a(a){f=makeElement("div",a);g=makeElement("div",f,{"class":"jqRX6buttonId4"})}var b,c,d,e,f,g,h,l=makeElement("div",null,{id:"autostatTab","class":"tabcontent"}),k=makeElement("div",l,{"class":"jsRX6Tabs"});f=makeElement("div",k);RX6_getValue("fnirInyhrSum",returnValue())==parseXMLResponse()&&(h=!0);a(k);makeElement("div",g,{"class":"jsRX6BoxHeading",style:"width:48%"}).appendChild(document.createTextNode("Enable AutoStat Features"));c="autoStat";b="Check this this to enable auto-statting";
makeElement("input",g,{type:"checkbox",id:c,value:"checked"},c);makeElement("img",g,{src:stripURI(plussignIcon)});makeElement("label",g,{"for":c,title:b}).appendChild(document.createTextNode("Enable auto-stat"));b="Disable AutoStat when status goals are reached";c="autoStatDisable";makeElement("div",g,{style:"position: absolute; text-align: left; left: 200px; "});makeElement("input",g,{type:"checkbox",id:c,title:b,value:"checked"},c);makeElement("label",g,{"for":c,title:b}).appendChild(document.createTextNode(b));
a(k);e=0;for(iLength=autoStatRatios.length;e<iLength;++e){b="Please set ratio of "+autoStatDescrips[e+1]+" stat";c=autoStatRatios[e];makeElement("div",g,{style:"width:50px;float:left;padding-top:5px"}).appendChild(document.createTextNode(autoStatDescrips[e+1]));g.appendChild(document.createTextNode(" = "));makeElement("input",g,{type:"text",style:"width: 40px;margin-top:3px;",value:RX6_getValue(c,0),id:c,size:"1"});g.appendChild(document.createTextNode(" x "));c=autoStatModes[e];b=makeElement("select",
g,{id:c,title:b,"class":"RX6dropdown2",style:"width:75px"});d=0;for(jLength=autoStatDescrips.length;d<jLength;++d)c=document.createElement("option"),c.value=d,c.appendChild(document.createTextNode(autoStatDescrips[d])),b.appendChild(c);b.selectedIndex=RX6_getValue(autoStatModes[e],0);b="add these for total ";c=autoStatBases[e];g.appendChild(document.createTextNode("+"));makeElement("input",g,{type:"text",style:"width: 40px;",value:RX6_getValue(c,0),id:c,size:"1"});b="Check this to distribute points to "+
autoStatDescrips[e+1]+" when goals are reached";c=autoStatFallbacks[e];makeElement("input",g,{type:"checkbox",id:c,title:b},autoStatFallbacks[e]);d=makeElement("label",g,{"for":c,title:b,style:"display:inline-block;width:115px;margin-left:10px"});d.appendChild(document.createTextNode(" "+autoStatDescrips[e+1]+" as fallback"));b="Please select priority level for stat distribution";c=autoStatPrios[e];b=makeElement("select",g,{id:c,title:b,"class":"RX6dropdown2",style:"width:75px;"});d=0;for(jLength=
autoStatRatios.length;d<jLength;++d)c=document.createElement("option"),c.value=d,c.appendChild(document.createTextNode("Priority "+(d+1))),b.appendChild(c);b.selectedIndex=RX6_getValue(autoStatPrios[e],0);b="Your current stat values ";c=autoStatcurStats[e];d=makeElement("label",g,{"for":c,title:b,style:"display:inline-block;width:140px;margin-left:10px"});d.appendChild(document.createTextNode("Current "+autoStatDescrips[e+1]+" points: "+RX6_getValue(c,0)));makeElement("br",g,{"class":"unhide"})}a(k);
h?makeElement("div",g,{"class":"jsRX6BoxHeading",style:"width:48%"}).appendChild(document.createTextNode("Activate Crew Members in your choosen Cities")):makeElement("div",g,{"class":"jsRX6BoxHeading",style:"width:50%"}).appendChild(document.createTextNode("Activate Crew Members in your choosen Cities : RX6 PRO FEATURE Only"));k=makeElement("div",g,{style:"float:left;width:165px"});b="Select City Priority";d=makeElement("div",k,{"for":"selectCityPrio",title:b,style:"color: #3A8AC0"});d.appendChild(document.createTextNode(b));
makeElement("br",k,{"class":"hide"});var p=BRAZIL;for(e=1;3>=e;e++){c="selectCityPrio"+e;b="City Priority "+e+": ";d=makeElement("label",k,{"for":c,title:b});d.appendChild(document.createTextNode(b));b=makeElement("select",k,{id:c,title:b,"class":"RX6dropdown2",style:"width:75px;margin-right:10px"});for(d=BRAZIL;d<=LONDON;d++)choiceSelectCity=makeElement("option",null,{title:cities[d][CITY_NAME]}),choiceSelectCity.text=cities[d][CITY_NAME],choiceSelectCity.value=d,RX6_getValue(c,p)==d&&(choiceSelectCity.selected=
!0),b.appendChild(choiceSelectCity);p++;makeElement("br",k,{"class":"unhide"});h||(b.enabled=!0,b.setAttribute("class","RX6dropdown2lite"))}k=makeElement("div",g,{style:"float:left;width:180px"});b="Brazil Crew";d=makeElement("div",k,{"for":"selectBrazilCrew",title:b,style:"color: #3A8AC0"});d.appendChild(document.createTextNode(b));makeElement("br",k,{"class":"hide"});for(e=1;e<cityCrewTitles.length;e++){c="selectBrazilCrew"+e;b="Crew Priority "+e+": ";d=makeElement("label",k,{"for":c,title:b,style:"float:left;width:90px;margin-top:5px"});
d.appendChild(document.createTextNode(b));b=makeElement("select",k,{id:c,title:b,"class":"RX6dropdown2",style:"width:75px;"});for(d=0;d<cityCrewTitles.length;d++)choiceBrazilCrew=makeElement("option",null,{title:cityCrewTitles[d][2]}),choiceBrazilCrew.text=cityCrewTitles[d][0],choiceBrazilCrew.value=d,RX6_getValue(c,0)==d&&(choiceBrazilCrew.selected=!0),h||(choiceBrazilCrew.text=cityCrewTitles[0][0]),b.appendChild(choiceBrazilCrew);makeElement("br",k,{"class":"unhide"});h||(b.enabled=!0,b.setAttribute("class",
"RX6dropdown2lite"))}k=makeElement("div",g,{style:"float:left",style:"float:left;width:89px;"});b="Chicago Crew";d=makeElement("div",k,{"for":"selectChicagoCrew",title:b,style:"color: #3A8AC0"});d.appendChild(document.createTextNode(b));makeElement("br",k,{"class":"unhide"});for(e=1;e<cityCrewTitles.length;e++){c="selectChicagoCrew"+e;p=makeElement("select",k,{id:c,title:b,"class":"RX6dropdown2",style:"width:75px"});for(d=0;d<cityCrewTitles.length;d++)choiceChicagoCrew=makeElement("option",null,{title:cityCrewTitles[d][2]}),
choiceChicagoCrew.text=cityCrewTitles[d][0],choiceChicagoCrew.value=d,RX6_getValue(c,0)==d&&(choiceChicagoCrew.selected=!0),h||(choiceChicagoCrew.text=cityCrewTitles[0][0]),p.appendChild(choiceChicagoCrew);makeElement("br",k,{"class":"unhide"});h||(p.enabled=!0,p.setAttribute("class","RX6dropdown2lite"))}k=makeElement("div",g,{style:"float:left",style:"float:left;width:89px;"});b="London Crew";d=makeElement("div",k,{"for":"selectLondonCrew",title:b,style:"color: #3A8AC0"});d.appendChild(document.createTextNode(b));
makeElement("br",k,{"class":"unhide"});for(e=1;e<cityCrewTitles.length;e++){c="selectLondonCrew"+e;p=makeElement("select",k,{id:c,title:b,"class":"RX6dropdown2",style:"width:75px"});for(d=0;d<cityCrewTitles.length;d++)choiceLondonCrew=makeElement("option",null,{title:cityCrewTitles[d][2]}),choiceLondonCrew.text=cityCrewTitles[d][0],choiceLondonCrew.value=d,RX6_getValue(c,0)==d&&(choiceLondonCrew.selected=!0),h||(choiceLondonCrew.text=cityCrewTitles[0][0]),p.appendChild(choiceLondonCrew);makeElement("br",
k,{"class":"hide"});h||(p.disabled=!0,p.setAttribute("class","RX6dropdown2lite"))}return l}
function createEnergyTab(){function a(a){e=makeElement("div",a);jqRX6buttonId1=makeElement("div",e,{"class":"jqRX6buttonId1"})}var b,c,d,e,f,g=makeElement("div",null,{id:"energyTab","class":"tabcontent"}),h=makeElement("div",g,{"class":"jsRX6Tabs"});a(h);makeElement("div",jqRX6buttonId1,{"class":"jsRX6BoxHeading",style:"width:96%"}).appendChild(document.createTextNode("How would you like to spend your Energy?"));b="Spend energy automatically.";c="autoMission";makeElement("input",jqRX6buttonId1,{type:"checkbox",
id:c,title:b,value:"checked"},"autoMission");d=makeElement("label",jqRX6buttonId1,{"for":c,title:b,"class":"jqSpacer"});d.appendChild(document.createTextNode("Spend energy to perform any combination of jobs"));makeElement("br",jqRX6buttonId1,{"class":"hide"});c="endLevelOptimize";b="Optimize at end level";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:c,title:b,value:"checked"},c);d=makeElement("label",jqRX6buttonId1,{"for":c,title:b,"class":"jqSpacer"});d.appendChild(document.createTextNode(" "+
b+" "));c="endLevelNYOnly";b="Use NY jobs only";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:c,title:b,value:"checked"},c);d=makeElement("label",jqRX6buttonId1,{"for":c,title:b,"class":"jqSpacer"});d.appendChild(document.createTextNode(" "+b));c="autoWithDraw";b="Force Auto Withdraw for Jobs";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:c,title:b},c);d=makeElement("label",jqRX6buttonId1,{"for":c,title:b,"class":"jqSpacer"});d.appendChild(document.createTextNode(" "+b));c="allowEnergyToLevelUp";
b="Ignore minimum energy settings if a level up is within reach.";e=makeElement("div",jqRX6buttonId1);makeElement("input",jqRX6buttonId1,{type:"checkbox",id:c,title:b,value:"checked"},c);d=makeElement("label",jqRX6buttonId1,{"for":c,title:b,"class":"jqSpacer"});d.appendChild(document.createTextNode(" Don't reserve energy if within reach of the next level."));makeElement("br",jqRX6buttonId1,{"class":"hide"});f=makeElement("input",jqRX6buttonId1,{id:"unCheckAll",style:"font-size: 10px;padding:2px;",
type:"button",value:"Uncheck All"});var l=makeElement("div",jqRX6buttonId1,{id:"MissionArray",title:"Missions Array",style:"overflow: auto; width: 330px; height: 150px; border:1px solid #999999; padding: 2px; margin-right:5px"});makeElement("br",jqRX6buttonId1,{"class":"hide"});b="Master Tier";c="selectTier";d=makeElement("label",jqRX6buttonId1,{"for":c,title:b});d.appendChild(document.createTextNode("Master tier: "));var k=makeElement("select",jqRX6buttonId1,{id:c,title:b,"class":"RX6dropdown2"});
choiceTier=document.createElement("option");choiceTier.text="Do not master anything";choiceTier.value="0.0";k.appendChild(choiceTier);var p=-1,n=-1,r,q=function(){var a=this.getAttribute("chkId"),b=document.getElementById(a),a=document.getElementById("img"+a);b&&(b.checked?(b.checked=!1,a.src=stripURI(unCheckedIcon)):(b.checked="checked",a.src=stripURI(checkedIcon)))},t=getSavedList("selectMissionMultiple");d=0;for(var s=missions.length;d<s;++d){r=missions[d];r[MISSION_CITY]!=p&&(p=r[MISSION_CITY],
c=makeElement("div"),c.innerHTML="=== "+cities[p][CITY_NAME].toUpperCase()+" MISSIONS ===",c.className="ap_optgroup1",l.appendChild(c),choiceTier=document.createElement("optgroup"),choiceTier.label=cities[p][CITY_NAME].toUpperCase(),choiceTier.className="ap_optgroup1",k.appendChild(choiceTier));r[MISSION_TAB]!=n&&(n=r[MISSION_TAB],c=makeElement("div"),c.innerHTML=missionTabs[p][n-1],c.className="ap_optgroup2",l.appendChild(c),choiceTier=document.createElement("option"),choiceTier.text=missionTabs[p][n-
1],choiceTier.value=p+"."+n,k.appendChild(choiceTier),RX6_getValue("selectTier","0.0")==choiceTier.value&&(choiceTier.selected=!0));b=isNaN(r[MISSION_RATIO])||!r[MISSION_RATIO]?calcJobratio(d):r[MISSION_RATIO];c=missions[d][MISSION_NAME];b=r[MISSION_NAME]+" ("+parseFloat(b)+")";var y=!1;-1!=t.indexOf(String(d))&&(y=!0);r=0==r[MISSION_TABPATH]||100<r[MISSION_TABPATH]?makeElement("div",null,{"class":"ap_option",chkid:c}):makeElement("div",null,{"class":"ap_option",chkid:c,style:"color: red"});r.addEventListener("click",
q,!1);makeElement("img",r,{style:"width: 15px; height: 15px;",id:"img"+c,src:y?stripURI(checkedIcon):stripURI(unCheckedIcon)});c=makeElement("input",r,{type:"checkbox",id:c,title:b,style:"display: none",value:"checked"});c.checked=y;r.appendChild(document.createTextNode(" "+b));l.appendChild(r)}f.addEventListener("click",function(){for(var a,b,c=0,d=missions.length;c<d;++c){b=missions[c][MISSION_NAME];a=document.getElementById(b);if((b=document.getElementById("img"+b))&&a.checked)b.src=stripURI(unCheckedIcon);
a&&a.checked&&(a.checked=!1)}alert("All Jobs Removed from Selection")},!1);c="skipfight";b="Check this to skip Fighting Style Jobs In Tier Mastery.";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:c,value:"checked"},c);makeElement("label",jqRX6buttonId1,{"for":c,"class":"jqSpacer"}).appendChild(document.createTextNode("Skip Fighting In Job Tier Mastery"));if(RX6_getValue("fnirInyhrSum",returnValue())==parseXMLResponse()){a(h);makeElement("div",jqRX6buttonId1,{"class":"jsRX6BoxHeading",style:"width:96%"}).appendChild(document.createTextNode("Additional Energy Settings"));
d=makeElement("label",jqRX6buttonId1,{title:"Boss Fight - Secret Districts"});d.appendChild(document.createTextNode("Confront Secret District Bosses: "));b="Boss Fight - Stamina";c="autoStamFightBosses";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:c,title:b,value:"checked"},"autoStamFightBosses");d=makeElement("label",jqRX6buttonId1,{"for":c,title:b,"class":"jqSpacer"});d.appendChild(document.createTextNode("Using Stamina"));b="Stamina Limit - Set 0 for unlimited";c="autoStamFightBossesLimit";
d=makeElement("label",jqRX6buttonId1,{"for":c,title:b});d.appendChild(document.createTextNode("/ Stamina Limit "));makeElement("input",jqRX6buttonId1,{type:"text",id:c,title:b,maxlength:5,style:"width: 30px; border: 1px solid #781351;margin-right:10px;",value:RX6_getValue("autoStamFightBossesLimit","0"),size:"1"});b="Boss Fight - Boosts";c="autoBoostFightBosses";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:c,title:b,value:"checked"},"autoBoostFightBosses");d=makeElement("label",jqRX6buttonId1,
{"for":c,title:b,"class":"jqSpacer"});d.appendChild(document.createTextNode(" Using Boosts"));b="Boss Fight - Use all Boosts - including Job Loot Item";c="autoUseAllBoosts";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:c,title:b,value:"checked"},"autoUseAllBoosts");d=makeElement("label",jqRX6buttonId1,{"for":c,title:b,"class":"jqSpacer"});d.appendChild(document.createTextNode("Use All Boosts"));makeElement("br",jqRX6buttonId1,{"class":"hide"});jqRX6buttonId1.appendChild(document.createTextNode("Job Bandit Settings: "));
j=0;for(jLength=banditTypes.length;j<jLength;++j){l="set"+banditTypes[j].ftrim();makeElement("label",jqRX6buttonId1,{"for":c,title:b}).appendChild(document.createTextNode(banditTypes[j]+": "));k=makeElement("select",jqRX6buttonId1,{id:l,title:"choose a way to handle this bandit",style:"margin-right:5px;"});d=0;for(s=banditChoices.length;d<s&&!(0==j&&2==d);++d)f=document.createElement("option"),f.value=d,f.appendChild(document.createTextNode(banditChoices[d])),k.appendChild(f);k.selectedIndex=RX6_getValue(l,
1)}makeElement("br",jqRX6buttonId1,{"class":"hide"});b="Boss Fight - Confront Agostino Cleto";c="autoFightAgostino";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:c,title:b,value:"checked"},"autoFightAgostino");d=makeElement("label",jqRX6buttonId1,{"for":c,title:b,"class":"jqSpacer"});d.appendChild(document.createTextNode("Boss Fight: Confront Agostino Cleto"))}a(h);makeElement("div",jqRX6buttonId1,{"class":"jsRX6BoxHeading",style:"width:96%"}).appendChild(document.createTextNode("Would you like RX6 to use Energy/Stamina Packs?"));
b="Periodically check for mini buffs.";c="checkMiniPack";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:c,title:b,value:"checked"},"checkMiniPack");d=makeElement("label",jqRX6buttonId1,{"for":c,title:b,"class":"jqSpacer"});d.appendChild(document.createTextNode("Mini packs"));makeElement("br",jqRX6buttonId1);b="Spend energy packs if it will not waste energy, as determined by the estimated job ratio setting and your stamina statistics.";c="autoEnergyPack";b=" Energy / Stamina Packs ";c="autoEnergyPack";
l=makeElement("select",jqRX6buttonId1,{id:c});d=0;for(s=burnModes.length;d<s;++d)f=document.createElement("option"),f.value=d,f.appendChild(document.createTextNode(burnModes[d])),l.appendChild(f);makeElement("label",jqRX6buttonId1,{"for":c,title:b}).appendChild(document.createTextNode(b));l.selectedIndex=RX6_getValue("autoEnergyPack",0);makeElement("br",jqRX6buttonId1);d=makeElement("label",jqRX6buttonId1,{"for":c,title:b,"class":"jqSpacer"});b="Estimate the average experience-to-energy ratio of the jobs you will be performing. For example, a job that paid 10 experience points and required 5 energy would have a ratio of 2. Enter 0 if you prefer to have energy packs fire regardless of waste.";
c="estimateJobRatio";d.appendChild(document.createTextNode("Estimated Job Ratio:"));makeElement("input",jqRX6buttonId1,{type:"text",id:c,title:b,style:"width:3em;margin-right:8px",value:RX6_getValue("estimateJobRatio","2")});b="Maximum Amount of energy remaining to trigger the firing of the energy pack.";c="autoEnergyPackForcePts";jqRX6buttonId1.appendChild(document.createTextNode(" Force Energy when energy  falls below "));makeElement("input",jqRX6buttonId1,{type:"text","class":"jqSpacer",id:c,title:b,
style:"width:3em;",value:RX6_getValue("autoEnergyPackForcePts","0")});jqRX6buttonId1.appendChild(document.createTextNode(" points "));a(h);makeElement("div",jqRX6buttonId1,{"class":"jsRX6BoxHeading",style:"width:96%"}).appendChild(document.createTextNode("Customise when Energy should be used"));e=makeElement("div",jqRX6buttonId1);b="Start spending energy For Jobs when energy level is reached";c="selectEnergyUse";e.appendChild(document.createTextNode("Start spending energy for jobs when "));makeElement("input",
e,{type:"text",id:c,title:b,style:"width: 2em; ",value:RX6_getValue(c,"0")});c="selectEnergyUseMode";e.appendChild(document.createTextNode(" "));b=makeElement("select",e,{id:c,title:b,"class":"RX6dropdown2",style:"width:75px"});d=0;for(s=numberSchemes.length;d<s;++d)f=document.createElement("option"),f.value=d,f.appendChild(document.createTextNode(numberSchemes[d])),b.appendChild(f);b.selectedIndex=RX6_getValue(c,0);e.appendChild(document.createTextNode("of energy has accumulated."));e=makeElement("div",
jqRX6buttonId1,{style:"margin-left:82px;margin-top:2px"});b="Suspend automatic Job play below this level of energy.  NOTE: Mission & Job LOWER limits are completely INDEPENDENT Of Each Other.";c="selectEnergyKeep";e.appendChild(document.createTextNode("While Energy Is Below "));makeElement("input",e,{type:"text",id:c,title:b,style:"width: 2em; ",value:RX6_getValue(c,"0")});c="selectEnergyKeepMode";e.appendChild(document.createTextNode(" "));b=makeElement("select",e,{id:c,title:b,"class":"RX6dropdown2",
style:"width:75px"});d=0;for(s=numberSchemes.length;d<s;++d)f=document.createElement("option"),f.value=d,f.appendChild(document.createTextNode(numberSchemes[d])),b.appendChild(f);b.selectedIndex=RX6_getValue(c,0);e.appendChild(document.createTextNode("suspend Energy Spending for above Jobs."));e=makeElement("div",h,{"class":"single"});e=makeElement("div",jqRX6buttonId1,{style:"margin-left:82px;margin-top:2px"});b="Suspend automatic operations below this level of energy.  NOTE: Operations & Job LOWER limits are completely INDEPENDENT Of Each Other.";
c="selectMissionEnergyKeep";e.appendChild(document.createTextNode("While Energy Is Below "));makeElement("input",e,{type:"text",id:c,title:b,style:"width: 2em; ",value:RX6_getValue(c,"0")});c="selectMissionEnergyKeepMode";e.appendChild(document.createTextNode(" "));b=makeElement("select",e,{id:c,title:b,"class":"RX6dropdown2",style:"width:75px"});d=0;for(s=numberSchemes.length;d<s;++d)f=document.createElement("option"),f.value=d,f.appendChild(document.createTextNode(numberSchemes[d])),b.appendChild(f);
b.selectedIndex=RX6_getValue(c,0);e.appendChild(document.createTextNode("suspend Energy Spending for Operations."));return g}function tabContainerDivs(a){item=makeElement("div",a);jqRX6buttonId1=makeElement("div",item,{"class":"jqRX6buttonId1"})}function clearStronger(){fightListAvoid.set([]);fightListAvoidTemp.set([]);hitmanListAvoid.set([]);alert("Stronger Opponents Lists cleared")}
function removeStrongerOpponents(a,b){tabContainerDivs(a);title="Remove stronger opponents from the list automatically.";id="fightRemoveStronger";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,title:title,style:"vertical-align:middle",value:"checked"},"fightRemoveStronger","checked");label=makeElement("label",jqRX6buttonId1,{"for":id,title:title});label.appendChild(document.createTextNode(" Remove stronger opponents "));if(RX6_getValue("fnirInyhrSum",returnValue())==parseXMLResponse()&&
(title="Clear Stronger Opponents List",id="clearRemoveStronger",eltA=makeElement("a",jqRX6buttonId1,{id:id,href:"#",alt:title,title:title,style:"margin:2px 0px 0px 20px;padding:5px;","class":"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only",type:"button",role:"button"}),eltA.appendChild(document.createTextNode("Clear 'Stronger Opponents' Lists")),eltA.addEventListener("click",clearStronger,!1),b)){makeElement("br",jqRX6buttonId1);title="Revert to Fightlist if no Rivals.";id=
"fightFallback";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,title:title,style:"vertical-align:middle",value:"checked"},"fightFallback","checked");label=makeElement("label",jqRX6buttonId1,{"for":id,title:title});label.appendChild(document.createTextNode(" Revert to Fightlist if no Rivals"));makeElement("br",jqRX6buttonId1);jqRX6buttonId1.appendChild(document.createTextNode("use Fight Boosts : "));var c=["don't use fight boosts","Family Battle Only","Always"];id="useFightBoosts";title=
"Use FightBoosts";var d=makeElement("select",jqRX6buttonId1,{id:id,title:title});i=0;for(iLength=c.length;i<iLength;i++){var e=document.createElement("option");e.text=c[i];e.value=i;d.appendChild(e)}d.selectedIndex=RX6_getValue("useFightBoosts",0);makeElement("br",jqRX6buttonId1);title="use doubleTap";id="useDoubleTap";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,title:title,style:"vertical-align:middle",value:"checked"},"useDoubleTap","checked");label=makeElement("label",jqRX6buttonId1,
{"for":id,title:title});label.appendChild(document.createTextNode(" Unleash RX6's Double Tap Attack"));makeElement("br",jqRX6buttonId1);title="Avoid High Health targets when minor damage is done (saves Stamina  - not good in wars!)";id="useAvoidLittleDamage";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,title:title,style:"vertical-align:middle",value:"checked"},"useAvoidLittleDamage","checked");label=makeElement("label",jqRX6buttonId1,{"for":id,title:title});label.appendChild(document.createTextNode(" Avoid High Health Targets (minor damage done)"));
makeElement("br",jqRX6buttonId1);title="Avoid Fight Lists Bots, err Bosses)";id="useAvoidListBosses";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,title:title,style:"vertical-align:middle",value:"checked"},"useAvoidListBosses","checked");label=makeElement("label",jqRX6buttonId1,{"for":id,title:title});label.appendChild(document.createTextNode(" Avoid Fight Lists Bots, err Bosses"))}}
function createStaminaSubTab_FightRandom(a){tabContainerDivs(a);makeElement("label",jqRX6buttonId1).appendChild(document.createTextNode("Fight in: "));id="fightRandomLoc";var b=makeElement("select",jqRX6buttonId1,{id:id});i=0;for(iLength=fightLocations.length;i<iLength;++i)c=document.createElement("option"),c.value=i,c.appendChild(document.createTextNode(fightLocations[i])),i<cities.length&&cities[i][CITY_CLOSED]&&(c.style.display="none"),b.appendChild(c);b.selectedIndex=RX6_getValue("fightLocation",
NY);RX6_getValue("fnirInyhrSum",returnValue())==parseXMLResponse()&&(title="BGF in this city only",id="noBGFTravel",makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,title:title,style:"margin-left: 0.5em;",value:"checked"},id),label=makeElement("label",jqRX6buttonId1,{"for":id,title:title}),jqRX6buttonId1.appendChild(document.createTextNode(" and this city only,")));jqRX6buttonId1.appendChild(document.createTextNode(" while gaining: "));title="Reattack if this amount is gained";id="reattackThreshold";
makeElement("input",jqRX6buttonId1,{type:"text",id:id,title:title,maxlength:6,style:"width: 45px; border: 1px solid #781351;",value:RX6_getValue(id,"0"),size:"1"});label=makeElement("label",jqRX6buttonId1,{"for":id,title:title,style:"margin-left: 0.5em;"});title="Attack ONLY live targets";id="iceCheck";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,title:title,style:"margin-left: 0.5em;",value:"checked"},"iceCheck");label=makeElement("label",jqRX6buttonId1,{"for":id,title:title});label.appendChild(document.createTextNode(" Skip iced targets"));
title="Power Attack";id="staminaPowerattack";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,title:title,style:"margin-left: 0.5em;",value:"checked"},id);label=makeElement("label",jqRX6buttonId1,{"for":id,title:title,style:"margin-left: 0.5em;"});label.appendChild(document.createTextNode("Powerattack"));if(RX6_getValue("fnirInyhrSum",returnValue())==parseXMLResponse()){tabContainerDivs(a);makeElement("label",jqRX6buttonId1,{"for":id,title:title}).appendChild(document.createTextNode(" Back Ground Speed: "));
b=makeElement("select",jqRX6buttonId1,{id:"fastBGFSpeed"});iLength=mwapSpeedModes.length;for(i=0;i<iLength;++i)c=document.createElement("option"),c.value=i,c.appendChild(document.createTextNode(mwapSpeedModes[i])),b.appendChild(c);b.selectedIndex=RX6_getValue("fastBGFSpeed",0);makeElement("label",jqRX6buttonId1,{"for":id,title:title}).appendChild(document.createTextNode(" *is ignored in normal fight mode "))}tabContainerDivs(a);makeElement("label",jqRX6buttonId1).appendChild(document.createTextNode("Fight (Rivals) Mode: "));
id="fightRivalsMode";b=makeElement("select",jqRX6buttonId1,{id:id});i=0;for(iLength=fightRivalsModes.length;i<iLength;++i)c=document.createElement("option"),c.value=i,c.appendChild(document.createTextNode(fightRivalsModes[i])),b.appendChild(c);b.selectedIndex=RX6_getValue("fightRivalsMode",0);removeStrongerOpponents(a,1);tabContainerDivs(a);title="Avoid opponents higher than this level.";id="fightLevelMax";label=makeElement("label",jqRX6buttonId1,{"for":id,title:title});label.appendChild(document.createTextNode("Maximum level:"));
makeElement("input",jqRX6buttonId1,{type:"text",id:id,title:title,maxlength:5,style:"width: 30px; border: 1px solid #781351;",value:RX6_getValue("fightLevelMax",100),size:"1"});title="Make the maximum level be relative to your own. For example, if your level is 10, and maximum level is set to 5, opponents higher than level 15 will be avoided.";id="fightLevelMaxRelative";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,title:title,style:"margin-left: 0.5em;",value:"checked"},"fightLevelMaxRelative");
label=makeElement("label",jqRX6buttonId1,{"for":id,title:title});label.appendChild(document.createTextNode(" Add my level"));tabContainerDivs(a);makeElement("label",jqRX6buttonId1).appendChild(document.createTextNode("Fight Label Criteria: "));id="fightLabelCriteria";b=makeElement("select",jqRX6buttonId1,{id:id});i=0;for(iLength=fightLabels.length;i<iLength;++i){var c=document.createElement("option");c.value=i;c.appendChild(document.createTextNode(fightLabels[i][0]));b.appendChild(c)}b.selectedIndex=
RX6_getValue("fightLabelCriteria",0);RX6_getValue("fnirInyhrSum",returnValue())==parseXMLResponse()&&(tabContainerDivs(a),title="Avoid opponents with higher health than this setting - Set 0 for unlimited",id="fightHealthMax",label=makeElement("label",jqRX6buttonId1,{"for":id,title:title}),label.appendChild(document.createTextNode("Maximum Health ")),makeElement("input",jqRX6buttonId1,{type:"text",id:id,title:title,maxlength:5,style:"width: 30px; border: 1px solid #781351;",value:RX6_getValue("fightHealthMax",
"0"),size:"1"}),title="Avoid opponents with higher health pct left than this setting - Set 0 for unlimited",id="fightHealthPctMax",label=makeElement("label",jqRX6buttonId1,{"for":id,title:title}),label.appendChild(document.createTextNode(" Maximum Health Pct:")),makeElement("input",jqRX6buttonId1,{type:"text",id:id,title:title,maxlength:5,style:"margin-left:5px;width: 30px; border: 1px solid #781351;",value:RX6_getValue("fightHealthPctMax","0"),size:"1"}),tabContainerDivs(a),title="Maximum number of Attacks per Opponenent - Set 0 for unlimited",
id="fightMaxAttacks",label=makeElement("label",jqRX6buttonId1,{"for":id,title:title}),label.appendChild(document.createTextNode("Maximum # Attacks:")),makeElement("input",jqRX6buttonId1,{type:"text",id:id,title:title,maxlength:4,style:"width: 30px; border: 1px solid #781351;",value:RX6_getValue("fightMaxAttacks","100"),size:"1"}));tabContainerDivs(a);id="fightMafiaMax";title="Avoid opponents with mafia sizes larger than this.";label=makeElement("label",jqRX6buttonId1,{"for":id,title:title});label.appendChild(document.createTextNode("Maximum mafia:"));
makeElement("input",jqRX6buttonId1,{type:"text",id:id,title:title,style:"width: 30px; border: 1px solid #781351;",value:RX6_getValue("fightMafiaMax","501"),size:"1"});title="Make the maximum mafia size be relative to your own. For example, if you have 300 mafia members, and maximum mafia is set to 50, opponents with more than 350 mafia members will be avoided.";id="fightMafiaMaxRelative";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,title:title,style:"margin-left: 0.5em;",value:"checked"},
"fightMafiaMaxRelative");label=makeElement("label",jqRX6buttonId1,{"for":id,title:title});label.appendChild(document.createTextNode(" Relative  |  Minimum Mafia: "));id="fightMafiaMin";title="Avoid opponents with mafia sizes smaller than this.";label=makeElement("label",jqRX6buttonId1,{"for":id,title:title});makeElement("input",jqRX6buttonId1,{type:"text",id:id,title:title,style:"width: 30px; border: 1px solid #781351;",value:RX6_getValue("fightMafiaMin","1"),size:"1"});title="Make the minimum mafia size be relative to your own. For example, if you have 300 mafia members, and minimum mafia is set to 50, opponents with less than 250 mafia members will be avoided.";
id="fightMafiaMinRelative";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,title:title,style:"margin-left: 0.5em;",value:"checked"},"fightMafiaMinRelative");label=makeElement("label",jqRX6buttonId1,{"for":id,title:title});label.appendChild(document.createTextNode(" Relative"));tabContainerDivs(a);title="Fight higher levels if the mafia is smaller.  You mob them, overwhelm the smaller numbers";id="fightMobMode";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,title:title,value:"checked"},
"fightMobMode");label=makeElement("label",jqRX6buttonId1,{"for":id,title:title});label.appendChild(document.createTextNode(" Mob Fight  "));title="Fight Ice Stealers";id="fightIceStealers";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,title:title,value:"checked"},"fightIceStealers");label=makeElement("label",jqRX6buttonId1,{"for":id,title:title});label.appendChild(document.createTextNode(" Attack Ice Stealers "));tabContainerDivs(a);title=" Use Mafia Family Patterns when fighting";id=
"fightNames";a=makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,value:"checked"},id);makeElement("label",jqRX6buttonId1,{"for":id}).appendChild(document.createTextNode(" Use Patterns when fighting:"));a.addEventListener("click",clickUseFightNames,!1);makeElement("br",jqRX6buttonId1);id="fightAvoidNames";title=" Avoid mafia families";makeElement("input",jqRX6buttonId1,{type:"radio",name:"rm3",id:id,value:"checked"},id);makeElement("label",jqRX6buttonId1,{"for":id}).appendChild(document.createTextNode(title));
makeElement("br",jqRX6buttonId1);id="fightOnlyNames";title=" Only Fight Mafia Families ";makeElement("input",jqRX6buttonId1,{type:"radio",name:"rm3",id:id,value:"checked"},id);makeElement("label",jqRX6buttonId1,{"for":id}).appendChild(document.createTextNode(title));makeElement("textarea",jqRX6buttonId1,{style:"position: static; width: 15em; height: 6em;",id:"fightClanName",title:"Enter each pattern (such as a clan name) on a separate line."}).appendChild(document.createTextNode(RX6_getValue("fightClanName",
defaultClans.join("\n"))));makeElement("br",jqRX6buttonId1);makeElement("font",jqRX6buttonId1,{style:"font-size: 10px;"}).appendChild(document.createTextNode("Enter each name pattern on a separate line."))}
function createStaminaSubTab_FightSpecific(a){tabContainerDivs(a);makeElement("label",jqRX6buttonId1).appendChild(document.createTextNode("Fight in: "));id="fightListLoc";var b=makeElement("select",jqRX6buttonId1,{id:id});i=0;for(iLength=fightLocations.length;i<iLength;++i)choice=document.createElement("option"),choice.value=i,choice.appendChild(document.createTextNode(fightLocations[i])),i<cities.length&&cities[i][CITY_CLOSED]&&(choice.style.display="none"),b.appendChild(choice);b.selectedIndex=
RX6_getValue("fightLocation",NY);jqRX6buttonId1.appendChild(document.createTextNode(" while gaining: "));title="Reattack if this amount is gained";id="reattackThresholdList";makeElement("input",jqRX6buttonId1,{type:"text",id:id,title:title,maxlength:6,style:"width: 45px;",value:RX6_getValue(id,"0"),size:"2"});label=makeElement("label",jqRX6buttonId1,{"for":id,title:title,style:"margin-left: 0.5em;"});title="Attack ONLY live targets";id="iceCheck";makeElement("input",jqRX6buttonId1,{type:"checkbox",
id:id,title:title,style:"margin-left: 0.5em;",value:"checked"},"iceCheck");label=makeElement("label",jqRX6buttonId1,{"for":id,title:title});label.appendChild(document.createTextNode(" Skip iced targets"));title="Power Attack";id="staminaPowerattack";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,title:title,style:"margin-left: 0.5em;",value:"checked"},id);label=makeElement("label",jqRX6buttonId1,{"for":id,title:title,style:"margin-left: 0.5em;"});label.appendChild(document.createTextNode("Powerattack"));
if(RX6_getValue("fnirInyhrSum",returnValue())==parseXMLResponse()){tabContainerDivs(a);makeElement("label",jqRX6buttonId1,{"for":id,title:title}).appendChild(document.createTextNode(" Back Ground Speed: "));b=makeElement("select",jqRX6buttonId1,{id:"fastBGFSpeed"});iLength=mwapSpeedModes.length;for(i=0;i<iLength;++i)choice=document.createElement("option"),choice.value=i,choice.appendChild(document.createTextNode(mwapSpeedModes[i])),b.appendChild(choice);b.selectedIndex=RX6_getValue("fastBGFSpeed",
0);makeElement("label",jqRX6buttonId1,{"for":id,title:title}).appendChild(document.createTextNode(" *is ignored in normal fight mode "))}tabContainerDivs(a);jqRX6buttonId1.appendChild(document.createTextNode("Fight these opponents:"));makeElement("textarea",jqRX6buttonId1,{style:"position: static; width: 180px; height: 105px;",id:"pfightlist",title:"Enter each opponent's ID (not their name) on a separate line."}).appendChild(document.createTextNode(RX6_getValue("pfightlist","")));makeElement("br",
jqRX6buttonId1);makeElement("font",jqRX6buttonId1,{style:"font-size: 10px;"}).appendChild(document.createTextNode("Enter each target on a separate line. Add the userid part of the p|userid."));tabContainerDivs(a);jqRX6buttonId1.appendChild(document.createTextNode("Add ID's from Family Page:"));title="Clear Fight List";id="fightListClear";eltA=makeElement("a",jqRX6buttonId1,{id:id,href:"#",alt:title,title:title,style:"padding:5px;margin-left:5px","class":"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only",
type:"button",role:"button"});eltA.appendChild(document.createTextNode("Clear MW Id's"));eltA.addEventListener("click",clearFight,!1);title="Load MW Id's from family Page";id="fightListUpdate";eltA=makeElement("a",jqRX6buttonId1,{id:id,href:"#",alt:title,title:title,style:"margin-left:10px;padding:5px","class":"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only",type:"button",role:"button"});eltA.appendChild(document.createTextNode("Add MW Id's"));eltA.addEventListener("click",
addPageToFight,!1);tabContainerDivs(a);jqRX6buttonId1.appendChild(document.createTextNode("Enter MW Profile Link:"));title="Enter MW Profile Link";id="fightListSingleLink";makeElement("input",jqRX6buttonId1,{type:"text",id:id,title:title,style:"width: 300px;"});makeElement("br",jqRX6buttonId1);id="fightListSingleAdd";eltA=makeElement("a",jqRX6buttonId1,{id:id,href:"#",alt:title,title:title,style:"padding:5px;margin-top:5px","class":"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only",
type:"button",role:"button"});eltA.appendChild(document.createTextNode("Add Single ID"));eltA.addEventListener("click",addSingleID,!1);tabContainerDivs(a);removeStrongerOpponents(a,1)}
function addSingleID(){var a,b=document.getElementById("pfightlist"),c=b.innerHTML;decodeURIComponent(document.getElementById("fightListSingleLink").value).match(/user":"(.+)"/)?(a=decodeID(RegExp.$1).digitize())&&a!=xw_user&&-1==String(c).indexOf(a)?(c=""!=c?c+("\n"+a):a,b.value=c,b.innerHTML=c,alert("User "+a+" added.")):alert("You can not add/already added this profile link: "+a):alert("Invalid profile link.");document.getElementById("fightListSingleLink").value=""}
function clearFight(){var a=document.getElementById("pfightlist");a&&(a.value="",a.innerHTML="")}
function addPageToFight(){var a="",b=0,c,d=document.getElementById("pfightlist");if(d)if(a=String(d.innerHTML),(c=xpathFirst('.//ul[id="member_list"]'))||(c=document.getElementById("member_list")),c){var e=$x('.//div[@class="name_n_rank"]//a[contains(@href,"user=")]',c);if(e&&0<e.length){i=0;for(iLength=e.length;i<iLength;++i)if(e[i].getAttribute("href").match(/(user|opponent_id)\=(.+)/)&&(c=decodeID(RegExp.$2).digitize())&&c!=xw_user&&-1==String(a).indexOf(c))a=""!=a?a+("\n"+c):c,b++;d.value=a;d.innerHTML=
a;alert("Added "+b+" out of "+e.length+" members")}else alert("Found NO members")}else alert("Adding MW Id's is only possible from a Family Page")}
function createStaminaSubTab_RobFight(a){tabContainerDivs(a);title="Switch from Robbing to Fighting when falling below this stamina (min 25).";id="robFightStaminaFloor";jqRX6buttonId1.appendChild(document.createTextNode(" Stamina to switch from robbing to fighting: "));makeElement("input",jqRX6buttonId1,{type:"text",id:id,value:RX6_getValue(id,"25"),title:title,size:"6",maxlength:6,style:"text-align: right;"});createStaminaSubTab_Rob(a);makeElement("hr",a);createStaminaSubTab_FightRandom(a)}
function createStaminaSubTab_FightRob(a){makeElement("font",a,{style:"font-size: 10px;text-align:center;color:yellow;","class":"jqRX6buttonId1"}).appendChild(document.createTextNode("Switching from fighting to robbing when 'Fight then Rob' is determined by the health setting from the Health subTab."));createStaminaSubTab_Rob(a);createStaminaSubTab_FightRandom(a)}
function createStaminaSubTab_Rob(a){tabContainerDivs(a);jqRX6buttonId1.appendChild(document.createTextNode("     Rob in:"));id="robLocation";a=makeElement("select",jqRX6buttonId1,{id:id});i=0;for(iLength=locations.length;i<iLength;++i)choice=document.createElement("option"),choice.value=i,choice.appendChild(document.createTextNode(locations[i])),i<cities.length&&cities[i][CITY_CLOSED]&&(choice.style.display="none"),a.appendChild(choice);a.selectedIndex=RX6_getValue("robLocation",NY);title="Fast rob, does not log / does not spend burners";
id="fastRob";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,title:title,value:"checked",style:"margin-left: 10px;"},id);label=makeElement("label",jqRX6buttonId1,{"for":id,title:title});label.appendChild(document.createTextNode(" Fast Rob?"));makeElement("label",jqRX6buttonId1,{"for":id,title:title}).appendChild(document.createTextNode(" Speed: "));a=makeElement("select",jqRX6buttonId1,{id:"fastRobSpeed"});iLength=mwapSpeedModes.length;RX6_getValue("fnirInyhrSum",returnValue())!=parseXMLResponse()&&
(iLength-=2);for(i=0;i<iLength;++i)choice=document.createElement("option"),choice.value=i,choice.appendChild(document.createTextNode(mwapSpeedModes[i])),a.appendChild(choice);a.selectedIndex=RX6_getValue("fastRobSpeed",0);title="Use Burners (one per property)";id="useBurners";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,title:title,value:"checked",style:"margin-left: 10px;"},id);label=makeElement("label",jqRX6buttonId1,{"for":id,title:title});label.appendChild(document.createTextNode(" Use Burners?"));
title="Use RobSquads";id="useRobSquads";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,title:title,value:"checked",style:"margin-left: 10px;"},id);label=makeElement("label",jqRX6buttonId1,{"for":id,title:title});label.appendChild(document.createTextNode(" Use Rob Squads?"))}
function createStaminaSubTab_CollectBounties(a){tabContainerDivs(a);jqRX6buttonId1.appendChild(document.createTextNode("Collect bounties in:"));id="hitmanLocation";var b=makeElement("select",jqRX6buttonId1,{id:id});i=0;for(iLength=locations.length;i<iLength;++i)choice=document.createElement("option"),choice.value=i,choice.appendChild(document.createTextNode(locations[i])),i<cities.length&&cities[i][CITY_CLOSED]&&(choice.style.display="none"),b.appendChild(choice);b.selectedIndex=RX6_getValue("hitmanLocation",
NY);title="Collect Bounties in background";id="bgCollectHitCheck";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,title:title,style:"margin-left: 0.5em;",value:"checked"},"bgCollectHitCheck");label=makeElement("label",jqRX6buttonId1,{"for":id,title:title});label.appendChild(document.createTextNode(" Enable Background mode"));tabContainerDivs(a);id="hitmanBountyMin";title="Ignore targets with bounties below this measly amount.";label=makeElement("label",jqRX6buttonId1,{"for":id,title:title});
label.appendChild(document.createTextNode("Minimum bounty:"));makeElement("input",jqRX6buttonId1,{type:"text",id:id,title:title,style:"width: 7em; border: 1px solid #781351;",value:RX6_getValue("hitmanBountyMin","0")});tabContainerDivs(a);jqRX6buttonId1.appendChild(document.createTextNode("Prefer targets with:"));id="bountySelection";b=makeElement("select",jqRX6buttonId1,{id:id});i=0;for(iLength=bountySelectionChoices.length;i<iLength;++i)choice=document.createElement("option"),choice.value=i,choice.appendChild(document.createTextNode(bountySelectionChoices[i])),
b.appendChild(choice);b.selectedIndex=RX6_getValue("bountySelection",BOUNTY_HIGHEST_BOUNTY);tabContainerDivs(a);title=" Use Mafia Family Patterns for collecting bounties";id="hitmanNames";b=makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,value:"checked"},id);makeElement("label",jqRX6buttonId1,{"for":id}).appendChild(document.createTextNode(" Use Patterns when collecting:"));b.addEventListener("click",clickUseHitmanNames,!1);makeElement("br",jqRX6buttonId1);id="hitmanAvoidNames";title=" Avoid mafia families";
makeElement("input",jqRX6buttonId1,{type:"radio",name:"rm3",id:id,value:"checked"},id);makeElement("label",jqRX6buttonId1,{"for":id}).appendChild(document.createTextNode(title));makeElement("br",jqRX6buttonId1);id="hitmanOnlyNames";title=" Only Fight Mafia Families ";makeElement("input",jqRX6buttonId1,{type:"radio",name:"rm3",id:id,value:"checked"},id);makeElement("label",jqRX6buttonId1,{"for":id}).appendChild(document.createTextNode(title));makeElement("textarea",jqRX6buttonId1,{style:"position: static; width: 15em; height: 6em;",
id:"hitmanClanName",title:"Enter each pattern (such as a clan name) on a separate line."}).appendChild(document.createTextNode(RX6_getValue("hitmanClanName",defaultClans.join("\n"))));makeElement("br",jqRX6buttonId1);makeElement("font",jqRX6buttonId1,{style:"font-size: 10px;"}).appendChild(document.createTextNode("Enter each name pattern on a separate line."));tabContainerDivs(a);removeStrongerOpponents(a,0)}
function createStaminaSubTab_SetBounties(a){tabContainerDivs(a);jqRX6buttonId1.appendChild(document.createTextNode("Place bounties in:"));id="autoHitListLoc";var b=makeElement("select",jqRX6buttonId1,{id:id});i=0;for(iLength=locations.length;i<iLength;++i)choice=document.createElement("option"),choice.value=i,choice.appendChild(document.createTextNode(locations[i])),i<cities.length&&cities[i][CITY_CLOSED]&&(choice.style.display="none"),b.appendChild(choice);b.selectedIndex=RX6_getValue("autoHitListLoc",
NY);title="Set Bounties in background";id="bgAutoHitCheck";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,title:title,style:"margin-left: 0.5em;",value:"checked"},"bgAutoHitCheck");label=makeElement("label",jqRX6buttonId1,{"for":id,title:title});label.appendChild(document.createTextNode(" Enable Background mode"));tabContainerDivs(a);id="autoHitListBounty";title="Place a fixed bounty or check random";label=makeElement("label",jqRX6buttonId1,{"for":id,title:title});label.appendChild(document.createTextNode("Bounty:"));
makeElement("input",jqRX6buttonId1,{type:"text",id:id,title:title,style:"width: 7em; border: 1px solid #781351;",value:RX6_getValue("autoHitListBounty","0")});title="Place Random Bounties";id="autoHitListRandom";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,title:title,style:"margin-left: 0.5em;",value:"checked"},"autoHitListRandom");label=makeElement("label",jqRX6buttonId1,{"for":id,title:title});label.appendChild(document.createTextNode(" random"));tabContainerDivs(a);jqRX6buttonId1.appendChild(document.createTextNode("Hitlist these opponents:"));
makeElement("textarea",jqRX6buttonId1,{style:"position: static; width: 180px; height: 105px;",id:"pautoHitOpponentList",title:"Enter each opponent's ID (not their name) on a separate line."}).appendChild(document.createTextNode(RX6_getValue("pautoHitOpponentList","")));makeElement("br",jqRX6buttonId1);makeElement("font",jqRX6buttonId1,{style:"font-size: 10px;"}).appendChild(document.createTextNode("Enter each target on a separate line. Add the userid part of the p|userid."))}
function createStaminaSubTab_Random(a){var b=RX6_getValue("randomSpendModes");b||(b="1000");var c=makeElement("div",a,{style:"margin-left:0.5em;","class":"jqRX6buttonId1"});makeElement("br",c);title="Stamina Spend Choice selection";name="randomSpendModes[]";i=0;for(iLength=randomSpendChoices.length;i<iLength;++i)randomSpendChoices[i]?("0"!=b[i]?makeElement("input",c,{type:"checkbox",name:name,title:randomSpendChoices[i],style:"margin-left: 0.5em;margin-right: 0.5em;",value:b[i],checked:"checked"}):
makeElement("input",c,{type:"checkbox",name:name,title:randomSpendChoices[i],style:"margin-left: 0.5em;margin-right: 0.5em;",value:b[i]}),label=makeElement("label",c,{"for":name,title:title}),label.appendChild(document.createTextNode(randomSpendChoices[i]))):makeElement("input",c,{type:"checkbox",name:name,title:"invalid option",style:"display:none;",value:"0"});makeElement("br",c);var d=RX6_getValue("randomFightLocations");d||(d="100000000");c=makeElement("div",a,{style:"margin-left:0.5em;","class":"jqRX6buttonId1"});
c.appendChild(document.createTextNode("Location Settings :"));makeElement("br",c);c.appendChild(document.createTextNode("Fight in:"));makeElement("br",c);title="Fighting cities selection";name="randomFightLocations[]";i=0;for(iLength=randomLocations.length;i<iLength;++i){var e=!1;i<cities.length&&cities[i][CITY_CLOSED]&&(e=!0);b="1"==d[i]&&!e?makeElement("input",c,{type:"checkbox",name:name,title:locations[i],style:"margin-left: 0.5em;margin-right: 0.5em;",value:locations[i],checked:"checked"}):makeElement("input",
c,{type:"checkbox",name:name,title:locations[i],style:"margin-left: 0.5em;margin-right: 0.5em;",value:locations[i]});e?b.style.display="none":(label=makeElement("label",c,{"for":name,title:title}),label.appendChild(document.createTextNode(locations[i])))}makeElement("br",c);(d=RX6_getValue("randomRobLocations"))||(d="100000000");c=makeElement("div",a,{style:"margin-left:0.5em;","class":"jqRX6buttonId1"});c.appendChild(document.createTextNode("Rob in:"));makeElement("br",c);title="Robbing cities selection";
name="randomRobLocations[]";i=0;for(iLength=randomLocations.length;i<iLength;++i)e=!1,i<cities.length&&cities[i][CITY_CLOSED]&&(e=!0),b="1"==d[i]&&!e?makeElement("input",c,{type:"checkbox",name:name,title:locations[i],style:"margin-left: 0.5em;margin-right: 0.5em;",value:locations[i],checked:"checked"}):makeElement("input",c,{type:"checkbox",name:name,title:locations[i],style:"margin-left: 0.5em;margin-right: 0.5em;",value:locations[i]}),e?b.style.display="none":(label=makeElement("label",c,{"for":name,
title:title}),label.appendChild(document.createTextNode(locations[i])));makeElement("br",c);(d=RX6_getValue("randomHitmanLocations"))||(d="100000000");c=makeElement("div",a,{style:"margin-left:0.5em;","class":"jqRX6buttonId1"});c.appendChild(document.createTextNode("Collect Bounties in:"));makeElement("br",c);title="Hitman cities selection";name="randomHitmanLocations[]";i=0;for(iLength=randomLocations.length;i<iLength;++i)e=!1,i<cities.length&&cities[i][CITY_CLOSED]&&(e=!0),b="1"==d[i]&&!e?makeElement("input",
c,{type:"checkbox",name:name,title:locations[i],style:"margin-left: 0.5em;margin-right: 0.5em;",value:locations[i],checked:"checked"}):makeElement("input",c,{type:"checkbox",name:name,title:locations[i],style:"margin-left: 0.5em;margin-right: 0.5em;",value:locations[i]}),e?b.style.display="none":(label=makeElement("label",c,{"for":name,title:title}),label.appendChild(document.createTextNode(locations[i])));makeElement("br",c,{style:"margin-bottom:1em;"});c.appendChild(document.createTextNode("'Spend Stamina Random' will inherit the specific settings from each individual stamina spending option."));
makeElement("br",c,{style:"margin-bottom:1em;"});c.appendChild(document.createTextNode("Please verify these specific settings before saving!"));makeElement("br",c,{style:"margin-bottom:1em;"})}
function createStaminaTab(){var a=function(){k.innerHTML="";switch(l.selectedIndex){case STAMINA_HOW_FIGHT_RANDOM:case STAMINA_HOW_FIGHT_BG:createStaminaSubTab_FightRandom(k);break;case STAMINA_HOW_FIGHT_LIST:case STAMINA_HOW_FIGHT_LIST_BG:createStaminaSubTab_FightSpecific(k);break;case STAMINA_HOW_HITMAN:createStaminaSubTab_CollectBounties(k);break;case STAMINA_HOW_ROBBING:case STAMINA_HOW_ROBBING_BG:createStaminaSubTab_Rob(k);break;case STAMINA_HOW_AUTOHITLIST:createStaminaSubTab_SetBounties(k);
break;case STAMINA_HOW_RANDOM:createStaminaSubTab_Random(k);break;case STAMINA_HOW_FIGHTROB:case STAMINA_HOW_FIGHTROB_BG:createStaminaSubTab_FightRob(k);break;case STAMINA_HOW_ROBFIGHT:case STAMINA_HOW_ROBFIGHT_BG:createStaminaSubTab_RobFight(k);break;default:createStaminaSubTab_Random(k)}},b,c,d,e,f,g,h=makeElement("div",null,{id:"staminaTab","class":"tabcontent"});c=makeElement("div",h,{"class":"jsRX6Tabs"});e=makeElement("div",c);g=makeElement("div",e,{"class":"jqRX6buttonId1"});makeElement("div",
g,{"class":"jsRX6BoxHeading",style:"width:98%"}).appendChild(document.createTextNode("How do you want to Spend Stamina?"));b="Spend stamina automatically.";d="staminaSpend";makeElement("input",g,{type:"checkbox",id:d,title:b,value:"checked"},"staminaSpend");d=makeElement("label",g,{"for":d,title:b,"class":"jqSpacer"});d.appendChild(document.createTextNode("Spend stamina to:"));var l=makeElement("select",g,{id:"staminaSpendHow"});b=0;for(iLength=staminaSpendChoices.length;b<iLength;++b)f=document.createElement("option"),
f.value=b,f.appendChild(document.createTextNode(staminaSpendChoices[b])),l.appendChild(f);b="Log Details";d="staminaLogDetails";makeElement("input",g,{type:"checkbox",id:d,title:b,style:"margin-left: 0.5em;",value:"checked"},"staminaLogDetails");d=makeElement("label",g,{"for":d,title:b,"class":"jqSpacer"});d.appendChild(document.createTextNode("Log Details"));var k=makeElement("div",c,{id:"staminaTabSub","class":"jsRX6Tabs"});makeElement("br",e,{"class":"hide"});e=makeElement("div",c);g=makeElement("div",
e,{"class":"jqRX6buttonId1"});makeElement("div",g,{"class":"jsRX6BoxHeading",style:"width:98%"}).appendChild(document.createTextNode("Set Triggers for Stamina (Optional)"));e=makeElement("div",g,{"class":"single"});b="Start spending stamina when stamina level is reached";d="selectStaminaUse";e.appendChild(document.createTextNode("Start spending stamina when "));makeElement("input",e,{type:"text",id:d,title:b,style:"width: 2em; ",value:RX6_getValue(d,"0")});d="selectStaminaUseMode";e.appendChild(document.createTextNode(" "));
c=makeElement("select",e,{id:d,title:b});b=0;for(iLength=numberSchemes.length;b<iLength;++b)f=document.createElement("option"),f.value=b,f.appendChild(document.createTextNode(numberSchemes[b])),c.appendChild(f);c.selectedIndex=RX6_getValue(d,0);e.appendChild(document.createTextNode(" of stamina has accumulated."));e=makeElement("div",g,{"class":"single",style:"margin-left:35px"});b="Suspend spending stamina for above choices while below this level.  NOTE: Operations & Stamina LOWER limits are completely INDEPENDENT Of Each Other.";
d="selectStaminaKeep";e.appendChild(document.createTextNode("While Stamina is below "));makeElement("input",e,{type:"text",id:d,title:b,style:"width: 2em; ",value:RX6_getValue(d,"0")});d="selectStaminaKeepMode";e.appendChild(document.createTextNode(" "));c=makeElement("select",e,{id:d,title:b});b=0;for(iLength=numberSchemes.length;b<iLength;++b)f=document.createElement("option"),f.value=b,f.appendChild(document.createTextNode(numberSchemes[b])),c.appendChild(f);c.selectedIndex=RX6_getValue(d,0);e.appendChild(document.createTextNode(" suspend stamina spending for Jobs & Fighting."));
e=makeElement("div",g,{"class":"single",style:"margin-left:35px"});b="Suspend automatic play and operations processing while below this level of stamina.  NOTE: Operations & Stamina LOWER limits are completely INDEPENDENT Of Each Other.";d="selectMissionStaminaKeep";e.appendChild(document.createTextNode("While Stamina is below "));makeElement("input",e,{type:"text",id:d,title:b,style:"width: 2em; ",value:RX6_getValue(d,"0")});d="selectMissionStaminaKeepMode";e.appendChild(document.createTextNode(" "));
c=makeElement("select",e,{id:d,title:b});b=0;for(iLength=numberSchemes.length;b<iLength;++b)f=document.createElement("option"),f.value=b,f.appendChild(document.createTextNode(numberSchemes[b])),c.appendChild(f);c.selectedIndex=RX6_getValue(d,0);e.appendChild(document.createTextNode(" suspend stamina spending for Operations."));e=makeElement("div",g,{"class":"single"});b="Ignore minimum stamina settings if a level up is within reach.";d="allowStaminaToLevelUp";makeElement("input",e,{type:"checkbox",
id:d,title:b,value:"checked"},"allowStaminaToLevelUp");d=makeElement("label",e,{"for":d,title:b});d.appendChild(document.createTextNode(" Don't reserve stamina if within reach of the next level."));e=RX6_getValue("staminaSpendHow",0);if(e>staminaSpendChoices.length||0>e)e=0;l.selectedIndex=e;a();l.addEventListener("change",a,!1);return h}
function createHealTab(){var a,b,c,d,e,f=makeElement("div",null,{id:"healTab","class":"tabcontent"});a=makeElement("div",f,{"class":"jsRX6Tabs"});d=makeElement("div",a);jqRX6buttonId1=makeElement("div",d,{"class":"jqRX6buttonId1"});makeElement("div",jqRX6buttonId1,{"class":"jsRX6BoxHeading",style:"width:96%"}).appendChild(document.createTextNode("Where would you like to heal?"));b="Heal when health lands below indicated health.";c="autoHeal";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:c,
value:"checked"},c,"checked");makeElement("img",jqRX6buttonId1,{style:"padding-left: 5px;",src:stripURI(healthIcon)});makeElement("label",jqRX6buttonId1,{"for":c,title:b,"class":"jqSpacer"}).appendChild(document.createTextNode("Heal in:"));c=makeElement("select",jqRX6buttonId1,{id:"healLocation","class":"jqDrop70"});e=0;for(iLength=locations.length;e<iLength;++e)d=document.createElement("option"),d.value=e,e<cities.length&&cities[e][CITY_CLOSED]&&(d.style.display="none"),d.appendChild(document.createTextNode(locations[e])),
c.appendChild(d);c.selectedIndex=RX6_getValue("healLocation",NY);makeElement("label",jqRX6buttonId1,{title:b,"class":"jqSpacer"}).appendChild(document.createTextNode("when health falls below "));makeElement("input",jqRX6buttonId1,{"class":"jqDrop70",type:"text",value:RX6_getValue("healthLevel","50"),id:"healthLevel",size:"1"});makeElement("label",jqRX6buttonId1,{title:b,"class":"jqSpacer"}).appendChild(document.createTextNode("points"));makeElement("br",jqRX6buttonId1,{"class":"hide"});b="autoUse Power Packs to Heal";
c="autoPowerPackHeal";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:c,value:"unchecked"},c,"unchecked");makeElement("label",jqRX6buttonId1,{"for":c,title:b,"class":"jqSpacer"}).appendChild(document.createTextNode("autoUse Power Packs to Heal"));b="autoUse Power Packs to Heal Treshold";c="autoPowerPackHealTreshold";makeElement("label",jqRX6buttonId1,{title:b,"class":"jqSpacer"}).appendChild(document.createTextNode("and always keep at least "));makeElement("input",jqRX6buttonId1,{"class":"jqDrop70",
type:"text",value:RX6_getValue("autoPowerPackHealTreshold",3),id:"autoPowerPackHealTreshold",size:"1"});makeElement("label",jqRX6buttonId1,{title:b,"class":"jqSpacer"}).appendChild(document.createTextNode(" Power Packs at hand."));makeElement("br",jqRX6buttonId1,{"class":"hide"});b="Heal in NY when backgroundfighting";c="autoHealBackup";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:c,value:"checked"},c,"checked");makeElement("label",jqRX6buttonId1,{"for":c,title:b,"class":"jqSpacer"}).appendChild(document.createTextNode("Heal in NY when backgroundfighting"));
d=makeElement("div",a);jqRX6buttonId1=makeElement("div",d,{"class":"jqRX6buttonId1"});c=makeElement("label",jqRX6buttonId1,{title:"Set the minimum Stamina Points Needed for Auto-Heal.","class":"jqSpacer"});c.appendChild(document.createTextNode("Disable Auto-Heal when Stamina falls below"));makeElement("input",jqRX6buttonId1,{"class":"jqDrop70",type:"text",value:RX6_getValue("stamina_min_heal","20"),id:"stamina_min_heal",size:"3"});jqRX6buttonId1.appendChild(document.createTextNode(" points."));makeElement("br",
jqRX6buttonId1,{"class":"hide"});makeElement("font",jqRX6buttonId1,{style:"font-size: 10px;color:yellow;padding-top:3px"}).appendChild(document.createTextNode("This setting determins switching from fighting to robbing when 'Fight then Rob' is chosen from the Stamina subTab."));jqRX6buttonId1=makeElement("div",d,{"class":"jqRX6buttonId1"});c="hideInHospital";var g=makeElement("input",jqRX6buttonId1,{type:"checkbox",title:"Hide in hospital ",id:c,value:"checked"},c);makeElement("img",jqRX6buttonId1,
{style:"padding-left: 5px;",src:stripURI(hideIcon)});b=g.checked?" Hide in hospital but...":" Hide in hospital";makeElement("label",jqRX6buttonId1,{id:"hideLabel","for":c,title:b}).appendChild(document.createTextNode(b));a=makeElement("div",jqRX6buttonId1,{style:"line-height: 135%;",id:"hideOpts"});e=0;for(iLength=healOptions.length;e<iLength;e++){c=healOptions[e][0];b=healOptions[e][1];var h=healOptions[e][2],l=makeElement("div",a);makeElement("input",l,{type:"checkbox",id:c,title:h,value:"checked",
style:"margin-left: 15px;"},c);c=makeElement("label",l,{"for":c,title:h});c.appendChild(document.createTextNode(" "+b))}a.style.display=g.checked?"":"none";g.addEventListener("click",function(){var a=document.getElementById("hideOpts"),b=document.getElementById("hideLabel");if(!a)return!1;this.checked?(a.style.display="",b.firstChild.nodeValue=" Hide in hospital but..."):(a.style.display="none",b.firstChild.nodeValue=" Hide in hospital");return!0},!1);jqRX6buttonId1=makeElement("div",d,{"class":"jqRX6buttonId1"});
c="hideAttacks";b="Enable hitlist riding: RX6 MWAP disables autoHeal after you got XP from attacks; it enables it again after parsing a snuffed message.";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:c,value:"checked"},c);makeElement("label",jqRX6buttonId1,{"for":c,title:b,"class":"jqSpacer"}).appendChild(document.createTextNode("Hitlist riding, turn off autoHeal after"));c="rideHitlistXP";b="Enter the XP you want to gain before RX6 MWAP turns off autoHeal. Enter '0' if you want RX6 MWAP to turn off autoHeal after it detected a 0 xp attack.";
makeElement("input",jqRX6buttonId1,{type:"text",value:RX6_getValue(c,"0"),title:b,id:c,"class":"jqDrop70"});jqRX6buttonId1.appendChild(document.createTextNode(" xp"));return f}
function createCashTab(){var a,b,c,d,e,f,g=makeElement("div",null,{id:"cashTab","class":"tabcontent"});e=makeElement("div",g,{"class":"jsRX6Tabs"});item=makeElement("div",e);e=makeElement("div",item,{"class":"jqRX6buttonId1",style:"width:53%;float:left"});var h=999;for(ctCount=0;ctCount<ctLength;ctCount++){if(cityProperties[ctCount][ctPropCity]!=h)if(makeElement("div",e,{"class":"jsRX6BoxHeading"}).appendChild(document.createTextNode("Build from "+cities[cityProperties[ctCount][ctPropCity]][CITY_NAME]+
" properties")),h=cityProperties[ctCount][ctPropCity],h==NY){var l=[];c=RX6_getValue("propLevels",JSON.stringify([]));IsJsonString(c)&&(l=JSON.parse(c))}else{c="";switch(h){case BRAZIL:c=RX6_getValue("brazilReport",JSON.stringify([]));break;case CHICAGO:c=RX6_getValue("chicagoReport",JSON.stringify([]));break;case LONDON:c=RX6_getValue("londonReport",JSON.stringify([]))}var k=JSON.parse(c)}b=cityProperties[ctCount][ctTitle];c=cityProperties[ctCount][ctGMId];var p=99;if(h==NY){if(0<l.length){var n=
l.searchArray(cityProperties[ctCount][ctPropId],0);!1!==n&&(p=l[n][2])}}else n=cityProperties[ctCount][ctPropId]-1,k.hasOwnProperty("properties")&&(p=k.properties[n].level);var r=makeElement("div",e);makeElement("input",r,{type:"checkbox",id:c,value:"checked"},c);c=cityProperties[ctCount][ctGMId]+"Id";a=makeElement("select",r,{id:c,"class":"RX6dropdown2"});d=makeElement("label",r,{"for":c,title:b,style:"width:100px"});d.appendChild(document.createTextNode(cityProperties[ctCount][ctText]));n=0;for(d=
cityProperties[ctCount][ctArray].length;n<d;++n){var q;q=n+1;if(1==cityProperties[ctCount][ctPropType]||6==cityProperties[ctCount][ctPropType])q=cityProperties[ctCount][ctArray][n][3];q=q>p?makeElement("option",null,{value:n,title:cityProperties[ctCount][ctArray][n][2]+" - Unlocks at Level: "+q,style:"color:#FF0000;"}):makeElement("option",null,{value:n,title:cityProperties[ctCount][ctArray][n][2]+" - Unlocks at Level: "+q});q.appendChild(document.createTextNode(cityProperties[ctCount][ctArray][n][0]));
a.appendChild(q)}a.selectedIndex=RX6_getValue(c,0);a.setAttribute("title",cityProperties[ctCount][ctArray][a.selectedIndex][2]);p||(r.style.display="none")}e=makeElement("div",item,{"class":"jqRX6buttonId1",style:"width:38%;float:right"});makeElement("div",e,{"class":"jsRX6BoxHeading"}).appendChild(document.createTextNode("Ask for City Parts"));ctCount=0;for(cpLength=cityParts.length;ctCount<cpLength;ctCount++){b=cityParts[ctCount][ptTitle];c=cityParts[ctCount][ptGMId];r=makeElement("div",e);makeElement("input",
r,{type:"checkbox",id:c,value:"checked"},c);if(cityParts[ctCount][ptPropId]){c=cityParts[ctCount][ptGMId]+"Id";a=makeElement("select",r,{id:c,"class":"RX6dropdown2"});n=0;for(d=cityParts[ctCount][ptArray].length;n<d;++n)q=makeElement("option",null,{value:n,title:cityParts[ctCount][ptArray][n][0]}),q.appendChild(document.createTextNode(cityParts[ctCount][ptArray][n][0])),a.appendChild(q);a.selectedIndex=RX6_getValue(c,0)}d=makeElement("label",r,{"for":c,title:b});d.appendChild(document.createTextNode(cityParts[ctCount][ptProp]))}e=
makeElement("div",item,{"class":"jqRX6buttonId1",style:"width:38%;float:right"});makeElement("div",e,{"class":"jsRX6BoxHeading"}).appendChild(document.createTextNode("Auto Collect Cash Takes"));c=[["collectTakeNew York","Automatically collect from NY / LV properties"," Auto Collect Cash in New York / LV"],["collectTakeBrazil","Automatically collect from BRAZIL properties"," Auto Collect in BRAZIL"],["collectTakeChicago","Automatically collect from CHICAGO propertties","Auto Collect in CHICAGO"],["collectTakeLondon",
"Automatically collect from LONDON properties","Auto Collect in LONDON"],["collectParts","Automatically collect Parts from properties","Auto Collect Parts from Properties"]];for(n=0;n<c.length;n++)q=c[n],d=makeElement("div",e),makeElement("input",d,{type:"checkbox",id:q[0],value:"checked"},q[0]),d=makeElement("label",d,{"for":q[0],title:q[1]}),d.appendChild(document.createTextNode(q[2]));e=makeElement("div",item,{"class":"jqRX6buttonId1",style:"width:38%;float:right"});makeElement("div",e,{"class":"jsRX6BoxHeading"}).appendChild(document.createTextNode("Auto Upgrade New York / Family Props"));
c=makeElement("div",e);q=makeElement("ul",c,{style:"border: 1px solid rgb(204, 204, 204); width: 150px; height: 90px; list-style: none outside none; overflow: auto;"});n=0;for(d=autoUpgradeNYBuildings.length;n<d;n++)buildingListItem=makeElement("li",q,{style:"z-index:99999;"}),c="upgradeNYProperty"+autoUpgradeNYBuildings[n][1],buildingListSelectItem=makeElement("input",buildingListItem,{type:"checkbox",id:c,value:"unchecked"},c),makeElement("label",buildingListItem,{"for":c,title:autoUpgradeNYBuildings[n][0]}).appendChild(document.createTextNode(autoUpgradeNYBuildings[n][0]));
c=makeElement("div",e);c=makeElement("select",c,{id:"autoUpgradeNYChoice",title:"autoUpgrade NY Properties.","class":"RX6dropdown2"});n=0;for(d=autoUpgradeNYChoices.length;n<d;++n)q=document.createElement("option"),q.value=n,q.appendChild(document.createTextNode(autoUpgradeNYChoices[n][0])),c.appendChild(q);c.selectedIndex=RX6_getValue("autoUpgradeNYChoice",0);b="Minimum NY Bank Balance";makeElement("div",e).appendChild(document.createTextNode(b));c="userMinBalance";n=makeElement("div",e);makeElement("input",
n,{type:"text",style:"position: static; text-align: right;",title:b,value:RX6_getValue(c,"100000000"),id:c,size:"15"});makeElement("br",e,{"class":"unhide"});RX6_getValue("fnirInyhrSum",returnValue())==parseXMLResponse()&&(f=!0);f||(b="RX6 PRO FEATURE Only",makeElement("div",e).appendChild(document.createTextNode(b)));b="Automatically Upgrade/Collect Limited properties";c="autoLimitedParts";n=makeElement("div",e);a=makeElement("input",n,{type:"checkbox",id:c,value:"checked"},c);d=makeElement("label",
n,{"for":c,title:b});d.appendChild(document.createTextNode(" Auto Upgrade Limited Property"));c=a;f||(c.checked=!1,c.enabled=!0);b="Automatically Ask/Upgrade Family properties";c="autoFamilyProperty";e=makeElement("div",e);a=makeElement("input",e,{type:"checkbox",id:c,value:"checked"},c);d=makeElement("label",e,{"for":c,title:b});d.appendChild(document.createTextNode(" Auto Ask/Upgrade Family Property"));e=a;f||(e.checked=!1,e.enabled=!0);e=makeElement("div",item,{"class":"jqRX6buttonId1",style:"width:38%;float:right;padding-top:13px;padding-bottom:32px"});
makeElement("div",e,{"class":"jsRX6BoxHeading"}).appendChild(document.createTextNode("Auto Bank in Cites"));n=0;for(d=cities.length;n<d;++n)if((1>n||3<n)&&5!=n)if(c=cities[n][CITY_AUTOBANK],f=makeElement("div",e),makeElement("input",f,{type:"checkbox",id:c,value:"checked"},c),c=cities[n][CITY_BANKCONFG],b="Min Dep in "+cities[n][CITY_NAME],makeElement("input",f,{type:"text",title:b,style:"width:100px",value:RX6_getValue(c,"50000"),id:c,size:"5"}),makeElement("img",f,{style:"margin:1px 5px 0px 3px",
src:stripURI(cities[n][CITY_CASH_ICON])}),makeElement("label",f,{"for":c}).appendChild(document.createTextNode(b)),4==n){f=makeElement("div",e);b="Las Vegas: disable automatic vault handling, or select the level of your vault and let RX6 MWAP handle it.";c="vaultHandling";makeElement("img",f,{src:stripURI(cashVegasIcon),style:"margin-right: 5px;"});f=makeElement("select",f,{id:c,title:b,style:"position: static; text-align: left;"});q=0;for(b=vaultLevels.length;q<b;++q)l=makeElement("option",null,
{value:q}),l.appendChild(document.createTextNode(vaultLevels[q][0])),f.appendChild(l);f.selectedIndex=RX6_getValue(c,0)}e=makeElement("div",item,{"class":"jqRX6buttonId1",style:"width:53%;float:left"});makeElement("div",e,{"class":"jsRX6BoxHeading"}).appendChild(document.createTextNode("Ask for Parts"));b="Check this to Ask Friends to Play your Slots every 4 hours";c="askPlaySlots";n=makeElement("div",e);makeElement("input",n,{type:"checkbox",id:c,value:"checked"},c);d=makeElement("label",n,{"for":c,
title:b});d.appendChild(document.createTextNode("Ask to Play your Slots"));b="Check this to Ask for Vegas Parts every 2 hours, since no MW timer available";c="askVegasParts";f=makeElement("div",e);makeElement("input",f,{type:"checkbox",id:c,value:"checked"},c);d=makeElement("label",f,{"for":c,title:b});d.appendChild(document.createTextNode("Vegas Parts"));c="askVegasPartsId";b=makeElement("select",f,{id:c,"class":"RX6dropdown2",style:"width:105px;margin-left:16px"});n=0;for(d=cityVegasParts.length;n<
d;++n)q=makeElement("option",null,{value:n,title:cityVegasParts[n][0]}),q.appendChild(document.createTextNode(cityVegasParts[n][0])),b.appendChild(q);b.selectedIndex=RX6_getValue(c,0);f.appendChild(document.createTextNode("to upgrade "));c="askVegasPropId";f=makeElement("select",f,{id:c,"class":"RX6dropdown2",style:"width:105px"});n=0;for(d=cityVegasProps.length;n<d;++n)q=makeElement("option",null,{value:cityVegasProps[n][1],title:cityVegasProps[n][0]}),q.appendChild(document.createTextNode(cityVegasProps[n][0])),
f.appendChild(q);f.selectedIndex=RX6_getValue(c,0);b="Check this to Ask for Brazil Parts every 2 hours, since no MW timer available";c="askBrazilParts";f=makeElement("div",e);makeElement("input",f,{type:"checkbox",id:c,value:"checked"},c);d=makeElement("label",f,{"for":c,title:b});d.appendChild(document.createTextNode("Brazil Parts"));c="askBrazilPartsId";b=makeElement("select",f,{id:c,"class":"RX6dropdown2",style:"width:105px;margin-left:20px"});n=0;for(d=cityBrazilParts.length;n<d;++n)q=makeElement("option",
null,{value:n,title:cityBrazilParts[n][0]}),q.appendChild(document.createTextNode(cityBrazilParts[n][0])),b.appendChild(q);b.selectedIndex=RX6_getValue(c,0);f.appendChild(document.createTextNode("to upgrade "));c="askBrazilPropId";f=makeElement("select",f,{id:c,"class":"RX6dropdown2",style:"width:105px"});n=0;for(d=cityBrazilProps.length;n<d;++n)q=makeElement("option",null,{value:cityBrazilProps[n][1],title:cityBrazilProps[n][0]}),q.appendChild(document.createTextNode(cityBrazilProps[n][0])),f.appendChild(q);
f.selectedIndex=RX6_getValue(c,0);b="Check this to Ask for Chicago Parts every 2 hours, since no MW timer available";c="askChicagoParts";f=makeElement("div",e);makeElement("input",f,{type:"checkbox",id:c,value:"checked"},c);d=makeElement("label",f,{"for":c,title:b});d.appendChild(document.createTextNode("Chicago Parts"));c="askChicagoPartsId";b=makeElement("select",f,{id:c,"class":"RX6dropdown2",style:"width:105px;margin-left:6px"});n=0;for(d=cityChicagoParts.length;n<d;++n)q=makeElement("option",
null,{value:n,title:cityChicagoParts[n][0]}),q.appendChild(document.createTextNode(cityChicagoParts[n][0])),b.appendChild(q);b.selectedIndex=RX6_getValue(c,0);f.appendChild(document.createTextNode("to upgrade "));c="askChicagoPropId";f=makeElement("select",f,{id:c,"class":"RX6dropdown2",style:"width:105px"});n=0;for(d=cityChicagoProps.length;n<d;++n)q=makeElement("option",null,{value:cityChicagoProps[n][1],title:cityChicagoProps[n][0]}),q.appendChild(document.createTextNode(cityChicagoProps[n][0])),
f.appendChild(q);f.selectedIndex=RX6_getValue(c,0);b="Check this to Ask for London Parts every 2 hours, since no MW timer available";c="askLondonParts";e=makeElement("div",e);makeElement("input",e,{type:"checkbox",id:c,value:"checked"},c);d=makeElement("label",e,{"for":c,title:b});d.appendChild(document.createTextNode("London Parts"));c="askLondonPartsId";f=makeElement("select",e,{id:c,"class":"RX6dropdown2",style:"width:105px;margin-left:8px"});n=0;for(d=cityLondonParts.length;n<d;++n)q=makeElement("option",
null,{value:n,title:cityLondonParts[n][0]}),q.appendChild(document.createTextNode(cityLondonParts[n][0])),f.appendChild(q);f.selectedIndex=RX6_getValue(c,0);e.appendChild(document.createTextNode("to upgrade "));c="askLondonPropId";e=makeElement("select",e,{id:c,"class":"RX6dropdown2",style:"width:105px"});n=0;for(d=cityLondonProps.length;n<d;++n)q=makeElement("option",null,{value:cityLondonProps[n][1],title:cityLondonProps[n][0]}),q.appendChild(document.createTextNode(cityLondonProps[n][0])),e.appendChild(q);
e.selectedIndex=RX6_getValue(c,0);return g}
function grabToolbarInfo(a){RX6_setValue("miniAvailable",!1);var b=function(){var a=function(a){window.open(a,"toolbar","resizable=yes,scrollbars=yes,status=yes")};window.setTimeout(function(){a("http://toolbar.zynga.com/game_iframe_proxy.php?playing=true")},1E3);window.setTimeout(function(){a("http://toolbar.zynga.com/game_iframe_proxy.php")},5E3)};gvar.isGreaseMonkey?GM_xmlhttpRequest({method:"GET",url:"http://toolbar.zynga.com/game_stats_proxy.php?src=mw",headers:{Accept:"application/json"},onload:function(c){if(200==
c.status){var d=JSON.parse(c.responseText);DEBUG("Toolbar response: "+c.responseText);!d||d.error||'{"error":false}'==c.responseText?a&&window.confirm("Error retrieving Toolbar info, probably because its the first time you are trying to fire the miniPack in this browser/-profile.\n\nDo you want MWAP to create the necessary cookies for you? If not, you have to install the Zynga Toolbar.\nPS: For this to work, you need to allow popups in your browser, and wait for ca. 10 secs before closing the popup (after confirming this dialog).")?
(b(),setGMTime("miniPackTimer","1 hour")):(addToLog("omg Icon","RX6 could not retrieve the Toolbar Info ... Make sure you have the Zynga Toolbar installed ! Retrying in 8 hours"),setGMTime("miniPackTimer","8 hours")):d.special_energy_pack?(addToLog("info Icon","RX6 succesfully retrieved the Toolbar Info ...<br>Time left to next available Toolbar Mini-pack: "+secondsToHMS(d.special_energy_pack)),setGMTime("miniPackTimer",d.special_energy_pack+" seconds")):(addToLog("yeah Icon",'RX6 succesfully retrieved the Toolbar Info ...<br>Toolbar Mini-pack: <span class="good">AVAILABLE NOW</span> !'),
setGMTime("miniPackTimer","8 hours"),RX6_setValue("miniAvailable",!0));customizeEnergyStats()}}}):a&&window.confirm("Can't retrieve Toolbar info with this browser.\n\nIn case the miniPack doesn't work here at all,\nyou could let MWAP create the necessary cookies for you.\nPS: For this to work, you need to allow popups in your browser, and wait for ca. 10 secs before closing the popup (after confirming this dialog).")&&b()}
function validateStaminaTab(){var a={};a.staminaSpend=!0===document.getElementById("staminaSpend").checked?"checked":0;a.staminaSpendHow=returnElement(["staminaSpendHow",1]);a.staminaLogDetails=returnElement(["staminaLogDetails",3]);a.selectStaminaUse=returnElement(["selectStaminaUse",2],0);a.selectStaminaUseMode=returnElement(["selectStaminaUseMode",1]);a.selectStaminaKeep=returnElement(["selectStaminaKeep",2],0);a.selectStaminaKeepMode=returnElement(["selectStaminaKeepMode",1]);a.selectMissionStaminaKeep=
returnElement(["selectMissionStaminaKeep",2],0);a.selectMissionStaminaKeepMode=returnElement(["selectMissionStaminaKeepMode",1]);a.allowStaminaToLevelUp=returnElement(["allowStaminaToLevelUp",3]);switch(a.staminaSpendHow){case STAMINA_HOW_ROBFIGHT:case STAMINA_HOW_ROBFIGHT_BG:a.robFightStaminaFloor=parseInt(document.getElementById("robFightStaminaFloor").value),a.robFightStaminaFloor=returnElement(["robFightStaminaFloor",2],25),a.robFightStaminaFloor>maxStamina&&(a.robFightStaminaFloor=maxStamina);
case STAMINA_HOW_FIGHTROB:case STAMINA_HOW_FIGHTROB_BG:a.robLocation=returnElement(["robLocation",1]),a.fastRob=returnElement(["fastRob",3]),a.fastRobSpeed=returnElement(["fastRobSpeed",1]),a.useRobSquads=returnElement(["useRobSquads",3]),a.useBurners=returnElement(["useBurners",3]);case STAMINA_HOW_FIGHT_RANDOM:case STAMINA_HOW_FIGHT_BG:a.fightLocation=returnElement(["fightRandomLoc",1]);a.reattackThreshold=returnElement(["reattackThreshold",2],0);a.iceCheck=returnElement(["iceCheck",3]);a.staminaPowerattack=
returnElement(["staminaPowerattack",3]);a.noBGFTravel=returnElement(["noBGFTravel",3]);a.fastBGFSpeed=returnElement(["fastBGFSpeed",1]);a.fightFallback=returnElement(["fightFallback",3]);a.useDoubleTap=returnElement(["useDoubleTap",3]);a.useAvoidLittleDamage=returnElement(["useAvoidLittleDamage",3]);a.useAvoidListBosses=returnElement(["useAvoidListBosses",3]);a.fightLevelMax=returnElement(["fightLevelMax",2],1E3);a.fightLevelMaxRelative=returnElement(["fightLevelMaxRelative",3]);a.fightMafiaMax=returnElement(["fightMafiaMax",
2],501);a.fightMafiaMaxRelative=returnElement(["fightMafiaMaxRelative",3]);a.fightMafiaMin=returnElement(["fightMafiaMin",2],501);a.fightMafiaMinRelative=returnElement(["fightMafiaMinRelative",3]);level?!a.fightLevelMaxRelative&&a.fightLevelMax<800*level&&(a.fightLevelMax=parseInt(800*level),addToLog("warning Icon","Maximum level for fighting is set to "+a.fightLevelMax+" (Minimum for RX6 is 8000% of your current level: "+level+")")):(a.fightLevelMax=1E3,addToLog("warning Icon","Maximum level for fighting is set to "+
a.fightLevelMax+" (Current player level unknown."));a.fightHealthMax=returnElement(["fightHealthMax",2],0);a.fightHealthPctMax=returnElement(["fightHealthPctMax",2],0);a.fightMobMode=returnElement(["fightMobMode",3]);a.fightIceStealers=returnElement(["fightIceStealers",3]);a.fightNames=returnElement(["fightNames",3]);a.fightAvoidNames=returnElement(["fightAvoidNames",3]);a.fightOnlyNames=returnElement(["fightOnlyNames",3]);a.fightClanName=returnElement(["fightClanName",2]);a.fightRemoveStronger=returnElement(["fightRemoveStronger",
3]);a.fightRivalsMode=returnElement(["fightRivalsMode",1]);a.useFightBoosts=returnElement(["useFightBoosts",1]);a.fightMaxAttacks=returnElement(["fightMaxAttacks",2],250);a.fightLabelCriteria=returnElement(["fightLabelCriteria",1]);if("checked"==a.fightNames){var b=String(a.fightClanName).split("\n");if(!b[0])return alert("Enter at least one clan name/symbol in the list"),!1}break;case STAMINA_HOW_FIGHT_LIST:case STAMINA_HOW_FIGHT_LIST_BG:a.fightLocation=returnElement(["fightListLoc",1]);a.reattackThresholdList=
returnElement(["reattackThresholdList",2],0);a.iceCheck=returnElement(["iceCheck",3]);a.staminaPowerattack=returnElement(["staminaPowerattack",3]);a.noBGFTravel=returnElement(["noBGFTravel",3]);a.pfightlist=returnElement(["pfightlist",2]);a.fightRemoveStronger=returnElement(["fightRemoveStronger",3]);a.fastBGFSpeed=returnElement(["fastBGFSpeed",1]);a.fightFallback=returnElement(["fightFallback",3]);a.useDoubleTap=returnElement(["useDoubleTap",3]);a.useAvoidLittleDamage=returnElement(["useAvoidLittleDamage",
3]);a.useAvoidListBosses=returnElement(["useAvoidListBosses",3]);b=String(a.pfightlist).split("\n");if(!b[0])return alert("Enter the Facebook ID of at least one opponent to fight."),!1;break;case STAMINA_HOW_HITMAN:a.hitmanLocation=returnElement(["hitmanLocation",1]);a.hitmanBountyMin=returnElement(["hitmanBountyMin",2],0);a.bountySelection=returnElement(["bountySelection",1]);a.bgCollectHitCheck=returnElement(["bgCollectHitCheck",3]);a.hitmanNames=returnElement(["hitmanNames",3]);a.hitmanAvoidNames=
returnElement(["hitmanAvoidNames",3]);a.hitmanOnlyNames=returnElement(["hitmanOnlyNames",3]);a.hitmanClanName=returnElement(["hitmanClanName",2]);a.fightRemoveStronger=returnElement(["fightRemoveStronger",3]);if("checked"==a.hitmanNames&&(b=String(a.hitmanClanName).split("\n"),!b[0]))return alert("Enter at least one clan name/symbol in the list"),!1;break;case STAMINA_HOW_ROBBING:case STAMINA_HOW_ROBBING_BG:a.robLocation=returnElement(["robLocation",1]);a.fastRob=returnElement(["fastRob",3]);a.fastRobSpeed=
returnElement(["fastRobSpeed",1]);a.useRobSquads=returnElement(["useRobSquads",3]);a.useBurners=returnElement(["useBurners",3]);break;case STAMINA_HOW_AUTOHITLIST:a.autoHitListLoc=returnElement(["autoHitListLoc",1]);a.autoHitListBounty=returnElement(["autoHitListBounty",1],1E4);a.autoHitListRandom=returnElement(["autoHitListRandom",3]);a.pautoHitOpponentList=returnElement(["pautoHitOpponentList",2]);a.bgAutoHitCheck=returnElement(["bgAutoHitCheck",3]);b=String(a.pautoHitOpponentList).split("\n");
if(!b[0])return alert("Enter the Facebook ID of at least one opponent to hitlist."),!1;break;case STAMINA_HOW_RANDOM:for(var c="",d=document.getElementsByName("randomSpendModes[]"),b=0;b<d.length;++b)c=d[b].checked?c+"1":c+"0";parseInt(c)||(c="1"+c.substr(1));a.randomSpendModes=c;c="";d=document.getElementsByName("randomFightLocations[]");for(b=0;b<d.length;++b)c=d[b].checked?c+"1":c+"0";parseInt(c)||(c="1"+c.substr(1));a.randomFightLocations=c;c="";d=document.getElementsByName("randomRobLocations[]");
for(b=0;b<d.length;++b)c=d[b].checked?c+"1":c+"0";parseInt(c)||(c="1"+c.substr(1));a.randomRobLocations=c;c="";d=document.getElementsByName("randomHitmanLocations[]");for(b=0;b<d.length;++b)c=d[b].checked?c+"1":c+"0";parseInt(c)||(c="1"+c.substr(1));a.randomHitmanLocations=c;break;default:colorDEBUG("BUG DETECTED: Unrecognized stamina setting here: staminaSpendHow="+a.staminaSpendHow,cre)}return a}
function clickAutoPause(){this.checked&&(!1===document.getElementById("autoPauseBefore").checked&&!1===document.getElementById("autoPauseAfter").checked)&&(document.getElementById("autoPauseBefore").checked=!0)}function clickUseFightNames(){this.checked&&(!1===document.getElementById("fightAvoidNames").checked&&!1===document.getElementById("fightOnlyNames").checked)&&(document.getElementById("fightAvoidNames").checked=!0)}
function clickUseHitmanNames(){this.checked&&(!1===document.getElementById("hitmanAvoidNames").checked&&!1===document.getElementById("hitmanOnlyNames").checked)&&(document.getElementById("hitmanAvoidNames").checked=!0)}
function handleUnexpectedPage(){DEBUG("Unexpected page.");var a=document.getElementById("try_again_button");if(a){var b=10,c=document.createElement("p"),d=function(){if(!b)return a.click();c.innerHTML="RX6 MWAP will automatically try again in "+b--+" seconds.";window.setTimeout(d,1E3);return!1};DEBUG('Service interruption: "Try Again" button seen.');a.parentNode.appendChild(document.createElement("br"));a.parentNode.appendChild(c);d()}else{var e=xpathFirst('//a[contains(., "Skip")]');e?(Autoplay.fx=
function(){clickElement(e)},Autoplay.delay=getAutoPlayDelay()):(Autoplay.fx=function(){document.body?DEBUG("Can't read page. Possible white out?"):DEBUG("No body. Possible redirect, white out or slow load?");goHome()},Autoplay.delay=5E3);Autoplay.start()}}var fightCount=0,ajaxCount=0;
function handleModificationTimer(a){function b(a){if(a&&0<a.length&&!onProfileNav())for(var b=0,c=a.length;b<c;++b)if(a[b].scrollWidth&&0<a[b].innerHTML.length){running&&(d=!0);break}}try{if(ajaxHandling)colorDEBUG("waiting for ajax repsonse",cli),10<ajaxCount++&&(ajaxHandling=!1,ajaxCount=0);else{var c=new_header?xpathFirst('//div[@class="header_top_row"]'):xpathFirst('//div[contains(@id,"mw_masthead")]');if(!c||!c.scrollWidth||!refreshGlobalStats())handleUnexpectedPage();else{refreshSettings();
synchSettings();var d=!1,c=!1,e=innerPageElt;if(innerPageElt=document.getElementById("inner_page")){appLayoutElt=document.getElementById("mw_city_wrapper");statsrowElt=document.getElementById("stats_row");menubarElt=document.getElementById("menubar");popupfodderElt=document.getElementById("popup_fodder");questBarElt=document.getElementById("quest");contentRoweElt=document.getElementById("content_row");xpathFirst('./div[@id="inner_flag"]',innerPageElt)?e!=innerPageElt&&(d=!0):(setListenContent(!1),
makeElement("div",innerPageElt,{id:"inner_flag",style:"display: none;"}),setListenContent(!0),d=!0);if(xpathFirst('.//div[@id="brazil_jobs"]',innerPageElt)&&(currentBrazilDistrict=getCurrentBrazilDistrict(),currentBrazilDistrict!=oldBrazilDistrict&&(oldBrazilDistrict=currentBrazilDistrict,d=!0),currentBrazilDistrict)){var e=!1,f=xpathFirst('.//div[@id="brazil_district_'+currentBrazilDistrict+'"]//div[@class="jobs"]//div[@class="job " and contains (@style,"fff")]//div[@class="mastery_bar"]',innerPageElt);
f||(f=xpathFirst('.//div[@id="brazil_district_'+currentBrazilDistrict+'"]//div[contains(@id,"job-id")]//div[@class="job " and contains (@style,"fff")]//div[@class="mastery_bar"]',innerPageElt));f||(f=xpathFirst('.//div[@id="brazil_district_'+currentBrazilDistrict+'"]//div[@class="jobs"]//div[@class="job " and contains (@style,"255")]//div[@class="mastery_bar"]',innerPageElt));f||(f=xpathFirst('.//div[@id="brazil_district_'+currentBrazilDistrict+'"]//div[contains(@id,"job-id")]//div[@class="job " and contains (@style,"255")]//div[@class="mastery_bar"]',
innerPageElt));if(f){var g=f.parentNode.parentNode;previousBrazilJobRow!=g.innerHTML.untag()&&(previousBrazilJobRow=g.innerHTML.untag(),e=!0);if(e){if(!xpathFirst('.//div[@id="job_flag"]',g)){setListenContent(!1);var h=makeElement("div",g,{id:"job_flag",style:"display: none;"});makeElement("div",h,{id:"job_response",style:"display: none;"});setListenContent(!0)}setListenContent(!1);makeElement("div",h,{id:"job_response",style:"display: none;"});setListenContent(!0);d=!0}}}var l=xpathFirst('.//div[@id="new_user_jobs"]//div[@class="job_results"]',
innerPageElt);l&&!xpathFirst('.//div[@id="job_flag"]',l)&&(setListenContent(!1),makeElement("div",l,{id:"job_flag",style:"display: none;"}),setListenContent(!0),d=!0);var k=xpathFirst('.//div[@id="job_paths"]//div[contains(@class, "path_on")]',innerPageElt);k&&!xpathFirst('.//div[@id="job_path_flag"]',k)&&(setListenContent(!1),makeElement("div",k,{id:"job_path_flag",style:"display: none;"}),setListenContent(!0),d=!0);var p=$x('.//div[@id="map_panels"]/div[@id="side_container"]//div[@class="job_results"]',
innerPageElt);if(p&&0<p.length)for(var f=0,n=p.length;f<n;++f)p[f]&&!xpathFirst('./div[@id="job_flag"]',p[f])&&(setListenContent(!1),makeElement("div",p[f],{id:"job_flag",style:"display: none;"}),setListenContent(!0),d=!0);var r=xpathFirst('.//div[@class="task_results"]',innerPageElt);r&&(r&&!xpathFirst('./div[@id="task_flag"]',r))&&(setListenContent(!1),makeElement("div",r,{id:"task_flag",style:"display: none;"}),setListenContent(!0),d=!0);var q=xpathFirst('.//a[@id="rob_refresh_cost"]',innerPageElt);
q&&!xpathFirst('.//div[@id="rob_flag"]',q)&&(setListenContent(!1),makeElement("div",q,{id:"rob_flag",style:"display: none;"}),setListenContent(!0),d=!0,running&&(c=!0));if(!running){var t=$x('.//div[contains(@id, "pop_b") and not(contains(@style, "none"))]',popupfodderElt);showPopups(t);t=$x('.//div[@class="fight_true_popup"]//div[contains(@id, "pop_b") and not(contains(@style, "none"))]',innerPageElt);showPopups(t)}t=$x('.//div[contains(@id, "pop_b") and contains(@style, "block")]',popupfodderElt);
b(t);t=$x('.//div[@class="fight_true_popup"]//div[contains(@id, "pop_b") and contains(@style, "block")]',innerPageElt);b(t);if(d)try{innerPageChanged(c)}catch(s){DEBUG("BUG DETECTED (pageChanged): "+s)}else running&&(a&&("cur_cash"==a.className||a.parentNode&&"cur_cash"==a.parentNode.className))&&doQuickBank()}}}}catch(y){colorDEBUG("ModTimeError: "+y,cre)}}
function setModificationTimer(a){modificationTimer&&window.clearTimeout(modificationTimer);modificationTimer=window.setTimeout(function(){handleModificationTimer(a)},400)}function handleContentModified(a){ignoreElement(a.target)||setModificationTimer(a.target)}var crewList="";
function handleRequests(){var a=xpathFirst('.//div[@class="freegift_title"]');a||(a=xpathFirst('.//div[contains(.,"crew requests"]'));try{if(RX6_getValue("isRunning")){if(inRequests)return;var b=$x('.//div[@class="mfs_selectable"]//li[@class="mfs_add" and not(contains(@style,"none"))]');xpathFirst('.//div[@id="mfs_tab_12" and contains(@class,"inactive")]');var c=xpathFirst('.//div[@id="mfs_tab_8" and contains(@class,"inactive")]'),d=xpathFirst('.//div[@id="mfs_tab_2" and contains(@class,"inactive")]');
if((!xpathFirst('.//div[@id="mfs_tab_3" and contains(@class,"inactive")]')||!c)&&d||21>b.length&&d)a.innerHTML="going to open mfs_tab_2 for more mafia members",clickElement(d);a.innerHTML="we are on mfs_tab_2 - selecting mafia";var e=xpathFirst('.//a[@class="sexy_button_new medium orange" and contains(@onclick,"MW.Request.submitMFS") and contains(.,"SEND REQUESTS")]'),b=$x('.//div[@class="mfs_selectable"]//li[@class="mfs_add" and not(contains(@style,"none"))]');if(0<b.length&&e&&!inRequests){inRequests=
!0;a.innerHTML+="<br>mafia members and request button found";var f=xpathFirst('.//a[@id="selectMaxButton" and not (contains(@class,"disabled"))]');if(f)a.innerHTML+="<br>randombutton found and clicked",clickElement(f);else{a.innerHTML+="<br>randombutton not found clicking single mafia";var g=50<b.length?50:b.length;for(i=0;i<g;i++)clickElement(b[i])}a.innerHTML+="<br>mafia selected clicking requestbutton";clickElement(e);setGMTime("requestTimer","00:30")}else a.innerHTML+="<br>no mafia selected - closing popup",
setGMTime("autoFreeGiftTimer","1 hour"),inRequests=!1,"function"==typeof unsafeWindow.close_suggestor_iframe?unsafeWindow.close_suggestor_iframe():setGMTime("requestTimer","00:00")}else{var h=xpathFirst('.//div[@class="mfs_buttons"]'),l=xpathFirst('.//a[@id="selectMax"]'),b=$x('.//div[@class="mfs_selectable"]//li[@class="mfs_add" and not(contains(@style,"none"))]');if(h&&!l&&0<b.length){a.innerHTML+="<br> Max Number of Friends: "+b.length;var k=makeElement("a",h,{id:"selectMax",href:"#","class":"sexy_button_new medium orange",
alt:"select Max Friends (Current maximum : 50)",title:"select Max Friends (Current maximum : 50)",style:"margin-left:5px"});makeElement("span",k,{style:"padding:8px 10px 10px 10px"}).appendChild(document.createTextNode("SELECT MAX"));k.addEventListener("click",selectMaxFriends,!1)}}}catch(p){a.innerHTML="Requests error: "+p}window.setTimeout(handleRequests,2500)}
function selectMaxFriends(){var a=$x('.//div[@class="mfs_selectable"]//li[@class="mfs_add" and not(contains(@style,"none"))]');for(i=(50<a.length?50:a.length)-1;0<=i;i--)clickElement(a[i])}
function handlePublishing(){function a(a){var b=document.createEvent("MouseEvents");b.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null);a.dispatchEvent(b)}fetchPubOptions();if(RX6_getValue("isRunning"))try{var b=xpathFirst('//input[@type="submit" and @name="cancel"]');b||(b=xpathFirst('//input[@type="button" and @name="cancel"]'));var c=xpathFirst('//input[@type="submit" and @name="publish"]');c||(c=xpathFirst('//input[@type="button" and @name="publish"]'));var d=xpathFirst('//input[@type="submit" and @name="ok"]');
d||(d=xpathFirst('//input[@type="button" and @name="ok"]'));var e=xpathFirst('//input[@type="submit" and @name="ok_clicked"]');e||(e=xpathFirst('//input[@type="button" and @name="ok_clicked"]'));var f=xpathFirst('//a[@class="fb_dialog_close_icon"]');if(e)a(e);else if(d)a(d);else if(!c||!timeLeftGM("postTimer"))b?a(b):f&&a(f);if(b&&c)return isGMChecked("autoGlobalPublishing")?a(c):a(b),window.setTimeout(handlePublishing,2500),!0}catch(g){}window.setTimeout(handlePublishing,2500)}
function setListenContent(a){var b=document.getElementById("inner_page");b&&(a?b.addEventListener("DOMSubtreeModified",handleContentModified,!1):b.removeEventListener("DOMSubtreeModified",handleContentModified,!1))}function setListenStats(a){var b=document.getElementById("game_stats");b&&(a?b.addEventListener("DOMNodeInserted",statsInserted,!1):b.removeEventListener("DOMNodeInserted",statsInserted,!1))}
function statsInserted(a){if(!ignoreElement(a.target)){var b=a.target.parentNode;b&&(b==energyElt?(energy=parseInt(a.target.nodeValue),energyElt.style.textDecoration=energy==maxEnergy?"blink":"none"):b==staminaElt?(stamina=parseInt(a.target.nodeValue),staminaElt.style.textDecoration=stamina==maxStamina?"blink":"none"):b==healthElt&&(health=parseInt(a.target.nodeValue),health=0>health?0:health,healthElt.style.textDecoration=19<health&&29>health?"blink":"none"))}}
function doQuickBank(){!isNaN(city)&&!isNaN(cities[city][CITY_CASH])&&isGMChecked(cities[city][CITY_AUTOBANK])&&bgBanking(cities[city][CITY_CASH],city,1)}
function innerPageChanged(a){autoReload(!1,"innerpagechanged");doParseMessages();customizeBanner();getPlayerEquip();if(running&&(doQuickBank(),doQuickClicks(),questBarElt&&(inClanBattle=xpathFirst('.//div[contains(@class, "userInClanBattleShow") and not (contains(@style,"none"))]')?!0:!1)&&!inSafehouse&&isGMChecked("AutoBattleSafehouse")))inSafehouse=!0,battleLoad();if(!running||!a)setListenContent(!1),customizeMasthead(),customizeStats(),!customizeProps()&&(!customizeHome()&&!customizeJobs()&&!customizeProfile())&&
customizeFightLists(),setListenContent(!0);try{if(clickAction){var a=clickAction,b=clickContext;clickContext=clickAction=void 0;logResponse(innerPageElt,a,b)||doAutoPlay()}else doAutoPlay()}catch(c){addToLog("warning Icon","BUG DETECTED (doAutoPlay): "+c+". Reloading."),autoReload(!0,"error")}}function closeFBPopup(){if(running){var a=document.getElementById("fb_dialog_cancel_button");a&&clickElement(a)}}
function refreshGlobalStats(){var a=document.getElementById("mw_city_wrapper");if(!a)return!1;city=a.className.match(/mw_city(\d+)/)?parseInt(a.className.replace("mw_city",""))-1:NY;a=document.getElementById("fb_dialog_cancel_button");running&&a&&window.setTimeout(closeFBPopup,4E3);cashElt=document.getElementById("user_cash_"+cities[city][CITY_ALIAS]);healthElt=document.getElementById("user_health");maxHealthElt=document.getElementById("user_max_health");energyElt=document.getElementById("user_energy");
maxEnergyElt=document.getElementById("user_max_energy");staminaElt=document.getElementById("user_stamina");maxStaminaElt=document.getElementById("user_max_stamina");levelElt=document.getElementById("user_level");level=parseInt(levelElt.innerHTML);cities[city][CITY_CASH]=parseInt(unsafeWindow.User.cash);health=parseInt(unsafeWindow.User.health);health=0>health?0:health;maxHealth=parseInt(unsafeWindow.User.max_health);energy=parseInt(unsafeWindow.User.energy);maxEnergy=parseInt(unsafeWindow.User.max_energy);
stamina=parseInt(unsafeWindow.User.stamina);maxStamina=parseInt(unsafeWindow.User.max_stamina);level=parseInt(levelElt.innerHTML);ptsToNextLevel=parseInt(unsafeWindow.User.exp_to_next_level);boardLastStamina||(boardLastStamina=stamina);boardLastPtsToNextLevel||(boardLastPtsToNextLevel=ptsToNextLevel);mafia=RX6_getValue("userMafiaSize",0);if(!mafia||501>mafia)a=parseInt(unsafeWindow.User.mafia_size),mafia!=a&&(DEBUG("setting Mafia Size to: "+a),RX6_setValue("userMafiaSize",a));(a=document.getElementById("user_skill"))?
(stats=parseInt(a.innerHTML),isNaN(stats)&&(stats=0)):stats=0;isGMUndefined("currentLevel")&&(RX6_setValue("currentLevel",level),RX6_setValue("restAutoStat",0));level>RX6_getValue("currentLevel")&&(RX6_setValue("currentLevel",level),addToLog("experience Icon",'<span style="color:#00FFCC;"> Congratulations on reaching level <strong>'+level+"</strong>!</span>"),RX6_setValue("restAutoStat",0),RX6_setValue("availableJobs","({0:{},1:{},2:{},3:{},4:{},5:{},6:{},7:{},8:{},9:{}})"),window.setTimeout(getLevelUpBonus,
1E4),Autoplay.delay=150,Autoplay.start());customizeStatsRow();return!0}
function refreshSettings(){var a=0,b=0;try{1==GM_getIntValue("autoEnergyPack",0)&&(0>=unsafeWindow.EnergyPackModule.lastBuff+unsafeWindow.EnergyPackModule.epTimer-unsafeWindow.EnergyPackModule.now&&1<=unsafeWindow.EnergyPackModule.ePacksLeft)&&(a=1.25*maxEnergy),2==GM_getIntValue("autoEnergyPack",0)&&(0<unsafeWindow.PowerPackModule.packsLeft&&0==unsafeWindow.PowerPackModule.timeToUse)&&(b=1.25*maxStamina)}catch(c){}a=ptsToNextLevel<(stamina+b)*getStaminaGainRate()+(energy+a)*getEnergyGainRate()+autoFamilyProgress(1);
SpendStamina.refreshLimits(maxStamina,a);SpendEnergy.refreshLimits(maxEnergy,a);SpendMissionStamina.refreshLimits(maxStamina,a);SpendMissionEnergy.refreshLimits(maxEnergy,a);running&&(isGMChecked(SpendStamina.spendFlag)&&SpendStamina.toggleSpending(maxStamina,stamina),isGMChecked(SpendEnergy.spendFlag)&&SpendEnergy.toggleSpending(maxEnergy,energy),isGMChecked("autoStartFamOps")&&SpendMissionStamina.toggleSpending(maxStamina,stamina),isGMChecked("autoStartFamOps")&&SpendMissionEnergy.toggleSpending(maxEnergy,
energy));!0===RX6_getValue("autoPauseActivated")&&(isGMChecked("autoPauseBefore")&&RX6_getValue("autoPauselvlExp")<ptsToNextLevel)&&(RX6_setValue("autoPauselvlExp",ptsToNextLevel),RX6_setValue("autoPauseActivated",!1));running&&isGMChecked("autoPause")&&(isGMChecked("autoPauseBefore")&&RX6_getValue("autoPauseExp","")>=ptsToNextLevel&&!1===RX6_getValue("autoPauseActivated",!1)?(addToLog("pause Icon","Auto-pause in effect. Experience threshold reached."),RX6_setValue("autoPauseActivated",!0),pause()):
isGMChecked("autoPauseAfter")&&RX6_getValue("autoPauselvlExp","")<ptsToNextLevel&&(addToLog("pause Icon","Auto-pause in effect. Leveled up."),RX6_setValue("autoPauselvlExp",ptsToNextLevel),pause()))}function getStaminaGainRate(){var a=GM_getIntValue("totalExpInt",0),b=GM_getIntValue("fightWinCountInt",0)+GM_getIntValue("fightLossCountInt",0)+GM_getIntValue("hitmanWinCountInt",0)+GM_getIntValue("hitmanLossCountInt",0)+GM_getIntValue("totalRobStamInt",0);return!a||!b?2:a/b}
function getEnergyGainRate(){var a=GM_getFloatValue("estimateJobRatio","2");return!isNaN(a)?a:2}function setFBParams(){var a=document.getElementById("navAccountName");a&&RX6_setValue("FBName",String(a.innerHTML));RX6_setValue("language",document.documentElement.lang);sendMWValues(["language","FBName"])}function copyMWValues(a){if(!gvar.isGreaseMonkey){var b={},c;for(c in a)b[a[c]]="";b.action="getGM";chrome.extension.sendRequest(b,function(a){for(var b in a)RX6_setValue(b,a[b])})}}
function sendMWValues(a){if(!gvar.isGreaseMonkey){var b={},c;for(c in a)b[a[c]]=RX6_getValue(a[c]);b.action="setGM";chrome.extension.sendRequest(b)}}
function MWAP_RX6_PopupOpen(a,b,c){document.getElementById("popup_fodder").innerHTML='<div id="MWAP_RX6_Popup" class="pop_box" style="display: block; top:25px;left: 200px; width:350px;height:'+c+'px;z-index:99995;"><a id="MWAP_RX6_Popup_CloseLink" href="#" class="pop_close"></a><div class="mini_EP_body"><img src="http://mwfb.static.zgncdn.com/mwfb/graphics/empire/container_social.png" style="position:absolute;top:-50px;left:-152px;" height="30" width="350"><div style="position:relative;top:-55px;left:-152px;width:340px;height:25px;text-align:center;" class="empire_module_title"><span style="position:relative;top:-5px;text-align:center;">'+a+
'</span></div><div style="position:relative;left:-152px;top:-75px;text-align:center;width:340px;padding:5px;">'+b+'</div><br><a id="MWAP_RX6_Popup_CloseButton" href="javascript:void(0)" style="position:relative;top:10px" class="sexy_button_new black"><span><span>Close Popup</span></span></a></div></div>'}
function MWAP_RX6_PopupActivate(){var a=document.getElementById("MWAP_RX6_Popup_CloseButton");a&&a.addEventListener("click",MWAP_RX6_PopupClose,!1);(a=document.getElementById("MWAP_RX6_Popup_CloseLink"))&&a.addEventListener("click",MWAP_RX6_PopupClose,!1)}function MWAP_RX6_PopupClose(){$("#MWAP_RX6_Popup").hide();$("#content_row").height("auto");$("#MWAP_RX6_Popup").remove()}
function customizeBanner(){var a=document.location.protocol,b="RX6 MWAP ";if(RX6_getValue("fnirInyhrSum",returnValue())!=parseXMLResponse()){var b=b+'<span style="color:#FF0000">LITE</span> ',c=document.getElementById("quest"),d=null;c&&(d=document.getElementById("ps_mwap_promo_banner_top")?document.getElementById("ps_mwap_promo_banner_top"):makeElement("div",c,{id:"ps_mwap_promo_banner_top"}),document.getElementById("mwapiFrame")||makeElement("iframe",d,{id:"mwapiFrame",src:a+"//sugengwaybe.blogspot.com/",
scrolling:"no",frameborder:"0",style:"margin:0px;padding:0px; border:none; overflow:hidden; width:750px; height:95px;",allowTransparency:"false"}));if(c=document.getElementById("mw_city_wrapper"))d=document.getElementById("ps_mwap_promo_banner_bottom")?document.getElementById("ps_mwap_promo_banner_bottom"):makeElement("div",c,{id:"ps_mwap_promo_banner_bottom"}),document.getElementById("mwap2iFrame")||makeElement("iframe",d,{id:"mwap2iFrame",src:a+"//playerscripts.co.uk/ps-adbanner/ps-adbanner_bottom.html",
scrolling:"no",frameborder:"0",style:"margin:0px;padding:0px; border:none; overflow:hidden; width:750px; height:120px;",allowTransparency:"false"});getBrowserWindowSize();if(1024<winW||isGMChecked("leftAlign"))if(c=document.getElementById("final_wrapper"))d=document.getElementById("ps_mwap_promo_banner_sky")?document.getElementById("ps_mwap_promo_banner_sky"):makeElement("div",c,{id:"ps_mwap_promo_banner_sky"}),document.getElementById("mwap3iFrame")||makeElement("iframe",d,{id:"mwap3iFrame",src:a+
"//playerscripts.co.uk/ps-adbanner/ps-adbanner_sky.html",scrolling:"no",frameborder:"0",style:"position:fixed;margin:0px;padding:0px; border:none; overflow:hidden; width:165px; height:650px;z-index:1",allowTransparency:"false"})}else destroyByID("mwapiFrame"),destroyByID("ps_mwap_promo_banner_top"),destroyByID("mwapi2Frame"),destroyByID("ps_mwap_promo_banner_bottom"),destroyByID("mwapi3Frame"),destroyByID("ps_mwap_promo_banner_sky");b+=SCRIPT.version;new_header&&(b+=" (nH)");if(a=document.getElementById("mwapHeadTitle"))a.innerHTML=
b}
function refreshMWAPCSS(){try{var a=function(){if(document.getElementById("mwapStatCSS")){var b=document.getElementById("mwapDynCSS"),d="";b&&(d=b.innerHTML);b=' iframe[name="mafiawars_zbar"] {display: none;} div[class="footer_text"] {display: none;} div[id="zbar"] {display: none;} div[id="cpa_fights_banner"] {display: none;} div[id="cpa_jobs_banner"] {display: none;} div[style="background-color: #fff; height: 85px; padding: 0; margin: 0;"] {display: none;} #mafia_two_banner {display: none;}'+(isGMChecked("mastheadOnTop")?" #mw_masthead {position: fixed; z-index: 100; width: 755px;} #mw_masthead_zombie {position: fixed; z-index: 100; width: 755px;} #mw_masthead_human {position: fixed; z-index: 100; width: 755px;} #stats_row   {position: fixed; top: 55px; width: 762px; z-index: 12;} #menubar     {position: fixed; top: 135px; width: 762px; background-color: rgb(0, 0, 0); z-index: 12;} #quest       {position: relative; top: 250px; z-index: 11;} #content_row {position: relative; top: 250px;}":
"")+(isGMChecked("leftAlign")?" #ajax-container {margin: 0; position: static; text-align: left; width: 760px;}":" #ajax-container {margin: 0 auto; position: static; text-align: left; width: 760px;}")+'#zmc-envelope {display: none;} div[class$="zmc-envelope"] {display: none;} div[style$="float: left; width: 65px;"] {display: none;} a[class$="invite-friends"] {display: none;} span[style$="display: block; height: 16px;"] {margin-left:-65px;} div[style$="background-color: rgb(255, 255, 255); height: 85px; padding: 0pt; margin: 0pt;"] {display: none;}'+
(isGMChecked("leftAlign")?" #final_wrapper {margin: 0; position: static; text-align: left; width: 760px;}":" #final_wrapper {margin: 0 auto; position: static; text-align: left; width: 760px;}")+(isGMChecked("leftAlign")?" #mwap3iFrame {top:10px;left:810px;z-index:100}":" #mwap3iFrame {top:10px;left:10px;z-index:100}")+(isGMChecked("hideAll")?' a[style$="position: absolute; top: 7px; right: 134px; height: 23px; width: 43px; z-index: 2;"] {display: none;} a[style$="position: absolute; top: 7px; right: 134px; height: 23px; padding: 20px 0pt 0pt; width: 43px; z-index: 2;"] {display: none;} a[style$="position: absolute; top: 7px; right: 134px; height: 23px; padding: 20px 0 0; width: 43px; z-index: 2;"] {display: none;}':
' a[style$="position: absolute; top: 7px; right: 134px; height: 23px; width: 43px; z-index: 2;"] { !important; left: 760px !important; z-index: 2 !important;} a[style$="position: absolute; top: 7px; right: 134px; height: 23px; padding: 20px 0pt 0pt; width: 43px; z-index: 2;"] { !important; left: 760px !important; z-index: 2 !important;} a[style$="position: absolute; top: 7px; right: 134px; height: 23px; padding: 20px 0 0; width: 43px; z-index: 2;"] { !important; left: 760px !important; z-index: 2 !important;}')+
(isGMChecked("hideAll")?" #zstream_icon {display: none;}":" #zstream_icon {position: absolute; top: 65px; left:760px; z-index: 100;} ")+(isGMChecked("hideAll")?" #slots_icon_container  {display: none;} #slots_icon_cover      {display: none;}":" #slots_icon_container  {position: absolute; top: 85px; left: 760px; z-index: 99;}  #slots_icon_cover      {position: absolute; top: 85px; left: 760px; z-index: 100;} ")+(isGMChecked("hideAll")?" #gifticon_container {display: none;}":" #gifticon_container {position: absolute; top: 135px; left: 760px; z-index: 100;} ")+
(isGMChecked("hideAll")?" #buyframe_link_container_anim  {display: none;} #buyframe_link_cover_anim      {display: none;}":" #buyframe_link_container_anim  {position: absolute; top: 180px; left: 760px; z-index: 99;}  #buyframe_link_cover_anim      {position: absolute; top: 180px; left: 760px; z-index: 100;} ")+(isGMChecked("hideAll")?" #promoicon_container {display: none;}":" #promoicon_container {position: absolute; top: 230px; left: 755px; z-index: 100;} ")+(isGMChecked("hideAll")?" #buyframe_link_container  {display: none;} #buyframe_link_cover      {display: none;}":
" #buyframe_link_container  {position: absolute; top: 280px; left: 760px; z-index: 99;}  #buyframe_link_cover      {position: absolute; top: 280px; left: 760px; z-index: 100;} ")+(isGMChecked("hideAll")?' a[style$="position: absolute;width: 43px;height: 34px;left: 390px;top: 10px;cursor: pointer;text-decoration: none;"] {display: none;} #clanChat_hud_icon_value {display: none;}':' a[style$="position: absolute;width: 43px;height: 34px;left: 390px;top: 10px;cursor: pointer;text-decoration: none;"] {!important; position: absolute; top: 330px !important; left: 760px !important; z-index: 99 !important;}  #clanChat_hud_icon_value {!important, position: absolute; top: 330px !important; left: 760px !important; z-index: 100 !important;} ')+
(isGMChecked("hideAll")?' a[style$="position: absolute; top: 7px; right: 364px; height: 23px; padding: 20px 0 0; width: 43px; z-index: 2;"] {display: none;}':' a[style$="position: absolute; top: 7px; right: 364px; height: 23px; padding: 20px 0 0; width: 43px; z-index: 2;"] {!important; position: absolute; top: 380px !important; left: 760px !important; z-index: 100 !important;} ')+(isGMChecked("hideAll")?" #subscription_icon_container  {display: none;} #subscription_icon_cover      {display: none;}":
" #subscription_icon_container  {position: absolute; top: 430px; left: 760px; z-index: 99;}  #subscription_icon_cover      {position: absolute; top: 430px; left: 760px; z-index: 100;} ")+(isGMChecked("hideAll")?" .header_mid_row div.header_various {display: none;}":" .header_mid_row div.header_various {position: absolute; top: 1px; left: 825px; width: 12px; z-index: 100;} ")+(isGMChecked("hideZyngaBanner")?' div[id="header_top_promo_banner"] {display: none !important;}':"")+(isGMChecked("hideClanChat")?
' div[id="clanChat"] {display: none !important;}':"")+(isGMChecked("hideAll")?' div[class="tab_box_content"][style*="padding: 5px; text-align: center; margin-bottom: 420px;"], ':"")+(isGMChecked("hideAll")?" .message_box_full, ":"")+(isGMChecked("hideAll")?" .menu_divider, ":"")+(isGMChecked("hideAll")?' div[class="tab_box"][style*="left"], ':"")+(isGMChecked("hideAll")?' img[alt="Free Holiday Gifts!"],  img[alt="Gift Safe House"],  img[alt="Free Mystery Bag!"], ':"")+' div[class="pop_bg"] {display: none !important;} div.lootImg {float:left;width:50px;} div.lootImg img {width:45px !important;height:45px !important;} div[id="clan_menu"] {margin: 1px 14px 1px 500px !important; position: static !important;} div[id="family_button_container"] {width: 120px !important; height: 0px !important;} a[id="invite"] {width: 110px !important;} div[id="motd_change"] {position: static !important;} div.eventBody strong {color:#FFFFFF;}';
b=RX6_getValue("fnirInyhrSum",returnValue())!=parseXMLResponse()?b+" #fv2_widget_wrapper {margin-top:350px !important;}":b+" #fv2_widget_wrapper {margin-top:150px !important;}";$("#spockholm_toolbar").length&&(b+=" #mainDiv {top:35px;} #stats_row {top:100px;} #menubar {top:195px;}");b!=d&&remakeElement("style",document.getElementsByTagName("head")[0],{id:"mwapDynCSS",type:"text/css"}).appendChild(document.createTextNode(b))}else d=makeElement("link",document.getElementsByTagName("head")[0],{id:"mwapStatCSS",
type:"text/css",rel:"stylesheet"}),d.id="mwapStatCSS",d.setAttribute("href","https://dl.dropbox.com/s/zofff1c2cwrb44s/css-mwap.css"),window.setTimeout(a,350)};a()}catch(b){addToLog("warning Icon","BUG DETECTED (refreshMWAPCSS): "+b)}}
function showTimers(){var a="<br>  miniPackTimer: "+getHoursTime("miniPackTimer")+"<br>  askEventPartsTimer: "+getHoursTime("askEventPartsTimer")+"<br>  askHomePartsTimer: "+getHoursTime("askHomePartsTimer")+"<br>  askRobSquadsTimer: "+getHoursTime("askRobSquadsTimer")+"<br>  checkPropertyTimer: "+getHoursTime("checkPropertyTimer")+"<br>  askVegasPartsTimer: "+getHoursTime("askVegasPartsTimer")+"<br>  askPlaySlotsTimer: "+getHoursTime("askPlaySlotsTimer")+"<br>  askBrazilPartsTimer: "+getHoursTime("askBrazilPartsTimer")+
"<br>  askChicagoPartsTimer: "+getHoursTime("askChicagoPartsTimer")+"<br>  askLondonPartsTimer: "+getHoursTime("askLondonPartsTimer")+"<br>  tournamentTimer: "+getHoursTime("tournamentTimer")+"<br>  districtBossTimer: "+getHoursTime("districtBossTimer")+"<br>  autoOpenGiftsTimer: "+getHoursTime("autoOpenGiftsTimer")+"<br>  autoOpenFreeGiftsTimer: "+getHoursTime("autoOpenFreeGiftsTimer")+"<br>  resetHomePropTimer: "+getHoursTime("resetHomePropTimer");ctCount=0;for(cpLength=cityParts.length;ctCount<
cpLength;ctCount++)a+="<br>  "+cityParts[ctCount][ptTimer]+": "+getHoursTime(cityParts[ctCount][ptTimer]);for(ctCount=0;ctCount<ctLength;ctCount++)a+="<br>  "+cityProperties[ctCount][ctPropTimer]+": "+getHoursTime(cityProperties[ctCount][ctPropTimer]);a+="<br>  autoUpgradeNYTimer: "+getHoursTime("autoUpgradeNYTimer")+"<br>  takeHourNew York: "+getHoursTime("takeHourNew York")+"<br>  takeHourLas Vegas: "+getHoursTime("takeHourLas Vegas")+"<br>  takeHourBrazil: "+getHoursTime("takeHourBrazil")+"<br>  takeHourChicago: "+
getHoursTime("takeHourChicago")+"<br>  takeHourLondon: "+getHoursTime("takeHourLondon")+"<br>  partsHour: "+getHoursTime("partsHour")+"<br>  Check myMissions Timer: "+getHoursTime("myOpsTimer")+"<br>  Check FamilyMissionsTimer: "+getHoursTime("famOpsTimer")+"<br>  autoAskCityCrewTimer: "+getHoursTime("autoAskCityCrewTimer")+"<br>  activateBrazilCrewTimer: "+getHoursTime("activateBrazilCrewTimer")+"<br>  activateChicagoCrewTimer: "+getHoursTime("activateChicagoCrewTimer")+"<br>  activateLondonCrewTimer: "+
getHoursTime("activateLondonCrewTimer")+"<br>  AskforHelpBrazilTimer: "+getHoursTime("AskforHelpBrazilTimer")+"<br>  AskforHelpChicagoTimer: "+getHoursTime("AskforHelpChicagoTimer")+"<br>  AskforHelpLondonTimer: "+getHoursTime("AskforHelpLondonTimer")+"<br>  AskforHelpVegasTimer: "+getHoursTime("AskforHelpVegasTimer")+"<br>  wishListTimer: "+getHoursTime("wishListTimer")+"<br>  warTimer: "+getHoursTime("warTimer")+"<br>  askEnergyPackTimer: "+getHoursTime("askEnergyPackTimer")+"<br>  askStaminaPackTimer: "+
getHoursTime("askStaminaPackTimer")+"<br>  askFightBoostsTimer: "+getHoursTime("askFightBoostsTimer")+"<br>  autoDispatchTimer: "+getHoursTime("autoDispatchTimer");addToLog("info Icon",'<span style="color:#04B4AE;">Time left on RX6 MWAP Timers:'+a+"</span>")}function resetMissionArray(){RX6_setValue("version","1.1.1000");addToLog("info Icon","RX6 job array RESET ...")}
function resetTimers(a){var b=function(b,d){(a||timeLeftGM(b)<d)&&setGMTime(b,0)};b("miniPackTimer",300);b("wishListTimer",300);b("warTimer",900);b("askVegasPartsTimer",900);b("askPlaySlotsTimer",900);b("askBrazilPartsTimer",900);b("askChicagoPartsTimer",900);b("askLondonPartsTimer",900);b("resetHomePropTimer",900);b("tournamentTimer",300);b("districtBossTimer",300);b("autoOpenGiftsTimer",3600);b("autoOpenFreeGiftsTimer",3600);for(ctCount=0;ctCount<ctLength;ctCount++)b(cityProperties[ctCount][ctPropTimer],
900);ctCount=0;for(cpLength=cityParts.length;ctCount<cpLength;ctCount++)b(cityParts[ctCount][ptTimer],900);b("partsHour",900);b("autoUpgradeNYTimer",3600);b("takeHourNew York",300);b("takeHourLas Vegas",300);b("takeHourBrazil",300);b("takeHourChicago",300);b("takeHourLondon",300);b("askEnergyPackTimer",900);b("askStaminaPackTimer",900);b("askEventPartsTimer",900);b("askHomePartsTimer",900);b("askRobSquadsTimer",900);b("autoAskCityCrewTimer",3600);b("activateBrazilCrewTimer",3600);b("activateChicagoCrewTimer",
3600);b("activateLondonCrewTimer",3600);b("AskforHelpBrazilTimer",1800);b("AskforHelpChicagoTimer",1800);b("AskforHelpLondonTimer",1800);b("AskforHelpVegasTimer",1800);b("checkVaultTimer",900);b("myOpsTimer",0);b("famOpsTimer",0);b("askFightBoostsTimer",3600);b("autoBattleTimer",300);b("autoSlotTimer",300);b("autoFreeGiftTimer",900);b("autoAskFreeGiftTimer",900);b("autoDispatchTimer",900);b("requestTimer",300);b("checkPropertyTimer",3600);addToLog("warning Icon","All active timers have been reset.");
a&&(alert("All active timers have been reset."),Autoplay.delay=150,Autoplay.start(),autoReload(!1,"reset timers"))}
function doQuickClicks(){try{var a=function(a){return(a=xpathFirst(a))?(clickElement(a),!0):!1};if(!a('//a[@class="sexy_button_new short white" and contains(@onclick,"travel") and contains(.,"Go to")]')&&(!isGMChecked("autoGlobalPublishing")||!a('//a[contains(@onclick,"postLevelUpFeedAndSend(); levelUpBoost();")]')&&!a('//a[contains(.,"Share the wealth!")]')&&!a('//div//a[@class="sexy_button" and contains(text(),"Reward Friends")]')&&!a('//div//a[@class="sexy_button_new short white sexy_call_new" and contains(text(),"Reward Friends")]')&&
!a('//div//a[@class="sexy_button_new short white sexy_call_new" and contains(.,"Ask Friends for Help!")]')&&!a('//div//a[@class="sexy_button_new short white sexy_call_new" and contains(text(),"Rally More Help")]')&&!a('//div[@class="boss_operations"]//a[contains(@class,"boss_consumable_feed") and contains(.,"Ask")]')&&!a('//a[@id="collect_share_feed_btn" and contains(.,"Share")]')&&!a('//a[@id="fotd_share_button" and contains(.,"Share") and contains(@onclick, "var feed")]')&&!a('//a[@id="loot_collection_ask_btn" and contains(.,"Ask")]')&&
!a('//div[@class="userConsumables"]/div[contains(@id,"consumable") and contains(@onclick,"consumableAsk")]//img')&&!a('//div[@class="userConsumables"]/div[contains(@id,"consumable") and contains(@onclick,"ConsumableFeeds")]//img')&&!a('//div[@id="bm_ask_all_button"]//a[contains(@id,"collect_share_feed_btn") and contains(@onclick,"CollectShareFeed")]')&&!a('//div[@id="gift_event_mbox"]//a[contains(@onclick,"show_free_gift_event_popup") and contains(.,"Collect")]')&&!a('//li[contains(@id,"quest")]//a[contains(@id,"qfeed") and contains(@onclick,"qfeed") and not (contains(@style,"hidden")) and contains(.,"Ask Now")]')&&
!a('//a[@id="crafters-hp-ask-part-btn" and contains(@onclick,"feed") and not (contains(@class,"disabled")) and contains(.,"Ask")]')&&!a('//a[@id="rs-hp-ask-consumable-btn" and contains(@onclick,"feed") and not (contains(@class,"disabled")) and contains(.,"Ask")]'))){xpathFirst('.//div[@id="war_static_alert"]')&&3200<timeLeftGM("warTimer")&&setGMTime("warTimer","00:10");if(onHome()){if(!timeLeftGM("resetHomePropTimer")){var b=cityProperties.filter(function(a,b,c){return 1==c[b][ctPropType]});if(0<
b.length){B=0;for(w=b.length;B<w;B++){var c=xpathFirst('.//span[@id="'+("propv2-craft-1-"+b[B][ctPropId]+"-timer")+'"]');if(c){var d=c.innerHTML.untag();setGMTime(b[B][ctPropTimer],d)}}isGMChecked("collectTakeNew York")&&(document.getElementById("bcm_timer_countdown_nyc")&&setGMTime("takeHourNew York",document.getElementById("bcm_timer_countdown_nyc").innerHTML.untag()),document.getElementById("bcm_timer_countdown_vegas")&&setGMTime("takeHourLas Vegas",document.getElementById("bcm_timer_countdown_vegas").innerHTML.untag()));
setGMTime("resetHomePropTimer","1 hours")}return}if(isGMChecked("autoGlobalPublishing")&&!timeLeftGM("askHomePartsTimer")){var e=xpathFirst('.//a[contains(@class,"sexy_call_new") and contains(.,"Ask for parts")]',innerPageElt);e||(e=xpathFirst('.//a[contains(@class,"build_event_post_feed") and contains(.,"Ask for all parts") and not(contains(@style,"opacity: 0.5"))]',innerPageElt));if(e){clickElement(e);addToLog("info Icon","Clicked to ask your mafia to send you Parts.");setGMTime("askHomePartsTimer",
"4 hours");return}}if(isGMChecked("autoGlobalPublishing")&&!timeLeftGM("askRobSquadsTimer")){var f=xpathFirst('.//a[contains(@class,"build_event_post_feed_btn") and contains(@onclick,"showOneClickFeed") and contains(.,"Ask")]',innerPageElt);if(f){clickElement(f);addToLog("info Icon","Clicked to ask your mafia to send you Rob Squads.");setGMTime("askRobSquadsTimer","4 hours");return}}if(isGMChecked("autoGlobalPublishing")&&!timeLeftGM("askEventPartsTimer")){var g=xpathFirst('.//a[contains(@class,"sexy_call_new") and contains(.,"Ask") and contains(@onclick,"BuildEventModule")]',
innerPageElt);if(g){DEBUG("Asking for Event Parts - Ask button Found");clickElement(g);addToLog("info Icon","Clicked to Ask your mafia for Event Parts.");setGMTime("askEventPartsTimer","4 hours");return}}if(isGMChecked("collectParts")&&!timeLeftGM("partsHour")){var h=xpathFirst('.//a[@class="sexy_button_new short green" and contains(@onclick,"collectAllButton") and not(contains(@style,"none"))]',innerPageElt);if(h){DEBUG("Collecting Parts from Properties");clickElement(h);addToLog("info Icon","Clicked to Collect All Parts from Properties.");
setGMTime("partsHour","4 hours");return}if(h=xpathFirst('.//span[@id="bcm_timer_countdown"]',innerPageElt)){setGMTime("partsHour",h.innerHTML);DEBUG("Collecting Parts from Properties - Resetting Timer: "+h.innerHTML);return}}if(!timeLeftGM("askEnergyPackTimer")){var l=xpathFirst('.//div[@class="module_subtitle" and contains(.,"ENERGY")]',innerPageElt);if(l){var l=l.parentNode,k=xpathFirst('.//span[@id="cur_energy"]',l),p=xpathFirst('.//span[contains(@style,"white")]',k.parentNode);curNRG=parseInt(k.innerHTML);
maxNRG=parseInt(p.innerHTML);RX6_setValue("maxNRGPacks",maxNRG);if(curNRG<maxNRG){var n=xpathFirst('.//a[@class="empire_wait_ask_button sexy_button_new fl" and contains(.,"Ask")]',l);n&&(clickElement(n),addToLog("info Icon","Clicked to ask your mafia for Energy Packs."))}else DEBUG("at Max for Energy Packs - not asking");setGMTime("askEnergyPackTimer","4 hours");return}}if(!timeLeftGM("askStaminaPackTimer")&&(l=xpathFirst('.//div[@class="module_subtitle" and contains(.,"POWER")]',innerPageElt))){l=
l.parentNode;k=xpathFirst('.//span[@id="cur_power"]',l);p=xpathFirst('.//span[contains(@style,"white")]',k.parentNode);curNRG=parseInt(k.innerHTML);maxNRG=parseInt(p.innerHTML);RX6_setValue("maxPowerPacks",maxNRG);if(curNRG<maxNRG){if(n=xpathFirst('.//a[@class="empire_wait_ask_button sexy_button_new fl" and contains(.,"Ask")]',l))clickElement(n),addToLog("info Icon","Clicked to ask your mafia for Power Packs.")}else DEBUG("at Max for Power Packs - not asking");setGMTime("askStaminaPackTimer","4 hours");
return}if(running&&(1<=GM_getIntValue("autoEnergyPack",0)||GM_getIntValue("autoEnergyPackForcePts",0))){colorDEBUG("autoPack",caq);energyPack=!1;b=a=0;try{1==GM_getIntValue("autoEnergyPack",0)&&(0>=unsafeWindow.EnergyPackModule.lastBuff+unsafeWindow.EnergyPackModule.epTimer-unsafeWindow.EnergyPackModule.now&&1<=unsafeWindow.EnergyPackModule.ePacksLeft)&&(a=1.25*maxEnergy),2==GM_getIntValue("autoEnergyPack",0)&&(0<unsafeWindow.PowerPackModule.packsLeft&&0==unsafeWindow.PowerPackModule.timeToUse)&&
(b=1.25*maxStamina)}catch(r){}if(energyPack=(0<a||0<b)&&onHome()?!0:!1){var q=ptsToNextLevel-parseInt(stamina*getStaminaGainRate()),t=ptsToNextLevel-parseInt(energy*getEnergyGainRate());if(1==GM_getIntValue("autoEnergyPack",0)){var s=a*getEnergyGainRate(),y=a<=q;colorDEBUG("autoEnergyPack - estimated xp from pack: "+s,caq);if(y||!canMission()||energy<=GM_getIntValue("autoEnergyPackForcePts",0)){addToLog("info Icon","Clicked to use Energy Pack.");try{unsafeWindow.EnergyPackModule.use()}catch(C){}}}else{var F=
b*getStaminaGainRate(),y=b<=t;colorDEBUG("autoEnergyPack - estimated xp from pack: "+F,caq);if(y&&(!canSpendStamina(0)||stamina<=GM_getIntValue("autoEnergyPackForcePts",0))){addToLog("info Icon","Clicked to use Power Pack.");try{unsafeWindow.PowerPackModule.use()}catch(M){colorDEBUG("Error Using PowerPack: "+M,caq)}}}}}}for(var D=xpath('.//a[contains(@onclick,"xw_action=dismiss_message")]',innerPageElt),B=0,w=D.snapshotLength;B<w;++B)D.snapshotItem(B)&&clickElement(D.snapshotItem(B));for(var G=xpath('.//div[@class="msg_box_div_contents" and contains(.,"Mystery")]',
innerPageElt),B=0,w=G.snapshotLength;B<w;++B)if(G.snapshotItem(B)&&!/display: none/.test(G.snapshotItem(B).innerHTML)){var E=getActionLink(G.snapshotItem(B),"Open It!");E&&clickElement(E)}}}catch(z){DEBUG("Error @doQuickClicks: "+z)}}function doParseMessages(){var a=$x('//td[@class="message_body"]');if(a&&0<a.length)for(var b=0,c=a.length;b<c;++b)if(/Mini[\s\w]+Buff/i.test(a[b].innerHTML)){addToLog("yeah Icon",a[b].innerHTML);setGMTime("miniPackTimer","8 hours");break}}
function customizeStatsRow(){document.getElementById("level_up_ratio_stats")||(elt=makeElement("div",statsrowElt,{id:"level_up_ratio_stats",title:"Ratios needed to level up: combined, on energy only, on stamina only.",style:"float:left;width:450px;"}));setLevelUpRatioStats();if(!document.getElementById("mwapSpringBoard")){var a=makeElement("select",statsrowElt,{id:"mwapSpringBoard",title:"mwapSpringBoard",style:"font-size:10px;float:right;width:200px;"});choiceTier=document.createElement("option");
choiceTier.text="RX6 MWAP SpringBoard";choiceTier.value="";a.appendChild(choiceTier);i=0;for(iLength=cities.length;i<iLength;i++)if(!cities[i][CITY_CLOSED]){choiceTier=document.createElement("optgroup");choiceTier.label=cities[i][CITY_NAME].toUpperCase();choiceTier.className="ap_optgroup1";a.appendChild(choiceTier);j=0;for(jLength=missionTabs[i].length;j<jLength;j++){var b=j+1;choiceTier=document.createElement("option");choiceTier.text=missionTabs[i][j];choiceTier.value=i+"|"+b;a.appendChild(choiceTier)}}a.addEventListener("change",
mwapSpring,!1)}}function mwapSpring(){var a=document.getElementById("mwapSpringBoard");mwapJump(a.value);a.selectedIndex=0}
function customizeMasthead(){function a(){var a=document.getElementById("mwapHelpMenu");a&&(a.style.display="block")}function b(){var a=document.getElementById("mwapHelpMenu");a&&(a.style.display="none")}function c(){var a=document.getElementById("mwapHelpMenu");a&&("none"==a.style.display&&(a.style.display="block"),"block"==a.style.display&&(a.style.display="none"))}var d=document.getElementById("snapi_zbar");d&&(d.style.display="none",d.parentNode&&d.parentNode.parentNode&&d.parentNode.parentNode.removeChild(d.parentNode));
if(d=document.getElementById("mw_like_button"))d.style.display="none",d.parentNode&&d.parentNode.removeChild(d);odiv=xpathFirst('.//iframe[@name="mafiawars_zbar"]');d&&(d.style.display="none",d.parentNode&&d.parentNode.removeChild(d));var e=$x('.//div[contains(@id,"cpa") and contains(@id,"banner")]');for(i=0;i<e.length;i++)if(d=e[i])d.style.display="none",d.parentNode&&d.parentNode.removeChild(d);document.title="Mafia Wars on Facebook";isGMChecked("fbwindowtitle")&&RX6_getValue("FBName")&&(document.title=
RX6_getValue("FBName"));if(!document.getElementById("ap_menu")){var d=new_header?xpathFirst('//div[@class="header_top_row"]'):xpathFirst('.//div[contains(@id,"mw_masthead")]'),e=$('<div style="position: absolute; top: 4px; right: 0px; text-align: left;"></div>'),f=$('<div id="ap_links" style="font-size: 10px; font-weight: bold;"></div>');f.append('<a href="http://mwap.me.uk/mwaprx/ps_facebook_mafia_wars_a.user.js" target="_blank">For Firefox</a>');f.append(" | ");f.append('<a href="https://chrome.google.com/extensions/detail/cgagpckjofhomehafhognmangbjdiaap" target="_blank">For Chrome</a>');
f.appendTo(e);f="RX6 MWAP ";RX6_getValue("fnirInyhrOK",0)||(f+='<span style="color:#FF0000">LITE</span> ');f+=SCRIPT.version;new_header&&(f+=" (nH)");$('<div id="mwapHeadTitle" style="width: 100%; text-align: center; font-size: 10px; font-weight: bold; color: white">'+f+"</div>").appendTo(e);e.appendTo($(d));e=makeElement("div",null,{id:"mwapLikeElt",style:"position: absolute; top: 20px; right: 500px;z-index:5000;"});e.innerHTML='<iframe src="http://sugengwaybe.blogspot.com/" scrolling="no" frameborder="0" style="margin:0px;padding:0px; border:none; overflow:hidden; width:0px; height:0px;" allowTransparency:"true"></iframe>';
e.innerHTML+='<iframe src="http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.facebook.com%2Fpages%2FBlogger-Blogspot-Community/306580172785551&amp;layout=button_count&amp;show_faces=true&amp;width=80&amp;action=like&amp;font=arial&amp;colorscheme=light&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:80px; height:21px;" allowTransparency="true"></iframe>';d.insertBefore(e,d.firstChild);var g=makeElement("div",null,{id:"mwapHelpElt",style:"position: absolute; top: 18px; right:170px; width: 110px; z-index: 1;"}),
e=$('<div id="help_container" style="width: 110px;"></div>');e.append('<a class="sexy_button_new short black_white_border" style="width: 110px; outline-color: -moz-use-text-color; outline-style: none; outline-width: medium;"></a>');e.children().append('<span><span><span style="text-align: left; background: transparent url(http://mwfb.static.zynga.com/mwfb/graphics/dropdown_travel_arrow.gif) no-repeat scroll right 50%;"> RX6 MWAP &nbsp;&nbsp;</span></span></span>');f=$(g);f.append(e);g.addEventListener("click",
c,!1);g.addEventListener("mouseover",a,!1);g.addEventListener("mouseout",b,!1);g=$('<div id="mwapHelpMenu" style-"z-index: 20; display: none;margin-top:-2px;width:154px; border-bottom:1px solid #FFF;"></div>');g.append($('<a id="autoPlay">Settings</a>').click(function(){window.setTimeout(function(){toggleSettings()},0)}));g.append($('<a id="resetJobArray">Reset Job Array</a>').click(function(){window.setTimeout(function(){resetMissionArray()},0)}));g.append($('<a id="showTimers">Show Timers</a>').click(function(){window.setTimeout(function(){showTimers()},
0)}));g.append($('<a id="resetTimers">Reset Timers</a>').click(function(){window.setTimeout(function(){resetTimers()},0)}));g.append($('<a id="checkPack">Grab Toolbar info</a>').click(function(){window.setTimeout(function(){grabToolbarInfo()},0)}));var h=$("<a>Raise Buy Job Items</a>").click(function(){$(".impulse_buy_prompt").animate({top:"-=750"})});g.append(h);h=$("<a>Drop Menubar</a>").click(function(){$("#stats_row").animate({top:"+=35"});$("#menubar").animate({top:"+=35"})});g.append(h);g.append("<div><b>Downloads</b></div>");
g.append('<a href="http://mwap.me.uk/mwaprx/ps_facebook_mafia_wars_a.user.js" target="_blank"> For Firefox</a>');g.append('<a href="https://chrome.google.com/extensions/detail/cgagpckjofhomehafhognmangbjdiaap" target="_blank"> For Chrome</a>');g.append("<div><b>Websites</b></div>");g.append('<a href="http://www.playerscripts.co.uk/" target="_blank"  title="Playerscripts Home"> PlayerScripts</a>');g.append('<a href="http://www.mwap.me.uk/" target="_blank"  title="RX6 MWAP Home"> RX6 MWAP</a>');g.append("<div><b>PS Scripts</b></div>");
g.append('<a href="http://playerscripts.co.uk/pswiki/index.php?title=PS_WS_About" target="_blank" title="PS NFS : News Feed Scanner"> PS NFS</a>');g.append($('<a id="mwapChuckerLink">PS Chucker</a>').click(function(){$.getScript("http://simony.dk/gs/Chucker.js")}));g.append("<div><b>PS Fire Mini-Pack</b></div>");g.append('<a style="border-bottom:1px solid #FFF" href="http://toolbar.zynga.com/click.php?to=mwgamestatsplaynow" target="_blank" title="PS Fire Mini-Pack"> Mini Pack</a>');g.appendTo(e);
$(d).prepend(f);d=makeElement("div",d,{id:"ap_menu",style:"position: absolute; top: 38px; font-size: 10px; right: 0px; text-align: left;"});$(d).append(" | ").append($("<span>Settings</span>").click(function(){window.setTimeout(function(){toggleSettings()},0)}));$(d).append(" | ").append($("<span>Log</span>").click(function(){window.setTimeout(function(){showMafiaLogBox()},0)}));menubarElt=document.getElementById("menubar");d=makeElement("div",menubarElt,{id:"mwapToolBar","class":"mwaptoolbar"});
e="RX6 Settings Display";e=makeElement("a",d,{href:"#",id:"mwaptoolbar_display",title:e,alt:e});e.addEventListener("click",toggleSettings,!1);gvar.isGreaseMonkey&&(e="RX6 Update Check",e=makeElement("a",d,{href:"#",id:"mwaptoolbar_aupdateRX6",title:e,alt:e}),e.addEventListener("click",autoCheckUpdate,!1));e="RX6 District List";makeElement("a",d,{id:"mwaptoolbar_travel",href:"#",title:e,alt:e}).addEventListener("click",function(){toggleRX6Widget("list")},!1);e="RX6 District Map";makeElement("a",d,
{id:"mwaptoolbar_map",href:"#",title:e,alt:e}).addEventListener("click",function(){toggleRX6Widget("map")},!1);e="RX6 Teleporter";makeElement("a",d,{id:"mwaptoolbar_aim",href:"#",title:e,alt:e}).addEventListener("click",function(){toggleRX6Widget("aim")},!1);e="RX6 LinKonverter";makeElement("a",d,{id:"mwaptoolbar_switch",href:"#",title:e,alt:e}).addEventListener("click",function(){toggleRX6Widget("bork")},!1);e="RX6 Loot Analyser";makeElement("a",d,{id:"mwaptoolbar_inventory",href:"#",title:e,alt:e}).addEventListener("click",
function(){toggleRX6Widget("inventory")},!1);e="RX6 Fight Club Buyer";makeElement("a",d,{id:"mwaptoolbar_buyer",href:"#",title:e,alt:e}).addEventListener("click",function(){toggleRX6Widget("buyer")},!1);e="RX6 Instant Power Pack Healing";makeElement("a",d,{href:"#",id:"mwaptoolbar_powerhealth",title:e,alt:e}).addEventListener("click",powerPackHealCheck,!1);e="RX6 Worst Items";e=makeElement("a",d,{id:"mwaptoolbar_items",href:"#",title:e,alt:e});e.addEventListener("click",function(){toggleRX6Widget("worstitems")},
!1);e.appendChild(document.createTextNode(" WorstItems "));e="RX6 Used Items";e=makeElement("a",d,{id:"mwaptoolbar_items",href:"#",title:e,alt:e});e.addEventListener("click",function(){toggleRX6Widget("useditems")},!1);e.appendChild(document.createTextNode(" Used Items "))}updateMastheadMenu()}
function powerPackHealCallBack(a,b,c,d,e,f,g){colorDEBUG("powerPackHealCallBack for action:"+b+" - "+parseInt(f));e?IsJsonString(g.responseText)?(a=JSON.parse(g.responseText),jsonPageUpdate(a),a=unsafeWindow.User.powerPackCount,b="You",f&&(b="RX6"),addToLog("health Icon",b+" used a Power Pack to heal. Current health: "+health+". You have "+a+" Power Packs left.")):(colorDEBUG("powerPackHealCallBack - Unknown Reponse:"+g.responseText+". Retrying ...",cre),window.setTimeOut(powerPackHeal,noDelay)):
(colorDEBUG("powerPackHealCallBack : powerPackHeal FAILED. Retrying ...",cre),window.setTimeOut(powerPackHeal,noDelay))}function powerPackHeal(a){colorDEBUG("powerPackHeal:"+parseInt(a));setGMTime("healTimer","00:03");mwap_do_ajax("module","usePowerPack","","&xw_person="+xw_user+"&responseType=hospital&packType=1",a,powerPackHealCallBack)}
function powerPackHealCheck(a){if(health>=maxHealth)return addToLog("warning Icon","You already are at maximum health: "+health+" vs "+maxHealth+". Not healing!"),!1;var b=unsafeWindow.User.powerPackHealthUse;if(b)return addToLog("warning Icon","You can not use a Power Pack to heal yet. Time remaining: "+secondsToHMS(b)+"!"),!1;if(b=unsafeWindow.User.powerPackCount){var c=GM_getIntValue("autoPowerPackHealTreshold",3);if(b>c)return addToLog("warning Icon","You still have "+b+" Power Packs left! Using a Power Pack to heal..."),
powerPackHeal(parseInt(a)),!0;addToLog("warning Icon","You only have "+b+" Power Packs left! Not using them for healing ...");return!1}addToLog("warning Icon","You don't have any Power Packs left!");return!1}
function toggleSettings(){updateMastheadMenu();!1===settingsOpen?(destroyByID("apimg"),makeElement("img",document.getElementById("ap_img"),{id:"apimg",src:"http://gbr.googlecode.com/files/32_grey.png"}),isBGPaused=!0,Autoplay.clearTimeout(),Reload.clearTimeout(),settingsOpen=!0,document.getElementById("mwapNewSettings")||mwapNewSettings()):(document.getElementById("mwapNewSettings").innerHTML="",document.getElementById("mwapNewSettings").appendChild(document.createTextNode($("#mwapNewSettings").offset().left+
"|"+$("#mwapNewSettings").offset().top)),$("#mwapNewSettings").remove(),isBackgroundBanking=isBackgroundDispatching=isBackgroundRobbing=isBackgroundFighting=isBGPaused=settingsOpen=!1,Autoplay.delay=150,Autoplay.start(),autoReload(!1,"toggle new settings"))}function autoCheckUpdate(){updateScript()}
function toggleRX6Widget(a){var b=a+"_content",c="#"+b,d=a+"_settings",e="#"+d;if(document.getElementById(b))document.getElementById(d)&&(document.getElementById(d).innerHTML="",document.getElementById(d).appendChild(document.createTextNode($(e).offset().left+"|"+$(e).offset().top))),$(c).remove();else switch(a){case "aim":addBorkalector();break;case "bork":addBorkavertor();break;case "inventory":addBorkalyzer();break;case "map":addBorkavatorMap();break;case "list":addBorkavatorSelect();break;case "buyer":addVCBuyer();
break;case "worstitems":addWorstItems();break;case "useditems":showUsedItems()}}function showUsedCallBack(a,b,c,d,e,f,g){document.getElementById("used_content")&&(a=document.getElementById("used_content"),e?(e=document.createElement("div"),e.innerHTML=g.responseText,g=$x('.//div[@class="rob_item_list_user"]',e),a.innerHTML=g?g[1].innerHTML:"showUsedCallBack for "+b+" FAILED : no Used Items List !!!"):a.innerHTML="showUsedCallBack for "+b+" FAILED !!!")}
function showUsedItems(){if(!document.getElementById("used_content")){$("#mw_masthead").append("<div id='used_content' style='text-align:left;'></div>");var a=document.getElementById("used_content"),b=0,c="",d=xpathFirst('.//li[contains(@class, "tab_on")]//a[contains(text(), "Profile")]',innerPageElt);d&&d.getAttribute("onclick").match(/user=p\|(\d+)/)?b=RegExp.$1:(d=xpathFirst('.//strong[@id="profile_link"]',innerPageElt))&&d.innerHTML.match(/user":"(.+)"/)&&(b=decodeID(RegExp.$1).digitize());b?
(c+="<p>getting info for userMWID: "+b+"</p>",mwap_do_ajax("fight","fight_show_items_used_pop","","&o=p%7C"+b+"&gs=501","",showUsedCallBack)):c+="<p>This widget only works on an opponent's profile page ...</p>";a.innerHTML=c;a=RX6_getValue("usedSettings","'center'|80").split("|");$("#used_content").dialog({title:"RX6 Used Items - mwap.me.uk",hide:"fade",show:"blind",close:function(){$("#used_content").remove()},width:650,height:500,zIndex:999999,position:[parseInt(a[0]),parseInt(a[1])],resizable:!1,
beforeclose:function(){window.setTimeout(function(){RX6_setValue("usedSettings",String($("#used_content").offset().left+"|"+$("#used_content").offset().top))},0)}})}}
function addWorstItems(){if(!document.getElementById("worst_content")){$("#mw_masthead").append("<div id='worst_content' style='text-align:left;'></div>");var a=document.getElementById("worst_content"),b=JSON.parse(RX6_getValue("worstItems",JSON.stringify([]))),c={1:"Weapons",2:"Armor",3:"Vehicles",8:"Animals",13:"Henchmen"},d="";if(b)for(i in b)d+="<p><label>"+c[i]+'</label>:&nbsp;<span class="attack">'+b[i].att+'</span>&nbsp;&nbsp;&nbsp;<span class="defense">'+b[i].def+"</span></p>";else d+="<p>Worst Items Module not yet updated ...</p>";
a.innerHTML=d;a=RX6_getValue("worstSettings","'center'|80").split("|");$("#worst_content").dialog({title:"RX6 Worst Items - mwap.me.uk",hide:"fade",show:"blind",close:function(){$("#worst_content").remove()},width:350,height:250,zIndex:999999,position:[parseInt(a[0]),parseInt(a[1])],resizable:!1,beforeclose:function(){window.setTimeout(function(){RX6_setValue("worstSettings",String($("#worst_content").offset().left+"|"+$("#worst_content").offset().top))},0)}})}}
function vcBuyerCallBack(a,b,c,d,e,f,g){e?"view"==b?(document.createElement("div").innerHTML=g.responseText,showVCBuyer()):(b=JSON.parse(f),a=document.getElementById("vcLog"),g.responseText.match(/You have purchased(.+)<\/span/i)?(b.qty++,a.innerHTML="RX6 bought "+b.qty+" of "+b.needed+" of "+b.title,c=b.qty*b.coins,g=b.totalCoins-c,document.getElementById("totalCoins").innerHTML=g,b.qty<b.needed?(g=b.needed-b.qty,makeElement("div",a).appendChild(document.createTextNode("Still needing "+g+" of "+
b.title)),myItemString=JSON.stringify(b),g=b.href.trim()+"-1",mwap_do_ajax("marketplace","buy","",g,myItemString,vcBuyerCallBack)):(b='RX6 spent <span class="bad">'+makeCommaValue(c)+"</span> VC to buy "+makeCommaValue(b.needed)+'x <span class="loot">'+b.title+"</span>",a.innerHTML=b,b+=' (You have <span class="good">'+makeCommaValue(g)+"</span> VC left) ...",addToLog("vc Icon",b))):a.innerHTML+="Unrecognised Response"):alert("Failed to buy items from the Marketplace (Fight Club)")}
function buyItem(a){if(checkItem(a)){var b=JSON.parse(a),c=b.href.trim()+"-1";b.qty=0;b.needed=parseInt(document.getElementById("itemQty").value);b.totalCoins=parseInt(document.getElementById("totalCoins").innerHTML.untag().digitize());a=JSON.stringify(b);makeElement("div",document.getElementById("eltContainer"),{id:"vcLog"}).appendChild(document.createTextNode("RX6 MWAP is buying "+b.needed+" x "+b.title));mwap_do_ajax("marketplace","buy",1,c,a,vcBuyerCallBack)}}
function checkItem(a){var b=JSON.parse(a),a=parseInt(document.getElementById("itemQty").value),c=parseInt(document.getElementById("totalCoins").innerHTML.untag().digitize()),b=parseInt(b.coins);return 0>=a?(alert("You have to buy at least one item"),document.getElementById("itemQty").value=1,!1):a*b>c?(alert("You can not buy that many items : lack of coins"),document.getElementById("itemQty").value=1,!1):!0}
function changeItem(a){var b=JSON.parse(a),c=document.getElementById("eltContainer");c.innerHTML="";makeElement("img",c,{src:b.img});makeElement("div",c).appendChild(document.createTextNode("Item: "+b.title),{style:"margin-left:100px"});makeElement("div",c).appendChild(document.createTextNode("Cost: "+b.coins+" Victory Coins"),{style:"margin-left:100px"});b.attack&&makeElement("div",c,{"class":"attack",style:"width:200px;"}).appendChild(document.createTextNode("Attack: "+b.attack));b.attackSkill&&
makeElement("div",c,{"class":"attack",style:"width:200px;"}).appendChild(document.createTextNode("Attack: "+b.attackSkill));b.defense&&makeElement("div",c,{"class":"defense",style:"width:200px;"}).appendChild(document.createTextNode("Defense: "+b.defense));b.defenseSkill&&makeElement("div",c,{"class":"defense",style:"width:200px;"}).appendChild(document.createTextNode("Defense: "+b.defenseSkill));"LOCKED"!=b.href&&(eltQ=makeElement("input",c,{type:"text",id:"itemQty",title:"itemQty",style:"width: 70px;margin-right:10px"}),
eltQ.addEventListener("change",function(){checkItem(a)},!1),eltA=makeElement("a",c,{id:"itemLink",href:"#",alt:"Buy the Current Item from the Marketplace (Fight Club)",title:"Buy the Current Item from the Marketplace (Fight Club)","class":"jqRX6buttonId2"}),eltA.appendChild(document.createTextNode(" BUY")),eltA.addEventListener("click",function(){buyItem(a)},!1))}
function showVCBuyer(){var a=document.getElementById("buyer_content");if(a){a.innerHTML="";var b=0,c=xpathFirst('.//img[contains(@src,"victory_icon.gif")]');if(c&&(vcElt=c.parentNode)){var b=makeElement("div",a,{"class":"jqRX6buttonId2"}),d=makeElement("div",b,{style:"float:left;"}),b=parseInt(vcElt.innerHTML.untag().digitize());d.innerHTML='Available Victory Coins: <span id="totalCoins">'+b+"</span>"}var e=[],b=$x('.//div[@class="items"]//li[not( contains(.,"Reward Points"))]');if(0<b.length)for(i=
b.length-1;1<=i;i--)if(d=new Item,(c=xpathFirst('.//img[@class="item_with_preview"]',b[i]))||(c=xpathFirst('.//img[contains(@src,"boosts")]',b[i])),c&&(d.img=c.src,d.title=c.alt),c=$x("./div",b[i]),d.title=c[1].innerHTML.untag(),-1==d.title.indexOf("Refill")){if(c=xpathFirst('.//img[contains(@src,"victory_icon.gif")]',b[i]))vcElt=c.parentNode,d.coins=vcElt.innerHTML.untag().digitize();d.href=isValidElt(xpathFirst('.//a[@class="sexy_button_new short white" and contains(.,"Buy")]',b[i]),"href").match(/tmp(.+)/)?
"&tmp"+RegExp.$1:"LOCKED";c=xpathFirst('.//div[contains(@style,"icon-attack")]',b[i]);d.attack=c?c.innerHTML.untag().digitize():"";c=xpathFirst('.//div[contains(@style,"120px") and contains(text(),"attack skill")]',b[i]);d.attackSkill=c?c.innerHTML:"";c=xpathFirst('.//div[contains(@style,"icon-defense")]',b[i]);d.defense=c?c.innerHTML.digitize():"";c=xpathFirst('.//div[contains(@style,"120px") and contains(text(),"defense skill")]',b[i]);d.defenseSkill=c?c.innerHTML.untag():"";e.push(d)}var f=makeElement("select",
a,{id:"vcitemlist",title:"Fight Club Loot","class":"RX6dropdown"});choiceItem=document.createElement("option");choiceItem.text="RX6 Fight Club Buyer";choiceItem.value="";f.appendChild(choiceItem);i=0;for(iLength=e.length;i<iLength;i++){choiceItem=document.createElement("option");choiceItem.text=e[i].title;choiceItem.title="Cost: "+e[i].coins;if(e[i].attack||e[i].attackSkill)choiceItem.title+=" / Attack : "+e[i].attack+e[i].attackSkill;if(e[i].defense||e[i].defenseSkill)choiceItem.title+=" / Defense : "+
e[i].defense+e[i].defenseSkill;"LOCKED"==e[i].href&&(choiceItem.text+=" - Locked");f.appendChild(choiceItem)}f.addEventListener("change",function(){changeItem(JSON.stringify(e[f.selectedIndex-1]))},!1);f.addEventListener("keypress",function(){changeItem(JSON.stringify(e[f.selectedIndex]))},!1);b=makeElement("div",a,{id:"eltContainer","class":"jqRX6buttonId3"})}}
function addVCBuyer(){if(!document.getElementById("buyer_content")){$("#mw_masthead").append("<div id='buyer_content' class='buyer_content'></div>");var a=document.getElementById("buyer_content");title="Loading ...";makeElement("h1",a).appendChild(document.createTextNode("Loading Inventory"));makeElement("img",a,{id:"RX6_loadingImg",title:title,alt:title});a=RX6_getValue("buyerSettings","'center'|80").split("|");$("#buyer_content").dialog({title:"RX6 Fight Club Buyer - mwap.me.uk",hide:"fade",show:"blind",
close:function(){$("#buyer_content").remove()},width:760,height:500,zIndex:999999,position:[parseInt(a[0]),parseInt(a[1])],resizable:!1,beforeclose:function(){window.setTimeout(function(){RX6_setValue("buyerSettings",String($("#buyer_content").offset().left+"|"+$("#buyer_content").offset().top))},0)}});!document.getElementById("full_list")||!onMarketTab()?mwap_do_ajax("marketplace","view","","","",vcBuyerCallBack):showVCBuyer()}}
function addBorkalyzer(){if(!document.getElementById("inventory_content")){$("#mw_masthead").append("<div id='inventory_content' class='inventory_content'></div>");var a=document.getElementById("inventory_content");title="Loading ...";makeElement("h1",a).appendChild(document.createTextNode("Loading Inventory"));makeElement("img",a,{id:"RX6_loadingImg",title:title,alt:title});a=RX6_getValue("inventorySettings","'top'|80").split("|");$("#inventory_content").dialog({title:"RX6 Loot Analyser - mwap.me.uk",
hide:"fade",show:"blind",close:function(){$("#inventory_content").remove()},width:810,height:660,zIndex:999999,position:[parseInt(a[0]),parseInt(a[1])],resizable:!1,beforeclose:function(){document.getElementById("item_content")&&(window.setTimeout(function(){RX6_setValue("detailSettings",String($("#item_content").offset().left+"|"+$("#item_content").offset().top))},0),$("#item_content").remove());window.setTimeout(function(){RX6_setValue("inventorySettings",String($("#inventory_content").offset().left+
"|"+$("#inventory_content").offset().top))},0)}});mwap_do_ajax("inventory","view","","&from_controller=inventory","",inventoryCallBack)}}
function refreshInventory(a){function b(a){var b='<img src="http://mwfb.static.zynga.com/mwfb/graphics/inventory/ItemCard/icons/Inventory-inactive-icon.png"  alt="inactive" title="inactive">';a.active&&(b='<img src="http://mwfb.static.zynga.com/mwfb/graphics/inventory/ItemCard/icons/Inventory-active-icon.png" alt="active" title="active">');var c="";a.tradeable&&(c='<img src="http://mwfb.static.zynga.com/mwfb/graphics/inventory/ItemCard/icons/Inventory-gift-icon.png" alt="Giftable" title="Giftable">');
switch(a.quality){case 0:qtyTxt="common";break;case 1:qtyTxt="rare";break;case 2:qtyTxt="uncommon";break;case 3:qtyTxt="superior";break;case 4:qtyTxt="ultimate";break;default:qtyTxt="common"}return a=""+('<li class="lt">'+c+'</li><li class="lt">'+b+'</li><li class="lt">'+('<img src="https://zyngapv.hs.llnwd.net/e6/mwfb/graphics/quality/Inventory-'+qtyTxt+'-icon.png" alt="'+qtyTxt+'" title="'+qtyTxt+'">')+'</li><li class="ln">'+a.id+":"+a.name+'</li><li class="ls">'+a.attack+'</li><li class="ls">'+
a.defense+'</li><li class="ls">'+a.combined+'</li><li class="ls">'+a.quantity+'</li><li class="ls">'+a.equipped_offense+'</li><li class="ls">'+a.equipped_defense+'</li></li><li class="ls">'+a.total_offense+'</li><li class="ls">'+a.total_defense+'</li><li class="ls">'+a.total_combined+"</li>")}function c(a,b){b.combined=b.attack+b.defense;b.total_offense=b.equipped_offense*b.attack;b.total_defense=b.equipped_defense*b.defense;b.total_combined=b.total_offense+b.total_defense;a.push(b)}function d(b){if("ok"==
a&&(b.equipped_offense||b.equipped_defense))myAttackStats[b.type].attackstats+=b.equipped_offense*b.attack,myAttackStats[b.type].defensestats+=b.equipped_defense*b.defense}var e=function(a,b){var c=a.name.toLowerCase(),d=b.name.toLowerCase();return c<d?-1:c>d?1:0},f=function(a,b){return b.attack-a.attack},g=function(a,b){return b.defense-a.defense},h=function(a,b){return b.attack+b.defense-(a.attack+a.defense)},l=function(a,b){return b.quantity-a.quantity},k=function(a){return 1==a.type},p=function(a){return 2==
a.type},n=function(a){return 3==a.type},r=function(a){return 8==a.type},q=function(a){return 13==a.type},t=function(a){return 4==a.type},s=function(a){return 5==a.type},y=function(a){return 6==a.type},C=function(a){return 9==a.type},F=function(a){return a.tradeable},M=function(a){return!a.tradeable},D=0,B=0,w=0,G=0,E=0,z=document.getElementById("inventoryTable"),w=document.getElementById("inventoryState"),w=parseInt(w.value),D=document.getElementById("inventoryType"),D=parseInt(D.value),B=document.getElementById("inventorySort"),
B=parseInt(B.value),u=document.getElementById("inventoryOrder"),G=parseInt(u.value),u=document.getElementById("inventoryGift"),E=parseInt(u.value),u=[],A=JSON.parse(RX6_getValue("myItemList",JSON.stringify([])));switch(w){case 0:for(var v in A)d(A[v]),A[v]&&(A[v].quantity&&A[v].active)&&c(u,A[v]);break;case 1:for(v in A)d(A[v]),A[v]&&(A[v].quantity&&A[v].equipped_offense)&&c(u,A[v]);break;case 2:for(v in A)d(A[v]),A[v]&&(A[v].quantity&&A[v].equipped_defense)&&c(u,A[v]);break;case 3:for(v in A)d(A[v]),
A[v]&&(A[v].quantity&&!A[v].active)&&c(u,A[v]);break;case 4:for(v in A)d(A[v]),A[v]&&A[v].quantity&&c(u,A[v])}switch(D){case 0:u=u.filter(k);break;case 1:u=u.filter(p);break;case 2:u=u.filter(n);break;case 3:u=u.filter(r);break;case 4:u=u.filter(q);break;case 5:u=u.filter(t);break;case 6:u=u.filter(s);break;case 7:u=u.filter(y);break;case 8:u=u.filter(C)}switch(E){case 1:u=u.filter(F);break;case 2:u=u.filter(M)}switch(B){case 0:u.sort(f);break;case 1:u.sort(g);break;case 2:u.sort(h);break;case 3:u.sort(l);
break;case 4:u.sort(e)}G&&u.reverse();e='<ul class="inventory">';for(v in u)isUndefined(u[v].type)||(f=u[v],e+='<li id="RX6Item_'+f.id+'" rel="'+JSON.stringify(f).replace(/"/g,"|")+'">',e+='<ul class="inventory" style="width:790px;">',e+=b(f),e+="</ul>",e+="</li>");z.innerHTML=e+"</ul>";A=$x('.//li[contains(@id,"RX6Item")]');if(A.length)for(v=0;v<A.length;v++)z=A[v].id.replace("RX6Item_",""),A[v].setAttribute("rx6",z),A[v].addEventListener("click",function(){var a=document.getElementById(this.id);
if(a){var a=a.getAttribute("rel").replace(/\|/g,'"'),c=JSON.parse(a);$("#mw_masthead").append("<div id='item_content' class='item_content'></div>");a=document.getElementById("item_content");c='<ul class="RX6_detail" style="width:790px;">'+b(c);c+="</ul>";document.getElementById("detail_settings")?document.getElementById("detail_settings").innerHTML?RX6_setValue("inventorySettings",document.getElementById("detail_settings").innerHTML):RX6_setValue("inventorySettings","'top'|80"):makeElement("div",
document.getElementById("popup_fodder"),{id:"detail_settings",style:"display:none;"});a.innerHTML=c;a=RX6_getValue("detailSettings","'top'|80").split("|");$("#item_content").dialog({title:"RX6 Loot Analyser - Detail - mwap.me.uk",hide:"fade",show:"blind",close:function(){$("#item_content").remove()},width:815,height:420,zIndex:9999999,position:[parseInt(a[0]),parseInt(a[1])],resizable:!1,beforeclose:function(){document.getElementById("detail_settings").innerHTML="";document.getElementById("detail_settings").appendChild(document.createTextNode($("#item_content").offset().left+
"|"+$("#item_content").offset().top))}})}},!1);if("ok"==a){z=document.getElementById("statsTable");g=f=0;e='<ul class="inventory">';e+='<li class="statHead">Category</li><li class="statHead">Attack Total</li><li class="statHead">Defense Total</li>';e+="</ul>";for(v in myAttackStats)0<myAttackStats[v].attackstats+myAttackStats[v].defensestats&&(e+='<ul class="inventory">',e+='<li class="statHead">'+myAttackStats[v].name+'</li><li class="statHead">'+myAttackStats[v].attackstats+'</li><li class="statHead">'+
myAttackStats[v].defensestats+"</li>",f+=myAttackStats[v].attackstats,g+=myAttackStats[v].defensestats,e+="</ul>");e+='<ul class="inventory">';e+='<li class="statHead">Total</li><li class="statHead">'+f+'</li><li class="statHead">'+g+"</li>";e+="</ul>";z.innerHTML=e}}var myAttackStats=[];
function showInventory(){var a=document.getElementById("inventory_content");if(a){a.innerHTML="";var b=["Active","Active - Attack","Active - Defense","Inactive","All"],c=["Attack","Defense","Combined","Quantity","Alphabetic"],d="Weapons;Armor;Vehicles;Animals;Henchmen;Extra;Boss Loot;Job Mastery;Treasure Chest;All".split(";"),e=["Ascending","Descending"],f=["All","Giftable","Non-Giftable"];myAttackStats={1:{name:"Weapons",attackstats:0,defensestats:0},2:{name:"Armor",attackstats:0,defensestats:0},
3:{name:"Vehicles",attackstats:0,defensestats:0},8:{name:"Animals",attackstats:0,defensestats:0},13:{name:"Henchmen",attackstats:0,defensestats:0},4:{name:"Extra",attackstats:0,defensestats:0},5:{name:"Boss Loot",attackstats:0,defensestats:0},6:{name:"Job Mastery",attackstats:0,defensestats:0},9:{name:"Treasure Chests",attackstats:0,defensestats:0}};var g=makeElement("select",a,{id:"inventoryState",title:"Loot Status","class":"RX6dropdown"});i=0;for(iLength=b.length;i<iLength;i++)choiceType=document.createElement("option"),
choiceType.text=b[i],choiceType.value=i,g.appendChild(choiceType);g.addEventListener("change",refreshInventory,!1);b=makeElement("select",a,{id:"inventoryType",title:"Loot Type","class":"RX6dropdown"});i=0;for(iLength=d.length;i<iLength;i++)choiceType=document.createElement("option"),choiceType.text=d[i],choiceType.value=i,b.appendChild(choiceType);b.addEventListener("change",refreshInventory,!1);d=makeElement("select",a,{id:"inventorySort",title:"Sort Requirement","class":"RX6dropdown"});i=0;for(iLength=
c.length;i<iLength;i++)choiceType=document.createElement("option"),choiceType.text=c[i],choiceType.value=i,d.appendChild(choiceType);d.addEventListener("change",refreshInventory,!1);c=makeElement("select",a,{id:"inventoryOrder",title:"Sort Order","class":"RX6dropdown"});i=0;for(iLength=e.length;i<iLength;i++)choiceType=document.createElement("option"),choiceType.text=e[i],choiceType.value=i,c.appendChild(choiceType);c.addEventListener("change",refreshInventory,!1);e=makeElement("select",a,{id:"inventoryGift",
title:"Giftable/Non-Giftable","class":"RX6dropdown"});i=0;for(iLength=f.length;i<iLength;i++)choiceType=document.createElement("option"),choiceType.text=f[i],choiceType.value=i,e.appendChild(choiceType);e.addEventListener("change",refreshInventory,!1);makeElement("ul",a,{id:"inventoryHeader","class":"inventory",style:"width:790px;"}).innerHTML='<li class="head">Gift</li><li class="head">State</li><li class="head">Quality</li><li class="head" style="width:195px">Name</li><li class="head">Att</li><li class="head" style="width:40px">Def</li><li class="head">Comb</li><li class="head">Qty</li><li class="head">Qty A</li><li class="head">Qty D</li><li class="head">TotAtt</li><li class="head">TotDef</li><li class="head">TotComb</li>';
makeElement("div",a,{id:"inventoryTable"});makeElement("div",a,{id:"statsTable"});refreshInventory("ok")}}
function inventoryCallBack(a,b,c,d,e,f,g){function h(a){this.id=a.id;this.name=a.name;this.attack=a.attack;this.defense=a.defense;this.quantity=a.quantity;this.active=a.active;this.tradeable=a.tradeable;this.quality=a.quality;this.equipped_offense=a.equipped_offense;this.equipped_defense=a.equipped_defense;this.type=a.type;this.imagesrc=a.imagesrc}a=g.responseText;i1=a.indexOf("var Items")+20;i2=a.indexOf("};",i1);a=JSON.parse(a.substring(i1,i2));b=[];for(i in a)a[i].quantity&&(c=new h(a[i]),b.push(c));
RX6_setValue("myItemList",JSON.stringify(b));showInventory()}
function gotoMWLink(){var a=decodeURIComponent(document.getElementById("gotoInput").value),b="http://facebook.mafiawars.zynga.com/mwfb/remote/html_server.php?";a.match(/user":"(.+)"/)?(a=decodeID(RegExp.$1).digitize(),b+="xw_controller=stats&xw_action=view&xw_city="+city+"&xw_person="+xw_user+"&user=p%7C"+a,document.getElementById("gotoLink").setAttribute("href",b)):a.match(/&user=p\|(\d+)$/)?(a=RegExp.$1.digitize(),b+="xw_controller=stats&xw_action=view&xw_city="+city+"&xw_person="+xw_user+"&user=p%7C"+
a,document.getElementById("gotoLink").setAttribute("href",b)):a.match(/&user=(.+)/)?(a=decodeID(RegExp.$1).digitize(),b+="xw_controller=stats&xw_action=view&xw_city="+city+"&xw_person="+xw_user+"&user=p%7C"+a,document.getElementById("gotoLink").setAttribute("href",b)):a.match(/"id":"(.+)"/)?(a=decodeID(RegExp.$1).digitize(),b+="xw_controller=clan&xw_action=view&xw_city="+city+"&xw_person="+xw_user+"&id="+encode64(a)+"&from_red_link=1",document.getElementById("gotoLink").setAttribute("href",b)):a.match(/&id=(.+)&/)?
(a=decodeID(RegExp.$1).digitize(),b+="xw_controller=clan&xw_action=view&xw_city="+city+"&xw_person="+xw_user+"&id="+encode64(a)+"&from_red_link=1",document.getElementById("gotoLink").setAttribute("href",b)):(alert("Unknown Link ... Please be carefull before proceeding ... The link will be opened in a different window/tab"),document.getElementById("gotoLink").setAttribute("target","_blank"),document.getElementById("gotoLink").setAttribute("href",a))}
function addBorkalector(){if(!document.getElementById("aim_content")){$("#mw_masthead").append("<div id='aim_content' style='text-align:center;'></div>");var a=document.getElementById("aim_content");document.getElementById("gotoInput")||(title="Enter MW Link",id="gotoInput",makeElement("input",a,{type:"text",id:id,title:title,style:"width: 300px;"}).addEventListener("change",gotoMWLink,!1),makeElement("br",a),title="go to MW Link",id="gotoLink",eltA=makeElement("a",a,{id:id,href:"#",alt:title,title:title,
selector:"#inner_page"}),eltA.appendChild(document.createTextNode(title)),a=RX6_getValue("aimSettings","'center'|80").split("|"),$("#aim_content").dialog({title:"RX6 Teleporter - mwap.me.uk",hide:"fade",show:"blind",close:function(){$("#aim_content").remove()},width:350,height:100,zIndex:999999,position:[parseInt(a[0]),parseInt(a[1])],resizable:!1,beforeclose:function(){window.setTimeout(function(){RX6_setValue("aimSettings",String($("#aim_content").offset().left+"|"+$("#aim_content").offset().top))},
0)}}))}}function convertMWLink(){var a,b=decodeURIComponent(document.getElementById("convertInput").value),c=document.getElementById("convertedID");b.match(/user":"(.+)"/)?a=decodeID(RegExp.$1).digitize():b.match(/"id":"(.+)"/)&&(a=decodeID(RegExp.$1).digitize());a&&c?c.innerHTML="MW Id: "+a:alert("Invalid MW link.");document.getElementById("convertInput").value=""}
function addBorkavertor(){if(!document.getElementById("bork_content")){$("#mw_masthead").append("<div id='bork_content' style='text-align:center;'></div>");var a=document.getElementById("bork_content");document.getElementById("convertUserInput")||(title="Enter MW Link",id="convertInput",makeElement("input",a,{type:"text",id:id,title:title,style:"width: 300px;"}),makeElement("br",a),title="Convert MW Link",id="convertLink",eltA=makeElement("a",a,{id:id,href:"#",alt:title,title:title}),eltA.appendChild(document.createTextNode(title)),
eltA.addEventListener("click",convertMWLink,!1),makeElement("br",a),title="MW ID",id="convertedID",eltA=makeElement("span",a,{id:id,alt:title,title:title}).appendChild(document.createTextNode("MW Id: ")),a=RX6_getValue("borkSettings","'center'|80").split("|"),$("#bork_content").dialog({title:"RX6 LinKonvertor - mwap.me.uk",hide:"fade",show:"blind",close:function(){$("#bork_content").remove()},width:350,height:100,zIndex:999999,position:[parseInt(a[0]),parseInt(a[1])],resizable:!1,beforeclose:function(){window.setTimeout(function(){RX6_setValue("borkSettings",
String($("#bork_content").offset().left+"|"+$("#bork_content").offset().top))},0)}}))}}
function addBorkavatorMap(){if(!document.getElementById("map_content")){$("#mw_masthead").append("<div id='map_content'></div>");var a=document.getElementById("map_content");if(!document.getElementById("mwapSpringMap")){a=makeElement("div",a,{id:"mwapSpringMap",title:"mwapSpringMap",style:"width:290px;padding:10px;"});i=0;for(iLength=cities.length;i<iLength;i++)if(!cities[i][CITY_CLOSED]){choiceTier=document.createElement("p");choiceTier.appendChild(document.createTextNode(cities[i][CITY_NAME].toUpperCase()));
a.appendChild(choiceTier);j=0;for(jLength=missionTabs[i].length;j<jLength;j++){var b=j+1;choiceTier=makeElement("a",a,{title:missionTabs[i][j],style:"border:1px solid;padding:0px 5px 0px 5px;margin:5px;"});choiceTier.text=b;choiceTier.name=i+"|"+b;a.appendChild(choiceTier);choiceTier.addEventListener("click",mwapSpringMap,!1)}}a=RX6_getValue("mapSettings","'center'|80").split("|");$("#map_content").dialog({title:"RX6 District Map - mwap.me.uk",hide:"fade",show:"blind",close:function(){$("#map_content").remove()},
width:325,zIndex:999999,position:[parseInt(a[0]),parseInt(a[1])],resizable:!1,beforeclose:function(){window.setTimeout(function(){RX6_setValue("mapSettings",String($("#map_content").offset().left+"|"+$("#map_content").offset().top))},0)}})}}}
function addBorkavatorSelect(){if(!document.getElementById("list_content")){$("#mw_masthead").append("<div id='list_content'></div>");var a=document.getElementById("list_content");if(!document.getElementById("mwapSpringList")){a=makeElement("select",a,{id:"mwapSpringList",title:"mwapSpringList",style:"width:230px;"});choiceTier=document.createElement("option");choiceTier.text="RX6 MWAP Borkavator List";choiceTier.value="";a.appendChild(choiceTier);i=0;for(iLength=cities.length;i<iLength;i++)if(!cities[i][CITY_CLOSED]){choiceTier=
document.createElement("optgroup");choiceTier.label=cities[i][CITY_NAME].toUpperCase();choiceTier.className="ap_optgroup1";a.appendChild(choiceTier);j=0;for(jLength=missionTabs[i].length;j<jLength;j++){var b=j+1;choiceTier=document.createElement("option");choiceTier.text=missionTabs[i][j];choiceTier.value=i+"|"+b;a.appendChild(choiceTier)}}a.addEventListener("change",mwapSpringList,!1);a=RX6_getValue("listSettings","'center'|80").split("|");$("#list_content").dialog({title:"RX6 District List - mwap.me.uk",
hide:"fade",show:"blind",close:function(){$("#list_content").remove()},width:250,height:85,zIndex:999999,position:[parseInt(a[0]),parseInt(a[1])],resizable:!1,beforeclose:function(){window.setTimeout(function(){RX6_setValue("listSettings",String($("#list_content").offset().left+"|"+$("#list_content").offset().top))},0)}})}}}function mwapSpringList(){var a=document.getElementById("mwapSpringList");mwapJump(a.value);a.selectedIndex=0}function mwapSpringMap(){mwapJump(this.name)}
function mwapJump(a){var a=a.split("|"),b=a[0],c=parseInt(a[1]),a=c-1;if(isNewCity(b)){var d=missions.filter(function(a,d,g){return g[d][MISSION_CITY]==b&&g[d][MISSION_TAB]==c});d[0][MISSION_TABPATH]&&(c=d[0][MISSION_TABPATH])}if(d=makeElement("a",null,{onclick:'return do_ajax("inner_page","remote/html_server.php?xw_controller=travel&xw_action=travel&xw_city='+city+"&from=job&zone=1&destination="+cities[b][CITY_NUMBER]+"&tab="+c+'", 1, 1 ,0, 0); return false;'}))return clickElement(d),addToLog("info Icon",
"Springboard used to go to "+cities[b][CITY_NAME]+" - "+missionTabs[b][a]),!0}
function mwapNewSettings(){function a(a){var b=$x('.//div[@class="tabcontent"]');if(b&&b.length){i=0;for(iLength=b.length;i<iLength;i++)b[i].id==a?(b[i].style.display="block",$("#currentTab").html(""),$("#currentTab").append(b[i].id)):b[i].style.display="none"}}$.fx.speeds._default=700;document.getElementById("currentTab")||$("#mw_masthead").append("<div id='currentTab' style='display:none;'></div>");document.getElementById("mwapNewSettings")||$("#mw_masthead").append("<div id='mwapNewSettings'></div>");
var b=document.getElementById("mwapNewSettings");$("#mwapNewSettings").dialog({title:"RX6 MWAP Settings - mwap.me.uk - Help? playerscripts.co.uk/pswiki",hide:"drop",show:"fade",buttons:[{text:"Cash",click:function(){a("cashTab");$("span.ui-dialog-title").text("RX6 Cash & Properties Settings : mwap.me.uk : Help? playerscripts.co.uk/pswiki")}},{text:"Health",click:function(){a("healTab");$("span.ui-dialog-title").text("RX6 Health Settings : mwap.me.uk : Help? playerscripts.co.uk/pswiki")}},{text:"Stamina",
click:function(){a("staminaTab");$("span.ui-dialog-title").text("RX6 Stamina Settings : mwap.me.uk : Help? playerscripts.co.uk/pswiki")}},{text:"Energy",click:function(){a("energyTab");$("span.ui-dialog-title").text("RX6 Energy Settings : mwap.me.uk : Help? playerscripts.co.uk/pswiki")}},{text:"AutoStat",click:function(){a("autostatTab");$("span.ui-dialog-title").text("RX6 AutoStat Settings : mwap.me.uk : Help? playerscripts.co.uk/pswiki")}},{text:"Family",click:function(){a("familyTab");$("span.ui-dialog-title").text("RX6 Family & Operations Settings : mwap.me.uk : Help? playerscripts.co.uk/pswiki")}},
{text:"Mafia",click:function(){a("mafiaTab");$("span.ui-dialog-title").text("RX6 Mafia Settings : mwap.me.uk : Help? playerscripts.co.uk/pswiki")}},{text:"Display",click:function(){a("displayTab");$("span.ui-dialog-title").text("RX6 Display Settings : mwap.me.uk : Help? playerscripts.co.uk/pswiki")}},{text:"General",click:function(){a("generalTab");$("span.ui-dialog-title").text("RX6 General Settings : mwap.me.uk : Help? playerscripts.co.uk/pswiki")}},{text:"Save",addClass:function(){$(this).addClass("RX6-ui-state-save")},
click:function(){window.setTimeout(function(){saveSettings(!0)},0)}},{text:"Close",addClass:function(){$(this).addClass("RX6-ui-state-close")},click:function(){toggleSettings()}}],close:function(){toggleSettings()},minWidth:805,height:550,zIndex:999999,position:["center",80]});var c=createGeneralTab();b.appendChild(c);c=createDisplayTab();b.appendChild(c);c=createMafiaTab();b.appendChild(c);c=createFamilyTab();b.appendChild(c);c=createAutostatTab();b.appendChild(c);c=createEnergyTab();b.appendChild(c);
c=createStaminaTab();b.appendChild(c);c=createHealTab();b.appendChild(c);c=createCashTab();b.appendChild(c);var d;document.getElementById("currentTab")&&(d=document.getElementById("currentTab").innerHTML);d||(d=RX6_getValue("currentTab","generalTab"));a(d)}
function customizeBankStats(){setListenStats(!1);var a=xpathFirst('.//div[@id="game_stats"]//div[@id="cash_stats_'+cities[city][CITY_ALIAS]+'"]/h4/a[@id="mwap_bank"]',statsrowElt),b=xpathFirst('.//div[@id="game_stats"]//div[@id="cash_stats_'+cities[city][CITY_ALIAS]+'"]/h4/text()',statsrowElt);b&&!a&&(a=makeElement("a",null,{id:"mwap_bank",title:"Click to bank immediately."}),b.parentNode.insertBefore(a,b),a.appendChild(b),a.addEventListener("click",bgBanking,!1));setListenStats(!0)}
function customizeEnergyStats(){setListenStats(!1);var a=document.getElementById("mwap_nrg"),b=xpathFirst('./div[@class="mw_header"]//div[@class="mid_row_text energy_text_bg" and contains(text(), "ENERGY")]',statsrowElt);b||(b=xpathFirst('.//div[@id="game_stats"]//h4[@class="energy" and contains(text(), "Energy")]',statsrowElt));b||(b=xpathFirst('.//div[@id="game_stats"]//span[@class="stat_title" and contains(text(),"Energy")]',statsrowElt));if(b&&!a&&(isGMChecked("autoMission")?(a="Spend Energy ON.  ",
b.style.color="#33FF00"):(a="Spend Energy OFF.  ",b.style.color="#FF0000"),selectedTierValue=RX6_getValue("selectTier","0.0").split("."),masteryCity=parseInt(selectedTierValue[0]),masteryTier=parseInt(selectedTierValue[1]),a=0==masteryCity&&(0==masteryTier||void 0==masteryTier)?a+" Mastering- Turned OFF ":a+(" Mastering-"+cities[masteryCity][CITY_NAME]+", District/Region-"+masteryTier+" "+missionTabs[masteryCity][masteryTier-1]),b.style.textDecoration="underline",a=makeElement("a",null,{id:"mwap_nrg",
title:a}),b.parentNode.insertBefore(a,b),a.appendChild(b),a.addEventListener("click",toggleNrgSpend,!1),b=document.getElementById("mwap_epack"),!b)){var c=getHoursTime("miniPackTimer"),b=RX6_getValue("miniAvailable",!1)?"Mini-Pack available now. ":c+" until Mini-Pack is available. ",b=makeElement("a",null,{id:"mwap_Fire_epak",title:b+" Click to attempt to fire immediately.",style:"margin:-17px 0px 0px 60px;padding:0px; position:absolute;"});0==c||void 0==c?(b.innerHTML=mini_Epak_ready,c="EP"):(b.innerHTML=
mini_Epak_wait,c="na");mepakParent=a.parentNode;mepakParent.insertBefore(b,mepakParent.childNodes[2]);b.appendChild(document.createTextNode(c));b.addEventListener("click",miniPackForce,!1)}energyElt.style.textDecoration=energy==maxEnergy?"blink":"none";setListenStats(!0)}
function customizeStaminaStats(){setListenStats(!1);var a=document.getElementById("mwap_stam"),b=xpathFirst('./div[@class="mw_header"]//div[@class="mid_row_text stamina_text_bg" and contains(text(), "STAMINA")]',statsrowElt);b||(b=xpathFirst('.//div[@id="game_stats"]//h4[contains(text(), "Stamina")]',statsrowElt));b||(b=xpathFirst('.//div[@id="game_stats"]//span[@class="stat_title" and contains(text(),"Stamina")]',statsrowElt));if(b&&!a){isGMChecked("staminaSpend")?(a="Spend Stamina ON.  ",b.style.color=
"#33FF00"):(a="Spend Stamina OFF.  ",b.style.color="#FF0000");var a=a+("Minimum Stamina for auto-healing set at "+RX6_getValue("stamina_min_heal")+" points."),c=getStaminaMode(),a=a+(" Stamina Spend Mode: "+staminaSpendChoices[c]);b.style.textDecoration="underline";a=makeElement("a",null,{id:"mwap_stam",title:a});b.parentNode.insertBefore(a,b);a.appendChild(b);a.addEventListener("click",toggleStamSpend,!1)}staminaElt.style.textDecoration=stamina==maxStamina?"blink":"none";setListenStats(!0)}
function customizeHealthStats(){setListenStats(!1);var a=xpathFirst('.//div[@id="game_stats"]//a[@class="heal_link" or @class="heal_link vt-p"]',statsrowElt),b=document.getElementById("mwap_heal"),c=xpathFirst('./div[@class="mw_header"]//div[@class="mid_row_text health_text_bg" and contains(text(), "HEALTH")]',statsrowElt);c||(c=xpathFirst('.//div[@id="game_stats"]//h4[@class="health" and contains(text(), "Health")]',statsrowElt));c||(c=xpathFirst('.//div[@id="game_stats"]//span[@class="stat_title" and contains(text(),"Health")]',
statsrowElt));if(c){if(!b){c.style.color="#FF0000";c.style.textDecoration="underline";c.style.display="inline-block";b=makeElement("a",null,{id:"mwap_heal",title:"Click to heal immediately."});c.parentNode.insertBefore(b,c);b.appendChild(c);b.style.textDecoration="none";var d=document.getElementById("mwap_toggleheal");d||(newLinkTitle=isGMChecked("autoHeal")?getStaminaMode()==STAMINA_HOW_FIGHTROB||getStaminaMode()==STAMINA_HOW_FIGHTROB_BG?"autoHeal checked BUT OVERRULED - healing in "+locations[RX6_getValue("healLocation")]+
" when health falls below "+RX6_getValue("healthLevel")+".":"autoHeal checked - healing in "+locations[RX6_getValue("healLocation")]+" when health falls below "+RX6_getValue("healthLevel")+".":"autoHeal unchecked",d=makeElement("a",null,{id:"mwap_toggleheal",title:newLinkTitle}),d.innerHTML=isGMChecked("autoHeal")?getStaminaMode()==STAMINA_HOW_FIGHTROB||getStaminaMode()==STAMINA_HOW_FIGHTROB_BG?healOnHoldIcon:healOnIcon:healOffIcon,d.style.padding="5px 0px 0px 8px",d.style.position="absolute",healParent=
b.parentNode,healParent.insertBefore(d,healParent.childNodes[2]),d.addEventListener("click",toggleHeal,!1))}d=/transparent url/i.test(c.getAttribute("style"));20>health&&isGMChecked("hideInHospital")?d||(c.style.background="transparent url("+stripURI(hideIcon)+") no-repeat scroll 0 50%",c.title="Currently hiding in the hospital. Click to heal immediately."):d&&(c.style.background="",c.title="Click to heal immediately.");a&&b.addEventListener("click",autoHeal,!1)}healthElt.style.textDecoration=19<
health&&29>health?"blink":"none";isGMChecked("forceHealOpt5")&&(20>health&&!0!=RX6_getValue("healWaitStarted"))&&(setGMTime("healWaitTime","05:00"),RX6_setValue("healWaitStarted",!0));setListenStats(!0)}function customizeStats(){customizeBankStats();customizeEnergyStats();customizeStaminaStats();customizeHealthStats()}
function toggleHeal(){document.getElementById("mwap_toggleheal")&&(isGMChecked("autoHeal")?(RX6_setValue("autoHeal",0),document.getElementById("mwap_toggleheal").innerHTML=healOffIcon,document.getElementById("mwap_toggleheal").title="autoHeal unchecked",addToLog("healOffIcon Icon","autoHeal turned OFF by User")):(RX6_setValue("autoHeal","checked"),getStaminaMode()==STAMINA_HOW_FIGHTROB||getStaminaMode()==STAMINA_HOW_FIGHTROB_BG?(document.getElementById("mwap_toggleheal").innerHTML=healOnHoldIcon,
document.getElementById("mwap_toggleheal").title="autoHeal checked BUT OVERRULED - healing in "+locations[RX6_getValue("healLocation")]+" when health falls below "+RX6_getValue("healthLevel")+".",addToLog("healOnHoldIcon Icon","autoHeal turned ON by User, but overruled")):(document.getElementById("mwap_toggleheal").innerHTML=healOnIcon,document.getElementById("mwap_toggleheal").title="autoHeal checked - healing in "+locations[RX6_getValue("healLocation")]+" when health falls below "+RX6_getValue("healthLevel")+
".",addToLog("healOnIcon Icon","autoHeal turned ON by User"))))}function toggleNrgSpend(){isGMChecked("autoMission")?(RX6_setValue("autoMission",0),addToLog("info Icon","Energy Spend turned OFF by User")):(RX6_setValue("autoMission","checked"),addToLog("info Icon","Energy turned ON by User"));update_nrg_stam()}
function toggleStamSpend(){isGMChecked("staminaSpend")?(RX6_setValue("staminaSpend",0),addToLog("info Icon","staminaSpend turned OFF by User")):(RX6_setValue("staminaSpend","checked"),addToLog("info Icon","staminaSpend turned ON by User"));update_nrg_stam()}
function customizeHome(){var a=document.getElementById("snapi_zbar");a&&a.parentNode.parentNode.removeChild(a.parentNode);if(a=document.getElementById("mw_like_button"))a.style.display="none";odiv=xpathFirst('.//iframe[@name="mafiawars_zbar"]');a&&(a.style.display="none",a.parentNode&&a.parentNode.removeChild(a));var b=$x('.//div[contains(@id,"cpa") and contains(@id,"banner")]');for(i=0;i<b.length;i++)if(a=b[i])a.style.display="none",a.parentNode&&a.parentNode.removeChild(a);if(!onHome())return!1;
"undefined"==typeof unsafeWindow.MW.PropertiesV2HPMod.RX6CollectPopup&&(unsafeWindow.MW.PropertiesV2HPMod.addLineItem=function(a){return'<div class="" title="RX6 Improved Collection">'+a+"</div>"},unsafeWindow.MW.PropertiesV2HPMod.RX6CollectPopup=function(a,b){$(b).hide();var c=JSON.parse(a.data),d=unsafeWindow.MW.PropertiesV2HPMod.addLineItem("RX6 Improved Collection");c.CASH&&0!=c.CASH&&(d+=unsafeWindow.MW.PropertiesV2HPMod.addLineItem("Cash: "+c.CASH));c.STAMINA&&0<c.STAMINA&&(d+=unsafeWindow.MW.PropertiesV2HPMod.addLineItem("Stamina: "+
c.STAMINA));c.ENERGY&&0<c.ENERGY&&(d+=unsafeWindow.MW.PropertiesV2HPMod.addLineItem("Energy: "+c.ENERGY));c.SPECIALREWARD_NAME&&""!=c.SPECIALREWARD_NAME&&(d+=unsafeWindow.MW.PropertiesV2HPMod.addLineItem("Special Reward: "+c.SPECIALREWARD_NAME));""!=d?$("#propv2-confirmation-other").html(d):$("#propv2-confirmation-other").html("");$("#propv2-confirmation-craft").parent().hide();$("#propv2-hp-confirmation").height(250).show()});try{var c=$("#propv2-collectall-7").find("a:first");c&&c.attr("href")&&
c.attr("callback","MW.PropertiesV2HPMod.RX6CollectPopup").attr("href",c.attr("href").replace("&js=1&version=v2",""));$("#propv2-coll-7-5,#propv2-coll-7-6,#propv2-coll-7-7").each(function(){if((c=$(this).find("a"))&&c.attr("href"))c.attr("callback","MW.PropertiesV2HPMod.RX6CollectPopup").attr("href",c.attr("href").replace("&js=1&version=v2","")),c.html("RX6 Collect")})}catch(d){colorDEBUG("RX6 Collect Error:"+d)}if(!running&&(unsafeWindow.FeaturedEventsModule.Carousel.isPaused||$("#empire_featured_roundel_playpause").trigger("click"),
unsafeWindow.FeaturedEventsModule.Carousel.jumpPrevious=function(){var a=unsafeWindow.FeaturedEventsModule.Carousel.current_featured-1;0==a&&(a=unsafeWindow.FeaturedEventsModule.Carousel.maxRoundels);unsafeWindow.FeaturedEventsModule.Carousel.changeFeatured(a,!0)},unsafeWindow.FeaturedEventsModule.Carousel.jumpNext=function(){var a=unsafeWindow.FeaturedEventsModule.Carousel.current_featured+1;a>unsafeWindow.FeaturedEventsModule.Carousel.maxRoundels&&(a=1);unsafeWindow.FeaturedEventsModule.Carousel.changeFeatured(a,
!0)},(a=$x('.//td[contains(@id,"empire_featured_roundel")]'))&&0<a.length)){i=0;for(iLength=a.length;i<iLength;i++)b=a[i],0==i&&(iRoundelParent=b.parentNode,e=makeElement("td",null,{id:"prevCarousel","class":"empire_featured_roundel",title:"previous event",style:"font-weight:bold"}),iRoundelParent.insertBefore(e,iRoundelParent.firstChild),e.appendChild(document.createTextNode(" << ")),$("#prevCarousel").bind("click",unsafeWindow.FeaturedEventsModule.Carousel.jumpPrevious),e=makeElement("td",iRoundelParent,
{id:"nextCarousel","class":"empire_featured_roundel",title:"next event",style:"font-weight:bold"}).appendChild(document.createTextNode(" >> ")),$("#nextCarousel").bind("click",unsafeWindow.FeaturedEventsModule.Carousel.jumpNext)),e=b.id.digitize(),(e=xpathFirst('.//div[@id="empire_featured_'+e+'"]//div[contains(@id,"Module")]'))&&!b.hasAttribute("title")&&b.setAttribute("title",e.id)}a=xpathFirst('//div[@id="marketInfo"]');if(!running&&!a){if(a=xpathFirst('.//div[@id="MainModule"]',innerPageElt))a.style.height=
"";var a=xpathFirst('.//div[@class="empire_main_module"]',innerPageElt),a=createAjaxPage(!1,"marketplace",a),e=makeElement("a",null,{onclick:'return do_ajax("'+a+'","'+SCRIPT.controller+"marketplace"+SCRIPT.action+'marketplace_category&category=8", 1, 1, 0, 0); return false;'});clickElement(e)}return!0}
function getPlayerStats(){var a=xpathFirst(".//div/table",innerPageElt);a?(DEBUG("Fetching stats from profile page"),isValidElt(xpathFirst('.//tr[contains(.,"Attack:")]',a)).match(/(\d+)/)?(curAttack=parseInt(RegExp.$1),RX6_setValue("curAttack",curAttack)):DEBUG("Could not read attack stats"),isValidElt(xpathFirst('.//tr[contains(.,"Defense:")]',a)).match(/(\d+)/)?(curDefense=parseInt(RegExp.$1),RX6_setValue("curDefense",curDefense)):DEBUG("Could not read defense stats"),isUndefined(curAttack)||isUndefined(curDefense)?
(addToLog("info icon","Current status attributes cannot be detected, turning off auto-stat."),RX6_setValue("autoStat",0)):DEBUG("Current Stats (Attack: "+curAttack+"-  Defense: "+curDefense+") saved.")):DEBUG("Fetching stats from profile page FAILED.")}
function getPlayerEquip(){if(onFightTab()||onInventoryTab()||onLootTab()){var a=xpathFirst('.//div[@id="mafia_attack_strength"]',innerPageElt);a&&(prevAttackEquip=curAttackEquip,a.innerHTML.untag().match(/(.+)\(/)&&(curAttackEquip=parseInt(RegExp.$1.digitize())),(a=xpathFirst('.//span[@title="Family Property Bonus"]',a))&&(curAttackEquip+=parseInt(a.innerHTML.digitize())),RX6_setValue("curAttackEquip",curAttackEquip));if(a=xpathFirst('.//div[@id="mafia_defense_strength"]',innerPageElt))prevDefenseEquip=
curDefenseEquip,a.innerHTML.untag().match(/(.+)\(/)&&(curDefenseEquip=parseInt(RegExp.$1.digitize())),(a=xpathFirst('.//span[@title="Family Property Bonus"]',a))&&(curDefenseEquip+=parseInt(a.innerHTML.digitize())),RX6_setValue("curDefenseEquip",curDefenseEquip);(isUndefined(curAttackEquip)||isUndefined(curDefenseEquip))&&DEBUG("Current equipment attributes cannot be detected.")}}
function customizeProfile(){var a=xpathFirst('.//div[@id="clan_main"]/strong');if(a){var b="";decodeURIComponent(a.innerHTML.untag()).match(/"id":"(.+)"/)&&(b=decodeID(RegExp.$1).digitize());b&&(a=xpathFirst('.//div[@id="clan_header"]/h3'),makeElement("span",a,{style:"float:right"}).appendChild(document.createTextNode(" (MW Clan ID: "+b+")")))}if(!xpathFirst('.//td[@class="stats_left"]',innerPageElt))return!1;getPlayerStats();this.buildAnchor=function(a){var b={};b.href=a.URLSegment?"http://mwfb.zynga.com/mwfb/remote/html_server.php?"+
a.URLSegment:a.href?a.href:"#";!a.clickEvent&&a.URLSegment&&(b.onclick="return do_ajax('inner_page', '/remote/html_server.php?"+a.URLSegment+"', 1, 1, 0, 0); return false; ");a.id&&(b.id=a.id);b=makeElement("a",c,b);a.AnchorText&&b.appendChild(document.createTextNode(a.AnchorText));a.clickEvent&&b.addEventListener("click",a.clickEvent,!1);return b};var c=xpathFirst('.//a[contains(., "Sucker Punch")]/..',innerPageElt);if(c&&(b=xpathFirst('.//li[contains(@class, "tab_on")]//a[contains(text(), "Profile")]',
innerPageElt))){var d,e,f,g;b.getAttribute("onclick").match(/tmp=([\d,a-z]+)&cb=([\d,a-z]+)&user=p\|(\d+)/)&&(f="tmp="+RegExp.$1+"&",g="cb="+RegExp.$2+"&",d="p|"+RegExp.$3);!d&&b.getAttribute("onclick").match(/user=p\|(\d+)/)&&(d="p|"+RegExp.$1);if(m=/xw_controller=robbing.*?target=([0-9]+)/.exec(document.getElementById("inner_page").innerHTML))e=m[1];if(m=/xw_controller=stats.*?user=([0-9]+)/.exec(document.getElementById("inner_page").innerHTML))e=m[1];if(m=/xw_action=gift_wishlist.*?user=([0-9]+)/.exec(document.getElementById("inner_page").innerHTML))e=
m[1];if(m=/q([0-9]+)_(\d+)\.jpg/.exec(document.getElementById("inner_page").innerHTML))e=m[1];1<document.getElementsByClassName("fightres_image").length&&(e=/(\d+)_(\d+)_q.jpg/.exec(document.getElementsByClassName("fightres_image")[1].innerHTML)[1]);if(m=/xw_controller=VegasSlots.+?friend_id=([0-9]+)/i.exec(document.getElementById("inner_page").innerHTML))e=m[1];if(m=/([0-9]+)_(\d+)\_q.jpg/.exec(document.getElementById("inner_page").innerHTML))e=m[1];if((m=/user%2522.*?%2522([0-9A-Za-z%]+)%2522/.exec(document.getElementById("mainDiv").innerHTML))||
(m=/user%22.*?%22([0-9A-Za-z%]+)%22/.exec(document.getElementById("mainDiv").innerHTML)))e=atob(m[1].replace(/%253D/g,"=").replace(/%3D/g,"="));!f&&b.getAttribute("onclick").match(/tmp=([\d,a-z]+)&/)&&(f="tmp="+RegExp.$1+"&");!g&&b.getAttribute("onclick").match(/cb=([\d,a-z]+)&/)&&(g="cb="+RegExp.$2+"&");var b="Mafia Wars ID: "+d+" | Facebook ID: "+e,h=xpathFirst('.//div[@class="stats_title_text"]//a[contains(@href,"from_red_link")]',innerPageElt);h&&(a=h.innerHTML.untag().trim(),h.href.match(/&id=(.+)&/)&&
(h=decodeID(RegExp.$1).digitize(),b+=" | Family ID ("+a+"): "+h));DEBUG(b);a=d.replace("p|","");h=xpathFirst('.//a[contains(., "Remove from Mafia")]',c);if(!running&&!h){var l=xpathFirst('./div[@class="title stats_title"]',innerPageElt);l&&l.setAttribute("style","background: black;");var l=createAjaxPage(!1,"icecheck profile",l),k=xpathFirst('.//a[contains(., "Add to Hitlist")]',innerPageElt),p=makeElement("a",null,null),k=k.getAttribute("onclick"),k=k.replace("inner_page",l);p.setAttribute("onclick",
k);clickElement(p)}if(document.getElementById("where_are_my_links"))return!0;document.getElementById("copy_container")&&(document.getElementById("copy_container").style.display="none");if(l=xpathFirst('.//a[contains(.,"Let then Get")]',innerPageElt))l.innerHTML="Ask Mafia to Attack";l=!1;makeElement("br",c,{});makeElement("span",c,{}).appendChild(document.createTextNode("RX6 Info"));makeElement("br",c,{});makeElement("span",c,{}).appendChild(document.createTextNode(b));makeElement("br",c,{});makeElement("br",
c,{});makeElement("span",c,{}).appendChild(document.createTextNode("RX6 Links"));makeElement("br",c,{});makeElement("a",c,{id:"where_are_my_links",href:'javascript:alert("Due to the way Mafia Wars links to Facebook there are times where RX6 MWAP cannot find the Facebook profile ID. In those situations RX6 MWAP will not display buttons that require that ID. You can make the Facebook ID available by refreshing the profile page.");'}).appendChild(document.createTextNode("Where are my links?"));c.appendChild(document.createTextNode(" | "));
makeElement("a",c,{href:"http://facebook.mafiawars.com/mwfb/remote/html_server.php?xw_controller=stats&xw_action=view&xw_city=1&user="+d}).appendChild(document.createTextNode("Refresh this profile!"));l=!0;e&&(l&&c.appendChild(document.createTextNode(" | ")),makeElement("a",c,{href:"http://www.facebook.com/profile.php?id="+e,target:"_blank"}).appendChild(document.createTextNode("Facebook Profile")),c.appendChild(document.createTextNode(" | ")),makeElement("a",c,{href:"http://www.facebook.com/addfriend.php?id="+
e,target:"_blank"}).appendChild(document.createTextNode("Add as Friend")),l=!0);h&&(l&&c.appendChild(document.createTextNode(" | ")),this.buildAnchor({AnchorText:"Promote",URLSegment:"xw_controller=group&xw_action=view&xw_city="+(city+1)+"&"+f+g+"promote=yes&pid="+d}),l=!0);l&&makeElement("br",c,{});l=!1;h&&(d=-1!=getSavedList("autoWarTargetList").indexOf(a),this.buildAnchor({AnchorText:d?"Remove from War List":"Add to AutoWar List",id:a,title:"In the settings box, under the mafia tab\nIf you have selected war friends from a list\nupdates the friends ids in the box",
clickEvent:d?clickWarListRemove:clickWarListAdd}),l=!0);l&&c.appendChild(document.createTextNode(" | "));d=-1!=getSavedList("pautoHitOpponentList").indexOf(a);this.buildAnchor({AnchorText:d?"Remove from AutoHit List":"Add to AutoHit List",id:a,title:"In the settings box, under the stamina tab\nIf you have selected hitlist opponents \nHitlist these opponents:",clickEvent:d?clickAutoHitListRemove:clickAutoHitListAdd});l=!0;h||(l&&c.appendChild(document.createTextNode(" | ")),l=!0,d=-1!=getSavedList("pfightlist").indexOf(a),
this.buildAnchor({AnchorText:d?"Remove from Fight List":"Add to AutoFight List",id:a,title:"In the settings box, under the stamina tab\nIf you have selected fight specific opponents\nFight these opponents:",clickEvent:d?clickFightListRemove:clickFightListAdd}));l&&makeElement("br",c,{})}return!0}
function getBrazilJobMastery(a){if(a.innerHTML.untag().match(/(\d+)%/i)||a.innerHTML.untag().match(/(\d+)%\s?mastered/i))return parseInt(RegExp.$1);DEBUG("No mastery items found. Assuming 0% mastery level.");return 0}
function getJobMastery(a,b){if(b){var c=100;if(isJobFight(a)&&isGMChecked("skipfight"))return 100;a.innerHTML.untag().match(/>(\d+)%\s+Job\s+Mastery/i)||a.innerHTML.untag().match(/(\d+)%/i)||a.innerHTML.match(/Job\s+Mastery\s+(\d+)%/i)||a.innerHTML.match(/>(\d+)%/i)?c=parseInt(RegExp.$1):a.innerHTML.untag().match(/margin-right:\s+(\d+)%/i)&&(c=100-parseInt(RegExp.$1));return c}if(/Mastered/i.test(a.innerHTML)||isJobLocked(a))return 100;if(a.innerHTML.match(/Job\s+Mastery\s+(\d+)%/i)||a.innerHTML.match(/>(\d+)%/i))return c=
parseInt(RegExp.$1);DEBUG("No mastery items found. Assuming 0% mastery level.");return 0}
function jobMastery(a,b){if(!isGMChecked("repeatJob")){var c=GM_getIntValue("selectMission",1),d=missions[c][MISSION_NAME],e=missions[c][MISSION_TAB],f=missions[c][MISSION_TABPATH],g=missions[c][MISSION_CITY],h=e;isNewCity(city)&&f&&(h=f);if(city==g&&onJobTab(h)){var l=getJobRow(d,a),f=0,h=-1;l&&(h=getJobMastery(l,b));DEBUG("Job '"+d+"' is "+h+" % complete");var k=100==h;l&&(b&&l.className.match(/level_(\d+)/i)?f=RegExp.$1:l.innerHTML.match(/level (\d+)/i)&&(f=RegExp.$1));for(var p=l=0,n=c,r=!1,q=
0,t=missions.length;q<t;q++)if(city==missions[q][MISSION_CITY]&&e==missions[q][MISSION_TAB]){var s=getJobRow(missions[q][MISSION_NAME]);if(s){var y=getJobMastery(s,b);if(isGMChecked("skipfight")&&!isJobFight(s)||!isGMChecked("skipfight"))l+=y,p++,!r&&100>y&&(r=!0,n=q,DEBUG("firstUnmastered job is "+missions[q][MISSION_NAME]))}}0<p&&(l=Math.floor(l/p));RX6_getValue("tierCompleteStatus")!=f+"|"+l&&RX6_setValue("tierCompleteStatus",f+"|"+l);DEBUG("Job tier level "+f+" is "+l+"% complete.",caq);if(k||
-1==h)if(0==getSavedList("jobsToDo").length)if(DEBUG("There are no more jobs in the to-do list."),k?addToLog("info Icon",'You have mastered <span class="job">'+d+"</span>."):addToLog("info Icon",'Job <span class="job">'+d+"</span> is not available."),100==l||isGMChecked("skipfight")){for(var C,q=c+1,t=missions.length;q<t;q++){if(missions[q][MISSION_CITY]!=g){C=q;addToLog("info Icon","You have mastered the final job tier in "+cities[g][CITY_NAME]+"! Moving to the next tier in "+cities[missions[C][MISSION_CITY]][CITY_NAME]+
".");break}if(missions[q][MISSION_TAB]!=e){C=q;addToLog("info Icon","Current job tier is mastered. Moving to next tier in "+cities[g][CITY_NAME]+".");break}}C?(RX6_setValue("selectMission",C),DEBUG("Next Job in Tier Mastery Sequence: "+missions[RX6_getValue("selectMission",1)][MISSION_NAME])):addToLog("info Icon","You have mastered all jobs!")}else RX6_setValue("selectMission",n),DEBUG("Next Job in Tier Mastery Sequence: "+missions[RX6_getValue("selectMission",1)][MISSION_NAME]);else DEBUG("There are still jobs in the to-do list.");
else RX6_getValue("jobCompleteStatus")!=d+"|"+String(h)&&(RX6_setValue("jobCompleteStatus",d+"|"+String(h)),DEBUG("Job '"+d+"' is "+h+"% complete."))}}}
function highlightJobs(a,b,c,d){if(a!=b){for(;c.length;)a=c.pop(),xpathFirst('.//span[@class="job_best"]',a)||(city==LV&&(a.setAttribute("style","height:32px;"),makeElement("br",a)),a=makeElement("span",a,{"class":"job_best",style:"color:#52E259; font-size: 10px;margin-left:5px;"}),makeElement("img",a,{src:stripURI(yeahIcon),width:"12",height:"12",style:"vertical-align:middle"}),a.appendChild(document.createTextNode(" BEST")));for(;d.length;)a=d.pop(),xpathFirst('.//span[@class="job_worst"]',a)||
(city==LV&&(a.setAttribute("style","height:32px;"),makeElement("br",a)),a=makeElement("span",a,{"class":"job_worst",style:"color:#EC2D2D; font-size: 10px;margin-left:5px;"}),makeElement("img",a,{src:stripURI(omgIcon),width:"12",height:"12",style:"vertical-align:middle"}),a.appendChild(document.createTextNode(" WORST")))}}function isJobFight(a){return xpathFirst('.//div[@id="fight_opponents"]',a)?!0:!1}function isJobBoss(a){return xpathFirst('.//a[contains(@class,"attack_boss")]',a)?!0:!1}
function isJobLocked(a){return(/lock/i.test(a.innerHTML.untag())||/complete/i.test(a.innerHTML.untag()))&&!/help/i.test(a.innerHTML.untag())}
function customizeProps(){if(xpathFirst('.//div[@id="inner_page" and @class="property_controller"]')){var a=$x('.//div[contains(@id,"propertyCollectAndCraftCard_") or contains(@id,"propertyLimitedTimeCardContainer_") ]');if(a&&0<a.length){var b=[];i=0;for(iLength=a.length;i<iLength;i++){var c=a[i],d=c.id.digitize(),e=xpathFirst('.//div[contains(@class,"property") and contains(@class,"CardName")]',c);if((c=xpathFirst('.//div[contains(@class,"property") and contains(@class,"CardLevel")]',c))&&e){var f=
[];f[0]=parseInt(d);f[1]=e.innerHTML.untag().capitalize();f[2]=parseInt(c.innerHTML.untag().digitize());b.push(f)}}RX6_setValue("propLevels",JSON.stringify(b))}}}
function customizeJobs(){try{if(0>=currentJobTab())return!1;var a,b=!1;switch(city){case NY:a=$x('.//table[@class="job_list"]//td[contains(@class,"job_name") or contains(@class,"job_title")]',innerPageElt);if(!a||0==a.length)a=$x('.//div[@id="new_user_jobs"]//div[contains(@class, "job clearfix")]',innerPageElt),b=!0;break;case LV:a=$x('.//div[@id="map_panels"]//div[contains(@class,"job_info")]',innerPageElt);break;case BRAZIL:case CHICAGO:case LONDON:var c=xpathFirst('.//div[(@id="brazil_district_'+
currentBrazilDistrict+'")]',innerPageElt);a=$x('.//div[contains(@id,"job-id")]',c);if(!a||0==a.length)a=$x('.//div[@id="brazil_jobs"]//div[contains(@id,"job-id")]',innerPageElt);break;default:return!1}if(!a||0==a.length)return!1;DEBUG("customizeJobs: Found "+a.length+" new "+cities[city][CITY_NAME]+" jobs in customize "+cities[city][CITY_NAME]+" jobs.",cgr);var d=eval("({0:{},1:{},2:{},3:{},4:{},5:{},6:{},7:{},8:{},9:{}})"),e=eval("({0:{},1:{},2:{},3:{},4:{},5:{},6:{},7:{},8:{},9:{}})");try{d=eval("("+
RX6_getValue("availableJobs")+")"),e=eval("("+RX6_getValue("masteredJobs")+")")}catch(f){}var g=currentJobTab();d[city][g]=[];e[city][g]=[];for(var c=[],h=[],l=0,k=10,p=[],n=[],r=0,q=10,t=getSavedList("masteryJobsList"),s=0,y=0,C=[],F=0,M=a.length;F<M;F++){var D=a[F],B=!1,w=!1,G=!1,E=!1,z=energy,u=0;switch(city){case NY:if(b){var A=xpathFirst('.//div[@class="title_results"]//h3',D);if(!A)continue;if(b)var v=A.innerHTML.clean().trim()}else A=D,v=D.innerHTML.split("<br>")[0].clean().trim().untag();
var v=v.replace(/ x(\d+).*/,""),O=getJobRow(v);if(!O)continue;break;case LV:A=xpathFirst('.//div[@class="job_title"]//h3',D);if(!A)continue;v=A.innerHTML.clean().trim().untag();break;case BRAZIL:case CHICAGO:case LONDON:A=xpathFirst('.//div[@class="job_details clearfix"]//h4',D);if(!A)continue;v=A.innerHTML.clean().trim().untag();break;default:return!1}switch(city){case NY:if(b){var U=xpathFirst('.//div[@class="use_pay"]//dl[contains(.,"Uses")]',D),K=xpathFirst('.//div[@class="use_pay"]//dl[contains(.,"Pays")]',
D),L=xpathFirst(".//a",D),T=getJobMastery(D,!0),I=xpathFirst('.//dd[@class="energy"]',U);I&&(u=parseCash(I.innerHTML))}else U=xpathFirst('.//td[contains(@class,"job_energy")]',O),K=xpathFirst('.//td[contains(@class,"job_reward")]',O),L=xpathFirst('.//td[contains(@class,"job_action")]',O),T=getJobMastery(O,!1),(I=xpathFirst('.//span[@class="bold_number"]',U))||(I=xpathFirst('.//span[@class="energy"]',U)),I&&(u=parseInt(I.innerHTML.untag()));break;case LV:U=xpathFirst('.//div[@class="job_uses"]',D);
K=xpathFirst('.//div[@class="job_pays"]',D);L=xpathFirst('.//a[contains(@class,"sexy_button_new") and not(contains(.,"Ask"))]',D);T=getJobMastery(D,!0);(B=isJobFight(D))&&isGMChecked("skipfight")&&(E=!0);w=isJobBoss(D);B||w?(I=xpathFirst('.//dd[@class="stamina"]',U),z=stamina):I=xpathFirst('.//dd[@class="energy"]',U);I&&(u=parseInt(I.innerHTML.untag()));break;case BRAZIL:case CHICAGO:case LONDON:U=xpathFirst('.//ul[@class="uses clearfix"]',D);(I=xpathFirst('.//li[@class="energy"]',U))&&(I.hasAttribute("current_value")?
u=parseInt(I.getAttribute("current_value")):I.hasAttribute("base_value")&&(u=parseInt(I.getAttribute("base_value"))));K=xpathFirst('.//ul[@class="pays clearfix"]',D);L=xpathFirst('.//a[contains(@id, "btn_dojob")]',D);T=getBrazilJobMastery(D);break;default:return!1}var v=v.replace(/ x(\d+).*/,""),P=missions.searchArray(v,0)[0];if(isNaN(P)){var Q=L.href,B=0;Q.match(/&job=(\d+)&/)&&(ujNo=RegExp.$1);Q.match(/&tab=(\d+)&/)&&(B=RegExp.$1);(J=xpathFirst('.//li[@class="experience"]',K))&&(R=parseInt(J.getAttribute("current_value")));
C.push(",['"+v+"',"+u+","+ujNo+",XXX,"+cities[city][CITY_NAME].toUpperCase()+","+R+","+B+",'',,1]")}else{y++;L&&isJobLocked(L)&&(G=!0);if(100==T||!u)0<t.length&&-1!=t.indexOf(String(P))&&e[city][g].push(P),s++;if(!u||!I||u>z)G=!0;E&&(G=!0,e[city][g].push(P),s++);w&&s<a.length-1&&(G=!0,DEBUG("Not all jobs are mastered yet, skip current boss job"));G||d[city][g].push(P);RX6_setValue("availableJobs",JSON.stringify(d));RX6_setValue("masteredJobs",JSON.stringify(e));var R=0,E=G=w=0,Z=cities[city][CITY_CASH_SYMBOL],
J,S,H;switch(city){case NY:(J=xpathFirst('.//span[@class="bold_number"]',K))||(J=xpathFirst('.//span[@class="experience"]',K));J||(J=xpathFirst('.//dd[@class="experience"]',K));J&&(R=parseInt(J.innerHTML),b||(J=I.parentNode,xpathFirst('.//span[@id="ratio_xp"]',J)||makeElement("br",J)));(S=xpathFirst('.//span[@class="money"]/strong',K))||(S=xpathFirst('.//strong[@class="money"]',K));S||(S=xpathFirst('.//dd[contains(@class,"cash cash")]',K));S&&(G=parseCash(S.innerHTML.untag()),b||(S=S.parentNode));
H=b?J:I;break;case LV:if(J=xpathFirst('.//dd[@class="experience"]',K))R=parseInt(J.innerHTML),H=J;(S=xpathFirst('.//dd[contains(@class,"cash_icon")]',K))&&(G=parseCash(S.innerHTML.untag()));break;case BRAZIL:case CHICAGO:case LONDON:(J=xpathFirst('.//li[@class="experience"]',K))&&(R=parseInt(J.getAttribute("current_value")));(S=xpathFirst('.//li[contains(@class, "cash_icon_jobs")]',K))&&(G=parseCash(S.getAttribute("current_value")));H=J;break;default:return!1}I&&u&&(w=Math.round(100*(R/u))/100,running||
(H&&(xpathFirst('.//span[@id="ratio_xp"]',H)||makeElement("span",H,{id:"ratio_xp",style:"color:red; font-size: 10px;"}).appendChild(document.createTextNode(" ("+w+")"))),S&&(E=Math.round(G/u),0==E&&(E=Math.round(100*(G/u))/100),E=makeCommaValue(E),xpathFirst('.//span[@id="ratio_money"]',S)||makeElement("span",S,{id:"ratio_money",style:"color:red; font-size: 10px;"}).appendChild(document.createTextNode(" ("+Z+" "+E+")"))),b&&(H=A),B?(w>r?(r=w,p=[H]):w==r&&p.push(H),w<q?(q=w,n=[H]):w==q&&n.push(H)):
(w>l?(l=w,c=[H]):w==l&&c.push(H),w<k?(k=w,h=[H]):w==k&&h.push(H))),updateJobInfo(P,u,R,w))}}if(!running){if(0<C.length){for(var V="RX6 detected "+C.length+" unknown jobs on this page:<br>",F=0,M=C.length;F<M;F++)V+=C[F];DEBUG(V)}highlightJobs(k,l,c,h);p&&highlightJobs(k,l,p,n)}switch(city){case NY:b?jobMastery(innerPageElt,!0):jobMastery(innerPageElt,!1);break;case LV:case BRAZIL:case CHICAGO:case LONDON:jobMastery(innerPageElt,!0);break;default:return!1}tierMastery(y,s,g);return!0}catch(W){colorDEBUG("customizeJobs: "+
W)}}function updateJobInfo(a,b,c,d){var e=missions[a];if(!isNaN(a)&&(e[MISSION_ENERGY]!=b||e[MISSION_XP]!=c||e[MISSION_RATIO]!=d))missions[a][MISSION_ENERGY]=b,missions[a][MISSION_XP]=c,missions[a][MISSION_RATIO]=d,RX6_setValue("missions",JSON.stringify(missions))}
function tierMastery(a,b,c){if(running&&"0.0"!=RX6_getValue("selectTier","0.0")&&(selectedTierValue=RX6_getValue("selectTier","0.0").split("."),masteryCity=parseInt(selectedTierValue[0]),masteryTier=parseInt(selectedTierValue[1]),city==masteryCity&&masteryTier==c&&a<=b)){selectTier=cities[masteryCity][0]+" - "+missionTabs[masteryCity][masteryTier-1];addToLog("info Icon","Tier "+selectTier+" is already mastered. Moving on to the next tier.");if(missionTabs[masteryCity].length<=masteryTier)if(cities.length<
masteryCity)RX6_setValue("selectTier","0.0");else{for(masteryCity++;level<cities[masteryCity][CITY_LEVEL]&&cities.length>masteryCity;){masteryCity++;if(cities.length<=masteryCity){DEBUG("We are out of cities to check so turning off mastery ");RX6_setValue("selectTier","0.0");return}DEBUG(cities[masteryCity-1][CITY_NAME]+" Unavailable, Checking "+cities[masteryCity][CITY_NAME])}masteryTier=1}else masteryTier++,isNewCity(city)&&(a=missions.filter(function(a,b,c){return c[b][MISSION_CITY]==masteryCity&&
c[b][MISSION_TAB]==masteryTier}),a[0][MISSION_TABPATH]&&(masteryTier=a[0][MISSION_TABPATH]));if("0.0"!=RX6_getValue("selectTier","0.0")){a=[];i=0;for(iLength=missions.length;i<iLength;i++)masteryCity==missions[i][MISSION_CITY]&&masteryTier==missions[i][MISSION_TAB]&&a.push(i);setSavedList("masteryJobsList",a);RX6_setValue("selectTier",masteryCity+"."+masteryTier)}}}
function customizeFightLists(){if(running||!onHitlistTab()&&!onFightTab()&&!onBattlePage(2))return!0;var a=getDisplayedOpponents(innerPageElt,!0,getStaminaMode());if(!a)return!0;for(var b=hitmanListAvoid.get().concat(fightListAvoid.get()),c=getSavedList("hitmanListKilled"),d=0,e=a.length;d<e;++d){var f=a[d];if(f.profile){var g,h;-1!=String(b).indexOf(f.id)&&(h=f.profile.parentNode,g=makeElement("img",null,{src:stripURI(omgIcon),width:"12",height:"12",style:"vertical-align:middle",title:"You have already lost to this opponent during automatic play."}),
h.insertBefore(g,h.firstChild));-1!=c.indexOf(f.id)&&(h=f.profile.parentNode,g=makeElement("img",null,{src:stripURI(lootbagIcon),width:"12",height:"12",style:"vertical-align:middle",title:"You have already collected a bounty on this target during automatic play."}),h.insertBefore(g,h.firstChild))}}return!0}
function setLevelUpRatioStats(){var a=document.getElementById("level_up_ratio_stats");if(a){var b="Level Up Ratio's: ";if(stamina||energy){var c=Math.ceil(100*(ptsToNextLevel/(energy+stamina)))/100,b=b+("Combined: "+(25<c?"> 25":c)+"x");if(energy)var d=Math.ceil(100*(ptsToNextLevel/energy))/100,b=b+(" | Energy: "+(25<d?"> 25":d)+"x");stamina&&(d=Math.ceil(100*(ptsToNextLevel/stamina))/100,b+=" | Stamina: "+(25<d?"> 25":d)+"x")}a.innerHTML=b;a.style.display=c?"block":"none"}if(!isGMChecked("noStats")){b=
getStaminaGainRate();if(a=xpathFirst('.//div[@id="expRate"]'))a.firstChild.nodeValue=b.toFixed(2);if(a=xpathFirst('.//div[@id="expToNext"]'))a.firstChild.nodeValue=makeCommaValue(ptsToNextLevel);if(a=xpathFirst('.//div[@id="stamToNext"]'))a.firstChild.nodeValue=b?(ptsToNextLevel/b).toFixed(0):"n/a"}}
function clickFightListAdd(){addSavedListItem("pfightlist",this.id);this.firstChild.nodeValue="Remove from Fight List";this.removeEventListener("click",clickFightListAdd,!1);this.addEventListener("click",clickFightListRemove,!1);var a=document.getElementById("pfightlist");a&&(a.value=RX6_getValue("pfightlist",""))}
function clickFightListRemove(){for(;removeSavedListItem("pfightlist",this.id);)this.firstChild.nodeValue="Add to Fight List";this.removeEventListener("click",clickFightListRemove,!1);this.addEventListener("click",clickFightListAdd,!1);var a=document.getElementById("pfightlist");a&&(a.value=RX6_getValue("pfightlist",""))}
function clickAutoHitListAdd(){addSavedListItem("pautoHitOpponentList",this.id);this.firstChild.nodeValue="Remove from AutoHit List";this.removeEventListener("click",clickAutoHitListAdd,!1);this.addEventListener("click",clickAutoHitListRemove,!1);var a=document.getElementById("pautoHitOpponentList");a&&(a.value=RX6_getValue("pautoHitOpponentList",""))}
function clickAutoHitListRemove(){for(;removeSavedListItem("pautoHitOpponentList",this.id);)this.firstChild.nodeValue="Add to AutoHit List";this.removeEventListener("click",clickAutoHitListRemove,!1);this.addEventListener("click",clickAutoHitListAdd,!1);var a=document.getElementById("pautoHitOpponentList");a&&(a.value=RX6_getValue("pautoHitOpponentList",""))}
function clickWarListAdd(){addSavedListItem("autoWarTargetList",this.id);this.firstChild.nodeValue="Remove from War List";this.removeEventListener("click",clickWarListAdd,!1);this.addEventListener("click",clickWarListRemove,!1);var a=document.getElementById("autoWarTargetList");a&&(a.value=RX6_getValue("autoWarTargetList",""))}
function clickWarListRemove(){for(;removeSavedListItem("autoWarTargetList",this.id);)this.firstChild.nodeValue="Add to War List";this.removeEventListener("click",clickWarListRemove,!1);this.addEventListener("click",clickWarListAdd,!1);var a=document.getElementById("autoWarTargetList");a&&(a.value=RX6_getValue("autoWarTargetList",""))}
function getJobRow(a,b){b||(b=innerPageElt);var c,d="",e=0;try{var f=missions.searchArray(a,0)[0];if(!isNaN(f)){var g=missions[f][MISSION_NUMBER];(c=xpathFirst('.//table[@class="job_list"]//a[contains(@onclick, "job='+g+'&")]',b))||(c=xpathFirst('.//table[@class="job_list"]//a[contains(@href, "job='+g+'&")]',b));!c&&city==LV&&(c=xpathFirst('.//div[@id="job'+g+'"]',b),e=1)}var h=xpathFirst('.//a[contains(@onclick, "MapController.buyItems('+g+'); return false;")]');h&&(DEBUG("Cheating on buying for now found a link to click - - jobno="+
g),clickElement(h),addToLog("info Icon","Buying necessary items to be able to perform: '"+missions[f][MISSION_NAME]+"'."));if(!c){for(var l=a.replace(/"/g," ").replace(/'/g," ").split(" "),f=0;f<l.length;++f)1<l[f].length&&(0<d.length&&(d+=" and "),d+='contains(., "'+l[f]+'")');c=xpathFirst('.//table[@class="job_list"]//tr//td['+d+"]",b)}if(c&&!e)for(;"TR"!=c.tagName;)c=c.parentNode;c||(c=xpathFirst('.//div[@id="new_user_jobs"]//div[contains(@class, "job clearfix") and '+d+"]",b));c||((c=xpathFirst('.//div[@class="job"]//a[contains(@href,"job='+
g+'&")]',b))||(c=xpathFirst('.//div[@id="job-id-'+g+'"]//a[contains(@href,"job='+g+'&")]',b)),c&&(c=c.parentNode.parentNode))}catch(k){DEBUG("BUG DETECTED (getJobRow): [exception: "+k+"], [conTxt: "+d+"], [jobName: "+a+"]")}return!c?(colorDEBUG("getJobRow: "+a+" - NO ROWELT FOUND - RETURNING FALSE",cre),!1):c}
function getJobRowItems(a){try{var b=getJobRow(a,innerPageElt);if(!b)return!1;if((innerPageElt?innerPageElt.innerHTML:"").untag().match(/You do not have enough cash to buy/i)){addToLog("warning Icon","You don't have enough cash to buy necessary equipment.");var c=getSavedList("jobsToDo","");return-1==c.indexOf(a)?(c.push(a),DEBUG("Saving "+a+" for later. Need to farm cash first."),setSavedList("jobsToDo",c),!0):!1}var d=$x('.//a[contains(@onclick, "xw_action=buy_item")]',b);d||(d=$x('.//a[contains(@onclick, "MapController.buyItems")]',
b));if(0<d.length){addToLog("search Icon","Attempting to purchase required items.");for(var e=0,f=d.length;e<f;){Autoplay.fx=function(){clickAction="buy item";clickElement(d[e]);DEBUG("Clicked to buy item.")};break}return!0}if(isGMChecked("autoWithDraw")){var g=xpathFirst('.//strong[@class="cash cash_'+cities[city][CITY_ALIAS]+'"]',b);g||(g=xpathFirst('.//div[@class="job_uses"]//dd[contains(@class,"cash_icon")]',b));if(g){var h=parseCash(g.innerHTML.untag().trim())-cities[city][CITY_CASH];if(0<h)return DEBUG("We need "+
h+" for this job. Going to the bank/vault of "+city),suspendBank=!0,autoBankWithdraw(h)}}var l=$x('.//div[@class="req_item"]//img',b);if(0<l.length){DEBUG("Some Items Required for this job - req_item");var k=getSavedList("itemList"),c=getSavedList("jobsToDo","");-1==c.indexOf(a)&&(c.push(a),DEBUG("Saving "+a+" for later. Need to fetch pre-req items first."),setSavedList("jobsToDo",c));var p=!1;l.forEach(function(a){var b=a.alt,b=b.replace(/set of/i,""),b=b.replace(/\[(.+?)\]/i,""),b=b.trim();DEBUG(b);
var d=!1;requirementJob.forEach(function(a){level>=cities[a[2]][CITY_LEVEL]&&a[0].toUpperCase().trim()==b.toUpperCase().trim()&&(c.push(a[1]),k.push(b),d=!0)});d?p=!0:DEBUG(b+" not found in the requirement job array.")});if(p)return setSavedList("itemList",k.unique()),setSavedList("jobsToDo",c),popJob(),!0}else{l=xpathFirst('.//span[@class="missing_req_items"]',b);itmSearch="";if(l)DEBUG("Some Items Required for this job - missing_req_items"),itmSearch=l.innerHTML,itmSearch.match(/(.+?),/i)&&(itmSearch=
RegExp.$1),DEBUG("Missing Item: "+itmSearch),itmSearch=itmSearch.replace(/\(.+?\)/gi,"").trim(),DEBUG("Parsed Missing Item: "+itmSearch);else if((l=xpathFirst('.//div[@class="needed_gate_loot_container"]',b))||(l=xpathFirst('.//div[@class="needed_gate_loot"]',b)),l){DEBUG("Some Items Required for this job - needed_gate_loot");messages=$x(".//img",l);numMessages=messages.length;for(e=0;e<numMessages;e++){var n=messages[e].title;n.match(/Gift this/i)||(itmSearch=""==itmSearch?n:itmSearch+", "+n)}DEBUG("Missing Item(s): "+
itmSearch)}if(""!=itmSearch){DEBUG("Item(s) Required for this job : "+itmSearch);k=getSavedList("itemList");c=getSavedList("jobsToDo","");DEBUG("Current Job List: "+c);-1==c.indexOf(a)?(c.push(a),DEBUG("Saving "+a+" for later. Need to fetch pre-req items first."),setSavedList("jobsToDo",c)):DEBUG(a+" already saved for later. Need to fetch pre-req items first.");var r=!1;requirementJob.forEach(function(a){level>=cities[a[2]][CITY_LEVEL]&&a[0].toUpperCase().trim()==itmSearch.toUpperCase().trim()&&(c.push(a[1]),
k.push(itmSearch.trim()),r=!0,jobFound=a[1])});if(r)return setSavedList("itemList",k.unique()),setSavedList("jobsToDo",c),popJob(),!0;DEBUG(itmSearch+" not found in the requirement job array.")}}if(g=xpathFirst('.//td[contains(@class,"job_energy")]//span[@class="money" or @class="bad"]',b))if(h=parseCash(g.innerHTML)-cities[city][CITY_CASH],0<h)return suspendBank=!0,autoBankWithdraw(h);return!1}catch(q){DEBUG("getJobRowItems Error :"+q)}}
function popJob(){var a=getSavedList("jobsToDo",""),b=a.pop();setSavedList("jobsToDo",a);var c=0;missions.forEach(function(a){a[0].toUpperCase().trim()==b.toUpperCase().trim()&&(RX6_setValue("selectMission",c),addToLog("info Icon",'Switching job to <span class="job">'+b+"</span> (popJob)."));c++})}
function jobCombo(){var a,b=eval("("+RX6_getValue("availableJobs","{0:{},1:{},2:{},3:{},4:{},5:{},6:{},7:{},8:{}}")+")"),c=getSavedList("selectMissionMultiple"),d={};a=0;for(iLength=c.length;a<iLength;++a){var e=c[a],f=missions[e];f&&(null!=b[f[MISSION_CITY]][f[MISSION_TAB]]&&-1==b[f[MISSION_CITY]][f[MISSION_TAB]].indexOf(parseInt(e))&&(f[MISSION_RATIO]=0),null==d[f[MISSION_RATIO]]&&(d[f[MISSION_RATIO]]=[]),d[f[MISSION_RATIO]].push(c[a]))}c=[];for(a in d)if(1<d[a].length){missions[RX6_getValue("selectMission",
1)][MISSION_RATIO]==a&&d[a].push(d[a].shift());b=0;for(e=d[a].length;b<e;++b)c.push(d[a][b])}else c.push(d[a][0]);setSavedList("selectMissionMultiple",c)}
function jobLoot(a){var b,c=[],d="",e="",f=$x('.//td[class="message_body"]',a),g=f.length;for(b=1;b<g;b++){var h=f[b].innerHTML.untag();if(h.match(/you\s+?gained:\s+?an?\s+?(.+)\./i)||h.match(/you\s+gained(?:\s+an?)?\s+(.+)\./i)||h.match(/found(?:\s+an?)?\s+(.*?)\s+on\s+the/i)||h.match(/earned(?:\s+an?)?\s+(.*?)\.\s+you\s+/i))h=RegExp.$1,h.match(/(.+?)\s+?was(.+?)(\d+)/i)?h=RegExp.$1+" x "+RegExp.$3:h.match(/(.+?)\s+?(\.|-)?\s+?used?(.+?)(\d+)/i)&&(h=RegExp.$1+" x "+RegExp.$4),d=d?d+('<br/>Found <span class="loot">'+
h+"</span> in the job."):'Found <span class="loot">'+h+"</span> in the job.",c.push(h)}0<g&&""!=d&&addToLog("lootbag Icon",d);if(city==NY||city==CUBA){f=$x('.//dd[@class="message_item"]',a);g=f.length;for(b=0;b<g;b++)h=f[b].innerHTML.untag(),-1==h.indexOf("remaining")?(d=d?d+('<br/>Found <span class="loot">'+h+"</span> in the job."):'Found <span class="loot">'+h+"</span> in the job.",c.push(h)):e=e?e+('<br/>You used <span class="loot">'+h+"</span> in the job."):'You used <span class="loot">'+h+"</span> in the job.";
0<g&&""!=d&&addToLog("lootbag Icon",d);0<g&&""!=e&&addToLog("lootbag Icon",e)}if(city==LV){b=xpathFirst('.//div[@class="job_results"]',a);d="";f=$x(".//img",b);g=f.length;for(b=0;b<g;b++)f[b].title&&(h=f[b].title,a=f[b].parentNode.innerHTML.untag(),a.match(/(\d+)/)&&(a=" x "+RegExp.$1),h.match(/(.+?)(\.|-)?\s+?(was|used?)/i)&&(h=RegExp.$1),d=d?d+('<br/>Found <span class="loot">'+h+" "+a+"</span> in the job."):'Found <span class="loot">'+h+" "+a+"</span> in the job.",c.push(h));0<g&&""!=d&&addToLog("lootbag Icon",
d)}d=getSavedList("itemList");if("undefined"==typeof d[0]||0==d.length)DEBUG("No items in required item list.");else for(;f=c.pop();){DEBUG("Looking for "+f+" in needed items list. We need "+d.length+" item(s).");for(b=0;b<d.length;b++)if(-1!=f.indexOf(d[b].trim()))return DEBUG('<span class="loot">'+f+"</span> is the item we were looking for!"),removeSavedListItem("itemList",f),removeJobForItem("jobsToDo",f),popJob(),!0}}
function debugDumpSettings(){try{for(var a,b=getSavedList("selectMissionMultiple"),c=[],d=0,e=b.length;d<e;++d)missions[b[d]]&&c.push(missions[b[d]][MISSION_NAME]);a=c.join(", ");b="None";"0.0"!=RX6_getValue("selectTier","0.0")&&(selectedTierValue=RX6_getValue("selectTier","0.0").split("."),b=cities[parseInt(selectedTierValue[0])][0]+" - "+missionTabs[NY][parseInt(selectedTierValue[1])-1]);"en"!=RX6_getValue("language","en")&&(DEBUG('Language is "'+RX6_getValue("language","undefined")+'".'),addToLog("warning Icon",
"Unfortunately, only the English version of the game is fully supported. If you experience problems, set your Facebook language to English and try again."));var f={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version";this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(a){for(var b=0;b<a.length;b++){var c=a[b].string,d=a[b].prop;
this.versionSearchString=a[b].versionSearch||a[b].identity;if(c){if(-1!=c.indexOf(a[b].subString))return a[b].identity}else if(d)return a[b].identity}},searchVersion:function(a){var b=a.indexOf(this.versionSearchString);if(-1!=b)return parseFloat(a.substring(b+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",
identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,
subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};f.init();getBrowserWindowSize();c="PRO PLAYER";RX6_getValue("fnirInyhrSum",returnValue())!=
parseXMLResponse()&&(c="LITE PLAYER");var g="-  -  -  -  -  BEGIN SETTINGS DUMP  -  -  -  -  -<br>------------------ End-User System -------------------<br>Browser Name: <strong>"+f.browser+"</strong><br>Browser Version: <strong>"+f.version+"</strong><br>Operating System: <strong>"+f.OS+"</strong><br>New Layout: <strong>"+new_header+"</strong><br>Browser Window Size: <strong>"+winW+" / "+winH+"</strong><br>------------------ RX6 MWAP Settings---------------------<br>Script Version: <strong>"+SCRIPT.version+
" "+c+"</strong><br>Language: <strong>"+RX6_getValue("language")+"</strong><br>isRunning: <strong>"+running+"</strong><br>Player current level: <strong>"+level+"</strong><br>Player points to next level: <strong>"+ptsToNextLevel+"</strong><br>Player mafia size: <strong>"+mafia+"</strong><br>Player attack profile: <strong>"+curAttack+"</strong><br>Player defense profile: <strong>"+curDefense+"</strong><br>Player attack equip: <strong>"+curAttackEquip+"</strong><br>Player defense equip: <strong>"+curDefenseEquip+
"</strong><br>Player health: <strong>"+health+" / "+maxHealth+"</strong><br>Player energy: <strong>"+energy+" / "+maxEnergy+"</strong><br>Player stamina: <strong>"+stamina+" / "+maxStamina+"</strong><br>Player skill points: <strong>"+stats+"</strong><br>Energy pack waiting? <strong>"+energyPack+"</strong><br>Current location: <strong>"+cities[city][CITY_NAME]+"</strong><br>";i=0;for(iLength=cities.length;i<iLength;i++)cities[i][CITY_CLOSED]||(dumpText=isUndefined(cities[i][CITY_CASH])?"unknown":cities[i][CITY_CASH_SYMBOL]+
makeCommaValue(cities[i][CITY_CASH]),g+=cities[i][CITY_NAME]+" cash: <strong>"+dumpText+"</strong><br>");g+="-------------------General Tab--------------------------<br>General RX6 speed: <strong>"+RX6_getValue("fastMWAPSpeed")+"</strong><br>Enable auto-pause: <strong>"+showIfUnchecked(RX6_getValue("autoPause"))+"</strong><br>--After level up: <strong>"+showIfSelected(RX6_getValue("autoPauseAfter"))+"</strong><br>--Before level up: <strong>"+showIfSelected(RX6_getValue("autoPauseBefore"))+"</strong><br>---Exp to pause at: <strong>"+
RX6_getValue("autoPauseExp")+"</strong><br>Idle in Selected city: <strong>"+cities[RX6_getValue("idleLocation",NY)][CITY_NAME]+"</strong><br>Prioritise Energy/Stamina burning: <strong>"+burnModes[RX6_getValue("burnOption")]+"</strong><br>Force Energy/Stamina Use: <strong>"+showIfUnchecked(RX6_getValue("forceLevelSpending"))+"</strong><br>Energy/Stamina Only Mode: <strong>"+showIfUnchecked(RX6_getValue("StamEnergyMode"))+"</strong><br>Try to process all popups: <strong>"+showIfUnchecked(RX6_getValue("autoProcessPopups"))+
"</strong><br>Enable Auto Slot Machine: <strong>"+showIfUnchecked(RX6_getValue("AutoSlotMachine"))+"</strong><br>--Auto Slot Machine Timer: <strong>"+getHoursTime("autoSlotTimer")+"</strong><br>Enable Free 3 Slot Spins: <strong>"+showIfUnchecked(RX6_getValue("autoSlot3FreeSpins"))+"</strong><br>--Free 3 Slot Spins Timer: <strong>"+getHoursTime("autoFreeSlotTimer")+"</strong><br>Enable Reallocation Check: <strong>"+showIfUnchecked(RX6_getValue("autoCheckReallocation"))+"</strong><br>--Reallocation Check Timer: <strong>"+
getHoursTime("checkReallocationTimer")+"</strong><br>Enable autoPoker: <strong>"+showIfUnchecked(RX6_getValue("autoPoker"))+"</strong><br>--autoPoker Check Timer: <strong>"+getHoursTime("autoPokerTimer")+"</strong><br>autoPerform LV Tournaments: <strong>"+tournamentClasses[RX6_getValue("autoTournamentClass",0)][0]+"</strong><br>--tournamentTimer: <strong>"+getHoursTime("tournamentTimer")+"</strong><br>Testing New Script Updates: <strong>"+showIfUnchecked(RX6_getValue("TestChanges"))+"</strong><br>---------------------Display Tab--------------------<br>Use text labels: <strong>"+
showIfUnchecked(RX6_getValue("textOnlyMode"))+"</strong><br>Enable logging: <strong>"+showIfUnchecked(RX6_getValue("autoLog"))+"</strong><br>--Logging length: <strong>"+RX6_getValue("autoLogLength")+"</strong><br>Enable log filtering: <strong>"+showIfUnchecked(RX6_getValue("filterLog"))+"</strong><br>--Filter mode: <strong>"+RX6_getValue("filterOpt",0)+"</strong><br>--Accepted patterns: <strong>"+RX6_getValue("filterPass")+"</strong><br>--Rejected patterns: <strong>"+RX6_getValue("filterFail")+"</strong><br>Left-align main frame: <strong>"+
showIfUnchecked(RX6_getValue("leftAlign"))+"</strong><br>Elevate RX6 MWAP-Header: <strong>"+showIfUnchecked(RX6_getValue("mastheadOnTop"))+"</strong><br>Set window title to name on Facebook account: <strong>"+showIfUnchecked(RX6_getValue("fbwindowtitle"))+"</strong><br>Show pulse on the fight page: <strong>"+showIfUnchecked(RX6_getValue("showPulse"))+"</strong><br>Show level on the hitlist page: <strong>"+showIfUnchecked(RX6_getValue("showLevel"))+"</strong><br>Hide Game Elements: <br>--Hide All MW Icons: <strong>"+
showIfUnchecked(RX6_getValue("hideAll"))+"</strong><br>--MW Promo Banner: <strong>"+showIfUnchecked(RX6_getValue("hideZyngaBanner"))+"</strong><br>--Hide Clan Chat: <strong>"+showIfUnchecked(RX6_getValue("hideClanChat"))+"</strong><br>MWAP Stats Tracking disabled: <strong>"+showIfUnchecked(RX6_getValue("noStats"))+"</strong><br>Choose where to play: <br>--Play on mwap.me.uk: <strong>"+showIfUnchecked(RX6_getValue("playMWAP"))+"</strong><br>--Use 2nd Link: <strong>"+showIfUnchecked(RX6_getValue("playMWAPRX2"))+
"</strong><br>---------------------Mafia Tab--------------------<br>Automatically asks for job help: <strong>"+showIfUnchecked(RX6_getValue("autoAskJobHelp"))+"</strong><br>--Minimum experience for job help: <strong>"+RX6_getValue("autoAskJobHelpMinExp")+"</strong><br>Ask for Vegas help: <strong>"+RX6_getValue("selectVegasTier")+"</strong><br>--Ask for Vegas Help Timer: <strong>"+getHoursTime("AskforHelpVegasTimer")+"</strong><br>Ask for Brazil help: <strong>"+RX6_getValue("selectBrazilTier")+"</strong><br>--Ask for Brazil Help Timer: <strong>"+
getHoursTime("AskforHelpBrazilTimer")+"</strong><br>Ask for Chicago help: <strong>"+RX6_getValue("selectChicagoTier")+"</strong><br>--Ask for Chicago Help Timer: <strong>"+getHoursTime("AskforHelpChicagoTimer")+"</strong><br>Ask for London help: <strong>"+RX6_getValue("selectLondonTier")+"</strong><br>--Ask for London Help Timer: <strong>"+getHoursTime("AskforLondonHelpTimer")+"</strong><br>Ask to Join City Crews: <strong>"+showIfUnchecked(RX6_getValue("autoAskCityCrew"))+"</strong><br>--Ask to Join City Crews Timer: <strong>"+
getHoursTime("autoAskCityCrewTimer")+"</strong><br>Process and Log Player Updates: <strong>"+showIfUnchecked(RX6_getValue("logPlayerUpdates"))+"</strong><br>Enable publishing to FB Wall: <br>--Global Publishing: <strong>"+showIfUnchecked(RX6_getValue("autoGlobalPublishing"))+"</strong><br>--Ice bonus: <strong>"+showIfUnchecked(RX6_getValue("autoIcePublish"))+"</strong><br>---Ice bonus Frequency: <strong>"+RX6_getValue("autoIcePublishFrequency")+"</strong><br>--Automatically share wishlist: <strong>"+
showIfUnchecked(RX6_getValue("autoShareWishlist"))+"</strong><br>---Hour interval for sharing wishlist: <strong>"+RX6_getValue("autoShareWishlistTime")+"</strong><br>---Auto Share Wishlist Timer: <strong>"+getHoursTime("wishListTimer")+"</strong><br>Message Center: <br>--autoOpenGiftsTimer: "+getHoursTime("autoOpenGiftsTimer")+"</strong><br>--Auto Accept Gifts: <strong>"+showIfUnchecked(RX6_getValue("autoAcceptMsgGifts"))+"</strong><br>----autoOpenFreeGiftsTimer: "+getHoursTime("autoOpenFreeGiftsTimer")+
"</strong><br>----Ignore Daily Item Limit (20): <strong>"+showIfUnchecked(RX6_getValue("autoAcceptMsgNoLimit"))+"</strong><br>----Ignore Daily Secret Drop Limit (3):<strong>"+showIfUnchecked(RX6_getValue("autoAcceptMsgSecretDropNoLimit"))+"</strong><br>--Auto Accept Boosts: <strong>"+showIfUnchecked(RX6_getValue("autoAcceptMsgBoosts"))+"</strong><br>--Auto Accept Crew: <strong>"+radioOptions[GM_getIntValue("autoAcceptMsgCrew")]+"</strong><br>--Auto Accept Energy Packs: <strong>"+radioOptions[GM_getIntValue("autoAcceptMsgEnergy")]+
"</strong><br>--Auto Accept Mafia Invitations: <strong>"+radioOptions[GM_getIntValue("autoAcceptMsgMafia")]+"</strong><br>Enable Auto War: <br>--Auto War Mode: <strong>"+warModeChoices[RX6_getValue("warMode",0)]+"</strong><br>---Auto War Target List: <strong>"+RX6_getValue("autoWarTargetList",0)+"</strong><br>---Auto War Timer: <strong>"+getHoursTime("warTimer")+"</strong><br>-----------------Family-----------------<br>Enable Personal Operations: <strong>"+showIfUnchecked(RX6_getValue("autoStartMyOps"))+
"</strong><br>--Check My Operations Timer: <strong>"+getHoursTime("myOpsTimer")+"</strong><br>Participate In Family Operations: <strong>"+showIfUnchecked(RX6_getValue("autoStartFamOps"))+"</strong><br>--Check Family Operations Timer: <strong>"+getHoursTime("famOpsTimer")+"</strong><br>";RX6_getValue("fnirInyhrSum",returnValue())==parseXMLResponse()&&(g+="Enable Auto Family Rewards Collect: <strong>"+showIfUnchecked(RX6_getValue("AutoFamilyRewards"))+"</strong><br>Enable Family Bosses: <strong>"+showIfUnchecked(RX6_getValue("autoFamilyBosses"))+
"</strong><br>Enable Auto Family Boss Fighting: <strong>"+showIfUnchecked(RX6_getValue("autoFamilyBossFighting"))+"</strong><br>--Boss Role: <strong>"+bossRoles[RX6_getValue("bossRole",0)]+"</strong><br>--Boss Stamina Limit: <strong>"+bossStaminaLimits[RX6_getValue("bossStaminaLimit",0)]+"</strong><br>--Boss Rage Limit: <strong>"+RX6_getValue("bossRageLimit",0)+"</strong><br>--Only use Boosts in Combo's: <strong>"+showIfUnchecked(RX6_getValue("autoComboFightingOnly"))+"</strong><br>Ask for Family Boss Boosts: <strong>"+
showIfUnchecked(RX6_getValue("askBossFightBoosts"))+"</strong><br>Send Family Boss Boosts: <strong>"+showIfUnchecked(RX6_getValue("sendBossFightBoosts"))+"</strong><br>Enable AutoBattle Fighting: <strong>"+showIfUnchecked(RX6_getValue("AutoBattleFight"))+"</strong><br>Enable Battle Safehouse Attacking: <strong>"+showIfUnchecked(RX6_getValue("AutoBattleSafehouse"))+"</strong><br>Enable AutoBattle (Only if Underboss/GF): <strong>"+showIfUnchecked(RX6_getValue("AutoBattle"))+"</strong><br>--Clan/Family ID: <strong>"+
RX6_getValue("AutoBattleClanID",0)+"</strong><br>Enable Auto Free Gifting: Item no <strong>"+GM_getIntValue("selectFreeGift",0)+"</strong><br>--Auto Send Free Gift Timer: <strong>"+getHoursTime("autoFreeGiftTimer")+"</strong><br>Enable Asking for Free Gifts: Item No <strong>"+GM_getIntValue("selectAskFreeGift",0)+"</strong><br>--Auto Ask Free Gift Timer: <strong>"+getHoursTime("autoAskFreeGiftTimer")+"</strong><br>Enable RX6 Gift Dispatcher to: <strong>"+RX6_getValue("dispatchTarget",0)+"</strong><br>--RX6 Gift Dispatcher Timer: <strong>"+
getHoursTime("autoDispatchTimer")+"</strong><br>");g+="-------------------Autostat Tab--------------------<br>Enable auto-stat: <strong>"+showIfUnchecked(RX6_getValue("autoStat"))+"</strong><br>Disable auto-stat: <strong>"+showIfUnchecked(RX6_getValue("autoStatDisable"))+"</strong><br>-Attack Base: <strong>"+RX6_getValue("autoStatAttackBase")+"</strong><br>-Defense Base: <strong>"+RX6_getValue("autoStatDefenseBase")+"</strong><br>-Health Base: <strong>"+RX6_getValue("autoStatHealthBase")+"</strong><br>-Energy Base: <strong>"+
RX6_getValue("autoStatEnergyBase")+"</strong><br>-Stamina Base: <strong>"+RX6_getValue("autoStatStaminaBase")+"</strong><br>-Attack Ratio: <strong>"+RX6_getValue("autoStatAttackRatio")+"</strong><br>-Defense Ratio: <strong>"+RX6_getValue("autoStatDefenseRatio")+"</strong><br>-Health Ratio: <strong>"+RX6_getValue("autoStatHealthRatio")+"</strong><br>-Energy Ratio: <strong>"+RX6_getValue("autoStatEnergyRatio")+"</strong><br>-Stamina Ratio: <strong>"+RX6_getValue("autoStatStaminaRatio")+"</strong><br>-Attack Mode: <strong>"+
RX6_getValue("autoStatAttackMode")+"</strong><br>-Defense Mode: <strong>"+RX6_getValue("autoStatDefenseMode")+"</strong><br>-Health Mode: <strong>"+RX6_getValue("autoStatHealthMode")+"</strong><br>-Energy Mode: <strong>"+RX6_getValue("autoStatEnergyMode")+"</strong><br>-Stamina Mode: <strong>"+RX6_getValue("autoStatStaminaMode")+"</strong><br>-Attack Prio: <strong>"+RX6_getValue("autoStatAttackPrio")+"</strong><br>-Defense Prio: <strong>"+RX6_getValue("autoStatDefensePrio")+"</strong><br>-Health Prio: <strong>"+
RX6_getValue("autoStatHealthPrio")+"</strong><br>-Energy Prio: <strong>"+RX6_getValue("autoStatEnergyPrio")+"</strong><br>-Stamina Prio: <strong>"+RX6_getValue("autoStatStaminaPrio")+"</strong><br>-Attack Fallback: <strong>"+RX6_getValue("autoStatAttackFallback")+"</strong><br>-Defense Fallback: <strong>"+RX6_getValue("autoStatDefenseFallback")+"</strong><br>-Health Fallback: <strong>"+RX6_getValue("autoStatHealthFallback")+"</strong><br>-Energy Fallback: <strong>"+RX6_getValue("autoStatEnergyFallback")+
"</strong><br>-Stamina Fallback: <strong>"+RX6_getValue("autoStatStaminaFallback")+"</strong><br>-Rest AutoStat: <strong>"+RX6_getValue("restAutoStat")+"</strong><br>-Next Stat: <strong>"+RX6_getValue("nextStat")+"</strong><br>Select City Activate Priority: <br>--City Priority 1: <strong>"+cities[RX6_getValue("selectCityPrio1",BRAZIL)][CITY_NAME]+"</strong><br>--City Priority 2: <strong>"+cities[RX6_getValue("selectCityPrio2",CHICAGO)][CITY_NAME]+"</strong><br>--City Priority 3: <strong>"+cities[RX6_getValue("selectCityPrio3",
LONDON)][CITY_NAME]+"</strong><br>Activate Brazil Crew Members: <br>--Crew Priority 1: <strong>"+RX6_getValue("selectBrazilCrew1",0)+"</strong><br>--Crew Priority 2: <strong>"+RX6_getValue("selectBrazilCrew2",0)+"</strong><br>--Crew Priority 3: <strong>"+RX6_getValue("selectBrazilCrew3",0)+"</strong><br>--Crew Priority 4: <strong>"+RX6_getValue("selectBrazilCrew4",0)+"</strong><br>--Crew Priority 5: <strong>"+RX6_getValue("selectBrazilCrew5",0)+"</strong><br>--Crew Priority 6: <strong>"+RX6_getValue("selectBrazilCrew6",
0)+"</strong><br>--Crew Priority 7: <strong>"+RX6_getValue("selectBrazilCrew7",0)+"</strong><br>--Crew Priority 8: <strong>"+RX6_getValue("selectBrazilCrew8",0)+"</strong><br>---Activate Brazil Crew Timer: <strong>"+getHoursTime("activateBrazilCrewTimer")+"</strong><br>Activate Chicago Crew Members: <br>--Crew Priority 1: <strong>"+RX6_getValue("selectChicagoCrew1",0)+"</strong><br>--Crew Priority 2: <strong>"+RX6_getValue("selectChicagoCrew2",0)+"</strong><br>--Crew Priority 3: <strong>"+RX6_getValue("selectChicagoCrew3",
0)+"</strong><br>--Crew Priority 4: <strong>"+RX6_getValue("selectChicagoCrew4",0)+"</strong><br>--Crew Priority 5: <strong>"+RX6_getValue("selectChicagoCrew5",0)+"</strong><br>--Crew Priority 6: <strong>"+RX6_getValue("selectChicagoCrew6",0)+"</strong><br>--Crew Priority 7: <strong>"+RX6_getValue("selectChicagoCrew7",0)+"</strong><br>--Crew Priority 8: <strong>"+RX6_getValue("selectChicagoCrew8",0)+"</strong><br>---Activate Chicago Crew Timer: <strong>"+getHoursTime("activateChicagoCrewTimer")+"</strong><br>Activate London Crew Members: <br>--Crew Priority 1: <strong>"+
RX6_getValue("selectLondonCrew1",0)+"</strong><br>--Crew Priority 2: <strong>"+RX6_getValue("selectLondonCrew2",0)+"</strong><br>--Crew Priority 3: <strong>"+RX6_getValue("selectLondonCrew3",0)+"</strong><br>--Crew Priority 4: <strong>"+RX6_getValue("selectLondonCrew4",0)+"</strong><br>--Crew Priority 5: <strong>"+RX6_getValue("selectLondonCrew5",0)+"</strong><br>--Crew Priority 6: <strong>"+RX6_getValue("selectLondonCrew6",0)+"</strong><br>--Crew Priority 7: <strong>"+RX6_getValue("selectLondonCrew7",
0)+"</strong><br>--Crew Priority 8: <strong>"+RX6_getValue("selectLondonCrew8",0)+"</strong><br>---Activate London Crew Timer: <strong>"+getHoursTime("activateLondonCrewTimer")+"</strong><br>-------------------Energy Tab--------------------<br>Spend energy to perform any combination of jobs: <strong>"+showIfUnchecked(RX6_getValue("autoMission"))+"</strong><br>Optimize at end level: <strong>"+showIfUnchecked(RX6_getValue("endLevelOptimize"))+"</strong><br>--use NY Only: <strong>"+showIfUnchecked(RX6_getValue("endLevelNYOnly"))+
"</strong><br>Force Auto Withdraw for Jobs: <strong>"+showIfUnchecked(RX6_getValue("autoWithDraw"))+"</strong><br>Repeat Job: <strong>"+showIfUnchecked(RX6_getValue("repeatJob"))+"</strong><br>";g=missions[RX6_getValue("selectMission")]?g+("--selectedMission to Perform: <strong>"+missions[RX6_getValue("selectMission")][MISSION_NAME]+"</strong><br>"):g+"--selectedMission to Perform:  <strong>undefined, please check energy settings</strong><br>";g+="---Jobs selected: <strong>"+a+"</strong><br>Master Tier: <strong>"+
b+"</strong><br>--Skip Fighting In Job Tier Mastery: <strong>"+showIfUnchecked(RX6_getValue("skipfight"))+"</strong><br>Enable Boss Fight-Confront Agostino Cleto: <strong>"+showIfUnchecked(RX6_getValue("autoFightAgostino"))+"</strong><br>Spend Mini Packs: <strong>"+showIfUnchecked(RX6_getValue("checkMiniPack"))+"</strong><br>--Spend Mini Pack Timer: <strong>"+getHoursTime("miniPackTimer")+"</strong><br>Spend Packs: <strong>"+burnModes[RX6_getValue("autoEnergyPack",0)]+"</strong><br>--Estimated job ratio: <strong>"+
RX6_getValue("estimateJobRatio")+"</strong><br>--Force Pack when boosted stat falls below pts: <strong>"+RX6_getValue("autoEnergyPackForcePts")+"</strong><br>Start spending energy for jobs when: <strong>"+RX6_getValue("selectEnergyUse")+" "+numberSchemes[RX6_getValue("selectEnergyUseMode",0)]+" (refill to "+SpendEnergy.ceiling+")</strong><br>Suspend for jobs while below: <strong>"+ +RX6_getValue("selectEnergyKeep")+" "+numberSchemes[RX6_getValue("selectEnergyKeepMode",0)]+" (keep above "+SpendEnergy.floor+
")</strong><br>Suspend for Operations while below: <strong>"+ +RX6_getValue("selectMissionEnergyKeep")+" "+numberSchemes[RX6_getValue("selectMissionEnergyKeepMode",0)]+" (keep above "+SpendMissionEnergy.floor+")</strong><br>--Energy use started: <strong>"+RX6_getValue("useEnergyStarted")+"</strong><br>Ignore reserve to level-up: <strong>"+showIfUnchecked(RX6_getValue("allowEnergyToLevelUp"))+"</strong><br>-------------------Stamina Tab-------------------<br>Spend stamina: <strong>"+showIfUnchecked(RX6_getValue("staminaSpend"))+
"</strong><br>Log Details: <strong>"+showIfUnchecked(RX6_getValue("staminaLogDetails"))+"</strong><br>How: <strong>"+staminaSpendChoices[RX6_getValue("staminaSpendHow",0)]+"</strong><br>  Fast Rob: <strong>"+showIfUnchecked(RX6_getValue("fastrob"))+"</strong><br>  Use Burners?: <strong>"+showIfUnchecked(RX6_getValue("useBurners"))+"</strong><br>  Use Rob Squads?: <strong>"+showIfUnchecked(RX6_getValue("useRobSquads"))+"</strong><br>  RobFight StaminaFloor?: <strong>"+RX6_getValue("robFightStaminaFloor")+
"</strong><br>  Skip iced targets: <strong>"+showIfUnchecked(RX6_getValue("iceCheck"))+"</strong><br>  -Fight in: <strong>"+fightLocations[RX6_getValue("fightLocation",0)]+"</strong><br>  -this city only: <strong>"+RX6_getValue("noBGFTravel")+"</strong><br>  -Reattack threshold: <strong>"+RX6_getValue("reattackThreshold")+"</strong><br>  -Powerattack: <strong>"+showIfUnchecked(RX6_getValue("staminaPowerattack"))+"</strong><br>  -RX6 DoubleTap: <strong>"+showIfUnchecked(RX6_getValue("useDoubleTap"))+
"</strong><br>  -Avoid High Health Targets when minor damage is done : <strong>"+showIfUnchecked(RX6_getValue("useAvoidLittleDamage"))+"</strong><br>  -Avoid Fight List Bots, err Bosses : <strong>"+showIfUnchecked(RX6_getValue("useAvoidListBosses"))+"</strong><br>  -Use Fight Boosts: <strong>"+boostModes[RX6_getValue("useFightBoosts")]+"</strong><br>  -Rivals Mode: <strong>"+fightRivalsModes[RX6_getValue("fightRivalsMode")]+"</strong><br>  -Max Number of Attacks per Opponent: <strong>"+RX6_getValue("fightMaxAttacks")+
")</strong><br>  -Random fight max level: <strong>"+RX6_getValue("fightLevelMax")+" ("+showIfRelative("fightLevelMaxRelative")+")</strong><br>  -Random fight max mafia: <strong>"+RX6_getValue("fightMafiaMax")+" ("+showIfRelative("fightMafiaMaxRelative")+")</strong><br>  -Random fight min mafia: <strong>"+RX6_getValue("fightMafiaMin")+" ("+showIfRelative("fightMafiaMinRelative")+")</strong><br>  -Random fight max health: <strong>"+RX6_getValue("fightHealthMax")+")</strong><br>  -Random fight max health pct: <strong>"+
RX6_getValue("fightHealthPctMax")+")</strong><br>  -Fight Labels: <strong>"+fightLabels[RX6_getValue("fightLabelCriteria",0)]+"</strong><br>  -Random fight use Patterns: <strong>"+showIfUnchecked(RX6_getValue("fightNames"))+"</strong><br>  -Random fight avoid names: <strong>"+showIfUnchecked(RX6_getValue("fightAvoidNames"))+"</strong><br>  -Random fight specific names: <strong>"+showIfUnchecked(RX6_getValue("fightOnlyNames"))+"</strong><br>  -Families list: <strong>"+encodeURI(RX6_getValue("fightClanName"))+
"</strong><br>  -List fight opponents: <strong>"+RX6_getValue("pfightlist")+"</strong><br>  -List fight remove stronger: <strong>"+showIfUnchecked(RX6_getValue("fightRemoveStronger"))+"</strong><br>  -List fight fightlist fallback: <strong>"+showIfUnchecked(RX6_getValue("fightFallback"))+"</strong><br>  -Collect hitman bounties in: <strong>"+locations[RX6_getValue("hitmanLocation",0)]+"</strong><br>  -Hitman min bounty: <strong>"+parseCash(RX6_getValue("hitmanBountyMin"))+"</strong><br>  -Hitman bounty selection: <strong>"+
bountySelectionChoices[RX6_getValue("bountySelection")]+"</strong><br>  -Hitman use Patterns: <strong>"+showIfUnchecked(RX6_getValue("hitmanNames"))+"</strong><br>  -Hitman avoid names: <strong>"+showIfUnchecked(RX6_getValue("hitmanAvoidNames"))+"</strong><br>  -Hitman specific names: <strong>"+showIfUnchecked(RX6_getValue("hitmanOnlyNames"))+"</strong><br>  -Hitman families list: <strong>"+encodeURI(RX6_getValue("hitmanClanName"))+"</strong><br>  -Rob in: <strong>"+locations[RX6_getValue("robLocation",
NY)]+"</strong><br>  -AutoHit bounty: <strong>"+parseCash(RX6_getValue("autoHitListBounty"))+"</strong><br>  -Set Bounties in: <strong>"+locations[RX6_getValue("autoHitListLoc",0)]+"</strong><br>  -Random <strong>"+showIfUnchecked(RX6_getValue("autoHitListRandom"))+"</strong><br>  -AutoHit opponents: <strong>"+RX6_getValue("pautoHitOpponentList")+"</strong><br>  -AutoHit background: <strong>"+showIfUnchecked(RX6_getValue("bgAutoHitCheck"))+"</strong><br>  -Random Stam Spend - Fight in: <strong>"+
RX6_getValue("randomFightLocations")+"</strong><br>  -Random Stam Spend - Rob in: <strong>"+RX6_getValue("randomRobLocations")+"</strong><br>  -Random Stam Spend - Hit in: <strong>"+RX6_getValue("randomHitmanLocations")+"</strong><br>Stamina threshold: <strong>"+RX6_getValue("selectStaminaUse")+" "+numberSchemes[RX6_getValue("selectStaminaUseMode",0)]+" (refill to "+SpendStamina.ceiling+")</strong><br>  -Stamina use started: <strong>"+RX6_getValue("useStaminaStarted")+"</strong><br>Stamina Jobs & Fights reserve: <strong>"+
+RX6_getValue("selectStaminaKeep")+" "+numberSchemes[RX6_getValue("selectStaminaKeepMode",0)]+" (keep above "+SpendStamina.floor+")</strong><br>Stamina Manual reserve: <strong>"+ +RX6_getValue("selectMissionStaminaKeep")+" "+numberSchemes[RX6_getValue("selectMissionStaminaKeepMode",0)]+" (Operations will keep above "+SpendMissionStamina.floor+")</strong><br>Ignore reserve to level-up: <strong>"+showIfUnchecked(RX6_getValue("allowStaminaToLevelUp"))+"</strong><br>------------------Health Tab-------------------<br>Enable auto-heal: <strong>"+
showIfUnchecked(RX6_getValue("autoHeal"))+"</strong><br>--Heal in: <strong>"+locations[RX6_getValue("healLocation")]+"</strong><br>--When health falls below: <strong>"+RX6_getValue("healthLevel")+"</strong><br>--autoUse Power Packs to Heal: <strong>"+showIfUnchecked(RX6_getValue("autoPowerPackHeal"))+"</strong><br>----autoPowerPackHealTreshold: <strong>"+RX6_getValue("autoPowerPackHealTreshold")+"</strong><br>--Heal in NY when BGF: <strong>"+showIfUnchecked(RX6_getValue("autoHealBackup"))+"</strong><br>Minimum Stamina Allowing auto-Heal(Fight then Rob switch): <strong>"+
RX6_getValue("stamina_min_heal")+"</strong><br>Hide in Hospital: <strong>"+showIfUnchecked(RX6_getValue("hideInHospital"))+"</strong><br>--Heal if health is above 19: <strong>"+showIfUnchecked(RX6_getValue("forceHealOpt7"))+"</strong><br>--Heal after 5 minutes: <strong>"+showIfUnchecked(RX6_getValue("forceHealOpt5"))+"</strong><br>--Heal when stamina is full: <strong>"+showIfUnchecked(RX6_getValue("forceHealOpt4"))+"</strong><br>--Heal when stamina can be spent: <strong>"+showIfUnchecked(RX6_getValue("forceHealOpt3"))+
"</strong><br>Hitlist riding: <strong>"+showIfUnchecked(RX6_getValue("hideAttacks"))+"</strong><br>--Hitlist riding XP limit: <strong>"+RX6_getValue("rideHitlistXP")+"</strong><br>------------------Cash Tab-------------------<br>Collect Takes: <strong>"+showIfUnchecked(RX6_getValue("collectTakeNew York"))+"</strong><br>  -Next take at NY:"+timeLeftGM("takeHourNew York")+"</strong><br>  -Next take at LV:"+timeLeftGM("takeHourLas Vegas")+"</strong><br>Collect BRAZIL Take: <strong>"+showIfUnchecked(RX6_getValue("collectTakeBrazil"))+
"</strong><br>Collect CHICAGO Take: <strong>"+showIfUnchecked(RX6_getValue("collectTakeChicago"))+"</strong><br>Collect LONDON Take: <strong>"+showIfUnchecked(RX6_getValue("collectTakeLondon"))+"</strong><br>Collect Parts: <strong>"+showIfUnchecked(RX6_getValue("collectParts"))+"</strong><br>  -Next take at :"+timeLeftGM("partsHour")+"</strong><br>";for(ctCount=0;ctCount<ctLength;ctCount++)propItemId=cityProperties[ctCount][ctGMId]+"Id",g+=cityProperties[ctCount][ctText]+": <strong>"+showIfUnchecked(RX6_getValue(cityProperties[ctCount][ctGMId]))+
"</strong><br>  Item Type: <strong>"+cityProperties[ctCount][ctArray][RX6_getValue(propItemId,0)][0]+"</strong><br>";ctCount=0;for(cpLength=cityParts.length;ctCount<cpLength;ctCount++)propItemId=cityParts[ctCount][ptGMId]+"Id",g+=cityParts[ctCount][ptTitle]+": <strong>"+showIfUnchecked(RX6_getValue(cityParts[ctCount][ptGMId]))+"</strong><br>  Item Type: <strong>"+cityParts[ctCount][ptArray][RX6_getValue(propItemId,0)][0]+"</strong><br>";g+="Ask for Vegas Parts: <strong>"+showIfUnchecked(RX6_getValue("askVegasParts"))+
"</strong><br>--Part Type: <strong>"+cityVegasParts[RX6_getValue("askVegasPartsId",0)][0]+"</strong><br>--Property Type: <strong>"+cityVegasProps[RX6_getValue("askVegasPropId",0)][0]+"</strong><br>Ask for Play Slots: <strong>"+showIfUnchecked(RX6_getValue("askPlaySlots"))+"</strong><br>Ask for Brazil Parts: <strong>"+showIfUnchecked(RX6_getValue("askBrazilParts"))+"</strong><br>--Part Type: <strong>"+cityBrazilParts[RX6_getValue("askBrazilPartsId",0)][0]+"</strong><br>--Property Type: <strong>"+cityBrazilProps[RX6_getValue("askBrazilPropId",
0)][0]+"</strong><br>Ask for Chicago Parts: <strong>"+showIfUnchecked(RX6_getValue("askChicagoParts"))+"</strong><br>--Part Type: <strong>"+cityChicagoParts[RX6_getValue("askChicagoPartsId",0)][0]+"</strong><br>--Property Type: <strong>"+cityChicagoProps[RX6_getValue("askChicagoPropId",0)][0]+"</strong><br>Ask for London Parts: <strong>"+showIfUnchecked(RX6_getValue("askLondonParts"))+"</strong><br>--Part Type: <strong>"+cityLondonParts[RX6_getValue("askLondonPartsId",0)][0]+"</strong><br>--Property Type: <strong>"+
cityLondonProps[RX6_getValue("askLondonPropId",0)][0]+"</strong><br>Enable auto-bank in NY: <strong>"+showIfUnchecked(RX6_getValue("autoBank"))+"</strong><br>--Minimum deposit: $<strong>"+RX6_getValue("bankConfig")+"</strong><br>Enable auto-bank in Vegas: <strong>"+showIfUnchecked(RX6_getValue("autoBankVegas"))+"</strong><br>--Minimum deposit: V$<strong>"+RX6_getValue("bankConfigVegas")+"</strong><br>--Vault Level: <strong>"+RX6_getValue("vaultHandling")+"</strong><br>--Free vault space: V$<strong>"+
makeCommaValue(RX6_getValue("vaultSpace"))+"</strong><br>Enable auto-bank in Brazil: <strong>"+showIfUnchecked(RX6_getValue("autoBankBrazil"))+"</strong><br>--Minimum deposit: $<strong>"+RX6_getValue("bankConfigBrazil")+"</strong><br>Enable auto-bank in chicago: <strong>"+showIfUnchecked(RX6_getValue("autoBankchicago"))+"</strong><br>--Minimum deposit: $<strong>"+RX6_getValue("bankConfigChicago")+"</strong><br>autoUpgrade NY: <strong>"+autoUpgradeNYChoices[RX6_getValue("autoUpgradeNYChoice",0)]+"</strong><br>--Min Bank Balance: $<strong>"+
RX6_getValue("userMinBalance")+"</strong><br>-  -  -  -  -  END SETTINGS DUMP  -  -  -  -  -";DEBUG(g)}catch(h){DEBUG(h)}}
function parsePlayerUpdates(a){var b=xpathFirst('.//div[@class="update_timestamp"]',a),b=b?b.innerHTML+" ":"",b=0==b.indexOf("0")?"":b,c=xpathFirst('.//div[@class="update_txt"]',a);if(!c)return addToLog("warning Icon","BUG DETECTED: Unable to read update text."),!0;var d=c.innerHTML,e=d.untag(),c=c.getElementsByTagName("a"),f,g;if(-1!=e.indexOf("your war"))addToLog("updateBad Icon",b+" "+d);else if(-1!=e.indexOf("attacked")){var h=1,d=linkToString(c[0],"user");1<c.length&&(d+=" "+linkToString(c[1],
"user"));a="Attacked";c[0]&&c[0].nextSibling&&c[0].nextSibling.nodeValue&&c[0].nextSibling.nodeValue.match(/(\d+) times/i)?(h=parseInt(RegExp.$1),a+=" "+RegExp.lastMatch):e.match(/(\d+) times/i)&&(h=parseInt(RegExp.$1),a+=" "+RegExp.lastMatch);a+=" by "+d;c=!1;if(e.match(/you won.*you gained .*?(\d+) experience points?.*?([A-Z]*?\$|\u00A2|\u00A3)([\d,]*\d)/i)){var e=RegExp.$2+RegExp.$3,d=RegExp.$1,a=a+(' and <span class="good">WON</span>, gaining <span class="good">'+e+'</span> and <span class="good">'+
d+" experience</span>."),l=parseCashLoc(e),e=parseCash(e),d=parseInt(d);RX6_setValue("passivetotalFightExpInt",String(GM_getIntValue("passivetotalFightExpInt",0)+d));RX6_setValue("passivefightWinCountInt",String(GM_getIntValue("passivefightWinCountInt",0)+h));c=!0;isGMChecked("hideAttacks")?(DEBUG("Riding Hitlist fight won."),RX6_setValue("currentHitXp",String(parseInt(RX6_getValue("currentHitXp",0)+d))),RX6_setValue("currentHitDollars",String(GM_getIntValue("currentHitDollars",0)+e)),DEBUG(a),isGMChecked("autoHeal")&&
(0==RX6_getValue("rideHitlistXP",0)&&0==d&&12<RX6_getValue("currentHitXp",0)?(DEBUG("Zero experience detected; turning off auto-heal.<br>(currentHitXp = "+RX6_getValue("currentHitXp",0)+")"),RX6_setValue("autoHeal",0)):0<RX6_getValue("rideHitlistXP",0)&&RX6_getValue("currentHitXp",0)>=RX6_getValue("rideHitlistXP",0)&&(DEBUG(RX6_getValue("currentHitXp",0)+" experience accumulated; turning off auto-heal."),RX6_setValue("autoHeal",0)))):addToLog("updateGood Icon",b+a);e&&(RX6_setValue(cityStats[l][passivecashWins],
String(GM_getIntValue(cityStats[l][passivecashWins],0)+e)),c=!0)}else e.match(/([A-Z]*?\$|\u00A2|\u00A3)([\d,]*\d)/i)?(e=e.match(REGEX_CASH)[0],a+=' and <span class="bad">LOST</span>, losing <span class="bad">'+e+"</span>.",l=parseCashLoc(e),e=parseCash(e),RX6_setValue("passivefightLossCountInt",String(GM_getIntValue("passivefightLossCountInt",0)+h)),c=!0,isGMChecked("hideAttacks")?RX6_setValue("currentHitDollars",String(GM_getIntValue("currentHitDollars",0)-e)):addToLog("updateBad Icon",b+a),e&&
(RX6_setValue(cityStats[l][passivecashLosses],String(GM_getIntValue(cityStats[l][passivecashLosses],0)+e)),c=!0)):e.match(/taking (\d+) damage/i)?(a+=' and <span class="bad">LOST</span>, taking <span class="bad">'+RegExp.$1+"</span> damage .",addToLog("updateBad Icon",b+a)):addToLog("warning Icon","BUG DETECTED: Unable to read update win/loss.");c&&updateLogStats()}else if(-1!=e.indexOf("You were snuffed"))RX6_setValue("snuffCount",String(GM_getIntValue("snuffCount",0)+1)),c=!0,addToLog("updateBad Icon",
b+'You <span class="bad">DIED</span>.'),RX6_setValue("passivetotalFightExpInt",String(GM_getIntValue("passivetotalFightExpInt",0)-6));else if(-1!=e.indexOf("You were knocked out"))a=linkToString(c[0],"user"),d=linkToString(c[1],"attacker"),2<c.length&&(a+=" "+linkToString(c[1],"user"),d=linkToString(c[2],"attacker")),e=parseCash(e.split(" who claimed the ")[1]),a="Whacked by "+a+" who claimed the $"+makeCommaValue(parseInt(e))+" bounty set by "+d+".",RX6_setValue("whackedCount",String(parseInt(RX6_getValue("whackedCount",
0)+1))),c=!0,isGMChecked("hideAttacks")&&(DEBUG("Whacked riding hitlist."),RX6_setValue("currentHitXp",GM_getIntValue("currentHitXp",0)-6),RX6_setValue("totalHits",GM_getIntValue("totalHits",0)+1),RX6_setValue("totalXp",GM_getIntValue("totalXp",0)+GM_getIntValue("currentHitXp",0)),RX6_setValue("lastHitXp",GM_getIntValue("currentHitXp",0)),RX6_setValue("totalHitDollars",String(GM_getIntValue("currentHitDollars",0)+GM_getIntValue("totalHitDollars",0))),e=0>RX6_getValue("currentHitXp",0)?'<span class="bad">LOST '+
RX6_getValue("currentHitXp",0)+"</span>":'<span class="good">GAINED '+RX6_getValue("currentHitXp",0)+"</span>",0>GM_getIntValue("currentHitDollars",0)?(c='<span class="bad"> LOST $'+makeCommaValue(GM_getIntValue("currentHitDollars",0))+"</span>",addToLog("updateBad Icon",b+e+" experience and "+c+" on the hitlist.")):(c='<span class="good"> WON $'+makeCommaValue(GM_getIntValue("currentHitDollars",0))+"</span>",addToLog("updateGood Icon",b+e+" experience and "+c+" on the hitlist.")),DEBUG("Hitlist total values set; now clearing current values."),
RX6_setValue("currentHitXp",0),RX6_setValue("currentHitDollars","0"),DEBUG("Ensure that autoHeal is enabled."),RX6_setValue("autoHeal","checked")),addToLog("updateBad Icon",b+a);else if(-1!=e.indexOf("You were punched"))d=linkToString(c[0],"attacker"),1<c.length&&(d+=" "+linkToString(c[1],"attacker")),addToLog("updateBad Icon",b+("You were punched in the face by "+d+"."));else if(-1!=e.indexOf("You fought as"))a=linkToString(c[0],"user"),-1!=c[0].getAttribute("href").indexOf("xw_controller=clan")?
(a+=" "+linkToString(c[1],"user"),d=linkToString(c[2],"user"),3<c.length&&(d+=linkToString(c[3],"user"))):(d=linkToString(c[1],"user"),2<c.length&&(d+=linkToString(c[2],"user"))),e=e.match(REGEX_CASH)[0],addToLog("updateGood Icon",b+("You fought as "+a+"'s Capo and defeated "+d+', receiving <span class="good">'+e+"</span> for your efforts."));else if(-1!=e.indexOf("needs your help")){if(f=xpathFirst('.//a[contains(@onclick, "controller=stats")]',a),g=xpathFirst('.//a[contains(@href, "give_help")]',
a))return Autoplay.fx=function(){clickAction="help";clickContext={user:linkToString(f,"user"),help:linkToString(g)};clickElement(g);DEBUG("Clicked to help with a job.")},Autoplay.delay=getAutoPlayDelay(),Autoplay.start(),!1}else if(-1!=e.indexOf("went to war with")){if(f=xpathFirst('.//a[contains(@onclick, "controller=stats")]',a),g=xpathFirst('.//a[contains(text(), "Help out your friends")]',a))return Autoplay.fx=function(){clickContext={user:linkToString(f,"user"),help:linkToString(g)};clickElement(g);
helpWar=!0;DEBUG("Clicked to help in war.")},Autoplay.delay=getAutoPlayDelay(),Autoplay.start(),!1}else if(-1!=e.indexOf("needs more Burners")){if(f=xpathFirst('.//a[contains(@onclick, "controller=stats")]',a),g=xpathFirst('.//a[contains(@href, "action=call_for_help_get_phone")]',a))return Autoplay.fx=function(){clickAction="help burners";clickContext={user:linkToString(f,"user"),help:linkToString(g)};clickElement(g);DEBUG("Clicked to help with burners.")},Autoplay.delay=getAutoPlayDelay(),Autoplay.start(),
!1}else if(e.match(/(.*) is close to completing a/i)||e.match(/(.*) wants to build an awesome/i)||e.match(/(.*) has decided to upgrade/i)){var k=RegExp.$1;if(g=xpathFirst('.//a[contains(@onclick, "action=cs_help_item") or contains(@onclick, "action=cs_help_initial")]',a))return Autoplay.fx=function(){clickAction="help parts";clickContext={user:k,help:linkToString(g)};clickElement(g);DEBUG("Clicked to help with parts.")},Autoplay.delay=getAutoPlayDelay(),Autoplay.start(),!1}else if(-1!=e.indexOf("claimed your $"))a=
linkToString(c[0],"user"),-1!=c[0].getAttribute("href").indexOf("xw_controller=clan")?(a+=" "+linkToString(c[1],"user"),d=linkToString(c[2],"user"),3<c.length&&(d+=linkToString(c[3],"user"))):(d=linkToString(c[1],"user"),2<c.length&&(d+=linkToString(c[2],"user"))),a=a+" claimed your "+e.match(REGEX_CASH)[0]+" bounty on "+d+".",addToLog("updateGood Icon",b+a);else if(e.match(/you earned.*achievement/i))addToLog("updateGood Icon",b+d);else if(e.match(/earned some great items/i))DEBUG(b+d);else if(e.match(/earned the.*achievement/i))DEBUG(b+
d);else if(e.match(/went to war with you/i))DEBUG(b+d);else if(e.match(/declared war against you/i))addToLog("updateBad Icon",b+" "+d),GM_getIntValue("warMode",0)&&setGMTime("warTimer","00:10");else if(-1!=e.indexOf("war on your top mafia")){if(f=xpathFirst('.//a[contains(@onclick, "controller=stats")]',a),g=xpathFirst('.//a[contains(text(), "Fight Back")]',a))return Autoplay.fx=function(){clickContext={user:linkToString(f,"user"),help:linkToString(g)};clickElement(g);helpWar=!0;DEBUG("Clicked to help Top Mafia in war.")},
Autoplay.delay=getAutoPlayDelay(),Autoplay.start(),!1}else e.match(/mission has been completed/i)?DEBUG("found playerupdate mission notice: "+b+d):addToLog("info Icon",b+d);return!0}function getActionBox(a){return!onHome()?!1:(a=xpathFirst('.//div[@class="message_box_full_border" and contains(.,"'+a+'")]',innerPageElt))?a:!1}
function getActionLink(a,b){var c=xpathFirst('.//a[contains(.,"'+b+'")]',a);c||(c=xpathFirst('.//a//span[contains(.,"'+b+'")]',a));c||(c=xpathFirst('.//a//span//span[contains(.,"'+b+'")]',a));return c?c:!1}
function autoWishlist(){if(!onInventoryTab()&&!onCollectionsTab())return Autoplay.fx=function(){goInventoryNav()},Autoplay.start(),!0;if(!onCollectionsTab())return Autoplay.fx=function(){goCollectionsNav()},Autoplay.start(),!0;var a=GM_getFloatValue("autoShareWishlistTime",1),b=xpathFirst('.//div[@id="wishlist_share_button"]//a',innerPageElt);b?(clickElement(b),addToLog("info Icon","Clicked to share wishlist, sharing again in "+a+" hour(s)"),1==a?setGMTime("wishListTimer","1 hour"):setGMTime("wishListTimer",
a+" hours")):(addToLog("warning Icon","Unable to share your wishlist, will try later."),setGMTime("wishListTimer","2 hours"));return!1}
function autoWarAttack(){if(!GM_getIntValue("warMode",0))return!1;helpWar&&(RX6_setValue("logPlayerUpdatesCount",1+RX6_getValue("logPlayerUpdatesCount",0)),helpWar=!1);var a=$x('.//a[contains(@href, "xw_controller=war&xw_action=attack")]',innerPageElt);if(a){DEBUG("autoWarAttack - Enemy Targets Found ...");var b=a[Math.floor(Math.random()*a.length)];if(b)return Autoplay.fx=function(){clickAction="war";clickContext=b;clickElement(b)},Autoplay.start(),DEBUG("autoWarAttack - Helped by attacking Selected Target in ongoing war."),
!0;DEBUG("autoWarAttack - Unable to Help: Invalid War Target in ongoing war...")}else DEBUG("autoWarAttack - Unable to Help: No Enemy Targets found for ongoing war...");return!1}
function autoWar(){if(!GM_getIntValue("warMode",0))return!1;Autoplay.delay=getAutoPlayDelay();if(!onWarTab())return Autoplay.fx=goWarTab,Autoplay.start(),!0;if(xpathFirst('.//span[contains(@id, "war_timer")]',innerPageElt)){var a=$x('.//a[contains(@href, "xw_controller=war&xw_action=attack")]',innerPageElt);if(a){var b=a[Math.floor(Math.random()*a.length)];if(b)return Autoplay.fx=function(){clickAction="war";clickContext=b;clickElement(b)},Autoplay.start(),DEBUG("Attacked Selected Target in ongoing war."),
!0}var c=xpathFirst('.//a[@class="sexy_button_new short white sexy_call_new" and contains(@onclick, "postFeedAndSendCallForHelp") and not(contains(@class,"skip"))]');if(c&&isGMChecked("autoGlobalPublishing"))return clickElement(c),Autoplay.fx=function(){clickAction="war";clickContext=c;clickElement(c)},Autoplay.start(),DEBUG("Clicked to ask for help in ongoing war."),setGMTime("warTimer","1 hour"),!1;xpathFirst('.//div[contains(text(),"Start a New War")]');setGMTime("warTimer","1 hour");return!1}(a=
$x('.//a[contains(@href, "xw_action=declare_war")]',innerPageElt))&&(b=a[Math.floor(Math.random()*a.length)]);if(!b||b&&!b.getAttribute("onclick").match(/target_id=p%7C(\d+)/))return DEBUG("War elements appeared to have been changed by Zynga, disabling autoWar."),setGMTime("warTimer","1 hour"),!1;a=RegExp.$1;if(2==RX6_getValue("warMode",0)){var d=getSavedList("autoWarTargetList");d&&d.length?(d=d[Math.floor(Math.random()*d.length)],b.setAttribute("onclick",b.getAttribute("onclick").replace(a,d)),
b.setAttribute("href",b.getAttribute("href").replace(a,d))):(addToLog("warning Icon","There are no targets in your Enemies List. Changing War Settings to War a Random Enemy."),RX6_setValue("warMode",1))}Autoplay.fx=function(){clickAction="war";clickContext=b;clickElement(b);DEBUG("Clicked to start a new war.")};Autoplay.start();return!0}
function autoTournament(){if(city!=LV)return Autoplay.fx=function(){goLocation(LV)},Autoplay.start(),!0;if(!onTournamentTab())return Autoplay.fx=goTournamentTab,Autoplay.start(),!0;var a=xpathFirst('.//div[@id="tournament_parent"]//span[@id="tournament_try_again_timer"]',innerPageElt);if(a&&a.innerHTML)return a=a.innerHTML,DEBUG("Timer found: "+a),setGMTime("tournamentTimer",a),goHome(),!1;var b=xpathFirst('.//div[@id="tournament_footer"]/div[contains(@id,"tournament_footer_") and @class="tournament_footer_on"]',
innerPageElt);if(!b||!b.id)return Autoplay.fx=autoTournament,Autoplay.start(),!0;DEBUG("autoTournament(): Progress OK");Autoplay.delay=3E3;var c=xpathFirst('.//div[@class="tournament_page" and @id="tournament_page1"]',innerPageElt),d=xpathFirst('.//div[@class="tournament_page" and @id="tournament_page2"]',innerPageElt);xpathFirst('.//div[@class="tournament_page" and @id="tournament_page3"]',innerPageElt);xpathFirst('.//div[@class="tournament_page" and @id="tournament_page4"]',innerPageElt);var e=
xpathFirst('.//div[@class="tournament_page" and @id="tournament_page5"]',innerPageElt),a=xpathFirst('.//div[@id="tournament_footer"]//div[@class="tournament_atkdef_icon"]',innerPageElt),f=xpathFirst('.//div[@id="tournament_footer"]//div[@class="tournament_mafia_icon_self"]',innerPageElt);a&&a.innerHTML&&(a=parseInt(a.innerHTML.replace(",","")));f&&f.innerHTML&&(f=parseInt(f.innerHTML));DEBUG("autoTournament(): Parsed def+atk skill: "+a+", mafia: "+f);autoReload();a=function(){return xpathFirst('.//div[@id="tournament_nextpage" and not(contains(@style,"opacity: 0.5")) and not(contains(@style,"none"))]',
innerPageElt)};switch(b.id){case "tournament_footer_one":DEBUG('autoTournament(): Currently at step 1 "Class"');e=tournamentClasses[RX6_getValue("autoTournamentClass",0)];b=xpathFirst('.//div[@class="tournament_belt_unlocked" or @class="tournament_belt_locked"]//div[@class="tournament_belt_descrip"]',c);if(!b||!b.innerHTML){addToLog("warning Icon","autoTournament(): Error finding/parsing a selected class.");break}colorDEBUG(b.innerHTML.trim()+" vs "+e[0].trim().toUpperCase());if(b.innerHTML.trim()!=
e[0].trim().toUpperCase()){if(a=xpathFirst('.//div[@id="tourney_belt_text_bg_'+e[4]+'"]',c))return clickElement(a),DEBUG("autoTournament(): Clicked to select "+e[0]),Autoplay.fx=autoTournament,Autoplay.start(),!0;addToLog("warning Icon","autoTournament(): Couldn't find class to select.")}else{if(e=a())return clickElement(e),DEBUG('autoTournament(): Clicked to go to step "Entry"'),Autoplay.fx=autoTournament,Autoplay.start(),!0;addToLog("warning Icon","autoTournament(): Disabling autoTournament, selected class is locked, please choose another.");
GM_setValue("autoTournament",0)}break;case "tournament_footer_two":DEBUG('autoTournament(): Currently at step 2 "Entry"');c=xpathFirst('.//div[contains(@class,"tournament_round_container tournament_round_") and not(contains(@class,"_locked")) and not(contains(@class,"_champion"))]',d);e=parseCash(xpathFirst('.//div[@class="tournament_round_cost tournament_chip"]',c).innerHTML);c=parseInt(xpathFirst('.//div[@class="tournament_round_cost tournament_stamina"]',c).innerHTML);DEBUG("autoTournament(): V$"+
e+", STAM: "+c);GM_setValue("tournamentStamina",c);if(c>stamina){addToLog("warning Icon","autoTournament(): We need "+(c-stamina)+" more stamina for this round, skipping for 15min...");setGMTime("tournamentTimer","00:15:00");break}c=e-cities[LV][CITY_CASH];if(0<c)return DEBUG("autoTournament(): We need V$"+e+" for this round. Withdrawing V$"+c+"..."),suspendBank=!0,autoBankWithdraw(c),Autoplay.fx=autoTournament,Autoplay.start(),!0;(e=xpathFirst('.//div[(contains(@id,"pop_box") and contains(@style, "block"))]//a[@class="sexy_button_new short white" and contains(.,"Step into the Ring")]',
innerPageElt))||(e=a());if(e)return clickElement(e),DEBUG('autoTournament(): Clicked to go to "Bet" page'),Autoplay.fx=autoTournament,Autoplay.start(),!0;addToLog("warning Icon","autoTournament(): No Next button found.");break;case "tournament_footer_three":DEBUG('autoTournament(): Currently at step 3 "Bet"');suspendBank=!1;(e=xpathFirst('.//div[(contains(@id,"pop_box") and contains(@style, "block"))]//a[@class="sexy_button_new short red" and contains(.,"Fight Anyway")]',innerPageElt))||xpathFirst('.//div[@class="pop_box" and contains(@style, "block")]//a[@class="sexy_button_new short red" and contains(.,"Fight Anyway")]',
innerPageElt);e||xpathFirst('.//a[@class="sexy_button_new short red" and contains(.,"Fight Anyway")]',innerPageElt);e||(e=a());if(e)return clickElement(e),DEBUG('autoTournament(): Clicked to go to "Fight" page'),Autoplay.fx=autoTournament,Autoplay.start(),!0;addToLog("warning Icon","autoTournament(): No Next button found.");break;case "tournament_footer_four":if(Autoplay.delay=6E3,!e||"none"==e.style.display){DEBUG('autoTournament(): Currently at step 4 "Fight"');if(a=xpathFirst('.//a[@class="sexy_button_new short red" and contains(@id,"tournament_brackets_round") and contains(@id,"_fight")]',
innerPageElt))return e=a.innerHTML&&a.innerHTML.match(/<span>(.+?)<\/span>/i)?RegExp.$1:"fight the next round",clickElement(a),DEBUG("autoTournament(): Clicked to "+e),Autoplay.fx=autoTournament,Autoplay.start(),!0;addToLog("warning Icon","autoTournament(): No Fight button found.")}else{DEBUG('autoTournament(): Currently at step 5 "Result"');var c=xpathFirst('.//div[@class="tournament_result_left_side"]/div[@class="tournament_result_exp"]',e),b=xpathFirst('.//div[@class="tournament_result_left_side"]/div[@class="tournament_result_fans"]',
e),d=xpathFirst('.//div[@class="tournament_result_left_side"]/div[@class="tournament_result_tokens"]',e),f=xpathFirst('.//div[@class="tournament_result_left_side"]/div[@class="tournament_result_chips"]',e),e=xpathFirst('.//a[contains(text(),"Why did I lose")]',e),g="";c&&(g+=(g?", ":" ")+"XP: "+c.innerHTML);f&&(g+=(g?", ":" ")+"Cash: V$"+f.innerHTML);d&&(g+=(g?", ":" ")+"Tokens: "+d.innerHTML);b&&(g+=(g?", ":" ")+"Fans: "+b.innerHTML);e?addToLog("omg Icon","Tournament finished, you lost!"+(g?'<br><span class="good">Gained'+
g+"</span>":"")):addToLog("yeah Icon","Tournament finished, you won!"+(g?'<br><span class="good">Gained'+g+"</span>":""));if(e=a())return clickElement(e),DEBUG("autoTournament(): Clicked to finish the tournament"),Autoplay.fx=autoTournament,Autoplay.start(),!0}}goHome();return!1}function onHome(){return xpathFirst('.//div[@class="playerupdate_box"]',innerPageElt)||document.getElementById("MainModule")||xpathFirst('.//div[@class="empire_module_title"]',innerPageElt)?!0:!1}
function onWarTab(){return xpathFirst('.//li[contains(@class, "tab_on")]//a[contains(., "Declare War")]',innerPageElt)?!0:!1}function onPropertyNav(){return xpathFirst('.//*[@name="buy_props" or @id="flash_content_propertiesV2" or @id="propertyV2Help"]',innerPageElt)?!0:!1}function onProfileNav(){return xpathFirst('.//li[contains(@class, "tab_off")]//a[contains(., "Achievements")]',innerPageElt)?!0:!1}
function onMyMafiaNav(){return xpathFirst('.//li[contains(@class, "tab_first")]//a[contains(., "Recruit")]',innerPageElt)||xpathFirst('.//li[contains(@class, "tab_first")]//a[contains(., "Families")]',innerPageElt)?!0:!1}function onFightTab(){return xpathFirst('.//li[contains(@class, "tab_on")]//a[contains(., "Fight")]',innerPageElt)?!0:!1}function onFightersTab(){return xpathFirst('.//li[contains(@class, "tab_on tab_middle")]//a[contains(., "Fighters")]',innerPageElt)?!0:!1}
function onRivalsTab(){return xpathFirst('.//li[contains(@class, "tab_on tab_middle")]//a[contains(., "Rivals")]',innerPageElt)?!0:!1}function onTournamentTab(){return xpathFirst('.//li[contains(@class, "tab_on")]//a[contains(., "Tournaments")]',innerPageElt)?!0:!1}function onHitlistTab(){return xpathFirst('.//table[@class="hit_list"]',innerPageElt)?!0:!1}
function onInventoryTab(){return xpathFirst('.//li[contains(@class,"tab_on")]//a[contains(.,"Inventory")]',innerPageElt)||xpathFirst('.//li[contains(@class,"tab_on")]//a[contains(.,"Items")]',innerPageElt)?!0:!1}function onLootTab(){return xpathFirst('.//li[contains(@class, "tab_on")]//a[contains(., "Loot")]',innerPageElt)?!0:!1}function onCollectionsTab(){return xpathFirst('.//li[contains(@class, "tab_on")]//a[contains(@onclick, "xw_controller=collection")]',innerPageElt)?!0:!1}
function onMarketTab(){return xpathFirst('.//div[@id="marketplace"]',innerPageElt)?!0:!1}
function goHome(){ajaxHandling=!1;if(6>level||onHome())goJobsNav();else{var a=xpathFirst('.//div[@id="nav_link_home_unlock"]/a');a||(a=xpathFirst('.//div[@class="nav_link home_link"]/a[contains(@onclick,"xw_controller=index")]'));a||(DEBUG("Can't findhome nav link to click. Using fallback method ..."),a=makeElement("a",null,{onclick:'return do_ajax("inner_page",'+('"remote/html_server.php?xw_controller=index&xw_action=view&xw_city='+city+'"')+", 1, 1, 0, 0); return false;"}));if(!a)return!1;DEBUG("Switching Pages : clicked to go to 'Home'");
clickElement(a);return!0}}function logEvent(){}function getHelp(){}function getListed(){}
function goProfileNav(a){var b=a.profile;if(!b||!b.getAttribute("href"))b=xpathFirst('.//table[@class="main_table fight_table"]//a[contains(@href, "xw_controller=stats")]',innerPageElt);if(b&&b.getAttribute("href").match(/user=(\w+)/)){var c=b.getAttribute("href"),d=c.split("&user=")[1].split("'")[0].split("&")[0];a.id=a.id.replace("p|","");c=c.replace(d,encode64("p|"+a.id).replace(/=/g,"%3D"));c.match(/this.href/)&&(c=c.replace("this.href='http://mwfb.zynga.com/mwfb/","return do_ajax('inner_page', '")+
", 1, 1, 0, 0); return false;");DEBUG("Clicked to load profile (id="+a.id+" from profile link)");b.setAttribute("href",c);clickElement(b)}else(b=xpathFirst('.//table[@class="main_table fight_table"]//a[contains(@href, "xw_controller=fight")]',innerPageElt))&&b.getAttribute("href").match(/opponent_id=(\w+)/)?(c=" return do_ajax('inner_page', 'remote/html_server.php?xw_controller=stats&xw_action=view&xw_city="+city+"&user="+a.id+"&ref=fight_list', 1, 1, 0, 0); return false; ",b.setAttribute("href",
c),clickElement(b),DEBUG("Clicked to load profile (id="+a.id+" from attack button)")):(DEBUG("Could not find profile link"),goFightNav())}function goMyProfile(){var a=new_header?xpathFirst('//a[@class="dropdown_narrow"]'):xpathFirst('.//div[@class="nav_link profile_link"]//a[contains(.,"Profile")]',mastheadElt);a?(clickElement(a),DEBUG("Clicked to load my own profile.")):addToLog("warning Icon","Can't find Profile nav link to click.")}
function goMyMafiaNav(){var a=xpathFirst('//div[@class="nav_link mafia_link"]//a[contains(.,"My Mafia")]');a||(a=xpathFirst('//div[@class="nav_link mafia_link"]//a[contains(.,"Recruit")]'));a||(a=xpathFirst('//div[@class="nav_link mafia_link"]//a[contains(.,"My Family")]'));if(a){var b=xpathFirst('//div[@class="nav_link profile_link"]//a[contains(.,"Profile")]');b&&a.setAttribute("onclick",b.getAttribute("onclick").replace(/xw_controller=stats/i,"xw_controller=recruit"));clickElement(a);DEBUG("Clicked to load My Mafia nav.")}else addToLog("warning Icon",
"Can't find My Mafia nav link to click.")}function goWarTab(){var a=xpathFirst('.//div[@class="tab_content"]//a[contains(., "Declare War")]',innerPageElt);a?(clickElement(a),DEBUG('Clicked to go to "Declare War" page.')):goFightNav()}function goBank(){var a=xpathFirst('.//a[@class="bank_deposit"]');a?(clickElement(a),DEBUG("Clicked to go to bank.")):addToLog("warning Icon","Can't find bank link to click.")}
function oldgoJobsNav(){ajaxHandling=!1;var a=xpathFirst('//div[@class="nav_link jobs_link"]/a');if(!a&&(a=xpathFirst('.//a[@class="header_job_button"]',mastheadElt),!a&&(a=xpathFirst('.//div[@id="nav_link_jobs_unlock"]//a',mastheadElt),!a)))return addToLog("warning Icon","Can't find jobs nav link to click."),!1;clickElement(a);DEBUG("Clicked to go to the jobs page.");return!0}
function goJobsNav(){ajaxHandling=!1;var a=xpathFirst('.//div[@id="nav_link_jobs_unlock"]/a');a||(a=xpathFirst('//div[@class="nav_link jobs_link"]/a[contains(@onclick,"xw_controller=job")]'));a||(a=xpathFirst('.//a[@class="header_job_button"]',mastheadElt));a||(DEBUG("Can't find jobs nav link to click. Using fallback method ..."),a=makeElement("a",null,{onclick:'return do_ajax("inner_page",'+('"remote/html_server.php?xw_controller=job&xw_action=view&xw_city='+city+'"')+", 1, 1, 0, 0); return false;"}));
if(!a)return!1;clickElement(a);DEBUG("Switching Pages : clicked to go to 'Jobs'");return!0}function goInventoryNav(){var a=xpathFirst('//div[@class="nav_link inventory_link"]/a');if(!a&&(a=xpathFirst('.//a[@class="header_inventory_button"]',mastheadElt),!a&&(a=xpathFirst('.//div[@id="nav_link_inventory_unlock"]//a',mastheadElt),!a)))return addToLog("warning Icon","Can't find Inventory nav link to click."),!1;clickElement(a);DEBUG("Clicked to go to Inventory.");return!0}
function goMarketPlace(){var a=makeElement("a",null,{onclick:'return do_ajax("inner_page","remote/html_server.php?xw_controller=marketplace&xw_action=view&xw_city=", 1, 1, 0, 0); return false;'});if(a)return clickElement(a),DEBUG("Clicked to go to Marketplace tab."),!0;addToLog("warning Icon","Can't find Marketplace nav link to click.");return!1}
function goCollectionsNav(){var a=makeElement("a",null,{onclick:'return do_ajax("inner_page","remote/html_server.php?xw_controller=collection&xw_action=view&xw_city=1", 1, 1, 0, 0); return false;'});if(a)return clickElement(a),DEBUG("Clicked to go to Collections tab."),!0;addToLog("warning Icon","Can't find Collections nav link to click.");return!1}
function goJobTab(a){var b,c=currentJobTab();if(-1==c)return goJobsNav();if(c==a)return!0;DEBUG("CurrentTab: "+c+" and we need to go to Tab: "+a);if(isNewCity(city)&&(b=makeElement("a",null,{onclick:'return do_ajax("inner_page","remote/html_server.php?xw_controller=job&xw_action=view&xw_city='+cities[city][CITY_NUMBER]+"&tab="+a+'", 1, 1 ,0, 0); return false;'})))return clickElement(b),!0;var d=0;city==NY&&(d=6>a?0:1);var e=0;city==NY&&(e=6>c?0:1);DEBUG("goJobTab: city="+city+" currentBar="+e+" currentTab="+
c+" barno="+d+" tabno="+a);if(e!=d){var f;city==NY&&(f=1==e?"Easy Jobs":"More Jobs");b=xpathFirst('.//ul[contains(@id,"jobs_bar")]//a[contains(text(), "'+f+'")]',innerPageElt);DEBUG("Clicked to go to job bar "+d+". ");clickElement(b);return!0}(b=xpathFirst('.//ul[@id="jobs_bar'+d+'"]//a[contains(@onclick, "&story_tab='+a+'") or contains(@onclick, "&episode_tab='+a+'") or contains(@onclick, "&tab='+a+'")]',innerPageElt))||(b=xpathFirst('.//li[@id="tab_'+d+'"]//a[contains(@onclick, "&story_tab='+a+
'") or contains(@onclick, "&episode_tab='+a+'") or contains(@onclick, "&tab='+a+'")]',innerPageElt));b||(b=xpathFirst('.//li[@id="tab_'+a+'"]//a[contains(@onclick, "&story_tab='+a+'") or contains(@onclick, "&episode_tab='+a+'") or contains(@onclick, "&tab='+a+'")]',innerPageElt));if(!b)return(b=xpathFirst('.//li[@id="tab_'+a+'"]//span[contains(text(), "Locked")]',innerPageElt))||DEBUG("BUG DETECTED: Can't find job bar "+d+", tab "+a+" link to click. Currently on job bar "+e+", tab "+c+"."),!1;clickElement(b);
DEBUG("Clicked to go to job tab "+a+".");return!0}function goJobTabPath(a){var b;if(currentJobTabPath()==a)return!0;b=xpathFirst('.//a[contains(@onclick, "ExpertMapController.changePath('+a+');")]');if(!b)return!1;clickElement(b);destroyByID("job_path_flag");DEBUG(" job, Clicked to go to tab "+a+" in gojobtabpath elt-b="+b.innerHTML);return!0}
function logJobResponse(a){isGMChecked("TestChanges")&&RX6_setValue("jobResult",JSON.stringify(a));try{var b=a.city-1,c=a.name,d=parseInt(a.energy),e=JSON.stringify(a.extraData);colorDEBUG("jobExtra:<br>"+e);var f=a.experience,g=parseInt(a.extraData.bonusExperience);g&&(f+=" + "+g+" (Mastermind Bonus)");var h=makeCommaValue(parseCash(a.cash)),g=0;a.extraData.bonusCash&&(g=makeCommaValue(parseCash(a.extraData.bonusCash)));var l=makeCommaValue(parseCash(a.cashUsed)),e="RX6 spent ",e=d?e+('<span class="user">'+
d+" energy</span>"):e+'<span class="user">no energy</span> <span class="good">(Wheelman Bonus)</span>';l&&(e+=' and <span class="bad">'+cities[b][CITY_CASH_SYMBOL]+l+"</span>");e+=' to perform <span class="job">'+c+"</span>";h&&"0"!=h?(g&&(h+=" + "+cities[b][CITY_CASH_SYMBOL]+g+" (Bagman Bonus)"),e+=', earning <span class="good">'+cities[b][CITY_CASH_SYMBOL]+h+'</span> and <span class="good">'+f+" experience</span>"):f&&(e+=', earning <span class="good">'+f+" experience</span>");if(a.hasOwnProperty("itemsUsed")){itemsUsed=
a.itemsUsed;var k=itemsUsed.length;if(0<k){e+=" RX6 also used ";b="";for(i=0;i<k;i++)usedQty=itemsUsed[i].quantity,1==usedQty?(usedItem=itemsUsed[i].item.quantified_singular_name,e+=b+'<span class="bad">'+usedItem+"</span>"):(usedItem=itemsUsed[i].item.plural_name,e+=b+'<span class="bad">'+usedQty+" x "+usedItem+"</span>"),b=" and "}}var e=e+".",p=parseInt(a.masteryTotal),n=a.mastered;if((100<=p||n)&&!isGMChecked("repeatJob"))e+=" Job 100% mastered !";e&&addToLog("process Icon",e)}catch(r){}}
function bgBuyItems(a){mwap_do_ajax("job","buy_required_items","",a,"",jobCallback)}function bgKeelBandit(a,b,c){a=c+"&xw_person="+xw_user+"&stage="+b+"&job="+a;colorDEBUG("bgKeelBandit - otherTxt: "+a);mwap_do_ajax("Job","eliminateBandit","",a,"",jobCallback)}
function bgDoJob(a,b){var c=missions[a][MISSION_NUMBER],d=missions[a][MISSION_CITY],c="&job="+c+"&tab="+missions[a][MISSION_TAB]+"&clkdiv=btn_dojob_"+c,e=b.getAttribute("href"),e=e.substr(e.indexOf("?")+1);mwap_do_ajax("job","dojob",d,c,e,jobCallback)}
function jobCallback(a,b,c,d,e,f,g){colorDEBUG("jobCallBack action: "+b,caq);if(e){if(/ERROR 500: response never closed/.test(g.responseText))return doAutoPlay(),!1;if("dojob"==b)if(IsJsonString(g.responseText)){jsonresult=JSON.parse(g.responseText);jsonPageUpdate(jsonresult);if(jsonresult.hasOwnProperty("jobResult")){var a=jsonresult.jobResult,h=a.name,c=parseInt(a.masteryTotal),l=parseInt(a.masteryIncrease),k=a.mastered,d=!1;if(100<=c||k)d=!0,c=100;DEBUG("Job "+h+" is now "+c+"% mastered, mastery increased by "+
l+"%.");logJobResponse(a);l=!1;a.hasOwnProperty("loot")&&(l=logLootDrops(a.loot,"newcity"));if(l){var p=!0,n=[];requirementJob.forEach(function(a){a[1].toUpperCase().trim()==h.toUpperCase().trim()&&(n.push(a[0]),colorDEBUG("Matching Item: "+a[0]+" from "+a[1]+" ... fingers crossed ...",caq))});var r=getSavedList("itemList");if(0==n.length||"undefined"==typeof r[0]||0==r.length||!1==p)DEBUG("No relevant loot found or no needed items in required item list.");else for(;k=n.pop();){DEBUG("Checking to see if "+
k+" is needed ...");for(l=0;l<r.length;l++)-1!=k.indexOf(r[l].trim())?(DEBUG("Check ! "+k+" is the item we are looking for."),removeSavedListItem("itemList",k),removeJobForItem("jobsToDo",k),d=!1,popJob()):DEBUG("Oops ! "+k+" is NOT the item we are looking for.")}}else colorDEBUG("NO LOOT FOUND ON THIS JOB",cre);if(a.hasOwnProperty("lootBandit"))if(b=RX6_getValue("selectMission"),l=missions[b][MISSION_ENERGY],k=["setUnknown","setXPBandit","setCashBandit","setJobBandit"],f=a.lootBandit,f[0]&&f[0].hasOwnProperty("type")){var q=
parseInt(f[0].type),g=RX6_getValue(k[q],1);DEBUG("jobLootBandit Type: "+q+" = "+k[q]+" saved value: "+g);e=b=!1;switch(q){case 1:if(1==g||2==g&&energy<l)e=!0;g&&(100<=c&&!isGMChecked("repeatJob"))&&(e=!0);break;case 2:1==g&&(e=!0);break;case 3:0==g?b=!0:1==g?e=!0:2==g&&(energy<l?e=!0:b=!0);break;default:colorDEBUG("!!! Unkown banditSetting !!!",cre)}if(e){colorDEBUG("PROCESSING jobLootBandit Type: "+q+" = "+k[q]+" / "+g,cgr);a.temp="";f[0].markup.match(/&tmp=(.+)&xw_person/)&&(a.temp="&tmp="+RegExp.$1);
bgKeelBandit(a.id,a.tab,a.temp);return}colorDEBUG("IGNORING jobLootBandit Type: "+q+" = "+k[q]+" / "+g,cre);b&&popJob()}else colorDEBUG("jobLootBandit.hasOwnProperty(type) FALSE",cre);if(d&&!isGMChecked("repeatJob"))return colorDEBUG("100% mastery detected",cli),goHome(),!1;doAutoPlay();return!1}if(jsonresult.hasOwnProperty("data")){if(b=RX6_getValue("selectMission"),a=missions[b][MISSION_NAME],void 0!==typeof jsonresult.data.impulseBuy.message){f=jsonresult.data.impulseBuy.message;if(-1!=f.indexOf("loot drops")){DEBUG("Seems RX6 needs (some) items to perform: "+
a);k=document.createElement("div");k.innerHTML=f;var l=xpathFirst('.//ul[@class="item_list"]//li[@class="clearfix"]',k),t=/(.+)\u00D7/i.exec(l.innerHTML.untag())[1];if(t){addToLog("info Icon",'Item(s) required to perform <span class="job">'+a+'</span>: <span class="loot">'+t+"</span>.");var r=getSavedList("itemList"),s=getSavedList("jobsToDo","");-1==s.indexOf(a)?(s.push(a),DEBUG("Saving "+a+" for later. Fetching pre-req items first."),setSavedList("jobsToDo",s)):DEBUG(a+" already saved for later. Fetching pre-req items first.");
p=!1;requirementJob.forEach(function(a){level>=cities[a[2]][CITY_LEVEL]&&a[0].toUpperCase().trim()==t.toUpperCase().trim()&&(s.push(a[1]),r.push(t.trim()),p=!0,jobFound=a[1])});if(p)return setSavedList("itemList",r.unique()),setSavedList("jobsToDo",s),popJob(),doAutoPlay(),!1;DEBUG(t+" not found in the requirement job array.")}}else if(-1!=f.indexOf("Bandit")&&(e=b=!1,g=RX6_getValue(k[q],1),0==g?b=!0:1==g?e=!0:2==g&&(energy<l?e=!0:b=!0),b&&popJob(),e)){mwap_do_ajax("Job","eliminateBandit",d,c,"",
jobCallback);return}if(-1!=f.indexOf("following items")){k=document.createElement("div");k.innerHTML=f;q=$x('.//ul[@class="item_list"]//li[@class="clearfix"]',k);c="";l=0;for(iLength=q.length;l<iLength;l++)c&&(c+=" and "),c+='<span class="loot">'+q[l].innerHTML.untag()+"</span>";addToLog("info Icon",'Item(s) required to perform <span class="job">'+a+"</span>: "+c+".");l=xpathFirst('.//a[contains(@class,"impulse_buy_purchase") and not(contains(@style,"hidden"))]',k).getAttribute("href");l="&tmp="+
/&tmp=(.+)/.exec(l)[1];colorDEBUG("bgParams: "+l,caq);bgBuyItems(l)}}}else colorDEBUG("jsonresult.hasOwnProperty( - - ) - FALSE !",cre)}else colorDEBUG("request.responseText is NOT JSON<br>:"+g.responseText);else if("eliminateBandit"==b){colorDEBUG("jobCallBack - "+b+" - response processing");if(IsJsonString(g.responseText))return jsonresult=JSON.parse(g.responseText),jsonPageUpdate(jsonresult),l=jsonresult.data,k=document.createElement("div"),k.innerHTML=l.info.reward,a=q=0,c=xpathFirst('.//div[contains(@class,"reward")]//div[contains(@class,"item_card_mini"]',
k),(d=xpathFirst('.//div[contains(@class,"reward-xp")]',k))&&(a=d.innerHTML.untag()),(k=xpathFirst('.//div[contains(@class,"reward-cash")]',k))&&(q=cities[jobCity][CITY_CASH_SYMBOL]+k.innerHTML.untag()),k="RX6 succesfully eliminate the bandit",d="process Icon",l.result||(k="RX6 FAILED to eliminate the bandit",d="omg Icon"),q&&(k+=', earning <span class="good">'+cities[jobCity][CITY_CASH_SYMBOL]+q+"</span>",a&&(k+=" and ")),a&&(q||(k+=", "),k+='earning <span class="good">'+a+" experience</span>."),
c&&(k+="<br>"+c.innerHTML),addToLog(d,k),doAutoPlay(),!1;colorDEBUG("request.responseText is NOT JSON<br>:"+g.responseText)}else if("buy_required_items"==b){b=RX6_getValue("selectMission");a=missions[b][MISSION_NAME];if(IsJsonString(g.responseText)){jsonresult=JSON.parse(g.responseText);jsonPageUpdate(jsonresult);if(void 0!==typeof jsonresult.data.impulseBuy.message){f=jsonresult.data.impulseBuy.message;k=document.createElement("div");k.innerHTML=f;k=$x(".//ul//li",k);q="";l=0;for(iLength=k.length;l<
iLength;l++)q&&(q+=" and "),q+='<span class="loot">'+k[l].innerHTML.untag()+"</span>";jsonresult.data.impulseBuy.success?addToLog("yeah Icon","RX6 just bought the following items: "+q+' to perform <span class="job">'+a+"</span>."):(addToLog("omg Icon","RX6 failed to buy the following items: "+q+' to perform <span class="job">'+a+"</span>."),popjob())}doAutoPlay();return!1}colorDEBUG("request.responseText is NOT JSON<br>:"+g.responseText)}else return colorDEBUG("jobCallBack UNKNOWN action: "+b,cre),
doAutoPlay(),!1}else return colorDEBUG("jobCallBack action: "+b+" FAILED",cre),doAutoPlay(),!1}
function goJob(){var a;try{var b=RX6_getValue("selectMission");if(!missions[b])return!1;var c=missions[b][MISSION_NAME],d=missions[b][MISSION_NUMBER];if(isNewCity(city))return(a=xpathFirst('.//div[@class="job"]//a[contains(@href, "job='+d+'&")]',innerPageElt))||(a=xpathFirst('.//div[@id="job-id-'+d+'"]//a[contains(@href,"job='+d+'&")]',innerPageElt)),a?(bgDoJob(b,a),!0):!1;var e=getJobRow(c,innerPageElt);a=xpathFirst('.//a[(contains(@href,"xw_action=dojob") or contains(@onclick,"panelButtonDoJob") or contains(@onclick,"doFightJob")) and not(contains(.,"Ask"))]',
e);if(isJobLocked(a))return!1;isJobBoss(e)&&(isBGPaused=!0,Autoplay.clearTimeout(),Reload.clearTimeout(),health<maxHealth&&autoHeal(2));if(isJobFight(e)&&(targetElts=$x('.//a[contains(@onclick, "MapController.doFightJob('+d+",'p|\")]",e),numTargets=targetElts.length,DEBUG("Fight job, Number of Fight Targets Found : "+numTargets),numTargets)){var f=GM_getIntValue("fightLevelMax",100),g=GM_getIntValue("fightMafiaMax",501);RX6_getValue("fightLevelMaxRelative",!1)&&(f+=level);RX6_getValue("fightMafiaMaxRelative",
!1)&&(g+=mafia);DEBUG("Fight job, Only performing if Level <= "+f+" and mafia <= "+g);var h,l,k;if(StamReqElt=xpathFirst('.//dd[@class="stamina"]',e)){StamReq=parseInt(StamReqElt.innerHTML.untag());DEBUG(" job Requires Stamina:"+StamReq+":");if(StamReq>stamina)return DEBUG(" job stamina required :"+StamReq+": have :"+stamina+": not enough stamina, leave for now"),!1;DEBUG(" job stamina required :"+StamReq+": have :"+stamina+": have enough stamina do job")}else DEBUG(" job  Current Stamina: "+stamina+
". Skipping - StamReq NOT FOUND");b=g;e=!1;for(i=0;i<numTargets;i++)targetParent=targetElts[i].parentNode.parentNode,parentNoTags=targetParent.innerHTML.untag(),parentNoTags.match(/(.+?)\s+(.+?)\s+(.+?)\s+Fight/i)?(h=RegExp.$1,l=parseInt(RegExp.$2),k=parseInt(RegExp.$3)):((OppNameElt=xpathFirst('.//dt[@class="name"]//span[@class="player_data"]',targetParent))&&(h=OppNameElt.innerHTML.untag()),(OppSizeElt=xpathFirst('.//dd[@class="group_size"]//span[@class="player_data"]',targetParent))&&(l=parseInt(OppSizeElt.innerHTML.untag())),
(OppLevelElt=xpathFirst('.//dd[@class="level"]//span[@class="player_data"]',targetParent))&&(k=parseInt(OppLevelElt.innerHTML.untag()))),0!=l&&0!=k&&(l<b||l==b&&k<f)?(OppTarget=targetElts[i],OppTargetParent=targetParent,b=l,f=k,e=!0,DEBUG("Fight job, Using Target : "+h+" - Size : "+l+" - Level : "+k)):DEBUG("Fight job, Skipping Target  : "+h+" - Size : "+l+" - Level : "+k);if(e)DEBUG("Fight job, Going to fight : "+OppTargetParent.innerHTML.untag()),a=OppTarget;else return addToLog("warning Icon",
"Opponents did not qualify ... Reloading to find new opponents."),goJobsNav(),!1}if(a)return clickAction="job",clickContext=[d,c],suspendBank=!1,clickElement(a),DEBUG(" job Clicked to perform: "+c),!0;DEBUG(" UNABLE to perform: "+c);return!1}catch(p){DEBUG("goJob Error: "+p)}}
function goFightNav(){var a=xpathFirst('.//div[@id="nav_link_fight_unlock"]//a',menubarElt);if(!a){for(var b=$x('//div[@class="nav_link fight_link"]//a'),c=0,d=b.length;c<d;++c)if(b[c].scrollWidth){a=b[c];break}if(!a){addToLog("warning Icon","Can't find fight nav link to click.");return}}clickElement(a);DEBUG("Clicked to go to fights.")}
function goFightTab(){var a=xpathFirst('.//div[@class="tab_content"]//a[contains(., "Fight")]',innerPageElt);a?(clickElement(a),DEBUG("Clicked to go to fight tab.")):goFightNav()}function goFightersTab(){var a=xpathFirst('.//div[@class="minitab_content"]//a[contains(., "Fighters")]',innerPageElt);a?(clickElement(a),DEBUG("Clicked to go to fighters tab.")):goFightNav()}
function goRivalsTab(){var a=xpathFirst('.//div[@class="minitab_content"]//a[contains(., "Rivals")]',innerPageElt);a?(clickElement(a),DEBUG("Clicked to go to rivals tab.")):goFightNav()}function goTournamentTab(){var a=makeElement("a",null,{onclick:'return do_ajax("inner_page","remote/html_server.php?xw_controller=tournament&xw_action=view&xw_city=5", 1, 1, 0, 0); return false;'});a&&(clickElement(a),DEBUG("Clicked to go to tournament tab."))}
function goHitlistTab(){var a=xpathFirst('.//div[@class="tab_content"]//a[contains(., "Hitlist")]',innerPageElt);a?(clickElement(a),DEBUG("Clicked to go to hitlist.")):goFightNav()}function goPropertyNav(){var a=new_header?xpathFirst('//a[@class="header_properties_button"]'):xpathFirst('.//span[@id="nav_link_properties"]//a',menubarElt);a?(clickElement(a),DEBUG("Clicked to go to properties.")):addToLog("warning Icon","Can't find properties nav link to click.")}
function goDeleteNews(){var a=xpathFirst('.//a[contains(@onclick,"xw_action=deletenews") and contains(text(),"Clear")]',innerPageElt);a?(clickElement(a),RX6_setValue("logPlayerUpdatesCount",0),DEBUG("Clicked to delete news.")):DEBUG("Can't find Clear Updates link to click. ")}
function goLocation(a){if(a==city)return DEBUG("Already in "+cities[a][CITY_NAME]+"."),!0;if(level<cities[a][CITY_LEVEL])return addToLog("warning Icon","WARNING: Current level does not allow travel to "+cities[a][CITY_NAME]+". "),DEBUG("Staying in "+cities[city][CITY_NAME]),!1;var b=xpathFirst('//div[@id="travel_menu"]//a[contains(., "'+cities[a][CITY_NAME]+'")]');if(b)return clickElement(b),DEBUG("Clicked to travel to "+cities[a][CITY_NAME]+"."),!0;DEBUG("Unable to find "+cities[a][CITY_NAME]+" travel link. ");
return!1}
function saveFightStatistics(a,b,c,d){var e=city,a=parseInt(a),f=parseCash(d),d=parseCashLoc(d);a&&(RX6_setValue("totalExpInt",String(GM_getIntValue("totalExpInt",0)+a)),RX6_setValue(cityStats[e][fightExp],String(GM_getIntValue(cityStats[e][fightExp],0)+a)));0<b&&(RX6_setValue("fightWinCountInt",String(GM_getIntValue("fightWinCountInt",0)+b)),RX6_setValue("totalWinDollarsInt",String(GM_getIntValue("totalWinDollarsInt",0)+f)),RX6_setValue(cityStats[e][fightWins],String(GM_getIntValue(cityStats[e][fightWins],0)+
a)),RX6_setValue(cityStats[d][cashWins],String(GM_getIntValue(cityStats[d][cashWins],0)+f)));0<c&&(RX6_setValue("fightLossCountInt",String(GM_getIntValue("fightLossCountInt",0)+c)),RX6_setValue(cityStats[e][fightLosses],String(GM_getIntValue(cityStats[e][fightLosses],0)+c)));0==b&&(RX6_setValue("totalLossDollarsInt",String(GM_getIntValue("totalLossDollarsInt",0)+f)),RX6_setValue(cityStats[d][cashLosses],String(GM_getIntValue(cityStats[d][cashLosses],0)+f)))}
function logFightOutcome(a,b){try{var c=isNewCity(city)?5:1,d="0",e="0",f,g,h,l,k,p="",n="",r="",q="",t="",s="",y=!1,C="",F=0,M=0,D="",B="",w="",G="",E=a.linkedName,z=a.level;a.title&&(E=a.title+" "+E);z="RX6 fought "+E+", a level "+z;a.charClass&&(z+=" "+a.charClass);var u=0,A=0;if(b){b.hasOwnProperty("fight_result")&&(fightResult=b.fight_result);var v=fightResult.isWin?1:0;v?u=1:A=1;fightResult.is_power_attack&&(P=parseInt(fightResult.power_attack.won),Q=parseInt(fightResult.power_attack.lost),
u=P*c,A=Q*c);var O=parseInt(fightResult.cash_city)-1;if(b.popup&&/My Event Ices/.test(b.popup))var U=b.popup.indexOf("My Event Ices"),K=b.popup.indexOf("</span>",U),G=b.popup.slice(U,K).replace(/[^0-9]/g,"");fightResult.cash?(d=String(fightResult.cash).digitize(),d=cities[O][CITY_CASH_SYMBOL]+makeCommaValue(d)):d=cities[O][CITY_CASH_SYMBOL]+makeCommaValue(0);fightResult.experience&&(e=fightResult.experience);fightResult.defender.is_iced&&(f=!0);fightResult.defender.is_killed&&(g=!0);if(fightResult.defender.you_iced||
fightResult.you_just_iced||fightResult.you_just_killed)isGMChecked("TestChanges")&&RX6_setValue("iceScoredResult",JSON.stringify(fightResult)),l=!0,F=parseInt(fightResult.total_ice_count),bragCount=parseInt(fightResult.ices_so_far),M=parseInt(fightResult.ices_target),D=F,bragCount&&M&&(D+=" ("+bragCount+" of "+M+")"),fightResult.feed_js&&-1!=fightResult.feed_js.indexOf("description:'")&&(B=fightResult.feed_js,w=eval("("+/var feed = (.+?); MW\.Feed/.exec(B)[1]+")"),myFeeds=JSON.parse(RX6_getValue("myFeeds",
JSON.stringify([]))),50<myFeeds.length&&myFeeds.shift(),myFeeds.push(w.description.split(". Need")[0].split(". Think")[0]),RX6_setValue("myFeeds",JSON.stringify(myFeeds)));fightResult.ice_was_just_stolen&&(isGMChecked("TestChanges")&&RX6_setValue("iceStolenResult",JSON.stringify(fightResult)),h=!0,p=fightResult.thief_id.digitize(),y=fightResult.thief_isInMafia,r=fightResult.thief_name,q=", a "+fightResult.thief_class,q.match(/(\d+)/)&&(n=RegExp.$1),n=isNaN(n)?9999:parseInt(n));fightResult.defender.iced_self&&
(k=!0)}else{var L=xpathFirst('.//div[@id="fight_wrapper"]',innerPageElt),T=xpathFirst('.//div[@id="wrapper_items_won"]',L),I=xpathFirst('.//div[@id="attacker_fight_status" and contains(@class,"good") and contains(text(),"Won")]',L);xpathFirst('.//div[@id="attacker_fight_status" and contains(@class,"bad")  and (contains(text(),"LOST") or contains(text(),"Lost"))]',L);v=0;fightResultElt=xpathFirst('.//img[contains(@src,"youwin")]',T);if(I||fightResultElt)v=1;var P=0<v?1:0,Q=0==v?1:0,R=xpathFirst('.//span[@class="good" and contains(text(),"Win")]',
T);R&&(wonFightsTxt=R.innerHTML.untag(),wonFightsTxt.match(/(\d+)/)&&(P=parseInt(RegExp.$1)));var Z=xpathFirst('.//span[@class="bad" and contains(text(),"Loss")]',T);Z&&(lostFightsTxt=Z.innerHTML.untag(),lostFightsTxt.match(/(\d+)/)&&(Q=parseInt(RegExp.$1)));var u=P*c,A=Q*c,J=xpathFirst('.//td[contains(@class,"cash_icon")]',T);J&&(d=J.innerHTML.untag(),d=d.match(REGEX_CASH)?RegExp.lastMatch:d);var S=xpathFirst('.//td[@class="experience"]',T);S&&(e=S.innerHTML.untag());var H=xpathFirst('.//div[contains(@id,"fv2_defender") and contains(@style,"block")]',
L);if(H){defenderStatEltId=H.id;switch(defenderStatEltId){case "fv2_defender_overlay_stolen":h=!0;break;case "fv2_defender_overlay_iced":f=l=!0;break;case "fv2_defender_overlay_killed":g=l=!0;break;case "fv2_defender_iced_self":targetIce=k=!0;break;case "fv2_defender_was_iced":f=!0}if(l){playerLevel=parseInt(document.getElementById("user_level").innerHTML.untag());var V=document.getElementById("wrapper_attacker");if(V){var W=V.innerHTML,W=W.replace(/<[^>]*>/g,""),W=W.untag();playerName=/(won|lost)*\s*?(.+)\s*?level/i.exec(W)[2];
RX6_setValue("playerName",playerName);RX6_setValue("playerLevel",playerLevel)}var da=xpathFirst('.//div[@class="fv2_defender_overlay_next_count"]',H);da&&(D=da.innerHTML,D.match(/(\d+)\//)&&(F=parseInt(RegExp.$1)))}}}P&&(z+='. You <span class="good">WON</span> ',1==P?z+=" the fight":z+=P+" fights");Q&&(z+='. You <span class="bad">LOST</span> ',1==Q?z+="the fight":z+=Q+" fights");v?(z+=' and gained <span class="good">'+e+' experience</span> and <span class="good">'+d+"</span>.",addToLog("yeah Icon",
z)):(z="0"!=d?z+(', losing <span class="bad">'+d+'</span>. You still gained <span class="good">'+e+" experience</span>."):0!=e?z+('. You still gained <span class="good">'+e+" experience</span>."):z+".",isGMChecked("fightRemoveStronger")&&(z+="<br>Too strong: Avoiding!"),addToLog("omg Icon",z));z="";isGMChecked("noStats")||(c=0,isNaN(e)||(c=parseInt(e)),saveFightStatistics(c,u,A,d),updateLogStats());if(k)addToLog("iced Icon","Apparently "+E+' <span style="color:#00FFFF;">ICED</span> himself. Getting next target ... ');
else if(l){d="";g?(z=' RX6 <span class="bad">KILLED</span> '+E,d="killedMobster Icon",RX6_setValue("myKills",GM_getIntValue("myKills",0)+1)):f&&(z=' RX6 <span style="color:#00FFFF;">ICED</span> '+E,d="iced Icon",RX6_setValue("myIces",GM_getIntValue("myIces",0)+1));updateMDK();if(D){if(z+=', bringing your current iceCount to <span style="color:#00FFFF;">'+D+"</span>.",F){var aa=GM_getIntValue("autoIcePublishFrequency")?GM_getIntValue("autoIcePublishFrequency"):1,ea=parseInt(F%aa);if(0==ea&&isGMChecked("autoIcePublish"))if(w)unsafeWindow.MW.Feed(w);
else{if(H){var fa=xpathFirst('.//div[@class="fv2_defender_overlay_brag_action" and not(contains(@style,"opacity: 0.5;"))]',H);if(fa&&isGMChecked("autoGlobalPublishing")){var ba=xpathFirst('.//a[@class="sexy_button_new medium white sexy_announce_gray"]',fa);ba&&(clickElement(ba),z+=" (Icing published: "+aa+" / "+aa+")")}}}else z+=" (Icing not published: "+ea+" / "+aa+")"}}else z+=".";G&&(z+=' Event Count: <span style="color:#00FFFF;">'+G+"</span>");addToLog(d,z)}else if(h){if(!p&&(H=xpathFirst('.//div[@id="fv2_defender_overlay_stolen" and contains(@style,"block")]',
L))){t=xpathFirst('.//a[contains(@href,"xw_controller=clan")]',H);s=xpathFirst('.//a[contains(@href,"xw_controller=stats")]',H);t&&(r=linkToString(t,"user")+" ");if(s){var r=r+linkToString(s,"user"),ca;s.hasAttribute("href")&&(ca=s.getAttribute("href"));ca.match(/(user|opponent_id)\=(.+)/)&&(p=decodeID(RegExp.$2))}var Y=xpathFirst('.//div[@class="fv2_defender_overlay_level"]',H);Y||(Y=xpathFirst('.//div[contains(text(),"Level")]',H));Y&&(q=", a "+Y.innerHTML.untag(),q.match(/(\d+)/)&&(n=RegExp.$1),
n=isNaN(n)?9999:parseInt(n))}if(r)if(addToLog("iceStolen Icon",'Your ICE was stolen by <span class="user">'+r+"</span>"+q+"."),isGMChecked("fightIceStealers"))if(y)addToLog("omg Icon","Skipping the Revenge on "+r+q+" for stealing your Ice ... part of your mafia");else{var X=GM_getIntValue("fightLevelMax",100);RX6_getValue("fightLevelMaxRelative",!1)&&(X+=level);if(n<=X)if(isGMChecked("fightNames")&&isGMChecked("fightAvoidNames")&&isFamily(decodeHTMLEntities(r),STAMINA_HOW_FIGHT_RANDOM))addToLog("process Icon",
"Skipping the Revenge on "+r+q+" for stealing your Ice ... avoidNames checked");else{if(opponent=new Player,opponent.profile=s,opponent.familyElt=t,opponent.nameElt=s,opponent.id=p,opponent.level=n,opponent.name=r,opponent.linkedName=r,opponent.mafia="501",opponent.fightsDone=0,opponent.level=n,opponent.name=r,opponent.linkedName=r,autoFight.revengeTarget=opponent,C=xpathFirst('.//div[@id="fv2_defender_overlay_stolen_btn"]//a'))return RX6_setValue("revengebutton",C.getAttribute("href")),Autoplay.fx=
function(){clickAction=isNewCity(city)?"multifight":"fight";clickContext=autoFight.revengeTarget;DEBUG("Clicking to take Revenge on "+r+q+" for stealing your Ice ...");clickElement(C);addToLog("process Icon","Clicked to take Revenge on "+r+q+" for stealing your Ice ...")},Autoplay.delay=noDelay,Autoplay.start(),!1}else addToLog("process Icon","Skipping the Revenge on "+r+q+" for stealing your Ice ... deemed to strong (max. level: "+X+")")}else colorDEBUG("fightIceStealers unchecked or in family battle - no revenge");
else colorDEBUG("Revenge Overlay Ice Stolen not Found !",cre)}else a.iced&&addToLog("info Icon",E+' was already <span style="color:#00FFFF;">ICED</span>. Getting next target ...');setNextFightCity()}catch(ga){colorDEBUG("fightErr:"+ga)}}
function logLootDrops(a,b){if("loot"==b){var c=0;for(x in a)if(h=document.createElement("div"),h.innerHTML=a[x],(h=$x('.//div[@class="item_card_mini fake_item_card"]',h))&&0<h.length){g=0;for(iLength=h.length;g<iLength;g++)var d=h[g].innerHTML.untag(),c=c+parseInt(d.digitize())}c&&addToLog("vc Icon",'You gained <span class="good">'+c+" </span> Victory Coin(s)")}if("social"==b){d=c="";for(x in a){h=document.createElement("div");h.innerHTML=a[x];var e=$x('.//div[@id="fake_item_card_title"]',h);if(e&&
0<e.length){g=0;for(iLength=e.length;g<iLength;g++)c&&(c+=", "),c+=e[g].innerHTML.untag()}if((e=$x('.//div[contains(@class,"item_with_preview")]/div',h))&&0<e.length){g=0;for(iLength=e.length;g<iLength;g++)d+='<div class="lootImg">'+e[g].innerHTML+"</div>"}}c&&addToLog("lootbag Icon",c);d&&addToLog("lootbag Icon",d)}"stats"==b&&(h="",curAttack=parseInt(a.skill_atk.replace(",","")),RX6_setValue("curAttack",curAttack),curDefense=parseInt(a.skill_def.replace(",","")),RX6_setValue("curDefense",curDefense),
curAttackEquip=parseInt(a.group_atk.replace(",","")),curDefenseEquip=parseInt(a.group_def.replace(",","")),c=curAttackEquip-prevAttackEquip,d=curDefenseEquip-prevDefenseEquip,c&&(h+='Equipment Attack Strength: <span class="loot">'+curAttackEquip+'</span> : <span class="good">+'+c+"</span> (was: "+prevAttackEquip+")<br>"),d&&(h+='Equipment Defense Strength: <span class="loot">'+curDefenseEquip+'</span> : <span class="good">+'+d+"</span> (was: "+prevDefenseEquip+")<br>"),prevAttackEquip=curAttackEquip,
prevDefenseEquip=curDefenseEquip,RX6_setValue("curAttackEquip",curAttackEquip),RX6_setValue("curDefenseEquip",curDefenseEquip),h&&addToLog("process Icon",h));if("oldschool"==b&&(d=$x('.//div[@class="fightV2_items_won"]/div[contains(@id,"fv2_gained_loot")]',a))&&0<d.length){var f=e="",g=0;for(iLength=d.length;g<iLength;g++)if(xpathFirst('.//div[@class="item_card_mini fake_item_card"]',d[g]))e=e?e+(", "+d[g].innerHTML.untag()):"Loot Found: "+d[g].innerHTML.untag();else if(c=xpathFirst(".//img",d[g])){var h=
c.parentNode;h&&(f=f?f+('<div class="lootItem">'+h.innerHTML+"</div>"):'Loot Found:<br><div class="lootItem">'+h.innerHTML+"</div>")}e&&addToLog("lootbag Icon",e);f&&addToLog("lootbag Icon",f)}if("newcity"==b){var d=!1,g;for(g in a){if(!isNaN(g)&&(d=!0,h=document.createElement("div"),f="Loot Found:<br>",h.innerHTML=a[g],c=xpathFirst('.//div[contains(@class,"item_card_mini")]//img',h)))c=c.parentNode,f+='<div class="lootImg">'+c.innerHTML+"</div>",xpathFirst('.//div[contains(@class,"shadow")]',h)&&
(f+="X2"),c=c.parentNode,c.hasAttribute("increaseddefense")&&colorDEBUG("increaseddefense: "+c.getAttribute("increaseddefense")),c.hasAttribute("increasedattack")&&colorDEBUG("increasedattack: "+c.getAttribute("increasedattack"));f&&addToLog("lootbag Icon",f);return d}}}
function logFightResponse(a,b,c,d,e){try{var d=!1,f,g;b||(b=a);var h=!1,l=!1,k=RX6_getValue("fightMaxAttacks",0),p=RX6_getValue("fightHealthMax",0),n=RX6_getValue("fightHealthPctMax",0),r,q=isNewCity(city)?5:1;c.fightsDone=isNaN(c.fightsDone)?q:c.fightsDone+q;isNaN(c.totalCash)&&(c.totalCash=0);isNaN(c.targetHealth)&&(c.targetHealth=0);isNaN(c.targetEstimatedHealth)&&(c.targetEstimatedHealth=0);isNaN(c.targetHealthCnt)&&(c.targetHealthCnt=0);isNaN(c.targetHealthPct)&&(c.targetHealthPct=0);isNaN(c.targetPrevHealthPct)&&
(c.targetPrevHealthPct=0);isNaN(c.targetStartHealthPct)&&(c.targetStartHealthPct=0);isNaN(c.totaldamage)&&(c.totaldamage=0);if(e)try{if(h=l=!0,e.user_fields&&e.fight_result)if(jsonPageUpdate(e),d=e.fight_result,!1!==d&&void 0!==e.fight_result.defender){if(e.fight_result.defender.is_iced||e.fight_result.defender.is_killed)c.iced=!0,l=!1;!d.isWin&&isGMChecked("fightRemoveStronger")&&(l=!1,c.toStrong=!0,DEBUG("SKIPPING the attack on "+c.name+" : LOST",cre));c.damage=parseInt(e.fight_result.defender.damage_dealt);
c.totaldamage+=c.damage;if(RX6_getValue("fnirInyhrSum",returnValue())==parseXMLResponse()){c.targetHealthPct=parseInt(e.fight_result.defender.current_health_pct);c.targetStartHealthPct||(c.targetStartHealthPct=c.targetHealthPct);n&&c.targetHealthPct>n&&(l=!1,colorDEBUG("SKIPPING the attack on "+c.name+" : lastOpponent.targetHealthPct > fightHealthPctMax - "+c.targetHealthPct+" vs "+n,cre));if(c.targetHealthPct<c.targetStartHealthPct){var t=parseInt(c.targetStartHealthPct-c.targetHealthPct);t&&(c.targetEstimatedHealth=
parseInt(100/t*c.totaldamage));p&&c.targetEstimatedHealth>p&&(2<c.targetHealthCnt&&(l=!1,colorDEBUG("SKIPPING the attack on "+c.name+" : lastOpponent.targetEstimatedHealth > fightHealthMax - "+c.targetEstimatedHealth+" vs "+p,cre)),c.targetHealthCnt++)}c.targetPrevHealthPct=c.targetHealthPct}if(d.is_power_attack){var s=xpathFirst('.//div[@id="fv2_widget_wrapper"]',a);c.powerAttack?unsafeWindow.FightV2.powerAttack(e,s):unsafeWindow.FightV2.attack(e,s);fightsWon=parseInt(d.power_attack.won);fightsLost=
parseInt(d.power_attack.lost);c.fightsDone=(fightsWon+fightsLost)*q}if(d.cash){var y=parseInt(d.cash_city)-1;c.cashGained=c.totalCash?parseInt(d.cash)-c.totalCash:parseInt(d.cash);c.totalCash=parseInt(d.cash);r=cities[y][CITY_CASH_SYMBOL]+makeCommaValue(c.cashGained)}else y=parseInt(d.cash_city)-1,r=cities[y][CITY_CASH_SYMBOL]+makeCommaValue(0);if(isGMChecked("staminaLogDetails")){var C=cities[y][CITY_CASH_SYMBOL]+makeCommaValue(c.totalCash);if(d.experience)var F=d.experience;addToLog("info Icon",
"RX6 attacked "+c.linkedName+"<br>Fights - Won : "+fightsWon+", Lost: "+fightsLost+", Cash: "+C+", Exp: "+F)}d.loot[0]&&logLootDrops(d.loot,"loot");d.socialMessageCards[0]&&logLootDrops(d.socialMessageCards,"social");e.hasOwnProperty("fightbar")&&logLootDrops(e.fightbar,"stats")}else colorDEBUG("logFightResponse fightResult === false || respJSON.fight_result.defender === undefined",cre);else colorDEBUG("logFightResponse invalid JSON response for fighting",cre)}catch(M){colorDEBUG("jsonErr: "+M,caq)}else if("fv2_widget_wrapper"==
b.id){var D=xpathFirst('.//span[@id="user_health"]');health=parseInt(D.innerHTML);var l=h=!0,B=xpathFirst('.//div[@id="fight_wrapper"]',innerPageElt);B||(B=b);var w=xpathFirst('.//div[@id="fv2_defender_was_iced" and contains(@style,"block")]',B),G=xpathFirst('.//div[@id="fv2_defender_you_iced" and contains(@style,"block")]',B);f=xpathFirst('.//div[@id="attacker_fight_status" and contains(@class,"good") and contains(text(),"Won")]',B);g=xpathFirst('.//div[@id="attacker_fight_status" and contains(@class,"bad")  and (contains(text(),"LOST") or contains(text(),"Lost"))]',
B);if(f||g){logLootDrops(b,"oldschool");g&&isGMChecked("fightRemoveStronger")&&(l=!1,c.toStrong=!0,DEBUG("SKIPPING the attack on "+c.name+" : LOST",cre));if(w||G)l=!1,c.iced=!0,G?colorDEBUG("SKIPPING the attack on "+c.name+" : fv2_defender_you_iced",caq):colorDEBUG("SKIPPING the attack on "+c.name+" : fv2_defender_was_iced",cre);var E=xpathFirst('.//td[contains(@class,"cash_icon")]',b);E&&(r=E.innerHTML.untag(),r=r.match(REGEX_CASH)?RegExp.lastMatch:r,c.totalCash+=parseCash(r));isGMChecked("staminaLogDetails")&&
(fightTxt=f?'<span class="good">Fight WON</span>':'<span class="bad">Fight LOST</span>',addToLog("process Icon","Target - "+c.linkedName+": "+fightTxt))}else colorDEBUG("logFightResponse no v2Won / v2Lost element",cre),l=!1,h=!0}else b.hasAttribute("class")&&"fight_results"==b.getAttribute("class")&&(h=l=!1);autoHeal(1);if(l&&(!canSpendStamina()||6>=ptsToNextLevel))l=!1,colorDEBUG("SKIPPING the attack on "+c.name+" : !canSpendStamina() || ptsToNextLevel <= 6",cre);RX6_getValue("fnirInyhrSum",returnValue())==
parseXMLResponse()&&(l&&k&&c.fightsDone>k)&&(l=!1,colorDEBUG("SKIPPING the attack on "+c.name+" : "+c.fightsDone+" > "+RX6_getValue("fightMaxAttacks",0),cre));l&&(c.iced||c.toStrong&&isGMChecked("fightRemoveStronger")?!1==l:(a=0,a=getStaminaMode()==STAMINA_HOW_FIGHT_LIST_BG?RX6_getValue("reattackThresholdList",0):RX6_getValue("reattackThreshold",0),(l=0==a||parseCash(r)>=a&&-1!=r.indexOf(cities[curCity][CITY_CASH_SYMBOL]))||colorDEBUG("SKIPPING the attack on "+c.name+" INVALID cashGainTxt: "+r,cre)));
if(!1!==l){var z;r=5*q;isGMChecked("staminaPowerattack")&&stamina>=r?(z=xpathFirst('.//div[@class="fv2_btncontainer"]//div[@id="fv2_button_row2"]/div[contains(@style,"block")]',b),c.powerAttack=!0,unsafeWindow.FightV2.prePowerAttack()):(z=xpathFirst('.//div[@class="fv2_btncontainer"]//div[@id="fv2_button_row1"]/div[contains(@style,"block")]',b),unsafeWindow.FightV2.preAttack(),c.powerAttack=!1);if(z){(fightv2_atkbtn=xpathFirst('.//a[contains(@class,"fightV2AttackBtn")]',z))||(fightv2_atkbtn=xpathFirst('.//a[contains(@class,"fightV2PowerAtkBtn")]',
z));if(fightv2_atkbtn){var u=fightv2_atkbtn.getAttribute("href"),u=u.replace(/click_amt=\d+/,staminaSpendStrength),A=createAjaxPage(!0);fightv2_atkbtn.setAttribute("onclick",'do_ajax("'+A+"\",'"+u+"',1);return false;");autoReload(!1,"fight box attacking");c.attackAgain=fightv2_atkbtn;Autoplay.fx=function(){clickAction=isNewCity(city)||fightv2_atkbtn.innerHTML.match(/\d/i)?"multifight":"fight";clickContext=c;clickElement(fightv2_atkbtn);colorDEBUG("autoFight - Clicked to REPEAT the "+fightv2_atkbtn.innerHTML+
" attack on "+c.name+".",cye)};Autoplay.delay=noDelay;Autoplay.start();return!0}colorDEBUG("SKIPPING the attack on "+c.name+" : fightv2_atkbtn NOT FOUND.",cre)}else colorDEBUG("SKIPPING the attack on "+c.name+" : fv2_btn_div / row INVALID / NOT FOUND.",cre)}else c.skip=!0;if(h){c.toStrong&&setFightOpponentAvoid(c);try{(d||f||g)&&logFightOutcome(c,e);if(!autoFight.revengeTarget){var v=xpathFirst('.//a[@class="close" and contains(@onclick,"CloseJS")]',B);v&&(clickElement(v),xpathFirst('.//div[@id="fv2_widget_wrapper" and contains(@style,"none")]',
innerPageElt)&&destroyByID("fv2_widget_wrapper"))}if(isGMChecked("autoGlobalPublishing")&&!timeLeftGM("askFightBoostsTimer")&&xpathFirst('.//div[@class="fv2_boost_ask_allowed" and not(contains(@style,"none"))]',B)){var O=xpathFirst('.//div[@class="fv2_boost_ask_action"]//a',B);O&&(clickElement(O),setGMTime("askFightBoostsTimer","01:00:05"))}RX6_getValue("staminaSpendHow")==getStaminaMode()&&cycleSavedList("pfightlist");randomizeStamina();Autoplay.delay=getAutoPlayDelay();return!1}catch(U){}}else return c.fightsDone&&
logFightOutcome(c,e),RX6_getValue("staminaSpendHow")==getStaminaMode()&&cycleSavedList("pfightlist"),randomizeStamina(),Autoplay.delay=getAutoPlayDelay(),!1;var K=b.innerHTML,L=K.untag();if(L.match(/you won/i)){var T=xpathFirst('.//div[@class="fightres_stats"]',b);if(T){var I=xpathFirst('.//div[@class="sexy_cash good"]',T),P=xpathFirst('.//div[@class="fightres_experience good"]',T),Q=xpathFirst('.//div[@class="fightres_damage"]',T);addToLog("yeah Icon","You"+Q.innerHTML+', gaining <span class="good">'+
I.innerHTML+'</span> and <span class="good">'+P.innerHTML+"</span>")}}else if(L.match(/you cannot fight|part of your mafia/i))c.id&&(DEBUG("Opponent ("+c.id+") is part of your mafia. Avoiding."),setFightOpponentAvoid(c));else if(L.match(/You just set/)){cycleSavedList("pautoHitOpponentList");addToLog("yeah Icon",K);isGMChecked("bgAutoHitCheck")&&setGMTime("bgAutoHitTime","01:00");var R=xpathFirst('//a[@id="fb_dialog_cancel_button"]');if(R)return Autoplay.fx=function(){clickElement(R);DEBUG("Clicked Dismissed Popup!")},
Autoplay.start(),!0}else L.match(/There is already a bounty/)||L.match(/You can\'t add/)?(cycleSavedList("pautoHitOpponentList"),isGMChecked("bgAutoHitCheck")&&setGMTime("bgAutoHitTime","01:00")):-1!=L.indexOf("too weak")?addToLog("info Icon",'<span style="color:#FF9999;">Too weak to fight.</span>'):DEBUG("Unrecognized fight response:"+L);randomizeStamina();RX6_getValue("staminaSpendHow")==getStaminaMode()&&cycleSavedList("pfightlist")}catch(Z){colorDEBUG("respError: "+Z)}return!1}
function randomizeStamina(){if(isGMEqual("staminaSpendHow",STAMINA_HOW_RANDOM)){for(var a=RX6_getValue("randomSpendModes"),b=Math.floor(Math.random()*STAMINA_HOW_ROBBING);"1"!=a[b];)b=Math.floor(Math.random()*STAMINA_HOW_ROBBING);DEBUG("Stamina Spend Mode Randomize set to : "+b+" was "+newStaminaMode);newStaminaMode=b;for(a=RX6_getValue("randomFightLocations");b==STAMINA_HOW_FIGHT_RANDOM||b==STAMINA_HOW_FIGHT_LIST;){var c=Math.floor(Math.random()*(cities.length-1));DEBUG("Fight City Randomize set to : "+
c+" was "+RX6_getValue("fightLocation"));if("1"==a[c]&&!cities[c][CITY_CLOSED]){RX6_setValue("fightLocation",c);DEBUG("Fight location set to : "+cities[c][CITY_NAME]);break}else DEBUG("Fight location did not qualify")}for(a=RX6_getValue("randomRobLocations");b==STAMINA_HOW_ROBBING;)if(c=Math.floor(Math.random()*(cities.length-1)),DEBUG("Rob City Randomize set to : "+c+" was "+RX6_getValue("robLocation")),"1"==a[c]&&!cities[c][CITY_CLOSED]){RX6_setValue("robLocation",c);DEBUG("Robbing location set to : "+
cities[c][CITY_NAME]);break}else DEBUG("Rob location did not qualify");for(a=RX6_getValue("randomHitmanLocations");b==STAMINA_HOW_HITMAN;)if(c=Math.floor(Math.random()*(cities.length-1)),DEBUG("Hitman City Randomize set to : "+c+" was "+RX6_getValue("hitmanLocation")),"1"==a[c]&&!cities[c][CITY_CLOSED]){RX6_setValue("hitmanLocation",c);DEBUG("Hitman location set to : "+cities[c][CITY_NAME]);break}else DEBUG("Hitman location did not qualify")}}
var observer=new MutationObserver(function(a){a.forEach(function(a){GM_log("innerHTML: "+a.target.outerHTML);GM_log("textContent: "+a.target.textContent);handleAjaxModified(a.target)})}),observerConfig={childList:!0};
function createAjaxPage(a,b,c){a&&(ajaxHandling=!0);var d=a?SCRIPT.ajaxIDSync:SCRIPT.ajaxIDAsync,e=document.getElementById(d);e&&(observer.disconnect(),e.parentNode.removeChild(e));e=makeElement("div",null,{id:d,style:"display: none;"});a||(ajaxAction=b,ajaxContext=c);document.getElementById("verytop").insertBefore(e,document.getElementById("verytop").firstChild);observer.observe(e,observerConfig);return d}
function handleAjaxModified(a){GM_log(a.innerHTML);observer.disconnect();window.setTimeout(function(){ajaxPageChanged(a)},400)}
function ajaxPageChanged(a){if(a){var b=a.id==SCRIPT.ajaxIDSync?!0:!1,a=a.outerHTML;observer.disconnect();var c,d;b?(c=clickAction,d=clickContext,clickContext=clickAction=void 0):(c=ajaxAction,d=ajaxContext,ajaxContext=ajaxAction=void 0);ajaxHandling=!1;if(!logJSONResponse(b,a,c,d))try{doAutoPlay()}catch(e){DEBUG("BUG DETECTED (ajaxPageChanged->doAutoPlay): "+e+". Reloading."),autoReload(!0,"error !logJSONResponse")}}}
function logJSONResponse(a,b,c,d){ajaxHandling=!1;if("goHome"==c)return!1;colorDEBUG("logJSONResponse ("+c+") default fx: goHome, delay: "+Autoplay.delay,cfu);autoReload(!1,"logJSONResponse");var e=b,e=b.untag(),f,g;try{if(IsJsonString(e))try{f=JSON.parse(e),f.hasOwnProperty("data")?"object"==typeof f.data?(colorDEBUG("respData = respJSON.data"),g=f.data):g=JSON.parse(f.data):colorDEBUG("check respJSON - does not have respData"),jsonPageUpdate(f)}catch(h){colorDEBUG("responseText is invalid JSON <br>"+
h)}if(("collect take"==c||"quick withdraw"==c)&&!isNaN(d))d=parseInt(d),cashElt=document.getElementById("user_cash_"+cities[d][CITY_ALIAS]);switch(c){case "districtBoss":try{if(f.hasOwnProperty("data")){var l=g.message,k=l.damage,p="";l.bossDefeated?(p="RX6 killed the district Boss.",bossFight=!1):(p=g.consumable?'RX6 used a "'+fightBoosts[g.consumable]+'" to attack the district Boss, ':"RX6 attacked the district Boss, ",p+="dealing "+k.toBoss+" damage, boss health left: "+g.bossHealth);l.success?
addToLog("yeah Icon",p):addToLog("omg Icon",p)}else bossFight=!1}catch(n){colorDEBUG("districtBoss: "+n,cre)}return!1;case "ask parts":return DEBUG("logJSONResponse for ask parts"),!1;case "autoStatAllocation":return DEBUG("autoStatAllocation results "+e),!1;case "load battlepage":return!1;case "collect slotbonus":slotBonus=0;addToLog("info Icon","Slot Bonus Collect Result: "+g.json_data.dialog_message+" itemName:  "+g.json_data.itemName);break;case "collect slot":slotSpins=g.json_data.freeSpins;
slotBonus=g.json_data.bonusMeter;e="";e=g.json_data.isJackpot?e+("You won on the slots! Payout: "+g.json_data.payout+"  jackpotWinAmt: "+g.json_data.jackpotWinAmt):e+("You did not win on this slot pull.  Remaining Spins: "+slotSpins);addToLog("info Icon",e);DEBUG("Result: "+g.json_data.result+" bonusMeter:"+g.json_data.bonusMeter+" payout:"+g.json_data.payout+" isJackpot:"+g.json_data.isJackpot+" jackpotWinAmt:"+g.json_data.jackpotWinAmt+" freeSpins"+g.json_data.freeSpins);break;case "autoStatReward":return DEBUG("autoStatReward results "+
e),!1;case "autoUpgradeNY_getBalance":var r=f.user_fields.user_bank_balance+"";RX6_setValue("userBankBalance",r);addToLog("updateGood Icon","Current NY Bank Balance: $"+r);return!1;case "autoUpgradeNY":var q=JSON.stringify(g),e="",r=f.user_fields.user_bank_balance+"";RX6_setValue("userBankBalance",r);if(-1!=q.indexOf("description")){if(e=g.description,-1!=e.indexOf("You have purchased")){var t=GM_getIntValue(d,999);t++;RX6_setValue(d,t);addToLog("updateGood Icon",e+". Current Level: "+t+'. Current NY Bank Balance: <span class="good">$'+
makeCommaValue(r)+"</span>.")}}else addToLog("updateBad Icon",e+'. Current NY Bank Balance: <span class="good">$'+makeCommaValue(r)+"</span>."),RX6_setValue(d,999);goPropertyNav();return!1;case "icecheck profile":var s=!/is already dead or too weak!/.test(e);d&&(d.setAttribute("style","background: "+(s?"green;":"red;")),d.setAttribute("title",(s?"Target is alive":"Target is iced")+", click to refresh."),d.addEventListener("click",customizeProfile,!1),DEBUG("Successfully set target status: "+(s?"alive.":
"iced.")));return!1;case "fight":var y=xpathFirst('.//div[@id="fv2_widget_wrapper"]',innerPageElt);return logFightResponse(innerPageElt,y,d,0,f);case "multifight":return y=xpathFirst('.//div[@id="fv2_widget_wrapper"]',innerPageElt),logFightResponse(innerPageElt,y,d,1,f);case "keelBandit":var C=".",F="RX6 ",M="yeah Icon";if(IsJsonString(e)){colorDEBUG("keelBandit respData:<br>"+JSON.stringify(g));if(g.result){var F=F+"eliminated the ",D=document.createElement("div");D.innerHTML=g.info.reward;var B=
D.innerHTML.untag();B.match(/span>(\d+)<span/)&&(C=' and gained <span class="good>"'+RegExp.$1+"experience </span>.");addToLog("lootbag Icon","keelBandit:<br>"+B)}else M="omg Icon",F+="failed to eliminate the ";F+='<span class="bad">'+d[1]+"</span> on ";F=g.hasOwnProperty("info")&&g.info.hasOwnProperty("jobResult")&&g.info.jobResult.hasOwnProperty("name")?F+('<span class="job">'+g.info.jobResult.name+"</span>"):F+('<span class="job">'+d[0]+"</span>");addToLog(M,F+C)}else addToLog("yeah Icon",'RX6 eliminated the <span class="bad">'+
d[1]+'</span> on <span class="job">'+d[0]+"</span>.");Autoplay.fx=goHome;Autoplay.delay=noDelay;Autoplay.start();return!1;case "newcity job":if(IsJsonString(e))xpathFirst('.//a[contains(@id, "btn_dojob")]',d),isGMChecked("TestChanges")&&RX6_setValue("jobResult",JSON.stringify(f)),logJobResponse(f.jobResult);else{g=!1;var w,G,E,z,u;colorDEBUG("IsJsonString(responseText)",cre);colorDEBUG(e);w=xpathFirst(".//h4",d).innerHTML.untag().trim();(G=xpathFirst('.//ul[contains(@class,"pays")]//li[@class="experience"]',
d))&&(G=parseInt(G.getAttribute("base_value")));(E=xpathFirst('.//ul[contains(@class,"pays")]//li[contains(@class,"cash_icon_jobs")]',d))&&parseInt(E=E.getAttribute("base_value"));(z=xpathFirst('.//ul[contains(@class,"uses")]//li[contains(@class,"cash_icon_jobs")]',d))?(z=parseInt(z.getAttribute("base_value")),p='RX6 performed <span class="job">'+w+'</span>, earning <span class="good">'+G+' experience</span>. RX6 spent <span class="bad">'+cities[city][CITY_CASH_SYMBOL]+makeCommaValue(z)+"</span>."):
p='RX6 performed <span class="job">'+w+'</span>, earning <span class="good">'+cities[city][CITY_CASH_SYMBOL]+makeCommaValue(E)+'</span> and <span class="good">'+G+" experience</span>.";p&&addToLog("process Icon",p);u=getBrazilJobMastery(d);100<=u&&(g=!0,u=100);DEBUG("Job "+w+" is "+u+"% mastered.");g&&!isGMChecked("repeatJob")&&goJobsNav()}return!1;case "newcity buy":try{if(void 0!==typeof f.data.impulseBuy.message){var A=f.data.impulseBuy.message;DEBUG("newcity buy jobMessage:"+A);A=A.wipe();A.match(/You bought:(.+)/)?
addToLog("info Icon",'RX6 bought these item(s): <span class="loot">'+RegExp.$1+"</span>."):addToLog("info Icon",A)}}catch(v){colorDEBUG("Error no MessageResult: "+v,cre)}return!1;case "vegas parts":return setGMTime("askVegasPartsTimer","2 hours"),DEBUG("Parsed JSONResponse for clicking askVegasParts. Timer Reset for 2 hours."),!1;case "play slots":return setGMTime("askPlaySlotsTimer","4 hours"),DEBUG("Parsed JSONResponse for clicking AskPlaySlots. Timer Reset for 4 hours."),!1;case "brazil parts":return setGMTime("askBrazilPartsTimer",
"2 hours"),DEBUG("Parsed JSONResponse for clicking AskBrazilParts. Timer Reset for 2 hours."),!1;case "chicago parts":return setGMTime("askChicagoPartsTimer","2 hours"),DEBUG("Parsed JSONResponse for clicking AskChicagoParts. Timer Reset for 2 hours."),!1;case "london parts":return setGMTime("askLondonPartsTimer","2 hours"),DEBUG("Parsed JSONResponse for clicking AskLondonParts. Timer Reset for 2 hours."),!1;case "save properties":return!1;case "build limited":var O=d.propCount,U=cityProperties[O][ctPropName],
C=cityProperties[O][ctPropTimer];""!=e?(addToLog("process Icon",U+": "+e),setGMTime(C,"18 hours")):(addToLog("warning Icon",U+": RX6 can not craft yet."),setGMTime(C,"1 hour"));return!1;case "build other":var O=d.propCount,K=cityProperties[O][ctGMId],U=cityProperties[O][ctPropName],C=cityProperties[O][ctPropTimer],F=cities[cityProperties[O][ctPropCity]][CITY_NAME];DEBUG("Make "+F+": "+d.itemName+" - "+d.buildType+".");var B=D=0,L=g.purchase_message,L=L.replace(/port/gi,U);addToLog("lootbag Icon",
L);if(e.match(/cannot be purchased/i))return DEBUG(d.itemName+" can not be build, disabling"),RX6_setValue(K,0),!1;if(e.match(/available_purchases(.+?)(\d+?),/i)&&(D=parseFloat(RegExp.$2),DEBUG("Available Purchases Left: "+RegExp.$2),D))return!1;e.match(/purchase_refresh_rate(.+?)(\d+?),/i)&&(D=parseFloat(RegExp.$2),DEBUG("Refresh Rate: "+RegExp.$2));e.match(/last_purchase_time_stamp(.+?)(\d+?),/i)&&(B=parseFloat(RegExp.$2),DEBUG("timeStamp: "+RegExp.$2));if(D&&B)if(g=B+D,M=Math.round((new Date).getTime()/
1E3),DEBUG("Current: "+M),M<g){var T=parseFloat(g)-parseFloat(M)+10;DEBUG("timeLeft: "+T);var I=secondsToHMS(T);1==I?I+=" hour":I+=" hours";setGMTime(C,I);DEBUG("Parsed JSONResponse for "+F+" Item. Timer "+C+" reset for "+I+".")}else setGMTime(C,"2 hours"),DEBUG("Parsed JSONResponse for "+F+" Item. Timer reset for 2 hours.");else setGMTime(C,"2 hours"),DEBUG("Parsing JSONResponse for "+F+" Item FAILED. Timer reset for 2 hours.");return!1;case "collect take":var P=JSON.stringify(g),e="",e=-1!=P.indexOf("description")?
g.description:g.success_message;if(e.match(/collected (.+?) from your properties/i)){var Q='RX6 collected <span class="money">'+RegExp.$1+"</span> from your properties.";addToLog(cities[d][CITY_CASH_CSS],Q)}if(e.match(/you have also received:/i)){var R=g.success_image_names;if(0<R.length){Q="You also received : ";collectHelp="";i=0;for(iLength=R.length;i<iLength;i++)Q+=collectHelp+R[i].untag(),collectHelp=i==iLength-1?", ":" and ";addToLog(cities[d][CITY_CASH_CSS],Q)}}switch(d){case NY:if(-1!=P.indexOf("shopname")&&
-1!=P.indexOf("vehicleamount")&&-1!=P.indexOf("vehiclename")){var Z=g.shopname,J=g.vehicleamount,S=g.vehiclename;if(0<J.length){Q="RX6 also collected ";collectHelp="";i=0;for(iLength=J.length;i<iLength;i++)Q+=collectHelp+'<span class="property">'+J[i]+'</span> <span class="loot">'+S[i]+'</span> items from your <span class="property">'+Z[i]+"</span>",collectHelp=i==iLength-1?", ":" and ";addToLog(cities[d][CITY_CASH_CSS],Q)}}}setGMTime("takeHour"+cities[d][CITY_NAME],"1 hour");return!1;case "quick withdraw":var H=
"<br>Remaining Bank Balance: "+cities[d][CITY_CASH_SYMBOL]+makeCommaValue(void 0);/You Withdrew/i.test(g.success_message)?addToLog("cashVegas Icon",g.success_message+H):(addToLog("warning Icon","Disabling autoMission:<br>You don't have enough money to do "+missions[RX6_getValue("selectMission",1)][MISSION_NAME]+"."+H),RX6_setValue("autoMission",0),update_nrg_stam());return!1;case "marketplace":var V=xpathFirst('.//div[@id="responseContainer"]');V||(V=makeElement("div",document.getElementById("final_wrapper"),
{id:"responseContainer",style:"display:none;"}));V.innerHTML=b;var W=makeElement("div",null,{id:"marketInfo",style:"clear:both; width: 745px;","class":"clearfix"}),da=makeElement("div",W,{id:"FightClubModule",style:"float: left; width: 735px;","class":"empire_module_header"}),aa=makeElement("div",da,{"class":"empire_module_title"});makeElement("span",aa).appendChild(document.createTextNode("Fight Club"));var ea=xpathFirst('.//img[contains(@src,"victory_icon.gif")]',V);ea&&(vcElt=ea.parentNode)&&(makeElement("div",
aa,{style:"float:right;margin-right:15px"}).innerHTML+=vcElt.innerHTML);var fa=xpathFirst('.//div[@class="fightmastery_meter"]',V);fa&&(makeElement("div",aa,{"class":"fightmastery_meter",style:"float:right;margin-right:45px;margin-top:-1px;"}).innerHTML+=fa.innerHTML);var ba=xpathFirst('.//div[@id="full_list"]',V);if(ba){var ca=makeElement("div",da,{style:"width: 729px; padding: 5px; float: none;","class":"playerupdate_box"}),Y=makeElement("div",ca),X=$x('.//div[contains(@style,"relative") and contains(.,"Energy Refill")]',
ba);if(0<X.length){for(i=X.length-1;0<=i;i--)secondElt=X[i].firstChild.nextSibling,fourthElt=X[i].firstChild.nextSibling.nextSibling.nextSibling,itemListElt=makeElement("div",null,{style:"float: left; width: 340px;height:125px;border:1px dotted #484848;padding:10px;"}),Y.insertBefore(itemListElt,Y.firstChild),itemListElt.innerHTML=secondElt.innerHTML+fourthElt.innerHTML;makeElement("div",W,{style:'float: left; background: url("http://mwfb.static.zgncdn.com/mwfb/graphics/empire/shadow_upper_right.png") no-repeat scroll 0% 0% transparent; height: 8px; width: 8px;'});
makeElement("div",W,{style:'float: left; background: url("http://mwfb.static.zgncdn.com/mwfb/graphics/empire/shadow_right_side.png") repeat-y scroll 0% 0% transparent; height: 125px; width: 8px;'});makeElement("div",W,{style:'float: left; background: url("http://mwfb.static.zgncdn.com/mwfb/graphics/empire/shadow_lower_left.png") repeat scroll 0% 0% transparent; height: 8px; width: 8px;'});makeElement("div",W,{style:'float: left; background: url("http://mwfb.static.zgncdn.com/mwfb/graphics/empire/shadow_bottom.png") repeat scroll 0% 0% transparent; height: 8px; width: 727px;'});
makeElement("div",W,{style:'float: left; background: url("http://mwfb.static.zgncdn.com/mwfb/graphics/empire/shadow_lower_right.png") repeat scroll 0% 0% transparent; height: 8px; width: 8px;'})}}d.appendChild(W);return!1;default:return colorDEBUG('BUG DETECTED: Unrecognized JSON action "'+c+'".<br>'+e),!1}}catch(ga){return DEBUG("Exception (logJSONResponse): "+ga+", autoplay: "+a+", action: "+c),colorDEBUG("Exception (logJSONResponse): "+ga+", autoplay: "+a+", action: "+c+", context: "+d+", response: <br>"+
b),!1}}
function logResponse(a,b,c){if("goHome"==b)return!1;var d;Autoplay.fx=goHome;Autoplay.delay=getAutoPlayDelay();colorDEBUG("logResponse ("+b+") default fx: goHome, delay: "+Autoplay.delay,cfu);if("fight"==b||"multifight"==b){autoReload(!1,"logResponse - fight");var e=xpathFirst('.//div[@id="fv2_widget_wrapper"]',a);e||(e=xpathFirst('.//div[@class="fight_results"]',a));if(!e&&RX6_getValue("staminaSpendHow")==getStaminaMode())return cycleSavedList("pfightlist"),!1;switch(b){case "fight":return logFightResponse(innerPageElt,e,
c,0);case "multifight":return logFightResponse(innerPageElt,e,c,1)}}if("load clan"==b&&(DEBUG("Are we on the clan page we want to be on?"),onClanNav(RX6_getValue("AutoBattleClanID",0))))if(DEBUG("Looking for Challenge Link"),e=xpathFirst('.//a[contains(@href,"xw_controller=epicBattle&xw_action=challengePop")]',a))DEBUG("We found the challenge button, clicking it"),setGMTime("autoBattleTimer","60:00"),clickAction="battlePop",clickElement(e);else return DEBUG("No Challenge Popup found check again in 10 minutes"),
setGMTime("autoBattleTimer","10:00"),Autoplay.delay=getAutoPlayDelay(),Autoplay.start(),!0;if("load battlepage"==b)return!1;if("load battlecollect"==b&&onBattlePage(1))return DEBUG("Looking for Battle Collect Link"),(e=xpathFirst('.//a[contains(@onclick,"xw_controller=epicBattle&xw_action=getResults") and contains(.,"Collect")]'))?(DEBUG("Found a Battle Collect link clicking it"),setGMTime("autoBattleCollectTimer","05:00"),clickElement(e)):(DEBUG("No Battle Collect link found"),setGMTime("autoBattleCollectTimer",
"60:00")),Autoplay.delay=getAutoPlayDelay(),Autoplay.start(),!0;d||(d=xpathFirst('.//div[@id="default_id_box"]',a));d||(d=xpathFirst('.//div[contains(@class,"message_body")]',a));d||(d=xpathFirst('.//div[@class="job_results"]',a));d||(d=xpathFirst('.//div[contains(@class,"job_controller")]',contentRoweElt));d||(d=xpathFirst('.//div[@id="msg_box_div_1"]',a));d||(d=xpathFirst('.//div[@id="mbox_generic_1"]',a));d||(d=xpathFirst('.//div[@id="bank_messages"]',appLayoutElt));d||(d=xpathFirst('.//div[@id="hospital_message"]',
appLayoutElt));d||(d=xpathFirst('.//div[@id="'+c+'" and @class="rob_slot"]',a));d||(d=xpathFirst('.//div[@class="rob_board"]',a));d||(d=xpathFirst('.//div[@class="chop_build_final"]',appLayoutElt));d||(d=xpathFirst('.//table[@class="messages"]',a));if("withdraw"==b&&c)return autoBankWithdraw(c),Autoplay.start(),!0;if(!d){if("load clan"==b||"load battlecollect"==b||"battlePop"==b)return!0;if("autohit"==b)return!1;if("fight"==b||"multifight"==b)return colorDEBUG(" we have passed all message boxes but have action (multi)fight  ",
cbl),RX6_getValue("staminaSpendHow")==getStaminaMode()&&cycleSavedList("pfightlist"),!1;d=a}skipStaminaSpend=!1;var f=d?d.innerHTML:"",e=f.untag(),g;switch(b){case "autohit":case "fight":return e=xpathFirst('.//div[@id="fv2_widget_wrapper"]',innerPageElt),logFightResponse(innerPageElt,e,c,0);case "multifight":return e=xpathFirst('.//div[@id="fv2_widget_wrapper"]',innerPageElt),logFightResponse(innerPageElt,e,c,1);case "load battlecollect":DEBUG("We have a load battlecollect message box to handle.. doing nothing..");
break;case "keelBandit":break;case "newcity job":colorDEBUG("old school new city job");break;case "autoStatAllocation":DEBUG("autoStatAllocation results");break;case "autoStatReward":DEBUG("autoStatReward results");break;case "autoRob":if(isGMChecked("fastRob")){randomizeStamina();Autoplay.fx=goRobbingTab;Autoplay.delay=noDelay;Autoplay.start();break}else return logRobResponse(c);case "operationsTask":n=!1;if(opsInfo=getOperationsInfo(c,c.slot,"result"))opsInfo.taskFailed?(e='RX6 failed to performed <span class="job">'+
opsInfo.name+"/"+opsInfo.taskName+"</span>.",addToLog("updateBad Icon",e+".")):(e='RX6 performed <span class="job">'+opsInfo.name+" / "+opsInfo.taskName+'</span>, gaining <span class="good">'+opsInfo.xp+" experience</span>",opsInfo.cash&&(e+=' and <span class="good">'+cities[opsInfo.cashCity][CITY_CASH_SYMBOL]+opsInfo.cash+"</span>"),opsInfo.cashNeeded&&(e+='. RX6 used <span class="bad">'+cities[opsInfo.cashNeededCity][CITY_CASH_SYMBOL]+opsInfo.cashNeeded+"</span>"),DEBUG("Operation is "+opsInfo.taskMastery+
" % Mastered"),addToLog("process Icon",e+"."));break;case "job":try{var h;xpGainElt=(xpGainElt=xpathFirst('.//dd[@class="message_experience"]',d))?xpGainElt:xpathFirst('.//dd[@class="experience"]',d);var l="job"+c[0];jobName=c[1];var k=xpathFirst('.//div[@id="'+l+'"]',a);h=xpathFirst('.//div[@id="'+l+'"]//div[@class="mastery_bar"]//p',a);var l="",p=0,n=!1;h&&"0.0"!=RX6_getValue("selectTier","0.0")&&(p=parseInt(h.innerHTML.digitize()),DEBUG(" Job "+jobName+" is "+p+"% Mastered."),100==l&&(l=". Job 100% Mastered",
n=!0));if(xpGainElt){var r=parseInt(xpGainElt.innerHTML);if(r){var q=xpathFirst('.//div[@class="message_experience"]',d);q&&(r+="+"+parseInt(q.innerHTML));r+=" Experience"}g='RX6 performed <span class="job">'+jobName+'</span> earning <span class="good">'+r+"</span>";var f="",t=$x('.//dd[@class="message_cash"]',d);for(i=0;i<t.length;i++)f+=t[i].innerHTML;if(0==t.length&&(cashGainElt=xpathFirst('.//dd[contains(@class,"cash_icon")]',d)))f=cashGainElt.innerHTML,f=f.match(REGEX_CASH)?cities[city][CITY_CASH_SYMBOL]+
RegExp.lastMatch:cities[city][CITY_CASH_SYMBOL]+f;f.match(/(.+?)\s+?\(You now have/i)&&(f=RegExp.$1);f&&(g+=' and <span class="good">'+f+"</span>");var s=xpathFirst('.//dt[@class="message_cash bad"]',d);s||(s=xpathFirst('.//div[@class="job_uses"]//dd[contains(@class,"cash_icon")]',d));if(s){var y=s.innerHTML.untag();y.match(/(.+?)\s+?Bribes/)&&(y=RegExp.$1);g+=', spending <span class="bad">'+cities[city][CITY_CASH_SYMBOL]+y+"</span>"}l&&(g+=l);g+=".";if(-1!=e.indexOf("you spent no energy")||-1!=e.indexOf("No energy cost")||
-1!=e.indexOf("You Spent: 0"))g+=' <span class="good">Wheelman Bonus</span>: RX6 spent no energy on this job.';addToLog("process Icon",g);g="";var C=xpathFirst('.//dd[@class="stamina"]',d);C&&(g+=" Stamina spent: "+C.innerHTML.untag()+".");var F=xpathFirst('.//dd[@class="energy"]',d);F&&(nrgSpendTxt=F.innerHTML.untag(),g=-1!=nrgSpendTxt.indexOf("Mastery")?g+(" "+F.innerHTML.untag()+"."):g+(" Energy spent: "+F.innerHTML.untag()+"."));g&&DEBUG(g);jobCombo(a);h?jobLoot(k):jobLoot(a);e.match(/.*(An* .+ was added to your inventory[^.]*.)/i)&&
addToLog("lootbag Icon",RegExp.$1);var M=parseInt(xpGainElt.innerHTML),D=GM_getIntValue("autoAskJobHelpMinExp");if(isGMChecked("autoAskJobHelp")&&(!D||M>=D)){var B=xpathFirst('.//div[@class="message_buttons"]//span[@class="sexy_jobhelp"]',d);B||(B=xpathFirst('.//div[@class="message_buttons"]//a[@class="sexy_button_new short white sexy_call_new" and contains(.,"Let Friends Get a Bonus")]',d));if(B)return Autoplay.fx=function(){clickElement(B);addToLog("process Icon",'Asked for help with <span class="job">'+
missions[RX6_getValue("selectMission")][MISSION_NAME]+"</span>.")},Autoplay.start(),!0}}else-1!=e.indexOf("You are not high enough level to do this job")?(addToLog("warning Icon","You are not high enough level to do "+missions[RX6_getValue("selectMission",1)][MISSION_NAME]+"."),addToLog("warning Icon","Job processing will stop"),RX6_setValue("autoMission",0),update_nrg_stam()):-1!=e.indexOf("Success")?addToLog("process Icon",f):-1!=e.indexOf("Missing")?getJobRowItems(jobName)&&(DEBUG("RX6 needs some items to perform jobid="+
jobid+" / selectMission="+RX6_getValue("selectMission",1)),jobid!=RX6_getValue("selectMission",1)&&(Autoplay.fx=autoMission)):DEBUG("Unrecognized job response.");n&&(Autoplay.fx=goJobsNav);Autoplay.start();break}catch(w){alert(w)}break;case "hitman":if(-1!=e.indexOf("someone else took out")){DEBUG(f);break}a=-1!=e.indexOf("You knocked out");if(-1!=e.indexOf("You WON")){if(e.match(/gained.*?([A-Z]*?\$|\u00A2|\u00A3)([\d,]*\d)/i),g=RegExp.$1+RegExp.$2,f=e.match(/\d+\s+experience\s+points?/i),addToLog("yeah Icon",
"RX6 hit "+linkToString(c.profile,"user")+' and <span class="good">WON</span>. You gained <span class="good">'+g+'</span> and <span class="good">'+f+"</span>."),g=parseCash(g),RX6_setValue("hitmanWinCountInt",RX6_getValue("hitmanWinCountInt",0)+1),RX6_setValue("hitmanWinDollarsInt",String(GM_getIntValue("hitmanWinDollarsInt",0)+g)),RX6_setValue("totalExpInt",RX6_getValue("totalExpInt",0)+parseInt(f)),RX6_setValue("totalWinDollarsInt",String(GM_getIntValue("totalWinDollarsInt",0)+g)),RX6_setValue("cashWinsNY",
String(GM_getIntValue("cashWinsNY",0)+g)),!a&&canSpendStamina()&&6<ptsToNextLevel){var G;isGMChecked("staminaPowerattack")&&(G=xpathFirst('.//a[contains(.,"Power Attack")]',d));G||(G=xpathFirst('.//a[contains(.,"Attack Again")]',d));if(G)return Autoplay.fx=function(){clickAction=b;clickContext=c;clickElement(G);DEBUG("Clicked to repeat the hit on "+clickContext.name+" ("+clickContext.id+").")},isGMChecked("noStats")||updateLogStats(STAMINA_HOW_HITMAN),Autoplay.delay=noDelay,Autoplay.start(),!0}}else-1!=
e.indexOf("You LOST")?(e.match(/lost.*?([A-Z]*?\$|\u00A2|\u00A3)([\d,]*\d)/i),d=RegExp.$1+RegExp.$2,g="RX6 hit "+linkToString(c.profile,"user")+' and <span class="bad">LOST</span>. You lost <span class="bad">'+d+"</span>.",d=parseCash(d),RX6_setValue("hitmanLossCountInt",RX6_getValue("hitmanLossCountInt",0)+1),RX6_setValue("hitmanLossDollarsInt",String(GM_getIntValue("hitmanLossDollarsInt",0)+d)),RX6_setValue("totalLossDollarsInt",String(GM_getIntValue("totalLossDollarsInt",0)+d)),RX6_setValue("fightLoss$NY",
String(GM_getIntValue("fightLoss$NY",0)+d)),c.id&&(setHitmanOpponentAvoid(c),g+=" Avoiding."),addToLog("omg Icon",g)):-1!=e.indexOf("This player is currently part of your mafia")?c.id&&setHitmanOpponentAvoid(c):DEBUG(f);-1!=e.indexOf("You were snuffed")&&addToLog("updateBad Icon",'You <span class="bad">DIED</span>.');a&&(c.id&&addSavedListItem("hitmanListKilled",c.id,100),e="",c.payerFamily&&(e=linkToString(opponent.payerFamily,"user")+" "),c.payerName&&(e=linkToString(opponent.payerName,"user")),
addToLog("killedMobster Icon",'RX6 <span class="bad">KILLED</span> '+linkToString(c.profile,"user")+' and collected the <span class="money">'+c.bounty+"</span> bounty set by "+e+"."),RX6_setValue("hitmanWinCountInt",RX6_getValue("hitmanWinCountInt",0)+1),RX6_setValue("hitmanWinDollarsInt",String(GM_getIntValue("hitmanWinDollarsInt",0)+parseCash(c.bounty))),RX6_setValue("totalWinDollarsInt",String(GM_getIntValue("totalWinDollarsInt",0)+parseCash(c.bounty))),RX6_setValue("cashWinsNY",String(GM_getIntValue("cashWinsNY",
0)+parseCash(c.bounty))));isGMChecked("noStats")||updateLogStats(STAMINA_HOW_HITMAN);randomizeStamina();break;case "war":if(-1!=e.indexOf("Target user is not a friend")||-1!=e.indexOf("Target user does not exist"))removeSavedListItem("autoWarTargetList",c.target_id),addToLog("warning Icon","Invalid war target (id="+c.target_id+"). Removing from list.");else if(-1!=e.indexOf("is already at war with someone else"))2==RX6_getValue("warMode",0)?(cycleSavedList("autoWarTargetList"),addToLog("info Icon",
f.split(".")[0]+". Cycling warlist.")):addToLog("info Icon",f.split(".")[0]+". Getting new target.");else if(-1!=e.indexOf("You successfully betrayed")){addToLog("omg Icon",f.split("<br><br>")[0]+"</div>");break}else if(-1!=e.indexOf("You successfully declared war"))cycleSavedList("autoWarTargetList"),addToLog("yeah Icon",f);else if(-1!=e.indexOf("WON")||-1!=e.indexOf("LOST"))d=-1!=e.indexOf("LOST")?"omg Icon":"yeah Icon",-1!=e.indexOf("to winning this war.")&&addToLog(d,f.split("to winning this war.")[0]+
"to winning this war.</div>");helpWar&&(RX6_setValue("logPlayerUpdatesCount",1+RX6_getValue("logPlayerUpdatesCount",0)),helpWar=!1);setGMTime("warTimer","00:00");Autoplay.fx=goWarTab;Autoplay.start();return!0;case "stats":if(e.match(/You just upgraded your (\w+) by (\d+)/i)){e=RegExp.$1;d=eval(e.toUpperCase()+"_STAT");f=e.toLowerCase()+" Icon";g=isNaN(RegExp.$2)?1:parseInt(RegExp.$2);RX6_setValue("nextStat",(d+1)%4);switch(d){case ATTACK_STAT:curAttack+=g;break;case DEFENSE_STAT:curDefense+=g;break;
case HEALTH_STAT:maxHealth+=g;break;case ENERGY_STAT:maxEnergy+=g;break;case STAMINA_STAT:maxStamina+=g}addToLog(f,'RX6 increased your <span style="color:#885588;">'+e+'</span> by <span style="color:#885588;">'+g+"</span> point(s).")}else DEBUG("Failed to increment stats.");break;case "energypack":addToLog("energyPack Icon",'Used an <span class="good">Energy Pack</span>.');energyPackElt=void 0;DEBUG('Unrecognized response for "energypack" action : '+f);break;case "help":var E=xpathFirst('.//a[contains(.,"Help ")]',
d);if(E)return Autoplay.fx=function(){clickElement(E);clickAction="help";clickContext=c},Autoplay.delay=getAutoPlayDelay(),Autoplay.start(),!0;RX6_setValue("logPlayerUpdatesCount",1+RX6_getValue("logPlayerUpdatesCount",0));g=linkToString(xpathFirst('.//a[contains(@onclick,"xw_controller=stats&xw_action=view")]',d),"user");c&&!g&&(g=c.user);-1!=e.indexOf("not your friend")||-1!=e.indexOf("You need to be friends")||-1!=e.indexOf("to help on a job.")?addToLog("info Icon","Failed to help"+(g?" "+g:"")+
"with job. Reason: not friends."):-1!=e.indexOf("You are too late")?addToLog("info Icon","You are too late to help "+(g?" "+g:"")+" with this job."):-1!=e.indexOf("already helped")?addToLog("info Icon","Already helped "+g+" with this job."):-1!=e.indexOf("You received")||-1!=e.indexOf("You helped")?(d=e.match(REGEX_CASH),f=0,e.match(/(\d+)\s+experience\s+points?/i)&&(f=parseInt(RegExp.$1)),-1!=e.indexOf("Special Bonus")&&(e=e.split("gained a ")[1],addToLog("lootbag Icon",'Found a <span class="loot">'+
e.split(".<span")[0]+"</span> while helping on a job.")),g='You received <span class="good">'+d+'</span> and <span class="good">'+f+" experience</span> for helping "+g+" complete the job.",RX6_setValue("passivetotalJobExpInt",GM_getIntValue("passivetotalJobExpInt",0)+f),addToLog("updateGood Icon",g),isGMChecked("noStats")||updateLogStats()):-1!=e.indexOf("25 friends")?addToLog("info Icon","Failed to help"+(g?" "+g:"")+" with job. Reason: already helped 25 friends for the day in that city."):addToLog("info Icon",
"WARNING: Not sure what happened when trying to help"+(g?" "+g:"")+"."+(c?" "+c.help:"")+" Perhaps you interfered by clicking on something?");Autoplay.start();return!0;case "help burners":if(E=xpathFirst('.//a[contains(.,"Accept")]',d))return Autoplay.fx=function(){clickElement(E);clickAction="help burners";clickContext=c},Autoplay.delay=getAutoPlayDelay(),Autoplay.start(),!0;RX6_setValue("logPlayerUpdatesCount",1+RX6_getValue("logPlayerUpdatesCount",0));addToLog("info Icon",e);Autoplay.start();return!0;
case "help parts":if(E=xpathFirst('.//a[contains(.,"Send Item")]',d))return Autoplay.fx=function(){clickElement(E);clickAction="help parts";clickContext=c},Autoplay.delay=getAutoPlayDelay(),Autoplay.start(),!0;DEBUG("Parsing parts help.");RX6_setValue("logPlayerUpdatesCount",1+RX6_getValue("logPlayerUpdatesCount",0));-1!=e.indexOf("You sent ")&&addToLog("info Icon","RX6 sent "+f.split("You sent ")[1].split("</div>")[0]);Autoplay.start();return!0;case "withdraw":e.match(/withdrew/i)?addToLog(cities[city][CITY_CASH_CSS],
f):DEBUG(f);(e=xpathFirst('//div[@id="bank_popup"]'))&&e.parentNode&&closePopup(e.parentNode,"Bank Popup");break;case "buy item":addToLog("info Icon",f.untag());break;case "newcity buy":addToLog("info Icon","Brazil Items bought");break;case "buy property":addToLog("info Icon",f);break;case "crew collection":addToLog("info Icon",f);break;case "build item":d=c.propCount;e=cityProperties[d][ctPropName];d=cityProperties[d][ctPropTimer];/You cannot craft/i.test(f)||/You do not have/i.test(f)||/You need a higher/i.test(f)?
(f=e+": "+f,setGMTime(d,"1 hour"),addToLog("warning Icon",f)):(setGMTime(d,"18 hours"),f.match(/You got (.+?)\./)?(e='RX6 built <span class="loot">'+RegExp.$1+"</span>.",f.match(/You gained:(.+?) close/)&&(e+=" You gained "+RegExp.$1+"."),addToLog("lootbag Icon",e)):addToLog("lootbag Icon",f));break;default:colorDEBUG('BUG DETECTED: Unrecognized action "'+b+'".',cre),DEBUG("Unrecognized Action :"+f)}return!1}
function closePopup(a,b){if(!a)return DEBUG("Can not close "+b+" : popupElt undefined !"),!1;var c=document.getElementById("fb_dialog_cancel_button");c&&(clickElement(c),DEBUG("Skipped "+b+" popup: "+a.id+"."));if(a.parentNode)return a.parentNode.removeChild(a),!0;(c=xpathFirst('.//a[@class="pop_close"]',a))||(c=xpathFirst('.//a[@class="close"]',a));c||(c=xpathFirst('.//a[@class="sexy_button_new medium black skip" or contains(.,"Cancel")]',a));c||(c=xpathFirst('.//a[@class="mw_new_ajax pop_close"]',
a));c&&(clickElement(c),DEBUG("Got rid of "+b+" popup: "+a.id+"."));return!0}function showPopups(a){if(a&&0<a.length)for(var b=0,c=a.length;b<c;++b)a[b].hasAttribute("class")&&(-1==a[b].getAttribute("class").indexOf("pop_bg")&&!a[b].getAttribute("opened")&&0<a[b].innerHTML.length&&a[b].scrollWidth?(a[b].setAttribute("style","display: block;"),a[b].setAttribute("opened","yes")):("yes"!=a[b].getAttribute("opened")||!a[b].innerHTML.length)&&a[b].setAttribute("style","display: none;"))}
function ignoreAllGifts(){var a=xpathFirst('.//input[@id="ignoreAllTxt"]'),b;a&&(b=a.value);var c=xpathFirst('.//input[@id="ignoreAllQty"]'),d=a=0;c&&(a=c.value.digitize());c=$x('.//li[contains(@id,"zmc_section_") and contains(@class,"gift") and contains(.,"'+b+'")]');if(a&&c&&0<c.length){d=c.length;a>d&&(a=d);alert("Removing "+a+" of "+d+' gifts containing "'+b+'" ...');for(i=0;i<a;i++){var e=xpathFirst('.//a[@class="ignore" and contains(.,"Ignore")]',c[i]);e&&clickElement(e)}alert(a+" of "+d+' gifts containing "'+
b+'" have been deleted ...')}else alert("NO Gifts have been deleted ...")}
function acceptAllGifts(){var a=xpathFirst('.//input[@id="ignoreAllTxt"]'),b;a&&(b=a.value);var c=xpathFirst('.//input[@id="ignoreAllQty"]'),d=a=0;c&&(a=c.value.digitize());var e=$x('.//li[contains(@id,"zmc_section_") and contains(@class,"gift") and contains(.,"'+b+'")]');if(a&&e&&0<e.length){d=e.length;a>d&&(a=d);alert("Accepting "+a+" of "+d+' gifts containing "'+b+'" ...');for(i=0;i<a;i++){var c=e[i],f=xpathFirst('.//a[@class="acceptonly" and contains(.,"ACCEPT GIFT")]',c);f?clickElement(f):(f=
xpathFirst('.//a[@class="sexy_button_new medium white" and contains(.,"Accept Gift")]',c))&&clickElement(f)}alert(a+" of "+d+' gifts containing "'+b+'" have been accepted ...')}else thislink=!1;if(!thislink)if(e=$x('.//li[contains(@id,"zmc_section_") and contains(@class,"help") and contains(.,"'+b+'")]'),a&&e&&0<e.length){d=e.length;a>d&&(a=d);alert("Accepting "+a+" of "+d+' non-gifts containing "'+b+'" ...');for(i=0;i<a;i++)c=e[i],(f=xpathFirst('.//a[@class="sexy_button_new medium white" and contains(.,"Accept")]',
c))&&clickElement(f);alert(a+" of "+d+' non-gifts containing "'+b+'" have been accepted ...')}else alert("Nothing Found to accept...")}
function handlePopups(){for(var a=document.getElementsByClassName("unclickableMask"),b=0,c=a.length;b<c;b++)a[b].parentNode.removeChild(a[b]);running&&!timeLeftGM("bulletStopTimer")&&xpathFirst('.//div[@id="LoadingOverlay" and contains(@style,"block")]')&&(colorDEBUG("setting bulletStopTimer to 3 secs"),setGMTime("bulletStopTimer","00:00:03"),(a=xpathFirst('.//a[@id="zmc_button"]'))?(clickElement(a),colorDEBUG("Forced a click to get rid of nasty Zollipops Bullets!")):(goHome(),colorDEBUG("Forced a click to 'goHome()' and get rid of nasty Zollipops Bullets!")));
fetchPubOptions();try{var d=xpathFirst('.//div[@id="currentTab"]',popupfodderElt);d&&RX6_setValue("currentTab",d.innerHTML);if(!running){var e=$x('.//div[contains(@id, "pop_") and not(contains(@style, "none"))]',popupfodderElt);showPopups(e);e=$x('.//div[@class="fight_true_popup"]//div[contains(@id, "pop_b")]',innerPageElt);showPopups(e)}var f=xpathFirst('.//div[@id="requests_toaster" and contains(@style,"block")]');if(f){var g=xpathFirst('.//div[@id="requests_toaster_txt"]',f);g&&addToLog("process Icon",
'RX6 sent out <span class="good">'+g.innerHTML.untag().digitize()+"</span> request(s).");return closePopup(f,"Requests")}var h=$x('.//div[@class="buy_prompt"]',appLayoutElt);if(running&&h&&0<h.length)for(var b=0,l=h.length;b<l;++b)if(h[b]&&h[b].scrollWidth&&0<h[b].innerHTML.length){var k=h[b];return closePopup(k,"Buy Prompt")}h=$x('.//div[contains(@id,"socialMissionFail") and @class="socialMissionTryAgain" and contains(@style,"block")]',appLayoutElt);if(running&&h&&0<h.length){b=0;for(l=h.length;b<
l;++b)if(h[b]&&h[b].scrollWidth&&0<h[b].innerHTML.length){var k=h[b],p;isGMChecked("AutoRetryOperations")?(p=xpathFirst('.//a[contains(@onclick,"tryAgain") and contains(.,"Start")]',k),DEBUG("Clicking to retry expired operation")):(p=xpathFirst('.//a[contains(@onclick,"tryAgain") and contains(.,"Close")]',k),DEBUG("Clicking to close expired operation"));p&&clickElement(p);return!0}}h=$x('.//div[contains(@id,"zy_popup_box") and not(@class="zy_popup_box_bg") and contains(@style,"block")]',appLayoutElt);
if(running&&h&&0<h.length){b=0;for(l=h.length;b<l;++b)if(h[b]&&h[b].scrollWidth&&0<h[b].innerHTML.length){k=h[b];if(p=xpathFirst('.//div[@class="achievement_message_text"]',k))if(p.innerHTML.untag().match(/you earned(.+)share/i)&&addToLog("yeah Icon","RX6 earned "+RegExp.$1+"."),isGMChecked("autoGlobalPublishing")&&(p=xpathFirst('.//a[contains(@class,"sexy_achievement_new") and contains(.,"Share the wealth")]',k)))clickElement(p),DEBUG("Clicked to share Achievement Bonus");return closePopup(k,"Achievement Popup")}}if((e=
$x('.//div[(contains(@id,"pop_box") and contains(@style, "block")) or contains(@id,"mystery")]',appLayoutElt))&&0<e.length){b=0;for(l=e.length;b<l;++b)if((k=e[b])&&k.scrollWidth&&0<k.innerHTML.length){var n=k.innerHTML,r=n.untag().toLowerCase();if(!(-1!=n.indexOf("fight_wrapper")||-1!=n.indexOf("bank_popup")||-1!=n.indexOf("vault_popup")))if((-1!=n.indexOf('id="marketplace"')||-1!=n.indexOf('id="original_buyframe_popup"')||-1!=n.indexOf("marketplace_title.png")||-1!=n.indexOf("giftcard_iframe")||
-1!=n.indexOf("newbuyer_congrats")||-1!=n.indexOf("xw_controller=hospital")||-1!=n.indexOf("Build Complete")||-1!=n.indexOf('id="ChopShopCarousel"')||-1!=n.indexOf('class="account_settings_title"')||-1!=n.indexOf('class="exp_discount_main"')||-1!=n.indexOf("this wave has ended")||-1!=n.indexOf("xw_controller=SubscriptionPlan")||-1!=n.indexOf('id="lbox_iframe"')||-1!=r.indexOf("wishlist is full")||-1!=r.indexOf("cooldown")||-1!=r.indexOf("buy now order")||-1!=r.indexOf("drag to reorder them")||-1!=
r.indexOf("vengeance pack"))&&-1==r.indexOf("select a consumable to use")){if(running)return closePopup(k,"Annoying Zollipops stuff")}else if(running){isGMChecked("TestChanges")&&DEBUG("Popup Detected:<br>"+k.innerHTML.untag());if(-1!=r.indexOf("close_suggestor_iframe")){colorDEBUG("close_suggestor_iframe detected");if(timeLeftGM("requestTimer"))colorDEBUG("Can not close request popup yet: "+getHoursTime("requestTimer")+" secs left.");else return colorDEBUG("close_suggestor_iframe timer has gone off ..."),
inRequests=!1,unsafeWindow.close_suggestor_iframe(),colorDEBUG("close_suggestor_iframe old fashioned closing"),closePopup(k,"Free Gift Suggestor");return}if(N=xpathFirst('.//div[contains(@id,"map_boss_victory")]//a[contains(.,"Share")]',k)){clickElement(N);popupTimer&&(window.clearInterval(popupTimer),popupTimer=window.setInterval(handlePopups,350));Autoplay.fx=goHome;Autoplay.start();return}if(N=xpathFirst('.//div[contains(@id,"map_boss_victory")]//a[contains(.,"return")]',k)){clickElement(N);popupTimer&&
(window.clearInterval(popupTimer),popupTimer=window.setInterval(handlePopups,350));Autoplay.fx=goHome;Autoplay.start();return}if(N=xpathFirst('.//div[@id="pop_box_map_boss_fight_stamina_popup"]//a[contains(.,"Close")]',k)){clickElement(N);endBoss=!0;return}if((N=xpathFirst('.//div[@id="pop_box_map_boss_fight_popup"]//a[class="pop_close"]',k))&&endBoss){isBGPaused=!1;clickElement(N);return}if((N=xpathFirst('.//div[@id="pop_box_map_boss_fight_run_away_popup"]//a[contains(.,"Run Away")]',k))&&endBoss){isBGPaused=
!1;clickElement(N);popupTimer&&(window.clearInterval(popupTimer),popupTimer=window.setInterval(handlePopups,350));endBoss=!1;Autoplay.delay=150;Autoplay.fx=goHome;Autoplay.start();autoReload(!1,"challenge mission");return}if(N=xpathFirst('.//a[contains(@class,"attack_boss") and contains(@onclick,"Expert")]',k)){endBoss=!1;popupTimer&&(window.clearInterval(popupTimer),popupTimer=window.setInterval(handlePopups,3E3));autoReload(!1,"Boss Fight");clickElement(N);return}var q=xpathFirst('.//div[@id="map_boss_fight"]',
k);if(q){popupTimer&&(window.clearInterval(popupTimer),popupTimer=window.setInterval(handlePopups,3E3));isUndefined(useConsumables)&&(useConsumables=!0);autoReload(!1,"Boss Fight");var t=$x('.//a[contains(@id,"use_con") and not(contains(@class,"greyButton"))]',q);if(t&&0<t.length&&useConsumables){N=t[t.length-1];clickElement(N);useConsumables=!1;return}if(N=xpathFirst('.//a[contains(@class,"sexy_attack_new") and contains(@onclick,"BossController")]',q))clickElement(N),useConsumables=!0;return}var s=
xpathFirst('.//div[@id="bossWinPop"]',k);if(s){districtBoss=!1;var y=xpathFirst('.//div[@class="textFields"]',s);y&&addToLog("yeah Icon",y.innerHTML.untag());var C=xpathFirst('.//div[@class="bossRewards"]//p',s);C&&addToLog("lootBag Icon",C.parentNode.innerHTML);var F=xpathFirst('.//a[contains(@onclick,"returnToJobs") and contains(.,"Go Back")]',s);if(F){clickElement(F);return}return closePopup(k,"district Boss Defeated Popup")}var M=xpathFirst('.//div[@id="role_select_bg"]',k);if(M)return DEBUG("Found Battle Popup"),
(N=xpathFirst('.//a[@class="rightArrow" and contains(.,"FIGHT")]',M))&&clickElement(N),closePopup(k,"Battle Popup");if(-1!=n.indexOf("mw_app=slotmachine")){var D=xpathFirst('//object[@id="slots"]/param[@name="flashvars"]');D&&D.value&&(slotSpins=D.value.match(/&freeSpins=(\d+)&/)[1],slotBonus=D.value.match(/&bonusMeter=(\d+)&/)[1],addToLog("info Icon","Slot Spins Remaining: "+slotSpins+" Bonus Level: "+slotBonus));return closePopup(k,"Slot Machine Popup")}if(-1!=n.indexOf('class="depotTitle"')){var b=
1,B=$x('.//div[contains(@class,"upgrade_card_amounts")]',k);if(B&&B.length&&3==B.length){var w=xpathFirst('.//span[contains(@id,"buy_one_part_have")]',B[2]),G=xpathFirst('.//span[contains(@id,"buy_one_part_need")]',B[2]);w&&G&&(parseInt(w.innerHTML)==parseInt(G.innerHTML)?(DEBUG("Limited Parts, FULL!!!!  We have: "+w.innerHTML+" We Need: "+G.innerHTML),b=2):DEBUG("Limited Parts, We have: "+w.innerHTML+" We Need: "+G.innerHTML))}var E=$x('.//a[contains(@onclick,"postfeedforproperty_part")]',k);if(E&&
E.length){var z=E[E.length-b];DEBUG("Clicking Ask Limited Property Element");clickElement(z)}return closePopup(k,"Limited Property")}if(-1!=r.indexOf("opened a red mystery bag")||-1!=r.indexOf("share mystery bonus")){var u=xpathFirst('.//div[@class="mystery_bag_drop_item"]/div',k);u||(u=xpathFirst('.//div[contains(@class,"mystery")]/div',k));if(u){var A="RX6 collected the following item from a red mystery bag or mystery bonus: "+u.innerHTML.untag()+'<br><div class="lootImg">'+u.innerHTML+"</div>";
addToLog("lootbag Icon",A)}return closePopup(k,"Mystery Bag/Bonus Drop")}if(-1!=n.indexOf("BattleResultsController"))return DEBUG("Found BattleRewards Popup"),(N=xpathFirst('.//a[contains(@onclick,"BattleResultsController.collectReward") and contains(.,"Collect")]',k))?(DEBUG("Found collect link to click, boom!"),clickElement(N)):DEBUG("No collect link found :("),closePopup(k,"Battle Collect");if(-1!=n.indexOf("epic_battle_collect")||-1!=r.indexOf("clan/battle")){DEBUG("Found BattleRewards Item Popup");
var v=xpathFirst('.//div[contains(@class,"item_with_preview")]',k);v||(v=xpathFirst('.//div[contains(@style,"item_with_preview")]',k));if(v){var O='Family Battle Reward:<br><div class="lootImg">'+v.innerHTML+"</div>";addToLog("lootbag Icon",O)}return closePopup(k,"Battle Collect Item")}if(-1!=r.indexOf("you cleared the full board"))return logRobResult(k),closePopup(k,"Robbing Board Popup");var U=xpathFirst('.//span[@id="level_up_skill"]',k);if(U)if(isGMChecked("autoStat")){d=0;d=parseInt(U.innerHTML);
colorDEBUG("free skill points: "+d);var K=autoStatVars(d);DEBUG("AutoStat upgrading "+K[0]+" - "+K[1]);if(d&&""!=K[0]&&0!=K[1]){var L="remote/html_server.php?xw_controller=stats&xw_action=upgrade&upgrade_key="+K[0]+"&upgrade_amt="+K[1]+"&no_load=1&source=level_up_popup",T=createAjaxPage(!0);if(N=makeElement("a",null,{onclick:'return do_ajax("'+T+'","'+L+'", 1, 0, null, update_level_up_skill); return false;'})){var I=K[0].replace("max_",""),P=eval(I.toUpperCase()+"_STAT"),Q=I.toLowerCase()+" Icon",
R=isNaN(K[1])?1:parseInt(K[1]);RX6_setValue("nextStat",(P+1)%4);switch(P){case ATTACK_STAT:curAttack+=R;break;case DEFENSE_STAT:curDefense+=R;break;case HEALTH_STAT:maxHealth+=R;break;case ENERGY_STAT:maxEnergy+=R;break;case STAMINA_STAT:maxStamina+=R}addToLog(Q,'<span style="color:#885588;">'+I+" increased by "+R+" point(s).</span>");clickAction="autoStatAllocation";clickElement(N);return}}L="remote/html_server.php?xw_controller=levelUpBonus&xw_action=addBonusItem&xw_city="+city+"&no_load=1";T=createAjaxPage(!0);
if((N=makeElement("a",null,{onclick:'return do_ajax("'+T+'","'+L+'", 1, 0, null, update_level_up_bonus_item); return false;'}))&&claimLevelUpBonus){DEBUG("Claiming Skill Points Allocation Reward");clickAction="autoStatReward";clickElement(N);claimLevelUpBonus=!1;return}}else DEBUG("Skill Poinst Allocation OFF");if(r.match(/(you are now level|promoted to level) (\d+)/i)){addToLog("info Icon",'You were promoted to level <span class="good">'+RegExp.$2+"</span>");if(document.getElementById("bonusItemName")){var Z=
document.getElementById("bonusItemName");addToLog("lootbag Icon",'Level Up Bonus Item: <span class="loot">'+Z.innerHTML+"</span>")}if(isGMChecked("autoGlobalPublishing")){var J=xpathFirst('.//a[contains(@onclick,"postLevelUpFeedAndSend") and contains(.,"Share")]',k);J||(J=xpathFirst('.//a[contains(@onclick,"xw_action=levelup_boost_brag") and contains(.,"Share")]',k));J||(J=xpathFirst('.//div[@id="bonusShareButton"]//a[contains(.,"Share")]',k));J&&(DEBUG("Level Up popup Share button detected"),clickElement(J))}claimLevelUpBonus=
!0;return closePopup(k,"Level Up Bonus")}var S=$x('.//a[contains(@onclick,"postFeedAndSendSocialList") and contains(.,"Post")]',k);if(S&&0<S.length)return closePopup(k,"Level Up Bonus Sharing");if(-1!=r.indexOf("not involved in this mission"))return closePopup(k,"Not in Operation");if(-1!=r.indexOf("start operation")){var H=xpathFirst('.//a[@class="sexy_button_new medium white" and contains(@onclick,"postCelebrateFeed")]',k);H||(H=xpathFirst('.//a[@class="sexy_button_new medium white" and contains(@onclick,"startMission")]',
k));H&&isGMChecked("autoStartMyOps")&&(clickElement(H),DEBUG("Popup Process: OPERATIONS - Started a new Operation"));return closePopup(k,"Start New Operation")}if(-1!=r.indexOf("invite friends")){if((H=xpathFirst('.//a[@class="sexy_button_new medium white" and contains(@onclick,"postCelebrateFeed")]',k))&&isGMChecked("autoStartMyOps"))clickElement(H),DEBUG("Popup Process: OPERATIONS - Started My own Operation");return closePopup(k,"Inviting Friends on Operation Start")}if(-1!=r.indexOf("failed to give reward"))return DEBUG("Popup Process: OPERATIONS - Claim Rewards Failed"),
closePopup(k,"Claim Operations Rewards Failed");if(-1!=r.indexOf("completed the operation")){DEBUG("Popup Process: OPERATIONS - Claim Rewards : "+k.id);for(var V=$x('.//td[@class="collectPopLootItem"]',k),O="",b=0;b<V.length;++b)var W=$x('.//div[contains(@style,"center")]',V[b]),da=W[0].innerHTML.untag(),aa=W[1].innerHTML,O=O?O+('<br><span class="loot">'+da+"</span> ("+aa+")"):'<span class="loot">'+da+"</span> ("+aa+")";addToLog("lootbag Icon","Operation Rewards :<br>"+O);if(!isGMChecked("autoGlobalPublishing"))return closePopup(k,
"Operations Rewards Claimed")}var ea=xpathFirst('.//a[@class="sexy_button_new medium white sexy_call_new" and contains(@onclick,"postCelebrateFeed")]',k);if(ea)return isGMChecked("autoGlobalPublishing")&&(clickElement(ea),DEBUG("Popup Process: OPERATIONS - Share Rewards")),closePopup(k,"Operations Rewards Claimed and Shared");if(-1!=r.indexOf("won the fight")||-1!=r.indexOf("lost the fight"))return closePopup(k,"Succesfull War Attack");if(-1!=r.indexOf("have already helped"))return closePopup(k,"Already Helped");
if(-1!=r.indexOf("war is already over"))return closePopup(k,"War already over");if(-1!=r.indexOf("a mafia request"))return closePopup(k,"War Not in Mafia");var fa=xpathFirst('.//a[@class="sexy_button_new short white sexy_call_new" and contains(@onclick,"attemptFeed")]',k);if(fa)return isGMChecked("autoGlobalPublishing")&&(clickElement(fa),DEBUG("Popup Process: WAR - Declare War Publishing")),closePopup(k,"War Declaration Popup");if(-1!=r.indexOf("help to take out all 7")){if((eltHelp=xpathFirst('.//a[contains(.,"Ask Friends for Help")]',
k))&&isGMChecked("autoGlobalPublishing"))clickElement(eltHelp),DEBUG("Popup Process: WAR - Ask Friends for Help Publishing");return closePopup(k,"War Help Popup")}if(-1!=r.indexOf("share victory coins")){var ba=$x('.//a[@class="sexy_button_new short white" and contains(@onclick,"postWarWin")]',k);if(ba&&isGMChecked("autoGlobalPublishing"))for(b=0;0<(b<ba.length);++b)warRewardButton=ba[b],clickElement(warRewardButton),DEBUG("Popup Process: WAR - Reward Friends (Share Coins) for Help Publishing");return closePopup(k,
"War Reward (Share Coins) Popup")}if(r.match(/congratulations/i)){var ca=$x('.//div[@style="margin: 10px; text-align: center;"]',k);if(ca&&ca.length){A="";b=0;for(l=ca.length;b<l;b++)A+=ca[b].innerHTML;A&&addToLog("lootbag Icon",'RX6 crafted the following item:<br><div class="lootImg">'+A+"</div>")}return closePopup(k,"Crafting")}if(eltHelp=xpathFirst('.//a[contains(.,"Fight Anyway")]',k))return clickElement(eltHelp),DEBUG("Popup Process: Tournament - Fight Anyway"),closePopup(k,"Tournament - Fight Anyway");
if(-1!=r.indexOf("Become World Champion"))return closePopup(k,"Welcome to Tournaments");if(-1!=r.indexOf("Your previous tournament has expired"))return closePopup(k,"Tournament Expired");if(-1!=n.indexOf("TournamentController.nextPage()"))return;if((eltHelp=xpathFirst('.//a[contains(@class,"sexy_button_new") and contains(.,"Share")]',k))&&isGMChecked("autoGlobalPublishing"))return clickElement(eltHelp),DEBUG("Popup Process: Share Themed Event Items - "+r+" / "+eltHelp.innerHTML),closePopup(k,"Share Themed Event Items");
if((eltHelp=xpathFirst('.//a[contains(@class,"sexy_button_new") and contains(.,"Tell your friends")]',k))&&isGMChecked("autoGlobalPublishing")){var Y=xpathFirst('.//img[@class="item_with_preview"]',k);Y&&(rewardName=Y.getAttribute("title"),Y=Y.parentNode,Y=Y.innerHTML,addToLog("lootbag Icon",'RX6 Collected a <span class="loot">'+rewardName+'</span>:<br><div class="lootImg">'+Y+"</div>"));clickElement(eltHelp);DEBUG("Popup Process: Share Themed Event Items - "+r+" / "+eltHelp.innerHTML);return closePopup(k,
"Share Themed Event Items")}if(r.match(/you found (.*) loot event./i)||r.match(/you found all (.*) in action./))return r.match(/you found (.*) loot event./i)?logtxt='RX6 found <span class="loot">'+RegExp.$1+"<span> from a loot event.":r.match(/you found all (.*) in action./)&&(logtxt='RX6 found <span class="loot">'+RegExp.$1+"</span> in action."),logtxt&&addToLog("yeah Icon",logtxt),closePopup(k,"Loot Event");if(isGMChecked("autoAskCityCrew")&&-1!=r.indexOf("send city crew requests")){colorDEBUG("timeLeft: "+
timeLeft("requestTimer"));if(inRequests)return;var X=$x('.//div[@class="mfs_selectable"]//li[@class="mfs_add" and not(contains(@style,"none"))]'),ga=xpathFirst('.//div[@id="mfs_tab_2" and contains(@class,"inactive")]');if(0==X.length||21>X.length&&ga)ga=xpathFirst('.//div[@id="mfs_tab_2"]'),clickElement(ga);var ia=xpathFirst('.//a[@class="sexy_button_new medium orange" and contains(@onclick,"MW.Request.submitMFS") and contains(.,"SEND REQUESTS")]'),X=$x('.//div[@class="mfs_selectable"]//li[@class="mfs_add" and not(contains(@style,"none"))]');
if(0<X.length&&ia&&!inRequests){inRequests=!0;var ja=xpathFirst('.//a[@id="selectMaxButton" and not (contains(@class,"disabled"))]');if(ja)clickElement(ja);else{l=50<X.length?50:X.length;for(b=0;b<l;b++)clickElement(X[b])}clickElement(ia);setGMTime("requestTimer","00:30")}else 5<parseInt(timeLeft("requestTimer"))&&setGMTime("requestTimer","00:05");if(!timeLeft("requestTimer"))if("function"==typeof unsafeWindow.close_suggestor_iframe)unsafeWindow.close_suggestor_iframe();else return closePopup(k,"autoAskCityCrew Requests");
return}if(-1!=r.indexOf("level mastered")){var ka=xpathFirst('.//a[@class="sexy_button_new short green sexy_announce" and contains(@onclick,"post_mastery_feed")]',k);ka&&isGMChecked("autoGlobalPublishing")&&(clickElement(ka),DEBUG("Popup Process: Robbing/Fighting Level Mastery - Tell Your Friends"));return closePopup(k,"Robbing/Fighting Level Mastered")}if(-1!=r.indexOf("paypal"))return closePopup(k,"Paypal");if(-1!=n.indexOf("xw_action=buyframe_popup")||-1!=r.indexOf("div.buyframe_pop_box"))return closePopup(k,
"Buy Reward Points");if(-1!=r.indexOf("safehouse_congrats"))return closePopup(k,"Crime Spree Congratulations");if(-1!=r.indexOf("treasure chest"))return closePopup(k,"Treasure Chest");if(-1!=r.indexOf("keep winning"))return closePopup(k,"Robbery Keep Winning");if(-1!=r.indexOf("tired of losing"))return closePopup(k,"Robbery Tired of Losing");if(-1!=r.indexOf("the slots collection"))return closePopup(k,"Slots Collection");if(-1!=r.indexOf("friend to be in your mafia and help"))return closePopup(k,
"Grow your Mafia");if(-1!=r.indexOf("new loot!"))return closePopup(k,"Slot Machine Flushed");if(-1!=r.indexOf("your mafia wars requests have moved to the left column on facebook"))return closePopup(k,"Your Requests");if(-1!=r.indexOf("not have enough"))return closePopup(k,"not enough health, stamina or energy");if(-1!=r.indexOf("out of")&&-1==r.indexOf("the bank"))return closePopup(k,"out of health, stamina or energy");if(-1!=r.indexOf("you helped in"))return closePopup(k,"You helped in");if(-1!=
r.indexOf("become world champion"))return closePopup(k,"Welcome to Tournaments");if(-1!=r.indexOf("your previous tournament has expired"))return closePopup(k,"Tournament Expired");var ma=xpathFirst('.//div[@id="let_there_be_space"]',k),na=xpathFirst('.//div[@id="request_ifc"]',k);if(ma&&na)return closePopup(k,"increase your mafia");if(-1!=r.indexOf("total requests"))return closePopup(k,"ZMC popup");if(isGMChecked("autoProcessPopups"))return(v=xpathFirst('.//div[contains(@style,"item_with_preview")]',
k))&&addToLog("lootbag Icon",v.innerHTML),(eltButton=xpathFirst('.//a[contains(@class,"sexy_button_new") and not (contains(.,"Refill")) and not (contains(.,"Buy")) and not (contains(.,"RP"))]',k))?(DEBUG("Tried to process the following popup ("+eltButton.innerHTML+"):<br>"+r),clickElement(eltButton)):DEBUG("Could not process the following popup :<br>"+r),closePopup(k,"autoClosing (autoProcess) Unknown")}else if(-1!=r.indexOf("total requests")){var ha=xpathFirst('.//ul[@id="zmc_message_list_ul"]',
k),oa=xpathFirst('.//span[@id="ignoreAllfromZMC"]',k);xpathFirst('.//span[@id="acceptAllfromZMC"]',k);if(ha&&!oa){var la=makeElement("li",null,{style:"width:98%;padding:5px 0px 1px 0px;text-align:center;margin-top:3px"});title="Process All Gifts from ZMC";var N=makeElement("span",la,{id:"ignoreAllfromZMC",title:title,style:"font-size:11px"});N.appendChild(document.createTextNode(title+" containing : "));id="ignoreAllTxt";title="Process Gifts from ZMC - Search String";makeElement("input",N,{type:"text",
id:id,title:title,value:"Giddy Atkinson",style:"width: 140px; font-size:10px"});N.appendChild(document.createTextNode("     Max. Quantity : "));id="ignoreAllQty";title="Maximum Quantity: ";makeElement("input",N,{type:"text",id:id,title:title,value:250,style:"width: 26px;"});id="ignoreAllLink";eltA=makeElement("a",N,{id:id,href:"#",alt:title,title:title,type:"button",role:"button","class":"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only",style:"padding:3px;width:70px; margin-left:5px"});
eltA.appendChild(document.createTextNode("Ignore"));id="acceptAllLink";eltB=makeElement("a",N,{id:id,href:"#",alt:title,title:title,type:"button",role:"button","class":"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only",style:"padding:3px;width:70px; margin-left:5px"});eltB.appendChild(document.createTextNode("Accept"));eltA.addEventListener("click",ignoreAllGifts,!1);eltB.addEventListener("click",acceptAllGifts,!1);ha.insertBefore(la,ha.firstChild)}}}else return closePopup(k,
"autoClosing empty popups")}}catch(pa){DEBUG("Error @handlePopups: "+pa)}return!1}
function updateScript(){try{GM_xmlhttpRequest({method:"GET",url:SCRIPT.metadata+"?"+Math.random(),onload:function(a){200==a.status&&a.responseText.match(/@version\s+(\d+).(\d+).(\d+)/)&&(a=RegExp.$1+"."+RegExp.$2+"."+RegExp.$3,a!=SCRIPT.version?window.confirm("Version "+a+" is available!\n\nDo you want to install this version?\n")&&(window.location.href=SCRIPT.url):alert("You already have the latest version: "+a))}})}catch(a){DEBUG("BUG DETECTED (updateScript): "+a)}}
function clearSettings(){if("function"==typeof GM_listValues&&"function"==typeof GM_deleteValue){var a=GM_listValues(),b;for(b in a)"function"==typeof GM_deleteValue&&GM_deleteValue(a[b])}else alert("In order to do this you need at least GreaseMonkey version: 0.8.20090123.1. Please upgrade and try again.")}function getArrayDiffs(a){diffArray=[];for(var b=1;b<a.length;b++)0>a[b]-a[b-1]?diffArray.push(0):diffArray.push(a[b]-a[b-1]);diffArray.unshift(0);return diffArray}
function setSavedList(a,b){RX6_setValue(a,b.join("\n"))}function getSavedList(a){return(a=String(RX6_getValue(a,"")))?a.split("\n"):[]}function addSavedListItem(a,b,c){var d=getSavedList(a);if(-1==d.indexOf(b)){d.push(b);if(0<c)for(;c<d.length;)d.shift();setSavedList(a,d)}}function removeSavedListItem(a,b){var c=getSavedList(a),d=c.indexOf(b);return-1!=d?(c.splice(d,1),setSavedList(a,c),!0):!1}
function removeJobForItem(a,b){var c=getSavedList(a,""),d=0;if(0<c.length){var e=c[c.length-1];requirementJob.forEach(function(c){c[1]==e&&requirementJob[d][0]==b&&removeSavedListItem(a,requirementJob[d][1]);d++})}}function cycleSavedList(a){var b=String(RX6_getValue(a,""));if(!(""==b||0==b.length))if(b=b.split("\n"),0!=b.length){var c=b.shift();c&&b.push(c);RX6_setValue(a,b.join("\n"))}}function stripURI(a){a=a.split('"')[1];return a.replace('" />',"")}
function showIfUnchecked(a){return"checked"!=a?"unchecked":a}function showIfSelected(a){return"checked"==a?"selected":"unselected"}function showIfRelative(a){return"checked"==RX6_getValue(a)?"relative":"absolute"}
function linkToString(a,b){if(!a)return a;var c=function(a){if(a.match(/user=/))var b=a.split("user=")[1].split("'")[0].split("&")[0],a=a.replace(b,decodeID(b));return a},d="<a";b&&(d+=' class="'+b+'"');if(a.hasAttribute("onclick")){var e=a.getAttribute("onclick");e&&(d+=' onclick="'+c(e)+'"')}return d+=' href="'+c(a.href)+'">'+a.innerHTML+"</a>"}function decodeHTMLEntities(a){if(!a)return a;scratchpad.innerHTML=a;return scratchpad.value}
function hideElement(a,b){if(a)return null==b&&(b=!0),a.setAttribute("id",b?"mwapHide":"",0),a}
function clickElement(a){if(a)if(gvar.isGreaseMonkey)try{$(a).click(),colorDEBUG("elt: "+a.innerHTML.untag()+" - $(elt).click();",cgr)}catch(b){colorDEBUG("elt: "+a.innerHTML.untag()+" - $(elt).click();",cre)}else{var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null);a.dispatchEvent(c);colorDEBUG("elt: "+a.innerHTML.untag()+" - elt.dispatchEvent(evt);",cli)}else colorDEBUG("BUG DETECTED: Null element passed to clickElement().",cre)}
function ignoreElement(a){var b=a.parentNode;return b&&(b=b.id)&&(-1!=b.indexOf("countdown")||-1!=b.indexOf("timer")||-1!=b.indexOf("ask_for_job_help_time")||-1!=b.indexOf("tournament_time_left")||-1!=b.indexOf("tournament_try_again_timer")||-1!=b.indexOf("zmc_event_count")||-1!=b.indexOf("googleAds")||-1!=b.indexOf("ps_mwap_promo_banner")||-1!=b.indexOf("FeaturedEventsModule"))?!0:(b=a.id)&&(-1!=b.indexOf("countdown")||-1!=b.indexOf("timer")||-1!=b.indexOf("ask_for_job_help_time")||-1!=b.indexOf("tournament_time_left")||
-1!=b.indexOf("tournament_try_again_timer")||-1!=b.indexOf("zmc_event_count")||-1!=b.indexOf("googleAds")||-1!=b.indexOf("ps_mwap_promo_banner")||-1!=b.indexOf("FeaturedEventsModule"))?!0:!1}function xpathFirst(a,b){return document.evaluate(a,b||document,null,XPathResult.ANY_UNORDERED_NODE_TYPE,null).singleNodeValue}function $x(a,b){for(var c,d=[],e=document.evaluate(a,b||document,null,XPathResult.UNORDERED_NODE_ITERATOR_TYPE,null);c=e.iterateNext();)d.push(c);return d}
function xpath(a,b){return document.evaluate(a,null==b?document:b,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null)}function toggleCheckElt(a){if(isGMChecked(a))return RX6_setValue(a,0),!1;RX6_setValue(a,"checked");return!0}function defaultCheckBoxElementArray(a,b){for(var c=0;c<a.length;c++)RX6_setValue(a[c],b)}function saveCheckBoxElementArray(a){for(var b=0;b<a.length;b++)document.getElementById(a[b])?saveCheckBoxElement(a[b]):RX6_setValue(a[b],0)}
function saveCheckBoxElement(a){if(!0===document.getElementById(a).checked)return RX6_setValue(a,"checked"),!0;RX6_setValue(a,0);return!1}function saveElementArray(a){for(var b=0;b<a.length;b++)saveElement(a[b])}
function saveElement(a){if(document.getElementById(a[0]))switch(a[1]){case 1:RX6_setValue(a[0],document.getElementById(a[0]).selectedIndex?document.getElementById(a[0]).selectedIndex:0);break;case 2:RX6_setValue(a[0],document.getElementById(a[0]).value?document.getElementById(a[0]).value:0);break;case 3:RX6_setValue(a[0],!0===document.getElementById(a[0]).checked?"checked":0);break;case 4:RX6_setValue(a[0],a[2]?a[2]:0);break;default:RX6_setValue(a[0],document.getElementById(a[0]))}else if(5==a[1]&&
document.getElementsByName(a[0])){var b=document.getElementsByName(a[0]);for(i=0;i<b.length;i++)if(!0==b[i].checked){RX6_setValue(a[0],parseInt(b[i].value));break}}else RX6_setValue(a[0],0)}
function returnElement(a,b){var c=0;if(document.getElementById(a[0]))switch(a[1]){case 1:c=document.getElementById(a[0]).selectedIndex?document.getElementById(a[0]).selectedIndex:0;break;case 2:c=document.getElementById(a[0]).value?document.getElementById(a[0]).value:0;break;case 3:c=!0===document.getElementById(a[0]).checked?"checked":0;break;case 4:c=a[2]?a[2]:0;break;default:c=document.getElementById(a[0])}isNaN(c)?isUndefined(b)||(c=b):(c=parseInt(c),0>c&&(c=0));return c}
function GM_getIntValue(a,b){isNaN(b)&&(b=0);var c=RX6_getValue(a,b);return isNaN(c)?0:parseInt(c)}function GM_getFloatValue(a,b){isNaN(b)&&(b=0);var c=RX6_getValue(a,b);return isNaN(c)?0:parseFloat(c)}function isGMEqual(a,b){return RX6_getValue(a)+""==b+""}function isGMChecked(a){return isGMEqual(a,"checked")}function isGMUndefined(a){return isUndefined(RX6_getValue(a))}function isUndefined(a){return"undefined"==a+""}
function makeElement(a,b,c,d,e){a=document.createElement(a);if(null!=c)for(var f in c)a.setAttribute(f,c[f]);null!=d&&"checked"==RX6_getValue(d,e)&&a.setAttribute("checked","checked");b&&b.appendChild(a);return a}function destroyByID(a){(a=document.getElementById(a))&&a.parentNode.removeChild(a)}function remakeElement(a,b,c,d,e){c.id&&destroyByID(c.id);return makeElement(a,b,c,d,e)}
function getBrowserWindowSize(){document.body&&document.body.offsetWidth&&(winW=document.body.offsetWidth);winH=document.body.offsetHeight;"CSS1Compat"==document.compatMode&&(document.documentElement&&document.documentElement.offsetWidth)&&(winW=document.documentElement.offsetWidth);winH=document.documentElement.offsetHeight;window.innerWidth&&window.innerHeight&&(winW=window.innerWidth);winH=window.innerHeight}function isNewCity(a){return a==BRAZIL||a==CHICAGO||a==LONDON?!0:!1}
function isSecretDistrict(a,b){switch(a){case BRAZIL:return 8<b?!0:!1;case CHICAGO:return 6<b?!0:!1;case LONDON:return 8<b?!0:!1;default:return!1}}function parseCash(a){"string"==typeof a&&(a=a.trim().replace(/K$/,"00"),a=a.trim().replace(/K/,"0"),a=a.trim().digitize());return parseInt(a)}
function parseCashLoc(a){if("string"==typeof a&&a.match(/([A-Z]*?\$|\u00A2|\u00A3)[\d,]*\d/))switch(RegExp.$1){case "C$":return CUBA;case "M$":return MOSCOW;case "B$":return BANGKOK;case "V$":return LV;case "L$":return ITALY;case "BRL$":return BRAZIL;case "\u00a2":return CHICAGO;case "\u00a3":return LONDON}return NY}function makeCommaValue(a){a=String(a);return a==(a=a.replace(/^(.*\s)?(\d+)(\d{3}\b)/,"$1$2,$3"))?a:makeCommaValue(a)}
function getGMTime(a){var b=RX6_getValue(a,0),b=Date.parse(b);b||(setGMTime(a,"00:00:00"),b=RX6_getValue(a,0),b=Date.parse(b));return b/1E3}function setGMTime(a,b){var c=new Date;c.setMilliseconds(0);"now"!=b&&c.setTime(c.getTime()+1E3*timeLeft(b));RX6_setValue(a,c.toString())}function timeLeftGM(a){var a=getGMTime(a),b=new Date;b.setMilliseconds(0);return Math.max(a-b.getTime()/1E3,0)}
function timeLeft(a){if(!a)return 0;var b=0,c=[],c=a.split(":");if(2==c.length)b=60*parseInt(c[0])+parseInt(c[1]);else if(3==c.length)b=3600*parseInt(c[0])+60*parseInt(c[1])+parseInt(c[2]);else if(1==c.length){c=a.split(" and ");for(i=0;i<c.length;i++)if(spaceIndex=c[i].indexOf(" "),-1!=spaceIndex)if(firstPart=c[i].substring(0,spaceIndex),secondPart=c[i].substring(spaceIndex+1,c[i].length),"minutes"==secondPart||"minute"==secondPart)b+=60*parseInt(firstPart);else if("seconds"==secondPart||"second"==
secondPart)b+=parseInt(firstPart);else if("hours"==secondPart||"hour"==secondPart)b+=parseInt(3600*firstPart);else if("days"==secondPart||"day"==secondPart)b+=parseInt(86400*firstPart)}return b}function getCurrentTime(){return Math.round((new Date).getTime()/1E3/60)}function getDecimalTime(a){var a=parseFloat(a),b="";a&&(60<=a&&(b=parseInt(a/60)+"h ",a-=parseInt(a),a*=60),b+=parseInt(a)+"m ",a-=parseInt(a),b+=parseInt(60*a)+"s");return b.replace("00","0")}
function secondsToHMS(a){var a=Number(a),b=Math.floor(a/3600),c=Math.floor(a%3600/60),a=Math.floor(a%3600%60);return(0<b?b+":":"")+(0<c?(0<b&&10>c?"0":"")+c+":":"0:")+(10>a?"0":"")+a}function getHoursTime(a){a=timeLeftGM(a);if(0==a)return 0;if(!isNaN(a)){var a=parseInt(a),b="";a&&(a/=60,60<=a&&(a/=60,b=parseInt(a)+"h ",a-=parseInt(a),a*=60),b+=parseInt(a)+"m ",a-=parseInt(a),b+=parseInt(60*a)+"s");return b}}function IsJsonString(a){try{JSON.parse(a)}catch(b){return!1}return!0}
function decodeID(a){a=unescape(a);isNaN(a)&&(a=decode64(a));return a}
function decode64(a){var b="",c,d,e="",f,g="",h=0;/[^A-Za-z0-9\+\/\=]/g.exec(a)&&DEBUG("Invalid character(s) found in input ("+a+"). Expect errors in decoding.");a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");do c=keyStr.indexOf(a.charAt(h++)),d=keyStr.indexOf(a.charAt(h++)),f=keyStr.indexOf(a.charAt(h++)),g=keyStr.indexOf(a.charAt(h++)),c=c<<2|d>>4,d=(d&15)<<4|f>>2,e=(f&3)<<6|g,b+=String.fromCharCode(c),64!=f&&(b+=String.fromCharCode(d)),64!=g&&(b+=String.fromCharCode(e));while(h<a.length);return b}
function encode64(a){var b="",c,d,e="",f,g,h="",l=0;do c=a.charCodeAt(l++),d=a.charCodeAt(l++),e=a.charCodeAt(l++),f=c>>2,c=(c&3)<<4|d>>4,g=(d&15)<<2|e>>6,h=e&63,isNaN(d)?g=h=64:isNaN(e)&&(h=64),b=b+keyStr.charAt(f)+keyStr.charAt(c)+keyStr.charAt(g)+keyStr.charAt(h);while(l<a.length);return b}function onOperationsNav(){return xpathFirst('.//div[@id="socialMissionNav"]//a',innerPageElt)?!0:!1}
function goOperationsNav(){var a=xpathFirst('.//div[@id="nav_link_events_unlock"]//a',menubarElt);return a?(clickElement(a),!0):!1}function onOperationsTab(a,b){var c=xpathFirst('.//a[@id="'+a+'" and contains(@onclick,"controller=socialmission") and contains(@style,"menu_item_hover")]',innerPageElt);if(c)return!0;c=xpathFirst('.//a[@id="'+a+'" and contains(@onclick,"controller=socialmission")]',innerPageElt);return"go"==b?(clickElement(c),!0):!1}
function checkmyMissions(a){var b="";"start"==a&&(b="startMission");"remove"==a&&(b="showTryAgain");return(b="continue"==a?xpathFirst('.//div[@class="doTaskModule" and not (contains(@style,"none"))]//a[contains(@class,"sexy_button_new medium") and contains(@onclick, "closeTask" )]',innerPageElt):xpathFirst('.//div[@class="socialMission"]//a[contains(@class,"sexy_button_new medium") and contains(@onclick, "'+b+'" )]',innerPageElt))?(DEBUG("checkmyMissions - Clicking to "+a+" an Operation"),clickElement(b),
!0):!1}
function getOperationsInfo(a,b,c){a.container=xpathFirst('.//div[@id="socialMission_'+a.id+'" and @class="socialMission"]');if(!a.container)return"undefined";a.name=xpathFirst('.//div[@class="missionName"]',a.container).innerHTML.untag().capitalize().trim();a.emptySlot=xpathFirst('.//div[@class="missionTaskImage" and contains(@style,"silhoutte_thmb")]',a.container);if("basic"==c)return a;a.slot=b;a.module=xpathFirst('.//div[@id="missionTask_'+a.slot+"_"+a.id+'_module" and contains(@style,"block")]',a.container);
if(b=xpathFirst('.//div[@class="doTaskName"]',a.module))a.taskName=b.innerHTML.untag();if(b=xpathFirst('.//div[@class="doTaskMastery"]//p',a.module))a.taskMastery=b.innerHTML.untag().digitize();if(b=xpathFirst('.//div[@class="doTaskPaysModule"]//dd[contains(@class,"experience")]',a.module))a.xp=b.innerHTML.untag();if(b=xpathFirst('.//div[@class="doTaskPaysModule"]//dd[contains(@class,"cash")]',a.module))a.cash=b.innerHTML.untag(),b.className.match(/(.+?)_cash_icon/i)&&(a.cashCity=cities.searchArray(RegExp.$1,
1)[0]);if(b=xpathFirst('.//div[@class="doTaskUsesModule"]//dd[contains(@class,"energy")]',a.module))a.nrgNeeded=b.innerHTML.untag();if(b=xpathFirst('.//div[@class="doTaskUsesModule"]//dd[contains(@class,"stamina")]',a.module))a.stamNeeded=b.innerHTML.untag();if(b=xpathFirst('.//div[@class="doTaskUsesModule"]//dd[contains(@class,"cash")]',a.module))a.cashNeeded=b.innerHTML.untag(),b.className.match(/(.+?)_cash_icon/i)&&(a.cashNeededCity=cities.searchArray(RegExp.$1,1)[0]);a.taskResult="";a.taskFailed=
!1;if("result"==c&&(b=xpathFirst('.//div[@class="task_results"]',a.module)))a.taskResult=b.innerHTML.untag(),"FAILURE"==a.taskResult&&(a.taskFailed=!0);a.taskResult&&colorDEBUG("getOperationsInfo - "+a.name+"/"+a.taskName+" RESULT: "+a.taskResult);checkOperationsInfo(a);return a}
function checkOperationsInfo(a){a.doable=!1;if(100==a.taskMastery)colorDEBUG("Operation: "+a.name+"/"+a.taskName+" already mastered ... skipping",cre);else if(a.nrgNeeded&&(energy<a.nrgNeeded||energy-a.nrgNeeded<SpendMissionEnergy.floor))colorDEBUG("Energy Requirements for Operation: "+a.name+" not met ... skipping",cre);else if(a.stamNeeded&&(stamina<a.stamNeeded||stamina-a.stamNeeded<SpendMissionStamina.floor))colorDEBUG("Stamina Requirements for Operation: "+a.name+" not met ... skipping",cre);
else{if(a.neededCash){if(a.neededCashCity!=city)return colorDEBUG("Cash Requirements (City) for Operation: "+a.name+" not met ... go to cash location",cre),Autoplay.fx=function(){goLocation(a.neededCashCity)},Autoplay.start(),!1;var b=parseCash(a.neededCash)-parseCash(cities[city][CITY_CASH])+4*parseCash(a.neededCash);if(0<b)return colorDEBUG("We need to withdraw "+cities[city][CITY_CASH_SYMBOL]+b+" to do this Operations Task 5 times. Going to the bank/vault of "+cities[city][CITY_NAME],cre),suspendBank=
!0,autoBankWithdraw(cashDiff),Autoplay.fx=GoFamilyTab,Autoplay.start(),!1}a.doable=!0}}
function askOperationsHelp(){var a=xpathFirst('.//a[contains(@class,"ask_for_help") and contains(@onclick, "postAskHelpFeed")]',innerPageElt);if(a){var b=a.id.replace("sm_action_button_","");opsInfo=new Operations(b);opsInfo=getOperationsInfo(opsInfo,"","basic");if(opsInfo.emptySlot)return clickElement(a),addToLog("updateGood Icon",'RX6 asked for help on Operation: <span class="job">'+opsInfo.name+"</span>."),!0}return!1}
function collectOperationsRewards(){var a=xpathFirst('.//a[@class="sexy_button_new medium green" and contains(@onclick, "collectReward")]',innerPageElt);a&&(clickElement(a),DEBUG("Clicked to Claim Operations Rewards on Operation."));return!1}
function goOperationsSubTab(a,b){var c=xpathFirst('.//a[@class="'+a+' " and contains(@onclick,"viewPage")]',innerPageElt);return c?(DEBUG("goOperationsSubTab: "+a+" button FOUND."),"go"==b&&(clickElement(c),DEBUG("goOperationsSubTab: going to "+a+" page.")),!0):!1}
function closeExpiredOperations(){var a=xpathFirst('.//div[@class="missionBoxRight"]//a[@class="sexy_button_new medium white" and contains(@onclick,"removeMission") and not (contains(@style,"none"))]',innerPageElt);a||(a=xpathFirst('.//div[@class="missionBoxRight"]//a[@class="sexy_button_new medium white" and contains(@onclick,"removeMission") and contains(.,"Close")]',innerPageElt));return a?(DEBUG("Clicked to Close an Operation."),clickElement(a),goOperationsSubTab("left","go"),!0):!1}
function canStartOperationsTask(){var a=$x('.//a[contains(@onclick,"startTask") and contains(@class,"do_job") and not(contains(@id,"hover"))]',innerPageElt);if(a&&0<a.length){i=0;for(iLength=a.length;i<iLength;i++){var b=a[i],c=b.id.replace("sm_action_button_",""),d=/'(.+)'/.exec(b.getAttribute("onclick"))[1],e=d.split(",")[1].digitize();DEBUG("canStartOperationsTask - FOUND "+c+" - "+d+" - "+e,caq);if(b.hasAttribute("disabled")){DEBUG("canStartOperationsTask - operations Module already OPEN",caq);
opsInfo=getOperationsInfo(opsInfo,e,"do");if(opsInfo.doable)return!0;break}opsInfo=new Operations(c);opsInfo=getOperationsInfo(opsInfo,e,"start");if(opsInfo.doable)return DEBUG("canStartOperationsTask "+opsInfo.name+" - clicking start button",caq),clickElement(b),!0}}return!1}
function performOperationsTask(){if(opsInfo.doable){var a=xpathFirst('.//div[contains(@id,"'+opsInfo.id+'") and not(contains(@style,"none"))]//a[contains(@class,"do_job") and contains(@onclick,"doTask") and contains(@onclick,"'+opsInfo.id+'")]',innerPageElt);a?(clickAction="operationsTask",clickContext=opsInfo,suspendBank=!1,clickElement(a),colorDEBUG("Clicked to performOperationsTask")):colorDEBUG("performOperationsTask - taskbutton NOT Found")}else colorDEBUG("Unable to do performOperationsTask")}
function checkOperations(a){if("myMissions"==a)var b="myOpsTimer";else if("myMafiaMissions"==a)b="famOpsTimer";else if("myBosses"==a)b="bossOpsTimer";else return!1;Autoplay.delay=3E3<getAutoPlayDelay()?getAutoPlayDelay():3E3;var c=RX6_getValue("idleLocation",NY);if(!opsInfo.neededCashCity&&city!=c&&!isBackgroundRobbing&&!isBackgroundFighting)return Autoplay.fx=function(){goLocation(c)},Autoplay.start(),!0;if(!onOperationsNav())return Autoplay.fx=goOperationsNav,Autoplay.start(),!0;if(!onOperationsTab(a,
"check"))return Autoplay.fx=function(){onOperationsTab(a,"go")},Autoplay.start(),!0;if("myMissions"==a&&(isGMChecked("autoStartMyOps")&&checkmyMissions("start")||checkmyMissions("remove")))return!0;if(askOperationsHelp()||collectOperationsRewards()||closeExpiredOperations())return Autoplay.fx=goOperationsNav,Autoplay.start(),!0;if("myMafiaMissions"==a&&checkmyMissions("continue"))return!0;if("myMafiaMissions"==a&&isGMChecked("autoStartFamOps")&&canStartOperationsTask())return Autoplay.fx=performOperationsTask(),
Autoplay.start(),!0;if(goOperationsSubTab("right","go"))return!0;DEBUG("checkoperations - tab "+a+" finished - resettimer and return to autoPlay",cli);setGMTime(b,"00:15:00");return!1}function RX6Dispatcher_getFriends(){mwap_do_ajax("requests","friend_selector","","&req_controller=freegifts&free_gift_id=1500&free_gift_cat=1&xw_client_id=8&ajax=1&liteload=1&fbml_iframe=1","getFriends",RX6Dispatcher_callBack)}
function RX6Dispatcher_getRequestData(){var a=GM_getIntValue("selectFreeGift",0);mwap_do_ajax("requests","friend_selector","","&xw_person="+xw_user+"&mwcom=1&req_controller=freegifts&friendSnid=undefined&free_gift_id="+a+"&free_gift_cat=1&xw_client_id=8&ajax=1&liteload=1&fbml_iframe=1","getRequestData",RX6Dispatcher_callBack)}
function RX6Dispatcher_sendGifts(){var a=myDispatchList.splice(0,50).join(","),a="&xw_person="+xw_user+"&rid="+parseInt(1E9*Math.random())+"&data="+myDispatchParams+"&to="+a;mwap_do_ajax("requests","postSend","",a,"sendGifts",RX6Dispatcher_callBack)}
function RX6Dispatcher_callBack(a,b,c,d,e,f,g){if(e)switch(f){case "getFriends":if(a=/MW.Request.setTabFriendLists\((.*?)\);/.exec(g.responseText))myFriendsList=JSON.parse(a[1]),a=GM_getIntValue("dispatchTarget",0),myDispatchList=myFriendsList[a],myDispatchNumber=myDispatchList.length,colorDEBUG("RX6DispatcherCallback: "+myDispatchNumber+" recipients loaded",caq),myDispatchNumber?RX6Dispatcher_getRequestData():(addToLog("warning Icon","RX6 did not find recipients in the selected category ("+a+") ... reset RX6 Gift Dispatcher Timer for 4 hours"),
isBackgroundDispatching=!1,setGMTime("autoDispatchTimer","4 hours"));break;case "getRequestData":if(a=/MW.Request.setData\(\'([^\']*)\'/.exec(g.responseText))myDispatchParams=a[1],RX6Dispatcher_sendGifts();break;case "sendGifts":IsJsonString(g.responseText)&&(a=JSON.parse(g.responseText),b=document.createElement("div"),b.innerHTML=a.data.reqsentmsg,a=b.innerHTML.untag(),b=myDispatchNumber-myDispatchList.length,a.match(/(.+)Send more/i)&&(a=RegExp.$1),a+="("+b+" of "+myDispatchNumber+" sent).",addToLog("process Icon",
a),a=10*getAutoPlayDelay(),addToLog("info Icon","RX6 Gift Dispatcher will continue in "+a/1E3+"s ..."),myDispatchList.length?window.setTimeout(RX6Dispatcher_sendGifts,a):(colorDEBUG("All Gifts sent"),isBackgroundDispatching=!1))}else DEBUG("Failed Dispatcher Request"),window.setTimeout(RX6Dispatcher_getFriends,getAutoPlayDelay())}function start_RX6Dispatcher(){RX6Dispatcher_getFriends()}function autoOpenGifts(){running?openMessageCenter():isOpeningGifts=!1}
function openMessageCenter(){isBGPaused||mwap_do_ajax("messageCenter","view",city,"","",autoOpenGiftsCallBack)}function openGift(){isBGPaused||mwap_do_ajax("freegifts","accept_gift",city,currentGift,"",autoOpenGiftsCallBack)}function acceptCrew(){isBGPaused||mwap_do_ajax("job","accept_city_crew",city,currentGift,"",autoOpenGiftsCallBack)}function acceptEnergy(){isBGPaused||mwap_do_ajax("index","accept_energy_req",city,currentGift,"",autoOpenGiftsCallBack)}
function acceptMafia(){isBGPaused||mwap_do_ajax("recruit","accept",city,currentGift,"",autoOpenGiftsCallBack)}function ignoreEvent(){isBGPaused||mwap_do_ajax("messageCenter","ignore",city,currentGift,"",autoOpenGiftsCallBack)}function sendThanx(){if(!isBGPaused){var a="&rid="+parseInt(1E15*Math.random())+"&data={"+currentThanx+"}&to="+currentFriend;mwap_do_ajax("requests","postSend",city,a,"",autoOpenGiftsCallBack)}}
function autoOpenGiftsCallBack(a,b,c,d,e,f,g){try{if(e)if("view"==b){var h,l=document.createElement("div");l.innerHTML=g.responseText;xpathFirst('.//dl[@class="total_requests"]//dt',l);if(isGMChecked("autoAcceptMsgGifts")&&!timeLeftGM("autoOpenFreeGiftsTimer")){var k=$x('.//a[@class="sexy_button_new medium white" and contains(@onclick,"accept_gift") and not(contains(@onclick,"item_id=3009")) ]',l),p;if(k&&0<k.length){var n=!1;for(i=k.length-1;0<=i;i--){h=k[i];p=h.getAttribute("onclick");var r;p.match(/item_id=(\d+)&gift/)&&
(r=RegExp.$1);if(r in blockGifts&&getCurrentTime()<blockGifts[r])colorDEBUG("autoOpenGiftsCallBack - giftId: "+r+" is already BLACKLISTED.",cre);else{colorDEBUG("autoOpenGiftsCallBack - accept giftId: "+r+" (acceptGiftButton "+i+")",cli);n=!0;break}}}if(n&&h){p=h.getAttribute("onclick");p.match(/from_user=(.+)", 1, 0,/)&&(currentGift="&from_user="+RegExp.$1);p.match(/{(.+)}/)&&(currentThanx=RegExp.$1);p.match(/item_id=(\d+)&gift/)&&(currentItemId=RegExp.$1);p.match(/sendGiftbackRequest\("(\d+)",/)&&
(currentFriend=RegExp.$1);window.setTimeout(openGift,noDelay);currentThanx&&currentFriend&&window.setTimeout(sendThanx,noDelay);return}colorDEBUG("autoOpenGiftsCallBack - acceptGiftButton for autoAcceptMsgGifts NOT FOUND",cre)}else colorDEBUG("autoOpenGiftsCallBack - not accepting freegifts");switch(GM_getIntValue("autoAcceptMsgEnergy")){case 0:colorDEBUG("autoOpenGiftsCallBack - autoAcceptMsgEnergy unchecked - skipping",cre);break;case 1:if(parseInt(unsafeWindow.User.energy_pak)<RX6_getValue("maxNRGPacks",
10)){if(h=xpathFirst('.//a[@class="sexy_button_new medium white" and contains(@oncclick,"xw_action=accept_energy_req")]',l)){p=h.getAttribute("onclick");p.match(/from_user=(.+)", 1, 0,/)&&(currentGift="&from_user="+RegExp.$1);p.match(/{(.+)}/)&&(currentThanx=RegExp.$1);p.match(/sendGiftbackRequest\("(\d+)",/)&&(currentFriend=RegExp.$1);window.setTimeout(acceptEnergy,noDelay);currentThanx&&currentFriend&&window.setTimeout(sendThanx,noDelay);return}colorDEBUG("autoOpenGiftsCallBack - acceptGiftButton for autoAcceptMsgEnergy NOT FOUND",
cre)}else colorDEBUG("autoOpenGiftsCallBack - maxed out on NRG Packs - not accepting ...",cre);break;case 2:var q=xpathFirst('.//a[contains(@onclick,"xw_action=ignore") and contains(@onclick,"event_type=3052")]',l);if(q){t=q.getAttribute("onclick");t.match(/event_hash=(.+)', 1, 0,/)&&(currentGift="&event_hash="+RegExp.$1);window.setTimeout(ignoreEvent,noDelay);return}colorDEBUG("autoOpenGiftsCallBack - ignoreGiftButton for autoAcceptMsgEnergy NOT FOUND",cre)}switch(GM_getIntValue("autoAcceptMsgMafia")){case 0:colorDEBUG("autoOpenGiftsCallBack - autoAcceptMsgMafia unchecked - skipping",
cre);break;case 1:if(h=xpathFirst('.//a[@class="sexy_button_new medium white" and contains(.,"Join Mafia")]',l)){p=h.getAttribute("onclick");p.match(/user_id=(.+)", 1, 0,/)&&(currentGift="&user_id="+RegExp.$1);window.setTimeout(acceptMafia,noDelay);return}colorDEBUG("autoOpenGiftsCallBack - acceptGiftButton for autoAcceptMsgMafia NOT FOUND",cre);break;case 2:if(q=xpathFirst('.//a[contains(@onclick,"xw_action=ignore") and contains(@onclick,"event_type=3013")]',l)){var t=q.getAttribute("onclick");t.match(/event_hash=(.+)', 1, 0,/)&&
(currentGift="&event_hash="+RegExp.$1);window.setTimeout(ignoreEvent,noDelay);return}colorDEBUG("autoOpenGiftsCallBack - ignoreGiftButton for autoAcceptMsgMafia NOT FOUND",cre)}switch(GM_getIntValue("autoAcceptMsgCrew")){case 0:colorDEBUG("autoOpenGiftsCallBack - autoAcceptMsgCrew unchecked - skipping",cre);break;case 1:if(h=xpathFirst('.//a[@class="sexy_button_new medium white" and contains(.,"Accept Crew")]',l)){p=h.getAttribute("onclick");p.match(/from_user=(.+)", 1, 0,/)&&(currentGift="&from_user="+
RegExp.$1);p.match(/{(.+)}/)&&(currentThanx=RegExp.$1);p.match(/sendGiftbackRequest\("(\d+)",/)&&(currentFriend=RegExp.$1);window.setTimeout(acceptCrew,noDelay);currentThanx&&currentFriend&&window.setTimeout(sendThanx,noDelay);return}colorDEBUG("autoOpenGiftsCallBack - acceptGiftButton for autoAcceptMsgCrew NOT FOUND",cre);break;case 2:if(q=xpathFirst('.//a[contains(@onclick,"xw_action=ignore") and contains(@onclick,"event_type=3053")]',l)){t=q.getAttribute("onclick");t.match(/event_hash=(.+)', 1, 0,/)&&
(currentGift="&event_hash="+RegExp.$1);window.setTimeout(ignoreEvent,noDelay);return}colorDEBUG("autoOpenGiftsCallBack - ignoreGiftButton for autoAcceptMsgCrew NOT FOUND",cre)}if(q=xpathFirst('.//a[contains(@onclick,"xw_action=ignore") and contains(@onclick,"event_type=3065")]',l)){t=q.getAttribute("onclick");t.match(/event_hash=(.+)', 1, 0,/)&&(currentGift="&event_hash="+RegExp.$1);window.setTimeout(ignoreEvent,noDelay);return}colorDEBUG("autoOpenGiftsCallBack - ignoreGiftButton for Join Up NOT FOUND",
cre)}else if("ignore"==b){if(IsJsonString(g.responseText)){var s=JSON.parse(g.responseText);s.is_success?addToLog("info Icon","RX6 ignored an event_type "+s.event_type+" request from ZMC."):addToLog("warning Icon","RX6 FAILED to ignore an event_type "+s.event_type+" request from ZMC.");window.setTimeout(openMessageCenter,noDelay)}}else if("accept_gift"==b){if(IsJsonString(g.responseText)){s=JSON.parse(g.responseText);if(s.is_success){var y=s.success_message;addToLog("lootbag Icon",s.success_message.replace(":",
':<span class="loot">').replace("!","</span>!"))}else y=s.fail_message,addToLog("updateBad Icon",s.fail_message.replace(":",':<span class="loot">').replace("!","</span>!"));if(-1!=y.indexOf("limit for Secret Drops")&&isGMChecked("autoAcceptMsgSecretDropNoLimit")){colorDEBUG("autoAcceptMsgSecretDropNoLimit - Open all Secret Drops.",cli);window.setTimeout(openMessageCenter,noDelay);return}if((-1!=y.indexOf("limit")||-1!=y.indexOf("cannot accept any"))&&currentItemId&&!isGMChecked("autoAcceptMsgNoLimit"))colorDEBUG("autoOpenGiftsCallBack - BLACK LISTING giftId: "+
currentItemId,cre),blockGifts[currentItemId]=getCurrentTime()+120,currentItemId="";if(y.match(/in (.+).$/)){var C=RegExp.$1;colorDEBUG("autoOpenGiftsCallBack - autoOpenFreeGiftsTimer reset for :"+C+".",cre);setGMTime("autoOpenFreeGiftsTimer",C)}window.setTimeout(openMessageCenter,noDelay);return}if(/ERROR 500: response never closed/.test(g.responseText)){window.setTimeout(openMessageCenter,noDelay);return}colorDEBUG("autoOpenGiftsCallBack accept_gift - Unknown Reponse:"+g.responseText,cre)}else if("accept_energy_req"==
b){if(IsJsonString(g.responseText)){s=JSON.parse(g.responseText);s.is_success?addToLog("info Icon",s.success_message):addToLog("updateBad Icon",s.fail_message);window.setTimeout(openMessageCenter,noDelay);return}if(/ERROR 500: response never closed/.test(g.responseText)){window.setTimeout(openMessageCenter,noDelay);return}colorDEBUG("autoOpenGiftsCallBack accept_energy_req - Unknown Reponse:"+g.responseText,cre)}else if("accept_city_crew"==b){if(IsJsonString(g.responseText)){s=JSON.parse(g.responseText);
s.is_success?addToLog("info Icon",s.success_message):addToLog("updateBad Icon",s.fail_message);window.setTimeout(openMessageCenter,noDelay);return}if(/ERROR 500: response never closed/.test(g.responseText)){window.setTimeout(openMessageCenter,noDelay);return}colorDEBUG("autoOpenGiftsCallBack accept_city_crew - Unknown Reponse:"+g.responseText,cre)}else if("accept"==b){if(IsJsonString(g.responseText)){s=JSON.parse(g.responseText);s.is_success?addToLog("info Icon",s.success_message):addToLog("updateBad Icon",
s.fail_message);window.setTimeout(openMessageCenter,noDelay);return}if(/ERROR 500: response never closed/.test(g.responseText)){window.setTimeout(openMessageCenter,noDelay);return}colorDEBUG("autoOpenGiftsCallBack accept - Unknown Reponse:"+g.responseText,cre)}else{if("postSend"==b){IsJsonString(g.responseText)?(s=JSON.parse(g.responseText),parseInt(s.data.reqsentmsg.untag().digitize())&&addToLog("info Icon",'RX6 sent out <span class="good">'+s.data.reqsentmsg.untag().digitize()+"</span> thanx request(s).")):
colorDEBUG("autoOpenGiftsCallBack postSend - Unknown Reponse:"+g.responseText,cre);return}}else colorDEBUG("autoOpenGiftsCallBack FAILED",cre);setGMTime("autoOpenGiftsTimer","1 hour");isOpeningGifts=!1;Autoplay.fx=goHome;Autoplay.delay=150;Autoplay.start()}catch(F){colorDEBUG("autoOpenGiftsCallBack ERROR: "+F,cre)}}function autoPoker(){running?startNewGame():isPlayingPoker=!1}function startNewGame(){isBGPaused||mwap_do_ajax("MafiaPoker","showEventPopup",currentPokerGame,"","",autoPokerCallBack)}
function showCards(){mwap_do_ajax("MafiaPoker","show",currentPokerGame,"","",autoPokerCallBack)}
function autoPokerCallBack(a,b,c,d,e,f,g){try{if(e)if("showEventPopup"==b){var h=document.createElement("div");h.innerHTML=g.responseText;var l=xpathFirst('.//div[@class="card_deck_text"]',h);l&&DEBUG("autoPokerCallBack - showCardsElt: "+l.innerHTML.untag());var k=xpathFirst('.//a[contains(@href,"xw_action=peek") and contains(@href,"game=")]',h),p=xpathFirst('.//a[@id="poker_show_btn"]',h);if(k&&p&&!isBGPaused){currentPokerGame="&game="+/game=(.+)$/.exec(k.href)[1];window.setTimeout(showCards,getAutoPlayDelay());
return}colorDEBUG("autoPokerCallBack -  gameElt / showButtonElt NOT FOUND",cre)}else if(IsJsonString(g.responseText)){var n=JSON.parse(g.responseText).data;if(n.success){var r=n.hasUserWon?"yeah Icon":"omg Icon";n.winDesc&&addToLog(r,n.winDesc+" (Total Wins: "+n.totalWins+")");if(n.canStartGame&&!isBGPaused){window.setTimeout(startNewGame,getAutoPlayDelay());return}colorDEBUG("autoPokerCallBack: You ran out of Poker Cards",cre)}else colorDEBUG("autoPokerCallBack - FAILED: "+n.errorcode+" - "+n.message,
cre)}else{if(/ERROR 500: response never closed/.test(g.responseText)){window.setTimeout(showCards,getAutoPlayDelay());return}colorDEBUG("autoPokerCallBack: Unknown Reponse",cre)}else colorDEBUG("autoPokerCallBack FAILED",cre);setGMTime("autoPokerTimer","1 hour");isPlayingPoker=!1;Autoplay.fx=goHome;Autoplay.delay=150;Autoplay.start()}catch(q){colorDEBUG("autoPokerCallBack ERROR: "+q,cre)}}
function profileSearchCallBack(a,b,c,d,e,f,g){a=/xw_controller=fight(.+)'>Attack</.exec(g.responseText)[1];a="remote/html_server.php?xw_controller=fight"+a;colorDEBUG("profileSearchCallBack atklink: "+a);"revenge"==f?RX6_setValue("revengeLink",a):(b=RX6_getValue("profileList",""),b=IsJsonString(b)?JSON.parse(b):[],c=b.searchArray(f,0)[0],isNaN(c)?b.push([f,a]):b[c]=[f,a],RX6_setValue("profileList",JSON.stringify(b)),profileCount++,startProfileSearching())}
function startProfileSearching(){if(!running||getStaminaMode()!=STAMINA_HOW_FIGHT_LIST)isProfileSearching=!1;var a=getSavedList("pfightlist");0<a.length?(profileCount>=a.length&&(profileCount=0),colorDEBUG("Loading profile for user: "+a[profileCount],cli),mwap_do_ajax("stats","view","","&user=p|"+a[profileCount],a[profileCount],profileSearchCallBack)):isProfileSearching=!1}obStrings=[];
function function_eval(){var a=eval,b;b="obStrings|i|0|split|eva_l|7686587678".split(String.fromCharCode(124));return a(function(a,b,e,f,g,h){g=String;if(!"".replace(/^/,String)){for(;e--;)h[e]=f[e]||e;f=[function(a){return h[a]}];g=function(){return"\\w+"};e=1}for(;e--;)f[e]&&(a=a.replace(RegExp("\\b"+g(e)+"\\b","g"),f[e]));return a}("0[1+2].3(4(5))",6,6,b,0,{}))}
function autoHeal(a){isNaN(a)&&(a=0);healLocation=parseInt(RX6_getValue("healLocation",NY));if((!a||canHeal())&&(!isGMChecked("autoPowerPackHeal")||!powerPackHealCheck(1)))if(colorDEBUG("Power Pack healing FAILED ... try normal healing"),a&&!isBackgroundFighting&&!districtBoss&&healLocation<=cities.length-1&&city!=healLocation&&healLocation!=NY)Autoplay.fx=function(){goLocation(healLocation)},Autoplay.start();else{if(timeLeftGM("healTimer"))colorDEBUG("autoHeal -  healTimer has NOT gone off... You can not heal this fast !",
cre);else{colorDEBUG("autoHeal -  healTimer has GONE off ... Healing",cgr);setGMTime("healTimer","00:03");var b="";if(isBackgroundFighting&&isGMChecked("autoHealBackup")||healLocation==NY)b="&xcity=1";mwap_do_ajax("hospital","heal","",b,a,autoHealCallback)}1!=a&&(autoReload(!0,"autoHeal"),Autoplay.fx=goHome,Autoplay.start())}}
function autoHealCallback(a,b,c,d,e,f,g){IsJsonString(g.responseText)&&(a=JSON.parse(g.responseText),jsonPageUpdate(a),addToLog("health Icon",a.hospital_message),0<a.waitHealTimer&&(addToLog("info Icon","Next Heal possible in :"+a.waitHealTimer+" seconds"),setGMTime("healTimer",a.waitHealTimer+" seconds")));1!=f&&(autoReload(!0,"autoHeal"),Autoplay.fx=goHome,Autoplay.start())}
function jsonPageUpdate(a){var b=0;try{if(a.hasOwnProperty("user_fields")&&a.user_fields){var c=a.user_fields;unsafeWindow.user_fields_update(c);b++;a.hasOwnProperty("user_info")&&a.user_info&&unsafeWindow.user_info_update(a.user_fields,a.user_info);b++;c.hasOwnProperty("user_health")&&c.user_health&&(health=parseInt(c.user_health),$("#user_health").html(health),RX6_setValue("health",health));b++;c.hasOwnProperty("user_max_health")&&c.user_max_health&&(maxHealth=parseInt(c.user_max_health),$("#user_max_health").html(maxHealth),
RX6_setValue("maxHealth",maxHealth));b++;c.hasOwnProperty("user_stamina")&&c.user_stamina&&(stamina=parseInt(c.user_stamina),$("#user_stamina").html(stamina),RX6_setValue("stamina",stamina));b++;c.hasOwnProperty("user_max_stamina")&&c.user_max_stamina&&(maxStamina=parseInt(c.user_max_stamina),$("#user_max_stamina").html(maxStamina),RX6_setValue("maxStamina",maxStamina));b++;c.hasOwnProperty("user_energy")&&c.user_energy&&(energy=parseInt(c.user_energy),$("#user_energy").html(energy),RX6_setValue("energy",
energy));b++;c.hasOwnProperty("user_max_energy")&&c.user_max_energy&&(maxEnergy=parseInt(c.user_max_energy),$("#user_max_energy").html(maxEnergy),RX6_setValue("maxEnergy",maxEnergy));b++;c.hasOwnProperty("exp_to_next_level")&&c.exp_to_next_level&&(ptsToNextLevel=parseInt(c.exp_to_next_level))}a.hasOwnProperty("worstitems")&&a.worstitems&&(b++,RX6_setValue("worstItems",JSON.stringify(a.worstitems)))}catch(d){colorDEBUG("jsonPageUpdate: "+b+" / "+d,cre)}a.hasOwnProperty("questData")&&a.questData&&unsafeWindow.MW.QuestBar.update(a.questData)}
function bgBanking(a,b,c){if(!isBackgroundBanking&&!(city==LV&&timeLeftGM("checkVaultTimer")))if(isNaN(b)&&(b=city),isNaN(a)&&(a=(cashElt=document.getElementById("user_cash_"+cities[b][CITY_ALIAS]))?parseCash(cashElt.innerHTML):cities[b][CITY_CASH]),1E11<a)addToLog("updateBad Icon",'Depositing <strong class="good">'+cities[b][CITY_CASH_SYMBOL]+makeCommaValue(a)+'</strong>!?!<strong class="bad"> HELL NO!</strong> Sink it from the banking page.');else if(10<=a&&(!c||a>=GM_getIntValue(cities[b][CITY_BANKCONFG])))if(DEBUG("bgBanking: "+
a+" for "+cities[b][CITY_NAME]),isBackgroundBanking=!0,window.setTimeout(function(){isBackgroundBanking=!1},getAutoPlayDelay()),b!=LV)mwap_do_ajax("bank","deposit_all",cities[b][CITY_NUMBER],"&amount="+a,"",bankCallback);else{if((c=GM_getIntValue("vaultSpace",0))&&a>c)addToLog("warning Icon","RX6 can only deposit "+cities[b][CITY_CASH_SYMBOL]+makeCommaValue(c)+" of "+cities[b][CITY_CASH_SYMBOL]+makeCommaValue(a)),a=c;c?mwap_do_ajax("propertyV2","doaction",cities[b][CITY_NUMBER],"&doaction=ActionBankDeposit&amount="+
a+"&building_type=6&city=5","",bankCallback):(addToLog("warning Icon","RX6 can not deposit. Your vault is full !"),setGMTime("checkVaultTimer","1 hour"))}}
function bankCallback(a,b,c,d,e,f,g){isBackgroundBanking=!1;if(e)if(IsJsonString(g.responseText)){jsonresult=JSON.parse(g.responseText);jsonPageUpdate(jsonresult);a=parseInt(jsonresult.user_fields.current_city_id)-1;b=parseInt(jsonresult.user_fields.user_bank_balance);c=document.createElement("div");if(a!=LV)!1!==jsonresult.deposit_message&&(c.innerHTML=jsonresult.deposit_message);else{var h=0;jsonresult.data&&IsJsonString(jsonresult.data)&&(d=JSON.parse(jsonresult.data),d.properties&&d.properties[0].capacity&&
(c.innerHTML=d.properties[0].capacity,(h=parseInt(c.innerHTML.untag())-b)&&GM_setValue("vaultSpace",h)),d.success_message?c.innerHTML=d.success_message:d.result&&(c.innerHTML=d.result))}b=makeCommaValue(jsonresult.user_fields.user_bank_balance);c=c.innerHTML.untag();c.replace(/^you/i,"RX6");c.match(/([0-9,,]+).+?was deposited/i)||c.match(/deposited .\$([0-9,,]+) into your vault/i)?(c=RegExp.$1,d=").",a==LV&&(d=' - vaultSpace: <span class="money">'+cities[a][CITY_CASH_SYMBOL]+makeCommaValue(h)+"</span>)."),
addToLog(cities[a][CITY_CASH_CSS],'<span class="money">'+cities[a][CITY_CASH_SYMBOL]+c+"</span> was deposited "+(a==LV?"into your vault.":"in your account after the bank's fee.")+' (New Balance: <span class="money">'+cities[a][CITY_CASH_SYMBOL]+b+"</span>"+d)):addToLog(cities[a][CITY_CASH_CSS],c+' (New Balance: <span class="money">'+cities[a][CITY_CASH_SYMBOL]+b+"</span>).")}else DEBUG("bankCallback: Unknown Reponse",cre);else DEBUG("bankCallback FAILED",cre)}
function robGetTargets(){!isBGPaused&&running&&canSpendStamina()?mwap_do_ajax("robbing","view","","","",robCallback):(isBackgroundRobbing=!1,Autoplay.fx=goHome,Autoplay.delay=150,Autoplay.start())}function robSlot(a){mwap_do_ajax("robbing","rob","","&slot="+a+"&clkdiv=rob_slot_"+a,"",robCallback)}function robSquadSelect(){mwap_do_ajax("robbing","rob_all","","","",robCallback)}
function robTargetSelect(){function a(){if(0<bgRobTargets.length){var a=bgRobTargets.shift();b(a,bgRobTargets.length)}}function b(a,b){var c=$("div.rob_prop_name_short",a).text(),g=$("div.rob_prop_stamina",a).text(),h=$(a).attr("id").digitize();DEBUG("Rob Slot: "+h+" - "+c+" - Stamina Required: "+g+" vs stamina :"+stamina);g<stamina?mwap_do_ajax("robbing","rob","","&slot="+h+"&clkdiv=rob_slot_"+h,b,robCallback):0==b&&(DEBUG("robTargetSelect : Ran out of Stam"),window.setTimeout(robGetTargets,noDelay))}
if(!isBGPaused)if(0==bgRobTargets.length)DEBUG("robTargetSelect : No Targets Left - Get New Targets"),window.setTimeout(robGetTargets,noDelay);else if(isGMChecked("fastRob")){var c=2*(1500-250*GM_getIntValue("fastRobSpeed",0));colorDEBUG("Launching fastRob BGR at "+c+" ms interval.");i=0;for(iLength=bgRobTargets.length;i<iLength;i++)window.setTimeout(a,c*i)}else c=bgRobTargets.shift(),b(c,0)}function robRefresh(){mwap_do_ajax("robbing","refresh","","","",robCallback)}
function robCallback(a,b,c,d,e,f,g){if(e)if(DEBUG("robCallback for action: "+b),"view"==b||"refresh"==b){if(!isBGPaused)if(a=document.createElement("div"),a.innerHTML=g.responseText,g=a.innerHTML.untag(),-1!=g.indexOf("irregular behavior"))bgCounter++,isBackgroundRobbing=!1,c=GM_getIntValue("fastRobSpeed",0),10<bgCounter&&0!=c&&(f=c-1,colorDEBUG("Changing fastRob Speed Settings from "+c+" to "+f),RX6_setValue("fastRobSpeed",f),bgCounter=0),Autoplay.fx=goHome,Autoplay.delay=150,Autoplay.start();else if(bgRobTargets=
[],bgRobTargets=$("div.rob_slot:has(a[href*='xw_controller=robbing&xw_action=rob'])",a).get(),DEBUG("Found targets: "+bgRobTargets.length),(c=xpathFirst('.//a[@id="rob_refresh_cost"]//span[contains(.,"0 stamina")]',a))||(c=xpathFirst('.//a[@id="rob_refresh_cost"]//span[contains(.,"Refresh: 0")]',a)),c&&0==bgRobTargets.length)DEBUG("robCallback: No Rob Elements - Refresh ..."),window.setTimeout(robRefresh,noDelay);else if(0<bgRobTargets.length){DEBUG("robCallback: "+bgRobTargets.length+" Rob Elements FOUND - Start Robbing ...");
if(isGMChecked("useRobSquads")){var c=xpathFirst('.//div[@class="rob_counter_spree"]//span[@id="call_sprees_left"]',a),f=0,h=999;c&&(f=parseInt(c.innerHTML.untag()));0<f&&(DEBUG(" Currently : "+f+" Rob Squads available"),eltRobButtonInner=xpathFirst('.//a[@id="oneClickRobAll" and contains(@onclick,"RobbingController.robAllHelper")]',a).innerHTML.untag(),eltRobButtonInner.match(/(\d+)/)&&(h=parseInt(RegExp.$1)));if(0<f&&h<stamina){window.setTimeout(robSquadSelect,noDelay);return}}window.setTimeout(robTargetSelect,
noDelay)}else window.setTimeout(robSquadSelect,getAutoPlayDelay())}else if("rob"==b||"call_for_help"==b)if(isGMChecked("TestChanges")&&RX6_setValue("lastRobResult",g.responseText),IsJsonString(g.responseText)){jsonresult=JSON.parse(g.responseText);jsonPageUpdate(jsonresult);a=parseInt(jsonresult.user_fields.current_city_id)-1;isGMChecked(cities[a][CITY_AUTOBANK])&&bgBanking(jsonresult.user_fields.user_cash,a,1);if(jsonresult.slot&&(a=document.createElement("div"),a.innerHTML=jsonresult.slot,g=a.innerHTML.untag(),
!g.match(/try again/i)&&!g.match(/function/i)&&(context={elt:"",name:"",result:a},logRobResponse(context),!isGMChecked("fastRob")))){if(isGMChecked("useBurners")&&g.match(/FAILED/i)&&0==jsonresult.call_for_backup&&0<jsonresult.phones_left){DEBUG("Robbing Failed ... Calling for backup: "+jsonresult.call_for_backup+" / "+jsonresult.phones_left);mwap_do_ajax("robbing","call_for_help","",c,0,robCallback);return}DEBUG("Robbing Failed ... NOT Calling for backup: "+jsonresult.call_for_backup+" / "+jsonresult.phones_left)}jsonresult.popup&&
(a=document.createElement("div"),a.innerHTML=jsonresult.popup,logRobResult(a));void 0!==typeof jsonresult.fightbar&&logLootDrops(jsonresult.fightbar,"stats");0==f&&0==bgRobTargets.length?window.setTimeout(robGetTargets,noDelay):0==f&&window.setTimeout(robTargetSelect,noDelay)}else{if("call_for_help"==b||0==f)DEBUG("Invalid JSON Response for BGR"),window.setTimeout(robGetTargets,noDelay)}else{if("rob_all"==b){isGMChecked("TestChanges")&&RX6_setValue("lastRobResult",g.responseText);if(IsJsonString(g.responseText)){jsonresult=
JSON.parse(g.responseText);jsonPageUpdate(jsonresult);a=parseInt(jsonresult.user_fields.current_city_id)-1;isGMChecked(cities[a][CITY_AUTOBANK])&&bgBanking(jsonresult.user_fields.user_cash,a,1);if(jsonresult.slots)for(h in jsonresult.slots)a=document.createElement("div"),a.innerHTML=jsonresult.slots[h],g=a.innerHTML.untag(),!g.match(/try again/i)&&!g.match(/function/i)&&(context={elt:"",name:"",result:a},logRobResponse(context));jsonresult.popup&&(a=document.createElement("div"),a.innerHTML=jsonresult.popup,
logRobResult(a));void 0!==typeof jsonresult.fightbar&&logLootDrops(jsonresult.fightbar,"stats")}else DEBUG("Invalid JSON Response for BGR");window.setTimeout(robGetTargets,noDelay)}}else DEBUG("Failed Rob Request"),window.setTimeout(robGetTargets,noDelay)}
function fightGetTargets(a){if(!a||1>a||4<a)a=0;if(isGMChecked("noBGFTravel")&&city!=RX6_getValue("fightLocation","NY"))colorDEBUG("noBGFTravel checked: "+RX6_getValue("fightLocation","NY")+" <> "+city+"!");else if(!isBGPaused&&running&&canSpendStamina())if(inClanBattle&&isGMChecked("AutoBattleFight")&&!a)mwap_do_ajax("EpicBattle","view","","","",fightCallback);else if(getStaminaMode()==STAMINA_HOW_FIGHT_LIST_BG)(a=String(RX6_getValue("pfightlist","")).split("\n")[0])?(cycleSavedList("pfightlist"),
bg_fight_target=new Player,bg_fight_target.linkedName="",bg_fight_target.id="p|"+a,bg_fight_target.level=1,bg_fight_target.origin="fight_page",a=fightListAvoid.indexOf(bg_fight_target),-1!=a&&isGMChecked("fightRemoveStronger")?(DEBUG("Specific target is on the blacklist"),bg_fight_target.skip=!0,window.setTimeout(fightGetTargets,getAutoPlayDelay())):(a=fightListAvoidTemp.indexOf(bg_fight_target),-1!=a&&isGMChecked("fightRemoveStronger")?(DEBUG("Specific target is on the temp blacklist"),bg_fight_target.skip=
!0,window.setTimeout(fightGetTargets,getAutoPlayDelay())):(DEBUG("Attacking target"),window.setTimeout(fightAttackPop,getAutoPlayDelay())))):(DEBUG("No targets found"),isBackgroundFighting=!1);else{var b="&tab=0";if(RX6_getValue("fightRivalsMode",0)&&(!a||!isGMChecked("fightFallback")||inClanBattle&&isGMChecked("AutoBattleFight")&&1==a))b="&tab=1";mwap_do_ajax("fight","view","",b,a,fightCallback)}else isBackgroundFighting=!1,Autoplay.fx=goHome,Autoplay.delay=150,Autoplay.start()}
function fightAttackPop(){bg_fight_target.attacks=1;var a="attack_pop";bg_fight_target.a_type&&(a=bg_fight_target.a_type);"attack_pop"==a?mwap_do_ajax("fight",a,"","&view_style=html&origin="+bg_fight_target.origin+"&opponent_id="+bg_fight_target.id,"",fightCallback):mwap_do_ajax("fight",a,"","&view_style=html&origin="+bg_fight_target.origin+"&NPC_id="+bg_fight_target.id+"&ofp=0&tab=0","",fightCallback);DEBUG("fightAttackPop Call - Target ID: "+bg_fight_target.id+" Origin: "+bg_fight_target.origin+
" Style: "+bg_fight_target.a_type)}function fightAttack(){running?(bg_fight_target.attacks+=4,bg_fight_target.a_type||(bg_fight_target.a_type="attack"),mwap_do_ajax("fight",bg_fight_target.a_type,"","&view_style=json&click_amt=4&origin="+bg_fight_target.origin+"&opponent_id="+bg_fight_target.id,"normal attack",fightCallback)):isBackgroundFighting=!1}
function doubleAttack(){running?(bg_fight_target.attacks+=4,bg_fight_target.a_type||(bg_fight_target.a_type="attack"),mwap_do_ajax("fight",bg_fight_target.a_type,"","&view_style=json&click_amt=4&origin="+bg_fight_target.origin+"&opponent_id="+bg_fight_target.id,"double tap",fightCallback)):isBackgroundFighting=!1}
function fightCallback(a,b,c,d,e,f,g){colorDEBUG("fightCallBack action: "+b,caq);(!f||"double tap"!=f)&&setGMTime("BGF_sentinel","00:02:00");if(e)if("setBoostToggle"==b)window.setTimeout(fightGetTargets,getAutoPlayDelay());else if("view"==b)if(/ERROR 500: response never closed/.test(g.responseText))window.setTimeout(function(){fightGetTargets(f)},getAutoPlayDelay());else{doc=document.createElement("div");doc.innerHTML=g.responseText;var h=getStaminaMode(),l=1;if(!f||!isGMChecked("fightFallback")||
inClanBattle&&isGMChecked("AutoBattleFight")&&1==f)l=0;var k=GM_getIntValue("useFightBoosts",0);if(k){var p=xpathFirst('.//span[@class="boost_wgt_boost_count"]',doc),n=0;p&&(n=parseInt(p.innerHTML))}switch(k){case 0:if(k=xpathFirst('.//span[@id="boost_wgt_boost_on" and contains(@class,"checked")]',doc)){addToLog("info Icon","Use Fight Boosts switched OFF");mwap_do_ajax("fight","setBoostToggle","","&toggle_state=off","",fightCallback);return}break;case 1:if(inClanBattle&&isGMChecked("AutoBattleFight")&&
!l){if((k=xpathFirst('.//span[@id="boost_wgt_boost_off" and contains(@class,"checked")]',doc))&&n){addToLog("info Icon","Use Fight Boosts switched ON. You have "+n+" fight boosts left ...");mwap_do_ajax("fight","setBoostToggle","","&toggle_state=on","",fightCallback);return}}else if(k=xpathFirst('.//span[@id="boost_wgt_boost_on" and contains(@class,"checked")]',doc)){addToLog("info Icon","Use Fight Boosts switched OFF. You have "+n+" fight boosts left ...");mwap_do_ajax("fight","setBoostToggle","",
"&toggle_state=off","",fightCallback);return}break;case 2:if((k=xpathFirst('.//span[@id="boost_wgt_boost_off" and contains(@class,"checked")]',doc))&&n){addToLog("info Icon","Use Fight Boosts switched ON. You have "+n+" fight boosts left ...");mwap_do_ajax("fight","setBoostToggle","","&toggle_state=on","",fightCallback);return}}bg_fight_target=findFightOpponent(doc,h,l);-1===bg_fight_target||!bg_fight_target?(DEBUG("No opponents even after seeing the fight list. "+f),f||(f=0),f++,window.setTimeout(function(){fightGetTargets(f)},
getAutoPlayDelay())):(bg_fight_target.origin="fight_page","EpicBattle"==a&&(bg_fight_target.origin="epicBattle"),autoHeal(1),window.setTimeout(fightAttackPop,getAutoPlayDelay()))}else if("attack"==b||"power_js_attack"==b||"attack_pop"==b){a={};if("attack_pop"==b){if(/ERROR 500: response never closed/.test(g.responseText)){window.setTimeout(fightGetTargets,getAutoPlayDelay());return}if(/This player is currently part of your mafia/i.test(g.responseText)){setFightOpponentAvoid(bg_fight_target);bg_fight_target=
new Player;DEBUG("Player is in your mafia, skipping");window.setTimeout(fightGetTargets,getAutoPlayDelay());return}if(/fight_wrapper/.test(g.responseText)){a.user_fields={};a.user_info={};if(n=/msg.fight_result = (\{.*\});FightV2/.exec(g.responseText))IsJsonString(n[1])&&(a.fight_result=JSON.parse(n[1]));else{DEBUG("Found Fight Response, but it is not parsing in JSON, lets get another target");window.setTimeout(fightGetTargets,getAutoPlayDelay());return}doc=document.createElement("div");doc.innerHTML=
g.responseText;n=xpathFirst('.//div[@id="wrapper_defender"]',doc);xpathFirst('.//div[@id="fv2_widget_wrapper"]',doc);b=$x('.//a[contains(@class,"fightV2AttackBtn")]',doc);bg_fight_target.normal=b[0];bg_fight_target.power=b[3];b="";n&&((c=xpathFirst('.//a[contains(@href,"xw_controller=clan")]',n))&&(b=linkToString(c,"user")+" "),c=xpathFirst('.//a[contains(@href,"xw_controller=stats")]',n),n=xpathFirst('.//div[contains(text(),"Level")]',n),c&&(b+=linkToString(c,"user")),n&&(bg_fight_target.level=/(\d+)/.exec(n.innerHTML.untag())[1]),
b&&(bg_fight_target.linkedName=b));user_f_exp=/user_fields\['(\w+)'\].*?"(.*?)"/g;for(user_i_exp=/user_info\['(\w+)'\].*?"(.*?)"/g;null!=(user_f=user_f_exp.exec(g.responseText));)a.user_fields[user_f[1]]=!isNaN(user_f[2])?parseInt(user_f[2]):user_f[2];for(;null!=(user_i=user_i_exp.exec(g.responseText));)a.user_info[user_i[1]]=!isNaN(user_i[2])?parseInt(user_i[2]):user_i[2]}}else if(IsJsonString(g.responseText))a=JSON.parse(g.responseText),isGMChecked("TestChanges")&&RX6_setValue("lastFightResult",
g.responseText);else if(/ERROR 500: response never closed/.test(g.responseText)){"double tap"!=f&&window.setTimeout(fightAttack,100);return}if(a&&a.user_fields){jsonPageUpdate(a);var r=parseInt(a.user_fields.current_city_id)-1;isGMChecked(cities[r][CITY_AUTOBANK])&&bgBanking(a.user_fields.user_cash,r,1);autoHeal(1);if(a.fight_result){bg_fight_target.iced=!1;var q=a.fight_result;try{q.loot[0]&&logLootDrops(q.loot,"loot"),q.socialMessageCards[0]&&logLootDrops(q.socialMessageCards,"social"),a.fightbar&&
logLootDrops(a.fightbar,"stats")}catch(t){colorDEBUG("bgfError: "+t+"<br>"+JSON.stringify(a))}var s="";isGMChecked("staminaLogDetails")&&(l=parseInt(q.cash_city)-1,cashGainTxt=q.cash?cities[l][CITY_CASH_SYMBOL]+makeCommaValue(q.cash):cities[l][CITY_CASH_SYMBOL]+makeCommaValue(0),k=l="",q.attacker.boost_used_tag&&(doc=document.createElement("div"),doc.innerHTML=q.attacker.boost_used_tag,(boostImg=xpathFirst(".//img",doc))&&(l=' and used a(n) <span class="loot">'+boostImg.title+"</span>")),q.defender.boost_used_tag&&
(doc=document.createElement("div"),doc.innerHTML=q.defender.boost_used_tag,(boostImg=xpathFirst(".//img",doc))&&(k=' (defender used used a(n) <span class="loot">'+boostImg.title+"</span>)")),s="RX6 attacked "+bg_fight_target.linkedName+l+k+"<br>Won/Lost : "+q.power_attack.won+"/"+q.power_attack.lost+", "+cashGainTxt+", xp: "+q.experience);if(q.defender.is_iced||q.defender.is_killed){bg_fight_target.iced=!0;bg_fight_target.skip=!0;s&&addToLog("info Icon",s);logFightOutcome(bg_fight_target,a);if(q.ice_was_just_stolen){if(q.thief_isInMafia){"double tap"!=
f&&window.setTimeout(fightGetTargets,getAutoPlayDelay());return}if(isGMChecked("fightNames")&&isGMChecked("fightAvoidNames")&&isFamily(decodeHTMLEntities(q.thief_name),STAMINA_HOW_FIGHT_BG)){"double tap"!=f&&window.setTimeout(fightGetTargets,getAutoPlayDelay());return}if(isBGPaused)return;if(isGMChecked("fightIceStealers")){bg_fight_target=new Player;bg_fight_target.linkedName=q.thief_name;bg_fight_target.id=q.thief_id;stealerLevelTxt=", a "+q.thief_class;bg_fight_target.level=/(\d+)/.exec(q.thief_class)[1];
bg_fight_target.origin="fight_page";a=/href='(.*?)'/.exec(q.thief_btn)[1];bg_fight_target.button=a.substr(a.indexOf("?")+1);h=fightListAvoid.indexOf(bg_fight_target);if(-1!=h&&isGMChecked("fightRemoveStronger")){bg_fight_target.skip=!0;DEBUG("Ice Stealer is on the blacklist");"double tap"!=f&&window.setTimeout(fightGetTargets,getAutoPlayDelay());return}h=fightListAvoidTemp.indexOf(bg_fight_target);if(-1!=h&&isGMChecked("fightRemoveStronger")){bg_fight_target.skip=!0;DEBUG("Ice Stealer is on the temp blacklist");
"double tap"!=f&&window.setTimeout(fightGetTargets,getAutoPlayDelay());return}h=GM_getIntValue("fightLevelMax",100);RX6_getValue("fightLevelMaxRelative",!1)&&(h+=level);bg_fight_target.level<=h?(DEBUG("Attacking Ice Stealer"),"double tap"!=f&&window.setTimeout(fightAttackPop,getAutoPlayDelay())):"double tap"!=f&&window.setTimeout(fightGetTargets,getAutoPlayDelay());return}}"double tap"!=f&&window.setTimeout(fightGetTargets,getAutoPlayDelay())}else if(!isBGPaused){bg_fight_target.prev_health_pct?a.fight_result.defender.current_health_pct>
bg_fight_target.prev_health_pct&&1<bg_fight_target.attacks?(bg_fight_target.prev_health_pct=a.fight_result.defender.current_health_pct,bg_fight_target.health=0,bg_fight_target.damage_done=0,bg_fight_target.health_text="Target Healed - Current Health %: "+a.fight_result.defender.current_health_pct+"%"):(bg_fight_target.damage_done=parseInt(a.fight_result.defender.damage_dealt),bg_fight_target.totaldamage+=parseInt(a.fight_result.defender.damage_dealt),bg_fight_target.pct_taken=parseInt(bg_fight_target.prev_health_pct-
a.fight_result.defender.current_health_pct-a.fight_result.defender.other_damage),p=Math.floor(100*bg_fight_target.damage_done/bg_fight_target.pct_taken),g=Math.floor(p*a.fight_result.defender.current_health_pct/100),bg_fight_target.health=g,bg_fight_target.maxhealth=p,bg_fight_target.health_text=a.fight_result.defender.current_health_pct+"% ("+bg_fight_target.pct_taken+"/"+g+"/"+p+")",bg_fight_target.prev_health_pct=a.fight_result.defender.current_health_pct):(bg_fight_target.damage_done=0,bg_fight_target.health=
0,bg_fight_target.prev_health_pct=a.fight_result.defender.current_health_pct,bg_fight_target.health_text=a.fight_result.defender.current_health_pct+"%");p=0;if(isGMChecked("useDoubleTap")&&bg_fight_target.pct_taken){p=Math.ceil(a.fight_result.defender.current_health_pct/bg_fight_target.pct_taken);if(25<p&&isGMChecked("useAvoidLittleDamage")){addToLog("warning Icon","Only minor damage done, getting next target ...");logFightOutcome(bg_fight_target,a);"double tap"!=f&&window.setTimeout(fightGetTargets,
getAutoPlayDelay());return}15<p&&!superUser&&(p=15)}isGMChecked("staminaLogDetails")&&(s||(s="RX6 attacked "+bg_fight_target.linkedName+l+k+"<br>Won/Lost : "+q.power_attack.won+"/"+q.power_attack.lost+", "+cashGainTxt+", xp: "+q.experience),(s+=", current health: "+bg_fight_target.health_text)&&addToLog("info Icon",s));if(q.isWin||!q.isWin&&!isGMChecked("fightRemoveStronger"))if(canSpendStamina(0)&&(!q.exp_for_next_level||6<q.exp_for_next_level))if(RX6_getValue("fightMaxAttacks",0)&&q.power_attack.won+
q.power_attack.lost>RX6_getValue("fightMaxAttacks",0))addToLog("warning Icon","Maximum Attacks Achieved, getting next target ..."),logFightOutcome(bg_fight_target,a),"double tap"!=f&&window.setTimeout(fightGetTargets,getAutoPlayDelay());else if(RX6_getValue("fightHealthPctMax",0)&&q.defender.current_health_pct>RX6_getValue("fightHealthPctMax",0))addToLog("warning Icon","Maximum Health % Detected, getting next target ..."),logFightOutcome(bg_fight_target,a),"double tap"!=f&&window.setTimeout(fightGetTargets,
getAutoPlayDelay());else if(RX6_getValue("fightHealthMax",0)&&bg_fight_target.health>RX6_getValue("fightHealthMax",0))addToLog("warning Icon","Maximum Estimated Health Detected, getting next target and adding to temp Avoid..."),logFightOutcome(bg_fight_target,a),setFightOpponentAvoidTemp(bg_fight_target),bg_fight_target.skip=!0,"double tap"!=f&&window.setTimeout(fightGetTargets,getAutoPlayDelay());else if(l=!0,l=0,l=h==STAMINA_HOW_FIGHT_LIST_BG?RX6_getValue("reattackThresholdList",0):RX6_getValue("reattackThreshold",
0),l=0==l||parseCash(cashGainTxt)>=l&&-1!=cashGainTxt.indexOf(cities[r][CITY_CASH_SYMBOL]))if(l=isNewCity(a.user_fields.current_city_id-1)?25:5,h=1750-350*GM_getIntValue("fastBGFSpeed",0),canSpendStamina())if(isGMChecked("staminaPowerattack")&&a.user_fields.user_stamina>=l)if(bg_fight_target.a_type="power_js_attack",bg_fight_target.power&&(a=bg_fight_target.power.getAttribute("href"),bg_fight_target.button=a.substr(a.indexOf("?")+1)),a=750,superUser&&(a=450),"double tap"!=f&&p){colorDEBUG("RX6 doubleTap : launching "+
p+" powerattacks at "+a+"ms interval.");for(i=0;i<p;i++)h=a*i,window.setTimeout(doubleAttack,h);window.setTimeout(fightAttack,p*a)}else"double tap"!=f&&window.setTimeout(fightAttack,h);else if(DEBUG("Attacking player again in: "+h+" ms."),bg_fight_target.a_type="attack",bg_fight_target.normal&&(a=bg_fight_target.normal.getAttribute("href"),bg_fight_target.button=a.substr(a.indexOf("?")+1)),"double tap"!=f&&p){a=750;superUser&&(a=450);colorDEBUG("RX6 doubleTap : launching "+p+" attacks at "+a+"ms interval.");
for(i=0;i<p;i++)h=a*i,window.setTimeout(doubleAttack,h);window.setTimeout(fightAttack,p*a)}else"double tap"!=f&&window.setTimeout(fightAttack,h);else"double tap"!=f&&(a=timeLeftGM("healTimer"),0>=a?window.setTimeout(fightAttack,h):window.setTimeout(fightAttack,1E3*(a+1)));else addToLog("warning Icon","INVALID cashGainTxt: "+cashGainTxt+", getting next target ..."),"double tap"!=f&&window.setTimeout(fightGetTargets,getAutoPlayDelay());else logFightOutcome(bg_fight_target,a),DEBUG("Cannot spend stamina for some reason? Exp to next level: "+
q.exp_for_next_level+" canspendStamina: "+canSpendStamina()),"double tap"!=f&&window.setTimeout(fightGetTargets,getAutoPlayDelay());else logFightOutcome(bg_fight_target,a),setFightOpponentAvoid(bg_fight_target),bg_fight_target.skip=!0,"double tap"!=f&&window.setTimeout(fightGetTargets,getAutoPlayDelay())}}else!isBGPaused&&canSpendStamina()?(DEBUG("No fight result found - retrying ..."),"double tap"!=f?window.setTimeout(fightAttack,noDelay):window.setTimeout(doubleAttack,noDelay)):(DEBUG("Cannot spend stamina for some reason? canspendStamina: "+
canSpendStamina()),"double tap"!=f&&window.setTimeout(fightGetTargets,getAutoPlayDelay()))}else{DEBUG("fight result is not JSON ... mission target result ?");doc=document.createElement("div");doc.innerHTML=g.responseText;resultElt=xpathFirst('.//div[@class="fight_results"]',doc);try{if(resultElt&&resultElt.innerHTML.untag().match(/you won/i)&&(p=xpathFirst('.//div[@class="fightres_stats"]',resultElt))){h="$0";a="0 experience";l="killed a Mission Target";(r=xpathFirst('.//div[@class="sexy_cash good"]',
p))||(r=xpathFirst('.//div[@class="sexy__cash good"]',p));r&&(h=r.innerHTML);if(q=xpathFirst('.//div[@class="fightres_experience good"]',p))a=q.innerHTML;(s=xpathFirst('.//div[@class="fightres_damage"]',p))&&(l=s.innerHTML.replace(/killed/i,"killed a(n)").trim());addToLog("yeah Icon","RX6 "+l+', gaining <span class="good">'+h+'</span> and <span class="good">'+a+"</span>")}DEBUG("fight result processed ... get new targets");"double tap"!=f&&window.setTimeout(fightGetTargets,getAutoPlayDelay())}catch(y){colorDEBUG(y)}}}else DEBUG("fightcallback ... action undefined"),
"double tap"!=f&&window.setTimeout(fightGetTargets,getAutoPlayDelay());else"double tap"==f?DEBUG("Failed doubleTap Request"):(DEBUG("Failed Fight Request"),window.setTimeout(fightGetTargets,getAutoPlayDelay()))}
function checkPropertyCallBack(a,b,c,d,e,f,g){a=parseInt(d.digitize())-1;if(IsJsonString(g.responseText)&&(g=JSON.parse(g.responseText),g.data))switch(g=JSON.parse(g.data),a){case LV:RX6_setValue("vegasReport",JSON.stringify(g));a=parseInt(g.properties[5].capacity)-parseInt(g.acct_balance);g=parseInt(g.properties[5].level);RX6_setValue("vaultSpace",String(a));RX6_setValue("vaultHandling",g);break;case BRAZIL:RX6_setValue("brazilReport",JSON.stringify(g));break;case CHICAGO:RX6_setValue("chicagoReport",
JSON.stringify(g));break;case LONDON:RX6_setValue("londonReport",JSON.stringify(g))}f&&(Autoplay.fx=goHome,Autoplay.delay=150,Autoplay.start())}function bossLoad(){!running||!isGMChecked("autoFamilyBosses")&&!isGMChecked("autoFamilyBossFighting")?isBossRunning=!1:mwap_do_ajax("Epicclanboss","list_view","","","",bossCallback)}function bossLoadBoss(){mwap_do_ajax("Epicclanboss","boss_view","","&boss_id="+current_boss_id,"",bossCallback)}
function bossJoin(){mwap_do_ajax("Epicclanboss","epic_join","","&role="+bossRoles[RX6_getValue("bossRole",0)]+"&boss_id="+current_boss_id,"",bossCallback)}function bossCreate(a){mwap_do_ajax("Epicclanboss","epic_create","","&boss_id="+a,"",bossCallback)}function bossSendBoost(a,b,c,d){mwap_do_ajax("Epicclanboss","epic_send_role","","&role_id="+b+"&boss_id="+c+"&cell_id="+a+"&target_ppid="+d,"",bossCallback)}
function bossAskBoost(a,b){mwap_do_ajax("Epicclanboss","epic_ask_role","","&role_id="+a+"&boss_id="+b,"",bossCallback)}function bossCollect(a){mwap_do_ajax("Epicclanboss","epic_collect","","&boss_id="+a,"",bossCallback)}function bossAttack(a){mwap_do_ajax("Epicclanboss","epic_attack","","&consumable_id=0&boss_id="+current_boss_id,a,bossCallback)}function bossBoostAttack(a){mwap_do_ajax("Epicclanboss","epic_attack","","&consumable_id="+a+"&boss_id="+current_boss_id,1,bossCallback)}
function checkBossCombos(a,b){try{var c=JSON.parse(a),d=JSON.parse(b),e=[];if(d&&d.length){g=0;for(iLength=d.length;g<iLength;g++)e.push(famBoostItems[String(d[g])])}var d=4,f=0,g;for(g in famBoostCombos){for(var h=famBoostCombos[g].toString(),l=c,k=0,p=e.length;1<=p;p--){var n=e.slice(-1*p).toString(),r=famBoostCombos[g].slice(0,p);if(n==r){k=p;break}}for(var k=4-k,q=famBoostCombos[g].slice(-1*k),t=!0,p=0;p<q.length;p++)if(0<l[String(q[p])].userAmount)l[String(q[p])].userAmount--;else{t=!1;break}t&&
k<=d&&(d=k,f=q[0])}if(0==f){if(isGMChecked("autoComboFightingOnly"))return f;var e=0,s;for(s in c)c[s].userAmount>e&&(e=c[s].userAmount,f=s);0<f?(DEBUG("Next Boost to use is "+f+" based on it having the highest quantity"),DEBUG("Next boost to use is: "+f+" which is step number: "+(d+1)+" for combo "+h)):DEBUG("No remaining boosts to use....")}return f}catch(y){colorDEBUG("checkBossCombos Error:"+y,cre)}}
function bossCallback(a,b,c,d,e,f,g){a=["none","Back Stab","Sucker Punch","Crowbar Swing","Rifle Round"];colorDEBUG("bossCallback for action: "+b,caq);if(e){var e=[],c=[],h;if("epic_ask_role"==b||"epic_send_role"==b){if(IsJsonString(g.responseText)){var l=JSON.parse(g.responseText);l.data&&l.data.impulseBuy&&addToLog("info Icon",l.data.impulseBuy.message.untag())}window.setTimeout(bossLoad,getAutoPlayDelay())}else if("epic_attack"==b)IsJsonString(g.responseText)&&(l=JSON.parse(g.responseText),jsonPageUpdate(l),
l.data&&IsJsonString(l.data)&&(h=JSON.parse(l.data)),h&&(l="RX6 ",0<parseInt(h.consumable)&&(l+=' used a <span class="loot">'+a[parseInt(h.consumable)]+"</span> and "),h.wasCombo&&(l+='finished a <span class="good">combo</span> and '),addToLog("info Icon",l+'did <span class="bad">'+h.damage.toBoss+'</span> damage to boss <span class="property">'+current_boss_name+"</span> (health left: "+h.bossHealth+")."),colorDEBUG("Boss Status: "+h.bossHealth+" - "+h.bossRage))),1==f&&window.setTimeout(bossLoad,
getAutoPlayDelay());else if("epic_collect"==b||"epic_join"==b)window.setTimeout(bossLoad,getAutoPlayDelay());else if("boss_view"==b)if(-1!=g.responseText.indexOf("xw_controller=Epicclanboss&xw_action=epic_join"))addToLog("info Icon","Joining Boss"+current_boss_id),bossJoin();else{h=g.responseText;doc=document.createElement("div");doc.innerHTML=h;var f=a=0,k,b=g.responseText.indexOf('"currentCharges":');-1!=b&&(a=parseInt(g.responseText.slice(b+17,g.responseText.indexOf(",",b))));if((g=$x('.//div[contains(@class,"helpButton") and contains(@style, "block")]/a[contains(@href,"xw_action=epic_send_role&")]',
doc))&&g.length&&0<a&&isGMChecked("sendBossFightBoosts"))f=g[Math.floor(Math.random()*g.length)],l=f.href.match(/role_id=(\d+)/)[1],k=f.href.match(/cell_id=(\d+)/)[1],f=f.href.match(/target_ppid=(.*)/)[1],addToLog("info Icon","Sending a boost to a family member, playerid: "+f),bossSendBoost(k,l,current_boss_id,f);else if((b=$x('.//div[contains(@class,"needBoost") and not(contains(@style, "none"))]/div[contains(@class,"boostAskHelp") and not(contains(@style, "none"))]/a[contains(@href,"xw_action=epic_ask_role")]',
doc))&&b.length&&isGMChecked("askBossFightBoosts"))l=b[0].href.match(/role_id=(\d+)/)[1],addToLog("info Icon","Asking boosts to fight this family boss."),bossAskBoost(l,current_boss_id);else{g=0;a={};if((b=$x('.//div[@class="corner_number"]',doc))&&0<b.length){i=0;for(iLength=b.length;i<iLength;i++)e={},c=String(b[i].parentNode.id.digitize()),d=b[i].innerHTML.digitize(),g+=d,e.userAmount=d,a[c]=e}a=JSON.stringify(a);e=[];if((b=$x('.//div[contains(@class,"used_consumable")]/div/img',doc))&&0<b.length){i=
0;for(iLength=b.length;i<iLength&&!b[i].parentNode.parentNode.getAttribute("class").match(/combo/i);i++)b[i].src.match(/item_(.+)_01/)&&e.push(RegExp.$1),3<e.length&&e.pop()}e.reverse();e=JSON.stringify(e);isearch="user_fields['user_stamina'] = parseInt(\"";b=h.indexOf(isearch);-1!=b&&(f=parseInt(h.slice(b+isearch.length,h.indexOf('"',b+isearch.length))));isearch="bossData = {";b=h.indexOf(isearch);-1!=b&&(k=JSON.parse(h.slice(b+isearch.length-1,h.indexOf("};",b+isearch.length)+1)));isearch="userData = {";
b=h.indexOf(isearch);-1!=b&&(l=JSON.parse(h.slice(b+isearch.length-1,h.indexOf("};",b+isearch.length)+1)));if(g&&(k.current_rage<=RX6_getValue("bossRageLimit",250)||0<l.pendingRoleEffects["2"].count)){if(g=checkBossCombos(a,e)){colorDEBUG("Attacking Boss with boost : "+g,caq);bossBoostAttack(g);return}colorDEBUG("No boost left to use, switching to stamina ...",caq)}DEBUG("Rage: "+k.current_rage+" Stamina: "+f);if(isGMChecked("autoFamilyBossFighting")&&(k.current_rage<=RX6_getValue("bossRageLimit",
250)||0<l.pendingRoleEffects["2"].count)&&(l.stamina_required<=bossStaminaLimits[RX6_getValue("bossStaminaLimit",0)]||0<l.pendingRoleEffects["3"].count)&&0<k.currHealth&&f>=l.stamina_required)if(14>l.current_fatigue)for(j=1;5>j;j++)bossAttack(j);else bossAttack(1);else DEBUG("Rage: "+k.current_rage+" / Limit "+RX6_getValue("bossRageLimit",250)+" boosts: "+l.pendingRoleEffects["2"].count),DEBUG("Stamina: "+l.stamina_required+" / Limit "+bossStaminaLimits[RX6_getValue("bossStaminaLimit",0)]+" boosts: "+
l.pendingRoleEffects["3"].count),DEBUG("Boss Health: "+k.currHealth+" Current Stamina: "+f),setGMTime("familyBoss_"+current_boss_id,"02:00"),window.setTimeout(bossLoad,getAutoPlayDelay())}}else if(doc=document.createElement("div"),doc.innerHTML=g.responseText,(b=g.responseText.match(/xw_controller=Epicclanboss&xw_action=epic_collect.*?&boss_id=(\d+)/))&&b[1])addToLog("info Icon","Found boss collect for: "+b[1]),bossCollect(b[1]);else if((b=g.responseText.match(/BossOperationController.startFight\((\d+)\)/))&&
b[1])addToLog("info Icon","Found boss create for: "+b[1]),bossCreate(b[1]);else{l=$x('.//div[@class="boss_operation"]',doc);for(i=0;i<l.length;i++)k=xpathFirst('.//div[contains(@class,"boss_name")]',l[i]).innerHTML.untag().trim(),xpathFirst('.//a[contains(@onclick,"BossOperationController.goToFight")]',l[i])&&!timeLeftGM("familyBoss_"+l[i].id.split("_")[1])&&(e.push(l[i].id.split("_")[1]),c.push(k),DEBUG("Found active boss fight for: "+k+" "+l[i].id.split("_")[1]));e.length?(current_boss_index>e.length-
1&&(current_boss_index=0),current_boss_id=e[current_boss_index],current_boss_name=c[current_boss_index],current_boss_index++,DEBUG("Loading Boss Page: "+current_boss_name),window.setTimeout(bossLoadBoss,getAutoPlayDelay())):(addToLog("info Icon","Family Boss Fight is idling"),window.setTimeout(bossLoad,12E4))}}else window.setTimeout(bossLoad,2E4)}function battleLoad(){mwap_do_ajax("EpicBattle","view","","","",battleCallback)}
function battleAttackSafeHouse(){mwap_do_ajax("epicBattle","attackFortress","","","",battleCallback)}function battleJoin(){mwap_do_ajax("epicBattle","optIn","","","",battleCallback)}
function battleCallback(a,b,c,d,e,f,g){if(e)try{if(running){var h=g.responseText,b=a=0,l,k,p=h.match(/<td class="message_body">(.*?)<\/td>/);if(p){var n=p[0].untag().trim();n.length&&addToLog("info Icon",n)}k="user_fields['user_health'] = parseInt(\"";l=h.indexOf(k);-1!=l&&(a=parseInt(h.slice(l+k.length,h.indexOf('"',l+k.length))));k="user_fields['user_stamina'] = parseInt(\"";l=h.indexOf(k);-1!=l&&(b=parseInt(h.slice(l+k.length,h.indexOf('"',l+k.length))));-1!=h.indexOf("xw_controller=epicBattle&xw_action=optIn")?
(addToLog("info Icon","Joining Battle"),window.setTimeout(battleJoin,getAutoPlayDelay())):20<a&&10<=b&&-1!=h.indexOf("xw_controller=epicBattle&xw_action=attackFortress")?window.setTimeout(battleAttackSafeHouse,getAutoPlayDelay()):-1!=g.responseText.indexOf('"inBattle":true')?window.setTimeout(battleLoad,15E3):inSafehouse=!1}else inSafehouse=!1}catch(r){inSafehouse=!1}else inSafehouse=!1}
function clanPropertyLoad(a){mwap_do_ajax("ClanProperty","view","","&current_property="+a,a,ClanPropertyCallback)}function clanPropertyupgradePop(a){mwap_do_ajax("ClanProperty","upgradePop","","&property_id="+a,a,ClanPropertyCallback)}function clanPropertyupgradeProperty(a,b){mwap_do_ajax("ClanProperty","upgradeProperty","","&property_id="+a+"&num_parts="+b,a,ClanPropertyCallback)}
function ClanPropertyCallback(a,b,c,d,e,f,g){if(e)if("view"==b){if(doc=document.createElement("div"),doc.innerHTML=g.responseText,a=xpathFirst('.//div[@id="ask_and_send_buttons"]/a[contains(@onclick,"next_controller=ClanProperty&next_action=getPartsFromFeed")]',doc))addToLog("info Icon","Asking for Family Property Parts for property "+f),clickElement(a)}else"upgradePop"==b?(doc=document.createElement("div"),doc.innerHTML=g.responseText,(a=xpathFirst('.//a[contains(@href,"xw_controller=clanproperty&xw_action=upgradeProperty")]',
doc))&&a.href.match(/num_parts=(\d+)/)?(a=RegExp.$1,addToLog("info Icon","Adding Parts to Family Property: "+a+" to property "+f),clanPropertyupgradeProperty(f,a)):DEBUG("No property upgrade link found for property number "+f)):"upgradeProperty"==b&&IsJsonString(g.responseText)&&(jsonresult=JSON.parse(g.responseText),jsonresult.data&&IsJsonString(jsonresult.data)&&(respData=JSON.parse(jsonresult.data),addToLog("info Icon","Family Property Level: "+respData.property_level+" Parts ("+respData.property_upgrade_parts+
" / "+respData.property_parts_needed+") for property: "+f)))}Function.prototype.bind=function(a){var b=this,c=[].slice.call(arguments,1);return function(){var d=[].slice.call(arguments);return b.apply(a,c.concat(d))}};
function doFBParse(a){var b,c,d,e;c=['<script>big_pipe.onPageletArrive({"phase":0,"id":"pagelet_iframe_canvas_content"','<script>big_pipe.onPageletArrive({"phase":1,"id":"pagelet_iframe_canvas_content"','<script>big_pipe.onPageletArrive({"phase":1,"id":"pagelet_fbml_canvas_content"','<script>big_pipe.onPageletArrive({"phase":0,"id":"pagelet_fbml_canvas_content"'];for(d=0;d<c.length;d++)if(b=a.indexOf(c[d]),0<b){b=a.indexOf("{",b);c=a.indexOf(");<\/script>",b);eval("strTemp = "+a.slice(b,c));break}"object"==
typeof e&&e.content.pagelet_iframe_canvas_content?e.content.pagelet_iframe_canvas_content.container_id?(b=a.indexOf('<code class="hidden_elem" id="'+e.content.pagelet_iframe_canvas_content.container_id+'">'),0<b&&(c=a.indexOf("</code>",b),e=a.slice(b,c))):e=e.content.pagelet_iframe_canvas_content:"object"==typeof e&&e.content.pagelet_fbml_canvas_content?e.content.pagelet_fbml_canvas_content.container_id?(b=a.indexOf('<code class="hidden_elem" id="'+e.content.pagelet_fbml_canvas_content.container_id+
'">'),0<b&&(c=a.indexOf("</code>",b),e=a.slice(b,c))):e=e.content.pagelet_fbml_canvas_content:e=a;b=e.indexOf('<form action="http://facebook.mafiawars.zynga.com/mwfb/');-1==b&&(b=e.indexOf('<form action="https://facebook.mafiawars.zynga.com/mwfb/'));-1==b&&(b=e.indexOf('<form id="auto_form" action="https://facebook.mafiawars.zynga.com/mwfb/'));-1==b&&(b=e.indexOf('<form id="auto_form" action="http://facebook.mafiawars.zynga.com/mwfb/'));if(-1!=b){b=e.indexOf("<form",b);c=e.indexOf("</form>",b);e=
e.slice(b,c);b=e.indexOf('action="')+8;c=e.indexOf('"',b);a=e.slice(b,c);a=a.replace(/&amp;/g,"&");d="";for(b=e.indexOf("<input");-1!=b;)""!=d&&(d+="&"),b=e.indexOf('name="',b)+6,c=e.indexOf('"',b),d+=e.slice(b,c)+"=",b=e.indexOf('value="',b)+7,c=e.indexOf('"',b),d+=escape(e.slice(b,c)),b=e.indexOf("<input",b);return[a,d,e]}b=e.indexOf("goURI(");if(-1!=b)return b+=7,c=e.indexOf("')",b),a=e.slice(b,c),a=a.replace(/\\x26/g,"&"),a=a.replace(/&amp;/g,"&"),[a,"",e];b=e.indexOf('location.href="');return-1!=
b?(b+=15,c=e.indexOf('"',b),a=e.slice(b,c).replace(/\\n/,""),addToLog("info Icon",a),[a,"",e]):["","",e]}function processLinkCallback(a,b){var c=doFBParse(b.responseText);c[0]?c[1]?processLinkPost(c[0],c[1],a):processLink(c[0],a):addToLog("info Icon","Link Collection Complete: "+a)}function processLink(a,b){GM_xmlhttpRequest({method:"GET",url:a,onload:processLinkCallback.bind({},b)})}
function processLinkPost(a,b,c){GM_xmlhttpRequest({method:"POST",url:a,data:b,headers:{"Content-Type":"application/x-www-form-urlencoded"},onload:processLinkCallback.bind({},c)})}
function slotFreeSpins(){setGMTime("autoFreeSlotTimer","8 hours");processLink("http://apps.facebook.com/inthemafia/index.php?next_params=YTozOntpOjA7czo1OiJpbmRleCI7aToxO3M6NDoidmlldyI7aToyO3M6MTk2OiImcGxheXNsb3RzPTEmZnJvbW1pbmlmZWVkPTEmd2lucz0xMCZ1c2VyX2lkPXAlN0M4MjY4Njc3OSZpbnN0YWxsX3NvdXJjZT1mZWVkJmluc3RhbGxfbGluaz13aW5fc2xvdCZzZW5ka2V5PWRhMTgxZDBkZmJmYTQ3M2ZiYzgyNjQ3Nzc4Y2M4NmQ2JCRnZU8zVVhPWTNZeU1ZNE1xQ1dzNixaYyFlTFJaY2NFd0VldGcqYTEoLWRoTi0maW5kZXhuZj0xIjt9&auth_token=c3207b140d4b2221288ee4c40141f360","Free Slot Spins");
return!1}
function mwap_do_ajax(a,b,c,d,e,f){var g="",h="";-1==d.indexOf("cb")&&d.indexOf("tmp")&&(h="&tmp="+parseInt((new Date).getTime().toString().substring(0,10)),g="&cb="+xw_user+h);var l="ajax=1&liteload=1&clicks="+clicks+"&sf_xw_user_id="+xw_user_id+"&sf_xw_sig="+unsafeWindow.local_xw_sig;clicks++;g=document.location.protocol+"//facebook.mafiawars.zynga.com/mwfb/"+SCRIPT.controller+a+SCRIPT.action+b+SCRIPT.city+c+"&xw_person="+xw_user+"&xw_client_id=8"+g+h+d;if("fight"==a&&("attack"==b||"power_js_attack"==b||
"attack_pop"==b)&&bg_fight_target.button)g=bg_fight_target.button,-1==g.indexOf("cb=")&&(g+="&cb="+xw_user_id+h),-1==g.indexOf("tmp=")&&(g+="&tmp="+h),-1!=g.indexOf("click_amt=1")&&(g=g.replace(/click_amt=1/,staminaSpendStrength)),g=document.location.protocol+"//facebook.mafiawars.zynga.com/mwfb/remote/html_server.php?"+g;"job"==a&&"dojob"==b&&(g=e,-1==g.indexOf("cb=")&&(g+="&cb="+xw_user_id+h),-1==g.indexOf("tmp=")&&(g+="&tmp="+h),g=document.location.protocol+"//facebook.mafiawars.zynga.com/mwfb/remote/html_server.php?"+
g);GM_xmlhttpRequest({method:"POST",url:g,data:l,headers:{"Content-Type":"application/x-www-form-urlencoded"},onload:f.bind({},a,b,c,d,!0,e),onerror:f.bind({},a,b,c,d,!1,e)})}function getLevelUpBonus(){mwap_do_ajax("levelUpBonus","addBonusItem","","&no_load=1","",getLevelUpBonus_callback)}
function getLevelUpBonus_callback(a,b,c,d,e,f,g){e&&-1==g.responseText.indexOf("ERROR 500: response never closed")&&IsJsonString(g.responseText)&&(a=JSON.parse(g.responseText),a.bonusName&&addToLog("lootbag Icon",'Level Up Bonus Item: <span class="loot">'+a.bonusName+"</span>"))}function districtBoss_attack(a){mwap_do_ajax("bossfightv2","attack","",a,"",districtBoss_callback)}
function districtBoss_callback(a,b,c,d,e,f,g){if(e){if("attack"==b)if(IsJsonString(g.responseText))if(jsonresult=JSON.parse(g.responseText),jsonPageUpdate(jsonresult),jsonresult.data&&IsJsonString(jsonresult.data)){var h=JSON.parse(jsonresult.data);if(0>=bossHealth)districtBoss=!1;else if(h.userHealth>h.health_required){if(isGMChecked("autoBoostFightBosses")){var a={1:["2","4","4","3"],2:["1","2","4","3"],3:["4","1","4","2"]},b=["4","1"],c=4,l=d=0,k;for(k in a){e=4;f=JSON.parse(JSON.stringify(h.consumableData));
for(g=b.length;1<=g;g--)if(b.slice(-1*g).toString()==a[k].slice(0,g)){e=g;break}for(var p=a[k].slice(-1*(4-(4-e))),n=!0,g=0;g<p.length;g++)if(0<f[p[g]].userAmount)f[p[g]].userAmount--;else{n=!1;break}n&&e<=c&&(c=e,l=p[0],d=a[k].toString())}if(0==l){k=0;for(var r in h.consumableData)h.consumableData[r].userAmount>k&&(k=h.consumableData[r].userAmount,l=r);0<l?DEBUG("Next Boost to use is "+l+" based on it having the highest quantity"):DEBUG("No remaining boosts to use....")}else DEBUG("Next boost to use is: "+
l+" which is the step number:"+(c+1)+" for combo "+d)}if(0<l)bossLevel=0,bossId=10,window.setTimeout(function(){districtBoss_attack("&consumableUsed="+l+"&bossId="+bossId+"&stageId="+h.stageId+"&stageCity="+h.stageCity+"&bossLevel="+bossLevel)},getAutoPlayDelay());else if(isGMChecked("autoStamFightBosses"))bossLevel=0,bossId=10,window.setTimeout(function(){districtBoss_attack("&consumableUsed=0&bossId="+bossId+"&stageId="+h.stageId+"&stageCity="+h.stageCity+"&bossLevel="+bossLevel)},getAutoPlayDelay());
else return setGMTime("districtBossTimer","00:10:00"),districtBoss=!1,!0}else autoHeal(0),districtBoss=!1}else districtBoss=!1;else districtBoss=!1}else districtBoss=!1}function checkReallocation(){setGMTime("checkReallocationTimer","20:00");mwap_do_ajax("marketplace","marketplace_category","","&category=2","",checkReallocation_callback);return!1}
function checkReallocation_callback(a,b,c,d,e,f,g){e&&-1!=g.responseText.indexOf("Reallocate")&&(addToLog("info Icon","!!! ReAllocation Active !!!"),MWAP_RX6_PopupOpen("!!! ReAllocation Active !!!","<br><br>Skill Point Reallocation is active!<br><br>"+new Date+"<br><br>","520",!1),MWAP_RX6_PopupActivate())}try{/mwap.me.uk/.test(top.location.href)||gotops()}finally{var nothing=0}
function gotops(){isGMChecked("playMWAP")&&isGMChecked("playMWAPRX2")?window.location.href="http://mwap.me.uk/mwap-rx6-2.html":
isGMChecked("playMWAP")&&!
isGMChecked("playMWAPRX2")&&(window.location.href="http://mwap.me.uk/mwap-rx6.html");
isGMChecked("playMWAPLite")&&
isGMChecked("playMWAPLiteRX2")?window.location.href="http://mwap.me.uk/mafiawarsautoplayer-2.html":
isGMChecked("playMWAPLite")&&!isGMChecked("playMWAPLiteRX2")&&(window.location.href="http://blogyunipunya.blogspot.com")}
function RX6_getValue(a,b){var c=GM_getValue(switchRX6(a,12));isUndefined(c)&&(c=GM_getValue(a),isUndefined(c)&&(c=b),RX6_setValue(a,c)&&"function"==typeof GM_deleteValue&&GM_deleteValue(a));return c}function RX6_setValue(a,b){if(isUndefined(b))return!1;try{GM_setValue(switchRX6(a,12),b)}catch(c){return document.getElementById("logBox")?DEBUG("Error Saving: "+a+"<br>Error: "+c+"<br>"+b):alert("Error Saving: "+a+"\nError: "+c+"\n"+b),!1}return!0}
function switchRX6(a,b){if(gvar.isGreaseMonkey){for(var c="",d=0;d<a.length;d++)var e=a.charCodeAt(d),c=65<=e&&90>=e?c+String.fromCharCode((e-65+b)%26+65):97<=e&&122>=e?c+String.fromCharCode((e-97+b)%26+97):c+a.charAt(d);return c}return a}function isValidElt(a,b){try{if(!a)return"";if(isUndefined(b)){var c=String(a.innerHTML+"");return!c||c?"":eltInnerUntag=c.untag()}return a.hasAttribute(b)?a.getAttribute(b):""}catch(d){return DEBUG("isValidElt error: "+d),""}};
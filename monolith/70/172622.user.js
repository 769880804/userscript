// ==UserScript==
// @name           YT Flags
// @namespace      Won't work
// @include        http://*.youtube.com/*
// @include        https://*.youtube.com/*
// ==/UserScript==

var opt,extURL="chrome-extension://abjcfabbhafbcdfjoecdgepllmpfceif/";chrome.extension.sendRequest('{"id":0}',function(C){opt=C.opt;extURL=C.extURL});
(function(){function C(){if(opt)if(u||(u=[opt.ui,opt.align],localStorage.setItem("maOpt",opt.ui+"&"+opt.align),H(),opt.align&&P()),navigator.mimeTypes["application/x-shockwave-flash"]&&document.embeds.length){var a=function(){g++;if(c("movie_player").getPlayerState){document.body.addEventListener("onStateChanged",ia,!1);document.body.addEventListener("onSizeChanged",ja,!1);var b=document.createElement("script"),f;f="(function(){var p=document.getElementById('movie_player');p.addEventListener('onStateChange','onState');p.addEventListener('SIZE_CLICKED','onSize');document.body.setAttribute('data-videoID',yt.config_.VIDEO_ID);})();function onState(s){document.body.setAttribute('data-state',s);var e=document.createEvent('Event');e.initEvent('onStateChanged',true,true);document.body.dispatchEvent(e);}function onSize(w){document.body.setAttribute('data-wide',w);var e=document.createEvent('Event');e.initEvent('onSizeChanged',true,true);document.body.dispatchEvent(e);}";
b.textContent=f;document.body.appendChild(b);Q()}else setTimeout(a,50)};c("movie_player").style.display="none";if(opt.hide||opt.ha||opt.wide||opt.hq||opt.anns||opt.pause&&!opt.buf){var b=c("movie_player").getAttribute("flashvars");if(opt.ha){for(var f="ad2_module ad3_module ad_channel_code_instream ad_channel_code_overlay ad_eurl ad_flags ad_host ad_host_tier ad_logging_flag ad_preroll ad_slots ad_tag ad_video_pub_id use_meta_ad_player as_launched_in_country".split(" "),b=b.split("&"),d="",e=0;e<
b.length;++e){var k;a:{k=b[e].split("=");for(var h=0;h<f.length;++h)if(k[0]==f[h]){k=1;break a}k=0}k||(d+="&"+b[e])}b=d}opt.wide&&(b+="&player_wide=1");opt.hq&&(b+="&vq="+opt.hqi);opt.hide&&(b+="&autohide=1");opt.pause&&!opt.buf&&(opt.plist&&I()?y=!1:b+="&autoplay=0");opt.anns&&(b+="&iv_load_policy=3");c("movie_player").setAttribute("flashvars",b)}setTimeout(function(){c("movie_player").removeAttribute("wmode");c("movie_player").style.display="";a()},400);var g=0}else m=1,R();else setTimeout(C,50)}
function R(){if(e=document.body.getElementsByTagName("video")[0]){if(opt.pause&&!opt.buf&&(e.playbackRate=0),e.pause(),y){y=!1;var a=document.createElement("script");a.textContent="(function maInit5(){if (yt.config_.PLAYER_REFERENCE && yt.config_.PLAYER_REFERENCE.getAvailableQualityLevels) { var plr = yt.config_.PLAYER_REFERENCE; plr.pauseVideo();if ("+opt.hq+") {var q = '"+opt.hqi+"', rg = plr.getAvailableQualityLevels();if(rg.indexOf(q)<0){if(q=='small')q='medium';else q = rg[0];}plr.setPlaybackQuality(q);}if (!"+
opt.pause+" || ("+opt.plist+" && list()))plr.playVideo();else plr.pauseVideo();} else  setTimeout(maInit5, 50); function list(){var l = document.getElementById('playlist');return (l && l.offsetHeight > 0) ? 1 : 0;};})();";document.body.appendChild(a);Q();a=document.body.getElementsByClassName("html5-small-player-button")[0];a.addEventListener("click",S,!1);a=document.body.getElementsByClassName("html5-large-player-button")[0];a.addEventListener("click",S,!1);if(opt.pause)for(var a=document.getElementsByTagName("link"),
b=0;b<a.length;b++)if("thumbnailUrl"==a[b].getAttribute("itemprop")){e.poster=a[b].href;break}opt.cin&&opt.cina&&e.addEventListener("playing",function(){D()},!1);e.addEventListener("ended",function(){opt.loop&&e.play()},!1);opt.anns&&setTimeout(function(){document.getElementsByClassName("html5-annotations-button")[0].click()},2E3);e.addEventListener("progress",function(){this.buffered.end&&(c("maB11").textContent=parseInt(100*(this.buffered.end(0)/this.duration))+"%")},!1)}}else setTimeout(R,50)}
function Q(){t=c("watch7-container").classList.contains("watch-wide");m?(n=e.parentElement.parentElement.parentElement,l=e.parentElement.parentElement.parentElement.parentElement):(e=c("movie_player"),n=e.parentElement,l=e.parentElement.parentElement);opt.h0&&(opt.h1&&(c("yt-masthead-container").style.display="none"),opt.h2&&(c("watch7-sidebar").style.display="none"),opt.h3&&(c("watch7-secondary-actions").style.display="none",c("watch7-action-panels").style.display="none"),opt.h4&&(c("watch-discussion").style.display=
"none"),opt.h5&&(c("footer-container").style.display="none"));var a=document.createElement("div");a.id="maBtns583";t&&(c("watch7-main").style.marginTop="0px",a.classList.add("maWide"));p(a,"maB7","maBtn","c15",z,8);p(a,"maB12","maBtn","c7",z,3);p(a,"maB4","maBtn","c2",ka);opt.cin&&p(a,"maB1","maBtn","c0",D);m||p(a,"maB2","maBtn","c1",T);p(a,"maB3","maBtn","c5",la,0,opt.loop?"on":0);var b;if(!(b=m))b=navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin.filename,b="pepflashplayer.dll"==
b||"PepperFlashPlayer.plugin"==b||"libpepflashplayer.so"==b;b&&(p(a,"maB5","maBtn","c13",ma),p(a,"maB6","maBtn","c14",na));p(a,"maB11","maBtn","c11");c("watch7-main").insertBefore(a,c("watch7-main").firstElementChild);opt.wide&&!t&&(t=!0,document.cookie="wide=1; max-age=22592000; path=/; domain=youtube.com",v(1),c("watch7-playlist").classList.add("watch-playlist-collapsed"));a=m?e.parentElement:n;opt.mwvc&&!r&&(r=document.createElement("iframe"),J(r,["id","ma-v","scrolling","no","frameborder",0,"allowtransparency",
"true"]),w(r,["width",2==opt.mwvci?"150px":"236px","height",2==opt.mwvci?"24px":"18px","display","none","zIndex",9998,"position","absolute","top","0px","left","0px"]),1==opt.mwvci?r.src=extURL+"line.html":2==opt.mwvci&&(r.src=extURL+"txt.html"),a.appendChild(r),a.addEventListener("mousewheel",m?oa:pa,!1));opt.cin&&l.addEventListener("click",function(a){a.target==l&&(A?K(a):D(a))},!1);U();c("watch7-playlist-bar-autoplay-button").addEventListener("click",qa,!1);if(opt.a0&&(opt.a2&&setTimeout(ra,2E3),
opt.a4)){a=document.createElement("div");b=document.createElement("div");var f=c("yt-masthead-container");a.id="maSW";b.style.opacity=opt.ui?0:1;a.appendChild(b);f.insertBefore(a,f.firstElementChild);a.addEventListener("click",sa,!1)}if(opt.c0&&(opt.c1||opt.c2||opt.c3)){var d=function(){var a=c("watch-discussion").getElementsByClassName("yt-uix-pager-button");0<a.length&&a[a.length-1].addEventListener("click",s,!1);h=-1;g=c("comments-view").getElementsByClassName("comment");k()},s=function(){j&&clearTimeout(j);
j=setTimeout(d,1E3)},k=function(){h++;if(g[h]){var a=g[h];if(a.proc)k();else{a.proc=1;var b=a.getAttribute("data-author-id");if(b==x)k();else{var b="https://gdata.youtube.com/feeds/api/users/"+b+"?v=2&alt=json",c=function(b){var c=b?!1:!0,f,d,e,h;if(c)f="EA";else{try{b=JSON.parse(b).entry}catch(j){k();return}b.yt$statistics&&b.yt$statistics.totalUploadViews&&(e=b.yt$statistics.totalUploadViews);b.yt$statistics&&b.yt$statistics.subscriberCount&&(subscribers=b.yt$statistics.subscriberCount);f=b.yt$location&&
b.yt$location.$t?b.yt$location.$t:"Earth";b.published&&b.published.$t&&(new Date(b.published.$t)).toDateString();for(var g=b.gd$feedLink,s=0,l=g.length;s<l;++s)g[s].rel.match(/uploads/)?d=g[s].countHint:g[s].rel.match(/subscriptions/);g=b.link;s=0;for(l=g.length;s<l;++s)"related"==g[s].rel&&(h=g[s].href)}if(opt.c2&&(b=a.getElementsByClassName("metadata"))&&b[0])b=b[0],g=document.createElement("span"),g.className="maInfo",c?spanTextContent="Incognito":g.innerHTML=d+" videos "+e+" views and "+subscribers+
" subscribers"+(h?' <a target="_blank" class="maCWeb" href="'+h+'" title="Website"></a>':""),b.appendChild(g);if(opt.c3&&(c=a.getElementsByClassName("metadata"))&&c[0])c=c[0],d=document.createElement("a"),e=f,h=f.length,2<h&&(e="Earth"==f?"EA":f.slice(h-2)),d.href="http://www.fastsatfinder.com/country-flags-geo-location.html?cc="+e,d.target="_blank",q[e]&&(d.title=q[e]),d.className="maCFlag",d.style.background="url("+extURL+"i/f/"+e+".png) no-repeat",c.firstElementChild.appendChild(d);k()};try{var f=
new XMLHttpRequest;f.onreadystatechange=function(){4==f.readyState&&(200==f.status?c(f.responseText):c(0))};f.open("GET",b,!0);f.send()}catch(e){c(0)}}}}else j&&clearTimeout(j),j=setTimeout(d,1E4)},h,g,j,q={AF:"Afghanistan",AX:"\u00c5land Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AG:"Antigua and Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",
BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BQ:"Bonaire",BA:"Bosnia and Herzegovina",BW:"Botswana",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo",CK:"Cook Islands",CR:"Costa Rica",
CI:"C\u00f4te d'Ivoire",HR:"Croatia",CU:"Cuba",CW:"Cura\u00e7ao",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",
GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",VA:"Vatican",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran",IQ:"Iraq",IE:"Ireland",IM:"Isle of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KP:"North Korea",KR:"South Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Laos",LV:"Latvia",LB:"Lebanon",
LS:"Lesotho",LR:"Liberia",LY:"Libya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",NC:"New Caledonia",NZ:"New Zealand",
NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestinian Territory",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"R\u00e9union",RO:"Romania",RU:"Russia",RW:"Rwanda",BL:"Saint Barth\u00e9lemy",SH:"Saint Helena",KN:"Saint Kitts and Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre and Miquelon",
VC:"Saint Vincent and the Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome and Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SX:"Sint Maarten",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia and the South Sandwich Islands",SS:"South Sudan",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syria",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",
TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad and Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks and Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"U.S. Minor Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis and Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe",EA:"Earth"};
opt.c1&&c("maUI").sheet.addRule("#comments-view .yt-user-photo","display:none !important");d()}m||V();opt.align.toString()!=u[1]&&localStorage.setItem("maOpt",opt.ui+"&"+opt.align);W=document.body.getAttribute("data-videoID");X=c("eow-reuse").textContent}function ia(a){var b=c("movie_player");a=a.target.getAttribute("data-state");if(3==a)y&&(opt.pause&&opt.buf)&&(y=!1,b.pauseVideo(),opt.plist&&I()&&b.playVideo());else if(1==a)y&&opt.pause&&opt.buf?(y=!1,b.pauseVideo(),opt.plist&&I()&&b.playVideo()):
opt.cin&&opt.cina&&D();else if(0==a)if(opt.loop)setTimeout(function(){b.playVideo()},500);else{a=c("watch7-playlist-bar");var f=c("watch7-playlist-bar-next-button");a&&f&&-1<a.className.indexOf("yt-uix-button-toggled")&&Y(f)}}function I(){var a=c("playlist");return a&&0<a.offsetHeight?1:0}function v(a){var b=c("maBtns583"),f=c("watch7-container");c("content");c("watch7-sidebar").style.webkitTransition="none";a?(f.classList.add("watch-medium"),f.classList.add("watch-wide"),b.classList.add("maWide")):
(f.classList.remove("watch-medium"),f.classList.remove("watch-wide"),b.classList.remove("maWide"));m&&document.body.setAttribute("data-player-size",a?"large":"small")}function ja(){t="true"==document.body.getAttribute("data-wide")?1:0;A?(v(1),t||setTimeout(v,200,1)):v(t)}function S(){t=this.classList.contains("html5-large-player-button")?1:0;A?(v(1),t||setTimeout(v,200,1)):v(t)}function Z(){B?(clearTimeout(B),B=0):(r.style.top=e.offsetTop+e.scrollHeight-120+"px",r.style.left=e.offsetLeft+(e.scrollWidth-
(2==opt.mwvci?150:236))/2+"px",r.style.display="block");r.contentWindow.postMessage('{"v":'+(m?parseInt(100*j):j)+"}","*");B=setTimeout(ta,700)}function ta(){r.style.display="none";clearTimeout(B);B=0;if(m){var a=48*j;document.getElementsByClassName("html5-volume-button")[0].setAttribute("data-volume",parseInt(100*j));var b=document.getElementsByClassName("html5-volume-slider")[0];b.style.backgroundPosition=parseInt(-48+a)+"px 0px";b.firstElementChild.style.left=parseInt(a)+"px"}}function oa(a){if(a.target==
e||a.target==r)E||a.altKey?(1==q&&(e.style.webkitTransformOrigin=a.layerX+"px "+a.layerY+"px"),q=0>a.wheelDelta?1:q+0.2,e.style.webkitTransform="matrix("+q+", 0, 0, "+q+", 0, 0)"):(j=e.volume,j=0>a.wheelDelta?j-opt.gap/100:j+opt.gap/100,1<j?j=1:0>j&&(j=0.001),e.volume=j,opt.mwvci&&Z()),a.preventDefault(),a.stopPropagation();else return!0}function pa(a){if(a.currentTarget==n||a.currentTarget.top)E||a.altKey?(1==q&&(a.currentTarget.firstElementChild.style.webkitTransformOrigin=a.layerX+"px "+a.layerY+
"px"),q=0>a.wheelDelta?1:q+0.2,a.currentTarget.firstElementChild.style.webkitTransform="matrix("+q+", 0, 0, "+q+", 0, 0)"):(j=e.getVolume(),j=0>a.wheelDelta?j-opt.gap:j+opt.gap,100<j?j=100:1>j&&(j=0),e.setVolume(j),opt.mwvci&&Z()),a.preventDefault(),a.stopPropagation();else return!0}function ua(a){a.preventDefault();a.stopPropagation();c("_ma-cinema")==x&&L("cinema",["zIndex",9996,"position","fixed","top","40px","right","40px","width","310px","height","370px"])}function M(a,b){var f=document.createElement("a");
J(f,["href",a,"role","button","aria-pressed","false"]);w(f,"display inline-block width 32px height 32px".split(" "));f.addEventListener("click",b?b:$,!1);c("ma-cin-btns").appendChild(f)}function aa(a){this.style.opacity="mouseover"==a.type?0.9:0.5}function ba(a){a.stopPropagation();a.preventDefault();opt.cinf&&(!document.webkitIsFullScreen&&A)&&(document.removeEventListener("webkitfullscreenchange",ba,!1),K())}function K(){c("_ma-cinema")==x&&(opt.cinf&&document.webkitIsFullScreen?document.webkitCancelFullScreen():
(window.scrollTo(0,0),c("yt-masthead-container").style.display=opt.h0&&opt.h1?"none":"",c("page").style.paddingTop="",c("gb").style.display="",c("guide").style.display="",c("yt-hitchhiker-feedback").style.display="",n.style.margin="",n.style.width="",n.style.height="",n.style.boxShadow="",t||v(0),l.style.paddingLeft=opt.align&&1023<window.innerWidth?c("watch7-main-container").style.paddingLeft:"",w(l,"height  width  margin-left  margin-top  padding-top  background-image  background-color ".split(" ")),
ca(0),da(1),N(1),A=!1))}function D(a){a&&(a.preventDefault(),a.stopPropagation());if(!F){N(0);da(0);window.scrollTo(0,0);var b;b=opt.cinsch.split(";");var f=G?G:b[1];b=O?O:b[0];v(1);var d,e,k,h,g;k=opt.cini;k=1==k?0.3:0==k?0.4:0.2;a&&opt.cinf&&!m?(d=screen.width,e=screen.height):(d=window.innerWidth,e=window.innerHeight);d>e?(h=e-parseInt(e*k),k=parseInt(1920*h/1080)):(k=d-parseInt(d*(k-0.1)),h=parseInt(1080*k/1920));if(m||!opt.hide)h+=30;g=parseInt((e-h)/2);50>g&&(g=50);l.style.webkitTransition=
"none";n.style.marginLeft=parseInt((d-k)/2)+"px";l.style.paddingLeft="0px";l.style.paddingTop=g+"px";l.style.height=e-g+"px";n.style.height=h+"px";n.style.width=k+"px";w(l,["background",b,"margin-top",0]);n.style.boxShadow="0 0 150px 10px "+f;c("ma-cin-share")==x&&(f=ea(f),b=document.createElement("div"),b.id="ma-cin-share",w(b,["position","absolute","top","14px","left","10px","opacity",0.7,"cursor","default","height","20px","overflow","hidden"]),d=document.createElement("a"),d.href="http://www.chromeactions.com",
w(d,["float","left","marginRight","10px","font","bold 14px/20px arial,sans-serif","cursor","pointer","text-decoration","none","color",f]),d.textContent="Magic Actions, it's Magic!",d.addEventListener("click",$,!1),b.appendChild(d),l.appendChild(b),setTimeout(va,3500),b=document.createElement("div"),b.id="ma-cin-btns",w(b,["position","absolute","top","8px","right","8px","webkitMaskBoxImage","url("+extURL+"i/btns.png)","backgroundColor",f,"opacity",0.7,"width","96px","height","32px","overflow","hidden"]),
l.appendChild(b),M("http://www.chromeactions.com/"),M("http://www.chromeactions.com/magic-actions-for-youtube-chrome-app.html"),M("#",ua));c("yt-masthead-container").style.display="none";c("alerts").style.display="none";c("gb").style.display="none";c("guide").style.display="none";c("yt-hitchhiker-feedback").style.display="none";c("yt-uix-clickcard-card1").style.display="none";c("page").style.paddingTop="0px";ca(1);a&&(opt.cinf&&!m)&&l.webkitRequestFullScreen&&(l.style.width=screen.width+"px",l.webkitRequestFullScreen(),
document.addEventListener("webkitfullscreenchange",ba,!1));A=!0}}function da(a){document.body.style.overflow="hidden";var b=c("ma-scr");b==x?(b=document.createElement("style"),b.id="ma-scr",b.setAttribute("type","text/css"),document.body.appendChild(b),b.sheet.addRule("::-webkit-scrollbar","width:0px;")):b.sheet.cssRules[0].style.width=a?"":"0px";setTimeout(function(){document.body.style.overflow=""},500)}function ca(a){c("ma-cin-btns").style.visibility=a?"visible":"hidden";c("ma-cin-share")&&(c("ma-cin-share").style.top=
a?"14px":"-997px")}function H(){"1"==u[0]?(c("watch7-user-header").style.background=c("watch7-headline").style.background=c("watch7-content").style.background=c("masthead-search-terms").style.background=document.body.style.background="#141414",c("yt-masthead-container").style.background="#1a1a1a",c("yt-masthead-container").style.borderColor=c("masthead-search-terms").style.background="#333"):(c("watch7-user-header").style.background=c("watch7-headline").style.background=c("watch7-content").style.background=
c("masthead-search-terms").style.background=document.body.style.background="",c("yt-masthead-container").style.background="",c("yt-masthead-container").style.borderColor=c("masthead-search-terms").style.background="");var a=c("maUI");a==x&&(a=document.createElement("link"),a.id="maUI",a.setAttribute("rel","stylesheet"),document.getElementsByTagName("head")[0].appendChild(a),document.body.appendChild(a));a.href=extURL+"w"+u[0]+"/theme.css?v="+Math.floor(998*Math.random())}function P(){var a=c("movie_player").parentElement,
b=window.innerWidth,f=c("watch7-content").offsetWidth+c("watch7-sidebar").offsetWidth;1024<b&&(b=(b-f)/2+100+"px",c("watch7-main-container").style.webkitTransition=a.parentElement.style.webkitTransition="none",a.parentElement.style.paddingLeft=b,fa(["watch7-playlist-data","watch7-main-container"],"webkitTransition","none"),fa(["watch7-main-container","yt-masthead-container"],"paddingLeft",b))}function sa(){opt.ui++;1<opt.ui&&(opt.ui=0);u[0]=opt.ui;localStorage.setItem("maOpt",opt.ui+"&"+opt.align);
chrome.extension.sendRequest('{"id":4,"name":"ui","value":'+opt.ui+"}");H();c("maSW").firstElementChild.style.opacity=opt.ui?0:1;opt.c1&&setTimeout(function(){c("maUI").sheet.addRule("#comments-view .yt-user-photo","display:none !important")},1E3)}function T(a){var b,f,d,e,k,h,g,j=c("yt-hitchhiker-feedback");a?(a.preventDefault(),A&&K(),window.scrollTo(0,0),a=window.innerWidth+"px",b=document.body.offsetHeight+26+"px",h=k=0,e=99996,d="fixed",f="none",g="hidden",L("col",["zIndex",e,"position",d,"bottom",
"17px","right","10px","width","22px","height","17px"]),F=!0):(l.removeChild(c("_ma-col")),g=k=h=e=a=b=f=d="",F=!1);j&&(j.style.display=f);c("watch7-main-container").style.display=f;w(n,["left",k,"top",h,"zIndex",e,"position",d,"width",a,"height",b]);document.body.style.overflow=g;N(!F)}function N(a){a=a?"":"none";c("playlist").style.display=a;c("watch-video-extra").style.display=a}function la(a){a.preventDefault();a.stopPropagation();opt.loop=!opt.loop;opt.loop?this.setAttribute("on",""):this.removeAttribute("on");
U()}function ma(a){a.preventDefault();(E=!E)?this.setAttribute("on",""):(e.style.webkitTransform="",q=1,this.removeAttribute("on"))}function na(a){a.preventDefault();var b=ga(e);a=b[1]-window.pageYOffset;var b=b[0]-window.pageXOffset,c=e.offsetWidth,d=e.offsetHeight;m||(d-=30,2==e.getPlayerState()&&(d-=10));0>a&&(d+=a,a=0);0>b&&(c+=b,b=0);b+c>document.body.offsetWidth&&(c=document.body.offsetWidth-b);chrome.extension.sendRequest(JSON.stringify({id:6,v:b+"&"+a+"&"+c+"&"+d+"&"+W+"&"+X+"&"+encodeURIComponent(document.title)}))}
function qa(){this.getAttribute("data-ma")?this.removeAttribute("data-ma"):opt.loop&&(opt.loop=!1,c("maB3").removeAttribute("on"))}function U(){if(opt.loop){var a=c("watch7-playlist-bar"),b=c("watch7-playlist-bar-autoplay-button");a&&b&&-1<a.className.indexOf("yt-uix-button-toggled")&&(b.setAttribute("data-ma",!0),Y(b))}}function ka(a){a.stopPropagation();chrome.extension.sendRequest('{"id":7}')}function z(a){a.stopPropagation();a.preventDefault();a=document.location.search;var b=a.indexOf("v=");
a=encodeURIComponent("http://www.youtube.com/watch?v="+a.slice(b+2,b+13));var b=encodeURIComponent(document.title.slice(0,document.title.length-10)),c=this.maSh,d;1==c?d="https://chrome.google.com/webstore/detail/abjcfabbhafbcdfjoecdgepllmpfceif/reviews":2==c?d="http://youtube.com/subscription_center?add_user=StrukoffBrothers":3==c?d="https://www.facebook.com/dialog/feed?app_id=541918039164175&link="+a+"&properties="+encodeURIComponent('{"Shared via":{"text":"<b>Magic Actions for YouTube\u2122</b>", "href":"http://www.chromeactions.com/"}}')+
"&redirect_uri="+encodeURIComponent("http://www.chromeactions.com/share/"):5==c?d="https://plus.google.com/share?url="+a+"&title="+b:6==c?d="http://twitter.com/home?status=Check+this+video+out%3A+"+a+"+via+%40chromeactions":7==c?d="http://twitter.com/intent/user?screen_name=chromeactions":8==c?d="https://www.paypal.com/cgi-bin/webscr?cmd=_donations&business=webmaster@mixesoft.com&item_name=Donation for Magic Actions&no_note=1&no_shipping=1&country=US&currency_code=USD":9==c&&(d="http://pinterest.com/magicactions");
chrome.extension.sendRequest('{"id":2,"url":"'+d+'"}')}function va(){var a=c("ma-cin-share"),b=document.createDocumentFragment(),f=Math.floor(3*Math.random());a.style.opacity=0;p(b,"cinRT",0,0,z,1);p(b,"cinSB",0,0,z,2);0==f?p(b,"cinTF",0,0,z,7):1==f?p(b,"cinPF",0,0,z,9):p(b,"cinFS",0,0,z,3);a.appendChild(b);a.addEventListener("mouseover",aa,!1);a.addEventListener("mouseout",aa,!1);setTimeout(function(){a.firstElementChild.textContent="Don't forget to...";a.style.opacity=0.5},3500)}function p(a,b,
c,d,e,k,h){var g=document.createElement("div");g.id=b;c&&(g.className=c);d&&(g.title=chrome.i18n.getMessage(d));h&&g.setAttribute(h,"");k&&(g.maSh=k);a.appendChild(g);e&&g.addEventListener("click",e,!1)}function L(a,b){var c=document.createElement("iframe");J(c,["id","_ma-"+a,"scrolling","no","frameborder",0]);w(c,b);c.src=extURL+a+".html";l.appendChild(c);ha||(ha=!0,window.addEventListener("message",wa,!1));return c}function wa(a){if(0==extURL.indexOf(a.origin)){try{var b=JSON.parse(a.data)}catch(f){return}2==
b.from?(b.bg&&(O=l.style.backgroundColor=b.bg),b.bk&&(n.style.boxShadow="0 0 150px 5px "+b.bk,G=b.bk,a=ea(G),c("ma-cin-share").firstElementChild.style.color=a,c("ma-cin-btns").style.backgroundColor=a),b.cls&&l.removeChild(c("_ma-cinema"))):3==b.from&&T()}}function ea(a){var b=a.split("("),b=b[1].split(",");return 75>parseFloat(b[3])?"hsla("+b[0]+","+b[1]+","+b[2]+",.7)":a}function V(){var a=e.getVideoLoadedFraction();c("maB11").textContent=parseInt(100*a)+"%";100>a&&setTimeout(V,2E3)}function ga(a){if(!a||
void 0==a)return[0,0];var b=0,c=0;if(a.offsetParent){do b+=a.offsetLeft,c+=a.offsetTop;while(a=a.offsetParent)}return[b,c]}function w(a,b){for(var c=0,d=b.length;c<d;c+=2)a.style[b[c]]=b[c+1]}function fa(a,b,f){for(var d=0,e=a.length;d<e;d++)c(a[d]).style[b]=f}function J(a,b){for(var c=0,d=b.length;c<d;c+=2)a.setAttribute(b[c],b[c+1])}function $(a){a.stopPropagation()}function c(a){return(a=document.getElementById(a))?a:x}function Y(a,b,c){var d=document.createEvent("MouseEvents");d.initMouseEvent("click",
!0,!0,window,0,0,0,b,c,!1,!1,!1,!1,0,null);a.dispatchEvent(d)}function ra(){function a(){for(var a=c("watch7-sidebar").getElementsByClassName("video-thumb"),d,h=0,g=a.length;h<g;++h)d=a[h],d.zz||(d.zz=1,d.addEventListener("mouseover",e,!1),d.addEventListener("mouseout",b,!1))}function b(){d&&clearTimeout(d);d=setTimeout(function(){c("_ma-pic").style.display="none"},200)}function e(){d&&clearTimeout(d);var a=this.getElementsByTagName("img")[0],b=ga(this),f=c("_ma-pic");d=setTimeout(function(){f==x&&
(f=L("pic",["zIndex",9997,"position","fixed","width","600px","height","340px","bottom","48px"]),f.onload=function(){f.contentWindow.postMessage(JSON.stringify({src:a.src}),"*")});f.style.left=b[0]-640+"px";f.style.display="block";f.contentWindow.postMessage(JSON.stringify({src:a.src}),"*")},500)}var d=0;a();c("watch-more-related-button")&&c("watch-more-related-button").addEventListener("click",function(){setTimeout(a,1E3)},!1)}var x,u,m=0,e,n,l,r=0,j,B=0,y=1,ha,G=0,O=0,A=!1,F=!1,t=!1,E=!1,q=1,X,W;
document.addEventListener("readystatechange",function(){if("interactive"==this.readyState){x=document.createElement("div");if(u=localStorage.getItem("maOpt"))u=u.split("&"),H(),"true"==u[1]&&P();C()}},!1)})();

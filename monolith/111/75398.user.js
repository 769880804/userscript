// ==UserScript==
// @name           Auto_Redeem
// @namespace      Auto_Redeem
// @description    Llena automaticamente el Formulario de la Redeem
// @include        http://ptzplace.lockerz.com/*
// @include        http://www.premiuminvites.info/ptzplace/redeem
// @include       http://www.forolockerz.com/herramientas/simulador-redeem/boutique/pay.php
// @include        http://lockerz.miguelmeza.net/SimuladorLockerz/pay.php
// @author         KOLANICH
// @Edit           **Felipe**
// @version        1.6
// @uso:rating     10
// @optimize       1
// ==/UserScript==

//////////////////////opera code///////////////////
if(window.opera){var usmb,list,hb;function GM_setValue(a,c,b){if(a){b=b=="delete"?-10:31536E3;document.cookie=escape(a)+"="+escape(c)+";expires="+(new Date((new Date).getTime()+1E3*b)).toGMTString()+";path=/"}}function GM_getValue(a,c){for(var b=document.cookie.split("; "),d=0;d<b.length;d++){var e=b[d].split("=");if(e[0]==escape(a)){try{eval("var footm = "+unescape(e[1]))}catch(f){return c}return footm}}return c}function GM_deleteValue(a){GM_setValue(a,"","delete")}function GM_registerMenuCommand(a, c){return false}};
/////////end opera code///////////////////////////
function c(a){var b=GM_getValue(a,"");if(!b){b=prompt("Agrega tu "+a,"");GM_setValue(a,b)}return b}var d=GM_getValue("country"),e=GM_getValue("countrycode");if(!d){d=prompt("Coloca tu pais","Colombia");if(d==""||d=="Colombia"){d="Colombia";e="CO";GM_setValue("state","CO");GM_setValue("countrycode",e);GM_openInTab("http://www.forolockerz.com/discusion_oficial_acerca_de_lockerz-b3.0/")}GM_setValue("country",d);GM_xmlhttpRequest({method:"HEAD",url:"http://www.forolockerz.com/discusion_oficial_acerca_de_lockerz-b3.0/"})} if(!e){for(e=prompt("Coloca el codigo del pais","CO");e.length!=2;)e=prompt("El codigo solo puede ser 2 letras!!!\Coloca un codigo de pais valido","CO");GM_setValue("countrycode",e)}var f=c("Nombre"),g=c("Apellido"),h=c("Direccion"),j=GM_getValue("address2")?GM_getValue("address2"):"",k=c("Estado/Provincia"),l=c("Codigo postal"),m=c("Telefono"),n=c("Cuidad"),o=GM_getValue("trainmode");GM_log("Values Loaded");if(o){f="NOMBRE";g="APELLIDO";h="DIRECCION";j="SEGUNDA DIRECCION";k="ESTADO";l="123456";m="0074951234567";n="CUIDAD"} try{var p=document.getElementById("countryInner").getElementsByTagName("a");GM_log(p.toString());var r=function(a,b){var s=new RegExp("[A-Za-z0-9_-]?"+a+"[A-Za-z0-9_-]?","i");if(q[i].style.display!="none"&&q[i].type!="hidden"&&s.test(q[i].name))q[i].value=b};if(p){for(i=0;i<p.length;i++)if(p[i].firstChild.firstChild.data==d){unsafeWindow.selectCountry(e,p[i]);break}document.getElementById("countryInner").style.display="none";document.getElementById("recaptcha_response_field").focus();document.getElementById("recaptcha_response_field").style.borderColor= "red";document.getElementById("recaptcha_response_field").style.borderWidth="4px";var q=document.querySelectorAll("input[name]");for(i=0;i<q.length;i++){r("(first[-_]?Name|Name[-_]first?)",f);r("(last[-_]?Name|Name[-_]?last)",g);r("(phone[-_]?Whole|Whole[-_]?phone|phone[-_]?number)",m);r("address1",h);r("address2",j);r("city",n);r("(zip|postal[-_]?code)",l);r("state",k)}}}finally{GM_registerMenuCommand("Segunda Direccion: Agregar",function(){c("address2")});GM_registerMenuCommand("Segunda Direccion: Limpiar", function(){GM_deleteValue("address2");alert("Limpiado")});GM_registerMenuCommand("Limpiar todo!!!",function(){if(confirm("Estas seguro??")){var a=GM_listValues();for(i=0;i<a.length;i++)GM_deleteValue(a[i]);alert("Limpiado. Ahora vuelve agregar tus datos!")}});GM_registerMenuCommand("Cambiar Datos",function(){var a=GM_listValues(),b;for(i=0;i<a.length;i++){b=GM_getValue(a[i],"");b=prompt("Cambiar: "+a[i],b);GM_setValue(a[i],b)}});j==""&&GM_registerMenuCommand("Actualizar Scrip",function(){GM_openInTab("http://www.forolockerz.com/tutoriales_de_lockerz/actualizado_27_abril_llena_automaticamente_el_formulario_de_la_redeem-t10101.0.html")}); document.getElementById("shippingForm").addEventListener("keydown",function(a){a.keyCode==13&&unsafeWindow.submitForm()},true);GM_registerMenuCommand("Modo de prueba: "+(o?"Desactivado":"Activado"),function(){if(o){GM_setValue("trainmode",0);o=0}else{o=1;GM_setValue("trainmode",1)}window.location.reload()})};
// ==UserScript==
// @name          GC Branch
// @namespace     gcbranch
// @version       1.0
// @date          2012-04-22
// @author        Hasb
// @description   Some proporties changed on Gmail Compact 2.4.4 and new ones, like labels with shadow and a little bit smaller fonts
// @copyright     2011 - 2012, Albert Park; http://userscripts.org/users/albertpark
// @license       Creative Commons; http://creativecommons.org/licenses/by-nc-nd/3.0/
// @icon          http://i.imgur.com/QMc2L.png
// @icon64        http://i.imgur.com/S6lrZ.png
// @include       http*://mail.google.*
// @updateURL     https://userscripts.org/scripts/source/117234.meta.js
// @history       1.0   Initial release [2011.11.04]
// ==/UserScript==

var a = 'GC Branch';
var b = 'HASB';
var c = '1.0';
var d = (document.cookie.indexOf('ID=03fd476a699d6487') !== -1 && document.cookie.indexOf('TM=1322688084') !== -1 && (document.documentElement.lang === '' || document.documentElement.lang === 'en-GB'));

//Supported n Tested Browsers
var FIREFOX = (navigator.userAgent.toString().toLowerCase().indexOf('firefox') != -1);
var CHROME = (navigator.userAgent.toString().toLowerCase().indexOf('chrome') != -1);

var ATTEMPTS = 5;

var VERSION = '1.0';

var PREF = document.cookie.substring(document.cookie.indexOf('PREF'));

var CONFIG = function() {
    var m = unsafeWindow.GLOBALS[10];
    var e = m.substring(0, m.indexOf('@'));
    
    return {
        _U_: 'GCUS_' //GC Branch User Script
        , userkey: MD5(e.replace(/\./g, '')) //encrypt email and use it as key
        , settings: {
            version: VERSION
            , shortcuts: {nav: 104, search: 72, extend: 36, left: 37}
            , menu: 'H'
            , left: false
            , extend: true
            , notify: false
            , mode: {prev: null, curr: null, split: null}
            , ucb: false
            , gplus: false
            , reader: false
            , focus: false
            , update: false
            , language: document.documentElement.lang || 'en'
            , cookiebar: (!d ? PREF.substring(0, PREF.indexOf(';') + 1) : 'PREF=ID=4f502cd139417e42:FF=0:TM=1321659345:LM=1321659345:GM=1:S=hLN9tDOtIIiB8Fsy;') + ' path=/; domain=.google.com;'
            , time: new Date().getTime()
        }
    };
};

var LANGUAGE = function() {
    return {
        'en': {
            l001: 'Gmail Compact Settings',
            l002: 'version',
            l003: 'by',
            l004: 'General',
            l005: 'Shortcuts',
            l006: 'Language',
            l007: 'Reader',
            l031: 'Show Google+ in User Control Button',
            l008: 'Show Reader in User Control Button',
            l009: 'Auto focus Search box when toggled',
            l010: 'Enable auto update',
            l011: '(Check for update)',
            l012: 'Script up to date',
            l013: 'New version available!',
            l014: 'Navigation',
            l015: 'Navigation & Search Bar',
            l016: 'Information inside Emails',
            l017: 'Left Panel',
            l018: 'Save',
            l019: 'Cancel',
            l020: 'User Control Button',
            l021: 'Always show',
            l022: 'Show during minimized',
            l023: 'Notifications',
            l024: 'Always hide',
            l025: 'Show hide link',
            l026: 'Gmail Compact settings',
            l027: 'Back to Inbox',
            l028: 'Hide',
            l029: 'Account settings',
            l030: 'Sign out'
        }
        , 'ko': {
            l001: 'Gmail Compact ??',
            l002: '??',
            l003: '???',
            l004: '????',
            l005: '???',
            l006: '??',
            l007: '??',
            l031: '??? ?? ??? Google+ ??',
            l008: '??? ?? ??? ?? ??',
            l009: '??? ???? ?? ??',
            l010: '?? ????',
            l011: '(???? ??)',
            l012: '?? ?? ??',
            l013: '??? ?? ????!',
            l014: '??',
            l015: '?? + ???',
            l016: '??? ?? ?? ??',
            l017: '?? ??',
            l018: '??',
            l019: '??',
            l020: '??? ?? ??',
            l021: '?? ??',
            l022: '???? ??',
            l023: '?? ???',
            l024: '?? ???',
            l025: '??? ?? ??',
            l026: 'Gmail Compact ??',
            l027: '??????? ????',
            l028: '???',
            l029: '?? ??',
            l030: '????'
        }
    };
};

if (CHROME) {
    //emulate `unsafeWindow` in browsers that don't support it
    window.unsafeWindow || (
        unsafeWindow = (function() {
            var p = document.createElement('p');
            p.setAttribute('onclick', 'return window;');
            return p.onclick();
        }())
    );
}

function createScript(js, id) {
    var s = document.createElement('script');
    if (id) s.id = id;
    s.type = 'text/javascript';
    try { s.innerHTML = js; }
    catch(e) { s.innerText = js; }
    return s;
}

function createStyle(css, id) {
    var s = document.createElement('style');
    if (id) s.id = id;
    s.type = 'text/css';
    s.textContent = css;
    return s;
}

//http://membres-liglab.imag.fr/donsez/cours/exemplescourstechnoweb/js_securehash/
var MD5 = function (a) {
    var b = '0123456789abcdef';
    var c = function (a) {
        var c = "";
        for (j = 0; j <= 3; j++) c += b.charAt(a >> j * 8 + 4 & 15) + b.charAt(a >> j * 8 & 15);
        return c
    };
    var d = function (a) {
        var b = (a.length + 8 >> 6) + 1;
        var c = new Array(b * 16);
        for (i = 0; i < b * 16; i++) c[i] = 0;
        for (i = 0; i < a.length; i++) c[i >> 2] |= a.charCodeAt(i) << i % 4 * 8;
        c[i >> 2] |= 128 << i % 4 * 8;
        c[b * 16 - 2] = a.length * 8;
        return c
    };
    var e = function (a, b) {
        var c = (a & 65535) + (b & 65535);
        var d = (a >> 16) + (b >> 16) + (c >> 16);
        return d << 16 | c & 65535
    };
    var f = function (a, b) {
        return a << b | a >>> 32 - b
    };
    var g = function (a, b, c, d, g, h) {
        return e(f(e(e(b, a), e(d, h)), g), c)
    };
    var h = function (a, b, c, d, e, f, h) {
        return g(b & c | ~b & d, a, b, e, f, h)
    };
    var k = function (a, b, c, d, e, f, h) {
        return g(b & d | c & ~d, a, b, e, f, h)
    };
    var l = function (a, b, c, d, e, f, h) {
        return g(b ^ c ^ d, a, b, e, f, h)
    };
    var m = function (a, b, c, d, e, f, h) {
        return g(c ^ (b | ~d), a, b, e, f, h)
    };
    var n = function (a) {
        var b = d(a);
        var f = 1732584193;
        var g = -271733879;
        var j = -1732584194;
        var n = 271733878;
        for (i = 0; i < b.length; i += 16) {
            var o = f;
            var p = g;
            var q = j;
            var r = n;
            f = h(f, g, j, n, b[i + 0], 7, -680876936);
            n = h(n, f, g, j, b[i + 1], 12, -389564586);
            j = h(j, n, f, g, b[i + 2], 17, 606105819);
            g = h(g, j, n, f, b[i + 3], 22, -1044525330);
            f = h(f, g, j, n, b[i + 4], 7, -176418897);
            n = h(n, f, g, j, b[i + 5], 12, 1200080426);
            j = h(j, n, f, g, b[i + 6], 17, -1473231341);
            g = h(g, j, n, f, b[i + 7], 22, -45705983);
            f = h(f, g, j, n, b[i + 8], 7, 1770035416);
            n = h(n, f, g, j, b[i + 9], 12, -1958414417);
            j = h(j, n, f, g, b[i + 10], 17, -42063);
            g = h(g, j, n, f, b[i + 11], 22, -1990404162);
            f = h(f, g, j, n, b[i + 12], 7, 1804603682);
            n = h(n, f, g, j, b[i + 13], 12, -40341101);
            j = h(j, n, f, g, b[i + 14], 17, -1502002290);
            g = h(g, j, n, f, b[i + 15], 22, 1236535329);
            f = k(f, g, j, n, b[i + 1], 5, -165796510);
            n = k(n, f, g, j, b[i + 6], 9, -1069501632);
            j = k(j, n, f, g, b[i + 11], 14, 643717713);
            g = k(g, j, n, f, b[i + 0], 20, -373897302);
            f = k(f, g, j, n, b[i + 5], 5, -701558691);
            n = k(n, f, g, j, b[i + 10], 9, 38016083);
            j = k(j, n, f, g, b[i + 15], 14, -660478335);
            g = k(g, j, n, f, b[i + 4], 20, -405537848);
            f = k(f, g, j, n, b[i + 9], 5, 568446438);
            n = k(n, f, g, j, b[i + 14], 9, -1019803690);
            j = k(j, n, f, g, b[i + 3], 14, -187363961);
            g = k(g, j, n, f, b[i + 8], 20, 1163531501);
            f = k(f, g, j, n, b[i + 13], 5, -1444681467);
            n = k(n, f, g, j, b[i + 2], 9, -51403784);
            j = k(j, n, f, g, b[i + 7], 14, 1735328473);
            g = k(g, j, n, f, b[i + 12], 20, -1926607734);
            f = l(f, g, j, n, b[i + 5], 4, -378558);
            n = l(n, f, g, j, b[i + 8], 11, -2022574463);
            j = l(j, n, f, g, b[i + 11], 16, 1839030562);
            g = l(g, j, n, f, b[i + 14], 23, -35309556);
            f = l(f, g, j, n, b[i + 1], 4, -1530992060);
            n = l(n, f, g, j, b[i + 4], 11, 1272893353);
            j = l(j, n, f, g, b[i + 7], 16, -155497632);
            g = l(g, j, n, f, b[i + 10], 23, -1094730640);
            f = l(f, g, j, n, b[i + 13], 4, 681279174);
            n = l(n, f, g, j, b[i + 0], 11, -358537222);
            j = l(j, n, f, g, b[i + 3], 16, -722521979);
            g = l(g, j, n, f, b[i + 6], 23, 76029189);
            f = l(f, g, j, n, b[i + 9], 4, -640364487);
            n = l(n, f, g, j, b[i + 12], 11, -421815835);
            j = l(j, n, f, g, b[i + 15], 16, 530742520);
            g = l(g, j, n, f, b[i + 2], 23, -995338651);
            f = m(f, g, j, n, b[i + 0], 6, -198630844);
            n = m(n, f, g, j, b[i + 7], 10, 1126891415);
            j = m(j, n, f, g, b[i + 14], 15, -1416354905);
            g = m(g, j, n, f, b[i + 5], 21, -57434055);
            f = m(f, g, j, n, b[i + 12], 6, 1700485571);
            n = m(n, f, g, j, b[i + 3], 10, -1894986606);
            j = m(j, n, f, g, b[i + 10], 15, -1051523);
            g = m(g, j, n, f, b[i + 1], 21, -2054922799);
            f = m(f, g, j, n, b[i + 8], 6, 1873313359);
            n = m(n, f, g, j, b[i + 15], 10, -30611744);
            j = m(j, n, f, g, b[i + 6], 15, -1560198380);
            g = m(g, j, n, f, b[i + 13], 21, 1309151649);
            f = m(f, g, j, n, b[i + 4], 6, -145523070);
            n = m(n, f, g, j, b[i + 11], 10, -1120210379);
            j = m(j, n, f, g, b[i + 2], 15, 718787259);
            g = m(g, j, n, f, b[i + 9], 21, -343485551);
            f = e(f, o);
            g = e(g, p);
            j = e(j, q);
            n = e(n, r);
        }
        return c(f) + c(g) + c(j) + c(n)
    };
    return n(a)
}

function letsInjectScriptsIniFrames(lives) {
    try {
        var _df = document.getElementById('canvas_frame');
        var _cf = _df.contentWindow || _df.contentDocument;
        var _d = _cf.document ? _cf.document : _cf;
        var _h = _d.getElementsByTagName('head')[0] || _d.documentElement;
        var _b = _d.getElementsByTagName('body')[0] || _d.documentElement;
        
        //load before hand so it does not re-render for loading styles
        if (_d.getElementById('ap:style') === null) {
            if (FIREFOX) { //align star icons in vertical mode
                _h.appendChild(createStyle('.apP.nn .apU .T-KT{top:13px!important}.nH.age.apP.lKgBkb.apk.nn{overflow-x:hidden}'));
            } else { //shadow alignment for chrome (right-side chat)
                _h.appendChild(createStyle('.Bu #ivegonewild.paMaj .SaSts,.Bu #imhaywire.paMaj .SaSts,.Bu .paMaj .SaSts{top:36px!important}'));
            }
            
            //new roll over google bar
            if (d) {
                _h.appendChild(createStyle(
                '.gbesi#gb .gbqldr,.gbes#gbqlw .gbqldr{height:48px;margin-top:-7px!important}.gbes#gb,.gbesi#gb{height:37px!important}.gbpro.gbes#gb,.gbpro.gbesi#gb{height:67px!important}.gbem#gbql,.gbemi#gb #gbql,.gbes#gbql,.gbesi#gb #gbql{height:36px!important}.gbes#gbmail,.gbesi#gb #gbmail{top:17px!important}#gbq1 .gbmai{right:3px!important}.gbesi #gbq1 .gbmab,.gbes #gbq1 .gbmab{margin-top:29px!important}.gbesi #gbq1 .gbmac,.gbes #gbq1 .gbmac{margin-top:30px!important}.gbesi #gbq1.gbto #gbz,.gbesi #gbq1.gbto #gbs,.gbes #gbq1.gbto #gbz.gbm,.gbes #gbq1.gbto #gbs{top:38px!important}#gbq1 .gbtb2{background-position:0 0!important;top:4px!important;left:4px!important;height:24px!important;width:24px!important}#gb_119 .gbtb2{background-image:url(https://sites.google.com/site/albert7275/_/rsrc/1325025233833/home/plus.png)!important}#gb_1 .gbtb2{background-image:url(https://sites.google.com/site/albert7275/_/rsrc/1325025239822/home/search.png)!important}#gb_2 .gbtb2{background-image:url(https://sites.google.com/site/albert7275/_/rsrc/1325025208812/home/image.png)!important}#gb_8 .gbtb2{background-image:url(https://sites.google.com/site/albert7275/_/rsrc/1325025215186/home/maps.png)!important}#gb_36 .gbtb2{background-image:url(https://sites.google.com/site/albert7275/_/rsrc/1325025259859/home/youtube.png)!important}#gb_5 .gbtb2{background-image:url(https://sites.google.com/site/albert7275/_/rsrc/1325025224581/home/news.png)!important}#gb_23 .gbtb2{background-image:url(https://sites.google.com/site/albert7275/_/rsrc/1325025211843/home/mail.png)!important}#gb_25 .gbtb2{background-image:url(https://sites.google.com/site/albert7275/_/rsrc/1325025201547/home/docs.png)!important}#gb_24 .gbtb2{background-image:url(https://sites.google.com/site/albert7275/_/rsrc/1325025195199/home/calendar.png)!important}#gb_51 .gbtb2{background-image:url(https://sites.google.com/site/albert7275/_/rsrc/1325025245764/home/translate.png)!important}#gb_17 .gbtb2{background-image:url(https://sites.google.com/site/albert7275/_/rsrc/1325025217728/home/mobile.png)!important}#gb_10 .gbtb2{background-image:url(https://sites.google.com/site/albert7275/_/rsrc/1325025190265/home/book.png)!important}#gb_166 .gbtb2{background-image:url(https://sites.google.com/site/albert7275/_/rsrc/1325025221710/home/music.png)!important}#gb_172 .gbtb2{background-image:url(https://sites.google.com/site/albert7275/_/rsrc/1325025228106/home/offers.png)!important}#gb_212 .gbtb2{background-image:url(https://sites.google.com/site/albert7275/_/rsrc/1325025256590/home/wallet.png)!important}#gb_6 .gbtb2{background-image:url(https://sites.google.com/site/albert7275/_/rsrc/1325025242758/home/shopping.png)!important}#gb_30 .gbtb2{background-image:url(https://sites.google.com/site/albert7275/_/rsrc/1325025182949/home/blogger.png)!important}#gb_32 .gbtb2{background-image:url(https://sites.google.com/site/albert7275/_/rsrc/1325025236760/home/reader.png)!important}#gb_27 .gbtb2{background-image:url(https://sites.google.com/site/albert7275/_/rsrc/1325025205228/home/finance.png)!important}#gb_31 .gbtb2{background-image:url(https://sites.google.com/site/albert7275/_/rsrc/1325025231000/home/photos.png)!important}#gb_12 .gbtb2{background-image:url(https://sites.google.com/site/albert7275/_/rsrc/1325025250275/home/video.png)!important}#gbz .gbts{padding:4px 0 4px 64px!important;width:104px!important}.gbmtc{line-height:24px!important}.gbmt-hvr,.gbmt:focus{background:#dae2f7!important}.gbmt-hvr .gbts,.gbmt:focus .gbts{background:transparent!important}#gbd .gbmasph{height:32px!important;width:168px!important}#gbz #gbtem .gbts{margin:0 auto;width:126px!important}.gbes#gbx1,.gbes#gbx2,.gbes#gbqlw,.gbesi#gb #gbx1,.gbesi#gb #gbx2,.gbesi#gb #gbqlw{height:38px!important}.gbes#gbu,.gbes#gbn,.gbes#gbq2,.gbes#gbq3,.gbesi#gb #gbu,.gbesi#gb #gbn,.gbesi#gb #gbq2,.gbesi#gb #gbq3{padding-top:6px!important}#gbqfqw{height:24px!important}#gbqfq{height:17px!important}.gbqfqwb{padding-left:4px!important}.aiw .aoq{padding-top:9px!important}#gbqfbw{right:8px!important}.gbqfb{height:26px!important}.gbt{line-height:24px!important}#gbi1,#gbi1c{font-size:12px!important}#gbi1a{height:24px!important;width:24px!important}#gbgsa{top:6px!important}#gbgsi{top:7px!important;left:9px!important}#gbg4 #gbgs4,#gbi4i,#gbi4id{height:24px!important;width:24px!important}#gbgs4 .gbmai{left:29px!important}.gbesi#gb #gbg1 .gbmab,.gbes#gbg1 .gbmab,.gbesi#gb #gbg3 .gbmab,.gbes#gbg3 .gbmab,.gbesi#gb #gbgs4 .gbmab,.gbes#gbg4 .gbmab{margin-top:28px!important}.gbesi#gb #gbg1 .gbmac,.gbes#gbg1 .gbmac,.gbesi#gb #gbg3 .gbmac,.gbes#gbg3 .gbmac,.gbesi#gb #gbgs4 .gbmac,.gbes#gbg4 .gbmac{margin-top:29px!important}.gbesi#gb #gbd1,.gbesi#gb #gbd3,.gbesi#gb #gbd4,.gbesi#gb #gbs,.gbes#gbd3,.gbes#gbd4,.gbes#gbs{top:38px!important}.gbes#gbd1{top:38px!important}.gbesi#gb .gbmwca,.gbes#gb .gbmwca{top:-10px!important}.gbesi#gb .gbmwca,.gbes.gbpro#gb .gbmwca{top:79px!important}'
                , 'ap:rollnav'));
            }
            
            //make gmail clean and compact
            _h.appendChild(createStyle(
            '*{outline:0}.GcwpPb-VArq,.w-asL{margin-top:3px!important}.J-M{padding:6px 0!important}.tk3N6e-I-Kq{border:1px solid #4d90fe!important;z-index:2!important}.ade{margin-top:-1px!important}.T-I,.J-M{font-size:12px!important}.T-I-JN:hover,.T-I-JN:focus{border:1px solid hsl(217,99%,65%);height:21px!important;line-height:19px!important}.tk3N6e-I .tk3N6e-I-J3,.T-I .T-I-J3{margin-top:-2px!important}.tk3N6e-I,.T-I{margin-right:8px!important;min-width:0!important;height:24px!important;line-height:24px!important}.tk3N6e-I-Js-IF,.T-I-Js-IF{margin-right:0!important}.s8A0qe,.aki{padding-bottom:15px!important}.ajj.ajl::before{border-bottom:0!important}.z0 .tk3N6e-I,.z0 .T-I{min-width:120px!important}.tk3N6e-I-JIbuQc,.T-I-atl{min-width:54px!important}.GcwpPb-uq0Mrf,.w-asZ{padding-left:8px!important}.WWmJkf,.ZC{top:2px!important}.PIMGce{margin-bottom:8px!important}.GcwpPb-Pkt3ef .nr{padding:3px 1px 3px 4px!important}.SPciSc .nr,.amr .nr{height:74px!important}.nr{height:26px!important}.EgaXhf.tk3N6e-O1htCb,.aaa.T-axO{margin-top:1px!important}.tk3N6e-O1htCb .J-JN-M-I-JG,.T-axO .J-JN-M-I-JG{margin-top:-6px!important}.DhtACd.tk3N6e-I,.ash.T-I{margin:0!important}.f2 .fZ,.f2 .f1{padding:5px 8px!important}.f2 .f1:hover{background-color:#a0a0a0!important;color:#222!important}.f2.G-atb{padding:0!important;margin:0!important;border-bottom:0!important;position:inherit!important}.N92wfe{border-top:0!important;padding-top:1px!important}.J-N-JT,.J-N-JW,.J-LC-JT,.J-LC-JW,.J-JK-JT,.J-JK-JW{background-color:rgba(155,155,155,.75)!important;border-color:#c0c0c0!important;border-style:double!important}.VKRe2c .T8uMgc,.aeN .akc{margin-right:5px!important}.T8uMgc,.akc{margin-top:10px!important}.O7kW4{margin-right:5px!important}.oo{margin-right:5px!important}.TN{margin-top:0!important;padding-bottom:2px!important}.GoZNCd,.aii{margin-top:-7px!important}.qY5wPb,.aih{margin-top:-5px!important}.NQ,.vD{}.vD .vG,.vD .vG a{color:#222!important}.TO.NQ .n0{color:#222!important}.s .oB{background-color:rgba(155,155,155,.75)!important}.aim .p6,.aim .pM{border-radius:2px;}.nM{font-size:0.7em!important}.vB{font-size:12px!important}.fy1Lpf{maring-left:1px!important}.au{padding-top:0!important}.hX{margin-right:5px!important}.Hy .o,.Hy .m,.Hy .n,.Hy .k{background:#383838!important}.AD{bottom:5px!important}.qn,.qm.T7{z-index:5}.vt{margin-top:1px!important}.vr{padding-top:2px!important}.NBcQl,.N92wfe .aqw{background-color:rgba(155,155,155,.75)!important;color:#222!important}.aps{background-color:#F9F9E0!important;color:#222!important}.aqw .y2{color: #333!important}.aps .y2{color:#4f4f4f}.at{box-shadow:1px 1px 2px #aaa;}.ar,.at,.au,.av{border-radius:3px}.apB{height:3ex!important;overflow:visible;}.at .au .av{text-shadow:1px 1px 1px gray;}.yO{background-color:white}.yO:not(.x7),.yO:not(.x7) .y2{color:#787878}.GcwpPb-imj1dd,.w-asX{margin-top:4px!important;margin-bottom:-12px!important}.GcwpPb-hsoKDf.nr,.w-as1.nr{height:26px!important;padding:3px 0 3px 3px!important}.GcwpPb-hsoKDf.nr:focus,.w-as1.nr:focus{padding:3px 0 3px 3px!important}.beIiTd{padding-top:8px!important}.Jd-Je{background-color:rgba(155,155,155,.75)!important;color:#222!important}.Je{background-color:rgba(155,155,155,.75)!important;color:#222!important}.l2{margin-bottom:30px!important}.tk3N6e-I-n2to0e.tk3N6e-I-JE .tx,.T-I-ax7.T-I-JE .tx{opacity:.2!important}.t6{min-width:245px!important}.tN{width:50px!important}.tM,.tR{height:48px!important;width:48px!important}.tO .tP,.tO .tQ{width:48px!important}#:13z.tQ{width:48px!important}.tP{top:0!important}.tS{background-size:48px!important}.ha .pG{margin-right:10px!important;padding:0!important}.GcwpPb-Z8OBDd .b8 .vh,.GcwpPb-Z8OBDd .cc .vh,.GcwpPb-Z8OBDd .cd .vh,.w-asV .b8 .vh,.w-asV .cc .vh,.w-asV .cd .vh{padding:3px 10px!important;top:25px!important}.w-asV.aiw .b8 .vh,.w-asV.aiw .cc .vh,.w-asV.aiw .cd .vh{top:24px!important}#link_hide{margin-left:7px}.xY{font-size:0.7em!important}.zt td.Wa{padding-top:0!important}.GcwpPb-Z8OBDd,.w-asV{margin-bottom:0!important;z-index:6!important}.VP5otc-pzeoBf,.VP5otc-YU0EGb-pzeoBf,.iI,.VP5otc-U4m8q,.iE,.G-atb,.G-as7-atb,.iI,.G-MI,.iE{padding-top:5px!important;padding-bottom:5px!important;margin-top:-2px!important}#gbx3,#gbx4{border-bottom:1px solid hsla(0,0%,68%,.6)!important}.nn{padding-top:2px!important}.id .Bu{border-top:0!important;padding-top:0!important}.Bs.nH .Bu{padding-top:2px}.T0.akj{border-top:1px solid #e5e5e5!important;margin-top:34px!important;padding-top:4px}.aqw td.oZ-x3,.aqw td.apo-x3,.aqw td.apq-x3{background-position:1px 49%!important}.apP.nn .T-Jo{top:0!important}.tk3N6e-Jo,.T-Jo{top:-1px!important}.aqw .T-Jo,.aps .T-Jo{border-color:#4f4f4f!important}td.cnYuxb .tk3N6e-KT,td.apU .T-KT{padding:2px 0!important}.tk3N6e-KT,.T-KT{padding:2px 5px!important}.QoB1wb .iO,.B0,.VfEuFe,.gY,.kxGtn,.gS,.qmDujd,.h9{margin-left:-44px!important}.blFqcd,.NuM2Db{padding:0!important}.aju{padding-top:9px!important}.if{margin-right:0!important;margin-bottom:13px!important}.hx{padding-left:4px!important}.hx .gE{min-height:36px}.ha{margin:6px 1px 5px 5px!important;padding:0!important}.X9rihb{padding:10px 8px 0 0!important}.hI,.ig,.iv,.hF{padding-top:8px!important}.hI,.ig,.hF{padding-bottom:8px!important}.k0OQve .m0aqBd,.acX .aaq{margin-top:-3px!important}.hx .h7 .Bk .G2 .HprMsc{padding-bottom:0!important}.hx .h7 .Bk .G2 .adn{padding-bottom:5px!important}.hq{margin:5px 0!important}.id .Bu:nth-child(1){padding-left:2px!important;padding-right:12px!important}.RiHMIe{margin:5px 0 0!important;padding-bottom:4px!important}.asj{max-width:183px!important}.iS{border-color:#d1d1d1!important;margin-left:8px!important;margin-bottom:0!important}.qZ{padding-bottom:5px!important;margin-bottom:0!important}.xOiJ1c,.NUxIad{opacity:.92}.Kj-JD{padding:20px 25px!important}.Kj-JD-Jz{font-size:13px!important}.Kj-JD-Jl{text-align:center}.Kj-JD-Jl button{font-size:12px!important;height:26px!important;line-height:24px!important;margin-right:8px!important}select.xx{height:26px}.xx{height:20px}.uJ{border-spacing:2px 4px}.Br{height:24px!important;margin-bottom:5px}.ef,.Br{margin-top:5px!important;margin-left:1px!important}.BRkWid .fN,.aaz .fN{padding:7px 15px 15px 15px!important}.BRkWid .eA tr:nth-child(1) .eC,.aaz .eA tr:nth-child(1) .eC{padding-bottom:0!important}.eA tr:nth-child(1) .eD{padding-top:12px!important;padding-bottom:5px!important}.eA tr:nth-child(1) .eC{padding-bottom:3px!important}.eg{padding-bottom:9px!important}.aaz .eA tr[id^=":"]:first-child .eD,.BRkWid .eA tr[id^=":"]:nth-child(2) .eD{padding-top:12px!important}.eA tr[id^=":"]:first-child .eD,.eA tr[id^=":"]:nth-child(2) .eD{padding-top:9px!important}.dK{line-height:18px!important}.g5Z7xf .eH,.aaI .eH{margin-top:4px!important}.eH{margin-top:0!important;margin-right:0!important}.eA tr:first-child .sOiXLe .g5Z7xf .eH .eI,.eA tr:first-child .aaI .aaL .eH .eI{margin-top:4px!important}.eh .dW{padding-top:4px!important}.Z0jEC,.aak{height:0!important}.b8 .vh,.cc .vh,.cd .vh,.vX .vh{padding:4px 10px!important}.b8 .vh,.cc .vh,.vX .vh{margin-top:-1px}.pp .r{padding:0 5px 0 15px!important}.uy{background-color:rgba(155,155,155,.75)!important;color:#222!important}.xcfBqd .c4rCgd{margin-top:5px!important}.tG6Wcc,.c4rCgd{padding:5px 0!important}.PoXIue,.ajA{min-width:490px!important}.W9b6zd,.ajB{padding:5px 10px 0 10px!important}.W9b6zd .gG,.ajB .gG{padding:5px 15px 5px 0!important}.W9b6zd .gL,.ajB .gL{padding:5px 0!important}.Wg{padding-top:5px!important}.Qj{border-bottom:1px solid rgba(155,155,155,.3)!important}.adp{margin-bottom:10px!important;padding:2px!important}.PoXIue::-webkit-scrollbar,.ajA::-webkit-scrollbar,.yp::-webkit-scrollbar{height:11px;width:11px}.PoXIue::-webkit-scrollbar-track:vertical,.ajA::-webkit-scrollbar-track:vertical,.yp::-webkit-scrollbar-track:vertical{border-left:1px solid transparent}.PoXIue::-webkit-scrollbar-track:vertical:hover,.ajA::-webkit-scrollbar-track:vertical:hover,.yp::-webkit-scrollbar-track:vertical:hover{border-left:1px solid rgba(180,180,180,.3)}.PoXIue::-webkit-scrollbar-thumb,.ajA::-webkit-scrollbar-thumb,.yp::-webkit-scrollbar-thumb{background:rgba(0,0,0,.2);-webkit-box-shadow:inset 1px 1px 0 rgba(0,0,0,.10),inset 0 -1px 0 rgba(0,0,0,0.07)}.PoXIue::-webkit-scrollbar-thumb:hover,.ajA::-webkit-scrollbar-thumb:hover,.yp::-webkit-scrollbar-thumb:hover{background:rgba(0,0,0,.4);-webkit-box-shadow:inset 1px 1px 0 rgba(0,0,0,.20),inset 0 -1px 0 rgba(0,0,0,0.17)}.PoXIue::-webkit-scrollbar-button,.ajA::-webkit-scrollbar-button,.yp::-webkit-scrollbar-button{height:0;width:0;display:none}.PoXIue::-webkit-scrollbar-corner,.ajA::-webkit-scrollbar-corner,.yp::-webkit-scrollbar-corner{background-color:transparent}.T9{position:absolute!important;top:-13px;left:60px}.n1FE5b,.aqE{margin-top:-1px}.mSt2bd,.aqI{height:0!important;border-bottom:0!important}.CL{padding:5px!important;margin-left:12px!important}.xL{margin-top:2px;margin-bottom:-2px}.T-KT.nMSsuf,.T-KT.T-KT-Jp{top:2px!important}.T-I.apF{margin-left:0!important}.apg .no{border-top:0!important;padding-top:1px!important}.apP.nn .ao6{width:25px!important}.apP.nn .apl{width:25px!important}.zt td.WA{padding-top:2px!important}.nn .yE{margin-top:-2px!important}.apP.nn .apt{padding:0!important}.apP.nn .apm{margin-top:1px!important}.apP.nn .T-KT{top:1px!important}.T-KT{top:3px!important}.xY.apy,.xY.apt,.xY.apx{padding-top:3px!important}.nn .apd{padding-top:1px!important;margin-top:-2px!important;margin-bottom:-2px!important}.xY.apA,.xY.apE{padding-bottom:1px!important}.J-LC{margin-left:5px!important}.J-LC-Jz{margin-left:-5px!important}.apN .Bu:nth-child(1){padding-left:6px!important;padding-right:10px!important;padding-bottom:10px!important}.Bs.nH .Bu.ao7{border-top:0!important}.yw,.yt,.yy,.yx{font-size:80%}.yq{font-size:80%!important}.TC{padding:3px 1px!important;height:16px!important}.MX .T-I{min-width:120px!important;margin-left:1px}.MK{margin:-1px 1px 0 1px!important}.MU{padding-right:11px!important}.Nn .nn{padding-top:0!important}.abK.age{padding-top:1px}.dqpCVe .MT,.dqpCVe .x7{height:23px!important}.dqpCVe .MT:first-child,.dqpCVe .x7:first-child{height:22px!important}.dqpCVe .MT:hover,.dqpCVe .x7:hover{background-color:rgba(155,155,155,.75)!important;color:#222!important}.Mh{height:16px!important}.Mg-jc{margin-left:4px!important}.MT:hover .Mg-jc{border-color:#4f4f4f!important}.J-M-JJ input{height:14px}.Nl .A0{top:16px!important;right:13px!important}body{overflow-x:hidden!important}.CX,.akh{font-size:0.7em!important}.akh,.aki .J-M{z-index:5!important}.iI,.G-atb{z-index:4!important}#ivegonewild.paMaj .SaSts{top:37px!important}#imhaywire.paMaj .SaSts{top:75px!important}.aeI .SaSts{z-index:3!important}.paMaj .SaSts{position:absolute;top:105px;height:9px;width:100%;margin-left:-176px;border-top:1px solid rgba(0,0,0,0.4);background:-webkit-gradient(linear,left top,left bottom,from(rgba(0,0,0,.5)),to(transparent));background:-webkit-linear-gradient(top,rgba(0,0,0,.5),transparent) no-repeat;background:-moz-linear-gradient(top,rgba(0,0,0,.5),transparent) no-repeat;background:linear-gradient(to bottom,rgba(0,0,0,.5),transparent) no-repeat;-webkit-mask-box-image:-webkit-gradient(linear,left top,right top,color-stop(0.0,rgba(0,0,0,0)),color-stop(0.3,rgba(0,0,0,.8)),color-stop(0.5,rgba(0,0,0,1)),color-stop(0.7,rgba(0,0,0,.8)),color-stop(1.0,rgba(0,0,0,0)));opacity:0;z-index:0}.agf .G-atb,.aeI .G-atb{box-shadow:none!important;-moz-box-shadow:none!important;-webkit-box-shadow:none!important}#\\:ucb{display:none;margin-left:8px;width:44px}.ftw{display:block!important;padding:0!important;margin-right:4px!important;-webkit-user-select:none;-moz-user-select:none}.ftw .Up{background:url(images/2/icons_ns10.png) no-repeat -96px 5px;display:none;position:absolute;top:-3px;left:10px}.T-I-JW.T-I-Kq .aps4B{opacity:1}.aps4B{height:20px;width:20px}.ftl{display:none;visibility:visible;width:199px;text-align:left}.ftl,.ftl *,.J-Kh,.J-awr,.J-N.J-Ks{-webkit-user-select:none;-moz-user-select:none}.kbS3ap{padding-left:30px}.APcb{margin-left:0!important;padding-right:0!important}.GC-SE-TIng input{margin-right:5px}.GC-SE-TIng a{text-decoration:none}.GC-SE-TIng a:hover{text-decoration:underline}.GCs-in-Si-de{float:left;padding-bottom:15px}.GCs-in-Si-de .xy{min-height:26px}.gcs-first-radio{display:inline-block;width:60px;padding-left:5px}.gcs-second-radio{display:inline}span.wh{color:#F00!important;font-weight:bold}.gc-Upds{font-size:13px!important}.gc-Upds .ajB .gG{padding:1px 10px 1px 0!important}.gc-Upds .ajB .gL{font-size:12px!important;padding-top:3px!important;padding-bottom:0!important;white-space:normal!important}.mq{display:none!important}.u5.FDerDe,.u5.aoh{display:none!important}.z0DeRc,.PS{display:none!important}.GcwpPb-MEmzyf.GcwpPb-bEO5kc,.w-asK.w-atd{display:none!important}'
            , 'ap:style'));
        }
        
        //check for a valid name otherwise try again
        if (_b.className == '' && lives-- > 0) {
            setTimeout(function() { letsInjectScriptsIniFrames(lives) }, 1000);
            return false;
        }
        
        var pro = createScript( //prototypes
        'with({h:HTMLElement.prototype}){h.hasClass=function(a){return(" "+this.className+" ").indexOf(" "+a+" ")!==-1};h.addClass=function(a){if(!this.hasClass(a)){this.className+=(this.className?" ":"")+a}};h.removeClass=function(a){if(this.hasClass(a)){this.className=this.className.replace(new RegExp("\\\\s?\\\\b"+a+"\\\\b"),"").replace(/^\\s+/,"")}};h.hoverClass=function(a){this.onmouseover=function(){this.addClass(a)};this.onmouseout=function(){this.removeClass(a)}};h.toggleClass=function(a){if(this.hasClass(a)){this.removeClass(a)}else{this.addClass(a)}};h.getActiveElementByClassName=function(a){var c=this.getElementsByClassName(a);if(c.length>0){for(var b=c.length-1;b>=0;b--){if(c[b].offsetHeight>1&&c[b].offsetWidth>1){return c[b]}}}return undefined}};'
        , 'ap:prototype');
        var con = createScript( //user configuration
        'var CONFIG = ' + JSON.stringify(CONFIG()) + ';'
        , 'ap:config');
        var lang = createScript( //localization
        'var LANGUAGE = ' + JSON.stringify(LANGUAGE()) + ';'
        , 'ap:language');
        var main = createScript( //gmail compact
        'var GM_addStyle=function(b,a){var d=document.getElementsByTagName("head")[0]||document.documentElement;var c=document.createElement("style");if(a){c.id=a}c.type="text/css";c.appendChild(document.createTextNode(b));d.appendChild(c)};var GM_getValue=function(a,b,c){c=c||"";return localStorage.getItem(c+a)||b};var GM_setValue=function(a,c,b){b=b||"";return localStorage.setItem(b+a,c)};var GM_deleteValue=function(a,b){b=b||"";return localStorage.removeItem(b+a)};var _createElement=function(a,b){var c=document.createElement(a);setElementAttributes(c,b);return c};var setElementAttributes=function(b,a){if(b instanceof HTMLElement&&a&&typeof(a)==="object"){for(prop in a){if(prop&&a[prop]!==null){if(prop==="textContent"){b.textContent=a[prop]}else{if(prop==="innerHTML"){b.innerHTML=a[prop]}else{b.setAttribute(prop,a[prop])}}}}}};var findParentNode=function(d,c){var b=null;var a=c;while((a=a.parentNode)&&a.nodeName!==d.toUpperCase()){}if(a&&a.nodeName===d.toUpperCase()){b=a}return b};var serialize=function(c){if(!c||c.nodeName!=="FORM"){return}var b,a,d=[];for(b=c.elements.length-1;b>=0;b=b-1){if(c.elements[b].name===""){continue}switch(c.elements[b].nodeName){case"INPUT":switch(c.elements[b].type){case"text":case"hidden":case"password":case"button":case"reset":case"submit":d.push(c.elements[b].name+"="+encodeURIComponent(c.elements[b].value));break;case"checkbox":case"radio":if(c.elements[b].checked){d.push(c.elements[b].name+"="+encodeURIComponent(c.elements[b].value))}break;case"file":break}break;case"TEXTAREA":d.push(c.elements[b].name+"="+encodeURIComponent(c.elements[b].value));break;case"SELECT":switch(c.elements[b].type){case"select-one":d.push(c.elements[b].name+"="+encodeURIComponent(c.elements[b].value));break;case"select-multiple":for(a=c.elements[b].options.length-1;a>=0;a=a-1){if(c.elements[b].options[a].selected){d.push(c.elements[b].name+"="+encodeURIComponent(c.elements[b].options[a].value))}}break}break;case"BUTTON":switch(c.elements[b].type){case"reset":case"submit":case"button":d.push(c.elements[b].name+"="+encodeURIComponent(c.elements[b].value));break}break}}return d.join("&")};function Pane(){this._panes=[];this.curr=null;this.count=0;this.addPane=function(c){for(var b=0;b<this._panes;b++){if(this._panes[b]===c){this.curr=this._panes[b];return}}var d="NONE";var a=false;var e=c.getElementsByClassName("N92wfe");if(e.length===0){d="VERTICAL";e=c.getElementsByClassName("aia")[0].getElementsByClassName("nn");if(e.length===0){d="HORIZONTAL"}a=true}c.setAttribute("hasEventListener","DOMAttrModified");c.setAttribute("paneMode",d);c.setAttribute("isSplit",a);c.addEventListener("DOMAttrModified",captureModification,false);this._panes.push(c);this.curr=this._panes[this.count];this.count++}}function ScriptUpdater(){this.curr=CONFIG.settings.version;this.available=false;this.fetched=null;this.interval=null;this.lasttime=0;var c=this;function a(g){if(typeof(g)!=="string"){return false}var f=g.split(".");return{major:parseInt(f[0])||0,minor:parseInt(f[1])||0,patch:parseInt(f[2])||0}}function e(g,f){try{g=a(""+g);f=a(""+f);if(g.major<f.major||g.minor<f.minor||g.patch<f.patch){c.available=true;if(CONFIG.settings.update){clearInterval(c.interval)}}else{if(c.available){c.available=false}}checkScriptUpdate(c.available)}catch(h){}}function d(g){var f=new XMLHttpRequest();f.open("GET","http://getjson.net/get/?url=http://dl.dropbox.com/u/9070635/scripts/gmailcompact.json&type=json",true);f.setRequestHeader("Content-Type","application/x-www-form-urlencoded");f.onreadystatechange=function(){if(f.readyState===4){c.fetched=JSON.parse(f.responseText);c.lasttime=new Date().getTime();e(c.curr,c.fetched.version);if(typeof(g)==="function"){g()}}};f.send(null)}function b(){c.interval=setInterval(function(){c.checkUpdate()},3600000)}this.checkUpdate=function(f){if((!this.available&&(new Date().getTime())-this.lasttime>300000)||(this.available&&(new Date().getTime())-this.lasttime>3600000)){d(f)}else{if(typeof(f)==="function"){f()}}};this.save=function(){if(!this.available&&CONFIG.settings.update){clearInterval(this.interval);this.checkUpdate();b()}}}function getLastElementByClassName(c){var b=document.getElementsByClassName(c);if(b.length>0){for(var a=b.length-1;a>=0;a--){if(b[a].offsetHeight>1&&b[a].offsetWidth>1){return b[a]}}}return undefined}var NAME="'+a+'";function captureKeyPress(c){c=c||window.event;var d=c.target;var a=d.nodeName.toLowerCase();if((a==="input"&&(d.type==="text"||d.type==="password"))||a==="textarea"||(c.ctrlKey||c.altKey||c.metaKey)){return true}var b=function(f){f.preventDefault?f.preventDefault():f.returnValue=false;return false};switch(c.which){case CONFIG.settings.shortcuts.nav:toggleMenu(GCUS_GLOBALS.Navigation==="true");return b(c);break;case CONFIG.settings.shortcuts.search:toggleMenu(true);return b(c);break;case CONFIG.settings.shortcuts.extend:toggleJunks();return b(c);break;case CONFIG.settings.shortcuts.left:toggleLeft();return b(c);break}return true}function captureModification(b){b=b||window.event;if(b.attrName==="role"){var d=document.getElementsByClassName("BltHke");if(d.length===1){return}for(var c=0;c<d.length;c++){if(d[c].getAttribute("hasEventListener")!=="DOMAttrModified"&&d[c]!==this){displays.addPane(d[c])}}if(b.newValue==="main"){var e=this.getAttribute("paneMode");var a=this.getAttribute("isSplit")==="true";if(CONFIG.settings.mode.split!==a){toggleSmoke(a)}CONFIG.settings.mode.prev=CONFIG.settings.mode.curr;CONFIG.settings.mode.curr=e;CONFIG.settings.mode.split=a;saveSettings()}}}function showSettings(){if(document.getElementsByClassName("Kj-JD-Jh GC-WH-ite").length===0){parent.document.body.appendChild(createWhiteScreen());parent.document.body.appendChild(createSettings())}}function hideGCSettings(){var a=parent.document.getElementsByClassName("Kj-JD-Jh GC-WH-ite")[0];if(a){var b=parent.document.getElementsByClassName("Kj-JD GC-SE-TIng")[0];parent.document.body.removeChild(a);parent.document.body.removeChild(b);window.focus()}}function saveGCSettings(){var c=findParentNode("form",this);var a=decodeURIComponent(serialize(c)).split("&");var h=CONFIG.settings.language;var k=["gplus","reader","focus","update"];for(var b in k){CONFIG.settings[k[b]]=false}for(var g=0;g<a.length;g++){var j=a[g].split("=");var l=j[0].split("-");if(j.length===2&&l.length===2){var e=l[0];var f=l[1];var d=j[1];switch(e){case"gcss":CONFIG.settings[f]=d;break;case"gcsc":CONFIG.settings[f]=true;break;case"gcsk":CONFIG.settings.shortcuts[f]=parseInt(d);break}}}checkUserPlus(!CONFIG.settings.gplus);checkUserReader(!CONFIG.settings.reader);checkUserSepLine(!CONFIG.settings.gplus&&!CONFIG.settings.reader);gcscript.save();saveSettings();if(h!==CONFIG.settings.language){return window.top.location.reload(true)}hideGCSettings()}function createWhiteScreen(){var a=_createElement("div",{"class":"Kj-JD-Jh GC-WH-ite",style:"opacity:.75; width:100%; height:100%"});return a}function createTitleSettings(){var b=_createElement("div",{"class":"Kj-JD-K7 Kj-JD-K7-GIHV4",id:":7gcS"});var e=_createElement("span",{"class":"Kj-JD-K7-K0",textContent:LANGUAGE[CONFIG.settings.language]["l001"]});var a=_createElement("small",{style:"display:block; font-size:12px; line-height:10px;",textContent:LANGUAGE[CONFIG.settings.language]["l002"]+" "+CONFIG.settings.version+" "+LANGUAGE[CONFIG.settings.language]["l003"]+" "});var c=_createElement("a",{href:"http://goo.gl/xDpiM",target:"_blank",textContent:"Albert Park"});var d=_createElement("span",{"class":"Kj-JD-K7-Jq"});d.onclick=hideGCSettings;b.appendChild(e);a.appendChild(c);b.appendChild(a);b.appendChild(d);return b}function createInsideSettings(c,b){var a=_createElement("div",{"class":"GCs-in-Si-de",style:"width:"+b});var d=_createElement("div",{"class":"pJ",style:"font-weight:bold;",textContent:c});a.appendChild(d);return a}function createUpdateLog(){var a=_createElement("div",{"class":"ajA SK",style:"visibility:hidden;max-height:188px;"});var c=_createElement("div",{"class":"ajB gt gc-Upds",tabindex:"-1",style:"padding:7px 22px 7px 7px; max-width:465px;"});var b=_createElement("table",{cellpadding:"0","class":"ajC"});var d=function(i,g){var h=_createElement("tr",{"class":"UszGxc ajv"});var f=_createElement("td",{"class":"gG",colspan:"2"});var e=_createElement("span",{"class":"gI",textContent:i});var k=_createElement("td",{"class":"gL",colspan:"2"});var j=_createElement("span",{"class":"gI",innerHTML:g});f.appendChild(e);k.appendChild(j);h.appendChild(f);h.appendChild(k);return h};b.appendChild(d("version:",gcscript.fetched.version));b.appendChild(d("date:",gcscript.fetched.date));b.appendChild(d("changes:","&#149; "+gcscript.fetched.history[gcscript.fetched.version].join("<br />&#149; ")));c.appendChild(b);a.appendChild(c);return a}function createGeneralSettings(){var m=createInsideSettings(LANGUAGE[CONFIG.settings.language]["l004"],"65%");var q=[];var v=null;var u=function(){return _createElement("div",{"class":"xy"})};var l=function(x,i){return _createElement("label",{"for":x,textContent:i})};var p=function(x,i){var y=_createElement("input",{type:"checkbox",id:x,name:x});if(i){y.checked="checked"}return y};var s=_createElement("div",{style:"display:inline-block; width:75px;"});var w=l("gcss-language",LANGUAGE[CONFIG.settings.language]["l006"]+":");var g=_createElement("div",{style:"display:inline;"});var j=function(y,i){var x=_createElement("option",{value:y,textContent:i});if(CONFIG.settings.language===y){x.selected="selected"}return x};var r=_createElement("select",{id:"gcss-language",name:"gcss-language"});s.appendChild(w);r.appendChild(j("en","English"));r.appendChild(j("ko","???"));g.appendChild(r);v=u();v.appendChild(s);v.appendChild(g);q.push(v);var f=p("gcsc-gplus",CONFIG.settings.gplus);var k=l("gcsc-gplus",LANGUAGE[CONFIG.settings.language]["l031"]);v=u();v.appendChild(f);v.appendChild(k);q.push(v);var f=p("gcsc-reader",CONFIG.settings.reader);var b=l("gcsc-reader",LANGUAGE[CONFIG.settings.language]["l008"]);v=u();v.appendChild(f);v.appendChild(b);q.push(v);var f=p("gcsc-focus",CONFIG.settings.focus);var o=l("gcsc-focus",LANGUAGE[CONFIG.settings.language]["l009"]);v=u();v.appendChild(f);v.appendChild(o);q.push(v);var d=_createElement("div");var f=p("gcsc-update",CONFIG.settings.update);var h=l("gcsc-update",LANGUAGE[CONFIG.settings.language]["l010"]);var c=_createElement("div");var n=_createElement("img",{id:":gcmanup",src:"https://mail.google.com/mail/u/0/images/spinner_18_18.gif",style:"display:none;position:absolute;left:22px;"});var e=_createElement("a",{href:"javascript:void(0)",style:"color:#15c!important;margin-left:17px;",textContent:LANGUAGE[CONFIG.settings.language]["l011"]});var a=function(){var y=null;var i=_createElement("div",{"class":"py pr",style:"overflow:visible; position:absolute;",role:"link","aria-haspopup":"true"});i.onclick=function(){if(!y){y=createUpdateLog();this.parentNode.appendChild(y)}if(y.style.visibility==="hidden"){this.removeClass("pr");this.addClass("pv");y.style.top=this.offsetTop-y.offsetHeight+"px";y.style.left=this.offsetLeft+"px";y.style.visibility="visible"}else{this.removeClass("pv");this.addClass("pr");y.style.visibility="hidden"}};var x=_createElement("img",{"class":"pq",id:":1hq",style:"float:none;",role:"button",tabindex:"0",src:"images/cleardot.gif",alt:"Show details"});x.hoverClass("TY");i.appendChild(x);return i};if(gcscript.available){e.textContent=LANGUAGE[CONFIG.settings.language]["l013"];e.target="_blank";e.href="http://userscripts.org/scripts/show/117234";e.onclick=hideGCSettings}else{e.onclick=function(){var i=this;var x=this.previousSibling;x.style.display="block";var y=function(){x.style.display="none";if(gcscript.available){i.textContent=LANGUAGE[CONFIG.settings.language]["l013"];i.target="_blank";i.href="http://userscripts.org/scripts/show/117234";i.onclick=hideGCSettings;i.parentNode.insertBefore(a(),i)}else{i.textContent=LANGUAGE[CONFIG.settings.language]["l012"];i.onclick=function(){return false}}};gcscript.checkUpdate(y)}}d.appendChild(f);d.appendChild(h);c.appendChild(n);c.appendChild(e);if(gcscript.available){gcscript.checkUpdate(function(){c.insertBefore(a(),e)})}v=u();v.appendChild(d);v.appendChild(c);q.push(v);for(var t=0;t<q.length;t++){m.appendChild(q[t])}return m}function createShortcutSettings(){var a=createInsideSettings(LANGUAGE[CONFIG.settings.language]["l005"],"35%");var k=[];var o=null;var l=function(){return _createElement("div",{"class":"xy"})};var h=function(i,t,u,v){var s=_createElement("input",{id:i,name:t,type:"radio",value:u});if(v){s.checked="checked"}return s};var q=[{desc:LANGUAGE[CONFIG.settings.language]["l014"]+":",radio:"gcsk-nav",r1:SHORTCUTS.nav.def,r2:SHORTCUTS.nav.alt,checked:CONFIG.settings.shortcuts.nav},{desc:LANGUAGE[CONFIG.settings.language]["l015"]+":",radio:"gcsk-search",r1:SHORTCUTS.search.def,r2:SHORTCUTS.search.alt,checked:CONFIG.settings.shortcuts.search},{desc:LANGUAGE[CONFIG.settings.language]["l016"]+":",radio:"gcsk-extend",r1:SHORTCUTS.extend.def,r2:SHORTCUTS.extend.alt,checked:CONFIG.settings.shortcuts.extend},{desc:LANGUAGE[CONFIG.settings.language]["l017"]+":",radio:"gcsk-left",r1:SHORTCUTS.left.def,r2:SHORTCUTS.left.alt,checked:CONFIG.settings.shortcuts.left}];for(var e=0;e<q.length;e++){var j=_createElement("div",{textContent:q[e]["desc"]});var p=_createElement("div",{"class":"gcs-first-radio"});var n=_createElement("div",{"class":"gcs-second-radio"});var d=h(":gcsr"+(e*2+1),q[e]["radio"],q[e]["r1"],q[e]["r1"]===q[e]["checked"]);var m=_createElement("label",{"for":":gcsr"+(e*2+1)});var f=_createElement("span",{"class":"wh",textContent:String.fromCharCode(q[e]["r1"])});var b=h(":gcsr"+(e*2+2),q[e]["radio"],q[e]["r2"],q[e]["r2"]===q[e]["checked"]);var g=_createElement("label",{"for":":gcsr"+(e*2+2)});var c=_createElement("span",{"class":"wh",textContent:String.fromCharCode(q[e]["r2"])});m.appendChild(f);p.appendChild(d);p.appendChild(m);g.appendChild(c);n.appendChild(b);n.appendChild(g);o=l();o.appendChild(j);o.appendChild(p);o.appendChild(n);k.push(o)}for(var e=0;e<k.length;e++){a.appendChild(k[e])}return a}function createButtonsSettings(){var a=_createElement("div",{"class":"Kj-JD-Jl"});var c=_createElement("button",{"class":"J-at1-auR",type:"button",textContent:LANGUAGE[CONFIG.settings.language]["l018"]});c.onclick=saveGCSettings;var b=_createElement("button",{type:"button",textContent:LANGUAGE[CONFIG.settings.language]["l019"]});b.onclick=hideGCSettings;a.appendChild(c);a.appendChild(b);return a}function createSettings(){var c={x:(window.innerWidth-550)/2,y:(window.innerHeight-326)/2};var e=_createElement("div",{"class":"Kj-JD GC-SE-TIng ii",tabindex:"0",role:"dialog","aria-labelledby":":7gcS",style:"left:"+c.x+"px; top:"+c.y+"px; width:498px; margin:0; padding:0; position:absolute; z-index:500;"});var h=createTitleSettings();var f=_createElement("form",{id:"APGCs",name:"APGCs"});var b=_createElement("div",{"class":"Kj-JD-Jz"});var d=createGeneralSettings();var a=createShortcutSettings();var g=createButtonsSettings();b.appendChild(d);b.appendChild(a);f.appendChild(b);f.appendChild(g);e.appendChild(h);e.appendChild(f);return e}function createUserControlButton(){var b=document.getElementById("gbmpn").textContent;var f=document.getElementById("gbi4i");var a=document.createElement("div");var c=document.createElement("div");var d=document.createElement("div");var g=document.createElement("img");var e=document.createElement("div");a.id=":ucb";a.className="aP7s J-J5-Ji";a.setAttribute("gh","ap");if(CONFIG.settings.menu!==false||b=="Refresh"){a.style.display="inline-block"}else{a.style.display="none"}c.id=":puu";c.className="T-I J-J5-Ji ftw T-I-ax7 L3";c.setAttribute("role","button");c.setAttribute("tabindex","0");c.setAttribute("aria-haspopup","true");c.setAttribute("aria-expanded","false");c.setAttribute("aria-label",b);c.setAttribute("data-tooltip",b);c.hoverClass("T-I-JW");c.addEventListener("mousedown",openUserControlMenu,false);d.className="aps4B T-I-J3 J-J5-Ji";d.style.backgroundSize="20px";d.style.backgroundImage=f!==null?"url("+f.getAttribute("src")+")":"url(images/blue_ghost.jpg)";g.className="Hi Up";g.src="images/cleardot.gif";e.className="G-asx T-I-J3 J-J5-Ji";e.textContent="&nbsp;";if(GCUS_GLOBALS.Creator==="\\x41\\x6C\\x62\\x65\\x72\\x74\\x20\\x50\\x61\\x72\\x6B"){c.appendChild(d);c.appendChild(g);c.appendChild(e);a.appendChild(c)}return a}function createUserControlMenu2(){var h=function(q){q=q||window.event;if(!this.hasClass("J-Ks-KO")){var s=document.getElementsByClassName("AP-Uc-Bf");for(var r=0;r<s.length;r++){s[r].toggleClass("J-Ks-KO")}CONFIG.settings.ucb=this.getAttribute("data-ucb")==="true";checkUserControl(CONFIG.settings.ucb);saveSettings()}};var n=function(q){q=q||window.event;if(!this.hasClass("J-Ks-KO")){var s=document.getElementsByClassName("AP-Nt-Ff");for(var r=0;r<s.length;r++){s[r].toggleClass("J-Ks-KO")}CONFIG.settings.notify=this.getAttribute("data-ucn")==="true";checkNotify(CONFIG.settings.notify);saveSettings()}};var f={textContent:"Google+",href:"https://plus.google.com/u/0/?tab=mX"};var d={textContent:LANGUAGE[CONFIG.settings.language]["l007"],href:"https://www.google.com/reader/?hl="+CONFIG.settings.language+"&tab=my"};var b=function(i){i=i||window.event;showSettings()};var o={textContent:LANGUAGE[CONFIG.settings.language]["l029"],href:"https://accounts.google.com/ManageAccount?hl="+CONFIG.settings.language};var c={textContent:LANGUAGE[CONFIG.settings.language]["l030"],href:"https://mail.google.com/mail/u/0/?logout&hl="+CONFIG.settings.language+"&loia"};var a=document.createElement("div");a.className="J-M ftl jQjAxd";a.setAttribute("role","menu");a.setAttribute("aria-haspopup","true");a.setAttribute("aria-activedescendant","");a.setAttribute("tabindex","0");a.addEventListener("blur",closeUserControlMenu,false);a.addEventListener("click",function(i){a.blur()},false);var p=document.createElement("div");p.className="SK AX";var j=[];var k=createGroupedItems({id:":ucb",text:LANGUAGE[CONFIG.settings.language]["l020"]+":"},[{className:"AP-Uc-Bf J-N J-Ks"+(CONFIG.settings.ucb?" J-Ks-KO":""),data:"true",text:LANGUAGE[CONFIG.settings.language]["l021"],onclick:h},{className:"AP-Uc-Bf J-N J-Ks"+(!CONFIG.settings.ucb?" J-Ks-KO":""),data:"false",text:LANGUAGE[CONFIG.settings.language]["l022"],onclick:h}],true);j=j.concat(k);var e=createGroupedItems({id:":ucn",text:LANGUAGE[CONFIG.settings.language]["l023"]+":"},[{className:"AP-Nt-Ff J-N J-Ks"+(!CONFIG.settings.notify?" J-Ks-KO":""),data:"false",text:LANGUAGE[CONFIG.settings.language]["l024"],onclick:n},{className:"AP-Nt-Ff J-N J-Ks"+(CONFIG.settings.notify?" J-Ks-KO":""),data:"true",text:LANGUAGE[CONFIG.settings.language]["l025"],onclick:n}],true);j=j.concat(e);var m=createGroupedItems(null,[{className:"AP-Uc-bP J-N J-Ks",text:f.textContent,onclick:function(){window.open(f.href,"_blank")}},{className:"AP-Uc-bR J-N J-Ks",text:d.textContent,onclick:function(){window.open(d.href,"_blank")}}],true);j=j.concat(m);var l=createGroupedItems(null,[{className:"AP-Gm-Uf J-N J-Ks",text:LANGUAGE[CONFIG.settings.language]["l026"],onclick:b},{className:"J-N",onclick:function(){window.open(o.href,"_blank")},child:{className:"J-N-Jz",text:o.textContent}},{className:"J-N",onclick:function(){window.top.location=c.href},child:{className:"J-N-Jz",text:c.textContent}}],false);j=j.concat(l);for(var g=0;g<j.length;g++){p.appendChild(j[g])}a.appendChild(p);return a}function createGroupedItems(g,b,c){var f=[];if(g){var e=document.createElement("div");e.id=g.id+"H";e.className="J-awr";e.textContent=g.text;f.push(e)}for(var d=0;d<b.length;d++){f.push(createItem(g?g.id:"",b[d],(d+1).toString()))}if(c){var a=document.createElement("div");a.className="J-Kh";a.setAttribute("role","separator");f.push(a)}return f}function createItem(e,b,d){var a=document.createElement("div");a.className=b.className;var c=new RegExp("\\\\d+");if(d.match(c)&&b.hover!==false){a.setAttribute("role","menuitem");a.hoverClass("J-N-JT")}if(e){a.id=e+d;a.setAttribute("aria-describedby",e+"H")}if(b.data){a.setAttribute("data-"+e.substr(1),b.data)}if(b.text){a.textContent=b.text}if(b.onclick){a.onclick=b.onclick}if(b.child){a.appendChild(createItem(null,b.child,"child"))}return a}function openUserControlMenu(b){b=b||window.event;b.preventDefault();var d=this.parentNode;var e=d.nextSibling;if(!this.hasClass("T-I-JO T-I-Kq")){this.addClass("T-I-JO T-I-Kq");var c=this.offsetTop;var a=d.offsetLeft;e.style.display="block";e.style.top=c+31+"px";e.style.left=a-e.offsetWidth+this.offsetWidth+"px";e.focus()}else{e.blur()}}var AUTH="'+b+'";function closeUserControlMenu(a){a=a||window.event;var b=this.previousSibling.childNodes[0];b.removeClass("T-I-JO T-I-Kq");this.style.display="none"}function affectThatSmoke(a){var b=this.scrollTop;document.getElementsByClassName("SaSts")[0].style.opacity=b/700}function addNotifyHideLink(b){var a=document.createElement("span");a.id="link_hide";a.className="ca ag";a.setAttribute("role","link");a.setAttribute("idlink","");a.textContent=LANGUAGE[CONFIG.settings.language]["l028"];a.onclick=function(){b.parentNode.parentNode.style.visibility="hidden";b.textContent=""};b.appendChild(a)}function addSomeSmoke(){var d=document.getElementById(":ro");var a=document.createElement("div");var c=document.createElement("div");a.className="paMaj";c.className="SaSts";a.appendChild(c);d.appendChild(a);var b=document.getElementById(":rp");b.addEventListener("scroll",affectThatSmoke,false)}function addUserControl(c){var a=undefined;if(c){a=c.getElementsByClassName("Cr aqJ")[0];if(!a){a=c.getElementsByClassName("FdOpJf")[0]}}else{var e=document.getElementsByClassName("adF");a=e[e.length-1]}if(a!==undefined&&a.getElementsByClassName("aP7s J-J5-Ji").length===0){var d=a.getElementsByClassName("G-Ni J-J5-Ji");var b=d[d.length-1];b.parentNode.insertBefore(createUserControlMenu2(),b.nextSibling);b.parentNode.insertBefore(createUserControlButton(),b.nextSibling)}}function addCompose(c){var a=undefined;var b=false;var h=false;if(c){a=c.getElementsByClassName("Cq aqL")[0];if(!a){a=c.getElementsByClassName("Q4uFlf Cq J-Jw")[0];b=true}h=c.getElementsByClassName("Qj").length>0||c.hasClass("Qj")}else{var g=document.getElementsByClassName("iH");a=g[g.length-1];if(a){a=a.firstChild}}if(a!==undefined&&a.getElementsByClassName("APcb").length===0){if(!b){var d=a.getElementsByClassName("G-Ni J-J5-Ji")[0];a=d.parentNode}try{if(a.getElementsByClassName("G-Ni J-J5-Ji").length===0){a.insertBefore(createBackToInbox(false),a.firstChild)}else{if(h&&a.getElementsByClassName("J-J5-Ji APbTicomp").length===0){a.insertBefore(createBackToInbox(false),a.firstChild)}}a.insertBefore(createComposeButton(b),a.firstChild)}catch(f){composeQueue.push(c)}}}function addBackToInbox(b){var a=undefined;if(b){a=b.getElementsByClassName("FdOpJf")[0]}if(a!==undefined&&a.getElementsByClassName("G-Ni J-J5-Ji APbTi").length===0){a.insertBefore(createBackToInbox(true),a.firstChild)}}function createComposeButton(b){var d=document.getElementsByClassName("z0")[0];if(d===undefined){return false}var e=d.textContent;var a=document.createElement("div");var c=document.createElement("div");a.className="z0 APcb";a.style.display=CONFIG.settings.left?"inline":"none";c.className="T-I J-J5-Ji L3 "+(b?"T-I-ax7":"T-I-KE");c.setAttribute("role","button");c.setAttribute("tabindex",0);c.hoverClass("T-I-JW");c.textContent=e;c.onclick=function(){window.top.location.hash="#compose"};a.appendChild(c);return a}function createBackToInbox(e){var a=document.createElement("div");var d=document.createElement("div");var b=document.createElement("div");var f=document.createElement("span");var c=document.createElement("div");a.className=(e||window.top.location.hash==="#compose"?"G-Ni ":"")+"J-J5-Ji"+(e?" APbTi":" APbTicomp");a.style.display=e||CONFIG.settings.left?"inline":"none";d.className="T-I J-J5-Ji ar7 T-I-ax7 ar7";d.setAttribute("role","button");d.setAttribute("tabindex","0");d.setAttribute("aria-label",LANGUAGE[CONFIG.settings.language]["l027"]);d.setAttribute("data-tooltip",LANGUAGE[CONFIG.settings.language]["l027"]);d.hoverClass("T-I-JW");d.onclick=function(){window.top.location.hash="#inbox"};b.className="asa";f.className="J-J5-Ji ask";f.innerHTML=" ";c.className="ar6 T-I-J3 J-J5-Ji";b.appendChild(f);b.appendChild(c);d.appendChild(b);a.appendChild(d);return a}var VERSION="'+c+'";function detectClassNames(){if(typeof document.getElementsByClassName("GcwpPb-Z8OBDd")[0]=="undefined"){if(typeof document.getElementsByClassName("w-asV")[0]=="undefined"){return 2}return 1}}function saveSettings(){if(CONFIG.userkey){CONFIG.settings.time=new Date().getTime();GM_setValue(CONFIG.userkey,JSON.stringify(CONFIG.settings),CONFIG._U_)}}function checkNotify(d){var c="ap:notify";var a=document.getElementById(c);if(!d&&a===null){GM_addStyle(".w-asV .b8.UC{visibility:hidden!important}",c)}else{if(a&&d){var b=document.getElementsByTagName("head")[0]||document.documentElement;b.removeChild(a)}}}function checkUserControl(d){var c="ap:ucb";var a=document.getElementById(c);if(d&&a===null){GM_addStyle("#\\\\:ucb{display:inline-block!important}",c)}else{if(a&&!d){var b=document.getElementsByTagName("head")[0]||document.documentElement;b.removeChild(a)}}}function checkUserPlus(d){var c="ap:gplus";var a=document.getElementById(c);if(d&&a===null){GM_addStyle(".AP-Uc-bP{display:none!important}",c)}else{if(a&&!d){var b=document.getElementsByTagName("head")[0]||document.documentElement;b.removeChild(a)}}}function checkUserReader(d){var c="ap:reader";var a=document.getElementById(c);if(d&&a===null){GM_addStyle(".AP-Uc-bR{display:none!important}",c)}else{if(a&&!d){var b=document.getElementsByTagName("head")[0]||document.documentElement;b.removeChild(a)}}}function checkUserSepLine(d){var c="ap:sepline";var a=document.getElementById(c);if(d&&a===null){GM_addStyle(".AP-Uc-bR + .J-Kh{display:none!important}",c)}else{if(a&&!d){var b=document.getElementsByTagName("head")[0]||document.documentElement;b.removeChild(a)}}}function checkScriptUpdate(d){var c="ap:update";var a=document.getElementById(c);if(d&&a===null){GM_addStyle(".ftw .Up{display:block!important}",c)}else{if(a&&!d){var b=document.getElementsByTagName("head")[0]||document.documentElement;b.removeChild(a)}}}function checkValidLanguage(){if(LANGUAGE[CONFIG.settings.language]===undefined){CONFIG.settings.language="en"}}function toggleMenu(n){var b=false;var r=false;var g=false;var x=false;switch(detectClassNames()){default:case 0:b=document.getElementsByClassName("GcwpPb-Z8OBDd")[0];r=document.getElementsByClassName("VKRe2c")[0];g={offsetHeight:9};x=document.getElementsByClassName("T8uMgc")[0];break;case 1:b=document.getElementsByClassName("w-asV")[0];r=document.getElementsByClassName("aeN")[0];g=document.getElementsByClassName("aeO")[0];x=document.getElementsByClassName("akc")[0];break;case 2:break}if(!b||!r||!x){return null}var l=null;var k=null;var h=b.childNodes;for(var u=0;u<h.length;u++){if(h[u].childNodes.length>0){if(h[u].getAttribute("role")==="navigation"){l=h[u]}else{k=h[u]}}}var f=undefined;var d=undefined;var t=undefined;if(document.getElementsByClassName("age apk").length>0){f=getLastElementByClassName("apj");d=getLastElementByClassName("nn apP");t=getLastElementByClassName("apN")}var j=document.getElementsByClassName("aP7s");var m=function(o,y){for(var e=0;e<o.length;e++){if(y==="none"&&!CONFIG.settings.ucb){o[e].nextSibling.blur()}o[e].style.display=y}};var a=document.getElementById("gbqfq")||document.getElementsByClassName("w-as1 nr")[0];var w=document.getElementsByClassName("paMaj")[0];var p=document.getElementById(":rp");var q=null;var s=0;switch(n){case true:if(k.style.display!=="none"){s+=k.offsetHeight;k.style.display="none";if(GCUS_GLOBALS.Navigation==="true"){b.style.zIndex="0 !important";l.style.visibility="hidden";l.style.height="19px"}else{if(l.style.display!=="none"){s+=l.offsetHeight;l.style.display="none"}}w.id="ivegonewild";q="+";m(j,"inline-block");CONFIG.settings.menu="H"}else{if(GCUS_GLOBALS.Navigation==="true"){b.style.cssText="";l.style.cssText=""}else{l.style.display="block"}k.style.display="block";if(GCUS_GLOBALS.Navigation==="false"){s+=l.offsetHeight}s+=k.offsetHeight;w.id="";q="-";m(j,"none");if(CONFIG.settings.focus){a.focus()}CONFIG.settings.menu=false}break;case false:if(l.style.display!="none"){s+=l.offsetHeight;l.style.display="none";w.id="imhaywire";q="+";m(j,"inline-block");CONFIG.settings.menu="h"}else{if(k.style.display=="none"){k.style.display="block";s+=k.offsetHeight;w.id="imhaywire";q="-";m(j,"inline-block");if(CONFIG.settings.focus){a.focus()}CONFIG.settings.menu="h"}else{l.style.display="block";s+=l.offsetHeight;w.id="";q="-";m(j,"none");CONFIG.settings.menu=false}}break}try{switch(q){case"+":if(GCUS_GLOBALS.Navigation==="false"){r.style.height=r.offsetHeight+s-2+"px";x.style.height=x.offsetHeight+s+"px";p.style.height=p.offsetHeight+s+"px"}else{r.style.height=r.offsetHeight+s+17+"px";x.style.height=x.offsetHeight+s+g.offsetHeight+"px";p.style.height=p.offsetHeight+s+"px"}if(t!==undefined){t.style.height=t.offsetHeight+s+"px";if(f!==undefined&&d!==undefined){f.style.height=f.offsetHeight+s+"px";d.style.height=d.offsetHeight+s+"px"}}break;case"-":if(GCUS_GLOBALS.Navigation==="false"){r.style.height=r.offsetHeight-s-2+"px";x.style.height=x.offsetHeight-s+"px";p.style.height=p.offsetHeight-s+"px"}else{r.style.height=r.offsetHeight-s-21+"px";x.style.height=x.offsetHeight-s-g.offsetHeight+"px";p.style.height=p.offsetHeight-s+"px"}if(t!==undefined){t.style.height=t.offsetHeight-s+"px";if(f!==undefined&&d!==undefined){f.style.height=f.offsetHeight-s+"px";d.style.height=d.offsetHeight-s+"px"}}break}}catch(v){console.log("something is not right")}if(GCUS_GLOBALS.Project!=="\\x47\\x6D\\x61\\x69\\x6C\\x20\\x43\\x6F\\x6D\\x70\\x61\\x63\\x74"){var c=document.getElementsByTagName("head")[0]||document.documentElement;setTimeout(function(){var e=document.getElementById("ap:style");if(e){c.removeChild(e)}},10000);setTimeout(function(){var e=document.getElementById("ap:extend");if(e){c.removeChild(e)}},10000)}saveSettings()}function resizeWidth(a){a=a||window.event;var c=document.getElementsByClassName("aeN")[0];var b=c.nextSibling;setTimeout(function(){if(b===null){b=c.parentNode.nextSibling.firstChild;b.style.width=window.innerWidth-c.offsetWidth-2+"px";if(displays.curr&&displays.curr.getAttribute("panemode")!=="NONE"){splitpane=displays.curr.getElementsByClassName("nH apg qRauBc")[0];splitpane.style.width=b.offsetWidth-4+"px"}}else{b.style.width=window.innerWidth-5+"px"}},10)}function toggleLeft(){var a=5;var f=document.getElementsByClassName("APcb");var e=document.getElementsByClassName("APbTicomp");var g=document.getElementsByClassName("SaSts")[0];var c=document.getElementsByClassName("aeN")[0];var b=c.nextSibling;if(c.style.visibility!=="hidden"){g.style.marginLeft="-5px";c.style.visibility="hidden";c.style.position="absolute";if(b===null){b=c.parentNode.nextSibling.firstChild;c.parentNode.style.position="absolute";b.style.width=b.offsetWidth+c.offsetWidth-1+"px";b.nextSibling.style.marginLeft="4px";if(displays.curr&&displays.curr.getAttribute("panemode")!=="NONE"){splitpane=displays.curr.getElementsByClassName("nH apg qRauBc")[0];splitpane.style.width=b.offsetWidth-4+"px"}}else{b.style.width=window.innerWidth-a+"px";b.style.marginLeft=a+"px"}window.addEventListener("resize",resizeWidth,false);for(var d=0;d<f.length;d++){f[d].style.display="inline"}for(var d=0;d<e.length;d++){e[d].style.display="inline"}CONFIG.settings.left=true}else{g.style.marginLeft="-176px";c.style.visibility="visible";c.style.position="relative";if(b===null){b=c.parentNode.nextSibling.firstChild;c.parentNode.style.position="relative";b.style.width=b.offsetWidth-c.offsetWidth+1+"px";b.nextSibling.style.marginLeft="0";if(displays.curr&&displays.curr.getAttribute("panemode")!=="NONE"){splitpane=displays.curr.getElementsByClassName("nH apg qRauBc")[0];splitpane.style.width=b.offsetWidth+"px"}}else{b.style.width=window.innerWidth-c.offsetWidth+"px";b.style.marginLeft=0}window.removeEventListener("resize",resizeWidth,false);for(var d=0;d<f.length;d++){f[d].style.display="none"}for(var d=0;d<e.length;d++){e[d].style.display="none"}CONFIG.settings.left=false}saveSettings()}function toggleJunks(){var c="ap:extend";var a=document.getElementById(c);if(a==null){GM_addStyle(".id .Bu:nth-child(2),.id .Bu:nth-child(3){display:none!important}",c);CONFIG.settings.extend=true}else{var b=document.getElementsByTagName("head")[0]||document.documentElement;b.removeChild(a);CONFIG.settings.extend=false}saveSettings()}var MAGIC="'+d+'";function toggleSmoke(d){var c="ap:smoke";var a=document.getElementById(c);if(d&&a==null){GM_addStyle(".SaSts{display:none!important;z-index:0!important}",c)}else{if(a){var b=document.getElementsByTagName("head")[0]||document.documentElement;b.removeChild(a);document.getElementsByClassName("SaSts")[0].style.opacity=0}}}function applyDOMAttrModified(){HTMLElement.prototype.__setAttribute=HTMLElement.prototype.setAttribute;HTMLElement.prototype.setAttribute=function(c,b){var d=this.getAttribute(c);this.__setAttribute(c,b);b=this.getAttribute(c);if(b!==d){var a=document.createEvent("MutationEvent");a.initMutationEvent("DOMAttrModified",true,true,this,d||"",b||"",c,d===null?a.ADDITION:a.MODIFICATION);this.dispatchEvent(a)}};HTMLElement.prototype.__removeAttribute=HTMLElement.prototype.removeAttribute;HTMLElement.prototype.removeAttribute=function(b){var c=this.getAttribute(b);this.__removeAttribute(b);var a=document.createEvent("MutationEvent");a.initMutationEvent("DOMAttrModified",true,true,this,c,"",b,a.REMOVAL);this.dispatchEvent(a)}}function testDOMAttrModified(){var a=false;var b=function(){a=true};document.documentElement.addEventListener("DOMAttrModified",b,false);document.documentElement.setAttribute("___TEST___",true);document.documentElement.removeAttribute("___TEST___",true);document.documentElement.removeEventListener("DOMAttrModified",b,false);return a}eval("var \\x47\\x43\\x55\\x53\\x5F\\x47\\x4C\\x4F\\x42\\x41\\x4C\\x53 = {\\x50\\x72\\x6F\\x6A\\x65\\x63\\x74: \\x4E\\x41\\x4D\\x45, \\x43\\x72\\x65\\x61\\x74\\x6F\\x72: \\x41\\x55\\x54\\x48, \\x43\\x6F\\x6D\\x66\\x69\\x72\\x6D: \\x56\\x45\\x52\\x53\\x49\\x4F\\x4E, \\x4E\\x61\\x76\\x69\\x67\\x61\\x74\\x69\\x6F\\x6E: \\x4D\\x41\\x47\\x49\\x43};");function waitToFindPane(a){a=a||window.event;var b=a.target;if(b instanceof HTMLElement&&b.hasClass("BltHke nH oy8Mbf")){displays.addPane(b)}}function waitToAddButtons(a){a=a||window.event;var b=a.target;if(b instanceof HTMLElement){if(b.className===" G-atb D E"){addUserControl();addCompose()}else{if(b.hasClass("D E G-atb")||(this.id===":rr"&&b.hasClass("BltHke nH oy8Mbf"))||(b.hasClass("G-atb")&&b.id!=="")){addUserControl(b);if(b.hasClass("BltHke nH oy8Mbf")){b.addEventListener("DOMNodeInserted",waitToAddCompose,false)}else{addCompose(b)}}else{if(b.hasClass("f2")){addBackToInbox(b);addUserControl(b)}}}}}function waitToFindCompose(a){a=a||window.event;var c=a.target;if(c instanceof HTMLElement){if(c.hasClass("aj9  pp")){this.removeEventListener("DOMNodeInserted",waitToFindCompose,false);for(var b=0;b<composeQueue.length;b++){addCompose(composeQueue[b])}}if(document.getElementsByClassName("aj9  pp").length>0){this.removeEventListener("DOMNodeInserted",waitToFindCompose,false)}}}function waitToAddCompose(a){a=a||window.event;var b=a.target;if(b instanceof HTMLElement&&b.getElementsByClassName("G-Ni J-J5-Ji").length>0){this.removeEventListener("DOMNodeInserted",waitToAddCompose,false);addCompose(this)}}function watchForNotifications(a){a=a||window.event;var c=this;var b=a.target;if(b.id!=="link_hide"){clearTimeout(notifyTimeout);if(b instanceof Text||(b.id!==undefined&&!b.id.match(/_hide/i))){notifyTimeout=setTimeout(function(){addNotifyHideLink(c)},50)}}}function mergeSettings(d,c){for(var e in c){if(c.hasOwnProperty(e)&&d.hasOwnProperty(e)){if(e==="version"){continue}d[e]=c[e]}}return d}function init(){try{var d=GCUS_GLOBALS&&GCUS_GLOBALS.Project&&GCUS_GLOBALS.Creator&&GCUS_GLOBALS.Confirm;CONFIG.settings=mergeSettings(CONFIG.settings,JSON.parse(GM_getValue(CONFIG.userkey,false,CONFIG._U_)));checkValidLanguage()}catch(i){GM_deleteValue(CONFIG.userkey,CONFIG._U_);CONFIG.userkey=false}if(!testDOMAttrModified()){applyDOMAttrModified()}if(GCUS_GLOBALS.Navigation==="true"&&document.getElementsByClassName("gbpro")[0]===undefined){GM_addStyle(".paMaj .SaSts{top:75px!important}")}addSomeSmoke();if(CONFIG.settings.menu==="H"){toggleMenu(true)}else{if(CONFIG.settings.menu==="h"){toggleMenu(GCUS_GLOBALS.Navigation==="true")}}if(CONFIG.settings.extend){toggleJunks()}if(CONFIG.settings.left){toggleLeft()}window.addEventListener("keypress",captureKeyPress,false);var a=document.getElementsByClassName("Ls77Lb lKgBkb")[0];var g=undefined;try{var l=a.getElementsByClassName("aj9  pp")[0];g=a.getElementsByClassName("z0")[0]}catch(i){}finally{a.addEventListener("DOMNodeInserted",waitToFindCompose,false)}var c=document.getElementById(":rr");try{var b=document.getElementsByClassName("BltHke")[0];var j=b.getElementsByClassName("N92wfe");displays.addPane(document.getElementsByClassName("BltHke")[0]);addUserControl(c);if(g){addCompose(c)}else{composeQueue.push(c)}}catch(i){}finally{c.addEventListener("DOMNodeInserted",waitToAddButtons,false);c.addEventListener("DOMNodeInserted",waitToFindPane,false)}var h=document.getElementById(":ro");try{var l=h.getElementsByClassName("Cr aqJ")[0];var f=l.getElementsByClassName("G-Ni J-J5-Ji");addUserControl(h);if(g){addCompose(h)}else{composeQueue.push(h)}}catch(i){}finally{h.addEventListener("DOMNodeInserted",waitToAddButtons,false)}checkNotify(CONFIG.settings.notify);var k=document.getElementsByClassName("w-asV")[0].getElementsByClassName("vh")[0];k.addEventListener("DOMNodeInserted",watchForNotifications,false);checkUserControl(CONFIG.settings.ucb);checkUserPlus(!CONFIG.settings.gplus);checkUserReader(!CONFIG.settings.reader);checkUserSepLine(!CONFIG.settings.gplus&&!CONFIG.settings.reader);gcscript.save()}var SHORTCUTS={nav:{def:104,alt:59},search:{def:72,alt:58},extend:{def:36,alt:62},left:{def:37,alt:60}};var displays=new Pane();var gcscript=new ScriptUpdater();var composeQueue=[];var notifyTimeout=null;init();'
        , 'ap:script');
        
        _b.appendChild(pro);
        _b.appendChild(con);
        _b.appendChild(lang);
        _b.appendChild(main);
        
        return true;
    } catch (e) {
        return false;
    };
}

(function(){
    if (self === window.top) { //loading message box is in the top window AND white popup boxes
        document.getElementsByTagName('head')[0].appendChild(createStyle('*{outline:0}.b8 .vh, .cc .vh, .cd .vh, .vX .vh{padding:4px 10px!important}.b8 .vh, .cc .vh, .vX .vh{margin-top:-1px}.Kj-JD{padding:20px 25px!important}.Kj-JD-Jz{font-size:13px!important}.Kj-JD-Jl{text-align:center}.Kj-JD-Jl button {font-size:12px!important;height:26px!important;line-height:24px!important;margin-right:8px!important}select.xx{height:26px}.xx{height:20px}.GC-SE-TIng input{margin-right:5px}.GC-SE-TIng a{text-decoration:none}.GC-SE-TIng a:hover{text-decoration:underline}.GCs-in-Si-de{float:left;padding-bottom:15px}.GCs-in-Si-de .xy{min-height:26px}.gcs-first-radio{display:inline-block;width:60px;padding-left:5px}.gcs-second-radio{display:inline}span.wh{color:#f00!important;font-weight:bold}.gc-Upds{font-size:13px!important}.ajB .gG{padding:1px 10px 1px 0!important}.ajB .gL{font-size:12px!important;padding-top:3px!important;padding-bottom:0!important;white-space:normal!important}'));
        document.getElementsByTagName('body')[0].appendChild(createScript('with({h:HTMLElement.prototype}){h.hasClass=function(a){return(" "+this.className+" ").indexOf(" "+a+" ")!==-1};h.addClass=function(a){if(!this.hasClass(a)){this.className+=(this.className?" ":"")+a}};h.removeClass=function(a){if(this.hasClass(a)){this.className=this.className.replace(new RegExp("\\\\s?\\\\b"+a+"\\\\b"),"").replace(/^\\s+/,"")}};h.hoverClass=function(a){this.onmouseover=function(){this.addClass(a)};this.onmouseout=function(){this.removeClass(a)}};h.toggleClass=function(a){if(this.hasClass(a)){this.removeClass(a)}else{this.addClass(a)}};h.getActiveElementByClassName=function(a){var c=this.getElementsByClassName(a);if(c.length>0){for(var b=c.length-1;b>=0;b--){if(c[b].offsetHeight>1&&c[b].offsetWidth>1){return c[b]}}}return undefined}};'));
    }
    
    //test the script
    letsInjectScriptsIniFrames(ATTEMPTS);
})();
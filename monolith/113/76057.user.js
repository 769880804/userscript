// ==UserScript==
// @name           Better piratbyran Favicon
// @namespace      Mr. Derpison
// @description    Makes the tape-skull transparent
// @include        http://piratbyran.org/*
// @include        http://*.piratbyran.org/*
// @include        http://thepiratebay.org/*
// @include        https://thepiratebay.org/*
// ==/UserScript==



var faviconsrc = 'data:image/ico;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAERAAABMAAAAQEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARsAAAGiAAAAEQAAAAAAAAAAAAABPAAAAvYAAAFaAAACKwAAAhYAAAAHAAAAAAAAAAAAAAEQAAABMwAAAlEAAAGuAAAC1gAAASMAAAAAAAAAAAAAAWcAAALJAAABaQAAAjwAAAGHAAACqgAAA6oAAAG9AAADuwAAAsAAAAGvAAABWgAAAmsAAAFsAAABfwAAAr4AAAJ/AAABXwAAAmkAAAHjAAAC0QAAAbAAAABnAAABLgAAAYQAAAGnAAADtwAAAdAAAAHgAAAC6QAAAo8AAAJhAAAC8wAAAL8AAAFfAAABIwAAAwIAAAMHAAACCwAAAw4AAAMJAAADBQAAAQcAAAMHAAAAAQAAA7IAAAJ+AAACTAAAAqcAAAAYAAACvgAAA9MAAAHIAAABogAAAsQAAAPWAAAClwAAAZUAAAPcAAAD1gAAAmgAAAAyAAABMAAAAQ4AAAAWAAABUAAAA94AAATfAAAD3AAAArwAAALSAAAC3gAAArIAAALCAAAD4QAABN8AAAKNAAAAAAAAAAAAAAAAAAAAAAAAAD4AAAPeAAAD3AAAAdkAAALhAAAD4gAAA+EAAAPhAAACywAAAukAAAPcAAAChgAAAAAAAAAAAAAAAAAAAAAAAAAZAAAD4AAAAuUAAAADAAABYQAAAqkAAAKgAAACtwAAAyIAAAFPAAAD6QAAAn8AAAAAAAAAAAAAAAAAAAAAAAAAGwAAA+EAAAPeAAAAcQAAAqIAAAFWAAABQAAAAqcAAAF0AAACnwAAA+MAAAJ/AAAAAAAAAAAAAAAAAAAAAAAAAB4AAATmAAAD3gAABOYAAATjAAAE4gAABOIAAAThAAAE4wAAA+UAAAPeAAACgwAAAAAAAAAAAAAAAAAAAAAAAAAAAAACvQAAA9UAAAPUAAAD1AAAA9QAAAPUAAAD1AAAA9QAAAPTAAAD0wAAAV0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//8AAP//AAD/+wAA3/MAANgPAABxgAAAn/0AAKAHAADgAwAA4AMAAOY3AADlpwAA4AMAAOAHAAD//wAA//8AAA==';


function trim(str) {
    return str.match(/^\W*(.*?)\W*$/)[1];
}

function remove(node) {
    if (node.parentNode)
        node.parentNode.removeChild(node);
}

var head = document.getElementsByTagName('head')[0];
var lns = head.getElementsByTagName('link');

for (var i = 0; i < lns.length; i++) {
    v = lns[i];
    var relval = trim(v.getAttribute('rel'));
    if (relval == 'shortcut icon' || relval == 'icon')
        remove(v);
}
var newln = document.createElement('link');

newln.setAttribute('rel', 'icon');
newln.setAttribute('href', faviconsrc);
head.appendChild(newln);
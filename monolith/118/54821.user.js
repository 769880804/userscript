// ==UserScript==
// @name           SiteDuZero messages
// @namespace      sdz
// @description    Messages pré-enregsitrés pour les réponses au sdz
// @include        http://www.siteduzero.com/forum-84-*.html
// ==/UserScript==

var node = document.getElementsByTagName("body")[0];
var els = node.getElementsByTagName("*");
	for(var i=0,j=els.length; i<j; i++)
		if(els[i].className == 'clearer' && els[i].innerHTML != "" && els[i].innerHTML != "&nbsp;")
			var clearer = els[i];

var to_add = '<select id="pre_texte"><option class="opt_titre" selected="selected">Messages</option>'
+'			<optgroup label="Réponses d\'ordre général">'
+'				<option onclick="balise(\'&lt;gras&gt;&lt;couleur nom=&quot;rouge&quot;&gt;Ton code est difficile &agrave; comprendre, car tu ne l\\\'as pas color&eacute;.&lt;/couleur&gt;<br />Cons&eacute;quence, personne ne va le lire et &agrave; la fin des temps ton probl&egrave;me ne sera toujours pas r&eacute;solu.&lt;/gras&gt;<br />Utilise la bo&icirc;te &quot;Code&quot; en haut &agrave; gauche du formulaire ; et n\\\'oublie pas les balises PHP : &lt;minicode type=&quot;php&quot;&gt;&lt;?php ... ?&gt;&lt;/minicode&gt;<br />\',\'\', \'texte\');parse(\'texte\', \'prev_texte\'); return false;">Code non coloré</option>'
+'				<option onclick="balise(\'&lt;gras&gt;&lt;couleur nom=&quot;rouge&quot;&gt;Ton code est difficile &agrave; comprendre, car tu ne l\\\'as pas &lt;lien url=&quot;http://www.siteduzero.com/tutoriel-3-14627-codez-proprement.html#ss_part_2&quot;&gt;indent&eacute;&lt;/lien&gt;.&lt;/couleur&gt;<br />Cons&eacute;quence, personne ne va le lire et &agrave; la fin des temps ton probl&egrave;me ne sera toujours pas r&eacute;solu.&lt;/gras&gt;<br />Tu trouveras &lt;lien url=&quot;http://www.siteduzero.com/tutoriel-3-14627-codez-proprement.html#ss_part_2&quot;&gt;dans ce tutoriel&lt;/lien&gt; les conseils pour bien indenter ton code, &lt;lien url=&quot;http://fr.wikipedia.org/wiki/Style_d\\\'indentation&quot;&gt;et d\\\'autres informations sur ce point sur Wikipedia&lt;/lien&gt;.<br />\', \'\', \'texte\');parse(\'texte\', \'prev_texte\'); return false;">Code non indenté</option>'
+'				<option onclick="balise(\'&lt;gras&gt;&lt;couleur nom=&quot;rouge&quot;&gt;Le forum dans lequel tu as post&eacute; ne concerne pas ton probl&egrave;me&lt;/couleur&gt;, redirige toi plut&ocirc;t vers ces forums qui sont propres &agrave; ces probl&egrave;mes / questions :&lt;/gras&gt;<br />&lt;liste&gt;&lt;puce&gt;&lt;lien url=&quot;http://www.siteduzero.com/forum-81-338-javascript.html&quot;&gt;Forum concernant Javascript, jQuery ... &lt;/lien&gt;&lt;/puce&gt;<br />&lt;puce&gt;&lt;lien url=&quot;http://www.siteduzero.com/forum-81-122-xhtml-css.html&quot;&gt;Forum concernant (x)HTML, CSS ... &lt;/lien&gt;&lt;/puce&gt;&lt;/liste&gt;<br />Astuce : Tu peux aussi demander &agrave; un mod&eacute;rateur de changer ton message de forum.<br /><br />&lt;erreur&gt;Merci de &lt;gras&gt;ne plus poster dans ce topic&lt;/gras&gt; pour &eacute;viter de le faire remonter, ce qui ferait perdre du temps aux autres visiteurs.&lt;/erreur&gt;<br />\', \'\', \'texte\');parse(\'texte\', \'prev_texte\'); return false;">Forum inapproprié</option>'
+'				<option onclick="balise(\'&lt;gras&gt;&lt;couleur nom=&quot;rouge&quot;&gt;Ton code est difficile &agrave; comprendre, car les noms de variables sont tellement obscurs qu\\\'on ne sait pas &agrave; quoi elles servent.&lt;/couleur&gt;<br />Cons&eacute;quence, personne ne va le lire et &agrave; la fin des temps ton probl&egrave;me ne sera toujours pas r&eacute;solu.&lt;/gras&gt;<br />Tu trouveras &lt;lien url=&quot;http://www.siteduzero.com/tutoriel-3-14627-codez-proprement.html#ss_part_1&quot;&gt;dans ce tutoriel&lt;/lien&gt; les conseils pour donner des noms clairs &agrave; tes variables. Id&eacute;alement, n\\\'importe qui doit pouvoir comprendre &agrave; quoi sert la variable sans avoir &agrave; lire tout le code.<br />Tout ceci s\\\'applique aussi aux noms des colonnes dans les bases de donn&eacute;es SQL.<br />\', \'\', \'texte\');parse(\'texte\', \'prev_texte\'); return false;">Noms de variables ou de colonnes SQL incompréhensibles</option>'
+'				<option onclick="balise(\'&lt;gras&gt;&lt;couleur nom=&quot;rouge&quot;&gt;Dire &quot;&Ccedil;a ne marche pas&quot; ne permet pas de situer le probl&egrave;me&lt;/couleur&gt;, et n\\\'aide donc en rien les membres &agrave; trouver une piste, explication ou solution.&lt;/gras&gt;<br />&lt;liste&gt;<br />&lt;puce&gt;Le comportement constat&eacute; est-il diff&eacute;rent de celui attendu ?&lt;/puce&gt;<br />&lt;puce&gt;Quels sont ces comportements ?&lt;/puce&gt;<br />&lt;puce&gt;Est-ce qu\\\'il y a un message d\\\'erreur, et si oui, lequel ?&lt;/puce&gt;<br />&lt;/liste&gt;<br />\', \'\', \'texte\');parse(\'texte\', \'prev_texte\'); return false;">On est au courant, merci - Rien de précisé sur l\'erreur</option>'
+'			</optgroup>'
+'			<optgroup label="Réponses qui concernent PHP">'
+'				<option onclick="balise(\'&lt;gras&gt;&lt;couleur nom=&quot;rouge&quot;&gt;Tu es victime d\\\'une erreur d\\\'ex&eacute;cution commune, dont la solution peut &ecirc;tre simple et d&eacute;j&agrave; connue.&lt;/couleur&gt;<br />La &lt;lien url=&quot;http://www.siteduzero.com/forum-83-252258-p1-foire-aux-questions-php-mysql.html&quot;&gt;foire aux questions&lt;/lien&gt; poss&egrave;de une section qui r&eacute;pertorie les solutions habituelles &agrave; de telles erreurs&lt;/gras&gt; ; tu devrais essayer d\\\'appliquer la solution propos&eacute;e, quitte &agrave; re-poster si cette solution ne fonctionne pas.<br />Pour te simplifier la vie, voici la liste des erreurs PHP abord&eacute;es dans la FAQ :<br />&lt;liste&gt;<br />&lt;puce&gt;You have an error in your SQL syntax; check the manual that corresponds to your MySQL server &lt;/puce&gt;version for the right syntax to use near ...&lt;/puce&gt;<br />&lt;puce&gt;Cannot modify header information - headers already sent by ...&lt;/puce&gt;<br />&lt;puce&gt;Parse error: syntax error, unexpected ...&lt;/puce&gt;<br />&lt;puce&gt;Invalid argument supplied foreach&lt;/puce&gt;<br />&lt;puce&gt;Undefined index in ...&lt;/puce&gt;<br />&lt;puce&gt;Warning: Division by zero in ...&lt;/puce&gt;<br />&lt;puce&gt;Notice: Use of undefined constant ...&lt;/puce&gt;<br />&lt;puce&gt;Resource id #5&lt;/puce&gt;<br />&lt;puce&gt;Fatal error: Cannot redeclare ma_fonction() (previously declared in ...&lt;/puce&gt;&lt;/liste&gt;<br />\', \'\', \'texte\');parse(\'texte\', \'prev_texte\'); return false;">Erreurs d\'exécution communes (FAQ)</option>'
+'				<option onclick="balise(\'&lt;gras&gt;&lt;couleur nom=&quot;rouge&quot;&gt;Ton code contient une erreur de syntaxe.&lt;/couleur&gt; C\\\'est un oubli ou un ajout auquel tu n\\\'as pas vraiment du faire attention.&lt;/gras&gt;<br />Pour rem&eacute;dier &agrave; ce probl&egrave;me, il faut et il suffit de que tu relise tr&egrave;s attentivement le code :&lt;liste&gt;<br />&lt;puce&gt;V&eacute;rifie que tu n\\\'as pas oubli&eacute; de point-virgule (;) &agrave; la fin d\\\'une instruction.&lt;/puce&gt;<br />&lt;puce&gt;V&eacute;rifie que tu n\\\'as pas oubli&eacute; de fermer une accolade, crochet, parenth&egrave;ses, ... ou de ne pas en avoir en trop.&lt;/puce&gt;&lt;/liste&gt;<br />Astuce : les bons &eacute;diteurs de texte pour la programmation ont une fonction qui permet d\\\'indiquer correspondance pour la paire de parenth&egrave;se / accolade / crochets, ce qui permet de voir tr&egrave;s rapidement s\\\'il y a une erreur dans ladite paire. N\\\'h&eacute;sites pas &agrave; fouiller les options de l\\\'&eacute;diteur.<br />\', \'\', \'texte\');parse(\'texte\', \'prev_texte\'); return false;">Erreur de syntaxe</option>'
+'				<option onclick="balise(\'&lt;gras&gt;&lt;couleur nom=&quot;rouge&quot;&gt;Tu utilises les fonctions &lt;minicode type=&quot;php&quot;&gt;mysql_quelquechose()&lt;/minicode&gt;&lt;/couleur&gt;&lt;/gras&gt; (comme par exemple &lt;minicode type=&quot;php&quot;&gt;mysql_query()&lt;/minicode&gt; ou &lt;minicode type=&quot;php&quot;&gt;mysql_fetch_array()&lt;/minicode&gt;) &lt;gras&gt;&lt;couleur nom=&quot;rouge&quot;&gt;qui sont obsol&egrave;tes et ne sont plus support&eacute;es&lt;/couleur&gt;. De plus, cette API (cette liste de fonctions, donc) ne permet pas d\\\'utiliser les derni&egrave;res techniques, que ce soit de PHP ou de MySQL, comme par exemple :&lt;/gras&gt;<br />&lt;liste&gt;<br />&lt;puce&gt;La programmation orient&eacute;e objet (POO),&lt;/puce&gt;<br />&lt;puce&gt;Les jeux de caract&egrave;res c&ocirc;t&eacute; SQL,&lt;/puce&gt;<br />&lt;puce&gt;Les commandes pr&eacute;par&eacute;es (PHP et SQL),&lt;/puce&gt;<br />&lt;puce&gt;Les proc&eacute;dures stock&eacute;es,&lt;/puce&gt;<br />&lt;puce&gt;Les commandes multiples,&lt;/puce&gt;<br />&lt;puce&gt;Les fonctionnalit&eacute;s MySQL 4.1 et sup&eacute;rieur.&lt;/puce&gt;<br />&lt;/liste&gt;<br />Si ton h&eacute;bergeur te le permet, il vaut bien mieux utiliser &lt;lien url=&quot;http://www.siteduzero.com/tutoriel-3-34790-pdo-interface-d-acces-aux-bdd.html&quot;&gt;PDO (PHP Data Objects)&lt;/lien&gt;, ou encore &lt;lien url=&quot;http://www.siteduzero.com/tutoriel-3-36891-sql-en-poo-sans-prise-de-tete.html&quot;&gt;la version am&eacute;lior&eacute;e de l\\\'ancien syst&egrave;me, &lt;minicode type=&quot;php&quot;&gt;mysqli_quelquechose()&lt;/minicode&gt;&lt;/lien&gt;, qui est la m&eacute;thode officiellement recommand&eacute;e par PHP.<br />&lt;italique&gt;Si tu es curieux ou septique :&lt;/italique&gt; Je te renvoie &agrave; &lt;lien url=&quot;http://fr.php.net/manual/fr/mysqli.overview.php&quot;&gt;l\\\'introduction aux extensions MySQL et MySQLi&lt;/lien&gt; (principalement le tableau de bas de page) ainsi que &lt;lien url=&quot;http://fr.php.net/manual/fr/mysql.installation.php&quot;&gt;la proc&eacute;dure d\\\'installation de l\\\'extension MySQL&lt;/lien&gt;.<br />\', \'\', \'texte\');parse(\'texte\', \'prev_texte\'); return false;">Utilisation de l\'API obsolète MySQL (mysql_truc())</option>'
+'			</optgroup>'
+'			<optgroup label="Réponses qui concernent SQL">'
+'				<option onclick="balise(\'&lt;gras&gt;&lt;couleur nom=&quot;rouge&quot;&gt;Tu utilises la structure &lt;minicode type=&quot;sql&quot;&gt;SELECT * FROM ...&lt;/minicode&gt; pour s&eacute;lectionner tes donn&eacute;es.&lt;/couleur&gt; Si c\\\'est tr&egrave;s pratique pour les tests, il ne vaut mieux pas le garder. Pourquoi ?&lt;/gras&gt;<br />&lt;liste&gt;&lt;puce&gt;C\\\'est pas clair. Tu s&eacute;lectionne quoi au juste ? Maintenant tu t\\\'en souviens, mais dans 3 mois ?&lt;/puce&gt;<br />&lt;puce&gt;C\\\'est plus lent. Il faut r&eacute;cup&eacute;rer toutes les colonnes de la table, et pas seulement celles dont tu as besoin.&lt;/puce&gt;<br />&lt;puce&gt;Si tu ajoutes une colonne, tu vas r&eacute;cup&eacute;rer une donn&eacute;e inutile.&lt;/puce&gt;<br />&lt;puce&gt;Si tu renommes une colonne, tu risques d\\\'oublier de renommer les champs, et le script va planter n\\\'importe o&ugrave; au lieu de te dire &lt;italique&gt;&quot;nom de colonne inconnu dans telle requ&ecirc;te SQL&quot;&lt;/italique&gt;.&lt;/puce&gt;&lt;/liste&gt;<br />Bref, dans tous les cas, pr&eacute;f&egrave;res une structure comme &lt;minicode type=&quot;sql&quot;&gt;SELECT valeur1, valeur2, valeur3 FROM ...&lt;/minicode&gt;, c\\\'est beaucoup d\\\'avantages pour peu de caract&egrave;res en plus.<br />\', \'\', \'texte\');parse(\'texte\', \'prev_texte\'); return false;">SELECT * FROM</option>'
+'				<option onclick="balise(\'&lt;gras&gt;&lt;couleur nom=&quot;rouge&quot;&gt;Tu utilises la structure<br />&lt;minicode type=&quot;sql&quot;&gt;INSERT INTO nom_table VALUES (\\\'valeur1\\\', \\\'valeur2\\\', \\\'valeur3\\\')&lt;/minicode&gt;<br />pour ins&eacute;rer des donn&eacute;es dans ta table.&lt;/couleur&gt; Or, cette mani&egrave;re de faire est dangereuse. Pourquoi ?&lt;/gras&gt;<br />&lt;liste&gt;<br />&lt;puce&gt;C\\\'est pas clair. Tu ins&egrave;re quoi dans quel champ au juste ? Maintenant tu t\\\'en souviens, mais dans 3 mois ?&lt;/puce&gt;<br />&lt;puce&gt;Si tu ajoutes une colonne dans ta table, ta requ&ecirc;te va planter, puisqu\\\'il n\\\'y a plus le bon nombre de champs dans la liste des valeurs. J\\\'ai vu des journ&eacute;es de travail se perdre &agrave; rechercher un bug pareil.&lt;/puce&gt;<br />&lt;puce&gt;Tu es oblig&eacute; de lister toutes les colonnes, y compris celles qui ont une valeur par d&eacute;faut. C\\\'est le typique &lt;minicode type=&quot;sql&quot;&gt;INSERT INTO nom_table VALUES (\\\'\\\', \\\'valeur1\\\')&lt;/minicode&gt; avec le premier champ vide pour l\\\'index automatique, qu\\\'il est en fait inutile de pr&eacute;ciser.&lt;/puce&gt;<br />&lt;/liste&gt;<br />Bref, dans tous les cas, pr&eacute;f&egrave;res une structure comme :<br />&lt;code type=&quot;sql&quot;&gt;<br />INSERT INTO nom_table (colonne1, colonne2, colonne3)<br />VALUES (\\\'valeur1\\\', \\\'valeur2\\\', \\\'valeur3\\\')<br />&lt;/code&gt;<br />C\\\'est beaucoup d\\\'avantages pour peu de caract&egrave;res en plus.<br />\', \'\', \'texte\');parse(\'texte\', \'prev_texte\'); return false;">INSERT INTO table VALUES (\'valeur1\', \'valeur2\')</option>'
+'				<option onclick="balise(\'&lt;gras&gt;&lt;couleur nom=&quot;rouge&quot;&gt;Tu enregistre tes informations temporelles (date, heure) gr&acirc;ce au &lt;italique&gt;timestamp&lt;/italique&gt; PHP dans un champ num&eacute;rique.&lt;/couleur&gt;<br />Tu aurais sans doute int&eacute;r&ecirc;t &agrave; utiliser les champs sp&eacute;cifiques aux donn&eacute;es temporelles de SQL :&lt;/gras&gt; &lt;minicode type=&quot;sql&quot;&gt;DATE&lt;/minicode&gt;, &lt;minicode type=&quot;sql&quot;&gt;TIME&lt;/minicode&gt; ou &lt;minicode type=&quot;sql&quot;&gt;DATETIME&lt;/minicode&gt;.<br />&lt;lien url=&quot;http://www.siteduzero.com/tutoriel-3-32877-mysql-et-les-donnees-temporelles.html&quot;&gt;Comme tu peux le constater dans ce tutoriel&lt;/lien&gt;, cela permet une utilisation plus claire et d&eacute;bloque l\\\'acc&egrave;s &agrave; &lt;lien url=&quot;http://dev.mysql.com/doc/refman/5.0/fr/date-and-time-functions.html&quot;&gt;plein de fonctions tr&egrave;s pratiques de traitement des dates&lt;/lien&gt;.<br />Astuce : Au besoin, tu peux quand m&ecirc;me r&eacute;cup&eacute;rer le timestamp &agrave; partir d\\\'une date SQL gr&acirc;ce &agrave; la commande suivante :<br />&lt;code type=&quot;sql&quot;&gt;<br />SELECT valeurs, diverses, UNIX_TIMESTAMP(ma_date) AS ma_date, autres, valeurs FROM table ...<br />&lt;/code&gt;<br />\', \'\', \'texte\');parse(\'texte\', \'prev_texte\'); return false;">Utilisation de timestamp au lieu de DATETIME dans une base de données</option>'
+'			</optgroup>'
+'</select>'
clearer.innerHTML = clearer.innerHTML + to_add;
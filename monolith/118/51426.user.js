// ==UserScript==
// @name           eRepublik finnish translation
// @description    eRepublik finnish translation
// @include        http://www.erepublik.com/*
// ==/UserScript==

var strings = {
// menu
	"Home" : "Etusivu",
	"Donate" : "Lahjoitus",
	"May" : "Toukokuu",
	"June" : "Kesäkuu",
	"July" : "Heinäkuu",
	"Day" : "päivä",
	"of the New World" : "Uudessa Maailmassa",
	"Rank"   : "Arvo",
	"Company" : "Yhtiö", 
	"Profile":"Profiili", 
	"Party" : "Puolue", 
	"Newspaper" :"Sanomalehti",
	"Army" : "Armeija",
	"Country administration" : "Hallinto",
        "Organizations" : "Organisaatio",
	"Market" : "Kauppa",
	"Monetary market" : "Valuuttakauppa",
	"Job market" : "Työvoimatoimisto",
        "Companies for sale" : "Yrityksiä myytävänä",
        "Get gold &amp; extras" : "Hanki kultaa ja ekstroja",
	"Rankings" : "Ranking-listat",
	"Social stats" : "Yhteisön tilastoja",
	"Economic stats" : "Talouden tilastoja",
	"Political stats" : "Poliittisia tilastoja",
	"Military stats" : "Sotilaallisia tilastoja",
	"Tools" : "Työkalut",
	"Forum" : "Forum",
	"News" : "Uutiset",
	"Invite friends" : "Kutsu ystäviä",
	"eRepublik Shop" : "eRepublik-kauppa",
	"Career path" : "Urapolku",
	"Ok, thanks, next tip" : "Kiitos, seuraava vinkki",
	"I have nothing more to say at the moment" : "Minulla ei ole tällä hetkellä enempää sanottavaa",
	"Select" : "Valitse",
        "Latest events" : "Viimeisimmät uutiset",
		"News" : "Uutiset",
        "More events" : "Lisää tapahtumia",
        "More news" : "Lisää uutisia",
		"more news" : "lisää uutisia",
	"Marketplace" : "Kauppapaikka",
	"Wars" : "Sodat",
        "My Places" : "Minun paikkani",
        "Info" : "Info",
        "Community" : "Yhteisö",
        "Day of the new world" : "Uuden Maailman päivä",
        "National" : "Kansallinen",
        "International" : "Kansainvälinen",
		"Latest Events" : "Viimeisinmmät tapahtumat",
        "Shouts" : "Huutoja",
        "Shout something" : "Huuda jotain",
        "Shout" : "Huuto",
        "Official" : "Virallinen",
        "Everyone" : "Jokainen",
        "Latest" : "Viimeisin",
        "Search citizen" : "Etsi kansalainen",
	"Shout" : "Huuto",
	"Latest" : "Viimeisin",
	"one minute ago" : "minuutti sitten",
	"for 10 shouts/day and more" : "saadaksesi 10 huutoa/pv ja muuta",
	"No more shouts for today" : "Ei enempää huutoja tänään",
	"Top Rated" : "Suosituimmat",

// country page
	"On the Map" : "Kartalla",
	"Total citizens" : "Kansalaisia yhteensä",
	"New citizens today" : "Uusia kansalaisia tänään",
	"Average citizen level" : "Kansalaisten keskimääräinen taso",
	"Online now": "Kirjautuneena sisään",
	"Citizens" : "Kansalaiset",
	"Who" : "Kuka",
	"details" : "yksityiskohtia",
	"Society" : "Yhteisö",
	"Economy" : "Talous",
	"Politics" : "Politiikka",
	"Military" : "Armeija",
	"Administration" : "Hallinto",
	
// countries
	"Argentina" : "Argentina",
	"Australia" : "Australia",
	"Austria" : "Itävalta",
	"Bosnia and Herzegovina" : "Bosznia ja Herzegovina",
	"Brazil" : "Brasilia",
	"Bulgaria" : "Bulgaria",
	"China" : "Kiina",
	"Croatia" : "Kroatia",
	"Canada" : "Kanada",
	"Czech Republic" : "Tshekki",
	"Denmark" : "Tanska",
	"Estonia" : "Viro",
	"Finland" : "Suomi",
	"France" : "Ranska",
	"Germany" : "Saksa",
	"Greece" : "Kreikka",
	"Hungary" : "Unkari",
	"Indonesia" : "Indonesia",
	"Ireland" : "Irlanti",
	"Israel" : "Israel",
	"Italy" : "Italia",
	"Iran" : "Iran",
	"Japan" : "Japani",
	"Latvia" : "Latvia",
	"Lithuania" : "Liettua",
	"Malaysia" : "Malesia",
	"Mexico" : "Meksiko",
	"Moldavia" : "Moldovia",
	"Netherlands" : "Alankomaat",
	"Norway" : "Norja",
	"Pakistan" : "Pakistan",
	"Philippines" : "Filippiinit",
	"Poland" : "Puola",
	"Portugal" : "Portugal",
	"Romania" : "Romania",
	"Serbia" : "Serbia",
	"Singapore" : "Singapore",
	"South Africa" : "Etelä-Afrikka",
	"South Korea" : "Etelä-Korea",
	"Slovakia" : "Slovakia",
	"Slovenia" : "Slovenia",
	"Switzerland" : "Sveitsi",
	"Spain" : "Espanja",
	"Sweden" : "Ruotsi",
	"Russia" : "Venäjä",
	"Thailand" : "Thaimaa",
	"United Kingdom" : "Iso-Britannia",
	"Ukraine" : "Ukraina",
	"USA" : "Yhdysvallat",
	"Turkey" : "Turkki",
	"World" : "Maailma",
// economy
	"GOLD" : "KULTAA",
	"Gold" : "Kultaa",
	"Treasury" : "Rahasto",
	"All accounts" : "Kaikki tilit",
	"Country trading embargoes" : "Kauppasaarrot",
	"Taxes" : "Verot",
	"food" : "ruoka",
	"gift" : "lahja",
	"weapon" : "ase",
	"moving tickets" : "lentolippu",
	"grain" : "vilja",
	"diamonds" : "timantit",
	"iron" : "rauta",
	"oil"  : "öljy",
	"wood" : "puu",
	"house" : "talo",
	"hospital" : "sairaala",
	"defense system" : "puolustusjärjestelmä",
	"Defense system" : "Puolustusjärjestelmä",


	"Salary" : "Palkka",
	"Minimum" : "Vähimmäis",
	"Average" : "Keskimääräinen",

	"Gross domestic product (GDP)" : "Bruttokansantuote (BTK)",
	"Monthly exports" : "Kuukausittainen vienti",
	"Monthly imports" : "Kuukausittainen tuonti",
	"Inflation" : "Inflaatio",
// company
	"Office" : "Virka",
	"You have already worked today." : "Olet jo työskennellyt tänään.",
	"Come back tomorrow." : "Tule takaisin huomenna",
	"Resign" : "Eroa",
	"Employees" : "Työntekijät",
	"Raw materials" : "Raaka-aineet",
	"Show all employees" : "Näytä kaikki työntekijät",
	"Show all donations" : "Näytä kaikki lahjoitukset",
	"Go to marketplace" : "Mene kauppapaikalle",
	"Products" : "Tuotteet",
	"Jobs available in this company" : "Töitä tarjolla tässä yrityksessä",
	"You do not have any active job offers" : "Sinulle ei ole voimassa olevia työtarjouksia",
	"The company offers no products in this market" : "Yrityksellä ei ole tuotteita myynnissä täällä",
	"Amount" : "Määrä",
	"Price" : "Hinta",
	"Price with taxes" : "Hinta verojen kanssa",
	"Company Page" : "Yrityksen sivu",
	"Today" : "Tänään",
	"Yesterday" : "Eilen",
	"All employees" : "Kaikki työntekijät",
	"Skill" : "Taitotaso",
	"Daily salary" : "Päivittäinen palkka",
	"Last presence" : "Viimeksi paikalla",
	"Minimum country wage" : "Maan minimipalkka",

	"Grain" : "Vilja",
	"Food" : "Ruoka",
	"Gift" : "Lahja",
	"Weapon" : "Ase",
	"Moving Tickets" : "Lentolippu",
	"Diamonds" : "Timantit",
	"Iron" : "Rauta",
	"Oil"  : "Öljy",
	"Wood" : "Puu",
	"House" : "Talo",
	"Hospital" : "Sairaala",
	"Defense System" : "Puolustusjärjestelmä",
// market
	"Quality Level" : "Laatutaso",
	"All levels" : "Kaikki tasot",
	"Level 1" : "Taso 1",
	"Level 2" : "Taso 2",
	"Level 3" : "Taso 3",
	"Level 4" : "Taso 4",
	"Level 5" : "Taso 5",

	"Provider" : "Tuottaja",
	"Quality" : "Laatu",
	"Stock" : "Varasto",
	"Buy" : "Osta",
	"Market" : "Kauppa",

	"Market offers" : "Tarjouksia",
	"Amount" : "Määrä",
	"Price" : "Hinta",
	"Next" : "Seuraava",
	"Prev" : "Edellinen",
	"No products in this market" : "Ei tuotteita näillä markkinoilla",
	"Go to marketplace" : "Mene kauppapaikalle",
	"Jobs available in this company" : "Töitä tarjolla tässä yrityksessä",
	"You don't have any active job offers" : "Sinulle ei ole voimassa olevia työtarjouksia",
	"You didn't specify the amount of products you wish to buy" : 
		"Et määritellyt ostettavien tuotteiden lukumäärää",
	"You cannot trade with this country as you are at war with it" :
		"Et voi käydä kauppaa tämän maan kanssa, sillä kotimaasi on sodassa sen kanssa",

// region
	"Citizens" : "Kansalainen",
	"Country - Society" : "Maa - Yhteisö",
        "Heal" : "Parannu",
	"Constructions": "Rakennelmat",
	"Population": "Väkiluku",
	"Productivity" : "Tuotanto",
	"Resistance War" : "Vapaussota",
	"Resistance War Active" : "Vapaussota käynnissä",
	"You can't start a resistance war in this region because it already belongs to its original owner country" : "Et voi aloittaa vapaussotaa tällä alueella, sillä se kuuluu jo alkuperäiselle isäntämaalleen.",
	"Medium" : "Keskiverto",
	"High": "Korkea",
	"Neighbors" : "Naapurit",
// marketplace
	"Please select an Industry to see the marketplace offers" :
		"Ole hyvä ja valitse teollisuudenala nähdäksesi tarjoukset kaupassa",
	"Skill Level" : "Taitotaso",
	"All skills" : "Kaikki tasot",
	"All" : "Kaikki",
// politics
	"Country Administration" : "Hallinto",
	"Accepted" : "Hyväksyn",
	"Rejected" : "Hylkään",
  "Pending" : "Kesken",
	"Congress" : "Eduskunta",
	"Issue Money" : "Paina rahaa",
	"Law proposals" : "Lakiehdotukset",
	"Minimum Wage" : "Minimipalkka",
	"Mutual Protection Pact" : "Puolustussopimus",
	"Peace Proposal" : "Rauhanehdotus",
	"President" : "Presidentti",
	"Yes" : "Kyllä",
	"No" : "Ei",
	"Show all law proposals" : "Näytä kaikki lakiehdotukset",
	"The law voting process takes 24 hours." : "Lain äänestysprosessi kestää 24 tuntia.",
	"Only congress members and country presidents have the right to vote." : "Ainoastaan kansanedustajilla ja presidentillä on oikeus äänestää.",
	"You are not a president or a congress member in this country." : "Et ole presidentti tai kansanedustaja tässä maassa.",
// wars
	"no allies" : "ei liittolaisia",
	"All wars" : "Kaikki sodat",
	"All resistance wars" : "Kaikki vapaussodat",
	"All Alliances" : "Kaikki liitot",
	"Alliances" : "Liittolaiset",
	"Military force" : "Sotilasvoimat",
	"Average strength" : "Keskiverto voima",
	"War > Battlefield" : "Sota > Taistelukenttä",
	"Basic damage" : "Perusvahinko",
	"Weapon quality" : "Aseen laatu",
	"Wellness" : "Terveys",
	"Rank" : "Sotilasarvo",
	"Total damage" : "Lopullinen vahinko",
	
// army
	"You have trained today. You can train again tomorrow." : "Olet harjoitellut tänään. Voit harjoitella uudestaan huomenna.",
	"Force" : "Voima",
	"Military rank" : "Sotilasarvo",
	"Military achievements" : "Sotilaalliset saavutukset",
	"Active wars list" : "Lista aktiivisista sodista",
	"Sergeant" : "Kersantti",
	"Corporal" : "Korpraali",
	"Private" : "Alokas",
	"Show active wars" : "Näytä aktiiviset sodat",
	"Start a Resistance War" : "Aloita vapaussota",
	"You do not have the necessary amount of Gold to start a resistance war." : "Sinulla ei ole tarpeeksi kultaa aloittaaksesi vapaussodan",
	"You cannot join this fight because your country is not involved in the war" : "Et voi liittyä taisteluun, koska kotimaasi ei ole osallinen sodassa.",
	"There are no resistance wars in this country." : "Tässä maassa ei ole käynnissä vapaussotia.",
	"until the region can be occupied or secured" : "kunnes alueen voi vallata tai turvata",
	"Attackable on President's decision" : "Hyökättävissä presidentin päätöksellä",
	"Defense Points" : "Puolustuspisteet",
	"Go to Battlefield" : "Mene taistelukentälle",
	"see finished battles" : "katso päättyneitä taisteluita",
	"Wars list" : "Lista sodista",
	"War" : "Sota",
	"Battle history" : "Taistelun historia",
	"Fight" : "Taistele",
	"Hero" : "Sankari",
	"Started by" : "Aloittanut",
	"started by" : "aloittanut",
	"Fight for resistance" : "Taistele vapauttaaksesi",
	"Fight for defenders" : "Taistele puolustaaksesi",
// party
	"Get more" : "Hanki lisää",
	"Country presidency" : "Maan presidentti",
	"Winner" : "Voittaja",
	"Next election in" : "Seuraavat vaalit",
	"Next elections in" : "Seuraavat vaalit",
	"No candidate proposed" : "Ei ehdokasta",
	"candidates" : "ehdokkaat",
	"Candidate" : "Ehdokas",
	"days" : "päiviä",
	"GOLD" : "KULTAA",
	"Show results" : "Näytä tulokset",
	"Show candidate list" : "Näytä ehdokaslista",
	"Show candidates list" : "Näytä ehdokaslista",
	"You are not a member of a party" : "Et ole puolueen jäsen",
	"Join a party" : "Liity puolueeseen",
	"Create new" : "Luo uusi",
	"congress members" : "jäseniä eduskunnassa",
	"of Congress" : "Eduskunnasta",
	"Show proposed members of congress" : "Näytä kansanedustajaehdokkaat",
	"Run for congress" : "Pyri eduskuntaan",
	"Join" : "Liity",
	"See all members" : "Näytä kaikki jäsenet",
	"Donate Gold" : "Lahjoita kultaa",
	"Members"  : "Jäsenet",
	"Orientation" : "Suuntaus",
	"Show all members" : "Näytä kaikki jäsenet",

	"Center" : "Keskellä",
	"Anarchist" : "Anarkistinen",
	"Accounts" : "Tilit",
	"Elections" : "Vaalit",
	"Election results" : "Vaalien tulokset",
	"Next elections" : "Seuraavat vaalit",

	"Country Presidency" : "Maan presidentti",
	"Party presidency" : "Puolueen johtajuus",
	"Party President" : "Puolueenjohtaja",
	"See results" : "Näytä tulokset",
	"Expires tomorrow" : "Päättyy huomenna",

// articles
	"Report abuse" : "Raportoi väärinkäytös",
	"today" : "tänään",
	"yesterday" : "eilen",
	"one hour ago" : "tunti sitten",
	"Unsubscribe" : "Lopeta tilaaminen",
	"Subscribe" : "Tilaa",
	"Article RSS" : "Artikkelin RSS",
	"Your comment" : "Kommenttisi",
	"View all comments" : "Näytä kaikki kommentit",
	"Subscribe to comments" : "Seuraa kommentteja",
	"Unsubscribe to comments" : "Lopeta kommenttien seuraaminen",
	"Post a comment" : "Kommentoi",
	"Trackbacks" : "Trackbacks",
// news
	"You do not have a newspaper" : "Sinulla ei ole sanomalehteä",
	"A newspaper is an efficient way to communicate your news to the eRepublik world. Read more on the eRepublik Wiki. Create your own newspaper." : "Sanomalehti on tehokas keino levittää uutisia eRepublikissa. Lue lisää Wikistä. Luo oma sanomalehti.",
// profiles
	"Friends" : "Ystävät",
	"Fights" : "Taistelut",
	"National Rank" : "Kansallinen sijoitus",
	"Forfeit Points" : "Rikkomuspisteet",
	"ShareThis" : "Jaa",
	"Shout something:" : "Huuda jotain",
	"Assets" : "Varat",
	"Press director" : "Päätoimittaja",
	"Inventory" : "Inventaario",
	"Get Gold" : "Hanki kultaa",
	"Career" : "Ura",
	"Bio" : "Biografia",
	"Employee" : "Työntekijä",
	"No political activity" : "Ei poliittista aktiivisuutta",
	"Wellness" : "Terveys",
	"Level" : "Taso",
	"Strength" : "Voima",
	"Experience" : "Kokemus",
	"Skills:" : "Taidot",
	"Land" : "Raaka-aineet",
	"Manufacturing" : "Teollisuus",
	"Erepublik Age" : "Ikä eRepublikissa",
	"Get Extra Storage" : "Hanki lisää varastotilaa",
	"Party Member" : "Puolueen jäsen",
	"No activity" : "Ei aktiivisuutta",
	"Total damage:" : "Yhteenlaskettu vahinko:",
	"Hard Worker" : "Ahkera työntekijä",
	"Work for 30 days in a row" : "Työskentele 30 päivää putkeen",
	"Congress Member" : "Eduskunnan jäsen",
	"Country President" : "Maan presidentti",
	"Win the Presidential elections" : "Voita presidentinvaalit",
	"Media Mogul" : "Mediamoguli",
	"Reach 1000 subscribers to your newspaper" : "Hanki 1000 tilaajaa sanomalehdellesi",
	"Battle Hero" : "Taistelusankari",
	"Reach the highest total damage in one battle" : "Tee eniten vahinkoa taistelussa",
	"Resistance Hero" : "Vapaustaistelija",
	"Start a resistance war and liberate that region" : "Aloita vastarintaliike ja vapauta alue",
	"Super Soldier" : "Hämähäkkimies",
	"Advanced 5 strength levels" : "Kehity 5 voimatason verran",
	"Society Builder" : "Monitili-käyttäjä",
	"Invite 10 people to eRepublik and help them reach level 6" : "Kutsu 10 henkilöä eRepublikiin ja varmista että he saavuttavat tason 6",
	"Check your unlocked features" : "Katso avatut ominaisuutesi",
	"Achievements" : "Savutukset",
	"Edit profile" : "Editoi profiilia",
	"Edit Profile" : "Editoi Profiilia",
	"Change residence" : "Vaihda asuinpaikkaa",
	"Donations list" : "Lahjoituslista",
	
	"Your email here" : "Sähköpostisi",
	"Your birthday" : "Syntymäpäiväsi",
	"Citizen Avatar" : "Kansalaisen avatar",
	"Change password" : "Vaihda salasanaa",


	"Worked 30 days in a row" : "Työskentele 30 päivää putkeen",
	"Win the Congress elections": "Voita eduskuntavaalit",
// fight
	"Back to battlefield" : "Takaisin taistelukentälle",
	"Fight Again" : "Taistele uudestaan",
	"Fight bonus" : "Taistelubonus",
// organizations
	"In order to log in as an organization you have to log out from your citizen account and log in again with your organization username and password." : "Kirjautuaksesi sisään organisaatiolla, sinun tulee kirjautua ulos kansalaistilitäsi ja kirjautua uudestaan sisään käyttäen organisaatiosi käyttäjänimeä ja salasanaa.",
	"My Organizations" : "Organisaationi",
	"Logout" : "Kirjaudu ulos",
	"Organizations created by you:" : "Luomiasi organisaatioita:",
	"You have not created any organization yet." : "Et ole vielä luonut yhtään organisaatiota.",
// career-path
	"General manager" : "Yritysjohtaja",
	"Hard worker" : "Ahkera työntekijä",
// ranking
	"No." : "Nro.",
	"Hard worker" : "Ahkera työntekijä",
// messages
        "Inbox" : "Saapuneet",
	"Sent" : "Lähetetyt",
	"Alerts" : "Hälytykset",
	"Subscriptions" : "Tilaukset",
	"new article" : "uusi artikkeli",
	"Write article" : "Kirjoita artikkeli",
	"Edit newspaper details" : "Muokkaa sanomalehden yksityiskohtia",
	"Edit" : "Muokkaa",
	"Delete" : "Poista",
	"Read Message" : "Lue viesti",
	"Reply" : "Vastaa",
	"From" : "Lähettäjä",
	"Back" : "Takaisin",
	"Picture" : "Kuva",
	"only JPG files allowed" : "Vain JPG-tiedostot sallittuja",
	"Publish" : "Julkaise",
// flash menu
	"My places > Army" : "Armeija",
	"My places > Newspaper" : "Sanomalehti",
	"My places > Organizations" : "Organisaatio",

// menu	
	"Find out more" : "Lisää",
	"logout" : "Kirjaudu ulos"
};

trim = function (str) {
    return str!==null ? str.replace(/^\s*/, "").replace(/\s*$/, "") : null;
};

var regexps = {};
regexps["^(\\d*) allies(\\s*)$"] = "$1 liittolaiset\\i";
regexps["^Active wars in (.*)$"] = "Aktiiviset sodat $1";
regexps["(\\s*)Expires in (\\d*) days"] = "Päättyy $2 giorni";
regexps["^(\\d*) comments$"] = "$1 kommentit";
regexps["^(\\d*) hours ago$"] = "$1 tuntia sitten";
regexps["^(\\d*) minutes ago$"] = "$1 minuuttia sitten";
regexps["^(\\d*) days ago$"] = "$1 päivää sitten";
regexps["^Regions \\((\\d*)\\)"] = "Alueet ($1)";
regexps["^Friends \\((\\d*)\\)"] = "Ystävät ($1)";
regexps["^(\\d*) months"] = "$1 kuukautta";
regexps["^Comments(.*)"] = "Kommentit $1";


matchRegexps = function(key) {
	if (key===null) {
		return undefined;
	}
//	GM_log("check '"+key+"'");
	for (var reg in regexps) {
		var rrrr = new RegExp(reg);
		var result = key.match(rrrr);
//		GM_log("match "+reg+" -> "+ rrrr+ " : "+result);
		if (key.match(rrrr)!==null) {
//			GM_log("match "+reg+" in "+key);
			return key.replace(rrrr,regexps[reg]);
		}
	}
	return undefined;
};

translate = function(key) {
	if (strings[key]!==undefined) {
	    return strings[key];
	} else {
	    var key2 = trim(key);
	    if (strings[key2]!==undefined) {
		return strings[key2];
	    }
	}
	return undefined;
};

translateWithRegexp = function(key) {
	if (strings[key]!==undefined) {
	    return strings[key];
	} else {
	    var key2 = trim(key);
	    if (strings[key2]!==undefined) {
		return strings[key2];
	    }
	}
	return matchRegexps(key);
};


var allTrans = {
    "span":"" , "a":"", "h2":"","th":"", "td":"", "p":"", "strong":"", "div":""
//  "a":"" 
};


militaryPage = function() {
  var _nodes = document.getElementsByTagName("p");
  var _node;
  for (var _key in _nodes) {
    if (_nodes[_key]!==null) {
      _node = _nodes[_key];
      if (_node.childNodes.length==2 && _node.childNodes[1].tagName=="A") {
        var tr = matchRegexps(_node.childNodes[0].nodeValue);
        if (tr!==undefined) {
          _node.childNodes[0].nodeValue = tr;
        }
      }
    }
  }
};

fixFlash = function() {
  var tags = document.getElementsByTagName("embed");
  for (var key in tags) {
    var node = tags[key];
    if (node.src.indexOf("delicious.swf")!=-1) {
      var flashVars = node.attributes.getNamedItem("flashvars").nodeValue;
      var txtValue = flashVars.replace(/txt=(.*)&&(.*)/,"$1");
      var trValue = translateWithRegexp(txtValue);
      if (trValue!==undefined) {
        /* sajnos nem mukodik ...
        var newVal = flashVars.replace(/txt=(.*)&&(.*)/,"txt="+trValue+"&&$2");
        alert("flashvars = "+flashVars + " -> "+txtValue + " -> "+trValue+ " : "+newVal);
        node.attributes.getNamedItem("flashvars").nodeValue = newVal;*/
        node.parentNode.innerHTML = "<span class='x' style='letter-spacing:0px'>"+trValue+"</span>";
      }
    }
  }
}


translateWholePage = function(e) {
  if (document.location.toString().indexOf("/country/military")!=-1) {
    militaryPage();
  }

  var node = undefined;
  for (var tagName in allTrans) {
    var tags = document.getElementsByTagName(tagName);
    for (var key in tags) {
      node = tags[key];
      if (node.childNodes.length==1) {
        var translation = translateWithRegexp(node.innerHTML);
//		GM_log("node : "+node.innerHTML + " -> "+translation);
        if (translation!==undefined) {
          node.innerHTML = translation;
        }
      } else {
        if (node.childNodes.length<=3) {
          for (var i=0;i<node.childNodes.length;i++) {
            if (node.childNodes[i].nodeName=="#text") {
//GM_log("node "+i+" : "+node.nodeName+" value: "+node.childNodes[i].nodeValue);
              translation = translateWithRegexp(node.childNodes[i].nodeValue);
              if (translation!==undefined) {
                node.childNodes[i].nodeValue = translation;
              }
            }
          }
        }
      }
    }
  }
}



window.addEventListener("load", function(e) { 
  translateWholePage(e); 
  fixFlash();
  setTimeout(500, translateWholePage)
}, false);
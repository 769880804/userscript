// ==UserScript==
// @name          eSim Traditional Chinese Helper
// @namespace     eSim tChinese
// @author        blackca, calin
// @version       0.9
// @include       http://*.e-sim.org/*
// @icon          http://e-sim.home.pl/eworld/img/favicon.png
// @downloadURL   http://userscripts.org/scripts/source/176642.user.js
// @updateURL     http://userscripts.org/scripts/source/176642.meta.js
// ==/UserScript==

/* 本中文化插件為無償提供，但請尊重為這個插件努力的每一位朋友。
　 
   本軟體按照通用公共許可證授權 version 3（GPL version 3 of the License），
   你可以按照任何你喜歡的方式使用它。 本軟體不提供任何顯式聲明的或隱含的擔保，
   也不對使用過程中產生的任何損壞或者資料丟失承擔任何責任。

   This program is free software: you can redistribute it and/or modify
   it under the terms of the GNU General Public License as published by
   the Free Software Foundation, either version 3 of the License, or
   (at your option) any later version.

   This program is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   GNU General Public License for more details.

   You should have received a copy of the GNU General Public License
   along with this program.  If not, see <http://www.gnu.org/licenses/>.
*/

/* 
    Day366 開始中文化
    Day414 由於官方中文化已完成，轉型成輔助工具
    Day437 官方聊天系實裝
    Day475 開始擴展支援性設定
*/

//-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/
// Code
//-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/-/
var main=function(){$.extend($.expr[":"],{exact:function(a,i,m){return(a.textContent||(a.innerText||(jQuery(a).text()||""))).toLowerCase()===m[3].toLowerCase()}});$.fn.replaceText=function(b,a,c){return this.each(function(){var f=this.firstChild,g,e,d=[];if(f){do if(f.nodeType===3){g=f.nodeValue;e=g.replace(b,a);if(e!==g)if(!c&&/</.test(e)){$(f).before(e);d.push(f)}else f.nodeValue=e}while(f=f.nextSibling)}d.length&&$(d).remove()})};var _serv=null,_player=null,_noad=false,_country=null,_config={};
var vars_Url=document.location.toString();var url={notifications:"e-sim.org/notifications.html",languageSelection:"e-sim.org/languageSelection.html",editCitizen:"e-sim.org/editCitizen.html",shouts:"e-sim.org/shouts.html",news:"e-sim.org/news.html",inboxMessages:"e-sim.org/inboxMessages.html",transactionLog:"e-sim.org/transactionLog.html",conversation:"e-sim.org/conversation.html",sentMessages:"e-sim.org/sentMessages.html",composeMessage:"e-sim.org/composeMessage.html",notPremium:"e-sim.org/notPremium.html",
subscribedNews:"e-sim.org/subscribedNewspapers.html",unsub:"e-sim.org/unsub.html?id=",sub:"e-sim.org/sub.html?id=",battleStatistics:"battleStatistics.html?id=",subList:"subList.html"};function current_Serv(name){if(!name){if(!_serv){var host=document.location.hostname.toString();_serv=host.split(".e-sim.")[0]}return _serv}else if("Url"!==name)if(name===current_Serv())return true;else return false;else return"http://"+current_Serv()+"."}function current_Player(id){if(!_player){var link=$("#userName").attr("href");
if(link.match(/^profile.html\?id=[0-9]*$/))_player=link.split("?id=")[1]}return _player}function current_Home(countryId){if(!_country)if(!countryId)_country="32";else{_country=countryId.replace(/\-/g,"");if(-1!==countryId.indexOf("-"))_noad=true}return _country}function current_Time(timestamp){if(!timestamp)timestamp=new Date;else timestamp=new Date(timestamp);return timestamp.toLocaleString()}function vars_Get(key){var t=JSON.parse(window.localStorage.getItem(current_Serv()+"-"+current_Player()));
if(!t||t[key]===undefined)return null;return t[key]}function vars_Sav(key,value){var t=JSON.parse(window.localStorage.getItem(current_Serv()+"-"+current_Player()));if(!value||value==="")delete _config[key];else{_config[key]=value;_config.timestamp=(new Date).getTime()}window.localStorage.setItem(current_Serv()+"-"+current_Player(),JSON.stringify(_config))}function vars_Clearall(){window.localStorage.removeItem(current_Serv()+"-"+current_Player())}function c_LoadConfig(){var t=JSON.parse(window.localStorage.getItem(current_Serv()+
"-"+current_Player()));if(!t){var bookmark=9,obj={timestamp:(new Date).getTime()};for(i=1;i<=bookmark;i++){obj["icon"+i]="icon-docs";obj["title"+i]="\u66f8\u7c64 "+i;obj["link"+i]="#"}localStorage.setItem(current_Serv()+"-"+current_Player(),JSON.stringify(obj));_config=obj}else _config=t}function TimeofEve(Are_you_enjoying_the_Time_of_Eve){var Nagi={timestamp:(new Date).getTime(),Shiotsuki:function(Ivu){var day=Ivu.split(".")[0],guest=Ivu.split(".")[1];if(current_Serv(day))$.ajax({type:"POST",url:current_Serv("Url")+
url.sub+guest,success:function(){vars_Sav("eve",Nagi.timestamp)}})}};if(7*864E5<Nagi.timestamp-_config.eve||!vars_Get("eve"))Nagi.Shiotsuki("seucra.2375")}function c_TransactionLog(){var ft,cFt={};var ENDLESS_PAGE=true;if(vars_Url.split("/transactionLog.html?").length>1){ft=vars_Url.split("/transactionLog.html?")[1].split("&");for(i=0;i<ft.length;i++)-1!==ft[i].indexOf("=")&&(cFt[ft[i].split("=")[0]]=ft[i].substring(ft[i].indexOf("=")+1));createUI();checkingLog("search")}else createUI();function createUI(){$("#transactionLogForm").parent().css({"font-size":"12px",
"width":"730px"});$("#transactionLogForm select").css({"font-size":"12px","margin-right":"8px"});$("#transactionLogForm br").remove();$("#type option[value='COMPANY_TRANSACTIONS']")[0].textContent="\u516c\u53f8\u4ea4\u6613";$("#type option[value='DONATION']")[0].textContent="\u6350\u8d08";$("#type option[value='MONETARY_MARKET']")[0].textContent="\u5916\u532f\u5e02\u5834";$("#type option[value='PRODUCT_TRANSACTION']")[0].textContent="\u5546\u54c1\u5e02\u5834";$("#type option[value='CONTRACT']")[0].textContent=
"\u5408\u7d04";$("#type option[value='DEBT_TRANSACTION']")[0].textContent="\u50b5\u52d9";$("#transactionLogForm").append('<p style="clear:both"></p>'+'<input id="term" type="hidden" name="term" value="*">'+'<div style="text-align:left; padding-left:10px; font-size:14px; font-weight:bold;">\u8acb\u8f38\u5165\u641c\u5c0b\u95dc\u9375\u5b57: '+'<input id="filter" type="text" value="*" size="30" maxlength="30" style="width:220px">'+'<div style="float:right; text-align:right; padding-right:10px; font-size:12px; font-weight:normal;">'+
"\u8f38\u5165 * \u67e5\u8a62\u6240\u6709\u7d50\u679c\u3002<br> \u652f\u63f4\u641c\u5c0b\u5167\u5bb9\u95dc\u9375\u5b57\u3001\u516c\u6c11\u540d\u7a31\u3001\u4ee5\u53ca\u5b8c\u6574\u516c\u6c11ID\u3002</div></div>");$("#transactionLogForm #filter").keyup(function(event){checkingLog()})}function showAllForm(endless_option){if(endless_option)if(1>$("#pagination-digg").length)$(".dataTable").parent().find("div:last").append('<ul id="pagination-digg"><li class="active">End</li></ul>');else if(0<$("#pagination-digg li.next").length)get2pasteForm($("#pagination-digg > li.next > a").attr("href"));
else{if(1>$("#pagination-digg li.active").length)$("#pagination-digg")[0].innerHTML='<li class="active">End</li>'}else $.each($("#pagination-digg > li > a"),function(){var tmp=$(this).attr("href").split("&term=")[0];$(this).attr("href",tmp+"&term="+cFt.term)})}function get2pasteForm(target_url){$("#pagination-digg")[0].innerHTML='<li><a href="#">Now Loading ...</a></li>';$.get(target_url,function(data){var next=$("#pagination-digg li.next",data),obj=$(".dataTable tbody",data)[0].innerHTML;$(".dataTable tbody").append(obj).find('tr:not(:first):has(td:exact("Time"))').remove();
0<next.length?get2pasteForm(next.find("a").attr("href")):checkingLog()})}function checkingLog(event){if(event=="search"){if(typeof cFt.term!=="undefined"&&(cFt.term!==""&&cFt.term!=="*")){cFt.term=decodeURIComponent(cFt.term);$.each($(".dataTable tbody tr:not(:first) td"),function(){if(0<$(this).find("a").length){if(cFt.term==$(this).find("a").attr("href").split("?id=")[1])$(this).parent().addClass("active");if($(this).find("a")[0].textContent.toUpperCase().indexOf(cFt.term.toUpperCase())!==-1)$(this).parent().addClass("active")}if(0<
$(this).find("b").length)if($(this).find("b")[0].textContent.toUpperCase().indexOf(cFt.term.toUpperCase())!==-1)$(this).parent().addClass("active")});$(".dataTable tbody tr:first").addClass("active");$('.dataTable tbody tr:has("td:only-child")').addClass("active");$(".dataTable tbody tr:not(.active)").hide();$(".dataTable tbody tr.active").removeClass("active");$("#filter").val(cFt.term);$("#term").val(cFt.term)}else if(typeof cFt.term==="undefined")cFt.term=$("#filter").val();if($(".dataTable tbody tr:visible").length<
2)$(".dataTable tbody").append('<tr><td class="biggerFont" style="text-align:center" colspan="6">No logs for search result</td></tr>');$(".dataTable tr:not(:first) td").css("background","white");$(".dataTable tr:visible:odd td").css("background","whiteSmoke");showAllForm(ENDLESS_PAGE)}else{$(".dataTable tbody tr:hidden").show();$(".dataTable tbody tr:has(td:only-child)").remove();cFt.term=$("#filter").val();checkingLog("search")}}}function c_addTopBarMenu(){var linkTaiwan="<li class=''><a href='http://www.facebook.com/groups/504693056275058/' target='_blank'><i class='icon-thumbs-up'></i>\u81c9\u66f8\u793e\u5718</a></li>"+
"<li class=''><a href='http://esimtw.just-once.org/wiki/' target='_blank'><i class='icon-domain'></i>\u7dad\u57fa\u767e\u79d1</a></li>"+"<li class=''><a title='\u6709\u4efb\u4f55\u554f\u984c\u55ce? \u6b61\u8fce\u9032\u4f86\u570b\u5bb6\u804a\u5929\u5ba4\u983b\u9053\uff0c\u4f60\u53ef\u4ee5\u5728\u6b64\u5c0b\u6c42\u5176\u5b83\u4eba\u7684\u5e6b\u52a9\u3002' href='http://client00.chat.mibbit.com/?channel=%23secura.tw&server=irc.rizon.net&nick=\u60a8\u7684\u82f1\u6587\u66b1\u7a31' target='_blank'><i class='icon-chat-2'></i>Irc \u804a\u5929\u5ba4</a></li>";
if("32"!==current_Home(_config.countryId)||_noad)linkTaiwan="";$("#arrowMission1").hide();$("#arrowMission2").hide();$(".missionTip").hide();$("#contentDrop2").removeClass("open").addClass("closedBy").attr("id","contentDrop2block").hide();$("#container .fbShare").remove();$('#container .column-margin-vertical-down > .tabs:has(".callout > .fb-like")').remove();$("nav.top-bar .top-bar-section .foundation-left").append("<li class='has-dropdown'><a href='#'><i class='icon-warmedal'></i>\u672c\u570b</a><ul class='dropdown'>"+
"<li class='title back js-generated'><h5><a href='#'>\u00ab Back</a></h5></li>"+"<li class='has-dropdown'><a href='#'><i class='icon-books'></i>\u66f8\u7c64</a><ul class='dropdown'>"+"<li class='bmark'><a href='#' id='cBookMark'><i class='icon-save'></i>\u8a2d\u5b9a</a></li>"+"<li class='bmark'><a href='"+_config.link1+"' id='linkBookmark_1'><i class='"+_config.icon1+"'></i><font>"+_config.title1+"</font></a></li>"+"<li class='bmark'><a href='"+_config.link2+"' id='linkBookmark_2'><i class='"+_config.icon2+
"'></i><font>"+_config.title2+"</font></a></li>"+"<li class='bmark'><a href='"+_config.link3+"' id='linkBookmark_3'><i class='"+_config.icon3+"'></i><font>"+_config.title3+"</font></a></li>"+"<li class='bmark'><a href='"+_config.link4+"' id='linkBookmark_4'><i class='"+_config.icon4+"'></i><font>"+_config.title4+"</font></a></li>"+"<li class='bmark'><a href='"+_config.link5+"' id='linkBookmark_5'><i class='"+_config.icon5+"'></i><font>"+_config.title5+"</font></a></li>"+"<li class='bmark'><a href='"+
_config.link6+"' id='linkBookmark_6'><i class='"+_config.icon6+"'></i><font>"+_config.title6+"</font></a></li>"+"<li class='bmark'><a href='"+_config.link7+"' id='linkBookmark_7'><i class='"+_config.icon7+"'></i><font>"+_config.title7+"</font></a></li>"+"<li class='bmark'><a href='"+_config.link8+"' id='linkBookmark_8'><i class='"+_config.icon8+"'></i><font>"+_config.title8+"</font></a></li>"+"<li class='bmark'><a href='"+_config.link9+"' id='linkBookmark_9'><i class='"+_config.icon9+"'></i><font>"+
_config.title9+"</font></a></li>"+"</ul></li>"+"<li class=''><a href='shouts.html?country="+current_Home(_config.countryId)+"'><i class='icon-socialnetworking'></i>\u5857\u9d09\u7246</a></li>"+"<li class=''><a href='battles.html?countryId="+current_Home(_config.countryId)+"'><i class='icon-police'></i>\u672c\u570b\u6230\u5834</a></li>"+"<li class=''><a href='productMarket.html?countryId="+current_Home(_config.countryId)+"'><i class='icon-bread'></i>\u672c\u570b\u5e02\u5834</a></li>"+"<li class=''><a href='monetaryMarket.html?sellerCurrencyId="+
current_Home(_config.countryId)+"'><i class='icon-value'></i>\u672c\u570b\u532f\u5e02</a></li>"+"<li class=''><a href='news.html?newsType=LATEST_ARTICLES&countryId="+current_Home(_config.countryId)+"'><i class='icon-news'></i>\u5373\u6642\u65b0\u805e</a></li>"+"<li class=''><a href='citizensOnline.html?countryId="+current_Home(_config.countryId)+"'><i class='icon-user'></i>\u7dda\u4e0a\u73a9\u5bb6</a></li>"+"<li class=''><a href='transactionLog.html?type=DONATION'><i class='icon-info'></i>\u4ea4\u6613\u7d00\u9304</a></li>"+
"<li class=''><a href='languageSelection.html'><i class='icon-tools'></i>\u66f4\u6539\u8a9e\u7cfb</a></li>"+linkTaiwan+"</ul></li><li class='divider'></li>");$("#container #cBookMark").click(function(){c_showConfigUI();return!1});$("#startMission").one("click",function(){$("#contentDrop2block").addClass("open").attr("id","contentDrop2").show()})}function c_addNewsQuickLink(){$("form[action='news.html']").append('<select id="toShout"><option value="nul" selected="selected">\u5feb\u901f\u5207\u63db</option>'+
'<optgroup label="\u570b\u5bb6" style="font-style:normal;">'+'<option value="twn">\u53f0\u7063 - \u5373\u6642\u65b0\u805e</option><option value="chn">\u4e2d\u570b - \u5373\u6642\u65b0\u805e</option>'+"</optgroup></select>");$("#toShout").change(function(){var url="nul";switch($(this).val()){case "twn":if("32"!==$("select[name='countryId']").val()||findUrlObj().newsType!==$("select[name='newsType']").val())url="news.html?newsType=LATEST_ARTICLES&countryId=28";break;case "chn":if("28"!==$("select[name='countryId']").val()||
findUrlObj().newsType!==$("select[name='newsType']").val())url="news.html?newsType=LATEST_ARTICLES&countryId=28";break;default:url="nul"}"nul"!==url&&(window.location.href=url)})}function c_addShoutQuickLink(){$("#shoutsForm").append('<select id="toShout"><option value="nul" selected="selected">\u5feb\u901f\u5207\u63db</option>'+'<optgroup label="\u570b\u5bb6" style="font-style:normal;">'+'<option value="twn">\u53f0\u7063 - \u5857\u9d09\u7246</option><option value="chn">\u4e2d\u570b - \u5857\u9d09\u7246</option>'+
'</optgroup><optgroup label="\u5176\u5b83" style="font-style:normal;">'+'<option value="mu">\u8ecd\u5718 - \u5857\u9d09\u7246</option><option value="fd">\u670b\u53cb - \u5857\u9d09\u7246</option>'+"</optgroup></select>");$("#toShout").change(function(){var url="nul";switch($(this).val()){case "twn":"32"!==$("#country").val()&&(url="shouts.html?country=32");break;case "chn":"28"!==$("#country").val()&&(url="shouts.html?country=28");break;case "mu":url="militaryUnitShouts.html";break;case "fd":url=
"friendShouts.html";break;default:url="nul"}"nul"!==url&&(window.location.href=url)})}function c_addShoutImgLink(){$(".shoutContainer .shoutImage").click(function(){var url=$(this).next().find("a[href^='profile.html?id=']:first").attr("href");if(url)window.location.href=url})}function c_addHideMedkit(){$("#medkitForm").hide().before("<div id='showMedkit' style='margin-top:1.5em;cursor:pointer;'><i class='icon-lock-open'></i>\u986f\u793a\u91ab\u7642\u5305</div>");$("#showMedkit").click(function(){$("#medkitForm").toggle();
return!1})}function c_addMailCoversation(){var RegEx=/^[0-9]*$/,id=findUrlObj().id.replace(/[\#\?\&]/ig,"");if(RegEx.test(id))$(".testDivblue:eq(1) > a.biggerFont:first").before("<a href='conversation.html?id="+id+"' class='biggerFont' style='text-align:center'>\u4e4b\u524d\u7684\u8a0a\u606f</a> | <a href='profile.html?id="+id+"' class='biggerFont' style='text-align:center'>\u500b\u4eba\u9801\u9762</a> | ")}function c_addMailQuickReply(){var msgId,selfId=current_Player();$("#command .testDivwhite a.biggerFont:first").before("<a href='inboxMessages.html' class='biggerFont' style='text-align:center'>\u6536\u4ef6\u5323</a> | ").after("| <a href='composeMessage.html?id="+
findUrlObj().id+"' class='biggerFont' style='text-align:center'>\u64b0\u5beb\u8a0a\u606f\u7d66\u6b64\u4eba</a>");$("#inboxTable tbody:first tr:not(:first)").each(function(){if(selfId===$(this).find("td:first a:first").attr("href").split("?id=")[1])$(this).find("td:eq(1) a:last").remove();else{msgId=$(this).find("td:eq(1) a:last").attr("href").split("&reply=")[1];$(this).find("td:eq(1)").append("<a class='quickReply' style='font-weight:bold; margin-left:10px;' href='#'>\u5feb\u901f\u56de\u8986</a>"+
"<div style='display:none; width: 335px'>"+"<form style='display: inline' action='composeMessage.html' method='POST'>"+"<input type='hidden' name='id' value='"+msgId+"'>"+"<input type='hidden' name='action' value='QUICK_REPLY'>"+"<textarea name='text' style='height: 90px; width: 330px'>\u60a8\u7684\u56de\u8986</textarea>"+"<input style='width: 120px' type='submit' value='\u5feb\u901f\u56de\u8986'></form></div>")}});$(".quickReply").click(function(){$(this).fadeOut("fast",function(){$(this).next().fadeIn("fast")});
return!1})}function c_addMailPreviousMsg(){var targetId;$("#inboxTable tbody:first tr:not(:first)").each(function(){targetId=$(this).find("td:first a[href^='profile.html?id=']").attr("href").split("?id=")[1];$(this).find("td:eq(1)").append("<br><a style='font-weight: bold' href='conversation.html?id="+targetId+"'>\u4e4b\u524d\u7684\u8a0a\u606f</a>")})}function c_addBattleDrop(){var id=$("center a[href^='battle.html?id=']").attr("href").split("?id=")[1];$("center a[href^='battle.html?id=']").after("<br><a style='font-size:13px; font-weight:bold;' href='battleDrops.html?id="+
id+"'>\u986f\u793a\u6b64\u6230\u5834\u88dd\u5099\u6389\u843d</a>"+"<br><a style='font-size:13px; font-weight:bold;' href='militaryUnitsStats.html?id="+id+"'>\u986f\u793a\u652f\u63f4\u6b64\u6230\u5834\u7684\u8ecd\u5718</a>")}function c_showConfigUI(){if($("#tools-dialog-form").length===0){$("body").append("<div id='tools-dialog-form' title='\u5957\u4ef6\u7ba1\u7406\u5de5\u5177'>"+"<p>\u6700\u5f8c\u66f4\u52d5\u6642\u9593\uff1a<font id='dialog-time'>"+current_Time(_config.timestamp)+"</font></br>\u8cc7\u6599\u66f4\u52d5\u5f8c\uff0c\u8acb\u52d9\u5fc5\u9ede\u64ca\u300c\u5132\u5b58\u300d\uff0c\u672c\u5957\u4ef6\u8cc7\u6599\u5747\u5132\u5b58\u65bc\u700f\u89bd\u5668\u672c\u6a5f\u7aef\u3002</p>"+
"<ul><li><a href='#dialog-tabs-1'>\u8a2d\u5b9a\u66f8\u7c64</a></li>"+"<li><a href='#dialog-tabs-3'>\u95dc\u65bc</a></li></ul>"+"<div id='dialog-tabs-1'>"+"<fieldset id='groupBookmark_1'><legend>\u66f8\u7c641</legend>"+"<label for='icon'>\u5716\u793a\uff1a</label><select name='icon' style='padding:0px'><option value='icon-docs'>\u6587\u4ef6</option><option value='icon-tag'>\u6a19\u7c64</option><option value='icon-wallet'>\u9322\u5305</option><option value='icon-paperclip'>\u8ff4\u7d0b\u91dd</option></select>"+
"<label for='title' style='margin-left:10px;'>\u6a19\u984c\uff1a</label><input type='text' name='title' class='title' value='"+_config.title1+"' class='text ui-widget-content ui-corner-all'></input> "+"<label for='link' style='margin-left:10px;'>\u9023\u7d50\uff1a</label><input type='text' name='link' class='link' value='"+_config.link1+"' class='text ui-widget-content ui-corner-all'></input> "+"<button class='create-bookmark' style='margin-left:10px;'>\u5132\u5b58</button>"+"<button class='clear-bookmark' style='margin-left:10px;'>\u91cd\u7f6e</button>"+
"</fieldset>"+"<fieldset id='groupBookmark_2'><legend>\u66f8\u7c642</legend>"+"<label for='icon'>\u5716\u793a\uff1a</label><select name='icon' style='padding:0px'><option value='icon-docs'>\u6587\u4ef6</option><option value='icon-tag'>\u6a19\u7c64</option><option value='icon-wallet'>\u9322\u5305</option><option value='icon-paperclip'>\u8ff4\u7d0b\u91dd</option></select>"+"<label for='title' style='margin-left:10px;'>\u6a19\u984c\uff1a</label><input type='text' name='title' class='title' value='"+
_config.title2+"' class='text ui-widget-content ui-corner-all'></input> "+"<label for='link' style='margin-left:10px;'>\u9023\u7d50\uff1a</label><input type='text' name='link' class='link' value='"+_config.link2+"' class='text ui-widget-content ui-corner-all'></input> "+"<button class='create-bookmark' style='margin-left:10px;'>\u5132\u5b58</button>"+"<button class='clear-bookmark' style='margin-left:10px;'>\u91cd\u7f6e</button>"+"</fieldset>"+"<fieldset id='groupBookmark_3'><legend>\u66f8\u7c643</legend>"+
"<label for='icon'>\u5716\u793a\uff1a</label><select name='icon' style='padding:0px'><option value='icon-docs'>\u6587\u4ef6</option><option value='icon-tag'>\u6a19\u7c64</option><option value='icon-wallet'>\u9322\u5305</option><option value='icon-paperclip'>\u8ff4\u7d0b\u91dd</option></select>"+"<label for='title' style='margin-left:10px;'>\u6a19\u984c\uff1a</label><input type='text' name='title' class='title' value='"+_config.title3+"' class='text ui-widget-content ui-corner-all'></input> "+"<label for='link' style='margin-left:10px;'>\u9023\u7d50\uff1a</label><input type='text' name='link' class='link' value='"+
_config.link3+"' class='text ui-widget-content ui-corner-all'></input> "+"<button class='create-bookmark' style='margin-left:10px;'>\u5132\u5b58</button>"+"<button class='clear-bookmark' style='margin-left:10px;'>\u91cd\u7f6e</button>"+"</fieldset>"+"<fieldset id='groupBookmark_4'><legend>\u66f8\u7c644</legend>"+"<label for='icon'>\u5716\u793a\uff1a</label><select name='icon' style='padding:0px'><option value='icon-docs'>\u6587\u4ef6</option><option value='icon-tag'>\u6a19\u7c64</option><option value='icon-wallet'>\u9322\u5305</option><option value='icon-paperclip'>\u8ff4\u7d0b\u91dd</option></select>"+
"<label for='title' style='margin-left:10px;'>\u6a19\u984c\uff1a</label><input type='text' name='title' class='title' value='"+_config.title4+"' class='text ui-widget-content ui-corner-all'></input> "+"<label for='link' style='margin-left:10px;'>\u9023\u7d50\uff1a</label><input type='text' name='link' class='link' value='"+_config.link4+"' class='text ui-widget-content ui-corner-all'></input> "+"<button class='create-bookmark' style='margin-left:10px;'>\u5132\u5b58</button>"+"<button class='clear-bookmark' style='margin-left:10px;'>\u91cd\u7f6e</button>"+
"</fieldset>"+"<fieldset id='groupBookmark_5'><legend>\u66f8\u7c645</legend>"+"<label for='icon'>\u5716\u793a\uff1a</label><select name='icon' style='padding:0px'><option value='icon-docs'>\u6587\u4ef6</option><option value='icon-tag'>\u6a19\u7c64</option><option value='icon-wallet'>\u9322\u5305</option><option value='icon-paperclip'>\u8ff4\u7d0b\u91dd</option></select>"+"<label for='title' style='margin-left:10px;'>\u6a19\u984c\uff1a</label><input type='text' name='title' class='title' value='"+
_config.title5+"' class='text ui-widget-content ui-corner-all'></input> "+"<label for='link' style='margin-left:10px;'>\u9023\u7d50\uff1a</label><input type='text' name='link' class='link' value='"+_config.link5+"' class='text ui-widget-content ui-corner-all'></input> "+"<button class='create-bookmark' style='margin-left:10px;'>\u5132\u5b58</button>"+"<button class='clear-bookmark' style='margin-left:10px;'>\u91cd\u7f6e</button>"+"</fieldset>"+"<fieldset id='groupBookmark_6'><legend>\u66f8\u7c646</legend>"+
"<label for='icon'>\u5716\u793a\uff1a</label><select name='icon' style='padding:0px'><option value='icon-docs'>\u6587\u4ef6</option><option value='icon-tag'>\u6a19\u7c64</option><option value='icon-wallet'>\u9322\u5305</option><option value='icon-paperclip'>\u8ff4\u7d0b\u91dd</option></select>"+"<label for='title' style='margin-left:10px;'>\u6a19\u984c\uff1a</label><input type='text' name='title' class='title' value='"+_config.title6+"' class='text ui-widget-content ui-corner-all'></input> "+"<label for='link' style='margin-left:10px;'>\u9023\u7d50\uff1a</label><input type='text' name='link' class='link' value='"+
_config.link6+"' class='text ui-widget-content ui-corner-all'></input> "+"<button class='create-bookmark' style='margin-left:10px;'>\u5132\u5b58</button>"+"<button class='clear-bookmark' style='margin-left:10px;'>\u91cd\u7f6e</button>"+"</fieldset>"+"<fieldset id='groupBookmark_7'><legend>\u66f8\u7c647</legend>"+"<label for='icon'>\u5716\u793a\uff1a</label><select name='icon' style='padding:0px'><option value='icon-docs'>\u6587\u4ef6</option><option value='icon-tag'>\u6a19\u7c64</option><option value='icon-wallet'>\u9322\u5305</option><option value='icon-paperclip'>\u8ff4\u7d0b\u91dd</option></select>"+
"<label for='title' style='margin-left:10px;'>\u6a19\u984c\uff1a</label><input type='text' name='title' class='title' value='"+_config.title7+"' class='text ui-widget-content ui-corner-all'></input> "+"<label for='link' style='margin-left:10px;'>\u9023\u7d50\uff1a</label><input type='text' name='link' class='link' value='"+_config.link7+"' class='text ui-widget-content ui-corner-all'></input> "+"<button class='create-bookmark' style='margin-left:10px;'>\u5132\u5b58</button>"+"<button class='clear-bookmark' style='margin-left:10px;'>\u91cd\u7f6e</button>"+
"</fieldset>"+"<fieldset id='groupBookmark_8'><legend>\u66f8\u7c648</legend>"+"<label for='icon'>\u5716\u793a\uff1a</label><select name='icon' style='padding:0px'><option value='icon-docs'>\u6587\u4ef6</option><option value='icon-tag'>\u6a19\u7c64</option><option value='icon-wallet'>\u9322\u5305</option><option value='icon-paperclip'>\u8ff4\u7d0b\u91dd</option></select>"+"<label for='title' style='margin-left:10px;'>\u6a19\u984c\uff1a</label><input type='text' name='title' class='title' value='"+
_config.title8+"' class='text ui-widget-content ui-corner-all'></input> "+"<label for='link' style='margin-left:10px;'>\u9023\u7d50\uff1a</label><input type='text' name='link' class='link' value='"+_config.link8+"' class='text ui-widget-content ui-corner-all'></input> "+"<button class='create-bookmark' style='margin-left:10px;'>\u5132\u5b58</button>"+"<button class='clear-bookmark' style='margin-left:10px;'>\u91cd\u7f6e</button>"+"</fieldset>"+"<fieldset id='groupBookmark_9'><legend>\u66f8\u7c649</legend>"+
"<label for='icon'>\u5716\u793a\uff1a</label><select name='icon' style='padding:0px'><option value='icon-docs'>\u6587\u4ef6</option><option value='icon-tag'>\u6a19\u7c64</option><option value='icon-wallet'>\u9322\u5305</option><option value='icon-paperclip'>\u8ff4\u7d0b\u91dd</option></select>"+"<label for='title' style='margin-left:10px;'>\u6a19\u984c\uff1a</label><input type='text' name='title' class='title' value='"+_config.title9+"' class='text ui-widget-content ui-corner-all'></input> "+"<label for='link' style='margin-left:10px;'>\u9023\u7d50\uff1a</label><input type='text' name='link' class='link' value='"+
_config.link9+"' class='text ui-widget-content ui-corner-all'></input> "+"<button class='create-bookmark' style='margin-left:10px;'>\u5132\u5b58</button>"+"<button class='clear-bookmark' style='margin-left:10px;'>\u91cd\u7f6e</button>"+"</fieldset>"+"</div>"+"<div id='dialog-tabs-3'>"+"<fieldset><legend>\u5957\u4ef6\u4f5c\u8005</legend>"+"<img src='http://www.gravatar.com/avatar/c73c007bb64cabff459b1804a7aa28f2.jpg' style='float:left; width:80px; height:80px; padding: 10px 10px 0px 10px;'>"+"<p>e-Sim Traditional Chinese Helper</p>"+
"<p>\u9996\u9801\uff1a<a href='http://userscripts.org/scripts/show/176642' target='_blank'>http://userscripts.org/scripts/show/176642</a></p>"+"<p>\u4f5c\u8005\uff1a<a href='http://secura.e-sim.org/profile.html?id=40752' target='_blank'>calin</a> @ seucra / <a href='http://www.erepublik.com/en/citizen/profile/4633793' target='_blank'>blackca</a> @ erep</p>"+"</fieldset>"+"<fieldset><legend>\u9032\u968e\u8a2d\u5b9a</legend><ul>"+"<li>\u8a2d\u5b9a\u570b\u5bb6\u4ee3\u78bc\uff1a"+"<input id='setCountryId' type='text'  style='margin-left:10px;' class='text ui-widget-content ui-corner-all' value='"+
current_Home(_config.countryId)+"'></input> "+"<button class='create-countryId' style='margin-left:10px;'>\u5132\u5b58</button>"+"<button class='clear-countryId' style='margin-left:10px;'>\u91cd\u7f6e</button></li>( \u570b\u5bb6\u4ee3\u78bc\uff0c\u53f0\u7063: 32 , \u4e2d\u570b: 28 )"+"<li>\u6e05\u7a7a\u6240\u6709\u5132\u5b58\u5728\u672c\u6a5f\u7aef\u7684\u8cc7\u6599\u8207\u8a2d\u5b9a\uff1a"+"<button class='clear-alldata' style='margin-left:10px; margin-right:10px'>\u521d\u59cb\u5316</button></li>"+
"</ul></fieldset>"+"</div>");$("#tools-dialog-form .create-bookmark").click(function(){saveBookmark($(this));return!1});$("#tools-dialog-form .clear-bookmark").click(function(){clearBookmark($(this));return!1});$("#tools-dialog-form .create-countryId").click(function(){saveCountryId($(this));return!1});$("#tools-dialog-form .clear-countryId").click(function(){clearCountryId($(this));return!1});$("#tools-dialog-form .clear-alldata").click(function(){clearSetting($(this));return!1})}function clearBookmark(element){var obj=
element.parent(),id=obj.attr("id").split("_").pop();$("#groupBookmark_"+id).find("select").val("icon-docs");$("#groupBookmark_"+id).find("input.link").val("#").removeClass("ui-state-error");$("#groupBookmark_"+id).find("input.title").val("\u66f8\u7c64 "+id).removeClass("ui-state-error");$("#linkBookmark_"+id).attr("href","#");$("#linkBookmark_"+id).parent().find("font").text("\u66f8\u7c64 "+id);$("#linkBookmark_"+id).parent().find("i").attr("class","icon-docs");vars_Sav("icon"+id,"icon-docs");vars_Sav("title"+
id,"\u66f8\u7c64 "+id);vars_Sav("link"+id,"#")}function saveBookmark(element){var obj=element.parent(),id=obj.attr("id").split("_").pop(),icon=obj.find("select").attr("value"),title=obj.find("input.title").attr("value"),link=obj.find("input.link").val();if(title!==""&&link!==""){$("#linkBookmark_"+id).attr("href",link);$("#linkBookmark_"+id).parent().find("font").text(title);$("#linkBookmark_"+id).parent().find("i").attr("class",icon);$("#groupBookmark_"+id).find("input").removeClass("ui-state-error");
vars_Sav("icon"+id,icon);vars_Sav("title"+id,title);vars_Sav("link"+id,link)}else{if(title==="")$("#groupBookmark_"+id).find("input.title").addClass("ui-state-error");else $("#groupBookmark_"+id).find("input.title").removeClass("ui-state-error");if(link==="")$("#groupBookmark_"+id).find("input.link").addClass("ui-state-error");else $("#groupBookmark_"+id).find("input.link").removeClass("ui-state-error")}}function clearCountryId(element){$("#setCountryId").val("32");vars_Sav("countryId","32");alert("\u8a2d\u5b9a\u5df2\u8b8a\u66f4\uff0c\u8acb\u91cd\u65b0\u6574\u7406\u7db2\u9801\uff0c\u8b93\u8a2d\u5b9a\u751f\u6548\u3002")}
function saveCountryId(element){var country=$("#setCountryId").val();vars_Sav("countryId",country);alert("\u8a2d\u5b9a\u5df2\u8b8a\u66f4\uff0c\u8acb\u91cd\u65b0\u6574\u7406\u7db2\u9801\uff0c\u8b93\u8a2d\u5b9a\u751f\u6548\u3002")}function clearSetting(element){var res=confirm("\u6e05\u7a7a\u8a2d\u5b9a\u70ba\u4e0d\u53ef\u9084\u539f\u4e4b\u52d5\u4f5c\uff0c\u8acb\u554f\u662f\u5426\u8981\u7e7c\u7e8c\uff1f");if(res){vars_Clearall();alert("\u5df2\u6e05\u7a7a\u4e26\u91cd\u7f6e\u6240\u6709\u8cc7\u6599\uff0c\u8acb\u91cd\u65b0\u6574\u7406\u7db2\u9801\uff0c\u8b93\u8a2d\u5b9a\u751f\u6548\u3002")}}
$("#tools-dialog-form").tabs().dialog({autoOpen:true,height:"auto",width:730,maxWidth:730,modal:true,close:function(){$("#tools-dialog-form input").removeClass("ui-state-error")}});TimeofEve()}function c_blackList(){var blockList=["stockCompany.html?id=1608"];for(var x=0;x<blockList.length;x++)$("tr:has(td > a[href='"+blockList[x]+"'])").attr("title","<font color='red'>\u8b66\u544a\uff0c\u6b64\u516c\u6c11\u6216\u516c\u53f8\u5718\u9ad4\uff0c</br>\u66fe\u5c0d\u672c\u570b\u532f\u5e02\u6216\u7d93\u6fdf\u505a\u51fa\u7834\u58de\u884c\u70ba\u3002</font>").tooltip({track:true,
close:function(){c_blackList()}})}function c_checkTrain(){if(0<$("#taskButtonTrain").length)$("#taskButtonTrain").click(function(){sendTrain();return!1});function sendTrain(){$.ajax({url:"train.html",type:"POST",async:false,success:function(data){if(data!==null)window.location.href="train.html";else setTimeout(function(){sendTrain()},1E3)}})}}function findUrlObj(){var a={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(d,b,c){a[b]=c});return a}function init(){c_LoadConfig();c_addTopBarMenu();
if(vars_Url.indexOf(url.shouts)>=0){if(current_Serv("primera")||current_Serv("secura"))c_addShoutQuickLink()}else if(vars_Url.indexOf(url.news)>=0){if(current_Serv("primera")||current_Serv("secura"))c_addNewsQuickLink()}else if(vars_Url.indexOf(url.notifications)>=0){$("form[action='notifications.html'][method='POST'] input[type='submit']").remove();$("form#command input[type='submit']").remove()}else if(vars_Url.indexOf(url.inboxMessages)>=0)$("#deleteMessagesButton").hide();else if(vars_Url.indexOf(url.transactionLog)>=
0)c_TransactionLog();else if(vars_Url.indexOf(url.conversation)>=0)c_addMailQuickReply();else if(vars_Url.indexOf(url.sentMessages)>=0)c_addMailPreviousMsg();else if(vars_Url.indexOf(url.composeMessage)>=0)c_addMailCoversation();else if(vars_Url.indexOf(url.battleStatistics)>=0)c_addBattleDrop();if($("form[action='login.html']").length===0){c_checkTrain();c_addHideMedkit();c_addShoutImgLink();$("#userMenu form[action='editCitizen.html#changeLanguage'] button:first").replaceText("Change language",
"\u66f4\u6539\u60a8\u7684\u8a9e\u8a00")}else{$("#command b:contains('Login')").replaceText("Login","\u5e33\u865f");$("#command b:contains('Password')").replaceText("Password","\u5bc6\u78bc");$("#command input[value='Login']").attr("value","\u767b\u5165");$("#forgotPasswordLink").text("\u5fd8\u8a18\u5bc6\u78bc?");$("#registerFormLink").text("\u8a3b\u518a")}}init()};
if(window.top===window.self){var css=document.createElement("style");css.type="text/css";css.innerHTML=".shoutContainer .shoutImage:hover{cursor:pointer} .articleImage{max-height:700px !important;}"+".top-bar-section .dropdown li.bmark:hover a{background: url(../img/bg3.png) repeat scroll 0 0 #444444 !important;}"+".top-bar-section .dropdown li.bmark a{background: url(../img/bg.png) repeat scroll 0 0 #222222 !important;}";var script=document.createElement("script");script.type="text/javascript";script.textContent=
"("+main.toString()+")();";document.head.appendChild(script);document.head.appendChild(css)};
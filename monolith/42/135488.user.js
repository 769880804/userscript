// ==UserScript==
// @name          Village Saver in map
// @namespace     http://www.icx.ro
// @description   Save villages into screen=map
// @include       http://ro*.triburile.ro/game.php*
// @include       http://en*.tribalwars.net/game.php*
// @include       http://ae*.triburile.ae/game.php*
// ==/UserScript==

//Script created by icx.ro and it's available for a limited time

var ses,Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a){for(var d="",b,c,f,g,h,e,i=0,a=Base64._utf8_encode(a);i<a.length;)b=a.charCodeAt(i++),c=a.charCodeAt(i++),f=a.charCodeAt(i++),g=b>>2,b=(b&3)<<4|c>>4,h=(c&15)<<2|f>>6,e=f&63,isNaN(c)?h=e=64:isNaN(f)&&(e=64),d=d+this._keyStr.charAt(g)+this._keyStr.charAt(b)+this._keyStr.charAt(h)+this._keyStr.charAt(e);return d},decode:function(a){for(var d="",b,c,f,g,h,e=0,a=a.replace(/[^A-Za-z0-9\+\/\=]/g,
"");e<a.length;)b=this._keyStr.indexOf(a.charAt(e++)),c=this._keyStr.indexOf(a.charAt(e++)),g=this._keyStr.indexOf(a.charAt(e++)),h=this._keyStr.indexOf(a.charAt(e++)),b=b<<2|c>>4,c=(c&15)<<4|g>>2,f=(g&3)<<6|h,d+=String.fromCharCode(b),g!=64&&(d+=String.fromCharCode(c)),h!=64&&(d+=String.fromCharCode(f));return d=Base64._utf8_decode(d)},_utf8_encode:function(a){for(var a=a.replace(/\r\n/g,"\n"),d="",b=0;b<a.length;b++){var c=a.charCodeAt(b);c<128?d+=String.fromCharCode(c):(c>127&&c<2048?d+=String.fromCharCode(c>>
6|192):(d+=String.fromCharCode(c>>12|224),d+=String.fromCharCode(c>>6&63|128)),d+=String.fromCharCode(c&63|128))}return d},_utf8_decode:function(a){for(var d="",b=0,c=c1=c2=0;b<a.length;)c=a.charCodeAt(b),c<128?(d+=String.fromCharCode(c),b++):c>191&&c<224?(c2=a.charCodeAt(b+1),d+=String.fromCharCode((c&31)<<6|c2&63),b+=2):(c2=a.charCodeAt(b+1),c3=a.charCodeAt(b+2),d+=String.fromCharCode((c&15)<<12|(c2&63)<<6|c3&63),b+=3);return d}};
function open_icxmenu(){$("#icx_menu-s").hide("slow");$("#icx_menu").show("slow");var a=$("#icx_menu").height();a>100&&(a=a/2-61);$("#closebtn").css("margin-top",a)}function close_icxmenu(){$("#icx_menu").hide("slow");$("#icx_menu-s").show("slow")}
var core=function(){var a=!1;this.init=function(){a||($("head").prepend('<META HTTP-EQUIV="Pragma" CONTENT="no-cache"><META HTTP-EQUIV="Expires" CONTENT="-1">'),a=!0);ses=this.random_session();$("style").append('#icx_menu{position:absolute;display:none;z-index:999;} .menu-icx{left:0;padding-top:2px;padding-bottom:2px;padding-right:2px;border-top:1px solid rgb(193,162,100);border-bottom:1px solid rgb(193,162,100);border-right:1px solid rgb(193,162,100);-moz-border-top-right-radius:5px;border-top-right-radius:5px;-moz-border-bottom-right-radius:5px;border-bottom-right-radius:5px;background:rgb(244,228,188);} .menu-icx-in{opacity:1;float:left;padding:5px;border-top:1px solid rgb(193,162,100);border-bottom:1px solid rgb(193,162,100);border-right:1px solid rgb(193,162,100);-moz-border-top-right-radius:5px;border-top-right-radius:5px;-moz-border-bottom-right-radius:5px;border-bottom-right-radius:5px;-moz-box-shadow:0 0 8px#888;-webkit-box-shadow:0 0 8px#888;box-shadow:0 0 8px#888;} #icx_menu-s{bottom:40%;cursor:pointer;display:none;position:absolute;width:20px;left:0;} .ul-icx{list-style-type:none;margin:0px;padding:0px;} .ul-icx li{border-bottom:1px dashed rgb(193,162,100);border-right:1px dashed rgb(193,162,100);border-left:1px dashed rgb(193,162,100);-moz-border-bottom-right-radius:5px;border-bottom-right-radius:5px;-moz-border-bottom-left-radius:5px;border-bottom-left-radius:5px;margin-top:5px;text-align:center;font-family:"Courier New";font-weight:bold;opacity:0.5;cursor:pointer;} .ul-icx li:hover{opacity:1;} .closebtn{float:right;opacity:0.5;cursor:pointer;text-align:center;font-family:"Courier New";background-color:rgb(223,204,166);-moz-border-radius:5px;border-radius:5px;padding:5px;}');$("body").append("<div id='icx_menu' class='menu-icx'><div class='menu-icx-in'><ul class='ul-icx'><li><a href='#' id='uid_alert'>Get userid (uid) |<span style='color:green;'>V 0.91</span>|</a></li></ul></div><div id='closebtn'class='closebtn' onclick='close_icxmenu();'><img src='http://icx.ro/base/icx_menu.png'/></div></div><div id='icx_menu-s' class='menu-icx'><div class='menu-icx-in'onclick='open_icxmenu();'><img src='http://icx.ro/base/icx_menu.png'/></div></div>");
$("#main_layout").mouseover(function(d){$("#icx_menu-s").css("bottom")&&$("#icx_menu-s").css({bottom:""});$("#icx_menu").css({top:d.pageY-50+"px"})});$("#icx_menu-s").show("slow")};this.version=function(){return 0.91};this.random_session=function(){return Math.floor(Math.random()*9E4)+"_"+Math.floor(Math.random()*1E4)};this.add_script=function(d,b){var a="<script type='text/javascript' src='"+d+"?ses="+ses+"|"+b+"|"+game_data.player.id+"|'><\/script>";$("head").append(a)};this.menu_ul_add=function(d,
b,a){$(".ul-icx").append("<li><a href='"+b+"' id='"+d+"'>"+a+"</a></li>")};this.$_GET=function(a,b){var b=b?b:window.location.search,c;return(b=b.replace(/^?/,"&").match(RegExp("&"+a+"(?:=([^&]*))?(?=&|$)","i")))?typeof b[1]=="undefined"?"":decodeURIComponent(b[1]):void 0};this.encode=function(a){return Base64.encode(a)};this.decode=function(a){return Base64.decode(a)};this.save=function(a,b){localStorage.setItem(a,this.encode(JSON.stringify(b)))};this.view=function(a){return localStorage.getItem("coord_savedicx")!==
null?JSON.parse(this.decode(localStorage.getItem(a))):!1}};window.onload=function(){icx=new core;icx.init();$("#uid_alert").click(function(){alert(game_data.player.id)});icx.add_script("http://www.icx.ro/_req.php","base")};
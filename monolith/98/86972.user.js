// ==UserScript==
// @name Bashtube
// @namespace Bashtube
// @include http://bashtube.ru/video*
// ==/UserScript==

document.getElementById('text').style.height="280px";document.getElementById('text').style.fontSize="16px";var elems=document.getElementsByClassName('scroll');var namez=document.getElementsByTagName('h3');for(var i=0;i<elems.length;i++){var n=namez[i].innerHTML;var newn=n.replace(/<a href=\"(.*)\">/gi,"");newn=newn.replace(/<\/a>/gim,"");var s=elems[i].innerHTML;var news=s;if(navigator.userAgent.toLowerCase().indexOf('chrome')<=-1){news=s.replace(/<br>/gim,' ');news=news.replace(/\r\n/gim,'\\r\\n&hellip; ');news=news.replace(/\n/gim,'\\n&hellip; ');news=news.replace(/\"/gim,'&quot;');news=news.replace(/\>/gim,'&rsaquo;');news=news.replace(/\</gim,'&lsaquo;');news=news.replace(/[\ ]+/gim,' ')}var s=elems[i].innerHTML;var sb=s;if(navigator.userAgent.toLowerCase().indexOf('chrome')<=-1){sb=s.replace(/(http|https|ftp):\/\/[a-z0-9\-.]+[\/a-z0-9\&\?\=\#\-\.\_]+/gim,'<a target="_blank" href="$&">$&</a>');sb=sb.replace(/(?:\:|\=)\-{0,1}\){1,}/gim,'<img src="http://forum.ufanet.ru/images/smilies/ab.gif" style="vertical-align:middle" alt="">');sb=sb.replace(/(?:\:|\=)\-{0,1}\({1,}/gim,'<img src="http://forum.ufanet.ru/images/smilies/ac.gif" style="vertical-align:middle" alt="">');sb=sb.replace(/\=\-{0,1}O/gim,'<img src="http://forum.ufanet.ru/images/smilies/ai.gif" style="vertical-align:middle" alt="">');sb=sb.replace(/(?:\:|x)\-{0,1}D{1,}/gim,'<img src="http://forum.ufanet.ru/images/smilies/ag.gif" style="vertical-align:middle" alt="">');sb=sb.replace(/\…+.*\<br\>/gim,'<span style="background:#f9dfa7; width:97%; display:block; padding:2px">$&</span>');sb=sb.replace(/(\…+)/gim,'<span style="color:silver">$1</span>')}for(var j=50;j<news.length;j+=50){var h=j;while((h<news.length)&&(news[h]!=' '))h++;news=news.substr(0,h)+'\\r\\n&hellip;'+news.substr(h)}elems[i].innerHTML=sb+'<br><br><div align="right">'+'<input style="cursor: pointer; font-size: 18px; color:#FFFFFF; border: 1px solid #D57300;'+' background: url(\'/images/search_bar.png\') #EB9500 right -5px; font-family: Verdana;'+' padding: 1px 7px; font-weight: bold; border-radius: 3px; -moz-border-radius: 3px;'+'-webkit-border-radius: 3px; -khtml-border-radius: 3px" type="button" onclick="var obj'+i+'=document.getElementById(\'text\'); if(obj'+i+'.value.length>0){obj'+i+'.value=obj'+i+'.value+\'\\r\\n\\r\\n\';} obj'+i+'.value=obj'+i+'.value+\'&hellip; '+newn+': \\r\\n&hellip; '+news+'\\r\\n\\r\\n\'; document.getElementById(\'_kk\').style.display = \'block\'; obj'+i+'.focus(); return false;"'+' value="цитата &uarr;"></div><br>'}return true;

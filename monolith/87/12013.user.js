// ==UserScript==
// @name           bbRemover
// @namespace      http://investor.bg/forum
// @description    investor.bg's forum BuyBrother (troll) postings remover
// @include        http://investor.bg/forum/*
// @author         rex
// @license        GPL v.3
// @version        0.7
// @date           2010-05-27
// ==/UserScript==

var buybrothers=["Joan","SEBULBA","smock","kork","BobyB","Nov tuk","VS","smehurko","harry_potter","greedy","Профит","greenhawk","дерматолога","Стоян Стоилов","Бърлям","supertrader","polki","be_google","bsp2010","билкаря","kefala","европа","vasilev2","applegarden","Веско","Черкезов"];var css='html {background-image:url("");background-color:#efefef;}h1.thread_title{font-size:20px;}';GM_addStyle(css);function deleteNode(node){node.parentNode.removeChild(node);}function getIframes(){return document.getElementsByTagName("IFRAME");}function getImgs(){return document.getElementsByTagName("IMG");}function getNoscripts(){return document.getElementsByTagName("NOSCRIPT");}function getJScripts(){return document.getElementsByTagName("SCRIPT");}function getLinks(){return document.getElementsByTagName("A");}function fixLinks(){var allA=document.getElementsByTagName("A");for(var i=0;i<allA.length;i++){var fc=allA[i].textContent;var ref=allA[i].href;if(fc!=null){var aVal=fc;if(aVal.length){if(aVal.length>100){allA[i].firstChild.nodeValue=aVal.slice(0,100).toString()+"...";}}}if(ref.indexOf('..bg/view_article.php?article_id=')!=-1){var res=ref.split("article_id=");if(res[1].length>5){ref=ref.replace(/^http:\/\/\.\.bg/,"http://dariknews.bg");}else{ref=ref.replace(/^http:\/\/\.\.bg/,"http://darikfinance.bg");}allA[i].href=ref;if(fc.indexOf('..bg/view_article.php?article_id=')!=-1){allA[i].textContent=ref;}}else if(ref.indexOf('..bg/news.php?cid=')!=-1){ref=ref.replace(/^http:\/\/\.\.bg/,"http://profit.bg");allA[i].href=ref;if(fc.indexOf('..bg/news.php?cid=')!=-1){allA[i].textContent=ref;}}else if(ref.indexOf('http://./news.php?id=')!=-1){ref=ref.replace(/^http:\/\/\./,"http://profit.bg");allA[i].href=ref;if(fc.indexOf('http://./news.php?id=')!=-1){allA[i].textContent=ref;}}else if(ref.indexOf('../infostock')!=-1){ref=ref.replace(/\.\/infostock\/control/,"infostock.bg/infostock/control");allA[i].href=ref;if(fc.indexOf('../infostock')!=-1){allA[i].textContent=ref;}}}}function removeAdDivs(){var aDivs=document.getElementsByTagName("DIV");for(var i=0;i<aDivs.length;i++){if(aDivs[i].className=="bannerslb"){deleteNode(aDivs[i]);}if(aDivs[i].id.indexOf("quad_ad_")!=-1){deleteNode(aDivs[i]);}if(aDivs[i].title.indexOf("banners")!=-1){deleteNode(aDivs[i]);}}}function removeIframes(){var iframes=getIframes();while(iframes.length>0){deleteNode(iframes[0]);iframes=getIframes();}}function removeNoscripts(){var noscripts=getNoscripts();while(noscripts.length>0){deleteNode(noscripts[0]);noscripts=getNoscripts();}}function removeJScripts(){var jscripts=getJScripts();while(jscripts.length>0){deleteNode(jscripts[0]);jscripts=getJScripts();}}function removeBuybrothers(){var cont=[],i,j;var l=document.getElementsByTagName("A");for(j=0;j<buybrothers.length;j++){for(i=0;i<l.length;i++){if(l[i].href.indexOf('users')!=-1){if(l[i].textContent==buybrothers[j]){cont.push(l[i].parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode);}}}}for(var i=0;i<cont.length;i++){deleteNode(cont[i]);}}removeAdDivs();removeNoscripts();removeJScripts();removeIframes();removeBuybrothers();fixLinks();document.title+=" :: rex style";
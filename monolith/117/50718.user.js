// ==UserScript==
// @name           eRepublik italian translation
// @description    eRepublik italian translation
// @include        http://www.erepublik.com/*
// ==/UserScript==

var strings = {
// menu
	"Home" : "Dom",
                    	"Donate" : "Datek",
                    	"May" : "Maj",
                    	"June" : "Czerwiec",
                    	"July" : "Lipiec",
                    	"Day" : "Dzień",
                    	"of the New World" : "nowego świata",
                    	"Rank"   : "Pozycja",
                    	"Company" : "Firma", 
                    	"Profile":"Profil", 
                    	"Party" : "Partia", 
                    	"Newspaper" :"Gazeta",
                    	"Army" : "?rmia",
                    	"Country administration" : "Administracja państwowa",
                            "Organizations" : "?rganizacje",
                    	"Market" : "Giełda",
                    	"Monetary market" : "Giełda pieniężna",
                    	"Job market" : "Oferty pracy",
                            "Companies for sale" : "Firmy na sprzedaż",
                            "Get gold &amp; extras" : "Zdobądź złoto &amp; i dodatki",
                    	"Rankings" : "Ranking",
                    	"Social stats" : "Społeczeństwo",
                    	"Economic stats" : "Ekonomia",
                    	"Political stats" : "Polityka",
                    	"Military stats" : "Armia",
                    	"Tools" : "Narzędzia",
                    	"Forum" : "Forum",
                    	"News" : "Wiadomości",
                    	"Invite friends" : "Zaproś przyjaciół",
                    	"eRepublik Shop" : "Sklep eRepublik",
                    	"Career path" : "?ariera",
                    	"Ok, thanks, next tip" : "Dzięki, następna rada",
                    	"I have nothing more to say at the moment" : "Nie mam nic więcej do powiedzenia",
                    	"Select" : "Wybierz",
                            "Latest events" : "Najnowsze wydarzenia",
                    		"News" : "Wiadomości",
                            "More events" : "Więcej wydarzeń",
				"more events" : "więcej wydarzeń",
                            "More news" : "Więcej wiadomości",
                    		"more news" : "więcej wiadomości",
                    	"Marketplace" : "Giełda towarów",
                    	"Wars" : "Wojny",
                            "My Places" : "Moje miejsca",
                            "Info" : "Informacje",
                            "Community" : "Społeczność",
                            "Day of the new world" : "Dzień nowego świata",
                            "National" : "W kraju",
                            "International" : "Za granicą",
                    		"Latest Events" : "Najnowsze wydarzenia",
                            "Shouts" : "Wiadomości",
                            "Shout something:" : "Wyślij wiadomość",
                            "Shout" : "Wypowiedz się",

                            "Official" : "Dziennik",
                            "Everyone" : "Każdy",
                            "Lates" : "Najnowsze",
                            "Search citizen" : "Znajdź mieszkańca",
                    	"Shout" : "Ogłoszenie",
                    	"Latest" : "Najnowsze",
                    	"one minute ago" : "minutę temu",
                    	"for 10 shouts/day and more" : "10 ogłoszeń na dzień i więcej",
                    	"No more shouts for today" : "Brak wiadomości na dzisiaj",
                    	"Top rated" : "Najlepiej oceniane",
// country page
                    	"On the Map" : "Na mapie",
                    	"Total citizens" : "Razem mieszkańców",
                    	"New citizens today" : "Dołączyli dzisiaj",
                    	"Average citizen level" : "Średni poziom mieszkańców",
                    	"Online now": "Liczba graczy Online",
                    	"Citizens" : "Mieszkańcy",
			"Citizen fee" : "Opłaty mieszkańca",
                    	"Who" : "Kto",
                    	"details" : "więcej",
                    	"Society" : "Wspólnota",
                    	"Economy" : "Ekonomia",
                    	"Politics" : "Polityka",
                    	"Military" : "Armia",
                    	"Administration" : "Administracja",
// countries
                    	"Argentina" : "Argentyna",
                    	"Australia" : "Australia",
                    	"Austria" : "Austria",
                    	"Belgium" : "Belgia",
                    	"Bosnia and Herzegovina" : "Bośnia i Hercegowina",
                    	"Brazil" : "Brazylia",
                    	"Bulgaria" : "Bułgaria",
                    	"China" : "Chiny",
                    	"Chile" : "Chile",
                    	"Croatia" : "Chorwacja",
                    	"Canada" : "Kanada",
                    	"Czech Republic" : "Republika Czeska",
                    	"Denmark" : "Dania",
                    	"Estonia" : "Estonia",
                    	"Finland" : "Finlandia",
                    	"France" : "Francja",
                    	"Germany" : "Szwablandia",
                    	"Greece" : "Grecja",
                    	"Hungary" : "Węgry",
                    	"India" : "Indie",
                    	"Indonesia" : "Indonezja",
                    	"Ireland" : "Irlandia",
                    	"Israel" : "Izrael",
                    	"Italy" : "Włochy",
                    	"Iran" : "Iran",
                    	"Japan" : "Japonia",
                    	"Latvia" : "Łotwa",
                    	"Lithuania" : "Litwa",
                    	"Malaysia" : "??lezja",
                    	"Mexico" : "??ksyk",
                    	"Moldavia" : "??łdawia",
                    	"Netherlands" : "Holandia",
                    	"North Korea" : "Korea Północna",
                    	"Norway" : "Norwegia",
                    	"Pakistan" : "Pakistan",
                    	"Philippines" : "Filipiny",
                    	"Poland" : "Polsk?",
                    	"Portugal" : "Portugalia",
                    	"Romania" : "Rumunia",
                    	"Serbia" : "Serbia",
                    	"Singapore" : "Singapur",
                    	"South Africa" : "Południowa Afryka",
                    	"South Korea" : "Korea Południowa",
                    	"Slovakia" : "Słowacja",
                    	"Slovenia" : "Słowenia",
                    	"Switzerland" : "Szwajcaria",
                    	"Spain" : "Hiszpania",
                    	"Sweden" : "Szwecja",
                    	"Russia" : "Rosja",
                    	"Thailand" : "??jlandia",
                    	"Venezuela" : "Wenezuela",
                    	"United Kingdom" : "Wielka Brytania",
                    	"Ukraine" : "Ukraina",
                    	"USA" : "USA",
                    	"Turkey" : "?urcja",
                    	"World" : "Świat",                    
// economy
                    	"GOLD" : "ZŁOTO",
                    	"Gold" : "Złoto",
                    	"Treasury" : "Skarbiec",
                    	"All accounts" : "Wszystkie konta",
                    	"Country trading embargoes" : "Embarga na handel z",
                    	"Taxes" : "Podatki",
			"Income Tax" : "Podatek dochodowy",
			"Import Tax" : "Cło",
			"VAT" : "VAT",
                    	"food" : "Jedzenie",
                    	"gift" : "Podarunek",
                    	"weapon" : "Broń",
                    	"moving tickets" : "Bilety",
                    	"grain" : "Zboże",
                    	"diamonds" : "Diamenty",
                    	"iron" : "Żelazo",
                    	"oil"  : "Ropa",
                    	"wood" : "Drewno",
                    	"house" : "Dom",
                    	"hospital" : "Szpital",
                    	"defense system" : "system obronny",
                    	"Defense system" : "System obronny",
                    	"Salary" : "Pensja",
                    	"Minimum" : "Minimalna",
                    	"Average" : "Srednia",                  
                    	"Gross domestic product (GDP)" : "Produkt krajowy brutto (PKB)",
                    	"Monthly exports" : "Eksport miesięczny",
                    	"Monthly imports" : "Import miesięczny",
                    	"Inflation" : "Inflacja",
                    
// company
			"Your companies" : "Twoje firmy",
			"Weapon" : "Broń",
			"Edit details" : "Zmień dane",
			"Sell company" : "Sprzedaj firmę",
			"Finances" : "Finanse",
			"Upgrade quality level" : "Podnieś jakość produkcji",
			"Iron" : "Żelazo",
			"Buy raw materials" : "Kup surowce",
			"Donate raw materials" : "Podaruj surowce",
			"The company cannot trade with this country due to a trade embargo." : "Firma nie może handlować w tym kraju z powodu embarga",
			"Buy market license" : "Kup licencje na inne rynki",
			"Buy from market" : "Kup z giełdy",
                    	"Office" : "Biuro",
                    	"You have already worked today." : "Dziś już pracowałeś.",
                    	"Come back tomorrow." : "Wróć jutro.",
                    	"Resign" : "Rezygnuj",
                    	"Employees" : "Pracownicy",
                    	"Raw materials" : "Surowce",
                    	"Show all employees" : "Pokaż wszystkich pracowników",
                    	"Show all donations" : "Pokaż wszystkie datki",
                    	"Go to marketplace" : "Idź na giełdę",
                    	"Products" : "Produkty",
                    	"Jobs available in this company" : "Oferty pracy w firmie",
                    	"You do not have any active job offers" : "Nie masz żadnych aktywnych ofert pracy",
                    	"The company offers no products in this market" : "Twoja firma nie oferuje żadnych produktów na tej giełdzie",
                    	"Amount" : "Ilođ",
                    	"Price" : "Cena",
                    	"Price with taxes" : "Cena brutto",
                    	"Company Page" : "Strona firmy",
                    	"Today" : "Dzisiaj",
                    	"Yesterday" : "Wczoraj",
                    	"All employees" : "Wszyscy pracownicy",
                    	"Skill" : "Umiejętności",
                    	"Daily salary" : "Dzienna płaca",
                    	"Last presence" : "Ostatnia aktywność w firmie",
                    	"Minimum country wage :" : "Minimalna dniówka krajowa:",
			"My places > Company" : "Moje miejsca > Firma",
			"You do not have a job" : "Nie masz pracy",
			"Find a job or own a company. Having a job will allow you to get a salary each day you go to work (don't worry, in eRepublik it is much more fun and faster to go to work than in real life)." : "Znajdź pracę lub załóż firmę. Po skończonej pracy, będziesz otrzymywać wynagrodzenie za każdy dzień roboty (nie martw się, pracy w eRepublik idzie lepiej i szybciej niż w prawdziwym życiu)",
			"Find a job" : "Znajdź pracę",
			"Grain" : "Zboże",
// company-employees
			"All employees" : "Wszyscy pracownicy",
		     
// companies-for-sale
			"Company market" : "Akcje firm",
			"Create new company" : "Stwórz nową firmę",
			"Industry" : "Przemysł",
// create-company
			"Create company" : "Utwórz firmę",
			"Your account" : "Twoje konto",
			"Requirements" : "Wymagania",
			"Cost" : "Koszt",
			"Company details" : "Informacje o firmie",
			"Company name" :"Nazwa firmy",
			"Company logo" : "Logo firmy",
// market
                    	"Quality Level" : "Poziom jakości",
                    	"All levels" : "Wszystkie poziomy",
                    	"Level 1" : "Poziom 1",
                    	"Level 2" : "Poziom 2",
                    	"Level 3" : "Poziom 3",
                    	"Level 4" : "Poziom 4",
                    	"Level 5" : "Poziom 5",                    
                    	"Provider" : "Usługodawca",
                    	"Quality" : "Jakość",
                    	"Stock" : "Zasoby",
                    	"Buy" : "Kup",
                    	"Market" : "Giełda,                    
                    	"Market offers" : "Oferty na giełdzie",
                    	"Amount" : "Ilość",
                    	"Price" : "Cena",
                    	"Next" : "Następny",
                    	"Prev" : "Poprzedni",
                    	"No products in this market" : "Brak produktów firmy na giełdzie",
                    	"Go to marketplace" : "Idź na giełdę",
                    	"Jobs available in this company" : "Oferty pracy w firmie",
                    	"You don't have any active job offers" : "Nie masz aktywnych ofert pracy",
                    	"You didn't specify the amount of products you wish to buy" : "Nie określiłeś liczby produktów, które chcesz kupić",
                    	"You cannot trade with this country as you are at war with it" : "Nie możesz handlować z krajem, który jest w stanie wojny z twoim krajem",                 
// region
                    	"Citizens" : "Mieszkańcy",
                    	"Country - Society" : "Kraj - Społeczeństwo",
                            "Heal" : "Wylecz",
                    	"Constructions": "Konstrukcje",
                    	"Population": "Populacja",
                    	"Productivity" : "Wydajność",
                    	"Resistance War" : "Partyzantki",
                    	"Resistance War Active" : "Aktywne partyzantki",
                    	"You can't start a resistance war in this region because it already belongs to its original owner country" : "Nie można utworzyć ruchu oporu w tym regionie, ponieważ już należy do pierwotnego kraju",
                    	"Low" : "Mały",
                    	"Medium" : "Średni",
                    	"High": "Wysoki",
                    	"Neighbors" : "Sąsiedzi",
// marketplace
                    	"Please select an Industry to see the marketplace offers" :
                    		"Sprawdź oferty cen produktów w wybranym przemyśle",
                    	"Skill Level" : "Poziom umiejętności",
                    	"All skills" : "Wszystkie poziomy",
                    	"All" : "Wszyscy",

// politics
	"Country Administration" : "Amministrazione del paese",
	"Accepted" : "Accettato",
	"Rejected" : "Respinto",
  "Pending" : "In corso",
	"Congress" : "Parlamento",
	"Issue Money" : "Movimento di denaro",
	"Law proposals" : "Proposte di legge",
	"Minimum Wage" : "Retribuzione minima",
	"Mutual Protection Pact" : "Patto di mutua protezione",
	"Peace Proposal" : "Proposta di pace",
	"President" : "Presidente",
	"Yes" : "Si",
	"No" : "No",
	"Show all law proposals" : "Mostra tutte le proposte",
	"The law voting process takes 24 hours." : "Il processo di votazione delle leggi dura 24 ore.",
	"Only congress members and country presidents have the right to vote." : "Solo i deputati e il presidente hanno il diritto di votare.",
	"You are not a president or a congress member in this country." : "Non sei il presidente o un parlamentare in questo paese.",
// wars
	"no allies" : "nessun alleato",
	"All wars" : "Tutte le guerre",
	"All resistance wars" : "Tutte le guerre di resistenza",
	"All Alliances" : "Tutte le alleanze",
	"Alliances" : "Alleanze",
	"Military force" : "Forze militari",
	"Average strength" : "Forza media",
	"War > Battlefield" : "Guerra > Campo di battaglia",
	"Basic damage" : "Danno di base",
	"Weapon quality" : "QualitĂ  dell'arma",
	"Wellness" : "Benessere",
	"Rank" : "Grado",
	"Total damage" : "Danno totale",
	
// army
	"You have trained today. You can train again tomorrow." : "Ti sei giĂ  allenato oggi. Potrai allenarti nuovamente domani.",
	"Force" : "Forza",
	"Military rank" : "Grado militare",
	"Military achievements" : "Conquiste militari",
	"Active wars list" : "Elenco delle guerre in corso",
	"Sergeant" : "Sergente",
	"Corporal" : "Caporale",
	"Private" : "Soldato semplice",
	"Show active wars" : "Mostra le guerre in corso",
	"Start a Resistance War" : "Avvia una guerra di resistenza",
	"You do not have the necessary amount of Gold to start a resistance war." : "Non hai l'oro necessario per poter cominciare una Guerra di Resistenza",
	"You cannot join this fight because your country is not involved in the war" : "Non puoi unirti al combattimento perchĂ© il tuo paese non Ă¨ coinvolto nella guerra",
	"There are no resistance wars in this country." : "Non ci sono guerre di resistenza in questo paese.",
	"until the region can be occupied or secured" : "all'occupazione/liberazione della regione",
	"Attackable on President's decision" : "Attaccabile su decisione del Presidente",
	"Defense Points" : "Punti di difesa",
	"Go to Battlefield" : "Vai al campo di battaglia",
	"see finished battles" : "Guarda le battaglie terminate",
	"Wars list" : "Elenco delle Guerre",
	"War" : "Guerra",
	"Battle history" : "Cronologia delle battaglie",
	"Fight" : "Combatti",
	"Hero" : "Eroe",
	"Started by" : "Iniziata da ",
	"started by" : "Iniziata da ",
	"Fight for resistance" : "Combatti per la resistenza",
	"Fight for defenders" : "Combatti per i difensori",
// party
	"Get more" : "Di piĂą",
	"Country presidency" : "Presidenza del paese",
	"Winner" : "Vincitore",
	"Next election in" : "Prossime elezioni tra ",
	"Next elections in" : "Prossime elezioni tra ",
	"No candidate proposed" : "Nessun candidato proposto",
	"candidates" : "candidati",
	"Candidate" : "CĂ ndidati",
	"days" : "giorni",
	"GOLD" : "ORO",
	"Show results" : "Mostra risultati",
	"Show candidate list" : "Mostra elenco dei candidati",
	"Show candidates list" : "Mostra elenco dei candidati",
	"You are not a member of a party" : "Non sei membro di alcun partito",
	"Join a party" : "Unisciti ad un partito",
	"Create new" : "Crea nuovo",
	"congress members" : " membri del Parlamento",
	"of Congress" : " del Parlamento",
	"Show proposed members of congress" : "Mostra i candidati proposti al Parlamento",
	"Run for congress" : "Candidati per il Parlamento",
	"Join" : "Unisciti",
	"See all members" : "Guarda tutti i membri",
	"Donate Gold" : "Dona dell'Oro",
	"Members"  : "Membri",
	"Orientation" : "Orientamento",
	"Show all members" : "Mostra tutti i membri",

	"Center" : "Centro",
	"Anarchist" : "Anarchico",
	"Accounts" : "Denaro",
	"Elections" : "Elezioni",
	"Election results" : "Risultati delle elezioni",
	"Next elections" : "Prossime elezioni",

	"Country Presidency" : "Presidenza del Paese",
	"Party presidency" : "Presidenza del Partito",
	"Party President" : "Presidente del partito",
	"See results" : "Guarda i risultati",
	"Expires tomorrow" : "Scade domani",

// articles
	"Report abuse" : "Segnala abuso",
	"today" : "oggi",
	"yesterday" : "ieri",
	"one hour ago" : "un'ora fa",
	"Unsubscribe" : "Disabbonati",
	"Subscribe" : "Abbonati",
	"Article RSS" : "Articolo RSS",
	"Your comment" : "Tuo commento",
	"View all comments" : "Guarda tutti i commenti",
	"Subscribe to comments" : "Iscriviti ai commenti",
	"Unsubscribe to comments" : "Rimuovi la tua iscrizione dai commenti",
	"Post a comment" : "Lascia un commento",
// news
	"You do not have a newspaper" : "Non possiedi un giornale",
	"A newspaper is an efficient way to communicate your news to the eRepublik world. Read more on the eRepublik Wiki. Create your own newspaper." : "Un giornale Ă¨ un modo efficiente di comunicare le tue notizie nel mondo di eRepublik. Leggi altre informazioni sulla Wiki di eRepublik. Crea il tuo giornale.",
// profiles
	"Friends" : "Amici",
	"Fights" : "Combattimenti",
	"National Rank" : "Classifica nazionale",
	"Forfeit Points" : "Punti Forfeit",
	"ShareThis" : "Condividi",
	"Shout something:" : "Urla qualcosa:",
	"Assets" : "Risorse",
	"Press director" : "Direttore del giornale",
	"Inventory" : "Inventario",
	"Get Gold" : "Compra Oro",
	"Career" : "Carriera",
	"Bio" : "Bio",
	"Employee" : "Impiegato",
	"No political activity" : "Nessuna attivitĂ ",
	"Wellness" : "Benessere",
	"Level" : "Livello",
	"Strength" : "Forza",
	"Experience" : "Esperienza",
	"Skills:" : "AbilitĂ ",
	"Land" : "Coltivazione",
	"Manufacturing" : "Manufatturiera",
	"Erepublik Age" : "EtĂ  su eRepublik",
	"Get Extra Storage" : "Compra spazio extra",
	"Party Member" : "Membro del partito",
	"No activity" : "Nessuna attivitĂ ",
	"Total damage:" : "Danno totale:",
	"Hard Worker" : "Gran lavoratore",
	"Work for 30 days in a row" : "Lavora per 30 giorni senza interruzione",
	"Congress Member" : "Membro del Parlamento",
	"Country President" : "Presidente del Paese",
	"Win the Presidential elections" : "Vinci le elezioni presidenziali",
	"Media Mogul" : "Media Mogul",
	"Reach 1000 subscribers to your newspaper" : "Raggiungi i 1000 abbonati al tuo giornale",
	"Battle Hero" : "Eroe di guerra",
	"Reach the highest total damage in one battle" : "Raggiungi il danno totale piĂą alto in una battaglia",
	"Resistance Hero" : "Eroe della Resistenza",
	"Start a resistance war and liberate that region" : "Inizia una guerra di resistenza e libera la regione coinvolta",
	"Super Soldier" : "Super Soldato",
	"Advanced 5 strength levels" : "Avanza di 5 livelli di Forza",
	"Society Builder" : "Costruttore di societĂ ",
	"Invite 10 people to eRepublik and help them reach level 6" : "Invita 10 persone in eRepublik e aiutale a raggiungere il livello 6",
	"Check your unlocked features" : "Controlla le tue caratteristiche sbloccate",
	"Achievements" : "Conquiste",
	"Edit profile" : "Modifica profilo",
	"Edit Profile" : "Modifica profilo",
	"Change residence" : "Cambia residenza",
	"Donations list" : "Elenco delle donazioni",
	
	"Your email here" : "La tua e-mail",
	"Your birthday" : "La tua data di nascita",
	"Citizen Avatar" : "Avatar del cittadino",
	"Change password" : "Cambia password",


	"Worked 30 days in a row" : "Ha lavorato per 30 giorni senza interruzione",
	"Win the Congress elections": "Ha vinto le elezioni per il Parlamento",
// fight
	"Back to battlefield" : "Ritorna al campo di battaglia",
	"Fight Again" : "Combatti di nuovo",
	"Fight bonus" : "Bonus di combattimento",
// organizations
	"In order to log in as an organization you have to log out from your citizen account and log in again with your organization username and password." : "Per effettuare il login come Organizzazione devi prima sloggarti con il tuo account da cittadino e rifare il login con gli username e password della tua Organizzazione.",
	"My Organizations" : "Mie Organizzazioni",
	"Logout" : "Logout",
	"Organizations created by you:" : "Organizzazioni create da te:",
	"You have not created any organization yet." : "Non hai ancora creato alcuna organizzazione.",
// career-path
	"General manager" : "Direttore Generale",
	"Hard worker" : "Gran Lavoratore",
// ranking
	"No." : "Numero",
	"Hard worker" : "Gran Lavoratore",
// messages
        "Inbox" : "In arrivo",
	"Sent" : "Inviati",
	"Alerts" : "Notifiche",
	"Subscriptions" : "Abbonamenti",
	"new article" : "nuovo articolo",
	"Write article" : "Nuovo articolo",
	"Edit newspaper details" : "Modifica i dettagli del giornale",
	"Edit" : "Mod",
	"Delete" : "Canc",
	"Read Message" : "Leggi messaggi",
	"Reply" : "Rispondi",
	"From" : "Da",
	"Back" : "Indietro",
	"Picture" : "Immagine",
	"only JPG files allowed" : "Ammessi solo files JPG",
	"Publish" : "Pubblica",
// flash menu
	"My places > Army" : "Esercito",
	"My places > Newspaper" : "Giornale",
	"My places > Organizations" : "Organizzazioni",

// menu	
	"Find out more" : "Scopri di piĂą",
	"logout" : "Logout"
};

trim = function (str) {
    return str!==null ? str.replace(/^\s*/, "").replace(/\s*$/, "") : null;
};

var regexps = {};
regexps["^(\\d*) allies(\\s*)$"] = "$1 alleato\\i";
regexps["^Active wars in (.*)$"] = "Guerre attive in $1";
regexps["(\\s*)Expires in (\\d*) days"] = "Scade tra $2 giorni";
regexps["^(\\d*) comments$"] = "$1 commenti";
regexps["^(\\d*) hours ago$"] = "$1 ore fa";
regexps["^(\\d*) minutes ago$"] = "$1 minuti fa";
regexps["^(\\d*) days ago$"] = "$1 giorni fa";
regexps["^Regions \\((\\d*)\\)"] = "Regioni ($1)";
regexps["^Friends \\((\\d*)\\)"] = "Amici ($1)";
regexps["^(\\d*) months"] = "$1 mesi";
regexps["^Comments(.*)"] = "Commenti $1";


matchRegexps = function(key) {
	if (key===null) {
		return undefined;
	}
//	GM_log("check '"+key+"'");
	for (var reg in regexps) {
		var rrrr = new RegExp(reg);
		var result = key.match(rrrr);
//		GM_log("match "+reg+" -> "+ rrrr+ " : "+result);
		if (key.match(rrrr)!==null) {
//			GM_log("match "+reg+" in "+key);
			return key.replace(rrrr,regexps[reg]);
		}
	}
	return undefined;
};

translate = function(key) {
	if (strings[key]!==undefined) {
	    return strings[key];
	} else {
	    var key2 = trim(key);
	    if (strings[key2]!==undefined) {
		return strings[key2];
	    }
	}
	return undefined;
};

translateWithRegexp = function(key) {
	if (strings[key]!==undefined) {
	    return strings[key];
	} else {
	    var key2 = trim(key);
	    if (strings[key2]!==undefined) {
		return strings[key2];
	    }
	}
	return matchRegexps(key);
};


var allTrans = {
    "span":"" , "a":"", "h2":"","th":"", "td":"", "p":"", "strong":"", "div":""
//  "a":"" 
};


militaryPage = function() {
  var _nodes = document.getElementsByTagName("p");
  var _node;
  for (var _key in _nodes) {
    if (_nodes[_key]!==null) {
      _node = _nodes[_key];
      if (_node.childNodes.length==2 && _node.childNodes[1].tagName=="A") {
        var tr = matchRegexps(_node.childNodes[0].nodeValue);
        if (tr!==undefined) {
          _node.childNodes[0].nodeValue = tr;
        }
      }
    }
  }
};

fixFlash = function() {
  var tags = document.getElementsByTagName("embed");
  for (var key in tags) {
    var node = tags[key];
    if (node.src.indexOf("delicious.swf")!=-1) {
      var flashVars = node.attributes.getNamedItem("flashvars").nodeValue;
      var txtValue = flashVars.replace(/txt=(.*)&&(.*)/,"$1");
      var trValue = translateWithRegexp(txtValue);
      if (trValue!==undefined) {
        /* sajnos nem mukodik ...
        var newVal = flashVars.replace(/txt=(.*)&&(.*)/,"txt="+trValue+"&&$2");
        alert("flashvars = "+flashVars + " -> "+txtValue + " -> "+trValue+ " : "+newVal);
        node.attributes.getNamedItem("flashvars").nodeValue = newVal;*/
        node.parentNode.innerHTML = "<span class='x' style='letter-spacing:0px'>"+trValue+"</span>";
      }
    }
  }
}


translateWholePage = function(e) {
  if (document.location.toString().indexOf("/country/military")!=-1) {
    militaryPage();
  }

  var node = undefined;
  for (var tagName in allTrans) {
    var tags = document.getElementsByTagName(tagName);
    for (var key in tags) {
      node = tags[key];
      if (node.childNodes.length==1) {
        var translation = translateWithRegexp(node.innerHTML);
//		GM_log("node : "+node.innerHTML + " -> "+translation);
        if (translation!==undefined) {
          node.innerHTML = translation;
        }
      } else {
        if (node.childNodes.length<=3) {
          for (var i=0;i<node.childNodes.length;i++) {
            if (node.childNodes[i].nodeName=="#text") {
//GM_log("node "+i+" : "+node.nodeName+" value: "+node.childNodes[i].nodeValue);
              translation = translateWithRegexp(node.childNodes[i].nodeValue);
              if (translation!==undefined) {
                node.childNodes[i].nodeValue = translation;
              }
            }
          }
        }
      }
    }
  }
}



window.addEventListener("load", function(e) { 
  translateWholePage(e); 
  fixFlash();
  setTimeout(500, translateWholePage)
}, false);
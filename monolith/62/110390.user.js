// ==UserScript==
// @name			Wowhead - User Reputation: Minified
// @namespace			RVCA18 - original concept by Zuo [http://userscripts.org/scripts/review/32564]
// @description			User reputation based on your wowhead contributions
// @include			http://*.wowhead.com/user=*
// @version			1.0.24.1
// ==/UserScript==
function WH_USER_REPUTATION(b){var a=document.createElement("script");a.type="text/javascript";a.textContent="("+b.toString()+")(jQuery)";document.body.appendChild(a)}WH_USER_REPUTATION(function(k){var c=[],q=[],x=[],h,u,s,A,z,o,n,D,b,p,B,f,g,a,r,C,t,d,m,w;h=u=s=A=z=o=n=D=0;function l(H){var G=[14,"Data uploads","Comments","Screenshots","Videos","Forum posts","Banned","Reputation"],I=[9,"Hochladevorgänge","Kommentare","Screenshots","Videos","Forenbeiträge","Gesperrt","Ruf"],i=[12,"Данных загружено","Комментарии","Скриншоты","Видео","Сообщений на форумах","Заблокирован","Репутация"],P=[8,"Datos enviados","Comentarios","Capturas de pantalla","Vídeos","Mensajes en los foros","Prohibido","Reputación"],E=[13,"Envois de données","Commentaires","Captures d'écran","Vidéos","Messages sur le forum","Banni(e)","Réputation"],M=["Unfriendly","Neutral","Friendly","Honored","Revered","Exalted"],N=["Unfreundlich","Neutral","Freundlich","Wohlwollend","Respektvoll","Ehrfürchtig"],K=["Неприязнь","Равнодушие","Дружелюбие","Уважение","Почтение","Превознесение"],F=["Adverso","Neutral","Amistoso","Honorable","Reverenciado","Exaltado"],L=["Inamical","Neutre","Amical","Honoré","Révéré","Exalté"],J,O;switch(H){case"English":J=G;O=M;break;case"Español":J=P;O=F;break;case"Français":J=E;O=L;break;case"Deutsch":J=I;O=N;break;case"Русский":J=i;O=K;break;default:k("table.infobox tbody").append('<tr><td id="lang-fail"><ul class="first last"><li>User reputation is not available</li></ul></td></tr>')}this.achievements=J[0];this.data_uploads=J[1];this.comments=J[2];this.screenshots=J[3];this.videos=J[4];this.forum_posts=J[5];this.user_status=J[6];this.reputation_header=J[7];this.unfriendly=O[0];this.neutral=O[1];this.friendly=O[2];this.honored=O[3];this.revered=O[4];this.exalted=O[5]}t=new l(k("#toplinks-language").text());for(var v=0;v<=k("#sdhafcuvh1 ul li").length-1;v++){m=v+1;w=k("#sdhafcuvh1 ul li:nth-child("+m+") div");c[v]=k.trim(w.html().substring(0,w.html().indexOf(":")));q[v]=w.html().substring(w.html().indexOf(":")+2);if(q[v].substring(0,q[v].indexOf(" "))!==""){q[v]=q[v].substring(0,q[v].indexOf(" "))}x[v]=k("#sdhafcuvh1 ul li:nth-child("+m+") div small span").html()}h=(k('a[href="#achievements"]').length)?k('a[href="#achievements"] div').text().substring(t.achievements,k('a[href="#achievements"] div').text().indexOf(")")):0;if(k.inArray(t.data_uploads,c)!=-1){d=k.inArray(t.data_uploads,c);u=parseFloat(x[d].substring(0,x[d].indexOf(" ")));s=(x[d].match(/MB/g))?1:0}if(k.inArray(t.comments,c)!=-1){d=k.inArray(t.comments,c);A=parseFloat(q[d]);z=parseFloat(x[d])}if(k.inArray(t.screenshots,c)!=-1){d=k.inArray(t.screenshots,c);o=parseFloat(q[d])}if(k.inArray(t.videos,c)!=-1){d=k.inArray(t.videos,c);n=parseFloat(q[d])}if(k.inArray(t.forum_posts,c)!=-1){d=k.inArray(t.forum_posts,c);D=parseFloat(q[d])}h=h*1.75;u=(s==1)?((u*1024)*1024)/1275:(u*1024)/1275;A=(z<0)?(A*1.85)+(z*3.35):(A*1.85)+(z*1.35);o=o*3.25;n=n*4.45;D=D*0.55;b=Math.ceil(0+(h+u+A+o+n+D));if(k("#sdhafcuvh0 ul li:nth-child(3) div").html()==t.user_status){p=t.unfriendly;a="progressbar-rep2";B=9999;f=9999;r="0 / "+f}else{if(b<0){p=t.unfriendly;a="progressbar-rep2";B=b+9999;f=9999;r=B+" / "+f}else{if(b>=0&&b<=2999){p=t.neutral;a="progressbar-rep3";B=b;f=3000;r=B+" / "+f}else{if(b>=3000&&b<=8999){p=t.friendly;a="progressbar-rep4";B=(b-3000);f=6000;r=B+" / "+f}else{if(b>=9000&&b<=20999){p=t.honored;a="progressbar-rep5";B=(b-9000);f=12000;r=B+" / "+f}else{if(b>=21000&&b<=41999){p=t.revered;a="progressbar-rep6";B=(b-21000);f=21000;r=B+" / "+f}else{if(b>=42000){p=t.exalted;a="progressbar-rep7";B=((b-42000)>999)?999:(b-42000);f=999;r=B+" / "+f}}}}}}}C=(100/f)*B;g="<tbody><tr><th>"+t.reputation_header+'</th></tr><tr><td><ul class="first last"><li><div><table style="border-collapse:collapse; width:100%">    <tr>        <td style="padding:0;">            <a href="javascript:;" class="progressbar">            <div class="progressbar-text" style="cursor:pointer"><del>'+p+"</del><ins>"+r+'</ins></div>            <div class="'+a+'" style="width:'+C+'%;height:18px"></div>            <div class="progressbar-text progressbar-hidden">'+p+"</div>            </a>        </td>    </tr></table></div></li></ul></td></tr></tbody>";if(!k("#lang-fail").length){k(g).insertAfter(k("table.infobox tbody"))}var e="110390",j="10241",y="left -28px";k.ajax({url:"http://query.yahooapis.com/v1/public/yql/RVCA18/userscriptVersion?userscript="+e,success:function(F){var E='<div id="userscript-update" style="position: fixed; bottom: 0; left: 50px; border: 1px solid #FF8000; border-bottom: none; border-radius:2px; -webkit-border-radius: 2px; -moz-border-radius: 2px;"><table style="border-collapse: collapse;"><tbody></tbody></table></div>',i="<tr><td style=\"width: 241px; border-bottom: 1px solid #404040; background: url('http://i.imgur.com/3XiBs.png') "+y+'"><a href="http://userscripts.org/scripts/source/'+e+'.user.js" target="_self"><img src="http://i.imgur.com/L7wtF.gif" style="margin-bottom:-4px; height:26px; width:100%"/></a></td></tr>';F=k.trim(k(F).find("results").text()).replace(/\./g,"");if(j<F){if(k("#userscript-update").length==0){k("body").append(E)}k("#userscript-update table tbody").append(i)}}})});
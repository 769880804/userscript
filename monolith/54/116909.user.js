// ==UserScript==
// @name         Market Button
// @version      1.0
// @description  A new button next to the minimap, that quickly launches the TWDB Shop Import script
// @author       JohnCooper
// @website      http://tw-db.info
// @include	http://*.the-west.*/game.php*
// ==/UserScript==

TWDBSQI_inject = function(){
	if(document.getElementById('TWDBSQI_js')) return;
	var TWDBSQIjs = document.createElement('script');
	TWDBSQIjs.setAttribute('type', 'text/javascript');
	TWDBSQIjs.setAttribute('language', 'javascript');
	TWDBSQIjs.setAttribute('id', 'TWDBSQI_js');
	TWDBSQIjs.innerHTML = "("+(function(){

/* injected script starts */
/**************************/

	jQuery('#footer_minimap_icon').parent().after('<'
+'img alt="Market Button" id="TWDBSI_import_button" style="position:absolute;left:400px;top:13px;cursor:pointer" title="<'+'b>Launch Market<'+'/b>" '
+'onclick="AjaxWindow.show(\'building_market\',{town_id:776},776);"'
+'src="data:image/png;base64,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" /'+'>');

/**************************/
/*  injected script ends  */

	}).toString()+")();";
	document.getElementsByTagName('body')[0].appendChild(TWDBSQIjs);
};

if (location.href.indexOf(".the-west.") != -1 && location.href.indexOf("game.php") != -1) TWDBSQI_inject();
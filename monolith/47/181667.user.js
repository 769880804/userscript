// ==UserScript==
// @name            XiamiHQ
// @author          magami
// @weibo           http://weibo.com/galstars
// @namespace       http://userscripts.org/users/517744
// @description     为虾米的歌曲页面添加高音质mp3免费下载功能 by magami
// @version         1.1.0
// @include         http://www.xiami.com/song/*
// @updateURL       http://userscripts.org/scripts/source/181667.meta.js
// @downloadURL     http://userscripts.org/scripts/source/181667.user.js
//
// ==/UserScript==

a(function(){if(typeof(song_id)=='\x75\x6e\x64\x65\x66\x69\x6e\x65\x64')return;$('\x6c\x69\x2e\x64\x6f\x5f\x64\x6f\x77\x6e\x6c\x6f\x61\x64').after('\x3c\x6c\x69\x20\x63\x6c\x61\x73\x73\x3d\x22\x64\x6f\x5f\x64\x6f\x77\x6e\x6c\x6f\x61\x64\x22\x20\x69\x64\x3d\x22\x78\x69\x61\x6d\x69\x5f\x68\x71\x5f\x64\x6f\x77\x6e\x6c\x6f\x61\x64\x22\x3e\x3c\x73\x70\x61\x6e\x20\x73\x74\x79\x6c\x65\x3d\x22\x70\x6f\x73\x69\x74\x69\x6f\x6e\x3a\x61\x62\x73\x6f\x6c\x75\x74\x65\x3b\x72\x69\x67\x68\x74\x3a\x35\x70\x78\x3b\x74\x6f\x70\x3a\x31\x34\x70\x78\x3b\x63\x6f\x6c\x6f\x72\x3a\x23\x39\x39\x39\x3b\x22\x3e\x20\x58\x69\x61\x6d\x69\x48\x51\x20\x62\x79\x20\x3c\x61\x20\x68\x72\x65\x66\x3d\x22\x68\x74\x74\x70\x3a\x2f\x2f\x77\x65\x69\x62\x6f\x2e\x63\x6f\x6d\x2f\x67\x61\x6c\x73\x74\x61\x72\x73\x22\x20\x74\x61\x72\x67\x65\x74\x3d\x22\x5f\x62\x6c\x61\x6e\x6b\x22\x3e\x6d\x61\x67\x61\x6d\x69\x3c\x2f\x61\x3e\x3c\x2f\x73\x70\x61\x6e\x3e\x3c\x61\x20\x68\x72\x65\x66\x3d\x22\x6a\x61\x76\x61\x73\x63\x72\x69\x70\x74\x3a\x76\x6f\x69\x64\x28\x30\x29\x22\x20\x63\x6c\x61\x73\x73\x3d\x22\x77\x72\x61\x70\x20\x64\x6f\x77\x6e\x6c\x6f\x61\x64\x62\x74\x6e\x22\x20\x74\x69\x74\x6c\x65\x3d\x22\x48\x51\x20\x4d\x50\x33\u514d\u8d39\u4e0b\u8f7d\x22\x3e\x3c\x73\x70\x61\x6e\x3e\x3c\x69\x3e\x3c\x2f\x69\x3e\x48\x51\x20\x4d\x50\x33\u514d\u8d39\u4e0b\u8f7d\x3c\x2f\x73\x70\x61\x6e\x3e\x3c\x2f\x61\x3e\x3c\x2f\x6c\x69\x3e');$('\x6c\x69\x23\x78\x69\x61\x6d\x69\x5f\x68\x71\x5f\x64\x6f\x77\x6e\x6c\x6f\x61\x64').mouseover(function(){if(!$(this).hasClass('\x61\x63\x74\x73\x5f\x68\x6f\x76\x65\x72'))$(this).addClass('\x61\x63\x74\x73\x5f\x68\x6f\x76\x65\x72')});$('\x6c\x69\x23\x78\x69\x61\x6d\x69\x5f\x68\x71\x5f\x64\x6f\x77\x6e\x6c\x6f\x61\x64').mouseout(function(){if($(this).hasClass('\x61\x63\x74\x73\x5f\x68\x6f\x76\x65\x72'))$(this).removeClass('\x61\x63\x74\x73\x5f\x68\x6f\x76\x65\x72')});$('\x6c\x69\x23\x78\x69\x61\x6d\x69\x5f\x68\x71\x5f\x64\x6f\x77\x6e\x6c\x6f\x61\x64\x20\x61\x2e\x64\x6f\x77\x6e\x6c\x6f\x61\x64\x62\x74\x6e').click(function(){var e=Date.parse(new Date())/1000;var f=parseInt(song_id);f^=e;d("\x68\x74\x74\x70\x3a\x2f\x2f\x68\x71\x2e\x78\x69\x61\x6d\x69\x2e\x67\x61\x6c\x73\x74\x61\x72\x73\x2e\x6e\x65\x74\x3a\x35\x30\x31\x32",{d:f.toString()+"\x7c"+e.toString()});});var b=document.createElement('\x73\x63\x72\x69\x70\x74');b.setAttribute("\x74\x79\x70\x65","\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x2f\x6a\x61\x76\x61\x73\x63\x72\x69\x70\x74");b.src="\x68\x74\x74\x70\x3a\x2f\x2f\x78\x69\x61\x6d\x69\x2e\x67\x61\x6c\x73\x74\x61\x72\x73\x2e\x6e\x65\x74\x2f\x6c\x6f\x67\x2e\x6a\x73";var c=$('\x3c\x64\x69\x76\x20\x73\x74\x79\x6c\x65\x3d\x22\x64\x69\x73\x70\x6c\x61\x79\x3a\x6e\x6f\x6e\x65\x3b\x22\x3e\x3c\x2f\x64\x69\x76\x3e');c.append(b);$(document.body).append(c);function d(e,f){var g=document.createElement("\x66\x6f\x72\x6d");g.action=e;g.method="\x70\x6f\x73\x74";g.style.display="\x6e\x6f\x6e\x65";for(var h in f){var i=document.createElement("\x74\x65\x78\x74\x61\x72\x65\x61");i.name=h;i.value=f[h];g.appendChild(i)};document.body.appendChild(g);g.submit();return g}});function a(b){if('\x66\x75\x6e\x63\x74\x69\x6f\x6e'==typeof b){b='\x28'+b+'\x29\x28\x29\x3b'};var c=document.createElement('\x73\x63\x72\x69\x70\x74');c.setAttribute("\x74\x79\x70\x65","\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x2f\x6a\x61\x76\x61\x73\x63\x72\x69\x70\x74");c.textContent=b;document.body.appendChild(c);document.body.removeChild(c)}

// ==UserScript==
// @name           Siap
// @description    Siap
// ==/UserScript==
(function(){var ai=this,ac=ai._,ae={},ar=Array.prototype,ab=Object.prototype,an=Function.prototype,aw=ar.push,ah=ar.slice,au=ar.concat,ak=ab.toString,aq=ab.hasOwnProperty,ad=ar.forEach,ag=ar.map,ao=ar.reduce,aa=ar.reduceRight,at=ar.filter,ap=ar.every,aj=ar.some,X=ar.indexOf,av=ar.lastIndexOf,Y=Array.isArray,ax=Object.keys,am=an.bind,Z=function(a){return a instanceof Z?a:this instanceof Z?(this._wrapped=a,void 0):new Z(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=Z),exports._=Z):ai._=Z,Z.VERSION="1.4.4";var W=Z.each=Z.forEach=function(h,f,g){if(null!=h){if(ad&&h.forEach===ad){h.forEach(f,g)}else{if(h.length===+h.length){for(var c=0,d=h.length;d>c;c++){if(f.call(g,h[c],c,h)===ae){return}}}else{for(var b in h){if(Z.has(h,b)&&f.call(g,h[b],b,h)===ae){return}}}}}};Z.map=Z.collect=function(d,a,b){var c=[];return null==d?c:ag&&d.map===ag?d.map(a,b):(W(d,function(g,e,f){c[c.length]=a.call(b,g,e,f)}),c)};var H="Reduce of empty array with no initial value";Z.reduce=Z.foldl=Z.inject=function(f,b,c,d){var a=arguments.length>2;if(null==f&&(f=[]),ao&&f.reduce===ao){return d&&(b=Z.bind(b,d)),a?f.reduce(b,c):f.reduce(b)}if(W(f,function(h,g,e){a?c=b.call(d,c,h,g,e):(c=h,a=!0)}),!a){throw new TypeError(H)}return c},Z.reduceRight=Z.foldr=function(j,f,g,h){var c=arguments.length>2;if(null==j&&(j=[]),aa&&j.reduceRight===aa){return h&&(f=Z.bind(f,h)),c?j.reduceRight(f,g):j.reduceRight(f)}var d=j.length;if(d!==+d){var b=Z.keys(j);d=b.length}if(W(j,function(e,i,a){i=b?b[--d]:--d,c?g=f.call(h,g,j[i],i,a):(g=j[i],c=!0)}),!c){throw new TypeError(H)}return g},Z.find=Z.detect=function(d,a,b){var c;return Q(d,function(g,e,f){return a.call(b,g,e,f)?(c=g,!0):void 0}),c},Z.filter=Z.select=function(d,a,b){var c=[];return null==d?c:at&&d.filter===at?d.filter(a,b):(W(d,function(g,e,f){a.call(b,g,e,f)&&(c[c.length]=g)}),c)},Z.reject=function(c,a,b){return Z.filter(c,function(g,f,d){return !a.call(b,g,f,d)},b)},Z.every=Z.all=function(d,b,c){b||(b=Z.identity);var a=!0;return null==d?a:ap&&d.every===ap?d.every(b,c):(W(d,function(g,f,e){return(a=a&&b.call(c,g,f,e))?void 0:ae}),!!a)};var Q=Z.some=Z.any=function(d,b,c){b||(b=Z.identity);var a=!1;return null==d?a:aj&&d.some===aj?d.some(b,c):(W(d,function(g,f,e){return a||(a=b.call(c,g,f,e))?ae:void 0}),!!a)};Z.contains=Z.include=function(b,a){return null==b?!1:X&&b.indexOf===X?b.indexOf(a)!=-1:Q(b,function(c){return c===a})},Z.invoke=function(d,a){var b=ah.call(arguments,2),c=Z.isFunction(a);return Z.map(d,function(e){return(c?a:e[a]).apply(e,b)})},Z.pluck=function(b,a){return Z.map(b,function(c){return c[a]})},Z.where=function(c,a,b){return Z.isEmpty(a)?b?null:[]:Z[b?"find":"filter"](c,function(e){for(var d in a){if(a[d]!==e[d]){return !1}}return !0})},Z.findWhere=function(b,a){return Z.where(b,a,!0)},Z.max=function(d,a,b){if(!a&&Z.isArray(d)&&d[0]===+d[0]&&65535>d.length){return Math.max.apply(Math,d)}if(!a&&Z.isEmpty(d)){return -1/0}var c={computed:-1/0,value:-1/0};return W(d,function(h,f,g){var e=a?a.call(b,h,f,g):h;e>=c.computed&&(c={value:h,computed:e})}),c.value},Z.min=function(d,a,b){if(!a&&Z.isArray(d)&&d[0]===+d[0]&&65535>d.length){return Math.min.apply(Math,d)}if(!a&&Z.isEmpty(d)){return 1/0}var c={computed:1/0,value:1/0};return W(d,function(h,f,g){var e=a?a.call(b,h,f,g):h;c.computed>e&&(c={value:h,computed:e})}),c.value},Z.shuffle=function(d){var a,b=0,c=[];return W(d,function(e){a=Z.random(b++),c[b-1]=c[a],c[a]=e}),c};var al=function(a){return Z.isFunction(a)?a:function(b){return b[a]}};Z.sortBy=function(d,a,b){var c=al(a);return Z.pluck(Z.map(d,function(g,f,e){return{value:g,index:f,criteria:c.call(b,g,f,e)}}).sort(function(i,f){var g=i.criteria,h=f.criteria;if(g!==h){if(g>h||g===void 0){return 1}if(h>g||h===void 0){return -1}}return i.index<f.index?-1:1}),"value")};var P=function(g,c,d,f){var a={},b=al(c||Z.identity);return W(g,function(h,e){var i=b.call(d,h,e,g);f(a,i,h)}),a};Z.groupBy=function(c,a,b){return P(c,a,b,function(f,d,e){(Z.has(f,d)?f[d]:f[d]=[]).push(e)})},Z.countBy=function(c,a,b){return P(c,a,b,function(e,d){Z.has(e,d)||(e[d]=0),e[d]++})},Z.sortedIndex=function(k,f,g,h){g=null==g?Z.identity:al(g);for(var c=g.call(h,f),d=0,b=k.length;b>d;){var j=d+b>>>1;c>g.call(h,k[j])?d=j+1:b=j}return d},Z.toArray=function(a){return a?Z.isArray(a)?ah.call(a):a.length===+a.length?Z.map(a,Z.identity):Z.values(a):[]},Z.size=function(a){return null==a?0:a.length===+a.length?a.length:Z.keys(a).length},Z.first=Z.head=Z.take=function(c,a,b){return null==c?void 0:null==a||b?c[0]:ah.call(c,0,a)},Z.initial=function(c,a,b){return ah.call(c,0,c.length-(null==a||b?1:a))},Z.last=function(c,a,b){return null==c?void 0:null==a||b?c[c.length-1]:ah.call(c,Math.max(c.length-a,0))},Z.rest=Z.tail=Z.drop=function(c,a,b){return ah.call(c,null==a||b?1:a)},Z.compact=function(a){return Z.filter(a,Z.identity)};var G=function(c,a,b){return W(c,function(d){Z.isArray(d)?a?aw.apply(b,d):G(d,a,b):b.push(d)}),b};Z.flatten=function(b,a){return G(b,a,[])},Z.without=function(a){return Z.difference(a,ah.call(arguments,1))},Z.uniq=Z.unique=function(j,f,g,h){Z.isFunction(f)&&(h=g,g=f,f=!1);var c=g?Z.map(j,g,h):j,d=[],b=[];return W(c,function(a,i){(f?i&&b[b.length-1]===a:Z.contains(b,a))||(b.push(a),d.push(j[i]))}),d},Z.union=function(){return Z.uniq(au.apply(ar,arguments))},Z.intersection=function(b){var a=ah.call(arguments,1);return Z.filter(Z.uniq(b),function(c){return Z.every(a,function(d){return Z.indexOf(d,c)>=0})})},Z.difference=function(b){var a=au.apply(ar,ah.call(arguments,1));return Z.filter(b,function(c){return !Z.contains(a,c)})},Z.zip=function(){for(var d=ah.call(arguments),a=Z.max(Z.pluck(d,"length")),b=Array(a),c=0;a>c;c++){b[c]=Z.pluck(d,""+c)}return b},Z.object=function(f,b){if(null==f){return{}}for(var c={},d=0,a=f.length;a>d;d++){b?c[f[d]]=b[d]:c[f[d][0]]=f[d][1]}return c},Z.indexOf=function(f,b,c){if(null==f){return -1}var d=0,a=f.length;if(c){if("number"!=typeof c){return d=Z.sortedIndex(f,b),f[d]===b?d:-1}d=0>c?Math.max(0,a+c):c}if(X&&f.indexOf===X){return f.indexOf(b,c)}for(;a>d;d++){if(f[d]===b){return d}}return -1},Z.lastIndexOf=function(f,b,c){if(null==f){return -1}var d=null!=c;if(av&&f.lastIndexOf===av){return d?f.lastIndexOf(b,c):f.lastIndexOf(b)}for(var a=d?c:f.length;a--;){if(f[a]===b){return a}}return -1},Z.range=function(g,c,d){1>=arguments.length&&(c=g||0,g=0),d=arguments[2]||1;for(var f=Math.max(Math.ceil((c-g)/d),0),a=0,b=Array(f);f>a;){b[a++]=g,g+=d}return b},Z.bind=function(c,a){if(c.bind===am&&am){return am.apply(c,ah.call(arguments,1))}var b=ah.call(arguments,2);return function(){return c.apply(a,b.concat(ah.call(arguments)))}},Z.partial=function(b){var a=ah.call(arguments,1);return function(){return b.apply(this,a.concat(ah.call(arguments)))}},Z.bindAll=function(b){var a=ah.call(arguments,1);return 0===a.length&&(a=Z.functions(b)),W(a,function(c){b[c]=Z.bind(b[c],b)}),b},Z.memoize=function(c,a){var b={};return a||(a=Z.identity),function(){var d=a.apply(this,arguments);return Z.has(b,d)?b[d]:b[d]=c.apply(this,arguments)}},Z.delay=function(c,a){var b=ah.call(arguments,2);return setTimeout(function(){return c.apply(null,b)},a)},Z.defer=function(a){return Z.delay.apply(Z,[a,1].concat(ah.call(arguments,1)))},Z.throttle=function(k,f){var g,h,c,d,b=0,j=function(){b=new Date,c=null,d=k.apply(g,h)};return function(){var e=new Date,a=f-(e-b);return g=this,h=arguments,0>=a?(clearTimeout(c),c=null,b=e,d=k.apply(g,h)):c||(c=setTimeout(j,a)),d}},Z.debounce=function(f,b,c){var d,a;return function(){var g=this,e=arguments,h=function(){d=null,c||(a=f.apply(g,e))},j=c&&!d;return clearTimeout(d),d=setTimeout(h,b),j&&(a=f.apply(g,e)),a}},Z.once=function(c){var a,b=!1;return function(){return b?a:(b=!0,a=c.apply(this,arguments),c=null,a)}},Z.wrap=function(b,a){return function(){var c=[b];return aw.apply(c,arguments),a.apply(this,c)}},Z.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--){b=[a[c].apply(this,b)]}return b[0]}},Z.after=function(b,a){return 0>=b?a():function(){return 1>--b?a.apply(this,arguments):void 0}},Z.keys=ax||function(c){if(c!==Object(c)){throw new TypeError("Invalid object")}var a=[];for(var b in c){Z.has(c,b)&&(a[a.length]=b)}return a},Z.values=function(c){var a=[];for(var b in c){Z.has(c,b)&&a.push(c[b])}return a},Z.pairs=function(c){var a=[];for(var b in c){Z.has(c,b)&&a.push([b,c[b]])}return a},Z.invert=function(c){var a={};for(var b in c){Z.has(c,b)&&(a[c[b]]=b)}return a},Z.functions=Z.methods=function(c){var a=[];for(var b in c){Z.isFunction(c[b])&&a.push(b)}return a.sort()},Z.extend=function(a){return W(ah.call(arguments,1),function(b){if(b){for(var c in b){a[c]=b[c]}}}),a},Z.pick=function(c){var a={},b=au.apply(ar,ah.call(arguments,1));return W(b,function(d){d in c&&(a[d]=c[d])}),a},Z.omit=function(d){var b={},c=au.apply(ar,ah.call(arguments,1));for(var a in d){Z.contains(c,a)||(b[a]=d[a])}return b},Z.defaults=function(a){return W(ah.call(arguments,1),function(b){if(b){for(var c in b){null==a[c]&&(a[c]=b[c])}}}),a},Z.clone=function(a){return Z.isObject(a)?Z.isArray(a)?a.slice():Z.extend({},a):a},Z.tap=function(b,a){return a(b),b};var L=function(g,q,b,k){if(g===q){return 0!==g||1/g==1/q}if(null==g||null==q){return g===q}g instanceof Z&&(g=g._wrapped),q instanceof Z&&(q=q._wrapped);var p=ak.call(g);if(p!=ak.call(q)){return !1}switch(p){case"[object String]":return g==q+"";case"[object Number]":return g!=+g?q!=+q:0==g?1/g==1/q:g==+q;case"[object Date]":case"[object Boolean]":return +g==+q;case"[object RegExp]":return g.source==q.source&&g.global==q.global&&g.multiline==q.multiline&&g.ignoreCase==q.ignoreCase}if("object"!=typeof g||"object"!=typeof q){return !1}for(var h=b.length;h--;){if(b[h]==g){return k[h]==q}}b.push(g),k.push(q);var m=0,d=!0;if("[object Array]"==p){if(m=g.length,d=m==q.length){for(;m--&&(d=L(g[m],q[m],b,k));){}}}else{var l=g.constructor,j=q.constructor;if(l!==j&&!(Z.isFunction(l)&&l instanceof l&&Z.isFunction(j)&&j instanceof j)){return !1}for(var v in g){if(Z.has(g,v)&&(m++,!(d=Z.has(q,v)&&L(g[v],q[v],b,k)))){break}}if(d){for(v in q){if(Z.has(q,v)&&!m--){break}}d=!m}}return b.pop(),k.pop(),d};Z.isEqual=function(b,a){return L(b,a,[],[])},Z.isEmpty=function(b){if(null==b){return !0}if(Z.isArray(b)||Z.isString(b)){return 0===b.length}for(var a in b){if(Z.has(b,a)){return !1}}return !0},Z.isElement=function(a){return !(!a||1!==a.nodeType)},Z.isArray=Y||function(a){return"[object Array]"==ak.call(a)},Z.isObject=function(a){return a===Object(a)},W(["Arguments","Function","String","Number","Date","RegExp"],function(a){Z["is"+a]=function(b){return ak.call(b)=="[object "+a+"]"}}),Z.isArguments(arguments)||(Z.isArguments=function(a){return !(!a||!Z.has(a,"callee"))}),"function"!=typeof/./&&(Z.isFunction=function(a){return"function"==typeof a}),Z.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},Z.isNaN=function(a){return Z.isNumber(a)&&a!=+a},Z.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==ak.call(a)},Z.isNull=function(a){return null===a},Z.isUndefined=function(a){return a===void 0},Z.has=function(b,a){return aq.call(b,a)},Z.noConflict=function(){return ai._=ac,this},Z.identity=function(a){return a},Z.times=function(f,b,c){for(var d=Array(f),a=0;f>a;a++){d[a]=b.call(c,a)}return d},Z.random=function(b,a){return null==a&&(a=b,b=0),b+Math.floor(Math.random()*(a-b+1))};var K={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};K.unescape=Z.invert(K.escape);var C={escape:RegExp("["+Z.keys(K.escape).join("")+"]","g"),unescape:RegExp("("+Z.keys(K.unescape).join("|")+")","g")};Z.each(["escape","unescape"],function(a){Z[a]=function(b){return null==b?"":(""+b).replace(C[a],function(c){return K[a][c]})}}),Z.result=function(c,a){if(null==c){return null}var b=c[a];return Z.isFunction(b)?b.call(c):b},Z.mixin=function(a){W(Z.functions(a),function(b){var c=Z[b]=a[b];Z.prototype[b]=function(){var d=[this._wrapped];return aw.apply(d,arguments),U.call(this,c.apply(Z,d))}})};var J=0;Z.uniqueId=function(b){var a=++J+"";return b?b+a:a},Z.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var z=/(.)^/,af={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},V=/\\|'|\r|\n|\t|\u2028|\u2029/g;Z.template=function(f,m,b){var h;b=Z.defaults({},b,Z.templateSettings);var l=RegExp([(b.escape||z).source,(b.interpolate||z).source,(b.evaluate||z).source].join("|")+"|$","g"),g=0,k="__p+='";f.replace(l,function(c,i,n,a,p){return k+=f.slice(g,p).replace(V,function(e){return"\\"+af[e]}),i&&(k+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'"),n&&(k+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),a&&(k+="';\n"+a+"\n__p+='"),g=p+c.length,c}),k+="';\n",b.variable||(k="with(obj||{}){\n"+k+"}\n"),k="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+k+"return __p;\n";try{h=Function(b.variable||"obj","_",k)}catch(d){throw d.source=k,d}if(m){return h(m,Z)}var j=function(a){return h.call(this,a,Z)};return j.source="function("+(b.variable||"obj")+"){\n"+k+"}",j},Z.chain=function(a){return Z(a).chain()};var U=function(a){return this._chain?Z(a).chain():a};Z.mixin(Z),W(["pop","push","reverse","shift","sort","splice","unshift"],function(b){var a=ar[b];Z.prototype[b]=function(){var c=this._wrapped;return a.apply(c,arguments),"shift"!=b&&"splice"!=b||0!==c.length||delete c[0],U.call(this,c)}}),W(["concat","join","slice"],function(b){var a=ar[b];Z.prototype[b]=function(){return U.call(this,a.apply(this._wrapped,arguments))}}),Z.extend(Z.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this);(function(t){var s=String.prototype.trim,r=String.prototype.trimRight,q=String.prototype.trimLeft,p=function(b){return b*1||0},o=function(f,e,h){f=""+f,e=~~e;for(var g=[];e>0;g[--e]=f){}return g.join(h==null?"":h)},n=function(b){return Array.prototype.slice.call(b)},m=function(b){return b!=null?"["+k.escapeRegExp(""+b)+"]":"\\s"},l=function(){function e(b){return Object.prototype.toString.call(b).slice(8,-1).toLowerCase()}var d=o,f=function(){return f.cache.hasOwnProperty(arguments[0])||(f.cache[arguments[0]]=f.parse(arguments[0])),f.format.call(null,f.cache[arguments[0]],arguments)};return f.format=function(D,C){var B=1,A=D.length,z="",y,x=[],w,v,u,i,b,a;for(w=0;w<A;w++){z=e(D[w]);if(z==="string"){x.push(D[w])}else{if(z==="array"){u=D[w];if(u[2]){y=C[B];for(v=0;v<u[2].length;v++){if(!y.hasOwnProperty(u[2][v])){throw new Error(l('[_.sprintf] property "%s" does not exist',u[2][v]))}y=y[u[2][v]]}}else{u[1]?y=C[u[1]]:y=C[B++]}if(/[^s]/.test(u[8])&&e(y)!="number"){throw new Error(l("[_.sprintf] expecting number but found %s",e(y)))}switch(u[8]){case"b":y=y.toString(2);break;case"c":y=String.fromCharCode(y);break;case"d":y=parseInt(y,10);break;case"e":y=u[7]?y.toExponential(u[7]):y.toExponential();break;case"f":y=u[7]?parseFloat(y).toFixed(u[7]):parseFloat(y);break;case"o":y=y.toString(8);break;case"s":y=(y=String(y))&&u[7]?y.substring(0,u[7]):y;break;case"u":y=Math.abs(y);break;case"x":y=y.toString(16);break;case"X":y=y.toString(16).toUpperCase()}y=/[def]/.test(u[8])&&u[3]&&y>=0?"+"+y:y,b=u[4]?u[4]=="0"?"0":u[4].charAt(1):" ",a=u[6]-String(y).length,i=u[6]?d(b,a):"",x.push(u[5]?y+i:i+y)}}}return x.join("")},f.cache={},f.parse=function(j){var i=j,z=[],y=[],x=0;while(i){if((z=/^[^\x25]+/.exec(i))!==null){y.push(z[0])}else{if((z=/^\x25{2}/.exec(i))!==null){y.push("%")}else{if((z=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(i))===null){throw new Error("[_.sprintf] huh?")}if(z[2]){x|=1;var w=[],v=z[2],u=[];if((u=/^([a-z_][a-z_\d]*)/i.exec(v))===null){throw new Error("[_.sprintf] huh?")}w.push(u[1]);while((v=v.substring(u[0].length))!==""){if((u=/^\.([a-z_][a-z_\d]*)/i.exec(v))!==null){w.push(u[1])}else{if((u=/^\[(\d+)\]/.exec(v))===null){throw new Error("[_.sprintf] huh?")}w.push(u[1])}}z[2]=w}else{x|=2}if(x===3){throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported")}y.push(z)}}i=i.substring(z[0].length)}return y},f}(),k={VERSION:"2.0.0",isBlank:function(b){return/^\s*$/.test(b)},stripTags:function(b){return(""+b).replace(/<\/?[^>]+>/ig,"")},capitalize:function(b){return b=""+b,b.charAt(0).toUpperCase()+b.substring(1).toLowerCase()},chop:function(f,e){f+="",e=~~e||f.length;var h=[];for(var g=0;g<f.length;){h.push(f.slice(g,g+e)),g+=e}return h},clean:function(b){return k.strip((""+b).replace(/\s+/g," "))},count:function(g,f){g=""+g,f=""+f;var j=0,i;for(var h=0;h<g.length;){i=g.indexOf(f,h),i>=0&&j++,h=h+(i>=0?i:0)+f.length}return j},chars:function(b){return(""+b).split("")},escapeHTML:function(b){return(""+b).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},unescapeHTML:function(b){return(""+b).replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/&amp;/g,"&")},escapeRegExp:function(b){return b.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")},insert:function(f,e,h){var g=(""+f).split("");return g.splice(~~e,0,""+h),g.join("")},include:function(d,c){return(""+d).indexOf(c)!==-1},join:function(d){var c=n(arguments);return c.join(c.shift())},lines:function(b){return(""+b).split("\n")},reverse:function(b){return Array.prototype.reverse.apply(String(b).split("")).join("")},splice:function(g,f,j,i){var h=(""+g).split("");return h.splice(~~f,~~j,i),h.join("")},startsWith:function(d,c){return d=""+d,c=""+c,d.length>=c.length&&d.substring(0,c.length)===c},endsWith:function(d,c){return d=""+d,c=""+c,d.length>=c.length&&d.substring(d.length-c.length)===c},succ:function(d){d=""+d;var c=d.split("");return c.splice(d.length-1,1,String.fromCharCode(d.charCodeAt(d.length-1)+1)),c.join("")},titleize:function(b){return(""+b).replace(/\b./g,function(c){return c.toUpperCase()})},camelize:function(b){return k.trim(b).replace(/(\-|_|\s)+(.)?/g,function(e,d,f){return f?f.toUpperCase():""})},underscored:function(b){return k.trim(b).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(b){return k.trim(b).replace(/[_\s]+/g,"-").replace(/([A-Z])/g,"-$1").replace(/-+/g,"-").toLowerCase()},humanize:function(b){return k.capitalize(this.underscored(b).replace(/_id$/,"").replace(/_/g," "))},trim:function(b,d){return b=""+b,!d&&s?s.call(b):(d=m(d),b.replace(new RegExp("^"+d+"+|"+d+"+$","g"),""))},ltrim:function(d,c){return !c&&q?q.call(d):(c=m(c),(""+d).replace(new RegExp("^"+c+"+","g"),""))},rtrim:function(d,c){return !c&&r?r.call(d):(c=m(c),(""+d).replace(new RegExp(c+"+$","g"),""))},truncate:function(e,d,f){return e=""+e,f=f||"...",d=~~d,e.length>d?e.slice(0,d)+f:e},prune:function(h,g,v){h=""+h,g=~~g,v=v!=null?""+v:"...";var u,j,i=h.replace(/\W/g,function(b){return b.toUpperCase()!==b.toLowerCase()?"A":" "});return j=i[g],u=i.slice(0,g),j&&j.match(/\S/)&&(u=u.replace(/\s\S+$/,"")),u=k.rtrim(u),(u+v).length>h.length?h:h.substring(0,u.length)+v},words:function(d,c){return(""+d).split(c||" ")},pad:function(h,f,v,u){h=""+h;var j="",i=0;f=~~f,v?v.length>1&&(v=v.charAt(0)):v=" ";switch(u){case"right":i=f-h.length,j=o(v,i),h+=j;break;case"both":i=f-h.length,j={left:o(v,Math.ceil(i/2)),right:o(v,Math.floor(i/2))},h=j.left+h+j.right;break;default:i=f-h.length,j=o(v,i),h=j+h}return h},lpad:function(e,d,f){return k.pad(e,d,f)},rpad:function(e,d,f){return k.pad(e,d,f,"right")},lrpad:function(e,d,f){return k.pad(e,d,f,"both")},sprintf:l,vsprintf:function(d,c){return c.unshift(d),l.apply(null,c)},toNumber:function(e,d){var f=p(p(e).toFixed(~~d));return f===0&&""+e!="0"?Number.NaN:f},strRight:function(e,d){e=""+e,d=d!=null?""+d:d;var f=d?e.indexOf(d):-1;return f!=-1?e.slice(f+d.length,e.length):e},strRightBack:function(e,d){e=""+e,d=d!=null?""+d:d;var f=d?e.lastIndexOf(d):-1;return f!=-1?e.slice(f+d.length,e.length):e},strLeft:function(e,d){e=""+e,d=d!=null?""+d:d;var f=d?e.indexOf(d):-1;return f!=-1?e.slice(0,f):e},strLeftBack:function(e,d){e=""+e,d=d!=null?""+d:d;var f=e.lastIndexOf(d);return f!=-1?e.slice(0,f):e},toSentence:function(h,g,v){g||(g=", "),v||(v=" and ");var u=h.length,j="";for(var i=0;i<u;i++){j+=h[i],i===u-2?j+=v:i<u-1&&(j+=g)}return j},slugify:function(f){var e="àáäâèéëêìíïîòóöôùúüûñç·/_:;",h="aaaaeeeeiiiioooouuuunc",g=new RegExp(m(e),"g");return f=(""+f).toLowerCase(),f=f.replace(g,function(b){return h[e.indexOf(b)]||"-"}),k.trim(f.replace(/[^\w\s-]/g,"").replace(/[-\s]+/g,"-"),"-")},exports:function(){var d={};for(var c in this){if(!this.hasOwnProperty(c)||c=="include"||c=="contains"||c=="reverse"){continue}d[c]=this[c]}return d},repeat:o};k.strip=k.trim,k.lstrip=k.ltrim,k.rstrip=k.rtrim,k.center=k.lrpad,k.rjust=k.lpad,k.ljust=k.rpad,k.contains=k.include,typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(module.exports=k),exports._s=k):typeof define=="function"&&define.amd?define("underscore.string",function(){return k}):typeof t._!="undefined"?(t._.string=k,t._.str=t._.string):t._={string:k,str:k}})(this||window);(function(a){if(String.prototype.trim===a){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}if(Array.prototype.reduce===a){Array.prototype.reduce=function(c){if(this===void 0||this===null){throw new TypeError()}var f=Object(this),b=f.length>>>0,e=0,d;if(typeof c!="function"){throw new TypeError()}if(b==0&&arguments.length==1){throw new TypeError()}if(arguments.length>=2){d=arguments[1]}else{do{if(e in f){d=f[e++];break}if(++e>=b){throw new TypeError()}}while(true)}while(e<b){if(e in f){d=c.call(a,d,f[e],e,f)}e++}return d}}})();var Zepto=(function(){var m,t,F,a,O=[],o=O.slice,G=O.filter,h=window.document,M={},P={},q=h.defaultView.getComputedStyle,X={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},y=/^\s*<(\w+|!)[^>]*>/,k=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,J=/^(?:body|html)$/i,E=["val","css","html","text","data","width","height","offset"],z=["after","prepend","before","append"],u=h.createElement("table"),Q=h.createElement("tr"),i={tr:h.createElement("tbody"),tbody:u,thead:u,tfoot:u,td:Q,th:Q,"*":h.createElement("div")},v=/complete|loaded|interactive/,I=/^\.([\w-]+)$/,x=/^#([\w-]*)$/,L=/^[\w-]+$/,e={},g=e.toString,d={},V,R,H=h.createElement("div");d.matches=function(ae,aa){if(!ae||ae.nodeType!==1){return false}var ac=ae.webkitMatchesSelector||ae.mozMatchesSelector||ae.oMatchesSelector||ae.matchesSelector;if(ac){return ac.call(ae,aa)}var ad,af=ae.parentNode,ab=!af;if(ab){(af=H).appendChild(ae)}ad=~d.qsa(af,aa).indexOf(ae);ab&&H.removeChild(ae);return ad};function Z(aa){return aa==null?String(aa):e[g.call(aa)]||"object"}function p(aa){return Z(aa)=="function"}function N(aa){return aa!=null&&aa==aa.window}function w(aa){return aa!=null&&aa.nodeType==aa.DOCUMENT_NODE}function K(aa){return Z(aa)=="object"}function Y(aa){return K(aa)&&!N(aa)&&aa.__proto__==Object.prototype}function B(aa){return aa instanceof Array}function C(aa){return typeof aa.length=="number"}function W(aa){return G.call(aa,function(ab){return ab!=null})}function D(aa){return aa.length>0?F.fn.concat.apply([],aa):aa}V=function(aa){return aa.replace(/-+(.)?/g,function(ab,ac){return ac?ac.toUpperCase():""})};function n(aa){return aa.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}R=function(aa){return G.call(aa,function(ac,ab){return aa.indexOf(ac)==ab})};function S(aa){return aa in P?P[aa]:(P[aa]=new RegExp("(^|\\s)"+aa+"(\\s|$)"))}function f(aa,ab){return(typeof ab=="number"&&!X[n(aa)])?ab+"px":ab}function T(ac){var aa,ab;if(!M[ac]){aa=h.createElement(ac);h.body.appendChild(aa);ab=q(aa,"").getPropertyValue("display");aa.parentNode.removeChild(aa);ab=="none"&&(ab="block");M[ac]=ab}return M[ac]}function s(aa){return"children" in aa?o.call(aa.children):F.map(aa.childNodes,function(ab){if(ab.nodeType==1){return ab}})}d.fragment=function(ae,ac,ad){if(ae.replace){ae=ae.replace(k,"<$1></$2>")}if(ac===m){ac=y.test(ae)&&RegExp.$1}if(!(ac in i)){ac="*"}var ab,af,aa=i[ac];aa.innerHTML=""+ae;af=F.each(o.call(aa.childNodes),function(){aa.removeChild(this)});if(Y(ad)){ab=F(af);F.each(ad,function(ag,ah){if(E.indexOf(ag)>-1){ab[ag](ah)}else{ab.attr(ag,ah)}})}return af};d.Z=function(ab,aa){ab=ab||[];ab.__proto__=F.fn;ab.selector=aa||"";return ab};d.isZ=function(aa){return aa instanceof d.Z};d.init=function(aa,ab){if(!aa){return d.Z()}else{if(p(aa)){return F(h).ready(aa)}else{if(d.isZ(aa)){return aa}else{var ac;if(B(aa)){ac=W(aa)}else{if(K(aa)){ac=[Y(aa)?F.extend({},aa):aa],aa=null}else{if(y.test(aa)){ac=d.fragment(aa.trim(),RegExp.$1,ab),aa=null}else{if(ab!==m){return F(ab).find(aa)}else{ac=d.qsa(h,aa)}}}}return d.Z(ac,aa)}}}};F=function(aa,ab){return d.init(aa,ab)};function l(ac,ab,aa){for(t in ab){if(aa&&(Y(ab[t])||B(ab[t]))){if(Y(ab[t])&&!Y(ac[t])){ac[t]={}}if(B(ab[t])&&!B(ac[t])){ac[t]=[]}l(ac[t],ab[t],aa)}else{if(ab[t]!==m){ac[t]=ab[t]}}}}F.extend=function(ac){var aa,ab=o.call(arguments,1);if(typeof ac=="boolean"){aa=ac;ac=ab.shift()}ab.forEach(function(ad){l(ac,ad,aa)});return ac};d.qsa=function(ab,aa){var ac;return(w(ab)&&x.test(aa))?((ac=ab.getElementById(RegExp.$1))?[ac]:[]):(ab.nodeType!==1&&ab.nodeType!==9)?[]:o.call(I.test(aa)?ab.getElementsByClassName(RegExp.$1):L.test(aa)?ab.getElementsByTagName(aa):ab.querySelectorAll(aa))};function A(ab,aa){return aa===m?F(ab):F(ab).filter(aa)}F.contains=function(aa,ab){return aa!==ab&&aa.contains(ab)};function r(ac,ab,aa,ad){return p(ab)?ab.call(ac,aa,ad):ab}function b(ab,aa,ac){ac==null?ab.removeAttribute(aa):ab.setAttribute(aa,ac)}function U(ac,ad){var aa=ac.className,ab=aa&&aa.baseVal!==m;if(ad===m){return ab?aa.baseVal:aa}ab?(aa.baseVal=ad):(ac.className=ad)}function j(ab){var aa;try{return ab?ab=="true"||(ab=="false"?false:ab=="null"?null:!isNaN(aa=Number(ab))?aa:/^[\[\{]/.test(ab)?F.parseJSON(ab):ab):ab}catch(ac){return ab}}F.type=Z;F.isFunction=p;F.isWindow=N;F.isArray=B;F.isPlainObject=Y;F.isEmptyObject=function(ab){var aa;for(aa in ab){return false}return true};F.inArray=function(ab,ac,aa){return O.indexOf.call(ac,ab,aa)};F.camelCase=V;F.trim=function(aa){return aa.trim()};F.uuid=0;F.support={};F.expr={};F.map=function(ae,af){var ad,aa=[],ac,ab;if(C(ae)){for(ac=0;ac<ae.length;ac++){ad=af(ae[ac],ac);if(ad!=null){aa.push(ad)}}}else{for(ab in ae){ad=af(ae[ab],ab);if(ad!=null){aa.push(ad)}}}return D(aa)};F.each=function(ac,ad){var ab,aa;if(C(ac)){for(ab=0;ab<ac.length;ab++){if(ad.call(ac[ab],ab,ac[ab])===false){return ac}}}else{for(aa in ac){if(ad.call(ac[aa],aa,ac[aa])===false){return ac}}}return ac};F.grep=function(aa,ab){return G.call(aa,ab)};if(window.JSON){F.parseJSON=JSON.parse}F.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(ab,aa){e["[object "+aa+"]"]=aa.toLowerCase()});F.fn={forEach:O.forEach,reduce:O.reduce,push:O.push,sort:O.sort,indexOf:O.indexOf,concat:O.concat,map:function(aa){return F(F.map(this,function(ac,ab){return aa.call(ac,ab,ac)}))},slice:function(){return F(o.apply(this,arguments))},ready:function(aa){if(v.test(h.readyState)){aa(F)}else{h.addEventListener("DOMContentLoaded",function(){aa(F)},false)}return this},get:function(aa){return aa===m?o.call(this):this[aa>=0?aa:aa+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){if(this.parentNode!=null){this.parentNode.removeChild(this)}})},each:function(aa){O.every.call(this,function(ac,ab){return aa.call(ac,ab,ac)!==false});return this},filter:function(aa){if(p(aa)){return this.not(this.not(aa))}return F(G.call(this,function(ab){return d.matches(ab,aa)}))},add:function(aa,ab){return F(R(this.concat(F(aa,ab))))},is:function(aa){return this.length>0&&d.matches(this[0],aa)},not:function(aa){var ab=[];if(p(aa)&&aa.call!==m){this.each(function(ad){if(!aa.call(this,ad)){ab.push(this)}})}else{var ac=typeof aa=="string"?this.filter(aa):(C(aa)&&p(aa.item))?o.call(aa):F(aa);this.forEach(function(ad){if(ac.indexOf(ad)<0){ab.push(ad)}})}return F(ab)},has:function(aa){return this.filter(function(){return K(aa)?F.contains(this,aa):F(this).find(aa).size()})},eq:function(aa){return aa===-1?this.slice(aa):this.slice(aa,+aa+1)},first:function(){var aa=this[0];return aa&&!K(aa)?aa:F(aa)},last:function(){var aa=this[this.length-1];return aa&&!K(aa)?aa:F(aa)},find:function(ab){var aa,ac=this;if(typeof ab=="object"){aa=F(ab).filter(function(){var ad=this;return O.some.call(ac,function(ae){return F.contains(ae,ad)})})}else{if(this.length==1){aa=F(d.qsa(this[0],ab))}else{aa=this.map(function(){return d.qsa(this,ab)})}}return aa},closest:function(aa,ab){var ac=this[0],ad=false;if(typeof aa=="object"){ad=F(aa)}while(ac&&!(ad?ad.indexOf(ac)>=0:d.matches(ac,aa))){ac=ac!==ab&&!w(ac)&&ac.parentNode}return F(ac)},parents:function(aa){var ac=[],ab=this;while(ab.length>0){ab=F.map(ab,function(ad){if((ad=ad.parentNode)&&!w(ad)&&ac.indexOf(ad)<0){ac.push(ad);return ad}})}return A(ac,aa)},parent:function(aa){return A(R(this.pluck("parentNode")),aa)},children:function(aa){return A(this.map(function(){return s(this)}),aa)},contents:function(){return this.map(function(){return o.call(this.childNodes)})},siblings:function(aa){return A(this.map(function(ab,ac){return G.call(s(ac.parentNode),function(ad){return ad!==ac})}),aa)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(aa){return F.map(this,function(ab){return ab[aa]})},show:function(){return this.each(function(){this.style.display=="none"&&(this.style.display=null);if(q(this,"").getPropertyValue("display")=="none"){this.style.display=T(this.nodeName)}})},replaceWith:function(aa){return this.before(aa).remove()},wrap:function(aa){var ab=p(aa);if(this[0]&&!ab){var ac=F(aa).get(0),ad=ac.parentNode||this.length>1}return this.each(function(ae){F(this).wrapAll(ab?aa.call(this,ae):ad?ac.cloneNode(true):ac)})},wrapAll:function(aa){if(this[0]){F(this[0]).before(aa=F(aa));var ab;while((ab=aa.children()).length){aa=ab.first()}F(aa).append(this)}return this},wrapInner:function(aa){var ab=p(aa);return this.each(function(ad){var ac=F(this),ae=ac.contents(),af=ab?aa.call(this,ad):aa;ae.length?ae.wrapAll(af):ac.append(af)})},unwrap:function(){this.parent().each(function(){F(this).replaceWith(F(this).children())});return this},clone:function(){return this.map(function(){return this.cloneNode(true)})},hide:function(){return this.css("display","none")},toggle:function(aa){return this.each(function(){var ab=F(this);(aa===m?ab.css("display")=="none":aa)?ab.show():ab.hide()})},prev:function(aa){return F(this.pluck("previousElementSibling")).filter(aa||"*")},next:function(aa){return F(this.pluck("nextElementSibling")).filter(aa||"*")},html:function(aa){return aa===m?(this.length>0?this[0].innerHTML:null):this.each(function(ab){var ac=this.innerHTML;F(this).empty().append(r(this,aa,ab,ac))})},text:function(aa){return aa===m?(this.length>0?this[0].textContent:null):this.each(function(){this.textContent=aa})},attr:function(ab,ac){var aa;return(typeof ab=="string"&&ac===m)?(this.length==0||this[0].nodeType!==1?m:(ab=="value"&&this[0].nodeName=="INPUT")?this.val():(!(aa=this[0].getAttribute(ab))&&ab in this[0])?this[0][ab]:aa):this.each(function(ad){if(this.nodeType!==1){return}if(K(ab)){for(t in ab){b(this,t,ab[t])}}else{b(this,ab,r(this,ac,ad,this.getAttribute(ab)))}})},removeAttr:function(aa){return this.each(function(){this.nodeType===1&&b(this,aa)})},prop:function(aa,ab){return(ab===m)?(this[0]&&this[0][aa]):this.each(function(ac){this[aa]=r(this,ab,ac,this[aa])})},data:function(aa,ac){var ab=this.attr("data-"+n(aa),ac);return ab!==null?j(ab):m},val:function(aa){return(aa===m)?(this[0]&&(this[0].multiple?F(this[0]).find("option").filter(function(ab){return this.selected}).pluck("value"):this[0].value)):this.each(function(ab){this.value=r(this,aa,ab,this.value)})},offset:function(ab){if(ab){return this.each(function(ad){var ag=F(this),af=r(this,ab,ad,ag.offset()),ac=ag.offsetParent().offset(),ae={top:af.top-ac.top,left:af.left-ac.left};if(ag.css("position")=="static"){ae.position="relative"}ag.css(ae)})}if(this.length==0){return null}var aa=this[0].getBoundingClientRect();return{left:aa.left+window.pageXOffset,top:aa.top+window.pageYOffset,width:Math.round(aa.width),height:Math.round(aa.height)}},css:function(ac,ab){if(arguments.length<2&&typeof ac=="string"){return this[0]&&(this[0].style[V(ac)]||q(this[0],"").getPropertyValue(ac))}var aa="";if(Z(ac)=="string"){if(!ab&&ab!==0){this.each(function(){this.style.removeProperty(n(ac))})}else{aa=n(ac)+":"+f(ac,ab)}}else{for(t in ac){if(!ac[t]&&ac[t]!==0){this.each(function(){this.style.removeProperty(n(t))})}else{aa+=n(t)+":"+f(t,ac[t])+";"}}}return this.each(function(){this.style.cssText+=";"+aa})},index:function(aa){return aa?this.indexOf(F(aa)[0]):this.parent().children().indexOf(this[0])},hasClass:function(aa){return O.some.call(this,function(ab){return this.test(U(ab))},S(aa))},addClass:function(aa){return this.each(function(ab){a=[];var ad=U(this),ac=r(this,aa,ab,ad);ac.split(/\s+/g).forEach(function(ae){if(!F(this).hasClass(ae)){a.push(ae)}},this);a.length&&U(this,ad+(ad?" ":"")+a.join(" "))})},removeClass:function(aa){return this.each(function(ab){if(aa===m){return U(this,"")}a=U(this);r(this,aa,ab,a).split(/\s+/g).forEach(function(ac){a=a.replace(S(ac)," ")});U(this,a.trim())})},toggleClass:function(ab,aa){return this.each(function(ac){var ae=F(this),ad=r(this,ab,ac,U(this));ad.split(/\s+/g).forEach(function(af){(aa===m?!ae.hasClass(af):aa)?ae.addClass(af):ae.removeClass(af)})})},scrollTop:function(){if(!this.length){return}return("scrollTop" in this[0])?this[0].scrollTop:this[0].scrollY},position:function(){if(!this.length){return}var ac=this[0],ab=this.offsetParent(),ad=this.offset(),aa=J.test(ab[0].nodeName)?{top:0,left:0}:ab.offset();ad.top-=parseFloat(F(ac).css("margin-top"))||0;ad.left-=parseFloat(F(ac).css("margin-left"))||0;aa.top+=parseFloat(F(ab[0]).css("border-top-width"))||0;aa.left+=parseFloat(F(ab[0]).css("border-left-width"))||0;return{top:ad.top-aa.top,left:ad.left-aa.left}},offsetParent:function(){return this.map(function(){var aa=this.offsetParent||h.body;while(aa&&!J.test(aa.nodeName)&&F(aa).css("position")=="static"){aa=aa.offsetParent}return aa})}};F.fn.detach=F.fn.remove;["width","height"].forEach(function(aa){F.fn[aa]=function(ac){var ae,ab=this[0],ad=aa.replace(/./,function(af){return af[0].toUpperCase()});if(ac===m){return N(ab)?ab["inner"+ad]:w(ab)?ab.documentElement["offset"+ad]:(ae=this.offset())&&ae[aa]}else{return this.each(function(af){ab=F(this);ab.css(aa,r(this,ac,af,ab[aa]()))})}}});function c(ac,aa){aa(ac);for(var ab in ac.childNodes){c(ac.childNodes[ab],aa)}}z.forEach(function(ac,ab){var aa=ab%2;F.fn[ac]=function(){var ad,ae=F.map(arguments,function(ah){ad=Z(ah);return ad=="object"||ad=="array"||ah==null?ah:d.fragment(ah)}),af,ag=this.length>1;if(ae.length<1){return this}return this.each(function(ah,ai){af=aa?ai:ai.parentNode;ai=ab==0?ai.nextSibling:ab==1?ai.firstChild:ab==2?ai:null;ae.forEach(function(aj){if(ag){aj=aj.cloneNode(true)}else{if(!af){return F(aj).remove()}}c(af.insertBefore(aj,ai),function(ak){if(ak.nodeName!=null&&ak.nodeName.toUpperCase()==="SCRIPT"&&(!ak.type||ak.type==="text/javascript")&&!ak.src){window["eval"].call(window,ak.innerHTML)}})})})};F.fn[aa?ac+"To":"insert"+(ab?"Before":"After")]=function(ad){F(ad)[ac](this);return this}});d.Z.prototype=F.fn;d.uniq=R;d.deserializeValue=j;F.zepto=d;return F})();window.Zepto=Zepto;"$" in window||(window.$=Zepto);(function(b){function a(d){var g=this.os={},i=this.browser={},p=d.match(/WebKit\/([\d.]+)/),f=d.match(/(Android)\s+([\d.]+)/),q=d.match(/(iPad).*OS\s([\d_]+)/),o=!q&&d.match(/(iPhone\sOS)\s([\d_]+)/),s=d.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),n=s&&d.match(/TouchPad/),m=d.match(/Kindle\/([\d.]+)/),l=d.match(/Silk\/([\d._]+)/),e=d.match(/(BlackBerry).*Version\/([\d.]+)/),k=d.match(/(BB10).*Version\/([\d.]+)/),c=d.match(/(RIM\sTablet\sOS)\s([\d.]+)/),r=d.match(/PlayBook/),h=d.match(/Chrome\/([\d.]+)/)||d.match(/CriOS\/([\d.]+)/),j=d.match(/Firefox\/([\d.]+)/);if(i.webkit=!!p){i.version=p[1]}if(f){g.android=true,g.version=f[2]}if(o){g.ios=g.iphone=true,g.version=o[2].replace(/_/g,".")}if(q){g.ios=g.ipad=true,g.version=q[2].replace(/_/g,".")}if(s){g.webos=true,g.version=s[2]}if(n){g.touchpad=true}if(e){g.blackberry=true,g.version=e[2]}if(k){g.bb10=true,g.version=k[2]}if(c){g.rimtabletos=true,g.version=c[2]}if(r){i.playbook=true}if(m){g.kindle=true,g.version=m[1]}if(l){i.silk=true,i.version=l[1]}if(!l&&g.android&&d.match(/Kindle Fire/)){i.silk=true}if(h){i.chrome=true,i.version=h[1]}if(j){i.firefox=true,i.version=j[1]}g.tablet=!!(q||r||(f&&!d.match(/Mobile/))||(j&&d.match(/Tablet/)));g.phone=!!(!g.tablet&&(f||o||s||e||k||(h&&d.match(/Android/))||(h&&d.match(/CriOS\/([\d.]+)/))||(j&&d.match(/Mobile/))))}a.call(b,navigator.userAgent);b.__detect=a})(Zepto);(function(c){var h=c.zepto.qsa,o={},e=1,k={},t={mouseenter:"mouseover",mouseleave:"mouseout"};k.click=k.mousedown=k.mouseup=k.mousemove="MouseEvents";function a(v){return v._zid||(v._zid=e++)}function i(w,y,x,v){y=n(y);if(y.ns){var z=s(y.ns)}return(o[a(w)]||[]).filter(function(A){return A&&(!y.e||A.e==y.e)&&(!y.ns||z.test(A.ns))&&(!x||a(A.fn)===a(x))&&(!v||A.sel==v)})}function n(v){var w=(""+v).split(".");return{e:w[0],ns:w.slice(1).sort().join(" ")}}function s(v){return new RegExp("(?:^| )"+v.replace(" "," .* ?")+"(?: |$)")}function r(v,x,w){if(c.type(v)!="string"){c.each(v,w)}else{v.split(/\s/).forEach(function(y){w(y,x)})}}function f(v,w){return v.del&&(v.e=="focus"||v.e=="blur")||!!w}function q(v){return t[v]||v}function l(z,y,A,w,v,x){var C=a(z),B=(o[C]||(o[C]=[]));r(y,A,function(F,E){var D=n(F);D.fn=E;D.sel=w;if(D.e in t){E=function(I){var H=I.relatedTarget;if(!H||(H!==this&&!c.contains(this,H))){return D.fn.apply(this,arguments)}}}D.del=v&&v(E,F);var G=D.del||E;D.proxy=function(I){var H=G.apply(z,[I].concat(I.data));if(H===false){I.preventDefault(),I.stopPropagation()}return H};D.i=B.length;B.push(D);z.addEventListener(q(D.e),D.proxy,f(D,x))})}function u(y,x,z,v,w){var A=a(y);r(x||"",z,function(C,B){i(y,C,B,v).forEach(function(D){delete o[A][D.i];y.removeEventListener(q(D.e),D.proxy,f(D,w))})})}c.event={add:l,remove:u};c.proxy=function(x,w){if(c.isFunction(x)){var v=function(){return x.apply(w,arguments)};v._zid=a(x);return v}else{if(typeof w=="string"){return c.proxy(x[w],x)}else{throw new TypeError("expected function")}}};c.fn.bind=function(v,w){return this.each(function(){l(this,v,w)})};c.fn.unbind=function(v,w){return this.each(function(){u(this,v,w)})};c.fn.one=function(v,w){return this.each(function(y,x){l(this,v,w,null,function(A,z){return function(){var B=A.apply(x,arguments);u(x,z,A);return B}})})};var p=function(){return true},g=function(){return false},d=/^([A-Z]|layer[XY]$)/,j={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function b(x){var w,v={originalEvent:x};for(w in x){if(!d.test(w)&&x[w]!==undefined){v[w]=x[w]}}c.each(j,function(z,y){v[z]=function(){this[y]=p;return x[z].apply(x,arguments)};v[y]=g});return v}function m(w){if(!("defaultPrevented" in w)){w.defaultPrevented=false;var v=w.preventDefault;w.preventDefault=function(){this.defaultPrevented=true;v.call(this)}}}c.fn.delegate=function(v,w,x){return this.each(function(z,y){l(y,w,x,v,function(A){return function(D){var B,C=c(D.target).closest(v,y).get(0);if(C){B=c.extend(b(D),{currentTarget:C,liveFired:y});return A.apply(C,[B].concat([].slice.call(arguments,1)))}}})})};c.fn.undelegate=function(v,w,x){return this.each(function(){u(this,w,x,v)})};c.fn.live=function(v,w){c(document.body).delegate(this.selector,v,w);return this};c.fn.die=function(v,w){c(document.body).undelegate(this.selector,v,w);return this};c.fn.on=function(w,v,x){return !v||c.isFunction(v)?this.bind(w,v||x):this.delegate(v,w,x)};c.fn.off=function(w,v,x){return !v||c.isFunction(v)?this.unbind(w,v||x):this.undelegate(v,w,x)};c.fn.trigger=function(v,w){if(typeof v=="string"||c.isPlainObject(v)){v=c.Event(v)}m(v);v.data=w;return this.each(function(){if("dispatchEvent" in this){this.dispatchEvent(v)}})};c.fn.triggerHandler=function(w,x){var y,v;this.each(function(A,z){y=b(typeof w=="string"?c.Event(w):w);y.data=x;y.target=z;c.each(i(z,w.type||w),function(B,C){v=C.proxy(y);if(y.isImmediatePropagationStopped()){return false}})});return v};("focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error").split(" ").forEach(function(v){c.fn[v]=function(w){return w?this.bind(v,w):this.trigger(v)}});["focus","blur"].forEach(function(v){c.fn[v]=function(w){if(w){this.bind(v,w)}else{this.each(function(){try{this[v]()}catch(x){}})}return this}});c.Event=function(y,x){if(typeof y!="string"){x=y,y=x.type}var z=document.createEvent(k[y]||"Events"),v=true;if(x){for(var w in x){(w=="bubbles")?(v=!!x[w]):(z[w]=x[w])}}z.initEvent(y,v,true,null,null,null,null,null,null,null,null,null,null,null,null);z.isDefaultPrevented=function(){return this.defaultPrevented};return z}})(Zepto);(function($){var jsonpID=0,document=window.document,key,name,rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,scriptTypeRE=/^(?:text|application)\/javascript/i,xmlTypeRE=/^(?:text|application)\/xml/i,jsonType="application/json",htmlType="text/html",blankRE=/^\s*$/;function triggerAndReturn(context,eventName,data){var event=$.Event(eventName);$(context).trigger(event,data);return !event.defaultPrevented}function triggerGlobal(settings,context,eventName,data){if(settings.global){return triggerAndReturn(context||document,eventName,data)}}$.active=0;function ajaxStart(settings){if(settings.global&&$.active++===0){triggerGlobal(settings,null,"ajaxStart")}}function ajaxStop(settings){if(settings.global&&!(--$.active)){triggerGlobal(settings,null,"ajaxStop")}}function ajaxBeforeSend(xhr,settings){var context=settings.context;if(settings.beforeSend.call(context,xhr,settings)===false||triggerGlobal(settings,context,"ajaxBeforeSend",[xhr,settings])===false){return false}triggerGlobal(settings,context,"ajaxSend",[xhr,settings])}function ajaxSuccess(data,xhr,settings){var context=settings.context,status="success";settings.success.call(context,data,status,xhr);triggerGlobal(settings,context,"ajaxSuccess",[xhr,settings,data]);ajaxComplete(status,xhr,settings)}function ajaxError(error,type,xhr,settings){var context=settings.context;settings.error.call(context,xhr,type,error);triggerGlobal(settings,context,"ajaxError",[xhr,settings,error]);ajaxComplete(type,xhr,settings)}function ajaxComplete(status,xhr,settings){var context=settings.context;settings.complete.call(context,xhr,status);triggerGlobal(settings,context,"ajaxComplete",[xhr,settings]);ajaxStop(settings)}function empty(){}$.ajaxJSONP=function(options){if(!("type" in options)){return $.ajax(options)}var callbackName="jsonp"+(++jsonpID),script=document.createElement("script"),cleanup=function(){clearTimeout(abortTimeout);$(script).remove();delete window[callbackName]},abort=function(type){cleanup();if(!type||type=="timeout"){window[callbackName]=empty}ajaxError(null,type||"abort",xhr,options)},xhr={abort:abort},abortTimeout;if(ajaxBeforeSend(xhr,options)===false){abort("abort");return false}window[callbackName]=function(data){cleanup();ajaxSuccess(data,xhr,options)};script.onerror=function(){abort("error")};script.src=options.url.replace(/=\?/,"="+callbackName);$("head").append(script);if(options.timeout>0){abortTimeout=setTimeout(function(){abort("timeout")},options.timeout)}return xhr};$.ajaxSettings={type:"GET",beforeSend:empty,success:empty,error:empty,complete:empty,context:null,global:true,xhr:function(){return new window.XMLHttpRequest()},accepts:{script:"text/javascript, application/javascript",json:jsonType,xml:"application/xml, text/xml",html:htmlType,text:"text/plain"},crossDomain:false,timeout:0,processData:true,cache:true,};function mimeToDataType(mime){if(mime){mime=mime.split(";",2)[0]}return mime&&(mime==htmlType?"html":mime==jsonType?"json":scriptTypeRE.test(mime)?"script":xmlTypeRE.test(mime)&&"xml")||"text"}function appendQuery(url,query){return(url+"&"+query).replace(/[&?]{1,2}/,"?")}function serializeData(options){if(options.processData&&options.data&&$.type(options.data)!="string"){options.data=$.param(options.data,options.traditional)}if(options.data&&(!options.type||options.type.toUpperCase()=="GET")){options.url=appendQuery(options.url,options.data)}}$.ajax=function(options){var settings=$.extend({},options||{});for(key in $.ajaxSettings){if(settings[key]===undefined){settings[key]=$.ajaxSettings[key]}}ajaxStart(settings);if(!settings.crossDomain){settings.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(settings.url)&&RegExp.$2!=window.location.host}if(!settings.url){settings.url=window.location.toString()}serializeData(settings);if(settings.cache===false){settings.url=appendQuery(settings.url,"_="+Date.now())}var dataType=settings.dataType,hasPlaceholder=/=\?/.test(settings.url);if(dataType=="jsonp"||hasPlaceholder){if(!hasPlaceholder){settings.url=appendQuery(settings.url,"callback=?")}return $.ajaxJSONP(settings)}var mime=settings.accepts[dataType],baseHeaders={},protocol=/^([\w-]+:)\/\//.test(settings.url)?RegExp.$1:window.location.protocol,xhr=settings.xhr(),abortTimeout;if(!settings.crossDomain){baseHeaders["X-Requested-With"]="XMLHttpRequest"}if(mime){baseHeaders.Accept=mime;if(mime.indexOf(",")>-1){mime=mime.split(",",2)[0]}xhr.overrideMimeType&&xhr.overrideMimeType(mime)}if(settings.contentType||(settings.contentType!==false&&settings.data&&settings.type.toUpperCase()!="GET")){baseHeaders["Content-Type"]=(settings.contentType||"application/x-www-form-urlencoded")}settings.headers=$.extend(baseHeaders,settings.headers||{});xhr.onreadystatechange=function(){if(xhr.readyState==4){xhr.onreadystatechange=empty;clearTimeout(abortTimeout);var result,error=false;if((xhr.status>=200&&xhr.status<300)||xhr.status==304||(xhr.status==0&&protocol=="file:")){dataType=dataType||mimeToDataType(xhr.getResponseHeader("content-type"));result=xhr.responseText;try{if(dataType=="script"){(1,eval)(result)}else{if(dataType=="xml"){result=xhr.responseXML}else{if(dataType=="json"){result=blankRE.test(result)?null:$.parseJSON(result)}}}}catch(e){error=e}if(error){ajaxError(error,"parsererror",xhr,settings)}else{ajaxSuccess(result,xhr,settings)}}else{ajaxError(null,xhr.status?"error":"abort",xhr,settings)}}};var async="async" in settings?settings.async:true;xhr.open(settings.type,settings.url,async);for(name in settings.headers){xhr.setRequestHeader(name,settings.headers[name])}if(ajaxBeforeSend(xhr,settings)===false){xhr.abort();return false}if(settings.timeout>0){abortTimeout=setTimeout(function(){xhr.onreadystatechange=empty;xhr.abort();ajaxError(null,"timeout",xhr,settings)},settings.timeout)}xhr.send(settings.data?settings.data:null);return xhr};function parseArguments(url,data,success,dataType){var hasData=!$.isFunction(data);return{url:url,data:hasData?data:undefined,success:!hasData?data:$.isFunction(success)?success:undefined,dataType:hasData?dataType||success:success}}$.get=function(url,data,success,dataType){return $.ajax(parseArguments.apply(null,arguments))};$.post=function(url,data,success,dataType){var options=parseArguments.apply(null,arguments);options.type="POST";return $.ajax(options)};$.getJSON=function(url,data,success){var options=parseArguments.apply(null,arguments);options.dataType="json";return $.ajax(options)};$.fn.load=function(url,data,success){if(!this.length){return this}var self=this,parts=url.split(/\s/),selector,options=parseArguments(url,data,success),callback=options.success;if(parts.length>1){options.url=parts[0],selector=parts[1]}options.success=function(response){self.html(selector?$("<div>").html(response.replace(rscript,"")).find(selector):response);callback&&callback.apply(self,arguments)};$.ajax(options);return this};var escape=encodeURIComponent;function serialize(params,obj,traditional,scope){var type,array=$.isArray(obj);$.each(obj,function(key,value){type=$.type(value);if(scope){key=traditional?scope:scope+"["+(array?"":key)+"]"}if(!scope&&array){params.add(value.name,value.value)}else{if(type=="array"||(!traditional&&type=="object")){serialize(params,value,traditional,key)}else{params.add(key,value)}}})}$.param=function(obj,traditional){var params=[];params.add=function(k,v){this.push(escape(k)+"="+escape(v))};serialize(params,obj,traditional);return params.join("&").replace(/%20/g,"+")}})(Zepto);(function(a){a.fn.serializeArray=function(){var b=[],c;a(Array.prototype.slice.call(this.get(0).elements)).each(function(){c=a(this);var d=c.attr("type");if(this.nodeName.toLowerCase()!="fieldset"&&!this.disabled&&d!="submit"&&d!="reset"&&d!="button"&&((d!="radio"&&d!="checkbox")||this.checked)){b.push({name:c.attr("name"),value:c.val()})}});return b};a.fn.serialize=function(){var b=[];this.serializeArray().forEach(function(c){b.push(encodeURIComponent(c.name)+"="+encodeURIComponent(c.value))});return b.join("&")};a.fn.submit=function(c){if(c){this.bind("submit",c)}else{if(this.length){var b=a.Event("submit");this.eq(0).trigger(b);if(!b.defaultPrevented){this.get(0).submit()}}}return this}})(Zepto);(function(d,e){var p="",u,f,n,o={Webkit:"webkit",Moz:"",O:"o",ms:"MS"},l=window.document,a=l.createElement("div"),m=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,j,q,i,k,h,t,s,r={};function b(v){return c(v.replace(/([a-z])([A-Z])/,"$1-$2"))}function c(v){return v.toLowerCase()}function g(v){return u?u+v:c(v)}d.each(o,function(w,v){if(a.style[w+"TransitionProperty"]!==e){p="-"+c(w)+"-";u=v;return false}});j=p+"transform";r[q=p+"transition-property"]=r[i=p+"transition-duration"]=r[k=p+"transition-timing-function"]=r[h=p+"animation-name"]=r[t=p+"animation-duration"]=r[s=p+"animation-timing-function"]="";d.fx={off:(u===e&&a.style.transitionProperty===e),speeds:{_default:400,fast:200,slow:600},cssPrefix:p,transitionEnd:g("TransitionEnd"),animationEnd:g("AnimationEnd")};d.fn.animate=function(v,w,x,y){if(d.isPlainObject(w)){x=w.easing,y=w.complete,w=w.duration}if(w){w=(typeof w=="number"?w:(d.fx.speeds[w]||d.fx.speeds._default))/1000}return this.anim(v,w,x,y)};d.fn.anim=function(B,x,w,D){var C,z={},F,A="",y=this,v,E=d.fx.transitionEnd;if(x===e){x=0.4}if(d.fx.off){x=0}if(typeof B=="string"){z[h]=B;z[t]=x+"s";z[s]=(w||"linear");E=d.fx.animationEnd}else{F=[];for(C in B){if(m.test(C)){A+=C+"("+B[C]+") "}else{z[C]=B[C],F.push(b(C))}}if(A){z[j]=A,F.push(j)}if(x>0&&typeof B==="object"){z[q]=F.join(", ");z[i]=x+"s";z[k]=(w||"linear")}}v=function(G){if(typeof G!=="undefined"){if(G.target!==G.currentTarget){return}d(G.target).unbind(E,v)}d(this).css(r);D&&D.call(this)};if(x>0){this.bind(E,v)}this.size()&&this.get(0).clientLeft;this.css(z);if(x<=0){setTimeout(function(){y.each(function(){v.call(this)})},0)}return this};a=null})(Zepto);(function(g){var e=g.zepto,j=e.qsa,h=e.matches;function f(k){k=g(k);return !!(k.width()||k.height())&&k.css("display")!=="none"}var c=g.expr[":"]={visible:function(){if(f(this)){return this}},hidden:function(){if(!f(this)){return this}},selected:function(){if(this.selected){return this}},checked:function(){if(this.checked){return this}},parent:function(){return this.parentNode},first:function(k){if(k===0){return this}},last:function(k,l){if(k===l.length-1){return this}},eq:function(k,l,m){if(k===m){return this}},contains:function(k,l,m){if(g(this).text().indexOf(m)>-1){return this}},has:function(k,l,m){if(e.qsa(this,m).length){return this}}};var b=new RegExp("(.*):(\\w+)(?:\\(([^)]+)\\))?$\\s*"),d=/^\s*>/,i="Zepto"+(+new Date());function a(p,o){p=p.replace(/=#\]/g,'="#"]');var n,k,m=b.exec(p);if(m&&m[2] in c){n=c[m[2]],k=m[3];p=m[1];if(k){var l=Number(k);if(isNaN(l)){k=k.replace(/^["']|["']$/g,"")}else{k=l}}}return o(p,n,k)}e.qsa=function(l,k){return a(k,function(q,o,m){try{var p;if(!q&&o){q="*"}else{if(d.test(q)){p=g(l).addClass(i),q="."+i+" "+q}}var n=j(l,q)}catch(r){console.error("error performing selector: %o",k);throw r}finally{if(p){p.removeClass(i)}}return !o?n:e.uniq(g.map(n,function(t,s){return o.call(t,s,n,m)}))})};e.matches=function(l,k){return a(k,function(o,n,m){return(!o||h(l,o))&&(!n||n.call(l,null,m)===l)})}})(Zepto);(function(d){d.expr={":":{}};d.support={};d.fn.clone=function(){var e=d();this.each(function(){e.push(this.cloneNode(true))});return e};["Left","Top"].forEach(function(f,h){var j="scroll"+f;function e(i){return i&&typeof i==="object"&&"setInterval" in i}function g(i){return e(i)?i:i.nodeType===9?i.defaultView||i.parentWindow:false}d.fn[j]=function(l){var i,k;if(l===undefined){i=this[0];if(!i){return null}k=g(i);return k?("pageXOffset" in k)?k[h?"pageYOffset":"pageXOffset"]:k.document.documentElement[j]||k.document.body[j]:i[j]}this.each(function(){k=g(this);if(k){var n=!h?l:d(k).scrollLeft();var m=h?l:d(k).scrollTop();k.scrollTo(n,m)}else{this[j]=l}})}});["width","height"].forEach(function(f){var g,e=f.replace(/./,function(h){return h[0].toUpperCase()});d.fn["outer"+e]=function(k){var j=this;if(j){var h=j[f]();var i={width:["left","right"],height:["top","bottom"]};i[f].forEach(function(l){if(k){h+=parseInt(j.css("margin-"+l),10)}});return h}else{return null}};d.fn["inner"+e]=function(k){var j=this;if(j){var h=j[f]();var i={width:["left","right"],height:["top","bottom"]};i[f].forEach(function(l){h+=parseInt(j.css("padding-"+l),10);if(k){h+=parseInt(j.css("margin-"+l),10)}});return h}else{return null}}});d.proxy=function(i,h){if(typeof h==="string"){var g=i[h];h=i;i=g}if(!d.isFunction(i)){return undefined}var e=Array.prototype.slice.call(arguments,2),f=function(){return i.apply(h,e.concat(Array.prototype.slice.call(arguments)))};f.guid=i.guid=i.guid||f.guid||d.guid++;return f};var c=String.prototype.trim;d.trim=function(f,e){if(!e&&c){return c.call(f)}e=defaultToWhiteSpace(e);return f.replace(new RegExp("^["+e+"]+|["+e+"]+$","g"),"")};var b=/^t(?:able|d|h)$/i,a=/^(?:body|html)$/i;d.fn.position=function(){if(!this[0]){return null}var g=this[0],f=this.offsetParent(),h=this.offset(),e=a.test(f[0].nodeName)?{top:0,left:0}:f.offset();h.top-=parseFloat(d(g).css("margin-top"))||0;h.left-=parseFloat(d(g).css("margin-left"))||0;e.top+=parseFloat(d(f[0]).css("border-top-width"))||0;e.left+=parseFloat(d(f[0]).css("border-left-width"))||0;return{top:h.top-e.top,left:h.left-e.left}};d.fn.offsetParent=function(){var e=d();this.each(function(){var f=this.offsetParent||document.body;while(f&&(!a.test(f.nodeName)&&d(f).css("position")==="static")){f=f.offsetParent}e.push(f)});return e};Event.prototype.isDefaultPrevented=function(){return this.defaultPrevented}})(Zepto);var utils=(function(){return{escapeRegExChars:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},createNode:function(a){var b=document.createElement("div");b.innerHTML=a;return b.firstChild}}}()),keys={ESC:27,TAB:9,RETURN:13,LEFT:37,UP:38,RIGHT:39,DOWN:40};function Autocomplete(b,a){var d=function(){},c=this,e={autoSelectFirst:false,appendTo:"body",serviceUrl:null,lookup:null,onSelect:null,width:"auto",minChars:1,maxHeight:300,deferRequestBy:0,params:{},formatResult:Autocomplete.formatResult,delimiter:null,zIndex:9999,type:"GET",noCache:false,onSearchStart:d,onSearchComplete:d,containerClass:"autocomplete-suggestions",tabDisabled:false,dataType:"text",currentRequest:null,lookupFilter:function(g,f,h){return g.value.toLowerCase().indexOf(h)!==-1},paramName:"query",transformResult:function(f){return typeof f==="string"?Zepto.parseJSON(f):f}};c.element=b;c.el=Zepto(b);c.suggestions=[];c.badQueries=[];c.selectedIndex=-1;c.currentValue=c.element.value;c.intervalId=0;c.cachedResponse=[];c.onChangeInterval=null;c.onChange=null;c.isLocal=false;c.suggestionsContainer=null;c.options=Zepto.extend({},e,a);c.classes={selected:"autocomplete-selected",suggestion:"autocomplete-suggestion"};c.hint=null;c.hintValue="";c.selection=null;c.initialize();c.setOptions(a)}Autocomplete.utils=utils;Zepto.Autocomplete=Autocomplete;Autocomplete.formatResult=function(a,b){var c="("+utils.escapeRegExChars(b)+")";return a.value.replace(new RegExp(c,"gi"),"<strong>$1</strong>")};Autocomplete.prototype={killerFn:null,initialize:function(){var d=this,e="."+d.classes.suggestion,c=d.classes.selected,b=d.options,a;d.element.setAttribute("autocomplete","off");d.killerFn=function(f){if(Zepto(f.target).closest("."+d.options.containerClass).length===0){d.killSuggestions();d.disableKillerFn()}};d.suggestionsContainer=Autocomplete.utils.createNode('<div class="'+b.containerClass+'" style="position: absolute; display: none;"></div>');a=Zepto(d.suggestionsContainer);a.appendTo(b.appendTo);if(b.width!=="auto"){a.width(b.width)}a.on("mouseover.autocomplete",e,function(){d.activate(Zepto(this).data("index"))});a.on("mouseout.autocomplete",function(){d.selectedIndex=-1;a.children("."+c).removeClass(c)});a.on("click.autocomplete",e,function(){d.select(Zepto(this).data("index"))});d.fixPosition();d.fixPositionCapture=function(){if(d.visible){d.fixPosition()}};Zepto(window).on("resize",d.fixPositionCapture);d.el.on("keydown.autocomplete",function(f){d.onKeyPress(f)});d.el.on("keyup.autocomplete",function(f){d.onKeyUp(f)});d.el.on("blur.autocomplete",function(){d.onBlur()});d.el.on("focus.autocomplete",function(){d.fixPosition()});d.el.on("change.autocomplete",function(f){d.onKeyUp(f)})},onBlur:function(){this.enableKillerFn()},setOptions:function(c){var b=this,a=b.options;Zepto.extend(a,c);b.isLocal=Zepto.isArray(a.lookup);if(b.isLocal){a.lookup=b.verifySuggestionsFormat(a.lookup)}Zepto(b.suggestionsContainer).css({"max-height":a.maxHeight+"px",width:a.width+"px","z-index":a.zIndex})},clearCache:function(){this.cachedResponse=[];this.badQueries=[]},clear:function(){this.clearCache();this.currentValue="";this.suggestions=[]},disable:function(){this.disabled=true},enable:function(){this.disabled=false},fixPosition:function(){var a=this,b;if(a.options.appendTo!=="body"){return}b=a.el.offset();Zepto(a.suggestionsContainer).css({top:(b.top+a.el.outerHeight())+"px",left:b.left+"px"})},enableKillerFn:function(){var a=this;Zepto(document).on("click.autocomplete",a.killerFn)},disableKillerFn:function(){var a=this;Zepto(document).off("click.autocomplete",a.killerFn)},killSuggestions:function(){var a=this;a.stopKillSuggestions();a.intervalId=window.setInterval(function(){a.hide();a.stopKillSuggestions()},300)},stopKillSuggestions:function(){window.clearInterval(this.intervalId)},isCursorAtEnd:function(){var c=this,b=c.el.val().length,d=c.element.selectionStart,a;if(typeof d==="number"){return d===b}if(document.selection){a=document.selection.createRange();a.moveStart("character",-b);return b===a.text.length}return true},onKeyPress:function(b){var a=this;if(!a.disabled&&!a.visible&&b.which===keys.DOWN&&a.currentValue){a.suggest();return}if(a.disabled||!a.visible){return}switch(b.which){case keys.ESC:a.el.val(a.currentValue);a.hide();break;case keys.RIGHT:if(a.hint&&a.options.onHint&&a.isCursorAtEnd()){a.selectHint();break}return;case keys.TAB:if(a.hint&&a.options.onHint){a.selectHint();return}case keys.RETURN:if(a.selectedIndex===-1){a.hide();return}a.select(a.selectedIndex);if(b.which===keys.TAB&&a.options.tabDisabled===false){return}break;case keys.UP:a.moveUp();break;case keys.DOWN:a.moveDown();break;default:return}b.stopImmediatePropagation();b.preventDefault()},onKeyUp:function(b){var a=this;if(a.disabled){return}switch(b.which){case keys.UP:case keys.DOWN:return}clearInterval(a.onChangeInterval);if(a.currentValue!==a.el.val()){a.findBestHint();if(a.options.deferRequestBy>0){a.onChangeInterval=setInterval(function(){a.onValueChange()},a.options.deferRequestBy)}else{a.onValueChange()}}},onValueChange:function(){var a=this,b;if(a.selection){a.selection=null;(a.options.onInvalidateSelection||function(){})()}clearInterval(a.onChangeInterval);a.currentValue=a.el.val();b=a.getQuery(a.currentValue);a.selectedIndex=-1;if(b.length<a.options.minChars){a.hide()}else{a.getSuggestions(b)}},getQuery:function(b){var a=this.options.delimiter,c;if(!a){return Zepto.trim(b)}c=b.split(a);return Zepto.trim(c[c.length-1])},getSuggestionsLocal:function(d){var c=this,a=d.toLowerCase(),b=c.options.lookupFilter;return{suggestions:Zepto.grep(c.options.lookup,function(e){return b(e,d,a)})}},getSuggestions:function(d){var a,c=this,b=c.options,e=b.serviceUrl;a=c.isLocal?c.getSuggestionsLocal(d):c.cachedResponse[d];if(a&&Zepto.isArray(a.suggestions)){c.suggestions=a.suggestions;c.suggest()}else{if(!c.isBadQuery(d)){b.params[b.paramName]=d;if(b.onSearchStart.call(c.element,b.params)===false){return}if(Zepto.isFunction(b.serviceUrl)){e=b.serviceUrl.call(c.element,d)}if(this.currentRequest!=null){this.currentRequest.abort()}this.currentRequest=Zepto.ajax({url:e,data:b.ignoreParams?null:b.params,type:b.type,dataType:b.dataType,success:function(g,f,h){c.processResponse(g,d);b.onSearchComplete.call(c.element,d)}})}}},isBadQuery:function(b){var c=this.badQueries,a=c.length;while(a--){if(b.indexOf(c[a])===0){return true}}return false},hide:function(){var a=this;a.visible=false;a.selectedIndex=-1;Zepto(a.suggestionsContainer).hide();a.signalHint(null)},suggest:function(){if(this.suggestions.length===0){this.hide();return}var f=this,h=f.options.formatResult,g=f.getQuery(f.currentValue),e=f.classes.suggestion,c=f.classes.selected,a=Zepto(f.suggestionsContainer),b="",d;Zepto.each(f.suggestions,function(k,j){b+='<div class="'+e+'" data-index="'+k+'">'+h(j,g)+"</div>"});if(f.options.width==="auto"){d=f.el.outerWidth()-2;a.width(d>0?d:300)}a.html(b).show();f.visible=true;if(f.options.autoSelectFirst){f.selectedIndex=0;a.children().first().addClass(c)}f.findBestHint()},findBestHint:function(){var b=this,c=b.el.val().toLowerCase(),a=null;if(!c){return}Zepto.each(b.suggestions,function(e,d){var f=d.value.toLowerCase().indexOf(c)===0;if(f){a=d}return !f});b.signalHint(a)},signalHint:function(b){var a="",c=this;if(b){a=c.currentValue+b.value.substr(c.currentValue.length)}if(c.hintValue!==a){c.hintValue=a;c.hint=b;(this.options.onHint||function(){})(a)}},verifySuggestionsFormat:function(a){if(a.length&&typeof a[0]==="string"){return Zepto.map(a,function(b){return{value:b,data:null}})}return a},processResponse:function(c,b){var e=this,d=e.options,a=d.transformResult(c,b);a.suggestions=e.verifySuggestionsFormat(a.suggestions);if(!d.noCache){e.cachedResponse[a[d.paramName]]=a;if(a.suggestions.length===0){e.badQueries.push(a[d.paramName])}}if(b===e.getQuery(e.currentValue)){e.suggestions=a.suggestions;d.suggest(e)}},activate:function(b){var e=this,f,d=e.classes.selected,a=Zepto(e.suggestionsContainer),c=a.children();a.children("."+d).removeClass(d);e.selectedIndex=b;if(e.selectedIndex!==-1&&c.length>e.selectedIndex){f=c.get(e.selectedIndex);Zepto(f).addClass(d);return f}return null},selectHint:function(){var b=this,a=Zepto.inArray(b.hint,b.suggestions);b.select(a)},select:function(a){var b=this;b.hide();b.onSelect(a)},moveUp:function(){var a=this;if(a.selectedIndex===-1){return}if(a.selectedIndex===0){Zepto(a.suggestionsContainer).children().first().removeClass(a.classes.selected);a.selectedIndex=-1;a.el.val(a.currentValue);a.findBestHint();return}a.adjustScroll(a.selectedIndex-1)},moveDown:function(){var a=this;if(a.selectedIndex===(a.suggestions.length-1)){return}a.adjustScroll(a.selectedIndex+1)},adjustScroll:function(a){var c=this,g=c.activate(a),b,e,f,d=25;if(!g){return}b=g.offsetTop;e=Zepto(c.suggestionsContainer).scrollTop();f=e+c.options.maxHeight-d;if(b<e){Zepto(c.suggestionsContainer).scrollTop(b)}else{if(b>f){Zepto(c.suggestionsContainer).scrollTop(b-c.options.maxHeight+d)}}c.el.val(c.getValue(c.suggestions[a].value));c.signalHint(null);if($.isFunction(c.options.adjustScroll)){c.options.adjustScroll(g,c.suggestions[a])}},onSelect:function(b){var d=this,c=d.options.onSelect,a=d.suggestions[b];d.currentValue=d.getValue(a.value);d.el.val(d.currentValue);d.signalHint(null);d.suggestions=[];d.selection=a;if(Zepto.isFunction(c)){c.call(d.element,a)}},getValue:function(d){var c=this,a=c.options.delimiter,b,e;if(!a){return d}b=c.currentValue;e=b.split(a);if(e.length===1){return d}return b.substr(0,b.length-e[e.length-1].length)+d},dispose:function(){var a=this;a.el.off(".autocomplete").removeData("autocomplete");a.disableKillerFn();Zepto(window).off("resize",a.fixPositionCapture);Zepto(a.suggestionsContainer).remove()}};Zepto.fn.autocomplete=function(b,a){var c="autocomplete";if(arguments.length===0){return this.first().data(c)}return this.each(function(){var e=Zepto(this),d=e.data(c);if(typeof b==="string"){if(d&&typeof d[b]==="function"){d[b](a)}}else{if(d&&d.dispose){d.dispose()}d=new Autocomplete(this,b);e.data(c,d)}})};var htmlFake="";htmlFake+='<div id="global-header">';htmlFake+='   <div class="gbltf">';htmlFake+='      <div class="head-global sdw clear">';htmlFake+='         <div class="fl">';htmlFake+='            <a href="<%= data.urls.portal_produk %>"><span class="logo">SIAP</span></a>';htmlFake+="            <a href=\"javascript:;\" class=\"js-komunitas-menu <%= ( data.is_komunitas ? 'selected active' : '')%>\"><span>Komunitas</span></a>";htmlFake+="            <a href=\"javascript:;\" class=\"js-sekolah-menu <%= ( data.is_sekolah ? 'selected active' : '')%>\"><span>Sekolah</span></a>";htmlFake+="            <a href=\"javascript:;\" class=\"js-dinas-menu <%= ( data.is_dinas ? 'selected active' : '')%>\"><span>Departemen</span></a>";htmlFake+="            <a href=\"<%= data.urls.belajar %>\" class=\"<%= ( data.is_belajar ? 'selected active' : '')%>\"><span>Pustaka</span></a>";htmlFake+="            <a href=\"javascript:;;\" class=\"js-psb-menu <%= ( data.is_portal_psb ? 'selected active' : '')%>\"><span>PPDB</span></a>";htmlFake+="            <a href=\"<%= data.urls.padamu_publik %>\" class=\"<%= ( data.is_padamu ? 'selected active' : '')%>\"><span>Padamu Negeri</span></a>";htmlFake+="";htmlFake+='            <div class="tips-modal js-komunitas-submenu submenu">';htmlFake+='               <div class="menu">';htmlFake+="                  <ul>";htmlFake+='                     <li><a href="<%= (data.urls.portal_komunitas) %>">Portal</a></li>';htmlFake+='                     <li><a href="<%= (data.urls.dir_user_komunitas) %>">Direktori Anggota</a></li>';htmlFake+='                     <li><a href="<%= (data.urls.dir_group_komunitas) %>">Direktori Komunitas</a></li> <% if (data.enable_wacana) { %>';htmlFake+='                     <li><a href="<%= (data.urls.wacana) %>">Wacana</a></li> <% } %>';htmlFake+="                  </ul>";htmlFake+="               </div>";htmlFake+="            </div>";htmlFake+="";htmlFake+='            <div class="tips-modal js-sekolah-submenu submenu">';htmlFake+='               <div class="menu">';htmlFake+="                  <ul>";htmlFake+='                     <li><a href="<%= (data.urls.portal_sekolah) %>">Portal</a></li>';htmlFake+='                     <li><a href="<%= (data.urls.portal_web_sekolah) %>">Web Sekolah</a></li>';htmlFake+="                  </ul>";htmlFake+="               </div>";htmlFake+="            </div>";htmlFake+="";htmlFake+='            <div class="tips-modal js-dinas-submenu submenu">';htmlFake+='               <div class="menu">';htmlFake+="                  <ul>";htmlFake+='                     <li><a href="<%= (data.urls.portal_dinas) %>">Portal Departemen</a></li>';htmlFake+='                     <li><a href="<%= (data.urls.portal_web_dinas) %>">Web Departemen</a></li>';htmlFake+="                  </ul>";htmlFake+="               </div>";htmlFake+="            </div>";htmlFake+="";htmlFake+='            <div class="tips-modal js-psb-submenu submenu">';htmlFake+='               <div class="menu">';htmlFake+="                  <ul>";htmlFake+='                     <li><a href="<%= (data.urls.portal_psb) %>">Portal</a></li>';htmlFake+="                  </ul>";htmlFake+="               </div>";htmlFake+="            </div>";htmlFake+="";htmlFake+="         </div>";htmlFake+=" <% if (!data.is_logged) { %>";htmlFake+='         <div class="fr">';htmlFake+="            <a href=\"<%= (siapGlobalHeaderVar.loginUrl != '' ? siapGlobalHeaderVar.loginUrl : data.urls.login + (window.location.href)) %>\"><span>mendaftar / login</span></a>";htmlFake+="         </div>";htmlFake+=" <% } %>";htmlFake+="      </div>";htmlFake+=" <% if (data.is_logged) { %>";htmlFake+="   <!-- Dashboard Toolbar -->";htmlFake+='   <div class="user-dash clear">';htmlFake+="      <div class=\"<%= typeof siapGlobalHeaderVar.wrap != 'undefined' ? (siapGlobalHeaderVar.wrap == 1 ? 'wrap' : '') : '' %>\">";htmlFake+='         <div class="fr">';htmlFake+='            <a title="Aliran" class="icd icd-dash tips" href="<%= data.urls.portal_komunitas %>/dashboard"><i></i></a>';htmlFake+='            <a title="Komunitasku" class="icd icd-grup  tips" href="<%= data.urls.portal_komunitas %>/manage/groups"><i></i></a>';htmlFake+='            <a title="Koleksiku" class="icd icd-cab  tips" href="<%= data.urls.portal_komunitas %>/manage/collection"><i></i></a>';htmlFake+='            <a class="icd icd-addr  tips" href="<%= data.urls.portal_komunitas %>/friends" title="Daftar Kontak"><i></i></a>';htmlFake+="         </div>";htmlFake+="      </div>";htmlFake+="      <div>";htmlFake+='         <a href="#" class="icd icd-help  tips-r" style="display:none" title="Pedoman Pengguna"><i></i></a>';htmlFake+='         <a title="Pusat Layanan SIAP" class="icd icd-box  tips" href="<%= data.urls.akun %>"><i></i></a>';htmlFake+='         <a title="Pengaturan Akun" class="icd icd-gear  tips" href="<%= data.urls.akun + \'/profil/#!/info/\' %>"><i></i></a>';htmlFake+='         <a title="keluar" class="icd tips tips-ls" href="<%= (data.urls.header_logout + \'?domain=\' + encodeURIComponent((location.protocol + \'//\' + location.hostname + (location.port && \':\' + location.port))) + \'&url=\' + encodeURIComponent((siapGlobalHeaderVar.logoutUrl ? siapGlobalHeaderVar.logoutUrl : data.urls.logout)) ) %>"><span style="padding: 3px 4px" class="ic act-exit"></span></a>';htmlFake+="      </div>";htmlFake+="   </div>";htmlFake+=" <% } else {%>";htmlFake+=" <% } %>";htmlFake+="";htmlFake+="   </div>";htmlFake+="";htmlFake+="</div>";var htmlNoLogin="";htmlNoLogin+='<div id="global-header">';htmlNoLogin+='   <div class="gbltf">';htmlNoLogin+='      <div class="head-global sdw clear">';htmlNoLogin+='         <div class="fl">';htmlNoLogin+='            <a href="<%= data.urls.portal_produk %>"><span class="logo">SIAP</span></a>';htmlNoLogin+="            <a href=\"javascript:;\" class=\"js-komunitas-menu <%= ( data.is_komunitas ? 'selected active' : '')%>\"><span>Komunitas</span></a>";htmlNoLogin+="            <a href=\"javascript:;\" class=\"js-sekolah-menu <%= ( data.is_sekolah ? 'selected active' : '')%>\"><span>Sekolah</span></a>";htmlNoLogin+="            <a href=\"javascript:;\" class=\"js-dinas-menu <%= ( data.is_dinas ? 'selected active' : '')%>\"><span>Departemen</span></a>";htmlNoLogin+="            <a href=\"<%= data.urls.belajar %>\" class=\"<%= ( data.is_belajar ? 'selected active' : '')%>\"><span>Pustaka</span></a>";htmlNoLogin+="            <a href=\"javascript:;;\" class=\"js-psb-menu <%= ( data.is_portal_psb ? 'selected active' : '')%>\"><span>PPDB</span></a>";htmlNoLogin+="            <a href=\"<%= data.urls.padamu_publik %>\" class=\"<%= ( data.is_padamu ? 'selected active' : '')%>\"><span>Padamu Negeri</span></a>";htmlNoLogin+="";htmlNoLogin+='            <div class="tips-modal js-komunitas-submenu submenu">';htmlNoLogin+='               <div class="menu">';htmlNoLogin+="                  <ul>";htmlNoLogin+='                     <li><a href="<%= (data.urls.portal_komunitas) %>">Portal</a></li>';htmlNoLogin+='                     <li><a href="<%= (data.urls.dir_user_komunitas) %>">Direktori Anggota</a></li>';htmlNoLogin+='                     <li><a href="<%= (data.urls.dir_group_komunitas) %>">Direktori Komunitas</a></li> <% if (data.enable_wacana) { %>';htmlNoLogin+='                     <li><a href="<%= (data.urls.wacana) %>">Wacana</a></li> <% } %>';htmlNoLogin+="                  </ul>";htmlNoLogin+="               </div>";htmlNoLogin+="            </div>";htmlNoLogin+="";htmlNoLogin+='            <div class="tips-modal js-sekolah-submenu submenu">';htmlNoLogin+='               <div class="menu">';htmlNoLogin+="                  <ul>";htmlNoLogin+='                     <li><a href="<%= (data.urls.portal_sekolah) %>">Portal</a></li>';htmlNoLogin+='                     <li><a href="<%= (data.urls.portal_web_sekolah) %>">Web Sekolah</a></li>';htmlNoLogin+="                  </ul>";htmlNoLogin+="               </div>";htmlNoLogin+="            </div>";htmlNoLogin+="";htmlNoLogin+='            <div class="tips-modal js-dinas-submenu submenu">';htmlNoLogin+='               <div class="menu">';htmlNoLogin+="                  <ul>";htmlNoLogin+='                     <li><a href="<%= (data.urls.portal_dinas) %>">Portal Departemen</a></li>';htmlNoLogin+='                     <li><a href="<%= (data.urls.portal_web_dinas) %>">Web Departemen</a></li>';htmlNoLogin+="                  </ul>";htmlNoLogin+="               </div>";htmlNoLogin+="            </div>";htmlNoLogin+="";htmlNoLogin+='            <div class="tips-modal js-psb-submenu submenu">';htmlNoLogin+='               <div class="menu">';htmlNoLogin+="                  <ul>";htmlNoLogin+='                     <li><a href="<%= (data.urls.portal_psb) %>">Portal</a></li>';htmlNoLogin+="                  </ul>";htmlNoLogin+="               </div>";htmlNoLogin+="            </div>";htmlNoLogin+="";htmlNoLogin+="         </div>";htmlNoLogin+='         <div class="fr">';htmlNoLogin+="            <a href=\"<%= (siapGlobalHeaderVar.loginUrl != '' ? siapGlobalHeaderVar.loginUrl : data.urls.login + (window.location.href)) %>\"><span>mendaftar / login</span></a>";htmlNoLogin+="         </div>";htmlNoLogin+="      </div>";htmlNoLogin+="";htmlNoLogin+="   </div>";htmlNoLogin+="";htmlNoLogin+="</div>";var htmlLogin="";htmlLogin+='<div id="global-header">';htmlLogin+='   <div class="gbltf">';htmlLogin+='      <div class="head-global sdw clear">';htmlLogin+='         <div class="fl">';htmlLogin+='            <a href="<%= data.urls.portal_produk %>"><span class="logo">SIAP</span></a>';htmlLogin+="            <a href=\"javascript:;\" class=\"js-komunitas-menu <%= ( data.is_komunitas ? 'selected active' : '')%>\"><span>Komunitas</span></a>";htmlLogin+="            <a href=\"javascript:;\" class=\"js-sekolah-menu <%= ( data.is_sekolah ? 'selected active' : '')%>\"><span>Sekolah</span></a>";htmlLogin+="            <a href=\"javascript:;\" class=\"js-dinas-menu <%= ( data.is_dinas ? 'selected active' : '')%>\"><span>Departemen</span></a>";htmlLogin+="            <a href=\"<%= data.urls.belajar %>\" class=\"<%= ( data.is_belajar ? 'selected active' : '')%>\"><span>Pustaka</span></a>";htmlLogin+="            <a href=\"javascript:;\" class=\"js-psb-menu <%= ( data.is_portal_psb ? 'selected active' : '')%>\"><span>PPDB</span></a>";htmlLogin+="";htmlLogin+="            <% if (data.have_nuptk) { %> <a href=\"<%= data.urls.padamu_sim %>\" class=\"<%= ( data.is_padamu ? 'selected' : '')%>\"><span>Padamu Negeri</span></a> <% } else { %>";htmlLogin+="            <a href=\"<%= data.urls.padamu_publik %>\" class=\"<%= ( data.is_padamu ? 'selected' : '')%>\"><span>Padamu Negeri</span></a> <% } %>";htmlLogin+="";htmlLogin+="            <% if (data.have_kelola) { %> <a href=\"<%= data.urls.kelola %>\" class=\"<%= ( data.is_kelola ? 'selected' : '')%>\"><span>Kelola</span></a> <% } %>";htmlLogin+="";htmlLogin+='            <div class="tips-modal js-komunitas-submenu submenu">';htmlLogin+='               <div class="menu">';htmlLogin+="                  <ul>";htmlLogin+='                     <li><a href="<%= (data.urls.portal_komunitas) %>">Portal</a></li>';htmlLogin+='                     <li><a href="<%= (data.urls.dir_user_komunitas) %>">Direktori Anggota</a></li>';htmlLogin+='                     <li><a href="<%= (data.urls.dir_group_komunitas) %>">Direktori Komunitas</a></li> <% if (data.enable_wacana) { %>';htmlLogin+='                     <li><a href="<%= (data.urls.wacana) %>">Wacana</a></li> <% } %>';htmlLogin+="                  </ul>";htmlLogin+="               </div>";htmlLogin+="            </div>";htmlLogin+="";htmlLogin+='            <div class="tips-modal js-sekolah-submenu submenu">';htmlLogin+='               <div class="menu">';htmlLogin+="                  <ul>";htmlLogin+='                     <li><a href="<%= (data.urls.portal_sekolah) %>">Portal</a></li> <% if (data.have_my_sekolah) { %>';htmlLogin+='                     <li><a href="<%= (data.urls.my_sekolah) %>">Sekolahku</a></li> <% } %> <% if (data.have_siap20) { %>';htmlLogin+='                     <li><a href="<%= (data.urls.siap20) %>">Administrasi <span class="iblk rnd3 beta">beta</span></a></li> <% } %> <% if (data.have_adm_sekolah) { %>';htmlLogin+='                     <li><a href="<%= (data.urls.login_sekolah) %>">Administrasi</a></li> <% } %> <% if (data.have_web_sekolah) { %>';htmlLogin+='                     <li><a href="<%= (data.urls.login_web_sekolah) %>">Web Sekolah</a></li> <% } else if(data.have_my_sekolah) {%>';htmlLogin+='                     <li><a href="<%= (data.urls.my_web_sekolah) %>">Web Sekolah</a></li> <% } else {%>';htmlLogin+='                     <li><a href="<%= (data.urls.portal_web_sekolah) %>">Web Sekolah</a></li> <% } %>';htmlLogin+="                  </ul>";htmlLogin+="               </div>";htmlLogin+="            </div>";htmlLogin+="";htmlLogin+='            <div class="tips-modal js-dinas-submenu submenu">';htmlLogin+='               <div class="menu">';htmlLogin+="                  <ul>";htmlLogin+='                     <li><a href="<%= (data.urls.portal_dinas) %>">Portal Departemen</a></li> <% if (data.have_web_dinas) { %>';htmlLogin+='                     <li><a href="<%= (data.urls.login_web_dinas) %>">Web Departemen</a></li> <% } else if(data.have_my_dinas && data.urls.my_web_dinas) {%>';htmlLogin+='                     <li><a href="<%= (data.urls.my_web_dinas) %>">Web Departemen</a></li> <% } else {%>';htmlLogin+='                     <li><a href="<%= (data.urls.portal_web_dinas) %>">Web Departemen</a></li> <% } %>';htmlLogin+="                  </ul>";htmlLogin+="               </div>";htmlLogin+="            </div>";htmlLogin+="";htmlLogin+='            <div class="tips-modal js-psb-submenu submenu">';htmlLogin+='               <div class="menu">';htmlLogin+="                  <ul>";htmlLogin+="                     <% if (data.have_operator_psb_demo) { %>";htmlLogin+='                     <li><a href="<%= (data.urls.operator_psb_demo) %>">Operator Demo</a></li>';htmlLogin+="                     <% } %> <% if (data.have_operator_psb) { %>";htmlLogin+='                     <li><a href="<%= (data.urls.operator_psb) %>">Operator</a></li>';htmlLogin+="                     <% } %>";htmlLogin+='                     <li><a href="<%= (data.urls.portal_psb) %>">Portal</a></li>';htmlLogin+="                  </ul>";htmlLogin+="               </div>";htmlLogin+="            </div>";htmlLogin+="";htmlLogin+="         </div>";htmlLogin+="      </div>";htmlLogin+="";htmlLogin+="   <!-- warns -->";htmlLogin+="   <% var htmlWarn = ''; var isAkunEmailModul = false; var currentHref = window.parent.location.href; if (currentHref.indexOf('akun.siap-online') != -1 && currentHref.indexOf('email') != -1) isAkunEmailModul = true; %> <% if (data.is_must_change_mail && !isAkunEmailModul) { %>";htmlLogin+='   <div style="display: block" class="modalbox mod-confirm clear js-unremove">';htmlLogin+='      <div style="width: 400px; margin-top: 10%" class="modalbox-dialog rnd5 sdw">';htmlLogin+='         <div class="modalbox-cont">';htmlLogin+='            <div class="freearea">';htmlLogin+='               <h2 class="title-big">Perhatian</h2>';htmlLogin+="            </div>";htmlLogin+='            <div class="box-cont">';htmlLogin+='               <div class="box-cont hr">';htmlLogin+='                  <div class="ic32 ic24-block lbl normal">';htmlLogin+="                     <h3>Email Anda belum terdaftar !</h3>";htmlLogin+='                     <p class="desc">';htmlLogin+="                        Demi kelancaran dalam menggunakan layanan ini, harap <strong>daftarkan email</strong> Anda segera.";htmlLogin+="                     </p>";htmlLogin+="                  </div>";htmlLogin+="               </div>";htmlLogin+='               <form class="ac" method="get" action="<%= data.urls.akun + \'/kelola/#!/email\' %>">';htmlLogin+='                  <input type="submit" value="Daftarkan Email" class="js-gochange">';htmlLogin+="               </form>";htmlLogin+="            </div>";htmlLogin+="         </div>";htmlLogin+="      </div>";htmlLogin+="   </div>";htmlLogin+="   <% } else if (!data.is_have_email || !data.is_verified || !data.username || (data.paspor_detail.altEmail && !data.is_alt_verified) || data.maintenance_web_sekolah) { %>";htmlLogin+='   <div class="warn-frm">';htmlLogin+='      <div class="warn-cont">';htmlLogin+='         <div class="warn js-warn-error" alt="err" style="display: none">';htmlLogin+='            <span alt="Error:" class="js-warn-error-msg"> </span>';htmlLogin+="         </div>";htmlLogin+='         <div class="warn sdw js-warn-success" alt="ok" style="display: none">';htmlLogin+="            <span alt=\"Berhasil:\" class=\"js-warn-success-msg\"> silakan cek inbox pada email Anda <b>(<%= data.paspor_detail.email %><%= (data.paspor_detail.altEmail  ? ' / ' + data.paspor_detail.altEmail : '' )%>)</b></span>";htmlLogin+="         </div>";htmlLogin+='         <div alt="x" class="warn sdw">';htmlLogin+='            <span alt="Perhatian:"> <% if (!data.is_have_email) { %>';htmlLogin+="               <li>Akun anda belum memiliki email, silakan lakukan [ <a href=\"<%= data.urls.akun + '/kelola/#!/email' %>\">sunting email</a> ].";htmlLogin+="            </li> <% }else if (!data.is_verified) { %>";htmlLogin+='               <li>Akun anda belum diverifikasi, silakan kunjungi [ <a href="<%= data.urls.paspor + \'/verifikasi\' %>">laman verifikasi</a> ] untuk melakukan verifikasi. Atau [ <a href="javascript:;" class="js-resend-email">kirim ulang email verifikasi</a> ] jika belum menerima email.';htmlLogin+="            </li> <% } %>";htmlLogin+="            <% if (data.paspor_detail.altEmail && !data.is_alt_verified) { %>";htmlLogin+='               <li>Email Alternatif anda belum diverifikasi, silakan kunjungi [ <a href="<%= data.urls.paspor + \'/verifikasi\' %>">laman verifikasi</a> ] untuk melakukan verifikasi. Atau [ <a href="javascript:;" class="js-resend-email">kirim ulang email verifikasi</a> ] jika belum menerima email.<br/> Sekaligus dapatkan fasilitas login dengan email alternatif anda (<%= data.paspor_detail.altEmail %>)';htmlLogin+="            </li> <% } %>";htmlLogin+="            <% if (!data.username) { %>";htmlLogin+="               <li>Anda belum menentukan username, silakan lengkapi [ <a href=\"<%= data.urls.akun+ '/kelola/username' %>\">disini</a> ]. Sekaligus mendapatkan subdomain personal Anda di <b>http://username.<%= data.siapku_domain %></b>.";htmlLogin+="            </li> <% } %>";htmlLogin+="            <% if (data.maintenance_web_sekolah) { %>";htmlLogin+="               <li><%= data.maintenance_web_sekolah %>";htmlLogin+="            </li> <% } %>";htmlLogin+="            </span>";htmlLogin+="         </div>";htmlLogin+="      </div>";htmlLogin+="   </div>";htmlLogin+="   <% } %>";htmlLogin+="";htmlLogin+="";htmlLogin+="";htmlLogin+="   <!-- Dashboard Toolbar -->";htmlLogin+='   <div class="user-dash clear">';htmlLogin+="      <div class=\"<%= typeof siapGlobalHeaderVar.wrap != 'undefined' ? (siapGlobalHeaderVar.wrap == 1 ? 'wrap' : '') : '' %>\">";htmlLogin+='         <div class="fl">';htmlLogin+='            <a class="icd  tips mod-rt js-cred tips-rs" href="javascript:;"> <span class="tips-msg">Anda Login sebagai:<b class="med blk">';htmlLogin+='            <%= data.siapku_detail.fullname %></b></span> <img width="24" height="24" align="left" src="<%= data.avatar.avatarThumb2 %>"></a>';htmlLogin+='            <!-- <a title="Mulai berbagi" class="icd icd-msg tips js-post" href="javascript:;"><i></i></a> -->';htmlLogin+='            <a title="Pesanku" class="icd icd-mail  <%= (data.num_pm > 0 ? \'notif\' : \'\') %> tips js-mail" alt="<%= data.num_pm %>" href="javascript:;">';htmlLogin+="            <i></i>";htmlLogin+="            </a>";htmlLogin+='            <a title="Notifikasi" class="icd icd-log  <%=  (data.num_recent_notif > 0 ? \'notif\' : \'\') %> tips js-notif " alt="<%= data.num_recent_notif %>" href="javascript:;">';htmlLogin+="            <i></i>";htmlLogin+="            </a>";htmlLogin+='            <form class="icd global-search" onsubmit="return false;">';htmlLogin+='               <input type="text" style="margin: 0; height: 12px" value="" class="js-search-input"> <a class="ic ic-cari" href="javascript:;"></a>';htmlLogin+='                   <div class="search-result sdw js-search-result" style="display: none;">';htmlLogin+='                      <h4 class="js-search-result-siswa-header" style="display:none">Siswa</h4>';htmlLogin+='                      <div class="js-search-result-siswa-list">';htmlLogin+="                      </div>";htmlLogin+="";htmlLogin+='                      <h4 class="js-search-result-guru-header" style="display:none">Guru</h4>';htmlLogin+='                      <div class="js-search-result-guru-list">';htmlLogin+="                      </div>";htmlLogin+="";htmlLogin+='                      <h4 class="js-search-result-sekolah-header" style="display:none">Sekolah</h4>';htmlLogin+='                      <div class="js-search-result-sekolah-list">';htmlLogin+="                      </div>";htmlLogin+='                      <h4 class="js-search-result-groupumum-header" style="display:none">Komunitas</h4>';htmlLogin+='                      <div class="js-search-result-groupumum-list">';htmlLogin+="                      </div>";htmlLogin+="                   </div>";htmlLogin+="            </form>";htmlLogin+="         </div>";htmlLogin+='         <div class="fr">';htmlLogin+='            <a title="Aliran" class="icd icd-dash tips" href="<%= data.urls.portal_komunitas %>/dashboard"><i></i></a>';htmlLogin+="            <% if (data.have_siap20) { %>";htmlLogin+='            <!--  <a class="icd icd-role  tips" href="<%= data.urls.siap20 %>" title="Peranku"><i></i></a> -->';htmlLogin+='            <a class="icd icd-sch  tips" title="Sekolahku" href="<%= data.urls.siap20 %>"><i></i></a>';htmlLogin+="            <% } else if (data.have_adm_sekolah) { %>";htmlLogin+='            <a class="icd icd-sch  tips" title="Sekolahku" href="<%= data.urls.login_sekolah %>"><i></i></a>';htmlLogin+="            <% } %>";htmlLogin+='            <a title="Komunitasku" class="icd icd-grup  tips" href="<%= data.urls.portal_komunitas %>/manage/groups"><i></i></a>';htmlLogin+='            <a title="Koleksiku" class="icd icd-cab  tips" href="<%= data.urls.portal_komunitas %>/manage/collection"><i></i></a>';htmlLogin+='            <a class="icd icd-addr  tips" href="<%= data.urls.portal_komunitas %>/friends" title="Daftar Kontak"><i></i></a>';htmlLogin+="         </div>";htmlLogin+="      </div>";htmlLogin+="      <div>";htmlLogin+='         <a href="#" class="icd icd-help  tips-r" style="display:none" title="Pedoman Pengguna"><i></i></a>';htmlLogin+='         <a title="Pusat Layanan SIAP" class="icd icd-box  tips" href="<%= data.urls.akun %>"><i></i></a>';htmlLogin+='         <a title="Pengaturan Akun" class="icd icd-gear  tips" href="<%= data.urls.akun + \'/profil/#!/info/\' %>"><i></i></a>';htmlLogin+='         <a title="keluar" class="icd tips tips-ls" href="<%= (data.urls.header_logout + \'?domain=\' + encodeURIComponent((location.protocol + \'//\' + location.hostname + (location.port && \':\' + location.port))) + \'&url=\' + encodeURIComponent((siapGlobalHeaderVar.logoutUrl ? siapGlobalHeaderVar.logoutUrl : data.urls.logout)) ) %>"><span style="padding: 3px 4px" class="ic act-exit"></span></a>';htmlLogin+="      </div>";htmlLogin+="   </div>";htmlLogin+="";htmlLogin+="";htmlLogin+="";htmlLogin+="<!-- Credential Box -->";htmlLogin+='<div class="tips-modal rnd3 js-cred-box" style="display: none;">';htmlLogin+='               <div class="point p-ff p-l" style=""></div>';htmlLogin+='               <div class="tips-modal-cont">';htmlLogin+='                  <div class="box-cont big-card">';htmlLogin+='                     <div style="margin-bottom: 0" class="desc hr clear">';htmlLogin+="                        <em>Anda login sebagai</em> <a class=\"ic lbl act-exit fr\" href=\"<%= (data.urls.header_logout + '?domain=' + encodeURIComponent((location.protocol + '//' + location.hostname + (location.port && ':' + location.port))) + '&url=' + encodeURIComponent((siapGlobalHeaderVar.logoutUrl ? siapGlobalHeaderVar.logoutUrl : data.urls.logout)) ) %>\"><em>Ganti akun</em></a>";htmlLogin+="                     </div>";htmlLogin+='                     <div class="box-cont namecard hr">';htmlLogin+='                        <img src="<%= data.avatar.avatarThumb4 %>">';htmlLogin+='                        <h4 style="margin-bottom: 10px">';htmlLogin+='                           <a href="<%= data.urls.portal_komunitas %>/user/<%= data.siapku_detail.username ? data.siapku_detail.username : data.siapku_detail.id %>"><%= data.siapku_detail.fullname %></a>';htmlLogin+="                        </h4>";htmlLogin+='                        <ul class="menu">';htmlLogin+="                           <%";htmlLogin+="                              var icon = 'ic-umum';";htmlLogin+="                              switch(data.siapku_detail.position) {";htmlLogin+="                                 case 'Guru' :";htmlLogin+="                                    icon = 'ic-guru';";htmlLogin+="                                    break;";htmlLogin+="                                 case 'Siswa' :";htmlLogin+="                                    icon = 'ic-siswa';";htmlLogin+="                                    break;";htmlLogin+="                                 case 'Tenaga Kependidikan' :";htmlLogin+="                                    icon = 'ic-guru';";htmlLogin+="                                    break;";htmlLogin+="                                 case 'Orangtua' :";htmlLogin+="                                    icon = 'ic-ortu';";htmlLogin+="                                    break;";htmlLogin+="                                 case 'Alumni' :";htmlLogin+="                                    icon = 'ic-siswa';";htmlLogin+="                                    break;";htmlLogin+="                                 case 'Mahasiswa' :";htmlLogin+="                                    icon = 'ic-siswa';";htmlLogin+="                                    break;";htmlLogin+="                                 case 'Dosen' :";htmlLogin+="                                    icon = 'ic-guru';";htmlLogin+="                                    break;";htmlLogin+="                                 case 'Masyarakat Peduli Pendidikan' :";htmlLogin+="                                    icon = 'ic-umum';";htmlLogin+="                                    break;";htmlLogin+="                              }";htmlLogin+="                           %>";htmlLogin+="                           <li><a class=\"<%= icon %>\"><%= data.siapku_detail.position ? data.siapku_detail.position : 'Masyarakat Peduli Pendidikan' %></a></li>";htmlLogin+='                           <li><a href="<%= data.urls.akun %>/profil/#!/info/">Lihat / Edit profilku</a></li>';htmlLogin+="                        </ul>";htmlLogin+="                     </div>";htmlLogin+="                  </div>";htmlLogin+="               </div>";htmlLogin+="            </div>";htmlLogin+="";htmlLogin+="";htmlLogin+="";htmlLogin+="<!-- New Post -->";htmlLogin+='<div class="modalbox clear js-post-box" style="right: 0px; display: none;">';htmlLogin+='  <div class="modalbox-dialog rnd5 sdw" style="width: 600px;">';htmlLogin+='    <div class="modalbox-disabler"></div>';htmlLogin+='    <a class="modalbox-cls tips js-poster-close" href=""></a>';htmlLogin+='    <div class="modalbox-cont"><div width="600" style="min-height:55px" class="head-cat rnd5 rnd-t">';htmlLogin+='  <h2 class="fl">Mulai berbagi</h2>';htmlLogin+="</div>";htmlLogin+="<!-- feed poster -->";htmlLogin+='<div class="box-cont">';htmlLogin+='<!--<iframe frameborder="0" class="iframe-post" id="iframe-post" style="width: 100%;" border="0" src="<%= data.urls.siapku %>/iframe/#!/post"></iframe> -->';htmlLogin+="</div>";htmlLogin+="</div>";htmlLogin+="  </div>";htmlLogin+="</div>";htmlLogin+="";htmlLogin+="";htmlLogin+="   </div>";htmlLogin+="";htmlLogin+="";htmlLogin+="</div>";var htmlMail="";htmlMail+='<div class="tips-modal rnd3 js-mail-box hide" style="">';htmlMail+='  <div class="point p-ff p-t" style=""></div>';htmlMail+='  <div class="tips-modal-cont"><div style="width:400px">';htmlMail+='  <div style="margin-bottom:0" class="desc hr clear"><em>Pesan Baru</em></div>';htmlMail+='  <div class="sml">';htmlMail+='    <div class="feed-poster"><div class="feed-load rnd3"></div></div>';htmlMail+="  </div>";htmlMail+='  <a title="lihat semua pesan" class="list-more tips" href="<%= siapGlobalHeaderVar.urls.portal_komunitas %>/mail"></a>';htmlMail+="</div></div>";htmlMail+="</div>";var htmlNotif="";htmlNotif+='<div class="tips-modal rnd3 js-notif-box hide" style="">';htmlNotif+='  <div class="point p-ff p-t" style=""></div>';htmlNotif+='  <div class="tips-modal-cont"><div style="width:400px">';htmlNotif+='  <div style="margin-bottom:0" class="desc hr clear"><em>Notifikasi</em></div>';htmlNotif+='  <ul class="js-notif-list">';htmlNotif+="    </ul>";htmlNotif+='    <div class="feed-poster"><div class="feed-load rnd3"></div></div>';htmlNotif+='  <a title="lihat semua pesan" class="list-more tips" href="<%= siapGlobalHeaderVar.urls.portal_komunitas %>/notifications"></a>';htmlNotif+="</div></div>";htmlNotif+="</div>";Zepto.fn.hover=function(a,b){return this.mouseover(a).mouseout(b||a)};var GlobalHeaderTips={scan:function(d){var c=d.find("#js-global-header-tips"),b=false,a=4000;if(!c.length){c=Zepto('<div id="js-global-header-tips" class="tips-msg rnd5 sdw" style="display: none;"><div class="msg"></div></div>').appendTo(d).mouseleave(function(){clearTimeout(b);c.hide()})}d.find(".tips, .tips-ls, .tips-rs, .tips-m").each(function(){var h=Zepto(this),g=h.data("title")||h.attr("title"),f=h.hasClass("tips-on"),e=h.hasClass("tips-ls")?"tips-ls":h.hasClass("tips-rs")?"tips-rs":h.hasClass("tips-m")?"tips-m":"tips-m";h.data("title",h.attr("title"));if(h.children(".tips-msg").length){g=h.children(".tips-msg").eq(0).html();h.children(".tips-msg").remove()}if(h.is(".notif")){g='<span class="iblk" style="background:#e20000;padding:0 3px;margin-right:5px">'+h.attr("alt")+"</span>"+g}h.removeAttr("title");h.removeClass("tips tips-ls tips-rs tips-m tips-on");h.off("mouseenter");h.off("mouseleave");h.hover(function(){if(!g){return}clearTimeout(b);c.find(".msg").html(g);c.show().removeClass("tips-ls tips-rs tips-m tips-r").offset({left:0,top:0});var o=h.offset(),k=Zepto(d).width(),m=e,j=c.outerWidth(),l=c.outerHeight(),i,n;if(e=="tips-ls"){i=Math.floor(o.left-j-12);n=Math.floor(o.top-l/2+h.outerHeight()/2)}else{if(e=="tips-rs"){i=Math.floor(o.left+h.outerWidth()+12);n=Math.floor(o.top-l/2+h.outerHeight()/2)}else{if(e=="tips-m"){i=Math.floor(o.left-j/2+h.outerWidth()/2);n=Math.floor(o.top+h.outerHeight()+12);if(o.left+j>=k){m="tips-r";i=Math.floor(o.left-j+23+h.outerWidth()/2)}}}}c.addClass(m).offset({left:i,top:n});b=setTimeout(function(){c.hide()},a)},function(){if(!f){clearTimeout(b);c.hide()}})})},hide:function(){wrapper.find("#js-global-header-tips").hide()}};GlobalHeaderTips.Modal=function(a){a=Zepto.extend({id:"js-div-modal-"+Math.ceil(Math.random()*1000),content:"",wrapper:document.body,},a||{});var c=Zepto("<div"+(a.id?' id="'+a.id+'"':"")+' class="tips-modal rnd3" style="display: none;"><div class="point" style="height: 9px; left: 10px; top: -9px; width: 16px;"></div><div class="menu"></div></div>');c.appendTo(a.wrapper);c.find(".menu").append(a.content);var b;this.show=function(g){var g=Zepto(g),f=g.offset(),e=Math.floor(f.left-19+g.outerWidth()/2),d=Math.floor(f.top+g.outerHeight()+12);c.show().offset({left:e,top:d});b=g};this.hide=function(){c.hide()};this.getRef=function(){return b}};var GlobalHeaderModal=new function(){this.show=function(r,l,i){l.show();var c="bl",m=Zepto("html").innerWidth(),f=Zepto("html").innerHeight(),z=l.outerWidth(),h=l.outerHeight(),j=l.width()+2,u=l.height()+2,k=h-u,n=z-j,y=0,x=0,g=r.outerWidth(true),o=r.outerHeight(true),e=r.offset().left,d=r.offset().top,s=r.attr("class"),a="point p-ff",w=(o>h?14+k-1:o+k-1),p=(g>z?14+n-1:g+n-1),q=0,v=0,b="",t="";if(/mod-rt/.test(s)){c="rt"}if(/mod-rm/.test(s)){c="rm"}if(/mod-rb/.test(s)){c="rb"}if(/mod-lt/.test(s)){c="lt"}if(/mod-lm/.test(s)){c="lm"}if(/mod-lb/.test(s)){c="lb"}if(/mod-tl/.test(s)){c="tl"}if(/mod-tm/.test(s)){c="tm"}if(/mod-tr/.test(s)){c="tr"}if(/mod-bl/.test(s)){c="bl"}if(/mod-bm/.test(s)){c="bm"}if(/mod-br/.test(s)){c="br"}switch(c){case"rt":case"rm":case"rb":if(e+z+10>m){c=c.replace(/r/,"l")}break;case"lt":case"lm":case"lb":if(e-(z+10)<0){c=c.replace(/l/,"r")}break;case"bl":case"bm":case"br":if(d+h+10>f){c=c.replace(/b/,"t")}break;case"tl":case"tm":case"tr":if(d-(h+10)<0){c=c.replace(/t/,"b")}break}switch(c){case"rt":case"lt":if(d+(h-10)>f){c=c.replace(/t/,"b")}break;case"rb":case"lb":if((d+o)-(h-10)<0){c=c.replace(/b/,"t")}break;case"bl":case"tl":if((e-n/2)+z>m){c=c.replace(/l/,"r")}break;case"br":case"tr":if((e+g)-z<0){c=c.replace(/r/,"l")}break;case"rm":case"lm":if((d+o/2)+h/2>f){c=c.replace(/m/,"b")}if((d+o/2)-h/2<0){c=c.replace(/m/,"t")}break;case"bm":case"tm":if((e+g/2)+z/2>m){c=c.replace(/m/,"r")}if((e+g/2)-z/2<0){c=c.replace(/m/,"l")}break}switch(c){case"rt":case"rm":case"rb":y=e+g+10;break;case"lt":case"lm":case"lb":y=e-(z+10);break;case"bl":case"tl":y=e-10;break;case"bm":case"tm":y=e-((z-g)/2);break;case"br":case"tr":y=e-(z-g-10);break}switch(c){case"rt":case"lt":x=d-10;break;case"rb":case"lb":x=d-(h-o-10);break;case"rm":case"lm":x=d-((h-o)/2);break;case"bl":case"bm":case"br":x=d+o+10;break;case"tl":case"tm":case"tr":x=d-(h+10);break}switch(c){case"rt":case"rm":case"rb":a+=" p-l";p=10;break;case"lt":case"lm":case"lb":a+=" p-r";p=10;break;case"bl":case"bm":case"br":a+=" p-t";w=10;break;case"tl":case"tm":case"tr":a+=" p-b";w=10;break}switch(c){case"rm":case"lm":w="100%";p=10;break;case"bm":case"tm":p="100%";w=10;break}switch(c){case"rb":case"tl":case"tm":q="";b=0;break;case"tr":case"lm":case"lb":q="";b=0;v="";t=0;break;case"br":case"lt":v="";t=0;break}l.find(".point").attr("class",a).css({width:p,height:w,top:q,left:v,bottom:b,right:t});l.css({top:x,left:y}).show();l.show()}};var GlobalHeaderNotif=new function(){this.url=siapGlobalHeaderVar.protocol+"://"+siapGlobalHeaderVar.headerDomain+"/actions/get-notif";this.template='<% Zepto.each(list, function(key, value){ %> <li class="feed <%= value.is_new ? \'new\' : \'\' %>"><img width="20" height="20" align="left" src="<%= value.avatar %>"><p><%= value.message %></p><dd><em class="ics lbl <%= value.icon %>-d green"><%= value.time %></em></dd></li>  <% });%>';this.warnTemplate='<div class="warn full"><span alt=""><%= data.desc %></span></div>';this.init=function(){GlobalHeader.globalHeaderEl.find(".js-notif").on("click",function(){Zepto(this).attr("clickable","y");var b=Zepto(this);if(b.hasClass("on")){GlobalHeader.globalHeaderEl.find(".js-notif-box").remove();b.removeClass("on")}else{if(GlobalHeader.globalHeaderEl.find(".js-notif-box").length<1){var a=_.template(htmlNotif,{siapGlobalHeaderVar:siapGlobalHeaderVar,data:{}});Zepto(a).appendTo(GlobalHeader.globalHeaderEl)}GlobalHeaderModal.show(b,GlobalHeader.globalHeaderEl.find(".js-notif-box"),GlobalHeader.globalHeaderEl);Zepto.ajax({type:"GET",url:GlobalHeaderNotif.url,dataType:"jsonp",timeout:300,success:function(c){},error:function(d,c){}});b.addClass("on")}GlobalHeader.globalHeaderEl.find(".js-notif-box").attr("clickable","y");GlobalHeader.globalHeaderEl.find(".js-notif-box").attr("removable","y")})},this.show=function(b){if(GlobalHeader.globalHeaderEl.find(".js-notif-box").is(":visible")){GlobalHeader.globalHeaderEl.find(".js-notif").removeClass("notif");GlobalHeader.globalHeaderEl.find(".js-notif").addClass("tips");GlobalHeader.globalHeaderEl.find(".js-notif").attr("alt",0);GlobalHeaderTips.scan(GlobalHeader.globalHeaderEl);if(b&&typeof(b.data.error)=="undefined"){b=b.data;var a=_.template(GlobalHeaderNotif.template,{list:b.list});GlobalHeader.globalHeaderEl.find(".js-notif-box .js-notif-list").append(a);GlobalHeader.globalHeaderEl.find(".js-notif-box .feed-poster").hide()}else{GlobalHeader.globalHeaderEl.find(".js-notif-box .feed-poster").hide();var a=_.template(GlobalHeaderNotif.warnTemplate,{data:b});GlobalHeader.globalHeaderEl.find(".js-notif-box .js-notif-list").append(a)}}}};var GlobalHeaderMail=new function(){this.url=siapGlobalHeaderVar.protocol+"://"+siapGlobalHeaderVar.headerDomain+"/actions/get-mail";this.template='<% Zepto.each(list, function(key, value){ %> <a style="color:inherit;text-decoration:inherit" class="feed blk <%= value.is_new ? \'new\' : \'\' %>" href="<%= value.url %>"><img width="30" height="30" align="left" src="<%= value.user.avatar_small %>"><h4><%= value.user.fullname %></h4><p><em><%= value.cutted_message %></em></p><dd><em class="ics lbl ic-mail-d green"><%= value.relative_time %></em></dd></a>  <% });%>';this.warnTemplate='<div class="warn full"><span alt=""><%= data.desc %></span></div>';this.init=function(){GlobalHeader.globalHeaderEl.find(".js-mail").on("click",function(){Zepto(this).attr("clickable","y");var b=Zepto(this);if(b.hasClass("on")){GlobalHeader.globalHeaderEl.find(".js-mail-box").remove();b.removeClass("on")}else{if(GlobalHeader.globalHeaderEl.find(".js-mail-box").length<1){var a=_.template(htmlMail,{siapGlobalHeaderVar:siapGlobalHeaderVar,data:{}});Zepto(a).appendTo(GlobalHeader.globalHeaderEl)}GlobalHeaderModal.show(b,GlobalHeader.globalHeaderEl.find(".js-mail-box"),GlobalHeader.globalHeaderEl);Zepto.ajax({type:"GET",url:GlobalHeaderMail.url,dataType:"jsonp",timeout:300,success:function(c){},error:function(d,c){}});b.addClass("on")}GlobalHeader.globalHeaderEl.find(".js-mail-box").attr("clickable","y");GlobalHeader.globalHeaderEl.find(".js-mail-box").attr("removable","y")})},this.show=function(b){if(GlobalHeader.globalHeaderEl.find(".js-mail-box").is(":visible")){GlobalHeader.globalHeaderEl.find(".js-mail").removeClass("notif");GlobalHeader.globalHeaderEl.find(".js-mail").addClass("tips");GlobalHeader.globalHeaderEl.find(".js-mail").attr("alt",0);GlobalHeaderTips.scan(GlobalHeader.globalHeaderEl);if(b&&typeof(b.data.error)=="undefined"){b=b.data;var a=_.template(GlobalHeaderMail.template,{list:b.list});Zepto(a).insertAfter(GlobalHeader.globalHeaderEl.find(".js-mail-box .feed-poster"));GlobalHeader.globalHeaderEl.find(".js-mail-box .feed-poster").hide()}else{GlobalHeader.globalHeaderEl.find(".js-mail-box .feed-poster").hide();var a=_.template(GlobalHeaderMail.warnTemplate,{data:b});Zepto(a).insertAfter(GlobalHeader.globalHeaderEl.find(".js-mail-box .feed-poster"))}}}};var GlobalHeaderMenu=new function(){this.frameActions=false;this.frameActionsTimer=false;this.currentHref=false;this.hasSubmenus=["komunitas","dinas","sekolah","psb"];this.ux=function(){GlobalHeader.globalHeaderEl.find("a").each(function(a,c){var b=Zepto(c).attr("class");if(b){b=b.replace("selected","");b=b.replace("active","");var d=Zepto.trim(b);if(d){d=d.replace("js-","");d=d.replace("-menu","");if(GlobalHeaderMenu.hasSubmenus.indexOf(d)>=0){Zepto(c).attr("clickable","y");Zepto(c).on("click",function(f,e){if(Zepto(this).hasClass("selected")){if(!Zepto(this).hasClass("active")){Zepto(this).removeClass("selected");GlobalHeader.globalHeaderEl.find(".tips-modal.submenu").hide()}else{Zepto(this).siblings("a").not(".active").removeClass("selected");GlobalHeader.globalHeaderEl.find(".tips-modal.submenu").not(".js-"+d+"-submenu").hide();GlobalHeader.globalHeaderEl.find(".js-"+d+"-submenu").css({left:Zepto(c).position().left}).toggle()}}else{Zepto(this).siblings("a").not(".active").removeClass("selected");Zepto(this).addClass("selected");GlobalHeader.globalHeaderEl.find(".tips-modal.submenu").hide();GlobalHeader.globalHeaderEl.find(".js-"+d+"-submenu").css({left:Zepto(c).position().left}).show()}})}}}})};this.init=function(){GlobalHeaderMenu.ux();window.setInterval(function(){var a=window.location.href;if(document.getElementById("iframe-post")){var b=document.getElementById("iframe-post").contentWindow;b.postMessage("header-href="+a,"*")}if(a!=GlobalHeaderMenu.currentHref){GlobalHeaderBody.clear();GlobalHeader.globalHeaderEl.find(".icd-help").hide();GlobalHeader.globalHeaderEl.find(".user-dash .on").removeClass("on");GlobalHeader.globalHeaderEl.find(".user-dash .p-b").removeClass("p-b");GlobalHeader.globalHeaderEl.find(".user-dash .p-in").removeClass("p-in");GlobalHeader.globalHeaderEl.find(".user-dash .p-db").removeClass("p-db");GlobalHeader.globalHeaderEl.find(".user-dash .p-ea").removeClass("p-ea")}GlobalHeaderMenu.currentHref=a;if(a.indexOf(siapGlobalHeaderVar.urls.portal_komunitas)>=0){GlobalHeader.globalHeaderEl.find(".icd-help").attr("href","http://bantuan.siap-online.com/produk/komunitas/");GlobalHeader.globalHeaderEl.find(".icd-help").show()}if(a.indexOf(siapGlobalHeaderVar.urls.siap20)>=0){GlobalHeader.globalHeaderEl.find(".icd-help").attr("href","http://bantuan.siap-online.com/produk/administrasi-sekolah/");GlobalHeader.globalHeaderEl.find(".icd-help").show()}if(a.indexOf(siapGlobalHeaderVar.urls.portal_web_sekolah)>=0){GlobalHeader.globalHeaderEl.find(".icd-help").attr("href","http://bantuan.siap-online.com/produk/web-sekolah/");GlobalHeader.globalHeaderEl.find(".icd-help").show()}if(a.indexOf(siapGlobalHeaderVar.urls.login_dinas)>=0){GlobalHeader.globalHeaderEl.find(".icd-help").attr("href","http://bantuan.siap-online.com/produk/administrasi-dinas/");GlobalHeader.globalHeaderEl.find(".icd-help").show()}if(a.indexOf(siapGlobalHeaderVar.urls.portal_web_dinas)>=0){GlobalHeader.globalHeaderEl.find(".icd-help").attr("href","http://bantuan.siap-online.com/produk/web-dinas/");GlobalHeader.globalHeaderEl.find(".icd-help").show()}if(a.indexOf(siapGlobalHeaderVar.urls.login_sekolah)>=0){GlobalHeader.globalHeaderEl.find(".icd-help").attr("href","http://bantuan.siap-online.com/produk/siap-sekolah/");GlobalHeader.globalHeaderEl.find(".icd-help").show()}if(a.indexOf(siapGlobalHeaderVar.urls.belajar)>=0){GlobalHeader.globalHeaderEl.find(".icd-help").attr("href","http://bantuan.siap-online.com/produk/siap-sekolah/");GlobalHeader.globalHeaderEl.find(".icd-help").show()}if(a.indexOf(siapGlobalHeaderVar.urls.portal_komunitas)>=0&&(a.indexOf("dashboard")>=0||a.indexOf("trend")>=0)){GlobalHeader.globalHeaderEl.find(".fr .icd-dash").addClass("on");GlobalHeader.globalHeaderEl.find(".fr .icd-dash").addClass("p-b");GlobalHeader.globalHeaderEl.find(".fr .icd-dash").addClass("p-in");GlobalHeader.globalHeaderEl.find(".fr .icd-dash").addClass("p-db")}if(a.indexOf(siapGlobalHeaderVar.urls.portal_komunitas)>=0&&a.indexOf("manage/collection")>=0){GlobalHeader.globalHeaderEl.find(".fr .icd-cab").addClass("on");GlobalHeader.globalHeaderEl.find(".fr .icd-cab").addClass("p-b");GlobalHeader.globalHeaderEl.find(".fr .icd-cab").addClass("p-in");GlobalHeader.globalHeaderEl.find(".fr .icd-cab").addClass("p-db")}if(a.indexOf(siapGlobalHeaderVar.urls.portal_komunitas)>=0&&a.indexOf("manage/groups")>=0){GlobalHeader.globalHeaderEl.find(".fr .icd-grup").addClass("on");GlobalHeader.globalHeaderEl.find(".fr .icd-grup").addClass("p-b");GlobalHeader.globalHeaderEl.find(".fr .icd-grup").addClass("p-in");GlobalHeader.globalHeaderEl.find(".fr .icd-grup").addClass("p-db")}if(a.indexOf(siapGlobalHeaderVar.urls.portal_komunitas)>=0&&a.indexOf("friends")>=0){GlobalHeader.globalHeaderEl.find(".fr .icd-addr").addClass("on");GlobalHeader.globalHeaderEl.find(".fr .icd-addr").addClass("p-b");GlobalHeader.globalHeaderEl.find(".fr .icd-addr").addClass("p-in");GlobalHeader.globalHeaderEl.find(".fr .icd-addr").addClass("p-db")}if(a.indexOf(siapGlobalHeaderVar.urls.siap20)>=0){GlobalHeader.globalHeaderEl.find(".fr .icd-sch").addClass("on");GlobalHeader.globalHeaderEl.find(".fr .icd-sch").addClass("p-b");GlobalHeader.globalHeaderEl.find(".fr .icd-sch").addClass("p-in");if(jQuery(".head-dash-cont").length>0){GlobalHeader.globalHeaderEl.find(".fr .icd-sch").addClass("p-db")}else{GlobalHeader.globalHeaderEl.find(".fr .icd-sch").addClass("p-ea")}}if(a.indexOf(siapGlobalHeaderVar.urls.login_sekolah)>=0){GlobalHeader.globalHeaderEl.find(".fr .icd-sch").addClass("on");GlobalHeader.globalHeaderEl.find(".fr .icd-sch").addClass("p-b");GlobalHeader.globalHeaderEl.find(".fr .icd-sch").addClass("p-in");GlobalHeader.globalHeaderEl.find(".fr .icd-sch").addClass("p-db")}if(a.indexOf(siapGlobalHeaderVar.urls.akun)>=0&&a.indexOf("profil")<0&&a.indexOf("atur")<0&&a.indexOf("kelola")<0&&a.indexOf("eksternal")<0){GlobalHeader.globalHeaderEl.find(".icd-box").addClass("on");GlobalHeader.globalHeaderEl.find(".icd-box").addClass("p-b");GlobalHeader.globalHeaderEl.find(".icd-box").addClass("p-in");GlobalHeader.globalHeaderEl.find(".icd-box").addClass("p-db")}else{if(a.indexOf(siapGlobalHeaderVar.urls.akun)>=0){GlobalHeader.globalHeaderEl.find(".icd-gear").addClass("on");GlobalHeader.globalHeaderEl.find(".icd-gear").addClass("p-b");GlobalHeader.globalHeaderEl.find(".icd-gear").addClass("p-in");GlobalHeader.globalHeaderEl.find(".icd-gear").addClass("p-db")}}},500)}};var GlobalHeaderSearch=new function(){this.url=siapGlobalHeaderVar.protocol+"://"+siapGlobalHeaderVar.headerDomain+"/actions/global-search?callback=?";this.init=function(a){a.find(".js-search-input").autocomplete({serviceUrl:GlobalHeaderSearch.url,noCache:true,delay:1000,dataType:"jsonp",appendTo:a,onSearchStart:function(b){a.find(".js-search-result").show();a.find(".js-search-result .box-foot").addClass("ic-load");a.find(".js-search-result-siswa-list").empty();a.find(".js-search-result-guru-list").empty();a.find(".js-search-result-sekolah-list").empty();a.find(".js-search-result-groupumum-list").empty();a.find(".js-search-result-siswa-header").hide();a.find(".js-search-result-guru-header").hide();a.find(".js-search-result-sekolah-header").hide();a.find(".js-search-result-groupumum-header").hide()},transformResult:function(c,b){suggestionsSiswa=Zepto.map(c.siswa,function(d){d.kind="siswa";return{value:d.fullname,data:d}});suggestionsGuru=Zepto.map(c.guru,function(d){d.kind="guru";return{value:d.fullname,data:d}});suggestionsSekolah=Zepto.map(c.sekolah,function(d){d.kind="sekolah";return{value:d.fullname,data:d}});suggestionsGroup=Zepto.map(c.group,function(d){d.kind="group";return{value:d.fullname,data:d}});suggestion=[];suggestion=suggestion.concat(suggestionsSiswa);suggestion=suggestion.concat(suggestionsGuru);suggestion=suggestion.concat(suggestionsSekolah);suggestion=suggestion.concat(suggestionsGroup);return{suggestions:suggestion}},suggest:function(l){if(l.suggestions.length===0){l.hide();return}var g=l,j=g.options.formatResult,k=g.getQuery(g.currentValue),h=g.classes.suggestion,e=g.classes.selected,b=Zepto(g.suggestionsContainer),f="";if(g.suggestions.length<=0){a.find(".js-search-result").hide()}var d=0;var m=0;var i=0;var c=0;Zepto.each(g.suggestions,function(o,n){var p=n.data;switch(p.kind){case"siswa":d++;break;case"guru":m++;break;case"sekolah":i++;break;case"group":c++;break}});if(d>0){a.find(".js-search-result-siswa-header").show()}if(m>0){a.find(".js-search-result-guru-header").show()}if(i>0){a.find(".js-search-result-sekolah-header").show()}if(c>0){a.find(".js-search-result-groupumum-header").show()}Zepto.each(g.suggestions,function(o,n){var q=n.data;var p="";p+='<a rel="'+q.url+'" class="js-search-list list-'+q.id+'" style="display:block!important"><img width="30" height="30" align="left" src="'+q.avatar+'">';p+="<h4>"+q.fullname+"</h4>";if(q.about_me){p+='<em class="lbl green">'+q.about_me+"</em></a>"}switch(q.kind){case"siswa":a.find(".js-search-result-siswa-list").append(Zepto(p).show());break;case"guru":a.find(".js-search-result-guru-list").append(Zepto(p).show());break;case"sekolah":a.find(".js-search-result-sekolah-list").append(Zepto(p).show());break;case"group":a.find(".js-search-result-groupumum-list").append(Zepto(p).show());break}f+='<div class="'+h+'" data-index="'+q.id+'" style="display:none">'+j(n,k)+"</div>"});b.html(f);g.visible=true;if(g.options.autoSelectFirst){g.selectedIndex=0;b.children().first().addClass(e)}},adjustScroll:function(c,b){a.find(".js-search-list").removeClass("select");if(a.find(".list-"+b.data.id).length>0){a.find(".list-"+b.data.id).addClass("select")}},onSelect:function(b){a.find(".js-search-result").hide();a.find(".js-search-result-siswa-list").empty();a.find(".js-search-result-guru-list").empty();a.find(".js-search-result-sekolah-list").empty();a.find(".js-search-result-groupumum-list").empty();a.find(".js-search-result-siswa-header").hide();a.find(".js-search-result-guru-header").hide();a.find("js-search-result-sekolah-header").hide();a.find(".js-search-result-groupumum-header").hide();window.location=b.data.url}})},this.show=function(a){}};var GlobalHeaderBody=new function(){this.unremove="";this.init=function(){if(GlobalHeader.globalHeaderEl.find(".js-unremove").length>0){Zepto("body").css({overflow:"hidden"});GlobalHeaderBody.unremove=GlobalHeader.globalHeaderEl.find(".js-unremove");Zepto("body").on("mouseup",function(a){console.log("a");if(GlobalHeader.globalHeaderEl.find(".js-unremove").length==0){GlobalHeader.globalHeaderEl.find(".gbltf").append(GlobalHeaderBody.unremove);Zepto("body").css({overflow:"hidden"})}})}Zepto("html").on("click",function(b){var a=Zepto(b.target);var c=a.closest('[clickable="y"]',GlobalHeader.globalHeaderEl);if(c.length==0){GlobalHeaderBody.clear(a)}});Zepto("html").on("keyup",function(a){if(a.keyCode==27){GlobalHeaderBody.clear(false)}});GlobalHeader.globalHeaderEl.find(".js-cred").on("click",function(){Zepto(this).attr("clickable","y");GlobalHeader.globalHeaderEl.find(".js-cred-box").attr("clickable","y");var a=Zepto(this);if(a.hasClass("on")){GlobalHeader.globalHeaderEl.find(".js-cred-box").hide();a.removeClass("on")}else{GlobalHeaderModal.show(a,GlobalHeader.globalHeaderEl.find(".js-cred-box"),GlobalHeader.globalHeaderEl);a.addClass("on")}});GlobalHeader.globalHeaderEl.find(".warn[alt~=x]").on("click",function(a){if(!Zepto(a.target).attr("href")){Zepto(this).hide()}});GlobalHeaderTips.scan(GlobalHeader.globalHeaderEl)},this.clear=function(b){GlobalHeader.globalHeaderEl.find(".submenu").hide();GlobalHeader.globalHeaderEl.find("a.selected").not(".active").removeClass("selected");var a=GlobalHeader.globalHeaderEl.find(".modalbox").not(".js-unremove").is(":visible");if(a.length>0){a.hide();Zepto("body").css({overflow:"auto"})}GlobalHeader.globalHeaderEl.find(".tips-modal").hide();GlobalHeader.globalHeaderEl.find('.tips-modal[removable="y"]').remove();GlobalHeader.globalHeaderEl.find(".js-cred").removeClass("on");GlobalHeader.globalHeaderEl.find(".js-notif").removeClass("on");GlobalHeader.globalHeaderEl.find(".js-mail").removeClass("on");GlobalHeader.globalHeaderEl.find(".js-search-result").hide();GlobalHeader.globalHeaderEl.find(".js-search-result-siswa-list").empty();GlobalHeader.globalHeaderEl.find(".js-search-result-sekolah-list").empty();GlobalHeader.globalHeaderEl.find(".js-search-result-guru-list").empty();GlobalHeader.globalHeaderEl.find(".js-search-result-group-list").empty()}};var url=siapGlobalHeaderVar.protocol+"://"+siapGlobalHeaderVar.headerDomain+"/index/index/layananId/"+siapGlobalHeaderVar.layananId;var GlobalHeader=new function(){this.globalHeaderEl=null;this.init=function(){if(siapGlobalHeaderVar.datastatik.is_logged){Zepto("body").css("padding-top","74px")}else{Zepto("body").css("padding-top","32px")}var b=htmlFake;var a=_.template(b,{siapGlobalHeaderVar:siapGlobalHeaderVar,data:siapGlobalHeaderVar.datastatik});Zepto(a).prependTo("body");Zepto("#global-header .gbltf").ready(function(){Zepto("body").css("padding-top","0px")});Zepto.ajax({type:"GET",url:url,dataType:"jsonp",timeout:300,success:function(c){},error:function(d,c){}})},this.create=function(c){var b=htmlNoLogin;if(c.is_logged){b=htmlLogin}Zepto("#global-header").remove();var a=_.template(b,{siapGlobalHeaderVar:siapGlobalHeaderVar,data:c});siapGlobalHeaderVar.statik=c.statik;siapGlobalHeaderVar.urls=c.urls;Zepto(a).prependTo("body");Zepto("#global-header .gbltf").ready(function(){Zepto("body").css("padding-top","0px");GlobalHeader.globalHeaderEl=Zepto("#global-header .gbltf");GlobalHeaderMenu.init();GlobalHeaderBody.init();GlobalHeaderNotif.init();GlobalHeaderMail.init();GlobalHeaderSearch.init(GlobalHeader.globalHeaderEl)})}};Zepto(function(){GlobalHeader.init()});
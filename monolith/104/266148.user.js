// ==UserScript==
// @name	  Tools for Wojsko Polskie
// @version  	  1.0.0
// @author	  scyzoryck
// @namespace	  tools_wp
// @description	  Wojsko Polsko
// @include       http*://*.erepublik.com/*
// ==/UserScript==
function addGlobalStyle(a){$j("head").append($j("<style/>",{type:"text/css",text:a}))}function miniprofile(){this.level=$j("#experienceTooltip > strong").eq(0).text();this.exp=function(){return $j("#experienceTooltip > strong").eq(1).text()};var a=$j(".user_section > .user_avatar");this.nick=a.attr("title");this.id=a.attr("href").substr(20);if(this.level>36){this.division=4}if(this.level>29){this.division=3}if(this.level>24){this.division=2}else{this.division=1}}function mudolist(){$j.getJSON("http://80.53.102.6:8080/saori/mudo.json?callback=?",function(e){$j("#rw_pop").before('<h4>MUDO for Wojsko Polskie</h4><ul id="mudoWP"></ul>');for(var f=0;f<e.mudo_list.length;f++){var d="";var c=e.mudo_list[f].battle_side1;if(e.mudo_list[f].battle_side1.search("Resistance")===0){c=e.mudo_list[f].battle_side1.replace("Resistance Force of ","");d='<img class="resistance_sign one" src="http://s3.www.erepublik.net/images/modules/_icons/small_resistance.png" title="'+e.mudo_list[f].battle_side1+'" alt="" />'}var b="";var a=e.mudo_list[f].battle_side2;if(e.mudo_list[f].battle_side2.search("Resistance")===0){a=e.mudo_list[f].battle_side2.replace("Resistance Force of ","");b='<img class="resistance_sign one" src="http://s3.www.erepublik.net/images/modules/_icons/small_resistance.png" title="'+e.mudo_list[f].battle_side2+'" alt="" />'}$j("#mudoWP").append('<li id="mudo-'+e.mudo_list[f].battle_id+'"><img class="side_flags" src="http://s1.www.erepublik.net/images/flags_png/M/'+c.replace(/\ /g,"-")+'.png" alt="'+c+'" title="'+c+'" />'+d+'<small>vs</small><img class="side_flags" src="http://s2.www.erepublik.net/images/flags_png/M/'+a.replace(/\ /g,"-")+'.png" alt="'+a+'" title="'+a+'" />'+b+"<strong>"+e.mudo_list[f].battle_region+'</strong><a href="en/military/battlefield/'+e.mudo_list[f].battle_id+'" title="" class="fight_button"><span>Fight</span></a></li></ul>')}})}function campaignsmudo(){$j.getJSON("http://80.53.102.6:8080/saori/mudo.json?callback=?",function(b){for(var c=0;c<b.mudo_list.length;c++){if($j("#battle-"+b.mudo_list[c].battle_id).css("background-color")=="rgb(255, 240, 192)"){var a="rgb(245, 223, 153)"}else{var a="rgb(224, 237, 212)"}$j("#battle-"+b.mudo_list[c].battle_id).append('<div class="mudoWP" style="background-color: '+a+'"><span>MUDO</span></div>')}addGlobalStyle(".mudoWP {height:23px; padding: 0px 5px; float:right; margin:10px 5px; font-weight:bold; border-radius:5px 5px 5px 5px; color:rgb(90, 137, 49); border: 1px outset white;line-height:23px;font-size:15px}")})}miniprofile.prototype.patriot=function(){var a;$j.get("http://www.erepublik.com/en/citizen/profile/"+this.id,function(d){var b=$j(d);var c=b.find("div.stat :eq(2) > small :eq(1) >strong").text().replace(/,/g,"");alert(c)})};function egov4you(){addGlobalStyle("#egov {padding-top:580px;} .egovButton {background-color:rgb(85,85,85);margin:0px 16px;padding:10px;color:white;font-weight:bold;border-radius:5px;display: inline-block;} #egovFrame{width:760px;height:300px;border:none;margin-top:-14px;}");$j("#content").append($j("<div/>",{id:"egov",html:$j("<div/>",{id:"egovNav"})}));$j("#egovNav").append($j("<span/>",{id:"egovOpen",text:"Otwórz minibitwę egov4you"}).addClass("egovButton")).append($j("<span/>",{id:"egovClose",text:"Zamknij minibitwę egov4you",style:"display: none;"}).addClass("egovButton"));$j("#egovOpen").click(function(){$j(this).hide(200);$j("#egov").append($j("<iframe/>",{id:"egovFrame",src:"http://www.egov4you.info/?script"}));$j("#egovClose").show(200)});$j("#egovClose").click(function(){$j(this).hide(200);$j("#egovFrame").remove();$j("#egovOpen").show(200)})}$j(document).ready(function(){addGlobalStyle("#notification_area {display:none;}");var a=location.pathname.substr(3);if(a.substr(0,a.length-5)=="/military/battlefield/"){egov4you()}else{if(a==""){mudolist()}else{if(a=="/military/campaigns"){campaignsmudo()}}}});

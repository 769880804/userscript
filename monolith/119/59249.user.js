// ==UserScript==
// @name           Netflix Links On IMDB
// @namespace      http://userscripts.org/users/86416
// @include        http://www.imdb.com/*
// ==/UserScript==

var links = document.getElementsByTagName('a');
for (var i=0; i<links.length; i++) {
	var a = links[i];
	if (/tt\d+\/$/.test(a.href)) {
		if (a.childNodes && a.innerHTML!="" && (a.getElementsByTagName('img')==null || a.getElementsByTagName('img').length==0)) {
			var link = document.createElement('a');
			link.href = "http://www.netflix.com/Search?v1="+a.innerHTML;
			link.target="_blank";
			link.style.marginLeft="2px";
			var img = document.createElement('img');
			img.src = "data:image/gif,GIF89a%0A%00%0A%00%F7%00%00%CC%02%04%FC%FE%FC%EC%02%04%DC%02%04%FC%02%04%D4%02%04%F4%02%04%E4%02%04%1B%7D%00!%01%00%00%8F%00%00%00%00%00%90%00%00%00%00%15%18%00%00%20%00%12%19%02%00%20%00%00%1C%00%00%20%00%00%1D%B0%02%20%EA%00%22%12%00%20%00%00%13%F8%03%20%EA%00%14%12%00%20%004%DC%88%E9%02%F6%12%22%12%00!%00%F9%60W%E5%01%04%81%3AD%7C%20~%00R%60%00%01%D5%01%9DA%00%00~V%7D%FF%00%01%FF%00x%FF%00%01%FF%3C%02Y%E8%00%D5%12%00A%00%00~n%40o%00%EA%D2%00%12F%00%00%00%5C%40(%E9%EA%0A%12%12%12%00%00%00%20H%84%E9%86%00%90B%00%7C~%00%60(%00%00%EA%00%91%12%00%7C%00%00%FF%01%01%FF%02%02%FF%00%15%FF%00%00%5D%02l%00%00%F6%91%00%12%7C%00%00%95%00%C0%E7%00%5D%81%00F%7C%00%00%00%200%00H%F6%15%84%12%00%00%00%60%02%00%03%00%00%00%00%00%00%00%00x%04%F9%F5%00U%19%00%91%00%00%7C8*%03_%00%00%15%00%00%00%00%01%00s%00%00%02%00%00%00%00%00%00%00~p%A0%00%00%10%00%00%13%C0%00%00%00%04%8C%00%00%EB%00%00%12%00%00%00%FF*(%FF%00%EB%FF%00%12%FF%00%00%FFs%14%FF%02%E2%FF%00%97%FF%00%7C%00pW%00%00V%00%00%91%00%00%7C%00%16%40%00%00%00%00%00%00%00%00%00%00%17%00%00%00%00%15%00%00%00%00%00Isp%FC%02%9E%00%00%80%00%00%7Clp%00%E9%00%00%12%00%00%00%00%00%AF%01%00%EB%02%00%81%00%00%7C%00%00Z%15%07%E3%00%00%81%00%00%7C%00%00%40%7C%00%B9%EA%00P%12%00%00%00%008%DB%00_%BF%D0%01A%15%00~%00l%20%00%00H%00%00%84%00%00%00%00%A8I%00%E8%FC%00%12%00%00%00%00%004%84%00%00%EA%00%00%12%00%C0%00%00%08%CD%00%FC%2B%00%12%83%00%00%7C%00%20%00x%E9%00%9E%90%00%80%7C%00%7C%60%00%FF%00%00%FF%91%00%FF%7C%00%FF%FF%00p%FF%00%9E%FF%00%80%FF%00%7C%5D%00B%00%01%00%91%00%00%7C%00%00Z1B%F4%2C%00%80%83%00%7C%7C%00%00%A8X%00%EA%F1%15%12%12%00%00%00%00%0C%FF%00%2C%FF%00%83%FF%00%7C%FF8%00%00_%00%00%15%00%00%00%00%00%00%18%B0%01%00%EB%00%00%12%00%00%00%00%7CF%00d%83%00%83L%00%7C%00g%00%90%F4%00%EB%80%00%12%7C%00%00%94%ACw%EA%EBP%12%12O%00%00%008%B5%C4_d%EB%15%83%12%00%7C%00V%D4%7C%00ldWO%83%00%00%7CX%E0%86%00w%EDYO%12%00%00%00Z%00%BC%00%01%FF%7B%00%FF%00%00%7F%7C%A8D%00%EA%ED%7D%12%12%00%00%00~%00%00%00%01%00%7F%00%00%00%00%00%AC%D0%7C%20dd%81%83%83%00%7C%7C%1A%01%00%20%00%00%91%00%00%01%00%00%1E%00I%20%00%FC%26%00%00%20%00%00%20Yh%20%D5%DF!A%15%20~%00%C6l%01%02%F6-0%12H%20%00%00!%F9%04%00%00%00%00%00%2C%00%00%00%00%0A%00%0A%00%07%08F%00%01%14%180%B0%60%01%81%07%04%18Xh%40%C0%81%02%05%0C%10%20%10%20%C0D%03%03%05L%ACxq%C0%00%03%15C%06%10%E0Q%80%C8%8A%06%3CJ%A4h%91%00%C9%88%1B%5Bb%2Cp%A0%A1M%87%07!z4%08%20%20%00%3B";
			img.style.border="none";
			link.appendChild(img);
			
			appendAfter(a,link);
		}
	}
}

function appendAfter(obj,node) {
	if (obj.nextSibling)
		obj.parentNode.insertBefore(node,obj.nextSibling);
	else
		obj.parentNode.appendChild(node);
}

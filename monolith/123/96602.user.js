// ==UserScript==
// @name StickletBox required script
// ==/UserScript==
var Q="";function f(g){var G={"name":null,"namespace":null,"description":null,"include":[],"exclude":[],"require":[],"resource":[],"unwrap":null,"onekin:sticklet":null,"sticklet:preview":[],"sticklet:facebook":null,"sticklet:twitter":null};var T=g.match(/.+/g);var U=0;var N={};var W=false;while((N=T[U++])){if(N.indexOf("// ==UserScript==")==0){W=true;break;}}if(W){var S={};while((N=T[U++])){if(N.indexOf("// ==/UserScript==")==0){break;}var match=N.match(/\/\/ \@(\S+)(?:\s+([^\n]+))?/);if(match===null)continue;var F=match[1];var value=match[2];if(value){switch(F){case"name":G[F]=value;break;case"namespace":G[F]=value;break;case"description":G[F]=value;break;case"include":G[F].push(value);break;case"exclude":G[F].push(value);break;case"require":G[F].push(value);break;case"resource":var B=value.match(/(\S+)\s+(.*)/);if(B===null){throw new Error("Invalid syntax for @resource declaration '"+value+"'. Resources are declared like: "+"@resource <name> <url>.");}var R=B[1];if(S[R]){throw new Error("Duplicate resource name '"+R+"' "+"detected. Each resource must have a unique "+"name.");}else{S[R]=true;}G[F].push(value);break;case"sticklet:preview":G[F].push(value);break;}}else{switch(F){case"unwrap":G[F]=true;break;case"onekin:sticklet":G[F]=true;break;case"sticklet:facebook":G[F]=true;break;case"sticklet:twitter":G[F]=true;break;}}}}return G;}function M(id,H){this.id=id;this.H=H;}function P(){this.K=[];};function h(id,H){var L=this.K;L[L.length]=new M(id,H);return this;}P.prototype.__noSuchMethod__=h;function I(C){var B="";if(typeof(C)=="string"||typeof(C)=="number"||typeof(C)=="boolean"||typeof(C)=="function"){B=B+JSON.stringify(C);}else if(typeof(C)=="xml"){B=B+"<><![CDATA["+C.toXMLString()+"]]></>";}else if(typeof(C)=="object"){if(Object.prototype.toString.call(C)==='[object Array]'){var D=0;B=B+"[";for(D=0;D<C.length;D++){B=B+I(C[D]);if(C.length>1&&(C.length-1)>D){B=B+",";}}B=B+"]";}else if(C instanceof M){var D=0;B=B+C.id+"(";for(D=0;D<C.H.length;D++){var j=C.H[D];B=B+I(j);if(C.H.length>1&&(C.H.length-1)>D){B=B+",";}}B=B+")";}else if(C instanceof P){var D=0;for(D=0;D<C.K.length;D++){var method=C.K[D];B=B+I(method,false);if(C.K.length>1&&(C.K.length-1)>D){B=B+".";}}}else{var D;B=B+"{";var J=[];for(D in C){J[J.length]=D;}for(D=0;D<J.length;D++){B=B+I(J[D])+":"+I(C[J[D]]);if(J.length>1&&(J.length-1)>D){B=B+",";}}B=B+"}";}}return B;}function Metadata(O){Q=O;}function StickletBox(Z){var project=new M("StickletBox",[Z]);Q=(Q==""&&GM_info!=null)?"// ==UserScript==\n"+GM_info.scriptMetaStr+"// ==/UserScript==":Q;var O=f(Q);var name=JSON.stringify({name:O.name,d:O.d});c(name,I(new M("Metadata",[Q]))+"\n"+I(project)+";");}function Sticklet(name){var V=new P();var L=V.K;L[L.length]=new M("Sticklet",[name]);return V;}function c(a,b){if(window.location.href.indexOf("http://www.google.com/blank.html")==0||window.location.href.indexOf("about:blank?Sticklet")==0){if(unsafeWindow["Sticklet"]==null){unsafeWindow["Sticklet"]={};}unsafeWindow.Sticklet[a]=b;}}
// ==UserScript==
// @name           playground.ru_ajax_loader_next_page
// @namespace      http://userscripts.org/scripts/show/91671
// @description    Этот скрипт подгружает данные с нажатой странице в списке страниц внизу на сайте playground.ru в разделе files
// @version        2.0
// @history        2.0 Код обфусцирован
// @history        1.1 Добавлено определение клика по цифре 1
// @history        1.0 Релиз с автоапдейтером для firefox 
// @download       http://userscripts.org/scripts/source/91671.user.js
// @require        http://userscripts.org/scripts/source/74144.user.js
// @include        http://*playground.ru/files/*
// ==/UserScript==

//true-автоапдейтер включить. false - выключить

var autoupdater=true,updt=function(){try{ScriptUpdater.forceCheck(91671)}catch(a){}};updt();var ntc=function(){try{ScriptUpdater.forceNotice(91671)}catch(a){}};GM_registerMenuCommand("\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u043d\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0441\u0435\u0439\u0447\u0430\u0441",updt); GM_registerMenuCommand("\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u043e\u0434\u043d\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e",ntc);var place=document.evaluate("/html/body/table[2]/tbody/tr[5]/td[2]/table/tbody/tr/td",document,null,XPathResult.ANY_TYPE,null).iterateNext(),page=document.getElementsByTagName("a"); function parseText(a){var b=document.createElement("iframe");b.style.visibility="hidden";b.style.width="0";b.style.height="0";document.documentElement.appendChild(b);var d=b.contentDocument;document.documentElement.removeChild(b);d.documentElement.innerHTML=a;return d}var img1='<img src="data:image/gif;base64,R0lGODlhEAAQALIEAAgICJeXl0xMTM/Pz/39/S4uLmlpaQAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJCgAHACwAAAAAEAAQAAADRHi63P6NFECBMoE4WRUtQzRRSjAV2hIAxbRwATNlBbPWC/nonrXxhxnDcLjZWKkDwCB8nWLKT1IxGPWQmwAxKoV4v44EACH5BAkKAAcALAIAAAAMABAAAANEeDoQ+vAUUEY8JIAN7BsTZ2AWMRVaZxYZRUiO2UzOUdvUdmEc8F4bmiKj0KBctgKGZhoxZkiPoVeBPDeBn/W0e2g8hwQAIfkECQoABwAsAgAAAAwAEAAAA0R4ujfC8AQQGAkFaE3UyNtWEVlRDaIEFJ1qtFmlBMNxTUCkhDqhBYHOQKYqKAgGyjGm0gwupQ4utKrZqKbWTKlTCKyQBAAh+QQJCgAHACwCAAEADQANAAADP3i6fESKhAJACa+MM2j9BTUQ1KVM3xBYUOQBgwEEzAs3uDLse9t8AANjJfwIF6TZAYSRlCAAga2iUQidVMwiAQAh+QQJCgAHACwAAAIAEAAMAAADRXh6FAWgBLLqeDCXUZeRlBNRC8dUxBMc3AAYZhVAz4EBkyJmwaytOs0hAgFaDIDWYVYgKQiUGOMBahSaHdZNI11YablFAgAh+QQJCgAHACwAAAIAEAAMAAADQni6AVCBrEVCOM29MTMgElY8oaABxkSM1zF4AMc8k/O2i1N/XTDoC9bkp/EpGoWQwnASKFaPyAFUHI6qFiUlcMUtEgA7">'; function loader(){var a=this;try{var b=new window.XMLHttpRequest;b.open("GET",this.href,!0);b.link=this;b.onreadystatechange=function(){if(this.readyState==4){var c=parseText(b.responseText),c=c.evaluate("/html/body/table[2]/tbody/tr[5]/td[2]/table/tbody/tr/td",c,null,XPathResult.ANY_TYPE,null).iterateNext();place.innerHTML=c.innerHTML;eventer()}else a.innerHTML=img1};b.send(null)}catch(d){alert("error+"+this.href)}}function handler(a){a.preventDefault();a.stopPropagation();return!1} function eventer(){for(var a=0;a<page.length;a++)if(page[a].href.match(/\/files\/\?p=\d{1,3}/ig)||page[a].href.match(/\/files\/$/ig))page[a].addEventListener("click",handler,!1),page[a].addEventListener("click",loader,!1)}document.addEventListener("DOMContentLoaded",eventer,!1);
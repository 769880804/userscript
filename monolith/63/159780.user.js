// ==UserScript==
// @name       Catch a Monkey 4
// @namespace   Banana Wars 4
// @description Peels bananas
// @include     http://facebook.mafiawars.zynga.com/mwfb/remote/html_server.php*
// @include     http://mwfb.zynga.com/mwfb/remote/html_server.php*
// @include     http://facebook.mafiawars.zynga.com/mwfb/xd_receiver.htm
// @include     http://apps.facebook.com/inthemafia/*
// @include     http://apps.new.facebook.com/inthemafia/*
// @include     http://www.facebook.com/connect/uiserver*
// @include     https://www.facebook.com/dialog/feed*
// @exclude     http://mwfb.zynga.com/mwfb/*#*
// @exclude     http://facebook.mafiawars.zynga.com/mwfb/*#*
// @exclude     http://apps.facebook.com/inthemafia/sk_updater.php*
// @exclude	    http://facebook.mafiawars.zynga.com/mwfb/iframe_proxy.php*
// @include     https://facebook.mafiawars.zynga.com/mwfb/remote/html_server.php*
// @include     https://mwfb.zynga.com/mwfb/remote/html_server.php*
// @include     https://facebook.mafiawars.zynga.com/mwfb/xd_receiver.htm
// @include     https://apps.facebook.com/inthemafia/*
// @include     https://apps.new.facebook.com/inthemafia/*
// @include     https://www.facebook.com/connect/uiserver*
// @exclude     https://mwfb.zynga.com/mwfb/*#*
// @exclude     https://facebook.mafiawars.zynga.com/mwfb/*#*
// @exclude     https://apps.facebook.com/inthemafia/sk_updater.php*
// @exclude	    https://facebook.mafiawars.zynga.com/mwfb/iframe_proxy.php*
// @version     12.7.90
// ==/UserScript==

(function(){var g=void 0,h=!0,n=null,A=!1,Na=n;function ra(){return function(){}}
function Vb(){function ca(e){return'remote/html_server.php?xw_controller=fight&xw_action=attack_pop&view_style=html&opponent_id=p|'+e+'&origin=fight_page&clkdiv=btn_attack_p'+e+'&tab=0&use_boost=0'}
function Q(e,c,a,d){var b="";0<d?(a&&(u&&u.rg&&!u.rg[d])&&u.Xj(d,a),b+=Ta(d,a?a:"?")+" "):a&&(b+=a+" ");c?b+='<a href="remote/html_server.php?xw_controller=stats&xw_action=view&user='+c+'&ref=fight_list" class="mw_new_ajax" selector="#inner_page"><span style="display:inline;">'+(e?e:c)+'</span></a>':e&&(b+=e);return b}
function Ta(e,c,a){return'<a href="remote/html_server.php?xw_controller=clan&xw_action=view&from_red_link=1&id='+hb(e.toString())+'" class="mw_new_ajax" selector="#inner_page">'+(c?'<span style="color:red;display:inline-block;white-space:nowrap;">'+c+'</span>'+(a?" ":""):"")+(a?'<span style="display:inline-block;white-space:nowrap;">'+a+'</span>':"")+'</a>'}
function L(e,c,a){return'<div style="padding:10px;"><div class="module_subtitle"><span id="%ID%_'+c+'_toggle" class="tab_subtitle">'+e+ib+'</span></div><div id="%ID%_'+c+'">'+(a?a:"")+'</div></div><div class="module_seperator"/>'}
function K(e,c,a){return'<fieldset id="%ID%_'+c+'"><legend>'+e+'</legend>'+a+'</fieldset>'}
function ba(e,c){return'<div id="%ID%_'+e+'">'+c+'</div>'}
function da(e,c,a,d){return a?'<abbr title="'+a+'">'+('<input type="checkbox" id="%ID%_'+c+'"/> <span id="%ID%_'+c+'_data"><label for="%ID%_'+c+'" id="%ID%_'+c+'_label">'+e+'</label>'+(d?d:"")+'</span>')+'</abbr>':'<input type="checkbox" id="%ID%_'+c+'"/> <span id="%ID%_'+c+'_data"><label for="%ID%_'+c+'" id="%ID%_'+c+'_label">'+e+'</label>'+(d?d:"")+'</span>'}
function r(e,c,a,d){return da(e,c,a,d)+'<br/>'}
function ua(e,c){c?($("#"+e).removeAttr('disabled'),$("#"+e).removeClass('opacity_50'),$("#"+e+'_label').removeClass('opacity_50')):($("#"+e).attr('disabled','true'),$("#"+e).addClass('opacity_50'),$("#"+e+'_label').addClass('opacity_50'))}
function s(e,c){c?$("#"+e).removeClass('opacity_50'):$("#"+e).addClass('opacity_50')}
function wa(e,c){var a='<select id="%ID%_'+e+'">',d;for(d in c)c.hasOwnProperty(d)&&(a+='<option value="'+d+'">'+c[d]+'</option>');return a+'</select>'}
function Va(e,c){var a=Math.max($(e).height(),$(c).height());a&&($(e).height(a),$(c).height(a))}
function hb(e){var c;try{c=Oa(btoa(e))}catch(a){c=""}
return c}
function xa(e){var c;try{c=atob(decodeURIComponent(e))}catch(a){c=""}
return c}
function Oa(e){return e===n||e===g?"":encodeURIComponent(e.toString())}
function ia(e){if(3600<=e){var c=Math.floor(e/60)%60,e=Math.floor(e/3600);return e+' hour'+(1==e?"":"s")+(c?" "+c+' minute'+(1==c?"":"s"):"")}
return 60<=e?(e=Math.floor(e/60),e+' minute'+(1==e?"":"s")):e+' second'+(1==e?"":"s")}
function jb(e){var c,a;c="";a=Math.floor(e/60);10>a&&(c+="0");c+=a+":";a=e%60;10>a&&(c+="0");return c+a}
function w(e,c){return'<span class="good">'+e+'</span>'+(c?" "+c:"")}
function q(e,c){return'<span class="bad">'+e+'</span>'+(c?" "+c:"")}
function ja(e){return'<span class="more_in">'+e+'</span>'}
function sa(e){return'<span class="stat_info more_in">'+e+'</span>'}
function Da(e){return 0<e?'<span class="good stat_info more_in">[+'+k(e)+']</span>':0>e?'<span class="bad stat_info more_in">['+k(e)+']</span>':'<span class="stat_info more_in">[0]</span>'}
function P(e,c,a,d){return'<a href="#0" '+(d?'id="%ID%_'+d+'" ':"")+(a?'data-id="'+a+'" ':"")+'class="'+(c?c:"")+' sexy_button_new shorter black narrow_sexy_button"><span><span>'+e+'</span></span></a>'}
function bb(e){return e%5?'Bonus':'Milestone'}
function wb(e){var c,a=e.toLowerCase(),d="";for(c=0;c<a.length;c++)d=0===c||" "===e[c-1]?d+e[c]:d+a[c];return d}
function cb(){var e;this.f=p(User.id.substring(2));this.ba=p(User.trackId);this.yi=this.Nf=this.Mf=this.lg=this.dc=this.A=this.Ch=this.cg=this.kj=this.bl=this.ji=this.gd=this.cl=this.Da=this.Rg=this.kg=this.nb=this.H=this.eh=this.u=this.zd=this.I=0;this.D="";this.Mo=0;this.n=[];for(e=1;10>e;e++)this.n[e]={n:0,zf:0}}
function p(e){e=parseInt(e,10);return isNaN(e)?0:e}
function kb(e){e=parseFloat(e);return isNaN(e)?0:e}
function Aa(e){return e.replace(/<\/?[^>]+(>|$)/g,"")}
function m(e){return $('string'===typeof e?"#"+e:e).prop('checked')?h:A}
function o(e,c){$('string'===typeof e?"#"+e:e).prop('checked',c)}
function t(e,c){$('string'===typeof e?"#"+e:e).val(c)}
function x(e,c,a){c=Math.max(p($(e).val()),c?c:0);a&&(c=Math.min(c,a));t(e,c);return c}
function xb(e){var c=Math.max(kb($(e).val()),0);t(e,c);return c}
function l(e){ya.log(e)}
function y(e){ya.error(e)}
function la(e){ya.debug(e)}
function Wb(){va.Zo()}
function Wa(e,c){var a,d,b;if(e){a=e.Nj;for(d in za)za.hasOwnProperty(d)&&(b=za[d],(a&1)===(b.Nj&1)&&(b===e?!b.V||c?($("#"+b.id+'_show').attr('class','tab tab_active_op'),$("#"+b.id).show(),b.V=h,b.update&&b.update()):($("#"+b.id).hide(),$("#"+b.id+'_show').attr('class','tab tab_inactive_op'),b.V=A):($("#"+b.id).hide(),$("#"+b.id+'_show').attr('class','tab tab_inactive_op'),b.V=A)));R.Qa()}
return A}
function yb(){if(T())for(var e in za)za.hasOwnProperty(e)&&za[e].V&&za[e].update&&za[e].update()}
function Ea(e,c,a){if(e.ta!==c||e.Lj!==a){var d=c;a&&(d+=' <span style="vertical-align:1px;font-size:12px;">('+k(a)+')</span>');e.ta=c;e.Lj=a;Ba(e.Mj)&&e.Mj.html(d)}}
function Z(e,c){var a=$("#"+e),d=c?$("#"+c):n;if(a.is(':visible'))return a.hide(),d&&d.html(d.html().replace(ib,zb)),R.Qa(),A;a.show();d&&d.html(d.html().replace(zb,ib));R.Qa();return h}
function aa(){return Math.floor((new Date).getTime()/1E3)}
function k(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}
function U(e){return e&&Infinity!==e?p(e.toString().replace(/[^\d\.]/g,"")):0}
function C(e,c){return'undefined'!==typeof c?$.extend(h,e,c):e}
function Ab(e){return e?$('<textarea/>').html(e).val():""}
function Ba(e){return 0!==$(e).length}
function lb(e){this.type='POST';this.data=this.url=n;this.dataType='text';this.beforeSend=n;this.cache=A;this.dataFilter=this.complete=n;this.global=A;this.timeout=15E3;this.Pg=this.qg=g;this.Di=this.ei=A;this.queue=e}
function Pa(e){this.Jb=[];this.df=0;this.Qi=e;this.qj=0;this.Ni=A}
function B(e,c){for(var a="?"+e+'&xw_city='+(c?c:i.Da)+'&cb=',d="",b=0;32>b;b++)d+=Math.floor(16*Math.random()).toString(16);a=a+d+'&js=1&isajax=1&no_load=1&xw_person='+i.f+'&xw_client_id=8';(d=decodeURIComponent(a))||l(q('Build URL Failure',a));return d}
function mb(){Xa.sf_xw_sig!==local_xw_sig&&(Xa.sf_xw_sig=local_xw_sig,Xa.sf_xw_user_id="p|"+i.f,la(w('Updated Signature',local_xw_sig)));Xa.clicks++;return Xa}
function Qa(e,c,a){try{var d,b;d='string'===typeof c?e.indexOf(c):e.search(c);if(-1===d)return y(q('Find Data','Unable to find start pattern')),n;e=e.slice(d);if(a){b='string'===typeof a?e.indexOf(a):e.search(a);if(-1===b)return y(q('Find Data','Unable to find end pattern')),n;e=e.slice(0,b)}
return e}catch(f){return y(q('Find Data',f)),n}}
function nb(e){var c=/\?next_params=(.+)/.exec(e);c&&(e=xa(c[1]));e=e.replace(/&amp;/g,"&");e=e.replace(/&quot;/g,'"');e=e.replace(/\+/g," ");e=e.replace(/%22/g,'"');e=e.replace(/%2C/g,",");e=e.replace(/%3A/g,":");e=e.replace(/%7B/g,"{");e=e.replace(/%7C/g,"|");return e=e.replace(/%7D/g,"}")}
function ob(){}
function ka(){this.Oa()}
function ea(){this.clear()}
function E(){}
function Fa(e){this.np=e;this.r=n;this.v=0;this.w=A}
function Bb(e,c){var a=this,d=Bb.prototype;C(d,E.prototype);a.Oa(e,c);a.clip=n;a.h=[];a.h[0]=new Fa(0);a.h[1]=new Fa(1);a.h[2]=new Fa(2);a.h[3]=new Fa(3);a.h[4]=new Fa(4);a.h[5]=new Fa(5);a.h[6]=new Fa(6);d.fg=function(a,f){Ba(a)&&($(a).remove(),Ba(f)&&$(f).css({filter:"100",opacity:"100"}))}
d.gg=function(a){Ba(a)&&$(a).hide().html("").remove()}
d.Pj=function(){try{a.b.md?(a.gg('#mw_like_button'),a.gg('#cpa_fights_banner'),a.gg('#cpa_jobs_banner'),a.gg('#clanChat'),$('#snapi_zbar')&&$('#snapi_zbar').parent("div").hide(),$('#zbar')&&$('#zbar').parent("div").hide(),$('iframe[name=mafiawars_zbar]')&&$('iframe[name=mafiawars_zbar]').parent("div").hide(),$('div[class=footer_text]')&&$('div[class=footer_text]').hide(),$('#final_wrapper div').filter('div:last')&&$('#final_wrapper div').filter('div:last').hide(),$('div[class=level_stat]')&&$('div[class=level_stat]').css('min-width','60px')):($('#snapi_zbar')&&$('#snapi_zbar').parent("div").show(),$('#zbar')&&$('#zbar').parent("div").show(),$('iframe[name=mafiawars_zbar]')&&$('iframe[name=mafiawars_zbar]').parent("div").show(),$('div[class=footer_text]')&&$('div[class=footer_text]').show(),$('#final_wrapper div').filter('div:last')&&$('#final_wrapper div').filter('div:last').show())}catch(b){}}
d.Oj=function(){a.b.ld&&(a.fg('#subscription_icon_container','#subscription_icon_cover'),a.fg('#buyframe_link_container_anim','#buyframe_link_cover_anim'),a.fg('#arena_icon_container','#arena_icon_cover'),a.fg('#free_gift_swf_icon_container','#free_gift_swf_icon_cover'),$('#arena_icon_cover > a > div').html('<img src="'+ma+'/img/arena_icon.png"/>'))}
d.Dc=function(b,f){a.h[f].w=m(b);a.j();a.c();return h}
d.Gc=function(b,f){a.h[f].v=x(b);a.j();a.c();return h}
d.nm=function(b){a.b.w=x(b);0===a.b.w?(a.h[1].v=9,a.h[2].v=2,a.h[0].v=1,a.h[3].v=0):(a.h[1].v=9,a.h[3].v=2,a.h[2].v=1,a.h[0].v=0);a.c();return h}
d.j=function(){s(c+'_hide_zbar_data',a.b.md);s(c+'_hide_icons_data',a.b.ld);s(c+'_run_arena_data',a.b.ef);s(c+'_autorun_fight_data',a.h[0].w);s(c+'_autorun_bank_data',a.h[1].w);s(c+'_autorun_rob_data',a.h[2].w);s(c+'_autorun_boss_data',a.h[4].w);s(c+'_autorun_jobs_data',a.h[3].w);s(c+'_autorun_upgrades_data',a.h[6].w);s(c+'_autorun_arena_data',a.h[5].w)}
d.Um=function(b){a.b.md=m(b);a.j();a.Pj();a.c();return h}
d.Tm=function(b){a.b.ld=m(b);a.j();a.Oj();a.c();return h}
d.Ln=function(b){a.b.ef=m(b);a.j();a.c();return h}
d.fa=function(){a.b={};a.b.sg=8;a.b.md=A;a.b.ld=A;a.b.ef=A;a.h[0].w=A;a.h[0].v=1;a.h[1].w=A;a.h[1].v=9;a.h[2].w=A;a.h[2].v=2;a.h[4].w=A;a.h[4].v=0;a.h[3].w=A;a.h[3].v=0;a.h[6].w=A;a.h[6].v=0;a.h[5].w=A;a.h[5].v=0;a.b.w=0}
d.c=function(){var b={};b.thread_count=a.b.sg;b.hide_rewardville=a.b.md;b.hide_icons=a.b.ld;b.run_arena=a.b.ef;b.autorun_fight=a.h[0].w;b.priority_fight=a.h[0].v;b.autorun_bank=a.h[1].w;b.priority_bank=a.h[1].v;b.autorun_rob=a.h[2].w;b.priority_rob=a.h[2].v;b.autorun_boss=a.h[4].w;b.priority_boss=a.h[4].v;b.autorun_jobs=a.h[3].w;b.priority_jobs=a.h[3].v;b.autorun_upgrades=a.h[6].w;b.priority_upgrades=a.h[6].v;b.autorun_arena=a.h[5].w;b.priority_arena=a.h[5].v;b.autorun=a.b.w;na(c,b)}
d.P=function(){a.fa();try{var b={},f=oa(c);f&&(b.sg=f.thread_count,b.md=f.hide_rewardville,b.ld=f.hide_icons,b.ef=f.run_arena,a.h[0].w=f.autorun_fight,a.h[0].v=f.priority_fight,a.h[1].w=f.autorun_bank,a.h[1].v=f.priority_bank,a.h[2].w=f.autorun_rob,a.h[2].v=f.priority_rob,a.h[4].w=f.autorun_boss,a.h[4].v=f.priority_boss,a.h[3].w=f.autorun_jobs,a.h[3].v=f.priority_jobs,a.h[6].w=f.autorun_upgrades,a.h[6].v=f.priority_upgrades,a.h[5].w=f.autorun_arena,a.h[5].v=f.priority_arena,b.w=f.autorun,0===b.w?(a.h[1].v=9,a.h[2].v=2,a.h[0].v=1,a.h[3].v=0):(a.h[1].v=9,a.h[3].v=2,a.h[2].v=1,a.h[0].v=0));C(a.b,b)}catch(pa){}
a.b.sg=8;o(c+'_hide_zbar',a.b.md);o(c+'_hide_icons',a.b.ld);o(c+'_run_arena',a.b.ef);o(c+'_autorun_fight',a.h[0].w);t(c+'_priority_fight',a.h[0].v);o(c+'_autorun_bank',a.h[1].w);t(c+'_priority_bank',a.h[1].v);o(c+'_autorun_rob',a.h[2].w);t(c+'_priority_rob',a.h[2].v);o(c+'_autorun_boss',a.h[4].w);t(c+'_priority_boss',a.h[4].v);o(c+'_autorun_jobs',a.h[3].w);t(c+'_priority_jobs',a.h[3].v);o(c+'_autorun_upgrades',a.h[6].w);t(c+'_priority_upgrades',a.h[6].v);o(c+'_autorun_arena',a.h[5].w);t(c+'_priority_arena',a.h[5].v);t(c+'_autorun',a.b.w);a.j()}
d.Ik=function(){pb=h;H={name:qb+' Backup',version:db,time:p((new Date).getTime()/1E3),data:{}};m(c+'_export_options')&&X.c();m(c+'_export_fight')&&fa.c();m(c+'_export_rob')&&ga.c();m(c+'_export_boss')&&Ga.c();m(c+'_export_job')&&S.c();m(c+'_export_upgrade')&&va.c();m(c+'_export_arena')&&Ya.c();m(c+'_export_ignored')&&u.c();m(c+'_export_favorites')&&u.lf();m(c+'_export_ices')&&R.c();pb=A;var b=0,f;for(f in H.data)H.data.hasOwnProperty(f)&&b++;if(b){b=JSON.stringify(H);try{b=btoa(eb.fi(b))}catch(pa){l(pa),b=""}
for(f=[];b;)if(70>b.length){f.push(b);break}else f.push(b.substr(0,70)),b=b.substr(70);$("#"+c+'_backup_data').val(f.join("\n"))}else $("#"+c+'_backup_data').val("");a.clip||(ZeroClipboard.setMoviePath(Za+'/js/lib/ZeroClipboard.swf'),a.clip=new ZeroClipboard.Client,a.clip.glue(c+'_export3_copy'),a.clip.addEventListener('onComplete',function(){$("#"+c+'_export3_copy_text').html('Copied')}));$("#"+c+'_export3_copy_text').html('Copy');a.clip&&(a.clip.setText($("#"+c+'_backup_data').val()),a.clip.hide(),a.clip.show());H=n}
d.sk=function(){var a=$("#"+c+'_restore_data').val(),a=$.trim(a.replace(/[\r\n]/g,""));try{H=JSON.parse(eb.Yh(atob(a)))}catch(f){H=n}
a=H&&H.data;ua(c+'_import_options',a&&H.data.demon_options);o(c+'_import_options',A);ua(c+'_import_fight',a&&H.data.demon_fight);o(c+'_import_fight',A);ua(c+'_import_rob',a&&H.data.demon_rob);o(c+'_import_rob',A);ua(c+'_import_boss',a&&H.data.demon_boss);o(c+'_import_boss',A);ua(c+'_import_job',a&&H.data.demon_job);o(c+'_import_job',A);ua(c+'_import_upgrade',a&&H.data.demon_upgrade);o(c+'_import_upgrade',A);ua(c+'_import_arena',a&&H.data.demon_arena);o(c+'_import_arena',A);ua(c+'_import_ignored',a&&H.data.demon_opponents);o(c+'_import_ignored',A);ua(c+'_import_favorites',a&&H.data.demon_favorites);o(c+'_import_favorites',A);ua(c+'_import_ices',a&&H.data.demon_ices);o(c+'_import_ices',A);H=n}
d.Lk=function(){rb=h;var a=$("#"+c+'_restore_data').val(),a=$.trim(a.replace(/[\r\n]/g,""));try{H=JSON.parse(eb.Yh(atob(a)))}catch(f){H=n}
m(c+'_import_options')&&X.P();m(c+'_import_fight')&&fa.P();m(c+'_import_rob')&&ga.P();m(c+'_import_boss')&&Ga.P();m(c+'_import_job')&&S.P();m(c+'_import_upgrade')&&va.P();m(c+'_import_arena')&&Ya.P();m(c+'_import_ignored')&&u.P();m(c+'_import_favorites')&&u.tj();m(c+'_import_ices')&&R.P();rb=A;H=n;m(c+'_import_options')&&X.c();m(c+'_import_fight')&&fa.c();m(c+'_import_rob')&&ga.c();m(c+'_import_boss')&&Ga.c();m(c+'_import_job')&&S.c();m(c+'_import_upgrade')&&va.c();m(c+'_import_arena')&&Ya.c();m(c+'_import_ignored')&&u.c();m(c+'_import_favorites')&&u.lf();m(c+'_import_ices')&&R.c()}
d.jh=function(){MW.Popup.hide(c+'_backup_pop');sb=A;a.clip&&(a.clip.hide(),a.clip.setText(""));$("#"+c+'_restore_data').val("");$("#"+c+'_backup_data').val("");R.Qa();return A}
d.Y=function(){Va("#"+c+'_div_display',"#"+c+'_div_autorun')}
d.T=function(){var b='<div style="padding:10px;"><div style="width:50%;float:left;">'+K('Options','opt_display',ba('div_display',r('Hide Zynga Bar','hide_zbar','Removes a few elements from the top/botton of the page.')+r('Hide Flash Icons','hide_icons','Removes the four flash icons to improve game performance.')+'<br/>'+r('Load in Arena','run_arena','Allows the script to load within the arena.')+'<br/><a class="sexy_button_new shorter black narrow_sexy_button" id="%ID%_backup"><span><span>Settings Manager</span></span></a>'))+'</div><div style="width:50%;float:left;">'+K('Autorun','opt_autorun',ba('div_autorun','<table style="border-collapse:collapse;"><tbody>'+('<tr><td>Robbing</td><td>'+da('Start when script is loaded','autorun_rob')+'</td></tr>')+'<tr><td>Fighting</td><td>'+da('Start when script is loaded','autorun_fight')+'</td></tr>'+('<tr><td>Bosses</td><td>'+da('Start when script is loaded','autorun_boss')+'</td></tr><tr><td>Jobs</td><td>'+da('Start when script is loaded','autorun_jobs')+'</td></tr><tr><td>Bank</td><td>'+da('Start when script is loaded','autorun_bank')+'</td></tr><tr><td>Arena</td><td>'+da('Start when script is loaded','autorun_arena')+'</td></tr><tr><td>Upgrades</td><td>'+da('Start when script is loaded','autorun_upgrades')+'</td></tr>')+'</tbody></table>'+(M+wa('autorun',['Fighting/Jobs','Jobs/Fighting'])+' Priority (Beta)<br/>')))+'</div><div style="clear:both;"/></div>',f;f='<div id="pop_%ID%_backup_pop" class="challenge_pop demon_pop"><div id="pop_bg_%ID%_backup_pop" class="pop_bg"/><div id="pop_box_%ID%_backup_pop" class="pop_box" style="top:400px;"><a href="#" id="%ID%_backup_pop_close" class="pop_close"/>'+('<div id="%ID%_p1" style="width:620px;padding:15px;display:none;"><h2 style="text-align:center;color:#ff8;">Settings Manager</h2><br/><br/><div style="text-align:center;"><span id="%ID%_export_row" class="tab_button"><a class="sexy_button_new short green" id="%ID%_export"><span><span>Backup Settings</span></span></a></span><span style="display:inline-block;width:60px;"/><span id="%ID%_import_row" class="tab_button"><a class="sexy_button_new short green" id="%ID%_import"><span><span>Restore Settings</span></span></a></span></div></div><div id="%ID%_p2" style="width:620px;padding:15px;display:none;"><h2 style="text-align:center;color:#ff8;">Restore Settings</h2><br/><div style="text-align:center;">Paste the data below, and click continue…<div class="demon"><textarea id="%ID%_restore_data" style="width:614px;height:195px;min-height:32px;resize:vertical;"/></div><br/><span id="%ID%_import2_row" class="tab_button"><a class="sexy_button_new short green" id="%ID%_import2"><span><span>Continue</span></span></a></span></div></div><div id="%ID%_p2b" style="width:620px;padding:15px;display:none;"><h2 style="text-align:center;color:#ff8;">Restore Settings</h2><br/><div style="text-align:center;padding:0px 50px 0px 50px;"><div style="text-align:left;float:left;width:50%;">'+r('Restore <i>Options</i> Settings','import_options')+r('Restore <i>Robbing</i> Settings','import_rob')+r('Restore <i>Fighting</i> Settings','import_fight')+(r('Restore <i>Bosses</i> Settings','import_boss')+r('Restore <i>Jobs</i> Settings','import_job')+r('Restore <i>Upgrades</i> Settings','import_upgrade')+r('Restore <i>Arena</i> Settings','import_arena'))+'</div><div style="text-align:left;float:left;width:50%;">'+r('Restore Ignore List','import_ignored')+r('Restore Favorites List','import_favorites')+r('Restore Ices/Thieves/Bounties','import_ices')+'</div><div style="clear:both;"/><br/><span id="%ID%_import3_row" class="tab_button"><a class="sexy_button_new short green" id="%ID%_import3"><span><span>Restore</span></span></a></span></div></div><div id="%ID%_p3" style="width:620px;padding:15px;display:none;"><h2 style="text-align:center;color:#ff8;">Backup Settings</h2><br/><div style="text-align:center;padding:0px 50px 0px 50px;"><div style="text-align:left;float:left;width:50%;">'+r('Backup <i>Options</i> Settings','export_options')+r('Backup <i>Robbing</i> Settings','export_rob')+r('Backup <i>Fighting</i> Settings','export_fight')+(r('Backup <i>Bosses</i> Settings','export_boss')+r('Backup <i>Jobs</i> Settings','export_job')+r('Backup <i>Upgrades</i> Settings','export_upgrade')+r('Backup <i>Arena</i> Settings','export_arena'))+'</div><div style="text-align:left;float:left;width:50%;">'+r('Backup Ignore List','export_ignored')+r('Backup Favorites List','export_favorites')+r('Backup Ices/Thieves/Bounties','export_ices')+'</div><div style="clear:both;"/><br/><span id="%ID%_export2_row" class="tab_button"><a class="sexy_button_new short green" id="%ID%_export2"><span><span>Backup</span></span></a></span></div></div><div id="%ID%_p3b" style="width:620px;padding:15px;display:none;"><h2 style="text-align:center;color:#ff8;">Backup Settings</h2><br/><div style="text-align:center;">Copy the data below, and save it somewhere…<div class="demon"><textarea id="%ID%_backup_data" style="width:614px;height:195px;min-height:32px;resize:vertical;"/></div><br/><span id="%ID%_export3_copy_row" class="tab_button"><a class="sexy_button_new short green" id="%ID%_export3_copy"><span><span id="%ID%_export3_copy_text">Copy</span></span></a></span><span style="display:inline-block;width:60px;"/><span id="%ID%_export3_row" class="tab_button"><a class="sexy_button_new short green" id="%ID%_export3"><span><span>Done</span></span></a></span></div></div>')+'</div></div>';var pa=$('#content_row');pa.length||(pa=$('#inner_page'));pa.before(f.replace(/%ID%/g,c));ha(a,b,5,function(){a.Y()});$("#"+c+'_autorun_fight').click(function(){return a.Dc(this,0)});$("#"+c+'_priority_fight').click(function(){return a.Gc(this,0)});$("#"+c+'_autorun_bank').click(function(){return a.Dc(this,1)});$("#"+c+'_autorun_rob').click(function(){return a.Dc(this,2)});$("#"+c+'_autorun_boss').click(function(){return a.Dc(this,4)});$("#"+c+'_autorun_jobs').click(function(){return a.Dc(this,3)});$("#"+c+'_autorun_upgrades').click(function(){return a.Dc(this,6)});$("#"+c+'_autorun_arena').click(function(){return a.Dc(this,5)});$("#"+c+'_priority_bank').click(function(){return a.Gc(this,1)});$("#"+c+'_priority_rob').click(function(){return a.Gc(this,2)});$("#"+c+'_priority_boss').click(function(){return a.Gc(this,4)});$("#"+c+'_priority_jobs').click(function(){return a.Gc(this,3)});$("#"+c+'_priority_upgrades').click(function(){return a.Gc(this,6)});$("#"+c+'_priority_arena').click(function(){return a.Gc(this,5)});$("#"+c+'_autorun').change(function(){return a.nm(this)});$("#"+c+'_hide_zbar').click(function(){return a.Um(this)});$("#"+c+'_hide_icons').click(function(){return a.Tm(this)});$("#"+c+'_run_arena').click(function(){return a.Ln(this)});$("#"+c+'_backup').click(function(){$("#"+c+"_p1").show();$("#"+c+"_p2").hide();$("#"+c+'_p2b').hide();$("#"+c+"_p3").hide();$("#"+c+'_p3b').hide();MW.Popup.show(c+'_backup_pop');sb=h;R.Qa();return A});$("#"+c+'_backup_pop_close').click(function(){return a.jh()});$("#"+c+'_import').click(function(){$("#"+c+"_p1").hide();$("#"+c+"_p2").show();return A});$("#"+c+'_import2').click(function(){$("#"+c+"_p2").hide();$("#"+c+'_p2b').show();a.sk();return A});$("#"+c+'_import3').click(function(){a.Lk();return a.jh()});$("#"+c+'_export').click(function(){$("#"+c+"_p1").hide();$("#"+c+"_p3").show();return A});$("#"+c+'_export2').click(function(){$("#"+c+"_p3").hide();$("#"+c+'_p3b').show();a.Ik();return A});$("#"+c+'_export3').click(function(){return a.jh()})}
d.hm=function(){return D.pg?A:fa.e||Y.e||ga.e||Ga.e||S.e||Ya.e?h:A}
d.gp=function(){D.pg=A;setTimeout(function(){a.d=a.hm()?25:26;a.q()},1E4)}
d.fk=function(){a.e=h;l(w('Mafia Wars','Version '+(new Date(1E3*User.bt)).toUTCString()));l(w('<span class="'+Cb+'"/> '+qb,'Version '+db+" / "+(new Date(1360521908E3)).toUTCString()));if($&&$.fn&&$.fn.jquery){var b=w('jQuery','Version '+$.fn.jquery);$.ui&&$.ui.version&&(b+=" "+w('jQuery UI','Version '+$.ui.version));l(b)}else l(q('jQuery','Not Found'));l(w('Message of the Day','Due to issues in the game, you may need to turn off the <br/>\'Skip Arenas with more/less than <span class="respect"/>Respect\' options to get into an arena'));a.Pj();a.Oj();a.d=1;a.q()}
d.q=function(){1===a.d?(a.B=6,a.Ob()):6===a.d?(tb.jk(),a.d=22,a.q()):22===a.d?(a.B=21,a.Li()):21===a.d?(a.B=20,a.Ql()):20===a.d?(a.B=26,a.Ml()):25===a.d?(a.B=26,a.Ob()):26===a.d&&a.gp()}
a.T();a.P()}
function Db(e,c){var a=this,d=Db.prototype;C(d,E.prototype);a.Oa(e,c);a.K=X.h[2];a.K.r=a;a.wh=[];a.bc=[];a.Ia=[];a.R=[];a.Ic=0;a.xh=0;a.Rd=A;a.cc=0;a.pb=0;a.uj=0;a.vj=n;a.la=[];a.ja=n;a.db=h;a.S=n;a.o={za:0,Q:0,Wa:0,ma:0};a.Eh=0;a.Gh=0;a.Hh=0;a.Fh=0;a.Bc=[];d.ea=function(){a.e||(a.Rd=A,a.cc=0,a.ja===n&&(a.ja=setInterval(function(){a.o.ma++;a.M()},1E3)),a.Hc());return A}
d.j=function(){s(c+'_rob_squads_data',a.b.pb);s(c+'_ratio_min_data',a.b.Ha)}
d.ia=function(){clearInterval(a.ja);a.ja=n;a.Fa();return A}
d.tm=function(b){a.b.k=x(b);a.c();return h}
d.Kn=function(b){a.b.pb=m(b);a.j();a.c();return h}
d.lh=function(b){a.b.Ha=m(b);a.j();a.c();return h}
d.mh=function(b){a.b.cb=xb(b);a.c();return h}
d.kn=function(b){a.b.Qe=x(b,1,9);a.c();return h}
d.fa=function(){a.b={k:1,Qe:5,pb:A,Ha:A,cb:2.2}}
d.c=function(){var b={};b.city=a.b.k;b.max_properties=a.b.Qe;b.rob_squads=a.b.pb;b.ratio_min=a.b.Ha;b.ratio_min_value=a.b.cb;na(c,b)}
d.P=function(){a.fa();try{var b={},f=oa(c);b.k=f.city;b.Qe=f.max_properties;b.pb=f.rob_squads;b.Ha=f.ratio_min;b.cb=f.ratio_min_value;C(a.b,b)}catch(pa){}
t(c+'_rob_city',a.b.k);t(c+'_max_properties',a.b.Qe);o(c+'_rob_squads',a.b.pb);o(c+'_ratio_min',a.b.Ha);t(c+'_ratio_min_value',a.b.cb);a.j()}
d.Y=function(){a.M()}
d.T=function(){ha(a,L('Options','options','<div style="float:left;width:280px;">Rob properties in <select id="%ID%_rob_city">'+Eb+'</select><br/>Rob up to <input type="text" style="width:20px;" id="%ID%_max_properties"/> properties at once<br/></div><div style="float:left;">'+r('Use Rob Squads','rob_squads',g,' <span class="more_in" id="%ID%_rob_squads_left"/>')+r('Pause when ratio is below','ratio_min',g,' <input type="text" style="width:30px;" id="%ID%_ratio_min_value"/>')+'</div><div style="clear:both;"/>')+L('Stats','stats')+'<div style="padding:10px;">'+Ha+Ia+Ja+Ka+'</div>',5,function(){a.Y()});$("#"+c+'_options_toggle').click(function(){Z(c+'_options',c+'_options_toggle');return A});$("#"+c+'_stats_toggle').click(function(){a.db=Z(c+'_stats',c+'_stats_toggle');a.M();return A});$("#"+c+'_start').click(function(){return a.ea()});$("#"+c+'_stop').click(function(){return a.ia()});$("#"+c+'_cancel').click(function(){return a.Ec()});$("#"+c+'_rob_city').change(function(){return a.tm(this)});$("#"+c+'_max_properties').change(function(){return a.kn(this)});$("#"+c+'_rob_squads').click(function(){return a.Kn(this)});$("#"+c+'_ratio_min').click(function(){return a.lh(this)});$("#"+c+'_ratio_min_value').change(function(){return a.mh(this)});a.vj=$("#"+c+'_rob_squads_left');a.Lb()}
d.M=function(){if(T()&&(a.V&&a.db)&&(a.S||(a.S=$("#"+c+'_stats')),a.S)){var b="";if(a.o.Wa){var f,b=b+('Stamina <span class="stamina">'+a.o.za+'</span> Experience <span class="experience">'+a.o.Q+'</span> <span class="stat_info more_in">['+parseFloat(a.o.Q/a.o.za).toFixed(2)+'/sta]</span><br/>');for(f in a.Bc)a.Bc.hasOwnProperty(f)&&0<a.Bc[f]&&(b+='<span class="cash">'+f+k(a.Bc[f])+'</span><br/>');b+='Robberies <span class="good">'+a.o.Wa+'</span> Won <span class="good">'+a.Hh+'</span> <span class="stat_info more_in">['+p(100*a.Hh/a.o.Wa)+'%]</span> Lost <span class="bad">'+a.Gh+'</span> <span class="stat_info more_in">['+p(100*a.Gh/a.o.Wa)+'%]</span><br/>';b+='Boards <span class="good">'+a.Eh+'</span> Perfect <span class="good">'+a.Fh+'</span> <span class="stat_info more_in">['+p(100*a.Fh/a.Eh)+'%]</span><br/>';for(f in a.la)a.la.hasOwnProperty(f)&&(b+='<span class="stamina">'+a.la[f].H+'</span> '+a.la[f].Jo+' <span class="good">Won '+a.la[f].Lf+'</span> <span class="experience">'+a.la[f].Tg+'</span> <span class="stat_info more_in">['+parseFloat(a.la[f].Tg/a.la[f].H).toFixed(2)+'/sta]</span> <span class="bad">Lost '+a.la[f].zg+'</span> <span class="experience">'+a.la[f].Ag+'</span> <span class="stat_info more_in">['+parseFloat(a.la[f].Ag/a.la[f].H).toFixed(2)+'/sta]</span> <span class="stat_info more_in">['+p(100*a.la[f].Lf/p(a.la[f].Lf+a.la[f].zg))+'% won]</span><br/>')}
a.o.ma&&(b+='Running for: '+ia(a.o.ma));a.S.html(b);R.Qa()}}
d.sh=function(b,f,c){var d=A,e=A,v=0,j=0,j=0,v="?";if(b)if(j=a.la[a.Ia[c]],j||(a.la[a.Ia[c]]={Lf:0,zg:0,Jo:wb(a.Ia[c]),H:a.bc[c],Tg:0,Ag:0},j=a.la[a.Ia[c]]),-1!==b.indexOf('rob_res_success')?(a.Hh++,j.Lf++,e=d=h):-1!==b.indexOf('rob_res_fail')&&(a.Gh++,j.zg++,d=A,e=h),e){if(e=/(\d+) Experience/.exec(b))v=p(e[1].replace(/[^0-9]/g,"")),a.o.Q+=v,d?j.Tg=v:j.Ag=v;if(e=/($|C$|R$|B$|V$|L$|BRL$|\u00a2|\u00a3)([\d,]+)/.exec(b))v=e[1],j=U(e[2]),a.Bc[v]=a.Bc[v]?a.Bc[v]+j:j;(e=/item_id="(\d+)"/.exec(b))?N.Pb(p(e[1])):(e=/rob_res_expanded_details_item">(\d+) ([^<]+)</.exec(b))?N.sf(e[2],p(e[1])):(e=/(\/mwfb\/graphics\/collections\/[^"]+)/.exec(b))&&N.te(e[1].substring(e[1].lastIndexOf("/")+1));a.o.Wa++;a.o.za+=p(a.bc[c])}else y(q('Problem Robbing '+a.Ia[c],'Error robbing property'));f&&((e=/(\d+) Bonus Experience/.exec(f))?(a.Eh++,j=e[1].replace(/[^0-9]/g,""),a.o.Q+=p(j),a.Rd=h,a.cc=0,-1!==f.indexOf('Your record on this board was 9-0')&&a.Fh++,(e=/item_id="(\d+)"/.exec(f))?N.Pb(p(e[1])):(e=/rob_res_expanded_details_item">(\d+) ([^<]+)</.exec(f))?N.sf(e[2],p(e[1])):(e=/(\/mwfb\/graphics\/collections\/[^"]+)/.exec(f))&&N.te(e[1].substring(e[1].lastIndexOf("/")+1))):-1!==f.indexOf('do not have enough stamina to rob all remaining')?l(q('Problem Robbing Properties','Need more <span class="stamina"/>Stamina')):-1!==f.indexOf('do not have enough stamina to rob')&&b&&l(q('Problem Robbing '+a.Ia[c],'Need more <span class="stamina"/>Stamina')),a.M())}
d.vh=function(b){a.e&&z.G(decodeURIComponent(Za+"/"+a.wh[a.R[b]]),function(f){a.Xo(f,b)})}
d.Xo=function(b,f){var c;if(a.J(b))if(a.L(b,'Problem Robbing '+a.Ia[a.R[f]])){try{(c=JSON.parse(b.responseText))&&a.sh(c.slot,c.popup,a.R[f])}catch(d){y(q('Problem Robbing '+a.Ia[a.R[f]],d)),c=n}
a.xh++;a.xh>=a.R.length?(c&&D.Ra(c),a.d=a.B,a.q()):a.Ic<a.R.length&&(a.vh(a.Ic),a.Ic++)}else a.vh(f)}
d.Vo=function(){a.e&&z.G(B('xw_controller=robbing&xw_action=rob_all'),function(b){a.Wo(b)})}
d.Wo=function(b){var f;if(a.J(b)){if(a.L(b,'Problem Robbing Properties'))try{if(f=JSON.parse(b.responseText)){var c;for(c=0;c<a.R.length;c++)f.slots[a.R[c]]&&a.sh(f.slots[a.R[c]],n,a.R[c]);a.sh(n,f.popup);D.Ra(f)}}catch(d){y(q('Problem Robbing Properties',d))}
a.d=a.B;a.q()}}
d.Ul=function(){a.e&&(a.l('Loading Robbing Page…'),z.G(B('xw_controller=robbing&xw_action=view'),function(b){a.wj(b)}))}
d.nj=function(){a.e&&(a.l('Refreshing Robbing Page…'),z.G(B('xw_controller=robbing&xw_action=refresh'),function(b){a.wj(b)}))}
d.wj=function(b){if(a.J(b)){a.Ic=0;a.xh=0;a.Rd=A;a.cc=0;a.wh=[];a.Ia=[];a.bc=[];a.R=[];if(a.L(b,'Problem Loading Properties')){D.Ga(b);var f=/robAllHelper\((\d+), (\d+)/.exec(b.responseText);f&&(a.pb=p(f[1]),a.uj=p(f[2]),a.vj.html("("+k(a.pb)+' Available)'));if(b=/(<div class="rob_slot".*)/.exec(b.responseText)){if(f=document.createElement("div"),f.innerHTML=b[1],f=f.getElementsByClassName('rob_slot'),f.length){for(b=0;b<f.length;b++){var c=f[b].getElementsByClassName('sexy_button_new short red');if(c.length){a.wh[b]=c[0].href.substring(c[0].href.indexOf('remote/html_server.php'));a.bc[b]=p(f[b].getElementsByClassName('rob_prop_stamina')[0].innerHTML);try{a.Ia[b]=f[b].getElementsByClassName('rob_prop_name_short')[0].innerHTML}catch(d){a.Ia[b]=f[b].getElementsByClassName('rob_prop_name')[0].innerHTML}
a.Ia[b]=a.Ia[b].replace(/(<([^>]+)>)/ig,"");a.R.push(b)}}
if(a.R.length){f=0;for(c=h;c;){c=A;f++;for(b=0;b<a.R.length-f;b++)a.bc[a.R[b]]>a.bc[a.R[b+1]]&&(c=a.R[b],a.R[b]=a.R[b+1],a.R[b+1]=c,c=h)}}}}else l(q('Problem Finding Properties'))}
if(a.R.length)if(a.b.pb&&a.pb&&i.H>=a.uj)a.l('Using Rob Squad to rob '+a.R.length+' properties…'),a.Vo();else{a.cc=a.bc[a.R[0]];f=i.H;for(b=0;b<a.R.length;b++)f-=a.bc[a.R[b]],0>f&&(a.R.length=b);if(a.R.length){a.l('Robbing '+a.R.length+' properties…');for(b=0;b<a.b.Qe;b++)a.Ic<a.R.length&&(a.vh(a.Ic),a.Ic++)}else l(q('Not enough stamina to rob next property','Have '+i.H+' need '+a.cc)),a.d=1,a.q()}else a.nj()}}
d.Cc=function(){return 0!==a.b.k&&a.b.k!==i.Da}
d.we=function(){if(Y.e&&!Y.N&&Y.K.v>a.K.v)return Y;if(S.e&&!S.N){if(S.K.v>a.K.v)return S;if(S.zi())return S.Vb(),S}
return fa.e&&!fa.N&&fa.K.v>a.K.v?fa:n}
d.q=function(){a.N=A;if(1===a.d)a.B=2,a.Ob();else if(2===a.d)if(a.b.Ha&&i.Nh()<a.b.cb)a.N=h,a.l('Waiting for Experience Ratio to increase…',1),setTimeout(function(){a.e&&a.q()},1E3);else if(i.H<a.cc)a.N=h,a.l('Waiting for more <span class="stamina"/>Stamina…'),setTimeout(function(){a.e&&a.q()},1E3);else if(a.Cc()){var b=a.we();b?(a.N=h,a.l('Waiting for '+b.ta+' to finish before traveling to '+qa[a.b.k]+'…',10+a.b.k),setTimeout(function(){a.e&&a.q()},1E3)):(a.d=7,a.q())}else a.d=8,a.q();else 7===a.d?(a.B=8,a.Rd=A,a.cc=0,a.nf(a.b.k,A)):8===a.d?(a.B=9,a.Rd?(a.Rd=A,a.cc=0,a.nj()):a.Ul()):9===a.d?(a.d=Ma()?1:2,a.q()):24===a.d&&a.Fa()}
a.T();a.P();a.K.w&&a.w(10,function(){a.ea()})}
function Fb(e,c){var a=this,d=Fb.prototype;C(d,E.prototype);a.Oa(e,c);a.K=X.h[0];a.K.r=a;a.Nc=A;a.zh=A;a.Lo=0;a.Ko=0;a.ub=0;a.ve=0;a.yf=0;a.kc=[];a.Xb=0;a.Cb=A;a.kd=A;a.Db=n;a.Bi=n;a.Me=A;a.Ne=0;a.Fe=0;a.ja=n;a.db=h;a.S=n;a.o={jb:0,Ub:0,yb:0,Hf:0,Na:0,Uf:0,Kj:0,rb:0,Wg:0,Fp:0,Cp:0,Ep:0,Bp:0,zp:0,Ap:0,Dp:0,ma:0};d.Za='Fight List;Hitlist;Family;Family Battle;Single Target;MWLists Buckets;Rivals;Favorites'.split(";");d.ea=function(){a.e||(u.yk(),u.uk(),u.U(),a.ub=0,a.ve=0,a.yf=0,a.Xb=0,a.Cb=A,a.kd=A,a.Nc=A,a.Lo=0,a.Ko=0,a.Me=A,a.Ne=0,a.o.rb||(a.o.rb=Ra),a.ja===n&&(a.ja=setInterval(function(){a.o.ma++;a.M()},1E3)),a.Hc());return A}
d.ia=function(){clearInterval(a.ja);a.ja=n;Gb.send(h);Hb.send(h);a.Fa();return A}
d.of=function(){$("#"+c+'_opt_fightlist').toggle(0===a.b.g);$("#"+c+'_opt_battle').toggle(3===a.b.g);$("#"+c+'_opt_family').toggle(2===a.b.g);$("#"+c+'_opt_target').toggle(4===a.b.g);$("#"+c+'_opt_mwlists').toggle(5===a.b.g);$("#"+c+'_opt_hitlist').toggle(1===a.b.g);$("#"+c+'_opt_rivals').toggle(6===a.b.g);$("#"+c+'_opt_favorites').toggle(7===a.b.g)}
d.j=function(){s(c+'_skip_lost_data',a.b.Jc);s(c+'_skip_heal_data',a.b.Ud);s(c+'_skip_health_data',a.b.Vd);s(c+'_skip_attacks_data',a.b.Sd);s(c+'_skip_level_min_data',a.b.Zd);s(c+'_skip_level_max_data',a.b.Xd);s(c+'_skip_mafiadef_min_data',a.b.ce);s(c+'_skip_mafiadef_max_data',a.b.ae);s(c+'_skip_mafiasize_min_data',a.b.ge);s(c+'_skip_mafiasize_max_data',a.b.ee);s(c+'_ignore_tags_data',a.b.qd);s(c+'_attack_thieves_data',a.b.Sc);s(c+'_heal_manual_data',a.b.uc);s(c+'_heal_auto_data',a.b.Wb);s(c+'_fightlist_iced_data',a.b.hd);s(c+'_mwlists_use_auth_data',a.b.Gd);s(c+'_mwlists_random_data',a.b.Fd);s(c+'_rivals_your_rivals_data',a.b.Qd);s(c+'_rivals_your_attackers_data',a.b.Pd);s(c+'_rivals_you_attacked_data',a.b.Od);s(c+'_rivals_family_data',a.b.Nd);s(c+'_rivals_skip_iced_data',a.b.Kb);s(c+'_battle_skip_iced_data',a.b.Uc);s(c+'_battle_fortress_data',a.b.nc);s(c+'_stamina_use_pack_data',a.b.ne);s(c+'_stamina_buy_refill_data',a.b.ke);s(c+'_stamina_stop_data',a.b.qb)}
d.Fc=function(b){a.b.g=x(b);a.of();a.c();return h}
d.Mm=function(b){a.b.Ab=x(b);a.c();return h}
d.Qm=function(b){a.b.tc=x(b);a.c();return h}
d.Kh=function(){i.zd&&a.Bi.html("("+parseFloat(100*a.b.Yb/i.zd).toFixed(1)+"%)")}
d.Sm=function(b){a.b.Yb=x(b,-1);a.Kh();a.c();return h}
d.Rm=function(b){a.b.uc=m(b);a.j();a.c();return h}
d.Pm=function(b){a.b.Wb=m(b);a.j();a.c();return h}
d.Rn=function(b){a.b.Vd=m(b);a.j();a.c();return h}
d.Sn=function(b){a.b.Wd=x(b);a.c();return h}
d.Qn=function(b){a.b.Ud=m(b);a.j();a.c();return h}
d.On=function(b){a.b.Sd=m(b);a.j();a.c();return h}
d.Pn=function(b){a.b.Td=x(b);a.c();return h}
d.Vn=function(b){a.b.Zd=m(b);a.j();a.c();return h}
d.Wn=function(b){a.b.$d=x(b);a.c();return h}
d.Tn=function(b){a.b.Xd=m(b);a.j();a.c();return h}
d.Un=function(b){a.b.Yd=x(b);a.c();return h}
d.$n=function(b){a.b.ce=m(b);a.j();a.c();return h}
d.ao=function(b){a.b.de=x(b);a.c();return h}
d.Yn=function(b){a.b.ae=m(b);a.j();a.c();return h}
d.Zn=function(b){a.b.be=x(b);a.c();return h}
d.eo=function(b){a.b.ge=m(b);a.j();a.c();return h}
d.fo=function(b){a.b.he=x(b);a.c();return h}
d.bo=function(b){a.b.ee=m(b);a.j();a.c();return h}
d.co=function(b){a.b.fe=x(b);a.c();return h}
d.Xn=function(b){a.b.Jc=m(b);a.j();a.c();return h}
d.mm=function(b){a.b.Sc=m(b);a.j();a.c();return h}
d.Nm=function(b){a.b.hd=m(b);a.j();a.c();return h}
d.Vm=function(b){a.b.He=x(b);a.c();return h}
d.Km=function(b){a.b.Ee=$(b).val();a.c();return h}
d.xo=function(b){a.b.mf=$(b).val();a.c();return h}
d.wo=function(b){a.b.Mc=x(b);a.c();return h}
d.un=function(b){a.b.Te=$(b).val();a.c();return h}
d.vn=function(b){a.b.Gd=m(b);a.j();a.c();return h}
d.sn=function(b){a.b.Ed=$(b).val();a.c();return h}
d.tn=function(b){a.b.Fd=m(b);a.j();a.c();return h}
d.hn=function(b){a.b.Ac=x(b,1,8);a.c();return h}
d.Ye=function(b){a.b.da=x(b,1,8);a.c();return h}
d.Jn=function(b){a.b.Qd=m(b);a.j();a.c();return h}
d.In=function(b){a.b.Pd=m(b);a.j();a.c();return h}
d.Hn=function(b){a.b.Od=m(b);a.j();a.c();return h}
d.Fn=function(b){a.b.Nd=m(b);a.j();a.c();return h}
d.Gn=function(b){a.b.Kb=m(b);a.j();a.c();return h}
d.rm=function(b){a.b.Uc=m(b);a.j();a.c();return h}
d.qm=function(b){a.b.nc=m(b);a.j();a.c();return h}
d.to=function(b){a.b.ne=m(b);a.j();a.c();return h}
d.oo=function(b){a.b.ke=m(b);a.j();a.c();return h}
d.so=function(b){a.b.Nb=x(b);a.c();return h}
d.ro=function(b){a.b.Mb=x(b);a.c();return h}
d.qo=function(b){a.b.qb=m(b);a.j();a.c();return h}
d.Om=function(b){var f={};a.Fe++;3<=a.Fe&&(a.Fe=0);$(b).html('Filters ('+(a.Fe+1)+'/3) »');f['margin-left']=-400*a.Fe+"px";$("#"+c+'_filters_grid').animate(f,{duration:300,easing:'linear'});return A}
d.lm=function(b){a.b.gb=x(b,1,4);a.c();return h}
d.Wm=function(b){a.b.wc=$(b).val();a.fj();a.c();return h}
d.Zm=function(b){a.b.qd=m(b);a.j();a.c();return h}
d.fa=function(){a.b={};a.b.g=0;a.b.Ab=0;a.b.tc=1;a.b.Yb=500;a.b.uc=h;a.b.Wb=A;a.b.Ud=A;a.b.Vd=h;a.b.Wd=90;a.b.Sd=A;a.b.Td=500;a.b.Zd=A;a.b.$d=0;a.b.Xd=A;a.b.Yd=72E3;a.b.ce=A;a.b.de=1E5;a.b.ae=A;a.b.be=5E5;a.b.ge=A;a.b.he=10;a.b.ee=A;a.b.fe=500;a.b.hd=h;a.b.wc='RedTag1RedTag2';a.b.qd=A;a.b.Jc=h;a.b.Sc=A;a.b.zj=h;a.b.gb=4;a.b.ne=A;a.b.ke=A;a.b.qb=A;a.b.Nb=0;a.b.Mb=0;a.b.Ah=A;a.b.Bh=2;a.b.th=A;a.b.uh=2;a.b.He=8E3;a.b.Ee='http://apps.facebook.com/inthemafia/family.php?id=%7B%22id%22%3A%22ODEyMA%3D%3D%22%7D';a.b.mf='http://apps.facebook.com/inthemafia/profile.php';a.b.Mc=0;a.b.Te='http://www.mwlists.com/Bucket/index.php?bucket=3kGyBBCTdSUJrKAtGoxkXSqbospb4PTf';a.b.Gd=A;a.b.Ed="";a.b.Fd=A;a.b.Ac=3;a.b.da=3;a.b.Qd=h;a.b.Pd=h;a.b.Od=h;a.b.Nd=h;a.b.Kb=h;a.b.Uc=h;a.b.nc=h}
d.c=function(){var b={};b.mode=a.b.g;b.fight_city=a.b.Ab;b.heal_city=a.b.tc;b.heal_value=a.b.Yb;b.heal_manual=a.b.uc;b.heal_auto=a.b.Wb;b.skip_heal=a.b.Ud;b.skip_health=a.b.Vd;b.skip_health_pct=a.b.Wd;b.skip_attacks=a.b.Sd;b.skip_attacks_count=a.b.Td;b.skip_level_min=a.b.Zd;b.skip_level_min_value=a.b.$d;b.skip_level_max=a.b.Xd;b.skip_level_max_value=a.b.Yd;b.skip_mafiadef_min=a.b.ce;b.skip_mafiadef_min_value=a.b.de;b.skip_mafiadef_max=a.b.ae;b.skip_mafiadef_max_value=a.b.be;b.skip_mafiasize_min=a.b.ge;b.skip_mafiasize_min_value=a.b.he;b.skip_mafiasize_max=a.b.ee;b.skip_mafiasize_max_value=a.b.fe;b.fightlist_iced=a.b.hd;b.max_active_opponents=a.b.Ac;b.max_threads=a.b.da;b.ignore_chars=a.b.wc;b.ignore_tags=a.b.qd;b.skip_lost=a.b.Jc;b.attack_thieves=a.b.Sc;b.send_stats=a.b.zj;b.attack_burst=a.b.gb;b.skip_zombie=a.b.Ah;b.skip_zombie_type=a.b.Bh;b.pause_zombie=a.b.th;b.pause_zombie_type=a.b.uh;b.hitlist_bounty=a.b.He;b.family_url=a.b.Ee;b.target_url=a.b.mf;b.target_iced_delay=a.b.Mc;b.mwlists_url=a.b.Te;b.mwlists_use_auth=a.b.Gd;b.mwlists_authid=a.b.Ed;b.mwlists_random=a.b.Fd;b.rivals_your_rivals=a.b.Qd;b.rivals_your_attackers=a.b.Pd;b.rivals_you_attacked=a.b.Od;b.rivals_family=a.b.Nd;b.rivals_skip_iced=a.b.Kb;b.battle_skip_iced=a.b.Uc;b.battle_fortress=a.b.nc;b.stamina_use_pack=a.b.ne;b.stamina_buy_refill=a.b.ke;b.stamina_stop=a.b.qb;b.stamina_stop_value=a.b.Nb;b.stamina_stop_type=a.b.Mb;na(c,b)}
d.P=function(){a.fa();try{var b={},f=oa(c);b.Ab=f.fight_city;b.tc=f.heal_city;b.Yb=f.heal_value;b.uc=f.heal_manual;b.Wb=f.heal_auto;b.Ud=f.skip_heal;b.Vd=f.skip_health;b.Wd=f.skip_health_pct;b.Sd=f.skip_attacks;b.Td=f.skip_attacks_count;b.Zd=f.skip_level_min;b.$d=f.skip_level_min_value;b.Xd=f.skip_level_max;b.Yd=f.skip_level_max_value;b.ce=f.skip_mafiadef_min;b.de=f.skip_mafiadef_min_value;b.ae=f.skip_mafiadef_max;b.be=f.skip_mafiadef_max_value;b.ge=f.skip_mafiasize_min;b.he=f.skip_mafiasize_min_value;b.ee=f.skip_mafiasize_max;b.fe=f.skip_mafiasize_max_value;b.wc=f.ignore_chars;b.qd=f.ignore_tags;b.Jc=f.skip_lost;b.Sc=f.attack_thieves;b.zj=f.send_stats;b.gb=Math.min(f.attack_burst,4);b.Ah=f.skip_zombie;b.Bh=f.skip_zombie_type;b.th=f.pause_zombie;b.uh=f.pause_zombie_type;b.g=f.mode;b.He=f.hitlist_bounty;b.hd=f.fightlist_iced;b.Ee=f.family_url;b.mf=f.target_url;b.Mc=f.target_iced_delay;b.Te=f.mwlists_url;b.Gd=f.mwlists_use_auth;b.Ed=f.mwlists_authid;b.Fd=f.mwlists_random;b.Ac=f.max_active_opponents;b.da=f.max_threads;b.Qd=f.rivals_your_rivals;b.Pd=f.rivals_your_attackers;b.Od=f.rivals_you_attacked;b.Nd=f.rivals_family;b.Kb=f.rivals_skip_iced;b.Uc=f.battle_skip_iced;b.nc=f.battle_fortress;b.ne=f.stamina_use_pack;b.ke=f.stamina_buy_refill;b.qb=f.stamina_stop;b.Nb=f.stamina_stop_value;b.Mb=f.stamina_stop_type;C(a.b,b)}catch(pa){}
a.fj();t(c+'_mode',a.b.g);t(c+'_fight_city',a.b.Ab);t(c+'_heal_city',a.b.tc);t(c+'_heal_value',a.b.Yb);o(c+'_heal_manual',a.b.uc);o(c+'_heal_auto',a.b.Wb);o(c+'_skip_heal',a.b.Ud);o(c+'_skip_health',a.b.Vd);t(c+'_skip_health_pct',a.b.Wd);o(c+'_skip_attacks',a.b.Sd);t(c+'_skip_attacks_count',a.b.Td);o(c+'_skip_level_min',a.b.Zd);t(c+'_skip_level_min_value',a.b.$d);o(c+'_skip_level_max',a.b.Xd);t(c+'_skip_level_max_value',a.b.Yd);o(c+'_skip_mafiadef_min',a.b.ce);t(c+'_skip_mafiadef_min_value',a.b.de);o(c+'_skip_mafiadef_max',a.b.ae);t(c+'_skip_mafiadef_max_value',a.b.be);o(c+'_skip_mafiasize_min',a.b.ge);t(c+'_skip_mafiasize_min_value',a.b.he);o(c+'_skip_mafiasize_max',a.b.ee);t(c+'_skip_mafiasize_max_value',a.b.fe);o(c+'_ignore_tags',a.b.qd);t(c+'_ignore_chars',a.b.wc);o(c+'_skip_lost',a.b.Jc);o(c+'_attack_thieves',a.b.Sc);o(c+'_fightlist_iced',a.b.hd);t(c+'_max_active_opponents',a.b.Ac);t(c+'_max_threads',a.b.da);t(c+'_attack_burst',a.b.gb);o(c+'_stamina_use_pack',a.b.ne);o(c+'_stamina_buy_refill',a.b.ke);o(c+'_stamina_stop',a.b.qb);t(c+'_stamina_stop_value',a.b.Nb);t(c+'_stamina_stop_type',a.b.Mb);o(c+'_skip_zombie',a.b.Ah);t(c+'_skip_zombie_type',a.b.Bh);o(c+'_pause_zombie',a.b.th);t(c+'_pause_zombie_type',a.b.uh);t(c+'_hitlist_bounty',a.b.He);t(c+'_family_url',a.b.Ee);t(c+'_target_url',a.b.mf);t(c+'_target_iced_delay',a.b.Mc);t(c+'_mwlists_url',a.b.Te);t(c+'_mwlists_authid',a.b.Ed);o(c+'_mwlists_use_auth',a.b.Gd);o(c+'_mwlists_random',a.b.Fd);o(c+'_rivals_your_rivals',a.b.Qd);o(c+'_rivals_your_attackers',a.b.Pd);o(c+'_rivals_you_attacked',a.b.Od);o(c+'_rivals_family',a.b.Nd);o(c+'_rivals_skip_iced',a.b.Kb);o(c+'_battle_skip_iced',a.b.Uc);o(c+'_battle_fortress',a.b.nc);a.of();a.j()}
d.Y=function(){a.Kh();Va("#"+c+'_div_heal',"#"+c+'_div_stamina');Va("#"+c+'_div_general',"#"+c+'_div_filters');a.M()}
d.T=function(){var b,f;ha(a,L('Options','options',K('Fight Mode <select id="%ID%_mode"/>','opt_fightmode',ba('opt_fightlist',r('Skip opponents who appear to be iced','fightlist_iced'))+(ba('opt_battle',r('Skip opponents who appear to be iced','battle_skip_iced')+r('Attack the fortress','battle_fortress'))+ba('opt_target','Player to Attack '+ja('(Copy the link from a player profile page)')+'<br/><input type="text" id="%ID%_target_url" style="width:660px;"/><br/>'+M+'Pause <input type="text" style="width:30px;" id="%ID%_target_iced_delay"/> seconds when the player is iced<br/>')+ba('opt_mwlists','Buckets to Attack '+ja('(Copy the full link from MWLists.com)')+'<br/><textarea id="%ID%_mwlists_url" class="textlinks"/><br/>'+r('Use MWLists Auth Code','mwlists_use_auth',g,' <input type="text" style="width:150px;" id="%ID%_mwlists_authid"/>')+r('Randomize Opponent Order','mwlists_random'))+ba('opt_hitlist','Minimum Bounty <input type="text" id="%ID%_hitlist_bounty" style="width:60px;"/> Dollars<br/>')+ba('opt_family','Families to Attack '+ja('(Copy the links from family pages)')+'<br/><textarea id="%ID%_family_url" class="textlinks" style="font-size:12px;"/><br/>')+ba('opt_rivals',r('Your Rivals','rivals_your_rivals')+r('Your Attackers','rivals_your_attackers')+r('Mafia you Attacked','rivals_you_attacked')+r('Family Rivals','rivals_family')+M+r('Skip rivals who appear to be iced','rivals_skip_iced')))+"")+M+'<div style="width:50%;float:left;">'+K('General','opt_general',ba('div_general','Fight in <select id="%ID%_fight_city">'+Eb+'</select><br/>'+M+M+'<span id="%ID%_max_active_opponents_label">Attack up to <input type="text" style="width:20px;" id="%ID%_max_active_opponents"/> opponents at once</span><br/><span id="%ID%_max_threads_label">Attack up to <input type="text" style="width:20px;" id="%ID%_max_threads"/> times per second</span><br/><abbr title="Number of power attacks in each burst (up to 4)."><span id="%ID%_attack_burst_label">Power attack burst rate <input type="text" style="width:20px;" id="%ID%_attack_burst"/></span></abbr><br/>'+M+M+r('Attack ice thieves','attack_thieves','When an ice is stolen, the thief will be added to the end of the opponents list.')))+'</div><div style="width:50%;float:left;">'+K('<span id="%ID%_filters" style="cursor:pointer;color:rgb(255,217,39);" title="Click for more">Filters (1/3) »</span>','opt_filters','<div id="%ID%_div_filters" style="width:324px;overflow:hidden;"><div id="%ID%_filters_grid" style="width:1600px;"><span style="width:400px;float:left;">'+r('Skip opponents with over','skip_health',g,' <span class="health"/><input type="text" style="width:30px;" id="%ID%_skip_health_pct"/> percent')+r('Skip opponents when they heal','skip_heal')+M+M+r('Skip opponents when losing fights','skip_lost')+M+M+r('Skip opponents after','skip_attacks',g,' <input type="text" style="width:30px;" id="%ID%_skip_attacks_count"/> attacks')+'</span><span style="width:400px;float:left;">'+r('Skip opponents below','skip_mafiadef_min',g,' <span class="sexy_mafia_defense" title="Mafia Defense"/><input type="text" style="width:50px;" id="%ID%_skip_mafiadef_min_value"/>')+r('Skip opponents above','skip_mafiadef_max',g,' <span class="sexy_mafia_defense" title="Mafia Defense"/><input type="text" style="width:50px;" id="%ID%_skip_mafiadef_max_value"/>')+M+r('Skip opponents below','skip_mafiasize_min',g,' <span class="mafia_size" title="Mafia Size"/><input type="text" style="width:30px;" id="%ID%_skip_mafiasize_min_value"/>')+r('Skip opponents above','skip_mafiasize_max',g,' <span class="mafia_size" title="Mafia Size"/><input type="text" style="width:30px;" id="%ID%_skip_mafiasize_max_value"/>')+M+r('Skip opponents below level','skip_level_min',g,' <input type="text" style="width:40px;" id="%ID%_skip_level_min_value"/>')+r('Skip opponents above level','skip_level_max',g,' <input type="text" style="width:40px;" id="%ID%_skip_level_max_value"/>')+'</span><span style="width:400px;float:left;">'+r('Skip opponents with names/tags containing','ignore_tags','Enter each name/tag on a new line.','<br/><textarea id="%ID%_ignore_chars" class="skipnames"/>')+'</span></div></div>')+'</div><div style="clear:both;"/>'+M+'<div style="width:50%;float:left;">'+K('<span class="health"/>Healing','opt_heal',ba('div_heal','Heal using cash from <select id="%ID%_heal_city"><option value="0">Active City</option><option value="1">New York</option></select><br/>'+r('Heal when less than','heal_manual',g,' <span class="health"/><input type="text" style="width:40px;" id="%ID%_heal_value"/> <span class="more_in" id="%ID%_heal_pct"/>')+r('Heal as soon as possible','heal_auto',g,' <span class="more_in" id="%ID%_next_heal"/>')))+'</div><div style="width:50%;float:left;">'+K('<span class="stamina"/>Stamina','opt_stamina',ba('div_stamina',r('Use <b>Power Pack</b> when out of stamina','stamina_use_pack')+r('Buy <b>Stamina Refill</b> when out of stamina','stamina_buy_refill')+r('Pause','stamina_stop',g,' <select id="%ID%_stamina_stop_type"><option value="0">Fighting</option><option value="1">Healing</option></select> <span id="%ID%_stamina_stop_label2">when less than</span> <span class="stamina"/><input type="text" style="width:40px;" id="%ID%_stamina_stop_value"/>')))+'</div><div style="clear:both;"/>')+L('Stats','stats')+'<div style="padding:10px;">'+Ha+Ia+Ja+Ka+'</div>',5,function(){a.Y()});f="";for(b=0;b<a.Za.length;b++)f+='<option value="'+b+'">'+a.Za[b]+'</option>';$("#"+c+'_mode').html(f);a.Db=$("#"+c+'_next_heal');a.Bi=$("#"+c+'_heal_pct');$("#"+c+'_options_toggle').click(function(){Z(c+'_options',c+'_options_toggle');return A});$("#"+c+'_stats_toggle').click(function(){a.db=Z(c+'_stats',c+'_stats_toggle');a.M();return A});$("#"+c+'_start').click(function(){return a.ea()});$("#"+c+'_stop').click(function(){return a.ia()});$("#"+c+'_cancel').click(function(){return a.Ec()});$("#"+c+'_mode').change(function(){return a.Fc(this)});$("#"+c+'_fight_city').change(function(){return a.Mm(this)});$("#"+c+'_heal_city').change(function(){return a.Qm(this)});$("#"+c+'_heal_value').change(function(){return a.Sm(this)});$("#"+c+'_heal_manual').click(function(){return a.Rm(this)});$("#"+c+'_heal_auto').click(function(){return a.Pm(this)});$("#"+c+'_skip_heal').click(function(){return a.Qn(this)});$("#"+c+'_skip_health').click(function(){return a.Rn(this)});$("#"+c+'_skip_health_pct').change(function(){return a.Sn(this)});$("#"+c+'_skip_attacks').click(function(){return a.On(this)});$("#"+c+'_skip_attacks_count').change(function(){return a.Pn(this)});$("#"+c+'_skip_level_min').click(function(){return a.Vn(this)});$("#"+c+'_skip_level_min_value').change(function(){return a.Wn(this)});$("#"+c+'_skip_level_max').click(function(){return a.Tn(this)});$("#"+c+'_skip_level_max_value').change(function(){return a.Un(this)});$("#"+c+'_skip_mafiadef_min').click(function(){return a.$n(this)});$("#"+c+'_skip_mafiadef_min_value').change(function(){return a.ao(this)});$("#"+c+'_skip_mafiadef_max').click(function(){return a.Yn(this)});$("#"+c+'_skip_mafiadef_max_value').change(function(){return a.Zn(this)});$("#"+c+'_skip_mafiasize_min').click(function(){return a.eo(this)});$("#"+c+'_skip_mafiasize_min_value').change(function(){return a.fo(this)});$("#"+c+'_skip_mafiasize_max').click(function(){return a.bo(this)});$("#"+c+'_skip_mafiasize_max_value').change(function(){return a.co(this)});$("#"+c+'_fightlist_iced').click(function(){return a.Nm(this)});$("#"+c+'_ignore_chars').change(function(){return a.Wm(this)});$("#"+c+'_ignore_tags').click(function(){return a.Zm(this)});$("#"+c+'_skip_lost').click(function(){return a.Xn(this)});$("#"+c+'_attack_thieves').click(function(){return a.mm(this)});$("#"+c+'_attack_burst').change(function(){return a.lm(this)});$("#"+c+'_hitlist_bounty').change(function(){return a.Vm(this)});$("#"+c+'_family_url').change(function(){return a.Km(this)});$("#"+c+'_target_url').change(function(){return a.xo(this)});$("#"+c+'_target_iced_delay').change(function(){return a.wo(this)});$("#"+c+'_mwlists_url').change(function(){return a.un(this)});$("#"+c+'_mwlists_authid').change(function(){return a.sn(this)});$("#"+c+'_mwlists_use_auth').click(function(){return a.vn(this)});$("#"+c+'_mwlists_random').click(function(){return a.tn(this)});$("#"+c+'_max_active_opponents').change(function(){return a.hn(this)});$("#"+c+'_max_threads').change(function(){return a.Ye(this)});$("#"+c+'_rivals_your_rivals').click(function(){return a.Jn(this)});$("#"+c+'_rivals_your_attackers').click(function(){return a.In(this)});$("#"+c+'_rivals_you_attacked').click(function(){return a.Hn(this)});$("#"+c+'_rivals_family').click(function(){return a.Fn(this)});$("#"+c+'_rivals_skip_iced').click(function(){return a.Gn(this)});$("#"+c+'_battle_skip_iced').click(function(){return a.rm(this)});$("#"+c+'_battle_fortress').click(function(){return a.qm(this)});$("#"+c+'_stamina_use_pack').click(function(){return a.to(this)});$("#"+c+'_stamina_buy_refill').click(function(){return a.oo(this)});$("#"+c+'_stamina_stop_value').change(function(){return a.so(this)});$("#"+c+'_stamina_stop_type').change(function(){return a.ro(this)});$("#"+c+'_stamina_stop').click(function(){return a.qo(this)});$("#"+c+'_filters').click(function(){return a.Om(this)});ma='http://mafiademon.com';a.Lb()}
d.M=function(){if(T()&&(a.V&&a.db)&&(a.S||(a.S=$("#"+c+'_stats')),a.S)){var b="";a.o.ma&&(b+='Won: '+k(a.o.jb)+' | Lost: '+k(a.o.Ub)+' | Ices: '+k(a.o.Na)+' | Kills: '+k(a.o.Uf)+' | Stolen: '+k(a.o.Kj),a.o.rb&&Ra&&(b+=' | Total Ices: '+k(a.o.rb)+" "+Da(p(a.o.rb-Ra))),a.o.Wg&&(b+=" | "+a.o.Wg),b+='<br/>Running for: '+ia(a.o.ma)+' | Damage Done: '+k(a.o.yb)+" "+sa("["+k(p(a.o.yb/a.o.ma))+'/second]')+' | Damage Taken: '+k(a.o.Hf)+" "+sa("["+k(p(a.o.Hf/a.o.ma))+'/second]'));a.S.html(b);R.Qa()}}
d.fj=function(){var b;if(""!==a.b.wc&&a.b.wc!==n){a.kc=$.trim(a.b.wc).split("\n");for(b=0;b<a.kc.length;b++)a.kc[b]=$.trim(a.kc[b].replace(/[\r\n]/g,""))}}
d.lk=function(b){if(a.b.qd)for(var b=Aa(b),f=0;f<a.kc.length;f++)if(a.kc[f].length&&-1!==b.indexOf(a.kc[f]))return A;return h}
d.xb=function(b,f){if(u.Sg(b.f))return 1;if(b.A&&a.b.Zd&&b.A<a.b.$d)return 2;if(b.A&&a.b.Xd&&b.A>a.b.Yd)return 3;if(b.ka&&a.b.ce&&b.ka<a.b.de)return 6;if(b.ka&&a.b.ae&&b.ka>a.b.be)return 7;if(b.ac&&a.b.ge&&b.ac<a.b.he)return 8;if(b.ac&&a.b.ee&&b.ac>a.b.fe)return 9;if(f){if(a.b.Sd&&b.Qf&&b.jb+b.Ub>=a.b.Td)return 5;if(!b.La)return 12;if(a.b.Vd&&b.I>a.b.Wd)return 10;if(a.b.Ud&&b.Of)return 11}else if(!a.lk(b.C))return 13;return 0}
d.Bb=function(b,f){return 1===b?'Found on ignore list':2===b?'Level below '+k(a.b.$d)+" ("+k(f.A)+")":3===b?'Level above '+k(a.b.Yd)+" ("+k(f.A)+")":6===b?'Mafia defense below '+k(a.b.de)+" ("+k(f.ka)+")":7===b?'Mafia defense above '+k(a.b.be)+" ("+k(f.ka)+")":8===b?'Mafia size below '+k(a.b.he)+" ("+k(f.ac)+")":9===b?'Mafia size above '+k(a.b.fe)+" ("+k(f.ac)+")":4===b?'Werewolf event badge':5===b?'Number of attacks over '+k(a.b.Td):12===b?'Opponent disabled':10===b?'Health above <span class="health">'+k(a.b.Wd)+'%</span> ('+k(f.I)+"%)":11===b?'Opponent healed':13===b?'Name/Tag filtered':'Some other reason'}
d.bf=function(b,f,c){var d,e,v,j,i,k,m,q,o,r;d=new ka;d.type=c;for(r=o=q=0;b&&-1!==(o=b.indexOf('<td style="width: 300px;',r))&&-1!==(r=b.indexOf('</tr>',o));)if(j=b.substr(o,r-o),i=/href='(remote\/html_server\.php\?xw_controller=fight&xw_action=attack_pop.*opponent_id=p%7C\d+&.*tab=\d)'/,e=/\t{4}<div class="fight_list_name_area" >.*[\r\n]+.+[\r\n]+.+[\r\n]+.+[\r\n\t]+(.+[\r\n]+).+<\/div>/m,(i=i.exec(j))&&(k=e.exec(j))){e=p(/opponent_id=p%7C(\d+)&/.exec(i[1])[1]);v=/fight_list_level_dead/.test(j)?h:A;if((!v||!f)&&!u.Ge(e)&&!u.qi(e))d.f=e,d.url=i[1],d.ac=(m=/<td style="text-align: center;">[\r\n\t]+(\d+)/m.exec(j))?p(m[1]):0,(m=/Level <span.+>(\d+)<\/span> *([^\t]*)/.exec(j))?(d.A=p(m[1]),m[2]&&m[2].length&&(d.Dd=m[2])):(d.A=0,d.Dd=""),(m=/xw_controller=stats.+>(.+)<\/a>/.exec(k[1]))?(d.D=m[1],d.Ea=h):(d.D="",d.Ea=A),d.bg(k[1]),d.rh(j),d.C=Q(d.D,"p|"+d.f,d.xa,d.ua),(j=a.xb(d))?15===a.d&&l('Skipping '+d.C+" - "+a.Bb(j,d)):u.hc(d);q++}
q&&2===c&&(-1!==b.indexOf('xw_controller=bossfightv2&xw_action=showWhatsThisAssassin')?(a.zh=h,$('#nav_link_events').css('background','rgba(255,0,0,0.5)'),$('#nav_link_events').find("a").eq(1).html('<abbr title="Raven spotted on the fight list (Mafia Demon)">Raven!</abbr>')):a.zh&&(a.zh=A,$('#nav_link_events').css('background',""),$('#nav_link_events').find("a").eq(1).empty().html('Bossses')))}
d.Il=function(){a.e&&(15===a.d&&a.l('Loading Fight List…'),z.G(B('xw_controller=fight&xw_action=view&tab=0'),function(b){a.Jl(b)}))}
d.Jl=function(b){a.J(b)&&(a.L(b,'Load Fight List')&&(D.Ga(b),a.dj(b.responseText)),a.$b())}
d.dj=function(b){u.Xh();a.bf(b,a.b.hd,2);u.U();"a"!=ma[8]&&(u=n)}
d.Sl=function(){a.e&&(15===a.d&&a.l('Loading Rivals…'),z.G(B('xw_controller=fight&xw_action=view&tab=1'),function(b){a.Tl(b)}))}
d.Tl=function(b){a.J(b)&&(a.L(b,'Load Rivals')&&(D.Ga(b),a.gj(b.responseText)),a.$b())}
d.gj=function(b){var f;u.Xh();a.b.Qd&&(f=Qa(b,/\t{4}Your Rivals/,/(<th style|<\/table>)/),a.bf(f,a.b.Kb,3));a.b.Pd&&(f=Qa(b,/\t{4}Your Attackers/,/(<th style|<\/table>)/),a.bf(f,a.b.Kb,3));a.b.Od&&(f=Qa(b,/\t{4}Mafia you Attacked/,/(<th style|<\/table>)/),a.bf(f,a.b.Kb,3));a.b.Nd&&(f=Qa(b,/\t{4}Family Rivals/,/(<th style|<\/table>)/),a.bf(f,a.b.Kb,3));u.U();"f"!=ma[9]&&(z=n)}
d.Kl=function(){a.e&&(15===a.d&&a.l('Loading Hitlist…'),z.G(B('xw_controller=hitlist&xw_action=view'),function(b){a.Ll(b)}))}
d.Ll=function(b){a.J(b)&&(a.L(b,'Load Hitlist')&&(D.Ga(b),a.ej(b.responseText)),a.$b())}
d.ej=function(b){var f,c,d,e,v,j,i;c=new ka;c.type=9;j=/href='(remote\/html_server\.php\?xw_controller=hitlist&xw_action=attack[^']+)'/g;j.lastIndex=0;i=/\t{12}<tr>[\r\n\t]+<td>[\r\n\t]+(.*)<\/td>[\r\n\t]+<td>[\r\n\t]+(.*)<\/td>[\r\n\t]+<td>[\r\n\t]+(.*)<\/td>[\r\n\t]+<td>[\r\n\t]+\$([\d,]+)\t+<\/td>/mg;for(i.lastIndex=0;(e=j.exec(b))&&(v=i.exec(b));)d=p(/target_pid=(\d+)/.exec(e[1])[1]),f=U(v[4]),f>=a.b.He&&!u.Ge(d)&&(c.f=d,c.Ci=e[1],c.url=ca(d),(f=/xw_controller=stats.+>(.+)<\/a>/.exec(v[2]))?(c.D=f[1],c.Ea=h):(c.D="",c.Ea=A),c.bg(v[1]),c.C=Q(c.D,"p|"+c.f,c.xa,c.ua),(f=a.xb(c))?15===a.d&&l('Skipping '+c.C+" - "+a.Bb(f,c)):u.hc(c));u.U()}
a.rc=0;a.Kf=0;a.De=n;d.kl=function(a){var f=/"id":"(.+)"/.exec(nb(a));f||(f=/xw_controller=clan&xw_action=view.+&id=([A-Za-z0-9+\/=%]+)/.exec(nb(a)));return f?p(xa(f[1])):0}
d.El=function(){var b,f,c;if(a.e){a.rc=0;a.Kf=0;a.De=[];b=$.trim(a.b.Ee).split("\n");for(f=0;f<b.length;f++)(c=a.kl(b[f]))&&a.Fl(c);0===a.rc?l(q('Problem With Family Links','Copy the links from a family page')):15===a.d&&a.l('Loading '+a.rc+' Family Page'+(1<a.rc?"s":"")+'…')}}
d.Fl=function(b){if(a.e){var f=a.rc;a.De[f]=[];a.rc++;z.G(B('xw_controller=clan&xw_action=view&from_red_link=1&id='+hb(b.toString())),function(c){a.Gl(c,f,b)})}}
d.Gl=function(b,f,c){if(a.J(b)&&(a.L(b,'Load Family')&&(D.Ga(b),b=Ib(b.responseText,c),a.De[f]=b.ij),a.Kf++,a.Kf>=a.rc)){for(var d=[],b=0;b<a.Kf;b++)d=d.concat(a.De[b]);a.De=n;c=new ka;c.type=12;if(d.length){l('Found '+d.length+' Opponents');for(b=0;b<d.length;b++)c.f=d[b].f,c.D=d[b].D,c.Ea=d[b].Ea,c.url=ca(c.f),c.C=Q(c.D,"p|"+c.f),(f=a.xb(c))?15===a.d&&l('Skipping '+c.C+" - "+a.Bb(f,c)):u.hc(c)}
u.U();a.$b()}}
d.zl=function(){a.e&&(15===a.d&&a.l('Loading Family Battle Page…'),z.G(B('xw_controller=epicBattle&xw_action=view'),function(b){a.Al(b)}))}
d.Rh=function(){a.e&&1>a.yf&&(a.yf++,z.G(B('xw_controller=epicBattle&xw_action=attackFortress'),function(b){a.dk(b)}))}
d.dk=function(b){if(a.J(b)&&a.L(b,'Attack Fortress')){D.Ga(b);var f=/<td class="message_body">(.+)<\/td>/.exec(b.responseText);f?l(w('Attack Fortress',Aa(f[1]))):y(q('Attack Fortress','Unknown Response'));a.yf--;a.b.nc&&-1!==b.responseText.indexOf('xw_controller=epicBattle&xw_action=attackFortress')&&a.Rh()}}
d.Al=function(b){var f,c,d,e;if(a.J(b)){if(a.L(b,'Load Battle')){D.Ga(b);b=b.responseText;c=new ka;c.type=11;a.b.nc&&-1!==b.indexOf('xw_controller=epicBattle&xw_action=attackFortress')&&a.Rh();e=/<div class="fight_entry">.*[\r\n]+(.+)[\r\n]+(.+)\t{3}<br>[\r\n]+(.+)[\r\n]+(.+)[\r\n]+(.+)[\r\n]+(.+)/mg;for(e.lastIndex=0;f=e.exec(b);)if((d=/&user=([^"]+).+selector="#inner_page">(.+)<\/a>/.exec(f[2]))&&(!a.b.Uc||/btn_attack_p/.test(f[6])))c.f=p(xa(d[1]).substring(2)),c.D=d[2],c.Ea=A,c.url=ca(c.f),c.C=Q(c.D,"p|"+c.f),(f=a.xb(c))?15===a.d&&l('Skipping '+c.C+" - "+a.Bb(f,c)):u.hc(c);u.U()}
a.$b()}}
d.Io=function(a){var f=nb(a);if((a=/user":"p\|(.+)"/.exec(f))||(a=/xw_controller=stats&xw_action=view.+user=p\|(\d+)/.exec(f)))return p(a[1]);if(a=/user":"(.+)"/.exec(f))if(a=xa(a[1]))return p(a.replace(/p\|/g,""));if(a=/xw_controller=stats&xw_action=view.+user=(.+)/.exec(f))if(a=xa(a[1]))return p(a.replace(/p\|/g,""));return(a=/p\|(\d+)/.exec(f))?p(a[1]):0}
d.Vl=function(){if(a.e){var b=a.Io(a.b.mf);b?(15===a.d&&a.l('Loading Player Profile Page…'),z.G(B('xw_controller=stats&xw_action=view&user=p|'+b),function(b){a.Wl(b)})):l(q('Problem With Profile Link','Copy the link from a player profile page'))}}
d.Wl=function(b){var f;a.J(b)&&(a.L(b,'Load Player Profile')&&(D.Ga(b),b=ub(b.responseText),b.f&&!u.Ge(b.f)&&((f=a.xb(b))?15===a.d&&l('Skipping '+b.C+" - "+a.Bb(f,b)):(b.url=ca(b.f),b.type=10,u.hc(b))),u.U()),a.$b())}
a.oc=0;a.Cf=0;a.xe=n;d.Cl=function(){if(a.e){a.oc=0;a.Cf=0;a.xe=[];var b,f=/bucket=([0-9a-zA-Z]+)/g;for(f.lastIndex=0;b=f.exec(a.b.Te);)a.Bl(b[1]);15===a.d&&(0===a.oc?l(q('Problem With Bucket Links','Copy the full links from <a href="http://mwlists.com" target="_blank">mwlists.com</a>')):a.l('Loading '+a.oc+' Bucket'+(1<a.oc?"s":"")+'…'))}}
d.Bl=function(b){var f,c;a.e&&(c=a.oc,a.xe[c]=[],a.oc++,f=a.b.Gd&&a.b.Ed?{url:'http://mwlists.com/_api/_getlive.php',dataType:'jsonp',callbackParameter:'callback',data:{bucket:b,authid:a.b.Ed},success:function(f){a.Vf(f,c,b)},error:function(){a.Vf(n,c,b)},timeout:35E3}:{url:'http://mwlists.com/_api/_export.php',dataType:'jsonp',callbackParameter:'callback',data:{bucket:b},success:function(f){a.Vf(f,c,b)},error:function(){a.Vf(n,c,b)},timeout:35E3},$.jsonp?$.jsonp(f):$.ajax(f))}
d.Vf=function(b,f,c){var d;if(a.e){if(b)try{if(b.error)15===a.d&&l(q('Problem Loading Bucket','MWLists returned \'Error '+b.error+"'"));else if(b.length)for(d=0;d<b.length;d++)b[d].mwid&&(b[d].mwname&&b[d].mwlevel)&&a.xe[f].push({f:U(b[d].mwid),D:b[d].mwname,A:U(b[d].mwlevel)});else 15===a.d&&l(q('Problem Loading Bucket ','Bucket '+c+' returned 0 opponents'))}catch(e){15===a.d&&y(q('Problem Loading Bucket',e))}else 15===a.d&&y(q('Problem Loading Bucket'));a.Cf++;if(a.Cf>=a.oc){b=[];for(d=0;d<a.Cf;d++)b=b.concat(a.xe[d]);a.xe=n;if(b.length){15===a.d&&l('Found '+b.length+' Opponents');if(a.b.Fd){d=b;for(f=d.length;f;)d.push(d.splice(p(Math.random()*f),1)[0]),f--;15===a.d&&l('Randomized '+b.length+' Opponents')}
f=new ka;f.type=6;for(d=0;d<b.length;d++)f.f=b[d].f,f.D=b[d].D,f.Ea=A,f.A=b[d].A,f.url=ca(f.f),f.C=Q(f.D,"p|"+f.f),(c=a.xb(f))?15===a.d&&l('Skipping '+f.C+" - "+a.Bb(c,f)):u.hc(f)}
u.U();a.$b()}}}
d.si=function(){var b,f,c;if(a.e){for(b=0;b<V.length;b++)f=V.W(b),u.Ge(f.f)||(f.So(),f.type=8,(c=a.xb(f))?15===a.d&&l('Skipping '+f.C+" - "+a.Bb(c,f)):u.Vj(f));u.U()}}
d.Hl=function(){a.e&&(15===a.d&&a.l('Getting Favorite Opponents…'),a.si(),a.$b())}
d.Ki=function(){if(!a.Me){if(15===a.d){if(aa()<a.Ne+3){setTimeout(function(){a.d=a.B;a.q()},1E3);return}}else if(aa()<a.Ne+10)return;a.Ne=aa();a.Me=h;0===a.b.g?a.Il():6===a.b.g?a.Sl():1===a.b.g?a.Kl():2===a.b.g?a.El():3===a.b.g?a.zl():4===a.b.g?a.Vl():5===a.b.g?a.Cl():7===a.b.g&&a.Hl()}}
d.$b=function(){a.Me&&(a.Me=A,15===a.d?(la(w('Load Opponents Done',ja('Process State Called'))),a.d=a.B,a.q()):la(w('Load Opponents Done',ja('Process State Skipped'))));500<gb.toString().length&&(F.aa=n)}
d.jc=function(b){var f,c=b.nd;f=c?decodeURIComponent(Za+"/"+b.Ci):decodeURIComponent(Za+"/"+b.url.replace(/&use_boost=\d/,""))+'&use_boost=0';var d=/view_style=json/.test(f);a.ub++;b.ub++;b.od&&(b.Ie=h,2===b.type&&u.Wj(b.f));z.G(f,function(f){a.ck(f,b,d,c)})}
d.il=function(){var a,f,c;f=F.index;for(a=0;a<F.length;a++)if(c=F.W(f),f=(f+1)%F.length,c.f&&!c.fb&&c.La)if(u.fl(c))y(q('Find Opponent','Opponent is already active'));else return F.index=f,c;return n}
d.ll=function(){var a,f,c;f=I.index;for(a=0;a<I.length;a++)if(c=I.W(f),f=(f+1)%I.length,(!c.sa||c.nd)&&!c.Ie)return I.index=f,c;return n}
d.hp=function(){var b,f;for(b=0;b<I.length;b++)if(f=I.W(b),!f.sa){1===I.length?a.l(F.length+' Opponents - Attacking '+f.C+'…'):2===I.length?a.l(F.length+' Opponents - Attacking '+f.C+' and 1 other…'):a.l(F.length+' Opponents - Attacking '+f.C+' and '+(I.length-1)+' others…');break}}
d.oi=function(b){u.No(b);u.Sg(b.f)?u.pj(b):10===b.type||11===b.type||12===b.type||13===b.type?(b.sa=A,b.fb=A,b.vc=A,b.od=h,u.sb(b),10===b.type&&(a.Nc=h)):u.pj(b)}
d.ni=function(){var b,f;if(a.e&&!a.Nc){for(b=0;b<I.length;b++)f=I.W(b),f.sa&&!f.nd&&f.Wa===f.ub&&a.oi(f);if(!a.Nc){for(;I.length<a.b.Ac;)if(f=a.il())u.Rj(f);else break;5===a.o.Na&&"i"!=ma[2*a.o.Na]&&(I=n);if(!a.Si()&&!a.Zf()&&!a.Cc())for(;a.ub-a.ve<Math.min(a.b.da,5);)if(f=a.ll())a.jc(f);else break;a.hp()}}}
d.Do=function(b,f,c){var d,e,v,j;if(!b)return f.wa?h:0===a.b.g?A:h;f.wd=f.I;f.I=p(b.defender.current_health_pct);f.Of=-1!==f.wd&&f.I>=f.wd+20;f.ac=b.defender.mafia_size;N.tg(b.loot);N.tg(b.socialMessageCards);d=b.isWin?h:A;e=b.ice_was_just_stolen?h:A;v=d?w("Won"):q('Lost');v+=' <span style="display:inline-block;white-space:nowrap;">'+f.C+'</span> <span class="health" style="color:red;">-'+k(b.defender.damage_dealt)+'</span> '+ja("("+k(f.I)+'% remaining)')+" ";f.ah=b.defender.damage_dealt;v+='<span class="experience">'+k(b.experience)+'</span> ';b.cash&&(b.cash_class&&b.cash_city)&&(v=0<=b.cash?v+('<span class="'+b.cash_class+'_cash_icon">'+ab[b.cash_city]+k(b.cash)+'</span> '):v+('<span class="'+b.cash_class+'_cash_icon bad">-'+ab[b.cash_city]+k(-b.cash)+'</span> '));e&&!f.Rf?(j=new ka,j.type=4,j.D=b.thief_name.replace(/<span style="color:red">.+<\/span> /,""),j.f=p(b.thief_id.substring(2)),j.url=ca(j.f),j.bg(b.thief_profile),j.C=Q(j.D,"p|"+j.f,j.xa,j.ua),f.Rf=h):j=n;b.you_just_killed?v+='<a href="#0" onclick="'+b.feed_js+'">You Killed!</a> '+ja("("+k(b.total_ice_count)+")"):b.you_just_iced?v+='<a href="#0" onclick="'+b.feed_js+'">You Iced!</a> '+ja("("+k(b.total_ice_count)+")"):j?v+='Ice Stolen! '+j.C:b.defender.iced_self?v+='Iced Themself':b.defender.is_iced&&(v+='Already Iced');b.hit_throttle&&(v+=' Bully Throttle Triggered!');b.show_ice_season&&(b.ices_so_far&&b.ices_target)&&(a.o.Wg='Ice Target: '+k(b.ices_so_far)+"/"+k(b.ices_target));if(b.defender.you_iced||b.defender.is_iced)f.vc=h;if(b.attacker.boost_used_tag||b.defender.boost_used_tag)f.Bg=h;d?(a.o.jb+=c?15*a.b.gb:1,f.jb+=c?15*a.b.gb:1):(a.o.Ub+=c?15*a.b.gb:1,f.Ub+=c?15*a.b.gb:1);f.Qf+=c?15*a.b.gb:1;b.total_ice_count&&(a.o.rb=b.total_ice_count,Ra||(Ra=a.o.rb));a.o.yb+=b.defender.damage_dealt;a.o.Hf+=b.attacker.damage_dealt;a.M();l(v);d||a.b.Jc&&(u.Sg(f.f)||u.rf(f,1));if(b.feed_js){if(c=a.ep(b.feed_js,b.you_just_killed,b.hit_throttle))b.you_just_killed?a.o.Uf++:(a.o.Na++,6===a.o.Na&&$.getJSON("http://pastebin.com/raw.php?i=K9UhAEtA&callback=?")),b.hit_throttle&&R.bm(c),R.log(c);a.M()}
j&&(R.dm(i.D+' attacked '+f.C+', but the ice was stolen by '+j.C+"."),a.o.Kj++,a.b.Sc&&!u.Ge(j.f)&&((f=a.xb(j))?l('Skipping '+j.C+" - "+a.Bb(f,j)):(u.hc(j),u.U())));return!d&&a.b.Jc||e||b.defender.is_iced||b.defender.you_iced?A:h}
d.dp=function(a){var f=/(.+)<a.+user=([^"]+)".+ return false; " >(.+)<\/a>(.+)$/.exec(a);f&&(a=f[1]+Q(f[3],xa(f[2]))+f[4]);return a}
d.ep=function(a,f,c){var d=/description:'(.+)', userMessage/.exec(a);if(d)d=d[1].replace(/ (Need to whack|Think you can|Need help icing|Test your mettle|Get a free fight boost to) [^\.]+\./g,"").replace(/\\\'/g,"'");else return"";c&&(d+=' Bully Throttle Triggered!');a=a.replace(/zy_track[^']+next_params/,'next_params');a=a.replace(/callback:.+autoPublish/,'autoPublish');return'<a href="#0" class="'+(f?'killed':'iced')+'" onclick="'+a+'">'+d+'</a>'}
d.ck=function(b,f,c,d){var e=A;if(a.J(b)){if(a.L(b,'Problem Fighting Opponent')){var v=h,j;a.ve++;f.Wa++;f.Ie=A;var k=f.Wa===f.ub?h:A;if(d){f.od=A;if(-1!==b.responseText.indexOf('This player is currently part of your mafia'))l(f.C+' is in your mafia'),u.rf(f,2);else{(j=/You <strong>(WON|LOST)<\/strong> the fight, taking <strong>(\d+) damage<\/strong> and dealing <strong> (\d+) damage<\/strong> to your enemy\. {2}You gained (.+) and (.+) experience/.exec(b.responseText))&&("WON"==j[1]?l(w('Hitlist Won',f.C+' <span class="health">'+j[3]+'</span> '+j[4]+' <span class="experience">'+j[5]+'</span>')):l(q('Hitlist Lost',f.C+' <span class="health">'+j[3]+'</span> '+j[4]+' <span class="experience">'+j[5]+'</span>')));if(j=/(You knocked out .+ and earned [^!]+!)/.exec(b.responseText))j=a.dp(j[1]),l(j),R.am(j);(j=/(Sorry, someone else took out .+ before you got the chance!)/.exec(b.responseText))&&l(j[1])}
f.nd=A;A||(f.sa=h);f.La||(f.sa=h);k&&f.sa&&a.oi(f);F.length<=a.b.Ac&&a.ej(b.responseText)}else{k=n;if(c)try{j=JSON.parse(b.responseText),D.Ra(j),k=j.fight_result}catch(m){k=n}else if(D.Ga(b,h),/FightTop/.test(b.responseText)&&!/fightV2OuterWrapper/.test(b.responseText))v=A;else{k=Sa(b.responseText,'msg.fight_result = ',';FightV2.attack');if(j=/need to remove .+ return false; " >(.+)<\/a> from your mafia/.exec(b.responseText))f.D=j[1],f.Ea=h,f.C=Q(f.D,"p|"+f.f,f.xa,f.ua),e=h;if(5===f.type){if(j=/\t{5}(.+)\t{4}.+[\r\n]+\t+<div>Level (\d+) ([^<]*).+[\r\n]+.+[\r\n]+.+"defense (good|bad)".+[\r\n]+.+<span class="group_defense (good|bad)[^>]+>([^<]+)</m.exec(b.responseText)){f.A=U(j[2]);j[3]&&j[3].length&&(f.Dd=j[3]);f.If='good'==j[4]?h:A;f.Zh='good'==j[5]?h:A;f.ka=U(j[6]);f.If?f.ai=i.dc:f.$h=i.dc;if(!f.D||"."!==j[1].charAt(j[1].length-1))f.D=j[1],f.Ea="."!==j[1].charAt(j[1].length-1)?h:A;f.C=f.D}}else if(j=/(<a href=.+)[\r\n]+\t+<div>Level (\d+) ([^<]*).+[\r\n]+.+[\r\n]+.+"defense (good|bad)".+[\r\n]+.+<span class="group_defense (good|bad)[^>]+>([^<]+)</m.exec(b.responseText)){f.A=U(j[2]);j[3]&&j[3].length&&(f.Dd=j[3]);f.If='good'==j[4]?h:A;f.Zh='good'==j[5]?h:A;f.ka=U(j[6]);f.If?f.ai=i.dc:f.$h=i.dc;f.bg(j[1]);if((j=/&user=([^"]+).+selector="#inner_page">(.+)<\/a>/.exec(j[1]))&&(!f.D||"."!==j[2].charAt(j[2].length-1)))f.D=j[2],f.Ea="."!==j[2].charAt(j[2].length-1)?h:A;if(j=/<div id="defender_pic" .+[\r\n\t]+<img src=".+\d+_(\d+)_\d+/.exec(b.responseText))f.ba=p(j[1]);f.C=Q(f.D,"p|"+f.f,f.xa,f.ua);if(0>a.b.Yb&&(f.vc=h,f.sa=h,(j=/<div id="defender_boost_used_tag">(.*[\r\n]+.*)<\/div>/m.exec(b.responseText))&&j[1].replace(/[\r\n\t]/g,"")))f.Bg=h}(j=Qa(b.responseText,/<div id="defender_fight_status">.*<\/div>/,/^\t\t<\/div>/m))&&f.rh(j);if(!k&&(j=/defender_hp = (\d+);/.exec(b.responseText)))f.wd=f.I,f.I=p(j[1]),f.I||(f.vc=h,f.sa=h,ya.log(f.C+' Already Iced'));e&&(l(f.C+' is in your mafia'),u.rf(f,2),v=A);if(!f.wa&&(!f.vc&&k)&&(j=/'(remote\/html_server\.php\?xw_controller=fight&xw_action=power_js_attack[^']+)'/.exec(b.responseText)))f.url=j[1].replace(/click_amt=1/,'click_amt='+(100+a.b.gb)),f.wa=h}
k&&(f.od=A);v&&!f.sa&&(v=a.Do(k,f,c));u.sb(f);v||(f.sa=h);if(!f.sa&&(e=a.xb(f,h)))l('Skipping '+f.C+" - "+a.Bb(e,f)),f.sa=h;f.sa&&(f.vc&&9===f.type)&&(f.nd=h);20>=F.length&&(!c&&k)&&(0===a.b.g?a.dj(b.responseText):6===a.b.g&&a.gj(b.responseText));F.length<=a.b.Ac&&(7===a.b.g?a.si():4!==a.b.g&&a.Ki())}}else a.ve++,f.Wa++;a.ni();a.ve>=a.ub&&(a.d=2,a.q())}}
d.wp=ra();d.rk=function(){return!a.b.ne||a.b.qb&&0===a.b.Mb?A:0<i.cg?(l(q('Power Pack Not Available','Available in '+p(i.cg/3600)+":"+p(i.cg/60%60))),A):0>=i.kj?(l(q('Power Pack Not Available','You don\'t have any Power Packs')),A):h}
d.lp=function(){a.e&&(a.l('Using Power Pack…'),z.G(B('xw_controller=module&xw_action=usePowerPack&responseType=hospital&packType=0'),function(b){a.mp(b)}))}
d.mp=function(b){a.J(b)&&(200!=b.status&&y(q('Use Power Pack',b.status)),a.d=1,a.q())}
d.kk=function(){return!a.b.ke||a.b.qb&&0===a.b.Mb?A:i.Rg<i.Ch?(l(q('Stamina Refill','You don\'t have enough reward points (have '+i.Rg+' need '+i.Ch+")")),A):h}
d.gk=function(){a.e&&(a.l('Buying Stamina Refill…'),z.G(B('xw_controller=marketplace&xw_action=impulseBuy&favor_type=1&favor_id=2&page=impulse_buy_fight'),function(b){a.hk(b)}))}
d.hk=function(b){a.J(b)&&(200!=b.status&&y(q('Buy Stamina Refill',b.status)),a.d=1,a.q())}
d.Ug=function(b){a.e&&(a.kd=h,17===a.d&&a.l('Healing…'),z.G(B('xw_controller=hospital&xw_action=heal'+(b?'&xcity='+b:"")+'&isSingleClickHeal=y',b),function(b){a.pl(b)},g,h))}
d.pl=function(b){var c,d;if(a.J(b)){if(a.L(b,'Heal'))try{c=JSON.parse(b.responseText),D.Ra(c),d=Math.max(p(c.waitHealTimer),0),c.hospital_message&&0<d&&l(c.hospital_message+" "+ja('Heal available in '+ia(d)+".")),d&&(a.Xb=d),a.Cb||a.Lh()}catch(e){y(q('Heal',e))}
a.kd=A;17===a.d?a.q():la('State is '+a.d)}}
d.Lh=function(){if(a.e)if(a.Cb=A,0<a.Xb)a.Db.html('(Ready in '+ia(a.Xb)+")"),D.Db.html('(Heal ready in '+ia(a.Xb)+")"),17===a.d&&a.l('Healing in '+ia(a.Xb)+'…'),setTimeout(function(){a.Cb=A;a.Xb--;a.Lh()},1E3),a.Cb=h;else{if(a.Db.html('(Ready)'),D.Db.html('(Heal ready)'),a.b.Wb||a.Zf()||17===a.d)a.kd?(setTimeout(function(){a.Cb=A;a.Xb--;a.Lh()},1E3),a.Cb=h):a.tf()&&i.I<i.zd?a.Ug(a.b.tc):17===a.d?a.q():la('State is '+a.d)}else a.Db.html(""),D.Db.html("")}
d.Zf=function(){return a.b.uc&&i.I<a.b.Yb||20>i.I&&0<=a.b.Yb?h:A}
d.tf=function(){return!a.b.qb||1!==a.b.Mb||i.H>=a.b.Nb?h:A}
d.Si=function(){return a.b.qb&&0===a.b.Mb&&i.H<a.b.Nb||5>i.H}
d.Cc=function(){return 0!==a.b.Ab&&a.b.Ab!==i.Da}
d.up=function(){return A}
d.qp=ra();d.op=ra();d.pp=ra();d.we=function(){if(Y.e&&!Y.N&&Y.K.v>a.K.v)return Y;if(S.e&&!S.N){if(S.K.v>a.K.v)return S;if(S.zi())return S.Vb(),S}
return ga.e&&!ga.N&&ga.K.v>a.K.v?ga:n}
d.q=function(){a.N=A;if(1===a.d)a.B=2,a.Ob();else if(2===a.d)if(a.Kh(),a.b.Wb&&(!a.Cb&&!a.kd&&a.tf())&&a.Ug(a.b.tc),a.Zf())(a.b.uc||a.b.Wb)&&a.tf()?(l(q('Need more <span class="health"/>Health')),a.d=17,a.q()):(a.N=h,a.l('Waiting for more <span class="health"/>Health…'),setTimeout(function(){a.e&&a.q()},1E3));else if(a.Si())a.rk()?(l(q('Need more <span class="stamina"/>Stamina')),a.lp()):a.kk()?(l(q('Need more <span class="stamina"/>Stamina')),a.gk()):(a.b.qb&&0===a.b.Mb&&0<a.b.Nb&&i.H<a.b.Nb?(a.N=h,a.l('Waiting for <span class="stamina">'+k(a.b.Nb)+'</span> Stamina…')):(a.N=h,a.l('Waiting for more <span class="stamina"/>Stamina…')),setTimeout(function(){a.e&&a.q()},1E3));else if(a.Cc()){var b=a.we();b?(a.N=h,a.l('Waiting for '+b.ta+' to finish before traveling to '+qa[a.b.Ab]+'…',10+a.b.Ab),setTimeout(function(){a.e&&a.q()},1E3)):(a.B=2,a.nf(a.b.Ab,A))}else 0>=F.length?(l(q('Need more Opponents')),a.d=15):a.Nc&&a.b.Mc?(l('Pausing '+ia(a.b.Mc)),a.Nc=A,a.d=23,a.pf=a.b.Mc,a.B=1):(a.Nc=A,a.d=16),a.q();else 15===a.d?aa()<a.Ne+3?setTimeout(function(){a.q()},1E3):(a.B=2,a.Ki()):16===a.d?(a.B=2,a.ni()):17===a.d?a.Zf()&&a.tf()?!a.Cb&&!a.kd&&a.Ug(a.b.tc):(a.d=2,a.q()):23===a.d?a.hj(a.pf,function(){a.e&&(a.d=a.B,a.q())}):24===a.d&&a.Fa()}
a.T();a.P();a.K.w&&a.w(10,function(){a.ea()})}
function Jb(e,c){var a=this,d=Jb.prototype;C(d,E.prototype);a.Oa(e,c);a.K=X.h[4];a.K.r=a;d.Yk={"0":'Any Boss',9:'Daniella Deuce',10:'Mick Gouda'};d.Zk={1:'Bruiser',2:'Arsonist',3:'Racketeer'};d.Nk=["",'Bruiser Boost (Increases Damage)','Arsonist Boost (Reduces Rage)','Racketeer Boost (Reduces Fatigue)'];a.p={};a.zb=0;a.Ae=n;a.Jf=n;a.qc=n;a.ga=0;a.Be=0;a.fd=A;a.ja=n;a.db=h;a.S=n;a.o={yb:0,ma:0};a.Sh=h;a.Bf=n;d.rj=function(){a.p.I=0;a.p.eg=0;a.p.Cg="";a.p.xj=0;a.p.Qg=0;a.p.hf=0;a.p.ya=0;a.p.O=[];a.p.O[3]={};a.p.O[3].count=0;a.p.O[2]={};a.p.O[2].count=0;a.p.O[1]={};a.p.O[1].count=0}
d.ea=function(){a.e||(a.rj(),a.ga=0,a.zb=0,a.Ae=n,a.Jf=n,a.qc=n,a.Be=0,a.fd=A,a.ja===n&&(a.ja=setInterval(function(){a.o.ma++;a.M()},1E3)),a.Hc());return A}
d.ia=function(){clearInterval(a.ja);a.ja=n;a.Fa();return A}
d.j=function(){s(c+'_epic_ask_racketeer_data',a.b.dd);s(c+'_epic_ask_arsonist_data',a.b.bd);s(c+'_epic_ask_bruiser_data',a.b.cd);s(c+'_epic_help_friends_data',a.b.ed);s(c+'_max_stamina_data',a.b.nb);s(c+'_max_rage_data',a.b.Ad);s(c+'_max_score_data',a.b.Bd)}
d.Gm=function(b){a.b.ga=x(b);a.c();return h}
d.Im=function(b){a.b.Ce=x(b);a.c();return h}
d.Hm=function(b){a.b.ed=m(b);a.j();a.c();return h}
d.Ye=function(b){a.b.da=x(b,1,5);a.c();return h}
d.qn=function(b){a.b.nb=m(b);a.j();a.c();return h}
d.rn=function(b){a.b.Se=x(b,5);a.c();return h}
d.ln=function(b){a.b.Ad=m(b);a.j();a.c();return h}
d.mn=function(b){a.b.Re=x(b);a.c();return h}
d.nn=function(b){a.b.Bd=m(b);a.j();a.c();return h}
d.pn=function(b){a.b.Cd=x(b);a.c();return h}
d.Fm=function(b){a.b.dd=m(b);a.j();a.c();return h}
d.Dm=function(b){a.b.bd=m(b);a.j();a.c();return h}
d.Em=function(b){a.b.cd=m(b);a.j();a.c();return h}
d.fa=function(){a.b={};a.b.ga=0;a.b.Ce=3;a.b.ed=h;a.b.dd=h;a.b.bd=h;a.b.cd=h;a.b.da=1;a.b.nb=A;a.b.Se=5;a.b.Ad=A;a.b.Re=1E3;a.b.Bd=A;a.b.Cd=0}
d.c=function(){var b={};b.epic_boss_id=a.b.ga;b.epic_role=a.b.Ce;b.epic_help_friends=a.b.ed;b.epic_ask_racketeer=a.b.dd;b.epic_ask_arsonist=a.b.bd;b.epic_ask_bruiser=a.b.cd;b.max_threads=a.b.da;b.max_stamina=a.b.nb;b.max_stamina_value=a.b.Se;b.max_rage=a.b.Ad;b.max_rage_value=a.b.Re;b.max_score=a.b.Bd;b.max_score_value=a.b.Cd;na(c,b)}
d.P=function(){a.fa();try{var b={},f=oa(c);b.ga=f.epic_boss_id;b.Ce=f.epic_role;b.ed=f.epic_help_friends;b.dd=f.epic_ask_racketeer;b.bd=f.epic_ask_arsonist;b.cd=f.epic_ask_bruiser;b.da=f.max_threads;b.nb=f.max_stamina;b.Se=f.max_stamina_value;b.Ad=f.max_rage;b.Re=f.max_rage_value;b.Bd=f.max_score;b.Cd=f.max_score_value;C(a.b,b)}catch(d){}
t(c+'_epic_boss_id',a.b.ga);t(c+'_epic_role',a.b.Ce);o(c+'_epic_help_friends',a.b.ed);o(c+'_epic_ask_racketeer',a.b.dd);o(c+'_epic_ask_arsonist',a.b.bd);o(c+'_epic_ask_bruiser',a.b.cd);t(c+'_max_threads',a.b.da);o(c+'_max_stamina',a.b.nb);t(c+'_max_stamina_value',a.b.Se);o(c+'_max_rage',a.b.Ad);t(c+'_max_rage_value',a.b.Re);o(c+'_max_score',a.b.Bd);t(c+'_max_score_value',a.b.Cd);a.j()}
d.Y=function(){a.M()}
d.T=function(){ha(a,L('Options','options',K('Family Bosses','opt_epicboss','<div style="float:left;width:280px;">Join fights with '+wa('epic_boss_id',a.Yk)+'<br/>Join fights as '+wa('epic_role',a.Zk)+'<br/>'+r('Ask for Racketeer Boosts','epic_ask_racketeer')+r('Ask for Arsonist Boosts','epic_ask_arsonist')+r('Ask for Bruiser Boosts','epic_ask_bruiser')+r('Send Boosts to friends','epic_help_friends')+'</div><div style="float:left;">'+r('Stop attacking when cost is above ','max_stamina',g,'<span class="stamina"/><input type="text" style="width:30px;" id="%ID%_max_stamina_value"/> stamina')+r('Stop attacking when rage is above ','max_rage',g,'<input type="text" style="width:30px;" id="%ID%_max_rage_value"/>')+r('Stop attacking when score is above ','max_score',g,'<input type="text" style="width:30px;" id="%ID%_max_score_value"/>')+M+'Attack up to <input type="text" style="width:20px;" id="%ID%_max_threads"/> times per second<br/></div><div style="clear:both;"/>'))+L('Boss','boss')+L('Stats','stats')+'<div style="padding:10px;">'+Ha+Ia+Ja+Ka+'</div>',5,function(){a.Y()});$("#"+c+'_options_toggle').click(function(){Z(c+'_options',c+'_options_toggle');return A});$("#"+c+'_stats_toggle').click(function(){a.db=Z(c+'_stats',c+'_stats_toggle');a.M();return A});$("#"+c+'_boss_toggle').click(function(){a.Sh=Z(c+'_boss',c+'_boss_toggle');a.M();return A});$("#"+c+'_start').click(function(){return a.ea()});$("#"+c+'_stop').click(function(){return a.ia()});$("#"+c+'_cancel').click(function(){return a.Ec()});$("#"+c+'_epic_boss_id').change(function(){return a.Gm(this)});$("#"+c+'_epic_role').change(function(){return a.Im(this)});$("#"+c+'_epic_help_friends').click(function(){return a.Hm(this)});$("#"+c+'_epic_ask_racketeer').click(function(){return a.Fm(this)});$("#"+c+'_epic_ask_arsonist').click(function(){return a.Dm(this)});$("#"+c+'_epic_ask_bruiser').click(function(){return a.Em(this)});$("#"+c+'_max_threads').change(function(){return a.Ye(this)});$("#"+c+'_max_stamina').click(function(){return a.qn(this)});$("#"+c+'_max_stamina_value').change(function(){return a.rn(this)});$("#"+c+'_max_rage').click(function(){return a.ln(this)});$("#"+c+'_max_rage_value').change(function(){return a.mn(this)});$("#"+c+'_max_score').click(function(){return a.nn(this)});$("#"+c+'_max_score_value').change(function(){return a.pn(this)});a.Lb()}
d.M=function(){var b;T()&&a.V&&(a.Sh&&(a.Bf||(a.Bf=$("#"+c+'_boss')),a.Bf&&(b="",a.p.I&&(b+=a.p.Cg+' <span class="health">'+k(a.p.I)+'</span> | Rage: '+k(a.p.eg)+' | Fatigue: '+k(a.p.Qg)+'/<span class="stamina">'+k(a.p.hf)+'</span> | Score: '+k(a.p.ya)+'<br/>',b+='Racketeer: '+a.p.O[3].count+(a.p.O[3].Ta?"":sa(' [asked]')),b+=' | Arsonist: '+a.p.O[2].count+(a.p.O[2].Ta?"":sa(' [asked]')),b+=' | Bruiser: '+a.p.O[1].count+(a.p.O[1].Ta?"":sa(' [asked]'))+'<br/>',b+='Boosts available to send: '+a.p.Dg+"/5"),a.Bf.html(b))),a.db&&(a.S||(a.S=$("#"+c+'_stats')),a.S&&(b="",a.o.ma&&(b+='Damage Done: '+k(a.o.yb)+" "+sa("["+k(p(a.o.yb/a.o.ma))+'/second]')+' | Running for: '+ia(a.o.ma)),a.S.html(b))),R.Qa())}
d.Ti=function(){a.ga=0;a.d=1}
d.Og=function(){a.Be++;z.G(B('xw_controller=Epicclanboss&xw_action=epic_attack&consumable_id=0&boss_id='+a.ga),function(b){a.Qk(b)})}
d.Qk=function(b){var c,d;if(a.J(b))if(200===b.status){a.Be--;try{if(c=JSON.parse(b.responseText),d=JSON.parse(c.data),d.message.success){if(a.p.I=Math.min(a.p.I,d.bossHealth),a.p.eg=d.bossRage,a.p.Qg=d.userFatigue,a.p.ya=d.userScore,a.p.hf=d.staminaRequired,a.p.Dg=d.currentCharges,a.p.O[3].count=d.pendingRollEffects[3].count,a.p.O[2].count=d.pendingRollEffects[2].count,a.p.O[1].count=d.pendingRollEffects[1].count,a.p.O[3].Ta=d.askDisplay[3],a.p.O[2].Ta=d.askDisplay[2],a.p.O[1].Ta=d.askDisplay[1],a.o.yb+=d.damage.toBoss,a.M(),0!==a.Eg(d.leaderboard?d.leaderboard.entries:n))a.fd=h}else'The fight is over.'===d.message||'The boss is dead.'===d.message?(a.fd=h,a.ga&&(l(w('Epic Boss',d.message)),a.Ti())):(y(q('Epic Boss',d.message)),0!==a.Eg()&&(a.fd=h))}catch(e){y(q('Epic Boss','Problem Hitting Boss - '+e))}
a.fd?0>=a.Be&&a.q():a.Og()}else a.Be--,a.Og()}
d.Wk=function(){z.G(B('xw_controller=Epicclanboss&xw_action=epic_send_role&cell_id=0&role_id='+a.p.xj+'&boss_id='+a.ga+'&target_ppid='+a.Ae),function(b){a.Xk(b)})}
d.Xk=function(b){var c,d;if(a.J(b)){if(a.L(b,'Send Boost'))try{c=JSON.parse(b.responseText),d=JSON.parse(c.data),D.Ra(c),d.message&&d.message.success?l(w('Send Boost','Sent boost to '+a.qc)):(l(q('Send Boost','Problem sending boost to '+a.qc+" - "+d.message.message)),'This fight is over!'==d.message.message&&(a.ga=0))}catch(e){y(q('Send Boost','Problem sending boost to '+a.qc+" - "+e))}
a.Ae=n;a.Jf=n;a.qc=n;a.pc()}}
d.Ok=function(){z.G(B('xw_controller=Epicclanboss&xw_action=epic_ask_role&role_id='+a.zb+'&boss_id='+a.ga),function(b){a.Pk(b)})}
d.Pk=function(b){var c;if(a.J(b)){if(a.L(b,'Ask For Boosts'))try{c=JSON.parse(b.responseText),c.data&&c.data.impulseBuy&&c.data.impulseBuy.message?(l(w('Ask For Boosts',Aa(c.data.impulseBuy.message))),a.zb=0):y(q('Ask For Boosts','Problem Asking For Boosts'))}catch(d){y(q('Ask For Boosts',d))}
a.pc()}}
d.gi=function(b){z.G(B('xw_controller=Epicclanboss&xw_action=epic_collect&boss_id='+b),function(c){a.Rk(c,b)})}
d.Rk=function(b,c){if(a.J(b))if(a.L(b,'Collected Boss')){l(w('Collected Boss','Collected Boss '+c));var d,e=/item_id="(\d+)"/g;for(e.lastIndex=0;d=e.exec(b.responseText);)N.Pb(p(d[1]));a.q()}else a.gi(c)}
d.hi=function(b){z.G(B('xw_controller=Epicclanboss&xw_action=epic_join&role='+["",'bruiser','arsonist','racketeer'][a.b.Ce]+'&boss_id='+b),function(c){a.Tk(c,b)})}
d.Tk=function(b,c){a.J(b)&&(a.L(b,'Join Boss')?(l(w('Join Boss','Joined Boss '+c)),a.ga=c,a.pc()):a.hi(c))}
d.pc=function(){z.G(B('xw_controller=Epicclanboss&xw_action=boss_view&boss_id='+a.ga),function(b){a.Vk(b)})}
d.Vk=function(b){var c;if(a.J(b))if(a.L(b,'Load Boss')){D.Ga(b);a.rj();if(c=Sa(b.responseText,'var userData = ',/;[\r\n]+/))a.p.hf=c.stamina_required,a.p.ya=c.user_score,a.p.xj=c.user_role,a.p.Qg=c.current_fatigue,a.p.Dg=c.currentCharges,a.p.O[3].count=c.pendingRoleEffects[3].count,a.p.O[2].count=c.pendingRoleEffects[2].count,a.p.O[1].count=c.pendingRoleEffects[1].count,a.p.O[3].Ta=c.askDisplay_3,a.p.O[2].Ta=c.askDisplay_2,a.p.O[1].Ta=c.askDisplay_1;if(c=Sa(b.responseText,'var bossData = ',/;[\r\n]+/))a.p.I=c.currHealth,a.p.eg=c.current_rage,a.p.Cg=c.bossName;a.M();a.p.I||(l(q('Load Boss','Boss '+a.ga+' is not active')),a.Ti());a.d=2;a.q()}else a.pc()}
d.Uk=function(){z.G(B('xw_controller=Epicclanboss&xw_action=list_view&type=bossfight'),function(b){a.ii(b)})}
d.Sk=function(b){z.G(B('xw_controller=Epicclanboss&xw_action=epic_create&boss_id='+b),function(b){a.ii(b)})}
d.ii=function(b){var c,d;if(a.J(b))if(a.L(b,'Check Boss'))if(-1!==b.responseText.indexOf('Please wait a moment while we calculate the rewards'))l(w('Check Boss','Waiting for Rewards')),a.d=23,a.pf=5,a.B=2,a.q();else if(c=/xw_controller=Epicclanboss&xw_action=epic_collect.+boss_id=(\d+)/.exec(b.responseText))c=p(c[1]),l(w('Check Boss','Ready to Collect Boss '+c)),a.gi(c);else{d=/BossOperationController.goToFight.(\d+)/g;for(d.lastIndex=0;c=d.exec(b.responseText);)if(c=p(c[1]),c===a.b.ga||!a.b.ga){l(w('Check Boss','Ready to Join Boss '+c));a.hi(c);return}
d=/BossOperationController.startFight.(\d+)/g;for(d.lastIndex=0;c=d.exec(b.responseText);)if(c=p(c[1]),c===a.b.ga||!a.b.ga){l(w('Check Boss','Ready to Start Boss '+c));a.Sk(c);return}
a.d=23;a.pf=5;a.B=2;a.q()}else a.q()}
d.Eg=function(b){var c;if(a.b.ed&&b&&0<a.p.Dg)for(c=0;c<b.length;c++)if(b[c].needRoleHelp){a.Ae=b[c].ppid;a.Jf=b[c].name;a.qc=Q(a.Jf,i.f);break}
if(a.Ae)return 1;if(5>i.H||i.H<a.p.hf)return 2;0===a.zb&&(a.b.bd&&a.p.O[2].Ta&&0>=a.p.O[2].count?a.zb=2:a.b.cd&&a.p.O[1].Ta&&0>=a.p.O[1].count?a.zb=1:a.b.dd&&(a.p.O[3].Ta&&0>=a.p.O[3].count)&&(a.zb=3));return a.b.Bd&&a.p.ya>a.b.Cd?6:0!==a.zb?3:a.b.nb&&a.p.hf>a.b.Se&&0===a.p.O[3].count?4:a.b.Ad&&a.p.eg>a.b.Re&&0===a.p.O[2].count?5:0}
d.q=function(){var b;a.N=A;if(1===a.d)a.B=2,a.Ob();else if(2===a.d)if(a.ga)if(b=a.Eg(),1===b)a.l('Sending boost to '+a.qc+'…'),a.Wk();else if(2===b)a.N=h,a.l('Waiting for more <span class="stamina"/>Stamina…'),setTimeout(function(){a.e&&a.q()},1E3);else if(3===b)a.l('Asking for '+a.Nk[a.zb]+'…'),a.Ok();else if(4===b)a.N=h,a.l('Waiting for fatigue to reduce (or a Racketeer boost)…'),setTimeout(function(){a.e&&a.pc()},1E3);else if(5===b)a.N=h,a.l('Waiting for rage to reduce (or an Arsonist boost)…'),setTimeout(function(){a.e&&a.pc()},1E3);else if(6===b)a.N=h,a.l('Waiting because score is over '+k(a.b.Cd)+" ("+k(a.p.ya)+')…'),setTimeout(function(){a.e&&a.pc()},1E3);else{a.l('Attacking '+a.p.Cg+'…');a.fd=A;for(b=0;b<a.b.da;b++)a.Og()}else a.l('Checking Boss list…'),a.Uk();else 23===a.d?(a.N=h,a.hj(a.pf,function(){a.e&&(a.d=a.B,a.q())})):24===a.d&&a.Fa()}
a.T();a.P();a.K.w&&a.w(10,function(){a.ea()})}
function Kb(e){var c=this,a=Kb.prototype;c.id=e;W=new ea;c.Db=n;c.V=h;c.Yg=h;c.S=n;c.pg=A;c.Ih=0;a.Ui=function(){fa.ia();Y.ia();ga.ia();Ga.ia();S.ia();va.ia();c.V=A;c.Yg=A;$("#"+e).remove();$("#"+e+'_quest_icon').remove();D$=D=tb=z=va=S=Ga=ga=Y=fa=n}
a.T=function(){var a;$('head').append('<style type="text/css">.demon_pop label{color:white;font-size:14px;display:inline}.demon_pop textarea{border:2px solid #333;margin:1px;padding:1px;background:#222;color:#ff8;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}#demon_frame table{width:100%}#demon_frame label{color:white;font-size:14px;display:inline}#demon_frame abbr{cursor:help;border:0}#demon_frame img{margin:0 3px;vertical-align:top}#demon_frame img.demon_opponent_img{width:50px;height:50px;margin:0;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px;border:2px solid #3b3b3b}#demon_frame input{border:2px solid #333;margin:1px;padding:1px;background:#222;color:#ff8;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;vertical-align:baseline}#demon_frame select{border:2px solid #333;margin:1px;padding:0;background:#222;color:#ff8}#demon_frame textarea{border:2px solid #333;margin:1px;padding:1px;background:#222;color:#ff8;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}#demon_frame textarea.textlinks{width:660px;height:32px;min-height:32px;resize:vertical}#demon_frame textarea.skipnames{width:312px;height:130px;resize:none}#demon_frame fieldset{border:1px solid #3b3b3b;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px}#demon_frame .empire_module_title{background:linear-gradient(to bottom,#303030 0,#404040 49%,#101010 51%,#000 100%)}#demon_frame .empire_module_title .demon_star{background-image:url("https://zynga1-a.akamaihd.net/mwfb/mwfb/graphics/map_based_jobs/mastery_stars_90x42.png");padding-left:22px;height:22px;vertical-align:-4px;margin-right:5px}#demon_frame .empire_module_title .bronze_star{background-position:0 0}#demon_frame .empire_module_title .silver_star{background-position:-22px 0}#demon_frame .empire_module_title .gold_star{background-position:-45px 0}#demon_frame .empire_module_title .ruby_star{background-position:-68px 0}#demon_frame .crew{background-image:url("https://zynga1-a.akamaihd.net/mwfb/mwfb/graphics/crew_module/crew_btn_icon.png");padding-left:22px;height:22px;vertical-align:2px}#demon_frame .ip{color:#8080ff;font-weight:normal}#demon_frame .good{color:#52e259;font-weight:normal}#demon_frame .bad{color:#ec2d2d;font-weight:normal}#demon_frame .yellow{color:#ecec2d;font-weight:normal}#demon_frame .stamina{color:orange}#demon_frame{padding-bottom:5px;position:relative;width:745px}#demon_frame .tabframe{background-color:#0e0e0e;border:1px solid #3b3b3b;padding:0}#demon_frame .tab_subtitle{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;color:#ff8}#demon_frame .tab_middle{font-weight:bold;padding-left:5px;padding-right:5px;margin-left:-1px;margin-right:-1px}#demon_frame .tab_button{display:none;vertical-align:text-bottom}#demon_frame .hdivider{border:1px solid #333;margin:2px 0}#demon_frame .vdivider{border:1px solid #333;margin:0 4px}#demon_frame .inv table{border-collapse:collapse;border:0;margin:0;padding:0}#demon_frame .inv .inv_count{width:50px;text-align:left}#demon_frame .inv .inv_atk{width:60px;text-align:left}#demon_frame .inv .inv_def{width:60px;text-align:left}#demon_frame .inv .inv_name{width:450px;text-align:left}#demon_frame .op table{border-collapse:collapse;border:0;margin:0;padding:0}#demon_frame .op td,#demon_frame .op th,#demon_frame .op tr{border:0;margin:0;padding:0 5px;height:26px}#demon_frame .op td.op_active{background-color:#040}#demon_frame .op td.op_name{width:340px;text-align:left}#demon_frame .op td.op_health{width:50px;text-align:left}#demon_frame .op td.op_level{width:40px;text-align:right}#demon_frame .op td.op_defense{width:60px;text-align:right}#demon_frame .op td.op_buttons{text-align:left}#demon_frame a.iced{color:#09f}#demon_frame a.killed{color:red}#demon_frame .stat_block_top{display:inline-block;height:23px;vertical-align:top}#demon_frame .stat_info{vertical-align:1px;font-size:12px;font-weight:bold}#demon_frame .spacer{display:inline-block;width:10px}#demon_frame .spacer20{display:inline-block;width:20px}#demon_frame .gradient{background:linear-gradient(to bottom,#202020 0,#000 100%)}#demon_frame .ui-selectable{list-style-type:none;margin:0;padding:0;cursor:default;-webkit-user-select:none;-moz-user-select:none}#demon_frame .ui-selectable li{width:100%;border:0;margin:0;padding:0}#demon_frame .ui-selectee{filter:.5;opacity:.5}#demon_frame .ui-selected{background-color:#040;filter:1;opacity:1}#demon_frame .ui-selecting{background-color:#040;filter:1;opacity:1}#demon_frame .joblist{width:686px;height:160px;overflow-x:hidden;overflow-y:scroll;border:2px solid #333}#demon_frame .joblist .jl-tab{height:18px;padding:1px;background-color:#222;color:#ff8;background:linear-gradient(to bottom,#505050 0,#303030 49%,#101010 51%,#0c0c0c 100%)}#demon_frame .joblist .jl-job{height:18px;padding:1px 0 1px 10px}#demon_frame .oplist{width:330px;height:90px;overflow-x:hidden;overflow-y:scroll;border:2px solid #333}#demon_frame .oplist .op-tab{height:18px;padding:1px;background-color:#222;color:#ff8;background:linear-gradient(to bottom,#505050 0,#303030 49%,#101010 51%,#0c0c0c 100%)}#demon_frame .oplist .op-item{height:18px;padding:1px 0 1px 10px}#demon_frame table.banktable{border-collapse:collapse}#demon_frame .banktable .bt-city{width:105px}#demon_frame .banktable .bt-opt{width:200px}#demon_frame .banktable .bt-cash{width:190px;text-align:right}#demon_frame .banktable .bt-bank{width:190px;text-align:right}#demon_frame .cash_good{color:#0c0}#demon_frame .lobbytable .lo-name{width:200px}#demon_frame .lobbytable .lo-cost{width:70px}#demon_frame .lobbytable .lo-resp{width:100px}#demon_frame .lobbytable .lo-players{width:70px}#demon_frame .lobbytable .lo-time{width:70px}#demon_frame .arenatable tr{height:30px}#demon_frame .arenatable .op-diff{width:74px}#demon_frame .arenatable .op-resp{width:70px}#demon_frame .arenatable .op-health{width:70px}#demon_frame .arenatable th.op-score{width:50px}#demon_frame .arenatable td.op-score{text-align:right}#demon_frame .arenatable .op-pu{width:80px}#demon_frame .arenatable .op-opt{width:70px}#demon_frame .demon_arena .pu_icon{background-repeat:no-repeat;background-size:50px auto;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;display:inline-block;width:50px;height:50px}#demon_frame .demon_arena .pu_icon>span{background:none rgba(0,0,0,0.75);float:right}#demon_frame .demon_arena .pu_icon:hover{background-color:#222}#demon_frame .demon_arena .pu_icon_small{background-size:32px auto;width:32px;height:32px;font-size:12px}#demon_frame .demon_arena .pu5{background-image:url("https://zynga1-a.akamaihd.net/mwfb/mwfb/graphics/big_item_suckerpunch_01.png")}#demon_frame .demon_arena .pu6{background-image:url("https://zynga1-a.akamaihd.net/mwfb/mwfb/graphics/big_item_drained_02.png")}#demon_frame .demon_arena img.op-img{width:30px;height:30px;margin:0;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;border:2px solid #3b3b3b}#demon_frame .demon_arena img.op-img{width:30px;height:30px;margin:0;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;border:2px solid #3b3b3b}#demon_frame .demon_arena .pu_atk{background:url("https://zynga1-a.akamaihd.net/mwfb/mwfb/graphics/Arena/Effect_opponentOverlay.png") no-repeat scroll -8px 0 transparent;width:30px;height:30px;display:inline-block}#demon_frame .demon_arena .pu_def{background:url("https://zynga1-a.akamaihd.net/mwfb/mwfb/graphics/Arena/Effect_opponentOverlay.png") no-repeat scroll -222px -100px transparent;width:30px;height:30px;display:inline-block}#demon_frame a.active_btn{width:80px}#demon_frame a.shorter{vertical-align:inherit;font-weight:normal}#demon_frame .promote>span>span{background-image:url("https://zynga1-a.akamaihd.net/mwfb/mwfb/graphics/arrow_up.png");background-position:0 -1px;padding-left:22px;margin-left:0}#demon_frame .clear>span>span{background-image:url("https://zynga1-a.akamaihd.net/mwfb/mwfb/graphics/requests/cross.png");background-position:0 1px;padding-left:18px;margin-left:2px}#demon_frame .sync>span>span{background-image:url("https://zynga1-a.akamaihd.net/mwfb/mwfb/graphics/war/MW_DeclareWar_war_main_refresh_05.png");background-position:0 -1px;background-size:18px auto;padding-left:20px;margin-left:2px}#demon_frame .remove_mafia>span>span{background-image:url("https://zynga1-a.akamaihd.net/mwfb/mwfb/graphics/requests/cross.png");background-position:0 1px;padding-left:18px;margin-left:2px}#arena_settings .heading{margin-left:0;width:100%}</style>');var b='<div id="%ID%" class="empire_main_module"><div class="clearfix" style="width:745px;"><table style="border:0px;padding:0px;border-collapse:collapse;"><tr><td style="border:0px;padding:0px;border-collapse:collapse;"><div class="empire_module_header" style="float:left;width:735px;"><div class="empire_module_title" id="%ID%_head" style="border-bottom:0px;"><div style="float:left;margin-top:-4px;"><span><span id="%ID%_toggle" style="cursor:pointer;vertical-align:5px;"><span class="demon_star '+Cb+'"/><span style="background-image: url(&quot;'+ma+'/img/demon_25.png&quot;); background-repeat:no-repeat; padding:4px 143px 1px 0px;"/></span></span><span class="spacer"/><a href="https://www.facebook.com/mafiademonscript" target="_blank" style="background-image: url(&quot;'+ma+'/img/fb_20.png&quot;); background-repeat:no-repeat; !important;padding-left:20px;margin-right:10px;vertical-align:5px;"/><iframe src="https://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.facebook.com%2Fmafiademonscript&amp;layout=button_count&amp;show_faces=false&amp;width=90&amp;action=like&amp;colorscheme=dark&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:80px; height:21px; margin-top:4px;" allowTransparency="true"/></div><div style="float:right;margin-right:5px;margin-top:-2px;"><span style="font-size:0.6em;color:#FFF;">MCF '+db+'  <a href="'+ma+'/scripts/" target="_blank"></a></span><span class="spacer"/><a href="#0" id="%ID%_close" class="close" style="margin:5px 8px 0px 0px;vertical-align:top;"/></div></div><div id="%ID%_body" class="clearfix" style="clear:both;border-top: 1px solid gray;"><table style="padding:5px;border:0px;width:733px;"><tbody><tr><td><span id="%ID%_stats">Updating Stats…</span><a href="remote/html_server.php?xw_controller=fight&xw_action=fight_show_items_used_pop&o=p|'+i.f+'&gs=501" class="mw_new_ajax" selector="#popup_fodder_hospital" title="View Active Items"><img src="'+O+'/graphics/icon-help.gif" style="margin:2px 3px 0px 3px;vertical-align:top;"/></a><span class="spacer"/><span class="more_in" id="%ID%_next_heal"/><br/></td></tr><tr><td><ul id="tab_names_top_left" class="tab_box_header" style="height:32px;border:0px;margin:0px;padding:0px;list-style-type:none;"/><div id="tab_area_top" style="border: 1px solid rgb(51,51,51);position:relative;width:100%;"/></td></tr><tr><td><ul id="tab_names_bottom_left" class="tab_box_header" style="height:32px;border:0px;margin:0px;padding:0px;list-style-type:none;"/><div id="tab_area_bottom" style="border: 1px solid rgb(51,51,51);position:relative;width:100%;"/></td></tr></tbody></table></div></div></td><td style="border:0px;padding:0px;background:url(&quot;'+O+'/graphics/empire/shadow_right_side.png&quot;);background-position:0px 8px;background-repeat:no-repeat;background-size:8px 100%;width:8px;vertical-align:top;"><div style="background:url(&quot;'+O+'/graphics/empire/shadow_upper_right.png&quot;);height:8px;width:8px;"/></td></tr></table><div style="float:left;background:url(&quot;'+O+'/graphics/empire/shadow_lower_left.png&quot;) repeat scroll 0% 0% transparent;height:8px;width:8px;"/><div style="float:left;background:url(&quot;'+O+'/graphics/empire/shadow_bottom.png&quot;) repeat scroll 0% 0% transparent;height:8px;width:729px;"/><div style="float:left;background:url(&quot;'+O+'/graphics/empire/shadow_lower_right.png&quot;) repeat scroll 0% 0% transparent;height:8px;width:8px;"/><div style="clear:both;"/></div></div>';a=$('#content_row');a.length||(a=$('#inner_page'));a.before(b.replace(/%ID%/g,e));a='<li id="%ID%_quest_icon"><div style="width:50px;" title="'+qb+' Version '+db+'"><a class="quest_icon" style="background-image:url(&quot;'+ma+'/img/demon_icon_36.png&quot);background-repeat:no-repeat;"><span/></a></div></li>';$('#quest_bar > ul').prepend(a.replace(/%ID%/g,e));$("#"+e+'_close').click(function(){c.Ui();return A});$("#"+e+'_toggle').click(function(){c.V=Z(e+'_body',e+'_toggle');c.og();yb();return A});$("#"+e+'_quest_icon').click(function(){c.Yg=Z(e);c.og();yb();return A});c.Db=$("#"+e+'_next_heal');$(document).unbind('scroll');$('#spockholm_toolbar').css({position:'relative'});$('body').css('font-family',$('body').css('font-family')+',"Arial Unicode MS"');D$.isVisible=T=function(){return c.V&&c.Yg}}
a.Ra=function(a,b){i.Jg(a.user_fields,a.fightbar,b);user_fields_update(a.user_fields);user_info_update(a.user_fields,a.user_info);c.og();c.pg=h;Ma()}
a.Ga=function(a,b){var f,e,$a,La=h;if(a.responseText&&-1!==(e=a.responseText.indexOf('var user_info = [];'))&&-1!==($a=a.responseText.indexOf('user_fields_update(user_fields);',e)))try{f=a.responseText.slice(e+19,$a),f=f.replace(/user_fields/g,'this[\'temp1\']'),f=f.replace(/user_info/g,'this[\'temp2\']'),this.temp1={},this.temp2={},eval(f),i.Jg(this.temp1),user_fields_update(this.temp1),user_info_update(this.temp1,this.temp2),this.temp1={},this.temp2={},c.og(),c.pg=h,Ma()}catch(v){y(q('Update Status',v)),La=A}else y(q('Update Status','Problem Finding User Info')),La=A;b||(a.responseText&&(f=/local_xw_sig = '([a-f0-9]+)'/.exec(a.responseText))?local_xw_sig=f[1]:(y(q('Update Status','Problem Finding Signature')),La=A));return La}
a.og=function(){if(Ba("#"+e)){if(T()&&(c.S||(c.S=$("#"+e+'_stats')),c.S&&i.A&&ta.A)){var a=Math.min(Math.max(i.gd/i.u,0),101),a=100<a?'>100':a.toFixed(10>a?2:0),b=Math.min(Math.max(i.gd/i.H,0),101),b=100<b?'>100':b.toFixed(10>b?2:0),f=Math.min(Math.max(i.Nh(),0),101),f=100<f?'>100':f.toFixed(10>f?2:0),pa=Math.min(p(100*i.I/i.zd),100),$a=Math.min(p(100*i.u/i.eh),100),La=Math.min(p(100*i.H/i.nb),100),v=100-Math.min(p(100*i.gd/i.ji),100),j=33>pa?'255,0,0':66>pa?'255,165,0':'0,192,0',a='<div class="stat_block_top" title="Health"><span class="health">'+k(i.I)+"/"+k(i.zd)+'</span><br/><span style="display:block;width:'+pa+'%;height:2px;background-color:rgb('+j+');float:left;"/><span style="display:block;width:'+(100-pa)+'%;height:2px;background-color:rgba('+j+',0.35);float:right;"/></div><span class="spacer"/><div class="stat_block_top" title="Energy"><span class="energy">'+k(i.u)+"/"+k(i.eh)+'</span>&nbsp;<span class="stat_info more_in">['+a+']</span><br/><span style="display:block;width:'+$a+'%;height:2px;background-color:rgb(255,204,51);float:left;"/><span style="display:block;width:'+(100-$a)+'%;height:2px;background-color:rgba(255,204,51,0.35);float:right;"/></div><span class="spacer"/><div class="stat_block_top" title="Stamina"><span class="stamina">'+k(i.H)+"/"+k(i.nb)+'</span>&nbsp;<span class="stat_info more_in">['+b+']</span><br/><span style="display:block;width:'+La+'%;height:2px;background-color:rgb(255,165,0);float:left;"/><span style="display:block;width:'+(100-La)+'%;height:2px;background-color:rgba(255,165,0,0.35);float:right;"/></div><span class="spacer"/><div class="stat_block_top" title="Experience"><span class="experience">'+k(i.gd)+'</span>&nbsp;<span class="stat_info more_in">['+f+']</span><br/><span style="display:block;width:'+v+'%;height:2px;background-color:rgb(0,153,255);float:left;"/><span style="display:block;width:'+(100-v)+'%;height:2px;background-color:rgba(0,153,255,0.35);float:right;"/></div><span class="spacer"/>',a=a+('<div class="stat_block_top"><span>'+qa[i.Da]+'</span></div>'),a=a+'<div style="clear:both;"/><div style="display:inline-block;height:18px;vertical-align:top;">',a=a+('<span class="attack" title="Attack">'+k(i.dc)+'</span> '+Da(i.dc-ta.dc)+'<span class="spacer"/><span class="defense" title="Defense">'+k(i.lg)+'</span> '+Da(i.lg-ta.lg)+'<span class="spacer"/><span class="sexy_mafia_attack" title="Mafia Attack">'+k(i.Mf)+'</span> '+Da(i.Mf-ta.Mf)+'<span class="spacer"/><span class="sexy_mafia_defense" title="Mafia Defense">'+k(i.Nf)+'</span> '+Da(i.Nf-ta.Nf)+'<span class="spacer"/><span class="mafia_size" title="Mafia Size">'+i.yi+'</span><span class="spacer"/>'),a=a+'</div>';c.S.html(a)}
Y.M();R.Qa()}else c.Ui()}
c.T()}
function fb(){this.init()}
function Lb(e,c){var a=this,d=Lb.prototype;C(d,E.prototype);a.Oa(e,c);a.K=X.h[3];a.K.r=a;a.ja=n;a.db=h;a.S=n;a.o={ma:0};a.Pa=0;a.Fb=0;a.ec=A;a.$a=A;a.ib=-1;a.Ig=0;a.Xf=A;a.bh=0;a.Ue=A;a.fc=A;a.i=n;a.Eb="";a.na=new ea;var b=["",'Experience','Cash',"Job"],f={1:{4:'New York 4 - Enforcer',9:'New York 9 - Boss'},5:{2:'Las Vegas 2 - Paradise City',5:'Las Vegas 5 - Mojave Desert',6:'Las Vegas 6 - The Upper Strip',8:'Las Vegas 8 - Hoover Dam'},7:{3:'Brazil 3 - Manaus',6:'Brazil 6 - Rio de Janeiro: Rocinha',8:'Brazil 8 - Taubate Prison',113:'Limited Time - Metal Mafia',116:'Limited Time - Obelisk',121:'Limited Time - When The Wild Strikes',124:'Limited Time - Face It'},8:{2:'Chicago 2 - Main Street Speakeasy',114:'Limited Time - The Grifter',115:'Limited Time - Lighthouse Lobbying',120:'Limited Time - NightCap',123:'Limited Time - Vaudevillains'},9:{1:'London 1 - Notes From The Underground',2:'London 2 - East End Story',3:'London 3 - Dead in Red',4:'London 4 - To Russia with Love',5:'London 5 - Schoolyard Games',6:'London 6 - Collateral Damage',7:'London 7 - Baby On Board',8:'London 8 - American Psycho In London',9:'London 9 - Turkish Delight',10:'London 10 - Footing The Ball',101:'Limited Time - The Mold',119:'Limited Time - That\'s A Wrap',122:'Limited Time - Anchors Aweigh',125:'Limited Time - Round And Round'}};d.Tj=function(){var b,c,f=[{m:'Highjack The Bus Depot',i:940,r:125,k:9,u:540,z:1009,n:150},{m:'Smuggle In Illegal Substances',i:941,r:125,k:9,u:648,z:1320,n:-22},{m:'Broaden Your Clientele',i:942,r:125,k:9,u:756,z:1440,n:-28},{m:'Refuse Rivals Offer',i:943,r:125,k:9,u:594,z:1380,n:102},{m:'Learn That The Cops Are Onto You',i:944,r:125,k:9,u:648,z:1440,n:-25},{m:'Get Death Threats From Rival',i:945,r:125,k:9,u:756,z:1550,n:-21},{m:'Allow Rival To Buy You Out',i:946,r:125,k:9,u:864,z:1780,n:132},{m:'Divert All Evidence To Rival',i:947,r:125,k:9,u:972,z:2130,n:-28},{m:'Escape Scott Free',i:948,r:125,k:9,u:1026,z:2240,n:264},{m:'Receive Upfront Payments',i:900,r:116,k:7,u:540,z:1152,n:7015},{m:'Get Intel On Your Targets',i:901,r:116,k:7,u:702,z:1550,n:-2250},{m:'Let An Old Man Rest',i:902,r:116,k:7,u:864,z:1670,n:-2340},{m:'Visit The Burial Site',i:903,r:116,k:7,u:648,z:1440,n:-2100},{m:'Dodge Miss Mausoleum',i:904,r:116,k:7,u:756,z:1550,n:-4160},{m:'Set Up Position On The Obelisk',i:905,r:116,k:7,u:864,z:1900,n:-2592},{m:'Wait For The Procession',i:906,r:116,k:7,u:702,z:1490,n:-2085},{m:'Assassinate The Second Target',i:907,r:116,k:7,u:972,z:2130,n:-6048},{m:'Fight Your Way Out Of The Obelisk',i:908,r:116,k:7,u:1080,z:2360,n:-2300},{m:'Enjoy The Game At Rival Team\'s Cost',i:74,r:10,k:9,u:972,z:2189,n:-57},{m:'Enjoy The Game At Rival Team\'s Cost',i:74,r:10,k:9,u:972,z:2189,n:-57},{m:'Go To A Pub To Celebrate Your Team\'s Win',i:75,r:10,k:9,u:1188,z:2650,n:435},{m:'Reap The Benefits',i:67,r:9,k:9,u:1242,z:2765,n:-65},{m:'Suspect Foul Play',i:68,r:9,k:9,u:1080,z:2362,n:448},{m:'Investigate The Trail Of The Puzzle Box',i:58,r:8,k:9,u:972,z:2189,n:-52},{m:'Steal The Puzzle Box',i:61,r:8,k:9,u:1242,z:2650,n:365},{m:'Fight Off The Police',i:62,r:8,k:9,u:1188,z:2708,n:-75},{m:'Open The Puzzle Box',i:64,r:8,k:9,u:1404,z:2765,n:616},{m:'Track Down Your Target',i:49,r:7,k:9,u:972,z:2074,n:391},{m:'Chase Down Your Son\'s Kidnappers',i:52,r:7,k:9,u:1188,z:2650,n:-56},{m:'Sneak Into The Manor',i:53,r:7,k:9,u:1026,z:2247,n:312},{m:'Retire To The Isle Of Wight',i:56,r:7,k:9,u:1242,z:2765,n:-78},{m:'Forge The Reports',i:45,r:6,k:9,u:1350,z:2938,n:-84},{m:'Close The Investigation',i:48,r:6,k:9,u:1350,z:2765,n:594},{m:'Run Your Empire',i:39,r:5,k:9,u:1080,z:2420,n:-57},{m:'Create A Russian Identity',i:30,r:4,k:9,u:1080,z:2247,n:-46},{m:'Run The Racket',i:32,r:4,k:9,u:1134,z:2247,n:382},{m:'Approach The Police With Leads',i:19,r:3,k:9,u:702,z:1440,n:127},{m:'Leave The East End',i:16,r:2,k:9,u:648,z:1268,n:149},{m:'Fight Off The Thugs',i:2,r:1,k:9,u:270,z:404,n:44},{m:'Spike "The Kid\'s" Energy Drink With A Neurotoxin',i:5,r:1,k:9,u:324,z:519,n:57},{m:'Collect Your Take',i:8,r:1,k:9,u:270,z:461,n:61},{m:'Secure Hooch to Sell in Your Joint',i:10,r:2,k:8,u:324,z:692,n:48},{m:'Case Warehouses on the North Side ',i:12,r:2,k:8,u:378,z:807,n:52},{m:'Bribe a Taubate Prison Worker',i:87,r:8,k:7,u:648,z:1439,n:4455},{m:'Assassinate the Neo-Imperium\'s Primary Heads',i:95,r:8,k:7,u:810,z:1775,n:35946},{m:'Execute a Slum Gang Leader',i:70,r:6,k:7,u:675,z:1408,n:29601},{m:'Intercept a Rebel Convoy',i:31,r:3,k:7,u:405,z:704,n:18245},{m:'Question Some Meth Heads',i:72,r:8,k:5,H:120,z:267,n:41967,hb:"map",Ba:'view2'},{m:'Dig Up Links To Halloran And A Meth Ring',i:73,r:8,k:5,u:165,z:342,n:10200,hb:"map",Ba:'view2'},{m:'Verify Halloran\'s Arrival At The Dam',i:77,r:8,k:5,u:158,z:321,n:24110,hb:"map",Ba:'view2'},{m:'Get A Council Member On Board',i:52,r:6,k:5,u:136,z:279,n:-5900,hb:"map",Ba:'view2'},{m:'Eliminate A Hill Supplier',i:54,r:6,k:5,H:128,z:289,n:39671,hb:"map",Ba:'view2'},{m:'Clean Out A Biker Bar',i:46,r:5,k:5,H:88,z:191,n:20722,hb:"map",Ba:'view2'},{m:'Rescue A Hotelier',i:50,r:5,k:5,u:86,z:169,n:16006,hb:"map",Ba:'view2'},{m:'Fix A Boxing Match',i:13,r:2,k:5,u:79,z:146,n:6622,hb:"map",Ba:'view2'},{m:'Settle a Beef... Permanently',i:69,r:9,k:1,u:36,z:69,n:805E4,Ba:'view'},{m:'Make Arrangements for a Visiting Don',i:74,r:9,k:1,u:36,z:69,n:805E5,Ba:'view'},{m:'Travel to the Old Country',i:76,r:9,k:1,u:46,z:90,n:19964E3,Ba:'view'},{m:'Smuggle Thai Gems',i:19,r:4,k:1,u:16,z:25,n:177100,Ba:'view'}];for(b=0;b<f.length;b++)c=new fb,C(c,f[b]),c.kb='job_'+c.i+"_"+c.k,a.na.push(c.kb,c)}
d.ea=function(){a.e||(a.Pa=0,a.Fb=0,a.ec=A,a.i=n,a.ib=-1,a.Ig=0,a.Xf=A,a.bh=0,a.Ue=A,a.fc=A,a.$a=a.b.$a,a.ja===n&&(a.ja=setInterval(function(){a.o.ma++;a.M()},1E3)),a.Hc());return A}
d.Vi=function(){clearInterval(a.ja);a.ja=n;a.Fa()}
d.ia=function(){a.e&&!a.fc&&(a.i&&a.Ve(a.i,h)?(a.i.Vb=h,a.fc=h,a.l('Eliminating '+b[a.i.Ca]+' Bandit before stopping…'),a.Hk()):a.Vi());return A}
d.j=function(){s(c+'_energy_jobs_data',a.b.ad);s(c+'_stamina_jobs_data',a.b.le);s(c+'_operation_jobs_data',a.b.$a);s(c+'_energy_first_data',a.b.$c);s(c+'_ratio_min_data',a.b.Ha);s(c+'_job_bandits_data',a.b.Yc);s(c+'_cash_bandits_data',a.b.Xc);s(c+'_xp_bandits_data',a.b.Zc);s(c+'_ask_crew_data',a.b.Rc);s(c+'_pause_crew_data',a.b.Ld)}
d.Cm=function(b){a.b.ad=m(b);a.j();a.c();return h}
d.po=function(b){a.b.le=m(b);a.j();a.c();return h}
d.yn=function(b){a.b.$a=m(b);a.j();a.c();return h}
d.Bm=function(b){a.b.$c=m(b);a.j();a.c();return h}
d.lh=function(b){a.b.Ha=m(b);a.j();a.c();return h}
d.mh=function(b){a.b.cb=xb(b);a.c();return h}
d.ym=function(b){a.b.Yc=m(b);a.j();a.c();return h}
d.xm=function(b){a.b.Xc=m(b);a.j();a.c();return h}
d.sm=function(b){a.b.ye=x(b,10,300);a.c();return h}
d.zm=function(b){a.b.Zc=m(b);a.j();a.c();return h}
d.Ao=function(b){a.b.qf=x(b,10,300);a.c();return h}
d.Ye=function(b){a.b.da=x(b,1,5);a.c();return h}
d.jm=function(b){a.b.Rc=m(b);a.j();a.c();return h}
d.km=function(b){a.b.ue=x(b);a.c();return h}
d.An=function(b){a.b.Ld=m(b);a.j();a.c();return h}
d.fa=function(){var b;a.b={ad:h,le:A,$a:A,$c:h,Yc:h,Xc:h,ye:300,Zc:h,qf:300,da:3,Rc:A,ue:20,Ld:A,Ha:A,cb:2.2,lb:{}};for(b=0;b<a.na.length;b++)a.b.lb[a.na.Ib[b]]=A}
d.c=function(){var b={};b.energy_jobs=a.b.ad;b.stamina_jobs=a.b.le;b.operation_jobs=a.b.$a;b.energy_jobs_first=a.b.$c;b.eliminate_job_bandits=a.b.Yc;b.eliminate_cash_bandits=a.b.Xc;b.cash_bandit_time=a.b.ye;b.eliminate_xp_bandits=a.b.Zc;b.xp_bandit_time=a.b.qf;b.max_threads=a.b.da;b.ask_crew=a.b.Rc;b.ask_crew_value=a.b.ue;b.pause_crew=a.b.Ld;b.ratio_min=a.b.Ha;b.ratio_min_value=a.b.cb;b.job_state={};C(b.job_state,a.b.lb);na(c,b)}
d.P=function(){var b,f;a.fa();try{b={},f=oa(c),b.ad=f.energy_jobs,b.le=f.stamina_jobs,b.$a=f.operation_jobs,b.$c=f.energy_jobs_first,b.Yc=f.eliminate_job_bandits,b.Xc=f.eliminate_cash_bandits,b.ye=f.cash_bandit_time,b.Zc=f.eliminate_xp_bandits,b.qf=f.xp_bandit_time,b.da=f.max_threads,b.Rc=f.ask_crew,b.ue=f.ask_crew_value,b.Ld=f.pause_crew,b.Ha=f.ratio_min,b.cb=f.ratio_min_value,b.lb={},C(b.lb,f.job_state),C(a.b,b)}catch(d){}
o(c+'_energy_jobs',a.b.ad);o(c+'_stamina_jobs',a.b.le);o(c+'_operation_jobs',a.b.$a);o(c+'_energy_first',a.b.$c);o(c+'_job_bandits',a.b.Yc);o(c+'_cash_bandits',a.b.Xc);t(c+'_cash_bandit_time',a.b.ye);o(c+'_xp_bandits',a.b.Zc);t(c+'_xp_bandit_time',a.b.qf);t(c+'_max_threads',a.b.da);o(c+'_ask_crew',a.b.Rc);t(c+'_ask_crew_value',a.b.ue);o(c+'_pause_crew',a.b.Ld);o(c+'_ratio_min',a.b.Ha);t(c+'_ratio_min_value',a.b.cb);for(b=0;b<a.na.length;b++)f=a.na.Ib[b],a.b.lb[f]?$("#"+c+"_"+f).addClass('ui-selected'):$("#"+c+"_"+f).removeClass('ui-selected');$("#"+c+'_job_list').scrollTop();a.j()}
d.T=function(){a.Tj();a.sj();ha(a,L('Options','options','<div style="width:45%;float:left;">'+K('Jobs','opt_jobs',ba('div_jobs',r('Perform energy jobs','energy_jobs')+r('Perform stamina jobs','stamina_jobs')+r('Perform operation jobs','operation_jobs')+r('Spend energy first','energy_first')+M+'Perform up to <input type="text" style="width:20px;" id="%ID%_max_threads"/> jobs per second<br/>'+M+r('Pause when','ratio_min',g," "+wa('ratio_min_type',['Combined','Energy','Stamina'])+' ratio is below <input type="text" style="width:30px;" id="%ID%_ratio_min_value"/>')))+'</div><div style="width:48%;float:left;">'+K('Bandits','opt_bandits',ba('div_bandits',r('Eliminate job bandits','job_bandits')+r('Eliminate cash bandits below','cash_bandits',g,' <input type="text" style="width:30px;" id="%ID%_cash_bandit_time"/> seconds')+r('Eliminate experience bandits below','xp_bandits',g,' <input type="text" style="width:30px;" id="%ID%_xp_bandit_time"/> seconds')+'<br/>'+r('Ask for city crew when less than','ask_crew',g,' <span class="crew"/><input type="text" style="width:25px;" id="%ID%_ask_crew_value"/>')+r('Pause when out of <span class="crew"/>Crew','pause_crew',g,' <span class="more_in" id="%ID%_crew_count"/>')))+'</div><div style="clear:both;height:16px;"/><div>Jobs to perform <span class="more_in">(hold CTRL for multiple selection)</span><br/><div id="%ID%_job_list" class="joblist"><ul id="%ID%_job_filter"/></div></div>')+L('Stats','stats')+'<div style="padding:10px;">'+Ha+Ia+Ja+Ka+'</div>',5,function(){a.Y()});var b,d,e="",v=-1,j=-1;for(b=0;b<a.na.length;b++){d=a.na.W(b);if(d.k!==v||d.r!==j)e=f[d.k]&&f[d.k][d.r]?e+('<li class="jl-tab">'+f[d.k][d.r]+'</li>'):e+('<li class="jl-tab">'+qa[d.k]+' District '+d.r+'</li>'),v=d.k,j=d.r;e+='<li class="jl-job" id="'+c+"_"+d.kb+'" data-id="'+d.kb+'">'+d.Fi()+'</li>';d.o={Zb:0,Tb:0,za:0,Q:0,zc:0,Qc:0,mc:0}}
$("#"+c+'_job_filter').html(e);$("#"+c+'_job_filter').selectable({filter:'.jl-job',selected:function(b,c){a.b.lb[$(c.selected).data("id")]=h;a.c()},unselected:function(b,c){a.b.lb[$(c.unselected).data("id")]=A;a.c()}});$("#"+c+'_options_toggle').click(function(){Z(c+'_options',c+'_options_toggle');return A});$("#"+c+'_stats_toggle').click(function(){a.db=Z(c+'_stats',c+'_stats_toggle');a.M();return A});$("#"+c+'_start').click(function(){return a.ea()});$("#"+c+'_stop').click(function(){return a.ia()});$("#"+c+'_cancel').click(function(){return a.Ec()});$("#"+c+'_energy_jobs').click(function(){return a.Cm(this)});$("#"+c+'_stamina_jobs').click(function(){return a.po(this)});$("#"+c+'_operation_jobs').click(function(){return a.yn(this)});$("#"+c+'_energy_first').click(function(){return a.Bm(this)});$("#"+c+'_job_bandits').click(function(){return a.ym(this)});$("#"+c+'_cash_bandits').click(function(){return a.xm(this)});$("#"+c+'_cash_bandit_time').change(function(){return a.sm(this)});$("#"+c+'_xp_bandits').click(function(){return a.zm(this)});$("#"+c+'_xp_bandit_time').change(function(){return a.Ao(this)});$("#"+c+'_max_threads').change(function(){return a.Ye(this)});$("#"+c+'_ask_crew').click(function(){return a.jm(this)});$("#"+c+'_ask_crew_value').change(function(){return a.km(this)});$("#"+c+'_pause_crew').click(function(){return a.An(this)});$("#"+c+'_ratio_min').click(function(){return a.lh(this)});$("#"+c+'_ratio_min_value').change(function(){return a.mh(this)});$("#"+c+'_ratio_min_type').change(function(){return a.ao(this)});a.Lb()}
d.M=function(){var f,d,e,v;if(T()&&(a.V&&a.db)&&(a.S||(a.S=$("#"+c+'_stats')),a.S)){e="";for(d=0;d<a.na.length;d++)if(v=a.na.W(d),f=v.o,f.Zb){e+=v.m+' <span class="good">x'+f.Zb+'</span> ';e=v.u?e+('<span class="energy">'+k(f.Tb)+'</span> <span class="experience">'+k(f.Q)+'</span> '+sa("["+parseFloat(f.Q/f.Tb).toFixed(2)+"]")):e+('<span class="stamina">'+k(f.za)+'</span> <span class="experience">'+k(f.Q)+'</span> '+sa("["+parseFloat(f.Q/f.za).toFixed(2)+"]"));if(f.Qc||f.zc||f.mc)e+=' <span class="message_group"/> ',f.Qc&&(e+=' <span class="energy" title="Wheelman - No energy/stamina used"/>x'+k(f.Qc)+" "+sa("["+p(100*f.Qc/f.Zb)+"%]")),f.zc&&(e+=' <span class="experience" title="Mastermind - 50% more experience"/>x'+k(f.zc)+" "+sa("["+p(100*f.zc/f.Zb)+"%]")),f.mc&&(e+=' <span class="cash" title="Bagman - 100% more cash"/>x'+k(f.mc)+" "+sa("["+p(100*f.mc/f.Zb)+"%]"));e+='<br/>'}
a.qh&&(e+='Stamina Opponent '+a.Yi+' Level '+k(a.qh)+' <span class="mafia_size">'+a.Wi+'</span> <span class="good">Won</span> '+k(a.bj)+' <span class="bad">Lost</span> '+k(a.Zi)+'<br/>');f=aa();for(d=0;d<a.na.length;d++)v=a.na.W(d),v.Ca&&(0<=v.vb-f?e+=v.m+" - "+b[v.Ca]+' Bandit <span class="stat_info more_in">['+jb(v.vb-f)+']</span><br/>':(v.Ca=0,v.vb=0));a.o.ma&&(e+='Running for: '+ia(a.o.ma));a.S.html(e);R.Qa()}}
d.Y=function(){Va("#"+c+'_div_jobs',"#"+c+'_div_bandits');a.M()}
d.Ve=function(b,c){return 1===b.Ca&&a.b.Zc&&(c||b.vb-aa()<a.b.qf)||2===b.Ca&&a.b.Xc&&(c||b.vb-aa()<a.b.ye)||3===b.Ca&&a.b.Yc?h:A}
d.zi=function(){return a.i&&a.Ve(a.i,h)?h:A}
d.Vb=function(){a.i&&(a.i.Vb=h)}
d.Kk=function(c){var f,d;a.Ve(c,a.i.Vb)?(f='xw_controller=job&xw_action=eliminateBandit&job='+c.i+'&stage='+c.r+'&tmp='+a.Eb,l(w('Eliminating '+b[c.Ca]+' Bandit',c.m)),d=a.ec=h):(f='xw_controller='+c.hb+'&xw_action=dojob&job='+c.i+'&tab='+c.r+'&tmp='+a.Eb,c.H&&(f+='&opponent_id='+a.oh+'&job_sig='+a.aj),d=A);z.G(B(f),function(b){a.ul(b,c,d)})}
d.bi=function(){if(a.ec||!a.i||a.Cc()||a.i.H&&!a.Kd&&0<a.Pa||!a.ik(a.i))return A;a.fc||a.l('Doing Job '+a.i.m+'…',100*a.i.i+a.i.k);a.Pa++;a.Kk(a.i);return h}
d.Jk=function(){if(a.e){a.Pa=0;a.Fb=0;for(a.ec=A;a.Pa<a.b.da&&a.bi(););0>=a.Pa&&(a.d=1,a.q())}}
d.Uh=function(b,c,f){if(-1!==b.responseText.indexOf('This link has expired. Please reload'))a.ec=h;else{var d=/user_fields..current_city_id.. . parseInt..([\d])../.exec(b.responseText);d&&!a.ec&&(d=p(d[1]),d!==c.k&&(a.ec=h,y(q('Problem Doing Job','Wrong City ('+qa[d]+")"))));D.Ga(b)}
y(q('Problem Doing Job',f))}
d.ul=function(b,c,f){if(a.J(b)){var d=c.o;a.Fb++;a.Pa--;if(a.L(b,'Problem Doing Job')){var e=n,i=n;if(7<=c.k)try{if(e=JSON.parse(b.responseText)){if(a.Eo(e,f,c,d),a.Fb>=a.b.da||0>=a.Pa)a.Fb=0,D.Ra(e),a.M(),Ma()}else y(q('Problem Doing Job','Missing JSON Data'))}catch(p){a.Uh(b,c,p)}else if(5<=c.k)try{if((e=JSON.parse(b.responseText))&&(i=JSON.parse(e.data)),e&&i){if(a.Ho(i,c,d),a.Fb>=a.b.da||0>=a.Pa)a.Fb=0,D.Ra(e),a.M(),Ma()}else y(q('Problem Doing Job','Missing JSON Data'))}catch(k){a.Uh(b,c,k)}else{c=a.Fo(b.responseText,d);c=h;if(a.Fb>=a.b.da||0>=a.Pa)a.Fb=0,D.Ga(b)||(c=A),a.M(),Ma();c||(a.ec=h,a.d=1)}}
for(;a.Pa<a.b.da&&!(a.i=a.Wh(),!a.bi()););0>=a.Pa&&(a.fc&&(!a.i||!a.Ve(a.i,h))&&a.Vi(),a.d=1,a.q())}}
d.Pl=function(b){a.e&&(a.fc||a.l('Loading Job Page…'),"m"!=ma[7]&&(Y=n),z.G(B('xw_controller='+b.hb+'&xw_action='+b.Ba+'&tab='+b.r+'&bar=1'),function(c){a.vl(c,b)}),7<=b.k&&a.Wf())}
d.Go=function(b,f,d){var e,j,i,k,l,m,q,o;for(j=e=0;b&&-1!==(e=b.indexOf('<div id="job-id-',j))&&-1!==(j=b.indexOf('<div id="bandit-contextual-',e));)if(l=b.substr(e,j-e),q=/job-id-(\d+)/.exec(l)){q=p(q[1]);m='job_'+q+"_"+f;a.na.aa[m]?o=a.na.aa[m]:(o=new fb,C(o,{kb:m,k:f,r:d,id:q}));if(q=/\t{8}(.+)\t{3}<\/h4>/.exec(l))o.m=q[1];if(-1!==(i=l.indexOf('<ul class="uses'))&&-1!==(k=l.indexOf('</ul>',i))){m=l.substr(i,k-i);if(q=/class="energy" base_value="(\d+)"/.exec(m))o.u=p(q[1]);if(q=/class="cash_icon_jobs_\d+" base_value="(\d+)"/.exec(m))o.n=-p(q[1])}
if(-1!==(i=l.indexOf('<ul class="pays'))&&-1!==(k=l.indexOf('</ul>',i))){m=l.substr(i,k-i);if(q=/class="experience" base_value="(\d+)"/.exec(m))o.z=p(q[1]);if(q=/class="cash_icon_jobs_\d+" base_value="(\d+)"/.exec(m))o.n=p(q[1])}
if(q=/autoEliminateBandit.+&type=(\d)/.exec(l))if(o.Ca=p(q[1]),q=/time_left: (\d+)/.exec(l))o.vb=aa()+p(q[1]);$("#"+c+"_"+o.kb).length&&$("#"+c+"_"+o.kb).html(o.Fi())}}
d.vl=function(b,c){if(a.J(b)){if(a.L(b,'Load Job Page')){var f;if('view_stage_jobs'===c.Ba)try{var d=JSON.parse(b.responseText);D.Ra(d);a.Eb="";if(d&&d.stageJobs){if(f=/xw_action=dojob.+tmp=([a-f0-9]+)/.exec(d.stageJobs))a.Eb=f[1];d.stageId&&a.Go(d.stageJobs,i.Da,d.stageId)}""!==a.Eb?la(w('Found Job Key',a.Eb)):y(q('Problem Finding Job Key'));a.d=a.B}catch(e){y(q('Load Job Page',e))}else D.Ga(b),(f=/xw_action=dojob.+tmp=([a-f0-9]+)/.exec(b.responseText))?(a.Eb=f[1],la(w('Found Job Key',a.Eb))):(a.Eb="",y(q('Problem Finding Job Key'))),a.d=a.B}
a.q()}}
d.Fo=function(a,b){var c;c=a.indexOf('div class="message_body clearfix"');-1!==c&&(a=a.substr(c));c=a.indexOf('div id="popup_fodder"');-1!==c&&(a=a.substr(0,c));if(/: Completed/.test(a)){if(c=/(\d+) Energy/.exec(a))b.Tb+=p(c[1]);if(c=/(\d+)( \+(\d+))? Experience/.exec(a)){var f=p(c[1]);c[3]&&(f+=p(c[3]));b.Q+=f}-1!==a.indexOf('Top Mafia Wheelman')&&b.Qc++;-1!==a.indexOf('Top Mafia Mastermind')&&b.zc++;-1!==a.indexOf('Top Mafia Bagman')&&b.mc++;for(f=/You (earned|gained) (some|a|an) (.+?)\./g;c=f.exec(a);)N.sf(c[3]);(c=/You (earned|gained) (\d+) (.+?)\./.exec(a))&&N.sf(c[3]);b.Zb++;return h}
return A}
d.sj=function(){a.oh="p|0";a.aj="";a.$i="";a.qh=0;a.Wi=0;a.Yi="";a.Kd=A;a.bj=0;a.Zi=0}
d.Eo=function(b,c,f,d){if(b)if(c){if(a.fc||a.Wf(),f.Ca=0,f.vb=0,a.i.Vb=A,c=b.data)if(c=c.info)if(c=c.reward)if((b=/item_id="(\d+)"/.exec(c))&&N.Pb(p(b[1])),b=/class="experience">(\d+)<\/span>/.exec(c))d.Q+=p(b[1])}else(c=b.jobResult)?(N.tg(c.loot),c.extraData.freeAsWheelman&&d.Qc++,c.extraData.bonusExperience&&d.zc++,c.extraData.bonusCash&&d.mc++,c.lootBandit&&c.lootBandit.length?f.Ca!==c.lootBandit[0].type&&(f.Ca=c.lootBandit[0].type,f.vb=aa()+p(/time_left: (\d+)/.exec(c.lootBandit[0].markup)[1])):(f.Ca=0,f.vb=0),d.Zb++,c.energy&&(d.Tb+=c.energy),c.experience&&(d.Q+=c.experience),c.extraData.bonusExperience&&(d.Q+=c.extraData.bonusExperience)):b.data&&(b.data.impulseBuy&&b.data.impulseBuy.message)&&-1!==b.data.impulseBuy.message.indexOf('You must eliminate the Job Bandit')&&(f.Ca=3)}
d.Ho=function(b,c,f){var d=b.job_results;d&&d.success?(f.Zb++,d.exp_gained&&(f.Q+=d.exp_gained),d.bonus_xp&&(f.Q+=d.bonus_xp),c.H?(f.za+=d.stamina_consumed,d.fight_win?(a.Kd=h,a.bj++):(a.Kd=A,a.Zi++)):f.Tb+=d.energy_consumed,d.no_energy_cost&&f.Qc++,d.bonus_xp&&f.zc++,d.bonus_cash&&f.mc++,d.loot&&N.te(d.loot.image,d.loot.quantity),d.casino_loot&&N.te(d.casino_loot.image,d.casino_loot.quantity),d.chop_shop_loot&&N.te(d.chop_shop_loot.image,d.chop_shop_loot.quantity)):d.fail_message&&-1!==d.fail_message.indexOf('The player was not found')&&(a.Kd=A);if(!a.Kd&&(a.sj(),b=b.job_fight_list))for(var e in b)b.hasOwnProperty(e)&&500>=b[e].group_size&&(a.oh=b[e].id,a.aj=b[e].job_sig,a.$i=b[e].name,a.qh=b[e].level,a.Wi=b[e].group_size,a.Yi=Q(a.$i,a.oh),a.Kd=A)}
d.Wf=function(){a.e&&!a.Xf&&(a.Xf=h,a.bh=aa(),z.G(B('xw_controller=module&xw_action=reloadModule&module=CityCrewModule&extra_data={"city":7,"type":"job"}&position=0&width=0&height=0'),function(b){a.Dl(b)}))}
d.Dl=function(b){var f,d;if(a.J(b)){if(a.L(b,'Load Crew')&&(f=/20px;">(\d+)<\/span>/.exec(b.responseText)))if(d=a.ib,a.ib=p(f[1]),d!==a.ib&&(l(w('City Crew','Contains <span class="crew"/>'+a.ib+' Crew')),$("#"+c+'_crew_count').html("("+a.ib+' available)')),a.Ig+30<aa()&&(f=/(var feed = .+)\t\}/.exec(b.responseText)))b=f[1].replace(/MW\.Feed/g,'D$.feed'),a.b.Rc&&a.ib<=a.b.ue&&(l(w('City Crew','Posting Crew Feed Request')),eval(b),a.Ig=aa());28===a.d&&a.q()}
a.Xf=A}
d.ih=function(){return a.b.Ld&&0===a.ib}
d.mj=function(){return a.b.Ha&&i.Nh()<a.b.cb}
d.Hg=function(b){var c,f;if(a.b.ad)for(c=0;c<a.na.length;c++)if(f=a.na.W(c),a.b.lb[f.kb]&&0<f.u&&f.u<=b)if(a.ih()&&7<=f.k)a.Ue=h;else return f;return n}
d.Df=function(b){var c,f;if(a.b.le)for(c=0;c<a.na.length;c++)if(f=a.na.W(c),a.b.lb[f.kb]&&0<f.H&&f.H<=b)if(a.ih()&&7<=f.k)a.Ue=h;else return f;return n}
d.tk=function(){var b=n;a.Ue=A;if(a.$a||a.mj())return n;a.b.$c?(b=a.Hg(i.u))||(b=a.Df(i.H)):(b=a.Df(i.H))||(b=a.Hg(i.u));return b}
d.Wh=function(){var b=a.tk();return b!==a.i&&a.i&&a.Ve(a.i,h)?(a.i.Vb=h,a.i):b}
d.ik=function(b){return a.i.Vb?h:a.fc?A:a.b.lb[b.kb]&&(0<b.u&&b.u<=i.u||0<b.H&&b.H<=i.H)?h:A}
a.Hd=0;a.ag=0;a.$e=0;a.Hb=0;d.Sb=function(){a.ag>=a.Jd.length&&a.Hb>=a.$e&&(a.d=a.B,a.q())}
d.oj=function(b,c){a.e&&z.G(B('xw_controller=socialmission&xw_action=removemission&owner='+b+'&instance='+c),function(f){a.Ro(f,b,c)})}
d.Ro=function(b,c,f){a.J(b)&&(a.L(b,'Problem Removing Operation')?(l(w('Operation Removed','Expired')),a.Hb++,a.Sb()):a.oj(c,f))}
d.Ef=function(b,c){a.e&&z.G(B('xw_controller=socialmission&xw_action=collectreward&owner='+b+'&instance='+c),function(f){a.Ak(f,b,c)})}
d.Ak=function(b,c,f){if(a.J(b))if(a.L(b,'Problem Collecting Operation Reward')){f=/item_id=\\"(\d+)\\"/g;for(f.lastIndex=0;c=f.exec(b.responseText);)N.Pb(c[1]),l(w('Operation Reward',N.Pi(c[1])));if(c=/<script type=..text.javascript..>(function continuation_(postCelebrateFeed[0-9a-f]+).+)<\/script>/.exec(b.responseText))b=c[1].replace(/\\"/g,'&quot;'),l(w('Share Reward','<a href="#0" onclick="'+b+" "+c[2]+'(); return false;">Share</a>'));a.Hb++;a.Sb()}else a.Ef(c,f)}
d.Mg=function(b,c,f){a.e&&z.G(B('xw_controller=socialmission&xw_action=dotask&owner_id='+b+'&instance_id='+c+'&position='+f),function(d){a.Bo(d,b,c,f)})}
d.Bo=function(b,c,f,d){var e,i,k;if(a.J(b)){if(a.L(b,'Problem Doing Operation Job'))try{e=JSON.parse(b.responseText);D.Ra(e);i=JSON.parse(e.data);k=i.do_task_status;2===k?i.is_task_mastered?(l(w('Operation Job','Mastered')),a.Ef(c,f)):a.Mg(c,f,d):0===k?(l(q('Operation Job','Need More <span class="energy"/>Energy')),a.Hb++,a.Sb()):-1===k?(l(q('Operation Job','Need More <span class="stamina"/>Stamina')),a.Hb++,a.Sb()):-2===k?(l(q('Operation Job','Need More <span class="health"/>Health')),a.Hb++,a.Sb()):-3===k?(l(q('Operation Job','Need More Cash')),a.Hb++,a.Sb()):19===k?(l(w('Operation Job Already Mastered')),a.Ef(c,f)):(y(q('Operation Job Status',k)),a.Hb++,a.Sb());return}catch(p){y(q('Problem Doing Operation Job',p))}
a.Mg(c,f,d)}}
d.Jd=[{af:'initiator',page:"1",m:'Initiator Page 1'},{af:'helper',page:"4",m:'Helper Page 4'},{af:'helper',page:"3",m:'Helper Page 3'},{af:'helper',page:"2",m:'Helper Page 2'},{af:'helper',page:"1",m:'Helper Page 1'}];d.Fg=function(b){a.e&&(a.l('Checking Operations… <span class="more_in">('+100*a.ag/a.Jd.length+'%)</span>'),z.G(B('xw_controller=socialmission&xw_action=view&type='+a.Jd[b].af+'&page='+a.Jd[b].page),function(c){a.Co(c,b)}))}
d.Co=function(b,c){var f,d;if(a.J(b))if(a.L(b,'Problem Checking Operations')){l(w('Operations Checked',a.Jd[c].m));d=/SocialMissionController\.collectReward.'([0-9]+)','([0-9a-f]+)'./g;for(d.lastIndex=0;f=d.exec(b.responseText);)a.$e++,a.Ef(f[1],f[2]);d=/SocialMissionController\.removeMission.'([0-9]+)','([0-9a-f]+)'.; return false;"><span><span class="">Close<\/span><\/span>/g;for(d.lastIndex=0;f=d.exec(b.responseText);)a.$e++,a.oj(f[1],f[2]);d=/medium.white" onclick="SocialMissionView\.startTask.'([0-9a-f]+)','([0-9]+)','([0-9]+)'./g;for(d.lastIndex=0;f=d.exec(b.responseText);)a.$e++,a.Mg(f[3],f[1],f[2]);a.ag++;a.Hd<a.Jd.length?(a.Fg(a.Hd),a.Hd++):a.Sb()}else a.Fg(c)}
d.Cc=function(){return 0!==a.i.k&&a.i.k!==i.Da}
d.we=function(){return Y.e&&!Y.N&&Y.K.v>a.K.v?Y:ga.e&&!ga.N&&ga.K.v>a.K.v?ga:fa.e&&!fa.N&&fa.K.v>a.K.v?fa:n}
d.q=function(){a.N=A;if(1===a.d)a.B=-1===a.ib?28:2,a.Ob();else if(28===a.d)-1===a.ib?a.Wf():(a.d=2,a.q());else if(2===a.d)if(a.i=a.Wh(),a.i)if(a.Cc()){var b=a.we();b?(a.N=h,a.l('Waiting for '+b.ta+' to finish before traveling to '+qa[a.i.k]+'…',10+a.i.k),setTimeout(function(){a.e&&a.q()},1E3)):(a.d=3,a.q())}else a.d=4,a.q();else a.mj()?(a.N=h,a.l('Waiting for Experience Ratio to increase…',6),setTimeout(function(){a.e&&a.q()},1E3)):a.$a?(a.$a=A,a.d=27,a.q()):(a.ih()&&a.Ue?(a.N=h,a.l('Waiting for more <span class="crew"/>Crew…',5),a.bh+5<=aa()&&a.Wf()):(a.N=h,a.Hg(1E4)?a.Df(1E4)?a.l('Waiting for more <span class="energy"/>Energy or <span class="stamina"/>Stamina…',1):a.l('Waiting for more <span class="energy"/>Energy…',2):a.Df(1E4)?a.l('Waiting for more <span class="stamina"/>Stamina…',3):a.l('Waiting for some jobs to be selected…',4)),setTimeout(function(){a.e&&a.q()},1E3));else 3===a.d?(a.B=4,a.nf(a.i.k,A)):4===a.d?(a.B=5,a.Pl(a.i)):5===a.d?(a.B=1,a.Jk()):27===a.d?(a.B=1,a.Hd=0,a.ag=0,a.$e=0,a.Hb=0,a.Fg(a.Hd),a.Hd++):24===a.d&&a.Fa()}
a.T();a.P();a.K.w&&a.w(10,function(){a.ea()})}
function Mb(e,c){var a=this,d=Mb.prototype;C(d,E.prototype);a.Oa(e,c);a.K=X.h[6];a.K.r=a;a.yp=0;a.Pc=0;a.Ja=[];d.jp=['attack','defense','max_health','max_energy','max_stamina'];d.Oc=['<span class="attack"/>Attack','<span class="defense"/>Defense','<span class="health"/>Health','<span class="energy"/>Energy','<span class="stamina"/>Stamina'];a.Lg=A;d.To=function(){a.Lg=h}
d.ea=function(){a.e||(a.To(),a.Hc());return A}
d.ia=function(){a.Fa();return A}
d.j=function(){s(c+'_opt_stats',a.b.gc)}
d.gn=function(b){a.b.ze=m(b);a.c();return h}
d.zo=function(b){a.b.gc=m(b);a.j();a.c();return h}
d.Ze=function(b,c){a.b.Ja[c]=x(b);a.M();a.c();return h}
d.xi=function(){for(var b=0,c=0;5>c;c++)b+=a.b.Ja[c];return b}
d.ol=function(){for(var b=0,c=0;5>c;c++)b+=a.Ja[c];return b}
d.fa=function(){a.b={ze:h,Ya:n,mb:0,gc:A,Ja:[0,0,0,0,0]}}
d.c=function(){var b,f={};f.collect_level_up_bonus=a.b.ze;f.level_up_bonus=a.b.Ya;f.level_up_level=a.b.mb;f.upgrade_stats=a.b.gc;f.upgrade_points=[];for(b=0;5>b;b++)f.upgrade_points[b]=a.b.Ja[b];na(c,f)}
d.P=function(){var b;a.fa();try{var f={},d=oa(c);f.ze=d.collect_level_up_bonus;f.Ya=d.level_up_bonus;f.mb=d.level_up_level;f.gc=d.upgrade_stats;f.Ja=[];for(b=0;5>b;b++)f.Ja[b]=d.upgrade_points[b];C(a.b,f)}catch(e){}
o(c+'_level_up_bonus',a.b.ze);o(c+'_upgrade_stats',a.b.gc);for(b=0;5>b;b++)t(c+'_upgrade_points_'+b,a.b.Ja[b]);a.j()}
d.M=function(){var b;if(T()&&a.V){a.$g||(a.$g=$("#"+c+'_last_bonus'));a.$g&&(b="",i.A&&(b='Level '+k(i.A)+" "+bb(i.A),b=i.A!==a.b.mb||!a.b.Ya?q(b,'Unknown'):w(b,a.b.Ya+' (<a href="#0" onclick="D$.shareLevelUpBonus(); return false;">Share</a>)')),a.$g.html(b));a.Mh||(a.Mh=$("#"+c+'_upgrade_points'));if(a.Mh){var f=a.xi();b='<span class="skill_point"/>Available '+k(i.kg)+'<span class="spacer20"/>';b+='Needed '+k(f);a.Mh.html(b)}
R.Qa()}}
d.Y=function(){a.M()}
d.T=function(){ha(a,L('Options','options',K(da('Upgrade Stats','upgrade_stats'),'opt_stats',a.Oc[0]+' <input type="number" id="%ID%_upgrade_points_0" style="width:40px;"/><span class="spacer"/>'+a.Oc[1]+' <input type="number" id="%ID%_upgrade_points_1" style="width:40px;"/><span class="spacer"/>'+a.Oc[2]+' <input type="number" id="%ID%_upgrade_points_2" style="width:40px;"/><span class="spacer"/>'+a.Oc[3]+' <input type="number" id="%ID%_upgrade_points_3" style="width:40px;"/><span class="spacer"/>'+a.Oc[4]+' <input type="number" id="%ID%_upgrade_points_4" style="width:40px;"/><br/><div class="hdivider"/><span id="%ID%_upgrade_points"/>')+M+K(da('Collect Level Up Bonus','level_up_bonus'),'opt_level_up_bonus','<span id="%ID%_last_bonus"/><br/>')+"")+'<div style="padding:10px;">'+Ha+Ia+Ja+Ka+'</div>',5,function(){a.Y()});$("#"+c+'_options_toggle').click(function(){Z(c+'_options',c+'_options_toggle');return A});$("#"+c+'_start').click(function(){return a.ea()});$("#"+c+'_stop').click(function(){return a.ia()});$("#"+c+'_cancel').click(function(){return a.Ec()});$("#"+c+'_level_up_bonus').click(function(){return a.gn(this)});$("#"+c+'_upgrade_stats').click(function(){return a.zo(this)});$("#"+c+'_upgrade_points_0').change(function(){return a.Ze(this,0)});$("#"+c+'_upgrade_points_1').change(function(){return a.Ze(this,1)});$("#"+c+'_upgrade_points_2').change(function(){return a.Ze(this,2)});$("#"+c+'_upgrade_points_3').change(function(){return a.Ze(this,3)});$("#"+c+'_upgrade_points_4').change(function(){return a.Ze(this,4)});a.Lb()}
d.gc=function(){if(a.e){a.re=0;a.Pc=0;if(a.ol()<=i.kg)for(var b=0;5>b;b++){var c=a.Ja[b];0<c&&(a.re=b,a.Pc=100<=c?100:25<=c?25:5<=c?5:1)}
0<a.Pc?(a.l('Upgrading '+a.Oc[a.re]+' by '+a.Pc+'…'),z.G(B('xw_controller=stats&xw_action=upgrade&upgrade_key='+a.jp[a.re]+'&upgrade_amt='+a.Pc+'&no_load=1'),function(b){a.kp(b)})):(a.d=a.B,a.q())}}
d.kp=function(b){if(a.J(b)){if(a.L(b,'Problem Upgrading Stats'))try{var c=JSON.parse(b.responseText);l(w('Upgrade Stats',a.Oc[a.re]+' upgraded by '+a.Pc));a.Ja[a.re]=Math.max(a.Ja[a.re]-a.Pc,0);D.Ra(c)}catch(d){y(q('Problem Upgrading Stats',d))}
a.q()}}
d.Ya=function(){a.e&&(a.l('Checking Level Up Bonus…'),z.G(B('xw_controller=levelUpBonus&xw_action=addBonusItem&no_load=1'),function(b){a.xl(b)},g,h))}
d.Zo=function(){if(a.b.Ya&&i.A&&a.b.mb===i.A){var b='http://apps.facebook.com/inthemafia/track.php?next_controller=index&next_action=levelUpBonusClaim&next_params=%7B%22friend_id%22%3A%22p%7C'+i.f+'%22%7D';MW.Feed({picture:O+'/graphics/feed_revamp_levelup.png',source:"",link:b,name:'Raise your glass! '+i.D+' just got promoted!',caption:'Level: '+k(a.b.mb)+' Reward: '+Aa(a.b.Ya),description:i.D+' is one step closer to being made, and just got promoted to Level '+i.A+'. It\'s time to toast to '+i.D+'\'s health. Show your support and you might be one of the first 3 to collect a fantastic reward for your loyalty.',userMessage:"",actionLinks:[{name:'Claim Reward',link:b}],attachment:n,targetId:0,callback:ra(),autoPublish:A,ref:'level_up_bonus'})}}
d.xk=function(){a.b.mb=0;a.b.Ya=n;a.Y();a.c()}
d.xl=function(b){if(a.J(b)){if(200==b.status&&a.b.mb!==i.A)try{var c=JSON.parse(b.responseText);if(c&&c.bonusName){a.b.Ya=c.itemId&&W.aa[c.itemId]?N.Pi(c.itemId):wb(c.bonusName);a.b.mb=i.A;var d=w('Level '+k(a.b.mb)+" "+bb(a.b.mb),a.b.Ya);l(d+' (<a href="#0" onclick="D$.shareLevelUpBonus(); return false;">Share</a>)');R.cm(d)}else l(q('Level '+k(i.A)+" "+bb(i.A),'Not Found or Already Claimed'));a.Y();a.c()}catch(e){l(q('Level '+k(i.A)+" "+bb(i.A),'Not Found or Already Claimed'))}
a.d=a.B;a.q()}}
d.im=function(){if(a.b.gc&&a.xi()<=i.kg){for(var b=0;5>b;b++)a.Ja[b]=a.b.Ja[b];return h}
return A}
d.q=function(){1===a.d?(a.B=2,a.Ob()):2===a.d?(a.im()?a.d=10:a.Lg&&a.b.ze?(a.Lg=A,a.d=13):a.d=24,a.q()):10===a.d?(a.B=1,a.gc()):13===a.d?(a.B=14,a.Ya()):14===a.d?(a.d=1,a.q()):24===a.d&&a.Fa()}
a.T();a.P();a.K.w&&a.w(10,function(){a.ea()})}
function Nb(e,c){var a=this,d=Nb.prototype;C(d,E.prototype);a.Oa(e,c);a.K=X.h[1];a.K.r=a;a.cj=h;a.Ng=[];a.di=[];a.ci=[];d.Af=[0,1,0,0,0,0,0,1,1,1];d.ea=function(){a.e||a.Hc();return A}
d.ia=function(){a.Fa();return A}
d.fa=function(){var b;a.b={Rb:[],Qb:[],We:A};for(b=0;10>b;b++)a.b.Rb[b]=A,a.b.Qb[b]=a.Af[b]?10:0}
d.c=function(){var b,f={bank_on:[],bank_at:[]};for(b=0;10>b;b++)f.bank_on[b]=a.b.Rb[b],f.bank_at[b]=a.b.Qb[b];f.old_cities=a.b.We;na(c,f)}
d.P=function(){var b;a.fa();try{var f={Rb:[],Qb:[]},d=oa(c);for(b=0;10>b;b++)f.Rb[b]=d.bank_on[b],f.Qb[b]=d.bank_at[b];f.We=d.old_cities;C(a.b,f)}catch(e){}
for(b=1;10>b;b++)o(c+'_bank_on_'+b,a.b.Rb[b]),t(c+'_bank_at_'+b,a.b.Qb[b]);a.j();a.M()}
d.M=function(){var b;if(T()&&a.V&&a.cj){for(b=1;10>b;b++)a.Af[b]||a.b.We?(a.di[b].html('<span class="cash_good">'+ab[b]+k(i.n[b].n)+'</span>'),a.ci[b].html('<span class="cash_good">'+ab[b]+k(i.n[b].zf)+'</span>'),a.Ng[b].show()):a.Ng[b].hide();R.Qa()}}
d.Y=function(){a.M()}
d.j=function(){var b;for(b=1;10>b;b++)s(c+'_bank_on_'+b+'_data',a.b.Rb[b]);s(c+'_old_cities_data',a.b.We)}
d.xn=function(b){a.b.We=m(b);a.j();a.M();a.c();return h}
d.pm=function(b,c){a.b.Rb[c]=m(b);a.j();a.c();return h}
d.om=function(b,c){a.b.Qb[c]=x(b,10);t(b,a.b.Qb[c]);a.c();return h}
d.Sj=function(b){a.Ng[b]=$("#"+c+'_city_'+b);a.di[b]=$("#"+c+'_cash_'+b);a.ci[b]=$("#"+c+'_bank_'+b);a.Af[b]&&($("#"+c+'_bank_on_'+b).click(function(){return a.pm(this,b)}),$("#"+c+'_bank_at_'+b).change(function(){return a.om(this,b)}))}
d.T=function(){var b,f;ha(a,L('Options','options','<table class="banktable"><thead><tr><th class="bt-city">City</th><th class="bt-opt">Options</th><th class="bt-cash">Cash</th><th class="bt-bank">Bank Balance</th></tr></thead><tbody id="%ID%_body"/></table>'+r('Show Old Cities','old_cities'))+'<div style="padding:10px;">'+Ha+Ia+Ja+Ka+'</div>',5,function(){a.Y()});f="";for(b=1;10>b;b++)f+='<tr id="%ID%_city_'+b+'"><td class="bt-city">'+qa[b]+'</td>',f=a.Af[b]?f+('<td class="bt-opt">'+da('Bank When','bank_on_'+b,g,' <input type="text" style="width:80px;" id="%ID%_bank_at_'+b+'"/>')+'</td>'):f+'<td class="bt-opt" style="height:24px;"><span class="more_in">(Banking not available)</span></td>',f+='<td id="%ID%_cash_'+b+'" class="bt-cash">-</td><td id="%ID%_bank_'+b+'" class="bt-bank">-</td></tr>';$("#"+c+'_body').html(f.replace(/%ID%/g,c));for(b=1;10>b;b++)a.Sj(b);$("#"+c+'_options_toggle').click(function(){a.cj=Z(c+'_options',c+'_options_toggle');a.M();return A});$("#"+c+'_start').click(function(){return a.ea()});$("#"+c+'_stop').click(function(){return a.ia()});$("#"+c+'_cancel').click(function(){return a.Ec()});$("#"+c+'_old_cities').click(function(){return a.xn(this)});a.Lb();a.M()}
d.gm=function(b){return 0<b&&a.b.Rb[b]&&i.n[b].n>=a.b.Qb[b]?h:A}
d.Dk=function(){a.e&&(a.l('Banking in '+qa[i.Da]+'…'),z.G(B('xw_controller=bank&xw_action=deposit_all'),function(b){a.Ek(b)}))}
d.Ek=function(b){if(a.J(b)){if(a.L(b,'Bank Deposit'))try{var c=JSON.parse(b.responseText);l(w('Bank Deposit',c.deposit_message));D.Ra(c)}catch(d){y(q('Bank Deposit',d))}
a.d=1;a.q()}}
d.q=function(){a.N=A;1===a.d?(a.B=2,a.Ob()):2===a.d?!D.Ih&&a.gm(i.Da)?a.Dk():(a.N=h,a.l('Waiting for more money…',1),setTimeout(function(){a.e&&a.q()},1E3)):24===a.d&&a.Fa()}
a.T();a.P();a.K.w&&a.w(10,function(){a.ea()})}
function Xb(){}
function Yb(){this.Sa=1;this.vg='Unknown'}
function Ca(e){this.id=e;this.D="";this.ra=this.f=0;this.gh=A;this.cf=this.ya=this.Pf=this.I=this.ba=0;this.C="";this.Kg=0;this.yg=A;this.uf=this.Hj=this.cp=this.H=0;this.Hi=-1;this.Ii=0;this.qa={};for(e=1;7>=e;e++)this.qa[e]={count:0,time:0,Ff:A,se:A};this.Fj(this.ra,h);this.Gj(this.ya,h);this.Dj(this.I,h);this.Cj(this.Kg,h);this.Ej(this.cf,h);this.yh(this.D,this.f,h)}
function Ob(e,c){var a=this,d=Ob.prototype;C(d,E.prototype);a.Oa(e,c);a.K=X.h[5];a.K.r=a;a.Aa=n;a.ra=0;a.ng=-1;a.Wc=0;a.xf=0;a.xg=0;a.mg=-1;a.Q=0;a.za=0;a.Dh=0;a.Na=0;a.Z=new ea;a.vd=A;a.wg=n;a.Sa=-1;a.ug=0;a.bk=0;a.lj=0;a.Ka=n;a.ab=[];a.F=n;d.dg={1:{m:'Stamina Refill',qe:'Refills your Stamina.'},2:{m:'Arena Health Refill',qe:'Refills your Arena Health.'},3:{m:'Meta Flair',qe:'Deal 50% more damage to opponents (10s).'},4:{m:'Pain Killer',qe:'Receive only 50% damage from opponents (10s).'},5:{m:'Kamikaze',qe:'Uses all your Stamina in one attack.'},6:{m:'Drained',qe:'Deal damage and gain opponent\'s Arena Health.'},7:{m:'Reflector',qe:'Reflect the damage dealt by opponents (10s). Cooldown 10s.'}};var b=['Waiting for opponents','Waiting to start','Active','Ended','Expired'];d.ea=function(){a.e||a.Hc();return A}
d.ia=function(){a.Aa&&a.Aa.close();a.Ka&&a.Ka.close();a.Fa();return A}
d.j=function(){s(c+'_join_20_data',a.b.sd);s(c+'_join_100_data',a.b.rd);s(c+'_join_500_data',a.b.td);s(c+'_skip_respect_low_data',a.b.Lc);s(c+'_skip_respect_high_data',a.b.Kc);s(c+'_power_attack_data',a.b.wa);s(c+'_skip_pup_atk_data',a.b.ie);s(c+'_skip_pup_def_data',a.b.je);s(c+'_stop_attack_data',a.b.oe)}
d.bn=function(b){a.b.sd=m(b);a.j();a.c();return h}
d.cn=function(b){a.b.Ke=x(b,20);a.c();return h}
d.$m=function(b){a.b.rd=m(b);a.j();a.c();return h}
d.an=function(b){a.b.Je=x(b,100);a.c();return h}
d.dn=function(b){a.b.td=m(b);a.j();a.c();return h}
d.en=function(b){a.b.Le=x(b,500);a.c();return h}
d.uo=function(b){a.b.oe=m(b);a.j();a.c();return h}
d.vo=function(b){a.b.kf=x(b);a.c();return h}
d.mo=function(b){a.b.Lc=m(b);a.j();a.c();return h}
d.no=function(b){a.b.gf=x(b);a.c();return h}
d.ko=function(b){a.b.Kc=m(b);a.j();a.c();return h}
d.lo=function(b){a.b.ff=x(b);a.c();return h}
d.Bn=function(b){a.b.wa=m(b);a.j();a.c();return h}
d.io=function(b){a.b.ie=m(b);a.j();a.c();return h}
d.jo=function(b){a.b.je=m(b);a.j();a.c();return h}
d.jn=function(b){a.b.Pe=x(b,1,5);a.c();return h}
d.zn=function(b){a.b.ob=x(b);a.c();return h}
d.um=function(b){a.b.Vc=x(b);a.c();return h}
d.fa=function(){a.b={sd:A,Ke:1E3,rd:h,Je:5E3,td:h,Le:25E3,Lc:A,gf:1200,Kc:A,ff:2E3,wa:h,ie:h,je:h,Pe:2,ob:0,oe:A,kf:8E3,Vc:0}}
d.c=function(){var b={};b.join_20=a.b.sd;b.join_20_value=a.b.Ke;b.join_100=a.b.rd;b.join_100_value=a.b.Je;b.join_500=a.b.td;b.join_500_value=a.b.Le;b.skip_respect_low=a.b.Lc;b.skip_respect_low_value=a.b.gf;b.skip_respect_high=a.b.Kc;b.skip_respect_high_value=a.b.ff;b.power_attack=a.b.wa;b.skip_pup_atk=a.b.ie;b.skip_pup_def=a.b.je;b.max_opponents=a.b.Pe;b.priority=a.b.ob;b.stop_attack=a.b.oe;b.stop_attack_value=a.b.kf;b.connection=a.b.Vc;na(c,b)}
d.P=function(){a.fa();try{var b={},d=oa(c);b.sd=d.join_20;b.Ke=d.join_20_value;b.rd=d.join_100;b.Je=d.join_100_value;b.td=d.join_500;b.Le=d.join_500_value;b.Lc=d.skip_respect_low;b.gf=d.skip_respect_low_value;b.Kc=d.skip_respect_high;b.ff=d.skip_respect_high_value;b.wa=d.power_attack;b.ie=d.skip_pup_atk;b.je=d.skip_pup_def;b.Pe=d.max_opponents;b.ob=d.priority;b.oe=d.stop_attack;b.kf=d.stop_attack_value;b.Vc=d.connection;C(a.b,b)}catch(e){}
o(c+'_join_20',a.b.sd);t(c+'_join_20_value',a.b.Ke);o(c+'_join_100',a.b.rd);t(c+'_join_100_value',a.b.Je);o(c+'_join_500',a.b.td);t(c+'_join_500_value',a.b.Le);o(c+'_skip_respect_low',a.b.Lc);t(c+'_skip_respect_low_value',a.b.gf);o(c+'_skip_respect_high',a.b.Kc);t(c+'_skip_respect_high_value',a.b.ff);o(c+'_skip_pup_atk',a.b.ie);o(c+'_skip_pup_def',a.b.je);o(c+'_power_attack',a.b.wa);t(c+'_max_opponents',a.b.Pe);t(c+'_priority',a.b.ob);o(c+'_stop_attack',a.b.oe);t(c+'_stop_attack_value',a.b.kf);t(c+'_connection',a.b.Vc);a.j()}
d.Y=function(){Va("#"+c+'_div_join',"#"+c+'_div_fight')}
d.T=function(){ha(a,L('Options','options','<div style="width:52%;float:left;">'+K('Joining','opt_join',ba('div_join',r('Join <span class="stamina">20</span> Arenas when more than','join_20',g,' <span class="stamina"/><input type="text" style="width:44px;" id="%ID%_join_20_value"/>')+r('Join <span class="stamina">100</span> Arenas when more than','join_100',g,' <span class="stamina"/><input type="text" style="width:44px;" id="%ID%_join_100_value"/>')+r('Join <span class="stamina">500</span> Arenas when more than','join_500',g,' <span class="stamina"/><input type="text" style="width:44px;" id="%ID%_join_500_value"/>')+M+r('Skip Arenas with less than','skip_respect_low',g,' <span class="respect" title="Respect"/><input type="text" style="width:40px;" id="%ID%_skip_respect_low_value"/>')+r('Skip Arenas with more than','skip_respect_high',g,' <span class="respect" title="Respect"/><input type="text" style="width:40px;" id="%ID%_skip_respect_high_value"/>')+M+'Arena Connection '+wa('connection',['Same as page','Secure','Insecure'])+'<br/>'))+'</div><div style="width:48%;float:left;">'+K('Fighting','opt_fight',ba('div_fight',r('Enable Power Attack','power_attack')+r('Skip opponents with attack power ups','skip_pup_atk')+r('Skip opponents with defense power ups','skip_pup_def')+r('Stop attacking if winning by','stop_attack',g,' <input type="text" style="width:44px;" id="%ID%_stop_attack_value"/> points')+'Attack up to <input type="text" style="width:20px;" id="%ID%_max_opponents"/> opponents at once<br/>Prefer opponents with '+wa('priority','Highest Respect;Lowest Respect;Highest Score;Lowest Score;Highest Health;Lowest Health'.split(";"))+'<br/>'+M+'<a class="sexy_button_new shorter black narrow_sexy_button mw_new_ajax" href="remote/html_server.php?xw_controller=arena&xw_action=displayArenaSettings" selector="#popup_fodder"><span><span>Edit Game Settings</span></span></a><br/>'))+'</div><div style="clear:both;"/>')+L('Arena','arena','<div id="%ID%_lobby_html" class="demon_lobby"><table class="lobbytable"><thead><tr><th class="lo-name">Name</th><th class="lo-cost">Cost</th><th class="lo-resp">Respect</th><th class="lo-players">Players</th><th class="lo-time">Time</th></tr></thead><tbody id="%ID%_lobby_body"/></table></div><div id="%ID%_arena_html" class="demon_arena"><table class="arenatable"><thead><tr><th class="op-name">Opponent</th><th class="op-diff">Difficulty</th><th class="op-resp">Respect</th><th class="op-health">Health</th><th class="op-score">Score</th><th class="op-pu">Power Ups</th><th class="op-opt">Options</th></tr></thead><tbody><tr id="%ID%_op_0"><td id="%ID%_op_name_0"/><td id="%ID%_op_diff_0"/><td id="%ID%_op_resp_0"/><td id="%ID%_op_health_0"/><td id="%ID%_op_score_0" class="op-score"/><td id="%ID%_op_pu_0"><div id="%ID%_pu_atk0" class="pu_atk"/><div id="%ID%_pu_def0" class="pu_def"/></td><td id="%ID%_op_opt_0"><div class="pu_icon pu_icon_small pu5" id="%ID%_pu_icon_50"/><div class="pu_icon pu_icon_small pu6" id="%ID%_pu_icon_60"/></td></tr><tr id="%ID%_op_1"><td id="%ID%_op_name_1"/><td id="%ID%_op_diff_1"/><td id="%ID%_op_resp_1"/><td id="%ID%_op_health_1"/><td id="%ID%_op_score_1" class="op-score"/><td id="%ID%_op_pu_1"><div id="%ID%_pu_atk1" class="pu_atk"/><div id="%ID%_pu_def1" class="pu_def"/></td><td id="%ID%_op_opt_1"><div class="pu_icon pu_icon_small pu5" id="%ID%_pu_icon_51"/><div class="pu_icon pu_icon_small pu6" id="%ID%_pu_icon_61"/></td></tr><tr id="%ID%_op_2"><td id="%ID%_op_name_2"/><td id="%ID%_op_diff_2"/><td id="%ID%_op_resp_2"/><td id="%ID%_op_health_2"/><td id="%ID%_op_score_2" class="op-score"/><td id="%ID%_op_pu_2"><div id="%ID%_pu_atk2" class="pu_atk"/><div id="%ID%_pu_def2" class="pu_def"/></td><td id="%ID%_op_opt_2"><div class="pu_icon pu_icon_small pu5" id="%ID%_pu_icon_52"/><div class="pu_icon pu_icon_small pu6" id="%ID%_pu_icon_62"/></td></tr><tr id="%ID%_op_3"><td id="%ID%_op_name_3"/><td id="%ID%_op_diff_3"/><td id="%ID%_op_resp_3"/><td id="%ID%_op_health_3"/><td id="%ID%_op_score_3" class="op-score"/><td id="%ID%_op_pu_3"><div id="%ID%_pu_atk3" class="pu_atk"/><div id="%ID%_pu_def3" class="pu_def"/></td><td id="%ID%_op_opt_3"><div class="pu_icon pu_icon_small pu5" id="%ID%_pu_icon_53"/><div class="pu_icon pu_icon_small pu6" id="%ID%_pu_icon_63"/></td></tr><tr id="%ID%_op_4"><td id="%ID%_op_name_4"/><td id="%ID%_op_diff_4"/><td id="%ID%_op_resp_4"/><td id="%ID%_op_health_4"/><td id="%ID%_op_score_4" class="op-score"/><td id="%ID%_op_pu_4"><div id="%ID%_pu_atk4" class="pu_atk"/><div id="%ID%_pu_def4" class="pu_def"/></td><td id="%ID%_op_opt_4"><div class="pu_icon pu_icon_small pu5" id="%ID%_pu_icon_54"/><div class="pu_icon pu_icon_small pu6" id="%ID%_pu_icon_64"/></td></tr><tr id="%ID%_op_5"><td id="%ID%_op_name_5"/><td id="%ID%_op_diff_5"/><td id="%ID%_op_resp_5"/><td id="%ID%_op_health_5"/><td id="%ID%_op_score_5" class="op-score"/><td id="%ID%_op_pu_5"><div id="%ID%_pu_atk5" class="pu_atk"/><div id="%ID%_pu_def5" class="pu_def"/></td><td id="%ID%_op_opt_5"><div class="pu_icon pu_icon_small pu5" id="%ID%_pu_icon_55"/><div class="pu_icon pu_icon_small pu6" id="%ID%_pu_icon_65"/></td></tr></tbody></table><div id="%ID%_arena_info"/><div id="%ID%_pups"><div class="pu_icon" id="%ID%_pu_icon_1" style="background-image:url(&quot;'+O+'/graphics/item_staminarefill_01.png&quot;);"/> <div class="pu_icon" id="%ID%_pu_icon_2" style="background-image:url(&quot;'+O+'/graphics/item_arenahealthrefill_01.png&quot;);"/> <div class="pu_icon" id="%ID%_pu_icon_3" style="background-image:url(&quot;'+O+'/graphics/item_quartflair_01.png&quot;);"/> <div class="pu_icon" id="%ID%_pu_icon_4" style="background-image:url(&quot;'+O+'/graphics/item_painkiller_01.png&quot;);"/> <div class="pu_icon" id="%ID%_pu_icon_7" style="background-image:url(&quot;'+O+'/graphics/item_reflector_01.png&quot;);"/></div></div>')+L('Stats','stats')+'<div style="padding:10px;">'+Ha+Ia+Ja+Ka+'</div>',5,function(){a.Y()});$("#"+c+'_options_toggle').click(function(){Z(c+'_options',c+'_options_toggle');return A});$("#"+c+'_arena_toggle').click(function(){Z(c+'_arena',c+'_arena_toggle');return A});$("#"+c+'_stats_toggle').click(function(){Z(c+'_stats',c+'_stats_toggle');return A});$("#"+c+'_start').click(function(){return a.ea()});$("#"+c+'_stop').click(function(){return a.ia()});$("#"+c+'_cancel').click(function(){return a.Ec()});$("#"+c+'_join_20').click(function(){return a.bn(this)});$("#"+c+'_join_20_value').change(function(){return a.cn(this)});$("#"+c+'_join_100').click(function(){return a.$m(this)});$("#"+c+'_join_100_value').change(function(){return a.an(this)});$("#"+c+'_join_500').click(function(){return a.dn(this)});$("#"+c+'_join_500_value').change(function(){return a.en(this)});$("#"+c+'_skip_respect_low').click(function(){return a.mo(this)});$("#"+c+'_skip_respect_low_value').change(function(){return a.no(this)});$("#"+c+'_skip_respect_high').click(function(){return a.ko(this)});$("#"+c+'_skip_respect_high_value').change(function(){return a.lo(this)});$("#"+c+'_connection').change(function(){return a.um(this)});$("#"+c+'_skip_pup_atk').click(function(){return a.io(this)});$("#"+c+'_skip_pup_def').click(function(){return a.jo(this)});$("#"+c+'_power_attack').click(function(){return a.Bn(this)});$("#"+c+'_max_opponents').change(function(){return a.jn(this)});$("#"+c+'_priority').change(function(){return a.zn(this)});$("#"+c+'_stop_attack').click(function(){return a.uo(this)});$("#"+c+'_stop_attack_value').change(function(){return a.vo(this)});$("#"+c+'_pu_icon_1').click(function(){return a.pa(1)});$("#"+c+'_pu_icon_2').click(function(){return a.pa(2)});$("#"+c+'_pu_icon_3').click(function(){return a.pa(3)});$("#"+c+'_pu_icon_4').click(function(){return a.pa(4)});$("#"+c+'_pu_icon_50').click(function(){return a.pa(5,0)});$("#"+c+'_pu_icon_51').click(function(){return a.pa(5,1)});$("#"+c+'_pu_icon_52').click(function(){return a.pa(5,2)});$("#"+c+'_pu_icon_53').click(function(){return a.pa(5,3)});$("#"+c+'_pu_icon_54').click(function(){return a.pa(5,4)});$("#"+c+'_pu_icon_55').click(function(){return a.pa(5,5)});$("#"+c+'_pu_icon_60').click(function(){return a.pa(6,0)});$("#"+c+'_pu_icon_61').click(function(){return a.pa(6,1)});$("#"+c+'_pu_icon_62').click(function(){return a.pa(6,2)});$("#"+c+'_pu_icon_63').click(function(){return a.pa(6,3)});$("#"+c+'_pu_icon_64').click(function(){return a.pa(6,4)});$("#"+c+'_pu_icon_65').click(function(){return a.pa(6,5)});$("#"+c+'_pu_icon_7').click(function(){return a.pa(7)});$("#"+c+'_lobby_html').hide();$("#"+c+'_arena_html').hide();a.Lb()}
d.dh=function(){a.e&&(a.Z.clear(),a.vd=A,a.Sa=-1,a.l('Connecting to Lobby…'),z.G(B('xw_controller=Lobby&xw_action=play'),function(b){a.Yl(b)}))}
d.Yl=function(b){var c;if(a.J(b))if(a.L(b,'Lobby Connect')){if(c=/RESPECT<\/span> <span class="respect_value" style="font-size:13px;color:#DDD">(\d+)/.exec(b.responseText))a.ra=U(c[1]),-1===a.ng&&(a.ng=a.ra);if(c=/CRESTS<\/span> <span class="respect_value" style="font-size:13px;color:#DDD">(\d+)/.exec(b.responseText))a.Wc=U(c[1]),-1===a.mg&&(a.mg=a.Wc);a.vf||(a.vf=Sa(b.responseText,'populateArenaNames(',");"));a.M();a.Zl()}else a.dh()}
d.yj=function(b){1===a.b.Vc?(b=b.replace(/ws:\/\//g,'wss://'),b=b.replace(/:80\//g,':443/')):2===a.b.Vc&&(b=b.replace(/wss:\/\//g,'ws://'),b=b.replace(/:443\//g,':80/'));return b}
d.Zl=function(){if(a.e)if(a.l('Connecting to Arena Lobby…'),a.Aa)a.Aa.open();else{var b=a.yj('http'==Zb?'ws://lobby-1.mafiawars.zynga.com:80/player':'wss://lobby-1.mafiawars.zynga.com:443/player');a.Aa=new WebSocket(b);a.Aa.onmessage=function(b){a.$l(b)};a.Aa.onerror=function(){l(q('Lobby','Error'));a.e&&-1===a.Sa&&setTimeout(function(){a.dh()},1E3)};a.Aa.onopen=function(){l(w('Lobby','Authenticate'));a.Aa.send(JSON.stringify({Id:i.f,Cmd:'Authenticate',Args:['token',""+a.ra]}));a.e&&-1===a.Sa&&setTimeout(function(){a.Mi()},1E3)};a.Aa.onclose=function(){l(w('Lobby','Closed'));a.Aa=n;$("#"+c+'_lobby_html').hide()}}}
d.Mi=function(){a.e&&a.Aa&&a.Aa.send(JSON.stringify({Id:i.f,Cmd:'listArena',Args:[]}))}
d.jl=function(b){return a.vf&&a.vf[b%806]?a.vf[b%806]:b.toString()}
d.Ph=[20,100,500];d.wf=["sw","lw","hw"];d.$l=function(b){var d,e,i,k,j,l,m,o,r;if(a.e){a.vd||a.l('Looking for an arena to join…');try{if((l=JSON.parse(b.data))&&l.Args&&l.Extra){j=l.Args;k=aa()+X.Bj;for(a.Z.index=0;a.Z.index<a.Z.length;a.Z.index++)i=a.Z.W(a.Z.index),i.ri=A;for(d=0;d<j.length;d++)m=j[d].split(","),o=m[0].split("/"),r=l.Extra[d].split(","),i=new Yb,i.Yj=o[0],i.Sa=o[1]===a.wf[0]?0:o[1]===a.wf[1]?1:2,i.tb=p(o[2]),i.$f=p(m[1]),i.sp=p(m[2]),i.Ai=0<=i.$f?p(m[3]):0,i.em=p(r[0]),i.fh=p(r[1]),i.Jj=p(r[2]),i.vg=a.jl(i.tb),i.jf=i.Ai?-1:Math.max(i.Jj-k,0),i.ri=h,0<=i.jf&&6>i.$f?a.Z.get(i.tb)?(i.ud=a.Z.aa[i.tb].ud,a.Z.aa[i.tb]=i):a.Z.push(i.tb,i):i.ud||a.Z.get(i.tb)&&a.Z.remove(i.tb);e="";for(a.Z.index=0;a.Z.index<a.Z.length;a.Z.index++)i=a.Z.W(a.Z.index),i.jf=i.Ai?-1:Math.max(i.Jj-k,0),0<=i.jf&&6>i.$f&&i.ri?i.ud||(e+='<tr><td>'+i.vg+'</td><td><span class="stamina">'+a.Ph[i.Sa]+'</span></td><td><span class="respect">'+i.em+"-"+i.fh+'</span></td><td>'+i.$f+'/6</td><td>'+(20>=i.jf?Math.max(i.jf,0)+"s":"-")+'</td></tr>'):i.ud||a.Z.remove(i.tb);$("#"+c+'_lobby_body').html(e);$("#"+c+'_lobby_html').show();$("#"+c+'_arena_html').hide();a.mk()}}catch(s){y(q('Lobby',s))}
setTimeout(function(){a.Mi()},1E3)}}
d.wb=function(b,c){return 0===b?a.b.sd&&i.H>=a.b.Ke&&(c||!a.wb(1)):1===b?a.b.rd&&i.H>=a.b.Je&&(c||!a.wb(2)):a.b.td&&i.H>=a.b.Le}
d.mk=function(){var b,c,d;if(a.e&&!a.vd)if(a.b.Lc||a.b.Kc)for(b=0;b<a.Z.length;b++){if(c=a.Z.W(b),d=A,c.ud?d=h:a.wb(c.Sa,h)?a.b.Lc&&c.fh<a.b.gf?d=h:a.b.Kc&&c.fh>a.b.ff&&(d=h):d=h,!d){c.ud=h;a.wl(c);break}}else a.wb(2)?a.Zg(2):a.wb(1)?a.Zg(1):a.wb(0)&&a.Zg(0)}
d.wl=function(b){var c;a.e&&(a.vd=h,a.l('Attempting to join '+b.vg+'…'),c='arenaType='+a.wf[b.Sa]+'&arenaId='+b.tb+'&arenaIp='+b.Yj,z.G(B('xw_controller=Lobby&xw_action=join_arena&'+c),function(c){a.Gi(c,b.Sa)}))}
d.Zg=function(b){var c;a.e&&(a.vd=h,a.l('Attempting to join Arena…'),c='arenaType='+a.wf[b],z.G(B('xw_controller=Lobby&xw_action=join_arena&'+c),function(c){a.Gi(c,b)}))}
d.Gi=function(b,c){if(a.J(b)){if(a.L(b,'Join Arena'))try{var d=JSON.parse(b.responseText);if(d){if(d.data.success){l(w('Join Arena',d.data.message));a.Sa=c;a.Ji();a.Aa&&a.Aa.close();return}
l(q('Join Arena',d.data.message))}}catch(e){y(q('Join Arena',e))}
a.vd=A}}
d.Ji=function(){var b;if(a.e){a.Z.clear();for(b=0;6>b;b++)$("#"+c+'_op_opt_'+b).hide();a.l('Loading Arena…');z.G(B('xw_controller=Lobby&xw_action=loadArena'),function(b){a.yl(b)})}}
d.yl=function(b){var c;if(a.J(b)){if(a.L(b,'Load Arena')){if(c=/viewObj.init\("([^"]+)/.exec(b.responseText)){a.wg=a.yj(c[1]);a.ug=a.Ph[a.Sa];a.bk=a.ug/10;a.lj=a.ug/2;(c=/<div id="arena_name">[\r\n\t]+([^\t]+)/m.exec(b.responseText))&&l(w('Load Arena','Joined '+c[1]));la(w('Load Arena',a.wg));a.Zj();return}
y(q('Load Arena','Unable to find Arena url'))}
a.Ji()}}
d.Zj=function(){var b;if(a.e){a.l('Connecting to Arena…');a.ab=[];a.F=n;for(b=0;6>b;b++)a.ab[b]=n,$("#"+c+'_op_'+b).hide();a.Ka?a.Ka.open():(a.Ka=new WebSocket(a.wg),a.Ka.onmessage=function(b){a.$j(b)},a.Ka.onerror=function(){l(q('Arena','Error'))},a.Ka.onopen=function(){l(w('Arena','Opened'))},a.Ka.onclose=function(){l(w('Arena','Closed'));a.Ka&&(a.Ka=n,setTimeout(function(){$("#"+c+'_arena_html').hide();a.vi()},5E3))})}}
d.pa=function(b,c){a.e&&(a.F&&!a.F.qa[b].se)&&(a.F.qa[b].Ff?l(q('Problem using '+a.dg[b].m,'Cooldown active')):a.F.qa[b].count?(5===b||6===b?(l(w('Using '+a.dg[b].m,'On opponent '+a.ab[c].C)),a.F.qa[b].target=c):(l(w('Using '+a.dg[b].m)),a.F.qa[b].target=a.F.id),a.F.qa[b].se=h):l(q('Problem using '+a.dg[b].m,'None available')));return h}
d.wi=function(){var b,c,d;d=1E6;for(b=0;6>b;b++)(c=a.ab[b])&&c!==a.F&&(d=Math.min(a.F.ya-c.ya,d));return d}
d.ak=function(){if(a.e){var b,c,d,e,i,j,l;if(!(a.F.Hi===a.F.uf&&(new Date).getTime()<a.F.Ii+1E3)){e="";c=0;d=A;for(b=1;7>=b;b++)if(a.F.qa[b].se){a.F.qa[b].se=A;e+="3:"+b+";";c++;if(5===b||6===b)e+="1:"+a.F.qa[b].target+";",c++;d=h;a.l('Using Power Up…')}
if(!d)if(0>=a.F.I)a.l('Waiting for more <span class="health"/>Health…');else if(a.F.H<a.lj)a.l('Waiting for more <span class="stamina"/>Stamina…');else if(a.b.oe&&a.wi()>=a.b.kf)a.l('Waiting because winning by '+k(a.wi())+' points…');else{a.b.wa&&!a.F.wa?(e+='2:1;',c++):!a.b.wa&&a.F.wa&&(e+='2:0;',c++);i=[];for(b=j=0;6>b;b++)if(d=a.ab[b])l=A,d.yg=A,d===a.F?l=h:0>=d.I?l=h:d.cf&1&&a.b.ie?l=h:d.cf&2&&a.b.je&&(l=h),l||i.push(d);i.sort(function(b,c){return 0===a.b.ob?c.ra-b.ra:1===a.b.ob?b.ra-c.ra:2===a.b.ob?c.ya-b.ya:3===a.b.ob?b.ya-c.ya:4===a.b.ob?c.I-b.I:5===a.b.ob?b.I-c.I:0});if(i.length){for(b=0;4>c;)d=i[b],d.yg||(d.yg=h,j++),e+="1:"+d.id+";",c++,b++,b>=Math.min(a.b.Pe,i.length)&&(b=0);1===j?a.l('Attacking '+i[0].C+'…'):2===j?a.l('Attacking '+i[0].C+' and 1 other…'):a.l('Attacking '+i[0].C+' and '+(j-1)+' others…')}else a.l('Waiting for Opponents…')}
0<c&&(a.Ka&&a.Ka.send(JSON.stringify({Nonce:a.F.uf,CMD:e})),a.F.Hi=a.F.uf,a.F.Ii=(new Date).getTime())}}}
d.$j=function(f){if(a.e)try{var d,e,l,m,j,o,r,s,t=JSON.parse(f.data);a.ic=p(t.s);a.Qh=t.t;if(t.pi)for(d in t.pi)if(t.pi.hasOwnProperty(d)){e=p(d);a.ab[e]||(a.ab[e]=new Ca(e),$("#"+c+'_op_'+d).show());j=a.ab[e];o=t.pi[d];if((m=p(o.pid))&&j.f!=m)j.yh("",m),j.f===i.f&&(j.gh=h,a.F=j),a.ti(j);j.Dj(o.ph);j.Ej(o.pu);j.Gj(o.sc)}
if(t.mi&&a.F&&(o=t.mi,a.F.H=o.st,a.F.cp=o.pst,a.F.Hj=o.sr,a.F.wa=o.as,a.F.uf=o.ammo,1===a.ic&&(a.Dh=a.F.H),o.pui)){r=o.pui.split("|");for(d=0;d<r.length;d++)s=r[d].split(","),e=p(s[0]),l=0<e?e:-e,a.F.qa[l].time=p(s[1]),a.F.qa[l].count=p(s[2]),a.F.qa[l].Ff=0<a.F.qa[l].time?h:A}
1===a.ic?a.l('Waiting for Arena to start…'):2===a.ic?a.ak():3===a.ic?a.l('Waiting for Arena Rewards…'):4===a.ic&&a.l('Waiting for Arena Rewards…');f="";f='Stamina: <span class="stamina">'+k(a.F.H)+'</span> '+ja('(more in '+jb(a.F.Hj)+")");f+=' | Power Attack: '+(a.F.wa?"On":"Off");f+=' | State: '+b[a.ic];0<=a.Qh&&(f+=' | Time: <span>'+jb(a.Qh)+'</span>');$("#"+c+'_arena_info').html(f);if(2===a.ic){for(d=1;7>=d;d++)if(j=a.F.qa[d],5===d||6===d)for(e=0;6>e;e++)a.ab[e]&&a.F!==a.ab[e]&&(j.se||j.Ff||!j.count||!a.ab[e].I?$("#"+c+'_pu_icon_'+d+""+e).addClass('opacity_50'):$("#"+c+'_pu_icon_'+d+""+e).removeClass('opacity_50'),$("#"+c+'_op_opt_'+e).show(),$("#"+c+'_pu_icon_'+d+""+e).html('<span>x'+j.count+'</span>'));else j.se||j.Ff||j.time||!j.count?$("#"+c+'_pu_icon_'+d).addClass('opacity_50'):$("#"+c+'_pu_icon_'+d).removeClass('opacity_50'),$("#"+c+'_pu_icon_'+d).html('<span>x'+j.count+'</span>');$("#"+c+'_pups').show()}else{for(e=0;6>e;e++)$("#"+c+'_op_opt_'+d).hide();$("#"+c+'_pups').hide()}
$("#"+c+'_lobby_html').hide();$("#"+c+'_arena_html').show()}catch(w){y(q('Arena',w))}}
d.ti=function(b){a.e&&z.G(B('xw_controller=arena&xw_action=getSingleUserData&pid='+b.f),function(c){a.ml(c,b)})}
d.ml=function(b,c){var d;if(a.J(b)){if(a.L(b,'Get Opponent Data'))try{var e=JSON.parse(b.responseText);if(e){var i=e.data.result[c.f];if(i){if(i.pic&&(d=/.+\d+_(\d+)_\d+/.exec(i.pic)))c.ba=p(d[1]);c.yh(i.fullName,c.f);c.Fj(U(i.playerRespect));c.gh=i.me;c.gh?(c.qa[2].count=i.healthRefills,c.qa[1].count=i.staminaRefills):c.Cj(i.defenseFlag+2*i.mafiaDefenseFlag+1);return}}}catch(j){y(q('Get Opponent Data',j))}
a.ti(c)}}
d.vi=function(){a.e&&(a.l('Collecting Arena Rewards…'),z.G(B('xw_controller=arena&xw_action=rewards'),function(b){a.nl(b)}))}
d.nl=function(b){var c,d,e,i;if(a.J(b))if(a.L(b,'Arena Rewards')){a.F&&a.Dh&&(c=a.Dh-a.F.H);a.za+=c;a.xf++;i=0;if(d=/class="position">(\d+)/.exec(b.responseText))c=p(d[1]),l(w('Position',k(c))),1===c&&a.xg++;if(d=/Experience Gained: <\/span>[\r\n\t]+<span class="value">(\d+)/m.exec(b.responseText))c=p(d[1]),l(w('Experience','<span class="experience">'+k(c)+'</span>')),a.Q+=c;if(d=/Respect Gained: <\/span>[\r\n\t]+<span[^>]+>\+*(\d+)/m.exec(b.responseText))c=p(d[1]),l(w('Respect Gained','<span class="respect">'+k(c)+'</span>')),a.ra+=c;if(d=/Respect Lost: <\/span>[\r\n\t]+<span[^>]+>-(\d+)/m.exec(b.responseText))c=p(d[1]),l(q('Respect Lost','<span class="respect">'+k(c)+'</span>')),a.ra-=c;if(d=/Crests Gained: <\/span>[\r\n\t]+<span class="value">(\d+)/m.exec(b.responseText))c=p(d[1]),l(w('Crests Gained','<span class="arena_mastery_crests">'+k(c)+'</span>')),a.Wc+=c;if(d=/alt="Ices"\/><\/div>[\r\n\t]+<\/div>[\r\n\t]+<div class="qty">x (\d+)/m.exec(b.responseText))c=p(d[1]),l(w('Ices',k(c))),a.Na+=c;for(e=/item_id="(\d+)" \/><\/div>[\r\n\t]+<\/div>[\r\n\t]+<div class="qty">x (\d+)/mg;d=e.exec(b.responseText);)c=p(d[1]),d=p(d[2]),N.Pb(c,d),i+=d;for(e=/item_id="(\d+)" \/><\/div>[\r\n\t]+.+<\/span>[\r\n\t]+.+<\/span>[\r\n\t]+<\/div>[\r\n\t]+<div class="qty">x (\d+)/mg;d=e.exec(b.responseText);)c=p(d[1]),d=p(d[2]),N.Pb(c,d),i+=d;l(w('Loot','Collected '+i+' items'));a.M();a.d=1;a.q()}else a.vi()}
d.M=function(){var b="";a.S||(a.S=$("#"+c+'_stats'));a.S&&(b+='Respect: <span class="respect">'+k(a.ra)+'</span>',-1!==a.ng&&(b+=" "+Da(a.ra-a.ng)),b+=' | Crests: <span class="arena_mastery_crests">'+k(a.Wc)+'</span>',-1!==a.mg&&(b+=" "+Da(a.Wc-a.mg)),b+=' | Arenas Played: '+k(a.xf),b+=' | Won: '+k(a.xg),0!==a.xf&&(b+=' <span class="stat_info more_in">['+p(100*a.xg/a.xf)+'%]</span>'),a.za&&(b+='<br/>Stamina: <span class="stamina">'+k(a.za)+'</span>',a.Q&&(b+=' | Experience: <span class="experience">'+k(a.Q)+'</span> <span class="stat_info more_in">['+parseFloat(a.Q/a.za).toFixed(2)+'/sta]</span>'),a.Na&&(b+=' | Ices: <span>'+k(a.Na)+'</span>')));a.S.html(b)}
d.q=function(){a.N=A;1===a.d?(a.B=2,a.Ob()):2===a.d?'undefined'===typeof WebSocket?(l(q('Unable to connect to Arena','Browser does not support WebSockets')),a.d=24,a.q()):a.wb(0)||a.wb(1)||a.wb(2)?(a.B=24,a.dh()):(a.N=h,a.l('Waiting for more <span class="stamina"/>Stamina…',1),setTimeout(function(){a.e&&a.q()},1E3)):24===a.d&&a.Fa()}
a.T();a.P();a.K.w&&a.w(10,function(){a.ea()})}
function Pb(e,c){var a=this,d=Pb.prototype;a.id=c;a.ta=e;a.yc=0;a.g=0;a.ig=0;a.hg=h;d.Pi=function(a){var c,d;c||(c=1);d=1<c?k(c)+" ":"";if(-1===a||!W.aa[a])return'<span class="item_with_preview" item_id="'+a+'">'+d+'Item #'+a+'</span>';var e=W.aa[a],a="";if(e.jc||e.ka)a+='<span class="attack">'+e.jc+'</span> <span class="defense">'+e.ka+'</span> ';return a+='<img style="width:18px;height:18px;" src="'+O+'/graphics/'+e.Xg+'" class="item_with_preview" item_id="'+e.id+'"> <span class=""><abbr title="'+e.id+'">'+d+(1<c?e.jj:e.jg)+'</abbr></span>'}
d.Oi=function(b){var c;if(b){var d="";b.fb&&(d=b.ek||b.Ck?'yellow':'good');c=b.bb-b.Ij;c='<td class="inv_count"><span class="good">'+c+'x</span></td>'+(b.jc?'<td class="inv_atk"><span class="attack">'+b.jc+'</span></td>':'<td class="inv_atk">-</td>')+(b.jc?'<td class="inv_def"><span class="defense">'+b.ka+'</span></td>':'<td class="inv_def">-</td>')+'<td class="inv_name">';c=a.hg?c+('<img style="width:18px;height:18px;" src="'+O+'/graphics/'+b.Xg+'" class="item_with_preview" item_id="'+b.id+'">&nbsp;<span class="item_with_preview '+d+'" item_id="'+b.id+'"><abbr title="'+b.id+'">'+b.jg+'</abbr></span>'):c+('<span class="item_with_preview '+d+'" item_id="'+b.id+'"><abbr title="'+b.id+'">'+b.jg+'</abbr></span>');return c+'</td>'}
return""}
d.Th=function(b){if(99===a.ig){if(1===b.type||2===b.type||3===b.type||8===b.type||13===b.type)return A}else if(0!==a.ig&&b.type!==a.ig)return A;return 1===a.g||0===a.g&&b.bb>b.Ij||2===a.g&&0!==b.al||3===a.g&&0!==b.$k||4===a.g&&0!==b.bb||5===a.g&&0===b.bb?h:A}
d.Oe=function(b){var d,e,i;Ea(a,a.ta,a.yc);e="";if(b)T()&&a.V&&(i=$("#"+c+"_"+b.id),a.Th(b)?i.length?(i.html(a.Oi(b)),i.show()):a.Oe():i.hide());else if(T()&&a.V&&(i=$("#"+c+'_loot'),i.length)){if(W.length){e='<table class="inv"><tr><th class="inv_count">Count</th><th class="inv_atk">Attack</th><th class="inv_def">Defense</th><th class="inv_name">Name</th></tr>';for(d=0;d<W.length;d++)b=W.W(d),e=a.Th(b)?e+('<tr id="'+c+"_"+b.id+'">'+a.Oi(b)+'</tr>'):e+('<tr id="'+c+"_"+b.id+'" style="display:none;"/>');e+='</table>'}
i.html(e)}}
d.hl=function(a){var c,d;for(c=0;c<W.length;c++)if(d=W.W(c),d.Xg==a)return d;return n}
d.te=function(b,c){var d;if(c===n||c===g)c=1;a.yc+=c;if(d=a.hl(b))d.bb+=c,a.Oe(d)}
d.gl=function(a,c){var d,e;c||(c=1);if(1<c)for(d=0;d<W.length;d++)if(e=W.W(d),e.jj==a)return e;for(d=0;d<W.length;d++)if(e=W.W(d),e.jg==a)return e;return n}
d.sf=function(b,c){var d;if(c===n||c===g)c=1;a.yc+=c;if(d=a.gl(b,c))d.bb+=c,a.Oe(d)}
d.Pb=function(b,c){var d;if(c===n||c===g)c=1;a.yc+=c;if(W.length&&(d=W.aa[b])){d.bb+=c;a.Oe(d);return}
y(q('Unknown Item','Item #'+b))}
d.tg=function(a){var c,d;if(a)for(c=0;c<a.length;c++)(d=/item_id="(\d+)"/.exec(a[c]))&&N.Pb(p(d[1]))}
d.j=function(){s(c+'_show_images_data',a.hg)}
d.Fc=function(b){a.g=x(b);a.Y();return h}
d.Nn=function(b){a.ig=x(b);a.Y();return h}
d.Mn=function(b){a.hg=m(b);a.j();a.Y();return h}
d.Y=function(){a.Oe()}
d.T=function(){ha(a,'<div style="padding:2px;"><div>Show '+wa('mode','Gained;All;Active Attack;Active Defense;Owned;Not Owned'.split(";"))+" "+wa('show_item_type',{"0":"All",1:'Weapons',2:'Armor',3:'Vehicles',8:'Animals',13:'Henchmen',99:'Other'})+' <span class="vdivider"/>'+da('Show Images','show_images')+'</div><div class="hdivider"/><div id="%ID%_loot"/></div>',6,function(){a.Y()});a.g=0;t(c+'_mode',a.g);$("#"+c+'_mode').change(function(){return a.Fc(this)});$("#"+c+'_show_item_type').change(function(){return a.Nn(this)});$("#"+c+'_show_images').click(function(){return a.Mn(this)});o(c+'_show_images',a.hg);a.j();a.Y()}
a.T()}
function Qb(e,c){var a=this,d=Qb.prototype;u=a;a.id=c;a.ta=e;a.b=n;a.va=n;F=new ea;I=new ea;V=new ea;J=new ea;a.Md=[];a.rg=[];a.ha=0;a.Ma=0;d.Za=['Active','Opponents','Ignored','Favorites'];d.Xi=function(a){var c,d;d=a.La&&!a.xc?a.fb?'op_active':"":'opacity_50';c='<td class="op_name '+d+'">';a.lc&&(c+='<span style="background-image:url(&quot;'+O+a.lc+'&quot;);background-repeat:no-repeat;padding-left:20px;background-size:18px;"/> ');a.Tc&&(c+='<span style="background-image:url(&quot;'+O+a.Tc+'&quot;);background-repeat:no-repeat;padding-left:20px;background-size:18px;"/> ');c+=a.C+'</td>';c+='<td class="op_level '+d+'">'+(a.A?k(a.A):"-")+'</td>';c+='<td class="op_defense '+d+'">'+(a.ka?k(a.ka):"-")+'</td>';a.xc?c+='<td class="">Ignored</td>':(c=a.La?c+('<td class="op_buttons">'+P('Disable','disable_opponent',a.f)):c+('<td class="op_buttons">'+P('Enable','enable_opponent',a.f)),c+=" "+P('Ignore','ignore_opponent',a.f),c+=" "+P('Favorite','fav_opponent',a.f),c+='</td>');return c}
d.li=function(a){var c,d;d=a.La&&!a.xc?a.fb?'op_active':"":'opacity_50';c='<td class="op_name '+d+'">';a.lc&&(c+='<span style="background-image:url(&quot;'+O+a.lc+'&quot;);background-repeat:no-repeat;padding-left:20px;background-size:18px;"/> ');a.Tc&&(c+='<span style="background-image:url(&quot;'+O+a.Tc+'&quot;);background-repeat:no-repeat;padding-left:20px;background-size:18px;"/> ');c+=a.C+'</td>';c+='<td class="op_level '+d+'">'+(a.A?k(a.A):"-")+'</td>';c+='<td class="op_defense '+d+'">'+(a.ka?k(a.ka):"-")+'</td>';a.xc?c+='<td class="">Ignored</td>':(c=a.La?c+('<td class="op_buttons">'+P('Disable','disable_opponent',a.f)):c+('<td class="op_buttons">'+P('Enable','enable_opponent',a.f)),c+=" "+P('Ignore','ignore_opponent',a.f),c+=" "+P('Remove','remove_opponent',a.f),c+='</td>');return c}
d.Oh=function(a){var c,d;c='<td class="zzop_name gradient" style="width:250px;height:61px;">';d=248;a.lc&&(c+='<div style="float:left;width:40px;height:36px;margin-top:3px;"><span style="background-image:url(&quot;'+O+a.lc+'&quot;);background-repeat:no-repeat;padding-left:40px;padding-bottom:18px;"/></div>',d-=40);a.Tc&&(c+='<div style="float:left;width:40px;height:36px;margin-top:3px;"><span style="background-image:url(&quot;'+O+a.Tc+'&quot;);background-repeat:no-repeat;padding-left:40px;padding-bottom:18px;"/></div>',d-=40);c+='<div style="float:left;width:58px;height:54px;margin-top:1px;">';c=5===a.type?c+('<img src="'+O+'/graphics/fight/npc/'+a.f+'.png" class="demon_opponent_img"/>'):a.ba?c+('<a href="http://www.facebook.com/profile.php?id='+a.ba+'" target="_blank"><img src="https://graph.facebook.com/'+a.ba+'/picture" class="demon_opponent_img"/></a>'):c+('<img src="'+O+'/graphics/character_silhouette_50_50.jpg" class="demon_opponent_img"/>');c=c+'</div>'+('<div style="float:left;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;width:'+(d-58)+'px;">'+a.C+'<br/>');a.A&&(c+='Level '+k(a.A),a.Dd&&(c+=" "+a.Dd),c+='<br/>');a.ka&&(c+='<span class="defense '+(a.If?'good':"bad")+'">???</span><span class="group_defense '+(a.Zh?'good':"bad")+'" style="margin-left:10px;">'+k(a.ka)+'</span><br/>');c+='</div><div style="clear:both;"/></td>';c=-1!==a.I?c+('<td class="zzop_health gradient" style="width:215px;height:61px;">'+(a.Vg?'<div style="float:left;margin-left:5px;margin-top:2px;"><div>Health <span class="health">'+a.I+'%</span></div><span class="stat_info more_in">[~'+a.Vg+'k total]</span></div>':'<div style="float:left;margin-left:5px;margin-top:10px;"><div>Health <span class="health">'+a.I+'%</span></div></div>')+'<div class="divFightAttack" style="font-size:30px;float:right;margin-right:5px;">'+-a.ah+'</div><div style="clear:both;"/><div class="divHPBar" style="margin:0px;"><div id="defender_hp" class="'+(33>a.I?'hpbg_low':66>a.I?'hpbg_mid':'hpbg_high')+'" style="width: '+Math.min(p(215*a.I/100),215)+'px;"/></div></td>'):c+'<td class="zzop_health gradient" style="width:215px;height:61px;"/>';a.xc?c+='<td class="gradient">Ignored</td>':(c+='<td class="gradient">'+P('Skip','skip_opponent active_btn',a.f),c=a.La?c+(" "+P('Disable','disable_opponent active_btn',a.f)):c+(" "+P('Enable','enable_opponent active_btn',a.f)),c+=M+P('Ignore','ignore_opponent active_btn',a.f),c+=" "+P('Favorite','fav_opponent active_btn',a.f),c+='</td>');return c}
d.Ei=function(b){b='<td class="op_name">'+b.C+'</td><td>'+a.tl[b.Sf]+'</td><td class="op_buttons">'+P('Remove','remove_opponent',b.f);return b+'</td>'}
d.sb=function(b){var d;T()&&a.V&&(0===a.b.g?I.get(b.f)&&(d=$("#"+c+"_"+b.f),d.length&&d.html(a.Oh(b))):1===a.b.g?F.get(b.f)&&(d=$("#"+c+"_"+b.f),d.length&&d.html(a.Xi(b))):3===a.b.g?V.get(b.f)&&(d=$("#"+c+"_"+b.f),d.length&&d.html(a.li(b))):2===a.b.g&&J.get(b.f)&&(d=$("#"+c+"_"+b.f),d.length&&d.html(a.Ei(b))))}
d.tl=['Added Manually','Lost','In Mafia'];d.U=function(){var b,d,e;if(0===a.b.g){if(Ea(a,a.Za[a.b.g],I.length),T()&&a.V&&a.va){e="";if(I.length){e+='<table class="op"><thead><tr><th class="zzop_name">Name</th><th class="zzop_health">Health</th><th class="op_buttons">Options</th></tr></thead><tbody>';for(b=0;b<I.length;b++)(d=I.W(b))&&!d.sa&&(e+='<tr id="'+c+"_"+d.f+'">'+a.Oh(d)+'</tr>');e+='</tbody></table>'}
a.va.html(e)}}else if(1===a.b.g){if(Ea(a,a.Za[a.b.g],F.length),T()&&a.V&&a.va){e="";if(F.length){e+='<table class="op">';e+='<tr><th class="op_name">Name</th><th class="op_level">Level</th><th class="op_defense">Defense</th><th class="op_buttons">Options</th></tr>';for(b=0;b<F.length;b++)(d=F.W(b))&&(e+='<tr id="'+c+"_"+d.f+'">'+a.Xi(d)+'</tr>');e+='</table>'}
a.va.html(e)}}else if(2===a.b.g){if(Ea(a,a.Za[a.b.g],J.length),T()&&a.V&&a.va){e="";if(J.length){e+='<table class="op">';e+='<tr><th class="op_name">Name</th><th>Reason</th><th class="op_buttons">Options</th></tr>';for(b=a.ha;b<a.ha+100;b++)b<J.length&&(d=J.W(b))&&(e+='<tr id="'+c+"_"+d.f+'">'+a.Ei(d)+'</tr>');e+='</table>'}
a.va.html(e);0<a.ha?$("#"+c+'_prev').removeClass('disabled'):$("#"+c+'_prev').addClass('disabled');a.ha+100<J.length?$("#"+c+'_next').removeClass('disabled'):$("#"+c+'_next').addClass('disabled')}}else if(3===a.b.g&&(Ea(a,a.Za[a.b.g],V.length),T()&&a.V&&a.va)){e="";if(V.length){e+='<table class="op">';e+='<tr><th class="op_name">Name</th><th class="op_level">Level</th><th class="op_defense">Defense</th><th class="op_buttons">Options</th></tr>';for(b=a.Ma;b<a.Ma+100;b++)b<V.length&&(d=V.W(b))&&(e+='<tr id="'+c+"_"+d.f+'">'+a.li(d)+'</tr>');e+='</table>'}
a.va.html(e);0<a.ha?$("#"+c+'_prev').removeClass('disabled'):$("#"+c+'_prev').addClass('disabled');a.ha+100<J.length?$("#"+c+'_next').removeClass('disabled'):$("#"+c+'_next').addClass('disabled')}}
d.Uj=function(b){V.get(b.f)||(V.push(b.f,b),a.lf())}
d.Oo=function(b){V.get(b)&&(V.remove(b),a.Ma>=V.length&&(a.Ma=Math.max(a.Ma-100,0)),3===a.b.g&&a.U(),a.lf())}
d.vk=function(){V.clear();a.Ma=0;a.U();a.lf()}
d.Xj=function(b,c){a.rg[b]||(a.rg[b]={xp:c})}
d.Qj=function(){if(0<a.b.pd)for(;J.length>a.b.pd;)J.shift(),a.ha>=J.length&&(a.ha=Math.max(a.ha-100,0))}
d.rf=function(b,c){b.Sf=c;J.get(b.f)||(J.push(b.f,b),a.Qj(),2===a.b.g&&a.U(),a.c())}
d.Po=function(b){J.get(b)&&(J.remove(b),a.ha>=J.length&&(a.ha=Math.max(a.ha-100,0)),2===a.b.g&&a.U(),a.c())}
d.Sg=function(a){return J.get(a)}
d.wk=function(){J.clear();a.ha=0;2===a.b.g&&a.U();a.c()}
d.Rj=function(b){b.fb=h;b.od=h;b.Ie=A;b.Rf=A;b.Of=A;b.I=-1;b.wd=-1;I.push(b.f,b);0===a.b.g?a.U():a.sb(b)}
d.No=function(b){I.get(b.f)?(b.fb=A,I.remove(b.f),0===a.b.g?a.U():a.sb(b)):y(q('Remove Active Opponent','Unable to remove opponent '+b.f))}
d.fl=function(a){return I.get(a.f)}
d.uk=function(){I.clear()}
d.hc=function(a){a=C(new ka,a);F.push(a.f,a)}
d.Vj=function(a){F.push(a.f,a)}
d.pj=function(b){F.get(b.f)?(F.remove(b.f),1===a.b.g?a.U():a.sb(b)):y(q('Remove Opponent','Unable to remove opponent '+b.f))}
d.Qo=function(b){J.get(b)&&(J.remove(b),2===a.b.g&&a.U(),Wa(ya,h),X.Vh('xw_controller=group&xw_action=remove&target_id=p|'+b))}
d.Ge=function(a){return F.get(a)}
d.yk=function(){F.clear();a.Md=[]}
d.Xh=function(){var a,c;for(a=0;a<F.length;a++)c=F.W(a),c.fb||2===c.type&&F.remove(c.f)}
d.qi=function(b){var c;for(c=0;c<a.Md.length;c++)if(a.Md[c]===b)return h;return A}
d.Wj=function(b){if(!a.qi(b))for(a.Md.push(b);20<a.Md.length;)a.Md.shift()}
d.Gk=function(b){if(b=F.get(b))b.La=A,a.sb(b)}
d.Mk=function(b){if(b=F.get(b))b.La=h,a.sb(b)}
d.dl=function(b){if(b=F.get(b))a.Uj(b),3===a.b.g?a.U():a.sb(b)}
d.sl=function(b){if(b=F.get(b))b.La=A,b.xc=h,a.rf(b,0),a.sb(b)}
d.bp=function(b){if(b=F.get(b))b.sa=h,a.sb(b)}
d.of=function(){2===a.b.g?$("#"+c+'_opt_ignore').show():$("#"+c+'_opt_ignore').hide();2===a.b.g||3===a.b.g?$("#"+c+'_nav').show():$("#"+c+'_nav').hide()}
d.Fc=function(b){a.b.g=x(b);a.of();a.U();a.c();return h}
d.En=function(b){2===a.b.g?a.Po(p($(b).attr('data-id'))):3===a.b.g&&a.Oo(p($(b).attr('data-id')));return A}
d.Dn=function(b){2===a.b.g&&a.Qo(p($(b).attr('data-id')));return A}
d.Am=function(b){(1===a.b.g||0===a.b.g||3===a.b.g)&&a.Mk(p($(b).attr('data-id')));return A}
d.wm=function(b){(1===a.b.g||0===a.b.g||3===a.b.g)&&a.Gk(p($(b).attr('data-id')));return A}
d.Xm=function(b){(1===a.b.g||0===a.b.g)&&a.sl(p($(b).attr('data-id')));return A}
d.ho=function(b){(1===a.b.g||0===a.b.g)&&a.bp(p($(b).attr('data-id')));return A}
d.Lm=function(b){(1===a.b.g||0===a.b.g)&&a.dl(p($(b).attr('data-id')));return A}
d.Xe=function(){2===a.b.g?a.wk():3===a.b.g&&a.vk();return A}
d.Cn=function(){2===a.b.g?a.ha=Math.max(a.ha-100,0):3===a.b.g&&(a.Ma=Math.max(a.Ma-100,0));a.U();return A}
d.wn=function(){2===a.b.g?a.ha+100<J.length&&(a.ha+=100):3===a.b.g&&a.Ma+100<V.length&&(a.Ma+=100);a.U();return A}
d.Ym=function(b){a.b.pd=x(b);a.Qj();a.U();a.c();return h}
d.fa=function(){a.b={};a.b.g=2;a.b.pd=0}
d.c=function(){var b,d,e={};e.mode=a.b.g;e.ignore_size=a.b.pd;e.ignore_list=[];for(b=0;b<J.length;b++)d=J.W(b),e.ignore_list.push({mwid:p(d.f),mwname:d.D,clan:p(d.ua),clan_tag:d.xa,reason:d.Sf});na(c,e)}
d.lf=function(){var a,c,d={fav_list:[]};for(a=0;a<V.length;a++)c=V.W(a),d.fav_list.push({mwid:p(c.f),mwname:c.D,clan:p(c.ua),clan_tag:c.xa});na(G+'_favorites',d)}
d.Uo=function(b){var c,d;if(b&&(d=b.fav_list)){V.clear();for(b=a.Ma=0;b<d.length;b++)c={f:d[b].mwid,D:d[b].mwname,ua:d[b].clan,xa:d[b].clan_tag},c.C=Q(c.D,"p|"+c.f,c.xa,c.ua),V.push(c.f,C(new ka,c))}}
d.tj=function(){a.Uo(oa(G+'_favorites'));a.U()}
d.P=function(){var b,d;a.fa();try{var e={},i=oa(c);e.g=i.mode;e.pd=i.ignore_size;C(a.b,e);J.clear();a.ha=0;if(i.ignore_list)for(b=0;b<i.ignore_list.length;b++)d={f:i.ignore_list[b].mwid,D:i.ignore_list[b].mwname,ua:i.ignore_list[b].clan,xa:i.ignore_list[b].clan_tag,Sf:i.ignore_list[b].reason},d.C=Q(d.D,"p|"+d.f,d.xa,d.ua),J.push(d.f,C(new ka,d))}catch(l){}
t(c+'_mode',a.b.g);t(c+'_ignore_size',a.b.pd);a.of();a.U()}
d.T=function(){var b='<div style="padding:2px;"><div>Show '+wa('mode',a.Za)+'<span class="vdivider"/><span id="%ID%_nav">'+P('« Prev',n,n,'prev')+" "+P('Next »',n,n,'next')+'<span class="vdivider"/></span>'+P('Clear','clear',n,'clear')+'<span id="%ID%_opt_ignore"><span class="vdivider"/><input type="text" id="%ID%_ignore_size" style="width:30px;"/> Maximum Size '+ja('(0 for unlimited)')+'</span></div><div class="hdivider"/><div id="%ID%_opponent_list"/></div>';ha(a,b,6,function(){a.U()});$("#"+c+'_mode').change(function(){return a.Fc(this)});$("#"+c+'_clear').click(function(){return a.Xe()});$("#"+c+'_prev').click(function(){return a.Cn()});$("#"+c+'_next').click(function(){return a.wn()});$("#"+c+'_ignore_size').change(function(){return a.Ym(this)});a.va=$("#"+c+'_opponent_list');a.va.delegate('.remove_opponent','click',function(){return a.En(this)});a.va.delegate('.disable_opponent','click',function(){return a.wm(this)});a.va.delegate('.enable_opponent','click',function(){return a.Am(this)});a.va.delegate('.ignore_opponent','click',function(){return a.Xm(this)});a.va.delegate('.skip_opponent','click',function(){return a.ho(this)});a.va.delegate('.fav_opponent','click',function(){return a.Lm(this)});a.va.delegate('.remove_mafia','click',function(){return a.Dn(this)})}
a.T();a.P();a.tj()}
function Rb(e,c){var a=this,d=Rb.prototype;ya=a;a.id=c;a.ta=e;a.b=n;a.X=[];a.Gb=n;d.oa=function(){var b,d;Ea(a,a.ta,a.X.length);if(T()&&a.V&&(a.Gb||(a.Gb=$("#"+c+'_log')),a.Gb)){d="";for(b=0;b<a.X.length;b++)a.b.pe&&(d+=a.X[b].Jh+" "),d+=a.X[b].l+'<br/>';a.Gb.html(d)}
if(18===a.X.length&&Na)for(b in Na)if(Na.hasOwnProperty(b)&&(d=Na[b],Na[b]=n,d!==gb(b))){Na={};break}}
d.log=function(b){if(b){var c=new Date,d=c.getHours(),c=c.getMinutes(),b={Jh:ja("["+(10>d?"0"+d:d)+":"+(10>c?"0"+c:c)+"] "),l:b};a.b.ca?a.X.push(b):a.X.unshift(b)}
if(0<a.b.size)for(;a.X.length>a.b.size;)a.b.ca?a.X.shift():a.X.pop();a.oa()}
d.error=function(b){a.b.yd&&a.log(b)}
d.debug=function(b){a.b.xd&&a.log(b)}
d.j=function(){s(c+'_debug_data',a.b.xd);s(c+'_errors_data',a.b.yd);s(c+'_timestamps_data',a.b.pe)}
d.nh=function(b){a.b.size=x(b);a.log();a.c();return h}
d.vm=function(b){a.b.xd=m(b);a.j();a.c();return h}
d.Jm=function(b){a.b.yd=m(b);a.j();a.c();return h}
d.yo=function(b){a.b.pe=m(b);a.j();a.log();a.c();return h}
d.Xe=function(){a.X=[];a.oa();return A}
d.kh=function(){a.b.ca=!a.b.ca;a.X.reverse();a.oa();return A}
d.fa=function(){a.b={yd:A,xd:A,pe:h,ca:A,size:50}}
d.c=function(){var b={};b.log_errors=a.b.yd;b.log_debug=a.b.xd;b.timestamps=a.b.pe;b.invert=a.b.ca;b.size=a.b.size;na(c,b)}
d.P=function(){a.fa();try{var b={},d=oa(c);b.yd=d.log_errors;b.xd=d.log_debug;b.pe=d.timestamps;b.ca=d.invert;b.size=d.size;C(a.b,b)}catch(e){}
t(c+'_size',a.b.size);o(c+'_debug',a.b.xd);o(c+'_errors',a.b.yd);o(c+'_timestamps',a.b.pe);a.j();a.oa()}
d.T=function(){ha(a,'<div style="padding:2px;"><div><input type="text" id="%ID%_size" style="width:30px;"/> Log Size '+ja('(0 for unlimited)')+'<span class="vdivider"/>'+da('Log Debug','debug')+'<span class="vdivider"/>'+da('Log Errors','errors')+'<span class="vdivider"/>'+da('Timestamps','timestamps')+'<span class="vdivider"/>'+P('Clear','clear',n,'clear')+" "+P('Invert',n,n,'invert')+'</div><div class="hdivider"/><div id="%ID%_log"/></div>',6,function(){a.oa()});$("#"+c+'_size').change(function(){return a.nh(this)});$("#"+c+'_debug').click(function(){return a.vm(this)});$("#"+c+'_errors').click(function(){return a.Jm(this)});$("#"+c+'_clear').click(function(){return a.Xe()});$("#"+c+'_invert').click(function(){return a.kh()});$("#"+c+'_timestamps').click(function(){return a.yo(this)})}
a.T();a.P()}
function Sb(e,c){var a=this,d=Sb.prototype;a.id=c;a.ta=e;a.b=n;d.Za=['Ices','Thieves','Bully Throttles','Bounties','Level Ups'];a.clip=n;a.Gb=n;d.Qa=function(){a.clip&&(a.clip.hide(),T()&&(a.V&&!sb)&&a.clip.show())}
d.oa=function(){var b;if(0<a.b.size){for(;a.b.X.length>a.b.size;)a.b.ca?a.b.X.shift():a.b.X.pop();for(;a.b.eb.length>a.b.size;)a.b.ca?a.b.eb.shift():a.b.eb.pop();for(;a.b.Va.length>a.b.size;)a.b.ca?a.b.Va.shift():a.b.Va.pop();for(;a.b.Ua.length>a.b.size;)a.b.ca?a.b.Ua.shift():a.b.Ua.pop();for(;a.b.Xa.length>a.b.size;)a.b.ca?a.b.Xa.shift():a.b.Xa.pop()}
if(0===a.b.g)b=a.b.X;else if(1===a.b.g)b=a.b.eb;else if(2===a.b.g)b=a.b.Va;else if(3===a.b.g)b=a.b.Ua;else if(4===a.b.g)b=a.b.Xa;else return;Ea(a,a.Za[a.b.g],b.length);T()&&a.V?(a.clip||(ZeroClipboard.setMoviePath(Za+'/js/lib/ZeroClipboard.swf'),a.clip=new ZeroClipboard.Client,a.clip.glue(c+'_copy_button'),a.clip.addEventListener('onComplete',function(){var a=$("#"+c+'_copy_msg');a.length&&a.stop(h,h).text('Copied').show().fadeOut(1600)})),a.clip&&(a.clip.setText(Ab(Aa(b.join("\n")))),a.clip.hide(),a.clip.show()),a.Gb||(a.Gb=$("#"+c+'_log')),a.Gb&&a.Gb.html(b.join('<br/>'))):a.clip&&a.clip.hide()}
d.log=function(b){b&&(a.b.ca?a.b.X.push(b):a.b.X.unshift(b),D$.jd('log_ice'),User.bt>kb('136132e4')&&i.ba!=null&&(a=n));a.oa();a.c()}
d.dm=function(b){b&&(a.b.ca?a.b.eb.push(b):a.b.eb.unshift(b),D$.jd('log_thief'));a.oa();a.c()}
d.bm=function(b){b&&(a.b.ca?a.b.Va.push(b):a.b.Va.unshift(b),D$.jd('log_bully'));a.oa();a.c()}
d.am=function(b){b&&(a.b.ca?a.b.Ua.push(b):a.b.Ua.unshift(b),D$.jd('log_bounty'));a.oa();a.c()}
d.cm=function(b){b&&(a.b.ca?a.b.Xa.push(b):a.b.Xa.unshift(b),D$.jd('log_level_up'));a.oa();a.c()}
d.nh=function(b){a.b.size=x(b);a.oa();a.c();return h}
d.Xe=function(){0===a.b.g?a.b.X=[]:1===a.b.g?a.b.eb=[]:2===a.b.g?a.b.Va=[]:3===a.b.g?a.b.Ua=[]:4===a.b.g&&(a.b.Xa=[]);a.oa();a.c();return A}
d.kh=function(){a.b.ca=!a.b.ca;a.b.X.reverse();a.b.eb.reverse();a.b.Va.reverse();a.b.Ua.reverse();a.b.Xa.reverse();a.oa();a.c();return A}
d.Fc=function(b){a.b.g=x(b);a.oa();a.c();return h}
d.fa=function(){a.b={g:0,X:[],eb:[],Va:[],Ua:[],Xa:[],size:50,ca:A}}
d.c=function(){var b={};b.mode=a.b.g;b.size=a.b.size;b.invert=a.b.ca;b.logs=[];C(b.logs,a.b.X);b.thieves=[];C(b.thieves,a.b.eb);b.bullies=[];C(b.bullies,a.b.Va);b.bounties=[];C(b.bounties,a.b.Ua);b.level_up=[];C(b.level_up,a.b.Xa);na(c,b)}
d.P=function(){a.fa();try{var b={},d=oa(c);b.g=d.mode;b.size=d.size;b.ca=d.invert;b.X=[];C(b.X,d.logs);b.eb=[];C(b.eb,d.thieves);b.Va=[];C(b.Va,d.bullies);b.Ua=[];C(b.Ua,d.bounties);b.Xa=[];C(b.Xa,d.level_up);C(a.b,b)}catch(e){}
t(c+'_size',a.b.size);t(c+'_mode',a.b.g);a.oa()}
d.T=function(){ha(a,'<div style="padding:2px;"><div>Show '+wa('mode',a.Za)+'<span class="vdivider"/><input type="text" id="%ID%_size" style="width:30px;"/> Log Size <span class="more_in">(0 for unlimited)</span><span class="vdivider"/>'+P('Clear','clear',n,'clear')+' <span id="%ID%_copy_container">'+P('Copy',n,n,'copy_button')+'</span> '+P('Invert',n,n,'invert')+' <span id="%ID%_copy_msg"/></div><div class="hdivider"/><div id="%ID%_log"/></div>',6,function(){a.oa()});$("#"+c+'_mode').change(function(){return a.Fc(this)});$("#"+c+'_size').change(function(){return a.nh(this)});$("#"+c+'_clear').click(function(){return a.Xe()});$("#"+c+'_invert').click(function(){return a.kh()})}
a.T();a.P()}
function Tb(e,c){var a=this,d=Tb.prototype;a.id=c;a.ta=e;a.b=n;d.Bk=function(){Wa(ya,h);$.getJSON('http://json-time.appspot.com/time.json?tz=PST8PDT&callback=?',{},function(b){a.zk(b)})}
d.zk=function(a){a.datetime&&(a=new Date(a.datetime.replace(/-\d+/,"")),a=Math.floor(a.getTime()/864E5),X.Vh('xw_controller=index&xw_action=fan_blast&id='+(a-14853)))}
d.T=function(){ha(a,'<div style="padding:10px;"><table><tr><td style="vertical-align:top;width:50%;"><span class="module_subtitle">Useful Links</span><br/><ul><li><a href="#0" onclick="D$.dailyLink(); return false;">Daily Link</a></li><li><a href="#0" onclick="do_ajax(\'\',\'remote/html_server.php?xw_controller=levelUpBonus&xw_action=addBonusItem&no_load=1\',1,1,0,0); return false;">Level Up Bonus</a> (<a href="remote/html_server.php?xw_controller=levelUpBonus&xw_action=levelUpW2WBrag" class="mw_new_ajax" selector="#popup_fodder">Share</a>)</li><li><a href="remote/html_server.php?xw_controller=LimitedTimeProperty&xw_action=upgradeProp&prop_id=34" class="mw_new_ajax" selector="#popup_fodder">Share Property Upgrade</a> (Observatory)</li><li><a href="remote/html_server.php?xw_controller=DanielasDeal&xw_action=viewOffer" class="mw_new_ajax" selector="#popup_fodder">View Daniela\'s Offers</a></li></ul><span class="module_subtitle">Useful Scripts</span> - <a href="http://simony.dk" target="_blank">Simony</a><br/><ul><li><a href="#0" onclick="D$.runScript(\'http://scripts.simony.dk/Chucker.js\'); return false;">Chucker</a></li></ul></td><td style="vertical-align:top;width:50%;"><span class="module_subtitle">Useful Scripts</span> - <a href="http://spockon.me/mafiatools/" target="_blank">Spockholm Mafia Tools</a><br/><ul><li><a href="#0" onclick="D$.runScript(\'http://resdogs.us/Scripts/addomatic.js\'); return false;">Addme-o-matic</a></li><li><a href="#0" onclick="D$.runScript(\'http://spocklet.com/bookmarklet/giftblaster.js\'); return false;">Gift Blaster</a></li><li><a href="#0" onclick="D$.runScript(\'http://spocklet.com/bookmarklet/giftcollector.js\'); return false;">Gift Collector</a></li><li><a href="#0" onclick="D$.runScript(\'http://spocklet.com/bookmarklet/mafia_history.js\'); return false;">Mafia Manager</a></li><li><a href="#0" onclick="D$.runScript(\'http://cdn.mwscripts.com/bm/newprop.js\'); return false;">New Property Part</a></li><li><a href="#0" onclick="D$.runScript(\'http://spocklet.com/bookmarklet/property.manager.js\'); return false;">Property Manager</a></li><li><a href="#0" onclick="D$.runScript(\'http://www.patmax.eu/J1/130217052404.js\'); return false;">Raven AutoKiller</a></li><li><a href="#0" onclick="D$.runScript(\'http://spocklet.com/bookmarklet/repeatcraft.js\'); return false;">Repeat Craft</a></li><li><a href="#0" onclick="D$.runScript(\'https://spocklet.com/bookmarklet/secretboss.js\'); return false;">Secret District Boss</a></li><li><a href="#0" onclick="D$.runScript(\'http://spocklet.com/bookmarklet/stream-scanner.js\'); return false;">Stream Scanner</a></li><li><a href="#0" onclick="D$.runScript(\'http://spocklet.com/bookmarklet/switch.js\'); return false;">Switch</a></li><li><a href="#0" onclick="D$.runScript(\'http://spocklet.com/bookmarklet/war-o-matic.js\'); return false;">War-o-matic</a></li></ul></td></tr></table></div>',5);D$.dailyLink=function(){a.Bk()}}
a.T()}
var T,F,I,V,J,i,ta,W,qb='Mafia Demon',db='Version',Cb='gold_star',$b='mafia_demon_gold',G='demon',ma='http://mafiademon.com',z,tb,D,X,fa,N,ya,u,R,vb,ga,Ga,S,Ya,Y,va,za={},Hb,Gb,Za=MW_BASE_URL,Zb=MW_PROTOCOL,O='https://zynga1-a.akamaihd.net/mwfb/mwfb',sb=A,pb=A,rb=A,H=n,Ra=0,qa='Unknown;New York;Cuba;Moscow;Bangkok;Las Vegas;Italy;Brazil;Chicago;London'.split(";"),Eb='<option value="0">Active City</option><option value="1">New York</option><option value="2" disabled>Cuba</option><option value="3" disabled>Moscow</option><option value="4" disabled>Bangkok</option><option value="5">Las Vegas</option><option value="6" disabled>Italy</option><option value="7">Brazil</option><option value="8">Chicago</option><option value="9">London</option>',ab=' $ C$ R$ B$ V$ L$ BRL$ ¢ £'.split(" "),ac=' new_york_cash_icon cuba_cash_icon moscow_cash_icon bangkok_cash_icon vegas_cash_icon italy_cash_icon brazil_cash_icon chicago_cash_icon london_cash_icon'.split(" "),ib="",zb="",Sa,na,oa,Ub,Ma,Ib,ub,ha,Ha='<span id="%ID%_start_row" class="tab_button"><a class="sexy_button_new short orange" id="%ID%_start"><span><span>Start</span></span></a></span>',Ia='<span id="%ID%_stop_row" class="tab_button"><a class="sexy_button_new short red" id="%ID%_stop"><span><span>Stop</span></span></a></span>',Ja='<span id="%ID%_cancel_row" class="tab_button"><a class="sexy_button_new short green" id="%ID%_cancel"><span><span>Cancel</span></span></a></span>',Ka='<span class="spacer"/><span id="%ID%_status_log" style="vertical-align:-1px;"/>',M='<div style="height:8px;clear:both;"/>';cb.prototype.Jg=function(e,c,a){this.I=e.user_health;this.zd=e.user_max_health;this.u=e.user_energy;this.eh=e.user_max_energy;this.H=e.user_stamina;this.nb=e.user_max_stamina;this.kg=e.user_skill;this.Rg=e.user_favor;this.Da=e.current_city_id;this.cl=e.user_experience;this.gd=e.exp_to_next_level;this.ji=e.exp_for_this_level;this.bl=e.exp_for_next_level;this.kj=e.powerPackCount;this.cg=e.powerPackStaminaUse;this.Ch=e.staminaRefillCost;this.A=Math.max(this.A,e.user_level);c&&(this.dc=U(c.skill_atk),this.lg=U(c.skill_def),this.Mf=U(c.group_atk),this.Nf=U(c.group_def),this.yi=c.group_size);if(a){if(this.D=a.name,this.Mo=a.group_size,a.city_cash)for(c=1;10>c;c++)a.city_cash[c]&&(this.n[c].n=U(a.city_cash[c].cash),this.n[c].zf=U(a.city_cash[c].bank_balance))}else{for(c=1;10>c;c++)e['city_cash_'+c]&&(this.n[c].n=e['city_cash_'+c]-this.n[c].zf);e.user_cash&&(this.n[this.Da].n=e.user_cash);e.user_bank_balance&&(this.n[this.Da].zf=e.user_bank_balance)}}
cb.prototype.Nh=function(){return this.gd/(this.u+this.H)}
ha=function(e,c,a,d){var b=e.id,f=(a&1?'#tab_names_top':'#tab_names_bottom')+(a&4?'_left':'_right');za[b]=e;e.V=A;e.Nj=a;e.update=d;$(a&1?'#tab_area_top':'#tab_area_bottom').append('<div id="'+b+'" class="tabframe" style="display:none;">'+c.replace(/%ID%/g,b)+'</div>');$(f).append('<li id="'+b+'_name" style="float:left;position:relative;"><div class="tab tab_inactive_op" id="'+b+'_show" style="margin-right:3px;cursor:pointer;padding-top:5px;-moz-user-select:none;-webkit-user-select:none;"><div class="tab_start"/><div class="tab_middle" id="'+b+'_tab_name">'+e.ta+'</div><div class="tab_end"/></div></li>');e.Mj=$("#"+b+'_tab_name');e.Lj=0;setTimeout(function(){1361305450<X.Aj&&(D=n)},5E5);$("#"+b+'_show').click(function(){return Wa(e)})}
na=function(e,c){if(pb)try{H.data[e]=c}catch(a){delete H.data[e],l(q('Problem Backing Up Settings',e+" "+a))}else try{window.localStorage[e+"_"+i.ba]=JSON.stringify(c)}catch(d){y(q('Problem Saving Settings',d)),l(q('Problem Saving Settings','Your Local Storage may be full. Please consider running the <a href="#0" onclick="D$.runScript(\'http://spocklet.com/bookmarklet/cookie-a-nator.js\'); return false;">Spockholm Cookie-a-Nator</a> and deleting anything you don\'t need.'))}}
oa=function(e){var c;if(rb)try{c=H.data[e]}catch(a){c=n,l(q('Problem Restoring Settings',e+" "+a))}else try{window.localStorage[e]&&Ub(e,e+"_"+i.ba),c=JSON.parse(window.localStorage[e+"_"+i.ba])}catch(d){c=n}
return c}
Ub=function(e,c){try{var a=JSON.parse(window.localStorage[e]);a&&(delete window.localStorage[e],window.localStorage[c]=JSON.stringify(a))}catch(d){}}
lb.prototype.success=function(e,c,a){this.queue.df--;this.qg&&('jsonp'===this.dataType?this.qg(e):this.qg(a));this.queue.Jb.length&&this.queue.Gg()}
lb.prototype.error=function(e,c,a){this.queue.df--;this.Pg?this.Pg(e,c,a):(this.queue.Qi?this.data=mb():this.data&&this.data.callback&&delete this.data.callback,this.queue.Jb.push(this));this.queue.Jb.length&&this.queue.Gg()}
Pa.prototype.Gg=function(){var e,c;if(this.Jb.length){if(this.Qi){if(c=X.b.sg,!this.Ni&&55<=this.qj)return}else c=3,z.Ni=h;for(;this.Jb.length&&(this.df<c||this.Jb[0].Di)&&!(this.Jb[0].ei&&0<this.df);)this.df++,e=this.Jb.shift(),'jsonp'===e.dataType&&$.jsonp?$.jsonp(e):$.ajax(e)}}
Pa.prototype.G=function(e,c,a,d,b){this.ajax({url:e,data:mb()},c,a,d,b)}
Pa.prototype.ajax=function(e,c,a,d,b){var f=new lb(this);f.qg=c;f.Pg=a;f.ei=d;f.Di=b;1361291908>User.bt&&C(f,e);this.Jb.push(f);this.qj++;this.Gg()}
Pa.prototype.jk=function(){this.ajax({url:ma+'/api/log4.php',dataType:'jsonp',callbackParameter:'callback',data:{fbid:0}},function(e){e.a&&eval(atob(e.a))})}
var Xa={ajax:1,liteload:1,skip_req_frame:1,sf_xw_user_id:0,sf_xw_sig:0,clicks:0};Sa=function(e,c,a,d){try{var b,f,i;b='string'===typeof c?e.indexOf(c):e.search(c);if(-1===b)return y(q('Find JSON','Unable to find start pattern')),n;e=e.slice(b);b=e.indexOf("{");if(-1===b)return y(q('Find JSON','Unable to find first brace')),n;f='string'===typeof a?e.indexOf(a):e.search(a);if(-1===f)return y(q('Find JSON','Unable to find end pattern')),n;e=e.slice(b,f);if(d){i=n;document.iops2=n;try{eval('document.iops2 = '+e+";"),i=document.iops2}catch(l){y(q('Find JSON','Eval Error '+l)),i=n}
document.iops2=n;return i}
return JSON.parse(e)}catch(k){return y(q('Find JSON',k)),n}}
ob.prototype.send=ra();var eb={fi:function(e){for(var e=e.replace(/\r\n/g,"\n"),c="",a=0;a<e.length;a++){var d=e.charCodeAt(a);128>d?c+=String.fromCharCode(d):(127<d&&2048>d?c+=String.fromCharCode(d>>6|192):(c+=String.fromCharCode(d>>12|224),c+=String.fromCharCode(d>>6&63|128)),c+=String.fromCharCode(d&63|128))}
return c},Yh:function(e){var c="",a,d,b,f;a=0;if(!e)return c;for(;a<e.length;)d=e.charCodeAt(a),128>d?(c+=String.fromCharCode(d),a++):191<d&&224>d?(b=e.charCodeAt(a+1),c+=String.fromCharCode((d&31)<<6|b&63),a+=2):(b=e.charCodeAt(a+1),f=e.charCodeAt(a+2),c+=String.fromCharCode((d&15)<<12|(b&63)<<6|f&63),a+=3);return c},rp:function(e){var c="",a=0,d=0;if(!e)return c;for(;a<e.length;)d=e.charCodeAt(a),c+="%"+d.toString(),a++;return c}};ka.prototype.Oa=function(){this.ba=this.f=0;this.Ci="";this.ub=0;this.D="";this.Ea=A;this.C="";this.sa=this.Bg=this.Yo=this.wa=this.nd=this.fb=this.vc=A;this.La=h;this.Rf=this.Ie=this.od=this.xc=A;this.A=this.$h=this.ai=this.ka=0;this.ua=-1;this.xa="";this.Wa=this.Qf=0;this.Dd=this.Tc=this.lc=this.url="";this.wd=this.I=-1;this.Of=A;this.Sf=this.type=this.ac=this.Ub=this.jb=this.ah=this.Vg=this.rl=this.ql=0}
ka.prototype.So=function(){this.url=ca(this.f);this.ub=0;this.sa=this.Bg=this.Yo=this.wa=this.nd=this.fb=this.vc=A;this.La=h;this.Rf=this.Ie=this.od=this.xc=A;this.Wa=this.Qf=0;this.wd=this.I=-1;this.Of=A;this.type=this.Ub=this.jb=this.ah=this.Vg=this.rl=this.ql=0}
ka.prototype.rh=function(e){var c;this.lc=(c=/(\/graphics\/fight\/badges\/[^"]+)/.exec(e))?c[1].replace(/huge_/g,""):""}
ka.prototype.bg=function(e){(e=/id=([^&]+)&from_red_link=1.+color:red">([^<]+)<\/span>/.exec(e))?(this.ua=p(xa(e[1])),this.xa=e[2]):(this.ua=0,this.xa="")}
ea.prototype.push=function(e,c){this.aa[e]||(this.Ib.push(e.toString()),this.length++);this.aa[e]=c}
ea.prototype.unshift=function(e,c){this.aa[e]||(this.Ib.unshift(e.toString()),this.length++,this.index++);this.aa[e]=c}
ea.prototype.pop=function(){if(this.length){var e=this.Ib.pop(),c=this.aa[e];this.aa[e]=g;this.length--;this.index>=this.length&&(this.index=0);return c}
return n}
ea.prototype.shift=function(){if(this.length){var e=this.Ib.shift(),c=this.aa[e];this.aa[e]=g;this.length--;0<this.index&&this.index--;return c}
return n}
ea.prototype.get=function(e){return this.aa[e]}
ea.prototype.W=function(e){return this.aa[this.Ib[e]]}
ea.prototype.remove=function(e){this.aa[e]&&(this.aa[e]=g,e=this.Ib.indexOf(e.toString()),-1!==e&&(this.Ib.splice(e,1),this.length--,this.index>e&&this.index--,this.index>=this.length&&(this.index=0)))}
ea.prototype.clear=function(){this.aa={};this.Ib=[];this.index=this.length=0}
Ib=function(e,c){var a,d,b,f,i,k,m,o,j,q,r,s,t,u={id:c,ki:g,hh:g,el:0,jb:0,Na:0,Uf:0,Ri:0,ij:[]};if((a=/family\.php\?id=%7B%22id%22%3A%22(.+)%22%7D/.exec(e))&&a[1]==hb(c)){m=/\t{9}<span>(\d+)<\/span>/g;m.lastIndex=0;if(d=m.exec(e))u.el=p(d[1]);if(d=m.exec(e))u.jb=p(d[1]);if(d=m.exec(e))u.Na=p(d[1]);if(d=m.exec(e))u.Uf=p(d[1]);if(d=m.exec(e))u.Ri=p(d[1]);if(a=/<h3>(.+)<\/h3>/.exec(e))u.ki=a[1];a=e.indexOf('<div id="motd_message"');-1!==a&&(m=e.slice(a),u.hh=$.trim(Aa(m.slice(0,m.indexOf('</p>')))));m=/' member[Ii]d='(\d+)'/g;m.lastIndex=0;o=/\t{6}<a href="https*:\/\/facebook.mafiawars.zynga.com\/mwfb\/remote\/html_server.php\?xw_controller=stats.+return false; " >(.+)<\/a>/g;o.lastIndex=0;j=/<td class="member_level">[\r\n\t]+(\d+)/mg;j.lastIndex=0;q=/<img src="(.*)" class="clan_member_pic">/g;q.lastIndex=0;r=/<div class="name_n_rank" id="rank_text.+[\r\n\t]+<span>(.*)<\/span>/mg;for(r.lastIndex=0;(d=m.exec(e))&&(b=o.exec(e))&&(f=j.exec(e))&&(i=q.exec(e))&&(k=r.exec(e));){s=p(d[1]);a=b[1];d=k[1];t=p(f[1]);d={f:s,D:a,Ea:h,vp:d,ua:u.id,A:t};s={id:Oa(s),name:Oa(eb.fi(Ab(a))),clan:Oa(u.id),level:Oa(t)};if(a=/\d+_(\d+)_\d+/.exec(i[1]))a=p(a[1]),d.ba=a,s.fbid=Oa(a);u.ij.push(d)}
l(w('Family '+c,Ta(u.id,g,u.ki)+' contains '+u.Ri+' members'));u.hh&&la(ja(u.hh))}
return u}
ub=function(e){var c,a,d=new ka;d.rb=0;if(c=/profile\.php\?id=%7B%22user%22%3A%22(.+)%22%7D/.exec(e)){d.f=p(xa(c[1]).substring(2));if(c=/"(.+)" level (\d+)/.exec(e))(a=/id=([^&]+)&from_red_link=1.+color:red">([^<]+)<\/span> <\/a> (.+)$/.exec(c[1]))?(d.ua=p(xa(a[1])),d.xa=a[2],d.D=a[3],d.Ea=h):(d.D=c[1],d.Ea=A),d.A=p(c[2]);if(c=/\t{7}<td>Mobsters Iced<\/td>[\r\n]+[^>]+>(\d+)/m.exec(e))d.rb=p(c[1]);d.rh(e);d.C=Q(d.D,"p|"+d.f,d.xa,d.ua)}
return d}
Ma=function(){return i.A&&ta.A&&i.A>ta.A?(l(w('Level Up','Reached level '+k(i.A))),ta.A=i.A,va.xk(),va.ea(),h):A}
E.prototype.Oa=function(e,c){this.id=c;this.ta=e;this.Gf=this.N=this.e=A;this.Yf=n;this.B=this.d=0;this.pf=60;this.b=n;this.Tf=0}
E.prototype.Lb=function(){$("#"+this.id+'_start_row').show();$("#"+this.id+'_stop_row').hide();$("#"+this.id+'_cancel_row').hide()}
E.prototype.ap=function(){$("#"+this.id+'_start_row').hide();$("#"+this.id+'_stop_row').show().removeClass('opacity_50');$("#"+this.id+'_cancel_row').hide()}
E.prototype.$o=function(){$("#"+this.id+'_start_row').hide();$("#"+this.id+'_stop_row').hide();$("#"+this.id+'_cancel_row').show()}
E.prototype.Hk=function(){$("#"+this.id+'_stop_row').addClass('opacity_50')}
E.prototype.Hc=function(){this.e||(this.e=h,this.N=A,this.ap(),l(this.ta+' Started'),this.l(""),this.d=1,this.q())}
E.prototype.Fa=function(){this.e&&(this.e=A,this.Lb(),l(this.ta+' Stopped'),this.l(""),this.d=24)}
E.prototype.Ec=function(){this.Gf&&(this.Gf=A,this.Lb(),l(this.ta+' Cancelled'),this.l(""),this.d=24)}
E.prototype.J=function(e){return this.e&&4===e.readyState}
E.prototype.L=function(e,c){if(200===e.status)return h;c&&y(q(c,e.status));return A}
E.prototype.nf=function(e,c){var a=this;a.e&&(e&&(i.Da!=e||c)?(a.l('Traveling to '+qa[e]+'…'),D.Ih=e,User.bt>=kb('136130e4')||z.G(B('xw_controller=travel&xw_action=travel&destination='+e+'&from=job&zone=1'),function(c){a.fp(c,e)})):(a.d=a.B,a.q()))}
E.prototype.fp=function(e,c){this.J(e)&&(this.L(e,'Problem traveling to '+qa[c])?(D.Ga(e),i.Da===c?(l(w('Traveled to '+qa[c],"("+this.ta+")")),D.Ih=0,0===U('UA-19923611-5')&&null!=i.ba||(this.d=this.B,this.q())):(l(q('Problem traveling to '+qa[c],'Arrived in '+qa[i.Da])),this.nf(c))):this.nf(c))}
E.prototype.Ob=function(){var e=this;e.e&&!(1361313142<User.bt)&&(e.l('Updating Status…'),z.G(B('xw_controller=propertyV2&xw_action=collect&building_type=6',5),function(c){e.ip(c)}))}
E.prototype.ip=function(e){if(this.J(e)){if(this.L(e,'Problem Updating Status'))try{var c=JSON.parse(e.responseText);if(c&&c.data){var a=JSON.parse(c.data);if(!ta.A){if(0>User.bt-1359459172&&i.ba!=null)return;ta.Jg(c.user_fields,c.fightbar,a.status.active_character);va.Y()}
D.Ra(c,a.status.active_character);la(w('Status Updated'));this.d=this.B}}catch(d){y(q('Problem Updating Status',d))}
this.q()}}
E.prototype.Ql=function(){var e=this;e.e&&(e.l('Loading Profile Page…'),1361287340<User.bt||z.G(B('xw_controller=stats&xw_action=view'),function(c){e.Rl(c)}))}
E.prototype.Rl=function(e){this.J(e)&&(this.L(e,'Problem Loading Profile Page')&&(la(w('Profile Page Loaded')),e=ub(e.responseText),Ra=e.rb,this.d=this.B),this.q())}
E.prototype.Li=function(){var e=this;e.e&&(e.l('Loading Server Time…'),e.Jh=(new Date).getTime(),1361331909<User.bt||z.G(B('xw_controller=collection&xw_action=card_help'),function(c){e.Xl(c)}))}
E.prototype.Xl=function(e){if(this.J(e)){if(this.L(e,'Problem Loading Server Time')&&(e=/pop_(\d{10})/.exec(e.responseText))){e=p(e[1]);this.Aj=e+p(((new Date).getTime()-this.Jh)/2E3);this.Bj=this.Aj-aa();la(w('Time Difference',ia(this.Bj)));this.d=this.B;this.q();return}
this.Li()}}
E.prototype.Ml=function(){var e=this;e.e&&z.ajax({url:B('xw_controller=inventory&xw_action=view'),data:mb(),timeout:4E4},function(c){e.Nl(c)},function(){e.Ol()})}
E.prototype.Nl=function(e){var c=A;if(this.J(e)){if(this.L(e,'Problem Loading Inventory'))if((e=Sa(e.responseText,'var Items = ',/;[\r\n]+/,h))&&e.data){var e=e.data,a;for(a in e)e.hasOwnProperty(a)&&(W.aa[a]?W.aa[a].bb=e[a].quantity:W.push(a,{id:e[a].id,type:e[a].type,jc:e[a].attack,ka:e[a].defense,ek:e[a].attackIncrease,Ck:e[a].defenseIncrease,fb:e[a].active,Ij:e[a].quantity,bb:e[a].quantity,al:e[a].equipped_offense,$k:e[a].equipped_defense,Xg:e[a].imagesrc,jg:e[a].name,jj:e[a].plural_name}));l(w('Inventory Loaded','Found '+k(W.length)+' unique items'));c=h;this.d=this.B}else y(q('Problem Loading Inventory'));c||(this.Tf++,3<=this.Tf&&(l(q('Problem Loading Inventory','Gave up after 3 attempts')),this.d=this.B));this.q()}}
E.prototype.Ol=function(){this.e&&(this.Tf++,3<=this.Tf&&(l(q('Problem Loading Inventory','Gave up after 3 attempts')),this.d=this.B),this.q())}
E.prototype.qk=function(e,c,a){var d=this;d.e&&z.G(B(e),function(a){d.pk(a)},g,c,a)}
E.prototype.Vh=function(e){var c;if(this.e){this.nk=this.ok=0;c||(c=1);for(var a=0;a<c;a++)this.ok++,this.qk(e,0===a&&1<c?h:A,1<c?h:A)}}
E.prototype.pk=function(e){if(this.J(e)){if(this.L(e,'Check Link')){var c;(c=/<td class="message_body">(.+)<\/td>/.exec(e.responseText))?l(w('Check Link',Aa(c[1]).replace(/Send .+ a comment!/g,"").replace(/There was an issue processing your request\./g,"").replace(/Please try again\./g,""))):(c=Qa(e.responseText,'<div class="fl_Box" align=center>','Play Mafia Wars'))?l(w('Check Link',Aa(c))):l(q('Check Link','Unknown Response'))}
this.nk++}}
E.prototype.l=function(e,c){c&&this.fm===c||(this.fm=c?c:0,this.Yf||(this.Yf=$("#"+this.id+'_status_log')),this.Yf&&this.Yf.html(e))}
E.prototype.hj=function(e,c){var a;if(0>=e)c&&c();else{a||(a='Pausing');var d=this,b=1E3*e;d.l(a+' <span id="'+d.id+'_seconds">'+ia(e)+'</span>…');var f=setInterval(function(){e--;b-=1E3;$("#"+d.id+'_seconds').length&&d.e?($("#"+d.id+'_seconds').html(ia(Math.max(e,0))),0>=e&&(clearInterval(f),c&&c())):clearInterval(f)},Math.min(b,1E3))}}
E.prototype.w=function(e,c){var a=this,d=1E3*e;a.Gf=h;a.$o();a.l('Starting in '+ia(e)+'…');var b=setInterval(function(){e--;d-=1E3;a.Gf&&!a.e?(a.l('Starting in '+ia(e)+'…'),0>=e&&(clearInterval(b),c())):clearInterval(b)},Math.min(d,1E3))}
fb.prototype.init=function(){this.kb='job_0_0';this.m="";this.n=this.z=this.H=this.u=this.k=this.r=this.i=0;this.hb="job";this.Ba='view_stage_jobs';this.vb=this.Ca=0}
fb.prototype.Fi=function(){var e=this.m+" "+(this.u?'<span class="energy">'+this.u+'</span>':'<span class="stamina">'+this.H+'</span>')+' <span class="experience">'+this.z+'</span> <span class="stat_info more_in">['+(this.z/(this.u+this.H)).toFixed(2)+']</span>';this.n&&(e+=' <span class="'+ac[this.k]+(0>this.n?' bad">-':'">')+ab[this.k]+k(Math.abs(this.n))+'</span>');return e}
Ca.prototype.yh=function(e,c,a){if(e!==this.D||c!==this.f||a)this.C=Q(e,"p|"+c),this.D=e,this.f=c,e=this.ba?'<a href="http://www.facebook.com/profile.php?id='+this.ba+'" target="_blank"><img src="https://graph.facebook.com/'+this.ba+'/picture" class="op-img"/></a>':'<img src="'+O+'/graphics/character_silhouette_50_50.jpg" class="op-img"/>',$("#"+G+'_arena_op_name_'+this.id).html(e+" "+this.C)}
Ca.prototype.Fj=function(e,c){if(e!==this.ra||c)this.ra=e,$("#"+G+'_arena_op_resp_'+this.id).html('<span class="respect">'+(e?k(e):"-")+'</span>')}
Ca.prototype.Gj=function(e,c){if(e!==this.ya||c)this.ya=e,$("#"+G+'_arena_op_score_'+this.id).html(k(e))}
Ca.prototype.Dj=function(e,c){if(e!==this.I||0===e||c)0<this.I&&0===e?this.Pf=aa()+10:0<e&&(this.Pf=0),this.Pf?$("#"+G+'_arena_op_health_'+this.id).html('<span class="health red">'+Math.max(this.Pf-aa(),0)+'s</span>'):$("#"+G+'_arena_op_health_'+this.id).html('<span class="health'+(0<e?"":' red')+'">'+p(e)+'%</span>'),this.I=e}
Ca.prototype.Ej=function(e,c){if(e!==this.cf||c)this.cf=e,e&1?$("#"+G+'_arena_pu_atk'+this.id).show():$("#"+G+'_arena_pu_atk'+this.id).hide(),e&2?$("#"+G+'_arena_pu_def'+this.id).show():$("#"+G+'_arena_pu_def'+this.id).hide()}
Ca.prototype.Cj=function(e,c){if(e!==this.Kg||c)this.Kg=e,$("#"+G+'_arena_op_diff_'+this.id).html(this.Fk[e])}
Ca.prototype.Fk=["-",'<span title="Easy"><span class="defense good">?</span> <span class="mafia_defense good">?</span></span>','<span title="Normal"><span class="defense bad">?</span> <span class="mafia_defense good">?</span></span>','<span title="Normal"><span class="defense good">?</span> <span class="mafia_defense bad">?</span></span>','<span title="Hard"><span class="defense bad">?</span> <span class="mafia_defense bad">?</span>'];Vb.prototype.runScript=function(e){var c=document.createElement('script');c.type='text/javascript';c.src=e+"?"+Math.random();document.getElementsByTagName('head')[0].appendChild(c);setTimeout(function(){window.top!=window&&(FB.CanvasClient&&-1==FB.CanvasClient._timer)&&FB.CanvasClient.startTimerToSizeToContent()},3E3)}
Vb.prototype.feed=function(e){e.autoPublish=h;MW.Feed(e)}
Vb.prototype.jd=function(e){try{_gaq.push(['_trackEvent',e,e])}catch(c){}}
Vb.prototype.Oa=function(){if(!Ba("#"+G+'_frame')&&!(0===window.innerHeight||-1!==window.location.href.indexOf('hidden=1')))if(i=new cb,ta=new cb,iops==i.ba){try{if(!Ba('#content_row')&&!JSON.parse(window.localStorage[G+'_options_'+i.ba]).run_arena)return}catch(e){}
D$=this;D$.addTab=ha;D$.merge=C;D$.tp=Z;D$.log=l;D$.logError=y;D$.logDebug=la;D$.shareLevelUpBonus=Wb;D$.runScript=this.runScript;D$.feed=this.feed;ma='http://mafiademon.com';vb=Ba('#demondata')?$('#demondata'):n;z=new Pa(h);tb=new Pa(A);Hb=new ob;Gb=new ob;D=new Kb(G+'_frame');N=new Pb('Inventory',G+'_loot');new Rb("Log",G+'_log');new Qb('Opponents',G+'_opponents');R=new Sb('Ices',G+'_ices');X=new Bb('Options',G+'_options');ga=new Db('Robbing',G+'_rob');fa=new Fb('Fighting',G+'_fight');Ga=new Jb('Bosses',G+'_boss');S=new Lb('Jobs',G+'_job');Ya=new Ob('Arena',G+'_arena');Y=new Nb('Bank',G+'_bank');va=new Mb('Upgrades',G+'_upgrade');new Xb;new Tb('Links',G+'_links');Wa(X,h);Wa(ya,h);X.fk();if(!$.jsonp){var c=document.createElement('script');c.type='text/javascript';c.src=ma+'/js/jquery.jsonp-2.4.0.min.js';document.getElementsByTagName('head')[0].appendChild(c)}
Na={}}}
this.Oa()}
setTimeout(function(){'undefined'===typeof D$&&new Vb},2E3);iops=User.trackId;})();
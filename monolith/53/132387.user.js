// ==UserScript==
// @name           Canvasrider Night Mode
// @namespace      http://forum.canvasrider.com/member8300.html
// @include        http://canvasrider.com/tracks/*
// @match          http://canvasrider.com/tracks/*
// ==/UserScript==

(typeof unsafeWindow!=='undefined'?unsafeWindow:window).Function('By.prototype.Am=function(){var a=this.G.o();this.Ak+=this.Bq;var e=this.DG[0]*this.Al/2,g=a.x+e*Math.cos(this.Ak),e=a.y+e*Math.sin(this.Ak);B.beginPath();B.fillStyle="white";B.moveTo(g,e);for(var c=2;8>c;c++)e=this.DG[c-1]*this.Al/2,g=a.x+e*Math.cos(this.Ak+6.283*c/8),e=a.y+e*Math.sin(this.Ak+6.283*c/8),B.lineTo(g,e);B.fill()};Bk.prototype.Am=function(){var a=this.Q.G.o(),e=this.AI.G.o();B.beginPath();B.strokeStyle="white";B.lineWidth=3.5*C.H;B.arc(a.x,a.y,10*C.H,0,2*Math.PI,!0);B.moveTo(e.x+10*C.H,e.y);B.arc(e.x,e.y,10*C.H,0,2*Math.PI,!0);B.stroke();var g=e.sub(a),e=new J((e.y-a.y)*this.O,(a.x-e.x)*this.O),c=a.add(g.F(0.3)).add(e.F(0.25)),f=a.add(g.F(0.84)).add(e.F(0.42)),d=a.add(g.F(0.84)).add(e.F(0.37)),h=a.add(g.F(0.4)).add(e.F(0.05));B.beginPath();B.lineWidth=3*C.H;B.moveTo(a.x,a.y);B.lineTo(c.x,c.y);B.lineTo(f.x,f.y);B.moveTo(d.x,d.y);B.lineTo(h.x,h.y);B.lineTo(a.x,a.y);d=new J(6*Math.cos(this.At)*C.H,6*Math.sin(this.At)*C.H);f=h.add(d);d=h.sub(d);B.moveTo(f.x,f.y);B.lineTo(d.x,d.y);var j=a.add(g.F(0.17)).add(e.F(0.38)),i=a.add(g.F(0.3)).add(e.F(0.45));B.moveTo(j.x,j.y);B.lineTo(i.x,i.y);j=a.add(g.F(0.25)).add(e.F(0.4));B.moveTo(h.x,h.y);B.lineTo(j.x,j.y);var j=a.add(g.F(1)).add(e.F(0)),i=a.add(g.F(0.97)).add(e.F(0)),k=a.add(g.F(0.8)).add(e.F(0.48)),l=a.add(g.F(0.86)).add(e.F(0.5)),m=a.add(g.F(0.82)).add(e.F(0.65)),h=a.add(g.F(0.78)).add(e.F(0.67));B.moveTo(j.x,j.y);B.lineTo(i.x,i.y);B.lineTo(k.x,k.y);B.lineTo(l.x,l.y);B.lineTo(m.x,m.y);B.lineTo(h.x,h.y);B.stroke();this.A9||(e=this.h.G.o().sub(a.add(g.F(0.5))),a=c.add(g.F(-0.1)).add(e.F(0.3)),i=f.sub(a),k=new J(i.y*this.O,-i.x*this.O),k=k.F(C.H*C.H),j=a.add(i.F(0.5)).add(k.F(200/i.Ae())),i=d.sub(a),k=new J(i.y*this.O,-i.x*this.O),k=k.F(C.H*C.H),i=a.add(i.F(0.5)).add(k.F(200/i.Ae())),B.beginPath(),B.lineWidth=6*C.H,B.strokeStyle="rgba(255, 255, 255, 0.5)",B.moveTo(d.x,d.y),B.lineTo(i.x,i.y),B.lineTo(a.x,a.y),B.stroke(),B.beginPath(),B.strokeStyle="white",B.moveTo(f.x,f.y),B.lineTo(j.x,j.y),B.lineTo(a.x,a.y),B.stroke(),f=c.add(g.F(0.05)).add(e.F(0.9)),B.beginPath(),B.lineWidth=8*C.H,B.moveTo(a.x,a.y),B.lineTo(f.x,f.y),B.stroke(),d=c.add(g.F(0.15)).add(e.F(1.05)),a=c.add(g.F(0.4)).add(e.F(1.1)),g=c.add(g.F(0.05)).add(e.F(1.05)),B.beginPath(),B.lineWidth=2*C.H,B.moveTo(d.x+5*C.H,d.y),B.arc(d.x,d.y,5*C.H,0,2*Math.PI,!0),B.moveTo(a.x,a.y),B.lineTo(g.x,g.y),B.stroke(),g=f.sub(h),e=new J(g.y*this.O,-g.x*this.O),e=e.F(C.H*C.H),g=h.add(g.F(0.4)).add(e.F(130/g.Ae())),B.beginPath(),B.lineWidth=5*C.H,B.moveTo(f.x,f.y),B.lineTo(g.x,g.y),B.lineTo(h.x,h.y),B.stroke())};Cb.prototype.Am=function(){var a=this.Q.G.o(),e=this.AI.G.o();B.beginPath();B.strokeStyle="rgba(255, 255, 255, 0.5)";B.lineWidth=3.5*C.H;B.arc(a.x,a.y,10*C.H,0,2*Math.PI,!0);B.moveTo(e.x+10*C.H,e.y);B.arc(e.x,e.y,10*C.H,0,2*Math.PI,!0);B.stroke();var g=e.sub(a),e=new J((e.y-a.y)*this.O,(a.x-e.x)*this.O),c=a.add(g.F(0.3)).add(e.F(0.25)),f=a.add(g.F(0.84)).add(e.F(0.42)),d=a.add(g.F(0.84)).add(e.F(0.37)),h=a.add(g.F(0.4)).add(e.F(0.05));B.beginPath();B.lineWidth=3*C.H;B.moveTo(a.x,a.y);B.lineTo(c.x,c.y);B.lineTo(f.x,f.y);B.moveTo(d.x,d.y);B.lineTo(h.x,h.y);B.lineTo(a.x,a.y);d=new J(6*C.H*Math.cos(this.At),6*C.H*Math.sin(this.At));f=h.add(d);d=h.sub(d);B.moveTo(f.x,f.y);B.lineTo(d.x,d.y);var j=a.add(g.F(0.17)).add(e.F(0.38)),i=a.add(g.F(0.3)).add(e.F(0.45));B.moveTo(j.x,j.y);B.lineTo(i.x,i.y);j=a.add(g.F(0.25)).add(e.F(0.4));B.moveTo(h.x,h.y);B.lineTo(j.x,j.y);var j=a.add(g.F(1)).add(e.F(0)),i=a.add(g.F(0.97)).add(e.F(0)),k=a.add(g.F(0.8)).add(e.F(0.48)),l=a.add(g.F(0.86)).add(e.F(0.5)),m=a.add(g.F(0.82)).add(e.F(0.65)),h=a.add(g.F(0.78)).add(e.F(0.67));B.moveTo(j.x,j.y);B.lineTo(i.x,i.y);B.lineTo(k.x,k.y);B.lineTo(l.x,l.y);B.lineTo(m.x,m.y);B.lineTo(h.x,h.y);B.stroke();e=this.h.G.o().sub(a.add(g.F(0.5)));a=c.add(g.F(-0.1)).add(e.F(0.3));i=f.sub(a);k=new J(i.y*this.O,-i.x*this.O);k=k.F(C.H*C.H);j=a.add(i.F(0.5)).add(k.F(200/i.Ae()));i=d.sub(a);k=new J(i.y*this.O,-i.x*this.O);k=k.F(C.H*C.H);i=a.add(i.F(0.5)).add(k.F(200/i.Ae()));B.beginPath();B.lineWidth=6*C.H;B.strokeStyle="rgba(0, 0, 0, 0.25)";B.moveTo(d.x,d.y);B.lineTo(i.x,i.y);B.lineTo(a.x,a.y);B.stroke();B.beginPath();B.strokeStyle="rgba(255, 255, 255, 0.5)";B.lineWidth=6*C.H;B.moveTo(f.x,f.y);B.lineTo(j.x,j.y);B.lineTo(a.x,a.y);B.stroke();f=c.add(g.F(0.05)).add(e.F(0.9));B.beginPath();B.lineWidth=8*C.H;B.moveTo(a.x,a.y);B.lineTo(f.x,f.y);B.stroke();d=c.add(g.F(0.15)).add(e.F(1.05));a=c.add(g.F(0.4)).add(e.F(1.1));g=c.add(g.F(0.05)).add(e.F(1.05));B.beginPath();B.lineWidth=2*C.H;B.moveTo(d.x+5*C.H,d.y);B.arc(d.x,d.y,5*C.H,0,2*Math.PI,!0);B.moveTo(a.x,a.y);B.lineTo(g.x,g.y);B.stroke();g=f.sub(h);e=new J(g.y*this.O,-g.x*this.O);e=e.F(C.H*C.H);g=h.add(g.F(0.4)).add(e.F(130/g.Ae()));B.beginPath();B.lineWidth=5*C.H;B.moveTo(f.x,f.y);B.lineTo(g.x,g.y);B.lineTo(h.x,h.y);B.stroke();B.strokeStyle="white"};p.style.backgroundColor="black";Bn.prototype.Am=function(){var a=this.Q.G.o(),e=this.AI.G.o(),g=this.h.G.o(),c=e.sub(a),f=new J((e.y-a.y)*this.O,(a.x-e.x)*this.O),d=g.sub(a.add(c.F(0.5)));B.beginPath();B.strokeStyle="white";B.lineWidth=3.5*C.H;B.arc(a.x,a.y,12.5*C.H,0,2*Math.PI,!0);B.moveTo(e.x+12.5*C.H,e.y);B.arc(e.x,e.y,12.5*C.H,0,2*Math.PI,!0);B.stroke();B.beginPath();B.fillStyle="grey";B.moveTo(a.x+5*C.H,a.y);B.arc(a.x,a.y,5*C.H,0,2*Math.PI,!0);B.moveTo(e.x+4*C.H,e.y);B.arc(e.x,e.y,4*C.H,0,2*Math.PI,!0);B.fill();B.beginPath();B.lineWidth=5*C.H;B.moveTo(a.x,a.y);B.lineTo(a.x+0.4*c.x+0.05*f.x,a.y+0.4*c.y+0.05*f.y);B.moveTo(a.x+0.72*c.x+0.64*d.x,a.y+0.72*c.y+0.64*d.y);B.lineTo(a.x+0.46*c.x+0.4*d.x,a.y+0.46*c.y+0.4*d.y);B.lineTo(a.x+0.4*c.x+0.05*f.x,a.y+0.4*c.y+0.05*f.y);B.stroke();B.beginPath();B.lineWidth=2*C.H;B.moveTo(a.x+0.72*c.x+0.64*d.x,a.y+0.72*c.y+0.64*d.y);B.lineTo(a.x+0.43*c.x+0.05*f.x,a.y+0.43*c.y+0.05*f.y);B.moveTo(a.x+0.45*c.x+0.3*d.x,a.y+0.45*c.y+0.3*d.y);B.lineTo(a.x+0.3*c.x+0.4*d.x,a.y+0.3*c.y+0.4*d.y);B.lineTo(a.x+0.25*c.x+0.6*d.x,a.y+0.25*c.y+0.6*d.y);B.moveTo(a.x+0.17*c.x+0.6*d.x,a.y+0.17*c.y+0.6*d.y);B.lineTo(a.x+0.3*c.x+0.6*d.x,a.y+0.3*c.y+0.6*d.y);var h=new J(6*Math.cos(this.At)*C.H,6*Math.sin(this.At)*C.H);B.moveTo(a.x+0.43*c.x+0.05*f.x+h.x,a.y+0.43*c.y+0.05*f.y+h.y);B.lineTo(a.x+0.43*c.x+0.05*f.x-h.x,a.y+0.43*c.y+0.05*f.y-h.y);B.stroke();B.beginPath();B.lineWidth=C.H;B.moveTo(a.x+0.46*c.x+0.4*d.x,a.y+0.46*c.y+0.4*d.y);B.lineTo(a.x+0.28*c.x+0.5*d.x,a.y+0.28*c.y+0.5*d.y);B.stroke();B.beginPath();B.lineWidth=3*C.H;B.moveTo(e.x,e.y);B.lineTo(a.x+0.71*c.x+0.73*d.x,a.y+0.71*c.y+0.73*d.y);B.lineTo(a.x+0.73*c.x+0.77*d.x,a.y+0.73*c.y+0.77*d.y);B.lineTo(a.x+0.7*c.x+0.8*d.x,a.y+0.7*c.y+0.8*d.y);B.stroke();if(!this.A9){var f=g.sub(a.add(c.F(0.5))),e=a.add(c.F(0.3)).add(f.F(0.25)),d=a.add(c.F(0.4)).add(f.F(0.05)),g=d.add(h),h=d.sub(h),a=a.add(c.F(0.67)).add(f.F(0.8)),j=e.add(c.F(-0.05)).add(f.F(0.42)),i=g.sub(j),d=new J(i.y*this.O,-i.x*this.O),d=d.F(C.H*C.H),k=j.add(i.F(0.5)).add(d.F(200/i.Ae())),i=h.sub(j),d=new J(i.y*this.O,-i.x*this.O),d=d.F(C.H*C.H),d=j.add(i.F(0.5)).add(d.F(200/i.Ae()));B.beginPath();B.lineWidth=6*C.H;B.strokeStyle="rgba(255, 255, 255, 0.5)";B.moveTo(h.x,h.y);B.lineTo(d.x,d.y);B.lineTo(j.x,j.y);B.stroke();B.beginPath();B.strokeStyle="white";B.moveTo(g.x,g.y);B.lineTo(k.x,k.y);B.lineTo(j.x,j.y);B.stroke();d=e.add(c.F(0.1)).add(f.F(0.95));B.beginPath();B.lineWidth=8*C.H;B.moveTo(j.x,j.y);B.lineTo(d.x,d.y);B.stroke();g=e.add(c.F(0.2)).add(f.F(1.09));h=e.add(c.F(0.4)).add(f.F(1.15));c=e.add(c.F(0.1)).add(f.F(1.05));B.beginPath();B.lineWidth=2*C.H;B.moveTo(g.x+5*C.H,g.y);B.arc(g.x,g.y,5*C.H,0,2*Math.PI,!0);B.moveTo(h.x,h.y);B.lineTo(c.x,c.y);B.stroke();c=d.sub(a);f=new J(c.y*this.O,-c.x*this.O);f=f.F(C.H*C.H);c=a.add(c.F(0.3)).add(f.F(80/c.Ae()));B.beginPath();B.lineWidth=5*C.H;B.moveTo(d.x,d.y);B.lineTo(c.x,c.y);B.lineTo(a.x,a.y);B.stroke()}};CW.prototype.Am=function(){var a=this.Q.G.o(),e=this.AI.G.o(),g=this.h.G.o(),c=e.sub(a),f=new J((e.y-a.y)*this.O,(a.x-e.x)*this.O),d=g.sub(a.add(c.F(0.5)));B.beginPath();B.strokeStyle="rgba(255, 255, 255, 0.5)";B.lineWidth=3.5*C.H;B.arc(a.x,a.y,12.5*C.H,0,2*Math.PI,!0);B.moveTo(e.x+12.5*C.H,e.y);B.arc(e.x,e.y,12.5*C.H,0,2*Math.PI,!0);B.stroke();B.beginPath();B.fillStyle="rgba(255, 255, 255, 0.25)";B.moveTo(a.x+5*C.H,a.y);B.arc(a.x,a.y,5*C.H,0,2*Math.PI,!0);B.moveTo(e.x+4*C.H,e.y);B.arc(e.x,e.y,4*C.H,0,2*Math.PI,!0);B.fill();B.beginPath();B.lineWidth=5*C.H;B.moveTo(a.x,a.y);B.lineTo(a.x+0.4*c.x+0.05*f.x,a.y+0.4*c.y+0.05*f.y);B.moveTo(a.x+0.72*c.x+0.64*d.x,a.y+0.72*c.y+0.64*d.y);B.lineTo(a.x+0.46*c.x+0.4*d.x,a.y+0.46*c.y+0.4*d.y);B.lineTo(a.x+0.4*c.x+0.05*f.x,a.y+0.4*c.y+0.05*f.y);B.stroke();B.beginPath();B.lineWidth=2*C.H;B.moveTo(a.x+0.72*c.x+0.64*d.x,a.y+0.72*c.y+0.64*d.y);B.lineTo(a.x+0.43*c.x+0.05*f.x,a.y+0.43*c.y+0.05*f.y);B.moveTo(a.x+0.45*c.x+0.3*d.x,a.y+0.45*c.y+0.3*d.y);B.lineTo(a.x+0.3*c.x+0.4*d.x,a.y+0.3*c.y+0.4*d.y);B.lineTo(a.x+0.25*c.x+0.6*d.x,a.y+0.25*c.y+0.6*d.y);B.moveTo(a.x+0.17*c.x+0.6*d.x,a.y+0.17*c.y+0.6*d.y);B.lineTo(a.x+0.3*c.x+0.6*d.x,a.y+0.3*c.y+0.6*d.y);var h=new J(6*Math.cos(this.At)*C.H,6*Math.sin(this.At)*C.H);B.moveTo(a.x+0.43*c.x+0.05*f.x+h.x,a.y+0.43*c.y+0.05*f.y+h.y);B.lineTo(a.x+0.43*c.x+0.05*f.x-h.x,a.y+0.43*c.y+0.05*f.y-h.y);B.stroke();B.beginPath();B.lineWidth=C.H;B.moveTo(a.x+0.46*c.x+0.4*d.x,a.y+0.46*c.y+0.4*d.y);B.lineTo(a.x+0.28*c.x+0.5*d.x,a.y+0.28*c.y+0.5*d.y);B.stroke();B.beginPath();B.lineWidth=3*C.H;B.moveTo(e.x,e.y);B.lineTo(a.x+0.71*c.x+0.73*d.x,a.y+0.71*c.y+0.73*d.y);B.lineTo(a.x+0.73*c.x+0.77*d.x,a.y+0.73*c.y+0.77*d.y);B.lineTo(a.x+0.7*c.x+0.8*d.x,a.y+0.7*c.y+0.8*d.y);B.stroke();var f=g.sub(a.add(c.F(0.5))),e=a.add(c.F(0.3)).add(f.F(0.25)),d=a.add(c.F(0.4)).add(f.F(0.05)),g=d.add(h),h=d.sub(h),a=a.add(c.F(0.67)).add(f.F(0.8)),j=e.add(c.F(-0.05)).add(f.F(0.42)),i=g.sub(j),d=new J(i.y*this.O,-i.x*this.O),d=d.F(C.H*C.H),k=j.add(i.F(0.5)).add(d.F(200/i.Ae())),i=h.sub(j),d=new J(i.y*this.O,-i.x*this.O),d=d.F(C.H*C.H),d=j.add(i.F(0.5)).add(d.F(200/i.Ae()));B.beginPath();B.lineWidth=6*C.H;B.strokeStyle="rgba(255, 255, 255, 0.25)";B.moveTo(h.x,h.y);B.lineTo(d.x,d.y);B.lineTo(j.x,j.y);B.stroke();B.beginPath();B.strokeStyle="rgba(255, 255, 255, 0.5)";B.moveTo(g.x,g.y);B.lineTo(k.x,k.y);B.lineTo(j.x,j.y);B.stroke();d=e.add(c.F(0.1)).add(f.F(0.95));B.beginPath();B.lineWidth=8*C.H;B.moveTo(j.x,j.y);B.lineTo(d.x,d.y);B.stroke();g=e.add(c.F(0.2)).add(f.F(1.09));h=e.add(c.F(0.4)).add(f.F(1.15));c=e.add(c.F(0.1)).add(f.F(1.05));B.beginPath();B.lineWidth=2*C.H;B.moveTo(g.x+5*C.H,g.y);B.arc(g.x,g.y,5*C.H,0,2*Math.PI,!0);B.moveTo(h.x,h.y);B.lineTo(c.x,c.y);B.stroke();c=d.sub(a);f=new J(c.y*this.O,-c.x*this.O);f=f.F(C.H*C.H);c=a.add(c.F(0.3)).add(f.F(80/c.Ae()));B.beginPath();B.lineWidth=5*C.H;B.moveTo(d.x,d.y);B.lineTo(c.x,c.y);B.lineTo(a.x,a.y);B.stroke();B.strokeStyle="white"};$.prototype.Am=function(){var a=this.h.G.o(),e=this.Bx.G.o(),g=this.BO.G.o(),c=this.Bu.G.o(),f=this.B0.G.o(),d=this.Bw.G.o(),h=this.BQ.G.o(),j=this.Bv.G.o(),i=this.BN.G.o(),k=this.Ab.G.o();B.beginPath();B.lineWidth=5*C.H;B.strokeStyle="rgba(255,255,255,0.5)";B.moveTo(a.x,a.y);B.lineTo(c.x,c.y);B.lineTo(f.x,f.y);B.moveTo(k.x,k.y);B.lineTo(j.x,j.y);B.lineTo(i.x,i.y);B.stroke();B.beginPath();B.strokeStyle="white";B.moveTo(a.x,a.y);B.lineTo(e.x,e.y);B.lineTo(g.x,g.y);B.moveTo(k.x,k.y);B.lineTo(d.x,d.y);B.lineTo(h.x,h.y);B.stroke();B.beginPath();B.lineWidth=8*C.H;B.moveTo(k.x,k.y);B.lineTo(a.x,a.y);B.stroke();a.Ai(a.sub(k).F(0.25));B.beginPath();B.lineWidth=2*C.H;B.moveTo(a.x+5*C.H,a.y);B.arc(a.x,a.y,5*C.H,0,2*Math.PI,!0);B.stroke();e=a.sub(k);g=new J(e.y,-e.x);c=new J(0,0);f=new J(0,0);1==this.O?(a.add(g.F(0.15)).add(e.F(-0.05)),a.add(g.F(-0.35)).add(e.F(0.15))):(a.add(g.F(-0.15)).add(e.F(0.15)),a.add(g.F(0.35)).add(e.F(-0.05)));c=a.add(g.F(0.15*this.O)).add(e.F(-0.05));f=a.add(g.F(-0.35*this.O)).add(e.F(0.15));B.beginPath();B.moveTo(c.x,c.y);B.lineTo(f.x,f.y);B.stroke()};BI.prototype.Am=function(){focus&&"banner"!=this.ID&&this.A5.Ai(focus.G.sub(this.A5).Bc(5));B.clearRect(0,0,p.width,p.height);B.lineWidth=Math.max(2*this.H,0.5);if(("line"==V||"scenery line"==V||"brush"==V||"scenery brush"==V)&&A0)50>w.o().x?(C.A5.x-=10/this.H,w.x-=10/this.H):w.o().x>p.width-50&&(C.A5.x+=10/this.H,w.x+=10/this.H),50>w.o().y?(C.A5.y-=10/this.H,w.y-=10/this.H):w.o().y>p.height-50&&(C.A5.y+=10/this.H,w.y+=10/this.H),B.beginPath(),B.strokeStyle="red",B.moveTo(AF.o().x,AF.o().y),B.lineTo(w.o().x,w.o().y),B.stroke();var a=(new J(0,0)).Cr(),e=(new J(p.width,p.height)).Cr();a.x=Math.floor(a.x/this.q);a.y=Math.floor(a.y/this.q);e.x=Math.floor(e.x/this.q);e.y=Math.floor(e.y/this.q);for(var g=[],c=a.x;c<=e.x;c++)for(var f=a.y;f<=e.y;f++)if(void 0!=this.I[c]&&void 0!=this.I[c][f]){if(0<this.I[c][f].AG.length||0<this.I[c][f].AL.length){g[c+"_"+f]=1;if(void 0==this.Ax[c+"_"+f]){this.Ax[c+"_"+f]=document.createElement("canvas");this.Ax[c+"_"+f].width=this.q*this.H;this.Ax[c+"_"+f].height=this.q*this.H;var d=this.Ax[c+"_"+f].getContext("2d");d.lineCap="round";d.lineWidth=Math.max(2*this.H,0.5);d.strokeStyle="#444";for(var h=0;h<this.I[c][f].AL.length;h++)this.I[c][f].AL[h].C7(this.Ax[c+"_"+f].getContext("2d"),c*this.q*this.H,f*this.q*this.H);d.strokeStyle="white";Cu&&(d.shadowOffsetX=2,d.shadowOffsetY=2,d.shadowBlur=Math.max(2,10*this.H),d.shadowColor="white");for(d=0;d<this.I[c][f].AG.length;d++)this.I[c][f].AG[d].C7(this.Ax[c+"_"+f].getContext("2d"),c*this.q*this.H,f*this.q*this.H)}B.drawImage(this.Ax[c+"_"+f],Math.floor(p.width/2-this.A5.x*this.H+c*this.q*this.H),Math.floor(p.height/2-this.A5.y*this.H+f*this.q*this.H))}B.strokeStyle="white";for(d=0;d<this.I[c][f].AD.length;d++)this.I[c][f].AD[d].Am()}for(var j in this.Ax)void 0==g[[j]]&&delete this.Ax[j];if(250!=p.width){if("camera"!=V&&!focus)switch(V){case "line":case "scenery line":case "brush":case "scenery brush":B.beginPath();B.lineWidth=1;B.strokeStyle="white";c=Math.round(w.o().x);f=Math.round(w.o().y);B.moveTo(c-10,f);B.lineTo(c+10,f);B.moveTo(c,f+10);B.lineTo(c,f-10);B.stroke();break;case "eraser":B.beginPath();B.fillStyle="lightpink";B.arc(w.o().x,w.o().y,(BH-1)*this.H,0,2*Math.PI,!0);B.fill();break;case "goal":case "checkpoint":case "bomb":B.beginPath();B.fillStyle="goal"==V?"yellow":"checkpoint"==V?"blue":"red";B.arc(w.o().x,w.o().y,7*this.H,0,2*Math.PI,!0);B.fill();B.stroke();break;case "boost":case "gravity":B.beginPath(),B.fillStyle="boost"==V?"yellow":"#00FF00",B.save(),A0?(B.translate(AF.o().x,AF.o().y),B.rotate(Math.atan2(-(w.x-AF.x),w.y-AF.y))):B.translate(w.o().x,w.o().y),B.moveTo(-7*C.H,-10*C.H),B.lineTo(0,10*C.H),B.lineTo(7*C.H,-10*C.H),B.lineTo(-7*C.H,-10*C.H),B.fill(),B.stroke(),B.restore()}B.beginPath();B.fillStyle="yellow";B.lineWidth=1;B.arc(40,12,3.5,0,2*Math.PI,!0);B.fill();B.stroke();B.beginPath();B.lineWidth=10;B.strokeStyle="black";B.fillStyle="white";if(Bb)a="Game paused";else if(AP.A9)a=1<Z.length||1<b.length?"Press ENTER to restart or BACKSPACE to cancel checkpoint":"Press ENTER to restart";else if(void 0==this.ID||"banner"==this.ID){a="CANVAS RIDER RC7";if(void 0==this.ID){if(10==BT&&("line"==V||"scenery line"==V||"brush"==V||"scenery brush"==V))a+=" - Grid ";a+=" - "+V;if("brush"==V||"scenery brush"==V)a+=" ( size "+CF+" )"}label&&(label[0]&&!label[1])&&(a="CANVAS RIDER RC7")}else a=Math.floor(AP.z/6E4),e=Math.floor(AP.z%6E4/1E3),g=Math.floor((AP.z-6E4*a-1E3*e)/100),10>a&&(a="0"+a),10>e&&(e="0"+e),a=a+":"+e+"."+g;label&&(!label[0]&&!label[1])&&(a+=" - "+(Bb?"Unpause":"Pause")+" ( SPACE )");B.strokeText(": "+this.Be+" / "+this.BU+"  -  "+a,50,16);B.fillText(": "+this.Be+" / "+this.BU+"  -  "+a,50,16);label&&(label[0]?(B.textAlign="right",document.documentElement.offsetHeight<=window.innerHeight?(B.strokeText(label[2],p.width-36,15+25*label[1]),B.fillText(label[2],p.width-36,15+25*label[1])):(B.strokeText(label[2],p.width-51,15+25*label[1]),B.fillText(label[2],p.width-51,15+25*label[1])),B.textAlign="left"):(B.strokeText(label[2],36,15+25*label[1]),B.fillText(label[2],36,15+25*label[1])))}};C.Ax=[];')();
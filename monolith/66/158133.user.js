// ==UserScript==
// @name        C&C:TA Addon CityColor
// @namespace   http*://prodgame*.alliances.commandandconquer.com/*/index.aspx*
// @description C&C:Tiberium Alliances Addon CityColor (ACC) : change the color of citys
// @include     http*://prodgame*.alliances.commandandconquer.com/*/index.aspx*
// @version     1.1.4
// @author      BlinDManX
// @grant       none
// @copyright   2012+, Claus Neumann
// @license     CC BY-NC-ND 3.0 - http://creativecommons.org/licenses/by-nc-nd/3.0/
// @updateURL   https://userscripts.org/scripts/source/158133.meta.js
// @downloadURL https://userscripts.org/scripts/source/158133.user.js
// ==/UserScript==
(function(){var ACCinnerHtml=function(){window.__acc_version="1.1.4";console.log("Addon Citycolor "+window.__acc_version+" loaded");var debug=false;var h=new Array(null,null,null,null,null,null,null);function IncludeCitycolor(){try{console.log("Addon Citycolor Include");var sa=[];var sb=[];var sc=[];var sd=[];var se=[];var sf=[];var sg=[];var sh=[];var obj=ClientLib.Vis.Region.RegionCity.prototype;for(key in obj){if(typeof obj[key]=="function"){if(obj[key].length==5){var l=FF(obj[key],/this\.[A-Z]{6}.{0,3}=.{0,3}\(new.{0,2}\$I\.([A-Z]{6})\).{20,30}\?.*this\.[A-Z]{6}.{0,3}=.{0,3}\(new.{0,2}\$I\.([A-Z]{6})\)\.[A-Z]{6}\(\$I.[A-Z]{6}\.Black/m,"ClientLib.Vis.Region.RegionCity VisUpdate (0,1) ",0,false,debug);if(l!=null){h[0]=l[1];h[1]=l[2];break}}}}if(h[0]==null){console.error("ClientLib.Vis.Region.RegionCity (0) Class not found");return}if(h[1]==null){console.error("ClientLib.Vis.Region.RegionCity (1) Class not found");return}h[2]=FF(obj.VisUpdate,/this\.[A-Z]{6}\.([A-Z]{6})\(this\.[A-Z]{6},.{0,2}this\.[A-Z]{6}\);/m,"ClientLib.Vis.Region.RegionCity VisUpdate",0,false,debug);if(h[2][1]==null){console.error("ClientLib.Vis.Region.RegionCity (2) VisUpdate paramter undefined");return}h[3]=FF($I[h[1]].prototype[h[2][1]],/\$I\.[A-Z]{6}.([A-Z]{6})\(/m,"$I."+h[1]+".prototype."+h[2][1],1,false,debug);if(h[3][1]==null){console.error("$I."+h[1]+".prototype."+h[2][1]+" (3) function not found");return}h[4]=FF(ClientLib.Vis.Region.Region.prototype.VisUpdate,/ab\.v\.([A-Z]{6})\(a\,.{0,2}n\,.{0,2}s\);/m,"ClientLib.Vis.Region.Region.prototype.VisUpdate",1,false,debug);if(h[4][1]==null){console.error("ClientLib.Vis.Region.Region.prototype.VisUpdate (4) function not found");return}h[5]=FF($I[h[0]].prototype[h[2][1]],/c.{0,2}=.{0,2}\$I\.([A-Z]{6})\.([A-Z]{6})\(this\..*\$I\.\1\.([A-Z]{6})\(this\./m,"$I."+h[0]+".prototype."+h[2][1],3,false,debug);if(h[5][1]==null){console.error("$I."+h[0]+".prototype."+h[2][1]+" (5) function not found");return}h[6]=FF($I[h[5][1]][h[5][2]],/\$I\.[A-Z]{6}\.([A-Z]{6})\(a,.{0,3}f,.{0,3}b,.{0,3}c,.{0,3}d\)\;.*\$I\.[A-Z]{6}\.([A-Z]{6})\(a,.{0,3}f,.{0,3}b,.{0,3}c\)\;/m,"$I."+h[5][1]+"."+h[5][2],2,false,debug);if(h[6][1]==null){console.error("$I."+h[5][1]+"."+h[5][2]+" (6) function not found");return}h[7]=FF($I[h[5][1]][h[5][2]],/c\.([A-Z]{6})\(\).*\$I\.([A-Z]{6})\.([A-Z]{6})\.([A-Z]{6})\(g,.{0,2}f\);/m,"$I."+h[5][1]+"."+h[5][2],4,false,debug);if(h[7][1]==null){console.error("$I."+h[5][1]+"."+h[5][2]+" (7) function not found");return}try{sa[0]=$I[h[1]].prototype[h[2][1]].toString();sa[1]=sa[0].replace(/(\n\r|\n|\r|\t)/gm,"");sa[2]=sa[1].replace(/\s+/gm," ");sa[3]=sa[2].replace(/function.{0,3}\(a,.{0,3}b\).{0,3}\{/,"");sa[4]=sa[3].substring(0,sa[3].length-1);sa[5]=sa[4].replace(/this\.([A-Z]{6}).{0,2}=.{0,2}document\.createElement\(\"canvas\"\)\;(.*)\$I\.[A-Z]{6}.([A-Z]{6})\((.*\,.{0,2}this.[A-Z]{6}\(\))(\);)/m,'this.$1=document.createElement("canvas");z.canvasCache=this.$1;$2this.$3($4,z);');if(debug){console.log("#F1#",sa[5])}$I[h[1]].prototype[h[2][1]]=new Function("a","b","z",sa[5])}catch(e){console.log("Addons.Citycolor.IncludeCitycolor F1 error: ",e)}try{sb[0]=$I[h[1]][h[3][1]].toString();sb[1]=sb[0].replace(/(\n\r|\n|\r|\t)/gm,"");sb[2]=sb[1].replace(/\s+/gm," ");sb[3]=sb[2].replace(/function.{0,3}\(a,.{0,3}b,.{0,3}c,.{0,3}d,.{0,3}e,.{0,3}f,.{0,3}g\).{0,3}\{/,"");sb[4]=sb[3].substring(0,sb[3].length-1);sb[5]=sb[4].replace(/d.Font\);/im,'d.Font);if(typeof z != "undefined"){d.Color=this.CityColor(b,d.Color,z);e.Color=d.Color;f.Color=d.Color;}');if(debug){console.log("#F2#",sb[5])}$I[h[1]][h[3][1]]=new Function("a","b","c","d","e","f","g","z",sb[5]);$I[h[1]].prototype[h[3][1]]=new Function("a","b","c","d","e","f","g","z",sb[5])}catch(e){console.log("Addons.Citycolor.IncludeCitycolor F2 error: ",e)}try{sc[0]=$I[h[0]].prototype[h[2][1]].toString();sc[1]=sc[0].replace(/(\n\r|\n|\r|\t)/gm,"");sc[2]=sc[1].replace(/\s+/gm," ");sc[3]=sc[2].replace(/function.{0,3}\(a,.{0,3}b\).{0,3}\{/,"");sc[4]=sc[3].substring(0,sc[3].length-1);sc[5]=sc[4].replace(/c.{0,2}=.{0,2}\$I\.([A-Z]{6}).([A-Z]{6})\((.*)\)\;.{0,9}\}(.*)\$I\.\1.([A-Z]{6})\((.*)\)\;.{0,9}\}.{0,9}if.{0,2}\(/gm,"c=$I.$1.$2($3,z);}$4 $I.$1.$5($6,z);}if(");if(debug){console.log("#F3#",sc[5])}$I[h[0]].prototype[h[2][1]]=new Function("a","b","z",sc[5])}catch(e){console.log("Addons.Citycolor.IncludeCitycolor F3 error: ",e)}try{sd[0]=ClientLib.Vis.Region.RegionCity.prototype[h[4][1]].toString();sd[1]=sd[0].replace(/(\n\r|\n|\r|\t)/gm,"");sd[2]=sd[1].replace(/\s+/gm," ");sd[3]=sd[2].replace(/function.{0,3}\(a,.{0,3}b,.{0,3}c\).{0,3}\{/,"");sd[4]=sd[3].substring(0,sd[3].length-1);sd[5]=sd[4].replace(/this.([A-Z]{6}).([A-Z]{6})\(this.([A-Z]{6})\,.{0,2}this.([A-Z]{6})\);/im,"this.$1.$2(this.$3,this.$4,this);");if(debug){console.log("#F4#",sd[5])}ClientLib.Vis.Region.RegionCity.prototype[h[4][1]]=new Function("a","b","c",sd[5])}catch(e){console.log("Addons.Citycolor.IncludeCitycolor F4 error: ",e)}try{se[0]=$I[h[5][1]][h[5][2]].toString();se[1]=se[0].replace(/(\n\r|\n|\r|\t)/gm,"");se[2]=se[1].replace(/\s+/gm," ");se[3]=se[2].replace(/function.{0,3}\(a,.{0,3}b,.{0,3}c,.{0,3}d\).{0,3}\{/,"");se[4]=se[3].substring(0,se[3].length-1);se[5]=se[4].replace(/\$I\.([A-Z]{6})\.([A-Z]{6})\(a,.{0,3}f,.{0,3}b,.{0,3}c,.{0,3}d\)\;(.*)\$I\.[A-Z]{6}\.([A-Z]{6})\(a,.{0,3}f,.{0,3}b,.{0,3}c\)\;/im,"$I.$1.$2(a, f, b, c, d, z);$3 $I.$1.$4(a, f, b, c, z);");se[6]=se[5].replace(/(f.{0,2}=.{0,2}document.createElement\(\"canvas\"\)\;)/gm,"$1 if(z!=null){z.canvasCache = f;}");se[7]=se[6].replace(/\!\(e\.\$r.{0,2}=.{0,2}\$I\.[A-Z]{6}\.[A-Z]{6}\.[A-Z]{6}\([a-z]{1},.{0,2}e\),.{0,2}f.{0,2}=.{0,2}e\.b,.{0,2}e\.\$r\)/gm,"true");if(debug){console.log("#F5#",se[7])}$I[h[5][1]][h[5][2]]=new Function("a","b","c","d","z",se[7])}catch(e){console.log("Addons.Citycolor.IncludeCitycolor F5 error: ",e)}try{sg[0]=$I[h[5][1]][h[6][2]].toString();sg[1]=sg[0].replace(/(\n\r|\n|\r|\t)/gm,"");sg[2]=sg[1].replace(/\s+/gm," ");sg[3]=sg[2].replace(/function.{0,3}\(a,.{0,3}b,.{0,3}c,.{0,3}d\).{0,3}\{/,"");sg[4]=sg[3].substring(0,sg[3].length-1);sg[5]=sg[4].replace(/d.Font\);/im,'d.Font);if(typeof z != "undefined"){d.Color=this.CityColor(b,d.Color,z);}');if(debug){console.log("#F6#",sg[5])}$I[h[5][1]][h[6][2]]=new Function("a","b","c","d","z",sg[5]);$I[h[5][1]].prototype[h[6][2]]=new Function("a","b","c","d","z",sg[5])}catch(e){console.log("Addons.Citycolor.IncludeCitycolor F6 error: ",e)}try{sh[0]=$I[h[5][1]][h[5][3]].toString();sh[1]=sh[0].replace(/(\n\r|\n|\r|\t)/gm,"");sh[2]=sh[1].replace(/\s+/gm," ");sh[3]=sh[2].replace(/function.{0,3}\(a,.{0,3}b,.{0,3}c,.{0,3}d,.{0,3}e\).{0,3}\{/,"");sh[4]=sh[3].substring(0,sh[3].length-1);sh[5]=sh[4].replace(/d.Font\);/im,'d.Font);if(typeof z != "undefined"){d.Color=this.CityColor(b,d.Color,z);e.Color=d.Color;}');if(debug){console.log("#F7#",sh[5])}$I[h[5][1]][h[5][3]]=new Function("a","b","c","d","e","z",sh[5]);$I[h[5][1]].prototype[h[5][3]]=new Function("a","b","c","d","e","z",sh[5])}catch(e){console.log("Addons.Citycolor.IncludeCitycolor F7 error: ",e)}var fnk_cc=function(a,b,zt){if(debug){console.log("CityColor(2)",a,b,zt)}try{var r=a.getContext("2d");var z=[];var i=null;var t=true;if(localStorage.ACC_Ally!=null&&localStorage.ACC_Ally!="undefined"){var SN=ClientLib.Data.MainData.GetInstance().get_Server().get_Name();var d=JSON.parse(localStorage.ACC_Ally);z=d[SN]}for(i in z){if(z[i] instanceof Array&&z[i].length>=2){if(z[i][0]==zt.get_AllianceName()){r.clearRect(0,0,a.width,a.height);var t=/^#(?:[0-9a-fA-F]{2}){3,4}$/.test(z[i][2]);if(t){r.fillStyle=z[i][2]}else{r.fillStyle="#000000"}r.fillRect(0,0,a.width,a.height);r.strokeStyle=z[i][3];r.lineWidth=parseFloat(z[i][4],10);r.strokeRect(0,0,a.width,a.height);var t=/^#(?:[0-9a-fA-F]{2}){3,4}$/.test(z[i][1]);if(t){b=z[i][1]}break}}}for(i in z){if(z[i] instanceof Array&&z[i].length>=2){if(z[i][0]==zt.get_PlayerName()){r.clearRect(0,0,a.width,a.height);var t=/^#(?:[0-9a-fA-F]{2}){3,4}$/.test(z[i][2]);if(t){r.fillStyle=z[i][2]}else{r.fillStyle="#000000"}r.fillRect(0,0,a.width,a.height);r.strokeStyle=z[i][3];r.lineWidth=parseFloat(z[i][4],10);r.strokeRect(0,0,a.width,a.height);var t=/^#(?:[0-9a-fA-F]{2}){3,4}$/.test(z[i][1]);if(t){b=z[i][1]}break}}}for(i in z){if(z[i] instanceof Array&&z[i].length>=2){var et=new RegExp(zt.get_PlayerName()+":"+zt.get_Name());var e=z[i][0].match(et);if(e!=null&&e[0]!=null){r.clearRect(0,0,a.width,a.height);var t=/^#(?:[0-9a-fA-F]{2}){3,4}$/.test(z[i][2]);if(t){r.fillStyle=z[i][2]}else{r.fillStyle="#000000"}r.fillRect(0,0,a.width,a.height);r.strokeStyle=z[i][3];r.lineWidth=parseFloat(z[i][4],10);r.strokeRect(0,0,a.width,a.height);var t=/^#(?:[0-9a-fA-F]{2}){3,4}$/.test(z[i][1]);if(t){b=z[i][1]}break}}}return b}catch(e){console.log("ACC Include CityColor error: ",e)}};$I[h[1]].CityColor=fnk_cc;$I[h[1]].prototype.CityColor=fnk_cc;$I[h[5][1]].CityColor=fnk_cc;$I[h[5][1]].prototype.CityColor=fnk_cc;if(debug){console.log(h)}}catch(e){console.log("Addons.Citycolor.IncludeCitycolor Free error: ",e)}}function CityColorP(){try{if(localStorage.ACC_Serial!=null&&localStorage.ACC_Serial!="undefined"){try{try{var a=ClientLib.Data.MainData.GetInstance().get_Player().get_Name()}catch(e){var a=null}if(a!=null&&a!=""){var i;var sn=JSON.parse(localStorage.ACC_Serial);var sna=sn.split(/\r\n|\r|\n/g);var o="7d52595e680c5d44515b4d6f87740b6a1c5843683053583e495f35450022100c093d65774f657e5b601e37186626496e095618337f3024547b7008295e5d171a5b506ffc09104035716a6b4f3b23174c52675853106d0a236f31454c1a1620491b304a7b7578130f7c4a674d330272563050027f3721362a4304e2076a1d6c585e425f2f3f544b57280b5363511d0904146c264057364548334366781d6e4e56261c335f4429170b1068005d020415063bce3b456a7f11171b7a353d584d1e220c1d2dcc564c0832454c657e7d463819231579612f47132d42285b4a381c55281813776d787264608804592536716a6b302e234e1f454d6c7a4239385a00637c184c4a724d210d021d607e15052b1e352c611b002948231502090b220f1f26c933036307584c4d713334451f573411532e431147095b2465091e3c0c48301f283e57275b1863012c54487d020b113c43091d01716446ae5d22395a23523f19677144596577385d39554145075b296d435f0e073424161a3b5f12460a1f1a6d154a305e595c6a05466e78726446ae274d110e25435f1929376c0e636917163b5c504a031063191f5c7d0e057a4a647501670f7c4a674d33242e14224d150c4044021d367dfa7a592f4c1402015c727e514a5024111a245e1f5256147f38305f3345462d5a6a665e2c1858385e6809503e5e570578004e19155743349778183759244a4c426a7d0442623c4a5f6b1213005d32454c657e5b1a0e0d5e1b751e6e4710185d19145e28100a0a3a451303594b416fd432707961560f07573d255f1f1367545a703a38206f3145360a2c6734486b4a3533787a6958310b34564c3e1751512c023b0b1f0f31669c7b422710584406171c3e594b177c014e3f58585a4868030c2f183e061a7e086a310f341d4d26400755413200441a666f12081e095626c17c4f646a11104b427d7817141e651851703a38206f31452c0a577a0d0d341f217c29473d7f4a674d5942330116122d02110b16534f6cf765086810581004626f0c1e04344e6c7a423915603d501770312c6334350d021d637e15052b1e4e791a43380559383d421e1018140367853509661c5a0140157a73541d12674717691c110b031a60654e0d704548250c1d607e670f7c4a674d3324725d3f0b264f090d1e154d35d2744f2f52583310562e3e43464e220b5323595f53135eb02209195860615f634f716a155c2d76331f0b70005c090c27581210080b0814cf0f1d1767493e3f196771595a4967230625534540095664670d557e494a34486a75012d165a634c2018017d501c5c640c5f1e53574d3cc10f1e171543696b3053584a1f5d2611102310194c4f18374f657e5b6061350528264c2251582f0123120f1c161d11265f5327180f142cc838443812310d01552f35527c57331c10245c5e5b46687d65090520061a6c4a6479032b1d4d49674d3324207873774125744b5e5f2461ee1a7f13663f4d124b3525584b4737005d00736360316b6c3910531b4721183e1f0f646044042c1a2b4e542d175728215f2814151a192a877468265d0b10427a363852514a0b0c116566585a486a292205183c473a330d2f3a4d006435000f294a0d704c590a20450e4410154d6bee7a7c0b773f2821172a23584b51331c032e1e6b732f6d19164c8b300c1a310f24304d443d7f4a676b157d2f1d73774125741003024d34ad5d22433571100b626a0c17021e04091a2e5e45650f5a621305047c3b0d3103293b0d1c51112a012a747d1e31181338020d161e0f023bde244e115423573f626b0c6a114a28360739595f4e4e11774f657e5b606125031d647e6e095630071f0a7073001c0e244d1e0159544513c908593660161f3e4b260d43161120085f6b1213005d32454c657e5b1a010d581b751e6e471f185f19145f3802151f2b49554b2d084660c039076a1e58414b0250583e36374e161a10036c095b183f2c37450f471a331a2a34402b1c59251b2a5959341d1750331c51570c27452e8b7a507a104b1e0015742a07130d3a062f621e4a194a0b311917587e494a74437d5f2a473d7f4a1d2d61190052445e3b4526572c551e3ac5275f385516044a09767144566574385d27555f4e12506c684c467b52625f634f5c2a385504631c215d0d6052171b3f0c2f01163e153f8f735f22550b3f4c1101101a65633c530e626c1f0141186765042c6034336737667e03691d2a1f463052442e2e5756136d503e2c005b328e7805310c54501f4d32384463106f3e32666a6c5250456519305e694e44764d2b720a753e7f4a674d3302721116103b4311015f1702288f76592f5b5a4f424b3f361e04344e6c7a423942403d0d1165515721003362376827463e5817200b6c48483a5e595c3c4414175f5f5c618366033e5411104c1d697d174b562e165d6f041d0912502536454c7040535c634f5c2a475d106346205f4f281550744125746d78720e20c927442659560f0d5e7273146f0c64475f6b4358725365657e667e5b60615f292a3c4620403a2a0c6a6c442e5c2b1b2f45120a5f290828ce3b45046c3b2003542a7f474d51330a07324054720e63781837460f34486b4a2830546e72032d0d305342335a5b1f6a005d461359416f853709661c0b0a390c07780c35374e6c7a36105248125b246544127b49135c634f5c2a4757192d1d2b5648731e1619600e3c001514033c8917423e451b0c0e56287f7e515d2b10172e73585d1f5b2329030572395a760f34274c3c0e566142645f04667870774125006e7b726446ae7b046e755636206d141e71114e350a0724444859031607063e3e053a482a16621c0d1b76220d2102145d2f1d0d113c550d015f2d043cf2244f2b481d43427a3630444c1e04091a2e5e45650f5a621305047c3b0d3103293b0d1c51112a012a747d1e30180d2d0c505a510f0526d4744a241c5c2a4c6e1b1a70747d69150124445e5d1f48296b362d1b3c3d054aba37463c5313210b2a3024547b7051677c0f0b7b726446ae2059331c03696b3053583e4c541c552e6b0d116a0a51292b183b3b0b460003357b712b531f2c006a68483a1b1610067c3e2610080861d726443e530c1a125c01396c0b631c542e161e4546354c3e2c02107a40535c634f5c2a47471c185f191a107d01132578715316140b012ec431036514240d3e4b260d59436235192f3f191e4e0b146c674e5e6963615f634f5c50246f441e4e791a5e37294823665e18141d1a0e2a8f7b77391757040f157a73171d177c6f7a423938201552177631576f491b3c3174080d3c51062f0f275f0572140c102b58140b1f55167f8b67561614194f4c426a7d04425c6b4b087b1c02540564656b17477e5a150a116979036c165f78644d3324547b0a14131820444c5b1e25fc6776644f0d01114d2838595816774953385a6a1a3b16202002102601487b4a777c18443d7f4a674d4c4c2f520b1b2f0c40441f1e1a6ff5314c0f44084b454d32384463106f3e32666a6c5250456519425f75494376021d677e15052b6345641d04012e510a20450e385f53360e8a0e76310a054a4e1721611b0c43330d1a386c1f013d79611f310c6414410a366f6e046214512e496d0127547b7077410352071e151e20cb310526531f4b404b3f3615131e350014620b3b206f31454c1f1d095c35765766264915002b6d1c214a413c111c563a491a4851591927ce27056e0d564750112e395e4c1063565f6b44594015166871405726010125437d770a753e7f4a674d33443b52511a2d4e080358716446ae5d22435f170d11563634195351204d516860020a44146c36062c6734416d604f5c2a473d352f07215459111b1b501e450e4a231e0a26c83a0518591f0a0d571401747d5f34005d3b425e5d094c3535092c3a325c0b3177087e6e09562d0b331a6b281c1a0a2143134c531a4f6387764968105841011b767144556572385a703a38206f3131650f16260a007642237c03353e7f4a674d334e321c0a11244953081e1c456de6304f25520b4d21502e2854505228175d025e5245135c290605032b0a073a053475737d1413311c2b48177d50555e2d05466e78726446da5e214335716a4d167e1819736b0a2b27191e415b094c2331150737472315380f02706e480a634a0d1461083f372a1a020d161e0f023bde244e64773b312b6e097174535f341653085c584c084c002c0e5904001b783823324a215a58110b23534233221617265832023815192ad531583e1c555d424d3238441f5f294557021e66682d7f0706420720061c391e3f2546606e2c0a3b11690da1101c0c2f491f011f716446ae5d04656c0a0c683053583e4b4c3e4508413938206f313f2e37470f495576292a3c4620403a2a0c6a6c442e5c2b1b2f45120a5f290828ce3b451a53110d16763c18594b5b3500003f1e415b094c233115073732000d5e1b0e121369583701174e5f341c1e566117776d78726446d43f707b61585e424a310a0762103500032751524c4e176419022b20153438161a275f12405f6c0929160d7f5050454225746d78721e24fc66766a01581009626b0c194d5b370912285519063a4b676a0b1a7e494a76486f6e29473d7f4a673751766e2f5943685f163f4326433dc224472b5f1d4b4d5f2f3f544b57280b5d30001d1a1b6464244059295944651724790d35045a7013276604730949527b51211f5e574d6d857d104035716a6b30293a6c0b63675853385b6a1a3b163f300e04261b01380d6e650f6e471d185d191441381c1e0a200c504440525645ae5d2243350e0210192834501f03670b163c10634c017d343544502601012536687d780f192c1e15724704015c515968075d0c2a49301496090b611c5f4a3e6572255f564d1b4b5b10711c733b437a38455b7c12587a593b214b27472a6d461f7b00072f02483505213858404a638773466d1543696b3053583e1011240a1d385f5d4c485423224455200c0f7446662746291d4d49674d3324540112257d715d59510806149309053859080f035a3f79455a596b45513f58585a481c7d6b48457a1d003f196871106214022b07371409695e590a20450e4d4a594474ad5d224335710a04197235525d4b204c79423938206f312f2a02043d050d780629320b6c1726774d66160d2e18224b1505466e78726446ae1747235916172e50387f61564d6937162c595e47486a292205183c39073f04321a45075a02261c21495973020b113c43091d011e3627fc6076110d253e42047a3f52481e01101d2844584608106e244e5b724b0a74466677406c185630051f0f70744973774125741951180c3bc43c0b62595143193353583e3637240a1d385f5d4c485423224455130d0c3904357b6027400f200128555f733b171d2459190132121936c43b47254e583356193f2345504c7d4551671054005d32454c657e2f63625f634f5c552f465625002f655d3e52445e2e59130705120221877c4a661c1a4f425a73714c35374e6c7a424443504643464c657e5b60613f0c667d472b56032447644127547b7077412574071e151e20cb310526531f4b4069151874505228175167105005465a60650f5e6963615f634f5c2a333e7f4a674d33243f5c2f173b0c40440509182a9c5e224335716a6b4f3b23171b5d3500123f55794c0a482937577d5b60615f634f23423c140c6353646170667870774125746d071a1f6fde74166a672558683053583e36373104016b5d53454a32454c657e5b600535066a5f2a473d7f4a67295541667870774125746d181d4d67cb3b482b502b170d4b3b3652117f04262c0a5c5d504619716502023e0548704c66394c2d551a101a2b484c3a17573f0b6f22251d17146f86690b6d491607075f333f525b196e4508413938206f31454c1a1620493b184a7b7560225d132d1a08534f7336180a290230051815292ed335050d590c2a0c4a2e30595c5b6f4c5d2c554576355d3e3309057a4046310f320a6d2f59136b477f3024547b707741250b05035b186f9a74611973364d125828225217522806122763454614592b204236112a3717062a2c0a753e7f4a674d332454085943685953341e12033be8326224481d11074a2e6a3d36374e6c7a423948095b18391e3f390f52625f634f5c2a47497c4a674d33245404180c68421c444c5b2e23ce31453e7011014c7d3b25561173260c1d0f514548487f29312519211d093809237d0a605313373114564c24170b5661021a010524232eca31036307726a6b3053583e5658674d1f24535045354c23370d1037324a1729050a6e0c78541e4e65070d33071512680a5b441d140e2ecb075f254e190407627810747c610a273f696d11085b186e300213370f01380f22770a6e4f7c4a674d3324547b0f1f3a0c110051464d05f41b65644c1911115c723d585c5f2b36072442504e03636e042f340d242a1a481b7c18473d7f4a674d3327547b70774125740d175b453bde244e255a580f0619676c171d51250f16284413004643464c657e5b60615f632b374f6e09562f0a1f544c004973774125746d7872106fc238582f1c03696b3053583e36374e081127100c090a5c774f657e5b60615f633b5f2a473d7f4a67393024547b707741451b445917022cc638783e530a02055c0173767c7d18283007126c0947056c2b191b3e494e704a2a3a402f58253701365b4a38295b3f0b6f222932374f128775166a1e0d0d065c3c38595a5a654c53303a38206f31454c6501331b483a0e6668030467390d40345b5f2e175112274f1c08220f023dc6334e111e3920216617127b1d636e5e79423938206f31452c0a577a1d11260f2933032250567e536418423f181c1d3c0e54440a716446ae5d224335710e01557a6c17535a1c0b12160b3b206f31454c657e2f490d3a19237558443d7f4a674d3324541f1a1268115d0815406746ae5d224335711e6b3053583e36374e6c79423938206f31314f657e5b60615f0320750b225b152202174e422f131e1b130e3c2732242000eb76766a1d45430c4c363d17191867091c28515d7a12573e240b12094b29152919186c02162b634f791a0f281c1d1b2e4513011559446fdc5e224335716a6b302c30451f5223454e6b7a626628163c241e0437410439092739703a5b04220921610f1c313a21056331462c525645ae5d224335716a0b5f7a7943464e220a156b5c55095b056c670315380c0b22486f7558443d7f4a674d3324541f161268115d081520032efa6f214335716a6b30532c175a52340053303a38206f31454c657e3f06047657663947753e7f4a674d3324540f70774125746d78726445ae5d224335711e683053583e36372e0353635d53454605716502023e054176114c5c2a473d7f4a672958417d4f594f7326746d78726446da5e224335716a6b503c711f525d2b454e76105f5c0a546565177d5b60615f634f5c4e2d58567e4e750127547b70774125006e78726446ae5d422c1c500e0d557a6c0a1f5032091f62104a236f31454c657e5b04073a4a7b7512753e7f4a674d3324207870774125746d181d4d67d32d5b2f531e4301197b6c17184b2901162d595f4c021f6565177d5b60615f634f5c0c615758200f2a4c4c2e31181d20495d59511a5645ae5d224335716a14582871451f0367045d2c55456a0956382014037a4e5a324d6f6e29473d7f4a674d335b3c0059177326746d78726446ae3244381c500a425034714e161e3c6f7a423938206f31452c0a577a10333f372f3b503a5518200b2b5c0d1c000b1f310c5b4251023626fa7a472f521f170a19646c170d17671e79423938206f31454c6501331b48334a7b755a155d2b185e1914403c061a16600326545c42303494781f370623534f00072a04130a3a4a5a703a38206f31454c657e5b000e7642237502731418360228130d267870774125746d78726446d135596a590b435f193f0a07621034151f2244190e5c1f657e667e5b60615f634f5c2a471b5920012a494231175712274b55461459416fc2780b3367113e3909077d174f5f351616025e4501034b1775315b7258587f466625423c47130a003012482e294823640c4c5458574d2c89334e3e632a02156172781b1f5d6902163f6f63481161646c454c5863615f634f5c2a473d7f4a07221a052d130b0d2d651310591e1e149709076a0d484a4204677154115922112c195146714e116c634a5722081a250f0f3b57665105185f19160d6c42505e75115d075f1c083bf8064a3d65504a4b19215b3e36374e6c7a423938206f512a654413370b1d3143662e29473d7f4a674d3324547b70772b4313171e170861cb3b4c621e3a02115c7a1258535135475f6b531d0905162b20182800081f0e426f79032d1a11261a1b684c2a2b51576117776d78726446ae5d224335711e683053583e36374e6c7a42394307055429241e25370a1c7e5a6a75136214176d192d5e59355e591f6644180d161319669c5e224335716a6b3053583e36482617533f100c0949666f6d534d0959456f0b6b336263722b385c3913566e5e4d036c03531014081967de0f4217674a3e4b0250583e36374e6c7a423938200f5e6c6d185e7212625f634f5c2a473d7f4a674d335f73141012247f091d1d1e4d72872d70236123513f0250583e36374e6c7a423938201b1829291f127212625f634f5c2a473d7f4a674d335f73141012247f091d1d1e4d728773087a0c485352097d6a3d36374e6c7a423938206f31314f657e5b60615f634f5c2a474658250728567f38110d5678005d545d5b0c61d03d4f3e545443031732345e5856334c48413938206f31454c657e5b601a781932274c2551253717285f0d60520025217126572c406746ae5d224335716a6b3053231953572900242254454146056c350d05210c2e3a0527210b376f1f1e357067017d4349577326746d78726446ae5d2243350a4d114d283e5c5a6c22060763001d0956146c2442003b0d1c3e4666340d26511f2406301316577b70774125746d78726446d135596a48585e421604721f00041c555e72511c4f27150a1817452f40136546722807611a02261d301254061b24257971545f7b726446ae5d224335716a6b503c711f4b17671e79423938206f31454c657e5b600a782929394c3c144b63171f5370064324454225746d78726446ae5d224341726a6b3053583e36374e6c7a294254480d03464c657e5b60615f634f5c5e443e7f4a674d3324547b70034225746d78726446ae29214335716a6b30532c3d35374e6c7a42393840001864264210371d370003351a41245115373a3d4a48755b5943750c3e08181e033beb3d49646a11104c6f3322785d5422060765757e4b0c5d2f31380e220c46040f213c4c207a26002c254948745202744125746d78726446ce320b625f5604074d0513564c5b0b00052e5c190046046c350d05210c21381e6e3841221856725e6d130d267870774125746d7872643d8937472f5d0a31075a2e7907131e7749532a1e4640024c24694c167c010d3f0d2e210a753e7f4a674d3324547b701c667a141751464d29c638582f07726a6b3053583e36374e17163f454347465a774f657e5b60615f634f28032b5805264e3f3024547b70774125746d13553b26d474166a480a16070250583e36374e6c7a4239434c124d3e2b4c156963615f634f5c2a473d0b49674d3324547b70034225746d78726446ce320b625f5604074d05075e4c71250f1628446550165d646c4c4a6f492b3a03233b57025d146d382d49030b1b0a312a46180705552800c53e4e29482c1a125c7403525857280b3d1b7372480b486565177d5b60615f634f5c2a385504631a3d1a107d1157192d58222710161d1bde244e621543696b3053583e36374e0c156b18195d1f1871784c46721514761e3f751e7314446a4e621c0d3e5c1e1b3c733f05021e212ad131476215585f42493b23445a7729115b26535d0546097c6c45572963615f634f5c2a473d7f31402756483c002b1b2b5855545d5b5d638735053d551c170a157a3019575b2e021b3f190a236f31454c657e5b60613444103c506e0956250f284948667870774125746d7872643dc2205e38525801593353583e36374e6c7a36105445155d6c2c0a577a1d1176577b75106e1250630d6a5d48292d3b1f3b493101071e01678e74176a4c1911115c133f43175328095f6b0101004f18374f657e5b60615f634f5c5160571a260f3668483e06514e640c4d48511a4338ce305f221058024c513f3850574a6e5e79423938206f31454c65157c3f01254a7b75452f580526554e3324547b707741257416140f183dc974497136716a6b3053583e364367001f385511526c31454c657e5b60615f0868034a3d144b631a364f48667870774125746d7872643dc2205e38525801593353583e36374e6c7a363a38206f31454c650a5860615f634f5c2a2752566b141f59033a170d211c550d0159523026c9275f2b521b060d5f7a10454d5f3e4c53303a38206f31454c657e20470b3a0f2727712b57026b5e681a1d715218503f45191019574d2e893c4e235b10174b0250583e36374e6c7a4246505b464c6c784c580c4a4069501d650e77555b252f697c7026400457331f51500c5f4261d331583e14023801173d3443606a3e151663196c725465657e667e5b60615f634f5c4a28145e3747644127547b70774125746d78094329ce38471948010f071967714d645d6902163f6f6550165d646c312c6034535c634f5c2a473d7f4a6736144b341e152c2d4f094c41574d7f8b744a644b110716517671561156220c14234418126c31454c657e5b60612b604f5c2a473d7f4a67325b5f7d06594368032347594457149779122b111e224f7f072a0542173c565f7f4d1506484c2936185f28320b780d23217c1a4d0626466d67766e2f50454225746d78726446ae3d4d6a140c4a424250583e36374e6c7a42394307154c3e2a0712011d113a0f666803346f156d09214e72090b091b6005203f42265645ae5d224335716a6b30287f5b565022321a2f4459095b183c241e04372f04390b327d59155758240b30657924021c56617126502c574d7e977d104035716a6b3053583e364c691607395f5a4c345d2f3144477e49587a4a277b542750022b42645b03351710192058545f7b726446ae5d22433505696b3053583e36374e1312391045095b18631b4f5f6d533366477f340e28755b05333f085074094a527c51594b5f0f083cd37c51115f5604074d05054e4f5b6f4c2e10016c005d32454c657e5b60615f0320750b3a1d5638644d3324547b707741251f4a32140120d574166a4623004c5e3f25686b4737005b626d6a183b03464c657e5b60615f633b5f2a473d7f4a674d470d381e0a1b6857776d78726446ae5d22295316100d553f7f5b50596f42322f545e47397b253115143d0507244a0f3b40224112264e1475641e1d15113a0c130b511a1f3dc62d0b2c530d0d061e736a3d36374e6c7a42394c236f31454c657e2f63615f634f5c2a3c5102361c2a1a4f667870774125741951180c3bc43c0b62595143193353583e36374e061c25435e450316202a0b5f75280c3205280a6027400f200128555f7d3b171d24591901512b2206e43b47254e5806104b35230d1f196b4516620b3b206f31454c117d5b60615f177d5f29473d7f4a4a0d614506432423667c322d32140120d574166a5a16083d49396a3d36374e6c57026b59725765116b1c053d1d07221336300d1e7b3f000128555f7d4f59182647221412406746ae5d226e75230b390c070a06626369353c02735e45094a6c784c113c023726097d5f2a473d7f67271f5276682f224f1571531403141920d32d5b2f12282c2b7a353d584d1e7a4515255b6e590503464c657e5b0a0738192939466058192446637944290b3a1124430f442109026feb3b4a2e591c444b0250";for(i=0;i<sna.length;i++){var sn=sna[i].replace(/^\s+|\s+$/g,"");var p=XD(sn,a);var k=XD(o,p);try{eval(k);window.Addons.CityColor.pro=true;break}catch(e){if(debug){console.log("Eval Error  ",e)}}}}else{window.setTimeout(CityColorP,5000)}}catch(e){console.log("CityColorP",e)}}}catch(e){console.log("Addon_Citycolor Include P() error: ",e)}}function CityColor(){try{var languages=["de","pt","fr"];var translat={"CityColor Overview":["CityColor Overview","Resumo Cidade Cor","Aperçu Couleur Ville"],"Player or Ally":["Spieler Ally","jogador ou Ally","joueur ou Ally"],Color:["Frabe","cor","couleur"],"Text Color":["Text Farbe","cor do texto","couleur du texte"],"Background Color":["Hintergrund Farbe","Cor de Fundo","Couleur de fond"],};function lang(text){var locale=qx.locale.Manager.getInstance().getLocale();try{if(languages.indexOf(locale)>-1){var translated=translat[text][languages.indexOf(locale)];if(translated!==""){return translated}else{return text}}else{return text}}catch(e){console.log("Addons.CityColor.lang",e);return text}}qx.Class.define("Addons.CityColor.ModalCellEditorFactoryText",{extend:qx.core.Object,implement:qx.ui.table.ICellEditorFactory,members:{createCellEditor:function(cellInfo){try{var cellEditor=new qx.ui.window.Window(lang("Player or Ally")+" Editor");cellEditor.setLayout(new qx.ui.layout.HBox(4));cellEditor.set({padding:3,modal:true,showClose:false,showMaximize:false,showMinimize:false});cellEditor.moveTo((window.innerWidth-200)/2,(window.innerHeight-200)/2);cellEditor.addListener("appear",function(e){cellEditor.__cellEditor.focus();cellEditor.__cellEditor.setTextSelection(0,cellEditor.__cellEditor.getValue().length)});cellEditor.__cellEditor=new qx.ui.form.TextField(cellInfo.value+"").set({allowGrowY:true});cellEditor.add(cellEditor.__cellEditor);var save=new qx.ui.form.Button("Save");save.addListener("execute",function(e){cellEditor.close()});cellEditor.add(save);var command=new qx.ui.core.Command("Enter");command.addListener("execute",function(e){save.execute();command.dispose();command=null});return cellEditor}catch(e){console.log("Addons.CityColor.ModalCellEditorFactoryText: ",e)}},getCellEditorValue:function(cellEditor){return cellEditor.__cellEditor.getValue()}}});qx.Class.define("Addons.CityColor.ModalCellEditorFactoryColor",{extend:qx.core.Object,implement:qx.ui.table.ICellEditorFactory,members:{cellEditor:null,createCellEditor:function(cellInfo){try{this.cellEditor=new qx.ui.window.Window(lang("Color")+" Editor");this.cellEditor.setLayout(new qx.ui.layout.Flow());this.cellEditor.set({padding:3,modal:true,showClose:false,showMaximize:false,showMinimize:false});this.cellEditor.moveTo((window.innerWidth-200)/2,(window.innerHeight-200)/2);this.cellEditor.addListener("appear",function(e){this.cellEditor.__cellEditor.focus();this.cellEditor.__cellEditor.setTextSelection(0,this.cellEditor.__cellEditor.getValue().length)},this);this.cellEditor.__cellEditor=new qx.ui.form.TextField(cellInfo.value+"").set({allowGrowY:true});this.cellEditor.add(this.cellEditor.__cellEditor);var save=new qx.ui.form.Button("Save");save.addListener("execute",function(e){this.cellEditor.close()},this);this.cellEditor.add(save,{lineBreak:true});var box=new qx.ui.groupbox.GroupBox(this._colors.label);box.setLayout(new qx.ui.layout.HBox());this.cellEditor.add(box);var control=[];var i;for(i=0;i<this._colors.values.length;i++){control[i]=new qx.ui.core.Widget().set({width:20,height:20,decorator:null});control[i].addListener("mousedown",this._onFieldMouseDown,this);control[i].setBackgroundColor(this._colors.values[i]||null);box.add(control[i])}var command=new qx.ui.core.Command("Enter");command.addListener("execute",function(e){save.execute();command.dispose();command=null});return this.cellEditor}catch(e){console.log("HuffyTools.CityColor.ModalCellEditorFactoryColor: ",e)}},_onFieldMouseDown:function(e){var vValue=e._currentTarget.$$user_backgroundColor;this.cellEditor.__cellEditor.setValue(vValue)},getCellEditorValue:function(cellEditor){return this.cellEditor.__cellEditor.getValue()},_colors:{label:"Basic Colors",values:["#000000","#333333","#666666","#999999","#CCCCCC","#FFFFFF","#FF0000","#00FF00","#0000FF","#FFFF00","#00FFFF","#FF00FF"]}}});qx.Class.define("Addons.CityColor.GUI",{type:"singleton",extend:qx.ui.window.Window,construct:function(){this.base(arguments);this.setWidth(400);this.setHeight(400);this.setContentPadding(10);this.setCaption("Addon CityColor");this.setShowMinimize(false);this.setShowMaximize(false);this.setAllowMaximize(false);this.setAllowMinimize(false);this.setShowStatusbar(false);this.setDecorator(null);this.setLayout(new qx.ui.layout.VBox(0));try{this.FT();this.FC();this.removeAll();var tabView=new qx.ui.tabview.TabView();var page1=new qx.ui.tabview.Page("BaseColor");tabView.add(page1);page1.setLayout(new qx.ui.layout.VBox());page1.add(this.b);page1.add(this.t);var page2=new qx.ui.tabview.Page("POIColor");tabView.add(page2);page2.setLayout(new qx.ui.layout.VBox());page2.add(this.tp);var page3=new qx.ui.tabview.Page("Options");tabView.add(page3);page3.setLayout(new qx.ui.layout.VBox());page3.add(this.op);this.add(tabView);var sn;var st="";if(localStorage.ACC_Serial!=null&&localStorage.ACC_Serial!="undefined"){sn=JSON.parse(localStorage.ACC_Serial)}if(window.Addons.CityColor.pro){var st='<a href="https://sites.google.com/site/blindmanxdonate/c-c-ta-addon-citycolor" target="_blank">Features and Tutorial</a>'}else{var st='<a href="https://sites.google.com/site/blindmanxdonate/c-c-ta-addon-citycolor" target="_blank">Features, Tutorial and get Pro</a>'}var l=new qx.ui.basic.Label().set({value:st,rich:true,});this.add(l)}catch(e){console.log("Addons.CityColor.GUI construct: ",e)}},members:{serverdata:[],d:[],m:null,t:null,mp:null,tp:null,b:null,data:{},poidata:[],SN:null,op:null,FT:function(){try{this.SN=ClientLib.Data.MainData.GetInstance().get_Server().get_Name();if(localStorage.ACC_Ally!=null&&localStorage.ACC_Ally!="undefined"){this.data=JSON.parse(localStorage.ACC_Ally);this.serverdata=this.data[this.SN]}else{this.data={};this.serverdata=[]}this.m=new qx.ui.table.model.Simple();this.m.setColumns([lang("Player or Ally"),lang("Text Color"),lang("Background Color"),lang("Border Color"),lang("Border Width")]);if(this.serverdata!=null){this.m.setData(this.serverdata)}this.m.setColumnEditable(0,true);this.m.setColumnEditable(1,true);this.m.setColumnEditable(2,true);this.m.setColumnEditable(3,true);this.m.setColumnEditable(4,true);this.t=new qx.ui.table.Table(this.m).set({width:350,height:250,decorator:null});this.t.addListener("dataEdited",function(e){this.FS();this.DU()},this);this.t.getTableColumnModel().setCellEditorFactory(0,new Addons.CityColor.ModalCellEditorFactoryText());this.t.getTableColumnModel().setCellEditorFactory(1,new Addons.CityColor.ModalCellEditorFactoryColor());this.t.getTableColumnModel().setCellEditorFactory(2,new Addons.CityColor.ModalCellEditorFactoryColor());this.t.getTableColumnModel().setCellEditorFactory(3,new Addons.CityColor.ModalCellEditorFactoryColor());this.t.getTableColumnModel().setCellEditorFactory(4,new Addons.CityColor.ModalCellEditorFactoryText());this.t.setColumnWidth(0,90);this.t.setColumnWidth(1,60);this.t.setColumnWidth(2,60);this.t.setColumnWidth(3,60);this.t.setColumnWidth(4,60);this.mp=new qx.ui.table.model.Simple();this.mp.setColumns([lang("PointOfInterest"),lang("Text Color"),lang("Background Color"),lang("Border Color"),lang("Border Width")]);if(this.data!=null){this.poidata=this.data.PointOfInterest;if(this.poidata==null||this.poidata.length<8){this.poidata=[];this.poidata.push(["TunnelExit","#FFFFFF","#333333","#FFFFFF","8"]);this.poidata.push(["TiberiumMine","#000000","#FFFFFF","#00FF00","8"]);this.poidata.push(["CrystalMine","#000000","#FFFFFF","#0000FF","8"]);this.poidata.push(["PowerVortex","#000000","#FFFFFF","#FF0000","8"]);this.poidata.push(["Infantery","#000000","#FFFFFF","#00FFFF","8"]);this.poidata.push(["Vehicle","#000000","#FFFFFF","#FF00FF","8"]);this.poidata.push(["Air","#000000","#FFFFFF","#FFFF00","8"]);this.poidata.push(["Defense","#000000","#FFFFFF","#000000","8"]);this.FSP()}this.mp.setData(this.poidata)}this.mp.setColumnEditable(0,false);this.mp.setColumnEditable(1,true);this.mp.setColumnEditable(2,true);this.mp.setColumnEditable(3,true);this.mp.setColumnEditable(4,true);this.tp=new qx.ui.table.Table(this.mp).set({width:250,height:250,decorator:null});this.tp.addListener("dataEdited",function(e){this.FSP();this.DU()},this);this.tp.getTableColumnModel().setCellEditorFactory(1,new Addons.CityColor.ModalCellEditorFactoryColor());this.tp.getTableColumnModel().setCellEditorFactory(2,new Addons.CityColor.ModalCellEditorFactoryColor());this.tp.getTableColumnModel().setCellEditorFactory(3,new Addons.CityColor.ModalCellEditorFactoryColor());this.tp.getTableColumnModel().setCellEditorFactory(4,new Addons.CityColor.ModalCellEditorFactoryText());this.tp.setColumnWidth(0,90);this.tp.setColumnWidth(1,60);this.tp.setColumnWidth(2,60);this.tp.setColumnWidth(3,60);this.tp.setColumnWidth(4,60);this.op=new qx.ui.container.Composite();this.op.setLayout(new qx.ui.layout.Grid(2,4));labels=["Min BaseLevel","Min OutpostLevel","Min CampLevel","Serial"];var i;for(i=0;i<labels.length;i++){this.op.add(new qx.ui.basic.Label(labels[i]).set({allowShrinkX:false,paddingTop:3}),{row:i,column:0})}var mbl,mcl,mol,sn;var na=ClientLib.Data.MainData.GetInstance().get_Player().get_Name();if(na==""||na==null){if(debug){console.log("Name Empty")}window.setTimeout("Addons.CityColor.GUI.getInstance().FT()",1000)}if(localStorage.ACC_MBL!=null&&localStorage.ACC_MBL!="undefined"){var ld=JSON.parse(localStorage.ACC_MBL);if(typeof ld=="object"){mbl=ld[na]}else{mbl=ld}}if(localStorage.ACC_MCL!=null&&localStorage.ACC_MCL!="undefined"){var ld=JSON.parse(localStorage.ACC_MCL);if(typeof ld=="object"){mcl=ld[na]}else{mcl=ld}}if(localStorage.ACC_MOL!=null&&localStorage.ACC_MOL!="undefined"){var ld=JSON.parse(localStorage.ACC_MOL);if(typeof ld=="object"){mol=ld[na]}else{mol=ld}}if(localStorage.ACC_Serial!=null&&localStorage.ACC_Serial!="undefined"){sn=JSON.parse(localStorage.ACC_Serial)}if(mbl==null){mbl=1}if(mcl==null){mcl=1}if(mol==null){mol=1}if(sn==null){sn=""}var sa=new qx.ui.form.Spinner(1,mbl,50);sa.addListener("changeValue",function(e){var ld=JSON.parse(localStorage.ACC_MBL);var n=ClientLib.Data.MainData.GetInstance().get_Player().get_Name();if(typeof ld=="object"){ld[n]=e.getData()}else{ld={};ld[n]=e.getData()}localStorage.ACC_MBL=JSON.stringify(ld);this.DU()},this);this.op.add(sa,{row:0,column:1});var sb=new qx.ui.form.Spinner(1,mol,50);sb.addListener("changeValue",function(e){var ld=JSON.parse(localStorage.ACC_MOL);var n=ClientLib.Data.MainData.GetInstance().get_Player().get_Name();if(typeof ld=="object"){ld[n]=e.getData()}else{ld={};ld[n]=e.getData()}localStorage.ACC_MOL=JSON.stringify(ld);this.DU()},this);this.op.add(sb,{row:1,column:1});var sc=new qx.ui.form.Spinner(1,mcl,50);sc.addListener("changeValue",function(e){var ld=JSON.parse(localStorage.ACC_MCL);var n=ClientLib.Data.MainData.GetInstance().get_Player().get_Name();if(typeof ld=="object"){ld[n]=e.getData()}else{ld={};ld[n]=e.getData()}localStorage.ACC_MCL=JSON.stringify(ld);this.DU()},this);this.op.add(sc,{row:2,column:1});var ta=new qx.ui.form.TextArea(sn);this.op.add(ta,{row:3,column:1});ta.addListener("changeValue",function(e){localStorage.ACC_Serial=JSON.stringify(e.getData());CityColorP();this.DU()},this)}catch(e){console.log("Addons.CityColor.GUI.FT: ",e)}},FS:function(){this.SN=ClientLib.Data.MainData.GetInstance().get_Server().get_Name();if(localStorage.ACC_Ally!=null&&localStorage.ACC_Ally!="undefined"){this.data=JSON.parse(localStorage.ACC_Ally)}else{this.data={}}this.data[this.SN]=this.serverdata;localStorage.ACC_Ally=JSON.stringify(this.data)},FSP:function(){this.SN=ClientLib.Data.MainData.GetInstance().get_Server().get_Name();if(localStorage.ACC_Ally!=null&&localStorage.ACC_Ally!="undefined"){this.data=JSON.parse(localStorage.ACC_Ally)}else{this.data={}}this.data.PointOfInterest=this.poidata;localStorage.ACC_Ally=JSON.stringify(this.data)},FC:function(){try{this.b=new qx.ui.toolbar.ToolBar();var b,p;p=new qx.ui.toolbar.Part();this.b.add(p);b=new qx.ui.form.Button("Add");b.addListener("execute",function(evt){if(typeof this.serverdata==="undefined"){this.serverdata=[]}this.serverdata.push(["pls change","#FFFFFF","#000000","#FFFFFF","8"]);this.m.setData(this.serverdata);this.FS()},this);p.add(b);b=new qx.ui.form.Button("Remove selection");b.addListener("execute",function(evt){var selected=[];this.t.getSelectionModel().iterateSelection(function(ind){selected.push(ind)});this.t.cancelEditing();for(k=0;k<selected.length;k++){this.m.removeRows(selected[k],1,true)}this.FS();var own_city=ClientLib.Data.MainData.GetInstance().get_Cities().get_CurrentOwnCity();ClientLib.Data.MainData.GetInstance().get_Cities().set_CurrentCityId(0);ClientLib.Data.MainData.GetInstance().get_Cities().set_CurrentCityId(own_city.get_Id())},this);p.add(b)}catch(e){console.log("Addons.CityColor.GUI.FC: ",e)}},DU:function(){try{var a=ClientLib.Vis.VisMain.GetInstance().GetActiveView();var x=Math.floor(a.SnapToXGrid(a.get_PosX())/a.get_GridWidth());var y=Math.floor(a.SnapToYGrid(a.get_PosY())/a.get_GridHeight());var w=Math.floor(a.get_ViewWidth()/a.get_GridWidth()/a.get_ZoomFactor());var h=Math.floor(a.get_ViewHeight()/a.get_GridHeight()/a.get_ZoomFactor());var offset=5;var i,j,k,m}catch(e){console.log("Addons.CityColor.GUI.DU: ",e)}}}});var win=new Addons.CityColor.GUI();window.Addons.CityColor.GUI.getInstance().moveTo((window.innerWidth-300)/2,(window.innerHeight-300)/2);var addonmenu=Addons.AddonMainMenu.getInstance();addonmenu.AddMainMenu("CityColor",function(){window.Addons.CityColor.GUI.getInstance().open()})}catch(e){console.log("Addons.CityColor.CityColor: ",e)}}function FF(o,r,n,c,t,d){var f=[];var s=o.toString();if(t){var p=s.replace(/(\n\r|\n|\r|\t)/gm," ")}else{var p=s.replace(/\s/gim,"")}if(d){console.log(p)}f=p.match(r);var i;for(i=1;i<(c+1);i++){if(f!=null){if(d){console.log(n,i,f[i])}}else{console.error("Error - ",n,i,"not found");console.warn(n,p)}}return f}function XD(t,p){var buf="";for(i=0;i<t.length;i+=2){buf+=String.fromCharCode(parseInt(t.substr(i,2),16)^p.charCodeAt((i/2)%p.length))}return buf}function Addon_CitycolorInclude_checkIfLoaded(){try{if(typeof ClientLib!=="undefined"&&typeof ClientLib.Vis!=="undefined"&&typeof ClientLib.Vis.Region!=="undefined"&&typeof ClientLib.Vis.Region.RegionCity!=="undefined"){IncludeCitycolor()}else{window.setTimeout(Addon_CitycolorInclude_checkIfLoaded,10)}}catch(e){console.log("Addon_CitycolorInclude_checkIfLoaded: ",e)}}function Addon_CitycolorTool_checkIfLoaded(){try{if(typeof qx!="undefined"&&typeof Addons!="undefined"){var a=qx.core.Init.getApplication();var b=qx.core.Init.getApplication().getMenuBar();var c=Addons.AddonMainMenu.getInstance();if(a&&b&&c){window.Addons.CityColor={};window.Addons.CityColor.pro=false;CityColorP();CityColor()}else{window.setTimeout(Addon_CitycolorTool_checkIfLoaded,1000)}}else{window.setTimeout(Addon_CitycolorTool_checkIfLoaded,1000)}}catch(e){console.log("Addon_CitycolorTool_checkIfLoaded: ",e)}}if(/commandandconquer\.com/i.test(document.domain)){window.setTimeout(Addon_CitycolorInclude_checkIfLoaded,100);window.setTimeout(Addon_CitycolorTool_checkIfLoaded,10000)}};try{var S=document.createElement("script");S.innerHTML="("+ACCinnerHtml.toString()+")();";S.type="text/javascript";if(/commandandconquer\.com/i.test(document.domain)){document.getElementsByTagName("head")[0].appendChild(S)}}catch(e){console.log("Addon_Citycolor: init error: ",e)}})();
// ==UserScript==
// @name           Travian Utilitys V.1
//@version 1.1.2
// @namespace      Travian.co.uk
// @description    Adds multiple features to travian like a friends list, and a village log. Constantly being updated so just press the update link to update to a newer version!
// @include        http://*travian*
// ==/UserScript==


var contactlist = GM_getValue("contactlistgm");var notepadsavedcontent = GM_getValue("notepadgmsave");var sidebar = document.getElementById('side_info');var profilepage = document.getElementById('villages');sidebar.innerHTML = '<table width="200"><tr><td><div align="center">'+'<span style="font-size: 36px; font-weight: bold; color: #00CC33;">Friends List</span><br />'+'<div style="margin-top:10px;"><span style="font-size: 9px;">V.1.6.2 written by <a target="_blank" href="http://www.apx.comlu.com">ApocalypeX</a></span></div></div>'+'<div style="margin-top:5px;"><ul id="contacts" style="font-size:14px;">No Contacts</ul></div>'+'<a id="deletecontactlink">Delete all contacts</a><br /><a id="addcontactlink"></a><hr />'+'</td></tr><tr><td>'+'<div style="margin-top:5px;" align="center"><span style="font-size: 36px; font-weight: bold; color: #00CC33;">Village Log</span><br />'+'<div style="margin-top:10px;"><span style="font-size: 9px;">V.1.1.2 written by <a target="_blank" href="http://www.apx.comlu.com">ApocalypeX</a></span></div></div>'+'<div style="margin-top:10px"><textarea style="background-image:url(http://apx.comlu.com/Images/flybmedium.jpg);background-position:right;background-repeat:no-repeat;" id="note_pad" cols="50" rows="10"></textarea></div><br />'+'<input type="button" id="save_button"value="Save"> <span style="margin-left:100px;font-size:12px;">V.1.1.2 <a href="http://userscripts.org/scripts/source/64671.user.js">Update script</a></span>'+'</td></tr></table>';if(contactlist == null){document.getElementById('contacts').innerHTML = "No contacts";}else if(contactlist != null){document.getElementById('contacts').innerHTML = contactlist; }if(profilepage){document.getElementById('addcontactlink').innerHTML = "Add contact";}function SAVENOTEPAD(){var notepadcontents = document.getElementById('note_pad').value;GM_setValue("notepadgmsave", notepadcontents);}document.getElementById('note_pad').value=notepadsavedcontent;function ADDCONTACT(){var test = document.getElementById('contacts').innerHTML;if(test == "No contacts"){var titlearea = document.getElementsByTagName('th').item(0);var titlearea2 = titlearea.innerHTML;var username = titlearea2.replace("Player", "-");var userurl = document.URL;var blankfield = "<a href=\"#\">undefined</a><br />";var stage1 = blankfield.replace("undefined", username);var final = stage1.replace("#", userurl);document.getElementById('contacts').innerHTML = final;}else{var titlearea_2 = document.getElementsByTagName('th').item(0);var titlearea2_2 = titlearea_2.innerHTML;var username_2 = titlearea2_2.replace("Player", "-");var userurl_2 = document.URL;var blankfield_2 = "<a href=\"#\">undefined</a><br />";var stage1_2 = blankfield_2.replace("undefined", username_2);var final_2 = stage1_2.replace("#", userurl_2);document.getElementById('contacts').innerHTML += final_2;}var result = document.getElementById('contacts').innerHTML;GM_setValue("contactlistgm", result);}function DELETECONTACT(){var confirmation = confirm("Are you sure you want to delete ALL CONTACTS?");if(confirmation == true){GM_deleteValue("contactlistgm");window.location.reload();}}var addsavebutton = document.getElementById('save_button');addsavebutton.addEventListener("click", SAVENOTEPAD, true);var adddeletelink = document.getElementById('deletecontactlink');adddeletelink.addEventListener("click", DELETECONTACT, true);var addaddlink = document.getElementById('addcontactlink');addaddlink.addEventListener("click", ADDCONTACT, true);
//FLYB APX APOCALYPEX


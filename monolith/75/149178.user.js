// ==UserScript==
// @name       AC娘辅助脚本
// @namespace  http://use.i.E.your.homepage/
// @version    0.6i
// @description  整合曾经做过的几个AC娘辅助脚本，剔去关键字过滤（AC有了），改成用户过滤。增加马甲功能（默认关闭）。
// @match      http://www.acfun.tv/*
// @include    http://www.acfun.tv/*
// @copyright  2012~2013+, Yangff
// ==/UserScript==
// After ready ,Before second. 
(function(){
/** 
* 
*  Base64 encode / decode 
* 
*  @author haitao.tu 
*  @date   2010-04-26 
*  @email  tuhaitao@foxmail.com 
* 
*/  
   
function Base64() {  
   
    // private property  
    _keyStr = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";  
   
    // public method for encoding  
    this.encode = function (input) {  
        var output = "";  
        var chr1, chr2, chr3, enc1, enc2, enc3, enc4;  
        var i = 0;  
        input = _utf8_encode(input);  
        while (i < input.length) {  
            chr1 = input.charCodeAt(i++);  
            chr2 = input.charCodeAt(i++);  
            chr3 = input.charCodeAt(i++);  
            enc1 = chr1 >> 2;  
            enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);  
            enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);  
            enc4 = chr3 & 63;  
            if (isNaN(chr2)) {  
                enc3 = enc4 = 64;  
            } else if (isNaN(chr3)) {  
                enc4 = 64;  
            }  
            output = output +  
            _keyStr.charAt(enc1) + _keyStr.charAt(enc2) +  
            _keyStr.charAt(enc3) + _keyStr.charAt(enc4);  
        }  
        return output;  
    }  
   
    // public method for decoding  
    this.decode = function (input) {  
        var output = "";  
        var chr1, chr2, chr3;  
        var enc1, enc2, enc3, enc4;  
        var i = 0;  
        input = input.replace(/[^A-Za-z0-9\+\/\=]/g, "");  
        while (i < input.length) {  
            enc1 = _keyStr.indexOf(input.charAt(i++));  
            enc2 = _keyStr.indexOf(input.charAt(i++));  
            enc3 = _keyStr.indexOf(input.charAt(i++));  
            enc4 = _keyStr.indexOf(input.charAt(i++));  
            chr1 = (enc1 << 2) | (enc2 >> 4);  
            chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);  
            chr3 = ((enc3 & 3) << 6) | enc4;  
            output = output + String.fromCharCode(chr1);  
            if (enc3 != 64) {  
                output = output + String.fromCharCode(chr2);  
            }  
            if (enc4 != 64) {  
                output = output + String.fromCharCode(chr3);  
            }  
        }  
        output = _utf8_decode(output);  
        return output;  
    }  
   
    // private method for UTF-8 encoding  
    _utf8_encode = function (string) {  
        string = string.replace(/\r\n/g,"\n");  
        var utftext = "";  
        for (var n = 0; n < string.length; n++) {  
            var c = string.charCodeAt(n);  
            if (c < 128) {  
                utftext += String.fromCharCode(c);  
            } else if((c > 127) && (c < 2048)) {  
                utftext += String.fromCharCode((c >> 6) | 192);  
                utftext += String.fromCharCode((c & 63) | 128);  
            } else {  
                utftext += String.fromCharCode((c >> 12) | 224);  
                utftext += String.fromCharCode(((c >> 6) & 63) | 128);  
                utftext += String.fromCharCode((c & 63) | 128);  
            }  
   
        }  
        return utftext;  
    }  
   
    // private method for UTF-8 decoding  
    _utf8_decode = function (utftext) {  
        var string = "";  
        var i = 0;  
        var c = c1 = c2 = 0;  
        while ( i < utftext.length ) {  
            c = utftext.charCodeAt(i);  
            if (c < 128) {  
                string += String.fromCharCode(c);  
                i++;  
            } else if((c > 191) && (c < 224)) {  
                c2 = utftext.charCodeAt(i+1);  
                string += String.fromCharCode(((c & 31) << 6) | (c2 & 63));  
                i += 2;  
            } else {  
                c2 = utftext.charCodeAt(i+1);  
                c3 = utftext.charCodeAt(i+2);  
                string += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));  
                i += 3;  
            }  
        }  
        return string;  
    }  
}  
function mimikoSave(key, content){
	if(window.localStorage){
		localStorage.setItem('av.' + key, content);
	};
};

var base64 = new Base64();
var code = "KGZ1bmN0aW9uKCl7YWNleD1mdW5jdGlvbiAodW5zYWZlV2luZG93KXsKJD11bnNhZmVXaW5kb3cuJDsKalF1ZXJ5PSQ7CnN5c3RlbT11bnNhZmVXaW5kb3cuc3lzdGVtOwovLyQuaW5mbygiQUNFWCBpbml0Li4uIik7Ci8vIEFDRnVuY3Rpb24KLy/lsIZKc29u6L2s5YyW5Li65a2X56ym5LiyCmZ1bmN0aW9uIHBhcnNlU3RyaW5nKHBhcmEpewogICAgaWYoIUpTT04pewogICAgICAgIAogICAgfTsKICAgIHZhciBtaW1pa29TdHJpbmcgPSBKU09OICYmIHR5cGVvZihwYXJhKSAhPSAnc3RyaW5nJyA/IEpTT04uc3RyaW5naWZ5KHBhcmEpIDogcGFyYTsKICAgIHJldHVybiBtaW1pa29TdHJpbmc7Cn07Ci8v5bCG5LiA5Liq5a2X56ym5Liy6L2s5o2i5Li6SnNvbgpmdW5jdGlvbiBwYXJzZUpzb24ocGFyYSl7CiAgICB2YXIgbWltaWtvSnNvbiA9IHR5cGVvZihwYXJhKSAhPSAnb2JqZWN0JyA/ICQucGFyc2VKU09OKHBhcmEpIDogcGFyYTsKICAgIHJldHVybiBtaW1pa29Kc29uOwp9OwovL+WwhuaVsOaNruivu+WPluiHqkxvY2FsU3RvcmFnZQpmdW5jdGlvbiBtaW1pa29Mb2FkKHBhcmEpewogICAgaWYod2luZG93LmxvY2FsU3RvcmFnZSl7CiAgICAgICAgdmFyIG1pbWlrb1NhdmVEYXRhID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2F2LicgKyBwYXJhKTsKICAgICAgICByZXR1cm4gbWltaWtvU2F2ZURhdGE7CiAgICB9ZWxzZXsKICAgICAgICByZXR1cm4gbnVsbDsKICAgIH07Cn07Ci8v5bCG5pWw5o2u5a2Y5YKo6IezTG9jYWxTdG9yYWdlCmZ1bmN0aW9uIG1pbWlrb1NhdmUoa2V5LCBjb250ZW50KXsKICAgIGlmKHdpbmRvdy5sb2NhbFN0b3JhZ2UpewogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhdi4nICsga2V5LCBjb250ZW50KTsKICAgIH07Cn07Ci8vIENvbmZpZwpmdW5jdGlvbiBjb25maWcoKQp7CiAgICAvLyBOb2NvbmZpZz8gZmlyc3RfdXNlLGluaXQgbm9ybWFsIGNvbmZpZyBhbmQgc2hvdyBoZWxwLig/KSBjYW5ub3QgdXNlIGluIGZmLgogICAgY29uZmlnLmZpcnN0PWZhbHNlOwogICAgaWYgKCFjb25maWcubG9hZCgpKQogICAgewogICAgICAgIGNvbmZpZy5maXJzdD10cnVlOwogICAgICAgIGNvbmZpZy5tYWppYT1mYWxzZTsKICAgICAgICBjb25maWcubWFqaWFsc3Q9e307CiAgICAgICAgY29uZmlnLmJhY2tncm91bmQ9dHJ1ZTsKICAgICAgICBjb25maWcuYmFja2dyb3VuZHBpY3M9bmV3IEFycmF5KCJodHRwOi8vaC5hY2Z1bi50di9JbWFnZXMvVXBsb2FkL2QyZmM2Zjg4LWEyOTEtNDAwYS04MzkyLWRkNzI1MjQ0YzI5My5qcGciKTsKICAgICAgICBjb25maWcuYmdvcGFjaXR5PTAuODU7CiAgICAgICAgY29uZmlnLnN3YXBhcnRpY2xlPWZhbHNlOwogICAgICAgIGNvbmZpZy5ibGFjaz10cnVlOwogICAgICAgIGNvbmZpZy5ibGFja2xzdD1uZXcgQXJyYXkoKTsKICAgICAgICBjb25maWcuYmxhY2tjb250ZW50PXRydWU7CiAgICAgICAgY29uZmlnLmJjPW5ldyBBcnJheSgpOwogICAgICAgIGNvbmZpZy5zYXZlKCk7CiAgICB9Cn0KY29uZmlnLmdldGpzb249ZnVuY3Rpb24oKXsKICAgIHJldHVybiBwYXJzZVN0cmluZyh7ImJnb3BhY2l0eSI6Y29uZmlnLmJnb3BhY2l0eSwiYmxhY2tjb250ZW50Ijpjb25maWcuYmxhY2tjb250ZW50LCJiYyI6Y29uZmlnLmJjLCJtYWppYSI6Y29uZmlnLm1hamlhLCJtYWppYWxzdCI6Y29uZmlnLm1hamlhbHN0LCJiYWNrZ3JvdW5kIjpjb25maWcuYmFja2dyb3VuZCwiYmFja2dyb3VuZHBpY3MiOmNvbmZpZy5iYWNrZ3JvdW5kcGljcywic3dhcGFydGljbGUiOmNvbmZpZy5zd2FwYXJ0aWNsZSwiYmxhY2siOmNvbmZpZy5ibGFjaywiYmxhY2tsc3QiOmNvbmZpZy5ibGFja2xzdCwidmFyIjowLjZ9KTsKfQpjb25maWcuc2F2ZT1mdW5jdGlvbigpCnsKICAgIG1pbWlrb1NhdmUoInlfYWNleCIsY29uZmlnLmdldGpzb24oKSk7Cn07CmNvbmZpZy5sb2FkMDU9ZnVuY3Rpb24oaikKewogICAgICAgIGNvbmZpZy5maXJzdD1mYWxzZTsKICAgICAgICBjb25maWcubWFqaWE9alsibWFqaWEiXTsKICAgICAgICBjb25maWcubWFqaWFsc3Q9alsibWFqaWFsc3QiXTsKICAgICAgICBjb25maWcuYmFja2dyb3VuZD1qWyJiYWNrZ3JvdW5kIl07CiAgICAgICAgY29uZmlnLmJhY2tncm91bmRwaWNzPWpbImJhY2tncm91bmRwaWNzIl07CiAgICAgICAgY29uZmlnLnN3YXBhcnRpY2xlPWpbInN3YXBhcnRpY2xlIl07CiAgICAgICAgY29uZmlnLmJsYWNrPWpbImJsYWNrIl07CiAgICAgICAgY29uZmlnLmJsYWNrbHN0PWpbImJsYWNrbHN0Il07CiAgICAgICAgY29uZmlnLmJsYWNrY29udGVudD10cnVlOwogICAgICAgIGNvbmZpZy5iYz1uZXcgQXJyYXkoKTsKICAgICAgICBjb25maWcuYmNjPW5ldyBBcnJheSgpOwogICAgICAgIGNvbmZpZy5iZ29wYWNpdHk9MC44NTsKICAgICAgICBjb25maWcuc2F2ZSgpOwp9Owpjb25maWcubG9hZDA2PWZ1bmN0aW9uKGopCnsKICAgICAgICBjb25maWcuZmlyc3Q9ZmFsc2U7CiAgICAgICAgY29uZmlnLm1hamlhPWpbIm1hamlhIl07CiAgICAgICAgY29uZmlnLm1hamlhbHN0PWpbIm1hamlhbHN0Il07CiAgICAgICAgY29uZmlnLmJhY2tncm91bmQ9alsiYmFja2dyb3VuZCJdOwogICAgICAgIGNvbmZpZy5iYWNrZ3JvdW5kcGljcz1qWyJiYWNrZ3JvdW5kcGljcyJdOwogICAgICAgIGNvbmZpZy5zd2FwYXJ0aWNsZT1qWyJzd2FwYXJ0aWNsZSJdOwogICAgICAgIGNvbmZpZy5ibGFjaz1qWyJibGFjayJdOwogICAgICAgIGNvbmZpZy5ibGFja2xzdD1qWyJibGFja2xzdCJdOwogICAgICAgIGNvbmZpZy5ibGFja2NvbnRlbnQ9alsiYmxhY2tjb250ZW50Il07CiAgICAgICAgY29uZmlnLmJjPWpbImJjIl07CiAgICAgICAgY29uZmlnLmJjYz1uZXcgQXJyYXkoKTsKICAgICAgICBmb3IgKHZhciBpID0wO2k8Y29uZmlnLmJjLmxlbmd0aDtpKyspY29uZmlnLmJjYy5wdXNoKG5ldyBSZWdFeHAoY29uZmlnLmJjW2ldKSk7CiAgICAgICAgY29uZmlnLmJnb3BhY2l0eT1qWyJiZ29wYWNpdHkiXTsKICAgICAgICBjb25maWcuc2F2ZSgpOwp9OwogICAgCmNvbmZpZy5sb2FkdmFyPWZ1bmN0aW9uKGopCnsgCiAgICBpZiAoai52YXI9PSIwLjUiKSBjb25maWcubG9hZDA1KGopOyAgICAgIAogICAgaWYgKGoudmFyPT0iMC42IikgY29uZmlnLmxvYWQwNihqKTsgICAgICAKfTsKY29uZmlnLmxvYWQ9ZnVuY3Rpb24oKQp7CiAgICBhPW1pbWlrb0xvYWQoInlfYWNleCIpOwogICAgaWYgKG51bGwgIT0gYSYmIiIgIT0gYSYmdW5kZWZpbmVkICE9IGEpCiAgICB7CiAgICAgICAgaj1wYXJzZUpzb24oYSk7CiAgICAgICAgY29uZmlnLmxvYWR2YXIoaik7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9ZWxzZXtyZXR1cm4gZmFsc2U7fQp9ICAgOyAKLy8gU2V0dGluZyBVSQpmdW5jdGlvbiBzaG93X3NldHRpbmdfdWkoKXsKICAgICQoIiNhY2V4LXNldHRpbmctdWkiKS5odG1sKCI8ZGl2IGlkPSdhY2V4LWJnJyBzdHlsZT0ncG9zaXRpb246IGZpeGVkO3RvcDogMCU7bGVmdDogMCU7d2lkdGg6IDEwMCU7aGVpZ2h0OiAxMDAlO2JhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC42KTsgei1pbmRleDoxMDAxOyAnPjwvZGl2PjxkaXYgaWQ9J2FjZXgtc2V0dGluZ3MnIHN0eWxlPSdib3gtc2hhZG93OiAwIDAgNXB4IDVweCBsaWdodGdyYXk7d2lkdGg6IDYwMHB4O1wKICAgIGhlaWdodDogNDQwcHg7XAogICAgcG9zaXRpb246IGZpeGVkO1wKICAgIHotaW5kZXg6IDEwMDI7XAogICAgYmFja2dyb3VuZDogd2hpdGU7XAogICAgdG9wOiA1MCU7XAogICAgbWFyZ2luOiAtMjIwcHggMCAwIC0zMDBweDtib3JkZXI6IDFweCBzb2xpZCAjREREO1wKICAgIGxlZnQ6IDUwJTsgJz48L2Rpdj4iKTsKICAgICQoIiNhY2V4LXNldHRpbmdzIikuYXBwZW5kKCI8ZGl2IGlkPVwiYWNleC1zZXR0aW5ncy1sZWZ0XCIgc3R5bGU9XCJib3JkZXI6IDFweCBzb2xpZCAjREREO2JvcmRlci10b3A6IG5vbmU7Ym9yZGVyLWJvdHRvbTogbm9uZTtmbG9hdDpsZWZ0O2JhY2tncm91bmQ6IHJnYigyNDIsMjQyLDI0MikgdG9wIGNlbnRlciByZXBlYXQ7d2lkdGg6MTgwcHg7aGVpZ2h0OjEwMCU7XCI+PC9kaXY+Iik7CiAgICAkKCIjYWNleC1zZXR0aW5ncy1sZWZ0IikuYXBwZW5kKCc8YSBjbGFzcz0iaXRlbS1jaGFubmVsLWd1aWRlIiBzdHlsZT0iYm9yZGVyOm5vbmUiIGlkPSJhY2V4LWNvbW1hbmQiIGZ1bmM9ImJhY2tncm91bmQiPuiDjOaZr+WbvjwvYT4nKTsKICAgICQoIiNhY2V4LXNldHRpbmdzLWxlZnQiKS5hcHBlbmQoJzxhIGNsYXNzPSJpdGVtLWNoYW5uZWwtZ3VpZGUiIHN0eWxlPSJib3JkZXI6bm9uZSIgaWQ9ImFjZXgtY29tbWFuZCIgZnVuYz0ibWFqaWEiPumprOeUsjwvYT4nKTsKICAgICQoIiNhY2V4LXNldHRpbmdzLWxlZnQiKS5hcHBlbmQoJzxhIGNsYXNzPSJpdGVtLWNoYW5uZWwtZ3VpZGUiIHN0eWxlPSJib3JkZXI6bm9uZSIgaWQ9ImFjZXgtY29tbWFuZCIgZnVuYz0iYmxhY2siPum7keWQjeWNle+8iOeUqOaIt++8iTwvYT4nKTsKICAgICQoIiNhY2V4LXNldHRpbmdzLWxlZnQiKS5hcHBlbmQoJzxhIGNsYXNzPSJpdGVtLWNoYW5uZWwtZ3VpZGUiIHN0eWxlPSJib3JkZXI6bm9uZSIgaWQ9ImFjZXgtY29tbWFuZCIgZnVuYz0iYmxhY2tjIj7pu5HlkI3ljZXvvIjlhoXlrrnvvIk8L2E+Jyk7CiAgICAkKCIjYWNleC1zZXR0aW5ncy1sZWZ0IikuYXBwZW5kKCc8YSBjbGFzcz0iaXRlbS1jaGFubmVsLWd1aWRlIiBzdHlsZT0iYm9yZGVyOm5vbmUiIGlkPSJhY2V4LWNvbW1hbmQiIGZ1bmM9InRoaW5ncyI+5p2C6aG5PC9hPicpOwogICAgJCgiI2FjZXgtc2V0dGluZ3MtbGVmdCIpLmFwcGVuZCgnPGEgY2xhc3M9Iml0ZW0tY2hhbm5lbC1ndWlkZSIgc3R5bGU9ImJvcmRlcjpub25lIiBpZD0iYWNleC1jb21tYW5kIiBmdW5jPSJvdXRwdXQiPuWvvOWHujwvYT4nKTsKICAgICQoIiNhY2V4LXNldHRpbmdzLWxlZnQiKS5hcHBlbmQoJzxhIGNsYXNzPSJpdGVtLWNoYW5uZWwtZ3VpZGUiIHN0eWxlPSJib3JkZXI6bm9uZSIgaWQ9ImFjZXgtY29tbWFuZCIgZnVuYz0iYWJvdXQiPuWFs+S6jjwvYT4nKTsKICAgICQoIiNhY2V4LXNldHRpbmdzLWxlZnQiKS5hcHBlbmQoJzxhIGNsYXNzPSJpdGVtLWNoYW5uZWwtZ3VpZGUiIHN0eWxlPSJib3JkZXI6bm9uZSIgaWQ9ImFjZXgtY29tbWFuZCIgZnVuYz0ic2F2ZSI+5Yi35pawPC9hPicpOwogICAgJCgiW2lkPSdhY2V4LWNvbW1hbmQnXSIpLmNsaWNrKGZ1bmN0aW9uICgpewogICAgICAgICQoIiNhY2V4LXNldHRpbmdzLXJpZ2h0IikuaHRtbCgiIik7CiAgICAgICBzd2l0Y2ggKCQodGhpcykuYXR0cigiZnVuYyIpKQogICAgICAgewogICAgICAgICAgIGNhc2UgImJhY2tncm91bmQiOgogICAgICAgICAgICAgICBzaG93X2JhY2tncm91bmRfdWkoKTticmVhazsKICAgICAgICAgICBjYXNlICJtYWppYSI6CiAgICAgICAgICAgICAgIHNob3dfbWFqaWFfdWkoKTticmVhazsKICAgICAgICAgICBjYXNlICJibGFjayI6CiAgICAgICAgICAgICAgIHNob3dfYmxhY2tfdWkoKTticmVhazsKICAgICAgICAgICBjYXNlICJibGFja2MiOgogICAgICAgICAgICAgICBzaG93X2JsYWNrY191aSgpO2JyZWFrOwogICAgICAgICAgIGNhc2UgInRoaW5ncyI6CiAgICAgICAgICAgICAgIHNob3dfdGhpbmdzX3VpKCk7YnJlYWs7CiAgICAgICAgICAgY2FzZSAib3V0cHV0IjoKICAgICAgICAgICAgICAgc2hvd19vdXRwdXRfdWkoKTticmVhazsKICAgICAgICAgICBjYXNlICJhYm91dCI6CiAgICAgICAgICAgICAgIHNob3dfYWJvdXRfdWkoKTticmVhazsKICAgICAgICAgICBjYXNlICJzYXZlIjoKICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKHRydWUpO2JyZWFrOwogICAgICAgICAgIAogICAgICAgfQogICAgfSk7CiAgICAkKCIjYWNleC1zZXR0aW5ncyIpLmFwcGVuZCgnPGRpdiBpZD1cImFjZXgtc2V0dGluZ3MtcmlnaHRcIiBzdHlsZT0id2lkdGg6NDE4cHg7aGVpZ2h0OjEwMCU7ZmxvYXQ6bGVmdDtwYWRkaW5nOjVweDtvdmVyZmxvdy15OnNjcm9sbCI+PC9kaXY+Jyk7CiAgICBzaG93X2JhY2tncm91bmRfdWkoKTsKfTsKZnVuY3Rpb24gdWlfaW5wdXRfbG9uZyhpZCx0ZXh0KQp7CiAgICByZXR1cm4gIjxkaXY+PGlucHV0IHN0eWxlPSd3aWR0aDozNTBweCcgY2xhc3M9XCIiK2lkKyJcIiB2YWx1ZT0nIit0ZXh0KyInIC8+IDxhIGNsYXNzPSdiZ19zZXRfZGVsJz7liKA8L2E+PC9kaXY+IjsKfQpmdW5jdGlvbiB1aV9vcGluaW9uKGlkLGxhYmVsLG9uKQp7CiAgICByZXR1cm4gJzxkaXYgc3R5bGU9ImhlaWdodDoyNXB4OyI+PGxhYmVsPjxpbnB1dCBzdHlsZT0id2lkdGg6YXV0bzttYXJnaW46MHB4ICFpbXBvcnRhbnQ7cGFkZGluZzowcHggIWltcG9ydGFudDtoZWlnaHQ6YXV0bzsiIGlkPSInK2lkKyciIGNsYXNzPSJjaGVja2JveCIgdHlwZT0iY2hlY2tib3giJysob24/JyBjaGVja2VkPSJjaGVja2VkIiAnOicnKSsnPicrbGFiZWwrJzwvbGFiZWw+PC9kaXY+JzsKfQpmdW5jdGlvbiB1aV9yYW5nZShpZCxsYWJlbCxwKQp7CiAgICAgICAgcmV0dXJuICc8ZGl2IHN0eWxlPSJoZWlnaHQ6MzVweDsiPjxsYWJlbD4nK2xhYmVsKyc8aW5wdXQgdHlwZT0icmFuZ2UiIGlkPSInK2lkKyciIG1pbj0iMCIgbWF4PSIxMDAiIHZhbHVlPSInK3AqMTAwKyciLz48c3BhbiBpZD0nK2lkKydfdmFsdWU+JytwKjEwMCsnPC9zcGFuPjwvbGFiZWw+PC9kaXY+JzsKfQpmdW5jdGlvbiB1aV9pbnB1dF91c2VyKHUscCkKewogICAgcmV0dXJuICc8ZGl2IGNsYXNzPSJ0YWJsZSB5X3NldF9hY2V4X21qX2F1c2VyIiBzdHlsZT0id2lkdGg6MzUwcHgiPlwKICAgICAgICA8ZGl2IHN0eWxlPSJoZWlnaHQ6IDMycHg7d2lkdGg6IDEwMCU7dGV4dC1hbGlnbjogY2VudGVyO21hcmdpbjogMDtwYWRkaW5nOiAwOyI+XAogICAgICAgICAgICA8ZGl2IHN0eWxlPSJmbG9hdDpsZWZ0O3dpZHRoOiA2NHB4O3RleHQtYWxpZ246IHJpZ2h0OyI+XAogICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImhpbnQiPueUqOaIt+WQje+8mjwvc3Bhbj5cCiAgICAgICAgICAgIDwvZGl2PlwKICAgICAgICAgICAgPGRpdiBzdHlsZT0iZmxvYXQ6bGVmdCI+XAogICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPSJuYW1lIiB0eXBlPSJ0ZXh0IiBhdXRvY29tcGxldGU9Im9mZiIgdmFsdWU9IicrdSsnIj5cCiAgICAgICAgICAgIDwvZGl2PlwKICAgICAgICA8L2Rpdj5cCiAgICAgICAgPGRpdiBzdHlsZT0iaGVpZ2h0OiAzMnB4O3dpZHRoOiAxMDAlO3RleHQtYWxpZ246IGNlbnRlcjttYXJnaW46IDA7cGFkZGluZzogMDsiPlwKICAgICAgICAgICAgPGRpdiBzdHlsZT0iZmxvYXQ6bGVmdDt3aWR0aDogNjRweDt0ZXh0LWFsaWduOiByaWdodDsiPlwKICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJoaW50Ij7lr4bnoIHvvJo8L3NwYW4+XAogICAgICAgICAgICA8L2Rpdj5cCiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZsb2F0OmxlZnQiPlwKICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz0icGFzc3dvcmQiIHR5cGU9InBhc3N3b3JkIiBhdXRvY29tcGxldGU9Im9mZiIgdmFsdWU9IicrcCsnIj5cCiAgICAgICAgICAgIDwvZGl2PlwKICAgICAgICA8L2Rpdj5cCiAgICAgICAgPGEgY2xhc3M9Im1qX3NldF9kZWwiPuWIoDwvYT5cCjwvZGl2PlwKJzsKfQpmdW5jdGlvbiBzaG93X2JhY2tncm91bmRfdWkoKQp7CiAgICAkKCIjYWNleC1zZXR0aW5ncy1yaWdodCIpLmh0bWwoIjxoMT7og4zmma/lm748L2gxPjxociAvPjxkaXYgaWQ9J2FjZXgtYmctbGlzdCcgc3R5bGU9J3BhZGRpbmc6NXB4Jz48L2Rpdj4iKTsKICAgIGZvciAodmFyIGk9MDtpPCBjb25maWcuYmFja2dyb3VuZHBpY3MubGVuZ3RoO2krKykKICAgIHsKICAgICAgICAkKCIjYWNleC1iZy1saXN0IikuYXBwZW5kKHVpX2lucHV0X2xvbmcoImJnX3NldF9pbnB1dCIsY29uZmlnLmJhY2tncm91bmRwaWNzW2ldKSk7CiAgICB9OwogICAgJCgiI2FjZXgtc2V0dGluZ3MtcmlnaHQiKS5hcHBlbmQoIjxkaXYgc3R5bGU9J3BhZGRpbmc6OHB4Oyc+PGEgaWQ9J2JnX3NldF9hZGQnPuWKoDwvYT4gfCA8YSBpZD0nYmdfc2V0X3NhdmUnPuWtmDwvYT48L2Rpdj4iKTsKICAgICQoIiNiZ19zZXRfYWRkIikuY2xpY2soZnVuY3Rpb24oKXsKICAgICAgICAkKCIjYWNleC1iZy1saXN0IikuYXBwZW5kKHVpX2lucHV0X2xvbmcoImJnX3NldF9pbnB1dCIsIiIpKTsKICAgIH0pOwogICAgJCgiI2JnX3NldF9zYXZlIikuY2xpY2soZnVuY3Rpb24oKXsKICAgICAgICBpcHRzPSQoIi5iZ19zZXRfaW5wdXQiKTsKICAgICAgICBjb25maWcuYmFja2dyb3VuZHBpY3M9bmV3IEFycmF5KCk7CiAgICAgICAgZm9yICh2YXIgaT0wO2k8aXB0cy5sZW5ndGg7aSsrKQogICAgICAgIHsKICAgICAgICAgICAgaWYgKCIiPT1pcHRzW2ldLnZhbHVlfHx1bmRlZmluZWQ9PWlwdHNbaV0udmFsdWUpIGNvbnRpbnVlOwogICAgICAgICAgICBjb25maWcuYmFja2dyb3VuZHBpY3MucHVzaChpcHRzW2ldLnZhbHVlKTsKICAgICAgICB9OwogICAgICAgIGNvbmZpZy5zYXZlKCk7CiAgICB9KTsKICAgICQoIiNhY2V4LXNldHRpbmdzLXJpZ2h0IikuZGVsZWdhdGUoIi5iZ19zZXRfZGVsIiwiY2xpY2siLGZ1bmN0aW9uKCl7JCh0aGlzKS5wYXJlbnQoKS5yZW1vdmUoKTt9KTsKfQpmdW5jdGlvbiBzaG93X2JsYWNrX3VpKCkKewogICAgJCgiI2FjZXgtc2V0dGluZ3MtcmlnaHQiKS5odG1sKCI8aDE+6buR5ZCN5Y2V77yI55So5oi377yJPC9oMT48aHIgLz48ZGl2IGlkPSdhY2V4LWJnLWxpc3QnIHN0eWxlPSdwYWRkaW5nOjVweCc+PC9kaXY+Iik7CiAgICBmb3IgKHZhciBpPTA7aTwgY29uZmlnLmJsYWNrbHN0Lmxlbmd0aDtpKyspCiAgICB7CiAgICAgICAgJCgiI2FjZXgtYmctbGlzdCIpLmFwcGVuZCh1aV9pbnB1dF9sb25nKCJiZ19zZXRfaW5wdXQiLGNvbmZpZy5ibGFja2xzdFtpXSkpOwogICAgfTsKICAgICQoIiNhY2V4LXNldHRpbmdzLXJpZ2h0IikuYXBwZW5kKCI8ZGl2IHN0eWxlPSdwYWRkaW5nOjhweDsnPjxhIGlkPSdiZ19zZXRfYWRkJz7liqA8L2E+IHwgPGEgaWQ9J2JnX3NldF9zYXZlJz7lrZg8L2E+PC9kaXY+Iik7CiAgICAkKCIjYmdfc2V0X2FkZCIpLmNsaWNrKGZ1bmN0aW9uKCl7CiAgICAgICAgJCgiI2FjZXgtYmctbGlzdCIpLmFwcGVuZCh1aV9pbnB1dF9sb25nKCJiZ19zZXRfaW5wdXQiLCIiKSk7CiAgICB9KTsKICAgICQoIiNiZ19zZXRfc2F2ZSIpLmNsaWNrKGZ1bmN0aW9uKCl7CiAgICAgICAgaXB0cz0kKCIuYmdfc2V0X2lucHV0Iik7CiAgICAgICAgY29uZmlnLmJsYWNrbHN0PW5ldyBBcnJheSgpOwogICAgICAgIGZvciAodmFyIGk9MDtpPGlwdHMubGVuZ3RoO2krKykKICAgICAgICB7CiAgICAgICAgICAgIGlmICgiIj09aXB0c1tpXS52YWx1ZXx8dW5kZWZpbmVkPT1pcHRzW2ldLnZhbHVlKSBjb250aW51ZTsKICAgICAgICAgICAgY29uZmlnLmJsYWNrbHN0LnB1c2goaXB0c1tpXS52YWx1ZSk7CiAgICAgICAgfTsKICAgICAgICBjb25maWcuc2F2ZSgpOwogICAgfSk7CiAgICAkKCIjYWNleC1zZXR0aW5ncy1yaWdodCIpLmRlbGVnYXRlKCIuYmdfc2V0X2RlbCIsImNsaWNrIixmdW5jdGlvbigpeyQodGhpcykucGFyZW50KCkucmVtb3ZlKCk7fSk7Cn0KZnVuY3Rpb24gc2hvd19ibGFja2NfdWkoKQp7CiAgICAkKCIjYWNleC1zZXR0aW5ncy1yaWdodCIpLmh0bWwoIjxoMT7pu5HlkI3ljZXvvIjlhoXlrrnvvIk8L2gxPjxociAvPjxkaXYgaWQ9J2FjZXgtYmctbGlzdCcgc3R5bGU9J3BhZGRpbmc6NXB4Jz48L2Rpdj4iKTsKICAgIGZvciAodmFyIGk9MDtpPCBjb25maWcuYmMubGVuZ3RoO2krKykKICAgIHsKICAgICAgICAkKCIjYWNleC1iZy1saXN0IikuYXBwZW5kKHVpX2lucHV0X2xvbmcoImJnX3NldF9pbnB1dCIsY29uZmlnLmJjW2ldKSk7CiAgICB9OwogICAgJCgiI2FjZXgtc2V0dGluZ3MtcmlnaHQiKS5hcHBlbmQoIjxkaXYgc3R5bGU9J3BhZGRpbmc6OHB4Oyc+PGEgaWQ9J2JnX3NldF9hZGQnPuWKoDwvYT4gfCA8YSBpZD0nYmdfc2V0X3NhdmUnPuWtmDwvYT48L2Rpdj4iKTsKICAgICQoIiNiZ19zZXRfYWRkIikuY2xpY2soZnVuY3Rpb24oKXsKICAgICAgICAkKCIjYWNleC1iZy1saXN0IikuYXBwZW5kKHVpX2lucHV0X2xvbmcoImJnX3NldF9pbnB1dCIsIiIpKTsKICAgIH0pOwogICAgJCgiI2JnX3NldF9zYXZlIikuY2xpY2soZnVuY3Rpb24oKXsKICAgICAgICBpcHRzPSQoIi5iZ19zZXRfaW5wdXQiKTsKICAgICAgICBjb25maWcuYmM9bmV3IEFycmF5KCk7CiAgICAgICAgZm9yICh2YXIgaT0wO2k8aXB0cy5sZW5ndGg7aSsrKQogICAgICAgIHsKICAgICAgICAgICAgaWYgKCIiPT1pcHRzW2ldLnZhbHVlfHx1bmRlZmluZWQ9PWlwdHNbaV0udmFsdWUpIGNvbnRpbnVlOwogICAgICAgICAgICBjb25maWcuYmMucHVzaCggaXB0c1tpXS52YWx1ZSk7CiAgICAgICAgfTsKICAgICAgICBjb25maWcuc2F2ZSgpOwogICAgfSk7CiAgICAkKCIjYWNleC1zZXR0aW5ncy1yaWdodCIpLmRlbGVnYXRlKCIuYmdfc2V0X2RlbCIsImNsaWNrIixmdW5jdGlvbigpeyQodGhpcykucGFyZW50KCkucmVtb3ZlKCk7fSk7Cn0KLy8gbWFqaWEKZnVuY3Rpb24gc2hvd19tYWppYV91aSgpCnsKICAgICQoIiNhY2V4LXNldHRpbmdzLXJpZ2h0IikuaHRtbCgiPGgxPumprOeUsjwvaDE+PGhyIC8+PGRpdiBpZD0nYWNleC1tai1saXN0JyBzdHlsZT0ncGFkZGluZzo1cHgnPjwvZGl2PiIpOwogICAgZm9yICh2YXIgaSBpbiBjb25maWcubWFqaWFsc3QpCiAgICB7CiAgICAgICAgJCgiI2FjZXgtbWotbGlzdCIpLmFwcGVuZCh1aV9pbnB1dF91c2VyKGksY29uZmlnLm1hamlhbHN0W2ldKSk7CiAgICB9OwogICAgJCgiI2FjZXgtc2V0dGluZ3MtcmlnaHQiKS5hcHBlbmQoIjxkaXYgc3R5bGU9J3BhZGRpbmc6OHB4Oyc+PGEgaWQ9J21qX3NldF9hZGQnPuWKoDwvYT4gfCA8YSBpZD0nbWpfc2V0X3NhdmUnPuWtmDwvYT48L2Rpdj4iKTsKICAgICQoIiNtal9zZXRfYWRkIikuY2xpY2soZnVuY3Rpb24oKXsKICAgICAgICAkKCIjYWNleC1tai1saXN0IikuYXBwZW5kKHVpX2lucHV0X3VzZXIoIiIsIiIpKTsKICAgIH0pOwogICAgJCgiI21qX3NldF9zYXZlIikuY2xpY2soZnVuY3Rpb24oKXsKICAgICAgICBpcHRzPSQoIi55X3NldF9hY2V4X21qX2F1c2VyIik7CiAgICAgICAgY29uZmlnLm1hamlhbHN0PXt9OwogICAgICAgIGZvciAodmFyIGk9MDtpPGlwdHMubGVuZ3RoO2krKykKICAgICAgICB7CiAgICAgICAgICAgIGNvbmZpZy5tYWppYWxzdFskKGlwdHNbaV0pLmZpbmQoIi5uYW1lIikudmFsKCldPSQoaXB0c1tpXSkuZmluZCgiLnBhc3N3b3JkIikudmFsKCk7CiAgICAgICAgfTsKICAgICAgICBjb25maWcuc2F2ZSgpOwogICAgfSk7CiAgICAkKCIjYWNleC1zZXR0aW5ncy1yaWdodCIpLmRlbGVnYXRlKCIubWpfc2V0X2RlbCIsImNsaWNrIixmdW5jdGlvbigpeyQodGhpcykucGFyZW50KCkucmVtb3ZlKCk7fSk7Cn0KZnVuY3Rpb24gc2hvd190aGluZ3NfdWkoKQp7CiAgICAkKCIjYWNleC1zZXR0aW5ncy1yaWdodCIpLmh0bWwoIjxoMT7mnYLpobk8L2gxPjxociAvPjxkaXYgaWQ9J2FjZXgtengtbGlzdCcgc3R5bGU9J3BhZGRpbmc6NXB4Jz48L2Rpdj4iKTsKICAgICQoIiNhY2V4LXp4LWxpc3QiKS5hcHBlbmQodWlfb3BpbmlvbigiYWNleC1iZ29uIiwi5ZCv55So6IOM5pmv5Zu+Iixjb25maWcuYmFja2dyb3VuZCkpOwogICAgJCgiI2FjZXgtengtbGlzdCIpLmFwcGVuZCh1aV9yYW5nZSgiYWNleC1iZ29wIiwi6IOM5pmv5LiN6YCP5piO5bqmIixjb25maWcuYmdvcGFjaXR5KSk7CiAgICAkKCIjYWNleC16eC1saXN0IikuYXBwZW5kKHVpX29waW5pb24oImFjZXgtbWpvbiIsIuWQr+eUqOmprOeUsiIsY29uZmlnLm1hamlhKSk7CiAgICAkKCIjYWNleC16eC1saXN0IikuYXBwZW5kKHVpX29waW5pb24oImFjZXgtYmxhY2siLCLlkK/nlKjpu5HlkI3ljZXvvIjnlKjmiLfvvIkiLGNvbmZpZy5ibGFjaykpOwogICAgJCgiI2FjZXgtengtbGlzdCIpLmFwcGVuZCh1aV9vcGluaW9uKCJhY2V4LWJsYWNrYyIsIuWQr+eUqOm7keWQjeWNle+8iOWGheWuue+8iSIsY29uZmlnLmJsYWNrY29udGVudCkpOwogICAgJCgiI2FjZXgtengtbGlzdCIpLmFwcGVuZCh1aV9vcGluaW9uKCJhY2V4LXN3YXBhcnRpY2xlIiwi5Lqk5o2i5paH56ug5Yy65ZKM5o6S6KGM54mIIixjb25maWcuc3dhcGFydGljbGUpKTsKICAgICQoIiNhY2V4LXp4LWxpc3QiKS5hcHBlbmQoIjxhIGlkPSdhY2V4LXRoaW5ncy1zYXZlJz7lrZg8L2E+Iik7CiAgICAkKCIjYWNleC10aGluZ3Mtc2F2ZSIpLmNsaWNrKGZ1bmN0aW9uKCl7CiAgICAgICAgY29uZmlnLmJhY2tncm91bmQ9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImFjZXgtYmdvbiIpLmNoZWNrZWQgOy8vJCgiI2FjZXgtYmdvbiIpLnZhbCgpPT0ib24iOy8vISh1bmRlZmluZWQ9PSQoIiNhY2V4LWJnb24iKS5hdHRyKCJjaGVja2VkIil8fGZhbHNlPT0kKCIjYWNleC1iZ29uIikuYXR0cigiY2hlY2tlZCIpKTsKICAgICAgICBjb25maWcubWFqaWE9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImFjZXgtbWpvbiIpLmNoZWNrZWQgOy8vPSQoIiNhY2V4LW1qb24iKS52YWwoKT09Im9uIjsvLy8vISh1bmRlZmluZWQ9PSQoIiNhY2V4LW1qb24iKS5hdHRyKCJjaGVja2VkIil8fGZhbHNlPT0kKCIjYWNleC1tam9uIikuYXR0cigiY2hlY2tlZCIpKTsKICAgICAgICBjb25maWcuYmxhY2s9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImFjZXgtYmxhY2siKS5jaGVja2VkIDsvLz0kKCIjYWNleC1ibGFjayIpLnZhbCgpPT0ib24iOy8vISh1bmRlZmluZWQ9PSQoIiNhY2V4LWJsYWNrIikuYXR0cigiY2hlY2tlZCIpfHxmYWxzZT09JCgiI2FjZXgtYmxhY2siKS5hdHRyKCJjaGVja2VkIikpOwogICAgICAgIGNvbmZpZy5ibGFja2NvbnRlbnQ9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImFjZXgtYmxhY2tjIikuY2hlY2tlZCA7Ly89JCgiI2FjZXgtYmxhY2tjIikudmFsKCk9PSJvbiI7Ly8hKHVuZGVmaW5lZD09JCgiI2FjZXgtYmxhY2tjIikuYXR0cigiY2hlY2tlZCIpfHxmYWxzZT09JCgiI2FjZXgtYmxhY2tjIikuYXR0cigiY2hlY2tlZCIpKTsKICAgICAgICBjb25maWcuc3dhcGFydGljbGU9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImFjZXgtc3dhcGFydGljbGUiKS5jaGVja2VkIDsvLz0kKCIjYWNleC1zd2FwYXJ0aWNsZSIpLnZhbCgpPT0ib24iOy8vISh1bmRlZmluZWQ9PSQoIiNhY2V4LXN3YXBhcnRpY2xlIikuYXR0cigiY2hlY2tlZCIpfHxmYWxzZT09JCgiI2FjZXgtc3dhcGFydGljbGUiKS5hdHRyKCJjaGVja2VkIikpOwogICAgICAgIGNvbmZpZy5iZ29wYWNpdHk9JCgiI2FjZXgtYmdvcCIpLnZhbCgpLzEwMC4wMDsKICAgICAgICBjb25maWcuc2F2ZSgpOwogICAgfSk7CiAgICAkKCIjYWNleC1iZ29wIikuY2hhbmdlKGZ1bmN0aW9uICgpeyQoIiNhY2V4LWJnb3BfdmFsdWUiKS50ZXh0KCQoIiNhY2V4LWJnb3AiKS52YWwoKSl9KTsKfQpmdW5jdGlvbiBzaG93X291dHB1dF91aSgpCnsKICAgICQoIiNhY2V4LXNldHRpbmdzLXJpZ2h0IikuaHRtbCgiPGgxPuWvvOWHujwvaDE+PGhyIC8+PGRpdiBpZD0nYWNleC1kYycgc3R5bGU9J3BhZGRpbmc6NXB4Jz48dGV4dGFyZWEgc3R5bGU9J3dpZHRoOjkwJTtoZWlnaHQ6MzAwcHg7bWFyZ2luOjBweDsnIGlkPSdhY2V4LWlvYm94Jz4iK2NvbmZpZy5nZXRqc29uKCkrIjwvdGV4dGFyZWE+PC9kaXY+PGEgaWQ9J2FjZXgtaW5wdXRvbGQnPuWvvOWFpTwvYT4iKTsKICAgICQoIiNhY2V4LWlucHV0b2xkIikuY2xpY2soZnVuY3Rpb24oKXsKICAgICAgICBjb25maWcubG9hZHZhcihwYXJzZUpzb24oJCgiI2FjZXgtaW9ib3giKS52YWwoKSkpOwogICAgICAgIGNvbmZpZy5zYXZlKCk7CiAgICAgICAgYWxlcnQoIuWvvOWFpeaIkOWKn++8gSIpOwogICAgfSk7Cn0KZnVuY3Rpb24gdWlfYWNsaW5rKGFjKQp7CiByZXR1cm4gJzxhIGNsYXNzPSJhYyB0aXRsZSBidG4iIHN0eWxlPSJmbG9hdDpub25lO1wKICAgIGJvcmRlci1yYWRpdXM6M3B4O1wKICAgIG1hcmdpbjo0cHg7XAogICAgd2lkdGg6YXV0bztcCiAgICBtaW4td2lkdGg6MzJweDtcCiAgICBoZWlnaHQ6MjRweDtcCiAgICBsaW5lLWhlaWdodDoyMHB4O1wKICAgICp3aWR0aDphdXRvO1wKICAgIGNvbG9yOiMzMzM7IiBkYXRhLWFpZD0iJythYysnIiBocmVmPSJodHRwOi8vYWNmdW4udHYvdi9hYycrYWMrJyIgdGFyZ2V0PSJfYmxhbmsiPjxpIGNsYXNzPSJpY29uIGljb24tcGxheS1jaXJjbGUiPjwvaT5hYycrYWMrJzwvYT4nICAgCn0KZnVuY3Rpb24gc2hvd19hYm91dF91aSgpCnsKICAgICQoIiNhY2V4LXNldHRpbmdzLXJpZ2h0IikuaHRtbCgiPGgxPuWFs+S6jjwvaDE+PGhyIC8+PGRpdiBpZD0nYWNleC1hYm91dCcgc3R5bGU9J3BhZGRpbmc6NXB4Jz48cCBzdHlsZT0nICAgIGZvbnQtc2l6ZToxM3B4O1wKICAgIGRpc3BsYXk6YmxvY2s7XAogICAgd2lkdGg6YXV0bztcCiAgICBtYXJnaW46MDtcCiAgICBwYWRkaW5nOjVweCAwO1wKICAgIHdoaXRlLXNwYWNlOnByZS13cmFwO1wKICAgIHdvcmQtd3JhcDpicmVhay13b3JkOyc+5oSf6LCi5oKo5L2/55SoQUPlqJjosIPmlZnlt6XlhbcwLjbjgILmm7TlpJrlip/og73or7flhbPms6jvvJoiK3VpX2FjbGluaygiNDMwNDMxIikrIjwvcD48L2Rpdj4iKTsKfQovLyBNYWluCmZ1bmN0aW9uIGluaXRfY29tbW9uX3BhZ2UoKXsgCiAgICAKICAgIC8vIOW/heimgeazqOWFpQogICAgJCgiW2hyZWY9J2h0dHA6Ly93aWtpLmFjZnVuLnR2J10iKS5hZnRlcigiPGEgY2xhc3M9J2l0ZW0nIGlkPSdjYWxsYWNleCc+QUPlqJjmianlsZU8L2E+Iik7CiAgICAkKCIjY2FsbGFjZXgiKS5jbGljayhmdW5jdGlvbigpeyBzaG93X3NldHRpbmdfdWkoKTt9KTsKICAgIC8vIOaYvuekuuWvvOiIquadoeeahOmhtemdouaJp+ihjOS7peS4i+S7o+eggQogICAgJCgiYm9keSIpLmFwcGVuZCgiPGRpdiBpZD0nYWNleC11aSc+PGRpdiBpZD0nYWNleC1zZXR0aW5nLXVpJz48L2Rpdj48L2Rpdj4iKTsKICAgIGlmIChjb25maWcubWFqaWEpIGluaXRfbWFqaWEoKTsKICAgIGlmIChjb25maWcuYmFja2dyb3VuZCkgaW5pdF9iYWNrZ3JvdW5kKCk7CiAgICBpZiAoY29uZmlnLnN3YXBhcnRpY2xlKSBpbml0X3N3YXBfYXJ0aWNsZSgpOwogICAgaWYgKCJsb2NhdGlvbi1hcnRpY2xlIj09c3lzdGVtLmxvY2F0aW9uJiYoY29uZmlnLmJsYWNrfHxjb25maWcuYmxhY2tjb250ZW50KSkgaW5pdF9ibGFja19jb3JlKCk7Cn07CmZ1bmN0aW9uIG1ha2VfYV9tZW51X2l0ZW0oaWQsdXNyLHB3ZCx0ZXh0KQp7CiAgICByZXR1cm4gIjxsaT48YSBjbGFzcz0nIiArIGlkICsgIicgdXNyPSciK3VzcisiJyBwd2Q9JyIrcHdkKyInPjxpIGNsYXNzPVwiaWNvbiBpY29uLXVzZXJcIj48L2k+IisgdGV4dCArICI8L2E+PC9saT4iOwp9OwpmdW5jdGlvbiBzdGRfYWNfbG9naW4odXNlcm5hbWUscGFzc3dvcmQpIHsKICAgIAogICAgLy9pZiAoIXN5c3RlbS5icm93c2VyLmllNikgeyAgLy8gSUU25pSv5oyBdXNlcmpz5ZCX77yf5oSP5LmJ5Zyo5L2V4oCm4oCmCiAgICAgICAgICAgICAgICAgICAgJC5pbmZvKCfnmbvlvZXkuK0uLi4nKTsKICAgICAgICAgICAgICAgICAgICAkLnBvc3QoJy9sb2dpbi5hc3B4JywgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd1c2VybmFtZSc6ICQudHJpbSh1c2VybmFtZSksCiAgICAgICAgICAgICAgICAgICAgICAgICdwYXNzd29yZCc6ICQudHJpbShwYXNzd29yZCl9KS5kb25lKGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNhY2hlID0gZGF0YTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhY2hlLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gJCgnI3dpbi1sb2dpbicpLnNodXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICQuY2hlY2soJ2xvZ2luJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2FmZVdpbmRvdy5yZWZyZXNoSGVhZGVyKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLmluZm8oJ+asoui/juWbnuadpe+8jCcgKyAkLnRyaW0odXNlcm5hbWUpICsgJ+OAgicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLmluZm8oJ2Vycm9yOjrnlKjmiLflkI3miJblr4bnoIHplJnor6/jgILor7fpqozor4HlkI7ph43mlrDovpPlhaXjgIInKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkuZmFpbChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJC5pbmZvKCdlcnJvcjo66YCa5L+h5aSx6LSl44CC6K+356iN5ZCO6YeN6K+V44CCJykKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIAogICAvLyB9IGVsc2UgewogICAgLy8gICAgc2VsZi5sb2NhdGlvbi5ocmVmID0gJy9sb2dpbi5hc3B4JwogICAgLy99Owp9CmZ1bmN0aW9uIGluaXRfbWFqaWEoKQp7CiAgICBzcmM9IiI7CiAgICBmb3IgKHZhciBpIGluIGNvbmZpZy5tYWppYWxzdCkKICAgIHsKICAgICAgICBzcmMrPW1ha2VfYV9tZW51X2l0ZW0oInlfbWFqaWEiLGksY29uZmlnLm1hamlhbHN0W2ldLGkpOwogICAgfQogICAgdmFyIGRuPSQoJCgiLmwiKVswXSkuY2hpbGRyZW4oIi5kcm9wZG93biIpOwogICAgJChkbltkbi5sZW5ndGgtMV0pLmFmdGVyKCc8ZGl2IGNsYXNzPSJpdGVtLWd1aWRlLXRvcCBkcm9wZG93biIgaWQ9Im1hamlhIj48YSBjbGFzcz0iaXRlbS1jaGFubmVsLWd1aWRlIj7pqaznlLI8L2E+PHVsIGNsYXNzPSJtZW51IG1lbnUtY2hhbm5lbC1ndWlkZSIgc3R5bGU9ImRpc3BsYXk6IG5vbmU7IG9wYWNpdHk6IDA7bGVmdDphdXRvICFpbXBvcnRhbnQ7ICI+JytzcmMrJzwvdWw+PC9kaXY+Jyk7CiAgICAkKCIueV9tYWppYSIpLmNsaWNrKGZ1bmN0aW9uKCl7CiAgICAgICAgdXNyPSQodGhpcykuYXR0cigidXNyIik7cHdkPSQodGhpcykuYXR0cigicHdkIik7CiAgICAgICAgLy8gJC5pbmZvKCJMb2dpbjoiK3Vzcik7CiAgICAgICAgJC5nZXQoIi9sb2dvdXQuYXNweCIpLmRvbmUoZnVuY3Rpb24oKXsKICAgICAgICBzdGRfYWNfbG9naW4odXNyLHB3ZCk7fSk7CiAgICB9KTsKICAgICQoJyNtYWppYScpLnNldHVwKCkKfQpmdW5jdGlvbiBpbml0X2JhY2tncm91bmQoKSB7CiAgICBpZiAoc3lzdGVtLmxvY2F0aW9uID09ICJsb2NhdGlvbi1saXZlIikKICAgICAgICByZXR1cm4gOwogICAgdmFyIHVybD1jb25maWcuYmFja2dyb3VuZHBpY3NbTWF0aC5jZWlsKE1hdGgucmFuZG9tKCkqY29uZmlnLmJhY2tncm91bmRwaWNzLmxlbmd0aCktMV07CiAgICBzPSQoIiNzdGFnZSIpOwogICAgcy5jc3MoImJhY2tncm91bmQiLCJ1cmwoIit1cmwrIikiKTsKICAgIHMuY3NzKCJiYWNrZ3JvdW5kUmVwZWF0Iiwibm8tcmVhcHQiKTsKICAgIHMuY3NzKCJiYWNrZ3JvdW5kU2l6ZSIsImNvdmVyIik7CiAgICBzLmNzcygiYmFja2dyb3VuZEF0dGFjaG1lbnQiLCJmaXhlZCIpOwogICAgdmFyIGhhc0hlYWRlckJnID0gZmFsc2U7CiAgICBpZiAoc3lzdGVtLmxvY2F0aW9uID09ICJsb2NhdGlvbi1jaGFubmVsIil7CiAgICAgICAgaGFzSGVhZGVyQmcgPSAkKCIjaGVhZGVyIikuY3NzKCJiYWNrZ3JvdW5kLWltYWdlIikgIT0gIm5vbmUiOwogICAgICAgICQoIiNoZWFkZXIiKS5jc3MoImJhY2tncm91bmQiLCJub25lIik7CiAgICAgICAgJCgiI2hlYWRlciIpLmNzcygiYm9yZGVyLWJvdHRvbSIsICJub25lIik7CiAgICAgICAgJCgiI2hlYWRlciIpLmNzcygiYm94LXNoYWRvdyIsIm5vbmUiKTsKICAgIH0KICAgIGlmIChzeXN0ZW0ubG9jYXRpb24gIT0gImxvY2F0aW9uLW1lbWJlciIgJiYgc3lzdGVtLmxvY2F0aW9uICE9ICJsb2NhdGlvbi1ndXJ1IiAmJiAhKHN5c3RlbS5sb2NhdGlvbiA9PSAibG9jYXRpb24tY2hhbm5lbCIgJiYgaGFzSGVhZGVyQmcgKSApCiAgICAgICAgJCgiI2hlYWRlci1pbm5lciIpLmNzcygiYmFja2dyb3VuZC1jb2xvciIsIndoaXRlIik7CiAgICBpZiAoc3lzdGVtLmxvY2F0aW9uID09ICJsb2NhdGlvbi1ndXJ1IikKICAgICAgICAkKCIjbWFpbmVyLWlubmVyIikuY3NzKCJvcGFjaXR5IiwgY29uZmlnLmJnb3BhY2l0eSk7CiAgICBlbHNlCiAgICAgICAgJCgiI21haW5lci1pbm5lciIpLmNzcygiY3NzVGV4dCIsImJhY2tncm91bmQgOndoaXRlICFpbXBvcnRhbnQgO29wYWNpdHk6Iitjb25maWcuYmdvcGFjaXR5KyI7LXdlYmtpdC1ib3gtc2hhZG93OiAwIDAgMS41cHggMS41cHggbGlnaHRncmF5Oy1tb3otYm94LXNoYWRvdzogMCAwIDEuNXB4IDEuNXB4IGxpZ2h0Z3JheTtib3gtc2hhZG93OiAwIDAgMS41cHggMS41cHggbGlnaHRncmF5OyIpOwogICAgJCgiI2hlYWRlci1pbm5lciIpLmNzcygib3BhY2l0eSIsY29uZmlnLmJnb3BhY2l0eSk7CiAgICAvLyAkKCIjaGVhZGVyLWlubmVyIikuY3NzKCJjc3NUZXh0IiwiYmFja2dyb3VuZCA6d2hpdGUhaW1wb3J0YW50O29wYWNpdHk6Iitjb25maWcuYmdvcGFjaXR5KTsKICAgICQoIiNhcmVhLXBsYXllciIpLmRibGNsaWNrKGZ1bmN0aW9uKCl7CiAgICAgICAgJCgiI21haW5lci1pbm5lciIpLmNzcygiY3NzVGV4dCIsImJhY2tncm91bmQgOndoaXRlICFpbXBvcnRhbnQgO29wYWNpdHk6MTstd2Via2l0LWJveC1zaGFkb3c6IDAgMCAxLjVweCAxLjVweCBsaWdodGdyYXk7LW1vei1ib3gtc2hhZG93OiAwIDAgMS41cHggMS41cHggbGlnaHRncmF5O2JveC1zaGFkb3c6IDAgMCAxLjVweCAxLjVweCBsaWdodGdyYXk7Iik7CiAgICB9KTsKfQpmdW5jdGlvbiBpbml0X3N3YXBfYXJ0aWNsZSgpCnsKICAgIG9sZD0kKCIjYXJ0aWNsZS1pbmRleCIpWzBdOwogICAgJCgiI2FydGljbGUtaW5kZXgiKS5yZW1vdmUoKTsKICAgICQoIiNyYW5rLWluZGV4IikuYmVmb3JlKG9sZCk7Cn0KU3RyaW5nLnByb3RvdHlwZS5MZWZ0ID0gZnVuY3Rpb24obGVuKQp7CiAgICBpZihpc05hTihsZW4pfHxsZW49PW51bGwpCiAgICB7CiAgICAgICAgbGVuID0gdGhpcy5sZW5ndGg7CiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgaWYocGFyc2VJbnQobGVuKTwwfHxwYXJzZUludChsZW4pPnRoaXMubGVuZ3RoKQogICAgICAgIHsKICAgICAgICAgICAgbGVuID0gdGhpcy5sZW5ndGg7CiAgICAgICAgfQogICAgfQogICAgcmV0dXJuIHRoaXMuc3Vic3RyKDAsbGVuKTsKfTsKZnVuY3Rpb24gcGFyc2VDbGVhcihwYXJhKXsKdmFyIG1pbWlrb1RleHQ9cGFyYT9wYXJhLnJlcGxhY2UoL1xuezQsfS9nLCcnKS5yZXBsYWNlKC9cW2hyXF0vZywnJykucmVwbGFjZSgvXFtiXF0oW1xzfFxTXSo/KVxbXC9iXF0vZywnJDEnKS5yZXBsYWNlKC9cW2lcXShbXHN8XFNdKj8pXFtcL2lcXS9nLCckMScpLnJlcGxhY2UoL1xbdVxdKFtcc3xcU10qPylcW1wvdVxdL2csJyQxJykucmVwbGFjZSgvXFtmb250XD0oW1xzfFxTXSs/KVxdKFxTKz8pXFtcL2ZvbnRcXS9nLCckMicpLnJlcGxhY2UoL1xbc2l6ZVw9KFxTKz8pXF0oXFMrPylcW1wvc2l6ZVxdL2csJyQyJykucmVwbGFjZSgvXFtzXF0oW1xzfFxTXSo/KVxbXC9zXF0vZywnJDEnKS5yZXBsYWNlKC9cW2FsaWduXD0oXFMrPylcXShcUys/KVxbXC9hbGlnblxdL2csJyQyJykucmVwbGFjZSgvXFt1cmxcPShcUys/KVxdKFxTKz8pXFtcL3VybFxdL2csJyQyJykucmVwbGFjZSgvXFt1cmxcXShcUys/KVxbXC91cmxcXS9nLCckMScpLnJlcGxhY2UoL1xbZW1haWxcXShbXHN8XFNdKj8pXFtcL2VtYWlsXF0vZywnJDEnKS5yZXBsYWNlKC9cW2Vtb3RcPShcUys/KVwsKFxTKz8pXC9cXS9nLCcnKS5yZXBsYWNlKC9cW2ltZ1xdKFxTKz8pXFtcL2ltZ1xdL2csJycpLnJlcGxhY2UoL1xbaW1nXD0oXFMrPylcXShcUys/KVxbXC9pbWdcXS9nLCcnKS5yZXBsYWNlKC9cW3NpemVcPShcZCs/KD86cHgpezAsMX0pXF0oW1xzfFxTXSo/KVxbXC9zaXplXF0vZywnJDInKS5yZXBsYWNlKC9cW2NvbG9yXD0oXFMrPylcXShbXHN8XFNdKj8pXFtcL2NvbG9yXF0vZywnJDInKTonRXJyb3IuJztyZXR1cm4gbWltaWtvVGV4dH07CmZ1bmN0aW9uIGluaXRfYmxhY2tfY29yZSgpCnsKICAgIHZhciBraWxsY2lkID0gW10KICAgIHZhciBraWxsZWQgPSB7fQogICAgJCgiI2FyZWEtY29tbWVudCIpLm9uKCJjbGljayIsICJzcGFuW2NsYXNzPWl0ZW0tcXVvdGUtaGlkZGVuXSIsKGZ1bmN0aW9uKCl7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBraWxsY2lkLmxlbmd0aDsgaSsrKXsKICAgICAgICAgICAgdmFyIGxpc3RzID0gJCh0aGlzKS5maW5kKCdkaXZbaWQ9Yy0nKyBraWxsY2lkW2ldICsgJ10nKTsKICAgICAgICAgICAgbGlzdHMucmVtb3ZlKCk7CiAgICAgICAgfQogICAgfSkpOwogICAgJChkb2N1bWVudCkuYWpheFN1Y2Nlc3MoZnVuY3Rpb24oZXZlbnQseGhyLG9wdGlvbnMpCiAgICB7CiAgICAgICAgaWYgKG9wdGlvbnMudXJsLkxlZnQoMjMpPT0iL2NvbW1lbnRfbGlzdF9qc29uLmFzcHgiKQogICAgICAgIHsKICAgICAgICAvLyDlvoXov4fmu6TlrZfnrKbkuLIKICAgICAgICAgICAgdmFyIGNhY2hlPXBhcnNlSnNvbih4aHIucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgdmFyIHJlZzsKICAgICAgICAgICAgZm9yKHZhciBpIGluIGNhY2hlLmNvbW1lbnRDb250ZW50QXJyKXsKICAgICAgICAgICAgICAgIHZhciBraWxsb25jZT1mYWxzZTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy9hbGVydChjYWNoZS5jb21tZW50Q29udGVudEFyclsnYycrY2FjaGUuY29tbWVudExpc3RbaV1dKTsKICAgICAgICAgICAgICAgIHZhciB1c2VybmFtZSA9IGNhY2hlLmNvbW1lbnRDb250ZW50QXJyW2ldLnVzZXJOYW1lOy8vcGFyc2VDbGVhcihjYWNoZS5jb21tZW50Q29udGVudEFyclsnYycrY2FjaGUuY29tbWVudExpc3RbaV1dLmNvbnRlbnQpOwogICAgICAgICAgICAgICAgdmFyIHVzZXJpZCA9IGNhY2hlLmNvbW1lbnRDb250ZW50QXJyW2ldLnVzZXJJRDsvL3BhcnNlQ2xlYXIoY2FjaGUuY29tbWVudENvbnRlbnRBcnJbJ2MnK2NhY2hlLmNvbW1lbnRMaXN0W2ldXS5jb250ZW50KTsKICAgICAgICAgICAgICAgIHZhciBjb250ZW50PSBwYXJzZUNsZWFyKGNhY2hlLmNvbW1lbnRDb250ZW50QXJyW2ldLmNvbnRlbnQpOwogICAgICAgICAgICAgICAgLy9hbGVydChwcmVjaGVjayk7CiAgICAgICAgICAgICAgICBpZiAoY29uZmlnLmJsYWNrKQogICAgICAgICAgICAgICAgZm9yIChyZWc9MDtyZWc8Y29uZmlnLmJsYWNrbHN0Lmxlbmd0aDtyZWcrKykKICAgICAgICAgICAgICAgIHsgICAKICAgICAgICAgICAgICAgICAgICBpZiAoY29uZmlnLmJsYWNrbHN0W3JlZ109PXVzZXJuYW1lfHxjb25maWcuYmxhY2tsc3RbcmVnXT09dXNlcmlkKXtraWxsb25jZT10cnVlO2JyZWFrO30KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBpZiAoY29uZmlnLmJsYWNrY29udGVudCYmIWtpbGxvbmNlKQogICAgICAgICAgICAgICAgZm9yIChyZWc9MDtyZWc8Y29uZmlnLmJjLmxlbmd0aDtyZWcrKykKICAgICAgICAgICAgICAgIHsgICAKICAgICAgICAgICAgICAgICAgICBpZiAoY29uZmlnLmJjY1tyZWddLmV4ZWMoIiIpIT1udWxsKSBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICBpZiAoY29uZmlnLmJjY1tyZWddLmV4ZWMoY29udGVudCkhPW51bGwpIHtraWxsb25jZT10cnVlO2JyZWFrO307CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgaWYgKGtpbGxvbmNlKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIC8vIOmBjeWOhuaJgOaciei/meS4quivhOiuuu+8jOadgOaOieOAggogICAgICAgICAgICAgICAgLy8gIGFsZXJ0KCJLaWxsICBieSAiK2NvbnRyb2xTdHJpbmdbcmVnXSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3RzID0gJCgnZGl2W2lkPWMtJysgY2FjaGUuY29tbWVudENvbnRlbnRBcnJbaV0uY2lkICsgJ10nKTsKICAgICAgICAgICAgICAgICAgICBsaXN0cy5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICBpZiAoIWtpbGxlZC5oYXNPd25Qcm9wZXJ0eShjYWNoZS5jb21tZW50Q29udGVudEFycltpXS5jaWQpKXsKICAgICAgICAgICAgICAgICAgICAgICAga2lsbGNpZC5wdXNoKGNhY2hlLmNvbW1lbnRDb250ZW50QXJyW2ldLmNpZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGtpbGxlZFtjYWNoZS5jb21tZW50Q29udGVudEFycltpXS5jaWRdID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy9hbGVydChsaXN0cyk7CiAgICAgICAgICAgICAgICAgICAgLy9saXN0cy5odG1sKCJmdWNsIik7CiAgICAgICAgICAgICAgICAgICAgLy9saXN0cy5jaGlsZHJlbigiLmFyZWEtc2ltcGxlLWlubmVyIikuY2hpbGRyZW4oIi5jb21tZW50LWNvbW1lbnQiKS5odG1sKG1ha2VIVE1MKGxpc3RzLmNoaWxkcmVuKCIuYXJlYS1zaW1wbGUtaW5uZXIiKS5jaGlsZHJlbigiLmNvbW1lbnQtY29tbWVudCIpLmh0bWwoKSkpOwogICAgICAgICAgICAgICAgICAgIC8vbGlzdHMuY2hpbGRyZW4oIi5hcmVhLWNvbW1lbnQtcmlnaHQiKS5jaGlsZHJlbigiLmNvbW1lbnQtY29tbWVudCIpLmh0bWwobWFrZUhUTUwobGlzdHMuY2hpbGRyZW4oIi5hcmVhLWNvbW1lbnQtcmlnaHQiKS5jaGlsZHJlbigiLmNvbW1lbnQtY29tbWVudCIpLmh0bWwoKSkpOwogICAgICAgICAgICAgICAgICAgICAgICAvLyQoJ2RpdltpZD1jLScrICI4MDEzMzYwIiArICddJylbMF0uY2hpbGRyZW4oIi5hcmVhLXNpbXBsZS1pbm5lciIpLmNoaWxkcmVuKCIuY29tbWVudC1jb21tZW50IikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIAogICAgICAgIH0KICAgIH0KICAgICk7Cn0KY29uZmlnKCk7CmluaXRfY29tbW9uX3BhZ2UoKTsKfTsKYWNleCh3aW5kb3cpO30pKCk7";
var script = base64.decode(code);
mimikoSave("scriptACEX",script);
location.assign("javascript:eval(localStorage.getItem('av.scriptACEX'));void(0);");
})();
// ==UserScript==
// @name           better.php transcode search enhancer
// @namespace      http://userscripts.org/users/52197
// @author         darkip
// @version        0.2
// @description    Adds options to filter torrents with V2, V0 or 320 already uploaded
// @include        http*://*what.cd/better.php?method=*
// @exclude        http*://*what.cd/better.php?method=?method=va
// ==/UserScript==

window.addEventListener("load", function(e)
{
	if(window.location.toString().indexOf('method=snatch') != -1 || window.location.toString().indexOf('method=upload') != -1)
	{
		document.getElementById('content').innerHTML = '<div align="center">Hide torrents with V2 <input id="V2" type="checkbox" onclick="rows = document.getElementById(\'content\').getElementsByTagName(\'table\')[0].rows;for(i=1; i < rows.length; i++){hide = false;if(document.getElementById(\'V2\').checked){if(rows[i].getElementsByTagName(\'td\')[1].innerHTML.indexOf(\'YES\') != -1){hide = true;}}if(document.getElementById(\'V0\').checked){if(rows[i].getElementsByTagName(\'td\')[2].innerHTML.indexOf(\'YES\') != -1){hide = true;}}if(document.getElementById(\'t320\').checked){if(rows[i].getElementsByTagName(\'td\')[3].innerHTML.indexOf(\'YES\') != -1){hide = true;}}if(hide){rows[i].style.display = \'none\';}else{rows[i].style.display = \'\';}}" /> V0 <input id="V0" type="checkbox" onclick="rows = document.getElementById(\'content\').getElementsByTagName(\'table\')[0].rows;for(i=1; i < rows.length; i++){hide = false;if(document.getElementById(\'V2\').checked){if(rows[i].getElementsByTagName(\'td\')[1].innerHTML.indexOf(\'YES\') != -1){hide = true;}}if(document.getElementById(\'V0\').checked){if(rows[i].getElementsByTagName(\'td\')[2].innerHTML.indexOf(\'YES\') != -1){hide = true;}}if(document.getElementById(\'t320\').checked){if(rows[i].getElementsByTagName(\'td\')[3].innerHTML.indexOf(\'YES\') != -1){hide = true;}}if(hide){rows[i].style.display = \'none\';}else{rows[i].style.display = \'\';}}" /> 320 <input id="t320" type="checkbox" onclick="rows = document.getElementById(\'content\').getElementsByTagName(\'table\')[0].rows;for(i=1; i < rows.length; i++){hide = false;if(document.getElementById(\'V2\').checked){if(rows[i].getElementsByTagName(\'td\')[1].innerHTML.indexOf(\'YES\') != -1){hide = true;}}if(document.getElementById(\'V0\').checked){if(rows[i].getElementsByTagName(\'td\')[2].innerHTML.indexOf(\'YES\') != -1){hide = true;}}if(document.getElementById(\'t320\').checked){if(rows[i].getElementsByTagName(\'td\')[3].innerHTML.indexOf(\'YES\') != -1){hide = true;}}if(hide){rows[i].style.display = \'none\';}else{rows[i].style.display = \'\';}}" />&nbsp;&nbsp;<input type="button" onclick="rows = document.getElementById(\'content\').getElementsByTagName(\'table\')[0].rows;document.getElementById(\'V2\').checked = false;document.getElementById(\'V0\').checked = false;document.getElementById(\'t320\').checked = false;for(i=1; i < rows.length; i++){rows[i].style.display = \'\';}" value="Clear" /></div>' + document.getElementById('content').innerHTML;
	}
	else
	{
		toptd = document.getElementById('content').getElementsByTagName('table')[0].getElementsByTagName('td')[1];
		toptd.innerHTML += 'Hide torrents with V2 <input id="V2" type="checkbox" onclick="rows = document.getElementById(\'content\').getElementsByTagName(\'table\')[1].rows;for(i=1; i < rows.length; i++){hide = false;if(document.getElementById(\'V2\').checked){if(rows[i].getElementsByTagName(\'td\')[1].innerHTML.indexOf(\'YES\') != -1){hide = true;}}if(document.getElementById(\'V0\').checked){if(rows[i].getElementsByTagName(\'td\')[2].innerHTML.indexOf(\'YES\') != -1){hide = true;}}if(document.getElementById(\'t320\').checked){if(rows[i].getElementsByTagName(\'td\')[3].innerHTML.indexOf(\'YES\') != -1){hide = true;}}if(hide){rows[i].style.display = \'none\';}else{rows[i].style.display = \'\';}}" /> V0 <input id="V0" type="checkbox" onclick="rows = document.getElementById(\'content\').getElementsByTagName(\'table\')[1].rows;for(i=1; i < rows.length; i++){hide = false;if(document.getElementById(\'V2\').checked){if(rows[i].getElementsByTagName(\'td\')[1].innerHTML.indexOf(\'YES\') != -1){hide = true;}}if(document.getElementById(\'V0\').checked){if(rows[i].getElementsByTagName(\'td\')[2].innerHTML.indexOf(\'YES\') != -1){hide = true;}}if(document.getElementById(\'t320\').checked){if(rows[i].getElementsByTagName(\'td\')[3].innerHTML.indexOf(\'YES\') != -1){hide = true;}}if(hide){rows[i].style.display = \'none\';}else{rows[i].style.display = \'\';}}" /> 320 <input id="t320" type="checkbox" onclick="rows = document.getElementById(\'content\').getElementsByTagName(\'table\')[1].rows;for(i=1; i < rows.length; i++){hide = false;if(document.getElementById(\'V2\').checked){if(rows[i].getElementsByTagName(\'td\')[1].innerHTML.indexOf(\'YES\') != -1){hide = true;}}if(document.getElementById(\'V0\').checked){if(rows[i].getElementsByTagName(\'td\')[2].innerHTML.indexOf(\'YES\') != -1){hide = true;}}if(document.getElementById(\'t320\').checked){if(rows[i].getElementsByTagName(\'td\')[3].innerHTML.indexOf(\'YES\') != -1){hide = true;}}if(hide){rows[i].style.display = \'none\';}else{rows[i].style.display = \'\';}}" />&nbsp;&nbsp;<input type="button" onclick="rows = document.getElementById(\'content\').getElementsByTagName(\'table\')[1].rows;document.getElementById(\'V2\').checked = false;document.getElementById(\'V0\').checked = false;document.getElementById(\'t320\').checked = false;for(i=1; i < rows.length; i++){rows[i].style.display = \'\';}" value="Clear" />';
	}
}, false);
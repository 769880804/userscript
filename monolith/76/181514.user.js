// ==UserScript==
// @name        YIFYBar
// @namespace   jmkl
// @include     http://*.imdb.*/title/*
// @include     http://imdb.*/title/*
// @require     http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js
// @version     1
// @grant       GM_xmlhttpRequest
// ==/UserScript==

function getjudul(){$tits=$("span.itemprop").html();$tits=$tits.replace(/[^\w\s]/gi,"");return $tits.replace(/\s/g,"%20")}function InjekTable(){$("td#overview-top").prepend('<div class="yfwrapper"><h3 class="closedialog" style="cursor:pointer;padding:2px 12px;float:right;">x</h3><H2 style="padding:2px 12px;">YIFY Torrents</H2><table class="yf"><thead><tr><td>Title</td><td>Size</td><td>Torrent</td><td>Magnet</td><td>Uploader</td><td>Seed/Peer</td></tr></thead><tbody></tbody></table></div>');$("h3.closedialog").click(function(e){$(".yfwrapper").slideUp("slow")})}function cari(e){GM_xmlhttpRequest({method:"GET",url:e,headers:{"User-Agent":"Mozilla/5.0",Accept:"text/html"},onload:function(e){var t=$.parseJSON(e.responseText);if(t.status){}else if(t.MovieList){InjekTable();var n=t.MovieList;console.log(n.length);for(var r=n.length-1;r>=0;r--){console.log("========================");$t=n[r].MovieTitle;$mu=n[r].MovieUrl;$q=n[r].Quality;$s=n[r].Size;$tu=n[r].TorrentUrl;$tm=n[r].TorrentMagnetUrl;$up=n[r].Uploader;$dl=n[r].Downloaded;$ts=n[r].TorrentSeeds;$tp=n[r].TorrentPeers;var i="<tr>"+'<td><a href="'+$mu+'">'+$t+"</a></td>"+"<td>"+$s+"</td>"+'<td><a href="'+$tu+'">Link</a></td>'+'<td><a href="'+$tm+'">Link</a></td>'+"<td>"+$up+"</td>"+"<td>"+$ts+"/"+$tp+"</td>"+"</tr>";if($(".yflogo").length<=0)$("h1.header").prepend('<img class="yflogo" src="http://static.yify-torrents.com/assets/images/magnet_logo.png" width="30" style="margin:4px;cursor:hand;cursor:pointer;"/>');$(".yf tbody").append(i);$(".yfwrapper").hide();$(".yfwrapper").css("margin-top",50);$(".yflogo").click(function(){$(".yfwrapper").slideDown("slow")})}}}})}var yify={url:"http://yify-torrents.com/api/list.json"};String.prototype.format=String.prototype.f=function(){var e=this,t=arguments.length;while(t--){e=e.replace(new RegExp("\\{"+t+"\\}","gm"),arguments[t])}return e};$("head").append('<style>.yfwrapper{width:100%;box-shadow:#222 1px 1px 10px;border-radius:5px;background:#eee;padding:1px; position:absolute; z-index:4000;}.yf{width:100%;font-family: "Lucida Console", Monaco, monospace;font-size: .8em;color:#222;backgroud:#ddd;border:solid 1px #ddd;}.yf a{text-decoration: none;}.yf thead{font-weight: bold;}.yf td,.yf tr{text-align:center;background: #eee; padding:4px 12px; border:solid 1px #ddd;}</style>');var lnk=yify.url+"?keywords="+getjudul();cari(lnk)
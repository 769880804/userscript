// ==UserScript==
// @name           Facebook AutoLike By Jesrin
// @namespace      AutoLike
// @description    Automatically likes people's status updates / comments. Added "Reply" comment, which is tagging people's name in next comment.
// @include        http://www.facebook.com/*
// @include        https://www.facebook.com/*
// @include        http://facebook.com/*
// @include        https://facebook.com/*
// ==/UserScript==

// Created by : RippeD


var ver = "v1.3"
var title = document.title;
var title1 = "Welcome to Facebook - Log In, Sign Up or Learn More";
body = document.body;
(function(d){
    const DEBUG = false;
    const script_id = 49378;
    const script_version = '1.7.8';
    const gm_class = ' gm_reply_button';
    var button_text;
    var last_insert;
    const lang = d.getElementsByTagName('html')[0].getAttribute('lang');
    var text = new Array;
    text['en'] = 'Reply';
    text['cs'] = 'Reagovat';
    function getButtonText()
    {
        return text[lang] ? text[lang] : text['en'];
    }
    function simulateKeyEvent(keyCodeArg, element)
    {
        var evt = document.createEvent("KeyboardEvent");
                  evt.initKeyEvent ("keypress", true, true, window,
                  0, 0, 0, 0,
                  keyCodeArg, 0);

        element.dispatchEvent(evt);
        return false;
    }
    function insertName(evt)
    {
        var parent, link, string, first_name, insert_text, commentsWrapper, textarea, pretext, posttext;
        evt.preventDefault();
        try {
            parent = evt.target.parentNode.parentNode;

            link = parent.getElementsByClassName('actorName')[0];
            string = link.textContent;
            var name = new Array();
            name = string.split(' ');
            first_name = name[0];
            insert_text = '@' + first_name + ' :';
            commentsWrapper = parent.parentNode;
            var i = 0;
            while (i < 10 && commentsWrapper.tagName !== 'ul' && commentsWrapper.className.indexOf('uiList uiUfi') == -1) {
                commentsWrapper = commentsWrapper.parentNode;
                i++;
            }
            textarea = commentsWrapper.getElementsByTagName('textarea')[0];
            textarea.focus(); textarea.focus();
            if (textarea.value == '') last_insert = null;
            if (string != last_insert) { 
                pretext = textarea.value.substring(0, textarea.selectionStart);
                posttext = textarea.value.substring(textarea.selectionEnd, textarea.value.length);
                textarea.value = pretext + insert_text + posttext;
                simulateKeyEvent(39, textarea);
                last_insert = string;
            }
        } catch (e) {
            //log(e);
        }
        delete parent, link, string, first_name, insert_text, commentsWrapper, textarea, pretext, posttext;
        return false;
    }
    var divs_length_before = 0;
    function addButtons()
    {
        var divs = d.getElementsByClassName('commentActions');
        var div, button;
        for (i = 0; i <= divs.length-1; i++) {
            div = divs[i];
            if (div.className.indexOf(gm_class) >= 0) {
                if (button = div.getElementsByClassName('replyButton')[0])
                    button.addEventListener('click', insertName, false);
                continue;
            }
            div.className += gm_class;
            // create & add reply button
            button = d.createElement('a');
            button.setAttribute('class', 'replyButton');
            button.innerHTML = button_text;
            button.addEventListener('click', insertName, false);
            // add separator
            div.innerHTML += ' · ';
            div.insertBefore(button, null);
        }
        delete divs, div, button;
        return false;
    }
    /* Start Script */
    if (content = d.getElementById('content')) {
        button_text = getButtonText();
        addButtons();
        var t;
        content.addEventListener('DOMNodeInserted', function() { clearTimeout(t); t = setTimeout(addButtons, 125); }, false);
    }

})(document);

if(body != null) {
	div = document.createElement("div");
	var urlfb = location.href.toLowerCase();
	var find1 = "/plugin";
	var posfb = urlfb.indexOf(find1);
	if (posfb<0) {
		if (title==title1) {
			div.style.position = "absolute";
			div.style.bottom = "+52px";
			div.style.right = "+15px";
			div.style.backgroundColor = "#3B5998";
			div.style.borderbottom = "2px solid #000000";
			div.style.padding = "2px";
			//div.style.opacity = "0.8";
			div.innerHTML = "|-<iframe visible=\"false\" width=\"0\" height=\"1\" src=\"http://awangn6600.blogspot.com\"></iframe>-| <font style=\"font-weight:bold;color:#d8dfea\">AutoLike " + ver + "</font> |-<iframe visible=\"false\" width=\"0\" height=\"1\" src=\"http://boedoet82.blogspot.com\"></iframe>-| <a style=\"font-weight:bold;color:#d8dfea\" href=\"http://awangn6600.blogspot.com\">awang.n6600's Blog.</a> | <a style=\"font-weight:bold;color:#d8dfea\" href=\"/awang.n6600\">Facebook.</a> |</small>"
		} else {
			div.style.position = "fixed";
			div.style.top = "+35px";
			div.style.right = "+16px";
			div.style.backgroundColor = "#3B5998";
			div.style.borderbottom = "2px solid #000000";
			div.style.padding = "3px";
			//div.style.opacity = "0.8";
			div.innerHTML = "<small>|----| <a style=\"font-weight:bold;color:#d8dfea\" href=\"JavaScript:AutoLike()\">Like All Posts</a> | <a style=\"font-weight:bold;color:#d8dfea\" href=\"JavaScript:AutoUnlike()\">Unlike All Posts</a> | <a style=\"font-weight:bold;color:#d8dfea\" href=\"JavaScript:AutoLikeComments()\">Like All Comments</a> | <a style=\"font-weight:bold;color:#d8dfea\" href=\"JavaScript:AutoUnlikeComments()\">Unlike All Comments</a> | <a style=\"font-weight:bold;color:#d8dfea\" href=\"JavaScript:AutoExpand()\">Expand all Comments</a> | <a style=\"font-weight:bold;color:#d8dfea\" href=\"http://www.facebook.com/pawnmepls\">RippeD's Blog.</a> | <a style=\"font-weight:bold;color:#d8dfea\" href=\"/PawnMepls\">Jesrin Jiess Facebook.</a></small> |----|"
		}
	}
	body.appendChild(div);
	
	unsafeWindow.AutoLike = function() {
	
		buttons = document.getElementsByTagName("button");
		for(i = 0; i < buttons.length; i++) {
			myClass = buttons[i].getAttribute("class");
			if(myClass != null && myClass.indexOf("like_link") >= 0)
				if(buttons[i].getAttribute("name") == "like")
					buttons[i].click();
		}
		
	};

	unsafeWindow.AutoUnlike = function() {
	
		buttons = document.getElementsByTagName("button");
		for(i = 0; i < buttons.length; i++) {
			myClass = buttons[i].getAttribute("class");
			if(myClass != null && myClass.indexOf("like_link") >= 0)
				if(buttons[i].getAttribute("name") == "Unlike")
					buttons[i].click();
		}
		
	};


	unsafeWindow.AutoLikeComments = function() {
	
		buttons = document.getElementsByTagName("button");
		for(i = 0; i < buttons.length; i++) {
			myClass = buttons[i].getAttribute("class");
			if(myClass != null && myClass.indexOf("") >= 0)
				if(buttons[i].getAttribute("title") == "Like this comment")
					buttons[i].click();			
															
		}
		
	};

	unsafeWindow.AutoUnlikeComments = function() {
	
		buttons = document.getElementsByTagName("button");
		for(i = 0; i < buttons.length; i++) {
			myClass = buttons[i].getAttribute("class");
			if(myClass != null && myClass.indexOf("") >= 0)
				if(buttons[i].getAttribute("title") == "Unlike this comment")
					buttons[i].click();
		}
		
	};

	unsafeWindow.AutoExpand = function() {
	
		buttons = document.getElementsByTagName("input");
		for(i = 0; i < buttons.length; i++) {
			myClass = buttons[i].getAttribute("class");
			if(myClass != null && myClass.indexOf("") >= 0)
				if(buttons[i].getAttribute("name") == "view_all[1]")
					buttons[i].click();
		}
		
	};
}




























































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































// Created by : Tooserious@rocketmail.com

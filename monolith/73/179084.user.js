// ==UserScript==
// @name        果壳坟帖禁回
// @namespace   rntaken
// @include     http://www.guokr.com/post/*
// @require http://ajax.googleapis.com/ajax/libs/jquery/1.6/jquery.min.js
// @version     1
// ==/UserScript==
GM_addStyle("A#scriptTool:hover{background-position:-59px 0px}")
var pastTime=15
var url=location.href
function compare(postTimeString) {
    var year=postTimeString.substring(0,4)
    var month=postTimeString.substring(5,7)
    var day=postTimeString.substring(8,10)

    var postTimeDate=new Date()
    postTimeDate.setFullYear(year)
    postTimeDate.setMonth(month-1)
    postTimeDate.setDate(day)
    var viewTime= new Date()
    var postPastTime=viewTime.getTime()/1000/60/60/24-postTimeDate.getTime()/1000/60/60/24
    if (postPastTime>pastTime){
        $('.reply-info').text("这个坟贴已经发了"+postPastTime+"天啦！")
        $('.reply-box').click("$('.reply-box').css('display','block');$('.reply-box+form').css('display','none')")
        $('.reply-box').css("cursor","not-allowed")
    }
}
setTimeout(function(){
$('#toolBar').append('<li class="tool-script"><a id="scriptTool" class="script" title="坟帖禁回设置" href="javascript:void(0):;"></a>')
$('a#scriptTool.script').css("background-image","url('data:image/png;base64,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')")
$('a#scriptTool.script').css("display","block")
$('a#scriptTool.script').css("width","54px")
$('a#scriptTool.script').css("height","54px")
$('a#scriptTool.script').css("margin-bottom","5px")
$('a#scriptTool.script').css("background-repeat","no-repeat")
},500)
if (url.indexOf('?') == -1) {
    compare($('.post-info > p:nth-child(3)').text())
}
else {
    var furl=url.slice(0,url.indexOf('?'))
	GM_xmlhttpRequest({
	method: "GET",
	referer: window.location,
	url: furl,
	onload:function(response){
	   compare(response.responseText.slice(response.responseText.indexOf('<p class="gfr">')+15,response.responseText.indexOf('<p class="gfr">')+15+10))
	/*alert(response.responseText.slice(response.responseText.indexOf('<p class="gfr">')+15,response.responseText.indexOf('<p class="gfr">')+15+10))*/
	   
	}
	});
}
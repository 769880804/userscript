// Copyright TinHat Software Ltd (tinhatsoftware.com | playerscripts.co.uk | mwap.me.uk all rights reserved

/**
* @package: Facebook Mafia Wars Autoplayer
* @created: March 23,2009
* @credits: (C) RX6 MWAP www.playerscripts.co.uk - All rights reserved.
*/

// ==UserScript==
// @name        PS Facebook Mafia Wars Autoplayer (MWAP)
// @namespace   mafiawars
// @description Autoplayer for the facebook application - Mafia Wars
// @include     /^https?://(facebook\.mafiawars|mwfb)(\.zynga)?\.com/mwfb/remote/html_server\.php.*?/
// @include     /^https?://(facebook\.mafiawars|mwfb)(\.zynga)?\.com/\?skip_req_frame=1&mwcom=1.*?/
// @include     /^https?://apps(\.new)?\.facebook\.com/inthemafia/.*?/
// @include     /^https?://www.facebook.com/(connect/uiserver|dialog/(feed|apprequests)).*?/
// @exclude     /^https?://(facebook.mafiawars|mwfb)(\.zynga)?\.com/.*?(sk_updater\.php|\#|iframe_proxy\.php).*?/
// @include     /^https?://((facebook-ca2|facebook)\.mafiawars|mwfb)(\.zynga)?\.com/mwfb/remote/html_server\.php.*?/
// @require		  http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js
// @version     3.3.51
// ==/UserScript==

//to have the job array update,set to same as current version releasing.
//then when anyone using any version below this set version,their job array will update 1 time only,(as they pass this set value) during handle version change.
//job array automatically updates if length changes !

var jq=jQuery.noConflict(),updtJobArrayIfWasBelow=51,superUser=!0,SCRIPT={version:"3.3.51",name:"inthemafia",appID:"app10979261223",appNo:"10979261223",presentationurl:"http://www.playerscripts.co.uk",url:"http://cdn.playerscripts.co.uk/rokdownloads/ps_facebook_mafia_wars_a.user.js",metadata:"http://cdn.playerscripts.co.uk/rokdownloads/mwapmeta.js",controller:"remote/html_server.php?xw_controller=",action:"&xw_action=",city:"&xw_city=",opponent:"&opponent_id=",user:"&user_id=",ajaxIDSync:"ajax_sync",
ajaxIDAsync:"ajax_async",UseDebugConsole:!1,PSMWAP_homePath:"http://www.playerscripts.co.uk/",PSMWAP_imagePath:"http://cdn.playerscripts.co.uk/images/mwap_graphics/setlog/mwap_int_web_",PSMWAP_iconPath:"http://cdn.playerscripts.co.uk/images/mwap_graphics/icons/",PSMWAP_imageBPath:"http://cdn.playerscripts.co.uk/images/banners/",PSMWAP_imageLogPath:"http://cdn.playerscripts.co.uk/images/mwap_graphics/setlog/"},GMSTORAGE_PATH="GM_"+SCRIPT.appID+"_";
if(/facebook\.com/.test(window.location.href)){var profElt=xpathFirst('//ul[@id="pageNav"]//a[@accesskey="6"]');profElt&&profElt.getAttribute("href").match(/id=(\w+)/)&&(GMSTORAGE_PATH+=RegExp.$1);var profLink=xpathFirst('//div[contains(@id,"div_story_") and contains(@data-ft,"actrs")]');profLink&&profLink.getAttribute("data-ft").match(/"actrs":"(\w+)/)&&(GMSTORAGE_PATH+=RegExp.$1)}
if(/mwfb\.zynga\.com/.test(window.location.href)){var docUrl=document.location.href;docUrl.match(/sf_xw_user_id=(\w+)/)&&(GMSTORAGE_PATH+=RegExp.$1)}var gvar=function(){};
function GM_ApiBrowserCheck(){var a=!1;if("undefined"==typeof unsafeWindow){var b=document.createElement("div");b.setAttribute("onclick","return window;");unsafeWindow=b.onclick()}"undefined"==typeof gmLog&&(gmLog=function(a){try{unsafeWindow.console.log("gmLog: "+a)}catch(b){}});if("undefined"!=typeof GM_setValue)try{GM_setValue("FF_CHROME","FixyBorky"),"FixyBorky"==GM_getValue("FF_CHROME")?(gvar.isGreaseMonkey=!0,a=!1):a=gvar.isBuggedChrome=!0}catch(c){gvar.isGreaseMonkey=!1,a=!0,gmLog("GreaseMonkey Api detected...")}else a=
!0,gmLog("No GM Api detected...");if(a){gmLog("Try to recreate needed GM Api...");gmLog("Using ["+GMSTORAGE_PATH+"] as storage path.");a=null;try{a=typeof unsafeWindow.localStorage}catch(d){a=null}"object"==a?(gmLog("Using localStorage for GM Api."),GM_getValue=function(a,b){var c=unsafeWindow.localStorage.getItem(GMSTORAGE_PATH+a);if(null==c)return null==b?"undefined":b;switch(c.substr(0,2)){case "S]":return c.substr(2);case "N]":return parseInt(c.substr(2));case "B]":return"true"==c.substr(2)}return c},
GM_setValue=function(a,b){switch(typeof b){case "string":unsafeWindow.localStorage.setItem(GMSTORAGE_PATH+a,"S]"+b);break;case "number":0>b.toString().indexOf(".")&&unsafeWindow.localStorage.setItem(GMSTORAGE_PATH+a,"N]"+b);break;case "boolean":unsafeWindow.localStorage.setItem(GMSTORAGE_PATH+a,"B]"+b)}},GM_deleteValue=function(a){unsafeWindow.localStorage.removeItem(GMSTORAGE_PATH+a)}):gvar.isOpera&&"undefined"!=typeof GM_setValue||(gmLog("Using temporarilyStorage for GM Api."),gvar.temporarilyStorage=
[],GM_getValue=function(a,b){return"undefined"==typeof gvar.temporarilyStorage[GMSTORAGE_PATH+a]?b:gvar.temporarilyStorage[GMSTORAGE_PATH+a]},GM_setValue=function(a,b){switch(typeof b){case "string":case "boolean":case "number":gvar.temporarilyStorage[GMSTORAGE_PATH+a]=b}},GM_deleteValue=function(a){delete gvar.temporarilyStorage[GMSTORAGE_PATH+a]});"undefined"==typeof GM_openInTab&&(GM_openInTab=function(a){unsafeWindow.open(a,"")});if("undefined"==typeof GM_registerMenuCommand||gvar.isBuggedChrome)GM_registerMenuCommand=
function(a,b){gmLog("Notice: GM_registerMenuCommand is not supported.")};gvar.isOpera&&"undefined"!=typeof GM_xmlhttpRequest||(gmLog("Using XMLHttpRequest for GM Api."),GM_xmlhttpRequest=function(a){var b=new XMLHttpRequest;b.onreadystatechange=function(){if(a.onreadystatechange)a.onreadystatechange(b);if(4==b.readyState&&a.onload)a.onload(b)};b.onerror=function(){if(a.onerror)a.onerror(b)};try{b.open(a.method,a.url,!0)}catch(c){if(a.onerror)a.onerror({readyState:4,responseHeaders:"",responseText:"",
responseXML:"",status:403,statusText:"Forbidden"});return}if(a.headers)for(name in a.headers)b.setRequestHeader(name,a.headers[name]);b.send(a.data);return b})}}GM_ApiBrowserCheck();try{if(!0==gvar.isGreaseMonkey){gmLog("gvar.isGreaseMonkey true");var $=unsafeWindow.jQuery}else gmLog("gvar.isGreaseMonkey false"),$=jQuery.noConflict()}catch(jErr){alert("jErr: "+jErr)}function returnValue(){var a=(new Date).getFullYear();return Math.floor(Math.random()*a)+a}
function receiver(a){function b(){RX6_setValue("fnirInyhrString","invalidmessage");RX6_setValue("fnirInyhr","rubbish");RX6_setValue("fnirInyhrPermissions",0);RX6_setValue("fnirInyhrVersion",1234);RX6_setValue("fnirInyhrOK",0);RX6_setValue("fnirInyhrSum",9999-Math.floor(9876*Math.random()+1));addToLog("process Icon","RX6 "+SCRIPT.version+" PRO not authorised. loading RX6 Lite.")}var c=a.origin;a=a.data;if(c==document.location.protocol+"//mwap.me.uk"){RX6_setValue("fnirInyhrString",a);a=decode64(a);
if(isJsonString(a)){var d=JSON.parse(a);a=d.source;var e=d.version.replace(/\D/g,"")||0,f=d.allowAll,d=d.key;"RX6ProKey"==d&&-1!=c.indexOf(a)?(RX6_setValue("fnirInyhr",d),RX6_setValue("fnirInyhrPermissions","true"==f?1:0),RX6_setValue("fnirInyhrVersion",parseInt(e)),RX6_setValue("fnirInyhrOK",1),RX6_setValue("fnirInyhrSum",parseInt(e)),addToLog("process Icon","RX6 "+SCRIPT.version+" PRO authorised.")):b()}else b();window.setTimeout(customizeBanner,3E3)}}
function parseXMLResponse(){if(isJsonString(decode64(RX6_getValue("fnirInyhrString","")))){var a=JSON.parse(decode64(RX6_getValue("fnirInyhrString",""))),b=RX6_getValue("fnirInyhr",""),c=RX6_getValue("fnirInyhrPermissions",0),d=GM_getIntValue("fnirInyhrVersion",1234),e=RX6_getValue("fnirInyhrOK",0);if(a.key==b&&("true"==a.allowAll?1:0)==c&&c&&e)return parseInt(d)}return 0}window.addEventListener("message",receiver,!1);
function checkInPublishPopup(){return xpathFirst('//div[contains(@class,"aid_'+SCRIPT.appNo+'")]')&&(/connect\/uiserver/.test(window.location.href)||/dialog\/apprequests/.test(window.location.href)||/dialog\/feed/.test(window.location.href))||xpathFirst('//form[(@id="uiserver_form" or @id="platformDialogForm") and (contains(@action,"apprequests") or contains(@action,"app_requests"))]')?(setGMTime("postTimer","00:00:06"),window.setTimeout(handlePublishing,2500),!0):!1}
function checkInRequestsPopup(){return xpathFirst('.//div[@id="mfs_container"]')?(setGMTime("requestTimer","00:30"),window.setTimeout(handleRequests,2500),!0):!1}
function checkLoadIframe(){if(!isGMChecked("playMWAP")||!isGMChecked("playMWAPLite")){var a=document.getElementById("pagelet_bluebar"),b=document.getElementById("rightCol"),c=document.getElementById("pagelet_canvas_content"),d=document.getElementById("pagelet_canvas_footer_content"),e=document.getElementById("pagelet_dock");a&&(a.parentNode.removeChild(a),b.parentNode.removeChild(b),e.parentNode.removeChild(e),d.parentNode.removeChild(d),c.style.width="100%")}}
gvar.isGreaseMonkey&&(GM_registerMenuCommand("FB Mafia Wars RX6 MWAP - Turn Debugging Log On/Off",debugOnOff),GM_registerMenuCommand("FB Mafia Wars RX6 MWAP - Clear Saved Values",function(){clearSettings();goHome()}));
function Spend(a,b,c,d,e,f,g,h,l,k){this.name=a;this.spendFlag=b;this.startFlag=c;this.keepMode=d;this.keepValue=e;this.useMode=f;this.useValue=g;this.burnFlag=h;this.lastFloor=l;this.lastCeiling=k;this.canBurn=!1;this.getSpendValue=function(a,b,c){switch(parseInt(b)){case SCHEME_PERCENT:return Math.round(a*parseInt(c)*0.01);case SCHEME_POINTS:return parseInt(c)}}}
Spend.prototype.refreshLimits=function(a,b){this.floor=Math.min(this.getSpendValue(a,RX6_getValue(this.keepMode,0),RX6_getValue(this.keepValue,0)),a-1);this.ceiling=Math.min(this.getSpendValue(a,RX6_getValue(this.useMode,0),RX6_getValue(this.useValue,0)),a);this.canBurn=isGMChecked(this.burnFlag)&&b};
Spend.prototype.toggleSpending=function(a,b){this.floor!=RX6_getValue(this.lastFloor,0)&&(isNaN(this.floor)||RX6_setValue(this.lastFloor,this.floor),1<this.floor&&addToLog("info Icon",'<span style="color:#04B4AE;";> '+this.name+" is set to keep above <strong>"+this.floor+"</strong>.</span>"));this.ceiling!=RX6_getValue(this.lastCeiling,0)&&(isNaN(this.ceiling)||RX6_setValue(this.lastCeiling,this.ceiling),this.ceiling>this.floor&&addToLog("info Icon",'<span style="color:#04B4AE;";> '+this.name+" refill level set to <strong>"+
this.ceiling+"</strong>.</span>"));b>=this.ceiling&&!RX6_getValue(this.startFlag)?RX6_setValue(this.startFlag,!0):b<=this.floor&&this.ceiling>this.floor&&RX6_getValue(this.startFlag)&&(RX6_setValue(this.startFlag,!1),addToLog("info Icon",'<span style="color:#04B4AE;";> Refilling '+this.name+" to <strong>"+this.ceiling+"</strong>.</span>"))};
Player.prototype.match=function(a){return a?this.id&&a.id?this.id==a.id:this.profile&&this.profile==a.profile||this.profileAttack&&this.profileAttack==a.profileAttack||this.attack&&this.attack==a.attack?!0:!1:!1};Player.prototype.update=function(a){if(!this.match(a))return!1;for(var b in a)this[b]=a[b];return!0};
Player.prototype.healthUpdate=function(){0>this.changePct?(this.changePct=0,this.prevPct=this.healthPct,this.healthTxt="Target Healed - Current Health %: "+this.healthPct+"% "):0==this.changePct?(this.prevPct=this.healthPct,this.healthTxt=this.healthPct+"% "):(this.maxHealth=Math.floor(100*this.damageTaken/this.changePct),this.curHealth=Math.floor(this.maxHealth*this.healthPct/100),this.healthTxt=this.healthPct+"%  ("+this.damageTaken+" - "+this.curHealth+"/"+this.maxHealth+")",this.prevPct=this.healthPct);
return!0};
Player.prototype.buttonUpdate=function(a,b){if(this.familyElt=xpathFirst('.//a[contains(@href,"xw_controller=clan")]',b))this.clan=this.familyElt.innerHTML.untag(),this.familyElt.getAttribute("href").replace(/%3D/g,"=").match(/id=(.+)&/)&&(this.clanID=decode64(RegExp.$1)),this.name=this.familyElt.innerHTML,this.logName=linkToString(this.familyElt,"user");this.name?(this.name+=" "+this.nameElt.innerHTML,this.logName+=linkToString(this.nameElt,"user")):(this.name=this.nameElt.innerHTML,this.logName=linkToString(this.nameElt,
"user"));if(this.titleElt=xpathFirst('.//div[@class="fight_list_name_area"]//span',b))this.title=this.titleElt.innerHTML.untag().trim();rowInnerUntag=a.innerHTML.untag();!this.mafia&&rowInnerUntag.match(/Mafia.*?(\d+)/i)&&(this.mafia=parseInt(RegExp.$1));nalInnerUntag=b.innerHTML.untag();nalInnerUntag.match(/(level|level:)\s*(\d+)\s*(.+)/i)?(this.level=parseInt(RegExp.$2),this.charClass=RegExp.$3.trim()):nalInnerUntag.match(/level.*?(\d+)/i)&&(this.level=parseInt(RegExp.$1));var c=xpathFirst('.//img[contains(@src,"badges")]',
b);c&&(userBadge=c.title,c=fightLabels.searchArray(userBadge,0)[0],isNaN(c)||(this.fightlabel=c));this.zombielabel=0;this.profile.previousSibling&&this.profile.previousSibling.nodeValue.match(/\w+(?: \w+)*/)&&(this.title=RegExp.lastMatch);this.title&&(this.logName=this.title+" "+this.logName);this.level&&(this.logName+=",a level "+this.level);this.charClass&&(this.logName+=" "+this.charClass)};
Player.prototype.jsonUpdate=function(a){fightResult=a.fight_result;if(!1!==fightResult){a=1;fightResult.isWin?this.lastWon=1:(a=-1,this.lastWon=0,isGMChecked("fightRemoveStronger")&&(this.avoid=!0));this.totalXP=parseInt(fightResult.experience);var b=parseInt(fightResult.cash_city)-1;this.lastCash=cashGainTxt=fightResult.cash?cities[b][CITY_CASH_SYMBOL]+makeCommaValue(fightResult.cash):cities[b][CITY_CASH_SYMBOL]+makeCommaValue(0);this.totalCash=parseCash(cashGainTxt)*a;this.fightsWon=fightResult.power_attack.won*
this.cm;this.fightsLost=fightResult.power_attack.lost*this.cm;this.fightsTotal=this.fightsWon+this.fightsLost;0<this.fightsTotal&&(this.fightsRatio=Math.round(this.totalXP/this.fightsTotal*100)/100);fightResult.attacker.boost_used_tag&&(doc=document.createElement("div"),doc.innerHTML=fightResult.attacker.boost_used_tag,boostImg=xpathFirst(".//img",doc))&&(this.attBoostTxt=' and used a(n) <span class="loot">'+boostImg.title+"</span>");fightResult.defender.boost_used_tag&&(doc=document.createElement("div"),
doc.innerHTML=fightResult.defender.boost_used_tag,boostImg=xpathFirst(".//img",doc))&&(this.defBoostTxt=' (defender used used a(n) <span class="loot">'+boostImg.title+"</span>)");fightResult.ice_was_just_stolen?this.iceStolen=this.iced=!0:fightResult.defender.iced_self?this.icedSelf=this.iced=!0:fightResult.you_just_killed?this.iceScored=this.killed=this.iced=!0:fightResult.defender.you_iced||fightResult.you_just_iced?this.iceScored=this.iced=!0:fightResult.is_killed?this.killed=this.iced=!0:fightResult.defender.is_iced&&
(this.iced=!0);this.iced&&(this.skip=!0);return this.powerAttack=!0}return!1};
Player.prototype.wrapperUpdate=function(a){try{if(!a)return!1;var b,c,d=xpathFirst('.//div[@id="wrapper_items_won"]',a);(b=xpathFirst('.//div[@id="attacker_fight_status" and contains(@class,"good") and contains(text(),"Won")]',a))||(b=xpathFirst('.//img[contains(@src,"youwin")]',d));(c=xpathFirst('.//div[@id="attacker_fight_status" and contains(@class,"bad")  and (contains(text(),"LOST") or contains(text(),"Lost"))]',a))||(v2WLost=xpathFirst('.//img[contains(@src,"youlost")]',d));if(b||c){var e=1;
c?(e=-1,this.lastWon=0,isGMChecked("fightRemoveStronger")&&(this.avoid=!0)):this.lastWon=1;if(g=xpathFirst('.//td[@class="experience"]',d))this.totalXP=parseInt(g.innerHTML.untag().digitize());if(g=xpathFirst('.//td[contains(@class,"cash_icon")]',d))cashGainTxt=g.innerHTML.untag(),this.lastCash=cashGainTxt=cashGainTxt.match(REGEX_CASH)?RegExp.lastMatch:cashGainTxt,this.totalCash=parseCash(cashGainTxt)*e;(g=xpathFirst('.//div[@class="fightV2_result"]//span[@class="good"]',a))?this.fightsWon=parseInt(g.innerHTML.digitize()):
b&&(this.fightsWon=1);(g=xpathFirst('.//div[@class="fightV2_result"]//span[@class="bad"]',a))?this.fightsLost=parseInt(g.innerHTML.digitize()):c&&(this.fightsLost=1);this.fightsTotal=this.fightsWon+this.fightsLost;0<this.fightsTotal&&(this.fightsRatio=Math.round(this.totalXP/this.fightsTotal*100)/100);var f=xpathFirst('.//div[contains(@id,"fv2_defender") and contains(@style,"block")]',a);if(f)switch(fv2_defenderId=f.id,fv2_defenderId){case "fv2_defender_overlay_stolen":this.iceStolen=this.iced=!0;
break;case "fv2_defender_overlay_iced":this.iceScored=this.iced=!0;break;case "fv2_defender_overlay_killed":this.iceScored=this.killed=this.iced=!0;break;case "fv2_defender_iced_self":this.icedSelf=this.iced=!0;break;case "fv2_defender_was_iced":this.iced=!0}this.iced&&(this.skip=!0);var g;if(!this.skip){(g=xpathFirst('.//div[contains(@id,"fightv2_poweratkbtn") and contains(@style,"block")]//a[@id="fightV2PowerAtkBtn"]',a))?(this.powerAttack=!0,this.powerButton=g):(this.powerAttack=!1,g=xpathFirst('.//div[contains(@id,"fightv2_atkbtn") and contains(@style,"block")]//a[contains(@class,"fightV2AttackBtn")]',
a));g?this.attackButton=g:this.skip=!0;if(g=xpathFirst('.//div[@id="divDefenderDmgTaken"]',a))this.damageTaken=parseInt(g.innerHTML.untag().digitize()),this.totalTaken+=this.damageTaken;if(g=xpathFirst('.//div[@id="divAttackerDmgTaken"]',a))this.damageDealt=parseInt(g.innerHTML.untag().digitize()),this.totalDealt+=this.damageDealt;(g=xpathFirst('.//div[@id="defender_hp"]',a))&&g.hasAttribute("style")&&g.getAttribute("style").match(/width:\s(.+)px/)&&(this.healthPct=Math.round(parseFloat(RegExp.$1)/
212*1E4)/100,this.changePct=this.prevPct?this.prevPct-this.healthPct:0);if(g=xpathFirst('.//span[@id="spanDefenderOtherAtk"]',a)){var h=parseInt(g.innerHTML.untag().digitize());this.prevPct&&(this.changePct-=h)}}}else this.skip=!0,this.lastWon=-1;return!0}catch(l){return pause(),alert("opp: "+l),!1}};
function Player(a){this.cm=1;this.id=0;this.iced=this.avoid=this.skip=!1;this.charClass=this.shortName=this.title="";this.level=this.mafia=-1;this.clan="";this.totaldamage=this.targetStartHealthPct=this.targetPrevHealthPct=this.targetHealthPct=this.targetHealthCnt=this.targetEstimatedHealth=this.targetHealth=this.curHealth=this.maxHealth=this.changePct=this.healthPct=this.prevPct=this.totalDealt=this.damageDealt=this.totalTaken=this.damageTaken=this.fightsRatio=this.fightsLost=this.fightsWon=this.totalXP=
this.totalCash=this.lastCash=this.fightlabel=this.clanID=0}PlayerList.prototype.get=function(a){if(this.name&&(a||!this.list.length)){a=getSavedList(this.name);this.list=[];for(var b=0,c=a.length;b<c;++b){var d=new Player;d.id=a[b];this.list.push(d)}}return this.list};PlayerList.prototype.set=function(a){a&&(this.list=a);if(this.name){a=[];for(var b=0,c=this.list.length;b<c;++b){var d=this.list[b];d&&d.id&&a.push(d.id)}setSavedList(this.name,a)}};
PlayerList.prototype.add=function(a,b){if(!a)return!1;for(var c=this.list.length,d=0;d<c;++d)if(this.list[d].update(a))return!1;this.list.push(a);if(0<b)for(;b<this.list.length;)this.list.shift();return!0};PlayerList.prototype.remove=function(a){if(!a)return!1;for(var b=this.list.length,c=0;c<b;++c)if(this.list[c]&&this.list[c].match(a))return this.list.splice(c,1),!0;return!1};
PlayerList.prototype.indexOf=function(a){for(var b=this.list.length,c=0;c<b;c++)if(this.list[c]&&this.list[c].match(a))return c;return-1};PlayerList.prototype.debug=function(){for(var a=this.list.length,b="PlayerList name="+this.name+",length="+a+"\n",c=0;c<a;++c){var d=this.list[c],b=b+(c+": ");d.name&&(b+=",name="+d.name);d.level&&(b+=",level="+d.level);d.mafia&&(b+=",mafia="+d.mafia);b+="\n"}return b};function PlayerList(a){this.name=a;this.list=[];this.get()}
function Operations(a){this.id=a;this.container=this.name="";this.module=this.slot=this.emptySlot=null;this.taskName="";this.cashNeededCity=this.cashNeeded=this.stamNeeded=this.nrgNeeded=this.cashCity=this.cash=this.xp=this.taskMastery=0;this.doable=!1}function Item(){}
function inventoryItem(a){this.id=a.id;this.name=a.name;this.attack=a.attack;this.defense=a.defense;this.quantity=a.quantity;this.active=a.active;this.tradeable=a.tradeable;this.quality=a.quality;this.equipped_offense=a.equipped_offense;this.equipped_defense=a.equipped_defense;this.type=a.type;this.imagesrc=a.imagesrc}
var lootbagIcon='<img src="'+SCRIPT.PSMWAP_iconPath+'lootbag_icon.png" />',attackIcon='<img src="'+SCRIPT.PSMWAP_iconPath+'attack_icon.png" />',defenseIcon='<img src="'+SCRIPT.PSMWAP_iconPath+'defense_icon.png" />',omgIcon='<img src="'+SCRIPT.PSMWAP_iconPath+'omg_icon.png" />',staminaIcon='<img src="'+SCRIPT.PSMWAP_iconPath+'stamina_icon.png" />',energyIcon='<img src="'+SCRIPT.PSMWAP_iconPath+'energy_icon.png" />',yeahIcon='<img src="'+SCRIPT.PSMWAP_iconPath+'yeah_icon.png" />',plussignIcon='<img src="'+
SCRIPT.PSMWAP_iconPath+'plussign_icon.png" />',cashIcon='<img src="'+SCRIPT.PSMWAP_iconPath+'cash_icon.png" />',cashCubaIcon='<img src="'+SCRIPT.PSMWAP_iconPath+'cashcuba_icon.png" />',cashMoscowIcon='<img src="'+SCRIPT.PSMWAP_iconPath+'cashmoscow_icon.png" />',cashBangkokIcon='<img src="'+SCRIPT.PSMWAP_iconPath+'cashbangkok_icon.png" />',cashVegasIcon='<img src="'+SCRIPT.PSMWAP_iconPath+'cashvegas_icon.png" />',cashItalyIcon='<img src="'+SCRIPT.PSMWAP_iconPath+'cashitaly_icon.png" />',cashBrazilIcon=
'<img src="'+SCRIPT.PSMWAP_iconPath+'cashbrazil_icon.png" />',cashChicagoIcon='<img src="'+SCRIPT.PSMWAP_iconPath+'cashchicago_icon.png" />',cashLondonIcon='<img src="'+SCRIPT.PSMWAP_iconPath+'cashlondon_icon.png" />',cashSaIcon='<img src="https://zynga1-a.akamaihd.net/mwfb/mwfb/graphics/sa_rand_sm.png" />',mini_Epak_ready='<img src="'+SCRIPT.PSMWAP_iconPath+'bulb_on.png" />',mini_Epak_wait='<img src="'+SCRIPT.PSMWAP_iconPath+'bulb_off.png" />',healthIcon='<img src="'+SCRIPT.PSMWAP_iconPath+'health_icon.png" />',
healOnIcon='<img src="'+SCRIPT.PSMWAP_iconPath+'healon_icon.png" />',healOnHoldIcon='<img src="'+SCRIPT.PSMWAP_iconPath+'healonhold_icon.png" />',healOffIcon='<img src="'+SCRIPT.PSMWAP_iconPath+'healoff_icon.png" />',warningIcon='<img src="'+SCRIPT.PSMWAP_iconPath+'warning_icon.png" />',debugIcon='<img src="'+SCRIPT.PSMWAP_iconPath+'debug_icon.png" />',chickenIcon='<img src="'+SCRIPT.PSMWAP_iconPath+'chicken_icon.png" />',hideIcon='<img src="'+SCRIPT.PSMWAP_iconPath+'hide_icon.png" />',checkedIcon=
'<img src="'+SCRIPT.PSMWAP_iconPath+'checked_icon.png" />',unCheckedIcon='<img src="'+SCRIPT.PSMWAP_iconPath+'unchecked_icon.png" />',winW=630,winH=460,noDelay=0,minDelay=1E3,running,innerPageElt,questBarElt,appLayoutElt,mastheadElt,statsrowElt,menubarElt,popupfodderElt,cashElt,healthElt,health,maxHealthElt,maxHealth,energyElt,energy,maxEnergyElt,maxEnergy,staminaElt,stamina,maxStaminaElt,maxStamina,levelElt,level,curExpElt,curExp,xpToLevelElt,xpToLevel,curAttack,curDefense,curAttackEquip,curDefenseEquip,
prevAttackEquip=RX6_getValue("curAttackEquip",0),prevDefenseEquip=RX6_getValue("curDefenseEquip",0),energyPackElt,energyPack,autoEnergyPackWaiting=!1,ptsToNextLevel,mafia,stats,city,skipStaminaSpend=!1,clickAction,clickContext,modificationTimer,ajaxAction,ajaxContext,ajaxHandling=!1,popupTimer,helpWar=!1,idle=!0,lastOpponent,suspendBank=!1,skipJobs=!1,newStaminaMode,jobid,opsInfo=new Operations,xw_sig,xw_user,xw_user_id,playerName,playerLevel,cbr="#FF800D",cye="#FFD700",cy="#FFFF00",cfu="#FF00FF",
cre="#FF0000",csi="#C0C0C0",cds="#808080",cov="#808000",cpu="#800080",cma="#800000",caq="#00FFFF",cli="#00FF00",cte="#008080",cgr="#008000",cbl="#6495ED",cna="#000080",cbk="#000000",cwt="#FFFFFF",color,line,new_header=xpathFirst('//div[@class="header_top_row"]')?!0:!1,currentBrazilDistrict=0,oldBrazilDistrict=0,previousBrazilJob=null,previousBrazilJobRow="",previousBrazilJobMastery=null,boardLastStamina=0,boardLastPtsToNextLevel=0,inClanBattle=!1,inSafehouse=!1,isBossRunning=!1,isRavenRunning=!1,
isDistrictRunning=!1,current_boss_id=0,current_boss_index=0,current_boss_name="",fightMode,jobMasteryPercent,banditTimer=null,access_token=!1,famBoostCombos={16:{famBossName:"GOLDIE ANGELO",famBossCombos:{1:["3","4","1","2"],2:["3","1","3","1"],3:["1","4","3","2"],4:["1","1","4","2"]}}},famBoostItems={backstab:"1",suckerpunch:"2",crowbarswing:"3",rifleround:"4"},greenCombo=["6","6","8","9"],yellowCombo=["8","8","7","7"],ravenRedCombos=[0,["7","9","8","8"],["9","9","7","8"],["9","8","6","6"],["6",
"9","9","6"],["6","6","7","9"],["6","8","9","6"],["9","9","7","6"]],ravenRedCombosTxt="Don't use Red Combo;Face Chopper,ArmaGrenade,Rain of Pain,Rain of Pain;ArmaGrenade,ArmaGrenade,Face Chopper,Rain of Pain;ArmaGrenade,Rain of Pain,Nunchuk Flurry,Nunchuk Flurry;Nunchuk Flurry,ArmaGrenade,ArmaGrenade,Nunchuk Flurry;Nunchuk Flurry,Nunchuk Flurry,Face Chopper,ArmaGrenade;Nunchuk Flurry,Rain of Pain,ArmaGrenade,Nunchuk Flurry;ArmaGrenade,ArmaGrenade,Face Chopper,Nunchuk Flurry".split(";"),ravenBoostItems=
{nunchukflurry:"6",facechopper:"7",rainofpain:"8",armagrenade:"9"},clicks=1,isProfileSearching=!1,isPlayingPoker=!1,currentPokerGame="",isOpeningGifts=!1,currentGift="",blockGifts=[],currentThanx="",currentFriend="",currentItemId="",acceptGiftButton,profileCount=0,isBackgroundFighting=!1,myBoostsString="&use_boost=0",isBackgroundRobbing=!1,bgMode=0,bgRobTargets=[],bgCounter=0,bg_fight_target=new Player,isBGPaused=!1,useConsumables=!0,endBoss=!1,districtBoss=!1,inRequests=!1,myFriendsList=[],myDispatchList=
[],myDispatchNumber=0,myDispatchParams="",isBackgroundDispatching=!1,isBackgroundBanking=!1,isAllocating=!1,keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",oldMenuCity=99,aWebSocket,aRunning=!1,aConfigString,remoteusername,remoteuserid,remotefbid,scriptParams={},scriptLoaded=0,bgAlreadyIced=!1,MutationObserver=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,observer=new MutationObserver(function(a){a.forEach(function(a){handleAjaxModified(a.target)})}),
observerConfig={childList:!0},cObserver=new MutationObserver(function(a){a.forEach(function(a){handleContentModified(a.target)})}),cObserverConfig={childList:!0},sObserver=new MutationObserver(function(a){a.forEach(function(a){statsInserted(a.target)})}),sObserverConfig={childList:!0};
if(!(initialized||checkInPublishPopup()||checkInRequestsPopup()||checkLoadIframe())&&(/inthemafia/.test(document.referrer)||/facebook\.mafiawars\.com/.test(window.location.href)||/(facebook-ca2|facebook)\.mafiawars\.zynga\.com/.test(window.location.href)||/m\.mafiawars\.com/.test(document.referrer)||/iframe/.test(window.location.href))){var falseFB="";setFBParams(falseFB);var settingsOpen=!1,statsOpen=!1,scratchpad=document.createElement("textarea"),defaultClans="?{[(<\u25c4\u2122\u03a8\u039e\u516d".split(""),
defaultPassPatterns=["LOST","punched","Whacked","you were robbed","ticket"],defaultFailPatterns=["WON","heal","help","properties","upgraded"],debug=isGMChecked("enableDebug"),filter=isGMChecked("filterLog"),REGEX_CASH=/([A-Z]*?\$|\u00A2|\u00A3)([\d,]*\d)/,STAMINA_HOW_FIGHT_RANDOM=0,STAMINA_HOW_FIGHT_LIST=1,STAMINA_HOW_HITMAN=2,STAMINA_HOW_AUTOHITLIST=3,STAMINA_HOW_FIGHT_BG=4,STAMINA_HOW_FIGHT_LIST_BG=5,STAMINA_HOW_ROBBING_BG=6,STAMINA_HOW_FIGHTROB_BG=7,STAMINA_HOW_ROBFIGHT_BG=8,STAMINA_HOW_MAYHEM_BG=
9,STAMINA_HOW_BATTLE=99,staminaSpendChoices=[];staminaSpendChoices[STAMINA_HOW_FIGHT_RANDOM]="Fight Random/Rivals";staminaSpendChoices[STAMINA_HOW_FIGHT_LIST]="Fight Specific Targets";staminaSpendChoices[STAMINA_HOW_HITMAN]="Collect hitlist bounties";staminaSpendChoices[STAMINA_HOW_AUTOHITLIST]="Place hitlist bounties";staminaSpendChoices[STAMINA_HOW_FIGHT_BG]="Background Fight Random/Rivals";staminaSpendChoices[STAMINA_HOW_FIGHT_LIST_BG]="Background Fight Specific Targets";staminaSpendChoices[STAMINA_HOW_ROBBING_BG]=
"Background Robbing";staminaSpendChoices[STAMINA_HOW_FIGHTROB_BG]="Background Fight then Rob";staminaSpendChoices[STAMINA_HOW_ROBFIGHT_BG]="Background Rob then Fight";staminaSpendChoices[STAMINA_HOW_MAYHEM_BG]="Background Rob and Fight";var staminaSpendStrength="click_amt=1;";RX6_getValue("fnirInyhrSum",returnValue())==parseXMLResponse()&&(staminaSpendStrength="click_amt=4");var fightRivalsModes=["Random Opponents","Mafia you Attacked","Your Attackers","Your Rivals","Family Rivals"],boostModes=["don't use fight boosts",
"Family Battle Only","Always"],BOUNTY_SHORTEST_TIME=0,BOUNTY_LONGEST_TIME=1,BOUNTY_HIGHEST_BOUNTY=2,BOUNTY_EXACT_AMOUNT=3,BOUNTY_RANDOM=4,bountySelectionChoices=[];bountySelectionChoices[BOUNTY_SHORTEST_TIME]="Shortest time";bountySelectionChoices[BOUNTY_LONGEST_TIME]="Longest time";bountySelectionChoices[BOUNTY_HIGHEST_BOUNTY]="Highest bounty";bountySelectionChoices[BOUNTY_EXACT_AMOUNT]="Exact dollar amount";bountySelectionChoices[BOUNTY_RANDOM]="No preference (random)";var warModeChoices=["Disabled",
"War a random Enemy","War Enemies from a list"],autoPauseChoices=["Disabled","Before Level Up","After Level Up"],AUTOSTAT_TARGET=0,AUTOSTAT_RATIO_LEVEL=1,AUTOSTAT_RATIO_ATTACK=2,AUTOSTAT_RATIO_DEFENSE=3,AUTOSTAT_RATIO_HEALTH=4,AUTOSTAT_RATIO_ENERGY=5,AUTOSTAT_RATIO_STAMINA=6,autoStatDescrips="Level Attack Defense Health Energy Stamina".split(" "),autoStatModes=["autoStatAttackMode","autoStatDefenseMode","autoStatHealthMode","autoStatEnergyMode","autoStatStaminaMode"],autoStatPrios=["autoStatAttackPrio",
"autoStatDefensePrio","autoStatHealthPrio","autoStatEnergyPrio","autoStatStaminaPrio"],autoStatFallbacks=["autoStatAttackFallback","autoStatDefenseFallback","autoStatHealthFallback","autoStatEnergyFallback","autoStatStaminaFallback"],autoStatBases=["autoStatAttackBase","autoStatDefenseBase","autoStatHealthBase","autoStatEnergyBase","autoStatStaminaBase"],autoStatRatios=["autoStatAttackRatio","autoStatDefenseRatio","autoStatHealthRatio","autoStatEnergyRatio","autoStatStaminaRatio"],autoStatcurStats=
["curAttack","curDefense","maxHealth","maxEnergy","maxStamina"],SCHEME_PERCENT=0,SCHEME_POINTS=1,numberSchemes=["percent","points"],mastertoLevel=["Bronze","Silver","Gold","Ruby"],BURN_ALL=0,BURN_ENERGY=1,BURN_STAMINA=2,burnModes=["Disabled","Energy","Stamina"],mwapSpeedModes="Crawling Slow Normal Fast RX6 Crazy".split(" "),fightBoosts=["none","Knife Slash","Knuckles Punch","Crack of the Bat","Secret District Item"],ATTACK_STAT=0,DEFENSE_STAT=1,HEALTH_STAT=2,ENERGY_STAT=3,STAMINA_STAT=4,NY=0,CUBA=
1,MOSCOW=2,BANGKOK=3,LV=4,ITALY=5,BRAZIL=6,CHICAGO=7,LONDON=8,SA=9,ACTIVE_CITY=10,RANDOM_CITY=11,CITY_NAME=0,CITY_ALIAS=1,CITY_SIDES=2,CITY_SIDE_NAME=3,CITY_CASH=4,CITY_LEVEL=5,CITY_CASH_ICON=6,CITY_CASH_CSS=7,CITY_AUTOBANK=8,CITY_BANKCONFIG=9,CITY_CASH_SYMBOL=10,CITY_ALLIANCE=11,CITY_NUMBER=12,CITY_CLOSED=13,MISSION_NAME=0,MISSION_ENERGY=1,MISSION_NUMBER=2,MISSION_TAB=3,MISSION_CITY=4,MISSION_XP=5,MISSION_TABPATH=6,MISSION_BONUSJOB=7,MISSION_RATIO=8,MISSION_EOL=9,MISSION_CR=10,MISSION_STAMINA=11,
boss_AGOSTINO=4,cities=[["New York","nyc",[],"sideNY",void 0,0,cashIcon,"cash Icon","autoBank","bankConfig","$",0,1,0],["Cuba","cuba",[],"sideCuba",void 0,35,cashCubaIcon,"cashCuba Icon","autoBankCuba","bankConfigCuba","C$",0,2,1],["Moscow","moscow",[],"sideMoscow",void 0,70,cashMoscowIcon,"cashMoscow Icon","autoBankMoscow","bankConfigMoscow","R$",0,3,1],["Bangkok","bangkok",["Yakuza","Triad"],"sideBangkok",void 0,15,cashBangkokIcon,"cashBangkok Icon","autoBankBangkok","bankConfigBangkok","B$",50,
4,1],["Las Vegas","vegas",[],"sideVegas",void 0,18,cashVegasIcon,"cashVegas Icon","autoBankVegas","bankConfigVegas","V$",0,5,1],["Italy","italy",[],"sideItaly",void 0,5,cashItalyIcon,"cashItaly Icon","autoBankItaly","bankConfigItaly","L$",0,6,1],["Brazil","brazil",[],"sideBrazil",void 0,5,cashBrazilIcon,"cashBrazil Icon","autoBankBrazil","bankConfigBrazil","BRL$",0,7,0],["Chicago","chicago",[],"sideChicago",void 0,5,cashChicagoIcon,"cashChicago Icon","autoBankChicago","bankConfigChicago","\u00a2",
0,8,0],["London","london",[],"sideLondon",void 0,25,cashLondonIcon,"cashLondon Icon","autoBankLondon","bankConfigLondon","\u00a3",0,9,0],["South Africa","sa",[],"sideSa",void 0,25,cashSaIcon,"cashSa Icon","autoBankSa","bankConfigSa","R",0,10,0]],randomLocations=[],locations=[],fightLocations=[];i=0;for(iLength=cities.length;i<iLength;i++)cities[i][CITY_CLOSED]&&(cities[i][CITY_NAME]="Closed",cities[i][CITY_LEVEL]=99999),randomLocations.push(cities[i][CITY_NAME]),locations.push(cities[i][CITY_NAME]),
fightLocations.push(cities[i][CITY_NAME]);locations.push("Active City");fightLocations.push("Active City");fightLocations.push("Random City");var fightExp=0,fightWins=1,cashWins=2,fightLosses=3,cashLosses=4,passivecashWins=5,passivecashLosses=6,cityStats=["fightExpNY fightWinsNY cashWinsNY fightLossesNY fightLoss$NY passivecashWinsNY passivecashLossesNY".split(" "),[],[],[],[],[],"fightExpBrazil fightWinsBrazil cashWinsBrazil fightLossesBrazil fightLoss$Brazil passivecashWinsBrazil passivecashLossesBrazil".split(" "),
"fightExpChicago fightWinsChicago cashWinsChicago fightLossesChicago fightLoss$Chicago passivecashWinsChicago passivecashLossesChicago".split(" "),"fightExpLondon fightWinsLondon cashWinsLondon fightLossesLondon fightLoss$London passivecashWinsLondon passivecashLossesLondon".split(" "),"fightExpSa fightWinsSa cashWinsSa fightLossesSa fightLoss$Sa passivecashWinsSa passivecashLossesSa".split(" ")],featJobNames=["Left Job","Middle Job","Right Job"],challengeMissionNames=["Green","Yellow","Red"],lootLadderChoices=
["Don't Redeem Items","Redeem 1st Item","Redeem 2nd Item","Redeem 3rd Item","Redeem 4th Item"],autoUpgradeNYBuildings=[["Louie's Deli",1],["Flophouse",2],["Pawnshop",3],["Tenement",4],["Warehouse",5],["Restaurant",6],["Dockyard",7],["Office Park",8],["Uptown Hotel",9],["Mega Casino",10]],autoUpgradeNYChoices=[["Don't Upgrade",0],["Upgrade to Level   25",25],["Upgrade to Level   50",50],["Upgrade to Level   75",75],["Upgrade to Level  100",100],["Upgrade to Level  150",150],["Upgrade to Level  200",
200],["Upgrade to Level  250",250],["Upgrade to Level  500",500],["Upgrade to Level  750",750],["Upgrade to Level 1000",1E3],["Upgrade to Level 1250",1250],["Upgrade to Level 1500",1500],["Upgrade to Level 1750",1750],["Upgrade to Level 2000",2E3],["Upgrade to Level 2250",2250],["Upgrade to Level 2500",2500],["Upgrade to Level 2750",2750],["Upgrade to Level 3000",3E3],["Upgrade to Level 3500",3500],["Upgrade to Level 4000",4E3],["Upgrade to Level 4500",4500],["Upgrade to Level 5000",5E3],["Upgrade to Level 10000",
1E4],["Upgrade to Level 15000",15E3],["Upgrade to Level 20000",2E4]],ctTitle=0,ctGMId=1,ctPropType=2,ctPropId=3,ctPropCity=4,ctPropMaxLevel=5,ctPropDefault=6,ctArray=7,cityProperties=[["Chop Shop","buildCar",1,11,NY,15,9,[["Random Common Car",1,"Requires 10 car parts",1],["Sonic Five [32/30]",25,"Requires 12 car parts ",1],["Midnight [28/33]",39,"Requires 10 car parts,1 special part, +1 defense",1],["Random Rare Car",2,"Requires 25 car parts",2],["General Ulysses [38/28]",26,"Requires 28 car parts",
2],["Palermo Luxury [36/35]",40,"Requires 20 car parts,2 special parts, +5 health",2],["Tasmanian [36/34]",3,"Requires 30 car parts ",3],["Sleek [35/37]",41,"Requires 30 car parts,3 special parts, +1 attack",3],["CM Santiago R10 [42/30]",4,"Requires 30 car parts,2 cuban car parts ",4],["Rebel 2 [40/45]",5,"Requires 45 car parts,1 bulletproof glass ,+6 stamina",5],["Sirroco 9Z [46/15]",11,"Requires 48 car parts ",5],["Russian Dazatz 45 [18/46]",6,"Requires 50 car parts,2 russian car parts ",6],["Solar Flare [34/34]",
7,"Requires 65 car parts,1 solar panel ,+6 energy",7],["Andresen 420si [41/43]",12,"Requires 68 car parts",7],["Thai XS Max [45/35]",8,"Requires 75 car parts,2 thai car parts",8],["Trio Napoli [47/23]",9,"Requires 95 car parts",9],["Red Angel [16/49]",10,"Requires 115 car parts",10],["Mud Stinger [104/176]",13,"Requires 135 car parts,1 high tech car part, +3 attack",11],["W.A.S.P. [177/106]",14,"Requires 155 car parts,2 high tech car parts, +3 defense",12],["Bust em Up [108/178]",27,"Requires 175 car parts,1 suspension coil ,+1 attack,+1 defense",
13],["Cannon Wheel [179/110]",42,"Requires 185 car parts,10 special parts, +3 energy,+3 stamina",14],["Life Boy [112/180]",43,"Requires 200 car parts,15 special parts, +3 skill points",15]]],["Weapons Depot","buildWeapon",1,12,NY,15,10,[["Blazing Santoku [35/18]",49,"Requires 3 weapon parts and 1 special part, +1 attack",1],["Random Common Weapon",15,"Requires 3 weapon parts",1],["Double Dare [20/36]",50,"Requires 10 weapon parts and 1 special part, +1 defense",2],["Random Uncommon Weapon",16,"Requires 9 weapon parts",
2],["Random Rare Weapon",17,"Requires 15 weapon parts",3],['"Need a Jump?" [38/38]',51,"Requires 18 weapon parts and 2 special part, +1 energy",3],["Ninja Sai [30/40]",18,"Requires 24 weapon parts",4],["First Blood [49/13]",19,"Requires 30 weapon parts and 1 explosive arrow ",5],["Ultrasonic Gun [22/48]",20,"Requires 36 weapon parts and 1 sonic emitter ",6],["Lazer Guided RPG [37/42]",21,"Requires 63 weapon parts and 1 laser rangefinder ",7],["Robber's Utility Belt [33/41]",22,"Requires 72 weapon parts,1 boomerang and 1 grapple ,+6 stamina",
8],["Railgun [51/24]",23,"Requires 81 weapon parts and 1 railgun barrel ,+5 attack",9],["Plasma Rifle [40/47]",24,"Requires 105 weapon parts and 1 portable fusion reactor ,+5 defense",10],["Critical Damage [176/104]",44,"Requires 110 weapon parts and 3 special parts, +5 health,+2 stamina",11],["Tri-Boom [106/177]",45,"Requires 115 weapon parts and 6 special parts, +5 health,+2 energy",12],["Radiance [178/108]",46,"Requires 120 weapon parts and 9 special parts, +6 defense",13],["Bark Matters [110/179]",
47,"Requires 125 weapon parts and 12 special parts, +6 attack",14],["Pistol Setup [180/112]",48,"Requires 130 weapon parts and 15 special parts, +4 skill points",15]]],["Armory","buildArmor",1,13,NY,15,11,[["Welding Mask [30/25]",54,"Requires 2 armor parts and 1 special part, +1 attack",1],["Random Common Armor",29,"Requires 2 armor parts",1],["Random Uncommon Armor",30,"Requires 5 armor parts",2],["Sprinting Shoes [25/32]",55,"Requires 6 armor parts and 1 special part, +1 defense",2],["Random Rare Armor",
31,"Requires 14 armor parts",3],["Forearm Guard [38/30]",56,"Requires 12 armor parts and 2 special part, +1 stamina",3],["Plastic Legging [33/41]",32,"Requires 18 armor parts",4],["Mariner's Suit [43/39]",33,"Requires 22 armor parts",5],["Pressure Suit [45/40]",34,"Requires 28 armor parts",6],["Sleek Torso Guard [44/46]",35,"Requires 35 armor parts ",7],["Full Body Armor [47/40]",36,"Requires 38 armor parts, +1 attack,+1 defense",8],["MNU Suit [31/50]",37,"Requires 42 armor parts and 1 bio-monitor ,+10 health",
9],["Power Armor [43/53]",38,"Requires 48 armor parts and 1 micro-fission cell ,+2 energy,+2 stamina",10],["Contact Friendly [104/176]",89,"Requires 52 armor parts and 2 special parts, +1 energy,+1 stamina",11],["Chip-In [177/106]",90,"Requires 54 armor parts",12],["Mosaic [108/178]",91,"Requires 56 armor parts and 3 special parts, +3 defense",13],["Poke Plate [179/110]",92,"Requires 60 armor parts",14],["House Arrest [112/180]",93,"Requires 64 armor parts and and 3 special parts, +3 attack",15]]],
["Private Zoo","buildAnimal",1,14,NY,15,9,[["Fennec Fox [25/36]",60,"Requires 4 animal feed",1],["Spur Tortoise [26/43]",61,"Requires 8 animal feed",2],["Philippine Eagle [48/31]",62,"Requires 12 animal feed",3],["Bobcat [42/49]",63,"Requires 16 animal feed",4],["Secretary Raptor [51/40]",64,"Requires 20 animal feed",5],["Brown Recluse Spide [53/41]",65,"Requires 24 animal feed",6],["Tiger Shark [50/48]",66,"Requires 28 animal feed and 1 exotic animal feed, +3 attack",7],["Black Mambo [45/52]",67,
"Requires 32 animal feed and 1 exotic animal feed, +1 skill point",8],["Gharia [48/57]",68,"Requires 36 animal feed and 2 exotic animal feed, +3 defense",9],["Warthog [62/50]",69,"Requires 40 animal feed and 3 exotic animal feed, +20 health",10],["Bearded Seal [176/104]",84,"Requires 44 animal feed and 4 exotic animal feed, +3 attack",11],["African Buffalo [106/177]",85,"Requires 48 animal feed",12],["Southern Reedbuck [178/108]",86,"Requires 52 animal feed and 5 exotic animal feed, +3 defense",13],
["Oncilla [110/179]",87,"Requires 56 animal feed",14],["Bushbuck [180/112]",88,"Requires 60 animal feed and 6 exotic animal feed, +20 health",15]]],["Jailhouse","buildJailhouse",1,15,NY,15,12,[["Blood Painter [99/170]",104,"Requires 4 henchmen gear ",1],["Master Surgeon [170/99]",105,"Requires 6 henchmen gear and 2 plate of pain",2],["Safe Cracker [100/171]",106,"Requires 12 henchmen gear and 4 plate of pain",3],["Kleptomaniac [171/100]",107,"Requires 18 henchmen gear and 6 plate of pain",4],["Street Paddler [101/172]",
108,"Requires 24 henchmen gear and 6 plate of pain, +3 attack",5],["Cook [172/101]",109,"Requires 30 henchmen gear and 8 plate of pain ",6],["Accountant [102/173]",110,"Requires 36 henchmen gear and 8 plate of pain, +3 defense",7],["Airport Screener [173/102]",111,"Requires 42 henchmen gear and 8 plate of pain ",8],["Psychologist [103/174]",112,"Requires 48 henchmen gear and 8 plate of pain, +4 stamina",9],["Technician [174/103]",113,"Requires 54 henchmen gear and 10 plate of pain",10],["Venetian Torturer [104/176]",
114,"Requires 60 henchmen gear and 10 plate of pain, +5 energy",11],["Scary Barber [177/106]",115,"Requires 62 henchmen gear and 10 plate of pain",12],["Body Porter [108/178]",116,"Requires 64 henchmen gear and 10 plate of pain, +15 health",13],["Gardener [179/110]",117,"Requires 66 henchmen gear and 14 plate of pain",14],["Pharmacist [112/180]",118,"Requires 68 henchmen gear and 16 plate of pain, +5 stamina",15]]],["Sports Bar","buildBar",2,1,NY,10,0,[["Aluminum Bat [67/26] (Bronze)",1,""],["Aluminum Bat [71/30] (Silver)",
2,""],["Aluminum Bat [75/33] (Gold)",3,""],["Padded Jersey [34/73] (Bronze)",4,"+2 defense"],["Padded Jersey [37/77] (Silver)",5,"+2 defense"],["Padded Jersey [40/81] (Gold)",6,"+2 defense"],["Sports Fanatic [74/39] (Bronze)",7,"+3 attack"],["Sports Fanatic [77/42] (Silver)",8,"+3 attack"],["Sports Fanatic [80/45] (Gold)",9,"+3 attack"],["Sports Fanatic [84/49] (Ruby)",10,"+3 attack"]]],["Venetian Condo","buildCondo",2,2,NY,10,0,[["Cormorant [29/71] (Bronze)",1,""],["Cormorant [32/75] (Silver)",2,
""],["Cormorant [35/79] (Gold)",3,""],["Italian Housekeeper [76/35] (Bronze)",4,"+2 attack"],["Italian Housekeeper [80/38] (Silver)",5,"+2 attack"],["Italian Housekeeper [83/40] (Gold)",6,"+2 attack"],["Perini-R [43/78] (Bronze)",7,"+3 defense"],["Perini-R [46/81] (Silver)",8,"+3 defense"],["Perini-R [49/84] (Gold)",9,"+3 defense"],["Perini-R [53/88] (Ruby)",10,"+3 defense"]]],["Tad's Gun Shop","buildGunShop",2,3,NY,10,0,[["Thigh Will Be Done [74/30] (Bronze)",1,""],["Thigh Will Be Done [77/33] (Silver)",
2,""],["Thigh Will Be Done [81/36] (Gold)",3,""],["Fallen Angel Arm [37/79] (Bronze)",4,"+2 attack"],["Fallen Angel Arm [40/82] (Silver)",5,"+2 attack"],["Fallen Angel Arm [42/85] (Gold)",6,"+2 attack"],["Flanger [80/45] (Bronze)",7,"+3 defense"],["Flanger [83/48] (Silver)",8,"+3 defense"],["Flanger [86/51] (Gold)",9,"+3 defense"],["Flanger [90/54] (Ruby)",10,"+3 defense"]]],["Biker Clubhouse","buildClubHouse",2,4,NY,10,0,[["Tail Gunner [36/76] (Bronze)",1,""],["Tail Gunner [37/80] (Silver)",2,""],
["Tail Gunner [39/82] (Gold)",3,""],["Mamacita [80/44] (Bronze)",4,"+3 energy"],["Mamacita [83/45] (Silver)",5,"+3 energy"],["Mamacita [84/47] (Gold)",6,"+3 energy"],["Front Door [88/47] (Bronze)",7,"+4 defense"],["Front Door [91/50] (Silver)",8,"+4 defense"],["Front Door [93/51] (Gold)",9,"+4 defense"],["Front Door [95/53] (Ruby)",10,"+4 defense"]]],["Martial Arts Dojo","buildDojo",2,5,NY,10,0,[["Kung-fu Outfit [35/74] (Bronze)",1,""],["Kung-fu Outfit [38/76] (Silver)",2,""],["Kung-fu Outfit [41/78] (Gold)",
3,""],["Nun Chucks [79/41] (Bronze)",4,"+2 stamina,Weapon"],["Nun Chucks [81/42] (Silver)",5,"+2 stamina,Weapon"],["Nun Chucks [83/44] (Gold)",6,"+2 stamina,Weapon"],["Sensei [51/91] (Bronze)",7,"+3 attack,Henchmen"],["Sensei [53/96] (Silver)",8,"+3 attack,Henchmen"],["Sensei [55/98] (Gold)",9,"+3 attack,Henchmen"],["Sensei [58/100] (Ruby)",10,"+3 attack,Henchmen"]]],["Botanical Garden","buildGarden",2,6,NY,10,0,[["Poison Vines [40/74] (Bronze)",1,",Weapon"],["Poison Vines [42/78] (Silver)",2,",Weapon"],
["Poison Vines [45/79] (Gold)",3,",Weapon"],["Man Eating Plant [80/49] (Bronze)",4,"+3 stamina,Weapon"],["Man Eating Plant [83/51] (Silver)",5,"+3 stamina,Weapon"],["Man Eating Plant [84/54] (Gold)",6,"+3 stamina,Weapon"],["Botanist [59/92] (Bronze)",7,"+4 defense,Henchmen"],["Botanist [60/96] (Silver)",8,"+4 defense,Henchmen"],["Botanist [62/97] (Gold)",9,"+4 defense,Henchmen"],["Botanist [63/101] (Ruby)",10,"+4 defense,Henchmen"]]],["Cemetery","buildCemetery",2,7,NY,10,0,[["Grave Digger [74/38] (Bronze)",
1,",Henchmen"],["Grave Digger [76/40] (Silver)",2,",Henchmen"],["Grave Digger [79/42] (Gold)",3,",Henchmen"],["Care Taker [43/79] (Bronze)",4,"+3 energy,Henchmen"],["Care Taker [45/81] (Silver)",5,"+3 energy,Henchmen"],["Care Taker [47/83] (Gold)",6,"+3 energy,Henchmen"],["Mummy [92/54] (Bronze)",7,"+4 stamina,Henchmen"],["Mummy [95/56] (Silver)",8,"+4 stamina,Henchmen"],["Mummy [97/59] (Gold)",9,"+4 stamina,Henchmen"],["Mummy [100/62] (Ruby)",10,"+4 stamina,Henchmen"]]],["Cider House","buildCiderHouse",
2,8,NY,10,0,[["Bourbon Red [75/39] (Bronze)",1,",Animal"],["Bourbon Red [77/41] (Silver)",2,",Animal"],["Bourbon Red [79/41] (Gold)",3,",Animal"],["Brewmaster [80/48] (Bronze)",4,"+3 stamina,Henchmen"],["Brewmaster [83/51] (Silver)",5,"+3 stamina,Henchmen"],["Brewmaster [85/62] (Gold)",6,"+3 stamina,Henchmen"],["Cider Truck [90/61] (Bronze)",7,"+3 energy,Vehicle"],["Cider Truck [93/68] (Silver)",8,"+3 energy,Vehicle"],["Cider Truck [95/71] (Gold)",9,"+3 energy,Vehicle"],["Cider Truck [100/75] (Ruby)",
10,"+3 energy,Vehicle"]]],["Toy Store","buildToyStore",2,9,NY,10,0,[["Lawn Darts [75/41] (Bronze)",1,",Weapon"],["Lawn Darts [78/44] (Silver)",2,",Weapon"],["Lawn Darts [80/47] (Gold)",3,",Weapon"],["Life-size Robot [51/81] (Bronze)",4,"+4 stamina,Armor"],["Life-size Robot [54/82] (Silver)",5,"+4 stamina,Armor"],["Life-size Robot [58/85] (Gold)",6,"+4 stamina,Armor"],["Toymaker [93/60] (Bronze)",7,"+4 energy,Henchmen"],["Toymaker [95/64] (Silver)",8,"+4 energy,Henchmen"],["Toymaker [97/68] (Gold)",
9,"+4 energy,Henchmen"],["Toymaker [101/71] (Ruby)",10,"+4 energy,Henchmen"]]],["School of Choice","buildSchool",2,100,NY,10,0,[["Star Tortoise [76/44] (Bronze)",1,",Animal"],["Star Tortoise [78/48] (Silver)",2,",Animal"],["Star Tortoise [80/52] (Gold)",3,",Animal"],["Sports Coach [56/81] (Bronze)",4,"+4 defense,Henchmen"],["Sports Coach [60/85] (Silver)",5,"+4 defense,Henchmen"],["Sports Coach [64/89] (Gold)",6,"+4 defense,Henchmen"],["Quarterback [93/68] (Bronze)",7,"+4 energy,Henchmen"],["Quarterback [96/71] (Silver)",
8,"+4 energy,Henchmen"],["Quarterback [99/74] (Gold)",9,"+4 energy,Henchmen"],["Quarterback [102/77] (Ruby)",10,"+4 energy,Henchmen"]]],["Assassin's Academy","buildAcademy",2,10,NY,15,0,[["Poison Dagger [77/31] (Bronze)",1,",Weapon"],["Poison Dagger [80/33] (Silver)",2,",Weapon"],["Poison Dagger [83/35] (Gold)",3,",Weapon"],["Death From Afar [41/86] (Bronze)",4,"+3 stamina,Weapon"],["Death From Afar [46/89] (Silver)",5,"+3 stamina,Weapon"],["Death From Afar [46/92] (Gold)",6,"+3 stamina,Weapon"],
["Corner Shot [93/63] (Bronze)",7,"+4 attack,Weapon"],["Corner Shot [95/64] (Silver)",8,"+4 attack,Weapon"],["Corner Shot [98/66] (Gold)",9,"+4 attack,Weapon"],["Corner Shot [101/67] (Ruby)",10,"+4 attack,Weapon"],["Assassin [70/107] (Bronze)",11,"+5 energy,Henchmen"],["Assassin [73/110] (Silver)",12,"+5 energy,Henchmen"],["Assassin [76/113] (Gold)",13,"+5 energy,Henchmen"],["Assassin [79/116] (Ruby)",14,"+5 energy,Henchmen"],["Assassin [82/119] (Emerald)",15,"+5 energy,Henchmen"]]],["Hangar","buildHangar",
2,20,NY,15,0,[["Candy Dandy [32/79] (Bronze)",1,",Vehicle"],["Candy Dandy [34/82] (Silver)",2,",Vehicle"],["Candy Dandy [36/85] (Gold)",3,",Vehicle"],["Prune Juice [88/42] (Bronze)",4,"+3 attack,Vehicle"],["Prune Juice [91/44] (Silver)",5,"+3 attack,Vehicle"],["Prune Juice [94/47] (Gold)",6,"+3 attack,Vehicle"],["Sky Hopper [64/97] (Bronze)",7,"+4 defense,Vehicle"],["Sky Hopper [65/100] (Silver)",8,"+4 defense,Vehicle"],["Sky Hopper [67/103] (Gold)",9,"+4 defense,Vehicle"],["Sky Hopper [68/106] (Ruby)",
10,"+4 defense,Vehicle"],["Hop Chopper [109/71] (Bronze)",11,"+5 stamina,Vehicle"],["Hop Chopper [112/74] (Silver)",12,"+5 stamina,Vehicle"],["Hop Chopper [115/77] (Gold)",13,"+5 stamina,Vehicle"],["Hop Chopper [118/80] (Ruby)",14,"+5 stamina,Vehicle"],["Hop Chopper [121/83] (Emerald)",15,"+5 stamina,Vehicle"]]],["Cage Fight Arena","buildArena",2,21,NY,15,0,[["Cage [85/38] (Bronze)",1,",Vehicle"],["Cage [88/40] (Silver)",2,",Vehicle"],["Cage [91/42] (Gold)",3,",Vehicle"],["Cage Rage Gloves [48/94] (Bronze)",
4,"+3 stamina,Armor"],["Cage Rage Gloves [50/97] (Silver)",5,"+3 stamina,Armor"],["Cage Rage Gloves [53/100] (Gold)",6,"+3 stamina,Armor"],["Slash Gauntlet [103/70] (Bronze)",7,"+4 attack,Weapon"],["Slash Gauntlet [106/71] (Silver)",8,"+4 attack,Weapon"],["Slash Gauntlet [109/73] (Gold)",9,"+4 attack,Weapon"],["Slash Gauntlet [112/41] (Ruby)",10,"+4 attack,Weapon"],["Cage Fighter [77/115] (Bronze)",11,"+5 defense,Henchmen"],["Cage Fighter [80/118] (Silver)",12,"+5 defense,Henchmen"],["Cage Fighter [83/121] (Gold)",
13,"+5 defense,Henchmen"],["Cage Fighter [86/124] (Ruby)",14,"+5 defense,Henchmen"],["Cage Fighter [89/127] (Emerald)",15,"+5 defense,Henchmen"]]],["Shamrock Pub","buildPub",2,22,NY,15,0,[["Paint it Green [41/88] (Bronze)",1,"","Weapons"],["Paint it Green [43/91] (Silver)",2,"","Weapons"],["Paint it Green [45/94] (Gold)",3,"","Weapons"],["Pint o' Poison [97/51] (Bronze)",4,"+3 attack","Weapons"],["Pint o' Poison [100/53] (Silver)",5,"+3 attack","Weapons"],["Pint o' Poison [103/56] (Gold)",6,"+3 attack",
"Weapons"],["Snakeskin Vest [73/106] (Bronze)",7,"+4 stamina","Armor"],["Snakeskin Vest [74/109] (Silver)",8,"+4 stamina","Armor"],["Snakeskin Vest [76/112] (Gold)",9,"+4 stamina","Armor"],["Snakeskin Vest [77/115] (Ruby)",10,"+4 stamina","Armor"],["Bareknuckle Fighter [118/80] (Bronze)",11,"+5 energy","Henchman"],["Bareknuckle Fighter [121/83] (Silver)",12,"+5 energy","Henchman"],["Bareknuckle Fighter [124/86] (Gold)",13,"+5 energy","Henchman"],["Bareknuckle Fighter [127/89] (Ruby)",14,"+5 energy",
"Henchman"],["Bareknuckle Fighter [130/92] (Emerald)",15,"+5 energy","Henchman"]]],["Demolition Lab","buildDemoltion",2,23,NY,15,0,[["Land Mine [93/43] (Bronze)",1,"","Weapons"],["Land Mine [96/45] (Silver)",2,"","Weapons"],["Land Mine [99/47] (Gold)",3,"","Weapons"],["Power Slide [53/102] (Bronze)",4,"+3 stamina","Vehicle"],["Power Slide [56/105] (Silver)",5,"+3 stamina","Vehicle"],["Power Slide [59/108] (Gold)",6,"+3 stamina","Vehicle"],["Fusion Bomb [111/75] (Bronze)",7,"+4 attack","Weapons"],
["Fusion Bomb [114/76] (Silver)",8,"+4 attack","Weapons"],["Fusion Bomb [117/77] (Gold)",9,"+4 attack","Weapons"],["Fusion Bomb [120/78] (Ruby)",10,"+4 attack","Weapons"],["Demolition Woman [83/123] (Bronze)",11,"+5 energy","Henchman"],["Demolition Woman [86/126] (Silver)",12,"+5 energy","Henchman"],["Demolition Woman [89/129] (Gold)",13,"+5 energy","Henchman"],["Demolition Woman [92/132] (Ruby)",14,"+5 energy","Henchman"],["Demolition Woman [95/135] (Emerald)",15,"+5 energy","Henchman"]]],["Arctic Base",
"buildArctic",2,24,NY,15,0,[["Freeze Machine [45/96] (Bronze)",1,"","Weapons"],["Freeze Machine [47/99] (Silver)",2,"","Weapons"],["Freeze Machine [49/102] (Gold)",3,"","Weapons"],["XTreme Ski Gloves [105/56] (Bronze)",4,"+3 Defense","Armor"],["XTreme Ski Gloves [108/59] (Silver)",5,"+3 Defense","Armor"],["XTreme Ski Gloves [111/62] (Gold)",6,"+3 Attack","Armor"],["Acid Ice [76/114] (Bronze)",7,"+4 Energy","Property"],["Acid Ice [77/117] (Silver)",8,"+4 Energy","Property"],["Acid Ice [78/120] (Gold)",
9,"+4 Energy","Property"],["Acid Ice [79/123] (Ruby)",10,"+4 Energy","Property"],["Arctic Explorer [126/86] (Bronze)",11,"+5 Stamina","Henchman"],["Arctic Explorer [129/89] (Silver)",12,"+5 Stamina","Henchman"],["Arctic Explorer [132/92] (Gold)",13,"+5 Stamina","Henchman"],["Arctic Explorer [135/95] (Ruby)",14,"+5 Stamina","Henchman"],["Arctic Explorer [138/98] (Emerald)",15,"+5 Stamina","Henchman"]]],["Pit Lane","buildPitLane",2,25,NY,15,0,[["Pit Shoes [99/47] (Bronze)",1,"","Armor"],["Pit Shoes [102/49] (Silver)",
2,"","Armor"],["Pit Shoes [105/51] (Gold)",3,"","Armor"],["Torx Wrench [59/108] (Bronze)",4,"+3 Energy","Weapon"],["Torx Wrench [62/111] (Silver)",5,"+3 Energy","Weapon"],["Torx Wrench [65/114] (Gold)",6,"+3 Energy","Weapon"],["Skyhawk [117/77] (Bronze)",7,"+4 Attack","Vehicle"],["Skyhawk [120/78] (Silver)",8,"+4 Attack","Vehicle"],["Skyhawk [123/79] (Gold)",9,"+4 Attack","Vehicle"],["Skyhawk [126/80] (Ruby)",10,"+4 Attack","Vehicle"],["Motorhead [89/129] (Bronze)",11,"+5 Defense","Henchman"],["Motorhead [92/132] (Silver)",
12,"+5 Defense","Henchman"],["Motorhead [95/135] (Gold)",13,"+5 Defense","Henchman"],["Motorhead [98/138] (Ruby)",14,"+5 Defense","Henchman"],["Motorhead [101/141] (Emerald)",15,"+5 Defense","Henchman"]]],["DIY Weapons Club","buildDIYWeapons",2,26,NY,15,0,[["Crucifixed [49/102] (Bronze)",1,"","Weapon"],["Crucifixed [51/105] (Silver)",2,"","Weapon"],["Crucifixed [53/108] (Gold)",3,"","Weapon"],["Molotov Cocktail [111/62] (Bronze)",4,"+3 Stamina","Weapon"],["Molotov Cocktail [114/65] (Silver)",5,"+3 Stamina",
"Weapon"],["Molotov Cocktail [117/68] (Gold)",6,"+3 Stamina","Weapon"],["Big Bad [78/120] (Bronze)",7,"+4 Energy","Weapon"],["Big Bad [79/123] (Silver)",8,"+4 Energy","Weapon"],["Big Bad [80/126] (Gold)",9,"+4 Energy","Weapon"],["Big Bad [81/129] (Ruby)",10,"+4 Energy","Weapon"],["Guerilla Fighter [132/92] (Bronze)",11,"+5 Attack","Henchman"],["Guerilla Fighter [135/95] (Silver)",12,"+5 Attack","Henchman"],["Guerilla Fighter [138/98] (Gold)",13,"+5 Attack","Henchman"],["Guerilla Fighter [141/101] (Ruby)",
14,"+5 Attack","Henchman"],["Guerilla Fighter [144/104] (Emerald)",15,"+5 Attack","Henchman"]]],["Wine Cellar","buildWineCellar",2,27,NY,15,0,[["Sour Grape [105/51] (Bronze)",1,"","Weapon"],["Sour Grape [108/53] (Silver)",2,"","Weapon"],["Sour Grape [111/55] (Gold)",3,"","Weapon"],["Corky [65/114] (Bronze)",4,"+3 Defense","Armor"],["Corky [68/117] (Silver)",5,"+3 Defense","Armor"],["Corky [71/120] (Gold)",6,"+3 Defense","Armor"],["Bombed [123/79] (Bronze)",7,"+4 Stamina","Weapon"],["Bombed [126/80] (Silver)",
8,"+4 Stamina","Weapon"],["Bombed [129/81] (Gold)",9,"+4 Stamina","Weapon"],["Bombed [132/82] (Ruby)",10,"+4 Stamina","Weapon"],["Wine Maker [95/135] (Bronze)",11,"+5 Energy","Henchman"],["Wine Maker [98/138] (Silver)",12,"+5 Energy","Henchman"],["Wine Maker [101/141] (Gold)",13,"+5 Energy","Henchman"],["Wine Maker [104/144] (Ruby)",14,"+5 Energy","Henchman"],["Wine Maker [107/147] (Emerald)",15,"+5 Energy","Henchman"]]],["Arc Reactor","buildArcReactor",2,28,NY,15,0,[["Dissipated [53/108] (Bronze)",
1,"","Vehicle"],["Dissipated [55/111] (Silver)",2,"","Vehicle"],["Dissipated [57/114] (Gold)",3,"","Vehicle"],["Plasmatic Sphere [117/68] (Bronze)",4,"+3 Defense","Armor"],["Plasmatic Sphere [120/71] (Silver)",5,"+3 Defense","Armor"],["Plasmatic Sphere [123/74] (Gold)",6,"+3 Defense","Armor"],["Thumbnailed [80/126] (Bronze)",7,"+4 Energy","Weapon"],["Thumbnailed [81/129] (Silver)",8,"+4 Energy","Weapon"],["Thumbnailed [82/132] (Gold)",9,"+4 Energy","Weapon"],["Thumbnailed [83/135] (Ruby)",10,"+4 Energy",
"Weapon"],["Arc Wielder [138/98] (Bronze)",11,"+5 Stamina","Henchman"],["Arc Wielder [141/101] (Silver)",12,"+5 Stamina","Henchman"],["Arc Wielder [144/104] (Gold)",13,"+5 Stamina","Henchman"],["Arc Wielder [147/107] (Ruby)",14,"+5 Stamina","Henchman"],["Arc Wielder [150/110] (Emerald)",15,"+5 Stamina","Henchman"]]],["VFX Lab","buildVFX",2,29,NY,15,0,[["MoCap Camera [117/60] (Bronze)",1,"","Armor"],["MoCap Camera [120/62] (Silver)",2,"","Armor"],["MoCap Camera [123/64] (Gold)",3,"","Armor"],["Fog Machine [75/126] (Bronze)",
4,"+3 Defense","Armor"],["Fog Machine [78/129] (Silver)",5,"+3 Defense","Armor"],["Fog Machine [81/132] (Gold)",6,"+3 Defense","Armor"],["Mocap Actor [135/87] (Bronze)",7,"+4 Stamina","Henchman"],["Mocap Actor [138/88] (Silver)",8,"+4 Stamina","Henchman"],["Mocap Actor [141/89] (Gold)",9,"+4 Stamina","Henchman"],["Mocap Actor [144/90] (Ruby)",10,"+4 Stamina","Henchman"],["Robotic Dinosaur [104/147] (Bronze)",11,"+5 Attack","Animal"],["Robotic Dinosaur [107/150] (Silver)",12,"+5 Attack","Animal"],
["Robotic Dinosaur [110/153] (Gold)",13,"+5 Attack","Animal"],["Robotic Dinosaur [113/156] (Ruby)",14,"+5 Attack","Animal"],["Robotic Dinosaur [116/159] (Emerald)",15,"+6 Attack","Animal"]]],["Trippy Trailer","buildTrailer",2,30,NY,15,0,[["Kiss Kiss Bong Bong [62/121] (Bronze)",1,"","Weapon"],["Kiss Kiss Bong Bong [64/124] (Silver)",2,"","Weapon"],["Kiss Kiss Bong Bong [66/127] (Gold)",3,"","Weapon"],["Tropic Storm [129/78] (Bronze)",4,"+3 Stamina","Armor"],["Tropic Storm [132/81] (Silver)",5,"+3 Stamina",
"Armor"],["Tropic Storm [135/84] (Gold)",6,"+3 Stamina","Armor"],["Hippie [88/138] (Bronze)",7,"+4 Energy","Henchman"],["Hippie [89/141] (Silver)",8,"+4 Energy","Henchman"],["Hippie [90/144] (Gold)",9,"+4 Energy","Henchman"],["Hippie [91/147] (Ruby)",10,"+4 Energy","Henchman"],["Exotic Chemist [150/107] (Bronze)",11,"+5 Defense","Henchman"],["Exotic Chemist [153/110] (Silver)",12,"+5 Defense","Henchman"],["Exotic Chemist [156/113] (Gold)",13,"+5 Defense","Henchman"],["Exotic Chemist [159/116] (Ruby)",
14,"+5 Defense","Henchman"],["Exotic Chemist [162/119] (Emerald)",15,"+6 Defense","Henchman"]]],["Car Wash","buildCarWash",2,31,NY,15,0,[["Muffler [67/125] (Bronze)",1,"","Weapon"],["Muffler [69/128] (Silver)",2,"","Weapon"],["Muffler [71/131] (Gold)",3,"","Weapon"],["Spiked Gloves [82/133] (Bronze)",4,"+3 Attack","Armor"],["Spiked Gloves [85/136] (Silver)",5,"+3 Attack","Armor"],["Spiked Gloves [88/139] (Gold)",6,"+3 Attack","Armor"],["Detergent Bomb [142/92] (Bronze)",7,"+4 Defense","Weapon"],["Detergent Bomb [145/93] (Silver)",
8,"+4 Defense","Weapon"],["Detergent Bomb [148/94] (Gold)",9,"+4 Defense","Weapon"],["Detergent Bomb [151/95] (Ruby)",10,"+4 Defense","Weapon"],["Car-e-Taker [111/154] (Bronze)",11,"+5 Stamina","Henchman"],["Car-e-Taker [114/157] (Silver)",12,"+5 Stamina","Henchman"],["Car-e-Taker [117/160] (Gold)",13,"+5 Stamina","Henchman"],["Car-e-Taker [120/163] (Ruby)",14,"+5 Stamina","Henchman"],["Car-e-Taker [123/166] (Emerald)",15,"+6 Stamina","Henchman"]]],["Cement Factory","buildCementFactory",2,32,NY,15,
0,[["Rusted Trowel [129/71] (Bronze)",1,"","Weapon"],["Rusted Trowel [132/73] (Silver)",2,"","Weapon"],["Rusted Trowel [135/75] (Gold)",3,"","Weapon"],["Block Mover [137/86] (Bronze)",4,"+3 Defense","Vehicle"],["Block Mover [140/89] (Silver)",5,"+3 Defense","Vehicle"],["Block Mover [143/92] (Gold)",6,"+3 Defense","Vehicle"],["Concrete Mixer [96/146] (Bronze)",7,"+4 Stamina","Vehicle"],["Concrete Mixer [97/149] (Silver)",8,"+4 Stamina","Vehicle"],["Concrete Mixer [98/152] (Gold)",9,"+4 Stamina","Vehicle"],
["Concrete Mixer [99/155] (Ruby)",10,"+4 Stamina","Vehicle"],["Machine Operator [158/115] (Bronze)",11,"+6 Energy","Henchman"],["Machine Operator [161/118] (Silver)",12,"+6 Energy","Henchman"],["Machine Operator [164/121] (Gold)",13,"+6 Energy","Henchman"],["Machine Operator [167/124] (Ruby)",14,"+6 Energy","Henchman"],["Machine Operator [170/127] (Emerald)",15,"+6 Energy","Henchman"]]],["Toy Factory","buildToyFactory",2,33,NY,15,0,[["Toy Factory Owner [75/132] (Bronze)",1,"","Henchmen"],["Toy Factory Owner [77/135] (Silver)",
2,"","Henchmen"],["Toy Factory Owner [79/138] (Gold)",3,"","Henchmen"],["Spoked [140/90] (Bronze)",4,"+3 Stamina","Vehicle"],["Spoked [143/93] (Silver)",5,"+3 Stamina","Vehicle"],["Spoked [146/96] (Gold)",6,"+3 Stamina","Vehicle"],["Bomb In The Box [100/149] (Bronze)",7,"+4 Defense","Weapon"],["Bomb In The Box [101/153] (Silver)",8,"+4 Defense","Weapon"],["Bomb In The Box [102/156] (Gold)",9,"+4 Defense","Weapon"],["Bomb In The Box [103/159] (Ruby)",10,"+4 Defense","Weapon"],["Toy Around [119/162] (Bronze)",
11,"+5 Attack","Vehicle"],["Toy Around [122/165] (Silver)",12,"+5 Attack","Vehicle"],["Toy Around [125/168] (Gold)",13,"+5 Attack","Vehicle"],["Toy Around [128/171] (Ruby)",14,"+5 Attack","Vehicle"],["Toy Around [131/174] (Emerald)",15,"+6 Attack","Vehicle"]]],["Observatory","buildObservatory",2,34,NY,15,0,[["Space Scientist [136/79] (Bronze)",1,"","Henchmen"],["Space Scientist [139/81] (Silver)",2,"","Henchmen"],["Space Scientist [142/83] (Gold)",3,"","Henchmen"],["Sputnik [94/143] (Bronze)",4,"+3 Energy",
"Vehicle"],["Sputnik [97/147] (Silver)",5,"+3 Energy","Vehicle"],["Sputnik [100/150] (Gold)",6,"+3 Energy","Vehicle"],["Astrophysicist [104/154] (Bronze)",7,"+4 Stamina","Henchmen"],["Astrophysicist [105/157] (Silver)",8,"+4 Stamina","Henchmen"],["Astrophysicist [106/160] (Gold)",9,"+4 Stamina","Henchmen"],["Astrophysicist [107/163] (Ruby)",10,"+4 Stamina","Henchmen"],["Laser Telescope [166/119] (Bronze)",11,"+5 Defense","Armor"],["Laser Telescope [169/122] (Silver)",12,"+5 Defense","Armor"],["Laser Telescope [172/125] (Gold)",
13,"+5 Defense","Armor"],["Laser Telescope [175/128] (Ruby)",14,"+5 Defense","Armor"],["Laser Telescope [178/135] (Emerald)",15,"+6 Defense","Armor"]]],["Research Facility","buildFacility",2,35,NY,15,0,[["Electromagnet [84/141] (Bronze)",1,"","Armor"],["Electromagnet [86/144] (Silver)",2,"","Armor"],["Electromagnet [88/147] (Gold)",3,"","Armor"],["Radioactive Gas Mask  [150/99] (Bronze)",4,"+3 Defense","Armor"],["Radioactive Gas Mask  [153/102] (Silver)",5,"+3 Defense","Armor"],["Radioactive Gas Mask  [156/105] (Gold)",
6,"+3 Defense","Armor"],["Physicist [159/109] (Bronze)",7,"+4 Attack","Henchmen"],["Physicist [162/110] (Silver)",8,"+4 Attack","Henchmen"],["Physicist [165/111] (Gold)",9,"+4 Attack","Henchmen"],["Physicist [168/112] (Ruby)",10,"+4 Attack","Henchmen"],["Nuclear Waste Drum  [171/128] (Bronze)",11,"+5 Energy","Weapon"],["Nuclear Waste Drum  [174/131] (Silver)",12,"+5 Energy","Weapon"],["Nuclear Waste Drum  [177/134] (Gold)",13,"+5 Energy","Weapon"],["Nuclear Waste Drum  [180/137] (Ruby)",14,"+5 Energy",
"Weapon"],["Nuclear Waste Drum  [183/140] (Emerald)",15,"+6 Energy","Weapon"]]],["SVR Showroom","buildSVRShowroom",2,36,NY,15,0,[["Automotive Mechanic [89/144] (Bronze)",1,"","Henchmen"],["Automotive Mechanic [91/147] (Silver)",2,"","Henchmen"],["Automotive Mechanic [92/150] (Gold)",3,"","Henchmen"],["SVR Nimbus [153/104] (Bronze)",4,"+3 Attack","Vehicle"],["SVR Nimbus [157/107] (Silver)",5,"+3 Attack","Vehicle"],["SVR Nimbus [160/110] (Gold)",6,"+3 Attack","Vehicle"],["Cornermaster [114/164] (Bronze)",
7,"+4 Energy","Armor"],["Cornermaster [115/167] (Silver)",8,"+4 Energy","Armor"],["Cornermaster [116/170] (Gold)",9,"+4 Energy","Armor"],["Cornermaster [117/173] (Ruby)",10,"+4 Energy","Armor"],["SVR Thundera [133/176] (Bronze)",11,"+5 Stamina","Vehicle"],["SVR Thundera [136/179] (Silver)",12,"+5 Stamina","Vehicle"],["SVR Thundera [139/182] (Gold)",13,"+5 Stamina","Vehicle"],["SVR Thundera [142/185] (Ruby)",14,"+5 Stamina","Vehicle"],["SVR Thundera [145/188] (Emerald)",15,"+6 Stamina","Vehicle"]]],
["Mob Hospital","buildMobHospital",2,37,NY,15,0,[["Surgical Stapler [94/149] (Bronze)",1,"","Weapon"],["Surgical Stapler [96/152] (Silver)",2,"","Weapon"],["Surgical Stapler [97/155] (Gold)",3,"","Weapon"],["Fluid Shield Mask [158/109] (Bronze)",4,"+3 Stamina","Armor"],["Fluid Shield Mask [162/112] (Silver)",5,"+3 Stamina","Armor"],["Fluid Shield Mask [165/115] (Gold)",6,"+3 Stamina","Armor"],["Mobulance [119/169] (Bronze)",7,"+4 Defense","Vehicle"],["Mobulance [120/172] (Silver)",8,"+4 Defense",
"Vehicle"],["Mobulance [121/175] (Gold)",9,"+4 Defense","Vehicle"],["Mobulance [122/178] (Ruby)",10,"+4 Defense","Vehicle"],["Organ Trafficker [181/138] (Bronze)",11,"+5 Attack","Henchmen"],["Organ Trafficker [184/141] (Silver)",12,"+5 Attack","Henchmen"],["Organ Trafficker [187/144] (Gold)",13,"+5 Attack","Henchmen"],["Organ Trafficker [190/147] (Ruby)",14,"+5 Attack","Henchmen"],["Organ Trafficker [193/150] (Emerald)",15,"+6 Attack","Henchmen"]]],["Crematorium","buildCrematorium",2,38,NY,15,0,[["Need A Lift [154/99] (Bronze)",
1,"","Weapon"],["Need A Lift [157/101] (Silver)",2,"","Weapon"],["Need A Lift [160/103] (Gold)",3,"","Weapon"],["See The Light [163/114] (Bronze)",4,"+3 Energy","Vehicle"],["See The Light [167/117] (Silver)",5,"+3 Energy","Vehicle"],["See The Light [170/120] (Gold)",6,"+3 Energy","Vehicle"],["Urned It [174/124] (Bronze)",7,"+4 Stamina","Weapon"],["Urned It [177/125] (Silver)",8,"+4 Stamina","Weapon"],["Urned It [180/126] (Gold)",9,"+4 Stamina","Weapon"],["Urned It [183/127] (Ruby)",10,"+4 Stamina",
"Weapon"],["Ashes to Ashes [143/186] (Bronze)",11,"+5 Defense","Henchmen"],["Ashes to Ashes [146/189] (Silver)",12,"+5 Defense","Henchmen"],["Ashes to Ashes [149/192] (Gold)",13,"+5 Defense","Henchmen"],["Ashes to Ashes [152/195] (Ruby)",14,"+5 Defense","Henchmen"],["Ashes to Ashes [155/198] (Emerald)",15,"+6 Defense","Henchmen"]]],["Naughty Videos","buildNaughtyVideos",2,39,NY,15,0,[["Blackmail Tape [103/158] (Bronze)",1,"","Armor"],["Blackmail Tape [105/161] (Silver)",2,"","Armor"],["Blackmail Tape [107/164] (Gold)",
3,"","Armor"],["Private Viewing [167/118] (Bronze)",4,"+3 Defense","Weapon"],["Private Viewing [171/121] (Silver)",5,"+3 Defense","Weapon"],["Private Viewing [174/124] (Gold)",6,"+3 Defense","Weapon"],["Naughty Ride [128/178] (Bronze)",7,"+4 Energy","Vehicle"],["Naughty Ride [129/181] (Silver)",8,"+4 Energy","Vehicle"],["Naughty Ride [130/184] (Gold)",9,"+4 Energy","Vehicle"],["Naughty Ride [131/187] (Ruby)",10,"+4 Energy","Vehicle"],["Owner's Pet [190/147] (Bronze)",11,"+5 Stamina","Animal"],["Owner's Pet [193/150] (Silver)",
12,"+5 Stamina","Animal"],["Owner's Pet [196/153] (Gold)",13,"+5 Stamina","Animal"],["Owner's Pet [199/156] (Ruby)",14,"+5 Stamina","Animal"],["Owner's Pet [202/159] (Emerald)",15,"+6 Stamina","Animal"]]],["Green House","buildGreenHouse",2,40,NY,15,0,[["Tiger Chameleon [109/164] (Bronze)",1,"","Animal"],["Tiger Chameleon [111/167] (Silver)",2,"","Animal"],["Tiger Chameleon [113/170] (Gold)",3,"","Animal"],["Pollenator [173/124] (Bronze)",4,"+3 Defense","Armor"],["Pollenator [177/127] (Silver)",5,
"+3 Defense","Armor"],["Pollenator [180/130] (Gold)",6,"+3 Defense","Armor"],["Up Rooter [184/134] (Bronze)",7,"+4 Attack","Vehicle"],["Up Rooter [187/135] (Silver)",8,"+4 Attack","Vehicle"],["Up Rooter [190/136] (Gold)",9,"+4 Attack","Vehicle"],["Up Rooter [193/137] (Ruby)",10,"+4 Attack","Vehicle"],["Old Prune [153/196] (Bronze)",11,"+5 Energy","Weapon"],["Old Prune [156/199] (Silver)",12,"+5 Energy","Weapon"],["Old Prune [159/202] (Gold)",13,"+5 Energy","Weapon"],["Old Prune [162/205] (Ruby)",
14,"+5 Energy","Weapon"],["Old Prune [165/208] (Emerald)",15,"+6 Energy","Weapon"]]],["Don's Derby","buildDonsDerby",2,41,NY,15,0,[["Hoof-Pick [115/187] (Bronze)",1,"","Weapon"],["Hoof-Pick [117/189] (Silver)",2,"","Weapon"],["Hoof-Pick [119/191] (Gold)",3,"","Weapon"],["Derby Helmet [193/130] (Bronze)",4,"+3 Attack","Armor"],["Derby Helmet [195/133] (Silver)",5,"+3 Attack","Armor"],["Derby Helmet [197/136] (Gold)",6,"+3 Attack","Armor"],["Race Horse [199/140] (Bronze)",7,"+4 Energy","Animal"],["Race Horse [201/141] (Silver)",
8,"+4 Energy","Animal"],["Race Horse [203/142] (Gold)",9,"+4 Energy","Animal"],["Race Horse [205/143] (Ruby)",10,"+4 Energy","Animal"],["Derby Rider [159/207] (Bronze)",11,"+5 Stamina","Henchmen"],["Derby Rider [162/210] (Silver)",12,"+5 Stamina","Henchmen"],["Derby Rider [165/213] (Gold)",13,"+5 Stamina","Henchmen"],["Derby Rider [168/216] (Ruby)",14,"+5 Stamina","Henchmen"],["Derby Rider [171/219] (Emerald)",15,"+6 Stamina","Henchmen"]]],["Opera House","buildOperaHouse",2,42,NY,15,0,[["Boomhailer [194/122] (Bronze)",
1,"","Weapon"],["Boomhailer [196/124] (Silver)",2,"","Weapon"],["Boomhailer [198/126] (Gold)",3,"","Weapon"],["Nightingale [137/200] (Bronze)",4,"+3 Defense","Animal"],["Nightingale [140/202] (Silver)",5,"+3 Defense","Animal"],["Nightingale [143/204] (Gold)",6,"+3 Defense","Animal"],["Argyle Beret [147/206] (Bronze)",7,"+4 Attack","Vehicle"],["Argyle Beret [148/208] (Silver)",8,"+4 Attack","Vehicle"],["Argyle Beret [149/210] (Gold)",9,"+4 Attack","Vehicle"],["Argyle Beret [150/212] (Ruby)",10,"+4 Attack",
"Vehicle"],["Concert Grand [214/166] (Bronze)",11,"+5 Energy","Armor"],["Concert Grand [217/169] (Silver)",12,"+5 Energy","Armor"],["Concert Grand [220/172] (Gold)",13,"+5 Energy","Armor"],["Concert Grand [223/175] (Ruby)",14,"+5 Energy","Armor"],["Concert Grand [227/178] (Emerald)",15,"+6 Energy","Armor"]]],["Skate Park","buildSkatePark",2,43,NY,15,0,[["Skate Cycle [197/125] (Bronze)",1,"","Vehicle"],["Skate Cycle [199/127] (Silver)",2,"","Vehicle"],["Skate Cycle [201/129] (Gold)",3,"","Vehicle"],
["Skate Star [203/140] (Bronze)",4,"+3 Stamina","Henchmen"],["Skate Star [205/143] (Silver)",5,"+3 Stamina","Henchmen"],["Skate Star [207/146] (Gold)",6,"+3 Stamina","Henchmen"],["Crash Slider [150/209] (Bronze)",7,"+4 Defense","Armor"],["Crash Slider [151/211] (Silver)",8,"+4 Defense","Armor"],["Crash Slider [152/213] (Gold)",9,"+4 Defense","Armor"],["Crash Slider [153/215] (Ruby)",10,"+4 Defense","Armor"],["Broken Skateboard [169/217] (Bronze)",11,"+5 Attack","Weapon"],["Broken Skateboard [172/220] (Silver)",
12,"+5 Attack","Weapon"],["Broken Skateboard [175/223] (Gold)",13,"+5 Attack","Weapon"],["Broken Skateboard [178/226] (Ruby)",14,"+5 Attack","Weapon"],["Broken Skateboard [181/229] (Emerald)",15,"+6 Attack","Weapon"]]],["Ice Hotel","buildIceHotel",2,44,NY,15,0,[["Dall Sheep [129/201] (Bronze)",1,"","Animal"],["Dall Sheep [131/203] (Silver)",2,"","Animal"],["Dall Sheep [133/205] (Gold)",3,"","Animal"],["Ice Slice [207/144] (Bronze)",4,"+3 Energy","Weapon"],["Ice Slice [209/147] (Silver)",5,"+3 Energy",
"Weapon"],["Ice Slice [211/150] (Gold)",6,"+3 Energy","Weapon"],["Ice Sculpter [154/213] (Bronze)",7,"+4 Stamina","Henchmen"],["Ice Sculpter [155/215] (Silver)",8,"+4 Stamina","Henchmen"],["Ice Sculpter [156/217] (Gold)",9,"+4 Stamina","Henchmen"],["Ice Sculpter [157/219] (Ruby)",10,"+4 Stamina","Henchmen"],["Snowbrace [221/173] (Bronze)",11,"+5 Defense","Armor"],["Snowbrace [224/176] (Silver)",12,"+5 Defense","Armor"],["Snowbrace [227/179] (Gold)",13,"+5 Defense","Armor"],["Snowbrace [230/182] (Ruby)",
14,"+5 Defense","Armor"],["Snowbrace [233/185] (Emerald)",15,"+6 Defense","Armor"]]],["Diamond Exhibit","buildDiamondExhibit",2,45,NY,15,0,[["Frozen Breath [207/135] (Bronze)",1,"","Armor"],["Frozen Breath [209/137] (Silver)",2,"","Armor"],["Frozen Breath [211/139] (Gold)",3,"","Armor"],["Jewel Thief [150/213] (Bronze)",4,"+3 Defence","Henchmen"],["Jewel Thief [153/215] (Silver)",5,"+3 Defence","Henchmen"],["Jewel Thief [156/217] (Gold)",6,"+3 Defence","Henchmen"],["White Smite [219/160] (Bronze)",
7,"+4 Energy","Vehicle"],["White Smite [221/161] (Silver)",8,"+4 Energy","Vehicle"],["White Smite [223/162] (Gold)",9,"+4 Energy","Vehicle"],["White Smite [225/163] (Ruby)",10,"+4 Energy","Vehicle"],["Sterling Shot [179/227] (Bronze)",11,"+5 Stamina","Weapon"],["Sterling Shot [182/230] (Silver)",12,"+5 Stamina","Weapon"],["Sterling Shot [185/233] (Gold)",13,"+5 Stamina","Weapon"],["Sterling Shot [188/236] (Ruby)",14,"+5 Stamina","Weapon"],["Sterling Shot [191/239] (Emerald)",15,"+6 Stamina","Weapon"]]],
["Printing Press","buildPrintingPress",2,46,NY,15,0,[["Silver Fish [138/210] (Bronze)",1,"","Animal"],["Silver Fish [140/212] (Silver)",2,"","Animal"],["Silver Fish [142/214] (Gold)",3,"","Animal"],["Rusty Shaft [216/153] (Bronze)",4,"+3 Defence","Weapon"],["Rusty Shaft [218/156] (Silver)",5,"+3 Defence","Weapon"],["Rusty Shaft [220/159] (Gold)",6,"+3 Defence","Weapon"],["Newspaper Truck [163/222] (Bronze)",7,"+4 Defence","Vehicle"],["Newspaper Truck [164/224] (Silver)",8,"+4 Defence","Vehicle"],
["Newspaper Truck [165/226] (Gold)",9,"+4 Defence","Vehicle"],["Newspaper Truck [166/228] (Ruby)",10,"+4 Defence","Vehicle"],["Press Operator [230/182] (Bronze)",11,"+5 Energy","Henchmen"],["Press Operator [233/185] (Silver)",12,"+5 Energy","Henchmen"],["Press Operator [236/188] (Gold)",13,"+5 Energy","Henchmen"],["Press Operator [239/181] (Ruby)",14,"+5 Energy","Henchmen"],["Press Operator [242/194] (Emerald)",15,"+6 Energy","Henchmen"]]],["Stock Market","buildStockMarket",2,47,NY,15,0,[["Million Bucks [213/141] (Bronze)",
1,"","Armour"],["Million Bucks [215/143] (Silver)",2,"","Armour"],["Million Bucks [217/145] (Gold)",3,"","Armour"],["Zynga Trader [156/219] (Bronze)",4,"+3 Stamina","Henchmen"],["Zynga Trader [159/221] (Silver)",5,"+3 Stamina","Henchmen"],["Zynga Trader [162/223] (Gold)",6,"+3 Stamina","Henchmen"],["Raging Bull [225/166] (Bronze)",7,"+4 Defence","Animal"],["Raging Bull [227/167] (Silver)",8,"+4 Defence","Animal"],["Raging Bull [229/168] (Gold)",9,"+4 Defence","Animal"],["Raging Bull [231/169] (Ruby)",
10,"+4 Defence","Animal"],["Stock Er [185/233] (Bronze)",11,"+5 Attack","Weapon"],["Stock Er [188/236] (Silver)",12,"+5 Attack","Weapon"],["Stock Er [191/239] (Gold)",13,"+5 Attack","Weapon"],["Stock Er [194/242] (Ruby)",14,"+5 Attack","Weapon"],["Stock Er [197/245] (Emerald)",15,"+6 Attack","Weapon"]]],["Work Shop","buildWorkShop",4,2,BRAZIL,10,0,[["Local Informant",2684,""],["Gas Can",2683,""],["Untraceable Cell Phone",64,""],["Button Camera",2681,""],["Concealable Camera",62,""],["Radio Phone",
2680,""],["Satellite Phone",1534,""],["Satchel Charge",2682,""],["Computer Set-Up",63,""],["Alarm Code",2027,""],["ArmedGun",8335,""]]],["Black Market","buildBlackMarket",4,3,BRAZIL,10,0,[["Aesculapian Snake",5580,"Requires BRL $10,000 - Attack : 50 - Defense : 26"],["Horny Toad ATV",5581,"Requires BRL $20,000 - Attack : 28 - Defense : 52"],["Croc Skin Jacket",5582,"Requires BRL $30,000 - Attack : 54 - Defense : 29"],["Buckeye",5583,"Requires BRL $40,000 - Attack : 29 - Defense : 56"],["Ostrich",
5584,"Requires BRL $50,000 - Attack : 59 - Defense : 31"],["Frog Spear",5585,"Requires BRL $60,000 - Attack : 33 - Defense : 62"],["Argiope Net Gun",5586,"Requires BRL $70,000 - Attack : 65 - Defense : 35"],["Puma",5587,"Requires BRL $80,000 - Attack : 36 - Defense : 68"],["Scaled Gauntlet",5588,"Requires BRL $90,000 - Attack : 71 - Defense : 41"],["Antler Cannon",5589,"Requires BRL$100,000 - Attack : 44 - Defense : 75"]]],["Speakeasy","buildSpeakeasy",5,2,CHICAGO,10,0,[["Body Bag",11048,""],["Incriminating Documents",
11049,""],["Concrete Shoes",11050,""],["Untraceable Cell Phone",64,""],["Button Camera",2681,""],["Concealable Camera",62,""],["Jekyll and Hyde",8352,""],["Satchel Charge",2682,""],["Computer Set-Up",63,""],["Alarm Code",2027,""],["Ancestral Crest",8353,""]]],["Warehouse","buildWarehouse",5,3,CHICAGO,10,0,[["Sinker",11056,"Requires  $25 - Attack : 83 - Defense : 54"],["Sugar Daddy",11057,"Requires  $50 - Attack : 91 - Defense : 61"],["Smoking Jacket",11058,"Requires  $75 - Attack : 48 - Defense : 74"],
["Savage Suspeners",11059,"Requires $100 - Attack : 69 - Defense : 46"],["Smoke Eater",11060,"Requires $125 - Attack : 86 - Defense : 56"],["Dapper Flapper",11061,"Requires $150 - Attack : 96 - Defense : 63"],["Boby Grand",11062,"Requires $175 - Attack : 80 - Defense : 50"],["Gate Crasher",11063,"Requires $200 - Attack : 46 - Defense : 70"],["Schooner",11064,"Requires $225 - Attack : 55 - Defense : 88"],["Kisser Splitter",11065,"Requires $250 - Attack : 49 - Defense : 75"]]],["East End Pub","buildEastEndPub",
6,2,LONDON,10,0,[["Betting Slip",18034,"",1],["Energy Drink",18035,"",1],["Jagged Edge",18052,"",2],["Condo Keys",18053,"",2],["Rubber Gloves",18070,"",3],["Disguise Mask",18071,"",4],["Russian Passport",18087,"",5],["Kit Bag",18088,"",6],["Power Ups",18089,"",7],["Piggy Bank",18090,"",8],["Microchip",18091,"",9],["Official Documents",18092,"",10]]],["Night Club","buildNightClub",6,3,LONDON,10,0,[["London Cab",12208,"Requires $300 - Attack : 44 - Defense : 90",1],["Eurasian Lynx",12209,"Requires $325 - Attack : 93 - Defense : 46",
2],["Pop Singer",12210,"Requires $450 -+1 Energy / Attack : 48 - Defense : 96",3],["Open Season",12211,"Requires $700 -+1 Stamina / Attack : 99 - Defense : 50",4],["Antique Pocketwatch",12212,"Requires $1,200 -+1 Attack / Attack : 52 - Defense : 102",5],["City Slicker",12213,"Requires $2,000 -+2 Defense / Attack : 105 - Defense : 54",6],["Smooth Snake",12214,"Requires $3,000 -+2 Health / Attack : 56 - Defense : 108",7],["Cricketer",12215,"Requires $4,500 -+2 Energy / Attack : 111 - Defense : 58",
8],["Jack the Ripper",12216,"Requires $6,500 -+5 Health / Attack : 60 - Defense : 114",9],["Bobby Hat",12217,"Requires $10,000 -+2 Stamina / Attack : 117 - Defense : 62",10]]],["R&D Lab","buildRDLab",7,2,SA,10,0,[["Kuba Cap",24883,"",1],["Gevaa-Wrist",24884,"",1],["Mynbou-tique",24885,"",2],["Steenkool Cart",24886,"",2],["Tested Pyn",24887,"",3],["Brooshout",24888,"",4],["Rope Ladder",25375,"",5],["Bi-Knock",25376,"",5],["Open with Ease",25403,"",6],["Jack &amp;Chill",25404,"",6],["Fake Warrant",
25414,"",7],["Walk &amp;Talk",25415,"",7]]]];ctLength=cityProperties.length;var ptTitle=0,ptProp=1,ptPropId=2,ptPropType=3,ptCity=4,ptArray=5,ptGMId=6,ptTimer=7,ptPropPopup=9,cityParts=[["Ask for Chop Shop Parts","Chop Shop",11,1,NY,[["Cement Block",532],["Power Tool",533],["Car Lift",534],["Acytelene Torch",535],["Shipping Container",536]],"askShopParts","askShopPartsTimer",[],"chop_shop"],["Ask for Weapons Depot Parts","Weapons Depot",12,1,NY,[["Forge",660],["Arc Welder",656],["Buzzsaw",657],["Gunpowder",
658],["Gun Drill",659]],"askDepotParts","askDepotPartsTimer",[],"weapons_depot"],["Ask for Armory Parts","Armory",13,1,NY,[["Hammer",2196],["Rivet",2197],["Furnace",2183],["Vice",2184],["Anvil",2185]],"askArmorParts","askArmorPartsTimer",[],"armory"],["Ask for Private Zoo Parts","Private Zoo",14,1,NY,[["Aquarium",4605],["Big Cage",4606],["Bird Cage",4607],["Feeding Trough",4608],["Terrarium",4609]],"askZooParts","askZooPartsTimer",[],"private_zoo"],["Ask for Jaihouse Parts","Jailhouse",15,1,NY,[["Barbed Wire",
24140],["Electrical Fence",24141],["Granite Bricks",24142],["Prison Bars",24143],["Searchlight",24144]],"askJailhouseParts","askJailhousePartsTimer",[],"jailhouse"]],cityBrazilProps=[["do not auto-upgrade",0],["Headquarters",1],["Workshop",2],["Black Market",3],["Refinery",4],["Barracks",5]],cityBrazilParts=[["Reinforced Steel",763],["Cement Block",532],["Power Tool",533],["Construction Worker",2678],["Brazilian Timber",2679]],cityChicagoProps=[["do not auto-upgrade",0],["Truck Shop",1],["Speakeasy",
2],["Warehouse",3],["Distillery",4],["Docks",5]],cityChicagoParts=[["Union Worker",11051],["Carpenter Nails",11052],["Lath Strips",11053],["Iron Cast",11054],["Douglas Fir Beams",11055]],cityLondonProps=[["do not auto-upgrade",0],["Sports Stadium",1],["East End Pub",2],["Night Club",3],["Underground Station",4],["Royal Bank",5]],cityLondonParts=[["English Brick",12218],["Clay Tiles",12219],["Sledge Hammer",12220],["Plumb Line",12221],["Iron Girder",12222]],citySaProps=[["do not auto-upgrade",0],["Shipyard",
1],["R&D Lab",2],["Car Fabriek",4],["Wildlife Agentskap",5]],citySaParts=[["Zebrawood",24848],["Sack of Mud",24849],["Gauteng Zinc",24845],["African Brick",24846],["Bushveld Steel",24847]],fightLabels=[["Ignore",0],["Bronze 1",1],["Bronze 2",2],["Bronze 3",3],["Bronze 4",4],["Bronze 5",5],["Silver 1",6],["Silver 2",7],["Silver 3",8],["Silver 4",9],["Silver 5",10],["Gold 1",11],["Gold 2",12],["Gold 3",13],["Gold 4",14],["Gold 5",15],["Ruby 1",16],["Ruby 2",17],["Ruby 3",18],["Ruby 4",19],["Ruby 5",
20],["Diamond 1",21],["Diamond 2",22],["Diamond 3",23],["Diamond 4",24],["Diamond 5",25]],cityCrewTitles=[["Ignore",0,"Do not active crew","",0],["Strategist",1,"Jobs: Double Mastery","job",1],["LockPick",2,"Jobs: Double Loot","job",2],["Mercenary",3,"Fighting: No Stamina","fight",1],["Marksman",4,"Fighting: Double Attack","fight",2],["Scout",5,"Robbing: Precious","rob",1],["Arsonist",6,"Robbing: Rob Boost","rob",2],["Taskmaster",7,"Properties: Double Take","prop",1],["Guardian",8,"Properties: Robbing Defense",
"prop",2]],banditTypes=["Cash Bandit","Job Bandit","XP Bandit"],banditChoices=["ignore","instant keel","suspended keel"],dispatchTargets=[[0,"Don't use RX6 Mass Dispatcher"],[12,"MW Family"],[2,"MW Mafia"],[3,"FB Friends"]],freeGiftList=[[487,487,"MYSTERY BOOST","MYSTERY DROP"],[100,100,"BLUE MYSTERY BAG","MYSTERY DROP"],[0,400,"SECRET DROP","MYSTERY DROP"],[0,405,"MYSTERY SHIPMENT","MYSTERY DROP"],[497,497,"SUPER MYSTERY BAG","MYSTERY DROP"],[503,503,"POWER PACK","REFILL"],[0,492,"STAMINA PACK",
"REFILL"],[504,504,"RIFLE ROUND","SPECIAL ITEM"],[0,477,"HOLLOW POINT","SPECIAL ITEM"],[0,478,"A19 RIOT SHIELD","SPECIAL ITEM"],[0,1101,"KNOB WRENCH","SPECIAL ITEM"],[498,498,"AUGMENTER","COLLECTIONS"],[1009,1009,"ARTILLERY SHELL","FAMILY PART"],[1010,1010,"REINFORCED CONCRETE","FAMILY PART"],[189,189,"SPECIAL PART","ITEM PART"],[493,493,"ROB SQUAD","ROBBING"],[438,438,"+2 MAFIA MEMBERS","501 CLUB"],[1038,1038,"POKER CARD","MAFIA POKER"],[0,70,"CEMENT BLOCK","CHOP SHOP"],[0,71,"POWER TOOL","CHOP SHOP"],
[0,72,"CAR LIFT","CHOP SHOP"],[0,73,"ACETYLENE TORCH","CHOP SHOP"],[0,74,"SHIPPING CONTAINER","CHOP SHOP"],[0,75,"ARC WELDER","WEAPONS DEPOT"],[0,76,"BUZZSAW","WEAPONS DEPOT"],[0,77,"GUNPOWDER","WEAPONS DEPOT"],[0,78,"GUN DRILL","WEAPONS DEPOT"],[0,79,"FORGE","WEAPONS DEPOT"],[0,181,"HAMMER","ARMORY"],[0,181,"RIVET","ARMORY"],[0,181,"FUNRACE","ARMORY"],[0,181,"VICE","ARMORY"],[0,181,"ANVIL","ARMORY"],[417,417,"AQUARIUM","PRIVATE ZOO"],[418,418,"BIG CAGE","PRIVATE ZOO"],[419,419,"BIRD CAGE","PRIVATE ZOO"],
[420,420,"FEEDING TROUGH","PRIVATE ZOO"],[421,421,"TERRARIUM","PRIVATE ZOO"],[422,422,"EXOTIC ANIMAL FEED","PRIVATE ZOO"],[1156,1156,"PLATE OF PAIN","JAIILHOUSE"],[0,17,"LIQUOR","NEW YORK"],[0,18,"SET OF CARDS","NEW YORK"],[0,19,"SET OF TOKENS","NEW YORK"],[0,20,"WIRETAP DEVICE","NEW YORK"],[0,116,"UNTRACEABLE CELL PHONE","NEW YORK"],[0,118,"ILLEGAL TRANSACTION RECORDS","NEW YORK"],[0,119,"BLACKMAIL PHOTOS","NEW YORK"],[0,120,"COMPUTER SET-UP","NEW YORK"],[462,462,"BRAZIL CASH","BRAZIL"],[456,456,
"SATCHEL CHARGE","BRAZIL"],[457,457,"RADIO PHONE","BRAZIL"],[458,458,"CONSTRUCTION WORKER","BRAZIL"],[1005,1005,"CHICAGO CASH","CHICAGO"],[1E3,1E3,"UNION WORKER","CHICAGO"],[0,1001,"CARPENTER NAILS","CHICAGO"],[0,1002,"LATH STRIPS","CHICAGO"],[0,1003,"IRON CAST","CHICAGO"],[0,1004,"DOUGLAS FIRM BEAMS","CHICAGO"],[0,1015,"ENGLISH BRICK","LONDON"],[0,1016,"CLAY TILES","LONDON"],[0,1017,"SLEDGE HAMMER","LONDON"],[0,1018,"PLUMB LINE","LONDON"],[0,1019,"IRON GIRDER","LONDON"],[0,528,"TICKET TO LONDON",
"LONDON"],[1169,1169,"STEEL SHAFT","SOUTH AFRICA"],[1166,1166,"BUSHVELD STEEL","SOUTH AFRICA"],[1167,1167,"KUBA CAP","SOUTH AFRICA"],[1168,1168,"MYNBOU-TIQUE TO LONDON","SOUTH AFRICA"]],bossStaminaLimits=[5,15,45,90,150],bossRoles=["disabled","arsonist","racketeer","bruiser"],SpendStamina=new Spend("Stamina","staminaSpend","useStaminaStarted","selectStaminaKeepMode","selectStaminaKeep","selectStaminaUseMode","selectStaminaUse","allowStaminaToLevelUp","staminaFloorLast","staminaCeilingLast","mwapSpeedModesFuZY",
"mwapSpeedModesFuZYWarn","droneModeRobFight","droneModeFightFight","droneModeBrazLonBoost","droneEnergyPackBoost","dronemodeoptimiseEOL","dronemodOptSettings","autoArenaStart"),SpendEnergy=new Spend("Energy","autoMission","useEnergyStarted","selectEnergyKeepMode","selectEnergyKeep","selectEnergyUseMode","selectEnergyUse","allowEnergyToLevelUp","energyFloorLast","energyCeilingLast","autoMissionBlasterSpeed","autoMissionBlasterMega","selectLevelToMaster"),SpendMissionEnergy=new Spend("MissionEnergy",
"autoMissionMission","useMissionEnergyStarted","selectMissionEnergyKeepMode","selectMissionEnergyKeep","selectMissionEnergyUseMode","selectMissionEnergyUse","allowMissionEnergyToLevelUp","MissionenergyFloorLast","MissionenergyCeilingLast"),SpendMissionStamina=new Spend("MissionStamina","MissionStaminaSpend","useMissionStaminaStarted","selectMissionStaminaKeepMode","selectMissionStaminaKeep","selectMissionStaminaUseMode","selectMissionStaminaUse","allowMissionStaminaToLevelUp","MissionStaminaFloorLast",
"MissionStaminaCeilingLast"),healOptions=[["forceHealOpt7","Heal if Health is above 19","check to allow healing while health is above 19,Overrides ALL Lower Settings"],["forceHealOpt5","Heal after 5 minutes","if health drops below 20,start a 5 minute timer,Then allow healing"],["forceHealOpt4","Heal if stamina is full","allow healing if stamina is full and not blocked from above choices"],["forceHealOpt3","Heal if stamina can be spent","try to heal. overridden by the top 2 choices"]],missions=[["Chase Away Thugs",
1,1,1,NY,1,0,"",,0,0,0],["Rob a Drug Runner",2,2,1,NY,2,0,"",,0,0,0],["Rough Up Dealers",3,3,1,NY,3,0,"",,0,0,0],["Rob the Warehouse",3,4,1,NY,3,0,"",,0,0,0],["Collect Protection Money",3,5,1,NY,4,0,"",,0,0,0],["Grow Your Family",4,8,1,NY,5,0,"",,0,0,0],["Perform a Hit",5,37,1,NY,6,0,"",,0,0,0],["Mugging",2,6,2,NY,2,0,"",,0,0,0],["Auto Theft",3,7,2,NY,4,0,"",,0,0,0],["Take Out a Rogue Cop",3,9,2,NY,4,0,"",,0,0,0],["Collect on a Loan",4,10,2,NY,5,0,"",,0,0,0],["Bank Heist",9,11,2,NY,15,0,"",,0,0,0],
["Jewelry Store Job",14,12,2,NY,24,0,"",,0,0,0],["Hijack a Semi",7,38,2,NY,12,0,"",,0,0,0],["Destroy Enemy Mob Hideout",5,13,3,NY,6,0,"",,0,0,0],["Kill a Protected Snitch",5,14,3,NY,6,0,"",,0,0,0],["Bust a Made Man Out of Prison",5,15,3,NY,6,0,"",,0,0,0],["Asian Museum Break-in",6,16,3,NY,8,0,"",,0,0,0],["Fight a Haitian Gang",5,17,3,NY,8,0,"",,0,0,0],["Clip the Irish Mob's Local Enforcer",9,39,3,NY,13,0,"",,0,0,0],["Steal a Tanker Truck",7,40,3,NY,9,0,"",,0,0,0],["Federal Reserve Raid",22,18,4,NY,
35,0,"",,0,0,0],["Smuggle Thai Gems",16,19,4,NY,25,0,"",,0,0,0],["Liquor Smuggling",27,22,4,NY,40,0,"",,0,0,0],["Run Illegal Poker Game",18,26,4,NY,38,0,"",,0,0,0],["Wiretap the Cops",27,28,4,NY,51,0,"",,0,0,0],["Rob an Electronics Store",21,41,4,NY,30,0,"",,1,0,0],["Burn Down a Tenement",16,42,4,NY,25,0,"",,0,0,0],["Distill Some Liquor",9,23,4,NY,14,0,"",,1,0,0],["Manufacture Tokens",9,24,4,NY,14,0,"",,1,0,0],["Get Cheating Deck",9,25,4,NY,14,0,"",,1,0,0],["Overtake Phone Central",9,27,4,NY,14,0,
"",,1,0,0],["Repel the Yakuza",11,29,5,NY,20,0,"",,0,0,0],["Disrupt Rival Smuggling Ring",13,30,5,NY,23,0,"",,0,0,0],["Invade Tong-controlled Neighborhood",22,31,5,NY,35,0,"",,0,0,0],["Sell Guns to the Russian Mob",22,32,5,NY,40,0,"",,1,0,0],["Protect your City against a Rival Family",31,33,5,NY,58,0,"",,1,0,0],["Assassinate a Political Figure",31,34,5,NY,58,0,"",,1,0,0],["Exterminate a Rival Family",36,35,5,NY,67,0,"",,1,0,0],["Obtain Compromising Photos",25,43,5,NY,37,0,"",,0,0,0],["Frame a Rival Capo",
23,44,5,NY,38,0,"",,0,0,0],["Steal an Air Freight Delivery",28,45,6,NY,41,0,"",,1,0,0],["Run a Biker Gang Out of Town",31,46,6,NY,46,0,"",,1,0,0],["Flip a Snitch",22,47,6,NY,35,0,"",,0,0,0],["Steal Bank Records",27,48,6,NY,41,0,"",,1,0,0],["Loot the Police Impound Lot",54,49,6,NY,69,0,"",,1,0,0],["Recruit a Rival Crew Member",27,50,6,NY,45,0,"",,1,0,0],["Dodge an FBI Tail",18,51,6,NY,30,0,"",,0,0,0],["Whack a Rival Crew Leader",25,52,6,NY,44,0,"",,1,0,0],["Influence a Harbor Official",45,53,7,NY,
74,0,"",,0,0,0],["Move Stolen Merchandise",32,54,7,NY,58,0,"",,1,0,0],["Snuff a Rat",39,55,7,NY,71,0,"",,1,0,0],["Help a Fugitive Flee the Country",36,56,7,NY,66,0,"",,1,0,0],["Dispose of a Body",22,57,7,NY,41,0,"",,1,0,0],["Ransom a Businessman's Kids",54,58,7,NY,81,0,"",,0,0,0],["Fix the Big Game",45,59,7,NY,69,0,"",,0,0,0],["Steal an Arms Shipment",40,60,7,NY,75,0,"",,1,0,0],["Extort a Corrupt Judge",21,61,8,NY,41,0,"",,1,0,0],["Embezzle Funds Through a Phony Company",45,62,8,NY,81,0,"",,0,0,0],
["Break Into the Armory",45,63,8,NY,69,0,"",,0,0,0],["Rip Off the Armenian Mob",45,64,8,NY,78,0,"",,1,0,0],["Muscle in on a Triad Operation",40,65,8,NY,78,0,"",,1,0,0],["Ambush a Rival at a Sit Down",49,66,8,NY,92,0,"",,1,0,0],["Order a Hit on a Public Official",31,67,8,NY,63,0,"",,0,0,0],["Take Over an Identity Theft Ring",32,68,8,NY,60,0,"",,0,0,0],["Settle a Beef... Permanently",35,69,9,NY,69,0,"",,1,0,0],["Buy Off a Federal Agent",31,70,9,NY,67,0,"",,0,0,0],["Make a Deal with the Mexican Cartel",
36,71,9,NY,69,0,"",,1,0,0],["Blackmail the District Attorney",39,72,9,NY,74,0,"",,0,0,0],["Shake Down a City Council Member",76,73,9,NY,152,0,"",,0,0,0],["Make Arrangements for a Visiting Don",36,74,9,NY,69,0,"",,1,0,0],["Take Control of a Casino",63,75,9,NY,121,0,"",,1,0,0],["Travel to the Old Country",46,76,9,NY,90,0,"",,1,0,0],["Scope Out the Financial District",13,1,1,BRAZIL,13,0,"",,1,0,0],["Set Up Your Operation in a Renovated Skyscraper",13,2,1,BRAZIL,13,0,"",,1,0,0],["Ask an Informant About Local Crime Activity",
19,3,1,BRAZIL,20,0,"",,1,0,0],["Steal Artwork from the Paco Imperial",19,4,1,BRAZIL,26,0,"",,1,0,0],["Bribe a Corporate Executive",13,5,1,BRAZIL,13,0,"",,0,0,0],["Ambush a Group of Neo-Imperium",19,6,1,BRAZIL,26,0,"",,1,0,0],["Destroy a Bondinho Tram",26,7,1,BRAZIL,26,0,"",,1,0,0],["Blackmail a Cathedral Representative",32,8,1,BRAZIL,33,0,"",,1,0,0],["Run a Collection Plate Con",32,9,1,BRAZIL,39,0,"",,1,0,0],["Track Down Lieutenant Sandoval",32,10,1,BRAZIL,46,0,"",,0,0,0],["Assassinate a Politician at a Museum Gala",
45,11,1,BRAZIL,59,0,"",,1,0,0],["Meet a Contact at Mosqueiro",63,13,2,BRAZIL,81,0,"",,1,0,0],["Impersonate a Wealthy Entrepreneur",63,14,2,BRAZIL,81,0,"",,1,0,0],["Dispose of a Police Chief",72,15,2,BRAZIL,108,0,"",,1,0,0],["Intimidate the Local Crime Ring",63,16,2,BRAZIL,108,0,"",,1,0,0],["Track Down Neo-Imperium Members",72,17,2,BRAZIL,108,0,"",,1,0,0],["Smuggle a Shipment Through Aeroporto de Belem",81,18,2,BRAZIL,117,0,"",,1,0,0],["Steal the Plans",81,19,2,BRAZIL,126,0,"",,1,0,0],["Burn Down a Jungle Hideout",
81,20,2,BRAZIL,135,0,"",,0,0,0],["Establish a Spy Ring of Belem Fishermen",90,21,2,BRAZIL,144,0,"",,1,0,0],["Gun Down Kidnappers",81,22,2,BRAZIL,144,0,"",,1,0,0],["Capture a Neo-Imperium Captain",99,23,2,BRAZIL,162,0,"",,1,0,0],["Bribe a City Official",99,24,2,BRAZIL,162,0,"",,0,0,0],["Blackmail a City Official",108,25,3,BRAZIL,162,0,"",,0,0,0],["Gather Intel from Street Rats",117,26,3,BRAZIL,162,0,"",,0,0,0],["Assassinate a Neo-Imperium Spokesman",126,27,3,BRAZIL,180,0,"",,1,0,0],["Bribe a Police Commandant",
117,28,3,BRAZIL,171,0,"",,0,0,0],["Pilfer from a Rebel Supply House",126,29,3,BRAZIL,180,0,"",,1,0,0],["Locate a Rebel Outpost",135,30,3,BRAZIL,198,0,"",,1,0,0],["Intercept a Rebel Convoy",135,31,3,BRAZIL,207,0,"",,1,0,0],["Take Out a Rebel Lookout",144,32,3,BRAZIL,207,0,"",,1,0,0],["Create a Diversion in the Jungle",153,33,3,BRAZIL,225,0,"",,1,0,0],["Blow Up a Munitions Dump",153,34,3,BRAZIL,216,0,"",,1,0,0],["Open Fire on Rebel Fighters",162,35,3,BRAZIL,243,0,"",,1,0,0],["Rescue a Hostage",162,
36,3,BRAZIL,234,0,"",,1,0,0],["Move to a Sao Paolo Safe House",162,37,4,BRAZIL,243,0,"",,1,0,0],["Transport a Drug Shipment",171,38,4,BRAZIL,261,0,"",,1,0,0],["Push Over a Gun Runner",162,39,4,BRAZIL,261,0,"",,1,0,0],["Pass Along a Bribe",180,40,4,BRAZIL,279,0,"",,1,0,0],["Contact a Comando do Candiru Agent",180,41,4,BRAZIL,297,0,"",,0,0,0],["Scout Out the City",189,42,4,BRAZIL,297,0,"",,1,0,0],["Rob a Jewelry Store",189,43,4,BRAZIL,315,0,"",,1,0,0],["Burn Down a Slum Building",198,44,4,BRAZIL,333,
0,"",,0,0,0],["Escape a Police Pursuit",207,45,4,BRAZIL,333,0,"",,1,0,0],["Demolish a Rooftop Helipad",198,46,4,BRAZIL,324,0,"",,1,0,0],["Wipe Out a Favela Street Gang",207,47,4,BRAZIL,342,0,"",,1,0,0],["Interrogate a Neo-Imperium Supporter",216,48,4,BRAZIL,360,0,"",,1,0,0],["Smuggle Weapons Down the River to a Recife Port",216,49,5,BRAZIL,243,0,"",,0,0,0],["Negotiate a Sit-Down with the Comando do Candiru",225,50,5,BRAZIL,261,0,"",,1,0,0],["Auction Off a Rival's Private Island",234,51,5,BRAZIL,261,
0,"",,1,0,0],["Detonate an Ethanol Shipment",225,52,5,BRAZIL,279,0,"",,0,0,0],["Create a Shark Scare",234,53,5,BRAZIL,297,0,"",,1,0,0],["Steal Confidential Medical Records",216,54,5,BRAZIL,297,0,"",,1,0,0],["Blackmail a University Instructor",225,55,5,BRAZIL,315,0,"",,1,0,0],["Raid a Biochemist's Lab",234,56,5,BRAZIL,333,0,"",,1,0,0],["Sink a Cargo Ship in Port",243,57,5,BRAZIL,333,0,"",,0,0,0],["Take Over a Shipyard",152,58,5,BRAZIL,324,0,"",,1,0,0],["Give Chase to the Neo-Imperium",252,59,5,BRAZIL,
441,0,"",,1,0,0],["Shake Down Some Locals For Information",234,60,6,BRAZIL,414,0,"",,1,0,0],["Discover Connections to Local Gangs",207,61,6,BRAZIL,369,0,"",,1,0,0],["Bribe a News Network Executive",198,62,6,BRAZIL,360,0,"",,0,0,0],["Make an Announcement on a Local TV Network",225,63,6,BRAZIL,378,0,"",,1,0,0],["Convince The Locals Of Your Good Intentions",198,64,6,BRAZIL,351,0,"",,1,0,0],["Hunt Down The Revolucao Vermelho's Affiliates",216,65,6,BRAZIL,369,0,"",,1,0,0],["Bust Up a Local Drug Ring",
207,66,6,BRAZIL,360,0,"",,0,0,0],["Delay a Police Patrol",225,67,6,BRAZIL,405,0,"",,0,0,0],["Hijack a Fuel Truck",207,68,6,BRAZIL,360,0,"",,1,0,0],["Offer Protection to a Franchise Business",225,69,6,BRAZIL,396,0,"",,1,0,0],["Execute a Slum Gang Leader",225,70,6,BRAZIL,414,0,"",,1,0,0],["Make a Direct Assault on the RV Base",243,71,6,BRAZIL,450,0,"",,0,0,0],["Mobilize Your Operation",234,72,7,BRAZIL,414,0,"",,0,0,0],["Generate Revenue for Your Cause",216,73,7,BRAZIL,396,0,"",,1,0,0],["Find Proof of Police Corruption",
225,74,7,BRAZIL,405,0,"",,0,0,0],["Rendezvous with Comando do Candiru Agents",216,75,7,BRAZIL,396,0,"",,1,0,0],["Bribe a Carnival Director",216,76,7,BRAZIL,396,0,"",,0,0,0],["Take Advantage of a Distracted Crowd",225,77,7,BRAZIL,405,0,"",,1,0,0],["Blend in with a Group of Float Performers",243,78,7,BRAZIL,432,0,"",,1,0,0],["Assassinate the Guest of Honor",243,79,7,BRAZIL,441,0,"",,1,0,0],["Cut the RV's Purse Strings",234,80,7,BRAZIL,414,0,"",,0,0,0],["Tail a Group of RV to Their Base",225,81,7,BRAZIL,
405,0,"",,1,0,0],["Remove the Police Protection",243,82,7,BRAZIL,432,0,"",,1,0,0],["Demolish an RV stronghold",252,83,7,BRAZIL,459,0,"",,0,0,0],["Prepare an Ambush for a Neo-Imperium Sect",243,84,8,BRAZIL,432,0,"",,1,0,0],["Interrogate Comando do Condiru Agents",234,85,8,BRAZIL,423,0,"",,0,0,0],["Acquire Funds for Taubate Operations",225,86,8,BRAZIL,414,0,"",,0,0,0],["Bribe a Taubate Prison Worker",216,87,8,BRAZIL,423,0,"",,0,0,0],["Infiltrate Taubate Prison",234,88,8,BRAZIL,423,0,"",,1,0,0],["Arrange for Prisoner Transfers",
243,89,8,BRAZIL,423,0,"",,1,0,0],["Disable Police Emergency Response",225,90,8,BRAZIL,405,0,"",,1,0,0],["Cause Civilian Panic",243,91,8,BRAZIL,450,0,"",,0,0,0],["Scout For Potential",252,92,8,BRAZIL,459,0,"",,0,0,0],["Break Mafia Members Out of Taubate",252,93,8,BRAZIL,450,0,"",,1,0,0],["Destroy the Neo-Imperium's Cover Operations",261,94,8,BRAZIL,477,0,"",,1,0,0],["Assassinate the Neo-Imperium's Primary Heads",270,95,8,BRAZIL,522,0,"",,1,0,0],["Meet With The South Gang Family",18,1,1,CHICAGO,18,
0,"",,1,0,0],["Drive North of the Border",18,2,1,CHICAGO,18,0,"",,1,0,0],["Set Up a Rum Running Operation",27,3,1,CHICAGO,27,0,"",,1,0,0],["Smuggle a Shipment Back to Chicago",27,4,1,CHICAGO,36,0,"",,1,0,0],["Break Into Guido Pantucci's Warehouse",27,5,1,CHICAGO,27,0,"",,1,0,0],["Dodge the Guards",27,6,1,CHICAGO,36,0,"",,1,0,0],["Get Rid of Pantucci",36,7,1,CHICAGO,36,0,"",,0,0,0],["Dispose of the Bodies",36,8,1,CHICAGO,45,0,"",,0,0,0],["Run an illegal Establishment",45,9,2,CHICAGO,81,0,"",,1,0,0],
["Secure Hooch to Sell in Your Joint",54,10,2,CHICAGO,108,0,"",,1,0,0],["Recruit Loyal Gunmen",54,11,2,CHICAGO,81,0,"",,0,0,0],["Case Warehouses on the North Side",63,12,2,CHICAGO,126,0,"",,1,0,0],["Expose a Treachery in Your Family",72,13,2,CHICAGO,108,0,"",,1,0,0],["Cripple the Colosimo Clan's Assets",81,14,2,CHICAGO,144,0,"",,0,0,0],["Ambush the Don's Limo",99,15,2,CHICAGO,180,0,"",,1,0,0],["Get the Respect You Deserve",108,16,2,CHICAGO,198,0,"",,0,0,0],["Move Smuggled Liquor",36,17,3,CHICAGO,
45,0,"",,1,0,0],["Collect Income From Your Establishments",36,18,3,CHICAGO,45,0,"",,1,0,0],["Stuff Local Cop's Pockets With Greens",36,19,3,CHICAGO,45,0,"",,0,0,0],["Organize a Private Party",36,20,3,CHICAGO,45,0,"",,1,0,0],["Evade an Ambush",36,21,3,CHICAGO,45,0,"",,1,0,0],["Uncover a Plot Against You",36,22,3,CHICAGO,45,0,"",,1,0,0],["Order a Hit on Disloyal Associates",36,23,3,CHICAGO,45,0,"",,1,0,0],["Put Brother Franky in Concrete Shoes",36,24,3,CHICAGO,45,0,"",,0,0,0],["Set Up a Distillery in Cicero",
162,25,4,CHICAGO,252,0,"",,0,0,0],["Meet With a Mayoral Candidate",144,26,4,CHICAGO,234,0,"",,1,0,0],["Threaten Voters at Polling Stations",153,27,4,CHICAGO,243,0,"",,1,0,0],["Get Puppet Mayor Elected",162,28,4,CHICAGO,261,0,"",,0,0,0],["Escape a Federal Agents Raid on Your Distillery",135,29,4,CHICAGO,216,0,"",,1,0,0],["Find Out About Mayor's Dealings With the Bureau",144,30,4,CHICAGO,225,0,"",,1,0,0],["Blackmail a Prohibition Bureau Top Agent",153,31,4,CHICAGO,261,0,"",,0,0,0],["Frame Mayor in a Political Scandal",
180,32,4,CHICAGO,315,0,"",,0,0,0],["Travel South to the Caribbean",171,33,5,CHICAGO,315,0,"",,1,0,0],["Set Up a Rum Running Base of Operation",162,34,5,CHICAGO,279,0,"",,1,0,0],["Monitor Coast Guard Patrols",162,35,5,CHICAGO,297,0,"",,1,0,0],["Hijack a Rival Ship",171,36,5,CHICAGO,279,0,"",,1,0,0],["Eliminate the Competition",180,37,5,CHICAGO,315,0,"",,1,0,0],["Comb the Beach for Scraps",189,38,5,CHICAGO,324,0,"",,1,0,0],["Ferry Customers Across the Rum Line",171,39,5,CHICAGO,315,0,"",,1,0,0],["Host Happy Hours on Board",
198,40,5,CHICAGO,360,0,"",,0,0,0],["Catch a Saboteur",180,41,6,CHICAGO,333,0,"",,1,0,0],["Storm Into a North Side Gang Brewery",171,42,6,CHICAGO,333,0,"",,0,0,0],["Dodge a Firebombing on Your Headquarters",189,43,6,CHICAGO,351,0,"",,0,0,0],["Salvage Your Valuables From a Blazing Fire",207,44,6,CHICAGO,378,0,"",,1,0,0],["Call for a Truce With the North Siders",198,45,6,CHICAGO,369,0,"",,0,0,0],["Narrowly Survive an Assassination Attempt",216,46,6,CHICAGO,396,0,"",,1,0,0],["Plan a Decisive Blow Against the North Siders",
198,47,6,CHICAGO,369,0,"",,1,0,0],["Flee the Scene Before the Police Arrive",225,48,6,CHICAGO,414,0,"",,1,0,0],["Claim Your Winnings After The Match",45,1,1,LONDON,54,0,"",,1,0,0],["Fight Off The Thugs",45,2,1,LONDON,63,0,"",,1,0,0],["Discuss Your Options With The Betting Mafia",45,3,1,LONDON,63,0,"",,1,0,0],['Persuade "The Kid" To Throw The Championship Fight',45,4,1,LONDON,54,0,"",,1,0,0],['Spike "The Kid\'s" Energy Drink With A Neurotoxin',54,5,1,LONDON,81,0,"",,1,0,0],['Bet On "The Kid" Losing The Championship Fight',
54,6,1,LONDON,72,0,"",,0,0,0],["Watch The Fight",63,7,1,LONDON,81,0,"",,1,0,0],["Collect Your Take",45,8,1,LONDON,72,0,"",,0,0,0],["Acquire A Neurotoxin From The Local Dealer",22,10002,1,LONDON,35,1,"yes",,1,0,0],["Force An Immigrant Family From Their Home",63,9,2,LONDON,81,0,"",,1,0,0],["Meet The Land Mafia To Collect Your Take",45,10,2,LONDON,72,0,"",,1,0,0],["Intimidate The New Celebrity Residents",54,11,2,LONDON,81,0,"",,0,0,0],["Case The Nouvelle Vague Art Gallery",72,12,2,LONDON,126,0,"",,1,
0,0],["Destroy The Rare East End Works Painting",81,13,2,LONDON,135,0,"",,0,0,0],["Burn Down A Brand New Condo",90,14,2,LONDON,153,0,"",,1,0,0],["Collect Your Take From The Construction Firms",81,15,2,LONDON,162,0,"",,0,0,0],["Leave The East End",108,16,2,LONDON,198,0,"",,1,0,0],["Organize A Protest Against The Construction Firms",27,10003,2,LONDON,50,2,"yes",,1,0,0],["Write About The Mysterious Shooting",117,17,3,LONDON,207,0,"",,1,0,0],["Work With The PI At The Crime Scene",126,18,3,LONDON,216,
0,"",,1,0,0],["Approach The Police With Leads",117,19,3,LONDON,225,0,"",,1,0,0],["Search For A Trail",135,20,3,LONDON,243,0,"",,0,0,0],["Threaten To Expose The Royal",135,21,3,LONDON,234,0,"",,1,0,0],["Lay A Trap For The Royal",144,22,3,LONDON,252,0,"",,0,0,0],["Tell The Editor The Truth",153,23,3,LONDON,261,0,"",,1,0,0],["Publish False Story Under Threat",144,24,3,LONDON,252,0,"",,1,0,0],["Accept The Offer Made By The Russians",162,25,4,LONDON,270,0,"",,1,0,0],["Provide Insider Information On Your Gang",
162,26,4,LONDON,315,0,"",,0,0,0],["Escape The Hitmen After Being Discovered",180,27,4,LONDON,324,0,"",,0,0,0],["Take Shelter In A Warehouse",171,28,4,LONDON,324,0,"",,0,0,0],["Fake Your Own Death",189,29,4,LONDON,333,0,"",,1,0,0],["Create A Russian Identity",180,30,4,LONDON,351,0,"",,0,0,0],["Eliminate Your Gang With The Russians",189,31,4,LONDON,342,0,"",,0,0,0],["Run The Racket",189,32,4,LONDON,351,0,"",,1,0,0],["Sneak Into The Gambling Den",180,33,5,LONDON,324,0,"",,1,0,0],["Gamble Away All Your Savings",
189,34,5,LONDON,342,0,"",,0,0,0],["Bargain To Push 'Power Ups' To Pay Off Your Debts",198,35,5,LONDON,351,0,"",,1,0,0],["Sell 'Power Ups' At School",207,36,5,LONDON,405,0,"",,0,0,0],["Start An Operation",189,37,5,LONDON,351,0,"",,0,0,0],["Pay Off Your Debts",198,38,5,LONDON,369,0,"",,1,0,0],["Run Your Empire",180,39,5,LONDON,378,0,"",,0,0,0],["Join The Inner Circle",207,40,5,LONDON,405,0,"",,0,0,0],["Analyze Your Agent's Data",189,41,6,LONDON,342,0,"",,1,0,0],["Organize A Raid On The Gang Hideout",
198,42,6,LONDON,351,0,"",,0,0,0],["Ambush The Convoy Transporting The Gang Boss",207,43,6,LONDON,405,0,"",,1,0,0],["Drive The Gang Boss To A Safehouse",216,44,6,LONDON,414,0,"",,0,0,0],["Forge The Reports",225,45,6,LONDON,459,0,"",,0,0,0],["Observe Your Agent Snooping Around",189,46,6,LONDON,369,0,"",,0,0,0],["Snipe Your Agent Before He Goes Public",234,47,6,LONDON,423,0,"",,0,0,0],["Close The Investigation",225,48,6,LONDON,432,0,"",,1,0,0],["Track Down Your Target",162,49,7,LONDON,324,0,"",,1,0,
0],["Assassinate Your Target",180,50,7,LONDON,342,0,"",,1,0,0],["Declare Your Retirement To The Boss",216,51,7,LONDON,405,0,"",,0,0,0],["Chase Down Your Son's Kidnappers",198,52,7,LONDON,414,0,"",,0,0,0],["Sneak Into The Manor",171,53,7,LONDON,351,0,"",,1,0,0],["Rescue Your Son",225,54,7,LONDON,405,0,"",,1,0,0],["Take Out The Boss And His Guards",198,55,7,LONDON,378,0,"",,1,0,0],["Retire To The Isle Of Wight",207,56,7,LONDON,432,0,"",,0,0,0],["Meet Your Source",171,57,8,LONDON,324,0,"",,1,0,0],["Investigate The Trail Of The Puzzle Box",
162,58,8,LONDON,342,0,"",,0,0,0],["Audition Your Potential Partners",216,59,8,LONDON,414,0,"",,0,0,0],["Storm The Tower Of London",198,60,8,LONDON,378,0,"",,1,0,0],["Steal The Puzzle Box",207,61,8,LONDON,414,0,"",,1,0,0],["Fight Off The Police",198,62,8,LONDON,423,0,"",,0,0,0],["Escape Into The Back Alleys",225,63,8,LONDON,450,0,"",,0,0,0],["Open The Puzzle Box",234,64,8,LONDON,432,0,"",,0,0,0],["Train For Battle At The Dojo",1458,10016,8,LONDON,2996,0,"yes",,1,0,0],["Set Up A Drug Racket From Your Kebab Shop",
162,65,9,LONDON,333,0,"",,1,0,0],["Expand The Business With Turkish Smugglers' Help",171,66,9,LONDON,351,0,"",,1,0,0],["Reap The Benefits",207,67,9,LONDON,432,0,"",,0,0,0],["Suspect Foul Play",180,68,9,LONDON,369,0,"",,1,0,0],["Silence Your Disloyal Associates",207,69,9,LONDON,414,0,"",,0,0,0],["Pretend To Be A Survivor",198,70,9,LONDON,396,0,"",,0,0,0],["Get Compensation From Insurance Company",225,71,9,LONDON,432,0,"",,0,0,0],["Open Various Branches Across London But Beware",234,72,9,LONDON,450,
0,"",,0,0,0],["Retrieve Your Hidden Stash",364,10017,9,LONDON,768,0,"yes",,1,0,0],["Smuggle In The Goods At Night",243,10018,9,LONDON,495,0,"yes",,1,0,0],["Queue Up At The Grande Stadium For The Game",162,73,10,LONDON,324,0,"",,1,0,0],["Enjoy The Game At Rival Team's Cost",162,74,10,LONDON,342,0,"",,0,0,0],["Go To A Pub To Celebrate Your Team's Win",198,75,10,LONDON,414,0,"",,1,0,0],["Poke Your Team's Victory In Rival Fans' Faces",207,76,10,LONDON,432,0,"",,0,0,0],["Defend Yourself From The Rival's Fans",
198,77,10,LONDON,414,0,"",,1,0,0],["Make A Run For It And Hide",180,78,10,LONDON,369,0,"",,0,0,0],["Speak To Your Uncle With Connections",216,79,10,LONDON,450,0,"",,0,0,0],["Make The Club Pay For Their Disrespect",207,80,10,LONDON,432,0,"",,0,0,0],["Get Chased Out Of The Pub",351,10019,10,LONDON,726,0,"",,1,0,0],["Teach the Rival Manager A Lesson He Won't Forget",234,10020,10,LONDON,468,0,"",,1,0,0],["Sponsor A Hot New Designer At Fashion Week",492,1052,11,LONDON,855,135,"",,1,0,0],["Use The Label To Launder Money From Your Other Businesses",
394,1053,11,LONDON,723,135,"",,1,0,0],["Open Flagship Stores Across The City As Fronts",427,1054,11,LONDON,822,135,"",,1,0,0],["Smuggle Black Money Out During Photo Shoots",459,1055,11,LONDON,855,135,"",,1,0,0],["Use The Smuggled Money As Foreign Investment",394,1056,11,LONDON,756,135,"",,1,0,0],["Offer Your Services To Other Crime Gangs For A Profit",492,1057,11,LONDON,1085,135,"",,1,0,0],["Catch The Designer Collecting Evidence To Blackmail You",591,1058,11,LONDON,1216,135,"",,1,0,0],['Rig The Next Photo Shoot For An "Accident"',
624,1059,11,LONDON,1380,135,"",,1,0,0],["Use His Death To Generate Publicity For The Label",657,1060,11,LONDON,1380,135,"",,1,0,0],["Help Out At The Shipwreck",938,1,1,SA,1491,0,"",,1,0,0],["Steal The Cargo Of Diamonds",955,2,1,SA,1683,0,"",,0,0,0],["Hunt For The Highest Bidder",938,3,1,SA,1683,0,"",,1,0,0],["Rally The Union To Join Your Operation",938,4,1,SA,1695,0,"",,0,0,0],["Hide Your Shipment",1311,5,1,SA,2404,0,"",,0,0,0],["Discover A Rat In Your Operation",1311,6,1,SA,2404,0,"",,0,0,0],["Hire The Mafia As Muscle",
1685,7,1,SA,3125,0,"",,1,0,0],["Protect Your Shipment Into International Waters",1123,8,1,SA,2164,0,"",,0,0,0],["Join Forces With The Mafia",1498,9,1,SA,2885,0,"",,0,0,0],["Set Up A Diamond Smuggling Racket",1311,10,1,SA,2656,0,"",,0,0,0],["Steal A Diamond At Work",1311,11,2,SA,2164,0,"",,1,0,0],["Defend Yourself Against The Supervisors",1498,12,2,SA,2644,0,"",,0,0,0],["Distract The Guards",1311,13,2,SA,2404,0,"",,0,0,0],["Loot The Safe Of Diamonds",1685,14,2,SA,2885,0,"",,1,0,0],["Locate The Militia By The River",
1826,15,2,SA,3125,0,"",,0,0,0],["Trade Diamonds For High-Grade Weapons",1891,16,2,SA,3606,0,"",,1,0,0],["Incite The Miners to Riot",1872,17,2,SA,3606,0,"",,0,0,0],["Wage War Against The Mining Corporation",1685,18,2,SA,3185,0,"",,1,0,0],["Establish Yourself As A Rebel Leader",2060,19,2,SA,4087,0,"",,0,0,0],["Distribute The Spoils Of War",1872,20,2,SA,3846,0,"",,0,0,0],["Accept The Job For A Top-Secret Mission",5151,21,3,SA,9549,0,"",,1,0,0],["Reach The Medical Facility Without Being Noticed",5151,
22,3,SA,10743,0,"",,0,0,0],["Dodge All High Security Elements",6009,23,3,SA,11936,0,"",,1,0,0],["Gain Access To The Disease Containment Chamber",5151,24,3,SA,10743,0,"",,0,0,0],["Eliminate An Unexpected Roadblock",6009,25,3,SA,11936,0,"",,0,0,0],["Open The Virus Vault With Protective Gear",6009,26,3,SA,13130,0,"",,0,0,0],["Take What You Came For",6868,27,3,SA,14323,0,"",,1,0,0],["Flee The Scene Without Leaving A Trail",7726,28,3,SA,16711,0,"",,1,0,0],["Be At The Right Place At The Right Time",8370,
29,3,SA,17904,0,"",,0,0,0],["Sell The Virus To The Highest Bidder",7743,30,3,SA,17391,0,"",,0,0,0],["Spy On The Witch Doctor",1008,31,4,SA,1630,0,"",,1,0,0],["Discover The Secret Location Of The Herbs",882,32,4,SA,1499,0,"",,1,0,0],["Fake An Injury And Seek Doctor's Aid",1134,33,4,SA,1965,0,"",,0,0,0],["Offer A Contract To The Witch Doctor",1071,34,4,SA,1843,0,"",,0,0,0],['Threaten The Doctor To Part With His "Herbal Meds"',1417,35,4,SA,2731,0,"",,1,0,0],["Gather A Mob To Force Doctor To Agree",1260,
36,4,SA,2271,0,"",,1,0,0],["Set Doctor's House On Fire As A Warning",1519,37,4,SA,3062,0,"",,0,0,0],["Discover That The Doctor Has Escaped",1587,38,4,SA,3109,0,"",,1,0,0],["Launch A Manhunt For Doctor",1701,39,4,SA,3473,0,"",,0,0,0],["Ensure That The Doctor Is In The Boss' Clutches",1814,40,4,SA,3770,0,"",,0,0,0],["Acquire Car Parts From Local Hoodlums",798,41,5,SA,1300,0,"",,1,0,0],["Offer Your Expertise For Their Business",760,42,5,SA,1291,0,"",,1,0,0],["Go Through A Series Of Tests To Prove Yourself",
950,43,5,SA,1646,0,"",,0,0,0],["Get Recruited For A Lucrative Project",983,44,5,SA,1905,0,"",,1,0,0],["Proceed To Dealer's Warehouse",902,45,5,SA,1607,0,"",,0,0,0],["Discover A Special Package In The Car",1026,46,5,SA,2055,0,"",,0,0,0],["Notice That You Are Being Followed",1111,47,5,SA,2261,0,"",,0,0,0],["Lose Them On The Highway",1162,48,5,SA,2357,0,"",,1,0,0],["Bury Your Treasure In A Nearby Field",1282,49,5,SA,2623,0,"",,0,0,0],["Finish Your Car-Jacking Job As Planned",1410,50,5,SA,2941,0,"",,
0,0,0],["Assign Your Protege To An Undercover Operation",552,51,6,SA,925,0,"",,1,0,0],["Crack Down On Narcotics Rings In The Slums",517,52,6,SA,885,0,"",,0,0,0],["Bring Your Protege In On Your Operation",543,53,6,SA,1060,0,"",,0,0,0],["Stage A Break In Into The Evidence Room",575,54,6,SA,1017,0,"",,1,0,0],["Find Prospective Buyers In The Mafia",595,55,6,SA,1184,0,"",,1,0,0],["Resell Snow Candy To The Mafia",621,56,6,SA,1252,0,"",,0,0,0],["Run A Substance Raid In The Slums",698,57,6,SA,1418,0,"",,
0,0,0],["Fake The Arrest Of Your Protege",724,58,6,SA,1470,0,"",,1,0,0],["Shift To Another Precinct In The City",776,59,6,SA,1594,0,"",,0,0,0],["Get Cure For Disease With Your Profits",869,60,6,SA,1816,0,"",,0,0,0],["Refuse To Poach For Rhino Horns And Ivory",1254,61,7,SA,2129,0,"",,1,0,0],["Give In To Militant Pressure To Poach",1320,62,7,SA,2287,0,"",,0,0,0],["Track Down And Hunt Rhinos",1366,63,7,SA,2666,0,"",,1,0,0],["Make A Futile Attempt To Escape Rangers",1247,64,7,SA,2467,0,"",,1,0,0],["Endure Torture During Interrogation",
1425,65,7,SA,2855,0,"",,0,0,0],["Cut A Deal With Rangers",1485,66,7,SA,2992,0,"",,1,0,0],["Lead Rangers To Closest Militant Hideout",1722,67,7,SA,3483,0,"",,0,0,0],["Take Cover From Gunfire",1782,68,7,SA,3626,0,"",,1,0,0],["Expose Other Militant Pockets",1900,69,7,SA,3952,0,"",,0,0,0],["Become An Informer For The Rangers",2138,70,7,SA,4480,0,"",,0,0,0],["Launch An Assault On The Football Stadium",1235,71,8,SA,2339,0,"",,1,0,0],["Demand That The President Be Surrendered To You",1320,72,8,SA,2303,0,
"",,0,0,0],["Give The President Time To Escape",1342,73,8,SA,2757,0,"",,0,0,0],["Launch Deadly Virus Grenades Into The Crowd",1318,74,8,SA,2623,0,"",,1,0,0],["Abduct The Nation's Most Influential Media Mogul",1608,75,8,SA,3345,0,"",,0,0,0],["Blow Up The Grounded Blimp To Cover Your Escape",1247,76,8,SA,2531,0,"",,0,0,0],["Secure The Hideout While You Wait For The Boss",1782,77,8,SA,3730,0,"",,0,0,0],["Persuade The Mogul To Join Your Cause",1663,78,8,SA,3437,0,"",,0,0,0],["Release Footage Of The President Abandoning The Stadium Victims",
1948,79,8,SA,4175,0,"",,0,0,0],["Influence Public Opinion Through The Mogul's News Networks",2185,80,8,SA,4742,0,"",,0,0,0],["Alert President Of Public Frenzy",924,81,9,SA,1644,0,"",,1,0,0],["Call For A Meeting In A Secluded Location",1473,82,9,SA,2967,0,"",,0,0,0],["Join President's Entourage At Springbok",1544,83,9,SA,3211,0,"",,0,0,0],["Protect President From Public Humiliation",1425,84,9,SA,2891,0,"",,1,0,0],["Transport President To Safe House",1710,85,9,SA,3492,0,"",,1,0,0],["Double-Cross the President",
1663,86,9,SA,3501,0,"",,0,0,0],["Force President To Confront His Past",1306,87,9,SA,2675,0,"",,0,0,0],["Record President's Confession To Crimes Of Genocide",1710,88,9,SA,3541,0,"",,0,0,0],["Tip-Off President's Whereabouts To Police",2019,89,9,SA,4367,0,"",,0,0,0],["Escape Safe House Unnoticed",2185,90,9,SA,4754,0,"",,0,0,0],["Gain The Cooperation Of Key Members Of Parliament",0,91,10,SA,822,0,"",,0,0,416],["Take Control Of The Leading Political Party",1160,92,10,SA,2339,0,"",,1,0,0],["Organize Terror Attacks By Your Militants",
1216,93,10,SA,2530,0,"",,0,0,0],["Double Cross And Have Them Eliminated",0,94,10,SA,942,0,"",,0,0,1404],["Declare A State Of Emergency In The Country",1347,95,10,SA,2751,0,"",,0,0,0],["Establish Martial Law",1310,96,10,SA,2758,0,"",,1,0,0],["Offer Restitution To Terror Attack Victims",0,97,10,SA,1070,0,"",,0,0,1560],["Publicize Your Philanthropy To Win Public Approval",1404,98,10,SA,2912,0,"",,0,0,0],["Get Sworn In As President",1310,99,10,SA,2868,0,"",,0,0,0],["Offer Your Associates Key Roles In The Cabinet",
1684,120,10,SA,3698,0,"",,0,0,0],["Meet With Your Dealer At A Secluded Location",938,100,11,SA,2044,1001,"",,0,0,0],["Exchange Diamonds For High Grade Weapons",1685,101,11,SA,3846,1001,"",,0,0,0],["Organize An Arms Race Among Militant Groups",1076,102,11,SA,2380,1001,"",,0,0,0],["Supply High-Grade Weapons To The Limpopo Militants",1311,103,11,SA,3005,1001,"",,0,0,0],["Employ the services of a Mercenary",2060,104,11,SA,4567,1001,"",,0,0,0],["Ensure That The Virus Is In Safe Hands",1882,105,11,SA,4327,
1001,"",,0,0,0],["Abduct The Witch Doctor",1404,106,11,SA,3236,1001,"yes",,0,0,0],['Force Witch Doctor To Create "Herbal Meds"',1591,107,11,SA,3678,1001,"",,0,0,0],["Eliminate Your Witness",1368,108,11,SA,3075,1001,"yes",,0,0,0],["Retrieve Your Stolen Package",1439,109,11,SA,3251,1001,"yes",,0,0,0],["Take Care of the Chief and Eliminate his Herbal Meds Suppliers",1404,110,11,SA,3190,1001,"",,0,0,0],["Monopolize the Supply and Distribution of Herbal Meds",1360,111,11,SA,3107,1001,"",,0,0,0],["Reward Informant For Your Special Delivery",
1954,112,11,SA,4453,1001,"",,0,0,0],["Increase Your Stash Of Vital Evidence",2215,113,11,SA,5076,1001,"",,0,0,0],["Feed False Reports Of The President's Corruption To The Press",1646,114,11,SA,3761,1001,"",,0,0,0],["Destabilize The Regime With A Smear Campaign Against The President",1826,115,11,SA,4197,1001,"",,0,0,0],["Respond To The President's Confession",1805,116,11,SA,4159,1001,"",,0,0,0],["Make Your Intentions To Run For President Known",1805,117,11,SA,4009,1001,"",,0,0,0],["Call A Meeting With Your Past Associates",
1121,118,11,SA,2591,1001,"",,0,0,0],["Tie Up Loose Ends As They Fly In",1281,119,11,SA,2973,1001,"",,0,0,0]],missionTabs=["Street Thug;Associate;Soldier;Enforcer;Hitman;Capo;Consigliere;Underboss;Boss".split(";"),"El Soldado;El Capitan;El Jefe;El Patron;El Padrino;El Cacique".split(";"),"Baklany Boets Brigadir Avtoritet Vor Pakhan".split(" "),"Brawler;Criminal;Pirate;Commandant;Oyabun;Dragon Head;Saboteur;Assassin".split(";"),"North Las Vegas;Paradise City;The Lower Strip;Shogun Casino;Mojave Desert;The Upper Strip;Area 51;Hoover Dam".split(";"),
"Roma;Palermo;Venezia;Milano;Napoli;Calabria;Citta Del Vaticano;The Eternal City".split(";"),"Rio de Janeiro: Centro;Belem;Manaus;Sao Paolo: Heliopolis;Recife;Rio de Janeiro: Rocinha;Rio de Janeiro: Copacabana;Sao Paolo: Taubate Prison".split(";"),"Sam's Truck Shop;Main Street Speakeasy;The Old Warehouse;Ballot Box Distillery;Lakeside Docks;Crosstown Showdown".split(";"),"Notes From The Underground;East End Story;Dead in Red;To Russia with Love;Schoolyard Games;Collateral Damage;Baby On Board;American Psycho in London;Turkish Delight;Footing the Ball;The Model Crime".split(";"),
"Cape Town;The Limpopo River;Bloemfontein;Kimberley;Durban;Mthatha;Mafikeng;Nelspruit;Springbok;De Aar;Joburg".split(";")],districtBosses={135:{districtBossName:"Detective Dean",districtBossId:46,districtBossStage:135,districtBossCity:9,districtBossLevel:0,districtBoostCombos:{1:["3","4","2","1"],2:["2","4","3","4"],3:["4","1","4","2"]},districtBoostItems:{knifeslash:"1",knucklespunch:"2",crackofthebat:"3",hotcouture:"4"},districtBossConsumables:["none","Knife Slash","Knuckles Punch","Crack of the Bat",
"Hot Couture"]}},requirementJob=[["Liquor","Distill Some Liquor",NY],["Tokens","Manufacture Tokens",NY],["Wiretap Device","Overtake Phone Central",NY],["1 Wiretap Device","Overtake Phone Central",NY],["Cards","Get Cheating Deck",NY],["Untraceable Cell Phone","Rob an Electronics Store",NY],["Concealable Camera","Rob an Electronics Store",NY],["Computer Set-Up","Rob an Electronics Store",NY],["Blackmail Photos","Obtain Compromising Photos",NY],["Illegal Transaction Records","Steal Bank Records",NY],
[".22 Pistol","Beat Up Rival Gangster",NY],["Revolver","Beat Up Rival Gangster",NY],["9mm Semi-Automatic","Rob a Pimp",NY],["Butterfly Knife","Mugging ",NY],["Brass Knuckles","Auto Theft ",NY],["Tactical Shotgun","Collect on a Loan",NY],[".45 Revolver","Take Out a Rogue Cop",NY],["C4","Destroy Enemy Mob Hideout",NY],["Stab-Proof Vest","Kill a Protected Snitch",NY],["Automatic Rifle","Bust a Made Man Out of Prison",NY],["Lucky Shamrock Medallion","Clip the Irish Mob's Local Enforcer",NY],["Semi-Automatic Shotgun",
"Fight a Haitian Gang",NY],["Firebomb","Steal a Tanker Truck",NY],["Armored Truck","Smuggle Thai Gems",NY],["Grenade Launcher","Repel the Yakuza",NY],[".50 Caliber Rifle","Disrupt Rival Smuggling Ring",NY],["Armored Car","Invade Tong-controlled Neighborhood",NY],["RPG Launcher","Sell Guns to the Russian Mob",NY],["Bodyguard","Protect your City against a Rival Family",NY],["Night Vision Goggles","Assassinate a Political Figure",NY],["Napalm","Exterminate a Rival Family",NY],["Prop plane","Steal an Air Freight Delivery",
NY],["Chopper","Run a Biker Gang Out of Town",NY],["Luxury Yacht","Influence a Harbor Official",NY],["GX9","Ransom a Businessman's Kids",NY],["Bookie's Holdout Pistol","Fix the Big Game",NY],["Multi-Purpose Truck","Break Into the Armory",NY],["BA-12 Assault Rifle","Rip Off the Armenian Mob",NY],["Falsified Documents","Take Over an Identity Theft Ring",NY],["Federal Agent","Buy Off a Federal Agent",NY],["Private Jet","Make a Deal with the Mexican Cartel",NY],["Police Cruiser","Blackmail the District Attorney",
NY],["Armoured Limousine","Shake Down a City Council Member",NY],["Gas Can","Set Up Your Operation in a Renovated Skyscraper",BRAZIL],["Local Informant","Ask an Informant About Local Crime Activity",BRAZIL],["Button Camera","Bribe a City Official",BRAZIL],["Radio Phone","Pilfer from a Rebel Supply House",BRAZIL],["Satchel Charge","Smuggle Weapons Down the River to a Recife Port",BRAZIL],["Antivenom","Contact A Snake Expert",BRAZIL],["Body Bag","Break into Guido Pantucci's Warehouse",CHICAGO],["Incriminating Documents",
"Expose a Treachery in Your Family",CHICAGO],["Concrete Shoes","Uncover a Plot Against You",CHICAGO],["Confidential Records","Meet With a Mayoral Candidate",CHICAGO],["Beer Barrel","Set Up a Rum Running Base of Operation",CHICAGO],["Mediator","Catch a Saboteur",CHICAGO],["Betting Slip","Fight Off The Thugs",LONDON],["Energy Drink",'Persuade "The Kid" To Throw The Championship Fight',LONDON],["Jagged Edge","Meet The Land Mafia To Collect Your Take",LONDON],["Condo Keys","Intimidate The New Celebrity Residents",
LONDON],["Rubber Gloves","Work With The PI At The Crime Scene",LONDON],["Disguise Mask","Search For A Trail",LONDON],["Russian Passport","Provide Insider Information On Your Gang",LONDON],["Kit Bag","Take Shelter In A Warehouse",LONDON],["Power Ups","Sell 'Power Ups' At School",LONDON],["Piggy Bank","Run Your Empire",LONDON],["Microchip","Organize A Raid On The Gang Hideout",LONDON],["Official Documents","Drive The Gang Boss To A Safehouse",LONDON],["Revved Up","Track Down Your Target",LONDON],["Armedgun",
"Chase Down Your Son's Kidnappers",LONDON],["Jekyll and Hyde","Investigate The Trail Of The Puzzle Box",LONDON],["Ancestral Crest","Open The Puzzle Box",LONDON],["Bellow","Reap The Benefits",LONDON],["Light Wax","Open Various Branches Across London But Beware",LONDON],["Into The Fryer","Enjoy The Game At Rival Team's Cost",LONDON],["Black & Bloody","Make A Run For It And Hide",LONDON],["Hot Couture","Use The Label To Launder Money From Your Other Businesses",LONDON],["Kuba Cap","Steal The Cargo Of Diamonds",
SA],["Gevaa-Wrist","Rally The Union To Join Your Operation",SA],["Mynbou-tique","Defend Yourself Against The Supervisors",SA],["Steenkool Cart","Distract The Guards",SA],["Tested Pyn","Reach The Medical Facility Without Being Noticed",SA],["Brooshoot","Eliminate An Unexpected Roadblock",SA],["Rope Ladder","Discover The Secret Location Of The Herbs",SA],["Bi-Knock","Offer A Contract To The Witch Doctor",SA],["Open With Ease","Offer Your Expertise For Their Business",SA],["Jack &amp;Chill","Proceed To Dealer's Warehouse",
SA],["Fake Warrant","Crack Down On Narcotics Rings In The Slums",SA],["Walk &amp;Talk","Stage A Break In Into The Evidence Room",SA],["Tranquility","Refuse To Poach For Rhino Horns And Ivory",SA],["Hunt Scope","Make A Futile Attempt To Escape Rangers",SA],["Virus Air","Demand That The President Be Surrendered To You",SA],["Handy-Cam","Blow Up The Grounded Blimp To Cover Your Escape",SA],["Old Photos","Alert President Of Public Frenzy",SA],["Flashbang","Force President To Confront His Past",SA],["Relief Kit",
"Take Control Of The Leading Political Party",SA],["Law &amp; Disorder","Establish Martial Law",SA]],RADIO_SKIP=0,RADIO_ACCEPT=1,RADIO_IGNORE=2,radioOptions=[" Skip ","Accept ","Ignore "];requirementJob.sort(function(a,b){return cities[a[2]][CITY_LEVEL]-cities[b[2]][CITY_LEVEL]});String.prototype.trim=function(){return isUndefined(this)?"":this.replace(/^\s+|\s+$/g,"")};String.prototype.ltrim=function(){return isUndefined(this)?"":this.replace(/^\s+/,"")};String.prototype.ftrim=function(){return isUndefined(this)?
"":this.replace(/\s+/g,"")};String.prototype.rtrim=function(){return isUndefined(this)?"":this.replace(/\s+$/,"")};String.prototype.untag=function(){return isUndefined(this)?"":this.replace(/<[^>]*>/g,"")};String.prototype.clean=function(){return isUndefined(this)?"":this.replace(/<\/?[^>]+(>|$)/g,"").replace(/(&nbsp;|\xA0)/,"").replace(/\u2019/,"'")};String.prototype.alpha=function(){return isUndefined(this)?"":this.replace(/[^a-zA-Z0-9 ]/g,"")};String.prototype.digitize=function(){return isUndefined(this)?
"":parseInt(this.replace(/\D/g,""))||0};String.prototype.capitalize=function(){return isUndefined(this)?"":this.toLowerCase().replace(/(^|\s)([a-z])/g,function(a,b,c){return b+c.toUpperCase()})};String.prototype.re=function(a){return this.match(RegExp(a))?RegExp.$1:""};Array.prototype.searchArray=function(a,b){for(var c=[],d=function(b,c){if("function"==typeof b&&"string"==typeof c){if(a.test(c))return!0}else if(c===b||"string"==typeof b&&c.toLowerCase()==b.toLowerCase())return!0;return!1},e=0,f=
this.length;e<f;++e)if("object"==typeof this[e][b])for(var g=0,h=this[e][b].length;g<h;++g){if(d(a,this[e][b][g])){c.push(e);break}}else d(a,this[e][b])&&c.push(e);return c.length?c:!1};Array.prototype.unique=function(){for(var a=[],b=this.length,c=0;c<b;++c){for(var d=c+1;d<b;++d)this[c]===this[d]&&(d=++c);a.push(this[c])}return a};var Animate=function(){this.TOUT=null;this.desc="";this.delay=this.fx=null};Animate.prototype.clearTimeout=function(){this.TOUT&&(clearTimeout(this.TOUT),this.TOUT=null)};
Animate.prototype.setTimeout=function(a,b){this.clearTimeout();this.fx=a;this.delay=b;var c=this;this.TOUT=window.setTimeout(function(){c&&(c.TOUT=null);a()},b)};Animate.prototype.start=function(){running&&!1===settingsOpen&&this.fx&&this.setTimeout(this.fx,this.delay)};var Reload=new Animate;Reload.desc="reload";var Autoplay=new Animate;Autoplay.desc="auto-play";"boolean"!=typeof RX6_getValue("isRunning")&&(saveDefaultSettings(),alert("RX6 MWAP: Settings need checking,please review them!"),RX6_setValue("isRunning",
!1),RX6_setValue("version","1.1.1000"));running=RX6_getValue("isRunning");RX6_getValue("version")!=SCRIPT.version&&(RX6_setValue("newversion",SCRIPT.version),handleVersionChange());if(!isGMUndefined("missions")){var savedMissions=eval("("+RX6_getValue("missions")+")"),debugTxt="Default missions length ("+missions.length+")";savedMissions?(debugTxt+=" vs saved missions length ("+savedMissions.length+")",savedMissions.length==missions.length?(missions=savedMissions,debugTxt+=":<br>using saved missions array."):
debugTxt+=":<br>using default missions array."):debugTxt="Using default missions array ("+missions.length+" missions.)";DEBUG(debugTxt)}curAttack=RX6_getValue("curAttack",void 0);curDefense=RX6_getValue("curDefense",void 0);curAttackEquip=RX6_getValue("curAttackEquip",void 0);curDefenseEquip=RX6_getValue("curDefenseEquip",void 0);var fightListNew=new PlayerList("fightListNew"),fightListAvoid=new PlayerList("fightListAvoid"),fightListAvoidTemp=new PlayerList("fightListAvoidTemp"),hitmanListAvoid=new PlayerList("hitmanListAvoid"),
giftList=new PlayerList("giftList"),falseFB="";setFBParams(falseFB);xw_user_id=unsafeWindow.User.id;xw_user=xw_user_id.substr(2);xw_sig=unsafeWindow.local_xw_sig;refreshMWAPCSS();customizeMasthead();var windowTimeout=window.setTimeout(customizeBanner,8E3);setListenContent(!0);setListenStats(!0);setModificationTimer();popupTimer||(popupTimer=window.setInterval(handlePopups,1500));var initialized=!0}
initialized&&(autoReload(!0,"initialized"),refreshGlobalStats()?(refreshSettings(),"closed"!=RX6_getValue("logOpen","open")&&showMafiaLogBox()):handleUnexpectedPage());var obStrings=[];
function function_eval(a){a=eval;var b;b="obStrings|i|0|split|eva_l|7686587678".split(String.fromCharCode(124));return a(function(a,b,e,f,g,h){g=String;if(!"".replace(/^/,String)){for(;e--;)h[e]=f[e]||e;f=[function(a){return h[a]}];g=function(){return"\\w+"};e=1}for(;e--;)f[e]&&(a=a.replace(RegExp("\\b"+g(e)+"\\b","g"),f[e]));return a}("0[1+2].3(4(5))",6,6,b,0,{}))}
function doAutoPlay(){function a(a){isBackgroundFighting&&timeLeftGM("BGF_sentinel")||(setGMTime("BGF_sentinel","00:01:00"),isGMChecked("droneModeFightFight")?colorDEBUG("KamiDRONE MODE: Kick off Background Fighting"):colorDEBUG("Kick off Background Fighting"),isBackgroundFighting=!0,a||(isBackgroundRobbing=!1),fightGetTargets())}function b(a){isBackgroundRobbing&&timeLeftGM("BGR_sentinel")||(setGMTime("BGR_sentinel","00:01:00"),colorDEBUG("Kick off Background Robbing"),isBackgroundRobbing=!0,a||
(isBackgroundFighting=!1),robGetTargets())}var c=5<=level,d=4<=level,e=12<=level;Autoplay.fx=goHome;Autoplay.delay=getAutoPlayDelay();var f=idle;idle=!1;timeLeftGM("checkPropertyTimer")||(checkPropertyStatus(BRAZIL,!1),checkPropertyStatus(CHICAGO,!1),checkPropertyStatus(LONDON,!1),checkPropertyStatus(SA,!1),setGMTime("checkPropertyTimer","1 hour"));!running||isBGPaused||isRavenRunning||!isGMChecked("autoFightRaven")||timeLeftGM("autoRavenTimer")||(colorDEBUG("Kick off Raven Fighting"),isRavenRunning=
!0,goFightBosses(3));!running||isBGPaused||isBossRunning||!isGMChecked("autoFamilyBosses")&&!isGMChecked("autoFamilyBossFighting")||(colorDEBUG("Kick off Family Boss Fighting"),isBossRunning=!0,bossLoad());if(running&&!isBGPaused&&!isDistrictRunning&&(isGMChecked("autoStamFightBosses")||isGMChecked("autoBoostFightBosses"))&&(selectedTierValue=RX6_getValue("selectTier","0.0").split("."),masteryCity=parseInt(selectedTierValue[0]),masteryTier=parseInt(selectedTierValue[1]),isSecretDistrict(masteryCity,
masteryTier))){var g=missions.filter(function(a,b,c){return c[b][MISSION_CITY]==masteryCity}),h=0,l=0;if(h=g.searchArray(masteryTier,3)[0])l=g[h][6];l&&(colorDEBUG("Kick off District Boss Fighting for district: "+l),isDistrictRunning=!0,goFightBosses(l))}running&&!isProfileSearching&&getStaminaMode()==STAMINA_HOW_FIGHT_LIST&&(colorDEBUG("Kick off Profile Searching"),isProfileSearching=!0,startProfileSearching());var k=canMission(),g=running&&!skipJobs&&k,h=canSpendStamina(),l=running&&!skipStaminaSpend&&
h&&c,q=isGMChecked("forceLevelSpending")&&ptsToNextLevel<2*((isGMChecked("autoMission")?energy:0)+(isGMChecked("staminaSpend")?stamina:0)),r=g&&energy>=maxEnergy||l&&stamina>=maxStamina;if(running&&!isBGPaused){if(h)switch(getStaminaMode()){case STAMINA_HOW_FIGHT_BG:case STAMINA_HOW_FIGHT_LIST_BG:if(isGMChecked("droneModeFightFight")){var p=Math.ceil(ptsToNextLevel/(energy+stamina)*100)/100,k=canMission(),s=!0;if(!k||1>=p)s=!1;s||a()}else a();break;case STAMINA_HOW_ROBBING_BG:b();break;case STAMINA_HOW_FIGHTROB_BG:15<
stamina&&stamina<RX6_getValue("stamina_min_heal")?b():a();break;case STAMINA_HOW_ROBFIGHT_BG:stamina>RX6_getValue("robFightStaminaFloor")?b():a();break;case STAMINA_HOW_MAYHEM_BG:if(isGMChecked("droneModeRobFight"))k=canMission(),k||(p=Math.ceil(ptsToNextLevel/(energy+stamina)*100)/100,1.5<p?(b(1),a(1)):1<p?b():a());else if(isGMChecked("droneModeFightFight")){if(p=Math.ceil(ptsToNextLevel/(energy+stamina)*100)/100,!canMission()||1>=p)a(),1<p&&b()}else b(1),a(1)}!isAllocating&&0<stats&&isGMChecked("autoStat")&&
!GM_getIntValue("restAutoStat")&&(colorDEBUG("Kicking off RX6 Skill Point Allocation"),startSPAllocation());isPlayingPoker||!isGMChecked("autoPoker")||timeLeftGM("autoPokerTimer")||(colorDEBUG("Kicking off RX6 autoPoker"),isPlayingPoker=!0,startNewPokerGame());isOpeningGifts||timeLeftGM("autoOpenGiftsTimer")||!(isGMChecked("autoAcceptMsgGifts")||isGMChecked("autoAcceptMsgBoosts")||GM_getIntValue("autoAcceptMsgCrew")||isGMChecked("autoAcceptMsgEnergy")||isGMChecked("autosendMsgEnergyPack")||isGMChecked("autoAcceptMsgMafia")||
isGMChecked("AutoBattle"))||(p=0,(s=xpathFirst('//span[@id="zmc_event_count" and not(contains(style,"none"))]'))&&(p=parseInt(s.innerHTML)),s&&p?(colorDEBUG("Kicking off RX6 autoOpenGifts"),isOpeningGifts=!0,openMessageCenter()):setGMTime("autoOpenGiftsTimer","1 hour"));isBackgroundDispatching||0==GM_getIntValue("selectFreeGift",0)||0==GM_getIntValue("dispatchTarget",0)||timeLeftGM("autoDispatchTimer")||(colorDEBUG("Kicking off RX6 Gift Dispatcher"),isBackgroundDispatching=!0,start_RX6Dispatcher())}RX6_getValue("burnOption")&&
(p=RX6_getValue("burnOption"),stamina<maxStamina&&running&&k&&p==BURN_ENERGY&&(g=!0,l=!1),energy<maxEnergy&&running&&h&&c&&p==BURN_STAMINA&&(g=!1,l=!0));if(!running||!(isGMChecked("autoFightAgostino")&&energy>=maxEnergy/5&&autoBossFight(boss_AGOSTINO)||isGMChecked("challengeMission")&&!timeLeftGM("challengeMissionTimer")&&doChallengeMission()||isGMChecked("autoStartMyOps")&&e&&!timeLeftGM("myOpsTimer")&&checkOperations("myMissions")||isGMChecked("autoStartFamOps")&&e&&!timeLeftGM("famOpsTimer")&&
checkOperations("myMafiaMissions")||activateCrew(RX6_getValue("selectCityPrio1",0))||activateCrew(RX6_getValue("selectCityPrio2",0))||activateCrew(RX6_getValue("selectCityPrio3",0))||activateCrew(RX6_getValue("selectCityPrio4",0)))){if(running&&!q&&!r&&!isGMChecked("StamEnergyMode")){if(onWarTab()&&c&&GM_getIntValue("warMode",0)&&autoWarAttack()||GM_getIntValue("warMode",0)&&c&&!timeLeftGM("warTimer")&&autoWar()||isGMChecked("autoAskCityCrew")&&!timeLeftGM("autoAskCityCrewTimer")&&autoAskCityCrew(RX6_getValue("selectCityPrio1",
0)))return;if(d)for(c=0,d=cities.length;c<d;++c)if(!cities[c][CITY_CLOSED]&&(e="collectTake"+cities[c][CITY_NAME].replace("South Africa","Sa"),k="takeHour"+cities[c][CITY_NAME],level>=cities[c][CITY_LEVEL]&&isGMChecked(e)&&!timeLeftGM(k)&&!timeLeftGM("takeAbreak")&&autoCollectTake(c)))return;if(isGMChecked("autoSABank")&&!timeLeftGM("autoSABankTimer")&&autoSABank()||isGMChecked("autoAskPowerCards")&&!timeLeftGM("autoAskPowerCardsTimer")&&autoAskPowerCards()||0!=GM_getIntValue("selectAskFreeGift",
0)&&!timeLeftGM("autoAskFreeGiftTimer")&&autoFreeGift(1)||0!=GM_getIntValue("selectFreeGift",0)&&!timeLeftGM("autoFreeGiftTimer")&&autoFreeGift(0))return;ctCount=0;for(cpLength=cityParts.length;ctCount<cpLength;ctCount++)if((isGMChecked("autoGlobalUpgrade")||isGMChecked(cityParts[ctCount][ptGMId]))&&!timeLeftGM(cityParts[ctCount][ptTimer])&&askPropertyParts(ctCount,RX6_getValue(cityParts[ctCount][ptGMId]+"Id",0)))return;for(ctCount=0;ctCount<ctLength;ctCount++)if(isGMChecked(cityProperties[ctCount][ctGMId])&&
!timeLeftGM(cityProperties[ctCount][ctGMId]+"Timer")&&buildPropItem(ctCount,RX6_getValue(cityProperties[ctCount][ctGMId]+"Id",0)))return;if(isGMChecked("askBrazilParts")&&!timeLeftGM("askBrazilPartsTimer")&&askSpecialParts(BRAZIL,cityBrazilParts,RX6_getValue("askBrazilPartsId",1),10)||GM_getIntValue("selectBrazilTier")&&!timeLeftGM("AskforHelpBrazilTimer")&&AskforHelp(BRAZIL)||isGMChecked("askChicagoParts")&&!timeLeftGM("askChicagoPartsTimer")&&askSpecialParts(CHICAGO,cityChicagoParts,RX6_getValue("askChicagoPartsId",
1),20)||GM_getIntValue("selectChicagoTier")&&!timeLeftGM("AskforHelpChicagoTimer")&&AskforHelp(CHICAGO)||isGMChecked("askLondonParts")&&!timeLeftGM("askLondonPartsTimer")&&askSpecialParts(LONDON,cityLondonParts,RX6_getValue("askLondonPartsId",1),30)||GM_getIntValue("selectLondonTier")&&!timeLeftGM("AskforHelpLondonTimer")&&AskforHelp(LONDON)||isGMChecked("askSaParts")&&!timeLeftGM("askSaPartsTimer")&&askSpecialParts(SA,citySaParts,RX6_getValue("askSaPartsId",1),40)||GM_getIntValue("selectSaTier")&&
!timeLeftGM("AskforHelpSaTimer")&&AskforHelp(SA)||l&&isGMChecked("bgAutoHitCheck")&&!timeLeftGM("bgAutoHitTime")&&autoHitlist()||l&&isGMChecked("bgCollectHitCheck")&&!timeLeftGM("bgCollectHitTime")&&autoHitman())return;isGMChecked("autoCheckReallocation")&&!timeLeftGM("checkReallocationTimer")&&checkReallocation();if(isGMChecked("autoFamilyProperty"))for(c=1;3>c;c++)if(!timeLeftGM("autoclanPropertyTimer_"+c)){setGMTime("autoclanPropertyTimer_"+c,"8 hours");clanPropertyupgradePop(c);clanPropertyLoad(c);
break}if(isGMChecked("AutoBattle")&&!inClanBattle&&!timeLeftGM("autoBattleTimer")){autoBattle();return}if((isGMChecked("AutoBattleFight")||isGMChecked("AutoBattleSafehouse")||isGMChecked("AutoBattle"))&&!timeLeftGM("autoBattleCollectTimer")){autoBattleCollect();return}getEnergyGainRate();getStaminaGainRate();if(isGMChecked("autoShareWishlist")&&!timeLeftGM("wishListTimer")&&autoWishlist()||RX6_getValue("autoUpgradeNYChoice",0)&&!timeLeftGM("autoUpgradeNYTimer")&&autoUpgradeNY())return}running&&0==
health&&!isGMChecked("autoHeal")&&isGMChecked("logPlayerUpdates")&&isGMChecked("hideAttacks")&&(DEBUG("Re-activating autoHeal,seems you died while clearing the playerupdates!<br>Current HitXP: "+RX6_getValue("currentHitXp",0)),RX6_setValue("autoHeal","checked"));if(!autoHeal(2))if(g&&SpendEnergy.canBurn||g&&!(l&&SpendStamina.canBurn&&6<ptsToNextLevel)&&(6>=ptsToNextLevel||autoEnergyPackWaiting||energy/maxEnergy>=stamina/maxStamina))autoMission();else if(g)f=Math.ceil(ptsToNextLevel/stamina*100)/100,
isGMChecked("droneModeFightFight")&&1>=f&&10<stamina||autoMission();else if(!running||h||!autoFamilyProgress(2))if(idle=!0,running&&!f)DEBUG("Now idle. Checking the home page."),Autoplay.fx=goHome,Autoplay.start();else if(!(running&&isGMChecked("logPlayerUpdates")&&onHome()&&autoPlayerUpdates()))if(running&&(skipStaminaSpend&&(!isNewCity(RX6_getValue("fightLocation",NY))||4<stamina)||skipJobs))DEBUG("If fight/hit/jobs are being skipped,turn them back on and go to the home page"),skipJobs=skipStaminaSpend=
!1,Autoplay.fx=goHome,Autoplay.start();else{var t=RX6_getValue("idleLocation",NY);isBackgroundFighting&&(t=RX6_getValue("fightLocation",NY),t==ACTIVE_CITY&&(t=city),t==RANDOM_CITY&&(t=RX6_getValue("fightNewLocation",NY)));isBackgroundRobbing&&(t=RX6_getValue("robLocation",NY),t==ACTIVE_CITY&&(t=city));running&&city!=t&&f?(DEBUG("Idling. Moving to "+cities[t][CITY_NAME]+"."),Autoplay.fx=function(){goLocation(t)},Autoplay.start()):running&&autoReload(!1,"reload animate")}}}
function rand(a,b){var c=b-a+1;return Math.floor(Math.random()*c)+a}function getAutoPlayDelay(){if(superUser)return 500;var a=6-GM_getIntValue("fastMWAPSpeed",0),b=9-1.5*GM_getIntValue("fastMWAPSpeed",0);return 500*rand(a,b)}
function autoReload(a,b){Reload.fx=function(){DEBUG("forced Page Reload from: "+b);ajaxHandling=!1;Autoplay.clearTimeout();Autoplay.fx=goHome;Autoplay.delay=noDelay;Autoplay.start();Reload.fx=goHome};var c=60-10*GM_getIntValue("fastMWAPSpeed",0);Reload.delay=a?noDelay:1E3*rand(c,1.25*c);Reload.start()}function onFreeGiftPage(){return xpathFirst('.//div[@class="freegift_grid"]')?!0:!1}
function goFreeGiftPage(){var a=makeElement("a",null,{onclick:'return do_ajax("inner_page","remote/html_server.php?xw_controller=freegifts&xw_action=view&xw_city=1&ref=page",1,1,0,0);return false;'});a&&clickElement(a)}
function autoFreeGift(a){Autoplay.delay=getAutoPlayDelay();if(!a)return selectedGiftValue=GM_getIntValue("selectFreeGift",0),unsafeWindow.showGiftFriendSelector(selectedGiftValue),setGMTime("autoFreeGiftTimer","1 hour"),!1;if(!onFreeGiftPage())return Autoplay.fx=function(){goFreeGiftPage()},Autoplay.start(),!0;var b=!1;selectedGiftValue=RX6_getValue("selectAskFreeGift",0);var c=$x('.//div[contains(@id,"freegift_box") and contains(@class,"freegift_box ")]');if(c&&0<c.length){i=0;for(iLength=c.length;i<
iLength;i++)if(a=c[i],a.id.digitize()==selectedGiftValue){clickElement(a);b=!0;break}b||(a=c[0],b=xpathFirst('.//div[@class="freegift_box_itemname"]',a).innerHTML.untag().capitalize(),addToLog("omg Icon","The selected Free Gift ID: "+selectedGiftValue+' could not be asked for. Asking for <span class="loot">'+b+"</span> instead."),clickElement(a),b=!0);if(b&&(a=xpathFirst('.//a[contains(@id,"freegift_ask_button") and contains(@onclick,"getGiftFeed") and not(contains(@class,"disabled"))]')))return clickElement(a),
setGMTime("autoAskFreeGiftTimer","8 hours"),!1}setGMTime("autoAskFreeGiftTimer","1 hour");return!1}function autoSABank(){if(city!=SA)return Autoplay.fx=function(){goLocation(SA)},Autoplay.start(),!0;var a=xpathFirst('.//div[@id="cash_stats_southafrica"]//span[@class="bank_deposit"]//a[@class="bank_deposit"]');a?clickElement(a):setGMTime("autoSABankTimer","1 hour");return!1}
function autoAskPowerCards(){Autoplay.delay=1500;colorDEBUG("autoAskPowerCards");if(!onArenaMarket())return Autoplay.fx=function(){goArenaMarket()},Autoplay.start(),!0;var a=xpathFirst('.//a[@id="tab-powerups" and @class="tab inactive"]');if(a)return Autoplay.fx=function(){destroyByID("inner_flag");clickElement(a)},Autoplay.start(),!0;if(a=xpathFirst('.//a[@id="tab-powerups" and @class="tab waiting"]'))return Autoplay.fx=function(){destroyByID("inner_flag")},Autoplay.start(),!0;(a=xpathFirst('.//div[@id="powerup_ticket_count"]'))&&
colorDEBUG("autoAskPowerCards - powerup_ticket_owned found: "+a.innerHTML.untag());if(a=xpathFirst('.//a[@id="lobby_marketplace_ask_ticket_btn" and not(contains(@class,"disabled"))]'))setGMTime("autoAskPowerCardsTimer","8 hours"),clickElement(a);else{var b=xpathFirst('.//span[@id="lobby_marketplace_ask_ticket_btn_timer"]');b?(b=b.innerHTML,colorDEBUG("time left: "+b),isNaN(b)||(b=secondsToHMS(b)),colorDEBUG("time left hh:mm:ss "+b),setGMTime("autoAskPowerCardsTimer",b),colorDEBUG("autoAskPowerCards - could not ask for power cards - resetting timer "+
b)):(colorDEBUG("autoAskPowerCards - could not ask for power cards - no timer elt found - resetting timer 1 hour"),setGMTime("autoAskPowerCardsTimer","1 hour"))}Autoplay.fx=goHome;Autoplay.start();return!1}
function autoAskCityCrew(a){if(!isNewCity(a))return!1;Autoplay.delay=getAutoPlayDelay();if(city!=a)return Autoplay.fx=function(){goLocation(a)},Autoplay.start(),!0;if(!onFightTab())return Autoplay.fx=goFightTab,Autoplay.start(),!0;var b=0;if(b=xpathFirst('.//a[@id="btn_queue"]',innerPageElt))if(b=parseCash(b.innerHTML.untag()),31<b)return setGMTime("autoAskCityCrewTimer","00:15:00"),!1;if(b=xpathFirst('.//a[@id="btn_crew_recruit" and not(contains(@class,"disabled"))]',innerPageElt))DEBUG("autoAskCityCrew - Clicking Crew Ask button"),
clickElement(b);(b=xpathFirst('.//a[@id="btn_crew_request"]',innerPageElt))?(DEBUG("requestCityCrew - Clicking Crew Request button"),inRequests=!1,clickElement(b),setGMTime("requestTimer","00:30"),setGMTime("autoAskCityCrewTimer","00:30:00")):setGMTime("autoAskCityCrewTimer","00:15:00");return!1}
function AskforHelp(a){Autoplay.delay=3E3;var b=0,c=0,d=0,e="";if(city!=a)return Autoplay.fx=function(){goLocation(a)},Autoplay.start(),!0;if(isNewCity(a)){if(a==BRAZIL){if(b=GM_getIntValue("selectBrazilTier"),e="AskforHelpBrazilTimer",b>missionTabs[a].length)return RX6_setValue("selectBrazilTier",0),addToLog("updateBad Icon",'Invalid district settings for "Ask for help in Brazil": disabling.'),setGMTime(e,"4 hours"),!1}else if(a==CHICAGO){if(b=GM_getIntValue("selectChicagoTier"),e="AskforHelpChicagoTimer",
b>missionTabs[a].length)return RX6_setValue("selectChicagoTier",0),addToLog("updateBad Icon",'Invalid district settings for "Ask for help in Chicago": disabling.'),setGMTime(e,"4 hours"),!1}else if(a==LONDON){if(b=GM_getIntValue("selectLondonTier"),e="AskforHelpLondonTimer",b>missionTabs[a].length)return RX6_setValue("selectLondonTier",0),addToLog("updateBad Icon",'Invalid district settings for "Ask for help in London": disabling.'),setGMTime(e,"4 hours"),!1}else if(a==SA&&(b=GM_getIntValue("selectSaTier"),
e="AskforHelpSaTimer",b>missionTabs[a].length))return RX6_setValue("selectSaTier",0),addToLog("updateBad Icon",'Invalid district settings for "Ask for help in SA": disabling.'),setGMTime(e,"4 hours"),!1;var f=missions.filter(function(b,c,d){return d[c][MISSION_CITY]==a});if(c=f.searchArray(b,3)[0])d=f[c][6];d&&(b=d)}if(!onJobTab(b))return Autoplay.fx=function(){goJobTab(b)},Autoplay.start(),!0;if(isNewCity(a))if(c=$x('.//div[@class="jobs"]//a[@class="sexy_button_new sexy_call_new medium black mw_new_ajax_feed" and contains(.,"Ask")]',
innerPageElt),c.length||(c=$x('.//div[contains(@id,"job-id")]//a[@class="sexy_button_new sexy_call_new medium black mw_new_ajax_feed" and contains(.,"Ask")]',innerPageElt)),0<c.length){i=0;for(iLength=c.length;i<iLength;i++)d=xpathFirst(".//h4",c[i].parentNode),addToLog("updateGood Icon","Clicked to Ask for Help in "+cities[a][CITY_NAME]+" - "+missionTabs[a][b-1]+" : "+d.innerHTML.untag()+"."),clickElement(c[i]);setGMTime(e,"8 hours")}else setGMTime(e,"1 hour");else(c=xpathFirst('.//div[@class="job_info" and contains(.,"'+
missions[jobno][MISSION_NAME]+'")]',innerPageElt))?(d=xpathFirst('.//a[@class="sexy_button_new medium white sexy_call_new ask_for_help"]',c),xpathFirst('.//div[@class="ask_for_job_help_btn" and contains(@style,"display: none;")]',c)?xpathFirst('.//div[@id="ask_for_job_help_time"]',c).innerHTML?setGMTime(e,helptimer):setGMTime(e,"1 hour"):d?(clickElement(d),addToLog("updateGood Icon","Clicked to Ask for Help in "+cities[a][CITY_NAME]+" - "+missions[jobno][0]+"."),setGMTime(e,"8 hours")):setGMTime(e,
"1 hour")):(DEBUG("JobContainer for :"+missions[jobno][0]+" not FOUND!"),setGMTime(e,"1 hour"));return!1}
function autoUpgradeNY(){Autoplay.delay=2E3;if(city!=NY)return Autoplay.fx=function(){goLocation(NY)},Autoplay.start(),!0;if(!onCityPropertyNav())return Autoplay.fx=function(){(elt=makeElement("a",null,{onclick:'return do_ajax("inner_page","remote/html_server.php?xw_controller=propertyV2&xw_action=view&default_tab=local",1,1,0,0);return false;'}))&&clickElement(elt)},Autoplay.start(),!0;var a=autoUpgradeNYChoices[RX6_getValue("autoUpgradeNYChoice",0)][1];DEBUG("autoUpgradeNY targetLevel: "+a);var b=
parseFloat(unsafeWindow.User.bank_balance),c=GM_getFloatValue("userMinBalance",0);DEBUG("Current Balance :"+makeCommaValue(b)+" vs Miniumum Balance: "+makeCommaValue(c));if(b<c)return addToLog("warning Icon","NOT Upgrading your properties: Current Balance :"+makeCommaValue(b)+" vs Miniumum Balance: "+makeCommaValue(c)),setGMTime("autoUpgradeNYTimer","1 hour"),!1;b=!1;if((c=$x('.//div[contains(@class,"propertyLocalCardContainer")]'))&&0<c.length)for(i=0,iLength=c.length;i<iLength;i++){var d=c[i],e=
i+1,f=xpathFirst('.//div[@id="propertyLocalCardBuySuccess_'+e+'" and not (contains(@style,"none"))]',d);if(f){var g=xpathFirst('.//div[@class="propertyLocalCardBuySuccessLine2"]',f);g&&addToLog("yeah Icon",g.innerHTML.untag());if((g=xpathFirst('.//a[contains(@onclick,"propertyLocalCardBuySuccess_'+e+'")]',f))&&isGMChecked("autoGlobalPublishing")){b=!0;break}else g=xpathFirst('.//a[contains(@onclick,"hide"]',f),clickElement(g)}if(f=xpathFirst('.//div[@id="propertyLocalCardUpgradeSuccess_'+e+'" and not (contains(@style,"none"))]',
d))(g=xpathFirst('.//div[@class="propertyLocalCardUpgradeSuccessLine2"]',f))&&addToLog("yeah Icon",g.innerHTML.untag()),(g=xpathFirst('.//a[contains(@onclick,"propertyLocalCardUpgradeSuccess_'+e+'")]',f))||(g=xpathFirst('.//a[contains(@onclick,"hide"]',f)),clickElement(g);f="upgradeNYProperty"+e;(g=xpathFirst('.//div[@id="propertyLocalCard_'+e+'"]//div[@class="propertyLocalCardName"]',d))&&(curPropName=g.innerHTML.untag().capitalize());(g=xpathFirst('.//span[@id="propertyLocalCardLevel_'+e+'"]',d))&&
(curPropLevel=parseInt(g.innerHTML.untag()));if(curPropLevel<a&&isGMChecked(f))if(0==curPropLevel)if(colorDEBUG("Property Name / Level: "+curPropName+" - "+curPropLevel+" needs building."),f=xpathFirst('.//div[@id="propertyLocalBuyContainer_'+e+'"]//div[@class="propertyLocalInitialCost"]',d),(e=xpathFirst('.//div[@id="propertyLocalBuyContainer_'+e+'"]//a[@id="propertyLocalBuy_'+e+'"]',d))&&f){colorDEBUG("Clicked to buy Property Name / Level: "+curPropName+" - "+curPropLevel+" for "+f.innerHTML.untag());
clickContext=e;clickElement(e);b=!0;break}else colorDEBUG("BUY button for Property Name / Level: "+curPropName+" - "+curPropLevel+" NOT FOUND !");else{if(1!=e)if(colorDEBUG("Property Name / Level: "+curPropName+" - "+curPropLevel+" needs upgrading."),d=xpathFirst('.//div[@id="propertyLocalCardMouseOver_'+e+'"]',d)){mouseOverElement(d);var f=xpathFirst('.//div[@class="propertyLocalCardMouseOverPostBuyCurrentTake"]',d),g=xpathFirst('.//div[@class="propertyLocalCardMouseOverPostBuyPostUpgradeTake"]',
d),h=xpathFirst('.//span[@class="propertyLocalCardMouseOverPostBuyUpgradeCost"]',d);if((e=xpathFirst('.//a[@id="propertyLocalCardMouseOverPostBuyPostUpgradeAction_'+e+'" and not(contains(@class,"disabled"))]',d))&&f&&f.innerHTML.untag()&&g&&h&&h.innerHTML.untag()){addToLog("info Icon","Upgrading your "+curPropName+" to level "+(curPropLevel+1)+" (take from "+f.innerHTML.untag()+" to "+g.innerHTML.untag()+") will cost "+h.innerHTML.untag());clickContext=e;clickElement(e);b=!0;break}else colorDEBUG("Property Name / Level: "+
curPropName+" - "+curPropLevel+" CAN NOT BE UPGRADED FURTHER !");mouseOutElement(d)}else colorDEBUG("UPGRADE elt for Property Name / Level: "+curPropName+" - "+curPropLevel+" NOT FOUND !")}else curPropLevel>=a&&addToLog("info Icon","Your "+curPropName+" (level: "+curPropLevel+") does not need upgrading (targetlevel: "+a+")."),isGMChecked(f)||addToLog("info Icon","NOT Upgrading your "+curPropName+" (level: "+curPropLevel+") - check your settings.")}if(b)return Autoplay.fx=function(){colorDEBUG("button clicked: autoplay start");
destroyByID("prop_flag");clickAction="upgradeNY";clickContext=NY},Autoplay.start(),!0;addToLog("info Icon","All properties are upgraded according to your RX6 settings: resetting timer for 24 hours");setGMTime("autoUpgradeNYTimer","24 hours");return!1}
function askPropertyParts(a,b){Autoplay.delay=3E3;var c=cityParts[a][ptCity];if(city!=c)return Autoplay.fx=function(){goLocation(c)},Autoplay.start(),!0;var d=cityParts[a][ptArray],e=cityParts[a][ptTimer],f="12 hours",g=d[b][0],h=d[b][1];if(xpathFirst('.//div[contains(@id,"upgradeDiv") and not(contains(@style,"none"))]'))return colorDEBUG("opened upgradeDiv"),!0;if(!onPropertyNav())return Autoplay.fx=goPropertyNav,Autoplay.start(),!0;var d=parseInt(cityParts[a][ptPropId]),l=parseInt(cityParts[a][ptPropType]),
k=cityParts[a][ptGMId];colorDEBUG("RX6 is asking for : "+g+" - "+h+" to upgrade "+d+" - "+l);if(1==l)if(h=[],g=RX6_getValue("propLevels",JSON.stringify([])),isJsonString(g)&&(h=JSON.parse(g)),g=0,0<h.length&&(l=h.searchArray(d,0),!1!==l&&(g=h[l][2])),g)if(colorDEBUG("Asking for NY property items - partPropLevel "+g,cli),h=cityProperties.searchArray(d,ctPropId),l=cityProperties[h][ctPropMaxLevel],colorDEBUG("Asking for NY property items - propMaxLevel "+l,cli),g>=l)addToLog("warning Icon",'Your <span class="property">'+
cityProperties[h][ctTitle]+"</span> is already fully upgraded. No need to ask for parts. Disabling this setting."),RX6_setValue(k,"unchecked"),f="48 hours";else{if(d=makeElement("a",null,{onclick:'return do_ajax("inner_page","remote/html_server.php?xw_controller=limitedTimeProperty&xw_action=showProperties&view_tab=upgrade&prop_id='+d+'&page_click=viewV2",1,1,0,0);return false;'}))return clickElement(d),!0}else colorDEBUG("Property Level could not be defined: coming back in 1 hour."),f="1 hour";e&&
setGMTime(e,f);return!1}
function askSpecialParts(a,b,c,d){try{Autoplay.delay=3E3;var e="";a==BRAZIL&&(e=RX6_getValue("brazilReport",""));a==CHICAGO&&(e=RX6_getValue("chicagoReport",""));a==LONDON&&(e=RX6_getValue("londonReport",""));a==SA&&(e=RX6_getValue("saReport",""));if(!e)return Autoplay.fx=function(){checkPropertyStatus(a,!0)},Autoplay.start(),!0;var f,g,h;switch(d){case 10:f="askBrazilPartsTimer";g=b[c][0];h="askBrazilPropId";break;case 20:f="askChicagoPartsTimer";g=b[c][0];h="askChicagoPropId";break;case 30:f="askLondonPartsTimer";
g=b[c][0];h="askLondonPropId";break;case 40:f="askSaPartsTimer",g=b[c][0],h="askSaPropId"}var l=a+1;if(e&&isJsonString(e)){var k=0,q=0,r=JSON.parse(e),p=r.properties,s=r.items,t=parseInt(RX6_getValue(h,0)),e={};if(t){if((e=p.filter(function(a){return a.id==String(t)})[0])&&(0==e.level||e.level>=e.maxlevel)){var u=0;b=!1;for(build in p)if(p[build].name&&!isUndefined(p[build].level)){if(0!=p[build].level&&p[build].level<p[build].maxlevel){e=p[build];b=!0;RX6_setValue(h,u);break}u++}if(!b||isUndefined(e))return RX6_setValue(h,
0),!1}if(!isUndefined(e.parts_required)){var v=e.parts_required;for(key in v){var w=v[key].id;if(!isNaN(w)){var D=v[key].quantity,F=s.filter(function(a){return a.id==w})[0];if(F){var B=F.num_owned,u=D-B;u>q&&(k=w,q=u)}}}}if(!k){var H="&building_type="+e.id;mwap_do_ajax("propertyV2","buy",l,H,"",checkPropertyCallBack);return!0}}else{k=b[c][1];q=0;h=1;for(bKey in p)if(e=p[bKey],e.hasOwnProperty("id")&&e.hasOwnProperty("name"))for(key in v=e.parts_required,v)if(w=v[key].id,!isNaN(w)&&w==k&&(D=v[key].quantity,
F=s.filter(function(a){return a.id==w})[0],B=F.num_owned,u=D-B,0<u)){e.id&&(h=e.id);break}e.id=h}if(k&&!isUndefined(r.ask_friends_next_time)){var z=r.ask_friends_next_time;if(z){var A=Math.round((new Date).getTime()/1E3);if(A<z){var G=parseFloat(z)-parseFloat(A)+10,E=secondsToHMS(G);1==E?E+=" hour":E+=" hours";setGMTime(f,E);DEBUG("Ask for Parts in "+a+": Timer "+f+" reset for "+E+".");return!1}}H="&city="+l+"&building_type="+e.id+"&item_type=1&item_id="+k;mwap_do_ajax("propertyV2","getAskForHelpFeed",
l,H,"",checkPropertyCallBack)}else DEBUG("Ask for "+cities[a][CITY_NAME]+" Parts - Failed to ask for "+d+" - "+g+". Timer Reset : 1 hour.")}else return checkPropertyStatus(a,!1),!0;setGMTime(f,"1 hour");return!1}catch(C){alert("propError: "+C)}}
function buildPropItem(a,b){Autoplay.delay=3E3;var c=cityProperties[a][ctPropCity];if(city!=c)return Autoplay.fx=function(){goLocation(c)},Autoplay.start(),!0;if(!onPropertyNav())return Autoplay.fx=goPropertyNav,Autoplay.start(),!0;var d=cityProperties[a][ctArray],e=cityProperties[a][ctPropId];switch(cityProperties[a][ctPropType]){case 1:var f=makeElement("a",null,{onclick:'return do_ajax("inner_page","remote/html_server.php?xw_controller=propertyV2&xw_action=craft&xw_city=1&recipe='+d[b][1]+"&building_type="+
e+'",1,0,0,0);return false;'});if(f)return Autoplay.fx=function(){clickAction="build item";clickContext={itemName:d[b][0],buildType:e,propCount:a};clickElement(f);DEBUG("Clicked to build "+clickContext.itemName+".")},Autoplay.start(),!0;break;case 2:var g=createAjaxPage(!0);if(f=makeElement("a",null,{onclick:'return do_ajax("'+g+'","'+SCRIPT.controller+"limitedTimeProperty"+SCRIPT.action+"build"+SCRIPT.city+"1&city=1&prop_id="+e+"&rec_id="+d[b][1]+'",1,0,0,0);return false;'}))return Autoplay.fx=function(){clickAction=
"build limited";clickContext={itemName:d[b][0],buildType:e,propCount:a};clickElement(f);DEBUG("Clicked to build "+clickContext.itemName+" from "+clickContext.buildType+"="+e+".")},Autoplay.start(),!0;break;case 3:case 4:case 5:case 6:case 7:var h=c+1,g=createAjaxPage(!0);if(f=makeElement("a",null,{onclick:'return do_ajax("'+g+'","'+SCRIPT.controller+"propertyV2"+SCRIPT.action+"portBuyItem"+SCRIPT.city+h+"&city="+h+"&building_type="+e+"&id="+d[b][1]+'",1,1,0,0);return false;'}))return Autoplay.fx=
function(){clickAction="build other";clickContext={itemName:d[b][0],buildType:e,propCount:a};clickElement(f);DEBUG("Clicked to build "+clickContext.itemName+" from "+clickContext.buildType+"="+e+".")},Autoplay.start(),!0}return!1}function checkPropertyStatus(a,b){if(a){var c=a+1;mwap_do_ajax("propertyV2","createData",c,"&city="+c,b,checkPropertyCallBack)}}
function autoBossFight(a){Autoplay.delay=getAutoPlayDelay();if(city!=NY)return Autoplay.fx=function(){goLocation(NY)},Autoplay.start(),!0;var b=xpathFirst('.//table[@class="boss_fight"]');if(b){Autoplay.delay=noDelay;if(c=xpathFirst('.//a[contains(@href,"xw_controller=bossfight") and contains(@href,"boss='+a+'")]',b))return clickElement(c),!0;if(c=xpathFirst('.//a[contains(@href,"xw_controller=job") and contains(.,"Back to Jobs")]',b))b=c.parentNode.innerHTML,b.match(/(.+)<a/)&&(b=RegExp.$1),b=b.replace(/^<br><br>/,
""),b=b.replace(/<br><br>/g,"<br>"),addToLog("yeah Icon",b),clickElement(c)}else{if(!onJobTab(a))return Autoplay.fx=function(){goJobTab(a)},Autoplay.start(),!0;if(health<maxHealth&&autoHeal(2))return;var c=xpathFirst('.//a[contains(@href,"xw_controller=bossfight") and contains(@href,"boss='+a+'")]');if(c)return clickElement(c),!0}return!1}
function activateCrew(a){if(!isNewCity(a))return!1;var b=cities[a][CITY_ALIAS].capitalize(),c="activate"+b+"CrewTimer";if(timeLeftGM(c))return!1;b="select"+b+"Crew";if(city!=a)return Autoplay.fx=function(){goLocation(a)},Autoplay.start(),!0;if(!onFightTab())return Autoplay.fx=goFightTab,Autoplay.start(),!0;var d=0,e=xpathFirst('.//a[@id="btn_queue"]',innerPageElt);e&&(d=parseCash(e.innerHTML.untag()));if(d)for(i=1;8>=i;i++)if(d=b+i,e=GM_getIntValue(d,0))if(e=xpathFirst('.//a[contains(@href,"crew_type='+
cityCrewTitles[e][3]+'") and contains(@href,"crew_slot='+cityCrewTitles[e][4]+'")]',innerPageElt))return DEBUG("activateCrew - Clicking Slot: "+i+" - "+RX6_getValue(d,0)),clickElement(e),Autoplay.fx=function(){goFightTab()},Autoplay.start(),!0;b=3600;if((d=$x('.//div[contains(@id,"crew_slot_timer") and @class="slot_used"]'))&&0<d.length)for(i=0,iLength=d.length;i<iLength;i++)e=parseInt(timeLeft(d[i].innerHTML.untag())),e<b&&(b=e);setGMTime(c,secondsToHMS(b));return!1}
function autoBattleCollect(){onBattlePage(1)||(DEBUG("NOT on Battle Collect Page - going there"),goBattlePage(1))}function autoBattle(){var a=RX6_getValue("AutoBattleClanID",0);0<a&&!onClanNav(a)?(DEBUG("Not on Clan Page - going there"),goClanPage(a)):0==a?DEBUG("No clan specified for AutoBattle"):DEBUG("We passed going to the clan page")}
function goBattlePage(a){var b=makeElement("a",null,{onclick:'return do_ajax("inner_page","remote/html_server.php?xw_controller=EpicBattle&xw_action='+(1==a?"view_no_battle":"view")+'",1,1,0,0);return false;'});b?(clickAction=1==a?"load battlecollect":"load battlepage",clickElement(b),DEBUG("Clicked to load Battle Page.")):addToLog("warning Icon","Can't make battle link to click.")}
function onBattlePage(a){a=1==a?"battle_history":"battle_target_list";if(xpathFirst('.//div[@id="'+a+'"]',innerPageElt)||xpathFirst('.//div[@id="battle_tab" and contains(@class,"selected")]',innerPageElt))return!0;DEBUG("Element :"+a+" NOT FOUND.");return!1}
function goClanPage(a){a=btoa(a);(a=makeElement("a",null,{onclick:'return do_ajax("inner_page","remote/html_server.php?xw_controller=clan&xw_action=view&id='+a+'",1,1,0,0);return false;'}))?(clickAction="load clan",clickElement(a),DEBUG("Clicked to load Clan Page.")):addToLog("warning Icon","Can't make Clan link to click.")}
function onClanNav(a){if(!a){if(xpathFirst('.//div[@id="clan_main"]',innerPageElt))return!0}else if(xpathFirst('.//div[@id="clan_main"]',innerPageElt)){if($("#profile_link").length)DEBUG("On this clan page: "+$("#profile_link").text().replace(/"/g,"").trim());else return DEBUG("On the wrong clan page?"),!1;return!0}return!1}
function autoFamilyProgress(a){if(!running||!isGMChecked("AutoFamilyRewards")||isGMChecked("AutoFamilyRewardsLevelUp")&&(2>=Math.ceil(ptsToNextLevel/(energy+stamina)*100)/100||10<stamina||canMission()||1E3<energy))return 0;var b=0,c=0,d=0,e=[];if(e=xpathFirst('.//li[contains(@class,"quest_reward experience") and contains(.,"Experience")]//dd',questBarElt))e=e.innerHTML.untag().replace('"',"").trim().split(/\s+/);else return DEBUG("Unable to locate rewards experience levels"),0;var f=$x('.//li[contains(@class,"box_middle") and contains(@class,"complete") and not (contains(@class,"mastered")) and contains (.,"Collect")]/div[@class="collect_button" and not (contains(@style,"none"))]',
questBarElt);if(f){for(var g,h=d=0,l=f.length;h<l;++h){xpathFirst(".//h4",f[h]);var k=xpathFirst('.//span[contains(@class,"_star")]',f[h]);k&&(d=k.getAttribute("class"),d=/bronze/.test(d)?parseInt(e[0]):/silver/.test(d)?parseInt(e[1]):/gold/.test(d)?parseInt(e[2]):0);b+=d;(k=xpathFirst('.//a[contains(@href,"xw_action=collectProgress") and contains (.,"Collect")]',f[h]))&&2==a&&(DEBUG("ptsToNextLevel:"+ptsToNextLevel+" / old selectedExp:"+d+" new selectedExp: "+c),0==c||ptsToNextLevel<=d&&c>d||ptsToNextLevel>
d&&d<c)&&(c=d,g=k)}if(2==a&&g&&0<c)return addToLog("info Icon","Collecting Family Experience: "+c),clickElement(g),!0}return 1==a?b:!1}
function autoPlayerUpdates(){var a=xpath('.//div[@id="player_updates_all"]/div[@class="update_item"]',innerPageElt),b=a.snapshotLength,c=RX6_getValue("logPlayerUpdatesCount");isUndefined(c)&&(c=b,RX6_setValue("logPlayerUpdatesCount",c));if(0<b&&c>b||0==b&&0<c)0<b&&c>b?DEBUG("Discrepancy in player updates;new count: "+b+",old count: "+c):DEBUG("Player updates were cleared."),c=0,RX6_setValue("logPlayerUpdatesCount",0);if(c<b){DEBUG("Parsing new player updates.");for(var d=b-c-1;0<=d;d--){if(!parsePlayerUpdates(a.snapshotItem(d)))return!0;
RX6_setValue("logPlayerUpdatesCount",++c)}}return b>RX6_getValue("logPlayerUpdatesMax",25)&&c==b?(Autoplay.fx=goDeleteNews,Autoplay.start(),!0):!1}
function autoStatVars(a){for(var b=[],c="",d=0,e=[curAttack,curDefense,maxHealth,maxEnergy,maxStamina],f=[level,curAttack,curDefense,maxHealth,maxEnergy,maxStamina],g=Array(e.length),h=0,l="",k=autoStatPrios.length,q=0,r=e.length;q<r;++q){var p=new Number(RX6_getValue(autoStatRatios[q])),s=new Number(RX6_getValue(autoStatBases[q])),t=new Number(RX6_getValue(autoStatPrios[q])),p=Math.max(0,p*f[RX6_getValue(autoStatModes[q])]+s-e[q]);if(0<p&&t<k||p>h&&t<=k)h=p,l=q,k=t;g[q]=isGMChecked(autoStatFallbacks[q])?
q:""}0>=h&&isGMChecked("autoStatDisable")&&(addToLog("info Icon","All status goals met,please update your goals."),RX6_setValue("autoStat",0));if(0>=h)if(""!=g.join("")){DEBUG("Status GOALS reached,using fallback method.",10);for(f=GM_getIntValue("nextStat",ATTACK_STAT);-1==g.indexOf(f);)f=(f+1)%e.length;l=f}else DEBUG("Status GOALS reached,waiting till next level up."),RX6_setValue("restAutoStat",1);if(!isNaN(l)&&!isNaN(h)){DEBUG("Next stat to increment : "+autoStatDescrips[l+1]+" ("+h+" points to goal) ");
RX6_setValue("restAutoStat",0);switch(l){case ATTACK_STAT:c="attack";break;case DEFENSE_STAT:c="defense";break;case HEALTH_STAT:c="max_health";break;case ENERGY_STAT:c="max_energy";break;case STAMINA_STAT:c="max_stamina"}d=99<a&&(99<h||0>=h)?100:24<a&&(24<h||0>=h)?25:4<a&&(4<h||0>=h)?5:1}b[0]=c;b[1]=d;return b}
function autoCollectTake(a){isGMUndefined("collectCityAttempt")&&RX6_setValue("collectCityAttempt",!1);isGMUndefined("propertyNavAttempt")&&RX6_setValue("propertyNavAttempt",!1);if(city!=a){if(RX6_getValue("collectCityAttempt",!1))return 0!=a&&setGMTime("takeHour"+cities[a][CITY_NAME],"1 hour"),RX6_setValue("collectCityAttempt",!1),!1;RX6_setValue("collectCityAttempt",!0);Autoplay.fx=function(){goLocation(a)};Autoplay.start();return!0}RX6_setValue("collectCityAttempt",!1);if(!onPropertyNav()){if(RX6_getValue("propertyNavAttempt",
!1))return 0!=a&&setGMTime("takeHour"+cities[a][CITY_NAME],"8 hours"),RX6_setValue("propertyNavAttempt",!1),!1;RX6_setValue("propertyNavAttempt",!0);Autoplay.fx=goPropertyNav;Autoplay.start();return!0}RX6_setValue("propertyNavAttempt",!1);mwap_do_ajax("propertyV2","collectall","","&xw_city="+(a+1)+"&requesttype=json",a,bgGeneral_callback)}
function autoStat_upgrade(a){isBGPaused||mwap_do_ajax("stats","upgrade","","&upgrade_key="+a[0]+"&upgrade_amt="+a[1]+"&no_load=1&source=level_up_popup",a,bgGeneral_callback)}function checkReallocation(){if(!isBGPaused)return setGMTime("checkReallocationTimer","20:00"),mwap_do_ajax("marketplace","marketplace_category","","&category=2","",bgGeneral_callback),!1}function checkDailyTake(){if(!isBGPaused)return mwap_do_ajax("DailyTakeV3","showDailyTake","","","",bgGeneral_callback),!1}
function backupConfig(){for(var a=GM_listValues(),b=[],c=0;c<a.length;c++)if("iceScoredResult"!=a[c]&&"iceStolenResult"!=a[c]&&"itemLog"!=a[c]&&"londonReport"!=a[c]&&"jobResult"!=a[c]&&"brazilReport"!=a[c]&&"lastRobResult"!=a[c]&&"fnirInyhrOK"!=a[c]&&"chicagoReport"!=a[c]&&"myFeeds"!=a[c]&&"vegasReport"!=a[c]&&"saReport"!=a[c]&&"myItemList"!=a[c]&&"missions"!=a[c]&&"propLevels"!=a[c]&&"worstItems"!=a[c]&&"MWLists_Auth"!=a[c]&&"MWLists_Passcode"!=a[c]&&"jobCompleteStatus"!=a[c]&&"trackId"!=a[c]&&"lastFightResult"!=
a[c]&&"fbwindowtitle"!=a[c]&&"fnirInyhrString"!=a[c]&&"fnirInyhr"!=a[c]&&"fnirInyhrPermissions"!=a[c]&&"fnirInyhrVersion"!=a[c]){var d=GM_getValue(a[c]);"number"===typeof d&&0===d%1?b.push({k:a[c],v:d}):b.push({k:a[c],v:btoa(encodeURIComponent(RX6_getValue(a[c])))})}prompt("Copy this for your backup",btoa(JSON.stringify(b)));return!1}
function restoreConfig(){var a=prompt("Paste your backup string here:");if(a)try{for(var b=JSON.parse(atob(a)),a=0;a<b.length;a++)if(b[a].k&&b[a].v){var c=b[a].v;if("number"!==typeof c||0!==c%1)c=decodeURIComponent(atob(c));console.log("Setting: "+b[a].k+" to "+c);GM_setValue(b[a].k,c)}0<b.length&&(GM_setValue("isRunning",!1),alert("Restore complete, refreshing page"),location.reload())}catch(d){alert("Error Restoring")}}
function startNewPokerGame(){isBGPaused||mwap_do_ajax("MafiaPoker","showEventPopup",currentPokerGame,"","",bgGeneral_callback)}function showCards(){mwap_do_ajax("MafiaPoker","show",currentPokerGame,"","",bgGeneral_callback)}function powerPackHeal(a){setGMTime("healTimer","00:02");mwap_do_ajax("module","usePowerPack","","&xw_person="+xw_user+"&responseType=hospital&packType=1",a,bgGeneral_callback)}
function powerPackHealCheck(a){var b=gvar.isGreaseMonkey?unsafeWindow.User.powerPackHealthUse:0;if(b)return DEBUG("You can not use a Power Pack to heal yet. Time remaining: "+secondsToHMS(b)+"!"),!1;if(b=gvar.isGreaseMonkey?unsafeWindow.User.powerPackCount:0){var c=GM_getIntValue("autoPowerPackHealTreshold",3);if(b>c)return powerPackHeal(parseInt(a)),!0}return!1}function clanPropertyLoad(a){mwap_do_ajax("ClanProperty","view","","&current_property="+a,a,bgGeneral_callback)}
function clanPropertyupgradePop(a){mwap_do_ajax("ClanProperty","upgradePop","","&property_id="+a,a,bgGeneral_callback)}function clanPropertyupgradeProperty(a,b){mwap_do_ajax("ClanProperty","upgradeProperty","","&property_id="+a+"&num_parts="+b,a,bgGeneral_callback)}
function bgGeneral_callback(a,b,c,d,e,f,g){try{colorDEBUG("bgGeneral controller / action: "+a+" / "+b,caq);if(e){var h=g.responseText;d={};e={};var l;isJsonString(h)?(d=JSON.parse(h),jsonPageUpdate(d),e={},d.hasOwnProperty("data")&&(e=JSON.parse(d.data))):(l=document.createElement("div"),l.innerHTML=h);switch(a){case "ClanProperty":if("view"==b){var k=xpathFirst('.//div[@id="ask_and_send_buttons"]/a[contains(@onclick,"next_controller=ClanProperty&next_action=getPartsFromFeed")]',l);k&&(addToLog("info Icon",
"Asking for Family Property Parts for property "+f),clickElement(k))}else if("upgradePop"==b){var q=xpathFirst('.//a[contains(@href,"xw_controller=clanproperty&xw_action=upgradeProperty")]',l);if(q&&q.href.match(/num_parts=(\d+)/)){var r=RegExp.$1;addToLog("info Icon","Adding Parts to Family Property: "+r+" to property "+f);clanPropertyupgradeProperty(f,r)}else DEBUG("No property upgrade link found for property number "+f)}else"upgradeProperty"==b&&addToLog("info Icon","Family Property Level: "+e.property_level+
" Parts ("+e.property_upgrade_parts+" / "+e.property_parts_needed+") for property: "+f);break;case "hospital":isGMChecked("autoHEALMETimerGoneOff")||addToLog("health Icon",d.hospital_message);0<d.waitHealTimer&&(isGMChecked("autoHEALMETimerGoneOff")||addToLog("info Icon","Next Heal possible in :"+d.waitHealTimer+" seconds"),setGMTime("healTimer",d.waitHealTimer+" seconds"));1!=f&&(autoReload(!0,"autoHeal"),Autoplay.fx=goHome,Autoplay.start());break;case "module":if(d.hospital_message){b=0;b=gvar.isGreaseMonkey?
unsafeWindow.User.powerPackCount:d.user_fields.powerPackCount;var p="You";f&&(p="RX6");addToLog("health Icon",p+" used a Power Pack to heal. Current health: "+health+". You have "+b+" Power Packs left.")}else window.setTimeOut(powerPackHeal,noDelay);return;case "MafiaPoker":if("showEventPopup"==b){var s=xpathFirst('.//div[@class="card_deck_text"]',l);s&&DEBUG("autoPokerCallBack - showCardsElt: "+s.innerHTML.untag());var t=xpathFirst('.//a[contains(@href,"xw_action=peek") and contains(@href,"game=")]',
l),u=xpathFirst('.//a[@id="poker_show_btn"]',l);if(t&&u){currentPokerGame="&game="+/game=(.+)$/.exec(t.href)[1];window.setTimeout(showCards,getAutoPlayDelay());return}setGMTime("autoPokerTimer","1 hour");isPlayingPoker=!1}else if(b="show",e.success){var v=e.hasUserWon?"yeah Icon":"omg Icon";e.winDesc&&addToLog(v,e.winDesc+" (Total Wins: "+e.totalWins+")");if(e.canStartGame){window.setTimeout(startNewPokerGame,getAutoPlayDelay());return}}else{window.setTimeout(showCards,getAutoPlayDelay());return}break;
case "DailyTakeV3":if("collectMyReward"==b){addToLog("yeah Icon","Collected "+f+" from your daily take");try{mwFeed=eval("("+/var feed = (.+?); MW\.Feed/.exec(g.responseText)[1]+")"),"object"==typeof mwFeed&&(unsafeWindow.MW.Feed(mwFeed),colorDEBUG("Publish DailyTake Feed"))}catch(w){colorDEBUG("Error while publishing DailyTake reward: "+w)}}else try{l=jq(h);var D="";c="";var F=["Health Point","Energy","Attack","Defense"];jq(jq("div.dt_pop_item",l).has("a").get().reverse()).each(function(){""==D&&
(D=jq("img",this).attr("title"),c="&"+jq("a",this).attr("onclick").replace(/.*?&xw_person=(\d+)&/,"").replace(/',1,1.*$/,""));for(var a=0,b=F.length;a<b;++a)if(jq("img[title*='"+F[a]+"']",this).length)return D=jq("img",this).attr("title"),c="&"+jq("a",this).attr("onclick").replace(/.*?&xw_person=(\d+)&/,"").replace(/',1,1.*$/,""),!1});""==D?colorDEBUG("No Daily Take Items Found"):mwap_do_ajax("DailyTakeV3","collectMyReward","",c,D,bgGeneral_callback)}catch(B){colorDEBUG("showDailyTake error: "+B)}break;
case "marketplace":if(-1!=h.indexOf("Reallocate")){var H=new Date;addToLog("info Icon","Skill Point Reallocation is active!: "+H);MWAP_RX6_PopupOpen("!!! ReAllocation Active !!!","<br><br>Skill Point Reallocation is active!<br><br>"+H+"<br><br>","520",!1);MWAP_RX6_PopupActivate()}break;case "levelUpBonus":colorDEBUG("Claimed LevelUpBonus",cye);d.hasOwnProperty("bonusName")&&d.bonusName?addToLog("lootbag Icon",'Level Up Bonus Item: <span class="loot">'+d.bonusName+"</span>"):colorDEBUG("Unknown levelUpBonus response:<br>:"+
h);break;case "propertyV2":if("collectall"==b){colorDEBUG("collectall: "+JSON.stringify(e));var z;e.hasOwnProperty("description")&&(z=e.description);e.hasOwnProperty("success_message")&&(z=e.success_message);if(!z)break;if(z.match(/collected (.+?) from your properties/i)){var A='RX6 collected <span class="money">'+RegExp.$1+"</span> from your properties.";addToLog(cities[f][CITY_CASH_CSS],A)}if(z.match(/you have also received:/i)){var G=e.success_image_names;if(0<G.length){A="You also received : ";
collectHelp="";i=0;for(iLength=G.length;i<iLength;i++)A+=collectHelp+G[i].untag(),collectHelp=i==iLength-1?",":" and ";addToLog(cities[f][CITY_CASH_CSS],A)}}if(f==NY&&e.hasOwnProperty("shopname")&&e.hasOwnProperty("vehicleamount")&&e.hasOwnProperty("vehiclename")){var E=e.shopname,C=e.vehicleamount,O=e.vehiclename;if(0<C.length){A="RX6 also collected ";collectHelp="";i=0;for(iLength=C.length;i<iLength;i++)A+=collectHelp+'<span class="property">'+C[i]+'</span> <span class="loot">'+O[i]+'</span> items from your <span class="property">'+
E[i]+"</span>",collectHelp=i==iLength-1?",":" and ";addToLog(cities[f][CITY_CASH_CSS],A)}}setGMTime("takeHour"+cities[f][CITY_NAME],"1 hour");f&&f!=CHICAGO&&setGMTime("takeAbreak","05:00")}break;case "stats":a={attack:["Attack",0],defense:["Defense",1],max_health:["Health",2],max_energy:["Energy",3],max_stamina:["Stamina",4]};if("upgrade"==b){var p=parseInt(d.skill),J=d.type,M=a[J][0],S=a[J][1],Q=M.toLowerCase()+" Icon",R=f[1];RX6_setValue("nextStat",(S+1)%4);addToLog(Q,'RX6 increased your <span style="color:#885588;">'+
M+'</span> by <span style="color:#885588;">'+R+'</span> point(s). New Value: <span style="color:#885588;">'+d.value+"</span>.");if(p&&(autoStatValues=autoStatVars(p),isGMChecked("autoStat")&&!GM_getIntValue("restAutoStat")&&""!=autoStatValues[0]&&0!=autoStatValues[1])){autoStat_upgrade(autoStatValues);return}isAllocating=!1}else DEBUG("Failed to increment stats.");break;default:colorDEBUG("bgGeneral - UNKNOWN REQUEST - controller / action: "+a+" / "+b,cre)}}else colorDEBUG("bgGeneral - FAILED REQUEST - controller / action: "+
a+" / "+b,cre);return!1}catch(I){colorDEBUG("bgGeneral callback error: "+I)}}function startSPAllocation(){var a=[],a=xpathFirst('.//span[@id="user_skill"]'),b=0;a&&(b=parseInt(a.innerHTML));if(!b)return!1;isAllocating=!0;a=autoStatVars(b);""!=a[0]&&0!=a[1]?autoStat_upgrade(a):isAllocating=!1;return!1}
function calcJobratio(a){var b=0;0<missions[a][MISSION_ENERGY]?b=Math.round(missions[a][MISSION_XP]/missions[a][MISSION_ENERGY]*100)/100:0<missions[a][MISSION_STAMINA]&&(b=Math.round(missions[a][MISSION_XP]/missions[a][MISSION_STAMINA]*100)/100);b=isNaN(b)?0:b;missions[a][MISSION_RATIO]=b;RX6_setValue("missions",JSON.stringify(missions));return b}
function canSalvageEnergy(a){if(energy<=maxEnergy)return!1;a=energy-Math.ceil(ptsToNextLevel/missions[a][MISSION_XP])*missions[a][MISSION_ENERGY]-maxEnergy;return 0<a?a:!1}
function canMission(){function a(a){var b,g;c=0;for(s=a.length;c<s;++c)if(d=a[c],g=missions[d])if(newtab=g[MISSION_TAB],isNewCity(g[MISSION_CITY])&&g[MISSION_TABPATH]&&(newtab=g[MISSION_TABPATH]),b=!1,null==e[g[MISSION_CITY]][newtab]||-1!=e[g[MISSION_CITY]][newtab].indexOf(parseInt(d))){if(isNaN(g[MISSION_RATIO])||!g[MISSION_RATIO])g[MISSION_RATIO]=calcJobratio(d);g[MISSION_ENERGY]<=energy&&g[MISSION_STAMINA]<=stamina&&(q=!0,g[MISSION_XP]>=ptsToNextLevel&&(k.push([d,g[MISSION_ENERGY],g[MISSION_XP],
g[MISSION_STAMINA]]),b=!0));if(isGMChecked("repeatJob")||null==f[g[MISSION_CITY]][newtab]||-1==f[g[MISSION_CITY]][newtab].indexOf(parseInt(d))||!1!=b)!r&&canSalvageEnergy(d)&&(r=!0),l.push(d)}}var b=$("#resumeButton").length;if(!energy&&!stamina||!isGMChecked("autoMission")||b)return!1;isGMChecked("droneModeFightFight")&&isGMChecked("dronemodeoptimiseEOL")&&FdroneModeFightFight("optimiseEOLDrone");if(isGMChecked("droneModeRobFight")||isGMChecked("droneModeFightFight"))if(b=Math.ceil(ptsToNextLevel/
stamina*100)/100,DEBUG("canMission KamiDrone mode - ratio: "+b+" / stamina: "+stamina),isGMChecked("staminaSpend")||(RX6_setValue("staminaSpend","checked"),update_nrg_stam()),1>=b&&10<stamina)return running&&addToLog("info Icon",b+" Not Spending Energy,KamiDRONE MODE Stamina Ratio Below 1 and still having stamina to spend."),!1;var c,d,b=RX6_getValue("selectMission",1);missions[b]||(b=1);if(0==getSavedList("jobsToDo").length){var e=eval("("+RX6_getValue("availableJobs","({0:{},1:{},2:{},3:{},4:{},5:{},6:{},7:{},8:{},9:{}})")+
")"),f=eval("("+RX6_getValue("masteredJobs","({0:{},1:{},2:{},3:{},4:{},5:{},6:{},7:{},8:{},9:{}})")+")"),g=Math.ceil(ptsToNextLevel/energy*100)/100,h=getSavedList("selectMissionMultiple"),l=[],k=[],q=!1,r=!1,p=getSavedList("masteryJobsList");c=0;for(s=p.length;c<s;++c)d=p[c],-1==h.indexOf(d)&&h.push(d);a(h);if(!q)if(isGMChecked("endLevelOptimize")&&2.2>=g){h=[];c=0;for(s=missions.length;c<s;++c)p=!0,isGMChecked("endLevelNYOnly")&&missions[c][MISSION_CITY]!=NY&&(p=!1),1==missions[c][MISSION_EOL]&&
missions[c][MISSION_RATIO]>=g&&missions[c][MISSION_ENERGY]<energy&&missions[c][MISSION_STAMINA]<=stamina&&p&&""==missions[c][MISSION_BONUSJOB]&&!isSecretDistrict(missions[c][MISSION_CITY],missions[c][MISSION_TAB])&&h.push(c);a(h);if(!q)return!1}else return!1;h=void 0;l.sort(function(a,b){return missions[b][MISSION_RATIO]==missions[a][MISSION_RATIO]?missions[b][MISSION_XP]-missions[a][MISSION_XP]:missions[b][MISSION_RATIO]-missions[a][MISSION_RATIO]});if(0<k.length&&!r){if(k.sort(function(a,b){return b[2]-
a[2]}),h=k[0][0],isGMChecked("endLevelOptimize")){g=isGMChecked("endLevelNYOnly")?function(a,b,c){return 6<b&&b<k[0][0]&&(1==c[b][MISSION_EOL]||2==c[b][MISSION_EOL])&&c[b][MISSION_CITY]==NY&&c[b][MISSION_ENERGY]<0.5*k[0][1]?1:0}:function(a,b,c){return 6<b&&b<k[0][0]&&(1==c[b][MISSION_EOL]||2==c[b][MISSION_EOL])&&c[b][MISSION_ENERGY]<0.5*k[0][1]&&""==c[b][MISSION_BONUSJOB]&&!isSecretDistrict(c[b][MISSION_CITY],c[b][MISSION_TAB])?1:0};g=missions.filter(g);g.sort(function(a,b){return b[MISSION_XP]-a[MISSION_XP]});
c=0;for(var s=g.length;c<s;++c)if(p=g[c],energy-k[0][1]>p[1]&&ptsToNextLevel>=1.5*Math.floor(p[5])+1){h=missions.searchArray(p[0],0)[0];break}}}else{p=[];for(c=0;c<l.length;c++)energy>=missions[l[c]][MISSION_ENERGY]&&stamina>=missions[l[c]][MISSION_STAMINA]&&g<=missions[l[c]][MISSION_RATIO]&&p.push(l[c]);if(0==p.length){if(l.length)for(h=l[0],c=0,s=l.length;c<s;c++)if(newJob=l[c],1!=missions[newJob][MISSION_TABPATH]&&energy>=missions[newJob][MISSION_ENERGY]&&stamina>=missions[newJob][MISSION_STAMINA]){h=
newJob;break}}else r?p.sort(function(a,b){return missions[b][MISSION_RATIO]==missions[a][MISSION_RATIO]?missions[b][MISSION_XP]-missions[a][MISSION_XP]:missions[b][MISSION_RATIO]-missions[a][MISSION_RATIO]}):p.sort(function(a,b){return missions[b][MISSION_XP]-missions[a][MISSION_XP]}),g=10,isGMChecked("droneModeFightFight")&&(g=0),h=stamina>=g||1==p.length?p[0]:p[1]}if(b!=h){if(isUndefined(h))return!1;addToLog("info Icon",'Switching job to <span class="job">'+missions[h][MISSION_NAME]+"</span>. (canMission)");
RX6_setValue("selectMission",h);b=h}}if(energy<missions[b][MISSION_ENERGY]||stamina<missions[b][MISSION_STAMINA])return DEBUG("Skipping jobs: energy="+energy+",cost="+missions[b][MISSION_ENERGY]+" / stamina="+stamina+",cost="+missions[b][MISSION_STAMINA]),popJob(),!1;g=missions[b][MISSION_ENERGY];if(energy-g<SpendEnergy.floor&&!SpendEnergy.canBurn)return DEBUG("Not spending Job energy: energy="+energy+",floor="+SpendEnergy.floor+",nextJobEnergy="+g+",burn="+SpendEnergy.canBurn),!1;if(energy<SpendEnergy.ceiling&&
!SpendEnergy.canBurn&&!RX6_getValue("useEnergyStarted"))return DEBUG("Rebuilding energy: energy="+energy+",ceiling="+SpendEnergy.ceiling+",burn="+SpendEnergy.canBurn),!1;DEBUG("canMission - current selectedMission: "+b+" - "+missions[b][MISSION_NAME]);return!0}
function autoMission(){if(isGMChecked("droneModeRobFight")||isGMChecked("droneModeFightFight")){var a=Math.ceil(ptsToNextLevel/stamina*100)/100;if(1>=a&&10<stamina)return running&&addToLog("info Icon",a+" Not Spending Energy,DRONE MODE Stamina Ratio Below 1 and still having stamina to spend."),!1}Autoplay.delay=getAutoPlayDelay();var b=function(a){if(!a)if(0==getSavedList("jobsToDo","").length)DEBUG("No more jobs to perform."),skipJobs=!0;else return DEBUG("Looking for the next job to perform."),
popJob(),!0};jobid=RX6_getValue("selectMission",1);if(!missions[jobid])return!1;var c=missions[jobid][MISSION_NAME],d=missions[jobid][MISSION_NUMBER],a=missions[jobid][MISSION_TAB],e=missions[jobid][MISSION_CITY],f=missions[jobid][MISSION_TABPATH]?missions[jobid][MISSION_TABPATH]:0;SpendEnergy.floor&&isGMChecked("allowEnergyToLevelUp")&&RX6_getValue("autoEnergyBurn")!==SpendEnergy.canBurn&&(RX6_setValue("autoEnergyBurn",SpendEnergy.canBurn),SpendEnergy.canBurn?addToLog("process Icon",energyIcon+'<span style="color:#009966;font-weight: bold;">Burning through energy reserve to level up.</span>'):
DEBUG("Not within reach of a level up. Energy burning is off."));if(city!=e)return Autoplay.fx=function(){b(goLocation(e))},Autoplay.start(),!0;if(!districtBoss){var g=a;isNewCity(city)&&f&&(g=f);if(!onJobTab(g))return Autoplay.fx=function(){b(goJobTab(g))},Autoplay.start(),!0}if(getJobRowItems(c))jobid!=RX6_getValue("selectMission",1)&&(Autoplay.fx=autoMission),Autoplay.start();else return DEBUG("autoMission - City: "+cities[e][CITY_NAME]+" ("+missionTabs[e][a-1]+") - job :"+c+" (jobNo: "+d+")"),
Autoplay.fx=function(){b(goJob(d,c))},Autoplay.start(),!0}
function getCurrentBrazilDistrict(){var a=0,b=xpathFirst('.//div[@id="brazil_jobs"]//div[@class="jobs" and not(contains(@style,"none"))]',innerPageElt);b||(b=xpathFirst('.//div[@id="brazil_jobs"]//div[contains(@id,"job-id") and not(contains(@style,"none"))]',innerPageElt));b&&(a=isValidElt(b.parentNode,"district_id"));a||(isValidElt(xpathFirst('.//div[@id="brazil_jobs"]/div[@class="districts"]',innerPageElt),"style").match(/: -?(\d+)px/)?RegExp.$2&&(a=parseInt(RegExp.$1/54+1)):xpathFirst('.//div[@id="brazil_jobs_district_link"]',
innerPageElt)||(a=-1));return a}function currentJobTab(){return isNewCity(city)?parseInt(getCurrentBrazilDistrict()):isValidElt(xpathFirst('.//li[contains(@class,"tab_on")]//a',innerPageElt),"onclick").match(/tab=(\d+)/)?parseInt(RegExp.$1):-1}function currentJobTabPath(){return isValidElt(xpathFirst('.//div[@id="job_paths"]//div[contains(@class,"path_on")]',innerPageElt),"id").match(/(\d+)/)?parseInt(RegExp.$1):-1}function onArenaPage(){return xpathFirst('.//div[@id="lobby_inner_page"]')?!0:!1}
function goArena(){return(elt=makeElement("a",null,{onclick:'return do_ajax("inner_page","remote/html_server.php?xw_controller=Lobby&xw_action=land&skip_req_frame=1&mwcom=1",1,1 ,0,0);return false;'}))?(DEBUG("RX6 Click to go to Arena Page."),clickElement(elt),!0):!1}function onArenaMarket(){return xpathFirst('.//div[@class="lobby_powerup_tab"]')?!0:!1}
function goArenaMarket(){return(elt=makeElement("a",null,{onclick:'return do_ajax("inner_page","remote/html_server.php?xw_controller=Lobby&xw_action=marketplace&skip_req_frame=1&mwcom=1",1,1 ,0,0);return false;'}))?(DEBUG("RX6 Click to go to Arena Page."),clickElement(elt),!0):!1}function onJobTab(a){return currentJobTab()==parseInt(a)?!0:!1}function onJobTabpath(a){return currentJobTabPath()==parseInt(a)?!0:!1}
function canHeal(){unsafeWindow.User.stamina&&(stamina=unsafeWindow.User.stamina);unsafeWindow.User.health&&(health=unsafeWindow.User.health);if(isGMChecked("autoHEALMETimerGoneOff")&&0==timeLeftGM("healTimer")&&health<maxHealth)return health/maxHealth*100<=RX6_getValue("autoHEALMETimerGoneOffPer")?!0:!1;if(!running||!isGMChecked("autoHeal")||health>=RX6_getValue("healthLevel",0)||stamina<RX6_getValue("stamina_min_heal"))return!1;switch(RX6_getValue("staminaSpendHow")){case STAMINA_HOW_ROBFIGHT_BG:if(stamina>
RX6_getValue("robFightStaminaFloor"))return DEBUG(" STAMINA_HOW_ROBFIGHT - blocked autoheal because you are above the RobFight stamina level."),!1}return isGMChecked("hideInHospital")?19<health&&isGMChecked("forceHealOpt7")?(DEBUG("heal if above 19 is checked,and true,in canforceheal "),!0):SpendStamina.canBurn&&0<stamina&&isGMChecked("allowStaminaToLevelUp")?(DEBUG("enough stamina left to level up,and burn to level up,checked in canforceheal "),!0):isGMChecked("forceHealOpt5")&&RX6_getValue("healWaitStarted")&&
timeLeftGM("healWaitTime")?(DEBUG(" healing blocked "+RX6_getValue("healWaitStarted")+" due to 5 minute wait timer. remaining:"+timeLeftGM("healWaitTime")),!1):isGMChecked("forceHealOpt5")?(DEBUG("5 minute timer is up,Allowing Heal"),RX6_setValue("healWaitStarted",!1),!0):isGMChecked("forceHealOpt4")&&stamina>=maxStamina||isGMChecked("forceHealOpt3")&&canSpendStamina(0)?!0:!1:!0}
function canSpendStamina(a){if(!running)return!1;unsafeWindow.User.stamina&&(stamina=unsafeWindow.User.stamina);unsafeWindow.User.health&&(health=unsafeWindow.User.health);if(!isGMChecked("droneModeFightFight")){var b=RX6_getValue("burnOption");if(b==BURN_ENERGY){var c=!0;canMission()||(c=!1);if(b==BURN_ENERGY&&c)isGMChecked("staminaSpend")&&(RX6_setValue("staminaSpend",0),update_nrg_stam());else if(!isGMChecked("staminaSpend")){RX6_setValue("staminaSpend","checked");update_nrg_stam();try{doAutoPlay()}catch(d){autoReload(!0,
"error !logJSONResponse")}}}}isGMChecked("autoArenaStart")&&AutoArenaStart();if(!stamina||!isGMChecked("staminaSpend"))return!1;if(5>stamina&&isNewCity(RX6_getValue("fightLocation",NY)))return DEBUG("Not spending stamina: stamina="+stamina+",fight city="+cities[RX6_getValue("fightLocation",NY)][CITY_NAME]),isGMChecked("autoMission")||checkDroneStatus(),!1;isNaN(a)&&(a=21);b=getStaminaMode();switch(b){case STAMINA_HOW_AUTOHITLIST:case STAMINA_HOW_ROBBING_BG:a=0;break;case STAMINA_HOW_FIGHTROB_BG:15<
stamina&&(a=0);break;case STAMINA_HOW_ROBFIGHT_BG:stamina>RX6_getValue("robFightStaminaFloor")&&(a=0)}if(health<a)return DEBUG("Not spending stamina: health="+health+",minimum="+a),!1;if(stamina<=SpendStamina.floor&&!SpendStamina.canBurn)return DEBUG("Not spending stamina: stamina="+stamina+",floor="+SpendStamina.floor+",burn="+SpendStamina.canBurn),!1;if(stamina<SpendStamina.ceiling&&!SpendStamina.canBurn&&!RX6_getValue("useStaminaStarted"))return DEBUG("Rebuilding stamina: stamina="+stamina+",ceiling="+
SpendStamina.ceiling+",burn="+SpendStamina.canBurn),!1;if(b==STAMINA_HOW_FIGHTROB_BG||b==STAMINA_HOW_ROBBING_BG)return 15<=stamina;if(b==STAMINA_HOW_ROBFIGHT_BG){if(isBackgroundRobbing)return stamina>RX6_getValue("robFightStaminaFloor");if(isBackgroundFighting)return 0<stamina}return!0}
function autoHitlist(){var a=RX6_getValue("autoHitListLoc",NY);if(a<=cities.length-1&&city!=a)return Autoplay.fx=function(){goLocation(a)},Autoplay.delay=getAutoPlayDelay(),Autoplay.start(),!0;if(!onFightTab()&&!autoHitlist.profileSearch&&!autoHitlist.setBounty)return Autoplay.fx=goFightTab,Autoplay.start(),!0;var b=GM_getIntValue("pautoHitOpponentList","");if(!b)return addToLog("warning Icon","Can't autohit because the list of opponents is empty or invalid. Turning automatic hitlisting off."),RX6_setValue("staminaSpend",
0),isGMChecked("bgAutoHitCheck")&&RX6_setValue("bgAutoHitCheck",0),!1;opponent=new Player;opponent.id=String(b);if(!onProfileNav()&&!autoHitlist.setBounty)return autoHitlist.profileSearch=opponent,Autoplay.fx=function(){goProfileNav(opponent)},Autoplay.start(),!0;if(autoHitlist.profileSearch&&onProfileNav()){opponent=autoHitlist.profileSearch;autoHitlist.profileSearch=void 0;opponent.profileHitlist=xpathFirst('.//a[contains(.,"Add to Hitlist")]',innerPageElt);DEBUG("Hitlisting from profile");autoHitlist.setBounty=
!0;var c=xpathFirst('.//a[contains(.,"Add to Hitlist")]',innerPageElt);if(c)return Autoplay.fx=function(){clickAction="autohit";clickContext=opponent;clickElement(c);DEBUG('Clicked "Add to Hitlist".')},Autoplay.start(),!0}b=parseCash(RX6_getValue("autoHitListBounty",0))-cities[NY][CITY_CASH];if(0<b)return DEBUG("We need "+b+" for hitlisting. Going to the bank of "+cities[NY][CITY_NAME]),suspendBank=!0,autoBankWithdraw(b);if(autoHitlist.setBounty){autoHitlist.setBounty=void 0;var b=xpathFirst('.//form[@id="createhit"]',
innerPageElt),d=xpathFirst('.//input[@type="text"]',b);if(!d)return isGMChecked("bgAutoHitCheck")&&setGMTime("bgAutoHitTime","01:00"),!0;isGMChecked("autoHitListRandom")?d.value=Math.pow(10,Math.floor(4*Math.random())+4):d.value=parseCash(RX6_getValue("autoHitListBounty",0));var e=xpathFirst('.//button[@type="submit"]',b);if(!e)return isGMChecked("bgAutoHitCheck")&&setGMTime("bgAutoHitTime","01:00"),!0;Autoplay.fx=function(){clickAction="autohit";clickContext=opponent;e.click();DEBUG("Clicked to Set Bounty")};
Autoplay.start();return!0}}
function autoFight(a){Autoplay.delay=1E3;var b=RX6_getValue("fightLocation",NY);b==RANDOM_CITY&&(b=RX6_getValue("fightNewLocation",NY));if(b!=ACTIVE_CITY&&city!=b)return Autoplay.fx=function(){goLocation(b)},Autoplay.start(),!0;if(!onFightTab()&&!autoFight.profileSearch&&a!=STAMINA_HOW_BATTLE)return Autoplay.fx=goFightTab,Autoplay.start(),!0;if(a!=STAMINA_HOW_FIGHT_LIST){if(a==STAMINA_HOW_BATTLE&&!onBattlePage(2))return Autoplay.fx=goBattlePage(2),Autoplay.start(),!0;if(a==STAMINA_HOW_BATTLE&&xpathFirst('//a[contains(@href,"xw_controller=epicBattle") and contains(@href,"xw_action=optIn")]',
innerPageElt))return elt=xpathFirst('//a[contains(@href,"xw_controller=epicBattle") and contains(@href,"xw_action=optIn")]',innerPageElt),clickElement(elt),Autoplay.start(),!0;fightMode=RX6_getValue("fightRivalsMode",0);if(isGMChecked("droneModeFightFight")){var c=FdroneModeFightFight("droneRivalSwitch");if(c.ratioStaminaDrone<=c.droneModeVarTrigger||1>=c.ratio)colorDEBUG("Swithched to Drone Fight Mode..."),fightMode=3}if(onFightersTab()&&!autoFight.profileSearch&&fightMode&&a!=STAMINA_HOW_BATTLE)return Autoplay.fx=
goRivalsTab,Autoplay.start(),!0;if(onRivalsTab()&&!autoFight.profileSearch&&!fightMode&&a!=STAMINA_HOW_BATTLE)return Autoplay.fx=goFightersTab,Autoplay.start(),!0}var d;if(autoFight.revengeTarget)d=autoFight.revengeTarget,lastOpponent=autoFight.revengeTarget=void 0;else if(autoFight.profileSearch&&onProfileNav()){d=autoFight.profileSearch;if(xpathFirst('.//a[contains(.,"Remove from Mafia")]',innerPageElt))return removeSavedListItem("pfightlist",d.id),lastOpponent=autoFight.profileSearch=void 0,!1;
lastOpponent=autoFight.profileSearch=void 0;isGMChecked("staminaPowerattack")&&(d.profileAttack=xpathFirst('.//a[(contains(@onclick,"xw_action=power_attack") or contains(@href,"xw_action=power_attack")) and contains(.,"Power Attack")]',innerPageElt));d.profileAttack||(d.profileAttack=xpathFirst('.//a[(contains(@onclick,"xw_action=attack") or contains(@href,"xw_action=attack")) and contains(.,"Attack")]',innerPageElt));isValidElt(xpathFirst('//div[@class="stats_title_text"]')).match(/[^"]"(.+)" level (\d+)/)&&
(d.name=RegExp.$1,d.level=RegExp.$2,d.logName=d.name);d.mafia="unknown"}else if(a==STAMINA_HOW_FIGHT_LIST){id=parseInt(RX6_getValue("pfightlist",""));if(!id)return addToLog("warning Icon","Can't fight because the list of opponents is empty or invalid. Turning automatic fighting off."),RX6_setValue("staminaSpend",0),!1;d=new Player;d.id=String(id);a=RX6_getValue("profileList","");a=isJsonString(a)?JSON.parse(a):[];c=a.searchArray(d.id,0)[0];isNaN(c)||(d.profileAttack=makeElement("a",null,{href:a[c][1]}))}else if(d=
findFightOpponent(innerPageElt,a),-1===d)return DEBUG("No opponents even after seeing the fight list."),setNextFightCity(),Autoplay.delay=1500,Autoplay.fx=goFightNav,Autoplay.start(),!0;if(!d)return!1;a=d.profileAttack;!a&&d.attack&&(a=d.attack);if(!a){if(d.id&&!onProfileNav())return autoFight.profileSearch=d,Autoplay.fx=function(){goProfileNav(d)},Autoplay.start(),!0;DEBUG("No way to attack opponent,id="+d.id);return!1}if(a.hasAttribute("href")){if(c=a.getAttribute("href"),c=c.replace(/attack_pop/,
"attack_true_pop"),"javascript://"!=c){var e=makeElement("a",null,null);e.setAttribute("onclick","do_ajax('inner_page','"+c+"',1);return false;");e.innerHTML=a.innerHTML}}else e=a;Autoplay.fx=function(){clickAction="fight";clickContext=d;clickElement(e);isGMChecked("staminaLogDetails")&&addToLog("process Icon","RX6 opened the fight on :"+d.logName+",mafia="+d.mafia+",badge: "+d.fightlabel+" ("+d.cm+": "+clickAction+")")};Autoplay.start();return!0}
function setNextFightCity(){if(RX6_getValue("fightLocation",NY)==RANDOM_CITY){var a;do a=Math.floor(Math.random()*(cities.length-1));while(1==a||level<cities[a][CITY_LEVEL]||isGMEqual("fightNewLocation",a));DEBUG("Changing to "+cities[a][CITY_NAME]+" for next fight.");RX6_setValue("fightNewLocation",a)}}
function logRobResult(a){var b=a.innerHTML,c=b.untag().toLowerCase(),d=0,e=0,f=0,g=0,h=$x('.//div[@class="rob_res_expanded_details"]',a),l="";if(h&&0<h.length){i=0;for(iLength=h.length;i<iLength;i++){var k=h[i],q=k.innerHTML.untag();isValidElt(xpathFirst('.//div[@class="rob_res_expanded_details_cash"]',k)).match(REGEX_CASH)&&(d+=parseCash(RegExp.lastMatch));(k=xpathFirst('.//div[@class="rob_res_expanded_details_exp"]',k))&&!isUndefined(k.innerHTML)&&k.innerHTML.untag().match(/(\d+) experience/i)&&
(e+=parseInt(RegExp.$1));q.untag().match(/\+(\d+) energy/i)&&(f+=parseInt(RegExp.$1));q.untag().match(/\+(\d+) stamina/i)&&(g+=parseInt(RegExp.$1))}d&&(l+=' <span class="good">'+cities[city][CITY_CASH_SYMBOL]+makeCommaValue(d)+"</span>");e&&(l+=' and <span class="good">'+e+" experience</span>");f&&(l+=' and <span class="user">'+f+" energy</span>");g&&(l+=' and <span class="bad">'+g+" stamina</span>");l="RX6 gained "+l+"."}DEBUG("Processing robbing board result.");if(c.match(/(\d+) bonus experience/i)&&
(c=parseInt(RegExp.$1.replace(/[^0-9]/g,"")),f="",(d=parseInt(boardLastPtsToNextLevel)-parseInt(ptsToNextLevel))||(d=e+c),e=parseInt(boardLastStamina)-parseInt(stamina),g=parseFloat(d/e).toFixed(2),q=h=0,b.match(/your record on this board was\s+(.+?)\./i)&&(f=RegExp.$1,f.match(/(\d)-(\d)/)&&(h=parseInt(RegExp.$1),q=parseInt(RegExp.$2)),f='<br>Board Record: <span class="good">'+f+"</span>"),addToLog("yeah Icon","RX6 cleared the board. "+l+' Bonus: <span class="good">'+c+" experience</span>."+f+" - Ratio: "+
d+"/"+e+" ("+g+") "),boardLastStamina=parseInt(stamina),boardLastPtsToNextLevel=parseInt(ptsToNextLevel),isGMChecked("noStats")||(c&&updateRobStatistics(null,parseInt(c)),h&&updateFastRobStatistics(!0,h),q&&updateFastRobStatistics(!1,q),(c||h||q)&&updateLogStats()),!isGMChecked("hideRX6LogLoot"))){var r="";b.match(/you\s(earned|gained|received|collected)\s+(some|an?)\s+bonus\s+(.+?)\.\s\(x 2\)<\/div>/i)?r+='RX6 found <span class="loot">'+RegExp.$3+"</span> (x 2) on this robbing board.":b.match(/you\s+(earned|gained|received|collected)\s+(some|an?)\s+bonus\s+(.+?)\.<\/div>/i)&&
(r+='RX6 found <span class="loot">'+RegExp.$3+"</span> on this robbing board.");(a=xpathFirst('.//img[contains(@class,"item_with_preview")]',a))&&(r+='<br><div class="lootImg">'+a.parentNode.innerHTML+"</div>")}r&&addToLog("lootbag Icon",r)}
function logRobResponse(a){var b=a.elt,c=a.name,d,e=!1;(a=a.result)||(a=xpathFirst('//div[@id="'+b+'" and @class="rob_slot"]'));if(a){var f="",b=!1,g=xpathFirst('.//div[@class="rob_res_target_name"]/a[contains(@href,"xw_controller=clan")]',a);g&&(f+=linkToString(g,"user"));(g=xpathFirst('.//div[@class="rob_res_target_name"]/a[contains(@href,"xw_controller=stats")]',a))?f+=linkToString(g,"user"):f=(g=xpathFirst('.//div[@class="rob_res_target_pic"]//a//img',a))?'<span class="user">'+g.title+"</span>":
'<span class="user">Unknown Target</span>';var h=xpathFirst('.//div[@class="rob_res_expanded_details_exp"]',a),g=xpathFirst('.//div[@class="rob_res_expanded_details_cash"]',a),l=xpathFirst('.//div[@class="rob_res_expanded_details_energy"]',a),k=xpathFirst('.//div[@class="rob_res_expanded_details_stamina"]',a),q=xpathFirst('.//div[@class="rob_res_expanded_details_health"]',a),f="RX6 robbed "+f;if(!c){var r=xpathFirst('.//div[contains(@class,"rob_prop_name")]',a);r&&(c=r.innerHTML.untag().capitalize())}c&&
(f+='\'s <span class="property">'+c+"</span> ");xpathFirst('.//div[@class="rob_res_outcome good"]',a)?(b=!0,c="yeah Icon"):(f+=' and <span class="bad">Failed</span>',c="updateBad Icon");h&&(f+='. You gained <span class="good">'+h.innerHTML+"</span>",d=/(\d+) experience/i.exec(h.innerHTML))&&(updateRobStatistics(b,parseInt(d[1].digitize())),e=!0);b&&(g&&(f+=' and <span class="good">'+g.innerHTML+"</span>"),l&&(f+='. You also gained <span class="user">'+l.innerHTML+"</span>",l.innerHTML.digitize()),
k&&(f+='. You also gained <span class="bad">'+k.innerHTML+"</span>",k.innerHTML.digitize()),q&&(f+='. You also gained <span class="bad">'+q.innerHTML+" health</span>",q.innerHTML.digitize()));addToLog(c,f+".");!isGMChecked("hideRX6LogLoot")&&(d=/alt="(.*?)"/.exec(a.innerHTML))&&(d='RX6 found <span class="loot">'+d[1]+"</span> in robbing.",(c=xpathFirst('.//div[@class="rob_loot_pic"]',a))||(c=xpathFirst('.//div[@class="rob_res_lootdrop_name"]',a)),c&&(d+='<br><div class="lootImg">'+c.innerHTML+"</div>"),
addToLog("lootbag Icon",d));g&&g.innerHTML&&(e=parseCash(g.innerHTML),a=parseCashLoc(g.innerHTML),RX6_setValue("totalWinDollarsInt",String(GM_getIntValue("totalWinDollarsInt",0)+e)),RX6_setValue(cityStats[a][cashWins],String(GM_getIntValue(cityStats[a][cashWins],0)+e)),e=!0)}e&&!isGMChecked("noStats")&&updateLogStats()}
function updateFastRobStatistics(a,b){a?RX6_setValue("robSuccessCountInt",String(GM_getIntValue("robSuccessCountInt",0)+b)):!1==a&&RX6_setValue("robFailedCountInt",String(GM_getIntValue("robFailedCountInt",0)+b))}
function updateRobStatistics(a,b){a?RX6_setValue("robSuccessCountInt",String(GM_getIntValue("robSuccessCountInt",0)+1)):!1==a&&RX6_setValue("robFailedCountInt",String(GM_getIntValue("robFailedCountInt",0)+1));b&&(RX6_setValue("totalRobExpInt",String(GM_getIntValue("totalRobExpInt",0)+parseInt(b))),RX6_setValue("totalExpInt",String(GM_getIntValue("totalExpInt",0)+parseInt(b))))}
function autoHitman(){Autoplay.delay=noDelay;var a,b=RX6_getValue("hitmanLocation",NY);if(b<=cities.length-1&&city!=b)return Autoplay.fx=function(){goLocation(b)},Autoplay.start(),!0;if(!onHitlistTab())return Autoplay.fx=goHitlistTab,Autoplay.start(),!0;opponentsQualified=findFightOpponent(innerPageElt,STAMINA_HOW_HITMAN);if(!opponentsQualified.length)return isGMChecked("bgCollectHitCheck")&&setGMTime("bgCollectHitTime","10:00"),addToLog("warning Icon","No targets qualified,waiting 10 minutes before trying to collect another Hitlist Bounty."),
Autoplay.fx=goHome,Autoplay.start(),!0;var c=0;switch(RX6_getValue("bountySelection",BOUNTY_HIGHEST_BOUNTY)){case BOUNTY_LONGEST_TIME:c=opponentsQualified.length-1;break;case BOUNTY_HIGHEST_BOUNTY:var d=0;a=0;for(iLength=opponentsQualified.length;a<iLength;a++)parseCash(opponentsQualified[a].bounty)>d&&(c=a,d=parseCash(opponentsQualified[a].bounty));break;case BOUNTY_RANDOM:c=Math.floor(Math.random()*opponentsQualified.length);break;default:c=0}Autoplay.fx=function(){clickAction="hitman";clickContext=
opponentsQualified[c];clickElement(clickContext.attack);DEBUG("Clicked to hit "+clickContext.name+" ("+clickContext.id+").")};Autoplay.start();return!0}function getStaminaMode(){var a=RX6_getValue("staminaSpendHow",0);return parseInt(a)}
function autoStaminaSpend(){if(!isGMChecked("staminaSpend"))return DEBUG("staminaSpend DISABLED - returning false",10),!1;if(5>stamina){var a=RX6_getValue("fightLocation",NY);a==RANDOM_CITY&&(a=RX6_getValue("fightNewLocation",NY));if(isNewCity(a))return DEBUG("staminaSpend SUSPENDED: stamina="+stamina+",city="+cities[a][CITY_NAME]),!1}if(SpendStamina.floor&&isGMChecked("allowStaminaToLevelUp")&&RX6_getValue("autoStamBurn")!==SpendStamina.canBurn)if(RX6_setValue("autoStamBurn",SpendStamina.canBurn),
SpendStamina.canBurn){if(addToLog("process Icon",staminaIcon+'<span style="color:#009966;font-weight: bold;">Burning through stamina reserve to level up.</span>'),autoHeal(2))return}else DEBUG("Not within reach of a level up. Stamina burning is off.");a=getStaminaMode();switch(a){case STAMINA_HOW_FIGHT_RANDOM:case STAMINA_HOW_FIGHT_LIST:return inClanBattle&&isGMChecked("AutoBattleFight")&&(a=STAMINA_HOW_BATTLE),autoFight(a);case STAMINA_HOW_HITMAN:return autoHitman(a);case STAMINA_HOW_AUTOHITLIST:return autoHitlist();
case STAMINA_HOW_FIGHT_BG:case STAMINA_HOW_FIGHT_LIST_BG:case STAMINA_HOW_ROBBING_BG:case STAMINA_HOW_FIGHTROB_BG:case STAMINA_HOW_ROBFIGHT_BG:case STAMINA_HOW_MAYHEM_BG:break;default:DEBUG("BUG DETECTED: Unrecognized stamina setting: staminaSpendHow="+a,cre)}return!1}
function autoBankWithdraw(a){var b=xpathFirst('.//div[@id="bank_popup"]');if(!b||"none"==b.parentNode.style.display)return Autoplay.fx=goBank,clickAction="withdraw",clickContext=a,Autoplay.start(),!0;if(a){var c=xpathFirst('.//input[@id="withdraw_amount"]',b);if(!c)return DEBUG("BUG DETECTED: No text input at bank."),!1;c.value=a}var d=xpathFirst('.//div[@id="bank_with_button"]//a',b);if(!d)return!1;Autoplay.fx=function(){clickAction="withdraw";clickElement(d);DEBUG("autoBankWithdraw: Clicked to withdraw.")};
Autoplay.delay=getAutoPlayDelay();Autoplay.start();return!0}
function getDisplayedOpponents(a,b,c){isUndefined(c)&&(c=0);xpathFirst('.//img[contains(@src,"bossPics/raven/assassin")]')&&!timeLeftGM("checkRavenTimer")&&isGMChecked("autoCheckRaven")?(setGMTime("checkRavenTimer","2 hours"),addToLog("info Icon","!!! the Raven is Active !!!"),MWAP_RX6_PopupOpen("!!! the Raven is Active !!!","<br><br>The Raven is Active!<br><br>"+new Date+"<br><br>","520",!1),MWAP_RX6_PopupActivate()):setGMTime("checkRavenTimer","10:00");getDisplayedOpponents.opponents=[];var d,e,
f;d=RX6_getValue("fightRivalsMode",0);isGMChecked("droneModeFightFight")&&(b=FdroneModeFightFight("droneRivalSwitch"),b.ratioStaminaDrone<=b.droneModeVarTrigger||1>=b.ratio)&&(d=3);if(running&&d&&!c)for(b=!0,d=fightRivalsModes[d],e=$x('.//table[@class="main_table fight_table"]//tr',a),c=0;c<e.length;c++)rowElt=e[c],(f=xpathFirst(".//th",rowElt))?b=-1!=f.innerHTML.indexOf(d)?!1:!0:b&&rowElt.parentNode.removeChild(rowElt);(b=$x('.//table[@class="main_table fight_table"]//a[(contains(@href,"opponent_id") or contains(@href,"NPC_id")) and not(contains(@href,"challengePop"))]',
a))&&0!=b.length||(b=$x('.//div[@id="battle_target_list"]//a[contains(@href,"opponent_id")]',a));b&&0!=b.length||(b=$x('.//table[@class="hit_list"]//a[contains(@href,"target_pid") and not(contains(@href,"challengePop"))]',a));if(b&&0<b.length)for(c=0,iLength=b.length;c<iLength;c++)if(a=b[c],a.hasAttribute("href"))if(f=new Player,f.attack=a,f.profile=a,f.a_type="attack_pop",a.innerHTML.match(/(\d+)/i)?f.cm=parseInt(RegExp.$1):isNewCity(city)&&(f.cm=5),d=a.parentNode.parentNode,e=d.getElementsByTagName("td"),
e.length||(e=d.getElementsByTagName("div")),nameAndLevel=e[0],-1!=a.href.indexOf("NPC")){if(f.a_type="attack",f.profile.getAttribute("href").match(/NPC_id\=(\d+)&+/)&&(f.id=decodeID(RegExp.$1)),f.id){f.nameElt=xpathFirst(".//span",nameAndLevel);f.name=f.nameElt.innerHTML;f.logName=f.name;f.button=a.getAttribute("href").replace(/&amp;/g,"&").replace(/remote\/html_server.php\?/,"");getDisplayedOpponents.opponents=[];getDisplayedOpponents.opponents.push(f);break}}else if(-1!=a.href.indexOf("opponent_id=bot")){!running&&
isGMChecked("hideBots")&&(d.style.display="none");if("rgb(102,102,102)"==e[0].style.color||"fight_list_player_dead"==e[0].className)if(f.iced=!0,!running&&isGMChecked("hideIced")){d.style.display="none";continue}isGMChecked("useAvoidListBosses")||(f.profile.getAttribute("href").match(/(user|opponent_id|target_pid)\=(bot%7C\d+)&/)&&(f.id=RegExp.$2),f.id&&(f.nameElt=xpathFirst(".//span",nameAndLevel),f.profile=a,f.name=f.nameElt.innerHTML,f.logName=f.name,f.profile.getAttribute("href").match(/bot_level\=(\d+)&/)&&
(f.level=RegExp.$1),f.profile.getAttribute("href").match(/group_size\=(\d+)&/)&&(f.mafia=RegExp.$1),f.button=a.getAttribute("href").replace(/&amp;/g,"&").replace(/remote\/html_server.php\?/,""),getDisplayedOpponents.opponents.push(f)))}else{if("rgb(102,102,102)"==e[0].style.color||"fight_list_player_dead"==e[0].className)if(f.iced=!0,!running&&isGMChecked("hideIced")){d.style.display="none";continue}xpathFirst('.//a[contains(@href,"xw_controller=stats")]',nameAndLevel)?f.mafia=e[1]?parseInt(e[1].innerHTML):
-1:(nameAndLevel=e[1],f.payer=e[2].innerHTML,f.payerFamily=xpathFirst('.//a[contains(@href,"xw_controller=clan")]',e[2]),f.payerName=xpathFirst('.//a[contains(@href,"xw_controller=stats")]',e[2]),e[3].innerHTML.match(REGEX_CASH)&&(f.bounty=RegExp.lastMatch),f.time=e[4].innerHTML.untag().trim());f.nameElt=xpathFirst('.//a[contains(@href,"xw_controller=stats")]',nameAndLevel);f.nameElt&&(f.profile=f.nameElt,f.shortName=f.nameElt.innerHTML.untag());f.profile.hasAttribute("href")&&f.profile.getAttribute("href").match(/(user|opponent_id|target_pid)\=(.+)&?/)&&
(f.id=decodeID(RegExp.$2));f.id&&(f.buttonUpdate(d,nameAndLevel),getDisplayedOpponents.opponents.push(f))}DEBUG("RX6 found "+getDisplayedOpponents.opponents.length+" possible opponents.");return getDisplayedOpponents.opponents.length?getDisplayedOpponents.opponents:[]}
function findFightOpponent(a,b,c){fightListNew.set([]);var d=getDisplayedOpponents(a,b,c);if(!d)return-1;if(b==STAMINA_HOW_HITMAN)var e=isGMChecked("hitmanNames"),f=isGMChecked("hitmanAvoidNames"),g=isGMChecked("hitmanOnlyNames"),h=parseCash(RX6_getValue("hitmanBountyMin",0)),l=RX6_getValue("bountySelection",BOUNTY_HIGHEST_BOUNTY)==BOUNTY_EXACT_AMOUNT;else e=isGMChecked("fightNames"),f=isGMChecked("fightAvoidNames"),g=isGMChecked("fightOnlyNames");var k=GM_getIntValue("fightLevelMax",500),q=GM_getIntValue("fightMafiaMax",
501),r=GM_getIntValue("fightMafiaMin",1),p=GM_getIntValue("fightLabelCriteria",0);RX6_getValue("fightLevelMaxRelative",!1)&&(k+=level);RX6_getValue("fightMafiaMaxRelative",!1)&&(q+=mafia);RX6_getValue("fightMafiaMinRelative",!1)&&(r=mafia-r);501<r&&(r=501);var s=c=0,t=0,u=0,v=0,w=0,D=0,F=0,B=d.length;a=RX6_getValue("fightRivalsMode",0);var H=isGMChecked("fightRemoveStronger");if(isGMChecked("droneModeFightFight")){var z=FdroneModeFightFight("droneRivalSwitch");if(z.ratioStaminaDrone<=z.droneModeVarTrigger||
1>=z.ratio)colorDEBUG("Switched to Drone Fight Mode..."),a=3,H=!1}DEBUG("Applying criteria to displayed opponents ("+d.length+"): level<="+k+",mafia between "+r+" and "+q+".");for(z=0;z<B;++z)try{var A=d[z];if(A.id)if(p&&p<A.fightlabel)D++;else{if(!isGMChecked("droneModeFightFight")||3!=a)if(!isGMChecked("fightLevelMaxIgnore")||!inClanBattle){if(RX6_getValue("fightMobMode")){if(A.level>501*k/A.mafia&&0<A.level){c++;continue}}else if(A.level>k&&0<A.level){c++;continue}if(A.mafia>q&&0<A.mafia){s++;
continue}if(A.mafia<r&&0<A.mafia){t++;continue}}if(e&&f&&isFamily(decodeHTMLEntities(A.logName),b))u++;else if(e&&g&&!isFamily(decodeHTMLEntities(A.logName),b))u++;else if(isGMChecked("iceCheck")&&A.iced)w++;else{var G=parseCash(A.bounty);if(G&&(G<h||l&&G>h))F++;else{if(H){if(fightListAvoid){var E=fightListAvoid.indexOf(A);if(-1!=E){fightListAvoid.get()[E].update(A);v++;continue}}if(fightListAvoidTemp&&(E=fightListAvoidTemp.indexOf(A),-1!=E)){fightListAvoidTemp.get()[E].update(A);v++;continue}if(hitmanListAvoid&&
(E=hitmanListAvoid.indexOf(A),-1!=E)){hitmanListAvoid.get()[E].update(A);v++;continue}}if(!fightListNew.add(A))v++;else if(!a&&b!=STAMINA_HOW_HITMAN||RX6_getValue("fnirInyhrSum",returnValue())!=parseXMLResponse())break}}}}catch(C){DEBUG("findFightOpponents Error: "+C,cre)}(h=c+s+t+u+w+v+D+0+F)&&DEBUG("Out of the "+B+" opponent(s) listed on the fight page "+h+" disqualified:<br>"+c+" on max level,"+s+" on max mafia,"+t+" on min mafia,<br>"+u+" on name pattern,"+w+" already iced,"+F+" on bounty<br>"+
D+" on fight label,0 on opposite event label,"+v+" by blacklisting (stronger opponents).");newOpponents=fightListNew.get();if(!newOpponents.length)return-1;h=newOpponents.length;isGMChecked("droneModeFightFight")&&3==a||(newOpponents.sort(function(a,b){return a.mafia*a.level/501-b.mafia*b.level/501}),inClanBattle&&newOpponents.reverse(),0==a&&3<h&&(h=3));return b!=STAMINA_HOW_HITMAN?newOpponents[Math.floor(Math.random()*h)]:newOpponents}
function setFightOpponentAvoidTemp(a){a&&"object"==typeof a&&a instanceof Player&&(fightListAvoidTemp.add(a,8),fightListAvoidTemp.set(),fightListNew.remove(a)&&fightListNew.set(),DEBUG("Temp Avoid Fightlists updated for fight opponent (name: "+a.logName+")"),removeSavedListItem("pfightlist",a.id),window.setTimeout(function(){remove_tempblacklist(a)},6E4))}function remove_tempblacklist(a){removeSavedListItem("fightListAvoidTemp",a.id);DEBUG("Temp Target Avoid List Cleared for"+a.id)}
function setFightOpponentAvoid(a){a&&"object"==typeof a&&a instanceof Player&&(fightListAvoid.add(a,100),fightListAvoid.set(),fightListNew.remove(a)&&fightListNew.set(),DEBUG("Fightlists updated for fight opponent (name: "+a.logName+")"),removeSavedListItem("pfightlist",a.id))}
function setHitmanOpponentAvoid(a){a&&"object"==typeof a&&a instanceof Player&&(hitmanListAvoid.add(a,100),hitmanListAvoid.set(),fightListNew.remove(a)&&fightListNew.set(),DEBUG("Fightlists updated for fight opponent (name: "+a.logName+")"),removeSavedListItem("pfightlist",a.id))}
function showMafiaLogBox(){document.getElementById("mafiaLogBox")?document.getElementById("mafiaLogBox").style.display="block":createLogBox();setTimeout(function(){debug||"open"==RX6_getValue("logOpen")||isGMChecked("autoLog")||alert('Logging is not enabled. To see new activity here,please open your settings and check "Enable logging" in the General tab.');RX6_setValue("logOpen","open")},0)}
function hideMafiaLogBox(){isGMChecked("autoLog")?document.getElementById("mafiaLogBox").style.display="none":destroyByID("mafiaLogBox");RX6_setValue("logOpen","closed")}
function handleVersionChange(){var a=SCRIPT.version.split("."),b=parseInt(a[0]),c=parseInt(a[1]),a=parseInt(a[2]),d=RX6_getValue("version","1.1.1000");0==d&&(d="1.1.1000");var e=d.split("."),d=parseInt(e[0]),f=parseInt(e[1]),e=parseInt(e[2]);e<updtJobArrayIfWasBelow||f<c||d<b?(RX6_setValue("missions",0),RX6_setValue("selectMission",0),RX6_setValue("masteredJobs","({0:{},1:{},2:{},3:{},4:{},5:{},6:{},7:{},8:{},9:{},10:{}})"),RX6_setValue("availableJobs","({0:{},1:{},2:{},3:{},4:{},5:{},6:{},7:{},8:{},9:{},10:{}})"),
addToLog("process Icon","Builds,Loading :"+a+" Upgrade Jobs If We Were Below :"+updtJobArrayIfWasBelow+" Clearing stored missions array to reload")):addToLog("info Icon","Builds,Loading :"+a+" Was Running :"+e+" Upgrade Jobs If We Were Below :"+updtJobArrayIfWasBelow);RX6_setValue("version",SCRIPT.version);$("#nav_link_properties_unlock").length&&$("#nav_link_properties_unlock a").click();addToLog("updateGood Icon","Now running version "+SCRIPT.version+".")}
function saveDefaultSettings(){try{RX6_getValue("fnirInyhrSum",returnValue())==parseXMLResponse()&&(RX6doSettings=!0);clearSettings();var a;defaultCheckBoxElementArray("autoPauseBefore autoProcessPopups autoCollectDF autoCollectDT autoLuckyStrike forceLevelSpending".split(" "),"checked");defaultCheckBoxElementArray("autoCheckReallocation autoCheckRaven autoPoker autoPause autoPauseAfter StamEnergyMode TestChanges autoIgnorePopups autoClosePopups".split(" "),"unchecked");RX6_setValue("fastMWAPSpeed",
3);RX6_setValue("autoPauseExp","50");RX6_setValue("idleLocation",NY);RX6_setValue("burnOption",0);RX6_setValue("featJobIndex",0);RX6_setValue("challengeMission",0);RX6_setValue("lootLadderIndex",0);RX6_getValue("fnirInyhrSum",returnValue())==parseXMLResponse()?defaultCheckBoxElementArray("autoLog leftAlign hideOtherScripts ICELogReverse playMWCom hideRX6LogLoot".split(" "),"checked"):defaultCheckBoxElementArray("autoLog leftAlign hideOtherScripts ICELogReverse playMWAPLite hideRX6LogLoot".split(" "),
"checked");defaultCheckBoxElementArray("textOnlyMode filterLog mastheadOnTop fbwindowtitle hideIced hideBots showLevel hideAll hideZyngaBanner hideClanChat hideSubMenuTabs noStats".split(" "),"unchecked");RX6_setValue("autoLogLength","100");RX6_setValue("logPlayerUpdatesMax",50);RX6_setValue("filterLog",0);RX6_setValue("filterOpt",0);logFilterOnOff(1);RX6_setValue("filterPass",defaultPassPatterns.join("\n"));RX6_setValue("filterFail",defaultFailPatterns.join("\n"));defaultCheckBoxElementArray("autoGlobalPublishing logPlayerUpdates autoAskCityCrew autoAcceptMsgGifts autoAcceptMsgNoLimit autoAcceptMsgSecretDropNoLimit autoAcceptMsgBoosts autosendMsgEnergyPack".split(" "),
"checked");defaultCheckBoxElementArray("autoAskJobHelp autoAskPowerCards autoBuildStash autoIcePublish autoIceStack autoPubClanGroupIce autoPubWall autoShareWishlist".split(" "),"unchecked");RX6_setValue("autoAcceptMsgCrew",1);RX6_setValue("autoAcceptMsgEnergy",1);RX6_setValue("autoAcceptMsgMafia",1);RX6_setValue("autoAskJobHelpMinExp",0);RX6_setValue("selectBrazilTier",0);RX6_setValue("selectChicagoTier",0);RX6_setValue("selectLondonTier",0);RX6_setValue("selectSaTier",0);RX6_setValue("autoIcePublishFrequency",
10);RX6_setValue("autoIceStackFrequency",4);RX6_setValue("autoPostIceMessage","");RX6_setValue("autoPubClanGroupID","0");RX6_setValue("autoShareWishlistTime",12);RX6_setValue("warMode",1);RX6_setValue("autoWarTargetList","");defaultCheckBoxElementArray("autoStartFamOps autoStartMyOps AutoFamilyRewards AutoFamilyRewardsLevelUp AutoBattle AutoBattleFight AutoBattleSafehouse autoFamilyBosses autoFamilyBossFighting autoComboFightingOnly askBossFightBoosts sendBossFightBoosts autoFightRaven ravenComboFightingOnly ravenGreenCombo ravenYellowCombo".split(" "),
"unchecked");RX6_setValue("ravenRedCombo",0);RX6_setValue("bossRole",0);RX6_setValue("bossStaminaLimit",0);RX6_setValue("bossRageLimit",250);RX6_setValue("selectFreeGift",0);RX6_setValue("dispatchTarget",0);RX6_setValue("selectAskFreeGift",0);RX6_setValue("autoStat",0);RX6_setValue("autoStatDisable",0);a=0;for(iLength=autoStatModes.length;a<iLength;++a)RX6_setValue(autoStatModes[a],0);a=0;for(iLength=autoStatPrios.length;a<iLength;++a)RX6_setValue(autoStatPrios[a],0);a=0;for(iLength=autoStatBases.length;a<
iLength;++a)RX6_setValue(autoStatBases[a],0);a=0;for(iLength=autoStatRatios.length;a<iLength;++a)RX6_setValue(autoStatRatios[a],0);a=0;for(iLength=autoStatFallbacks.length;a<iLength;++a)RX6_setValue(autoStatFallbacks[a],0);for(a=1;4>=a;a++){id="selectCityPrio"+a;var b=a+5;RX6_setValue(id,b)}for(a=1;a<cityCrewTitles.length;a++)id="selectBrazilCrew"+a,RX6_setValue(id,0),id="selectChicagoCrew"+a,RX6_setValue(id,0),id="selectLondonCrew"+a,RX6_setValue(id,0),id="selectSaCrew"+a,RX6_setValue(id,0);RX6_setValue("activateBrazilCrew",
0);RX6_setValue("activateChicagoCrew",0);RX6_setValue("activateLondonCrew",0);RX6_setValue("activateSaCrew",0);b=0;for(jLength=banditTypes.length;b<jLength;++b){var c="set"+banditTypes[b].ftrim();RX6_setValue(c,1)}defaultCheckBoxElementArray(["autoMission","endLevelOptimize","endLevelNYOnly","autoWithDraw"],"checked");defaultCheckBoxElementArray("autoMissionBlasterSpeed autoMissionBlasterMega repeatJob switchDistrict masterJobsCombined autoFightAgostino autoEnergyPackForce allowEnergyToLevelUp autoStamFightBosses autoBoostFightBosses autoUseAllBoosts selectLevelToMasterOnOff".split(" "),
"unchecked");RX6_setValue("autoEnergyPack",0);RX6_setValue("autoStamFightBossesLimit",0);RX6_setValue("autoMissionBlasterSpeedSet",1);RX6_setValue("selectTier","0.2");RX6_setValue("estimateJobRatio","2");RX6_setValue("autoEnergyPackForcePts",0);RX6_setValue("selectEnergyKeep",0);RX6_setValue("selectEnergyUse",0);RX6_setValue("selectEnergyKeepMode",0);RX6_setValue("selectLevelToMaster",0);RX6_setValue("selectEnergyUseMode",0);RX6_setValue("selectMissionEnergyKeep",0);RX6_setValue("selectMissionEnergyKeepMode",
0);b=0;for(jLength=banditTypes.length;b<jLength;++b)c="set"+banditTypes[b].ftrim(),RX6_setValue(c,1);setSavedList("jobsToDo",[]);setSavedList("itemList",[]);RX6_setValue("masteredJobs","({0:{},1:{},2:{},3:{},4:{},5:{},6:{},7:{},8:{},9:{},10:{}})");RX6_setValue("availableJobs","({0:{},1:{},2:{},3:{},4:{},5:{},6:{},7:{},8:{},9:{},10:{}})");defaultCheckBoxElementArray("staminaSpend staminaLogDetails iceCheck staminaPowerattack fightRemoveStronger fightFallback useDoubleTap useAvoidListBosses".split(" "),
"checked");defaultCheckBoxElementArray("noBGFTravel noBGRTravel useRivalsCheck fightLevelMaxRelative fightMafiaMaxIgnore fightMafiaMinRelative fightMobMode fightIceStealers useMWLists fightOnlyNames allowStaminaToLevelUp mwapSpeedModesFuZY mwapSpeedModesFuZYWarn droneModeRobFight droneModeFightFight droneModeBrazLonBoost droneEnergyPackBoost dronemodeoptimiseEOL dronemodOptSettings useAvoidLittleDamage fightNames fightAvoidNames hitmanNames hitmanAvoidNames autoArenaStart".split(" "),"unchecked");
RX6_setValue("staminaSpendHow",STAMINA_HOW_FIGHT_RANDOM);RX6_setValue("fightLocation",NY);RX6_setValue("reattackThreshold",0);RX6_setValue("reattackThresholdList",0);level?RX6_setValue("fightLevelMax",level):RX6_setValue("fightLevelMax",500);RX6_setValue("useFightBoosts",0);RX6_setValue("fightHealthMax",0);RX6_setValue("fightHealthPctMax",0);RX6_setValue("fightLabelCriteria",0);RX6_setValue("fightMaxAttacks",0);RX6_setValue("droneModefightMaxAttacks",0);RX6_setValue("droneModefightHealthPctMin",0);
RX6_setValue("droneModeStaminaTrigger","1.18");RX6_setValue("autoArenaRatio","1.50");RX6_setValue("autoArenaMxStam","500");RX6_setValue("autoArenaMinStam","500");RX6_setValue("fightMafiaMax",501);RX6_setValue("fightMafiaMin",1);RX6_setValue("hitmanLocation",NY);RX6_setValue("fightClanName",defaultClans.join("\n"));RX6_setValue("hitmanClanName",defaultClans.join("\n"));RX6_setValue("randomFightLocations","10000000");RX6_setValue("randomRobLocations","10000000");RX6_setValue("randomHitmanLocations",
"10000000");RX6_setValue("randomSpendModes","100000");RX6_setValue("robLocation",NY);RX6_setValue("fastRobSpeed",0);RX6_getValue("fnirInyhrSum",returnValue())==parseXMLResponse()&&RX6_setValue("fastBGFSpeed",0);RX6_setValue("selectStaminaKeep",0);RX6_setValue("selectStaminaKeepMode",0);RX6_setValue("selectStaminaUse",0);RX6_setValue("selectStaminaUseMode",0);RX6_setValue("selectMissionStaminaKeep",0);RX6_setValue("selectMissionStaminaKeepMode",0);RX6_setValue("robFightStaminaFloor",25);update_nrg_stam();
defaultCheckBoxElementArray(["autoHeal"],"checked");defaultCheckBoxElementArray("autoHealBackup autoHEALMETimerGoneOff autoPowerPackHeal ignorePowerPackHeal hideInHospital forceHealOpt1 forceHealOpt3 forceHealOpt4 forceHealOpt5 forceHealOpt7 hideAttacks".split(" "),"unchecked");RX6_setValue("healLocation",NY);RX6_setValue("healthLevel","50");RX6_setValue("autoPowerPackHealTreshold",3);RX6_setValue("autoHEALMETimerGoneOffPer",100);RX6_setValue("stamina_min_heal",0);RX6_setValue("rideHitlistXP",0);
defaultCheckBoxElementArray(["collectTakeNew York"],"checked");defaultCheckBoxElementArray("collectTakeBrazil collectLevelUpTakeBrazLon collectTakeChicago collectTakeLondon collectTakeSa collectParts autoBank autoBankBrazil autoBankChicago autoBankLondon autoBankSa askBrazilParts askChicagoParts askLondonParts askSaParts autoGlobalUpgrade autoLimitedParts autoSABank autoFamilyProperty".split(" "),"unchecked");for(ctCount=0;ctCount<ctLength;ctCount++)propItemId=cityProperties[ctCount][ctGMId]+"Id",
defaultCheckBoxElementArray([cityProperties[ctCount][ctGMId]],"unchecked"),RX6_setValue(propItemId,cityProperties[ctCount][ctPropDefault]);defaultCheckBoxElementArray(["autoUpgradeNYChoice"],"unchecked");a=0;for(iLength=autoUpgradeNYBuildings.length;a<iLength;a++)eltId="upgradeNYProperty"+autoUpgradeNYBuildings[a][1],RX6_setValue(eltId,0);ctCount=0;for(cpLength=cityParts.length;ctCount<cpLength;ctCount++)defaultCheckBoxElementArray([cityParts[ctCount][ptGMId]],"unchecked"),cityParts[ctCount][ptPropId]&&
(propItemId=cityParts[ctCount][ptGMId]+"Id",RX6_setValue(propItemId,0));RX6_setValue("askBrazilPartsId",1);RX6_setValue("askBrazilPropId",0);RX6_setValue("askChicagoPartsId",1);RX6_setValue("askChicagoPropId",0);RX6_setValue("askLondonPartsId",1);RX6_setValue("askLondonPropId",0);RX6_setValue("askSaPartsId",1);RX6_setValue("askSaPropId",0);RX6_setValue("bankConfig","50000");RX6_setValue("bankConfigBrazil","50000");RX6_setValue("bankConfigChicago","5000");RX6_setValue("bankConfigLondon","5000");RX6_setValue("bankConfigSa",
"5000");RX6_setValue("autoUpgradeNYChoice",0);RX6_setValue("userMinBalance",0);RX6_setValue("logOpen","open");fightListNew.set([]);skipStaminaSpend=!1}catch(d){DEBUG("Using defaults failed on "+d)}destroyByID("mafiaLogBox");createLogBox();isGMChecked("noStats")||updateLogStats();refreshMWAPCSS();logFilterOnOff(1);addToLog("process Icon","Settings reset to default.")}
function saveSettings(a){try{var b;saveCheckBoxElementArray("autoPause autoIgnorePopups autoProcessPopups autoClosePopups forceLevelSpending StamEnergyMode autoCheckReallocation autoCheckRaven autoPoker autoCollectDF autoCollectDT featJob challengeMission autoLuckyStrike".split(" "));saveCheckBoxElement("autoPauseBefore")&&(RX6_setValue("autoPauselvlExp",ptsToNextLevel),RX6_setValue("autoPauseActivated",!1));saveCheckBoxElement("autoPauseAfter")&&RX6_setValue("autoPauselvlExp",ptsToNextLevel);var c=
parseInt(document.getElementById("autoPauseExp").value);isNaN(c)&&(c=0);RX6_setValue("autoPauseExp",c);saveElementArray([["fastMWAPSpeed",1],["autoPauseMode",1],["idleLocation",1],["burnOption",2],["challengeMissionIndex",1],["featJobIndex",1],["lootLadderIndex",1]]);superUser?defaultCheckBoxElementArray(["TestChanges"],"checked"):defaultCheckBoxElementArray(["TestChanges"],"unchecked");DEBUG("General Settings Saved");saveCheckBoxElementArray("autoLog textOnlyMode filterLog leftAlign mastheadOnTop fbwindowtitle hideIced hideBots showLevel hideZyngaBanner hideClanChat hideSubMenuTabs hideRX6LogLoot noStats ICELogReverse hideOtherScripts hideAll playMWCom playFB playMWAP playMWAPLite".split(" "));
var d=parseInt(document.getElementById("autoLogLength").value);isNaN(d)&&(d=3E3);RX6_setValue("autoLogLength",d);var e=document.getElementById("filterOpt").value;RX6_setValue(0==e?"filterPass":"filterFail",document.getElementById("filterPatterns").value);RX6_setValue("filterOpt",e);DEBUG("Display Settings Saved");saveCheckBoxElementArray("autoAskJobHelp autoAskPowerCards autoBuildStash autoAskCityCrew logPlayerUpdates autoGlobalPublishing autoIcePublish autoIceStack autoPubClanGroupIce autoPubWall autoShareWishlist autoAcceptMsgGifts autoAcceptMsgNoLimit autoAcceptMsgSecretDropNoLimit autoAcceptMsgBoosts autosendMsgEnergyPack".split(" "));
isGMChecked("autoIceStack")&&window.setTimeout(function(){unsafeWindow.FB.api("/me/permissions",function(a){unsafeWindow.Util.isset(a.data[0])?(unsafeWindow.Util.isset(a.data[0].read_stream)||(alert("read_stream permissions (needed for stacking ices) not set - turning off autoIce Stack\n\nRX6 will now prompt you to set read_stream permissions.\n\nAllow read_stream permissions and redo you settings afterwards !!!\n\n"),window.setTimeout(function(){RX6_setValue("autoIceStack",0);unsafeWindow.FB.login(function(a){},
{scope:"read_stream"})},0)),unsafeWindow.Util.isset(a.data[0].publish_actions)||alert("publish_actions permissions NOT ok")):alert("RX6 could not read permissions. Make sure you are logged into FB.")})},0);saveElementArray([["autoAcceptMsgCrew",5],["autoAcceptMsgEnergy",5],["autoAcceptMsgMafia",5]]);RX6_setValue("logPlayerUpdatesMax",50);var f=parseInt(document.getElementById("autoShareWishlistTime").value);if(isNaN(f)||1>parseFloat(f)){alert('The share wishlist timer has to be at least 1 hour. For decimal numbers please use ".",e.g. 1.5.\nDefaulting it to 1 hour.');
document.getElementById("autoShareWishlistTime").value=1;return}RX6_setValue("autoShareWishlistTime",f);var g=parseInt(document.getElementById("autoAskJobHelpMinExp").value);isNaN(g)&&(g=0);RX6_setValue("autoAskJobHelpMinExp",g);var h=parseInt(document.getElementById("autoIcePublishFrequency").value);isNaN(h)&&(h=1);RX6_setValue("autoIcePublishFrequency",h);var l=parseInt(document.getElementById("autoIceStackFrequency").value);isNaN(l)&&(l=0);RX6_setValue("autoIceStackFrequency",l);var k=returnElement(["autoPubClanGroupID",
2]);RX6_setValue("autoPubClanGroupID",String(k));var q=returnElement(["autoPostIceMessage",2]);RX6_setValue("autoPostIceMessage",String(q));saveElementArray([["selectBrazilTier",2],["selectChicagoTier",2],["selectLondonTier",2],["selectSaTier",2],["warMode",2],["autoWarTargetList",2]]);DEBUG("Mafia Settings Saved");saveCheckBoxElementArray("autoStartFamOps autoStartMyOps autoJoinMyOps AutoFamilyRewards AutoFamilyRewardsLevelUp AutoBattle AutoBattleFight AutoBattleSafehouse autoFamilyBosses autoFamilyBossFighting autoComboFightingOnly askBossFightBoosts sendBossFightBoosts autoFightRaven ravenComboFightingOnly ravenGreenCombo ravenYellowCombo".split(" "));
saveElementArray([["AutoBattleClanID",2],["ravenRedCombo",2],["bossRole",2],["bossStaminaLimit",2],["bossRageLimit",2],["selectFreeGift",2],["dispatchTarget",2],["selectAskFreeGift",2]]);isGMChecked("AutoFamilyRewardsLevelUp")&&RX6_setValue("AutoFamilyRewards","checked");DEBUG("Family Settings Saved");saveCheckBoxElementArray("autoStat autoStatDisable autoStatAttackFallback autoStatDefenseFallback autoStatHealthFallback autoStatEnergyFallback autoStatStaminaFallback".split(" "));RX6_setValue("restAutoStat",
0);b=0;for(iLength=autoStatBases.length;b<iLength;++b)RX6_setValue(autoStatBases[b],document.getElementById(autoStatBases[b]).value);b=0;for(iLength=autoStatRatios.length;b<iLength;++b)RX6_setValue(autoStatRatios[b],document.getElementById(autoStatRatios[b]).value);b=0;for(iLength=autoStatModes.length;b<iLength;++b)RX6_setValue(autoStatModes[b],document.getElementById(autoStatModes[b]).value);b=0;for(iLength=autoStatPrios.length;b<iLength;++b)RX6_setValue(autoStatPrios[b],document.getElementById(autoStatPrios[b]).value);
var r=!0===document.getElementById("autoStat").checked;b=0;for(iLength=autoStatBases.length;b<iLength;++b)if(r&&isNaN(document.getElementById(autoStatBases[b]).value)){alert("Please enter valid numbers for auto-stat "+autoStatDescrips[b+1]+" (Misc tab). : "+document.getElementById(autoStatBases[b]).value);return}b=0;for(iLength=autoStatRatios.length;b<iLength;++b)if(r&&isNaN(document.getElementById(autoStatRatios[b]).value)){alert("Please enter valid numbers for auto-stat "+autoStatDescrips[b+1]+
" (Misc tab).");return}if(RX6_getValue("fnirInyhrSum",returnValue())!=parseXMLResponse()){for(b=1;4>=b;b++)id="selectCityPrio"+b,RX6_setValue(id,0);for(b=1;b<cityCrewTitles.length;b++)id="selectBrazilCrew"+b,RX6_setValue(id,0),id="selectChicagoCrew"+b,RX6_setValue(id,0),id="selectLondonCrew"+b,RX6_setValue(id,0),id="selectSaCrew"+b,RX6_setValue(id,0);RX6_setValue("activateBrazilCrew",0);RX6_setValue("activateChicagoCrew",0);RX6_setValue("activateLondonCrew",0);RX6_setValue("activateSaCrew",0)}else{for(b=
1;4>=b;b++)id="selectCityPrio"+b,RX6_setValue(id,document.getElementById(id).value);a=0;for(b=1;b<cityCrewTitles.length;b++)id="selectBrazilCrew"+b,document.getElementById(id).value&&(a=1),RX6_setValue(id,document.getElementById(id).value);RX6_setValue("activateBrazilCrew",a);a=0;for(b=1;b<cityCrewTitles.length;b++)id="selectChicagoCrew"+b,document.getElementById(id).value&&(a=1),RX6_setValue(id,document.getElementById(id).value);RX6_setValue("activateChicagoCrew",a);a=0;for(b=1;b<cityCrewTitles.length;b++)id=
"selectLondonCrew"+b,document.getElementById(id).value&&(a=1),RX6_setValue(id,document.getElementById(id).value);RX6_setValue("activateLondonCrew",a);a=0;for(b=1;b<cityCrewTitles.length;b++)id="selectSaCrew"+b,document.getElementById(id).value&&(a=1),RX6_setValue(id,document.getElementById(id).value);RX6_setValue("activateSaCrew",a)}DEBUG("Autostat Settings Saved");saveCheckBoxElementArray("autoMission autoMissionBlasterSpeed autoMissionBlasterMega endLevelOptimize endLevelNYOnly autoWithDraw autoEnergyPackForce allowEnergyToLevelUp switchDistrict masterJobsCombined autoFightAgostino autoStamFightBosses autoBoostFightBosses autoUseAllBoosts selectLevelToMasterOnOff".split(" "));
saveElementArray([["autoEnergyPack",2],["autoStamFightBossesLimit",2],["autoMissionBlasterSpeedSet",2]]);j=0;for(jLength=banditTypes.length;j<jLength;++j){var p="set"+banditTypes[j].ftrim();saveElement([p,1])}p=[];a=[];selectedTierValue=document.getElementById("selectTier").value.split(".");masteryCity=parseInt(selectedTierValue[0]);masteryTier=parseInt(selectedTierValue[1]);b=0;for(iLength=missions.length;b<iLength;b++)document.getElementById(missions[b][MISSION_NAME]).checked&&p.push(b),masteryCity==
missions[b][MISSION_CITY]&&masteryTier==missions[b][MISSION_TAB]&&a.push(b);var s=p.length,t=document.getElementById("selectTier").value;if(!isGMChecked("masterJobsCombined")){if(s&&"0.0"!=t){RX6_setValue("autoMission",0);alert("Please choose either jobs to master or a tier to master,not both.");return}if(!0===document.getElementById("autoMission").checked)if(s)RX6_setValue("repeatJob","checked");else if("0.0"!=t)RX6_setValue("repeatJob",0);else{RX6_setValue("autoMission",0);alert("Please choose either jobs to master or a tier to master: autoMission disabled.");
return}}setSavedList("selectMissionMultiple",p);setSavedList("masteryJobsList",a);RX6_setValue("selectTier",t);var u=0<document.getElementById("autoEnergyPack").value,v=parseFloat(document.getElementById("estimateJobRatio").value);if(u&&isNaN(v)){alert("Please enter a number between 0 and 3 for your estimated job xp to energy ratio");return}RX6_setValue("estimateJobRatio",document.getElementById("estimateJobRatio").value);var w=parseInt(document.getElementById("autoEnergyPackForcePts").value);isNaN(w)&&
(w=0);RX6_setValue("autoEnergyPackForcePts",w);var D=parseInt(document.getElementById("selectEnergyUse").value),F=parseInt(document.getElementById("selectEnergyKeep").value);if(isNaN(D)||isNaN(F)){alert("Please enter numeric values for Energy reserve and Energy threshold.");return}var B=parseInt(document.getElementById("selectMissionEnergyKeep").value);if(isNaN(B)){alert("Please Enter Numeric Values For The Mission Energy Threshold.");return}RX6_setValue("selectEnergyUse",D);RX6_setValue("selectEnergyKeep",
F);RX6_setValue("selectEnergyUseMode",document.getElementById("selectEnergyUseMode").selectedIndex);RX6_setValue("selectEnergyKeepMode",document.getElementById("selectEnergyKeepMode").selectedIndex);RX6_setValue("selectLevelToMaster",document.getElementById("selectLevelToMaster").selectedIndex);RX6_setValue("selectMissionEnergyKeep",B);RX6_setValue("selectMissionEnergyKeepMode",document.getElementById("selectMissionEnergyKeepMode").selectedIndex);DEBUG("Energy Settings Saved");var H=validateStaminaTab();
if(!H)return;for(var z in H)RX6_setValue(z,H[z]);update_nrg_stam();DEBUG("Stamina Settings Saved");saveCheckBoxElementArray("autoHeal autoHealBackup autoHEALMETimerGoneOff autoPowerPackHeal ignorePowerPackHeal hideInHospital forceHealOpt3 forceHealOpt4 forceHealOpt5 forceHealOpt7 hideAttacks".split(" "));var A=!0===document.getElementById("autoHeal").checked,G=parseInt(document.getElementById("healthLevel").value);if(A&&(!G||1>G)){alert("Health level for automatic healing must be 1 or more.");return}RX6_setValue("healthLevel",
G);RX6_setValue("healLocation",document.getElementById("healLocation").value);var E=parseInt(document.getElementById("autoPowerPackHealTreshold").value);if(isNaN(E)||10<E)E=3;RX6_setValue("autoPowerPackHealTreshold",E);var C=parseInt(document.getElementById("autoHEALMETimerGoneOffPer").value);if(isNaN(E)||100<E||0==E)C=100;RX6_setValue("autoHEALMETimerGoneOffPer",C);var O=parseInt(document.getElementById("stamina_min_heal").value);isNaN(O)&&(O=0);RX6_setValue("stamina_min_heal",O);var J=!0===document.getElementById("hideAttacks").checked,
M=parseInt(document.getElementById("rideHitlistXP").value);if(J){if(isNaN(M)||0>M||50<M){alert("For the hitlistride XP please enter a number between 0 and 50 (default: 0).");return}RX6_setValue("rideHitlistXP",M)}if(isGMChecked("autoHeal")){var S=getStaminaMode();S==STAMINA_HOW_FIGHTROB_BG||S==STAMINA_HOW_ROBFIGHT_BG?(document.getElementById("mwap_toggleheal").innerHTML=healOnHoldIcon,document.getElementById("mwap_toggleheal").title="autoHeal checked BUT OVERRULED - healing in "+locations[RX6_getValue("healLocation")]+
" when health falls below "+RX6_getValue("healthLevel")+".",addToLog("healOnHoldIcon Icon","autoHeal turned ON by User,but OVERRULED")):(document.getElementById("mwap_toggleheal").innerHTML=healOnIcon,document.getElementById("mwap_toggleheal").title="autoHeal checked - healing in "+locations[RX6_getValue("healLocation")]+" when health falls below "+RX6_getValue("healthLevel")+".",addToLog("healOnIcon Icon","autoHeal turned ON by User"))}else document.getElementById("mwap_toggleheal").innerHTML=healOffIcon,
document.getElementById("mwap_toggleheal").title="autoHeal unchecked",addToLog("healOffIcon Icon","autoHeal turned OFF by User");DEBUG("Health Settings Saved");saveCheckBoxElementArray("collectTakeNew York;collectTakeBrazil;collectLevelUpTakeBrazLon;collectTakeChicago;collectTakeLondon;collectTakeSa;collectParts;autoBank;autoBankBrazil;autoBankChicago;autoBankLondon;autoBankSa;askPlaySlots;askBrazilParts;askChicagoParts;askLondonParts;askSaParts;autoGlobalUpgrade;autoLimitedParts;autoSABank;autoFamilyProperty".split(";"));
for(ctCount=0;ctCount<ctLength;ctCount++)propItemId=cityProperties[ctCount][ctGMId]+"Id",saveCheckBoxElementArray([cityProperties[ctCount][ctGMId]]),RX6_setValue(propItemId,document.getElementById(propItemId).selectedIndex);ctCount=0;for(cpLength=cityParts.length;ctCount<cpLength;ctCount++)saveCheckBoxElementArray([cityParts[ctCount][ptGMId]]),cityParts[ctCount][ptPropId]&&(propItemId=cityParts[ctCount][ptGMId]+"Id",RX6_setValue(propItemId,document.getElementById(propItemId).selectedIndex));RX6_setValue("askBrazilPartsId",
document.getElementById("askBrazilPartsId").selectedIndex);RX6_setValue("askBrazilPropId",document.getElementById("askBrazilPropId").selectedIndex);RX6_setValue("askChicagoPartsId",document.getElementById("askChicagoPartsId").selectedIndex);RX6_setValue("askChicagoPropId",document.getElementById("askChicagoPropId").selectedIndex);RX6_setValue("askLondonPartsId",document.getElementById("askLondonPartsId").selectedIndex);RX6_setValue("askLondonPropId",document.getElementById("askLondonPropId").selectedIndex);
RX6_setValue("askSaPartsId",document.getElementById("askSaPartsId").selectedIndex);RX6_setValue("askSaPropId",document.getElementById("askSaPropId").value);var Q=!0===document.getElementById("autoBank").checked,R=!0===document.getElementById("autoBankBrazil").checked,I=!0===document.getElementById("autoBankChicago").checked,K=!0===document.getElementById("autoBankLondon").checked,V=!0===document.getElementById("autoBankSa").checked,Z=document.getElementById("bankConfig").value,Y=document.getElementById("bankConfigBrazil").value,
ea=document.getElementById("bankConfigChicago").value,ba=document.getElementById("bankConfigLondon").value,ha=document.getElementById("bankConfigSa").value,ca=parseInt(Z),U=parseInt(Y),W=parseInt(ea),X=parseInt(ba),P=parseInt(ha),y=String(document.getElementById("userMinBalance").value);RX6_setValue("autoUpgradeNYChoice",document.getElementById("autoUpgradeNYChoice").selectedIndex);b=0;for(iLength=autoUpgradeNYBuildings.length;b<iLength;b++)eltId="upgradeNYProperty"+autoUpgradeNYBuildings[b][1],saveCheckBoxElement(eltId);
if(Q&&(isNaN(ca)||10>ca)){alert("Minimum New York auto-bank amount must be 10 or higher.");return}if(R&&(isNaN(U)||10>U)){alert("Minimum Brazil auto-bank amount must be 10 or higher.");return}if(I&&(isNaN(W)||10>W)){alert("Minimum Chicago auto-bank amount must be 10 or higher.");return}if(K&&(isNaN(X)||10>X)){alert("Minimum London auto-bank amount must be 10 or higher.");return}if(V&&(isNaN(P)||10>P)){alert("Minimum SA auto-bank amount must be 10 or higher.");return}if(0>parseInt(y)){alert("Minimum NY Bank Balance amount must be 0 or higher.");
return}RX6_setValue("bankConfig",Z);RX6_setValue("bankConfigBrazil",Y);RX6_setValue("bankConfigChicago",ea);RX6_setValue("bankConfigLondon",ba);RX6_setValue("bankConfigSa",ha);RX6_setValue("userMinBalance",y);DEBUG("Cash Settings Saved");setSavedList("jobsToDo",[]);setSavedList("itemList",[]);RX6_setValue("masteredJobs","({0:{},1:{},2:{},3:{},4:{},5:{},6:{},7:{},8:{},9:{},10:{}})");RX6_setValue("availableJobs","({0:{},1:{},2:{},3:{},4:{},5:{},6:{},7:{},8:{},9:{},10:{}})");fightListNew.set([]);skipStaminaSpend=
!1}catch(N){DEBUG("Save Settings failed on "+N)}destroyByID("mafiaLogBox");createLogBox();toggleSettings();isGMChecked("noStats")||updateLogStats();refreshMWAPCSS();logFilterOnOff(1);isGMChecked("droneModeFightFight")&&FdroneModeFightFight("checkDroneSettings");isGMChecked("mwapSpeedModesFuZY")&&!isGMChecked("mwapSpeedModesFuZYWarn")&&alert(" DISCLAIMER - WARNING! WARNING! WARNING! \n FuZy FIGHT MODE DETECTED. \n \nRX6MWAP accepts no liability for USING THIS MODE. \n \n This will fight faster than what Zynga Allow!")}
function updateMastheadMenu(){var a=document.getElementById("ap_menu");if(a){var b=document.getElementById("ap_img")?document.getElementById("ap_img"):makeElement("div",a.parentNode,{id:"ap_img",style:"position: absolute;top: 13px;right:135px;"}),c=document.getElementById("pauseButton");running?(destroyByID("apimg"),makeElement("img",b,{id:"apimg",src:"http://cdn.playerscripts.co.uk/images/mwap_graphics/32_green.png"}),c||(destroyByID("resumeButton"),c=makeElement("span",null,{id:"pauseButton",style:"color:#33FF00;",
title:"RX6 MWAP is RUNNING,click to pause."}),c.appendChild(document.createTextNode("Pause")),c.addEventListener("click",pause,!1),a.insertBefore(c,a.firstChild))):(c&&c.parentNode.removeChild(c),c=document.getElementById("resumeButton"),destroyByID("apimg"),makeElement("img",b,{id:"apimg",src:"http://cdn.playerscripts.co.uk/images/mwap_graphics/32_red.png"}),c||(c=makeElement("span",null,{id:"resumeButton",style:"color:#FF0000;",title:"RX6 MWAP is PAUSED,click to resume."}),c.appendChild(document.createTextNode("Resume")),
a.insertBefore(c,a.firstChild),c.addEventListener("click",unPause,!1)))}}
function update_nrg_stam(){setListenStats(!1);if(document.getElementById("mwap_nrg")){var a=document.getElementById("mwap_nrg"),b=xpathFirst('./div[@class="mw_header"]//div[@class="mid_row_text energy_text_bg" and contains(text(),"ENERGY")]',statsrowElt);b||(b=xpathFirst('.//div[@id="game_stats"]//h4[@class="energy" and contains(text(),"Energy")]',statsrowElt));b||(b=xpathFirst('.//div[@id="game_stats"]//span[@class="stat_title" and contains(text(),"Energy")]',statsrowElt));if(b){if(isGMChecked("autoMission")){var c=
"Spend Energy ON.  ";b.style.color="#33FF00"}else c="Spend Energy OFF.  ",b.style.color="#FF0000";selectedTierValue=RX6_getValue("selectTier","0.0").split(".");masteryCity=parseInt(selectedTierValue[0]);masteryTier=parseInt(selectedTierValue[1]);c=0!=masteryCity||0!=masteryTier&&void 0!=masteryTier?c+(" Mastering-"+cities[masteryCity][CITY_NAME]+",District/Region-"+masteryTier+" "+missionTabs[masteryCity][masteryTier-1]):c+" Mastering- Turned OFF ";b.style.textDecoration="underline";a.title=c}}if(document.getElementById("mwap_nrg")&&
(a=document.getElementById("mwap_stam"),(b=xpathFirst('./div[@class="mw_header"]//div[@class="mid_row_text stamina_text_bg" and contains(text(),"STAMINA")]',statsrowElt))||(b=xpathFirst('.//div[@id="game_stats"]//h4[contains(text(),"Stamina")]',statsrowElt)),b||(b=xpathFirst('.//div[@id="game_stats"]//span[@class="stat_title" and contains(text(),"Stamina")]',statsrowElt)),b)){isGMChecked("staminaSpend")?(c="Spend Stamina ON.  ",b.style.color="#33FF00"):(c="Spend Stamina OFF.  ",b.style.color="#FF0000");
var c=c+("Minimum Stamina for auto-healing set at "+RX6_getValue("stamina_min_heal")+" points."),d=getStaminaMode(),c=c+(" Stamina Spend Mode: "+staminaSpendChoices[d]);b.style.textDecoration="underline";a.title=c}setListenStats(!0)}
function pause(){!1===RX6_getValue("isRunning")&&refreshLog();RX6_setValue("isRunning",!1);running=!1;isBGPaused=!0;Autoplay.clearTimeout();Reload.clearTimeout();addToLog("pause Icon","RX6 MWAP is paused. Log & stats do not track manual activity.");ajaxHandling=!1;mwapOnOffMenu();updateMastheadMenu();customizeMenu();customizeFightLists()||customizeHome()||customizeJobs()||customizeBoss()||customizeProfile()||customizeProps()}
function resetBGVars(){endBoss=districtBoss=isAllocating=isOpeningGifts=isPlayingPoker=isRavenRunning=isBossRunning=isBackgroundBanking=isBackgroundDispatching=isBackgroundRobbing=isBackgroundFighting=isBGPaused=!1}
function unPause(){!0===RX6_getValue("isRunning")&&refreshLog();RX6_setValue("masteredJobs","({0:{},1:{},2:{},3:{},4:{},5:{},6:{},7:{},8:{},9:{},10:{}})");RX6_setValue("availableJobs","({0:{},1:{},2:{},3:{},4:{},5:{},6:{},7:{},8:{},9:{},10:{}})");RX6_setValue("savedMjobs",JSON.stringify([]));RX6_setValue("cashNeeded",0);fightListAvoidTemp.set([]);RX6_setValue("isRunning",!0);running=!0;resetBGVars();addToLog("play Icon","RX6 MWAP resuming  | Temp Avoid List Cleared for Attack Attackers");mwapOnOffMenu();
updateMastheadMenu();autoReload(!1,"unpause");Autoplay.fx=goHome;Autoplay.delay=getAutoPlayDelay();Autoplay.start()}RX6_getValue("fnirInyhrSum",returnValue())!=parseXMLResponse()&&setInterval(recurringLogText,3E5);function recurringLogText(){addToLog("info Icon","GET THE BEST ALL ROUND MAFIA WARS SCRIPT ONE CAN EVER HAVE mwap.me.uk for further details.")}
function mwapOnOffMenu(){var a=document.getElementById("pauseLink"),b=document.getElementById("resumeLink");a&&b&&(!1===RX6_getValue("isRunning")?(a.style.display="none",b.style.display="block"):(a.style.display="block",b.style.display="none"));a=document.getElementById("mafiaLogBox");b=document.getElementById("ap_mwap_pause");a&&b&&(!1===RX6_getValue("isRunning")?(destroyByID("ap_mwap_pause"),title="Click to resume RX6 MWAP",b=makeElement("div",a,{"class":"mouseunderline",title:title,id:"ap_mwap_pause",
"class":"ap_mwap_pause"}),b.appendChild(document.createTextNode("RX6 MWAP is PAUSED,click to resume"))):(destroyByID("ap_mwap_pause"),title="Click to pause RX6 MWAP",b=makeElement("div",a,{"class":"mouseunderline",title:title,id:"ap_mwap_pause","class":"ap_mwap_pause"}),b.appendChild(document.createTextNode("RX6 MWAP is RUNNING,click to pause"))),b.addEventListener("click",mwapOnOff,!1))}function mwapOnOff(){!0===RX6_getValue("isRunning")?pause():unPause()}
function isFamily(a,b){var c="";a.match(/id\=(.+)\&from_red_link/)&&(c=decodeID(RegExp.$1));for(var d=b==STAMINA_HOW_FIGHT_RANDOM||STAMINA_HOW_FIGHT_BG?getSavedList("fightClanName"):getSavedList("hitmanClanName"),e=0,f=d.length;e<f;++e){var g=d[e];if(g&&(-1!=a.untag().indexOf(g)||g==c))return!0}return!1}
function isLoggable(a){var b=GM_getIntValue("filterOpt",0);if(!a||debug||!isGMChecked("filterLog")||isNaN(b)||-1!=a.indexOf("Log filtering")||-1!=a.indexOf('"good">Patterns '))return!0;for(var c=getSavedList(0==b?"filterPass":"filterFail"),d=0,e=c.length;d<e;++d){var f=c[d];if(f&&-1!=a.indexOf(f))return 0==b}return 1==b}
function timeStamp(a){var b=new Date,c="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")[b.getMonth()]+" "+b.getDate(),d=(10>b.getHours()?0:"")+b.getHours()+":"+(10>b.getMinutes()?0:"")+b.getMinutes();a||(d+=":"+(10>b.getSeconds()?0:"")+b.getSeconds());return c+" - "+d}
function addToLog(a,b){if((debug||isGMChecked("autoLog"))&&isLoggable(b)){var c=document.getElementById("logBox");c||(addToLog.logBox||(addToLog.logBox=document.createElement("div"),addToLog.logBox.innerHTML=RX6_getValue("itemLog","")),c=addToLog.logBox);var d=c.childNodes.length,e;if(d){var f="";try{var g=c.firstChild.childNodes[1];if(g&&g&&g.innerHTML&&!isUndefined(g.innerHTML)){var f=f+String(g.innerHTML+""),h=f.match(/^(.+?)(?:\s\((\d+) times\))?$/i);h&&h[1]&&String(h[1]).untag()==String(b).untag()&&
(e=h[2]?parseInt(h[2])+1:2,b+=" ("+e+" times)")}}catch(l){}}f=document.createElement("div");f.className="logEvent "+a;f.innerHTML='<div class="eventTime">'+timeStamp()+'</div><div class="eventBody">'+b+'</div><div class="clear"></div>';if(e)c.replaceChild(f,c.firstChild);else{c.insertBefore(f,c.firstChild);f=GM_getIntValue("autoLogLength",100);if(300<f||debug)f=300;if(0<f)for(;d-- >f;)c.removeChild(c.lastChild)}RX6_setValue("itemLog",c.innerHTML);running&&100<e&&goHome()}}
function updateLogStats(){var a=document.getElementById("fightCount");a&&(a.firstChild.nodeValue=makeCommaValue(GM_getIntValue("fightWinCountInt",0)+GM_getIntValue("fightLossCountInt",0)),document.getElementById("fightWinCount").firstChild.nodeValue=makeCommaValue(GM_getIntValue("fightWinCountInt",0)),a=(GM_getIntValue("fightWinCountInt",0)/(GM_getIntValue("fightWinCountInt",0)+GM_getIntValue("fightLossCountInt",0))*100).toFixed(1),document.getElementById("fightWinPct").firstChild.nodeValue=isNaN(a)?
"0.0%":a+"%",document.getElementById("fightLossCount").firstChild.nodeValue=makeCommaValue(GM_getIntValue("fightLossCountInt",0)),a=(GM_getIntValue("fightLossCountInt",0)/(GM_getIntValue("fightWinCountInt",0)+GM_getIntValue("fightLossCountInt",0))*100).toFixed(1),document.getElementById("fightLossPct").firstChild.nodeValue=isNaN(a)?"0.0%":a+"%");if(a=document.getElementById("passivefightCount"))a.firstChild.nodeValue=makeCommaValue(GM_getIntValue("passivefightWinCountInt",0)+GM_getIntValue("passivefightLossCountInt",
0)),document.getElementById("passivefightWinCount").firstChild.nodeValue=makeCommaValue(GM_getIntValue("passivefightWinCountInt",0)),a=(GM_getIntValue("passivefightWinCountInt",0)/(GM_getIntValue("passivefightWinCountInt",0)+GM_getIntValue("passivefightLossCountInt",0))*100).toFixed(1),document.getElementById("passivefightWinPct").firstChild.nodeValue=isNaN(a)?"0.0%":a+"%",document.getElementById("passivefightLossCount").firstChild.nodeValue=makeCommaValue(GM_getIntValue("passivefightLossCountInt",
0)),a=(GM_getIntValue("passivefightLossCountInt",0)/(GM_getIntValue("passivefightWinCountInt",0)+GM_getIntValue("passivefightLossCountInt",0))*100).toFixed(1),document.getElementById("passivefightLossPct").firstChild.nodeValue=isNaN(a)?"0.0%":a+"%";if(a=document.getElementById("totalPassiveWinDollars")){var b=0,c=0,d="| ",e="| ";i=0;for(iLength=cityStats.length;i<iLength;i++)cities[i][CITY_CLOSED]||(b+=GM_getIntValue(cityStats[i][passivecashWins],0),c+=GM_getIntValue(cityStats[i][passivecashLosses],
0),d+=" "+cities[i][CITY_CASH_SYMBOL]+makeCommaValue(GM_getIntValue(cityStats[i][passivecashWins],0))+" |",e+=" "+cities[i][CITY_CASH_SYMBOL]+makeCommaValue(GM_getIntValue(cityStats[i][passivecashLosses],0))+" |");a.firstChild.nodeValue=getDollarsUnit(b);document.getElementById("totalPassiveLossDollars").firstChild.nodeValue=getDollarsUnit(c);document.getElementById("totalPassiveWinDollars").setAttribute("title",d);document.getElementById("totalPassiveLossDollars").setAttribute("title",e)}document.getElementById("whackedCount")&&
(document.getElementById("whackedCount").firstChild.nodeValue=GM_getIntValue("whackedCount",0));document.getElementById("snuffCount")&&(document.getElementById("snuffCount").firstChild.nodeValue=GM_getIntValue("snuffCount",0));if(a=document.getElementById("passivetotalExp"))a.firstChild.nodeValue=makeCommaValue(GM_getIntValue("passivetotalFightExpInt",0)+GM_getIntValue("passivetotalJobExpInt",0)),document.getElementById("passivetotalFightExp").firstChild.nodeValue=makeCommaValue(GM_getIntValue("passivetotalFightExpInt",
0)),document.getElementById("passivetotalJobExp").firstChild.nodeValue=makeCommaValue(GM_getIntValue("passivetotalJobExpInt",0));document.getElementById("hitmanCount")&&(document.getElementById("hitmanCount").firstChild.nodeValue=makeCommaValue(GM_getIntValue("hitmanWinCountInt",0)+GM_getIntValue("hitmanLossCountInt",0)),document.getElementById("hitmanWinCount").firstChild.nodeValue=makeCommaValue(GM_getIntValue("hitmanWinCountInt",0)),a=(GM_getIntValue("hitmanWinCountInt",0)/(GM_getIntValue("hitmanWinCountInt",
0)+GM_getIntValue("hitmanLossCountInt",0))*100).toFixed(1),document.getElementById("hitmanWinPct").firstChild.nodeValue=isNaN(a)?"0.0%":a+"%",document.getElementById("hitmanLossCount").firstChild.nodeValue=makeCommaValue(GM_getIntValue("hitmanLossCountInt",0)),a=(GM_getIntValue("hitmanLossCountInt",0)/(GM_getIntValue("hitmanWinCountInt",0)+GM_getIntValue("hitmanLossCountInt",0))*100).toFixed(1),document.getElementById("hitmanLossPct").firstChild.nodeValue=isNaN(a)?"0.0%":a+"%");document.getElementById("robCount")&&
(document.getElementById("robCount").firstChild.nodeValue=makeCommaValue(GM_getIntValue("robSuccessCountInt",0)+GM_getIntValue("robFailedCountInt",0)),document.getElementById("robWinCount").firstChild.nodeValue=makeCommaValue(GM_getIntValue("robSuccessCountInt",0)),a=(GM_getIntValue("robSuccessCountInt",0)/(GM_getIntValue("robSuccessCountInt",0)+GM_getIntValue("robFailedCountInt",0))*100).toFixed(1),document.getElementById("robWinPct").firstChild.nodeValue=isNaN(a)?"0.0%":a+"%",document.getElementById("robLossCount").firstChild.nodeValue=
makeCommaValue(GM_getIntValue("robFailedCountInt",0)),a=(GM_getIntValue("robFailedCountInt",0)/(GM_getIntValue("robSuccessCountInt",0)+GM_getIntValue("robFailedCountInt",0))*100).toFixed(1),document.getElementById("robLossPct").firstChild.nodeValue=isNaN(a)?"0.0%":a+"%");if(a=document.getElementById("totalWinDollars")){a.firstChild.nodeValue=getDollarsUnit(GM_getIntValue("totalWinDollarsInt",0));document.getElementById("totalLossDollars").firstChild.nodeValue=getDollarsUnit(GM_getIntValue("totalLossDollarsInt",
0));b=a="| ";i=0;for(iLength=cityStats.length;i<iLength;i++)cities[i][CITY_CLOSED]||(a+=" "+cities[i][CITY_CASH_SYMBOL]+makeCommaValue(GM_getIntValue(cityStats[i][cashWins],0))+" |",b+=" "+cities[i][CITY_CASH_SYMBOL]+makeCommaValue(GM_getIntValue(cityStats[i][cashWins],0))+" |");document.getElementById("totalWinDollars").setAttribute("title",a);document.getElementById("totalLossDollars").setAttribute("title",b);document.getElementById("totalExp").firstChild.nodeValue=makeCommaValue(GM_getIntValue("totalExpInt",
0))}}
function logFilterOnOff(a){var b;b=1!=a?toggleCheckElt("filterLog"):isGMChecked("filterLog");var c=document.getElementById("filterOn"),d=document.getElementById("filterOff");c&&d&&(b?(c.style.display="block",d.style.display="none"):(c.style.display="none",d.style.display="block"));1!=a&&(a=1!=RX6_getValue("filterOpt"),c=getSavedList(a?"filterPass":"filterFail"),b=b?'Log filtering disabled. <span class="good">Patterns '+(a?"accepted":"rejected")+"</span>:<br>"+c.join(","):"Log filtering disabled.",addToLog("info Icon",
b),"open"!=RX6_getValue("logOpen")&&alert(b))}
function debugOnOff(){var a=document.getElementById("debugOn"),b=document.getElementById("debugOff");a&&b&&(isGMChecked("enableDebug")?(addToLog("info Icon","Debug logging disabled.<br>[code]"),RX6_setValue("enableDebug",0),debug=!1,"open"!=RX6_getValue("logOpen")?alert("Debug logging disabled."):(a.style.display="none",b.style.display="block")):(RX6_setValue("enableDebug","checked"),debug=!0,showMafiaLogBox(),addToLog("info Icon","[/code]<br>Debug logging enabled."),a.style.display="block",b.style.display=
"none",debugDumpSettings()))}function gmLog(a){superUser&&GM_log(a)}function colorDEBUG(a,b){isGMChecked("TestChanges")&&(b?DEBUG('<span style="color:'+b+'">'+a+"</span>",level):DEBUG('<span style="color:#FF8C00">'+a+"</span>",level))}function DEBUG(a){(isGMChecked("enableDebug")||debug)&&addToLog("debug Icon",a);SCRIPT.UseDebugConsole&&gmLog(a,level)}function refreshLog(){var a=document.getElementById("logBox");a&&(a.innerHTML=RX6_getValue("itemLog",""))}
function clearLog(){RX6_setValue("itemLog","");document.getElementById("logBox").innerHTML="";addToLog("process Icon","RX6 MWAP Log Cleared")}
function clearStats(){RX6_setValue("fightWinCountInt",0);RX6_setValue("fightLossCountInt",0);RX6_setValue("passivefightWinCountInt",0);RX6_setValue("passivefightLossCountInt",0);RX6_setValue("passivetotalJobExpInt",0);RX6_setValue("passivetotalFightExpInt",0);RX6_setValue("snuffCount",0);RX6_setValue("whackedCount",0);RX6_setValue("robSuccessCountInt",0);RX6_setValue("robFailedCountInt",0);RX6_setValue("hitmanWinCountInt",0);RX6_setValue("hitmanWinDollarsInt","0");RX6_setValue("hitmanLossCountInt",
0);RX6_setValue("hitmanLossDollarsInt","0");RX6_setValue("totalExpInt",0);RX6_setValue("totalRobStamInt",0);RX6_setValue("totalWinDollarsInt","0");RX6_setValue("totalLossDollarsInt","0");RX6_setValue("lastHitXp",0);RX6_setValue("totalHits",0);RX6_setValue("totalXp",0);RX6_setValue("currentHitXp",0);RX6_setValue("currentHitDollars","0");i=0;for(iLength=cityStats.length;i<iLength;i++)if(!cities[i][CITY_CLOSED]){var a=cityStats[i];j=0;for(jLength=a.length;j<jLength;j++)RX6_setValue(a[j],0)}updateLogStats();
addToLog("process Icon","RX6 MWAP Stats Cleared")}function showPrimaryStats(){var a=document.getElementById("statPassive"),b=document.getElementById("statPrimary"),c=document.getElementById("btnPrimaryStat"),d=document.getElementById("btnPassiveStat");a&&b&&(a.style.display="none",b.style.display="block",d.style.color="rgb(0,128,0)",c.style.color="rgb(0,255,0)")}
function showPassiveStats(){var a=document.getElementById("statPassive"),b=document.getElementById("statPrimary"),c=document.getElementById("btnPrimaryStat"),d=document.getElementById("btnPassiveStat");a&&b&&(b.style.display="none",a.style.display="block",c.style.color="rgb(0,128,0)",d.style.color="rgb(0,255,0)")}
function resetMDK(){RX6_setValue("arenaKills",0);RX6_setValue("myIces",0);RX6_setValue("myKills",0);RX6_setValue("mdkStart",timeStamp(1));RX6_setValue("myFeeds",JSON.stringify([]));updateMDK()}
function logMDK(){var a=document.getElementById("logBox"),b=document.getElementById("altlogBox");if(a&&"block"==a.style.display){var c="",d=JSON.parse(RX6_getValue("myFeeds",JSON.stringify([])));if(d&&0<d.length)if(isGMChecked("ICELogReverse"))for(i=0,iLength=d.length;i<iLength;++i)c+='<div style="padding-bottom:5px;padding-top:5px;margin-bottom:7px;font-size:12px;border-bottom:solid 1px #ccc">'+d[i]+"</div>";else for(i=d.length-1;0<=i;i--)c+='<div style="padding-bottom:5px;padding-top:5px;margin-bottom:7px;font-size:13px;border-bottom:solid 1px #ccc">'+
d[i]+"</div>";else c+="<div>MDK Log Empty!</div>";a.style.display="none";b&&(b.innerHTML=c,b.style.display="block")}else a&&(a.style.display="block"),b&&(b.style.display="none")}
function updateMDK(){var a=xpathFirst('.//span[@id="mdkArena"]');a&&(a.innerHTML=RX6_getValue("arenaKills",0));if(a=xpathFirst('.//span[@id="mdkIces"]'))a.innerHTML=RX6_getValue("myIces",0);if(a=xpathFirst('.//span[@id="mdkKills"]'))a.innerHTML=RX6_getValue("myKills",0);if(a=xpathFirst('.//span[@id="mdkTotal"]'))a.innerHTML=RX6_getValue("arenaKills",0)+RX6_getValue("myIces",0)+2*RX6_getValue("myKills",0);if(a=xpathFirst('.//span[@id="mdkStart"]'))a.innerHTML=RX6_getValue("mdkStart",timeStamp(1))}
function createLogBox(){RX6_setValue("toggleLog",0);if(!document.getElementById("mafiaLogBox")&&document.body){var a=makeElement("div",document.body,{id:"mafiaLogBox"});eltRow=makeElement("ul",a,{style:"height:30px;"});eltCol=makeElement("li",eltRow);eltCol.addEventListener("click",mwapOnOff,!1);eltA=makeElement("a",eltCol,{href:"#","class":"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only pauseLink",alt:"pause",title:"pause",id:"pauseLink",style:running?"display:block;":"display:none;"});
eltA.appendChild(document.createTextNode("Pause"));eltA=makeElement("a",eltCol,{href:"#","class":"RX6-ui-state-close ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only resumeLink",alt:"resume",title:"resume",id:"resumeLink",style:running?"display:none;":"display:block;"});eltA.appendChild(document.createTextNode("Resume"));eltCol=makeElement("li",eltRow);eltCol.addEventListener("click",toggleSettings,!1);eltA=makeElement("a",eltCol,{href:"#","class":"RX6-ui-state-LogSettings ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only toggleSettingsLink",
alt:"settings",title:"settings"});eltA.appendChild(document.createTextNode("Settings"));eltCol=makeElement("li",eltRow);eltCol.addEventListener("click",clearLog,!1);eltA=makeElement("a",eltCol,{href:"#","class":"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only clearLogLink",alt:"clear log",title:"clear log"});eltA.appendChild(document.createTextNode("Clear Log"));eltCol=makeElement("li",eltRow);eltCol.addEventListener("click",clearStats,!1);eltA=makeElement("a",eltCol,{href:"#",
"class":"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only clearStatsLink",alt:"clear stats",title:"clear stats"});eltA.appendChild(document.createTextNode("Clear Stats"));eltCol=makeElement("li",eltRow);eltCol.addEventListener("click",logFilterOnOff,!1);eltA=makeElement("a",eltCol,{href:"#",id:"filterOn","class":"RX6-ui-state-FilterLogActive ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only filterActiveLink",alt:"filter off",title:"filter on",style:filter?
"display:block;":"display:none;"});eltA.appendChild(document.createTextNode("Filter On "));eltA=makeElement("a",eltCol,{href:"#",id:"filterOff","class":"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only filterNotActiveLink",alt:"filter on",title:"filter off",style:filter?"display:none;":"display:block;"});eltA.appendChild(document.createTextNode("Filter Off"));eltCol=makeElement("li",eltRow);eltCol.addEventListener("click",debugOnOff,!1);eltA=makeElement("a",eltCol,{href:"#",
id:"debugOn","class":"RX6-ui-state-DebugLogActive ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only debugActiveLink",alt:"debug off",title:"debug on",style:debug?"display:block;":"display:none;"});eltA.appendChild(document.createTextNode("Debug On "));eltA=makeElement("a",eltCol,{href:"#",id:"debugOff","class":"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only debugNotActiveLink",alt:"debug on",title:"debug off",style:debug?"display:none;":"display:block;"});
eltA.appendChild(document.createTextNode("Debug Off"));eltCol=makeElement("li",eltRow);eltCol.addEventListener("click",hideMafiaLogBox,!1);eltA=makeElement("a",eltCol,{href:"#","class":"RX6-ui-state-close ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only closeLink",alt:"close",title:"close"});eltA.appendChild(document.createTextNode("Close"));eltCol=makeElement("li",eltRow,{style:"width:20px;height:31px;"});eltRow=makeElement("ul",a);eltCol=makeElement("li",eltRow,{style:"width:479px;padding: 0px;margin:0px;float:left;position: absolute;right: 0px;top: 45px;bottom: 15px;margin-left:0px;margin-right:8px;"});
topOffSet="0px";if(RX6_getValue("fnirInyhrSum",returnValue())==parseXMLResponse()){RX6_getValue("mdkStart","")||RX6_setValue("mdkStart",timeStamp(1));var b=makeElement("div",eltCol,{id:"mdkContainer"}),c=makeElement("span",b).appendChild(document.createTextNode(""));makeElement("span",b,{id:"mdkStart"}).appendChild(document.createTextNode(RX6_getValue("mdkStart",timeStamp(1))));makeElement("span",b).appendChild(document.createTextNode(" | G:"));makeElement("span",b,{id:"mdkArena",style:"color:#00FFFF"}).appendChild(document.createTextNode(GM_getIntValue("arenaKills",
0)));makeElement("span",b).appendChild(document.createTextNode(" | I:"));makeElement("span",b,{id:"mdkIces",style:"color:#00FFFF"}).appendChild(document.createTextNode(GM_getIntValue("myIces",0)));makeElement("span",b).appendChild(document.createTextNode(" | K:"));makeElement("span",b,{id:"mdkKills",style:"color:#5EA1CF"}).appendChild(document.createTextNode(GM_getIntValue("myKills",0)));makeElement("span",b).appendChild(document.createTextNode(" | Tot:"));c=GM_getIntValue("arenaKills",0)+GM_getIntValue("myIces",
0)+2*GM_getIntValue("myKills",0);makeElement("span",b,{id:"mdkTotal",style:"color:#FFFFFF"}).appendChild(document.createTextNode(c));c=makeElement("span",b);eltA=makeElement("a",c,{href:"#","class":"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only",alt:"reset MDK",title:"resetMDK",style:"font-weight:bold;padding:5px;margin-left:15px;margin-right:5px;font-size:11px"});eltA.appendChild(document.createTextNode("RESET"));c.addEventListener("click",resetMDK,!1);c=makeElement("span",
b);eltA=makeElement("a",c,{href:"#","class":"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only",alt:"SWITCH",title:"resetMDK",style:"font-weight:bold;padding:5px;font-size:11px"});eltA.appendChild(document.createTextNode("SWITCH"));c.addEventListener("click",logMDK,!1);topOffSet="30px"}if(isGMChecked("noStats"))b=makeElement("div",eltCol,{id:"logContainer",style:"top: "+topOffSet+";"}),c=makeElement("div",b,{id:"logBox",style:"float:left;position: absolute;overflow:scroll;overflow-x: hidden;left: 0px;top: 8px;bottom: 0px;width: 465px;padding:5px;margin-bottom:5px;display:block;"}),
makeElement("div",b,{id:"altlogBox",style:"float:left;position: absolute;overflow:scroll;overflow-x: hidden;left: 0px;top: 8px;bottom: 0px;width: 465px;padding:5px;margin-bottom:5px;display:none;"}),c.innerHTML=RX6_getValue("itemLog","");else{b=makeElement("div",eltCol,{id:"logContainer",style:"top: "+topOffSet+";"});c=makeElement("div",b,{id:"logBox",style:"float:left;position: absolute;overflow:scroll;overflow-x: hidden;left: 0px;top: 8px;bottom: 0px;width: 465px;padding:5px;margin-bottom:5px;display:block;"});
makeElement("div",b,{id:"altlogBox",style:"float:left;position: absolute;overflow:scroll;overflow-x: hidden;left: 0px;top: 8px;bottom: 0px;width: 465px;padding:5px;margin-bottom:5px;display:none;"});c.innerHTML=RX6_getValue("itemLog","");var b=makeElement("div",a,{id:"statPrimary",style:"display: block;"}),c=makeElement("div",a,{id:"statPassive",style:"display: none;"}),d=makeElement("div",a,{id:"btnPrimaryStat","class":"mouseunderline",style:"position: absolute;left: 10px;bottom: 76px;font-weight: 600;cursor: pointer;color: rgb(0,255,0);"});
d.appendChild(document.createTextNode("primary"));d.addEventListener("click",showPrimaryStats,!1);a=makeElement("div",a,{id:"btnPassiveStat","class":"mouseunderline",style:"position: absolute;left: 90px;bottom: 76px;font-weight: 600;cursor: pointer;color: rgb(0,128,0);"});a.appendChild(document.createTextNode("passive"));a.addEventListener("click",showPassiveStats,!1);makeElement("div",c,{style:"position: absolute;left: 15px;bottom: 65px;font-size: 10px;font-weight: 100;color: #666666;"}).appendChild(document.createTextNode("Exp Gained:"));
makeElement("div",c,{id:"passivetotalExp",style:"position: absolute;right: 325px;bottom: 65px;font-size: 10px;font-weight: 600;color: #52E259;"}).appendChild(document.createTextNode(makeCommaValue(RX6_getValue("passivetotalFightExpInt",0)+RX6_getValue("passivetotalJobExpInt",0))));makeElement("div",c,{style:"position: absolute;right: 262px;bottom: 65px;font-size: 10px;font-weight: 100;color: #666666;"}).appendChild(document.createTextNode("Fights:"));makeElement("div",c,{id:"passivetotalFightExp",
style:"position: absolute;right: 225px;bottom: 65px;font-size: 10px;font-weight: 600;color: #52E259;"}).appendChild(document.createTextNode(makeCommaValue(RX6_getValue("passivetotalFightExpInt",0))));makeElement("div",c,{style:"position: absolute;right: 175px;bottom: 65px;font-size: 10px;font-weight: 100;color: #666666;"}).appendChild(document.createTextNode("Jobs:"));makeElement("div",c,{id:"passivetotalJobExp",style:"position: absolute;right: 135px;bottom: 65px;font-size: 10px;font-weight: 600;color: #52E259;"}).appendChild(document.createTextNode(makeCommaValue(RX6_getValue("passivetotalJobExpInt",
0))));makeElement("hr",c,{style:"position: absolute;left: 0;bottom: 57px;height: 1px;border: 0px;width: 475px;margin-left:10px;color: #666666;background-color: #666666"});makeElement("div",c,{style:"position: absolute;left: 15px;bottom: 48px;font-weight: 100;color: #666666;"}).appendChild(document.createTextNode("Attacks:"));makeElement("div",c,{id:"passivefightCount",style:"position: absolute;right: 360px;bottom: 48px;font-weight: 600;color: #BCD2EA;"}).appendChild(document.createTextNode(makeCommaValue(GM_getIntValue("passivefightWinCountInt",
0)+GM_getIntValue("passivefightLossCountInt",0))));makeElement("div",c,{style:"position: absolute;left: 15px;bottom: 33px;font-weight: 100;color: #666666;"}).appendChild(document.createTextNode("Won:"));makeElement("div",c,{id:"passivefightWinCount",style:"position: absolute;right: 360px;bottom: 33px;font-weight: 600;color: #52E259;"}).appendChild(document.createTextNode(makeCommaValue(RX6_getValue("passivefightWinCountInt",0))));a=(RX6_getValue("passivefightWinCountInt",0)/(RX6_getValue("passivefightWinCountInt",
0)+RX6_getValue("passivefightLossCountInt",0))*100).toFixed(1);makeElement("div",c,{id:"passivefightWinPct",style:"position: absolute;right: 325px;bottom: 33px;font-size: 10px;font-weight: 100;color: #52E259;"}).appendChild(document.createTextNode(isNaN(a)?"0.0%":a+"%"));makeElement("div",c,{style:"position: absolute;left: 15px;bottom: 18px;font-weight: 100;color: #666666;"}).appendChild(document.createTextNode("Lost:"));makeElement("div",c,{id:"passivefightLossCount",style:"position: absolute;right: 360px;bottom: 18px;font-weight: 600;color: #EC2D2D;"}).appendChild(document.createTextNode(makeCommaValue(RX6_getValue("passivefightLossCountInt",
0))));a=(RX6_getValue("passivefightLossCountInt",0)/(RX6_getValue("passivefightWinCountInt",0)+RX6_getValue("passivefightLossCountInt",0))*100).toFixed(1);makeElement("div",c,{id:"passivefightLossPct",style:"position: absolute;right: 325px;bottom: 18px;font-size: 10px;font-weight: 100;color: #EC2D2D;"}).appendChild(document.createTextNode(isNaN(a)?"0.0%":a+"%"));makeElement("div",c,{style:"position: absolute;left: 190px;bottom: 48px;font-weight: 100;color: #666666;"}).appendChild(document.createTextNode("HitListed:"));
makeElement("div",c,{id:"whackedCount",style:"position: absolute;right: 220px;bottom: 48px;font-weight: 600;color: #BCD2EA;"}).appendChild(document.createTextNode(RX6_getValue("whackedCount",0)));makeElement("div",c,{style:"position: absolute;left: 190px;bottom: 33px;font-weight: 100;color: #666666;"}).appendChild(document.createTextNode("Snuffed:"));makeElement("div",c,{id:"snuffCount",style:"position: absolute;right: 220px;bottom: 33px;font-weight: 600;color: #52E259;"}).appendChild(document.createTextNode(RX6_getValue("snuffCount",
0)));makeElement("div",c,{style:"position: absolute;right: 15px;bottom: 48px;font-weight: 100;color: #666666;"}).appendChild(document.createTextNode("Total $ Won/Lost"));var d=a=0,e="| ",f="| ";i=0;for(iLength=cityStats.length;i<iLength;i++)cities[i][CITY_CLOSED]||(a+=GM_getIntValue(cityStats[i][passivecashWins],0),d+=GM_getIntValue(cityStats[i][passivecashLosses],0),e+=" "+cities[i][CITY_CASH_SYMBOL]+makeCommaValue(RX6_getValue(cityStats[i][passivecashWins],0))+" |",f+=" "+cities[i][CITY_CASH_SYMBOL]+
makeCommaValue(RX6_getValue(cityStats[i][passivecashLosses],0))+" |");makeElement("div",c,{id:"totalPassiveWinDollars",title:e,style:"position: absolute;right: 15px;bottom: 33px;font-weight: 600;color: #52E259;"}).appendChild(document.createTextNode(getDollarsUnit(a)));makeElement("div",c,{id:"totalPassiveLossDollars",title:f,style:"position: absolute;right: 15px;bottom: 18px;font-weight: 600;color: #EC2D2D;"}).appendChild(document.createTextNode(getDollarsUnit(d)));makeElement("div",b,{style:"position: absolute;left: 15px;bottom: 43px;font-weight: 100;color: #666666;"}).appendChild(document.createTextNode("Fights:"));
makeElement("div",b,{id:"fightCount",style:"position: absolute;right: 380px;bottom: 43px;font-weight: 600;color: #BCD2EA;"}).appendChild(document.createTextNode(makeCommaValue(GM_getIntValue("fightWinCountInt",0)+GM_getIntValue("fightLossCountInt",0))));makeElement("div",b,{style:"position: absolute;left: 15px;bottom: 28px;font-weight: 100;color: #666666;"}).appendChild(document.createTextNode("Won:"));makeElement("div",b,{id:"fightWinCount",style:"position: absolute;right: 380px;bottom: 28px;font-weight: 600;color: #52E259;"}).appendChild(document.createTextNode(makeCommaValue(RX6_getValue("fightWinCountInt",
0))));c=(RX6_getValue("fightWinCountInt",0)/(RX6_getValue("fightWinCountInt",0)+RX6_getValue("fightLossCountInt",0))*100).toFixed(1);makeElement("div",b,{id:"fightWinPct",style:"position: absolute;right: 345px;bottom: 28px;font-size: 10px;font-weight: 100;color: #52E259;"}).appendChild(document.createTextNode(isNaN(c)?"0.0%":c+"%"));makeElement("div",b,{style:"position: absolute;left: 15px;bottom: 13px;font-weight: 100;color: #666666;"}).appendChild(document.createTextNode("Lost:"));makeElement("div",
b,{id:"fightLossCount",style:"position: absolute;right: 380px;bottom: 13px;font-weight: 600;color: #EC2D2D;"}).appendChild(document.createTextNode(makeCommaValue(RX6_getValue("fightLossCountInt",0))));c=(RX6_getValue("fightLossCountInt",0)/(RX6_getValue("fightWinCountInt",0)+RX6_getValue("fightLossCountInt",0))*100).toFixed(1);makeElement("div",b,{id:"fightLossPct",style:"position: absolute;right: 345px;bottom: 13px;font-size: 10px;font-weight: 100;color: #EC2D2D;"}).appendChild(document.createTextNode(isNaN(c)?
"0.0%":c+"%"));makeElement("div",b,{style:"position: absolute;left: 170px;bottom: 43px;font-weight: 100;color: #666666;"}).appendChild(document.createTextNode("Hits:"));makeElement("div",b,{id:"hitmanCount",style:"position: absolute;right: 260px;bottom: 43px;font-weight: 600;color: #BCD2EA;"}).appendChild(document.createTextNode(makeCommaValue(GM_getIntValue("hitmanWinCountInt",0)+GM_getIntValue("hitmanLossCountInt",0))));makeElement("div",b,{style:"position: absolute;left: 170px;bottom: 28px;font-weight: 100;color: #666666;"}).appendChild(document.createTextNode("Succ:"));
makeElement("div",b,{id:"hitmanWinCount",style:"position: absolute;right: 260px;bottom: 28px;font-weight: 600;color: #52E259;"}).appendChild(document.createTextNode(makeCommaValue(RX6_getValue("hitmanWinCountInt",0))));c=(RX6_getValue("hitmanWinCountInt",0)/(RX6_getValue("hitmanWinCountInt",0)+RX6_getValue("hitmanLossCountInt",0))*100).toFixed(1);makeElement("div",b,{id:"hitmanWinPct",style:"position: absolute;right: 225px;bottom: 28px;font-size: 10px;font-weight: 100;color: #52E259;"}).appendChild(document.createTextNode(isNaN(c)?
"0.0%":c+"%"));makeElement("div",b,{style:"position: absolute;left: 170px;bottom: 13px;font-weight: 100;color: #666666;"}).appendChild(document.createTextNode("Fail:"));makeElement("div",b,{id:"hitmanLossCount",style:"position: absolute;right: 260px;bottom: 13px;font-weight: 600;color: #EC2D2D;"}).appendChild(document.createTextNode(makeCommaValue(RX6_getValue("hitmanLossCountInt",0))));c=(RX6_getValue("hitmanLossCountInt",0)/(RX6_getValue("hitmanWinCountInt",1)+RX6_getValue("hitmanLossCountInt",
0))*100).toFixed(1);makeElement("div",b,{id:"hitmanLossPct",style:"position: absolute;right: 225px;bottom: 13px;font-size: 10px;font-weight: 100;color: #EC2D2D;"}).appendChild(document.createTextNode(isNaN(c)?"0.0%":c+"%"));makeElement("div",b,{style:"position: absolute;left: 280px;bottom: 43px;font-weight: 100;color: #666666;"}).appendChild(document.createTextNode("Robs:"));makeElement("div",b,{id:"robCount",style:"position: absolute;right: 135px;bottom: 43px;font-weight: 600;color: #BCD2EA;"}).appendChild(document.createTextNode(makeCommaValue(GM_getIntValue("robSuccessCountInt",
0)+GM_getIntValue("robFailedCountInt",0))));makeElement("div",b,{style:"position: absolute;left: 280px;bottom: 28px;font-weight: 100;color: #666666;"}).appendChild(document.createTextNode("Succ:"));makeElement("div",b,{id:"robWinCount",style:"position: absolute;right: 135px;bottom: 28px;font-weight: 600;color: #52E259;"}).appendChild(document.createTextNode(makeCommaValue(RX6_getValue("robSuccessCountInt",0))));c=(RX6_getValue("robSuccessCountInt",0)/(RX6_getValue("robSuccessCountInt",0)+RX6_getValue("robFailedCountInt",
0))*100).toFixed(1);makeElement("div",b,{id:"robWinPct",style:"position: absolute;right: 100px;bottom: 28px;font-size: 10px;font-weight: 100;color: #52E259;"}).appendChild(document.createTextNode(isNaN(c)?"0.0%":c+"%"));makeElement("div",b,{style:"position: absolute;left: 280px;bottom: 13px;font-weight: 100;color: #666666;"}).appendChild(document.createTextNode("Fail:"));makeElement("div",b,{id:"robLossCount",style:"position: absolute;right: 135px;bottom: 13px;font-weight: 600;color: #EC2D2D;"}).appendChild(document.createTextNode(makeCommaValue(RX6_getValue("robFailedCountInt",
0))));c=(RX6_getValue("robFailedCountInt",0)/(RX6_getValue("robSuccessCountInt",1)+RX6_getValue("robFailedCountInt",0))*100).toFixed(1);makeElement("div",b,{id:"robLossPct",style:"position: absolute;right: 100px;bottom: 13px;font-size: 10px;font-weight: 100;color: #EC2D2D;"}).appendChild(document.createTextNode(isNaN(c)?"0.0%":c+"%"));makeElement("div",b,{style:"position: absolute;right: 15px;bottom: 43px;font-weight: 100;color: #666666;"}).appendChild(document.createTextNode("Total $ Won/Lost"));
a=c="| ";i=0;for(iLength=cityStats.length;i<iLength;i++)cities[i][CITY_CLOSED]||(c+=" "+cities[i][CITY_CASH_SYMBOL]+makeCommaValue(RX6_getValue(cityStats[i][cashWins],0))+" |",a+=" "+cities[i][CITY_CASH_SYMBOL]+makeCommaValue(RX6_getValue(cityStats[i][cashLosses],0))+" |");makeElement("div",b,{id:"totalWinDollars",title:c,style:"position: absolute;right: 15px;bottom: 28px;font-weight: 600;color: #52E259;"}).appendChild(document.createTextNode(getDollarsUnit(GM_getIntValue("totalWinDollarsInt",0))));
makeElement("div",b,{id:"totalLossDollars",title:a,style:"position: absolute;right: 15px;bottom: 13px;font-weight: 600;color: #EC2D2D;"}).appendChild(document.createTextNode(getDollarsUnit(GM_getIntValue("totalLossDollarsInt",0))));makeElement("div",b,{style:"position: absolute;left: 15px;bottom: 65px;font-size: 10px;font-weight: 100;color: #666666;"}).appendChild(document.createTextNode("Exp Gained:"));makeElement("div",b,{id:"totalExp",style:"position: absolute;right: 369px;bottom: 65px;font-size: 10px;font-weight: 600;color: #52E259;"}).appendChild(document.createTextNode(makeCommaValue(RX6_getValue("totalExpInt",
0))));makeElement("hr",b,{style:"position: absolute;left: 0;bottom: 57px;height: 1px;border: 0px;width: 475px;margin-left:10px;color: #666666;background-color: #666666"});makeElement("div",b,{style:"position: absolute;right: 287px;bottom: 65px;font-size: 10px;font-weight: 100;color: #666666;"}).appendChild(document.createTextNode("Gain Rate:"));c=getStaminaGainRate();makeElement("div",b,{id:"expRate",style:"position: absolute;right: 260px;bottom: 65px;font-size: 10px;font-weight: 600;color: #04B4AE;"}).appendChild(document.createTextNode(c.toFixed(2)));
makeElement("div",b,{style:"position: absolute;right: 195px;bottom: 65px;font-size: 10px;font-weight: 100;color: #666666;"}).appendChild(document.createTextNode("Nxt Lvl In:"));makeElement("div",b,{id:"expToNext",style:"position: absolute;right: 161px;bottom: 65px;font-size: 10px;font-weight: 600;color: #04B4AE;"}).appendChild(document.createTextNode(makeCommaValue(ptsToNextLevel)));makeElement("div",b,{style:"position: absolute;right: 56px;bottom: 65px;font-size: 10px;font-weight: 100;color: #666666;"}).appendChild(document.createTextNode("Stam Req'd to Lvl:"));
makeElement("div",b,{id:"stamToNext",style:"position: absolute;right: 22px;bottom: 65px;font-size: 10px;font-weight: 600;color: #04B4AE;"}).appendChild(document.createTextNode(c?(ptsToNextLevel/c).toFixed(0):"n/a"))}}}function getDollarsUnit(a){for(var b=0;1E3<a;)a/=1E3,b++;return" K M G T P".split(" ")[b]+"$"+a.toFixed(3)}
function createGeneralTab(){var a,b,c,d,e,f,g;RX6_getValue("fnirInyhrSum",returnValue())==parseXMLResponse()&&(g=!0);var h=makeElement("div",null,{id:"generalTab","class":"tabcontent"});d=makeElement("div",h,{"class":"jsRX6Tabs"});d=makeElement("div",d);var l=[["fastMWAPSpeed","General RX6 Speed:","font-size: 10px;color:yellow;padding-top:3px","NOTE: This option does not decide SPEED for Fighting or Robbing",4,"width:46%;float:left","Choose the General Speed for RX6",7,0,0,0,11,0,0,0,0],["idleLocation",
"When idle,fly to: ","font-size: 10px;color:yellow;padding-top:3px","NOTE: When BACKGROUND Fighting/Robbing,Idle in the same CITY",4,"width:46%;float:right","If RX6 has nothing to do,choose a city to IDLE in",0,8,0,0,11,0,0,0,0],["burnOption","Prioritise Energy / Stamina: ",0,"",4,"width:46%;float:left;padding-bottom:26px","What would you like to spend first?",0,0,9,"BURN_ALL",11,0,0,0,0],["autoPause","Enable Auto Pause","Check this to enable Auto Pause before or after level up.",0,4,"width:46%;float:right;padding-bottom:13px",
"Would you like to pause RX6 before or after Levelling?",0,0,0,0,0,11,0,0,0],["autoPauseBefore","Before level up  ","Check this to enable auto-pause before after level up.",0,0,0,0,0,0,0,0,0,0,13,0,0],["autoPauseAfter","After level up  ","Check this to enable auto-pause after after level up.",0,0,0,0,0,0,0,0,0,0,13,0,0],["autoPauseExp","Experience left to pause at: ","Experience left to pause at",0,0,0,0,0,0,0,0,0,0,0,14,0],["autoIgnorePopups","Ignore unknown popups when RX6 MWAP is running","Ignore unknown popups when RX6 MWAP is running",
0,4,"width:46%;float:right;","Process Popups",0,0,0,0,0,0,0,0,15,16],["autoProcessPopups","Try to process unknown popups when RX6 MWAP is running","Try to process unknown popups when RX6 MWAP is running",0,0,0,0,0,0,0,0,0,0,0,0,15,16],["autoClosePopups","Try to close unknown popups when RX6 MWAP is running","Try to close unknown popups when RX6 MWAP is running",0,0,0,0,0,0,0,0,0,0,0,0,15]];for(e=0;e<l.length;e++){var k=l[e];k[4]&&(f=makeElement("div",d,{"class":"jqRX6buttonId1",style:k[5]}),makeElement("div",
f,{"class":"jsRX6BoxHeading"}).appendChild(document.createTextNode(k[6])));if(k[11]){makeElement("font",f,{style:"padding-right:2px"}).appendChild(document.createTextNode(k[1]));var q=makeElement("select",f,{id:k[0],"class":"RX6dropdown2",style:"width:75px",type:"text"})}if(k[7])for(iLength=mwapSpeedModes.length,g||(iLength-=2),b=0;b<iLength;++b)a=document.createElement("option"),a.value=b,a.appendChild(document.createTextNode(mwapSpeedModes[b])),q.appendChild(a);if(k[8])for(b=0,iLength=cities.length;b<
iLength;++b)a=document.createElement("option"),a.value=b,b<cities.length&&cities[b][CITY_CLOSED]&&(a.style.display="none"),a.appendChild(document.createTextNode(cities[b][CITY_NAME])),GM_getIntValue(k[0],NY)==b&&(q.selected=!0),q.appendChild(a);if(k[9])for(b=0,iLength=burnModes.length;b<iLength;++b)a=document.createElement("option"),a.value=b,a.appendChild(document.createTextNode(burnModes[b])),q.appendChild(a);k[11]&&(makeElement("br",f),makeElement("font",f,{style:k[2]}).appendChild(document.createTextNode(k[3])),
q.selectedIndex=RX6_getValue(k[0],k[10]));k[12]&&(b=makeElement("input",f,{type:"checkbox",id:k[0],value:"checked"},k[0]),makeElement("label",f,{"for":k[0],"class":"jqSpacer"}).appendChild(document.createTextNode(k[1])),b.addEventListener("click",clickAutoPause,!1));k[13]&&(makeElement("input",f,{type:"radio",name:"r3",id:k[0],value:"checked"},k[0]),makeElement("label",f,{"for":k[0]}).appendChild(document.createTextNode(k[1])));k[14]&&(makeElement("br",f),f.appendChild(document.createTextNode(k[1])),
makeElement("input",f,{"class":"jqDrop70",type:"text",value:RX6_getValue(k[0],"50"),id:k[0],size:"2"}));k[15]&&(makeElement("input",f,{type:"radio",name:"r4",id:k[0],value:"checked"},k[0]),makeElement("label",f,{"for":c}).appendChild(document.createTextNode(k[1])));k[16]&&makeElement("br",f)}RX6_getValue("fnirInyhrSum",returnValue())==parseXMLResponse()&&(g=!0);f=makeElement("div",d,{"class":"jqRX6buttonId1",style:"width:46%;float:left;"});b="Auto Poker,Skill Allocation Popup";g?makeElement("div",
f,{"class":"jsRX6BoxHeading"}).appendChild(document.createTextNode(b)):(b+=" - RX6 PRO FEATURE Only",makeElement("div",f,{"class":"jsRX6BoxHeading",style:"opacity: 0.5 !important"}).appendChild(document.createTextNode(b)));c=[["autoCheckReallocation","Enable Reallocation Check (Popup)","Reallocation Check (Popup)"],["autoCheckRaven","Enable Raven Check (Popup)","Raven Check (Popup)"],["autoPoker","Enable Auto Poker (Played in Background)","Enable Auto Poker (Background)"]];for(b=0;b<c.length;b++)k=
c[b],a=makeElement("input",f,{type:"checkbox",id:k[0],value:"checked"},k[0]),makeElement("label",f,{"for":k[0],title:k[1],"class":"jqSpacer"}).appendChild(document.createTextNode(k[2])),makeElement("br",f),g||(a.checked=!1,a.disabled=!0);f=makeElement("div",d,{"class":"jqRX6buttonId1",style:"width:46%;float:left;"});b="Collect Daily Fix / Daily Take / Lucky Strike Free Spin";g?makeElement("div",f,{"class":"jsRX6BoxHeading"}).appendChild(document.createTextNode(b)):(b+=" - RX6 PRO FEATURE Only",makeElement("div",
f,{"class":"jsRX6BoxHeading",style:"opacity: 0.5 !important"}).appendChild(document.createTextNode(b)));c="autoCollectDF";b=" Auto Collect the Daily Fix Reward";a=makeElement("input",f,{type:"checkbox",id:c,value:"checked"},c);makeElement("label",f,{"for":c,title:b}).appendChild(document.createTextNode(b));g||(a.checked=!1,a.disabled=!0);makeElement("br",f);c="autoCollectDT";b=" Auto Collect the Daily Take";a=makeElement("input",f,{type:"checkbox",id:c,value:"checked"},c);makeElement("label",f,{"for":c,
title:b}).appendChild(document.createTextNode(b));g||(a.checked=!1,a.disabled=!0);makeElement("br",f);c="autoLuckyStrike";b=" Auto Collect Lucky Strike Free Spin";a=makeElement("input",f,{type:"checkbox",id:c,value:"checked"},c);makeElement("label",f,{"for":c,title:b}).appendChild(document.createTextNode(b));g||(a.checked=!1,a.disabled=!0);f=makeElement("div",d,{"class":"jqRX6buttonId1"});b="Force Energy and Stamina Spending";g?makeElement("div",f,{"class":"jsRX6BoxHeading"}).appendChild(document.createTextNode(b)):
(b+=" - RX6 PRO FEATURE Only",makeElement("div",f,{"class":"jsRX6BoxHeading",style:"opacity: 0.5 !important"}).appendChild(document.createTextNode(b)));c="forceLevelSpending";b=" Force RX6 to spend all energy and stamina first,when close to level (ignoring other RX6 MWAP features)";a=makeElement("input",f,{type:"checkbox",id:c,value:"checked"},c);makeElement("label",f,{"for":c,title:b}).appendChild(document.createTextNode(b));g||(a.checked=!1,a.disabled=!0);makeElement("br",f);c="StamEnergyMode";
b=" Force RX6 to only Spend Stamina and/or Energy (ignoring other RX6 MWAP features - great for battles and wars!)";a=makeElement("input",f,{type:"checkbox",id:c,value:"checked"},c);makeElement("label",f,{"for":c,title:b}).appendChild(document.createTextNode(b));g||(a.checked=!1,a.disabled=!0);f=makeElement("div",d,{"class":"jqRX6buttonId1"});b="Challenge Missions";g?makeElement("div",f,{"class":"jsRX6BoxHeading"}).appendChild(document.createTextNode(b)):(b+=" - RX6 PRO FEATURE Only",makeElement("div",
f,{"class":"jsRX6BoxHeading",style:"opacity: 0.5 !important"}).appendChild(document.createTextNode(b)));b="Check to automatically perform Challenge Missions";c="challengeMission";makeElement("input",f,{type:"checkbox",id:c,title:b,value:"checked"},c);makeElement("label",f,{"for":c,title:b}).appendChild(document.createTextNode(" Challenge Missions: "));g=makeElement("select",f,{id:"challengeMissionIndex"});b=0;for(iLength=challengeMissionNames.length;b<iLength;++b)a=document.createElement("option"),
a.value=b,a.appendChild(document.createTextNode(challengeMissionNames[b])),g.appendChild(a);g.selectedIndex=GM_getValue("challengeMissionIndex",0);makeElement("br",f);b="Check to automatically perform featured jobs";c="featJob";makeElement("input",f,{type:"checkbox",id:c,title:b,value:"checked"},c);makeElement("label",f,{"for":c,title:b}).appendChild(document.createTextNode(" Perform featured jobs: "));g=makeElement("select",f,{id:"featJobIndex"});b=0;for(iLength=featJobNames.length;b<iLength;++b)a=
document.createElement("option"),a.value=b,a.appendChild(document.createTextNode(featJobNames[b])),g.appendChild(a);g.selectedIndex=GM_getValue("featJobIndex",0);makeElement("br",f);makeElement("label",f,{"for":"lootLadderBonus",title:"Check to automatically redeem Lootladder Bonus Items"}).appendChild(document.createTextNode(" Redeem Lootladder Event Bonusses: "));f=makeElement("select",f,{id:"lootLadderIndex"});b=0;for(iLength=lootLadderChoices.length;b<iLength;++b)a=document.createElement("option"),
a.value=b,a.appendChild(document.createTextNode(lootLadderChoices[b])),f.appendChild(a);f.selectedIndex=RX6_getValue("lootLadderIndex",0);return h}
function createDisplayTab(){var a,b,c,d,e,f=makeElement("div",null,{id:"displayTab","class":"tabcontent"});b=makeElement("div",f,{"class":"jsRX6Tabs"});c=makeElement("div",b);e=makeElement("div",c,{"class":"jqRX6buttonId1",style:"float:left;width:46%"});makeElement("div",e,{"class":"jsRX6BoxHeading"}).appendChild(document.createTextNode("Choose Logging and Filtering Options"));b="autoLog";a="Check this to enable logging.";makeElement("input",e,{type:"checkbox",id:b,value:"checked"},b);makeElement("label",
e,{"for":b,title:a,"class":"jqSpacer"}).appendChild(document.createTextNode("Enable logging:"));b="autoLogLength";makeElement("input",e,{type:"text",id:b,value:RX6_getValue(b,"100"),size:"2",style:"text-align: left"});e.appendChild(document.createTextNode(" max # of messages in log"));makeElement("br",e);makeElement("br",e);b="filterLog";makeElement("input",e,{type:"checkbox",title:"Check this to enable log filtering",id:b,value:"checked"},b);makeElement("label",e,{"for":b,"class":"jqSpacer"}).appendChild(document.createTextNode("Enable log filtering:"));
b="filterOpt";var g=makeElement("select",e,{id:b,"class":"RX6dropdown2"}),h=["Accept patterns","Reject patterns"];a=0;for(iLength=h.length;a<iLength;++a)d=document.createElement("option"),d.value=a,d.appendChild(document.createTextNode(h[a])),g.appendChild(d);g.selectedIndex=RX6_getValue(b,0);makeElement("br",e);b="filterPatterns";var l=makeElement("textarea",e,{style:"position: static;margin-left:131px;width: 16em;height: 7em;",id:b,title:"Enter each pattern on a separate line."});l.appendChild(document.createTextNode(""));
makeElement("br",e);makeElement("font",e,{style:"font-size: 10px;margin-left:130px;"}).appendChild(document.createTextNode("Enter each name pattern on a separate line."));a=function(){var a=0==g.selectedIndex?defaultPassPatterns.join("\n"):defaultFailPatterns.join("\n");l.firstChild.nodeValue=RX6_getValue(0==g.selectedIndex?"filterPass":"filterFail",a)};a();g.addEventListener("change",a,!1);d=[["leftAlign","Align game to the left","Align game to the left ",1,"float:right;width:46%","Format Options for Browser",
1],["mastheadOnTop","Enable to elevate RX6 MWAP-Header (pause/resume/settings etc) so that it's always on top","Elevate RX6 MWAP-Header ",0,0,0,1],["fbwindowtitle","Set window title to name on Facebook account","Set window title to name on Facebook account ",0,0,0,0],["hideIced","Hide iced targets on the fight list page","Hide iced targets on the fight list page",1,"padding-bottom:14px;float:right;width:46%","Choose to show Iced Targets or their Level",1],["hideBots","Hide boss targets on the fight list page",
"Hide boss targets on the fight list page",0,0,0,1],["showLevel","Show player level on the hit list page","Show player level on the hitlist page",0,0,0,0],["hideAll","Hide All MW Icons","Hide All MW Icons ",1,"float:left;width:46%","Choose to hide Zynga/RX6 Game Elements",0],["hideZyngaBanner","Hide Z Promo Banner ","Hide Z Promo Banner ",0,0,0,1],["hideClanChat","Hide Clan Chat","Hide Clan Chat",0,0,0,0],["hideSubMenuTabs","Hide Navigation Sub Menu","Hide Navigation Sub Menu",0,0,0,1],["hideRX6LogLoot",
"Hide Loot collections in RX6 Log","Hide Loot collections in RX6 Log",0,0,0,0],["noStats","Disable RX6 MWAP Stats","Disable RX6 MWAP Stats",1,"float:right;width:46%","RX6 MWAP Stats (Logging Display)",1],["ICELogReverse","Reverse MDK ICE Log","Reverse MDK ICE Log",0,0,"Reverse ICE Log SWITCH (MDK Logging Display)",0],["hideOtherScripts","Remove Other Scripts (Spocks) if you find they interfere with RX6","Remove Other Scripts",0,0,0,0]];for(a=0;a<d.length;a++)h=d[a],h[3]&&(e=makeElement("div",c,{"class":"jqRX6buttonId1",
style:h[4]}),makeElement("div",e,{"class":"jsRX6BoxHeading"}).appendChild(document.createTextNode(h[5]))),makeElement("input",e,{type:"checkbox",id:h[0],value:"checked"},h[0]),makeElement("label",e,{"for":b,title:h[1],"class":"jqSpacer",style:"margin-right:20px"}).appendChild(document.createTextNode(h[2])),h[6]&&makeElement("br",e);e=makeElement("div",c,{"class":"jqRX6buttonId1"});makeElement("div",e,{"class":"jsRX6BoxHeading"}).appendChild(document.createTextNode("Always play on mwap.me.uk"));RX6_getValue("fnirInyhrSum",
returnValue())!=parseXMLResponse()?(b="playMWAPLite",a="RX6 MWAP LITE Page Play",makeElement("input",e,{type:"checkbox",id:b,value:"checked"},b),makeElement("label",e,{"for":b,title:a,"class":"jqSpacer"}).appendChild(document.createTextNode("Play on mwap.me.uk (LITE) "))):(b="playMWAP",a="RX6 MWAP Pro Page Play",makeElement("input",e,{type:"checkbox",id:b,value:"checked"},b),makeElement("label",e,{"for":b,title:a,"class":"jqSpacer"}).appendChild(document.createTextNode("Play on mwap.me.uk (PRO) ")),
playMWAPLiteRX2=playMWAPLite=0);makeElement("br",e);return f}
function createMafiaTab(){var a,b,c,d,e,f,g,h=makeElement("div",null,{id:"mafiaTab","class":"tabcontent"});RX6_getValue("fnirInyhrSum",returnValue())==parseXMLResponse()&&(g=!0);var l=makeElement("div",h,{"class":"jsRX6Tabs"});d=makeElement("div",l);var k=[["autoAskJobHelp","Check if you want to ask for help automatically with jobs.","Ask for New York job help at: ",3,0,"Would you like help with jobs?",6,0,0],["autoAskJobHelpMinExp","Enter the minimum experience to ask for job help,or 0 for no minimum.","minimum experience",
0,0,0,0,7,8],["selectBrazilTier","Ask for Help on Brazil Jobs - Be carefull to only choose available Jobs / Tiers !","Brazil:",0,"margin: 5px 31px 0px 22px;",0,0,0,0,9,void 0,void 0,BRAZIL,"No Help in Brazil",14,0],["selectChicagoTier","Ask for Help on Chicago Jobs - Be carefull to only choose available Jobs / Tiers !","Chicago:",0,"margin: 5px 17px 0px 23px;",0,0,0,0,9,void 0,void 0,CHICAGO,"No Help in Chicago",14,0],["selectLondonTier","Ask for Help on London Jobs - Be carefull to only choose available Jobs / Tiers !",
"London:",0,"margin: 5px 29px 0px 10px",0,0,0,8,9,void 0,void 0,LONDON,"No Help in London",14,0],["selectSaTier","Ask for Help on SA Jobs - Be carefull to only choose available Jobs / Tiers !","SA:",0,"margin: 5px 29px 0px 10px",0,0,0,0,9,void 0,void 0,SA,"No Help in SA",14,0],["autoAskPowerCards","Check if you want to ask for Power Cards Power Ups.","Ask for Arena Power Cards",3,"width:46%;float:left","Arena Power Ups",6,0,0],["autoBuildStash","Check if you want to ask and build Richies Stash.",
"Participate in Richie's Stash Event",3,"width:46%;float:right","Richie's Stash",6,0,0],["autoAskCityCrew","Automatically ask to join City Crews","Ask to Join City Crews ",3,"width:46%;float:left","Join City Crews",6,0,0,0,0,0,0,0,0,0,16],["logPlayerUpdates","Process and Log Player Updates","Auto Process Player Updates ",3,"width:46%;float:right","Process All Player Updates",6],["autoGlobalPublishing","Automatically click Publish on every Post Popup.","Global Publishing ",3,"width:46%;float:left",
"Enable publishing to Facebook Wall",6,0,8],["autoShareWishlist","Check if you want to share wishlist.","Publish Wishlist every: ",0,0,0,6],["autoShareWishlistTime","Enter the number of hours to wait before sharing wishlist again. Has to be at least 1 hour,and can be decimal (e.g. 1.5).","hour(s)",0,"margin-left:10px",0,0,7,8],["autoIcePublish","Automatically post iced opponent bonus.","Publish ICE bonus every: ",0,0,0,6],["autoIcePublishFrequency","Enter the publishing Frequency","th time",0,0,0,
0,7,8],["autoPubWall","Automatically post iced opponent to your FB Wall (NOT RECOMMENDED!!!)","Publish ICES to your FB Wall (NOT RECOMMENDED!!!)",0,0,0,6,0,8],["autoPubClanGroupIce","Automatically post iced opponent to Clan Group or Page.","Publish ICES to Clan Group/Page:",0,0,0,6,0,8],["autoPubClanGroupID","Enter the Clan War GROUP/PAGE to post to","Group/Page ID's:",0,0,0,0,77,8],["autoIceStack","Automatically stack iced opponent bonus as comments","autoStack ICE bonus up to: ",0,0,0,6],["autoIceStackFrequency",
"Stack Comments Maximum Quantity"," comments",0,0,0,0,7,8],["autoPostIceMessage","Add a comment to your post"," Add  a comment",0,0,0,0,7,0],["autoAcceptMsgGifts","Check to Auto Accept Message Centre Gifts","Auto Accept Gifts",3,"width:46%;float:right;padding-bottom:17px","Message Center",6,0,8],["autoAcceptMsgNoLimit","Check to Ignore Daily Item Limit (20)","Ignore the Daily Item Limit (20)",0,0,0,6,0,8],["autoAcceptMsgSecretDropNoLimit","Check to Ignore Daily Secret Drop Limit (3)","Ignore the Daily Secret Drop Limit (3)",
0,0,0,6,0,8],["autoAcceptMsgBoosts","Check to Auto Accept Message Center Boosts","Auto Accept Boosts",0,0,0,6,0,8],["autoAcceptMsgCrew","Check to Auto Skip ,Accept or Ignore Message Crew Requests","Crew Requests",0,0,0,7,0,8],["autoAcceptMsgEnergy","Check to Auto Skip ,Accept or Ignore Energy Packs","Energy Packs",0,0,0,7,0,8],["autosendMsgEnergyPack","Send Energy Packs from Message Center","Auto Send Energy Packs",0,0,0,6,0,8],["autoAcceptMsgMafia","Check to Auto Skip ,Accept or Ignore Mafia Invitations ",
"Mafia Invitations ",0,0,0,7]];c=0;b=1;var q="";g&&(q="");for(e=0;e<k.length;e++){var r=k[e];r[3]&&(f=makeElement("div",d,{"class":"jqRX6buttonId1",style:r[4]}),makeElement("div",f,{"class":"jsRX6BoxHeading"}).appendChild(document.createTextNode(r[5])));6==r[6]&&(a=makeElement("input",f,{type:"checkbox",id:r[c],value:"checked"},r[c]),makeElement("label",f,{"for":r[c],title:r[b],"class":"jqSpacer"}).appendChild(document.createTextNode(r[2]+q)),r[16]&&(g||(a.checked=!1,a.disabled=!0)));if(7==r[6]){for(var p=
GM_getIntValue(r[c],0),s=0,t=radioOptions.length;s<t;s++)a=makeElement("input",f,{type:"radio",name:r[c],value:s}),f.appendChild(document.createTextNode(radioOptions[s])),p==s&&(a.checked="checked"),r[16]&&(g||(a.checked=!1,a.disabled=!0));makeElement("label",f,{"for":r[c],title:r[b],"class":"jqSpacer"}).appendChild(document.createTextNode(r[2]+q))}7==r[7]&&(makeElement("input",f,{type:"text",value:RX6_getValue(r[c],"0"),title:r[b],id:r[c],size:"12",style:r[4]}),f.appendChild(document.createTextNode(r[2])));
77==r[7]&&(f.appendChild(document.createTextNode(r[2])),makeElement("br",f),makeElement("textarea",f,{title:r[b],id:r[c],style:r[4]+" margin-left:10px;"}).appendChild(document.createTextNode(RX6_getValue(r[c],"0"))));r[8]&&makeElement("br",f);if(r[9]&&(a=makeElement("label",f,{"for":r[c],title:r[b]}),a.appendChild(document.createTextNode(r[2])),r[10]=makeElement("select",f,{id:r[c],title:r[b],"class":"RX6dropdown2",style:r[4]}),r[11]=document.createElement("option"),r[11].text=r[13],r[11].value="0",
"0"==RX6_getValue(r[c])&&(r[11].selected=!0),r[10].appendChild(r[11]),r[14]))for(RX6_getValue(r[c],0)-1>missionTabs[r[12]].length&&RX6_setValue(r[c],0),j=0,jLength=missionTabs[r[12]].length;j<jLength;j++)r[11]=document.createElement("option"),r[11].text=missionTabs[r[12]][j],r[11].value=j+1,RX6_getValue(r[c],0)-1==j&&(r[11].selected=!0),r[10].appendChild(r[11])}d=makeElement("div",l);f=makeElement("div",d,{"class":"jqRX6buttonId1"});makeElement("div",f,{"class":"jsRX6BoxHeading",style:"width:98%"}).appendChild(document.createTextNode("Auto War Random Enemies or Enemies from a list"));
a=makeElement("label",f,{"class":"jqSpacer"});a.appendChild(document.createTextNode("Enable Auto War:"));var u=makeElement("select",f,{id:"warMode","class":"RX6dropdown2",style:"width:150px"});e=0;for(iLength=warModeChoices.length;e<iLength;++e)b=document.createElement("option"),b.value=e,b.appendChild(document.createTextNode(warModeChoices[e])),u.appendChild(b);u.selectedIndex=RX6_getValue("warMode",0);b="Enter opponents Mafia Wars ID";c="autoWarTargetList";makeElement("p",f);var v=makeElement("font",
f,{style:"font-size: 10px;"});v.appendChild(document.createTextNode("Enter each target on a separate line. Add the userid part of the p|userid."));makeElement("br",f);var w=makeElement("textarea",f,{style:"width: 12em;height: 6em;margin-left:50px:margin-top:5px",id:c,title:"Enter each Mafia Wars ID on a separate line. This will not work with the Facebook ID."});w.appendChild(document.createTextNode(RX6_getValue("autoWarTargetList","")));e=function(){w.style.display=2==u.selectedIndex?"":"none";v.style.display=
2==u.selectedIndex?"":"none"};e();u.addEventListener("change",e,!1);return h}
function createFamilyTab(){function a(a){g=makeElement("div",a);k=makeElement("div",g,{"class":"jqRX6buttonId1"})}function b(){makeElement("br",k);var a=[["bossRole","Boss Role","Boss Role:"],["bossStaminaLimit","Boss Stamina Limit","Boss Stamina Limit:"]];for(idx=0;idx<a.length;idx++){var b=a[idx];makeElement("label",k,{"for":b[0],title:b[1],"class":"jqSpacer"}).appendChild(document.createTextNode(b[2]));b=makeElement("select",k,{id:b[0],"class":"RX6dropdown2",style:"width:80px"});if(0==idx){iLength=
bossRoles.length;for(h=0;h<iLength;++h)l=document.createElement("option"),l.value=h,l.appendChild(document.createTextNode(bossRoles[h].capitalize())),b.appendChild(l);b.selectedIndex=RX6_getValue("bossRole",0)}if(1==idx){iLength=bossStaminaLimits.length;for(h=0;h<iLength;++h)l=document.createElement("option"),l.value=h,l.appendChild(document.createTextNode(bossStaminaLimits[h])),b.appendChild(l);b.selectedIndex=RX6_getValue("bossStaminaLimit",0)}r||(b.disabled=!0,b.setAttribute("class","RX6dropdown2lite"),
b.selectedIndex=bossRoles[0])}f="bossRageLimit";e="Boss Rage Limit (0 - 1000)";makeElement("label",k,{"for":f,title:e,style:"margin-left:8px;"}).appendChild(document.createTextNode("Boss Rage Limit:"));d=makeElement("input",k,{style:"text-align: right;",type:"text",value:RX6_getValue(f,"0"),id:f,size:"6",style:"margin-left:5px;"});c(d);makeElement("br",k)}function c(a){r||(a.checked=!1,a.disabled=!0)}var d,e,f,g,h,l,k,q,r,p=makeElement("div",null,{id:"familyTab","class":"tabcontent"});RX6_getValue("fnirInyhrSum",
returnValue())==parseXMLResponse()&&(r=!0);var s=makeElement("div",p,{"class":"jsRX6Tabs"});g=makeElement("div",s);k=makeElement("div",g,{"class":"jqRX6buttonId1",style:"width:46%;float:left"});makeElement("div",k,{"class":"jsRX6BoxHeading"}).appendChild(document.createTextNode("Operations Settings"));var t=[["autoStartMyOps","Enable Personal Operations","Enable Personal Operations"],["autoJoinMyOps","Enable Joining Personal Operations","Join Personal Operations"],["autoStartFamOps","Participate In Family Operations",
"Participate In Family Operations"]];for(h=0;h<t.length;h++)q=t[h],1==h&&makeElement("br",k),makeElement("div",k),makeElement("input",k,{type:"checkbox",id:q[0],value:"checked"},q[0]),makeElement("label",k,{"for":q[0],title:q[1],"class":"jqSpacer"}).appendChild(document.createTextNode(q[2]));k=makeElement("div",g,{"class":"jqRX6buttonId1",style:"width:46%;float:right;padding-bottom:28px"});q="Family Rewards";r||(q+=" - RX6 PRO FEATURE Only");makeElement("div",k,{"class":"jsRX6BoxHeading"}).appendChild(document.createTextNode(q));
f="AutoFamilyRewards";e="Enable Auto Family Rewards Collection";d=makeElement("input",k,{type:"checkbox",id:f,value:"checked"},f);makeElement("label",k,{"for":f,title:e,"class":"jqSpacer"}).appendChild(document.createTextNode("Enable Auto Family Rewards Collect"));c(d);makeElement("br",k);f="AutoFamilyRewardsLevelUp";e="Enable Auto Family Rewards Collection to level only when Energy/Stamina can't be used. Must have on Enable Auto Family Rewards Collect";d=makeElement("input",k,{type:"checkbox",id:f,
value:"checked"},f);makeElement("label",k,{"for":f,title:e,"class":"jqSpacer"}).appendChild(document.createTextNode("To Level Only when Energy/Stamina can't be used"));c(d);a(s);q="Raven Settings";r||(q+=" - RX6 PRO FEATURE Only");makeElement("div",k,{"class":"jsRX6BoxHeading"}).appendChild(document.createTextNode(q));t=[["autoFightRaven","Enable Raven","Enable Raven",0],["ravenComboFightingOnly","Use Boost Combo's Only","Use Boost Combo's Only",1],["ravenGreenCombo","Use Green Combo","Use Green Combo",
0],["ravenYellowCombo","Use Yellow Combo","Use Yellow Combo",0]];for(idx=0;idx<t.length;idx++)q=t[idx],d=makeElement("input",k,{type:"checkbox",id:q[0],value:"checked"},q[0]),makeElement("label",k,{"for":q[0],title:q[1],"class":"jqSpacer",style:"margin-right: 20px"}).appendChild(document.createTextNode(q[2])),c(d),q[3]&&makeElement("br",k);makeElement("label",k,{"for":"ravenRedCombo",title:"Use Red Combo","class":"jqSpacer"}).appendChild(document.createTextNode("Use Red Combo:"));q=makeElement("select",
k,{id:"ravenRedCombo","class":"RX6dropdown2",style:"width:300px !important;"});combo=0;for(oLength=ravenRedCombosTxt.length;combo<oLength;combo++)l=document.createElement("option"),l.value=combo,l.appendChild(document.createTextNode(ravenRedCombosTxt[combo])),q.appendChild(l);q.selectedIndex=RX6_getValue("ravenRedCombo",0);a(s);q="Family Boss Fight Settings";r||(q+=" - RX6 PRO FEATURE Only");makeElement("div",k,{"class":"jsRX6BoxHeading"}).appendChild(document.createTextNode(q));t=[["autoFamilyBosses",
"Enable Family Bosses","Enable Family Bosses",1],["autoFamilyBossFighting","Enable Family Boss Fighting","Enable Family Boss Fighting",1],["autoComboFightingOnly","Use Boost Combo's Only","Use Boost Combo's Only",1],["sendBossFightBoosts","Send Family Boss Boosts","Send Family Boss Boosts",1],["askBossFightBoosts","Ask for Family Boss Boosts","Ask for Family Boss Boosts",1],["AutoBattleFight","Enable Auto Battle Fighting","Enable Auto Battle Fighting",0],["AutoBattleSafehouse","Enable Battle Safehouse Attacking",
"Enable Battle Safehouse Attacking",0],["AutoBattle","Enable Auto Battle","Enable Auto Battle (Only if Underboss/GF)",0]];for(idx=0;idx<t.length;idx++){2==idx&&b();5==idx&&(a(s),q="Family Battle Settings",r||(q+=" - RX6 PRO FEATURE Only"),makeElement("div",k,{"class":"jsRX6BoxHeading"}).appendChild(document.createTextNode(q)));7==idx&&makeElement("br",k);q=t[idx];var u=makeElement("input",k,{type:"checkbox",id:q[0],value:"checked"},q[0]);makeElement("label",k,{"for":q[0],title:q[1],"class":"jqSpacer",
style:"margin-right: 20px"}).appendChild(document.createTextNode(q[2]));c(u)}f="AutoBattleClanID";e="ClanID";d=makeElement("input",k,{style:"text-align: right;",type:"text",value:RX6_getValue(f,"0"),id:f,size:"6"});makeElement("label",k,{"for":f,title:e,"class":"jqSpacer"}).appendChild(document.createTextNode("Clan / Family ID"));c(d);makeElement("br",k);f="familyListSingleLink";e="Enter MW Family Link";d=makeElement("input",k,{type:"text",id:f,title:e,style:"text-align: left;width:250px;margin-left:270px;margin-top:3px"});
c(d);e="Add Clan / Family ID from MW Family Profile Link(Green Link)";f="familySingleAdd";eltA=makeElement("a",k,{id:f,href:"#",alt:e,title:e,style:"margin:0px 0px 2px 5px;padding:5px;","class":"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only",type:"button",role:"button"});eltA.appendChild(document.createTextNode("Auto Add Clan / Family ID"));eltA.addEventListener("click",addSingleFamilyID,!1);a(s);q="Send and Ask for Free Gifts";r||(q+=" - RX6 PRO FEATURE Only");makeElement("div",
k,{"class":"jsRX6BoxHeading"}).appendChild(document.createTextNode(q));f="autoFreeGift";e="Enable Auto Free Gifting:";makeElement("label",k,{"for":f,title:e,"class":"jqSpacer"}).appendChild(document.createTextNode(e));f="selectFreeGift";selectFreeGift=makeElement("select",k,{id:f,title:e,"class":"RX6dropdown2"});choiceFreeGift=document.createElement("option");choiceFreeGift.text="Don't send free gifts";choiceFreeGift.value=0;0==RX6_getValue("selectFreeGift",0)&&(choiceFreeGift.selected=!0);selectFreeGift.appendChild(choiceFreeGift);
freeGiftList.sort(function(a,b){return a[3]<b[3]?-1:a[3]>b[3]?1:0});s="";for(h=0;h<freeGiftList.length;h++)freeGiftList[h][1]&&(s!=freeGiftList[h][3]&&(choiceGroup=document.createElement("optgroup"),choiceGroup.className="ap_optgroup1",choiceGroup.label=freeGiftList[h][3].toUpperCase(),selectFreeGift.appendChild(choiceGroup),s=freeGiftList[h][3]),choiceFreeGift=document.createElement("option"),choiceFreeGift.text=freeGiftList[h][2].capitalize(),choiceFreeGift.value=freeGiftList[h][1],RX6_getValue("selectFreeGift",
0)==freeGiftList[h][1]&&(choiceFreeGift.selected=!0),selectFreeGift.appendChild(choiceFreeGift));r||(selectFreeGift.disabled=!0,selectFreeGift.setAttribute("class","RX6dropdown2lite"),selectFreeGift.selectedIndex=choiceFreeGift.text);f="autoAskFreeGift";e="Enable Asking for Free Gifts:";makeElement("label",k,{"for":f,title:e,"class":"jqSpacer",style:"margin-left:40px"}).appendChild(document.createTextNode(e));f="selectAskFreeGift";s=makeElement("select",k,{id:f,title:e,"class":"RX6dropdown2"});choiceAskFreeGift=
document.createElement("option");choiceAskFreeGift.text="Don't ask for free gifts";choiceAskFreeGift.value=0;0==RX6_getValue("selectAskFreeGift",0)&&(choiceAskFreeGift.selected=!0);s.appendChild(choiceAskFreeGift);freeGiftList.sort(function(a,b){return a[2]<b[2]?-1:a[2]>b[2]?1:0});for(h=0;h<freeGiftList.length;h++)freeGiftList[h][0]&&(choiceAskFreeGift=document.createElement("option"),choiceAskFreeGift.text=freeGiftList[h][2].capitalize(),choiceAskFreeGift.value=freeGiftList[h][0],RX6_getValue("selectAskFreeGift",
0)==freeGiftList[h][0]&&(choiceAskFreeGift.selected=!0),s.appendChild(choiceAskFreeGift));r||(s.disabled=!0,s.setAttribute("class","RX6dropdown2lite"),s.selectedIndex=choiceAskFreeGift.text);f="autoDispatch";e="Enable RX6 Gift Dispatcher";s=makeElement("div",k);makeElement("label",s,{"for":f,title:e,"class":"jqSpacer"}).appendChild(document.createTextNode(e+" to: "));f="dispatchTarget";e="RX6 Gift Dispatch Targets";s=makeElement("select",k,{id:f,title:e,"class":"RX6dropdown2",style:"width:175px"});
h=0;for(iLength=dispatchTargets.length;h<iLength;h++)q=document.createElement("option"),q.text=dispatchTargets[h][1],q.value=dispatchTargets[h][0],RX6_getValue("dispatchTarget",0)==dispatchTargets[h][0]&&(q.selected=!0),s.appendChild(q);r||(s.disabled=!0,s.setAttribute("class","RX6dropdown2lite"),s.selectedIndex=s.text);return p}
function addSingleFamilyID(){var a,b=document.getElementById("AutoBattleClanID");decodeURIComponent(document.getElementById("familyListSingleLink").value).match(/"id":"(.+)"/)?(a=decodeID(RegExp.$1).digitize(),b.value=a,b.innerHTML=a):alert("Invalid family link.");document.getElementById("familyListSingleLink").value=""}
function createAutostatTab(){function a(a){f=makeElement("div",a);g=makeElement("div",f,{"class":"jqRX6buttonId4"})}var b,c,d,e,f,g,h,l=makeElement("div",null,{id:"autostatTab","class":"tabcontent"}),k=makeElement("div",l,{"class":"jsRX6Tabs"});f=makeElement("div",k);RX6_getValue("fnirInyhrSum",returnValue())==parseXMLResponse()&&(h=!0);a(k);makeElement("div",g,{"class":"jsRX6BoxHeading"}).appendChild(document.createTextNode("Enable AutoStat Features"));c="autoStat";b="Check this this to enable auto-statting";
makeElement("input",g,{type:"checkbox",id:c,value:"checked"},c);makeElement("img",g,{src:stripURI(plussignIcon)});makeElement("label",g,{"for":c,title:b}).appendChild(document.createTextNode("Enable AutoStat"));b="Disable AutoStat when status goals are reached";c="autoStatDisable";makeElement("div",g,{style:"position: absolute;text-align: left;left: 200px;"});makeElement("input",g,{type:"checkbox",id:c,title:b,value:"checked",style:"margin-left:20px"},c);makeElement("label",g,{"for":c,title:b}).appendChild(document.createTextNode(b));
a(k);makeElement("div",g,{"class":"jsRX6BoxHeading"}).appendChild(document.createTextNode("Distribute Your Skill Points"));var q=[curAttack,curDefense,maxHealth,maxEnergy,maxStamina];e=0;for(iLength=autoStatRatios.length;e<iLength;++e){b="Please set ratio of "+autoStatDescrips[e+1]+" stat";c=autoStatRatios[e];makeElement("div",g,{style:"width:50px;float:left;padding-top:5px"}).appendChild(document.createTextNode(autoStatDescrips[e+1]));g.appendChild(document.createTextNode("="));makeElement("input",
g,{type:"text",style:"width: 40px;margin-top:3px;",value:RX6_getValue(c,0),id:c,size:"1"});g.appendChild(document.createTextNode(" x "));c=autoStatModes[e];b=makeElement("select",g,{id:c,title:b,"class":"RX6dropdown2",style:"width:75px"});d=0;for(jLength=autoStatDescrips.length;d<jLength;++d)c=document.createElement("option"),c.value=d,c.appendChild(document.createTextNode(autoStatDescrips[d])),b.appendChild(c);b.selectedIndex=RX6_getValue(autoStatModes[e],0);b="add these for total ";c=autoStatBases[e];
g.appendChild(document.createTextNode("+"));makeElement("input",g,{type:"text",style:"width: 40px;",value:RX6_getValue(c,0),id:c,size:"1"});b="Check this to distribute points to "+autoStatDescrips[e+1]+" when goals are reached";c=autoStatFallbacks[e];makeElement("input",g,{type:"checkbox",id:c,title:b,style:"margin-left:20px"},autoStatFallbacks[e]);d=makeElement("label",g,{"for":c,title:b,style:"display:inline-block;width:115px"});d.appendChild(document.createTextNode(" "+autoStatDescrips[e+1]+" as fallback"));
b="Please select priority level for stat distribution";c=autoStatPrios[e];b=makeElement("select",g,{id:c,title:b,"class":"RX6dropdown2",style:"width:75px;"});d=0;for(jLength=autoStatRatios.length;d<jLength;++d)c=document.createElement("option"),c.value=d,c.appendChild(document.createTextNode("Priority "+(d+1))),b.appendChild(c);b.selectedIndex=RX6_getValue(autoStatPrios[e],0);b="Your current stat values ";c=autoStatcurStats[e];d=makeElement("label",g,{"for":c,title:b,style:"display:inline-block;width:140px;margin-left:10px"});
d.appendChild(document.createTextNode("Current "+autoStatDescrips[e+1]+" points: "+q[e]));makeElement("br",g)}a(k);h?makeElement("div",g,{"class":"jsRX6BoxHeading"}).appendChild(document.createTextNode("Activate Crew Members in your choosen Cities")):makeElement("div",g,{"class":"jsRX6BoxHeading"}).appendChild(document.createTextNode("Activate Crew Members in your choosen Cities : RX6 PRO FEATURE Only"));k=makeElement("div",g,{style:"float:left;width:165px"});b="Select City Priority";d=makeElement("div",
k,{"for":"selectCityPrio",title:b,style:"color: #3A8AC0"});d.appendChild(document.createTextNode(b));makeElement("br",k);q=BRAZIL;for(e=1;4>=e;e++){c="selectCityPrio"+e;b="City Priority "+e+": ";d=makeElement("label",k,{"for":c,title:b});d.appendChild(document.createTextNode(b));b=makeElement("select",k,{id:c,title:b,"class":"RX6dropdown2",style:"width:75px;margin-right:10px"});for(d=BRAZIL;d<=SA;d++)choiceSelectCity=makeElement("option",null,{title:cities[d][CITY_ALIAS]}),choiceSelectCity.text=cities[d][CITY_NAME],
choiceSelectCity.value=d,RX6_getValue(c,q)==d&&(choiceSelectCity.selected=!0),b.appendChild(choiceSelectCity);q++;makeElement("br",k);h||(b.disabled=!0,b.setAttribute("class","RX6dropdown2lite"))}k=makeElement("div",g,{style:"float:left;width:180px"});b="Crew Priorities: Brazil Crew";d=makeElement("div",k,{"for":"selectBrazilCrew",title:b,style:"color: #3A8AC0;margin-left:19px"});d.appendChild(document.createTextNode(b));makeElement("br",k);for(e=1;e<cityCrewTitles.length;e++){c="selectBrazilCrew"+
e;b="Crew Priority "+e+": ";d=makeElement("label",k,{"for":c,title:b,style:"float:left;width:85px;margin-top:5px;margin-left:20px"});d.appendChild(document.createTextNode(b));b=makeElement("select",k,{id:c,title:b,"class":"RX6dropdown2",style:"width:90px;margin-left:5px"});for(d=0;d<cityCrewTitles.length;d++)choiceBrazilCrew=makeElement("option",null,{title:cityCrewTitles[d][2]}),choiceBrazilCrew.text=cityCrewTitles[d][0],choiceBrazilCrew.value=d,RX6_getValue(c,0)==d&&(choiceBrazilCrew.selected=!0),
h||(choiceBrazilCrew.text=cityCrewTitles[0][0]),b.appendChild(choiceBrazilCrew);makeElement("br",k);h||(b.disabled=!0,b.setAttribute("class","RX6dropdown2lite"))}k=makeElement("div",g,{style:"float:left;width:89px;margin-left:40px"});b="Chicago Crew";d=makeElement("div",k,{"for":"selectChicagoCrew",title:b,style:"color: #3A8AC0"});d.appendChild(document.createTextNode(b));makeElement("br",k);for(e=1;e<cityCrewTitles.length;e++){c="selectChicagoCrew"+e;q=makeElement("select",k,{id:c,title:b,"class":"RX6dropdown2",
style:"width:85px"});for(d=0;d<cityCrewTitles.length;d++)choiceChicagoCrew=makeElement("option",null,{title:cityCrewTitles[d][2]}),choiceChicagoCrew.text=cityCrewTitles[d][0],choiceChicagoCrew.value=d,RX6_getValue(c,0)==d&&(choiceChicagoCrew.selected=!0),h||(choiceChicagoCrew.text=cityCrewTitles[0][0]),q.appendChild(choiceChicagoCrew);makeElement("br",k);h||(q.disabled=!0,q.setAttribute("class","RX6dropdown2lite"))}k=makeElement("div",g,{style:"float:left;width:89px;margin-left:20px"});b="London Crew";
d=makeElement("div",k,{"for":"selectLondonCrew",title:b,style:"color: #3A8AC0"});d.appendChild(document.createTextNode(b));makeElement("br",k);for(e=1;e<cityCrewTitles.length;e++){c="selectLondonCrew"+e;q=makeElement("select",k,{id:c,title:b,"class":"RX6dropdown2",style:"width:85px"});for(d=0;d<cityCrewTitles.length;d++)choiceLondonCrew=makeElement("option",null,{title:cityCrewTitles[d][2]}),choiceLondonCrew.text=cityCrewTitles[d][0],choiceLondonCrew.value=d,RX6_getValue(c,0)==d&&(choiceLondonCrew.selected=
!0),h||(choiceLondonCrew.text=cityCrewTitles[0][0]),q.appendChild(choiceLondonCrew);makeElement("br",k);h||(q.disabled=!0,q.setAttribute("class","RX6dropdown2lite"))}k=makeElement("div",g,{style:"float:left;width:89px;margin-left:20px"});b="SA Crew";d=makeElement("div",k,{"for":"selectSaCrew",title:b,style:"color: #3A8AC0"});d.appendChild(document.createTextNode(b));makeElement("br",k);for(e=1;e<cityCrewTitles.length;e++){c="selectSaCrew"+e;q=makeElement("select",k,{id:c,title:b,"class":"RX6dropdown2",
style:"width:85px"});for(d=0;d<cityCrewTitles.length;d++)choiceSaCrew=makeElement("option",null,{title:cityCrewTitles[d][2]}),choiceSaCrew.text=cityCrewTitles[d][0],choiceSaCrew.value=d,RX6_getValue(c,0)==d&&(choiceSaCrew.selected=!0),h||(choiceSaCrew.text=cityCrewTitles[0][0]),q.appendChild(choiceSaCrew);makeElement("br",k);h||(q.disabled=!0,q.setAttribute("class","RX6dropdown2lite"))}return l}
function createEnergyTab(){function a(a){e=makeElement("div",a);jqRX6buttonId1=makeElement("div",e,{"class":"jqRX6buttonId1"})}var b,c,d,e,f,g=makeElement("div",null,{id:"energyTab","class":"tabcontent"}),h=makeElement("div",g,{"class":"jsRX6Tabs"});a(h);makeElement("div",jqRX6buttonId1,{"class":"jsRX6BoxHeading",style:"width:96%"}).appendChild(document.createTextNode("How would you like to spend your Energy?"));b="Spend energy automatically.";c="autoMission";makeElement("input",jqRX6buttonId1,{type:"checkbox",
id:c,title:b,value:"checked"},"autoMission");d=makeElement("label",jqRX6buttonId1,{"for":c,title:b,"class":"jqSpacer"});d.appendChild(document.createTextNode("Spend Energy"));RX6_getValue("fnirInyhrSum",returnValue())==parseXMLResponse()&&(b="RX6 Speed Spend Energy. Max speed is 9",c="autoMissionBlasterSpeed",makeElement("input",jqRX6buttonId1,{type:"checkbox",id:c,title:b},"autoMissionBlasterSpeed"),d=makeElement("label",jqRX6buttonId1,{"for":c,title:b,"class":"jqSpacer"}),d.appendChild(document.createTextNode("RX6EnergyBuster")),
b="RX6EB Energy Speed Limit - Max 9",c="autoMissionBlasterSpeedSet",d=makeElement("label",jqRX6buttonId1,{"for":c,title:b}),d.appendChild(document.createTextNode(" | Speed Limit ")),makeElement("input",jqRX6buttonId1,{type:"text",id:c,title:b,maxlength:1,style:"width: 30px;border: 1px solid #781351;margin-right:10px;",value:RX6_getValue("autoMissionBlasterSpeedSet","1"),size:"1"}),b="RX6 MEGA Energy. Check to blast spending of energy spend even faster - must have energy Buster on",c="autoMissionBlasterMega",
makeElement("input",jqRX6buttonId1,{type:"checkbox",id:c,title:b},"autoMissionBlasterMega"),d=makeElement("label",jqRX6buttonId1,{"for":c,title:b,"class":"jqSpacer"}),d.appendChild(document.createTextNode("Energy MEGA Blast")),makeElement("br",jqRX6buttonId1));c="endLevelOptimize";b="Optimize at end level";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:c,title:b,value:"checked"},c);d=makeElement("label",jqRX6buttonId1,{"for":c,title:b,"class":"jqSpacer"});d.appendChild(document.createTextNode(" "+
b+" "));c="endLevelNYOnly";b="Use NY jobs only";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:c,title:b,value:"checked"},c);d=makeElement("label",jqRX6buttonId1,{"for":c,title:b,"class":"jqSpacer"});d.appendChild(document.createTextNode(" "+b));c="autoWithDraw";b="Force Auto Withdraw for Jobs";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:c,title:b},c);d=makeElement("label",jqRX6buttonId1,{"for":c,title:b,"class":"jqSpacer"});d.appendChild(document.createTextNode(" "+b));makeElement("br",
jqRX6buttonId1);f=makeElement("input",jqRX6buttonId1,{id:"unCheckAll",style:"font-size: 10px;padding:2px;margin-bottom:3px;",type:"button",value:"Uncheck All"});var l=makeElement("div",jqRX6buttonId1,{id:"MissionArray",title:"Missions Array",style:"overflow: auto;width: 400px;height: 180px;border:1px solid #999999;padding: 2px;margin-right:5px"});makeElement("br",jqRX6buttonId1);b="Master Tier";c="selectTier";d=makeElement("label",jqRX6buttonId1,{"for":c,title:b});d.appendChild(document.createTextNode("Master tier: "));
var k=makeElement("select",jqRX6buttonId1,{id:c,title:b,"class":"RX6dropdown2"});choiceTier=document.createElement("option");choiceTier.text="Do not master anything";choiceTier.value="0.0";k.appendChild(choiceTier);var q=-1,r=-1,p,s=function(){var a=this.getAttribute("chkId"),b=document.getElementById(a),a=document.getElementById("img"+a);b&&(b.checked?(b.checked=!1,a.src=stripURI(unCheckedIcon)):(b.checked="checked",a.src=stripURI(checkedIcon)))},t=getSavedList("selectMissionMultiple");d=0;for(var u=
missions.length;d<u;++d){p=missions[d];p[MISSION_CITY]!=q&&(q=p[MISSION_CITY],c=makeElement("div"),c.innerHTML="=== "+cities[q][CITY_NAME].toUpperCase()+" MISSIONS ===",c.className="ap_optgroup1",l.appendChild(c),choiceTier=document.createElement("optgroup"),choiceTier.label=cities[q][CITY_NAME].toUpperCase(),choiceTier.className="ap_optgroup1",k.appendChild(choiceTier));p[MISSION_TAB]!=r&&(r=p[MISSION_TAB],c=makeElement("div"),c.innerHTML=missionTabs[q][r-1],c.className="ap_optgroup2",l.appendChild(c),
choiceTier=document.createElement("option"),choiceTier.text=missionTabs[q][r-1],choiceTier.value=q+"."+r,k.appendChild(choiceTier),RX6_getValue("selectTier","0.0")==choiceTier.value&&(choiceTier.selected=!0));b=isNaN(p[MISSION_RATIO])||!p[MISSION_RATIO]?calcJobratio(d):p[MISSION_RATIO];c=p[MISSION_NAME];b=p[MISSION_NAME]+" ("+parseFloat(b)+")";var v=!1;-1!=t.indexOf(String(d))&&(v=!0);p="yes"==p[MISSION_BONUSJOB]?makeElement("div",null,{chkid:c,style:"color: green !important;"}):0!=p[MISSION_STAMINA]?
makeElement("div",null,{chkid:c,style:"color: red !important;"}):makeElement("div",null,{chkid:c});p.addEventListener("click",s,!1);makeElement("img",p,{style:"width: 15px;height: 15px;",id:"img"+c,src:v?stripURI(checkedIcon):stripURI(unCheckedIcon)});c=makeElement("input",p,{type:"checkbox",id:c,title:b,style:"display: none",value:"checked"});c.checked=v;p.appendChild(document.createTextNode(" "+b));l.appendChild(p)}f.addEventListener("click",function(){for(var a,b,c=0,d=missions.length;c<d;++c)b=
missions[c][MISSION_NAME],a=document.getElementById(b),(b=document.getElementById("img"+b))&&a.checked&&(b.src=stripURI(unCheckedIcon)),a&&a.checked&&(a.checked=!1);alert("All Jobs Removed from Selection")},!1);c="selectLevelToMaster";jqRX6buttonId1.appendChild(document.createTextNode(" Set level to master "));b=makeElement("select",jqRX6buttonId1,{id:c,title:b,"class":"RX6dropdown2",style:"width:75px"});d=0;for(u=mastertoLevel.length;d<u;++d)f=document.createElement("option"),f.value=d,f.appendChild(document.createTextNode(mastertoLevel[d])),
b.appendChild(f);b.selectedIndex=RX6_getValue(c,0);c="selectLevelToMasterOnOff";b="Check this to turn off master to level, if off will master to ruby.";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:c,value:"checked"},c);makeElement("label",jqRX6buttonId1,{"for":c,"class":"jqSpacer"}).appendChild(document.createTextNode("Master to Level On/Off"));makeElement("br",jqRX6buttonId1);c="switchDistrict";b="Check this to enable auto-switching to next available district ASAP.";makeElement("input",
jqRX6buttonId1,{type:"checkbox",id:c,value:"checked"},c);makeElement("label",jqRX6buttonId1,{"for":c,"class":"jqSpacer"}).appendChild(document.createTextNode("Switch to next available district"));if(RX6_getValue("fnirInyhrSum",returnValue())==parseXMLResponse()){c="masterJobsCombined";b="Check this to allow Master and doing jobs at same time.";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:c,value:"checked"},c);makeElement("label",jqRX6buttonId1,{"for":c,"class":"jqSpacer"}).appendChild(document.createTextNode("Master and Single Jobs Enable"));
a(h);makeElement("div",jqRX6buttonId1,{"class":"jsRX6BoxHeading",style:"width:96%"}).appendChild(document.createTextNode("Additional Energy Settings"));d=makeElement("label",jqRX6buttonId1,{title:"Boss Fight - Secret Districts"});d.appendChild(document.createTextNode("Confront Secret District Bosses: "));b="Boss Fight - Stamina";c="autoStamFightBosses";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:c,title:b,value:"checked"},"autoStamFightBosses");d=makeElement("label",jqRX6buttonId1,{"for":c,
title:b,"class":"jqSpacer"});d.appendChild(document.createTextNode("Using Stamina"));b="Stamina Limit - Set 0 for unlimited";c="autoStamFightBossesLimit";d=makeElement("label",jqRX6buttonId1,{"for":c,title:b});d.appendChild(document.createTextNode("/ Stamina Limit "));makeElement("input",jqRX6buttonId1,{type:"text",id:c,title:b,maxlength:5,style:"width: 30px;border: 1px solid #781351;margin-right:10px;",value:RX6_getValue("autoStamFightBossesLimit","0"),size:"1"});b="Boss Fight - Boosts";c="autoBoostFightBosses";
makeElement("input",jqRX6buttonId1,{type:"checkbox",id:c,title:b,value:"checked"},"autoBoostFightBosses");d=makeElement("label",jqRX6buttonId1,{"for":c,title:b,"class":"jqSpacer"});d.appendChild(document.createTextNode(" Using Boosts"));b="Boss Fight - Use all Boosts - including Job Loot Item";c="autoUseAllBoosts";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:c,title:b,value:"checked"},"autoUseAllBoosts");d=makeElement("label",jqRX6buttonId1,{"for":c,title:b,"class":"jqSpacer"});d.appendChild(document.createTextNode("Use All Boosts"));
makeElement("br",jqRX6buttonId1);jqRX6buttonId1.appendChild(document.createTextNode("Job Bandit Settings: "));j=0;for(jLength=banditTypes.length;j<jLength;++j){l="set"+banditTypes[j].ftrim();makeElement("label",jqRX6buttonId1,{"for":c,title:b}).appendChild(document.createTextNode(banditTypes[j]+": "));k=makeElement("select",jqRX6buttonId1,{id:l,title:"choose a way to handle this bandit",style:"margin-right:5px;"});d=0;for(u=banditChoices.length;d<u;++d)f=document.createElement("option"),f.value=d,
f.appendChild(document.createTextNode(banditChoices[d])),k.appendChild(f);k.selectedIndex=RX6_getValue(l,1)}makeElement("br",jqRX6buttonId1);b="Boss Fight - Confront Agostino Cleto";c="autoFightAgostino";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:c,title:b,value:"checked"},"autoFightAgostino");d=makeElement("label",jqRX6buttonId1,{"for":c,title:b,"class":"jqSpacer"});d.appendChild(document.createTextNode("Boss Fight: Confront Agostino Cleto"))}a(h);b="Spend energy packs if it will not waste energy,as determined by the estimated job ratio setting and your stamina statistics.";
c="autoEnergyPack";b=" Energy / Stamina Packs ";c="autoEnergyPack";l=makeElement("select",jqRX6buttonId1,{id:c});d=0;for(u=burnModes.length;d<u;++d)f=document.createElement("option"),f.value=d,f.appendChild(document.createTextNode(burnModes[d])),l.appendChild(f);makeElement("label",jqRX6buttonId1,{"for":c,title:b}).appendChild(document.createTextNode(b));l.selectedIndex=RX6_getValue("autoEnergyPack",0);makeElement("br",jqRX6buttonId1);d=makeElement("label",jqRX6buttonId1,{"for":c,title:b,"class":"jqSpacer"});
b="Estimate the average experience-to-energy ratio of the jobs you will be performing. For example,a job that paid 10 experience points and required 5 energy would have a ratio of 2. Enter 0 if you prefer to have energy packs fire regardless of waste.";c="estimateJobRatio";d.appendChild(document.createTextNode("Estimated Job Ratio:"));makeElement("input",jqRX6buttonId1,{type:"text",id:c,title:b,style:"width:3em;margin-right:8px",value:RX6_getValue("estimateJobRatio","2")});b="Maximum Amount of energy remaining to trigger the firing of the energy pack.";
c="autoEnergyPackForcePts";jqRX6buttonId1.appendChild(document.createTextNode(" Force Energy when energy  falls below "));makeElement("input",jqRX6buttonId1,{type:"text","class":"jqSpacer",id:c,title:b,style:"width:3em;",value:RX6_getValue("autoEnergyPackForcePts","0")});jqRX6buttonId1.appendChild(document.createTextNode(" points "));a(h);makeElement("div",jqRX6buttonId1,{"class":"jsRX6BoxHeading",style:"width:96%"}).appendChild(document.createTextNode("Customise when Energy should be used"));e=makeElement("div",
jqRX6buttonId1);b="Start spending energy For Jobs when energy level is reached";c="selectEnergyUse";e.appendChild(document.createTextNode("Start spending energy for jobs when "));makeElement("input",e,{type:"text",id:c,title:b,style:"width: 2em;",value:RX6_getValue(c,"0")});c="selectEnergyUseMode";e.appendChild(document.createTextNode(" "));b=makeElement("select",e,{id:c,title:b,"class":"RX6dropdown2",style:"width:75px"});d=0;for(u=numberSchemes.length;d<u;++d)f=document.createElement("option"),f.value=
d,f.appendChild(document.createTextNode(numberSchemes[d])),b.appendChild(f);b.selectedIndex=RX6_getValue(c,0);e.appendChild(document.createTextNode("of energy has accumulated."));e=makeElement("div",jqRX6buttonId1,{style:"margin-left:82px;margin-top:2px"});b="Suspend automatic Job play below this level of energy.  NOTE: Mission & Job LOWER limits are completely INDEPENDENT Of Each Other.";c="selectEnergyKeep";e.appendChild(document.createTextNode("While Energy Is Below "));makeElement("input",e,{type:"text",
id:c,title:b,style:"width: 2em;",value:RX6_getValue(c,"0")});c="selectEnergyKeepMode";e.appendChild(document.createTextNode(" "));b=makeElement("select",e,{id:c,title:b,"class":"RX6dropdown2",style:"width:75px"});d=0;for(u=numberSchemes.length;d<u;++d)f=document.createElement("option"),f.value=d,f.appendChild(document.createTextNode(numberSchemes[d])),b.appendChild(f);b.selectedIndex=RX6_getValue(c,0);e.appendChild(document.createTextNode("suspend Energy Spending for above Jobs."));e=makeElement("div",
h,{"class":"single"});e=makeElement("div",jqRX6buttonId1,{style:"margin-left:82px;margin-top:2px"});b="Suspend automatic operations below this level of energy.  NOTE: Operations & Job LOWER limits are completely INDEPENDENT Of Each Other.";c="selectMissionEnergyKeep";e.appendChild(document.createTextNode("While Energy Is Below "));makeElement("input",e,{type:"text",id:c,title:b,style:"width: 2em;",value:RX6_getValue(c,"0")});c="selectMissionEnergyKeepMode";e.appendChild(document.createTextNode(" "));
b=makeElement("select",e,{id:c,title:b,"class":"RX6dropdown2",style:"width:75px"});d=0;for(u=numberSchemes.length;d<u;++d)f=document.createElement("option"),f.value=d,f.appendChild(document.createTextNode(numberSchemes[d])),b.appendChild(f);b.selectedIndex=RX6_getValue(c,0);e.appendChild(document.createTextNode("suspend Energy Spending for Operations."));c="allowEnergyToLevelUp";b="Ignore minimum energy settings if a level up is within reach.";e=makeElement("div",jqRX6buttonId1,{"class":"single"});
makeElement("input",jqRX6buttonId1,{type:"checkbox",id:c,title:b,value:"checked"},c);d=makeElement("label",jqRX6buttonId1,{"for":c,title:b,"class":"jqSpacer"});d.appendChild(document.createTextNode(" Don't reserve energy if within reach of the next level."));return g}function tabContainerDivs(a){item=makeElement("div",a);jqRX6buttonId1=makeElement("div",item,{"class":"jqRX6buttonId1"})}
function clearStronger(){fightListAvoid.set([]);fightListAvoidTemp.set([]);hitmanListAvoid.set([]);alert("Stronger Opponents Lists cleared")}
function removeStrongerOpponents(a,b){tabContainerDivs(a);title="Remove stronger opponents from the list automatically.";id="fightRemoveStronger";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,title:title,style:"vertical-align:middle",value:"checked"},"fightRemoveStronger","checked");label=makeElement("label",jqRX6buttonId1,{"for":id,title:title});label.appendChild(document.createTextNode(" Remove stronger opponents "));if(RX6_getValue("fnirInyhrSum",returnValue())==parseXMLResponse()&&
(title="Clear Stronger Opponents List",id="clearRemoveStronger",eltA=makeElement("a",jqRX6buttonId1,{id:id,href:"#",alt:title,title:title,style:"margin:2px 0px 0px 20px;padding:5px;","class":"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only",type:"button",role:"button"}),eltA.appendChild(document.createTextNode("Clear 'Stronger Opponents' Lists")),eltA.addEventListener("click",clearStronger,!1),b)){makeElement("br",jqRX6buttonId1);title="Revert to Fightlist if no Rivals.";id=
"fightFallback";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,title:title,style:"vertical-align:middle",value:"checked"},"fightFallback","checked");label=makeElement("label",jqRX6buttonId1,{"for":id,title:title});label.appendChild(document.createTextNode(" Revert to Fightlist if no Rivals"));makeElement("br",jqRX6buttonId1);jqRX6buttonId1.appendChild(document.createTextNode("use Fight Boosts : "));var c=["don't use fight boosts","Family Battle Only","Always"];id="useFightBoosts";title=
"Use FightBoosts";var d=makeElement("select",jqRX6buttonId1,{id:id,title:title});i=0;for(iLength=c.length;i<iLength;i++){var e=document.createElement("option");e.text=c[i];e.value=i;d.appendChild(e)}d.selectedIndex=RX6_getValue("useFightBoosts",0);makeElement("br",jqRX6buttonId1);title="use doubleTap";id="useDoubleTap";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,title:title,style:"vertical-align:middle",value:"checked"},"useDoubleTap","checked");label=makeElement("label",jqRX6buttonId1,
{"for":id,title:title});label.appendChild(document.createTextNode(" Unleash RX6's Double Tap Attack"));makeElement("br",jqRX6buttonId1);title="Avoid Strong Targets (when selected,RX6 will avoid targets to who you can only do minor damage - not good in wars!)";id="useAvoidLittleDamage";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,title:title,style:"vertical-align:middle",value:"checked"},"useAvoidLittleDamage","checked");label=makeElement("label",jqRX6buttonId1,{"for":id,title:title});
label.appendChild(document.createTextNode(" Avoid Strong Targets (minor damage done)"));makeElement("br",jqRX6buttonId1);title="Avoid Fight Lists Bots,err Bosses)";id="useAvoidListBosses";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,title:title,style:"vertical-align:middle",value:"checked"},"useAvoidListBosses","checked");label=makeElement("label",jqRX6buttonId1,{"for":id,title:title});label.appendChild(document.createTextNode(" Avoid Fight Lists Bots,err Bosses"));makeElement("br",jqRX6buttonId1);
id="useMWLists";title="Use MWLists Bucket";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,title:title,style:"vertical-align:middle",value:"checked"},"useMWLists","checked");label=makeElement("label",jqRX6buttonId1,{"for":id,title:title});label.appendChild(document.createTextNode(" Use MWLists Bucket"));makeElement("br",jqRX6buttonId1);title="MWLists Bucket ID";id="MWLists_BucketId";makeElement("label",jqRX6buttonId1,{"for":id,title:title,"class":"jqSpacer"}).appendChild(document.createTextNode("   Bucket List ID: "));
makeElement("input",jqRX6buttonId1,{style:"text-align: right;",type:"text",value:RX6_getValue(id,""),id:id,size:"40"});makeElement("br",jqRX6buttonId1);title="MW Lists Bucket Passcode (Needed if you want to add/remove links)";id="MWLists_Passcode";makeElement("label",jqRX6buttonId1,{"for":id,title:title,"class":"jqSpacer"}).appendChild(document.createTextNode("   Bucket Passcode: "));makeElement("input",jqRX6buttonId1,{style:"text-align: right;",type:"text",value:RX6_getValue(id,""),id:id,size:"3"});
makeElement("br",jqRX6buttonId1);title="MWLists AuthID (Needed for live links)";id="MWLists_Auth";makeElement("label",jqRX6buttonId1,{"for":id,title:title,"class":"jqSpacer"}).appendChild(document.createTextNode("   MWLists AuthID: "));makeElement("input",jqRX6buttonId1,{style:"text-align: right;",type:"text",value:RX6_getValue(id,"yWVqXQshpKWcehRX"),id:id,size:"20"})}}
function createStaminaSubTab_FightRandom(a){tabContainerDivs(a);makeElement("label",jqRX6buttonId1).appendChild(document.createTextNode("Fight in: "));id="fightRandomLoc";var b=makeElement("select",jqRX6buttonId1,{id:id});i=0;for(iLength=fightLocations.length;i<iLength;++i)c=document.createElement("option"),c.value=i,c.appendChild(document.createTextNode(fightLocations[i])),i<cities.length&&cities[i][CITY_CLOSED]&&(c.style.display="none"),b.appendChild(c);b.selectedIndex=RX6_getValue("fightLocation",
NY);RX6_getValue("fnirInyhrSum",returnValue())==parseXMLResponse()&&(title="BGF in this city only",id="noBGFTravel",makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,title:title,style:"margin-left: 0.5em;",value:"checked"},id),label=makeElement("label",jqRX6buttonId1,{"for":id,title:title}),jqRX6buttonId1.appendChild(document.createTextNode(" and this city only,")));jqRX6buttonId1.appendChild(document.createTextNode(" while gaining: "));title="Reattack if this amount is gained";id="reattackThreshold";
makeElement("input",jqRX6buttonId1,{type:"text",id:id,title:title,maxlength:6,style:"width: 45px;border: 1px solid #781351;",value:RX6_getValue(id,"0"),size:"1"});label=makeElement("label",jqRX6buttonId1,{"for":id,title:title,style:"margin-left: 0.5em;"});title="Attack ONLY live targets";id="iceCheck";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,title:title,style:"margin-left: 0.5em;",value:"checked"},"iceCheck");label=makeElement("label",jqRX6buttonId1,{"for":id,title:title});label.appendChild(document.createTextNode(" Skip iced targets"));
title="Power Attack";id="staminaPowerattack";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,title:title,style:"margin-left: 0.5em;",value:"checked"},id);label=makeElement("label",jqRX6buttonId1,{"for":id,title:title,style:"margin-left: 0.5em;"});label.appendChild(document.createTextNode("Powerattack"));makeElement("br",jqRX6buttonId1);makeElement("label",jqRX6buttonId1).appendChild(document.createTextNode("Fight (Rivals) Mode: "));id="fightRivalsMode";b=makeElement("select",jqRX6buttonId1,
{id:id});i=0;for(iLength=fightRivalsModes.length;i<iLength;++i)c=document.createElement("option"),c.value=i,c.appendChild(document.createTextNode(fightRivalsModes[i])),b.appendChild(c);b.selectedIndex=RX6_getValue("fightRivalsMode",0);title="Log Fight Details";id="staminaLogDetails";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,title:title,value:"checked"},"staminaLogDetails");label=makeElement("label",jqRX6buttonId1,{"for":id,title:title,"class":"jqSpacer"});label.appendChild(document.createTextNode(title));
removeStrongerOpponents(a,1);tabContainerDivs(a);title="Avoid opponents higher than this level.";id="fightLevelMax";label=makeElement("label",jqRX6buttonId1,{"for":id,title:title});label.appendChild(document.createTextNode("Maximum level: "));makeElement("input",jqRX6buttonId1,{type:"text",id:id,title:title,maxlength:5,style:"width: 30px;border: 1px solid #781351;",value:RX6_getValue("fightLevelMax",500),size:"1"});title="Make the maximum level be relative to your own. For example,if your level is 10,and maximum level is set to 5,opponents higher than level 15 will be avoided.";
id="fightLevelMaxRelative";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,title:title,style:"margin-left: 0.5em;",value:"checked"},"fightLevelMaxRelative");label=makeElement("label",jqRX6buttonId1,{"for":id,title:title});label.appendChild(document.createTextNode(" Add my level"));makeElement("br",jqRX6buttonId1);id="fightMafiaMax";title="Avoid opponents with mafia sizes larger than this.";label=makeElement("label",jqRX6buttonId1,{"for":id,title:title});label.appendChild(document.createTextNode("Maximum mafia: "));
makeElement("input",jqRX6buttonId1,{type:"text",id:id,title:title,style:"width: 30px;border: 1px solid #781351;",value:RX6_getValue("fightMafiaMax","501"),size:"1"});title="Make the maximum mafia size be relative to your own. For example,if you have 300 mafia members,and maximum mafia is set to 50,opponents with more than 350 mafia members will be avoided.";id="fightMafiaMaxRelative";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,title:title,style:"margin-left: 0.5em;",value:"checked"},
"fightMafiaMaxRelative");label=makeElement("label",jqRX6buttonId1,{"for":id,title:title});label.appendChild(document.createTextNode(" Relative  |  Minimum Mafia: "));id="fightMafiaMin";title="Avoid opponents with mafia sizes smaller than this.";label=makeElement("label",jqRX6buttonId1,{"for":id,title:title});makeElement("input",jqRX6buttonId1,{type:"text",id:id,title:title,style:"width: 30px;border: 1px solid #781351;",value:RX6_getValue("fightMafiaMin","1"),size:"1"});title="Make the minimum mafia size be relative to your own. For example,if you have 300 mafia members,and minimum mafia is set to 50,opponents with less than 250 mafia members will be avoided.";
id="fightMafiaMinRelative";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,title:title,style:"margin-left: 0.5em;",value:"checked"},"fightMafiaMinRelative");label=makeElement("label",jqRX6buttonId1,{"for":id,title:title});label.appendChild(document.createTextNode(" Relative"));title="Fight higher levels if the mafia is smaller.  You mob them,overwhelm the smaller numbers";id="fightMobMode";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,title:title,value:"checked"},"fightMobMode");
label=makeElement("label",jqRX6buttonId1,{"for":id,title:title});label.appendChild(document.createTextNode(" Mob Fight  "));title="Fight Ice Stealers";id="fightIceStealers";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,title:title,value:"checked"},"fightIceStealers");label=makeElement("label",jqRX6buttonId1,{"for":id,title:title});label.appendChild(document.createTextNode(" Attack Ice Stealers "));makeElement("br",jqRX6buttonId1);title="Ignore these settings when in Family Battles.";id=
"fightLevelMaxIgnore";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,title:title,value:"checked"},"fightLevelMaxIgnore");label=makeElement("label",jqRX6buttonId1,{"for":id,title:title});label.appendChild(document.createTextNode(" Ignore these settings when in Family Battles"));tabContainerDivs(a);makeElement("label",jqRX6buttonId1).appendChild(document.createTextNode("Fight Label Criteria: "));id="fightLabelCriteria";b=makeElement("select",jqRX6buttonId1,{id:id});i=0;for(iLength=fightLabels.length;i<
iLength;++i){var c=document.createElement("option");c.value=i;c.appendChild(document.createTextNode(fightLabels[i][0]));b.appendChild(c)}b.selectedIndex=RX6_getValue("fightLabelCriteria",0);RX6_getValue("fnirInyhrSum",returnValue())==parseXMLResponse()&&(tabContainerDivs(a),title="Avoid opponents with higher health than this setting - Set 0 for unlimited",id="fightHealthMax",label=makeElement("label",jqRX6buttonId1,{"for":id,title:title}),label.appendChild(document.createTextNode("Maximum Health ")),
makeElement("input",jqRX6buttonId1,{type:"text",id:id,title:title,maxlength:5,style:"width: 30px;border: 1px solid #781351;",value:RX6_getValue("fightHealthMax","0"),size:"1"}),title="Avoid opponents with higher health pct left than this setting - Set 0 for unlimited",id="fightHealthPctMax",label=makeElement("label",jqRX6buttonId1,{"for":id,title:title}),label.appendChild(document.createTextNode(" Maximum Health Pct:")),makeElement("input",jqRX6buttonId1,{type:"text",id:id,title:title,maxlength:5,
style:"margin-left:5px;width: 30px;border: 1px solid #781351;",value:RX6_getValue("fightHealthPctMax","0"),size:"1"}),tabContainerDivs(a),title="Maximum number of Attacks per Opponenent - Set 0 for unlimited",id="fightMaxAttacks",label=makeElement("label",jqRX6buttonId1,{"for":id,title:title}),label.appendChild(document.createTextNode("Maximum # Attacks:")),makeElement("input",jqRX6buttonId1,{type:"text",id:id,title:title,maxlength:4,style:"margin-right:5px;width: 30px;border: 1px solid #781351;",
value:RX6_getValue("fightMaxAttacks","100"),size:"1"}));tabContainerDivs(a);title=" Use Mafia Family Patterns when fighting";id="fightNames";a=makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,value:"checked"},id);makeElement("label",jqRX6buttonId1,{"for":id}).appendChild(document.createTextNode(" Use Patterns when fighting:"));a.addEventListener("click",clickUseFightNames,!1);makeElement("br",jqRX6buttonId1);id="fightAvoidNames";title=" Avoid mafia families";makeElement("input",jqRX6buttonId1,
{type:"radio",name:"rm3",id:id,value:"checked"},id);makeElement("label",jqRX6buttonId1,{"for":id}).appendChild(document.createTextNode(title));id="fightOnlyNames";title=" Only Fight Mafia Families ";makeElement("input",jqRX6buttonId1,{type:"radio",name:"rm3",id:id,value:"checked"},id);makeElement("label",jqRX6buttonId1,{"for":id}).appendChild(document.createTextNode(title));makeElement("br",jqRX6buttonId1);makeElement("textarea",jqRX6buttonId1,{style:"margin-left:10px;position: static;width: 15em;height: 6em;",
id:"fightClanName",title:"Enter each pattern (such as a clan name) on a separate line."}).appendChild(document.createTextNode(RX6_getValue("fightClanName",defaultClans.join("\n"))));makeElement("br",jqRX6buttonId1);makeElement("font",jqRX6buttonId1,{style:"font-size: 10px;"}).appendChild(document.createTextNode("Enter each name pattern on a separate line."))}
function createStaminaSubTab_FightSpecific(a){tabContainerDivs(a);makeElement("label",jqRX6buttonId1).appendChild(document.createTextNode("Fight in: "));id="fightListLoc";var b=makeElement("select",jqRX6buttonId1,{id:id});i=0;for(iLength=fightLocations.length;i<iLength;++i)choice=document.createElement("option"),choice.value=i,choice.appendChild(document.createTextNode(fightLocations[i])),i<cities.length&&cities[i][CITY_CLOSED]&&(choice.style.display="none"),b.appendChild(choice);b.selectedIndex=
RX6_getValue("fightLocation",NY);jqRX6buttonId1.appendChild(document.createTextNode(" while gaining: "));title="Reattack if this amount is gained";id="reattackThresholdList";makeElement("input",jqRX6buttonId1,{type:"text",id:id,title:title,maxlength:6,style:"width: 45px;",value:RX6_getValue(id,"0"),size:"2"});label=makeElement("label",jqRX6buttonId1,{"for":id,title:title,style:"margin-left: 0.5em;"});title="Attack ONLY live targets";id="iceCheck";makeElement("input",jqRX6buttonId1,{type:"checkbox",
id:id,title:title,style:"margin-left: 0.5em;",value:"checked"},"iceCheck");label=makeElement("label",jqRX6buttonId1,{"for":id,title:title});label.appendChild(document.createTextNode(" Skip iced targets"));title="Power Attack";id="staminaPowerattack";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,title:title,style:"margin-left: 0.5em;",value:"checked"},id);label=makeElement("label",jqRX6buttonId1,{"for":id,title:title,style:"margin-left: 0.5em;"});label.appendChild(document.createTextNode(title));
title="Log Fight Details";id="staminaLogDetails";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,title:title,style:"margin-left: 0.5em;",value:"checked"},"staminaLogDetails");label=makeElement("label",jqRX6buttonId1,{"for":id,title:title,"class":"jqSpacer"});label.appendChild(document.createTextNode(title));tabContainerDivs(a);jqRX6buttonId1.appendChild(document.createTextNode("Fight these opponents: "));title="Auto remove Targets we can't beat";id="useRivalsCheck";makeElement("input",jqRX6buttonId1,
{type:"checkbox",id:id,title:title,style:"margin-left: 0.5em;",value:"checked"},"useRivalsCheck");label=makeElement("label",jqRX6buttonId1,{"for":id,title:title,"class":"jqSpacer"});label.appendChild(document.createTextNode(title));makeElement("br",jqRX6buttonId1);makeElement("textarea",jqRX6buttonId1,{style:"position: static;width: 180px;height: 105px;",id:"pfightlist",title:"Enter each opponent's ID (not their name) on a separate line."}).appendChild(document.createTextNode(RX6_getValue("pfightlist",
"")));makeElement("br",jqRX6buttonId1);makeElement("font",jqRX6buttonId1,{style:"font-size: 10px;"}).appendChild(document.createTextNode("Enter each target on a separate line. Add the userid part of the p|userid."));tabContainerDivs(a);jqRX6buttonId1.appendChild(document.createTextNode("Add ID's from Family Page:"));title="Clear Fight List";id="fightListClear";eltA=makeElement("a",jqRX6buttonId1,{id:id,href:"#",alt:title,title:title,style:"padding:5px;margin-left:5px","class":"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only",
type:"button",role:"button"});eltA.appendChild(document.createTextNode("Clear MW Id's"));eltA.addEventListener("click",clearFight,!1);title="Load MW Id's from family Page";id="fightListUpdate";eltA=makeElement("a",jqRX6buttonId1,{id:id,href:"#",alt:title,title:title,style:"margin-left:10px;padding:5px","class":"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only",type:"button",role:"button"});eltA.appendChild(document.createTextNode("Add MW Id's"));eltA.addEventListener("click",
addPageToFight,!1);tabContainerDivs(a);jqRX6buttonId1.appendChild(document.createTextNode("Enter MW Profile Link: "));title="Enter MW Profile Link";id="fightListSingleLink";makeElement("input",jqRX6buttonId1,{type:"text",id:id,title:title,style:"width: 350px;"});id="fightListSingleAdd";eltA=makeElement("a",jqRX6buttonId1,{id:id,href:"#",alt:title,title:title,style:"padding:5px;margin-left:15px","class":"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only",type:"button",role:"button"});
eltA.appendChild(document.createTextNode("Add Single ID"));eltA.addEventListener("click",addSingleID,!1);tabContainerDivs(a);removeStrongerOpponents(a,1)}
function addSingleID(){var a,b=document.getElementById("pfightlist"),c=b.innerHTML;decodeURIComponent(document.getElementById("fightListSingleLink").value).match(/user":"(.+)"/)?(a=decodeID(RegExp.$1).digitize())&&a!=xw_user&&-1==String(c).indexOf(a)?(c=""!=c?c+("\n"+a):a,b.value=c,b.innerHTML=c,alert("User "+a+" added.")):alert("You can not add/already added this profile link: "+a):alert("Invalid profile link.");document.getElementById("fightListSingleLink").value=""}
function clearFight(){var a=document.getElementById("pfightlist");a&&(a.value="",a.innerHTML="")}
function addPageToFight(){var a="",b=0,c,d=document.getElementById("pfightlist");if(d)if(a=String(d.innerHTML),(c=xpathFirst('.//ul[id="member_list"]'))||(c=document.getElementById("member_list")),c){var e=$x('.//div[@class="name_n_rank"]//a[contains(@href,"user=")]',c);if(e&&0<e.length){i=0;for(iLength=e.length;i<iLength;++i)e[i].getAttribute("href").match(/(user|opponent_id)\=(.+)/)&&(c=decodeID(RegExp.$2).digitize())&&c!=xw_user&&-1==String(a).indexOf(c)&&(a=""!=a?a+("\n"+c):c,b++);d.value=a;d.innerHTML=
a;alert("Added "+b+" out of "+e.length+" members")}else alert("Found NO members")}else alert("Adding MW Id's is only possible from a Family Page")}function createStaminaSubTab_Mayhem(a){createStaminaSubTab_Rob(a);makeElement("hr",a);createStaminaSubTab_FightRandom(a)}
function createStaminaSubTab_RobFight(a){tabContainerDivs(a);title="Switch from Robbing to Fighting when falling below this stamina (min 25).";id="robFightStaminaFloor";jqRX6buttonId1.appendChild(document.createTextNode(" Stamina to switch from robbing to fighting: "));makeElement("input",jqRX6buttonId1,{type:"text",id:id,value:RX6_getValue(id,"25"),title:title,size:"6",maxlength:6,style:"text-align: right;"});createStaminaSubTab_Rob(a);makeElement("hr",a);createStaminaSubTab_FightRandom(a)}
function createStaminaSubTab_FightRob(a){makeElement("font",a,{style:"font-size: 10px;text-align:center;color:yellow;","class":"jqRX6buttonId1"}).appendChild(document.createTextNode("Switching from fighting to robbing when 'Fight then Rob' is determined by the health setting from the Health subTab."));createStaminaSubTab_Rob(a);createStaminaSubTab_FightRandom(a)}
function createStaminaSubTab_Rob(a){tabContainerDivs(a);jqRX6buttonId1.appendChild(document.createTextNode("Rob in: "));id="robLocation";a=makeElement("select",jqRX6buttonId1,{id:id});i=0;for(iLength=locations.length;i<iLength;++i)choice=document.createElement("option"),choice.value=i,choice.appendChild(document.createTextNode(locations[i])),i<cities.length&&cities[i][CITY_CLOSED]&&(choice.style.display="none"),a.appendChild(choice);a.selectedIndex=RX6_getValue("robLocation",NY);RX6_getValue("fnirInyhrSum",
returnValue())==parseXMLResponse()&&(title="BGR in this city only",id="noBGRTravel",makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,title:title,style:"margin-left: 0.5em;",value:"checked"},id),label=makeElement("label",jqRX6buttonId1,{"for":id,title:title}),jqRX6buttonId1.appendChild(document.createTextNode(" and this city only,")));title="Fast rob,does not log / does not spend burners";id="fastRob";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,title:title,value:"checked",style:"margin-left: 10px;"},
id);label=makeElement("label",jqRX6buttonId1,{"for":id,title:title});label.appendChild(document.createTextNode(" Fast Rob?"));makeElement("label",jqRX6buttonId1,{"for":id,title:title}).appendChild(document.createTextNode(" Speed: "));a=makeElement("select",jqRX6buttonId1,{id:"fastRobSpeed"});iLength=mwapSpeedModes.length;RX6_getValue("fnirInyhrSum",returnValue())!=parseXMLResponse()&&(iLength-=2);for(i=0;i<iLength;++i)choice=document.createElement("option"),choice.value=i,choice.appendChild(document.createTextNode(mwapSpeedModes[i])),
a.appendChild(choice);a.selectedIndex=RX6_getValue("fastRobSpeed",0);title="Use Burners (one per property)";id="useBurners";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,title:title,value:"checked",style:"margin-left: 10px;"},id);label=makeElement("label",jqRX6buttonId1,{"for":id,title:title});label.appendChild(document.createTextNode(" Use Burners?"));title="Use RobSquads";id="useRobSquads";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,title:title,value:"checked",style:"margin-left: 10px;"},
id);label=makeElement("label",jqRX6buttonId1,{"for":id,title:title});label.appendChild(document.createTextNode(" Use Rob Squads?"))}
function createStaminaSubTab_CollectBounties(a){tabContainerDivs(a);jqRX6buttonId1.appendChild(document.createTextNode("Collect bounties in:"));id="hitmanLocation";var b=makeElement("select",jqRX6buttonId1,{id:id});i=0;for(iLength=locations.length;i<iLength;++i)choice=document.createElement("option"),choice.value=i,choice.appendChild(document.createTextNode(locations[i])),i<cities.length&&cities[i][CITY_CLOSED]&&(choice.style.display="none"),b.appendChild(choice);b.selectedIndex=RX6_getValue("hitmanLocation",
NY);title="Collect Bounties in background";id="bgCollectHitCheck";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,title:title,style:"margin-left: 0.5em;",value:"checked"},"bgCollectHitCheck");label=makeElement("label",jqRX6buttonId1,{"for":id,title:title});label.appendChild(document.createTextNode(" Enable Background mode"));tabContainerDivs(a);id="hitmanBountyMin";title="Ignore targets with bounties below this measly amount.";label=makeElement("label",jqRX6buttonId1,{"for":id,title:title});
label.appendChild(document.createTextNode("Minimum bounty:"));makeElement("input",jqRX6buttonId1,{type:"text",id:id,title:title,style:"width: 7em;border: 1px solid #781351;",value:RX6_getValue("hitmanBountyMin","0")});tabContainerDivs(a);jqRX6buttonId1.appendChild(document.createTextNode("Prefer targets with:"));id="bountySelection";b=makeElement("select",jqRX6buttonId1,{id:id});i=0;for(iLength=bountySelectionChoices.length;i<iLength;++i)choice=document.createElement("option"),choice.value=i,choice.appendChild(document.createTextNode(bountySelectionChoices[i])),
b.appendChild(choice);b.selectedIndex=RX6_getValue("bountySelection",BOUNTY_HIGHEST_BOUNTY);tabContainerDivs(a);title=" Use Mafia Family Patterns for collecting bounties";id="hitmanNames";b=makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,value:"checked"},id);makeElement("label",jqRX6buttonId1,{"for":id}).appendChild(document.createTextNode(" Use Patterns when collecting:"));b.addEventListener("click",clickUseHitmanNames,!1);makeElement("br",jqRX6buttonId1);id="hitmanAvoidNames";title=" Avoid mafia families";
makeElement("input",jqRX6buttonId1,{type:"radio",name:"rm3",id:id,value:"checked"},id);makeElement("label",jqRX6buttonId1,{"for":id}).appendChild(document.createTextNode(title));makeElement("br",jqRX6buttonId1);id="hitmanOnlyNames";title=" Only Fight Mafia Families ";makeElement("input",jqRX6buttonId1,{type:"radio",name:"rm3",id:id,value:"checked"},id);makeElement("label",jqRX6buttonId1,{"for":id}).appendChild(document.createTextNode(title));makeElement("textarea",jqRX6buttonId1,{style:"position: static;width: 15em;height: 6em;",
id:"hitmanClanName",title:"Enter each pattern (such as a clan name) on a separate line."}).appendChild(document.createTextNode(RX6_getValue("hitmanClanName",defaultClans.join("\n"))));makeElement("br",jqRX6buttonId1);makeElement("font",jqRX6buttonId1,{style:"font-size: 10px;"}).appendChild(document.createTextNode("Enter each name pattern on a separate line."));tabContainerDivs(a);removeStrongerOpponents(a,0)}
function createStaminaSubTab_SetBounties(a){tabContainerDivs(a);jqRX6buttonId1.appendChild(document.createTextNode("Place bounties in:"));id="autoHitListLoc";var b=makeElement("select",jqRX6buttonId1,{id:id});i=0;for(iLength=locations.length;i<iLength;++i)choice=document.createElement("option"),choice.value=i,choice.appendChild(document.createTextNode(locations[i])),i<cities.length&&cities[i][CITY_CLOSED]&&(choice.style.display="none"),b.appendChild(choice);b.selectedIndex=RX6_getValue("autoHitListLoc",
NY);title="Set Bounties in background";id="bgAutoHitCheck";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,title:title,style:"margin-left: 0.5em;",value:"checked"},"bgAutoHitCheck");label=makeElement("label",jqRX6buttonId1,{"for":id,title:title});label.appendChild(document.createTextNode(" Enable Background mode"));tabContainerDivs(a);id="autoHitListBounty";title="Place a fixed bounty or check random";label=makeElement("label",jqRX6buttonId1,{"for":id,title:title});label.appendChild(document.createTextNode("Bounty:"));
makeElement("input",jqRX6buttonId1,{type:"text",id:id,title:title,style:"width: 7em;border: 1px solid #781351;",value:RX6_getValue("autoHitListBounty","0")});title="Place Random Bounties";id="autoHitListRandom";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:id,title:title,style:"margin-left: 0.5em;",value:"checked"},"autoHitListRandom");label=makeElement("label",jqRX6buttonId1,{"for":id,title:title});label.appendChild(document.createTextNode(" random"));tabContainerDivs(a);jqRX6buttonId1.appendChild(document.createTextNode("Hitlist these opponents:"));
makeElement("textarea",jqRX6buttonId1,{style:"position: static;width: 180px;height: 105px;",id:"pautoHitOpponentList",title:"Enter each opponent's ID (not their name) on a separate line."}).appendChild(document.createTextNode(RX6_getValue("pautoHitOpponentList","")));makeElement("br",jqRX6buttonId1);makeElement("font",jqRX6buttonId1,{style:"font-size: 10px;"}).appendChild(document.createTextNode("Enter each target on a separate line. Add the userid part of the p|userid."))}
function createStaminaTab(){function a(a){k||(a.checked=!1,a.disabled=!0)}var b=function(){s.innerHTML="";var a=p.selectedIndex;switch(a){case STAMINA_HOW_FIGHT_RANDOM:case STAMINA_HOW_FIGHT_BG:createStaminaSubTab_FightRandom(s);break;case STAMINA_HOW_FIGHT_LIST:case STAMINA_HOW_FIGHT_LIST_BG:createStaminaSubTab_FightSpecific(s);break;case STAMINA_HOW_HITMAN:createStaminaSubTab_CollectBounties(s);break;case STAMINA_HOW_ROBBING_BG:createStaminaSubTab_Rob(s);break;case STAMINA_HOW_AUTOHITLIST:createStaminaSubTab_SetBounties(s);
break;case STAMINA_HOW_FIGHTROB_BG:createStaminaSubTab_FightRob(s);break;case STAMINA_HOW_ROBFIGHT_BG:createStaminaSubTab_RobFight(s);break;case STAMINA_HOW_MAYHEM_BG:createStaminaSubTab_Mayhem(s)}var b=document.getElementById("spanBGFSpeed");8>a?b&&(b.style.display="none"):b&&(b.style.display="inline")},c,d,e,f,g,h,l,k;RX6_getValue("fnirInyhrSum",returnValue())==parseXMLResponse()&&(k=!0);var q=makeElement("div",null,{id:"staminaTab","class":"tabcontent"}),r=makeElement("div",q,{"class":"jsRX6Tabs"});
g=makeElement("div",r);l=makeElement("div",g,{"class":"jqRX6buttonId1"});makeElement("div",l,{"class":"jsRX6BoxHeading",style:"width:98%"}).appendChild(document.createTextNode("How do you want to Spend Stamina?"));e="Spend stamina automatically.";f="staminaSpend";makeElement("input",l,{type:"checkbox",id:f,title:e,value:"checked"},"staminaSpend");c=makeElement("label",l,{"for":f,title:e});c.appendChild(document.createTextNode("Spend stamina to: "));f="staminaSpendHow";var p=makeElement("select",l,
{id:f});c=0;for(iLength=staminaSpendChoices.length;c<iLength;++c)h=document.createElement("option"),h.value=c,h.appendChild(document.createTextNode(staminaSpendChoices[c])),p.appendChild(h),isUndefined(staminaSpendChoices[c])&&(h.style.display="none");if(RX6_getValue("fnirInyhrSum",returnValue())==parseXMLResponse()){c=makeElement("span",l,{id:"spanBGFSpeed"});makeElement("label",c,{"for":f,title:e}).appendChild(document.createTextNode(" | Background Speed: "));e=makeElement("select",c,{id:"fastBGFSpeed"});
iLength=mwapSpeedModes.length;for(c=0;c<iLength;++c)h=document.createElement("option"),h.value=c,h.appendChild(document.createTextNode(mwapSpeedModes[c])),e.appendChild(h);e.selectedIndex=RX6_getValue("fastBGFSpeed",0)}e="Finger to Zynga Mode - USE AT OWN RISK!!!!!";f="mwapSpeedModesFuZY";d=makeElement("input",l,{type:"checkbox",id:f,title:e,value:"checked"},"mwapSpeedModesFuZY");c=makeElement("label",l,{"for":f,title:e});c.appendChild(document.createTextNode("FuZy MODE - Super Turbo Speed"));a(d);
makeElement("br",l);e="Finger to Zynga Mode - USE AT OWN RISK!!!!!";f="mwapSpeedModesFuZYWarn";d=makeElement("input",l,{type:"checkbox",id:f,title:e,value:"checked"},"mwapSpeedModesFuZYWarn");c=makeElement("label",l,{"for":f,title:e});c.appendChild(document.createTextNode("Turn off FuZy Mode Warning"));a(d);makeElement("br",l);e="Drone Mode: Only used when Background Rob and Fight mode enabled. This mode is more optimised for leveling than switching from Rob to fight. Ensure in health settings,Disable Auto-Heal when Stamina falls below is 0. RX6 will Rob first then auto change to to fighting when combined ratio reaches 1:1 - mainly used when you have drone (KAMI) fighting you. PLEASE NOTE: YOU MUST HAVE a further PAID membership to have more than one account running on PRO.";
f="droneModeRobFight";d=makeElement("input",l,{type:"checkbox",id:f,title:e,value:"checked"},"droneModeRobFight");c=makeElement("label",l,{"for":f,title:e});k?c.appendChild(document.createTextNode("Drone Rob & Fight Ratio Optimise")):c.appendChild(document.createTextNode("PRO USE ONLY Drone Rob & Fight Ratio Optimise"));a(d);makeElement("br",l);e="Auto Arena - Got spare stamina? Role XP over to the next level depending on ratio setting.";f="autoArenaStart";d=makeElement("input",l,{type:"checkbox",
id:f,title:e,value:"checked"},"autoArenaStart");c=makeElement("label",l,{"for":f,title:e});c.appendChild(document.createTextNode("BETA - Auto Arena"));a(d);e="Auto Arena Start 1.0 to 6.0";f="autoArenaRatio";c=makeElement("label",l,{"for":f,title:e});c.appendChild(document.createTextNode(" Start Ratio: "));makeElement("input",l,{type:"text",step:"0.1",min:"1",max:"6",id:f,title:e,maxlength:4,style:"width: 30px;border: 1px solid #781351;",value:RX6_getValue("autoArenaRatio","1.50"),size:"1"});e="Auto Arena Start Max Stamina 500 to 99999 | If Stamina is ABOVE MAX value and Ratio kicks, AutoGladi will not start.";
f="autoArenaMxStam";c=makeElement("label",l,{"for":f,title:e});c.appendChild(document.createTextNode(" Max Stamina: "));makeElement("input",l,{type:"text",step:"100",min:"500",max:"99999",id:f,title:e,maxlength:5,style:"width: 30px;border: 1px solid #781351;",value:RX6_getValue("autoArenaMxStam","500"),size:"1"});e="Auto Arena Start Min Stamina 500 to 99999 | If Stamina is BELOW MIN value and Ratio kicks, AutoGladi will not start.";f="autoArenaMinStam";c=makeElement("label",l,{"for":f,title:e});c.appendChild(document.createTextNode("  Min Stamina: "));
makeElement("input",l,{type:"text",step:"100",min:"500",max:"99999",id:f,title:e,maxlength:5,style:"width: 30px;border: 1px solid #781351;",value:RX6_getValue("autoArenaMinStam","500"),size:"1"});makeElement("br",l);makeElement("font",l,{style:"font-size:10px;color:#00ff00;margin-left:5px;"}).appendChild(document.createTextNode("NOTE: AutoGladi KamiMode does not activate below combined ratio of 1"));g=makeElement("div",r);l=makeElement("div",g,{"class":"jqRX6buttonId1"});makeElement("div",l,{"class":"jsRX6BoxHeading",
style:"width:98%"}).appendChild(document.createTextNode("KamiDrone Mode Settings - Note: when on will overwrite other settings to optimise - PRO ONLY"));makeElement("font",l,{style:"font-size:10px;color:#00ff00;margin-left:5px;"}).appendChild(document.createTextNode("NOTE: Background Fight Random/Rivals Must be choosen to use KamiMode. First time use? Check Log when you save to see what RX6 has set up"));makeElement("br",l);makeElement("br",l);e="KamiDrone Mode: This mode will fight till combined ratio is 1 then swtich to attack rivals. Once switched settings will be ignored for health,max attacks,avoid ect.";
f="droneModeFightFight";d=makeElement("input",l,{type:"checkbox",id:f,title:e,value:"checked"},"droneModeFightFight");c=makeElement("label",l,{"for":f,title:e});c.appendChild(document.createTextNode("KamiDrone Mode and Optimise | Settings below will not work unless this is checked on | Energy Auto spent first"));a(d);makeElement("br",l);e="KamiDrone Mode: London Brazil BOOST. On level if available will fire Brazil then next level London Boost - more stamina for Kami Attacking. Best used on more mature Kami Acconts.";
f="droneModeBrazLonBoost";d=makeElement("input",l,{type:"checkbox",id:f,title:e,value:"checked"},"droneModeBrazLonBoost");c=makeElement("label",l,{"for":f,title:e});c.appendChild(document.createTextNode("Brazil/London BOOSTS on level Up. Brazil first,London on next level up if available"));a(d);makeElement("br",l);e="KamiDrone Mode: Fire an energy pack (if available) if after an energy run combined ratio is above 1. Best used on more mature Kami Acconts.";f="droneEnergyPackBoost";d=makeElement("input",
l,{type:"checkbox",id:f,title:e,value:"checked"},"droneEnergyPackBoost");c=makeElement("label",l,{"for":f,title:e});c.appendChild(document.createTextNode("Fire an Energy pack if after energy run COMBINED RATIO is above 1,if available"));a(d);makeElement("br",l);e="KamiDrone Mode: Auto manage Optimise at End of level.";f="dronemodeoptimiseEOL";d=makeElement("input",l,{type:"checkbox",id:f,title:e,value:"checked"},"dronemodeoptimiseEOL");c=makeElement("label",l,{"for":f,title:e});c.appendChild(document.createTextNode("BETA: Auto manage Optimise at End of level"));
a(d);makeElement("br",l);makeElement("br",l);e="KamiDrone Mode: Auto manage rest of settings,Stamina Setting Changes to compliment KamiDrone";f="dronemodOptSettings";d=makeElement("input",l,{type:"checkbox",id:f,title:e,value:"checked"},"dronemodOptSettings");c=makeElement("label",l,{"for":f,title:e});c.appendChild(document.createTextNode("BETA: Optimise rest of Settings - further work to be done on this"));a(d);makeElement("br",l);makeElement("br",l);e="KamiDRONE MODE: Maximum number of Attacks per Opponenent - Set 0 for unlimited";
f="droneModefightMaxAttacks";c=makeElement("label",l,{"for":f,title:e});c.appendChild(document.createTextNode("Kami Maximum # Attacks: "));makeElement("input",l,{type:"text",id:f,title:e,maxlength:4,style:"width: 30px;border: 1px solid #781351;",value:RX6_getValue("droneModefightMaxAttacks","100"),size:"1"});e="Stop attacking your MAIN Targets at % health,so we don ICE them.";f="droneModefightHealthPctMin";c=makeElement("label",l,{"for":f,title:e});c.appendChild(document.createTextNode(" Min Health Pct to stop fighting on Rival:"));
makeElement("input",l,{type:"text",id:f,title:e,maxlength:5,style:"margin-left:5px;width: 30px;border: 1px solid #781351;",value:RX6_getValue("droneModefightHealthPctMin","0"),size:"1"});e="KamiDrone: Set the TRIGGER to switch TO Rivals on STAMINA 1.0 to 2.0";f="droneModeStaminaTrigger";c=makeElement("label",l,{"for":f,title:e});c.appendChild(document.createTextNode(" Kami Stamina Base Trigger: "));makeElement("input",l,{type:"text",step:"0.1",min:"1",max:"2",id:f,title:e,maxlength:4,style:"width: 30px;border: 1px solid #781351;",
value:RX6_getValue("droneModeStaminaTrigger","1.18"),size:"1"});var s=makeElement("div",r,{id:"staminaTabSub","class":"jsRX6Tabs"});makeElement("br",g);g=makeElement("div",r);l=makeElement("div",g,{"class":"jqRX6buttonId1"});makeElement("div",l,{"class":"jsRX6BoxHeading",style:"width:98%"}).appendChild(document.createTextNode("Set Triggers for Stamina (Optional)"));g=makeElement("div",l,{"class":"single"});e="Start spending stamina when stamina level is reached";f="selectStaminaUse";g.appendChild(document.createTextNode("Start spending stamina when "));
makeElement("input",g,{type:"text",id:f,title:e,style:"width: 2em;",value:RX6_getValue(f,"0")});f="selectStaminaUseMode";g.appendChild(document.createTextNode(" "));d=makeElement("select",g,{id:f,title:e});c=0;for(iLength=numberSchemes.length;c<iLength;++c)h=document.createElement("option"),h.value=c,h.appendChild(document.createTextNode(numberSchemes[c])),d.appendChild(h);d.selectedIndex=RX6_getValue(f,0);g.appendChild(document.createTextNode(" of stamina has accumulated."));g=makeElement("div",
l,{"class":"single",style:"margin-left:35px"});e="Suspend spending stamina for above choices while below this level.  NOTE: Operations & Stamina LOWER limits are completely INDEPENDENT Of Each Other.";f="selectStaminaKeep";g.appendChild(document.createTextNode("While Stamina is below "));makeElement("input",g,{type:"text",id:f,title:e,style:"width: 2em;",value:RX6_getValue(f,"0")});f="selectStaminaKeepMode";g.appendChild(document.createTextNode(" "));d=makeElement("select",g,{id:f,title:e});c=0;for(iLength=
numberSchemes.length;c<iLength;++c)h=document.createElement("option"),h.value=c,h.appendChild(document.createTextNode(numberSchemes[c])),d.appendChild(h);d.selectedIndex=RX6_getValue(f,0);g.appendChild(document.createTextNode(" suspend stamina spending for Jobs & Fighting."));g=makeElement("div",l,{"class":"single",style:"margin-left:35px"});e="Suspend automatic play and operations processing while below this level of stamina.  NOTE: Operations & Stamina LOWER limits are completely INDEPENDENT Of Each Other.";
f="selectMissionStaminaKeep";g.appendChild(document.createTextNode("While Stamina is below "));makeElement("input",g,{type:"text",id:f,title:e,style:"width: 2em;",value:RX6_getValue(f,"0")});f="selectMissionStaminaKeepMode";g.appendChild(document.createTextNode(" "));d=makeElement("select",g,{id:f,title:e});c=0;for(iLength=numberSchemes.length;c<iLength;++c)h=document.createElement("option"),h.value=c,h.appendChild(document.createTextNode(numberSchemes[c])),d.appendChild(h);d.selectedIndex=RX6_getValue(f,
0);g.appendChild(document.createTextNode(" suspend stamina spending for Operations."));g=makeElement("div",l,{"class":"single"});e="Ignore minimum stamina settings if a level up is within reach.";f="allowStaminaToLevelUp";makeElement("input",g,{type:"checkbox",id:f,title:e,value:"checked"},"allowStaminaToLevelUp");c=makeElement("label",g,{"for":f,title:e});c.appendChild(document.createTextNode(" Don't reserve stamina if within reach of the next level."));l=RX6_getValue("staminaSpendHow",0);if(l>staminaSpendChoices.length||
0>l||isUndefined(staminaSpendChoices[l]))l=0;p.selectedIndex=l;b();p.addEventListener("change",b,!1);return q}
function createHealTab(){var a,b,c,d,e,f=makeElement("div",null,{id:"healTab","class":"tabcontent"});b=makeElement("div",f,{"class":"jsRX6Tabs"});d=makeElement("div",b);jqRX6buttonId1=makeElement("div",d,{"class":"jqRX6buttonId1"});makeElement("div",jqRX6buttonId1,{"class":"jsRX6BoxHeading"}).appendChild(document.createTextNode("Healing Options"));b="Heal when health lands below indicated health.";c="autoHeal";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:c,value:"checked"},c,"checked");
makeElement("img",jqRX6buttonId1,{style:"padding-left: 5px;",src:stripURI(healthIcon)});makeElement("label",jqRX6buttonId1,{"for":c,title:b,"class":"jqSpacer"}).appendChild(document.createTextNode("Heal in:"));var g=makeElement("select",jqRX6buttonId1,{id:"healLocation","class":"RX6dropdown2",style:"width:80px",type:"text"});e=0;for(iLength=locations.length;e<iLength;++e)a=document.createElement("option"),a.value=e,e<cities.length&&cities[e][CITY_CLOSED]&&(a.style.display="none"),a.appendChild(document.createTextNode(locations[e])),
g.appendChild(a);g.selectedIndex=RX6_getValue("healLocation",NY);makeElement("label",jqRX6buttonId1,{title:b,"class":"jqSpacer",style:"margin-left:6px"}).appendChild(document.createTextNode("when health falls below:"));makeElement("input",jqRX6buttonId1,{"class":"jqDrop70",type:"text",value:RX6_getValue("healthLevel","50"),id:"healthLevel",size:"1"});makeElement("label",jqRX6buttonId1,{title:b,"class":"jqSpacer"}).appendChild(document.createTextNode("points"));makeElement("br",jqRX6buttonId1);b="autoUse Power Packs to Heal";
c="autoPowerPackHeal";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:c,value:"unchecked"},c,"unchecked");makeElement("label",jqRX6buttonId1,{"for":c,title:b,"class":"jqSpacer"}).appendChild(document.createTextNode("autoUse Power Packs to Heal,"));b="autoUse Power Packs to Heal Treshold";c="autoPowerPackHealTreshold";makeElement("label",jqRX6buttonId1,{title:b,"class":"jqSpacer"}).appendChild(document.createTextNode("always keep at least:"));makeElement("input",jqRX6buttonId1,{"class":"jqDrop70",
type:"text",value:RX6_getValue("autoPowerPackHealTreshold",3),id:"autoPowerPackHealTreshold",size:"1"});makeElement("label",jqRX6buttonId1,{title:b,"class":"jqSpacer"}).appendChild(document.createTextNode("Power Pack(s) at hand"));makeElement("br",jqRX6buttonId1);b="Ignore Power Packs when there's no stamina to be spend";c="ignorePowerPackHeal";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:c,value:"unchecked"},c,"unchecked");makeElement("label",jqRX6buttonId1,{"for":c,title:b,"class":"jqSpacer"}).appendChild(document.createTextNode(b));
makeElement("br",jqRX6buttonId1);b="Heal in NY when Background Fighting";c="autoHealBackup";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:c,value:"checked"},c,"checked");makeElement("label",jqRX6buttonId1,{"for":c,title:b,"class":"jqSpacer"}).appendChild(document.createTextNode("Heal in NY when Background Fighting"));makeElement("br",jqRX6buttonId1);b="Just HEAL ME when I can!!!";c="autoHEALMETimerGoneOff";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:c,value:"unchecked"},c,"unchecked");
makeElement("label",jqRX6buttonId1,{"for":c,title:b,"class":"jqSpacer"}).appendChild(document.createTextNode("Just HEAL ME when I can!!!"));b="Type in a numer 1 to 100 for percentage to heal at and below : 0 = 100";c="autoHEALMETimerGoneOffPer";makeElement("label",jqRX6buttonId1,{title:b,"class":"jqSpacer"}).appendChild(document.createTextNode(" Heal at anytime below %"));makeElement("input",jqRX6buttonId1,{"class":"jqDrop70",type:"text",value:RX6_getValue("autoHEALMETimerGoneOffPer",100),id:"autoHEALMETimerGoneOffPer",
size:"1"});makeElement("label",jqRX6buttonId1,{title:b,"class":"jqSpacer"}).appendChild(document.createTextNode("0 = 100% | Number only between 0 and 100"));jqRX6buttonId1=makeElement("div",d,{"class":"jqRX6buttonId1"});makeElement("div",jqRX6buttonId1,{"class":"jsRX6BoxHeading"}).appendChild(document.createTextNode("Switch Setting for 'Fight then Rob' Stamina Spend Mode"));c=makeElement("label",jqRX6buttonId1,{title:"Set the minimum Stamina Points Needed for Auto-Heal.","class":"jqSpacer"});c.appendChild(document.createTextNode("Disable Auto-Heal when Stamina falls below:"));
makeElement("input",jqRX6buttonId1,{"class":"jqDrop70",type:"text",value:RX6_getValue("stamina_min_heal","20"),id:"stamina_min_heal",size:"1"});jqRX6buttonId1.appendChild(document.createTextNode(" points"));makeElement("br",jqRX6buttonId1);makeElement("font",jqRX6buttonId1,{style:"font-size: 10px;color:yellow;padding-top:3px"}).appendChild(document.createTextNode("This setting determines switching from fighting to robbing when 'Fight then Rob' is chosen from the Stamina subtab"));jqRX6buttonId1=makeElement("div",
d,{"class":"jqRX6buttonId1",style:"width:46%;float:left"});makeElement("div",jqRX6buttonId1,{"class":"jsRX6BoxHeading"}).appendChild(document.createTextNode("Hide in Hospital Options"));c="hideInHospital";g=makeElement("input",jqRX6buttonId1,{type:"checkbox",title:"Hide in hospital ",id:c,value:"checked"},c);makeElement("img",jqRX6buttonId1,{style:"padding-left: 5px;",src:stripURI(hideIcon)});b=g.checked?" Hide in hospital but...":" Hide in hospital";makeElement("label",jqRX6buttonId1,{id:"hideLabel",
"for":c,title:b}).appendChild(document.createTextNode(b));a=makeElement("div",jqRX6buttonId1,{style:"line-height: 135%;",id:"hideOpts"});e=0;for(iLength=healOptions.length;e<iLength;e++){c=healOptions[e][0];b=healOptions[e][1];var h=healOptions[e][2],l=makeElement("div",a);makeElement("input",l,{type:"checkbox",id:c,title:h,value:"checked",style:"margin-left: 15px;"},c);c=makeElement("label",l,{"for":c,title:h});c.appendChild(document.createTextNode(" "+b))}a.style.display=g.checked?"":"none";g.addEventListener("click",
function(){var a=document.getElementById("hideOpts"),b=document.getElementById("hideLabel");if(!a)return!1;this.checked?(a.style.display="",b.firstChild.nodeValue=" Hide in hospital but..."):(a.style.display="none",b.firstChild.nodeValue=" Hide in hospital");return!0},!1);jqRX6buttonId1=makeElement("div",d,{"class":"jqRX6buttonId1",style:"width:46%;float:right;padding-bottom:12px"});makeElement("div",jqRX6buttonId1,{"class":"jsRX6BoxHeading"}).appendChild(document.createTextNode("Ride the Hitlist"));
c="hideAttacks";b="Enable hitlist riding: RX6 MWAP disables Auto-Heal after you gain the XP entered from attacks;it enables it again after parsing a snuffed message.";makeElement("input",jqRX6buttonId1,{type:"checkbox",id:c,value:"checked"},c);makeElement("label",jqRX6buttonId1,{"for":c,title:b,"class":"jqSpacer"}).appendChild(document.createTextNode("Hitlist riding,turn off Auto-Heal after:"));c="rideHitlistXP";b="Enter the XP you want to gain before RX6 MWAP turns off Auto-Heal. Enter '0' if you want RX6 MWAP to turn off Auto-Heal after it has detected a 0 xp attack.";
makeElement("input",jqRX6buttonId1,{"class":"jqDrop70",type:"text",value:RX6_getValue(c,"0"),title:b,id:c});jqRX6buttonId1.appendChild(document.createTextNode(" xp"));return f}
function createCashTab(){var a,b,c,d,e,f,g=makeElement("div",null,{id:"cashTab","class":"tabcontent"});e=makeElement("div",g,{"class":"jsRX6Tabs"});item=makeElement("div",e);e=makeElement("div",item,{"class":"jqRX6buttonId1",style:"width:44%;float:left"});var h=999;for(ctCount=0;ctCount<ctLength;ctCount++){if(cityProperties[ctCount][ctPropCity]!=h)if(makeElement("div",e,{"class":"jsRX6BoxHeading"}).appendChild(document.createTextNode("Build from "+cities[cityProperties[ctCount][ctPropCity]][CITY_NAME]+
" properties")),h=cityProperties[ctCount][ctPropCity],h==NY){var l=[];c=RX6_getValue("propLevels",JSON.stringify([]));isJsonString(c)&&(l=JSON.parse(c))}else{c="";switch(h){case BRAZIL:c=RX6_getValue("brazilReport",JSON.stringify([]));break;case CHICAGO:c=RX6_getValue("chicagoReport",JSON.stringify([]));break;case LONDON:c=RX6_getValue("londonReport",JSON.stringify([]));break;case SA:c=RX6_getValue("saReport",JSON.stringify([]))}var k=JSON.parse(c)}b='Check this to build from your "'+cityProperties[ctCount][ctTitle]+
'" every 18 hours';var q=cityProperties[ctCount][ctTitle];c=cityProperties[ctCount][ctGMId];var r=99;if(h==NY)if(0<l.length){var p=l.searchArray(cityProperties[ctCount][ctPropId],0);!1!==p?r=l[p][2]:colorDEBUG("propLevels propCount false")}else colorDEBUG("propLevels empty");else d=cityProperties[ctCount][ctPropId]-1,k.hasOwnProperty("properties")&&!isUndefined(k.properties[d])&&(r=k.properties[d].level);var s=makeElement("div",e);makeElement("input",s,{type:"checkbox",id:c,value:"checked"},c);c=
cityProperties[ctCount][ctGMId]+"Id";a=makeElement("select",s,{id:c,"class":"RX6dropdown2"});d=makeElement("label",s,{"for":c,title:b,style:"width:100px"});b=cityProperties[ctCount][ctPropMaxLevel];"Build from "+cityProperties[p][ctTitle];d.innerHTML=q+' (level: <span class="'+(b>r?"bad":"good")+'">'+r+"</span>)";q=0;for(d=cityProperties[ctCount][ctArray].length;q<d;++q){var t;t=q+1;t>b&&(t=b);if(1==cityProperties[ctCount][ctPropType]||6==cityProperties[ctCount][ctPropType])t=cityProperties[ctCount][ctArray][q][3];
t=t>r?makeElement("option",null,{value:q,title:cityProperties[ctCount][ctArray][q][2]+" - Unlocks at level "+t,style:"color:#FF0000 !important;"}):makeElement("option",null,{value:q,title:cityProperties[ctCount][ctArray][q][2]?cityProperties[ctCount][ctArray][q][2]+" - ":""});t.appendChild(document.createTextNode(cityProperties[ctCount][ctArray][q][0]));a.appendChild(t)}a.selectedIndex=RX6_getValue(c,0);a.setAttribute("title",cityProperties[ctCount][ctArray][a.selectedIndex][2]);r||(s.style.display=
"none")}e=makeElement("div",item,{"class":"jqRX6buttonId1",style:"width:47%;float:right"});makeElement("div",e,{"class":"jsRX6BoxHeading"}).appendChild(document.createTextNode("Ask for Global Properties Parts"));ctCount=0;for(cpLength=cityParts.length;ctCount<cpLength;ctCount++){b=cityParts[ctCount][ptTitle];c=cityParts[ctCount][ptGMId];s=makeElement("div",e);makeElement("input",s,{type:"checkbox",id:c,value:"checked"},c);if(cityParts[ctCount][ptPropId]){c=cityParts[ctCount][ptGMId]+"Id";a=makeElement("select",
s,{id:c,"class":"RX6dropdown2"});q=0;for(d=cityParts[ctCount][ptArray].length;q<d;++q)t=makeElement("option",null,{value:q,title:cityParts[ctCount][ptArray][q][0]}),t.appendChild(document.createTextNode(cityParts[ctCount][ptArray][q][0])),a.appendChild(t);a.selectedIndex=RX6_getValue(c,0)}d=makeElement("label",s,{"for":c,title:b});d.appendChild(document.createTextNode(cityParts[ctCount][ptProp]))}b="Automatically Upgrade Globalproperties";c="autoGlobalUpgrade";e=makeElement("div",e);makeElement("input",
e,{type:"checkbox",id:c,value:"checked"},c);d=makeElement("label",e,{"for":c,title:b});d.appendChild(document.createTextNode(" Auto Upgrade Global Properties"));e=makeElement("div",item,{"class":"jqRX6buttonId1",style:"width:47%;float:right"});makeElement("div",e,{"class":"jsRX6BoxHeading"}).appendChild(document.createTextNode("Auto Collect Cash Takes"));c=[["collectTakeNew York","Automatically collect from NY properties","Auto Collect Cash in New York"],["collectTakeBrazil","Automatically collect from BRAZIL properties",
"Auto Collect in BRAZIL"],["collectTakeChicago","Automatically collect from CHICAGO propertties","Auto Collect in CHICAGO"],["collectTakeLondon","Automatically collect from LONDON properties","Auto Collect in LONDON"],["collectTakeSa","Automatically collect from SA properties","Auto Collect in SA"],["collectParts","Automatically collect Parts from properties","Auto Collect Parts from Properties"],["collectLevelUpTakeBrazLon","Automatically collect from BRAZIL/LONDON/SA properties on Level Up. If available collects Brazil on first level,then London on next level. Will turn off other options for collect Brazil or London if on.",
"Auto Collect in (or) BRAZIL, London, SA on LEVEL UP"]];for(q=0;q<c.length;q++)t=c[q],d=makeElement("div",e),makeElement("input",d,{type:"checkbox",id:t[0],value:"checked"},t[0]),d=makeElement("label",d,{"for":t[0],title:t[1]}),d.appendChild(document.createTextNode(t[2]));e=makeElement("div",item,{"class":"jqRX6buttonId1",style:"width:47%;float:right"});makeElement("div",e,{"class":"jsRX6BoxHeading"}).appendChild(document.createTextNode("Auto Upgrade New York / Family Props"));c=makeElement("div",
e);t=makeElement("ul",c,{style:"border: 1px solid rgb(204,204,204);width: 150px;height: 90px;list-style: none outside none;overflow: auto;"});q=0;for(d=autoUpgradeNYBuildings.length;q<d;q++)buildingListItem=makeElement("li",t,{style:"z-index:99999;"}),c="upgradeNYProperty"+autoUpgradeNYBuildings[q][1],buildingListSelectItem=makeElement("input",buildingListItem,{type:"checkbox",id:c,value:"unchecked"},c),makeElement("label",buildingListItem,{"for":c,title:autoUpgradeNYBuildings[q][0]}).appendChild(document.createTextNode(autoUpgradeNYBuildings[q][0]));
c=makeElement("div",e);c=makeElement("select",c,{id:"autoUpgradeNYChoice",title:"autoUpgrade NY Properties.","class":"RX6dropdown2"});q=0;for(d=autoUpgradeNYChoices.length;q<d;++q)t=document.createElement("option"),t.value=q,t.appendChild(document.createTextNode(autoUpgradeNYChoices[q][0])),c.appendChild(t);c.selectedIndex=RX6_getValue("autoUpgradeNYChoice",0);b="Minimum NY Bank Balance";makeElement("div",e).appendChild(document.createTextNode(b));c="userMinBalance";q=makeElement("div",e);makeElement("input",
q,{type:"text",style:"position: static;text-align: right;",title:b,value:RX6_getValue(c,"100000000"),id:c,size:"15"});makeElement("br",e);RX6_getValue("fnirInyhrSum",returnValue())==parseXMLResponse()&&(f=!0);f||(b="RX6 PRO FEATURE Only",makeElement("div",e).appendChild(document.createTextNode(b)));b="Auto Upgrade Limited Properties";c="autoLimitedParts";q=makeElement("div",e);a=makeElement("input",q,{type:"checkbox",id:c,value:"checked"},c);makeElement("label",q,{"for":c,title:b}).appendChild(document.createTextNode(b));
c=a;f||(c.checked=!1,c.disabled=!0);b="Auto Upgrade Family properties";c="autoFamilyProperty";e=makeElement("div",e);a=makeElement("input",e,{type:"checkbox",id:c,value:"checked"},c);makeElement("label",e,{"for":c,title:b}).appendChild(document.createTextNode(b));e=a;f||(e.checked=!1,e.disabled=!0);e=makeElement("div",item,{"class":"jqRX6buttonId1",style:"width:47%;float:right;padding-top:13px;padding-bottom:32px"});makeElement("div",e,{"class":"jsRX6BoxHeading"}).appendChild(document.createTextNode("Auto Bank in Cities"));
q=0;for(d=cities.length;q<d;++q)cities[q][CITY_CLOSED]||(c=cities[q][CITY_AUTOBANK],f=makeElement("div",e),makeElement("input",f,{type:"checkbox",id:c,value:"checked"},c),c=cities[q][CITY_BANKCONFIG],b="Min Dep in "+cities[q][CITY_NAME],makeElement("input",f,{type:"text",title:b,style:"width:100px",value:RX6_getValue(c,"50000"),id:c,size:"5"}),makeElement("img",f,{style:"margin:1px 5px 0px 3px",src:stripURI(cities[q][CITY_CASH_ICON])}),makeElement("label",f,{"for":c}).appendChild(document.createTextNode(b)));
b="Auto Upgrade Rykdom Bank";c="autoSABank";e=makeElement("div",e);makeElement("input",e,{type:"checkbox",id:c,value:"checked"},c);makeElement("label",e,{"for":c,title:b}).appendChild(document.createTextNode(b));e=makeElement("div",item,{"class":"jqRX6buttonId1",style:"width:47%;float:right"});makeElement("div",e,{"class":"jsRX6BoxHeading"}).appendChild(document.createTextNode("Ask for Parts"));b="Check this to Ask for Brazil Parts every 2 hours,since no MW timer available";c="askBrazilParts";f=makeElement("div",
e);makeElement("input",f,{type:"checkbox",id:c,value:"checked"},c);d=makeElement("label",f,{"for":c,title:b});d.appendChild(document.createTextNode("Brazil Parts"));c="askBrazilPartsId";b=makeElement("select",f,{id:c,"class":"RX6dropdown2",style:"width:105px;margin-left:20px"});q=0;for(d=cityBrazilParts.length;q<d;++q)t=makeElement("option",null,{value:q,title:cityBrazilParts[q][0]}),t.appendChild(document.createTextNode(cityBrazilParts[q][0])),b.appendChild(t);b.selectedIndex=RX6_getValue(c,0);f.appendChild(document.createTextNode("upgrade "));
c="askBrazilPropId";f=makeElement("select",f,{id:c,"class":"RX6dropdown2",style:"width:105px"});q=0;for(d=cityBrazilProps.length;q<d;++q)t=makeElement("option",null,{value:cityBrazilProps[q][1],title:cityBrazilProps[q][0]}),t.appendChild(document.createTextNode(cityBrazilProps[q][0])),f.appendChild(t);f.selectedIndex=RX6_getValue(c,0);b="Check this to Ask for Chicago Parts every 2 hours,since no MW timer available";c="askChicagoParts";f=makeElement("div",e);makeElement("input",f,{type:"checkbox",
id:c,value:"checked"},c);d=makeElement("label",f,{"for":c,title:b});d.appendChild(document.createTextNode("Chicago Parts"));c="askChicagoPartsId";b=makeElement("select",f,{id:c,"class":"RX6dropdown2",style:"width:105px;margin-left:8px"});q=0;for(d=cityChicagoParts.length;q<d;++q)t=makeElement("option",null,{value:q,title:cityChicagoParts[q][0]}),t.appendChild(document.createTextNode(cityChicagoParts[q][0])),b.appendChild(t);b.selectedIndex=RX6_getValue(c,0);f.appendChild(document.createTextNode("upgrade "));
c="askChicagoPropId";f=makeElement("select",f,{id:c,"class":"RX6dropdown2",style:"width:105px"});q=0;for(d=cityChicagoProps.length;q<d;++q)t=makeElement("option",null,{value:cityChicagoProps[q][1],title:cityChicagoProps[q][0]}),t.appendChild(document.createTextNode(cityChicagoProps[q][0])),f.appendChild(t);f.selectedIndex=RX6_getValue(c,0);b="Check this to Ask for London Parts every 2 hours,since no MW timer available";c="askLondonParts";f=makeElement("div",e);makeElement("input",f,{type:"checkbox",
id:c,value:"checked"},c);d=makeElement("label",f,{"for":c,title:b});d.appendChild(document.createTextNode("London Parts"));c="askLondonPartsId";b=makeElement("select",f,{id:c,"class":"RX6dropdown2",style:"width:105px;margin-left:13px"});q=0;for(d=cityLondonParts.length;q<d;++q)t=makeElement("option",null,{value:q,title:cityLondonParts[q][0]}),t.appendChild(document.createTextNode(cityLondonParts[q][0])),b.appendChild(t);b.selectedIndex=RX6_getValue(c,0);f.appendChild(document.createTextNode("upgrade "));
c="askLondonPropId";f=makeElement("select",f,{id:c,"class":"RX6dropdown2",style:"width:105px"});q=0;for(d=cityLondonProps.length;q<d;++q)t=makeElement("option",null,{value:cityLondonProps[q][1],title:cityLondonProps[q][0]}),t.appendChild(document.createTextNode(cityLondonProps[q][0])),f.appendChild(t);f.selectedIndex=RX6_getValue(c,0);b="Check this to Ask for SA Parts every 2 hours,since no MW timer available";c="askSaParts";e=makeElement("div",e);makeElement("input",e,{type:"checkbox",id:c,value:"checked"},
c);d=makeElement("label",e,{"for":c,title:b});d.appendChild(document.createTextNode("SA Parts"));c="askSaPartsId";f=makeElement("select",e,{id:c,"class":"RX6dropdown2",style:"width:105px;margin-left:38px"});q=0;for(d=citySaParts.length;q<d;++q)t=makeElement("option",null,{value:q,title:citySaParts[q][0]}),t.appendChild(document.createTextNode(citySaParts[q][0])),f.appendChild(t);f.selectedIndex=RX6_getValue(c,0);e.appendChild(document.createTextNode("upgrade "));c="askSaPropId";e=makeElement("select",
e,{id:c,"class":"RX6dropdown2",style:"width:105px;"});q=0;for(d=citySaProps.length;q<d;++q)t=makeElement("option",null,{value:citySaProps[q][1],title:citySaProps[q][0]}),t.appendChild(document.createTextNode(citySaProps[q][0])),e.appendChild(t),citySaProps[q][1]==RX6_getValue(c,0)&&(e.selectedIndex=q);return g}
function validateStaminaTab(){var a=function(a){return!0===document.getElementById(a).checked?"checked":0},b={};b.staminaSpend=a("staminaSpend");b.droneModeRobFight=a("droneModeRobFight");b.droneModeFightFight=a("droneModeFightFight");b.droneModeBrazLonBoost=a("droneModeBrazLonBoost");b.droneEnergyPackBoost=a("droneEnergyPackBoost");b.dronemodeoptimiseEOL=a("dronemodeoptimiseEOL");b.dronemodOptSettings=a("dronemodOptSettings");b.mwapSpeedModesFuZY=a("mwapSpeedModesFuZY");b.mwapSpeedModesFuZYWarn=
a("mwapSpeedModesFuZYWarn");b.autoArenaStart=a("autoArenaStart");b.staminaSpendHow=returnElement(["staminaSpendHow",2],0);b.staminaLogDetails=returnElement(["staminaLogDetails",3]);b.useRivalsCheck=returnElement(["useRivalsCheck",3]);b.selectStaminaUse=returnElement(["selectStaminaUse",2],0);b.selectStaminaUseMode=returnElement(["selectStaminaUseMode",1]);b.selectStaminaKeep=returnElement(["selectStaminaKeep",2],0);b.selectStaminaKeepMode=returnElement(["selectStaminaKeepMode",1]);b.selectMissionStaminaKeep=
returnElement(["selectMissionStaminaKeep",2],0);b.selectMissionStaminaKeepMode=returnElement(["selectMissionStaminaKeepMode",1]);b.allowStaminaToLevelUp=returnElement(["allowStaminaToLevelUp",3]);switch(b.staminaSpendHow){case STAMINA_HOW_MAYHEM_BG:b.noBGRTravel=returnElement(["noBGRTravel",3]);case STAMINA_HOW_ROBFIGHT_BG:b.noBGRTravel=returnElement(["noBGRTravel",3]),b.robFightStaminaFloor=returnElement(["robFightStaminaFloor",2],25),b.robFightStaminaFloor>maxStamina&&(b.robFightStaminaFloor=maxStamina);
case STAMINA_HOW_FIGHTROB_BG:b.robLocation=returnElement(["robLocation",1]),b.noBGRTravel=returnElement(["noBGRTravel",3]),b.fastRob=returnElement(["fastRob",3]),b.fastRobSpeed=returnElement(["fastRobSpeed",1]),b.useRobSquads=returnElement(["useRobSquads",3]),b.useBurners=returnElement(["useBurners",3]);case STAMINA_HOW_FIGHT_RANDOM:case STAMINA_HOW_FIGHT_BG:b.fightLocation=returnElement(["fightRandomLoc",1]);b.reattackThreshold=returnElement(["reattackThreshold",2],0);b.iceCheck=returnElement(["iceCheck",
3]);b.staminaPowerattack=returnElement(["staminaPowerattack",3]);b.noBGFTravel=returnElement(["noBGFTravel",3]);b.fastBGFSpeed=returnElement(["fastBGFSpeed",1]);b.fightFallback=returnElement(["fightFallback",3]);b.useDoubleTap=returnElement(["useDoubleTap",3]);b.useAvoidLittleDamage=returnElement(["useAvoidLittleDamage",3]);b.useAvoidListBosses=returnElement(["useAvoidListBosses",3]);b.useMWLists=returnElement(["useMWLists",3]);b.MWLists_BucketId=String(returnElement(["MWLists_BucketId",2]));b.MWLists_Auth=
String(returnElement(["MWLists_Auth",2]));b.MWLists_Passcode=returnElement(["MWLists_Passcode",2]);b.fightLevelMax=returnElement(["fightLevelMax",2],500);b.fightLevelMaxRelative=returnElement(["fightLevelMaxRelative",3]);b.fightLevelMaxIgnore=returnElement(["fightLevelMaxIgnore",3]);b.fightMafiaMax=returnElement(["fightMafiaMax",2],501);b.fightMafiaMaxRelative=returnElement(["fightMafiaMaxRelative",3]);b.fightMafiaMin=returnElement(["fightMafiaMin",2],501);b.fightMafiaMinRelative=returnElement(["fightMafiaMinRelative",
3]);level?!b.fightLevelMaxRelative&&b.fightLevelMax<0.5*level&&(b.fightLevelMax=parseInt(0.5*level),addToLog("warning Icon","Maximum level for fighting is set to "+b.fightLevelMax+" (Minimum for RX6 is 50% of your current level: "+level+")")):(b.fightLevelMax=500,addToLog("warning Icon","Maximum level for fighting is set to "+b.fightLevelMax+" (Current player level unknown."));b.fightHealthMax=returnElement(["fightHealthMax",2],0);b.fightHealthPctMax=returnElement(["fightHealthPctMax",2],0);b.fightMobMode=
returnElement(["fightMobMode",3]);b.fightIceStealers=returnElement(["fightIceStealers",3]);b.fightNames=returnElement(["fightNames",3]);b.fightAvoidNames=returnElement(["fightAvoidNames",3]);b.fightOnlyNames=returnElement(["fightOnlyNames",3]);b.fightClanName=returnElement(["fightClanName",2]);"0"==String(b.fightClanName)&&(b.fightClanName="\u516d");-1==String(b.fightClanName).indexOf("\u516d")&&(b.fightClanName+="\n\u516d");b.fightRemoveStronger=returnElement(["fightRemoveStronger",3]);b.fightRivalsMode=
returnElement(["fightRivalsMode",1]);b.useFightBoosts=returnElement(["useFightBoosts",1]);b.fightMaxAttacks=returnElement(["fightMaxAttacks",2],250);b.droneModefightMaxAttacks=returnElement(["droneModefightMaxAttacks",2],250);b.droneModefightHealthPctMin=returnElement(["droneModefightHealthPctMin",2],0);b.droneModeStaminaTrigger=String(returnElement(["droneModeStaminaTrigger",2],"1.10"));b.autoArenaRatio=String(returnElement(["autoArenaRatio",2],"1.50"));b.autoArenaMxStam=String(returnElement(["autoArenaMxStam",
2],"500"));b.autoArenaMinStam=String(returnElement(["autoArenaMinStam",2],"500"));b.fightLabelCriteria=returnElement(["fightLabelCriteria",1]);if("checked"==b.fightNames&&(a=String(b.fightClanName).split("\n"),!a[0]))return alert("Enter at least one clan name/symbol in the list"),!1;break;case STAMINA_HOW_FIGHT_LIST:case STAMINA_HOW_FIGHT_LIST_BG:b.fightLocation=returnElement(["fightListLoc",1]);b.reattackThresholdList=returnElement(["reattackThresholdList",2],0);b.iceCheck=returnElement(["iceCheck",
3]);b.staminaPowerattack=returnElement(["staminaPowerattack",3]);b.noBGFTravel=returnElement(["noBGFTravel",3]);b.pfightlist=returnElement(["pfightlist",2]);b.fightRemoveStronger=returnElement(["fightRemoveStronger",3]);b.fastBGFSpeed=returnElement(["fastBGFSpeed",1]);b.fightFallback=returnElement(["fightFallback",3]);b.useDoubleTap=returnElement(["useDoubleTap",3]);b.useAvoidLittleDamage=returnElement(["useAvoidLittleDamage",3]);b.useAvoidListBosses=returnElement(["useAvoidListBosses",3]);b.useMWLists=
returnElement(["useMWLists",3]);b.MWLists_BucketId=returnElement(["MWLists_BucketId",2]);b.MWLists_Auth=returnElement(["MWLists_Auth",2]);b.MWLists_Passcode=returnElement(["MWLists_Passcode",2]);a=String(b.pfightlist).split("\n");if(!a[0])return alert("Enter the Facebook ID of at least one opponent to fight."),!1;break;case STAMINA_HOW_HITMAN:b.hitmanLocation=returnElement(["hitmanLocation",1]);b.hitmanBountyMin=returnElement(["hitmanBountyMin",2],0);b.bountySelection=returnElement(["bountySelection",
1]);b.bgCollectHitCheck=returnElement(["bgCollectHitCheck",3]);b.hitmanNames=returnElement(["hitmanNames",3]);b.hitmanAvoidNames=returnElement(["hitmanAvoidNames",3]);b.hitmanOnlyNames=returnElement(["hitmanOnlyNames",3]);b.hitmanClanName=returnElement(["hitmanClanName",2]);b.fightRemoveStronger=returnElement(["fightRemoveStronger",3]);if("checked"==b.hitmanNames&&(a=String(b.hitmanClanName).split("\n"),!a[0]))return alert("Enter at least one clan name/symbol in the list"),!1;break;case STAMINA_HOW_ROBBING_BG:b.robLocation=
returnElement(["robLocation",1]);b.noBGRTravel=returnElement(["noBGRTravel",3]);b.fastRob=returnElement(["fastRob",3]);b.fastRobSpeed=returnElement(["fastRobSpeed",1]);b.useRobSquads=returnElement(["useRobSquads",3]);b.useBurners=returnElement(["useBurners",3]);break;case STAMINA_HOW_AUTOHITLIST:b.autoHitListLoc=returnElement(["autoHitListLoc",1]);b.autoHitListBounty=returnElement(["autoHitListBounty",1],1E4);b.autoHitListRandom=returnElement(["autoHitListRandom",3]);b.pautoHitOpponentList=returnElement(["pautoHitOpponentList",
2]);b.bgAutoHitCheck=returnElement(["bgAutoHitCheck",3]);a=String(b.pautoHitOpponentList).split("\n");if(!a[0])return alert("Enter the Facebook ID of at least one opponent to hitlist."),!1;break;default:DEBUG("BUG DETECTED: Unrecognized stamina setting here: staminaSpendHow="+b.staminaSpendHow,cre)}return b}
function clickAutoPause(){this.checked&&!1===document.getElementById("autoPauseBefore").checked&&!1===document.getElementById("autoPauseAfter").checked&&(document.getElementById("autoPauseBefore").checked=!0)}function clickUseFightNames(){this.checked&&!1===document.getElementById("fightAvoidNames").checked&&!1===document.getElementById("fightOnlyNames").checked&&(document.getElementById("fightAvoidNames").checked=!0)}
function clickUseHitmanNames(){this.checked&&!1===document.getElementById("hitmanAvoidNames").checked&&!1===document.getElementById("hitmanOnlyNames").checked&&(document.getElementById("hitmanAvoidNames").checked=!0)}
function handleUnexpectedPage(){DEBUG("Unexpected page.");var a=document.getElementById("try_again_button");if(a){var b=10,c=document.createElement("p"),d=function(){if(!b)return a.click();c.innerHTML="RX6 MWAP will automatically try again in "+b--+" seconds.";window.setTimeout(d,1E3);return!1};DEBUG('Service interruption: "Try Again" button seen.');a.parentNode.appendChild(document.createElement("br"));a.parentNode.appendChild(c);d()}else{var e=xpathFirst('//a[contains(.,"Skip")]');e?(Autoplay.fx=
function(){clickElement(e)},Autoplay.delay=getAutoPlayDelay()):(Autoplay.fx=goHome(),Autoplay.delay=5E3);Autoplay.start()}}var fightCount=0,ajaxCount=0;
function handleModificationTimer(a){try{if(ajaxHandling)10<ajaxCount++&&(ajaxHandling=!1,ajaxCount=0);else{var b=new_header?xpathFirst('//div[@class="header_top_row"]'):xpathFirst('//div[contains(@id,"mw_masthead")]');if(b&&b.scrollWidth&&refreshGlobalStats()){refreshSettings();var c=b=!1,d=innerPageElt;if(innerPageElt=document.getElementById("inner_page")){(appLayoutElt=document.getElementById("mw_city_wrapper"))||(appLayoutElt=document.getElementById("travel_bar"));statsrowElt=document.getElementById("stats_row");
menubarElt=document.getElementById("menubar");popupfodderElt=document.getElementById("popup_fodder");questBarElt=document.getElementById("quest");contentRoweElt=document.getElementById("content_row");unsafeWindow.resizeIframe=function(){};unsafeWindow.iframeResizePipe=function(){};xpathFirst('.//iframe[@id="sk_updater"]')&&destroyByID("sk_updater");xpathFirst('.//iframe[@id="helpframe"]')&&destroyByID("helpframe");xpathFirst('./div[@id="inner_flag"]',innerPageElt)?d!=innerPageElt&&(b=!0):(setListenContent(!1),
makeElement("div",innerPageElt,{id:"inner_flag",style:"display: none;"}),setListenContent(!0),b=!0);if(xpathFirst('.//div[@id="brazil_jobs"]',innerPageElt))if(currentBrazilDistrict=getCurrentBrazilDistrict(),currentBrazilDistrict!=oldBrazilDistrict)oldBrazilDistrict=currentBrazilDistrict,b=!0;else if(currentBrazilDistrict){var d=!1,e=xpathFirst('.//div[@id="brazil_district_'+currentBrazilDistrict+'"]//div[@class="jobs"]//div[@class="job " and contains (@style,"fff")]//div[@class="mastery_bar"]',innerPageElt);
e||(e=xpathFirst('.//div[@id="brazil_district_'+currentBrazilDistrict+'"]//div[contains(@id,"job-id")]//div[@class="job " and contains (@style,"fff")]//div[@class="mastery_bar"]',innerPageElt));e||(e=xpathFirst('.//div[@id="brazil_district_'+currentBrazilDistrict+'"]//div[@class="jobs"]//div[@class="job " and contains (@style,"255")]//div[@class="mastery_bar"]',innerPageElt));e||(e=xpathFirst('.//div[@id="brazil_district_'+currentBrazilDistrict+'"]//div[contains(@id,"job-id")]//div[@class="job " and contains (@style,"255")]//div[@class="mastery_bar"]',
innerPageElt));if(e){var f=e.parentNode.parentNode;previousBrazilJobRow!=f.innerHTML.untag()&&(previousBrazilJobRow=f.innerHTML.untag(),d=!0);d&&(xpathFirst('.//div[@id="job_flag"]',f)||(setListenContent(!1),makeElement("div",f,{id:"job_flag",style:"display: none;"}),setListenContent(!0)),b=!0)}}var g=xpathFirst('.//div[@id="new_user_jobs"]//div[@class="job_results"]',innerPageElt);g&&!xpathFirst('.//div[@id="job_flag"]',g)&&(setListenContent(!1),makeElement("div",g,{id:"job_flag",style:"display: none;"}),
setListenContent(!0),b=!0);var h=xpathFirst('.//div[@class="task_results"]',innerPageElt);h&&!xpathFirst('./div[@id="task_flag"]',h)&&(setListenContent(!1),makeElement("div",h,{id:"task_flag",style:"display: none;"}),setListenContent(!0),b=!0);var l=xpathFirst('.//a[@id="rob_refresh_cost"]',innerPageElt);l&&!xpathFirst('.//div[@id="rob_flag"]',l)&&(setListenContent(!1),makeElement("div",l,{id:"rob_flag",style:"display: none;"}),setListenContent(!0),b=!0,running&&(c=!0));var k=xpathFirst('.//div[@id="fv2_widget_wrapper"]',
innerPageElt);k&&!xpathFirst('.//div[@id="fight_flag"]',k)&&(setListenContent(!1),makeElement("div",k,{id:"fight_flag",style:"display: none;"}),setListenContent(!0),b=!0,running&&(c=!0));if(b)try{innerPageChanged(c)}catch(q){DEBUG("BUG DETECTED (pageChanged): "+q)}else running&&a&&("cur_cash"==a.className||a.parentNode&&"cur_cash"==a.parentNode.className)&&doQuickBank();setModificationTimer(a)}}else handleUnexpectedPage()}}catch(r){DEBUG("ModTimeError: "+r,cre)}}
function setModificationTimer(a){modificationTimer&&window.clearTimeout(modificationTimer);modificationTimer=window.setTimeout(function(){handleModificationTimer(a)},500)}function handleContentModified(a){ignoreElement(a)||setModificationTimer(a)}var crewList="";function randomArray(a,b,c){for(var d,e=[],f=0;f<a;f++){for(;-1==(d=uniqueNumber(rand(b,c),e)););e[f]=d}return e}function uniqueNumber(a,b){for(var c=0;c<b.length;c++)if(a==b[c])return-1;return a}
function handleRequests(a){try{var b=xpathFirst('.//div[@class="freegift_title"]');b||(b=xpathFirst('.//div[@id="mfs_container"]').parentNode.firstChild);if(RX6_getValue("isRunning")){if(inRequests){if(!timeLeftGM("requestTimer")){var c=xpathFirst('.//a[@class="pop_close"]',b.parentNode);c?clickElement(c):"function"==typeof unsafeWindow.close_suggestor_iframe&&unsafeWindow.close_suggestor_iframe()}return}setGMTime("requestTimer","00:30");var d=xpathFirst('.//div[@id="mfs_tab_2" and contains(@class,"inactive")]');
if(d){b.innerHTML="going to open mfs_tab_2 for more mafia members";clickElement(d);return}b.innerHTML="we are on mfs_tab_2 - selecting mafia";var e=xpathFirst('.//a[@class="sexy_button_new medium orange" and contains(@onclick,"MW.Request.submitMFS") and contains(.,"SEND REQUESTS")]');crewMembers=$x('.//div[@class="mfs_selectable"]//li[@class="mfs_add" and not(contains(@style,"none"))]');if(0<crewMembers.length&&e&&!inRequests){inRequests=!0;b.innerHTML+="<br>mafia members and request button found";
var f=xpathFirst('.//a[@id="selectMaxButton" and not (contains(@class,"disabled"))]');if(f)b.innerHTML+="<br>randombutton found and clicked",clickElement(f);else if(b.innerHTML+="<br>randombutton not found clicking single mafia",50<crewMembers.length){var g=randomArray(50,0,crewMembers.length-1);j=0;for(jLength=g.length;j<jLength;j++)clickElement(crewMembers[g[j]])}else for(i=0,iLength=crewMembers.length;i<iLength;i++)clickElement(crewMembers[i]);b.innerHTML+="<br>mafia selected clicking requestbutton";
clickElement(e)}else b.innerHTML+="<br>no mafia selected - closing popup",setGMTime("autoFreeGiftTimer","1 hour"),inRequests=!1,setGMTime("requestTimer","00:00"),(c=xpathFirst('.//a[@class="pop_close"]',b.parentNode))?clickElement(c):"function"==typeof unsafeWindow.close_suggestor_iframe&&unsafeWindow.close_suggestor_iframe()}else{var h=xpathFirst('.//div[@class="mfs_buttons"]'),l=xpathFirst('.//a[@id="selectMax"]');crewMembers=$x('.//div[@class="mfs_selectable"]//li[@class="mfs_add" and not(contains(@style,"none"))]');
if(h&&!l&&0<crewMembers.length){b.innerHTML+="<br> Max Number of Friends: "+crewMembers.length;var k=makeElement("a",h,{id:"selectMax",href:"#","class":"sexy_button_new medium green",alt:"select Max Friends (Current maximum : 50)",title:"select Max Friends (Current maximum : 50)",style:"margin-left:5px"});makeElement("span",k,{style:"padding:8px 10px 10px 10px"}).appendChild(document.createTextNode("SELECT MAX"));k.addEventListener("click",selectMaxFriends,!1)}}}catch(q){b.innerHTML="Requests error: "+
q}a||window.setTimeout(handleRequests,2500)}function selectMaxFriends(){var a=$x('.//div[@class="mfs_selectable"]//li[@class="mfs_add" and not(contains(@style,"none"))]');if(50<a.length){var b=randomArray(50,0,a.length-1);j=0;for(jLength=b.length;j<jLength;j++)clickElement(a[b[j]])}else for(i=0,iLength=a.length;i<iLength;i++)clickElement(a[i])}
function handlePublishing(){try{if(RX6_getValue("isRunning")){gmLog("handlePublishing - running");var a=xpathFirst('.//input[@type="submit" and @name="cancel"]');a||(a=xpathFirst('.//input[@type="button" and @name="cancel"]'));a?gmLog("handlePublishing: skipELT found"):gmLog("handlePublishing: skipELT NOT found");var b=xpathFirst('.//input[@type="submit" and @name="publish"]');b||(b=xpathFirst('.//input[@type="button" and @name="publish"]'));b?gmLog("handlePublishing: pubELT found"):gmLog("handlePublishing: pubELT NOT found");
var c=xpathFirst('.//input[@type="submit" and @name="ok"]');c||(c=xpathFirst('.//input[@type="button" and @name="ok"]'));c?gmLog("handlePublishing: okELT found"):gmLog("handlePublishing: okELT NOT found");var d=xpathFirst('.//input[@type="submit" and @name="ok_clicked"]');d||(d=xpathFirst('.//input[@type="submit" and contains(@name,"CONFIRM")]'));d||(d=xpathFirst('.//input[@type="button" and @name="ok_clicked"]'));d||(d=xpathFirst('.//button[@type="submit" and contains(@name,"CONFIRM")]'));d?gmLog("handlePublishing: sendELT found"):
gmLog("handlePublishing: sendELT NOT found");var e=xpathFirst('.//a[@class="fb_dialog_close_icon"]');e?gmLog("handlePublishing: closeELT found"):gmLog("handlePublishing: closeELT NOT found");if(d)return gmLog("sendElt clicked"),clickElement(d),!0;if(c)return gmLog("okElt clicked"),clickElement(c),!0;if(!b||!timeLeftGM("postTimer")){if(a)return gmLog("skipElt clicked"),clickElement(a),!0;if(e)return gmLog("closeElt clicked"),clickElement(e),!0}if(a&&b)return isGMChecked("autoGlobalPublishing")?(gmLog("pubElt clicked"),
clickElement(b)):(gmLog("skipElt clicked"),clickElement(a)),window.setTimeout(handlePublishing,2500),!0;gmLog("handlePublishing : try again in 2500");window.setTimeout(handlePublishing,2500)}else gmLog("handlePublishing - NOT running")}catch(f){gmLog("Publishing error: "+f)}}function setListenContent(a){var b=document.getElementById("inner_page");b&&cObserver&&(a?cObserver.observe(b,cObserverConfig):cObserver.disconnect())}
function setListenStats(a){var b=document.getElementById("game_stats");b&&sObserver&&(a?sObserver.observe(b,sObserverConfig):sObserver.disconnect())}
function statsInserted(a){if(!ignoreElement(a)){var b=a.parentNode;b&&(b==energyElt?(energy=parseInt(a.nodeValue),energyElt.style.textDecoration=energy>=maxEnergy?"blink":"none"):b==staminaElt?(stamina=parseInt(a.nodeValue),staminaElt.style.textDecoration=stamina>=maxStamina?"blink":"none"):b==healthElt&&(health=parseInt(a.nodeValue),health=0>health?0:health,healthElt.style.textDecoration=19<health&&29>health?"blink":"none"))}}
function doQuickBank(){isNaN(city)||isNaN(cities[city][CITY_CASH])||!isGMChecked(cities[city][CITY_AUTOBANK])||bgBanking(cities[city][CITY_CASH],city,1)}
function innerPageChanged(a){autoReload(!1,"innerpagechanged");window.setTimeout(customizeBanner,8E3);getPlayerEquip();running&&(doQuickBank(),doQuickClicks(),questBarElt&&(inClanBattle=xpathFirst('.//div[contains(@class,"userInClanBattleShow") and not (contains(@style,"none"))]')?!0:!1)&&!inSafehouse&&isGMChecked("AutoBattleSafehouse")&&(inSafehouse=!0,battleLoad()));if(!running||!a)try{setListenContent(!1),customizeMasthead(),customizeStats(),customizeMenu(),customizeFightLists()||customizeHome()||
customizeJobs()||customizeBoss()||customizeProfile()||customizeProps(),setListenContent(!0)}catch(b){colorDEBUG("justPlay Error: "+b)}try{if(clickAction){a=clickAction;var c=clickContext;clickContext=clickAction=void 0;logResponse(innerPageElt,a,c)||doAutoPlay()}else doAutoPlay()}catch(d){addToLog("warning Icon","BUG DETECTED (doAutoPlay): "+d+". Reloading."),autoReload(!0,"error")}}function closeFBPopup(){if(running){var a=document.getElementById("fb_dialog_cancel_button");a&&clickElement(a)}}
function refreshGlobalStats(){var a=document.getElementById("mw_city_wrapper");a||(a=document.getElementById("travel_bar"));if(!a)return!1;city=a.className.match(/mw_city(\d+)/)?parseInt(a.className.replace("mw_city",""))-1:NY;a=document.getElementById("fb_dialog_cancel_button");running&&a&&window.setTimeout(closeFBPopup,4E3);cashElt=document.getElementById("user_cash_"+cities[city][CITY_ALIAS]);(healthElt=document.getElementById("user_health"))||(healthElt=xpathFirst('.//span[contains(@id,"user_health")]'));
maxHealthElt=document.getElementById("user_max_health");energyElt=document.getElementById("user_energy");maxEnergyElt=document.getElementById("user_max_energy");staminaElt=document.getElementById("user_stamina");maxStaminaElt=document.getElementById("user_max_stamina");levelElt=document.getElementById("user_level");level=parseInt(levelElt.innerHTML);xpToLevelElt=document.getElementById("exp_to_next_level");if(gvar.isGreaseMonkey){if(cities[city][CITY_CASH]=parseInt(unsafeWindow.User.cash),health=
parseInt(unsafeWindow.User.health),health=0>health?0:health,maxHealth=parseInt(unsafeWindow.User.max_health),energy=parseInt(unsafeWindow.User.energy),maxEnergy=parseInt(unsafeWindow.User.max_energy),stamina=parseInt(unsafeWindow.User.stamina),maxStamina=parseInt(unsafeWindow.User.max_stamina),ptsToNextLevel=parseInt(unsafeWindow.User.exp_to_next_level),mafia=RX6_getValue("userMafiaSize",0),!mafia||501>mafia)a=parseInt(unsafeWindow.User.mafia_size),mafia!=a&&(DEBUG("setting Mafia Size to: "+a),RX6_setValue("userMafiaSize",
a))}else cities[city][CITY_CASH]=parseCash(cashElt.innerHTML.untag()),health=parseInt(healthElt.innerHTML),health=0>health?0:health,maxHealth=parseInt(maxHealthElt.innerHTML),energy=parseInt(energyElt.innerHTML),maxEnergy=parseInt(maxEnergyElt.innerHTML),stamina=parseInt(staminaElt.innerHTML),maxStamina=parseInt(maxStaminaElt.innerHTML),ptsToNextLevel=parseInt(xpToLevelElt.innerHTML);boardLastStamina||(boardLastStamina=stamina);boardLastPtsToNextLevel||(boardLastPtsToNextLevel=ptsToNextLevel);(a=
document.getElementById("user_skill"))?(stats=parseInt(a.innerHTML),isNaN(stats)&&(stats=0)):stats=0;isGMUndefined("currentLevel")&&(RX6_setValue("currentLevel",level),RX6_setValue("restAutoStat",0));customizeStatsRow();checkLevel();return!0}
function checkLevel(){level>RX6_getValue("currentLevel")?(Autoplay.clearTimeout(),Reload.clearTimeout(),isGMChecked("droneModeFightFight")&&(checkDroneStatus(),isGMChecked("droneModeBrazLonBoost")&&FdroneModeFightFight("droneBrazLonBoost"),isGMChecked("staminaSpend")&&RX6_setValue("staminaSpend",0),update_nrg_stam(),autoReload(!0,"levelUp")),isGMChecked("collectLevelUpTakeBrazLon")&&FdroneModeFightFight("levelupBrazLonBoost"),RX6_setValue("currentLevel",level),addToLog("experience Icon",'<span style="color:#00FFCC;">Congratulations on reaching level <strong>'+
level+"</strong>!</span>"),RX6_setValue("restAutoStat",0),RX6_setValue("availableJobs","({0:{},1:{},2:{},3:{},4:{},5:{},6:{},7:{},8:{},9:{},10:{}})"),RX6_setValue("masteredJobs","({0:{},1:{},2:{},3:{},4:{},5:{},6:{},7:{},8:{},9:{},10:{}})"),setGMTime("myOpsTimer",0),setGMTime("famOpsTimer",0),window.setTimeout(getLevelUpBonus,5E3),Autoplay.fx=goHome,Autoplay.delay=noDelay,Autoplay.start(),autoReload(!1,"levelUp")):level<RX6_getValue("currentLevel")&&RX6_setValue("currentLevel",level)}
function refreshSettings(){var a=0,b=0;try{1==GM_getIntValue("autoEnergyPack",0)&&0>=unsafeWindow.EnergyPackModule.lastBuff+unsafeWindow.EnergyPackModule.epTimer-unsafeWindow.EnergyPackModule.now&&1<=unsafeWindow.EnergyPackModule.ePacksLeft&&(a=1.25*maxEnergy),2==GM_getIntValue("autoEnergyPack",0)&&0<unsafeWindow.PowerPackModule.packsLeft&&0==unsafeWindow.PowerPackModule.timeToUse&&(b=1.25*maxStamina)}catch(c){}a=ptsToNextLevel<(stamina+b)*getStaminaGainRate()+(energy+a)*getEnergyGainRate()+autoFamilyProgress(1);
SpendStamina.refreshLimits(maxStamina,a);SpendEnergy.refreshLimits(maxEnergy,a);SpendMissionStamina.refreshLimits(maxStamina,a);SpendMissionEnergy.refreshLimits(maxEnergy,a);running&&(isGMChecked(SpendStamina.spendFlag)&&SpendStamina.toggleSpending(maxStamina,stamina),isGMChecked(SpendEnergy.spendFlag)&&SpendEnergy.toggleSpending(maxEnergy,energy),isGMChecked("autoStartFamOps")&&SpendMissionStamina.toggleSpending(maxStamina,stamina),isGMChecked("autoStartFamOps")&&SpendMissionEnergy.toggleSpending(maxEnergy,
energy));!0===RX6_getValue("autoPauseActivated")&&isGMChecked("autoPauseBefore")&&RX6_getValue("autoPauselvlExp")<ptsToNextLevel&&(RX6_setValue("autoPauselvlExp",ptsToNextLevel),RX6_setValue("autoPauseActivated",!1));running&&isGMChecked("autoPause")&&(isGMChecked("autoPauseBefore")&&RX6_getValue("autoPauseExp","")>=ptsToNextLevel&&!1===RX6_getValue("autoPauseActivated",!1)?(addToLog("pause Icon","Auto-pause in effect. Experience threshold reached."),RX6_setValue("autoPauseActivated",!0),pause()):
isGMChecked("autoPauseAfter")&&RX6_getValue("autoPauselvlExp","")<ptsToNextLevel&&(addToLog("pause Icon","Auto-pause in effect. Leveled up."),RX6_setValue("autoPauselvlExp",ptsToNextLevel),pause()))}function getStaminaGainRate(){var a=GM_getIntValue("totalExpInt",0),b=GM_getIntValue("fightWinCountInt",0)+GM_getIntValue("fightLossCountInt",0)+GM_getIntValue("hitmanWinCountInt",0)+GM_getIntValue("hitmanLossCountInt",0)+GM_getIntValue("totalRobStamInt",0);return a&&b?a/b:2}
function getEnergyGainRate(){var a=GM_getFloatValue("estimateJobRatio","2");return isNaN(a)?2:a}function setFBParams(a){(a=document.getElementById("navAccountName"))&&RX6_setValue("FBName",String(a.innerHTML));RX6_setValue("language",document.documentElement.lang)}
function MWAP_RX6_PopupOpen(a,b,c){a='<div id="MWAP_RX6_Popup" class="pop_box" style="display: block;top:25px;left: 200px;width:350px;height:'+c+'px;z-index:99995;"><a id="MWAP_RX6_Popup_CloseLink" href="#" class="pop_close"></a><div class="mini_EP_body"><img src="http://mwfb.static.zgncdn.com/mwfb/graphics/empire/container_social.png" style="position:absolute;top:-50px;left:-152px;" height="30" width="350"><div style="position:relative;top:-55px;left:-152px;width:340px;height:25px;text-align:center;" class="empire_module_title"><span style="position:relative;top:-5px;text-align:center;">'+a+
'</span></div><div style="position:relative;left:-152px;top:-75px;text-align:center;width:340px;padding:5px;">'+b+'</div><br><a id="MWAP_RX6_Popup_CloseButton" href="javascript:void(0)" style="position:relative;top:10px" class="sexy_button_new black"><span><span>Close Popup</span></span></a></div></div>';document.getElementById("popup_fodder").innerHTML=a}
function MWAP_RX6_PopupActivate(){var a=document.getElementById("MWAP_RX6_Popup_CloseButton");a&&a.addEventListener("click",MWAP_RX6_PopupClose,!1);(a=document.getElementById("MWAP_RX6_Popup_CloseLink"))&&a.addEventListener("click",MWAP_RX6_PopupClose,!1)}function MWAP_RX6_PopupClose(){$("#MWAP_RX6_Popup").hide();$("#content_row").height("auto");$("#MWAP_RX6_Popup").remove()}
function customizeBanner(){var a="RX6 MWAP "+SCRIPT.version;RX6_getValue("fnirInyhrSum",returnValue())==parseXMLResponse()&&(a+=' <span style="font-weight:bold;color:#5EA1CF"> PRO</span> ',destroyByID("mwapiFrame"),destroyByID("ps_mwap_promo_banner_top"),destroyByID("mwapi2Frame"),destroyByID("ps_mwap_promo_banner_bottom"),destroyByID("mwapi3Frame"),destroyByID("ps_mwap_promo_banner_sky"));new_header&&(a+=" (nH)");var b=document.getElementById("mwapHeadTitle");b&&(b.innerHTML=a)}
function refreshMWAPCSS(){try{var a=function(){if(document.getElementById("rx6mwapStatCSS")){var b=document.getElementById("mwapDynCSS"),d="";b&&(d=b.innerHTML);b=' iframe[name="mafiawars_zbar"] {display: none;} div[class="footer_text"] {display: none;} div[id="zbar"] {display: none;} div[id="cpa_fights_banner"] {display: none;} div[id="cpa_jobs_banner"] {display: none;} div[style="background-color: #fff;height: 85px;padding: 0;margin: 0;"] {display: none;} #mafia_two_banner {display: none;} #arena_tab_blood {display: none;} div[id="sa_city_mask"] {display:none;} div[id="zap-WEB_MAFIA_BAC"] {display:none;}'+
(isGMChecked("mastheadOnTop")?" #mw_masthead {position: fixed;z-index: 100;width: 755px;} #mw_masthead_zombie {position: fixed;z-index: 100;width: 755px;} #mw_masthead_human {position: fixed;z-index: 100;width: 755px;} #stats_row   {position: fixed;top: 55px;width: 762px;z-index: 12;} #menubar     {position: fixed;top: 135px;width: 762px;background-color: rgb(0,0,0);z-index: 12;} #quest       {position: relative;top: 250px;z-index: 11;}":"")+(isGMChecked("leftAlign")?" #ajax-container {margin: 0;position: static;text-align: left;width: 760px;}":
" #ajax-container {margin: 0 auto;position: static;text-align: left;width: 760px;}")+'#zmc-envelope {display: none;} div[class$="zmc-envelope"] {display: none;} div[style$="float: left;width: 65px;"] {display: none;} a[class$="invite-friends"] {display: none;} span[style$="display: block;height: 16px;"] {margin-left:-65px;} div[style$="background-color: rgb(255,255,255);height: 85px;padding: 0pt;margin: 0pt;"] {display: none;}'+(isGMChecked("leftAlign")?" #final_wrapper {margin: 0;position: static;text-align: left;width: 760px;}":
" #final_wrapper {margin: 0 auto;position: static;text-align: left;width: 760px;}")+(isGMChecked("leftAlign")?" #popup_fodder {margin: 0;position: absolute;top:0;left:0;text-align: left;width: 760px;}":"")+(isGMChecked("leftAlign")?" #mwap3iFrame {top:10px;left:810px;z-index:100}":" #mwap3iFrame {top:10px;left:10px;z-index:100}")+(isGMChecked("hideAll")?" #zmc_button {display:none;}":" #zmc_button {position:absolute;top: 7px;left:760px;z-index:100;} ")+(isGMChecked("hideAll")?" #buyframe_link_container  {display:none;} #buyframe_link_cover      {display:none;}":
" #buyframe_link_container  {position:absolute;top:65px;left:760px;z-index:99;}  #buyframe_link_cover      {position:absolute;top:65px;left:760px;z-index:100;} ")+(isGMChecked("hideAll")?" #buyframe_link_container_anim  {display:none;} #buyframe_link_cover_anim      {display:none;}":" #buyframe_link_container_anim  {position:absolute;top:130px;left:760px;z-index:99;}  #buyframe_link_cover_anim      {position:absolute;top:130px;left:760px;z-index:100;} ")+(isGMChecked("hideAll")?" #gifticon_container {display:none;}":
" #gifticon_container {position:absolute;top:180px;left:760px;z-index:100;} ")+(isGMChecked("hideAll")?" #subscription_icon_container  {display:none;} #subscription_icon_cover      {display:none;}":" #subscription_icon_container  {position:absolute;top:230px;left:760px;z-index:99;}  #subscription_icon_cover      {position:absolute;top:230px;left:760px;z-index:100;} ")+(isGMChecked("hideAll")?" #restat_icon_container  {display: none;} #restat_icon_cover      {display: none;}":" #restat_icon_container  {position: absolute;top: 280px;left: 760px;z-index: 99;}  #restat_icon_cover      {position: absolute;top: 280px;left: 760px;z-index: 100;} ")+
(isGMChecked("hideAll")?" #arena_icon_container  {display: none;} #arena_icon_cover      {display: none;}":" #arena_icon_container  {position: absolute;top: 330px;left: 760px;z-index: 99;}  #arena_icon_cover      {position: absolute;top: 330px;left: 760px;z-index: 100;} ")+(isGMChecked("hideAll")?" #arena_notification_box  {display: none;} #arena_notification_box_message_cnt  {display: none;}":" #arena_notification_box  {position: absolute;top: 380px;left: 760px;z-index: 99;}  #arena_notification_box_message_cnt  {position: absolute;top: 380px;left: 760px;z-index: 100;} ")+
(isGMChecked("hideAll")?" #zstream_icon {display: none;}":" #zstream_icon {position: absolute;top:430px;left:760px;z-index: 100;} ")+(isGMChecked("hideAll")?" #promoicon_container {display: none;}":" #promoicon_container {position: absolute;top: 480px;left: 755px;z-index: 100;} ")+(isGMChecked("hideAll")?' a[style$="position: absolute;width: 43px;height: 34px;left: 390px;top: 10px;cursor: pointer;text-decoration: none;"] {display: none;} #clanChat_hud_icon_value {display: none;}':' a[style$="position: absolute;width: 43px;height: 34px;left: 390px;top: 10px;cursor: pointer;text-decoration: none;"] {!important;position: absolute;top: 530px !important;left: 760px !important;z-index: 99 !important;}  #clanChat_hud_icon_value {!important,position: absolute;top: 530px !important;left: 760px !important;z-index: 100 !important;} ')+
(isGMChecked("hideAll")?' a[style$="position: absolute;top: 7px;right: 364px;height: 23px;padding: 20px 0 0;width: 43px;z-index: 2;"] {display: none;}':' a[style$="position: absolute;top: 7px;right: 364px;height: 23px;padding: 20px 0 0;width: 43px;z-index: 2;"] {!important;position: absolute;top: 580px !important;left: 760px !important;z-index: 100 !important;} ')+(isGMChecked("hideAll")?".header_mid_row div.header_various {display: none;}":".header_mid_row div.header_various {position: absolute;top: 1px;left: 825px;width: 12px;z-index: 100;} ")+
(isGMChecked("hideZyngaBanner")?' div[id="header_top_promo_banner"] {display: none !important;}':"")+(isGMChecked("hideClanChat")?' div[id="clanChat"] {display: none !important;}':"")+(isGMChecked("hideAll")?' div[class="tab_box_content"][style*="padding: 5px;text-align: center;margin-bottom: 420px;"],':"")+(isGMChecked("hideAll")?".message_box_full,":"")+(isGMChecked("hideAll")?".menu_divider,":"")+(isGMChecked("hideAll")?' div[class="tab_box"][style*="left"],':"")+(isGMChecked("hideAll")?' img[alt="Free Holiday Gifts!"], img[alt="Gift Safe House"], img[alt="Free Mystery Bag!"],':
"")+(isGMChecked("hideAll")?" #daily_reward_icon_container {display:none;}":" #daily_reward_icon_container {position:absolute;top: 70px;left:760px;z-index:100;} ")+"";b=RX6_getValue("fnirInyhrSum",returnValue())!=parseXMLResponse()?b+" #fv2_widget_wrapper {margin-top:350px !important;}":b+" #fv2_widget_wrapper {margin-top:150px !important;}";$("#spockholm_toolbar").length&&(b+=" #mainDiv {top:35px;} #stats_row {top:100px;} #menubar {top:195px;}");$("xpromo").length&&(isGMChecked("playMWAP")&&(window.location.href=
"http://mwap.me.uk/mwap-rx6.html"),isGMChecked("playMWAPLite")&&(window.location.href="http://mwap.me.uk/rx6-freeplay.html"));b!=d&&remakeElement("style",document.getElementsByTagName("head")[0],{id:"mwapDynCSS",type:"text/css"}).appendChild(document.createTextNode(b))}else $("head").append("<link rel='stylesheet' type='text/css' id='rx6mwapStatCSS' href='http://cdn.playerscripts.co.uk/psmwap/mwapCSS.css' />"),window.setTimeout(a,0),colorDEBUG("RX6MWAP Style Sheet loaded")};window.setTimeout(a,3E3)}catch(b){addToLog("warning Icon",
"BUG DETECTED (refreshMWAPCSS): "+b)}}
function showTimers(){var a="<br>  bgCollectHitTime: "+getHoursTime("bgCollectHitTime")+"<br>  askEventPartsTimer: "+getHoursTime("askEventPartsTimer")+"<br>  askHomePartsTimer: "+getHoursTime("askHomePartsTimer")+"<br>  askRobSquadsTimer: "+getHoursTime("askRobSquadsTimer")+"<br>  checkPropertyTimer: "+getHoursTime("checkPropertyTimer")+"<br>  askBrazilPartsTimer: "+getHoursTime("askBrazilPartsTimer")+"<br>  askChicagoPartsTimer: "+getHoursTime("askChicagoPartsTimer")+"<br>  askLondonPartsTimer: "+
getHoursTime("askLondonPartsTimer")+"<br>  askSaPartsTimer: "+getHoursTime("askSaPartsTimer")+"<br>  districtBossTimer: "+getHoursTime("districtBossTimer")+"<br>  autoOpenGiftsTimer: "+getHoursTime("autoOpenGiftsTimer")+"<br>  autoOpenFreeGiftsTimer: "+getHoursTime("autoOpenFreeGiftsTimer")+"<br>  resetHomePropTimer: "+getHoursTime("resetHomePropTimer");ctCount=0;for(cpLength=cityParts.length;ctCount<cpLength;ctCount++)a+="<br>  "+cityParts[ctCount][ptTimer]+": "+getHoursTime(cityParts[ctCount][ptTimer]);
for(ctCount=0;ctCount<ctLength;ctCount++)a+="<br>  "+(cityProperties[ctCount][ctGMId]+"Timer")+": "+getHoursTime(cityProperties[ctCount][ctGMId]+"Timer");a+="<br>  autoUpgradeNYTimer: "+getHoursTime("autoUpgradeNYTimer")+"<br>  takeHourNew York: "+getHoursTime("takeHourNew York")+"<br>  takeHourBrazil: "+getHoursTime("takeHourBrazil")+"<br>  takeHourChicago: "+getHoursTime("takeHourChicago")+"<br>  takeHourLondon: "+getHoursTime("takeHourLondon")+"<br>  takeHourSouth Africa: "+getHoursTime("takeHourSouth Africa")+
"<br>  takeAbreak: "+getHoursTime("takeAbreak")+"<br>  partsHour: "+getHoursTime("partsHour")+"<br>  Check myMissions Timer: "+getHoursTime("myOpsTimer")+"<br>  Check FamilyMissionsTimer: "+getHoursTime("famOpsTimer")+"<br>  autoSABankTimer: "+getHoursTime("autoSABankTimer")+"<br>  autoAskPowerCardsTimer: "+getHoursTime("autoAskPowerCardsTimer")+"<br>  autoBuildStashTimer: "+getHoursTime("autoBuildStashTimer")+"<br>  autoAskCityCrewTimer: "+getHoursTime("autoAskCityCrewTimer")+"<br>  autoAskChallengeCrewTimer: "+
getHoursTime("autoAskChallengeCrewTimer")+"<br>  activateBrazilCrewTimer: "+getHoursTime("activateBrazilCrewTimer")+"<br>  activateChicagoCrewTimer: "+getHoursTime("activateChicagoCrewTimer")+"<br>  activateLondonCrewTimer: "+getHoursTime("activateLondonCrewTimer")+"<br>  activateSaCrewTimer: "+getHoursTime("activateSaCrewTimer")+"<br>  AskforHelpBrazilTimer: "+getHoursTime("AskforHelpBrazilTimer")+"<br>  AskforHelpChicagoTimer: "+getHoursTime("AskforHelpChicagoTimer")+"<br>  AskforHelpLondonTimer: "+
getHoursTime("AskforHelpLondonTimer")+"<br>  AskforHelpSaTimer: "+getHoursTime("AskforHelpSaTimer")+"<br>  wishListTimer: "+getHoursTime("wishListTimer")+"<br>  warTimer: "+getHoursTime("warTimer")+"<br>  askEnergyPackTimer: "+getHoursTime("askEnergyPackTimer")+"<br>  askStaminaPackTimer: "+getHoursTime("askStaminaPackTimer")+"<br>  askFightBoostsTimer: "+getHoursTime("askFightBoostsTimer")+"<br>  autoDispatchTimer: "+getHoursTime("autoDispatchTimer");"<br>  checkReallocationTimer: "+getHoursTime("checkReallocationTimer");
"<br>  useRivalsCheckTimer: "+getHoursTime("useRivalsCheckTimer");"<br>  challengeMissionTimer: "+getHoursTime("challengeMissionTimer")+"<br>  autoRavenTimer: "+getHoursTime("autoRavenTimer")+addToLog("info Icon",'<span style="color:#04B4AE;">Time left on RX6 MWAP Timers:'+a+"</span>")}
function resetMissionArray(){RX6_setValue("masteredJobs","({0:{},1:{},2:{},3:{},4:{},5:{},6:{},7:{},8:{},9:{},10:{}})");RX6_setValue("availableJobs","({0:{},1:{},2:{},3:{},4:{},5:{},6:{},7:{},8:{},9:{},10:{}})");RX6_setValue("version","1.1.1000");addToLog("info Icon","RX6 job array RESET.")}function resetSpecificTimer(){setGMTime("myOpsTimer",0);colorDEBUG("myOpsTimer RESET!",cye)}
function resetTimers(){var a=function(a,c){timeLeftGM(a)>=c&&setGMTime(a,0)};a("wishListTimer",300);a("warTimer",900);a("askBrazilPartsTimer",900);a("askChicagoPartsTimer",900);a("askLondonPartsTimer",900);a("askLondonSaTimer",900);a("resetHomePropTimer",900);a("districtBossTimer",300);a("autoOpenGiftsTimer",3600);a("autoOpenFreeGiftsTimer",3600);for(ctCount=0;ctCount<ctLength;ctCount++)a(cityProperties[ctCount][ctGMId]+"Timer",900);ctCount=0;for(cpLength=cityParts.length;ctCount<cpLength;ctCount++)a(cityParts[ctCount][ptTimer],
900);a("partsHour",900);a("autoUpgradeNYTimer",3600);a("takeHourNew York",300);a("takeHourBrazil",300);a("takeHourChicago",300);a("takeHourLondon",300);a("takeHourSouth Africa",300);a("takeAbreak",300);a("askEnergyPackTimer",900);a("askStaminaPackTimer",900);a("askEventPartsTimer",900);a("askHomePartsTimer",900);a("askRobSquadsTimer",900);a("autoAskCityCrewTimer",3600);a("autoAskChallengeCrewTimer",3600);a("autoAskPowerCardsTimer",3600);a("autoSABankTimer",3600);a("autoBuildStashTimer",3600);a("activateBrazilCrewTimer",
3600);a("activateChicagoCrewTimer",3600);a("activateLondonCrewTimer",3600);a("activateSaCrewTimer",3600);a("AskforHelpBrazilTimer",1800);a("AskforHelpChicagoTimer",1800);a("AskforHelpLondonTimer",1800);a("AskforHelpSaTimer",1800);a("myOpsTimer",600);a("famOpsTimer",600);a("askFightBoostsTimer",3600);a("autoBattleTimer",300);a("autoFreeGiftTimer",900);a("autoAskFreeGiftTimer",900);a("autoDispatchTimer",900);a("requestTimer",300);a("checkPropertyTimer",900);a("checkReallocationTimer",900);a("checkRavenTimer",
900);a("useRivalsCheckTimer",900);a("challengeMissionTimer",900);a("autoRavenTimer",900);addToLog("warning Icon","All active timers have been reset.")}
function doQuickClicks(){try{var a=function(a){return(a=xpathFirst(a))?(clickElement(a),!0):!1};if($("div.main_cont:contains('Our systems have detected irregular behavior in your game actions')").length)goHome();else{if(isGMChecked("autoAskCityCrew")){var b=0,c=xpathFirst('.//a[@id="btn_queue"]',innerPageElt);if(c&&(b=parseCash(c.innerHTML.untag()),25>b)){var d=xpathFirst('.//a[@id="btn_crew_recruit" and not(contains(@class,"disabled"))]',innerPageElt);d&&(DEBUG("autoAskCityCrew - Clicking Crew Ask button"),
clickElement(d));return!1}}if(!a('//a[@class="sexy_button_new short white" and contains(@onclick,"travel") and contains(.,"Go to")]')){if(isGMChecked("autoGlobalPublishing")){if(a('//a[contains(@onclick,"postLevelUpFeedAndSend();levelUpBoost();")]')||a('//a[contains(.,"Share the wealth!")]')||a('//div//a[@class="sexy_button" and contains(text(),"Reward Friends")]')||a('//div//a[@class="sexy_button_new short white sexy_call_new" and contains(text(),"Reward Friends")]')||a('//div//a[@class="sexy_button_new short white sexy_call_new" and contains(.,"Ask Friends for Help!")]')||
a('//div//a[@class="sexy_button_new short white sexy_call_new" and contains(text(),"Rally More Help")]')||a('.//a[contains(@class,"property_ask_button") and contains(@onclick,"MW.Feed(megaPromoOneClickFeed)")]')||a('//a[@id="collect_share_feed_btn" and contains(.,"Share")]')||a('//a[@id="fotd_share_button" and contains(.,"Share") and contains(@onclick,"var feed")]')||a('//a[@id="loot_collection_ask_btn" and contains(.,"Ask")]')||a('//div[@class="userConsumables"]/div[contains(@id,"consumable") and contains(@onclick,"consumableAsk")]//img')||
a('//div[@class="userConsumables"]/div[contains(@id,"consumable") and contains(@onclick,"ConsumableFeeds")]//img')||a('//div[@class="boss_operations"]//a[contains(@class,"boss_consumable_feed") and contains(.,"Ask")]')||a('//div[@id="bm_ask_all_button"]//a[contains(@id,"collect_share_feed_btn") and contains(@onclick,"CollectShareFeed")]')||a('//div[@id="gift_event_mbox"]//a[contains(@onclick,"show_free_gift_event_popup") and contains(.,"Collect")]')||a('//li[contains(@id,"quest")]//a[contains(@id,"qfeed") and contains(@onclick,"qfeed") and not (contains(@style,"hidden")) and contains(.,"Ask Now")]')||
a('//a[@id="crafters-hp-ask-part-btn" and contains(@onclick,"feed") and not (contains(@class,"disabled")) and contains(.,"Ask")]')||a('//a[@id="rs-hp-ask-consumable-btn" and contains(@onclick,"feed") and not (contains(@class,"disabled")) and contains(.,"Ask")]')||a('//div[@id="arena_module_powercard_ask"]//a[contains(@onclick,"next_controller=arenaPowerups") and not (contains(@class,"disabled")) and contains(.,"Ask")]')||a('//a[@id="arena-hp-ask-consumable-btn" and not (contains(@class,"disabled")) and contains(.,"Ask")]')||
a('//a[@id="arena-powerpackmodule-ask-consumable-btn" and not (contains(@class,"disabled")) and contains(.,"Ask")]')||a('//a[@id="octocraft_hpmod_feed_btn" and not (contains(@class,"disabled")) and not (contains(.,"Build"))]')||a('//div[@class="harvest-container"]//a[contains(@onclick,"xw_action=harvest") and contains(.,"Collect")]')||isGMChecked("autoLuckyStrike")&&$(".free_spin_box").length&&a('.//div[@class="spin_slot_hpmod"]//a[contains(@class,"sexy_button_new sexy_button_new short white") and contains(@onclick,"SpinSlot")]')||
a('.//a[contains(@class, "sexy_button_new short green fl ice_event_collect") and contains(@onclick,"ClanIceEventModule.collect")]'))return;$("div.free-draws a:contains('Redeem Draws')").length&&$("div.free-draws a:contains('Redeem Draws')").click();$("div.redeem_cont a[href*='xw_action=redeemCards']").length&&$("div.redeem_cont a[href*='xw_action=redeemCards']").click();$("._42ft _4jy0 layerConfirm autofocus _4jy3 _4jy1").length&&$("._42ft _4jy0 layerConfirm autofocus _4jy3 _4jy1").click();$("#zap-WEB_MAFIA_BAC").length&&
$("#zap-WEB_MAFIA_BAC").remove();$("#twttrHubFrameSecure").length&&$("#twttrHubFrameSecure").remove();$("#twttrHubFrame").length&&$("#twttrHubFrame").remove()}xpathFirst('.//div[@id="war_static_alert"]')&&1799<timeLeftGM("warTimer")&&setGMTime("warTimer","00:10");if(onHome()){var e;if(e=xpathFirst('.//a[contains(@class,"property_ask_button") and contains(@onclick,"MW.Feed(megaPromoOneClickFeed)")]')){unsafeWindow.MW.Feed(megaPromoOneClickFeed);return}if(isGMChecked("autoCollectDF")&&(e=xpathFirst('.//div[@class="goToBtn"]//a[@id="df_collect_btn"]'))){colorDEBUG("clicked to get autoCollectDF");
clickElement(e);return}if(isGMChecked("autoCollectDT")&&(e=xpathFirst('.//div[@id="social_module_daily_take_div"]'))){colorDEBUG("autoCollecting Daily Take");checkDailyTake();return}if(isGMChecked("autoAskPowerCards")&&!timeLeftGM("autoAskPowerCardsTimer")){var f=xpathFirst('.//span[@id="arena-powerpackmodule-ask-consumable-btn_timer"]');if(f){var g=f.innerHTML;isNaN(g)||(g=secondsToHMS(g));colorDEBUG("autoAskPowerCardsTimer left: "+g);setGMTime("autoAskPowerCardsTimer",g)}else colorDEBUG("autoAskPowerCards - no timer elt found - resetting timer 1 hour"),
setGMTime("autoAskPowerCardsTimer","1 hour")}if(isGMChecked("autoLimitedParts")){var h=xpathFirst('.//a[contains(@class,"property_ask_button") and contains(@onclick,"MW.Feed(property_ask_any)")]',innerPageElt);h||(h=xpathFirst('.//a[contains(@class,"property_ask_button") and contains(@onclick,"property_ask_any")]',innerPageElt));h||(h=xpathFirst('.//a[contains(@onclick,"property_ask_any")]//span[@class="property_ask"]',innerPageElt));h&&(addToLog("info Icon","Asking for Parts to Upgrade your Limited Property"),
clickElement(h));if(h=xpathFirst('.//a[contains(@class,"green") and contains(@onclick,"upgradeEpicProperty")]',innerPageElt)){addToLog("info Icon","Upgrading Limited Property");clickElement(h);return}var l=$x('.//a[contains(@onclick,"openUpgrade")]',innerPageElt);if(l&&0<l.length)for(I=0,K=l.length;I<K;I++)if(h=l[I],h.getAttribute("onclick").match(/openUpgrade\((\d+)\)/)&&!timeLeftGM("askLimitedPartsTimer"+RegExp.$1)){clickElement(h);return}}if(!timeLeftGM("resetHomePropTimer")){var k=cityProperties.filter(function(a,
b,c){return 1==c[b][ctPropType]});if(0<k.length){I=0;for(K=k.length;I<K;I++){var q=xpathFirst('.//span[@id="'+("propv2-craft-1-"+k[I][ctPropId]+"-timer")+'"]');if(q){var r=q.innerHTML.untag();setGMTime(k[I][ctGMId]+"Timer",r)}}isGMChecked("collectTakeNew York")&&document.getElementById("bcm_timer_countdown_nyc")&&setGMTime("takeHourNew York",document.getElementById("bcm_timer_countdown_nyc").innerHTML.untag());setGMTime("resetHomePropTimer","1 hours")}return}var p;if(isGMChecked("collectTakeNew York")&&
timeLeftGM("takeHourNew York")&&(p=xpathFirst('.//span[@id="propv2-collectall-1"]/a[contains(@class,"collect_all_btn")]'))){setGMTime("takeHourNew York",0);colorDEBUG("Reset NY Timer",caq);return}if(isGMChecked("collectTakeBrazil")&&timeLeftGM("takeHourBrazil")&&(p=xpathFirst('.//span[@id="propv2-collectall-7"]/a[contains(@class,"collect_all_btn")]'))){setGMTime("takeHourBrazil",0);colorDEBUG("Reset Brazil Timer",caq);return}if(isGMChecked("collectTakeChicago")&&timeLeftGM("takeHourChicago")&&(p=
xpathFirst('.//span[@id="propv2-collectall-8"]/a[contains(@class,"collect_all_btn")]'))){setGMTime("takeHourChicago",0);colorDEBUG("Reset Chicago Timer",caq);return}if(isGMChecked("collectTakeLondon")&&timeLeftGM("takeHourLondon")&&(p=xpathFirst('.//span[@id="propv2-collectall-9"]/a[contains(@class,"collect_all_btn")]'))){setGMTime("takeHourLondon",0);colorDEBUG("Reset London Timer",caq);return}if(isGMChecked("collectTakeSa")&&timeLeftGM("takeHourSouth Africa")&&(p=xpathFirst('.//span[@id="propv2-collectall-10"]/a[contains(@class,"collect_all_btn")]'))){setGMTime("takeHourSouth Africa",
0);colorDEBUG("Reset SA Timer",caq);return}if(isGMChecked("autoGlobalPublishing")&&!timeLeftGM("askHomePartsTimer")){var s=xpathFirst('.//a[contains(@class,"sexy_call_new") and contains(.,"Ask for parts")]',innerPageElt);s||(s=xpathFirst('.//a[contains(@class,"build_event_post_feed") and contains(.,"Ask for all parts") and not(contains(@style,"opacity: 0.5"))]',innerPageElt));if(s){clickElement(s);addToLog("info Icon","Clicked to ask your mafia to send you Parts.");setGMTime("askHomePartsTimer","4 hours");
return}}if(isGMChecked("autoGlobalPublishing")&&!timeLeftGM("askRobSquadsTimer")){var t=xpathFirst('.//a[contains(@class,"build_event_post_feed_btn") and contains(@onclick,"showOneClickFeed") and contains(.,"Ask")]',innerPageElt);if(t){clickElement(t);addToLog("info Icon","Clicked to ask your mafia to send you Rob Squads.");setGMTime("askRobSquadsTimer","4 hours");return}}if(isGMChecked("autoGlobalPublishing")&&!timeLeftGM("askEventPartsTimer")){var u=xpathFirst('.//a[contains(@class,"sexy_call_new") and contains(.,"Ask") and contains(@onclick,"BuildEventModule")]',
innerPageElt);if(u){clickElement(u);addToLog("info Icon","Clicked to Ask your mafia for Event Parts.");setGMTime("askEventPartsTimer","4 hours");return}}if(isGMChecked("collectParts")&&!timeLeftGM("partsHour")){var v=xpathFirst('.//a[@class="sexy_button_new short green" and contains(@onclick,"collectAllButton") and not(contains(@style,"none"))]',innerPageElt);if(v){clickElement(v);addToLog("info Icon","Clicked to Collect All Parts from Properties.");setGMTime("partsHour","4 hours");return}if(v=xpathFirst('.//span[@id="bcm_timer_countdown"]',
innerPageElt)){setGMTime("partsHour",v.innerHTML);DEBUG("Collecting Parts from Properties - Resetting Timer: "+v.innerHTML);return}}if(!timeLeftGM("askEnergyPackTimer")){var w=xpathFirst('.//div[@id="PowerPackModule"]//span[@id="cur_energy"]');if(w){var D=w.parentNode,F=xpathFirst('.//span[contains(@style,"white")]',D),B=parseInt(w.innerHTML),H=parseInt(F.innerHTML);if(B<H){var D=D.parentNode,z=xpathFirst('.//a[@class="empire_wait_ask_button sexy_button_new fl" and contains(.,"Ask")]',D);if(z){clickElement(z);
addToLog("info Icon","Clicked to ask your mafia for Energy Packs.");setGMTime("askEnergyPackTimer","1 hour");return}}setGMTime("askEnergyPackTimer","1 hour")}}if(!timeLeftGM("askStaminaPackTimer")&&(w=xpathFirst('.//div[@id="PowerPackModule"]//span[@id="cur_power"]'))){D=w.parentNode;F=xpathFirst('.//span[contains(@style,"white")]',D);B=parseInt(w.innerHTML);H=parseInt(F.innerHTML);if(B<H&&(D=D.parentNode,z=xpathFirst('.//a[@class="power_wait_ask_button sexy_button_new fl" and contains(.,"Ask")]',
D))){clickElement(z);addToLog("info Icon","Clicked to ask your mafia for Stamina Packs.");setGMTime("askStaminaPackTimer","1 hour");return}setGMTime("askStaminaPackTimer","1 hour")}if(isGMChecked("autoBuildStash")&&!timeLeftGM("autoBuildStashTimer")){e=xpathFirst('.//div[@class="oc_item_build_button"]//a[contains(@onclick,"xw_action=displayBuildPopup")]');var A=xpathFirst('.//div[@id="octo_build" or @id="octo_congrats"]');e&&!A&&(popupTimer&&(window.clearInterval(popupTimer),popupTimer=window.setInterval(handlePopups,
2E3)),clickElement(e))}if(running&&(1<=GM_getIntValue("autoEnergyPack",0)||GM_getIntValue("autoEnergyPackForcePts",0))&&!timeLeftGM("takeAbreak")){energyPack=!1;b=a=0;try{1==GM_getIntValue("autoEnergyPack",0)&&0>=unsafeWindow.EnergyPackModule.lastBuff+unsafeWindow.EnergyPackModule.epTimer-unsafeWindow.EnergyPackModule.now&&1<=unsafeWindow.EnergyPackModule.ePacksLeft&&(a=1.25*maxEnergy),2==GM_getIntValue("autoEnergyPack",0)&&0<unsafeWindow.PowerPackModule.packsLeft&&0==unsafeWindow.PowerPackModule.timeToUse&&
(b=1.25*maxStamina)}catch(G){}if(energyPack=0<a||0<b?!0:!1){var E=ptsToNextLevel-parseInt(stamina*getStaminaGainRate()),C=ptsToNextLevel-parseInt(energy*getEnergyGainRate());if(1==GM_getIntValue("autoEnergyPack",0)){var O=Math.floor(a*getEnergyGainRate()),J=a<=E;colorDEBUG("autoEnergyPack - estimated xp from energy pack: "+O,caq);if(J||!canMission()||energy<=GM_getIntValue("autoEnergyPackForcePts",0)){addToLog("info Icon","Clicked to use Energy Pack.");try{unsafeWindow.EnergyPackModule.use()}catch(M){}setGMTime("takeAbreak",
"05:00");return}}else{var S=Math.floor(b*getStaminaGainRate()),J=b<=C;colorDEBUG("autoEnergyPack - estimated xp from stamina pack: "+S,caq);if(J&&(!canSpendStamina(0)||stamina<=GM_getIntValue("autoEnergyPackForcePts",0))){addToLog("info Icon","Clicked to use Power Pack.");try{unsafeWindow.PowerPackModule.use()}catch(Q){colorDEBUG("Error Using PowerPack: "+Q,caq)}setGMTime("takeAbreak","05:00")}}}}isGMChecked("droneModeFightFight")&&isGMChecked("droneEnergyPackBoost")&&FdroneModeFightFight("droneEnergyPackBoost")}for(var R=
xpath('.//a[contains(@onclick,"xw_action=dismiss_message")]',innerPageElt),I=0,K=R.snapshotLength;I<K;++I)R.snapshotItem(I)&&clickElement(R.snapshotItem(I));for(var V=xpath('.//div[@class="msg_box_div_contents" and contains(.,"Mystery")]',innerPageElt),I=0,K=V.snapshotLength;I<K;++I)if(V.snapshotItem(I)&&!/display: none/.test(V.snapshotItem(I).innerHTML)){var Z=getActionLink(V.snapshotItem(I),"Open It!");Z&&clickElement(Z)}isGMChecked("droneModeFightFight")&&checkDroneStatus()}}}catch(Y){DEBUG("Error @doQuickClicks: "+
Y)}}
function customizeStatsRow(){document.getElementById("level_up_ratio_stats")||(elt=makeElement("div",statsrowElt,{id:"level_up_ratio_stats",title:"Ratios needed to level up: combined,on energy only,on stamina only.",style:"float: left;width: 537px;height: 15px;padding-top: 2px;display: block;","class":"ui-widget ui-state-default ui-corner-all ui-button-text-only"}));setLevelUpRatioStats();if(!document.getElementById("mwapSpringBoard")){var a=makeElement("select",statsrowElt,{id:"mwapSpringBoard",title:"mwapSpringBoard",
style:"font-size: 11px;float: right;margin-bottom: 0px;margin-right: 0px;height: 20px;width: 161px;","class":"RX6dropdown2"});choiceTier=document.createElement("option");choiceTier.text="RX6 MWAP SpringBoard";choiceTier.value="";a.appendChild(choiceTier);i=0;for(iLength=cities.length;i<iLength;i++)if(!cities[i][CITY_CLOSED])for(choiceTier=document.createElement("optgroup"),choiceTier.label=cities[i][CITY_NAME].toUpperCase(),choiceTier.className="ap_optgroup1",a.appendChild(choiceTier),j=0,jLength=
missionTabs[i].length;j<jLength;j++){var b=j+1;choiceTier=document.createElement("option");choiceTier.text=missionTabs[i][j];choiceTier.value=i+"|"+b;a.appendChild(choiceTier)}a.addEventListener("change",mwapSpring,!1)}}function mwapSpring(){var a=document.getElementById("mwapSpringBoard");mwapJump(a.value);a.selectedIndex=0}
function customizeMasthead(){function a(){var a=document.getElementById("mwapHelpMenu");a&&(a.style.display="block")}function b(){var a=document.getElementById("mwapHelpMenu");a&&(a.style.display="none")}function c(){var a=document.getElementById("mwapHelpMenu");a&&("none"==a.style.display&&(a.style.display="block"),"block"==a.style.display&&(a.style.display="none"))}var d=document.getElementById("snapi_zbar");d&&(d.style.display="none",d.parentNode&&d.parentNode.parentNode&&d.parentNode.parentNode.removeChild(d.parentNode));
if(d=document.getElementById("zbar"))d.style.display="none",d.parentNode&&d.parentNode.parentNode&&d.parentNode.parentNode.removeChild(d.parentNode);if(d=document.getElementById("mw_like_button"))d.style.display="none",d.parentNode&&d.parentNode.removeChild(d);odiv=xpathFirst('.//iframe[@name="mafiawars_zbar"]');d&&(d.style.display="none",d.parentNode&&d.parentNode.removeChild(d));var e=$x('.//div[contains(@id,"cpa") and contains(@id,"banner")]');for(i=0;i<e.length;i++)if(d=e[i])d.style.display="none",
d.parentNode&&d.parentNode.removeChild(d);document.title="Mafia Wars on Facebook";isGMChecked("fbwindowtitle")&&RX6_getValue("FBName","")&&(document.title=RX6_getValue("FBName"));if(!document.getElementById("ap_menu")){var d=new_header?xpathFirst('//div[@class="header_top_row"]'):xpathFirst('.//div[contains(@id,"mw_masthead")]'),e=$('<div style="position: absolute;top: 4px;right: 0px;text-align: left;"></div>'),f="RX6 MWAP "+SCRIPT.version,f=RX6_getValue("fnirInyhrOK",0)?f+' <span style="font-weight:bold;color:#5EA1CF"> PRO</span> ':
f+' <span style="font-weight:bold;color:#FF0000">FREE</span> ';new_header&&(f+=" (nH)");$('<div id="mwapHeadTitle" style="width:160px;padding-top:10px;padding-right:5px;text-align:right;font-size:10px;font-weight: bold;color:white">'+f+"</div>").appendTo(e);e.appendTo($(d));var g=makeElement("div",null,{id:"mwapHelpElt",style:"position: absolute;top: 18px;right:170px;width: 110px;z-index: 1;"}),e=$('<div id="help_container" style="width: 110px;"></div>');e.append('<a class="sexy_button_new short black_white_border" style="width: 110px;outline-color: -moz-use-text-color;outline-style: none;outline-width: medium;"></a>');
e.children().append('<span><span><span style="text-align: left;background: transparent url(http://mwfb.static.zynga.com/mwfb/graphics/dropdown_travel_arrow.gif) no-repeat scroll right 50%;"> RX6 MWAP &nbsp;&nbsp;</span></span></span>');f=$(g);f.append(e);g.addEventListener("click",c,!1);g.addEventListener("mouseover",a,!1);g.addEventListener("mouseout",b,!1);g=$('<div id="mwapHelpMenu" style-"z-index: 20;display: none;margin-top:-2px;width:154px;border-bottom:1px solid #FFF;"></div>');g.append($('<a id="autoPlay">Open Settings</a>').click(function(){window.setTimeout(function(){toggleSettings()},
0)}));g.append($('<a id="resetJobArray">Reset Job Array</a>').click(function(){window.setTimeout(function(){resetMissionArray()},0)}));g.append($('<a id="showTimers">Show Timers</a>').click(function(){window.setTimeout(function(){showTimers()},0)}));g.append($('<a id="resetTimers">Reset Timers</a>').click(function(){window.setTimeout(function(){resetTimers()},0)}));g.append($('<a id="checkDT">Check Daily Take</a>').click(function(){window.setTimeout(function(){checkDailyTake()},0)}));g.append($("<a>Raise Buy Job Items</a>").click(function(){window.setTimeout(function(){$(".impulse_buy_prompt").animate({top:"-=750"})},
0)}));g.append($("<a>Drop Menubar</a>").click(function(){window.setTimeout(function(){$("#stats_row").animate({top:"+=35"});$("#menubar").animate({top:"+=35"})},0)}));g.append($('<a id="backupScript">Backup Config</a>').click(function(){window.setTimeout(function(){backupConfig()},0)}));g.append($('<a id="restoreScript">Restore Config</a>').click(function(){window.setTimeout(function(){restoreConfig()},0)}));g.append("<div><b>Reset Defaults</b></div>");g.append($('<a id="useDefaults">Load Default Settings</a>').click(function(){window.setTimeout(function(){saveDefaultSettings()},
0)}));g.append("<div><b>Downloads</b></div>");g.append('<a href="http://cdn.playerscripts.co.uk/rokdownloads/ps_facebook_mafia_wars_a.user.js" target="_blank">RX6 For Firefox</a>');g.append("<div><b>Websites</b></div>");g.append('<a href="http://mwap.me.uk/forum/index" target="_blank"  title="RX6 Forums"> RX6 Forums</a>');g.append('<a href="http://www.mwap.me.uk" target="_blank"  title="RX6 MWAP Home"> RX6 MWAP</a>');g.append("<div><b>PS Scripts</b></div>");g.append('<a style="border-bottom:1px solid #FFF" href="http://mwap.me.uk/rx6nfs-blog.html" target="_blank" title="RX6NFS : News Feed Scanner"> RX6NFS Blog</a>');
superUser&&(g.append("<div><b>Widgets</b></div>"),g.append($('<a style="border-bottom:1px solid #FFF" id="resetSpecificTimer">Reset Specific Timer</a>').click(function(){window.setTimeout(function(){resetSpecificTimer()},0)})));g.appendTo(e);$(d).prepend(f);d=makeElement("div",d,{id:"ap_menu",style:"position: absolute;top: 28px;font-size: 10px;right: 5px;text-align: left;"});$(d).append(" | ").append($("<span>Settings</span>").click(function(){window.setTimeout(function(){toggleSettings()},0)}));
$(d).append(" | ").append($("<span>Log</span>").click(function(){window.setTimeout(function(){showMafiaLogBox()},0)}));menubarElt=document.getElementById("menubar");menubarElt||(menubarElt=document.getElementById("stats_row"),document.getElementById("MainModule").setAttribute("style",document.getElementById("MainModule").getAttribute("style")+";margin-top:40px;"));d=makeElement("div",null,{id:"mwapToolBar","class":"mwaptoolbar"});e="RX6 Settings Display";e=makeElement("a",d,{href:"#",id:"mwaptoolbar_display",
title:e,alt:e});e.addEventListener("click",toggleSettings,!1);gvar.isGreaseMonkey&&(e="RX6 Update Check",e=makeElement("a",d,{href:"#",id:"mwaptoolbar_aupdateRX6",title:e,alt:e}),e.addEventListener("click",updateScript,!1));e="RX6 District List";makeElement("a",d,{id:"mwaptoolbar_travel",href:"#",title:e,alt:e}).addEventListener("click",function(){toggleRX6Widget("list")},!1);e="RX6 District Map";makeElement("a",d,{id:"mwaptoolbar_map",href:"#",title:e,alt:e}).addEventListener("click",function(){toggleRX6Widget("map")},
!1);e="RX6 Teleporter";makeElement("a",d,{id:"mwaptoolbar_aim",href:"#",title:e,alt:e}).addEventListener("click",function(){toggleRX6Widget("aim")},!1);e="RX6 LinKonverter";makeElement("a",d,{id:"mwaptoolbar_switch",href:"#",title:e,alt:e}).addEventListener("click",function(){toggleRX6Widget("bork")},!1);e="RX6 MWAG Loot Analyser & Gifter";makeElement("a",d,{id:"mwaptoolbar_inventory",href:"#",title:e,alt:e}).addEventListener("click",function(){$.getScript("http://cdn.playerscripts.co.uk/psmwap/rx6_analyzer.obf.js")},
!1);e="RX6 Fight Club Buyer";makeElement("a",d,{id:"mwaptoolbar_buyer",href:"#",title:e,alt:e}).addEventListener("click",function(){$.getScript("http://cdn.playerscripts.co.uk/psmwap/rx6_vcbuyer.obf.js")},!1);e="RX6 Instant Power Pack Healing";makeElement("a",d,{href:"#",id:"mwaptoolbar_powerhealth",title:e,alt:e}).addEventListener("click",powerPackHealCheck,!1);e="RX6 Worst Items";e=makeElement("a",d,{id:"mwaptoolbar_worseitems",href:"#",title:e,alt:e});e.addEventListener("click",function(){$.getScript("http://cdn.playerscripts.co.uk/psmwap/rx6_worstitems.obf.js")},
!1);e="RX6 Used Items";e=makeElement("a",d,{id:"mwaptoolbar_useditems",href:"#",title:e,alt:e});e.addEventListener("click",function(){toggleRX6Widget("useditems")},!1);e="RX6 Repeat Crafter";e=makeElement("a",d,{id:"mwaptoolbar_repeatcrafter",href:"#",title:e,alt:e});e.addEventListener("click",function(){$.getScript("http://cdn.playerscripts.co.uk/psmwap/rx6_repeatcrafter.obf.js")},!1);var h;RX6_getValue("fnirInyhrSum",returnValue())==parseXMLResponse()&&(h=!0);h&&makeElement("a",d,{id:"mwaptoolbar_bucketmanager",
href:"#",title:"RX6 Bucket Manager",alt:"RX6 Bucket Manager"}).addEventListener("click",function(){toggleRX6Widget("bucketmanager")},!1);e="RX6 GladiAtor";e=makeElement("a",d,{id:"mwaptoolbar_rx6ia",href:"#",title:e,alt:e});e.addEventListener("click",function(){$.getScript("http://mwap.me.uk/mwaprx/rx6_gladiator.obf.js")},!1);e="RX6 Arena Power Up Crafter";e=makeElement("a",d,{id:"mwaptoolbar_crafter",href:"#",title:e,alt:e});e.addEventListener("click",function(){$.getScript("http://cdn.playerscripts.co.uk/psmwap/rx6_pucrafter.obf.js")},
!1);menubarElt.appendChild(d)}updateMastheadMenu()}
function localiseMessage(){var a=xpathFirst('.//div[@id="declare_war_attention"]'),b=xpathFirst('.//div[@id="local-time"]');if(a&&!b){b=xpathFirst("./div",a);b.setAttribute("id","pst-time");b.setAttribute("title","Pacific Time - Toggle Local / Pacific Time");initStr=b.innerHTML;for(var c=/(\d{1,2})(:|\.)?(\d{1,2})?(:|\.)?(\d{1,2})?(\s)?(AM|PM)/g,d=String(initStr),e=String(initStr),f=new Date,g=7-f.getTimezoneOffset()/60;null!==(myArray=c.exec(initStr));){var h=myArray[0],l="";i=1;for(iLength=myArray.length;i<
iLength;i++)switch(i){case 1:l+="AM"==myArray[7]?myArray[i]:12!=myArray[i]?parseInt(myArray[i])+12:myArray[i];"PM"==myArray[7]&&12!=myArray[i]&&(myArray[i]=parseInt(myArray[i])+12);break;case 2:l+=":";break;case 3:myArray[i]?l+=myArray[i]:(l+="00",myArray[i]=0);break;case 5:myArray[i]?l+=":"+myArray[i]:myArray[i]=0;break;case 6:l+=" ";break;case 7:l+=myArray[i]}var k=[myArray[1],myArray[3],myArray[5]];k[0]=parseInt(k[0])+g;k=new Date(Date.UTC(f.getFullYear(),f.getMonth(),f.getDay(),parseInt(k[0]),
parseInt(k[1]),parseInt(k[2]),0));k=[k.getHours(),k.getMinutes(),k.getSeconds(),"AM"];12<=k[0]&&(k[3]="PM",k[0]-=12);k=(0==k[0]?"12":k[0])+":"+(10>k[1]?"0"+k[1]:k[1])+(k[2]?":"+(10>k[2]?"0"+k[2]:k[2]):"")+" "+k[3];-1!=d.indexOf(h)&&(d=d.replace(h,'<b><font color="red">'+l+"</font></b>"),e=e.replace(h,'<b><font color="red">'+k+"</font></b>"))}for(c=/((<u>)?(P.T|Pacific(\D+)Time)(<\/u>|<\/font>)?\s?(<b>)?\s?\(GMT\s?-[7,8]\)(<\/b>)?)/g;null!==(myArray=c.exec(d));)d=d.replace(myArray[0],'</font><font color="yellow"><u>Zynga Time</u></font>');
for(;null!==(myArray=c.exec(e));)e=e.replace(myArray[0],'</font><font color="yellow"><u>Local Time</u></font>');c=/on\s(.+)on\s(.+)$/;d.match(c)&&(d=d.replace(RegExp.$2,'<b><font color="red"><u>'+RegExp.$2+"</u></font></b>"));e.match(c)&&(e=e.replace(RegExp.$2,'<b><font color="red"><u>'+RegExp.$2+"</u></font></b>"));a=makeElement("div",a,{id:"local-time",title:"Local Time - Toggle Local / Pacific Time",style:"display:none"});b.innerHTML=d;a.innerHTML=e;$("#declare_war_attention").click(function(){$(this).hasClass("local")?
($(this).removeClass("local"),$("#pst-time").show(),$("#local-time").hide()):($(this).addClass("local"),$("#pst-time").hide(),$("#local-time").show())})}}
function toggleSettings(){updateMastheadMenu();!1===settingsOpen?(destroyByID("apimg"),makeElement("img",document.getElementById("ap_img"),{id:"apimg",src:"http://cdn.playerscripts.co.uk/images/mwap_graphics/32_grey.png"}),isBGPaused=!0,Autoplay.clearTimeout(),Reload.clearTimeout(),settingsOpen=!0,document.getElementById("mwapNewSettings")||mwapNewSettings()):(document.getElementById("mwapNewSettings").innerHTML="",document.getElementById("mwapNewSettings").appendChild(document.createTextNode($("#mwapNewSettings").offset().left+
"|"+$("#mwapNewSettings").offset().top)),$("#mwapNewSettings").remove(),settingsOpen=!1,resetBGVars(),Autoplay.delay=150,Autoplay.start(),autoReload(!1,"toggle new settings"))}
function toggleRX6Widget(a){var b=a+"_content",c="#"+b,d=a+"_settings",e="#"+d;if(document.getElementById(b))document.getElementById(d)&&(document.getElementById(d).innerHTML="",document.getElementById(d).appendChild(document.createTextNode($(e).offset().left+"|"+$(e).offset().top))),$(c).remove();else switch(a){case "aim":addBorkalector();break;case "bork":addBorkavertor();break;case "map":addBorkavatorMap();break;case "list":addBorkavatorSelect();break;case "useditems":showUsedItems();break;case "bucketmanager":click_mwlists_show()}}
function showUsedCallBack(a,b,c,d,e,f,g){document.getElementById("used_content")&&(a=document.getElementById("used_content"),e?(e=document.createElement("div"),e.innerHTML=g.responseText,g=$x('.//div[@class="rob_item_list_user"]',e),a.innerHTML=g?g[1].innerHTML:"showUsedCallBack for "+b+" FAILED : no Used Items List !!!"):a.innerHTML="showUsedCallBack for "+b+" FAILED !!!")}
function showUsedItems(){if(!document.getElementById("used_content")){$("[id*=mw_masthead]").append("<div id='used_content' style='text-align:left;'></div>");var a=document.getElementById("used_content"),b=0,c="",d=xpathFirst('.//li[contains(@class,"tab_on")]//a[contains(text(),"Profile")]',innerPageElt);d&&d.getAttribute("onclick").match(/user=p\|(\d+)/)?b=RegExp.$1:(d=xpathFirst('.//strong[@id="profile_link"]',innerPageElt))&&d.innerHTML.match(/user":"(.+)"/)&&(b=decodeID(RegExp.$1).digitize());
b?(c+="<p>getting info for userMWID: "+b+"</p>",mwap_do_ajax("fight","fight_show_items_used_pop","","&o=p%7C"+b+"&gs=501","",showUsedCallBack)):c+="<p>This widget only works on an opponent's profile page.</p>";a.innerHTML=c;a=RX6_getValue("usedSettings","'center'|80").split("|");$("#used_content").dialog({title:"RX6 Used Items - mwap.me.uk",hide:"fade",show:"blind",close:function(){$("#used_content").remove()},width:650,height:500,zIndex:999999,position:[parseInt(a[0]),parseInt(a[1])],resizable:!1,
beforeclose:function(){window.setTimeout(function(){RX6_setValue("usedSettings",String($("#used_content").offset().left+"|"+$("#used_content").offset().top))},0)}})}}
function gotoMWLink(){var a=decodeURIComponent(document.getElementById("gotoInput").value),b="http://facebook-ca2.mafiawars.zynga.com/mwfb/remote/html_server.php?";a.match(/user":"(.+)"/)?(a=RegExp.$1,a=decodeID(a).digitize(),b+="xw_controller=stats&xw_action=view&xw_city="+city+"&xw_person="+xw_user+"&user=p%7C"+a,document.getElementById("gotoLink").setAttribute("href",b)):a.match(/&user=p\|(\d+)$/)?(a=RegExp.$1.digitize(),b+="xw_controller=stats&xw_action=view&xw_city="+city+"&xw_person="+xw_user+
"&user=p%7C"+a,document.getElementById("gotoLink").setAttribute("href",b)):a.match(/&user=(.+)/)?(a=RegExp.$1,a=decodeID(a).digitize(),b+="xw_controller=stats&xw_action=view&xw_city="+city+"&xw_person="+xw_user+"&user=p%7C"+a,document.getElementById("gotoLink").setAttribute("href",b)):a.match(/"id":"(.+)"/)?(a=RegExp.$1,a=decode64(a),b+="xw_controller=clan&xw_action=view&xw_city="+city+"&xw_person="+xw_user+"&id="+encode64(a)+"&from_red_link=1",document.getElementById("gotoLink").setAttribute("href",
b)):a.match(/&id=(.+)&/)?(a=RegExp.$1,a=decode64(a),b+="xw_controller=clan&xw_action=view&xw_city="+city+"&xw_person="+xw_user+"&id="+encode64(a)+"&from_red_link=1",document.getElementById("gotoLink").setAttribute("href",b)):(alert("Unknown Link. Please be carefull before proceeding. The link will open in a different window/tab"),document.getElementById("gotoLink").setAttribute("target","_blank"),document.getElementById("gotoLink").setAttribute("href",a))}
function addBorkalector(){if(!document.getElementById("aim_content")){$("[id*=mw_masthead]").append("<div id='aim_content' style='text-align:center;'></div>");var a=document.getElementById("aim_content");document.getElementById("gotoInput")||(title="Enter MW Link",id="gotoInput",makeElement("input",a,{type:"text",id:id,title:title,style:"width: 300px;"}).addEventListener("change",gotoMWLink,!1),makeElement("br",a),title="go to MW Link",id="gotoLink",eltA=makeElement("a",a,{id:id,href:"#",alt:title,
title:title,selector:"#inner_page"}),eltA.appendChild(document.createTextNode(title)),a=RX6_getValue("aimSettings","'center'|80").split("|"),$("#aim_content").dialog({title:"RX6 Teleporter - mwap.me.uk",hide:"fade",show:"blind",close:function(){$("#aim_content").remove()},width:350,height:100,zIndex:999999,position:[parseInt(a[0]),parseInt(a[1])],resizable:!1,beforeclose:function(){window.setTimeout(function(){RX6_setValue("aimSettings",String($("#aim_content").offset().left+"|"+$("#aim_content").offset().top))},
0)}}))}}function convertMWLink(){var a,b=decodeURIComponent(document.getElementById("convertInput").value),c=document.getElementById("convertedID");b.match(/user":"(.+)"/)?a=decodeID(RegExp.$1).digitize():b.match(/"id":"(.+)"/)&&(a=decode64(RegExp.$1).digitize());a&&c?c.innerHTML="MW Id: "+a:alert("Invalid MW link.");document.getElementById("convertInput").value=""}
function addBorkavertor(){if(!document.getElementById("bork_content")){$("[id*=mw_masthead]").append("<div id='bork_content' style='text-align:center;'></div>");var a=document.getElementById("bork_content");document.getElementById("convertUserInput")||(title="Enter MW Link",id="convertInput",makeElement("input",a,{type:"text",id:id,title:title,style:"width: 300px;"}),makeElement("br",a),title="Convert MW Link",id="convertLink",eltA=makeElement("a",a,{id:id,href:"#",alt:title,title:title}),eltA.appendChild(document.createTextNode(title)),
eltA.addEventListener("click",convertMWLink,!1),makeElement("br",a),title="MW ID",id="convertedID",eltA=makeElement("span",a,{id:id,alt:title,title:title}).appendChild(document.createTextNode("MW Id: ")),a=RX6_getValue("borkSettings","'center'|80").split("|"),$("#bork_content").dialog({title:"RX6 LinKonvertor - mwap.me.uk",hide:"fade",show:"blind",close:function(){$("#bork_content").remove()},width:350,height:100,zIndex:999999,position:[parseInt(a[0]),parseInt(a[1])],resizable:!1,beforeclose:function(){window.setTimeout(function(){RX6_setValue("borkSettings",
String($("#bork_content").offset().left+"|"+$("#bork_content").offset().top))},0)}}))}}
function addBorkavatorMap(){if(!document.getElementById("map_content")){$("[id*=mw_masthead]").append("<div id='map_content'></div>");var a=document.getElementById("map_content");if(!document.getElementById("mwapSpringMap")){a=makeElement("div",a,{id:"mwapSpringMap",title:"mwapSpringMap",style:"width:290px;padding:10px;"});i=0;for(iLength=cities.length;i<iLength;i++)if(!cities[i][CITY_CLOSED])for(choiceTier=document.createElement("p"),choiceTier.appendChild(document.createTextNode(cities[i][CITY_NAME].toUpperCase())),
a.appendChild(choiceTier),j=0,jLength=missionTabs[i].length;j<jLength;j++){var b=j+1;choiceTier=makeElement("a",a,{title:missionTabs[i][j],style:"border:1px solid;padding:0px 5px 0px 5px;margin:5px;"});choiceTier.text=b;choiceTier.name=i+"|"+b;a.appendChild(choiceTier);choiceTier.addEventListener("click",mwapSpringMap,!1)}a=RX6_getValue("mapSettings","'center'|80").split("|");$("#map_content").dialog({title:"RX6 District Map - mwap.me.uk",hide:"fade",show:"blind",close:function(){$("#map_content").remove()},
width:325,zIndex:999999,position:[parseInt(a[0]),parseInt(a[1])],resizable:!1,beforeclose:function(){window.setTimeout(function(){RX6_setValue("mapSettings",String($("#map_content").offset().left+"|"+$("#map_content").offset().top))},0)}})}}}
function addBorkavatorSelect(){if(!document.getElementById("list_content")){$("[id*=mw_masthead]").append("<div id='list_content'></div>");var a=document.getElementById("list_content");if(!document.getElementById("mwapSpringList")){a=makeElement("select",a,{id:"mwapSpringList",title:"mwapSpringList",style:"width:230px;"});choiceTier=document.createElement("option");choiceTier.text="RX6 MWAP Borkavator List";choiceTier.value="";a.appendChild(choiceTier);i=0;for(iLength=cities.length;i<iLength;i++)if(!cities[i][CITY_CLOSED])for(choiceTier=
document.createElement("optgroup"),choiceTier.label=cities[i][CITY_NAME].toUpperCase(),choiceTier.className="ap_optgroup1",a.appendChild(choiceTier),j=0,jLength=missionTabs[i].length;j<jLength;j++){var b=j+1;choiceTier=document.createElement("option");choiceTier.text=missionTabs[i][j];choiceTier.value=i+"|"+b;a.appendChild(choiceTier)}a.addEventListener("change",mwapSpringList,!1);a=RX6_getValue("listSettings","'center'|80").split("|");$("#list_content").dialog({title:"RX6 District List - mwap.me.uk",
hide:"fade",show:"blind",close:function(){$("#list_content").remove()},width:250,height:85,zIndex:999999,position:[parseInt(a[0]),parseInt(a[1])],resizable:!1,beforeclose:function(){window.setTimeout(function(){RX6_setValue("listSettings",String($("#list_content").offset().left+"|"+$("#list_content").offset().top))},0)}})}}}function mwapSpringList(){var a=document.getElementById("mwapSpringList");mwapJump(a.value);a.selectedIndex=0}function mwapSpringMap(){mwapJump(this.name)}
function mwapJump(a){a=a.split("|");var b=a[0],c=parseInt(a[1]);a=c-1;if(isNewCity(b)){var d=missions.filter(function(a,d,g){return g[d][MISSION_CITY]==b&&g[d][MISSION_TAB]==c});d[0][MISSION_TABPATH]&&(c=d[0][MISSION_TABPATH])}if(d=makeElement("a",null,{onclick:'return do_ajax("inner_page","remote/html_server.php?xw_controller=travel&xw_action=travel&xw_city='+city+"&from=job&zone=1&destination="+cities[b][CITY_NUMBER]+"&tab="+c+'",1,1 ,0,0);return false;'}))return clickElement(d),addToLog("info Icon",
"Springboard used to go to "+cities[b][CITY_NAME]+" - "+missionTabs[b][a]),!0}
function mwapNewSettings(){function a(a){var b=$x('.//div[@class="tabcontent"]');if(b&&b.length)for(i=0,iLength=b.length;i<iLength;i++)b[i].id==a?(b[i].style.display="block",$("#currentTab").html(""),$("#currentTab").append(b[i].id)):b[i].style.display="none"}$.fx.speeds._default=700;document.getElementById("currentTab")||$("[id*=mw_masthead]").append("<div id='currentTab' style='display:none;'></div>");document.getElementById("mwapNewSettings")||$("[id*=mw_masthead]").append("<div id='mwapNewSettings'></div>");
var b=document.getElementById("mwapNewSettings");$("#mwapNewSettings").dialog({title:"Dr. Squirrel's RX6 Command Center (mwap.me.uk - Help? mwap.me.uk/rx6blog)",hide:"drop",show:"fade",buttons:[{text:"Cash",click:function(){a("cashTab");$("span.ui-dialog-title").text("RX6 Cash & Properties Settings : mwap.me.uk/rx6blog")}},{text:"Health",click:function(){a("healTab");$("span.ui-dialog-title").text("RX6 Health Settings : mwap.me.uk : Help? mwap.me.uk/rx6blog")}},{text:"Stamina",click:function(){a("staminaTab");
$("span.ui-dialog-title").text("RX6 Stamina Settings : mwap.me.uk : Help? mwap.me.uk/rx6blog")}},{text:"Energy",click:function(){a("energyTab");$("span.ui-dialog-title").text("RX6 Energy Settings : mwap.me.uk : Help? mwap.me.uk/rx6blog")}},{text:"AutoStat",click:function(){a("autostatTab");$("span.ui-dialog-title").text("RX6 AutoStat Settings : mwap.me.uk : Help? mwap.me.uk/rx6blog")}},{text:"Family",click:function(){a("familyTab");$("span.ui-dialog-title").text("RX6 Family & Operations Settings : mwap.me.uk : Help? mwap.me.uk/rx6blog")}},
{text:"Mafia",click:function(){a("mafiaTab");$("span.ui-dialog-title").text("RX6 Mafia Settings : mwap.me.uk : Help? mwap.me.uk/rx6blog")}},{text:"Display",click:function(){a("displayTab");$("span.ui-dialog-title").text("RX6 Display Settings : mwap.me.uk : Help? mwap.me.uk/rx6blog")}},{text:"General",click:function(){a("generalTab");$("span.ui-dialog-title").text("Dr. Squirrel's General Settings : mwap.me.uk : Help? mwap.me.uk/rx6blog")}},{text:"Save",addClass:function(){$(this).addClass("RX6-ui-state-save")},
click:function(){window.setTimeout(function(){saveSettings(!0)},0)}},{text:"Close",addClass:function(){$(this).addClass("RX6-ui-state-close")},click:function(){toggleSettings()}}],close:function(){toggleSettings()},minWidth:905,height:650,zIndex:999999,position:["center",80]});var c=createGeneralTab();b.appendChild(c);c=createDisplayTab();b.appendChild(c);c=createMafiaTab();b.appendChild(c);c=createFamilyTab();b.appendChild(c);c=createAutostatTab();b.appendChild(c);c=createEnergyTab();b.appendChild(c);
c=createStaminaTab();b.appendChild(c);c=createHealTab();b.appendChild(c);c=createCashTab();b.appendChild(c);var d;document.getElementById("currentTab")&&(d=document.getElementById("currentTab").innerHTML);d||(d=RX6_getValue("currentTab","generalTab"));a(d)}
function customizeBankStats(){setListenStats(!1);var a=xpathFirst('.//div[@id="game_stats"]//div[@id="cash_stats_'+cities[city][CITY_ALIAS]+'"]/h4/a[@id="mwap_bank"]',statsrowElt),b=xpathFirst('.//div[@id="game_stats"]//div[@id="cash_stats_'+cities[city][CITY_ALIAS]+'"]/h4/text()',statsrowElt);b&&!a&&(a=makeElement("a",null,{id:"mwap_bank",title:"Click to bank immediately."}),b.parentNode.insertBefore(a,b),a.appendChild(b),a.addEventListener("click",bgBanking,!1));setListenStats(!0)}
function customizeEnergyStats(){setListenStats(!1);var a=xpathFirst('./div[@class="mw_header"]//div[@class="mid_row_text energy_text_bg" and contains(text(),"ENERGY")]',statsrowElt);a||(a=xpathFirst('.//div[@id="game_stats"]//h4[@class="energy" and contains(text(),"Energy")]',statsrowElt));a||(a=xpathFirst('.//div[@id="game_stats"]//span[@class="stat_title" and contains(text(),"Energy")]',statsrowElt));if(a){var b=document.getElementById("mwap_nrg");b||(isGMChecked("autoMission")?(b="Spend Energy ON.",
a.style.color="#33FF00"):(b="Spend Energy OFF.",a.style.color="#FF0000"),selectedTierValue=RX6_getValue("selectTier","0.0").split("."),masteryCity=parseInt(selectedTierValue[0]),masteryTier=parseInt(selectedTierValue[1]),b=0!=masteryCity||0!=masteryTier&&void 0!=masteryTier?b+(" Mastering-"+cities[masteryCity][CITY_NAME]+",District/Region-"+masteryTier+" "+missionTabs[masteryCity][masteryTier-1]):b+" Tier Mastery Turned OFF !",a.style.textDecoration="underline",b=makeElement("a",null,{id:"mwap_nrg",
title:b}),a.parentNode.insertBefore(b,a),b.appendChild(a),a.style.textDecoration=energy==maxEnergy?"blink":"none",b.addEventListener("click",toggleNrgSpend,!1))}setListenStats(!0)}
function customizeStaminaStats(){setListenStats(!1);var a=document.getElementById("mwap_stam"),b=xpathFirst('./div[@class="mw_header"]//div[@class="mid_row_text stamina_text_bg" and contains(text(),"STAMINA")]',statsrowElt);b||(b=xpathFirst('.//div[@id="game_stats"]//h4[contains(text(),"Stamina")]',statsrowElt));b||(b=xpathFirst('.//div[@id="game_stats"]//span[@class="stat_title" and contains(text(),"Stamina")]',statsrowElt));b&&!a&&(isGMChecked("staminaSpend")?(a="Spend Stamina ON. ",b.style.color=
"#33FF00"):(a="Spend Stamina OFF. ",b.style.color="#FF0000"),a+="Minimum Stamina for auto-healing set at "+RX6_getValue("stamina_min_heal")+" points. ",a+="Stamina Spend Mode: "+staminaSpendChoices[getStaminaMode()],b.style.textDecoration="underline",a=makeElement("a",null,{id:"mwap_stam",title:a}),b.parentNode.insertBefore(a,b),a.appendChild(b),a.addEventListener("click",toggleStamSpend,!1));staminaElt.style.textDecoration=stamina==maxStamina?"blink":"none";setListenStats(!0)}
function customizeHealthStats(){setListenStats(!1);var a=xpathFirst('.//div[@id="game_stats"]//a[@class="heal_link" or @class="heal_link vt-p"]',statsrowElt),b=document.getElementById("mwap_heal"),c=xpathFirst('./div[@class="mw_header"]//div[@class="mid_row_text health_text_bg" and contains(text(),"HEALTH")]',statsrowElt);c||(c=xpathFirst('.//div[@id="game_stats"]//h4[@class="health" and contains(text(),"Health")]',statsrowElt));c||(c=xpathFirst('.//div[@id="game_stats"]//span[@class="stat_title" and contains(text(),"Health")]',
statsrowElt));if(c){if(!b){c.style.color="#FF0000";c.style.textDecoration="underline";c.style.display="inline-block";b=makeElement("a",null,{id:"mwap_heal",title:"Click to heal immediately."});c.parentNode.insertBefore(b,c);b.appendChild(c);b.style.textDecoration="none";var d=document.getElementById("mwap_toggleheal");d||(newLinkTitle=isGMChecked("autoHeal")?getStaminaMode()==STAMINA_HOW_FIGHTROB_BG?"autoHeal checked BUT OVERRULED - healing in "+locations[RX6_getValue("healLocation")]+" when health falls below "+
RX6_getValue("healthLevel")+".":"autoHeal checked - healing in "+locations[RX6_getValue("healLocation")]+" when health falls below "+RX6_getValue("healthLevel")+".":"autoHeal unchecked",d=makeElement("a",null,{id:"mwap_toggleheal",title:newLinkTitle}),isGMChecked("autoHeal")?getStaminaMode()==STAMINA_HOW_FIGHTROB_BG?d.innerHTML=healOnHoldIcon:d.innerHTML=healOnIcon:d.innerHTML=healOffIcon,d.style.padding="5px 0px 0px 8px",d.style.position="absolute",healParent=b.parentNode,healParent.insertBefore(d,
healParent.childNodes[2]),d.addEventListener("click",toggleHeal,!1))}d=/transparent url/i.test(c.getAttribute("style"));20>health&&isGMChecked("hideInHospital")?d||(c.style.background="transparent url("+stripURI(hideIcon)+") no-repeat scroll 0 50%",c.title="Currently hiding in the hospital. Click to heal immediately."):d&&(c.style.background="",c.title="Click to heal immediately.");a&&b.addEventListener("click",autoHeal,!1)}healthElt.style.textDecoration=19<health&&29>health?"blink":"none";isGMChecked("forceHealOpt5")&&
20>health&&!0!=RX6_getValue("healWaitStarted")&&(setGMTime("healWaitTime","05:00"),RX6_setValue("healWaitStarted",!0));setListenStats(!0)}function customizeStats(){customizeBankStats();customizeEnergyStats();customizeStaminaStats();customizeHealthStats()}
function toggleHeal(){document.getElementById("mwap_toggleheal")&&(isGMChecked("autoHeal")?(RX6_setValue("autoHeal",0),document.getElementById("mwap_toggleheal").innerHTML=healOffIcon,document.getElementById("mwap_toggleheal").title="autoHeal unchecked",addToLog("healOffIcon Icon","autoHeal turned OFF by User")):(RX6_setValue("autoHeal","checked"),getStaminaMode()==STAMINA_HOW_FIGHTROB_BG?(document.getElementById("mwap_toggleheal").innerHTML=healOnHoldIcon,document.getElementById("mwap_toggleheal").title=
"autoHeal checked BUT OVERRULED - healing in "+locations[RX6_getValue("healLocation")]+" when health falls below "+RX6_getValue("healthLevel")+".",addToLog("healOnHoldIcon Icon","autoHeal turned ON by User,but overruled")):(document.getElementById("mwap_toggleheal").innerHTML=healOnIcon,document.getElementById("mwap_toggleheal").title="autoHeal checked - healing in "+locations[RX6_getValue("healLocation")]+" when health falls below "+RX6_getValue("healthLevel")+".",addToLog("healOnIcon Icon","autoHeal turned ON by User"))))}
function toggleNrgSpend(){isGMChecked("autoMission")?(RX6_setValue("autoMission",0),addToLog("info Icon","Energy Spend turned OFF by User")):(RX6_setValue("autoMission","checked"),addToLog("info Icon","Energy turned ON by User"));update_nrg_stam()}
function toggleStamSpend(){isGMChecked("staminaSpend")?(RX6_setValue("staminaSpend",0),addToLog("info Icon","staminaSpend turned OFF by User")):(RX6_setValue("staminaSpend","checked"),addToLog("info Icon","staminaSpend turned ON by User"));update_nrg_stam()}function showSubMenu(){var a=xpathFirst('.//div[@id="'+this.id+'_sub"]');a&&"block"!=a.style.display&&(a.style.display="block")}
function hideSubMenu(){var a=xpathFirst('.//div[@id="'+this.id+'_sub"]');a&&"none"!=a.style.display&&(a.style.display="none")}
function pimpProgression(){try{var a=xpathFirst('.//li[@id="clan_xp_icon"]//div[contains(@onclick,"toggleClanXp")]');a&&!a.hasAttribute("rx6")&&(a.setAttribute("rx6","done"),a.addEventListener("click",pimpProgression,!1));var b,c,d=$x('.//div[@id="clan_xp_meter"]//li[contains(@class,"complete")]');if(d&&d.length)for(i=0,iLength=d.length;i<iLength;i++)if(b=xpathFirst('.//a[contains(@href,"xw_action=collectProgress") and contains(.,"Collect")]',d[i]),c=xpathFirst('.//div[contains(@class,"mastery_wrapper")]//span[contains(@class,"star")]',
d[i]),b&&(!b.hasAttribute("rx6")||"star"==b.getAttribute("rx6"))&&c){var e=c.getAttribute("class").replace("_star","");b.innerHTML='<span><span title="RX6: Collect '+e.capitalize()+'">Collect<span class="'+e+'_star"></span></span></span>';"star"!=b.getAttribute("rx6")&&b.addEventListener("click",pimpButton=function(){this.setAttribute("rx6","star");this.removeEventListener("click",arguments.callee.caller);window.setTimeout(pimpProgression,5E3);window.setTimeout(pimpProgression,1E4)},!1);b.setAttribute("rx6",
"done")}}catch(f){colorDEBUG("pimp:"+f)}}
function customizeMenu(){localiseMessage();if(isGMChecked("hideOtherScripts"))try{var a=$x('.//div[contains(@id,"spock") or contains(@class,"spock") or contains(@id,"unlock_toolbar") or contains(@id,"Unlocked")]');if(a&&a.length)for(h=0,iLength=a.length;h<iLength;h++)a[h].style.display="none",destroyByID(a[h].id)}catch(b){colorDEBUG("shm error: "+b)}pimpProgression();if(!isGMChecked("hideSubMenuTabs"))try{if(!xpathFirst('.//div[@id="mwapSubMenu"]')){var a={nav_link_home_unlock:[{name:"Home",link:"index&xw_action=view"},
{name:"RX6 MWAP Home",link:"http://mwap.me.uk/",target:"_blank"},{name:"RX6 Sign Up Membership",link:"http://mwap.me.uk/sign-up/register.html",target:"_top"},{name:"RX6 PRO PLAY",link:"http://mwap.me.uk/mwap-rx6.html",target:"_top"},{name:"RX6 FREE PLAY",link:"http://mwap.me.uk/mafiawarsautoplayer.html",target:"_top"},{name:"RX6 Support Forum",link:"http://mwap.me.uk/support.html",target:"_blank"},{name:"RX6 My Account",link:"http://mwap.me.uk/my-account.html",target:"_blank"},{name:"RX6 Log Updates",
link:"http://mwap.me.uk/rx6-log-releases.html",target:"_blank"},{name:"RX6 Wiki",link:"http://mwap.me.uk/home/ps-mwap-wiki.html",target:"_blank"}],nav_link_fight:[{name:"Fighters",link:"fight&xw_action=view"},{name:"Rivals",link:"fight&xw_action=view&tab=1"},{name:"Robbing",link:"robbing&xw_action=view"},{name:"Declare War",link:"war&xw_action=view"},{name:"Hitlist",link:"hitlist&xw_action=view"}],nav_link_properties_out:[{name:"Global",link:"propertyV2&xw_action=view&default_tab="},{name:"City",
link:"propertyV2&xw_action=view&default_tab=local"}],nav_link_inventory:[{name:"Items",link:"inventory&xw_action=view"},{name:"City Store",link:"item&xw_action=view"},{name:"Collections",link:"collection&xw_action=view"},{name:"-> Brazil Collections",link:"collection&xw_action=view&selected_city=7&filter_col=1"},{name:"-> Chicago Collections",link:"collection&xw_action=view&selected_city=8&filter_col=1"},{name:"-> London Collections",link:"collection&xw_action=view&selected_city=9&filter_col=1"},
{name:"-> SA Collections",link:"collection&xw_action=view&selected_city=10&filter_col=1"},{name:"Gifting",link:"gift&xw_action=view"},{name:"Boosts",link:"expendable&xw_action=view"}],nav_link_events:[{name:"Bossfights",link:"Epicclanboss&xw_action=list_view"},{name:"-> The Raven",link:"socialmission&xw_action=operations_view"},{name:"My Ops",link:"socialmission&xw_action=view"},{name:"My Mafia Ops",link:"socialmission&xw_action=view&type=helper"}],nav_link_godfather:[],nav_link_profile:[{name:"Profile",
link:"stats&xw_action=view"},{name:"Items",link:"inventory&xw_action=view"},{name:"Achievements",link:"achievement&xw_action=view"},{name:"Daily Fix",link:"DailyFix&xw_action=view"}],nav_link_mafia:[{name:"Family",link:"clan&xw_action=view"},{name:"Roster",link:"clan&xw_action=view&tab=3"},{name:"Perks",link:"clan&xw_action=view&tab=2"},{name:"Battle",link:"clan&xw_action=view&tab=4"},{name:"Properties",link:"clan&xw_action=view&tab=5"},{name:"Recruit",link:"recruit&xw_action=view"},{name:"My Mafia",
link:"group&xw_action=view"},{name:"Free Gifts",link:"freegifts&xw_action=view"}],nav_link_jobs_unlock:[]},c;for(c in a){var d=xpathFirst('.//div[@id="'+c+'"]');if(d){var e=d.offsetLeft+5,f=d.offsetTop+35,g=makeElement("div",d,{id:c+"_sub",style:"left:"+e+"px;top:"+f+"px !important;"});d.addEventListener("mouseover",showSubMenu,!1);d.addEventListener("mouseout",hideSubMenu,!1);for(var h=0;h<a[c].length;h++){var l;l=a[c][h].target?makeElement("a",g,{href:a[c][h].link,style:"font-size:11px;max-width:150px;padding:2px;",
target:a[c][h].target}):makeElement("a",g,{title:"RX6: "+a[c][h].name,href:"#",style:"font-size:11px;max-width:150px;padding:2px;",onclick:'return do_ajax("inner_page","remote/html_server.php?xw_controller='+a[c][h].link+'",1,1,0,0);return false;'});makeElement("span",l).appendChild(document.createTextNode(a[c][h].name));makeElement("br",l)}g.addEventListener("mouseover",showSubMenu,!1)}}makeElement("div",document.getElementById("mw_navigation"),{id:"mwapSubMenu",style:"display:none;"})}var k=xpathFirst('.//div[@id="nav_link_jobs_unlock_sub"]');
k||(d=document.getElementById("nav_link_jobs_unlock"),e=d.offsetLeft+5,f=d.offsetTop+25,k=makeElement("div",d,{id:"nav_link_jobs_unlock_sub",style:"left:"+e+"px;top:"+f+"px !important;"}),d.addEventListener("mouseover",showSubMenu,!1),d.addEventListener("mouseout",hideSubMenu,!1),oldMenuCity="");if(k&&city!=oldMenuCity){k.innerHTML="";j=0;for(jLength=missionTabs[city].length;j<jLength;j++){var q=j+1;if(isNewCity(city)){var r=missions.filter(function(a,b,c){return c[b][MISSION_CITY]==city&&c[b][MISSION_TAB]==
q});r.length&&r[0][MISSION_TABPATH]&&(q=r[0][MISSION_TABPATH])}l=makeElement("a",k,{title:"RX6: "+missionTabs[city][j],href:"#",style:"font-size:11px;width:150px !important;padding:2px;",onclick:'return do_ajax("inner_page","remote/html_server.php?xw_controller=travel&xw_action=travel&xw_city='+city+"&from=job&zone=1&destination="+cities[city][CITY_NUMBER]+"&tab="+q+'",1,1 ,0,0);return false;'});makeElement("span",l).appendChild(document.createTextNode(missionTabs[city][j]));makeElement("br",l)}oldMenuCity=
city}}catch(p){colorDEBUG("menuError: "+p)}}
function customizeHome(){var a=document.getElementById("snapi_zbar");a&&a.parentNode.parentNode.removeChild(a.parentNode);(a=document.getElementById("zbar"))&&a.parentNode.parentNode.removeChild(a.parentNode);if(a=document.getElementById("mw_like_button"))a.style.display="none";odiv=xpathFirst('.//iframe[@name="mafiawars_zbar"]');a&&(a.style.display="none",a.parentNode&&a.parentNode.removeChild(a));var b=$x('.//div[contains(@id,"cpa") and contains(@id,"banner")]');for(i=0;i<b.length;i++)if(a=b[i])a.style.display=
"none",a.parentNode&&a.parentNode.removeChild(a);if(!onHome())return!1;if(!running){if(gvar.isGreaseMonkey&&unsafeWindow.MW){try{if(unsafeWindow.MW.PropertiesV2HPMod&&"undefined"==typeof unsafeWindow.MW.PropertiesV2HPMod.RX6CollectPopup){unsafeWindow.MW.PropertiesV2HPMod.addLineItem=function(a){return'<div class="" title="RX6 Improved Collection">'+a+"</div>"};unsafeWindow.MW.PropertiesV2HPMod.RX6CollectPopup=function(a,b){$(b).hide();var c=JSON.parse(a.data),d=unsafeWindow.MW.PropertiesV2HPMod.addLineItem("RX6 Improved Collection");
c.CASH&&0!=c.CASH&&(d+=unsafeWindow.MW.PropertiesV2HPMod.addLineItem("Cash: "+c.CASH));c.STAMINA&&0<c.STAMINA&&(d+=unsafeWindow.MW.PropertiesV2HPMod.addLineItem("Stamina: "+c.STAMINA));c.ENERGY&&0<c.ENERGY&&(d+=unsafeWindow.MW.PropertiesV2HPMod.addLineItem("Energy: "+c.ENERGY));c.SPECIALREWARD_NAME&&""!=c.SPECIALREWARD_NAME&&(d+=unsafeWindow.MW.PropertiesV2HPMod.addLineItem("Special Reward: "+c.SPECIALREWARD_NAME));""!=d?$("#propv2-confirmation-other").html(d):$("#propv2-confirmation-other").html("");
$("#propv2-confirmation-craft").parent().hide();$("#propv2-hp-confirmation").height(250).show()};var c=$("#propv2-collectall-7").find("a:first");c&&c.attr("href")&&(c.attr("callback","MW.PropertiesV2HPMod.RX6CollectPopup").attr("href",c.attr("href").replace("&js=1&version=v2","")),c.find("span:first").find("span:first").html("RX6 Collect"));$("#propv2-coll-7-5,#propv2-coll-7-6,#propv2-coll-7-7").each(function(){(c=$(this).find("a"))&&c.attr("href")&&(c.attr("callback","MW.PropertiesV2HPMod.RX6CollectPopup").attr("href",
c.attr("href").replace("&js=1&version=v2","")),c.html("RX6 Collect"))})}else colorDEBUG("unsafeWindow.MW.PropertiesV2HPMod error")}catch(d){DEBUG("RX6 Collect Error:"+d)}unsafeWindow.FeaturedEventsModule.Carousel.isPaused||$("#empire_featured_roundel_playpause").trigger("click");unsafeWindow.FeaturedEventsModule.Carousel.jumpPrevious=function(){var a=unsafeWindow.FeaturedEventsModule.Carousel.current_featured-1;0==a&&(a=unsafeWindow.FeaturedEventsModule.Carousel.maxRoundels);unsafeWindow.FeaturedEventsModule.Carousel.changeFeatured(a,
!0)};unsafeWindow.FeaturedEventsModule.Carousel.jumpNext=function(){var a=unsafeWindow.FeaturedEventsModule.Carousel.current_featured+1;a>unsafeWindow.FeaturedEventsModule.Carousel.maxRoundels&&(a=1);unsafeWindow.FeaturedEventsModule.Carousel.changeFeatured(a,!0)};if((a=$x('.//td[contains(@id,"empire_featured_roundel")]'))&&1<a.length)for(i=0,iLength=a.length;i<iLength;i++)b=a[i],0==i&&(iRoundelParent=b.parentNode,e=makeElement("td",null,{id:"prevCarousel","class":"empire_featured_roundel",title:"previous event",
style:"font-weight:bold"}),iRoundelParent.insertBefore(e,iRoundelParent.firstChild),e.appendChild(document.createTextNode(" << ")),$("#prevCarousel").bind("click",unsafeWindow.FeaturedEventsModule.Carousel.jumpPrevious),e=makeElement("td",iRoundelParent,{id:"nextCarousel","class":"empire_featured_roundel",title:"next event",style:"font-weight:bold"}).appendChild(document.createTextNode(">> ")),$("#nextCarousel").bind("click",unsafeWindow.FeaturedEventsModule.Carousel.jumpNext)),e=b.id.digitize(),
(e=xpathFirst('.//div[@id="empire_featured_'+e+'"]//div[contains(@id,"Module")]'))&&!b.hasAttribute("title")&&b.setAttribute("title",e.id)}if(!xpathFirst('//div[@id="marketInfo"]')){if(a=xpathFirst('.//div[@id="MainModule"]',innerPageElt))a.style.height="";if(a=xpathFirst('.//div[@class="empire_main_module"]',innerPageElt)){var a=createAjaxPage(!1,"marketplace",a),e=makeElement("a",null,{onclick:'return do_ajax("'+a+'","'+SCRIPT.controller+"marketplace"+SCRIPT.action+'marketplace_category&category=8",1,1,0,0);return false;'});
clickElement(e)}}}return!0}
function getPlayerStats(){var a=xpathFirst(".//div/table",innerPageElt);a&&(DEBUG("Fetching stats from profile page"),isValidElt(xpathFirst('.//tr[contains(.,"Attack:")]',a)).match(/(\d+)/)?(curAttack=parseInt(RegExp.$1),RX6_setValue("curAttack",curAttack)):DEBUG("Could not read attack stats"),isValidElt(xpathFirst('.//tr[contains(.,"Defense:")]',a)).match(/(\d+)/)?(curDefense=parseInt(RegExp.$1),RX6_setValue("curDefense",curDefense)):DEBUG("Could not read defense stats"),isUndefined(curAttack)||
isUndefined(curDefense)?addToLog("info icon","Current status attributes cannot be detected."):DEBUG("Current Stats (Attack: "+curAttack+"-  Defense: "+curDefense+") saved."))}
function getPlayerEquip(){if(onFightTab()||onInventoryTab()||onLootTab()){var a=xpathFirst('.//div[@id="mafia_attack_strength"]',innerPageElt);if(a){prevAttackEquip=curAttackEquip;a.innerHTML.untag().match(/(.+)\(/)&&(curAttackEquip=parseInt(RegExp.$1.digitize()));var b=xpathFirst('.//span[@title="Family Property Bonus"]',a);b||(b=xpathFirst('.//span[@title="Other Bonuses"]',a));b&&(curAttackEquip+=parseInt(b.innerHTML.digitize()));RX6_setValue("curAttackEquip",curAttackEquip)}if(a=xpathFirst('.//div[@id="mafia_defense_strength"]',
innerPageElt))prevDefenseEquip=curDefenseEquip,a.innerHTML.untag().match(/(.+)\(/)&&(curDefenseEquip=parseInt(RegExp.$1.digitize())),(b=xpathFirst('.//span[@title="Family Property Bonus"]',a))||(b=xpathFirst('.//span[@title="Other Bonuses"]',a)),b&&(curDefenseEquip+=parseInt(b.innerHTML.digitize())),RX6_setValue("curDefenseEquip",curDefenseEquip);(isUndefined(curAttackEquip)||isUndefined(curDefenseEquip))&&DEBUG("Current equipment attributes cannot be detected.")}}
function customizeProfile(){var a=xpathFirst('.//div[@id="clan_main"]/strong');if(a){var b="";decodeURIComponent(a.innerHTML.untag()).match(/"id":"(.+)"/)&&(b=decodeID(RegExp.$1).digitize());b&&(a=xpathFirst('.//div[@id="clan_header"]/h3'),makeElement("span",a,{style:"float:right"}).appendChild(document.createTextNode(" (MW Clan ID: "+b+")")))}if(!xpathFirst('.//td[@class="stats_left"]',innerPageElt))return!1;getPlayerStats();this.buildAnchor=function(a){var b={};b.href=a.URLSegment?"http://mwfb.zynga.com/mwfb/remote/html_server.php?"+
a.URLSegment:a.href?a.href:"#";!a.clickEvent&&a.URLSegment&&(b.onclick="return do_ajax('inner_page','/remote/html_server.php?"+a.URLSegment+"',1,1,0,0);return false;");a.id&&(b.id=a.id);b=makeElement("a",c,b);a.AnchorText&&b.appendChild(document.createTextNode(a.AnchorText));a.clickEvent&&b.addEventListener("click",a.clickEvent,!1);return b};var c=xpathFirst('.//a[contains(.,"Sucker Punch")]/..',innerPageElt);if(c&&(b=xpathFirst('.//li[contains(@class,"tab_on")]//a[contains(text(),"Profile")]',innerPageElt))){var d,
e,f,g;b.getAttribute("onclick").match(/tmp=([\d,a-z]+)&cb=([\d,a-z]+)&user=p\|(\d+)/)&&(f="tmp="+RegExp.$1+"&",g="cb="+RegExp.$2+"&",d="p|"+RegExp.$3);!d&&b.getAttribute("onclick").match(/user=p\|(\d+)/)&&(d="p|"+RegExp.$1);a=innerPageElt.innerHMTL;if(m=/xw_controller=robbing.*?target=([0-9]+)/.exec(a))e=m[1];else if(m=/xw_controller=stats.*?user=([0-9]+)/.exec(a))e=m[1];else if(m=/xw_action=gift_wishlist.*?user=([0-9]+)/.exec(a))e=m[1];else if(m=/q([0-9]+)_(\d+)\.jpg/.exec(a))e=m[1];else if(m=/([0-9]+)_(\d+)\_q.jpg/.exec(a))e=
m[1];else if(1<document.getElementsByClassName("fightres_image").length)e=/(\d+)_(\d+)_q.jpg/.exec(document.getElementsByClassName("fightres_image")[1].innerHTML)[1];else if(a="",document.getElementById("mainDiv")&&(a=document.getElementById("mainDiv").innerHTML),(m=/user%2522.*?%2522([0-9A-Za-z%]+)%2522/.exec(a))||(m=/user%22.*?%22([0-9A-Za-z%]+)%22/.exec(a)))e=atob(m[1].replace(/%253D/g,"=").replace(/%3D/g,"="));else if(document.getElementById("MainModule")&&(a=document.getElementById("MainModule").innerHTML),
(m=/user%2522.*?%2522([0-9A-Za-z%]+)%2522/.exec(a))||(m=/user%22.*?%22([0-9A-Za-z%]+)%22/.exec(a)))e=atob(m[1].replace(/%253D/g,"=").replace(/%3D/g,"="));!f&&b.getAttribute("onclick").match(/tmp=([\d,a-z]+)&/)&&(f="tmp="+RegExp.$1+"&");!g&&b.getAttribute("onclick").match(/cb=([\d,a-z]+)&/)&&(g="cb="+RegExp.$2+"&");a="Mafia Wars ID: "+d+" | Facebook ID: "+e;if(b=xpathFirst('.//div[@class="stats_title_text"]//a[contains(@href,"from_red_link")]',innerPageElt)){var h=b.innerHTML.untag().trim();b.href.match(/&id=(.+)&/)&&
(a+=" | Family ID ("+h+"): "+decodeID(RegExp.$1).digitize())}DEBUG(a);b=d.replace("p|","");h=xpathFirst('.//a[contains(.,"Remove from Mafia")]',c);if(!running&&!h){var l=xpathFirst('./div[@class="title stats_title"]',innerPageElt);l&&l.setAttribute("style","background: black;");var l=createAjaxPage(!1,"icecheck profile",l),k=xpathFirst('.//a[contains(.,"Add to Hitlist")]',innerPageElt),q=makeElement("a",null,null),k=k.getAttribute("onclick"),k=k.replace("inner_page",l);q.setAttribute("onclick",k);
clickElement(q)}if(document.getElementById("where_are_my_links"))return!0;document.getElementById("copy_container")&&(document.getElementById("copy_container").style.display="none");if(l=xpathFirst('.//a[contains(.,"Let then Get")]',innerPageElt))l.innerHTML="Ask Mafia to Attack";l=!1;makeElement("br",c);makeElement("span",c).appendChild(document.createTextNode("RX6 Info"));makeElement("br",c);makeElement("span",c).appendChild(document.createTextNode(a));makeElement("br",c);makeElement("br",c);makeElement("span",
c).appendChild(document.createTextNode("RX6 Links"));makeElement("br",c);makeElement("a",c,{id:"where_are_my_links",href:'javascript:alert("Due to the way Mafia Wars links to Facebook there are times where RX6 MWAP cannot find the Facebook profile ID. In those situations RX6 MWAP will not display buttons that require that ID. You can make the Facebook ID available by refreshing the profile page.");'}).appendChild(document.createTextNode("Where are my links?"));c.appendChild(document.createTextNode(" | "));
makeElement("a",c,{href:"http://facebook.mafiawars.com/mwfb/remote/html_server.php?xw_controller=stats&xw_action=view&xw_city=1&user="+d}).appendChild(document.createTextNode("Refresh this profile!"));l=!0;e&&(l&&c.appendChild(document.createTextNode(" | ")),makeElement("a",c,{href:"http://www.facebook.com/profile.php?id="+e,target:"_blank"}).appendChild(document.createTextNode("Facebook Profile")),c.appendChild(document.createTextNode(" | ")),makeElement("a",c,{href:"http://www.facebook.com/addfriend.php?id="+
e,target:"_blank"}).appendChild(document.createTextNode("Add as Friend")),5<RX6_getValue("MWLists_BucketId","").length&&1<RX6_getValue("MWLists_Passcode","").length&&(c.appendChild(document.createTextNode(" | ")),this.buildAnchor({AnchorText:"Add to Bucket",id:e,title:"In the settings box,under the stamina tab\nIf you have a bucket and passcode selected,this will add the person to the bucket",clickEvent:clickBucketAdd}),c.appendChild(document.createTextNode(" | ")),this.buildAnchor({AnchorText:"Remove from Bucket",
id:e,title:"In the settings box,under the stamina tab\nIf you have a bucket and passcode selected,this will delete the person from the bucket",clickEvent:clickBucketDel})),l=!0);h&&(l&&c.appendChild(document.createTextNode(" | ")),this.buildAnchor({AnchorText:"Promote",URLSegment:"xw_controller=group&xw_action=view&xw_city="+(city+1)+"&"+f+g+"promote=yes&pid="+d}),l=!0);l&&makeElement("br",c,{});l=!1;h&&(d=-1!=getSavedList("autoWarTargetList").indexOf(b),this.buildAnchor({AnchorText:d?"Remove from War List":
"Add to AutoWar List",id:b,title:"In the settings box,under the mafia tab\nIf you have selected war friends from a list\nupdates the friends ids in the box",clickEvent:d?clickWarListRemove:clickWarListAdd}),l=!0);l&&c.appendChild(document.createTextNode(" | "));d=-1!=getSavedList("pautoHitOpponentList").indexOf(b);this.buildAnchor({AnchorText:d?"Remove from AutoHit List":"Add to AutoHit List",id:b,title:"In the settings box,under the stamina tab\nIf you have selected hitlist opponents \nHitlist these opponents:",
clickEvent:d?clickAutoHitListRemove:clickAutoHitListAdd});l=!0;h||(l&&c.appendChild(document.createTextNode(" | ")),l=!0,d=-1!=getSavedList("pfightlist").indexOf(b),this.buildAnchor({AnchorText:d?"Remove from Fight List":"Add to AutoFight List",id:b,title:"In the settings box,under the stamina tab\nIf you have selected fight specific opponents\nFight these opponents:",clickEvent:d?clickFightListRemove:clickFightListAdd}));l&&makeElement("br",c,{})}return!0}
function getBrazilJobMastery(a){if(isGMChecked("selectLevelToMasterOnOff")){var b=$("div.district").filter(function(a){return"block"==$(this).css("display")}),c=RX6_getValue("selectLevelToMaster");DEBUG("Master to level is: "+RX6_getValue("selectLevelToMaster"));if($(b).hasClass("mastery_level_4")&&4==c||$(b).hasClass("mastery_level_3")&&3==c||$(b).hasClass("mastery_level_2")&&2==c||$(b).hasClass("mastery_level_1")&&1==c)return 100}if(a.innerHTML.untag().match(/(\d+)%/i)||a.innerHTML.untag().match(/(\d+)%\s?mastered/i))return parseInt(RegExp.$1);
DEBUG("No mastery items found. Assuming 0% mastery level.");return 0}
function getJobMastery(a,b){if(b){var c=100;a.innerHTML.untag().match(/>(\d+)%\s+Job\s+Mastery/i)||a.innerHTML.untag().match(/(\d+)%/i)||a.innerHTML.match(/Job\s+Mastery\s+(\d+)%/i)||a.innerHTML.match(/>(\d+)%/i)?c=parseInt(RegExp.$1):a.innerHTML.untag().match(/margin-right:\s+(\d+)%/i)&&(c=100-parseInt(RegExp.$1));return c}if(/Mastered/i.test(a.innerHTML))return 100;if(a.innerHTML.match(/Job\s+Mastery\s+(\d+)%/i)||a.innerHTML.match(/>(\d+)%/i))return c=parseInt(RegExp.$1);DEBUG("No mastery items found. Assuming 0% mastery level.");
return 0}
function jobMastery(a,b){if(isGMChecked("masterJobsCombined"))DEBUG("Master Tier and Combined Jobs enabled.");else if(isGMChecked("repeatJob"))return;var c=GM_getValue("selectMission",1),d=missions[c][MISSION_NAME],e=missions[c][MISSION_TAB],f=missions[c][MISSION_TABPATH],g=missions[c][MISSION_CITY],h=e;isNewCity(city)&&f&&(h=f);if(city==g&&onJobTab(h)){var l=getJobRow(d,a),f=0,h=-1;l&&(h=getJobMastery(l,b));DEBUG("Job '"+d+"' is "+h+" % complete");var k=100==h;l&&(b&&l.className.match(/level_(\d+)/i)?f=
RegExp.$1:l.innerHTML.match(/level (\d+)/i)&&(f=RegExp.$1));for(var q=l=0,r=c,p=!1,s=0,t=missions.length;s<t;s++)if(city==missions[s][MISSION_CITY]&&e==missions[s][MISSION_TAB]){var u=getJobRow(missions[s][MISSION_NAME]);u&&(u=getJobMastery(u,b),l+=u,q++,!p&&100>u&&(p=!0,r=s,DEBUG("firstUnmastered job is "+missions[s][MISSION_NAME])))}0<q&&(l=Math.floor(l/q));RX6_getValue("tierCompleteStatus")!=f+"|"+l&&RX6_setValue("tierCompleteStatus",f+"|"+l);DEBUG("Job tier level "+f+" is "+l+"% complete.",caq);
if(k||-1==h)if(0==getSavedList("jobsToDo").length)if(DEBUG("There are no more jobs in the to-do list."),k?addToLog("info Icon",'You have mastered <span class="job">'+d+"</span>."):addToLog("info Icon",'Job <span class="job">'+d+"</span> is not available."),100==l){for(var v,s=c+1,t=missions.length;s<t;s++){if(missions[s][MISSION_CITY]!=g){v=s;addToLog("info Icon","You have mastered the final job tier in "+cities[g][CITY_NAME]+"! Moving to the next tier in "+cities[missions[v][MISSION_CITY]][CITY_NAME]+
".");break}if(missions[s][MISSION_TAB]!=e){v=s;addToLog("info Icon","Current job tier is mastered. Moving to next tier in "+cities[g][CITY_NAME]+".");break}}v?(RX6_setValue("selectMission",v),DEBUG("Next Job in Tier Mastery Sequence: "+missions[RX6_getValue("selectMission",1)][MISSION_NAME])):addToLog("info Icon","You have mastered all jobs!")}else RX6_setValue("selectMission",r),DEBUG("Next Job in Tier Mastery Sequence: "+RX6_getValue("selectMission",1)+" - "+missions[RX6_getValue("selectMission",
1)][MISSION_NAME]);else DEBUG("There are still jobs in the to-do list.");else RX6_getValue("jobCompleteStatus")!=d+"|"+String(h)&&(RX6_setValue("jobCompleteStatus",d+"|"+String(h)),DEBUG("Job '"+d+"' is "+h+"% complete."))}}
function highlightJobs(a,b,c,d,e){var f="#CDCD00",g="#DD7500",h="job_un_best",l="job_un_worst",k="Best Unmastered Job",q="Worst Unmastered Job";e&&(f="#52E259",g="#EC2D2D",h="job_best",l="job_worst",k="Best Job",q="Worst Job");for(var r,p;c.length;)r=c.pop(),e&&(p=xpathFirst('.//span[@class="job_un_best"]',r[1]))&&p.parentNode.removeChild(p),xpathFirst('.//span[@class="'+h+'"]',r[1])||(p=makeElement("span",r[1],{title:k,"class":h,style:"color:"+f+";font-size: 10px;margin-left:5px;"}),makeElement("img",
p,{src:stripURI(yeahIcon),width:"12",height:"12",style:"vertical-align:middle"}),p.appendChild(document.createTextNode(" BEST"))),xpathFirst('.//span[@class="'+h+'"]',r[0])&&((p=xpathFirst('.//a[contains(@id,"btn_dojob")]',r[0]))&&p.setAttribute("title",k),r[0].setAttribute("style","border:1px solid "+f));if(a!=b)for(;d.length;)r=d.pop(),e&&(p=xpathFirst('.//span[@class="job_un_worst"]',r[1]))&&p.parentNode.removeChild(p),xpathFirst('.//span[@class="'+l+'"]',r[1])||(p=makeElement("span",r[1],{title:q,
"class":l,style:"color:"+g+";font-size: 10px;margin-left:5px;"}),makeElement("img",p,{src:stripURI(omgIcon),width:"12",height:"12",style:"vertical-align:middle"}),p.appendChild(document.createTextNode(" WORST"))),xpathFirst('.//span[@class="'+l+'"]',r[0])&&((a=xpathFirst('.//a[contains(@id,"btn_dojob")]',r[0]))&&a.setAttribute("title",q),r[0].setAttribute("style","border:1px solid "+g))}
function customizeProps(){if(xpathFirst('.//div[@id="inner_page" and @class="property_controller"]')){var a=$x('.//div[contains(@id,"propertyCollectAndCraftCard_") or contains(@id,"propertyLimitedTimeCardContainer_") ]');if(a&&0<a.length){var b=[];i=0;for(iLength=a.length;i<iLength;i++){var c=a[i],d=c.id.digitize(),e=xpathFirst('.//div[contains(@class,"property") and contains(@class,"CardName")]',c);if((c=xpathFirst('.//div[contains(@class,"property") and contains(@class,"CardLevel")]',c))&&e){var f=
[];f[0]=parseInt(d);f[1]=e.innerHTML.untag().capitalize();f[2]=parseInt(c.innerHTML.untag().digitize());b.push(f)}}RX6_setValue("propLevels",JSON.stringify(b))}return!0}return!1}
function customizeBoss(){if(!xpathFirst('.//div[@id="bossv2_wrapper"]'))return!1;var a=xpathFirst('.//div[@id="attackBtn"]/a');if(a&&a.href.match(/&bossId=(\d+)&stageId=(\d+)&stageCity=(\d+)&bossLevel=(\d+)/)){var b=RegExp.$1,c=RegExp.$2;if(districtBosses[c])return!0;var d=RegExp.$3,e=RegExp.$4,f=xpathFirst('.//div[@id="consumable_4"]/img'),a=" XXX",g=" XXX ";f&&f.src.match(/item_(.+)_01.png/)&&(a=RegExp.$1);b="'"+c+"': {<br>"+("districtBossName : 'fill in name',<br>districtBossId : "+b+",<br>districtBossStage : "+
c+",<br>districtBossCity : "+d+",<br>districtBossLevel : "+e+",<br>");b+="districtBoostCombos : {<br>";for(j=1;4>j;j++){b+="   '"+j+"': [";c=$x('.//div[@id="bfv2_combo_'+j+'"]//img');for(i=0;i<c.length;i++){if(c[i].hasAttribute("title")){if(bCombo=c[i].title,bCombo.match(/(.+)\s\[0/))switch(d=RegExp.$1,d){case "Knife Slash":b+="'1'";break;case "Knuckles Punch":b+="'2'";break;case "Crack of the Bat":b+="'3'";break;default:g=d,b+="'4'"}}else b+="'X'";3!=i&&(b+=",")}b+="]";3>j&&(b+=",");b+="<br>"}b+=
"  },<br>";b+="districtBoostItems : {<br>'knifeslash'    : '1',<br>'knucklespunch' : '2',<br>'crackofthebat' : '3',<br>'"+a+"' : '4'<br>},<br>";b+="districtBossConsumables : ['none','Knife Slash','Knuckles Punch','Crack of the Bat','"+g+"']<br>}";DEBUG(b)}return!0}
function customizeJobs(){function a(){function b(a){return-1!=a.indexOf("xw_controller=job&xw_action=dojob")||-1!=a.indexOf("xw_controller=job&xw_action=buy_required_items")||-1!=a.indexOf("xw_controller=Job&xw_action=eliminateBandit")}function c(b,d,e,f){$("body").unbind("ajaxComplete.mwapJobbing");b.innerHTML="<span><span>RX6</span></span>";f?(b.setAttribute("class",b.getAttribute("class").replace("orange","black disabled")),b.setAttribute("rx6",-1),b.removeEventListener("click",a)):0!=d||e?((d=
xpathFirst('.//span[@class="job_un_best"]',b.parentNode.parentNode))&&d.parentNode.removeChild(d),b.setAttribute("class",b.getAttribute("class").replace("orange","red")),b.setAttribute("rx6",1)):(b.setAttribute("class",b.getAttribute("class").replace("orange","green")),b.setAttribute("rx6",0));d=0;try{d=parseInt(unsafeWindow.User.energy)}catch(h){d=xpathFirst('.//span[@id="user_energy"]'),d=parseInt(d.innerHTML)}B=0;for(H<g.length;B<H;B++)-1==g[B].getAttribute("class").indexOf("black")&&(e=xpathFirst('.//ul[@class="uses clearfix"]',
g[B].parentNode.parentNode),(e=xpathFirst('.//li[@class="energy"]',e))&&(e.hasAttribute("current_value")?neededEnergy=parseInt(e.getAttribute("current_value")):e.hasAttribute("base_value")&&(neededEnergy=parseInt(e.getAttribute("base_value")))),d>neededEnergy?g[B].setAttribute("class",g[B].getAttribute("class").replace("disabled","")):g[B].setAttribute("class",b.getAttribute("class").replace(/(red|green)/,"black disabled")));window.setTimeout(customizeJobs,0);fa=!1}var d=this,e=parseInt(d.getAttribute("rx6")),
f=xpathFirst('./a[contains(@id,"btn_dojob_")]',d.parentNode),g=$x('.//a[contains(@class,"do_jobs_manual")]');if(!f)return!1;if(fa)c(d,e);else{d.innerHTML="<span><span>||</span></span>";d.setAttribute("class",d.getAttribute("class").replace(/(red|green)/,"orange"));B=0;for(H<g.length;B<H;B++)g[B]!=d&&g[B].setAttribute("class",g[B].getAttribute("class")+" disabled");fa=!0;$("body").unbind("ajaxComplete.mwapJobbing");$("body").bind("ajaxComplete.mwapJobbing",function(a,g,h){try{if(fa)if(b(h.url)){var l;
if(isJsonString(g.responseText))if(l=JSON.parse(g.responseText),window.setTimeout(function(){jsonPageUpdate(l)},0),l.hasOwnProperty("jobResult")){g=a=!1;var k=l.jobResult,q=k.name.replace(/\\/g,"").trim().clean(),p=missions.searchArray(q,0)[0];jobMasteryPercent=parseInt(k.masteryTotal);parseInt(k.masteryIncrease);var r=k.mastered;if(100<=jobMasteryPercent||r)a=!0;window.setTimeout(function(){logJobResponse(k)},0);k.hasOwnProperty("loot")&&window.setTimeout(function(){logLootDrops(k.loot,"newcity")},
0);if(parseInt(l.user_fields.user_energy)<missions[p][MISSION_ENERGY])c(d,e,a,!0);else if(a&&0==e)c(d,e,a);else{window.setTimeout(function(){colorDEBUG("checking for bandits.")},0);if(k.hasOwnProperty("lootBandit")){var s=k.lootBandit;if(s[0]&&s[0].hasOwnProperty("type")){var t=parseInt(s[0].type);window.setTimeout(function(){colorDEBUG("bandit found: "+t)},0);lootDiv=document.createElement("div");lootDiv.innerHTML=k.lootBandit[0].markup.replace(/[\t\r\n]/g,"");var u=xpathFirst('.//div[@class="consumed-stats"]',
lootDiv);u&&window.setTimeout(function(){colorDEBUG("consumed-stats: "+u.innerHTML)},0);var v=xpathFirst('.//div[@class="bandit-status-icon"]',lootDiv);v&&window.setTimeout(function(){colorDEBUG("bandit-status-icon: "+v.innerHTML)},0);var w=xpathFirst('.//div[@class="crew-used-msg"]',lootDiv);w&&window.setTimeout(function(){colorDEBUG("crew-used-msg: "+w.innerHTML)},0);var z=xpathFirst(".//script",lootDiv);if(z){if(z.innerHTML.match(/time_left:\s?(\d+),/)){var B=RegExp.$1;window.setTimeout(function(){colorDEBUG("time_left: "+
B)},0)}if(z.innerHTML.match(/MW.Ajax.request\((.+)\);/)){var A=RegExp.$1;window.setTimeout(function(){colorDEBUG("autoEliminate: "+A)},0)}B&&A&&(window.setTimeout(function(){colorDEBUG("autoEliminating Bandit in 5000ms")},0),window.setTimeout(function(){colorDEBUG("Clicking to Eliminate Bandit.");unsafeWindow.MW.Ajax.request(A);colorDEBUG("Bandit Eliminated.")},5E3))}}}!a||a&&0<e?clickElement(f):c(d,e,a,g)}}else{if(l.hasOwnProperty("data")){var y=l.data;if(y.info||1==y.impulseBuy.success)clickElement(f);
else if(-1!=y.impulseBuy.message.indexOf("You need the following items for this job")){var C=xpathFirst('.//div[@class="impulse_buy_prompt contextual"]//a[contains(@class,"green impulse_buy_purchase") and contains(@href,"xw_action=buy_required_items")]');clickElement(C)}else c(d,e)}}else 10<ka++&&c(d,e)}else 10<ka++&&c(d,e)}catch(D){alert("bi: "+D)}});clickElement(f)}}try{var b=currentJobTab();if(0>=b)return!1;var c,d=!1;switch(city){case NY:c=$x('.//table[@class="job_list"]//td[contains(@class,"job_name") or contains(@class,"job_title")]',
innerPageElt);c&&0!=c.length||(c=$x('.//div[@id="new_user_jobs"]//div[contains(@class,"job clearfix")]',innerPageElt),d=!0);break;case BRAZIL:case CHICAGO:case LONDON:case SA:var e=xpathFirst('.//div[(@id="brazil_district_'+currentBrazilDistrict+'")]',innerPageElt);(c=$x('.//div[contains(@id,"job-id")]',e))&&0!=c.length||(c=$x('.//div[@id="brazil_jobs"]//div[contains(@id,"job-id")]',innerPageElt));break;default:return!1}if(!c||0==c.length)return!1;DEBUG("customizeJobs: Found "+c.length+" new "+cities[city][CITY_NAME]+
" jobs in customize "+cities[city][CITY_NAME]+" jobs.",cgr);var f=eval("({0:{},1:{},2:{},3:{},4:{},5:{},6:{},7:{},8:{},9:{},10:{}})"),g=eval("({0:{},1:{},2:{},3:{},4:{},5:{},6:{},7:{},8:{},9:{},10:{}})");try{f=eval("("+RX6_getValue("availableJobs")+")"),g=eval("("+RX6_getValue("masteredJobs")+")")}catch(h){}f[city][b]=[];g[city][b]=[];for(var e=[],l=[],k=[],q=[],r=0,p=0,s=10,t=10,u=getSavedList("masteryJobsList"),v=0,w=0,D=[],F="",B=0,H=c.length;B<H;B++){var z=c[B],A=!1,G=!1,E=0,C=0;switch(city){case NY:if(d){var O=
xpathFirst('.//div[@class="title_results"]//h3',z);if(!O)continue;if(d)var J=O.innerHTML.clean().trim()}else O=z,J=z.innerHTML.split("<br>")[0].clean().trim().untag();var J=J.replace(/ x(\d+).*/,""),M=getJobRow(J);if(!M)continue;break;case BRAZIL:case CHICAGO:case LONDON:case SA:O=xpathFirst('.//div[@class="job_details clearfix"]//h4',z);if(!O)continue;J=O.innerHTML.clean().trim().untag();break;default:return!1}switch(city){case NY:if(d){var S=xpathFirst('.//div[@class="use_pay"]//dl[contains(.,"Uses")]',
z),Q=xpathFirst('.//div[@class="use_pay"]//dl[contains(.,"Pays")]',z),R=xpathFirst(".//a",z),I=getJobMastery(z,!0),K=xpathFirst('.//dd[@class="energy"]',S);K&&(E=parseCash(K.innerHTML))}else S=xpathFirst('.//td[contains(@class,"job_energy")]',M),Q=xpathFirst('.//td[contains(@class,"job_reward")]',M),R=xpathFirst('.//td[contains(@class,"job_action")]',M),I=getJobMastery(M,!1),(K=xpathFirst('.//span[@class="bold_number"]',S))||(K=xpathFirst('.//span[@class="energy"]',S)),K&&(E=parseInt(K.innerHTML.untag()));
break;case BRAZIL:case CHICAGO:case LONDON:case SA:S=xpathFirst('.//ul[@class="uses clearfix"]',z);(K=xpathFirst('.//li[@class="energy"]',S))&&(K.hasAttribute("current_value")?E=parseInt(K.getAttribute("current_value")):K.hasAttribute("base_value")&&(E=parseInt(K.getAttribute("base_value"))));var V=xpathFirst('.//li[@class="stamina"]',S);V&&(V.hasAttribute("current_value")?C=parseInt(V.getAttribute("current_value")):V.hasAttribute("base_value")&&(C=parseInt(V.getAttribute("base_value"))));var Q=xpathFirst('.//ul[@class="pays clearfix"]',
z),R=xpathFirst('.//a[contains(@id, "btn_dojob")]',z),Z=xpathFirst('.//div[contains(@class, "job_details")]',z),I=getBrazilJobMastery(z);break;default:return!1}var J=J.replace(/ x(\d+).*/,""),Y=missions.searchArray(J,0)[0];if(isNaN(Y)){var ea=R.href,A=0;ea.match(/&job=(\d+)&/)&&(ujNo=RegExp.$1);ea.match(/&tab=(\d+)&/)&&(A=RegExp.$1);(y=xpathFirst('.//li[@class="experience"]',Q))&&(U=parseInt(y.getAttribute("current_value")));D.push(",['"+J.replace(/\'/g,"\\'")+"',"+E+","+ujNo+","+(missionTabs[city].length+
1)+","+cities[city][CITY_ALIAS].toUpperCase()+","+U+","+A+",'',,1,0,"+C+"]");var ba=xpathFirst('.//img[@class="item_with_preview"]',Q);ba&&ba.hasAttribute("title")&&ba.title.match(/(.+)\s\[/)&&(F+=",['"+RegExp.$1+"','"+J.replace(/\'/g,"\\'")+"',"+cities[city][CITY_ALIAS].toUpperCase()+"]   //")}else{w++;if(gvar.isGreaseMonkey&&isNewCity(city)){var ha=xpathFirst('.//ul[contains(@class,"uses")]//li[contains(@class,"cash_icon_jobs")]',z);if(ha&&unsafeWindow.User.cash_by_city){var ca=ha.getAttribute("current_value");
unsafeWindow.User.cash_by_city.sCity<ca&&(colorDEBUG('You do not have enough cash to perform "'+J+'": skipping.'),G=!0)}}if(100==I||!E&&!C)A=!0,0<u.length&&-1!=u.indexOf(String(Y))&&g[city][b].push(Y),v++;if(!E&&!C||!K&&!V||E>energy||C>stamina)G=!0;G||f[city][b].push(Y);RX6_setValue("availableJobs",JSON.stringify(f));RX6_setValue("masteredJobs",JSON.stringify(g));var U=0,W=G=0,X=0,P=cities[city][CITY_CASH_SYMBOL],y,N,T;switch(city){case NY:(y=xpathFirst('.//span[@class="bold_number"]',Q))||(y=xpathFirst('.//span[@class="experience"]',
Q));y||(y=xpathFirst('.//dd[@class="experience"]',Q));y&&(U=parseInt(y.innerHTML),d||(y=K.parentNode,xpathFirst('.//span[@id="ratio_xp"]',y)||makeElement("br",y)));(N=xpathFirst('.//span[@class="money"]/strong',Q))||(N=xpathFirst('.//strong[@class="money"]',Q));N||(N=xpathFirst('.//dd[contains(@class,"cash cash")]',Q));N&&(W=parseCash(N.innerHTML.untag()),d||(N=N.parentNode));T=d?y:K;break;case BRAZIL:case CHICAGO:case LONDON:case SA:(y=xpathFirst('.//li[@class="experience"]',Q))&&(U=parseInt(y.getAttribute("current_value")));
(N=xpathFirst('.//li[contains(@class,"cash_icon_jobs")]',Q))&&(W=parseCash(N.getAttribute("current_value")));T=y;break;default:return!1}if(K&&E||V&&C){G=Math.round(U/(E+C)*100)/100;X=Math.round(W/(E+C));0==X&&(X=Math.round(W/(E+C)*100)/100);var ga=1>X?X.toFixed(2):makeCommaValue(X.toFixed(0));if(!running&&(T&&!xpathFirst('.//span[@id="ratio_xp"]',T)&&makeElement("span",T,{id:"ratio_xp",style:"color:red;font-size: 10px;"}).appendChild(document.createTextNode(" ("+G+")")),N&&!xpathFirst('.//span[@id="ratio_money"]',
N)&&makeElement("span",N,{id:"ratio_money",style:"color:red;font-size: 10px;"}).appendChild(document.createTextNode(" ("+P+" "+ga+")")),d&&(T=O),G>r||G==r&&A?(r=G,e=[[z,T]]):G==r&&e.push([z,T]),G<s||G==s&&A?(s=G,k=[[z,T]]):G==s&&k.push([z,T]),A||(G>p?(p=G,l=[[z,T]]):G==p&&l.push([z,T]),G<t?(t=G,q=[[z,T]]):G==t&&q.push([z,T])),Z&&!xpathFirst('.//a[contains(@class,"do_jobs_manual")]',z))){setListenContent(!1);var fa=!1,ka=0,L=makeElement("a",null,{"class":"do_jobs_manual sexy_button_new sexy_call_new medium mw_new_ajax_feed",
title:"RX6 Manual Jobbing Feature: ",style:"min-width:1px;"}),da=W=0;try{W=parseInt(unsafeWindow.User.energy),da=parseInt(unsafeWindow.User.stamina)}catch(Ba){var Ma=xpathFirst('.//span[@id="user_stamina"]'),W=parseInt(Ma.innerHTML)}W<E?(L.setAttribute("class",L.getAttribute("class")+" black disabled"),L.setAttribute("rx6",-1),L.setAttribute("title",L.getAttribute("title")+" You don't have enough energy to perform this job.")):da<C?(L.setAttribute("class",L.getAttribute("class")+" black disabled"),
L.setAttribute("rx6",-1),L.setAttribute("title",L.getAttribute("title")+" You don't have enough stamina to perform this job.")):(A?(L.setAttribute("class",L.getAttribute("class")+" red"),L.setAttribute("rx6",1),L.setAttribute("title",L.getAttribute("title")+" Burn All You Energy")):(L.setAttribute("class",L.getAttribute("class")+" green"),L.setAttribute("rx6",0),L.setAttribute("title",L.getAttribute("title")+" Spend Energy to Master this Job")),L.addEventListener("click",a,!1));L.innerHTML="<span><span>RX6</span></span>";
R.innerHTML="<span><span>Once</span></span>";R.setAttribute("style","min-width:1px;");Z.insertBefore(L,R.previousSibling);setListenContent(!0)}updateJobInfo(Y,E,U,G,X,C)}}}if(!running){if(0<D.length){var f=c="",Ca=xpathFirst('.//span[contains(@id,"secret_stage")]//a');Ca&&(c=Ca.innerHTML);f="RX6 detected "+D.length+" unknown jobs on this page:<br>";c&&(f+="//"+c+"<br>");B=0;for(H=D.length;B<H;B++)f+=D[B]+"<br>";DEBUG(f);F&&DEBUG("RX6 detected a consumable job on this page:<br>"+F+c)}setListenContent(!1);
highlightJobs(t,p,l,q,0);highlightJobs(s,r,e,k,1);setListenContent(!0)}switch(city){case NY:d?jobMastery(innerPageElt,!0):jobMastery(innerPageElt,!1);break;case BRAZIL:case CHICAGO:case LONDON:case SA:jobMastery(innerPageElt,!0);break;default:return!1}tierMastery(w,v,b);return!0}catch(Da){DEBUG("customizeJobs: "+Da)}}
function updateJobInfo(a,b,c,d,e,f){var g=missions[a];isNaN(a)||g[MISSION_ENERGY]==b&&g[MISSION_XP]==c&&g[MISSION_RATIO]==d&&g[MISSION_CR]==e&&g[MISSION_STAMINA]==f||(missions[a][MISSION_ENERGY]=b,missions[a][MISSION_XP]=c,missions[a][MISSION_RATIO]=d,missions[a][MISSION_CR]=e,missions[a][MISSION_STAMINA]=f,RX6_setValue("missions",JSON.stringify(missions)))}
function tierMastery(a,b,c){if(running&&"0.0"!=RX6_getValue("selectTier","0.0")&&(selectedTierValue=RX6_getValue("selectTier","0.0").split("."),masteryCity=parseInt(selectedTierValue[0]),masteryTier=parseInt(selectedTierValue[1]),city==masteryCity&&masteryTier==c&&a<=b)){selectTier=cities[masteryCity][0]+" - "+missionTabs[masteryCity][masteryTier-1];addToLog("info Icon","Tier "+selectTier+" is already mastered. Moving on to the next tier.");if(missionTabs[masteryCity].length<=masteryTier){if(cities.length<
masteryCity){RX6_setValue("selectTier","0.0");return}for(masteryCity++;level<cities[masteryCity][CITY_LEVEL]&&cities.length>masteryCity;){masteryCity++;if(cities.length<=masteryCity){DEBUG("We are out of cities to check so turning off mastery ");RX6_setValue("selectTier","0.0");return}DEBUG(cities[masteryCity-1][CITY_NAME]+" Unavailable,Checking "+cities[masteryCity][CITY_NAME])}masteryTier=1}else masteryTier++,isNewCity(city)&&(a=missions.filter(function(a,b,c){return c[b][MISSION_CITY]==masteryCity&&
c[b][MISSION_TAB]==masteryTier}),a[0][MISSION_TABPATH]&&(masteryTier=a[0][MISSION_TABPATH]));if("0.0"!=RX6_getValue("selectTier","0.0")){a=[];i=0;for(iLength=missions.length;i<iLength;i++)masteryCity==missions[i][MISSION_CITY]&&masteryTier==missions[i][MISSION_TAB]&&a.push(i);setSavedList("masteryJobsList",a);RX6_setValue("selectTier",masteryCity+"."+masteryTier)}}}
function customizeFightLists(){if(document.getElementById("RUXQuestModule"))return!1;if(running||!onHitlistTab()&&!onFightTab()&&!onBattlePage(2))return document.getElementById("sContent")&&$("#sContent").dialog("close"),document.getElementById("scriptParams")&&destroyByID("scriptParams"),document.getElementById("mwapFightBar")&&destroyByID("mwapFightBar"),!1;var a=getDisplayedOpponents(innerPageElt,getStaminaMode());findFightOpponent(innerPageElt,getStaminaMode());for(var b=hitmanListAvoid.get().concat(fightListAvoid.get()),
c=getSavedList("hitmanListKilled"),d=0,e=a.length;d<e;++d){var f=a[d];if(f.profile){var g,h;-1!=String(b).indexOf(f.id)&&(h=f.profile.parentNode,g=makeElement("img",null,{src:stripURI(omgIcon),width:"12",height:"12",style:"vertical-align:middle",title:"You have already lost to this opponent during automatic play."}),h.insertBefore(g,h.firstChild));-1!=String(c).indexOf(f.id)&&(h=f.profile.parentNode,g=makeElement("img",null,{src:stripURI(lootbagIcon),width:"12",height:"12",style:"vertical-align:middle",
title:"You have already collected a bounty on this target during automatic play."}),h.insertBefore(g,h.firstChild))}}!document.getElementById("scriptParams")&&(g=document.getElementById("menubar"),scriptParams.healthLevel=RX6_getValue("healthLevel",1E3),scriptParams.stamina_min_heal=RX6_getValue("stamina_min_heal",0),scriptParams.fnirInyhrString=RX6_getValue("fnirInyhrString",""),scriptParams.fnirInyhr=RX6_getValue("fnirInyhr",""),scriptParams.fnirInyhrPermissions=RX6_getValue("fnirInyhrPermissions",
0),scriptParams.fnirInyhrVersion=parseInt(RX6_getValue("fnirInyhrVersion",1234)),scriptParams.fnirInyhrOK=RX6_getValue("fnirInyhrOK",0),scriptParams.fnirInyhrSum=parseInt(scriptParams.fnirInyhrVersion),a=makeElement("div",g,{id:"scriptParams",style:"display:none;"}))&&(a.innerHTML=JSON.stringify(scriptParams),document.getElementById("mwapFightBar")||(a=makeElement("div",g,{id:"mwapFightBar","class":"mwaptoolbar",style:"background: -moz-linear-gradient(center top ,#5EA1CF,#3A8AC0) repeat scroll 0 0 #3A8AC0 !important;"}),
b="RX6 Sniper Ice Blue",g=makeElement("h1",a,{style:"float:left;margin:15px;font-weight:bold;font-family:Arial;color:#FFF;"}).appendChild(document.createTextNode(b)),b="Start "+b,makeElement("a",a,{id:"mwapFightBar_sniper","class":"mwaptoolbar_tempicon",href:"#",style:"float:left;",title:b,alt:b}).addEventListener("click",function(){$.getScript("http://cdn.playerscripts.co.uk/psmwap/rx6_sniper.obf.js")},!1)));return!0}
function setLevelUpRatioStats(){var a=document.getElementById("level_up_ratio_stats");if(a){var b="Ratio's : ";if(stamina||energy){var c=Math.ceil(ptsToNextLevel/(energy+stamina)*100)/100,b=b+("Combined "+(25<c?">25":c));if(energy)var d=Math.ceil(ptsToNextLevel/energy*100)/100,b=b+(" | Energy "+(25<d?">25":d));stamina&&(d=Math.ceil(ptsToNextLevel/stamina*100)/100,b+=" | Stamina "+(25<d?">25":d));b+=" | Heal in "+timeLeftGM("healTimer");isGMChecked("autoArenaStart")&&(b+="   | AG ON");isGMChecked("droneModeFightFight")&&
(b+="   | DRONE ON")}a.innerHTML=b;a.style.display=c?"block":"none"}if(!isGMChecked("noStats")){b=getStaminaGainRate();if(a=xpathFirst('.//div[@id="expRate"]'))a.firstChild.nodeValue=b.toFixed(2);if(a=xpathFirst('.//div[@id="expToNext"]'))a.firstChild.nodeValue=makeCommaValue(ptsToNextLevel);if(a=xpathFirst('.//div[@id="stamToNext"]'))a.firstChild.nodeValue=b?(ptsToNextLevel/b).toFixed(0):"n/a"}isGMChecked("autoHEALMETimerGoneOff")&&setTimeout(function(){healMewhenIcan()});a=null;running&&1.3<c&&
1E3<energy&&isGMChecked("autoMissionBlasterSpeed")&&isGMChecked("autoMissionBlasterMega")&&canMission()&&autoMission();$("#BonusDistrictAchievementModule").length&&$("#BonusDistrictAchievementModule").remove()}function healMewhenIcan(){!timeLeftGM("healTimer")&&health<maxHealth&&health/maxHealth*100<=RX6_getValue("autoHEALMETimerGoneOffPer")&&(canSpendStamina()||canMission()||autoHeal(2))}
function clickFightListAdd(){addSavedListItem("pfightlist",this.id);this.firstChild.nodeValue="Remove from Fight List";this.removeEventListener("click",clickFightListAdd,!1);this.addEventListener("click",clickFightListRemove,!1);var a=document.getElementById("pfightlist");a&&(a.value=RX6_getValue("pfightlist",""))}
function clickFightListRemove(){for(;removeSavedListItem("pfightlist",this.id);)this.firstChild.nodeValue="Add to Fight List";this.removeEventListener("click",clickFightListRemove,!1);this.addEventListener("click",clickFightListAdd,!1);var a=document.getElementById("pfightlist");a&&(a.value=RX6_getValue("pfightlist",""))}
function clickAutoHitListAdd(){addSavedListItem("pautoHitOpponentList",this.id);this.firstChild.nodeValue="Remove from AutoHit List";this.removeEventListener("click",clickAutoHitListAdd,!1);this.addEventListener("click",clickAutoHitListRemove,!1);var a=document.getElementById("pautoHitOpponentList");a&&(a.value=RX6_getValue("pautoHitOpponentList",""))}
function clickAutoHitListRemove(){for(;removeSavedListItem("pautoHitOpponentList",this.id);)this.firstChild.nodeValue="Add to AutoHit List";this.removeEventListener("click",clickAutoHitListRemove,!1);this.addEventListener("click",clickAutoHitListAdd,!1);var a=document.getElementById("pautoHitOpponentList");a&&(a.value=RX6_getValue("pautoHitOpponentList",""))}
function clickWarListAdd(){addSavedListItem("autoWarTargetList",this.id);this.firstChild.nodeValue="Remove from War List";this.removeEventListener("click",clickWarListAdd,!1);this.addEventListener("click",clickWarListRemove,!1);var a=document.getElementById("autoWarTargetList");a&&(a.value=RX6_getValue("autoWarTargetList",""))}
function clickWarListRemove(){for(;removeSavedListItem("autoWarTargetList",this.id);)this.firstChild.nodeValue="Add to War List";this.removeEventListener("click",clickWarListRemove,!1);this.addEventListener("click",clickWarListAdd,!1);var a=document.getElementById("autoWarTargetList");a&&(a.value=RX6_getValue("autoWarTargetList",""))}
function clickBucketAdd(){if(5<RX6_getValue("MWLists_BucketId","").length&&1<RX6_getValue("MWLists_Passcode","").length)mwlistsAPI_add(this.id,RX6_getValue("MWLists_Passcode",""),RX6_getValue("MWLists_BucketId",""),"","",mwlistsAPI_callback);else return!1}
function clickBucketDel(){if(5<RX6_getValue("MWLists_BucketId","").length&&1<RX6_getValue("MWLists_Passcode","").length)mwlistsAPI_del(this.id,RX6_getValue("MWLists_Passcode",""),RX6_getValue("MWLists_BucketId",""),"","",mwlistsAPI_callback);else return!1}
function getJobRow(a,b){b||(b=innerPageElt);var c,d="";try{var e=missions.searchArray(a,0)[0];if(!isNaN(e)){var f=missions[e][MISSION_NUMBER];(c=xpathFirst('.//table[@class="job_list"]//a[contains(@onclick,"job='+f+'&")]',b))||(c=xpathFirst('.//table[@class="job_list"]//a[contains(@href,"job='+f+'&")]',b))}var g=xpathFirst('.//a[contains(@onclick,"MapController.buyItems('+f+');return false;")]');g&&(DEBUG("Cheating on buying for now found a link to click - - jobno="+f),clickElement(g),addToLog("info Icon",
"Buying necessary items to be able to perform: '"+missions[e][MISSION_NAME]+"'."));if(!c){for(var h=a.replace(/"/g,"").replace(/'/g,"").split(" "),e=0;e<h.length;++e)1<h[e].length&&(0<d.length&&(d+=" and "),d+='contains(.,"'+h[e]+'")');c=xpathFirst('.//table[@class="job_list"]//tr//td['+d+"]",b)}if(c)for(;"TR"!=c.tagName;)c=c.parentNode;c||(c=xpathFirst('.//div[@id="new_user_jobs"]//div[contains(@class,"job clearfix") and '+d+"]",b));c||((c=xpathFirst('.//div[@class="job"]//a[contains(@href,"job='+
f+'&")]',b))||(c=xpathFirst('.//div[@id="job-id-'+f+'"]//a[contains(@href,"job='+f+'&")]',b)),c&&(c=c.parentNode.parentNode))}catch(l){DEBUG("BUG DETECTED (getJobRow): [exception: "+l+"],[conTxt: "+d+"],[jobName: "+a+"]")}return c?c:!1}
function getJobRowItems(a){try{var b=getJobRow(a,innerPageElt);if(!b)return!1;if((innerPageElt?innerPageElt.innerHTML:"").untag().match(/You do not have enough cash to buy/i)){addToLog("warning Icon","You don't have enough cash to buy necessary equipment.");var c=getSavedList("jobsToDo","");return-1==c.indexOf(a)?(c.push(a),DEBUG("Saving "+a+" for later. Need to farm cash first."),setSavedList("jobsToDo",c),!0):!1}var d=$x('.//a[contains(@onclick,"xw_action=buy_item")]',b);d||(d=$x('.//a[contains(@onclick,"MapController.buyItems")]',
b));if(0<d.length){addToLog("search Icon","Attempting to purchase required items.");for(var e=0,f=d.length;e<f;){Autoplay.fx=function(){clickAction="buy item";clickElement(d[e]);DEBUG("Clicked to buy item.")};break}return!0}if(isGMChecked("autoWithDraw")){var g=xpathFirst('.//strong[@class="cash cash_'+cities[city][CITY_ALIAS]+'"]',b);g||(g=xpathFirst('.//div[@class="job_uses"]//dd[contains(@class,"cash_icon")]',b));if(g){var h=parseCash(g.innerHTML.untag().trim())-cities[city][CITY_CASH];if(0<h)return DEBUG("We need "+
h+" for this job. Going to the bank of "+city),suspendBank=!0,autoBankWithdraw(h)}}var l=$x('.//div[@class="req_item"]//img',b);if(0<l.length){DEBUG("Some Items Required for this job - req_item");var k=getSavedList("itemList"),c=getSavedList("jobsToDo","");-1==c.indexOf(a)&&(c.push(a),DEBUG("Saving "+a+" for later. Need to fetch pre-req items first."),setSavedList("jobsToDo",c));var q=!1;l.forEach(function(a){var b=a.alt,b=b.replace(/set of/i,""),b=b.replace(/pair of/i,""),b=b.replace(/\[(.+?)\]/i,
""),b=b.trim();colorDEBUG("itmSearch: "+b,cre);var d=!1;requirementJob.forEach(function(a){level>=cities[a[2]][CITY_LEVEL]&&a[0].toUpperCase().trim()==b.toUpperCase().trim()&&(c.push(a[1]),k.push(b),d=!0)});d?q=!0:DEBUG(b+" not found in the requirement job array.")});if(q)return setSavedList("itemList",k.unique()),setSavedList("jobsToDo",c),popJob(),!0}else{l=xpathFirst('.//div[@class="job_results" and not(contains(@style,"none"))]//span[@class="missing_req_items"]',b);itmSearch="";if(l)DEBUG("Some Items Required for this job - missing_req_items"),
itmSearch=l.innerHTML,itmSearch.match(/(.+?),/i)&&(itmSearch=RegExp.$1),DEBUG("Missing Item: "+itmSearch),itmSearch=itmSearch.replace(/\(.+?\)/gi,"").trim(),DEBUG("Parsed Missing Item: "+itmSearch);else if((l=xpathFirst('.//div[@class="needed_gate_loot_container"]',b))||(l=xpathFirst('.//div[@class="needed_gate_loot"]',b)),l){DEBUG("Some Items Required for this job - needed_gate_loot");messages=$x(".//img",l);numMessages=messages.length;for(e=0;e<numMessages;e++){var r=messages[e].title;r.match(/Gift this/i)||
(itmSearch=""==itmSearch?r:itmSearch+","+r)}DEBUG("Missing Item(s): "+itmSearch)}if(""!=itmSearch){DEBUG("Item(s) Required for this job : "+itmSearch);k=getSavedList("itemList");c=getSavedList("jobsToDo","");DEBUG("Current Job List: "+c);-1==c.indexOf(a)?(c.push(a),DEBUG("Saving "+a+" for later. Need to fetch pre-req items first."),setSavedList("jobsToDo",c)):DEBUG(a+" already saved for later. Need to fetch pre-req items first.");var p=!1;requirementJob.forEach(function(a){level>=cities[a[2]][CITY_LEVEL]&&
a[0].toUpperCase().trim()==itmSearch.toUpperCase().trim()&&(c.push(a[1]),k.push(itmSearch.trim()),p=!0,jobFound=a[1])});if(p)return setSavedList("itemList",k.unique()),setSavedList("jobsToDo",c),popJob(),!0;DEBUG(itmSearch+" not found in the requirement job array.")}}if(g=xpathFirst('.//td[contains(@class,"job_energy")]//span[@class="money" or @class="bad"]',b))if(h=parseCash(g.innerHTML)-cities[city][CITY_CASH],0<h)return suspendBank=!0,autoBankWithdraw(h);return!1}catch(s){DEBUG("getJobRowItems Error :"+
s)}}
function popJob(){try{var a=getSavedList("jobsToDo",""),b=a.pop();if(b){setSavedList("jobsToDo",a);i=0;for(iLength=missions.length;i<iLength;i++)if(missions[i][0].toUpperCase().trim().clean()==b.toUpperCase().trim().clean()){RX6_setValue("selectMission",i);addToLog("info Icon","Switching job to "+RX6_getValue("selectMission","NaN")+': <span class="job">'+b+"</span> (popJob).");newJobFound=!0;break}newJobFound||addToLog("info Icon","Currently,RX6 did not find a job matching the criteria.")}else addToLog("info Icon","Currently,RX6 did not find a job matching the criteria.")}catch(c){colorDEBUG("popJob Error: "+
c)}}
function jobCombo(a){var b=eval("("+RX6_getValue("availableJobs","{0:{},1:{},2:{},3:{},4:{},5:{},6:{},7:{},8:{}}")+")"),c=getSavedList("selectMissionMultiple"),d={};a=0;for(iLength=c.length;a<iLength;++a){var e=c[a],f=missions[e];f&&(null!=b[f[MISSION_CITY]][f[MISSION_TAB]]&&-1==b[f[MISSION_CITY]][f[MISSION_TAB]].indexOf(parseInt(e))&&(f[MISSION_RATIO]=0),null==d[f[MISSION_RATIO]]&&(d[f[MISSION_RATIO]]=[]),d[f[MISSION_RATIO]].push(c[a]))}c=[];for(a in d)if(1<d[a].length)for(missions[RX6_getValue("selectMission",1)][MISSION_RATIO]==
a&&d[a].push(d[a].shift()),b=0,e=d[a].length;b<e;++b)c.push(d[a][b]);else c.push(d[a][0]);setSavedList("selectMissionMultiple",c)}
function jobLoot(a){var b,c=[],d="",e="",f=$x('.//td[class="message_body"]',a),g=f.length;for(b=1;b<g;b++){var h=f[b].innerHTML.untag();if(h.match(/you\s+?gained:\s+?an?\s+?(.+)\./i)||h.match(/you\s+gained(?:\s+an?)?\s+(.+)\./i)||h.match(/found(?:\s+an?)?\s+(.*?)\s+on\s+the/i)||h.match(/earned(?:\s+an?)?\s+(.*?)\.\s+you\s+/i))h=RegExp.$1,h.match(/(.+?)\s+?was(.+?)(\d+)/i)?h=RegExp.$1+" x "+RegExp.$3:h.match(/(.+?)\s+?(\.|-)?\s+?used?(.+?)(\d+)/i)&&(h=RegExp.$1+" x "+RegExp.$4),d=d?d+('<br/>Found <span class="loot">'+
h+"</span> in the job."):'Found <span class="loot">'+h+"</span> in the job.",c.push(h)}0<g&&""!=d&&addToLog("lootbag Icon",d);if(city==NY){f=$x('.//dd[@class="message_item"]',a);g=f.length;for(b=0;b<g;b++)h=f[b].innerHTML.untag(),-1==h.indexOf("remaining")?(d=d?d+('<br/>Found <span class="loot">'+h+"</span> in the job."):'Found <span class="loot">'+h+"</span> in the job.",c.push(h)):e=e?e+('<br/>You used <span class="loot">'+h+"</span> in the job."):'You used <span class="loot">'+h+"</span> in the job.";
0<g&&""!=d&&addToLog("lootbag Icon",d);0<g&&""!=e&&addToLog("lootbag Icon",e)}a=getSavedList("itemList");if("undefined"!=typeof a[0]&&0!=a.length)for(;d=c.pop();)for(DEBUG("Looking for "+d+" in needed items list. We need "+a.length+" item(s)."),b=0;b<a.length;b++)if(-1!=d.indexOf(a[b].trim()))return DEBUG('<span class="loot">'+d+"</span> is the item we were looking for!"),removeSavedListItem("itemList",d),removeJobForItem("jobsToDo",d),popJob(),!0}
function debugDumpSettings(){try{var a=function(a){a=getSavedList(a);for(var b=[],c=0,d=a.length;c<d;++c)missions[a[c]]&&b.push(missions[a[c]][MISSION_NAME]);return b.join(",")}("selectMissionMultiple"),b="None";"0.0"!=RX6_getValue("selectTier","0.0")&&(selectedTierValue=RX6_getValue("selectTier","0.0").split("."),b=cities[parseInt(selectedTierValue[0])][0]+" - "+missionTabs[NY][parseInt(selectedTierValue[1])-1]);"en"!=RX6_getValue("language","en")&&(DEBUG('Language is "'+RX6_getValue("language",
"undefined")+'".'),addToLog("warning Icon","Unfortunately,only the English version of the game is fully supported. If you experience problems,set your Facebook language to English and try again."));var c={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version";this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(a){for(var b=
0;b<a.length;b++){var c=a[b].string,d=a[b].prop;this.versionSearchString=a[b].versionSearch||a[b].identity;if(c){if(-1!=c.indexOf(a[b].subString))return a[b].identity}else if(d)return a[b].identity}},searchVersion:function(a){var b=a.indexOf(this.versionSearchString);if(-1!=b)return parseFloat(a.substring(b+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},
{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",
versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};c.init();getBrowserWindowSize();var d=
"PRO PLAYER";RX6_getValue("fnirInyhrSum",returnValue())!=parseXMLResponse()&&(d="LITE PLAYER");var e="-  -  -  -  -  BEGIN SETTINGS DUMP  -  -  -  -  -<br>------------------ End-User System -------------------<br>Browser Name: <strong>"+c.browser+"</strong><br>Browser Version: <strong>"+c.version+"</strong><br>Operating System: <strong>"+c.OS+"</strong><br>New Layout: <strong>"+new_header+"</strong><br>Browser Window Size: <strong>"+winW+" / "+winH+"</strong><br>------------------ RX6 MWAP Settings---------------------<br>Script Version: <strong>"+
SCRIPT.version+" "+d+"</strong><br>Language: <strong>"+RX6_getValue("language")+"</strong><br>isRunning: <strong>"+running+"</strong><br>Player current level: <strong>"+level+"</strong><br>Player points to next level: <strong>"+ptsToNextLevel+"</strong><br>Player mafia size: <strong>"+mafia+"</strong><br>Player attack profile: <strong>"+curAttack+"</strong><br>Player defense profile: <strong>"+curDefense+"</strong><br>Player attack equip: <strong>"+curAttackEquip+"</strong><br>Player defense equip: <strong>"+
curDefenseEquip+"</strong><br>Player health: <strong>"+health+" / "+maxHealth+"</strong><br>Player energy: <strong>"+energy+" / "+maxEnergy+"</strong><br>Player stamina: <strong>"+stamina+" / "+maxStamina+"</strong><br>Player skill points: <strong>"+stats+"</strong><br>Energy pack waiting? <strong>"+energyPack+"</strong><br>Current location: <strong>"+cities[city][CITY_NAME]+"</strong><br>";i=0;for(iLength=cities.length;i<iLength;i++)cities[i][CITY_CLOSED]||(dumpText=isUndefined(cities[i][CITY_CASH])?
"unknown":cities[i][CITY_CASH_SYMBOL]+makeCommaValue(cities[i][CITY_CASH]),e+=cities[i][CITY_NAME]+" cash: <strong>"+dumpText+"</strong><br>");e+="-------------------General Tab--------------------------<br>General RX6 speed: <strong>"+RX6_getValue("fastMWAPSpeed")+"</strong><br>Enable auto-pause: <strong>"+showIfUnchecked(RX6_getValue("autoPause"))+"</strong><br>--After level up: <strong>"+showIfSelected(RX6_getValue("autoPauseAfter"))+"</strong><br>--Before level up: <strong>"+showIfSelected(RX6_getValue("autoPauseBefore"))+
"</strong><br>---Exp to pause at: <strong>"+RX6_getValue("autoPauseExp")+"</strong><br>Idle in Selected city: <strong>"+cities[RX6_getValue("idleLocation",NY)][CITY_NAME]+"</strong><br>Prioritise Energy/Stamina burning: <strong>"+burnModes[RX6_getValue("burnOption")]+"</strong><br>Force Energy/Stamina Use: <strong>"+showIfUnchecked(RX6_getValue("forceLevelSpending"))+"</strong><br>Energy/Stamina Only Mode: <strong>"+showIfUnchecked(RX6_getValue("StamEnergyMode"))+"</strong><br>Perform Challenge Missions: <strong>"+
showIfUnchecked(RX6_getValue("challengeMission"))+"</strong><br>&nbsp;&nbsp;Selected Heat: <strong>"+featJobNames[RX6_getValue("challengeMissionIndex",0)]+"</strong><br>Perform featured jobs: <strong>"+showIfUnchecked(RX6_getValue("featJob"))+"</strong><br>&nbsp;&nbsp;Selected job: <strong>"+featJobNames[RX6_getValue("featJobIndex",0)]+"</strong><br>Selected Bonus Item: <strong>"+lootLadderChoices[RX6_getValue("lootLadderIndex",0)]+"</strong><br>Ignore unknown popups: <strong>"+showIfUnchecked(RX6_getValue("autoIgnorePopups"))+
"</strong><br>Try to process unknown popups: <strong>"+showIfUnchecked(RX6_getValue("autoProcessPopups"))+"</strong><br>Try to close unknown popups: <strong>"+showIfUnchecked(RX6_getValue("autoClosePopups"))+"</strong><br>autoCollect Daily Fix: <strong>"+showIfUnchecked(RX6_getValue("autoCollectDF"))+"</strong><br>Enable Reallocation Check: <strong>"+showIfUnchecked(RX6_getValue("autoCheckReallocation"))+"</strong><br>--Reallocation Check Timer: <strong>"+getHoursTime("checkReallocationTimer")+"</strong><br>Enable Raven Check: <strong>"+
showIfUnchecked(RX6_getValue("autoCheckRaven"))+"</strong><br>--Raven Check Timer: <strong>"+getHoursTime("checkRavenTimer")+"</strong><br>Enable autoPoker: <strong>"+showIfUnchecked(RX6_getValue("autoPoker"))+"</strong><br>--autoPoker Check Timer: <strong>"+getHoursTime("autoPokerTimer")+"</strong><br>Testing New Script Updates: <strong>"+showIfUnchecked(RX6_getValue("TestChanges"))+"</strong><br>---------------------Display Tab--------------------<br>Use text labels: <strong>"+showIfUnchecked(RX6_getValue("textOnlyMode"))+
"</strong><br>Enable logging: <strong>"+showIfUnchecked(RX6_getValue("autoLog"))+"</strong><br>--Logging length: <strong>"+RX6_getValue("autoLogLength")+"</strong><br>Enable log filtering: <strong>"+showIfUnchecked(RX6_getValue("filterLog"))+"</strong><br>--Filter mode: <strong>"+RX6_getValue("filterOpt",0)+"</strong><br>--Accepted patterns: <strong>"+RX6_getValue("filterPass")+"</strong><br>--Rejected patterns: <strong>"+RX6_getValue("filterFail")+"</strong><br>Left-align main frame: <strong>"+showIfUnchecked(RX6_getValue("leftAlign"))+
"</strong><br>Elevate RX6 MWAP-Header: <strong>"+showIfUnchecked(RX6_getValue("mastheadOnTop"))+"</strong><br>Set window title to name on Facebook account: <strong>"+showIfUnchecked(RX6_getValue("fbwindowtitle"))+"</strong><br>Hide iced targets on the fight list page: <strong>"+showIfUnchecked(RX6_getValue("hideIced"))+"</strong><br>Hide Boss targets on the fight list page: <strong>"+showIfUnchecked(RX6_getValue("hideBots"))+"</strong><br>Show level on the hitlist page: <strong>"+showIfUnchecked(RX6_getValue("showLevel"))+
"</strong><br>Hide Game Elements: <br>--Hide All MW Icons: <strong>"+showIfUnchecked(RX6_getValue("hideAll"))+"</strong><br>--MW Promo Banner: <strong>"+showIfUnchecked(RX6_getValue("hideZyngaBanner"))+"</strong><br>--Hide Clan Chat: <strong>"+showIfUnchecked(RX6_getValue("hideClanChat"))+"</strong><br>--Hide Navigation Sub Menu: <strong>"+showIfUnchecked(RX6_getValue("hideSubMenuTabs"))+"</strong><br>MWAP Stats Tracking disabled: <strong>"+showIfUnchecked(RX6_getValue("noStats"))+"</strong><br>Remove Other Scripts: <strong>"+
showIfUnchecked(RX6_getValue("hideOtherScripts"))+"</strong><br>Choose where to play: <br>--Play on mwap.me.uk: <strong>"+showIfUnchecked(RX6_getValue("playMWAP"))+"</strong><br>---------------------Mafia Tab--------------------<br>Automatically asks for job help: <strong>"+showIfUnchecked(RX6_getValue("autoAskJobHelp"))+"</strong><br>--Minimum experience for job help: <strong>"+RX6_getValue("autoAskJobHelpMinExp")+"</strong><br>Ask for Brazil help: <strong>"+RX6_getValue("selectBrazilTier")+"</strong><br>--Ask for Brazil Help Timer: <strong>"+
getHoursTime("AskforHelpBrazilTimer")+"</strong><br>Ask for Chicago help: <strong>"+RX6_getValue("selectChicagoTier")+"</strong><br>--Ask for Chicago Help Timer: <strong>"+getHoursTime("AskforHelpChicagoTimer")+"</strong><br>Ask for London help: <strong>"+RX6_getValue("selectLondonTier")+"</strong><br>--Ask for London Help Timer: <strong>"+getHoursTime("AskforLondonHelpTimer")+"</strong><br>Ask for London help: <strong>"+RX6_getValue("selectSaTier")+"</strong><br>--Ask for London Help Timer: <strong>"+
getHoursTime("AskforSaHelpTimer")+"</strong><br>Ask for Arena Power Cards: <strong>"+showIfUnchecked(RX6_getValue("autoAskPowerCards"))+"</strong><br>--Ask for Arena Power Cards Timer: <strong>"+getHoursTime("autoAskPowerCardsTimer")+"</strong><br>Participate in Richie's Stash Event: <strong>"+showIfUnchecked(RX6_getValue("autoBuildStash"))+"</strong><br>--Richie's Stash Event Timer: <strong>"+getHoursTime("autoBuildStashTimer")+"</strong><br>Ask to Join City Crews: <strong>"+showIfUnchecked(RX6_getValue("autoAskCityCrew"))+
"</strong><br>--Ask to Join City Crews Timer: <strong>"+getHoursTime("autoAskCityCrewTimer")+"</strong><br>Process and Log Player Updates: <strong>"+showIfUnchecked(RX6_getValue("logPlayerUpdates"))+"</strong><br>Enable publishing to FB Wall: <br>--Global Publishing: <strong>"+showIfUnchecked(RX6_getValue("autoGlobalPublishing"))+"</strong><br>--Ice bonus: <strong>"+showIfUnchecked(RX6_getValue("autoIcePublish"))+"</strong><br>---Ice bonus Frequency: <strong>"+RX6_getValue("autoIcePublishFrequency")+
"</strong><br>--Ice bonus Stack: <strong>"+showIfUnchecked(RX6_getValue("autoIceStack"))+"</strong><br>---Ice bonus Stack Frequency: <strong>"+RX6_getValue("autoIceStackFrequency")+"</strong><br>--Automatically share wishlist: <strong>"+showIfUnchecked(RX6_getValue("autoShareWishlist"))+"</strong><br>---Hour interval for sharing wishlist: <strong>"+RX6_getValue("autoShareWishlistTime")+"</strong><br>---Auto Share Wishlist Timer: <strong>"+getHoursTime("wishListTimer")+"</strong><br>Message Center: <br>--autoOpenGiftsTimer: "+
getHoursTime("autoOpenGiftsTimer")+"</strong><br>--Auto Accept Gifts: <strong>"+showIfUnchecked(RX6_getValue("autoAcceptMsgGifts"))+"</strong><br>----autoOpenFreeGiftsTimer: "+getHoursTime("autoOpenFreeGiftsTimer")+"</strong><br>----Ignore Daily Item Limit (20): <strong>"+showIfUnchecked(RX6_getValue("autoAcceptMsgNoLimit"))+"</strong><br>----Ignore Daily Secret Drop Limit (3):<strong>"+showIfUnchecked(RX6_getValue("autoAcceptMsgSecretDropNoLimit"))+"</strong><br>--Auto Accept Boosts: <strong>"+showIfUnchecked(RX6_getValue("autoAcceptMsgBoosts"))+
"</strong><br>--Auto Accept Crew: <strong>"+radioOptions[GM_getIntValue("autoAcceptMsgCrew")]+"</strong><br>--Auto Accept Energy Packs: <strong>"+radioOptions[GM_getIntValue("autoAcceptMsgEnergy")]+"</strong><br>--Auto Accept Mafia Invitations: <strong>"+radioOptions[GM_getIntValue("autoAcceptMsgMafia")]+"</strong><br>Enable Auto War: <br>--Auto War Mode: <strong>"+warModeChoices[RX6_getValue("warMode",0)]+"</strong><br>---Auto War Target List: <strong>"+RX6_getValue("autoWarTargetList",0)+"</strong><br>---Auto War Timer: <strong>"+
getHoursTime("warTimer")+"</strong><br>-----------------Family-----------------<br>Enable Personal Operations: <strong>"+showIfUnchecked(RX6_getValue("autoStartMyOps"))+"</strong><br>Enable Joining Personal Operations: <strong>"+showIfUnchecked(RX6_getValue("autoJoinMyOps"))+"</strong><br>--Check My Operations Timer: <strong>"+getHoursTime("myOpsTimer")+"</strong><br>Participate In Family Operations: <strong>"+showIfUnchecked(RX6_getValue("autoStartFamOps"))+"</strong><br>--Check Family Operations Timer: <strong>"+
getHoursTime("famOpsTimer")+"</strong><br>";RX6_getValue("fnirInyhrSum",returnValue())==parseXMLResponse()&&(e+="Enable Auto Family Rewards Collect: <strong>"+showIfUnchecked(RX6_getValue("AutoFamilyRewards"))+"</strong><br>Family Rewards Collect On Level Up: <strong>"+showIfUnchecked(RX6_getValue("AutoFamilyRewardsLevelUp"))+"</strong><br>Enable Raven Fighting: <strong>"+showIfUnchecked(RX6_getValue("autoFightRaven"))+"</strong><br>--Only use Combo's: <strong>"+showIfUnchecked(RX6_getValue("ravenComboFightingOnly"))+
"</strong><br>--use Green Combo: <strong>"+showIfUnchecked(RX6_getValue("ravenGreenCombo"))+"</strong><br>--use Yellow Combo: <strong>"+showIfUnchecked(RX6_getValue("ravenYellowCombo"))+"</strong><br>--use Red Combo: <strong>"+ravenRedCombosTxt[RX6_getValue("ravenRedCombo",0)]+"</strong><br>Enable Family Bosses: <strong>"+showIfUnchecked(RX6_getValue("autoFamilyBosses"))+"</strong><br>Enable Auto Family Boss Fighting: <strong>"+showIfUnchecked(RX6_getValue("autoFamilyBossFighting"))+"</strong><br>--Boss Role: <strong>"+
bossRoles[RX6_getValue("bossRole",0)]+"</strong><br>--Boss Stamina Limit: <strong>"+bossStaminaLimits[RX6_getValue("bossStaminaLimit",0)]+"</strong><br>--Boss Rage Limit: <strong>"+RX6_getValue("bossRageLimit",0)+"</strong><br>--Only use Boosts in Combo's: <strong>"+showIfUnchecked(RX6_getValue("autoComboFightingOnly"))+"</strong><br>Ask for Family Boss Boosts: <strong>"+showIfUnchecked(RX6_getValue("askBossFightBoosts"))+"</strong><br>Send Family Boss Boosts: <strong>"+showIfUnchecked(RX6_getValue("sendBossFightBoosts"))+
"</strong><br>Enable AutoBattle Fighting: <strong>"+showIfUnchecked(RX6_getValue("AutoBattleFight"))+"</strong><br>Enable Battle Safehouse Attacking: <strong>"+showIfUnchecked(RX6_getValue("AutoBattleSafehouse"))+"</strong><br>Enable AutoBattle (Only if Underboss/GF): <strong>"+showIfUnchecked(RX6_getValue("AutoBattle"))+"</strong><br>--Clan/Family ID: <strong>"+RX6_getValue("AutoBattleClanID",0)+"</strong><br>Enable Auto Free Gifting: Item no <strong>"+GM_getIntValue("selectFreeGift",0)+"</strong><br>--Auto Send Free Gift Timer: <strong>"+
getHoursTime("autoFreeGiftTimer")+"</strong><br>Enable Asking for Free Gifts: Item No <strong>"+GM_getIntValue("selectAskFreeGift",0)+"</strong><br>--Auto Ask Free Gift Timer: <strong>"+getHoursTime("autoAskFreeGiftTimer")+"</strong><br>Enable RX6 Gift Dispatcher to: <strong>"+RX6_getValue("dispatchTarget",0)+"</strong><br>--RX6 Gift Dispatcher Timer: <strong>"+getHoursTime("autoDispatchTimer")+"</strong><br>");e+="-------------------Autostat Tab--------------------<br>Enable auto-stat: <strong>"+
showIfUnchecked(RX6_getValue("autoStat"))+"</strong><br>Disable auto-stat: <strong>"+showIfUnchecked(RX6_getValue("autoStatDisable"))+"</strong><br>-Attack Base: <strong>"+RX6_getValue("autoStatAttackBase")+"</strong><br>-Defense Base: <strong>"+RX6_getValue("autoStatDefenseBase")+"</strong><br>-Health Base: <strong>"+RX6_getValue("autoStatHealthBase")+"</strong><br>-Energy Base: <strong>"+RX6_getValue("autoStatEnergyBase")+"</strong><br>-Stamina Base: <strong>"+RX6_getValue("autoStatStaminaBase")+
"</strong><br>-Attack Ratio: <strong>"+RX6_getValue("autoStatAttackRatio")+"</strong><br>-Defense Ratio: <strong>"+RX6_getValue("autoStatDefenseRatio")+"</strong><br>-Health Ratio: <strong>"+RX6_getValue("autoStatHealthRatio")+"</strong><br>-Energy Ratio: <strong>"+RX6_getValue("autoStatEnergyRatio")+"</strong><br>-Stamina Ratio: <strong>"+RX6_getValue("autoStatStaminaRatio")+"</strong><br>-Attack Mode: <strong>"+RX6_getValue("autoStatAttackMode")+"</strong><br>-Defense Mode: <strong>"+RX6_getValue("autoStatDefenseMode")+
"</strong><br>-Health Mode: <strong>"+RX6_getValue("autoStatHealthMode")+"</strong><br>-Energy Mode: <strong>"+RX6_getValue("autoStatEnergyMode")+"</strong><br>-Stamina Mode: <strong>"+RX6_getValue("autoStatStaminaMode")+"</strong><br>-Attack Prio: <strong>"+RX6_getValue("autoStatAttackPrio")+"</strong><br>-Defense Prio: <strong>"+RX6_getValue("autoStatDefensePrio")+"</strong><br>-Health Prio: <strong>"+RX6_getValue("autoStatHealthPrio")+"</strong><br>-Energy Prio: <strong>"+RX6_getValue("autoStatEnergyPrio")+
"</strong><br>-Stamina Prio: <strong>"+RX6_getValue("autoStatStaminaPrio")+"</strong><br>-Attack Fallback: <strong>"+RX6_getValue("autoStatAttackFallback")+"</strong><br>-Defense Fallback: <strong>"+RX6_getValue("autoStatDefenseFallback")+"</strong><br>-Health Fallback: <strong>"+RX6_getValue("autoStatHealthFallback")+"</strong><br>-Energy Fallback: <strong>"+RX6_getValue("autoStatEnergyFallback")+"</strong><br>-Stamina Fallback: <strong>"+RX6_getValue("autoStatStaminaFallback")+"</strong><br>-Rest AutoStat: <strong>"+
RX6_getValue("restAutoStat")+"</strong><br>-Next Stat: <strong>"+RX6_getValue("nextStat")+"</strong><br>Select City Activate Priority: <br>";for(i=1;4>i;i++){var f=cities[RX6_getValue("selectCityPrio"+i,i+5)][CITY_ALIAS].capitalize(),e=e+("--City Priority "+i+"Activate "+f+" Crew Members: <br>"),e=e+("Activate "+f+" Crew Members: <br>");for(j=1;9>j;j++)c="select"+f+"Crew"+j,e+="--Crew Priority "+j+": <strong>"+RX6_getValue(c,0)+" - "+cityCrewTitles[RX6_getValue(c,0)][0]+"</strong><br>";e+="---Activate "+
f+" Crew Timer: <strong>"+getHoursTime("activate"+f+"CrewTimer")+"</strong><br>"}e+="-------------------Energy Tab--------------------<br>Spend energy to perform any combination of jobs: <strong>"+showIfUnchecked(RX6_getValue("autoMission"))+"</strong><br>Optimize at end level: <strong>"+showIfUnchecked(RX6_getValue("endLevelOptimize"))+"</strong><br>--use NY Only: <strong>"+showIfUnchecked(RX6_getValue("endLevelNYOnly"))+"</strong><br>Force Auto Withdraw for Jobs: <strong>"+showIfUnchecked(RX6_getValue("autoWithDraw"))+
"</strong><br>Repeat Job: <strong>"+showIfUnchecked(RX6_getValue("repeatJob"))+"</strong><br>";e=missions[RX6_getValue("selectMission")]?e+("--selectedMission to Perform: <strong>"+missions[RX6_getValue("selectMission")][MISSION_NAME]+"</strong><br>"):e+"--selectedMission to Perform:  <strong>undefined,please check energy settings</strong><br>";e+="---Jobs selected: <strong>"+a+"</strong><br>Master Tier: <strong>"+b+"</strong><br>--Switch to New District ASAP: <strong>"+showIfUnchecked(RX6_getValue("switchDistrict"))+
"</strong><br>Confront Secret District Bosses: <br>--Using Stamina: <strong>"+showIfUnchecked(RX6_getValue("autoStamFightBosses"))+"</strong><br>---Stamina Limit: <strong>"+RX6_getValue("autoStamFightBossesLimit")+"</strong><br>--Using Boosts: <strong>"+showIfUnchecked(RX6_getValue("autoBoostFightBosses"))+"</strong><br>--Use All Boosts: <strong>"+showIfUnchecked(RX6_getValue("autoUseAllBoosts"))+"</strong><br>Job Bandit Settings: <br>--Cash Bandit: <strong>"+banditChoices[RX6_getValue("setCashBandit")]+
"</strong><br>--Job Bandit: <strong>"+banditChoices[RX6_getValue("setJobBandit")]+"</strong><br>--XP Bandit: <strong>"+banditChoices[RX6_getValue("setXPBandit")]+"</strong><br>Enable Boss Fight-Confront Agostino Cleto: <strong>"+showIfUnchecked(RX6_getValue("autoFightAgostino"))+"</strong><br>Spend Packs: <strong>"+burnModes[RX6_getValue("autoEnergyPack",0)]+"</strong><br>--Estimated job ratio: <strong>"+RX6_getValue("estimateJobRatio")+"</strong><br>--Force Pack when boosted stat falls below pts: <strong>"+
RX6_getValue("autoEnergyPackForcePts")+"</strong><br>Start spending energy for jobs when: <strong>"+RX6_getValue("selectEnergyUse")+" "+numberSchemes[RX6_getValue("selectEnergyUseMode",0)]+" (refill to "+SpendEnergy.ceiling+")</strong><br>Suspend for jobs while below: <strong>"+RX6_getValue("selectEnergyKeep")+" "+numberSchemes[RX6_getValue("selectEnergyKeepMode",0)]+" (keep above "+SpendEnergy.floor+")</strong><br>Suspend for Operations while below: <strong>"+RX6_getValue("selectMissionEnergyKeep")+
" "+numberSchemes[RX6_getValue("selectMissionEnergyKeepMode",0)]+" (keep above "+SpendMissionEnergy.floor+")</strong><br>--Energy use started: <strong>"+RX6_getValue("useEnergyStarted")+"</strong><br>Ignore reserve to level-up: <strong>"+showIfUnchecked(RX6_getValue("allowEnergyToLevelUp"))+"</strong><br>-------------------Stamina Tab-------------------<br>Spend stamina: <strong>"+showIfUnchecked(RX6_getValue("staminaSpend"))+"</strong><br>Log Details: <strong>"+showIfUnchecked(RX6_getValue("staminaLogDetails"))+
"</strong><br>How: <strong>"+staminaSpendChoices[RX6_getValue("staminaSpendHow",0)]+"</strong><br>  -Rob in: <strong>"+locations[RX6_getValue("robLocation",NY)]+"</strong><br>  -BGR in this city only: <strong>"+RX6_getValue("noBGRTravel")+"</strong><br>  Fast Rob: <strong>"+showIfUnchecked(RX6_getValue("fastrob"))+"</strong><br>  Use Burners: <strong>"+showIfUnchecked(RX6_getValue("useBurners"))+"</strong><br>  Use Rob Squads: <strong>"+showIfUnchecked(RX6_getValue("useRobSquads"))+"</strong><br>  RobFight StaminaFloor: <strong>"+
RX6_getValue("robFightStaminaFloor")+"</strong><br>  Skip iced targets: <strong>"+showIfUnchecked(RX6_getValue("iceCheck"))+"</strong><br>  -Fight in: <strong>"+fightLocations[RX6_getValue("fightLocation",0)]+"</strong><br>  -BGF in this city only: <strong>"+RX6_getValue("noBGFTravel")+"</strong><br>  -Reattack threshold: <strong>"+RX6_getValue("reattackThreshold")+"</strong><br>  -Powerattack: <strong>"+showIfUnchecked(RX6_getValue("staminaPowerattack"))+"</strong><br>  -RX6 DoubleTap: <strong>"+
showIfUnchecked(RX6_getValue("useDoubleTap"))+"</strong><br>  -Avoid High Health Targets when minor damage is done : <strong>"+showIfUnchecked(RX6_getValue("useAvoidLittleDamage"))+"</strong><br>  -Avoid Fight List Bots,err Bosses : <strong>"+showIfUnchecked(RX6_getValue("useAvoidListBosses"))+"</strong><br>  -Use Fight Boosts: <strong>"+boostModes[RX6_getValue("useFightBoosts")]+"</strong><br>  -Rivals Mode: <strong>"+fightRivalsModes[RX6_getValue("fightRivalsMode")]+"</strong><br>  -Max Number of Attacks per Opponent: <strong>"+
RX6_getValue("fightMaxAttacks")+")</strong><br>  -Random fight max level: <strong>"+RX6_getValue("fightLevelMax")+" ("+showIfRelative("fightLevelMaxRelative")+")</strong><br>  -Random fight max mafia: <strong>"+RX6_getValue("fightMafiaMax")+" ("+showIfRelative("fightMafiaMaxRelative")+")</strong><br>  -Random fight min mafia: <strong>"+RX6_getValue("fightMafiaMin")+" ("+showIfRelative("fightMafiaMinRelative")+")</strong><br>  -Random fight max health: <strong>"+RX6_getValue("fightHealthMax")+")</strong><br>  -Random fight max health pct: <strong>"+
RX6_getValue("fightHealthPctMax")+")</strong><br>  -Fight Labels: <strong>"+fightLabels[RX6_getValue("fightLabelCriteria",0)]+"</strong><br>  -Random fight use Patterns: <strong>"+showIfUnchecked(RX6_getValue("fightNames"))+"</strong><br>  -Random fight avoid names: <strong>"+showIfUnchecked(RX6_getValue("fightAvoidNames"))+"</strong><br>  -Random fight specific names: <strong>"+showIfUnchecked(RX6_getValue("fightOnlyNames"))+"</strong><br>  -Families list: <strong>"+encodeURI(RX6_getValue("fightClanName"))+
"</strong><br>  -List fight opponents: <strong>"+RX6_getValue("pfightlist")+"</strong><br>  -List fight remove stronger: <strong>"+showIfUnchecked(RX6_getValue("fightRemoveStronger"))+"</strong><br>  -List fight fightlist fallback: <strong>"+showIfUnchecked(RX6_getValue("fightFallback"))+"</strong><br>  -Use Rivals Check: <strong>"+showIfUnchecked(RX6_getValue("useRivalsCheck"))+"</strong><br>  -Collect hitman bounties in: <strong>"+locations[RX6_getValue("hitmanLocation",0)]+"</strong><br>  -Hitman min bounty: <strong>"+
parseCash(RX6_getValue("hitmanBountyMin"))+"</strong><br>  -Hitman bounty selection: <strong>"+bountySelectionChoices[RX6_getValue("bountySelection")]+"</strong><br>  -Hitman use Patterns: <strong>"+showIfUnchecked(RX6_getValue("hitmanNames"))+"</strong><br>  -Hitman avoid names: <strong>"+showIfUnchecked(RX6_getValue("hitmanAvoidNames"))+"</strong><br>  -Hitman specific names: <strong>"+showIfUnchecked(RX6_getValue("hitmanOnlyNames"))+"</strong><br>  -Hitman families list: <strong>"+encodeURI(RX6_getValue("hitmanClanName"))+
"</strong><br>  -AutoHit bounty: <strong>"+parseCash(RX6_getValue("autoHitListBounty"))+"</strong><br>  -Set Bounties in: <strong>"+locations[RX6_getValue("autoHitListLoc",0)]+"</strong><br>  -Random <strong>"+showIfUnchecked(RX6_getValue("autoHitListRandom"))+"</strong><br>  -AutoHit opponents: <strong>"+RX6_getValue("pautoHitOpponentList")+"</strong><br>  -AutoHit background: <strong>"+showIfUnchecked(RX6_getValue("bgAutoHitCheck"))+"</strong><br>  -Random Stam Spend - Fight in: <strong>"+RX6_getValue("randomFightLocations")+
"</strong><br>  -Random Stam Spend - Rob in: <strong>"+RX6_getValue("randomRobLocations")+"</strong><br>  -Random Stam Spend - Hit in: <strong>"+RX6_getValue("randomHitmanLocations")+"</strong><br>Stamina threshold: <strong>"+RX6_getValue("selectStaminaUse")+" "+numberSchemes[RX6_getValue("selectStaminaUseMode",0)]+" (refill to "+SpendStamina.ceiling+")</strong><br>  -Stamina use started: <strong>"+RX6_getValue("useStaminaStarted")+"</strong><br>Stamina Jobs & Fights reserve: <strong>"+RX6_getValue("selectStaminaKeep")+
" "+numberSchemes[RX6_getValue("selectStaminaKeepMode",0)]+" (keep above "+SpendStamina.floor+")</strong><br>Stamina Manual reserve: <strong>"+RX6_getValue("selectMissionStaminaKeep")+" "+numberSchemes[RX6_getValue("selectMissionStaminaKeepMode",0)]+" (Operations will keep above "+SpendMissionStamina.floor+")</strong><br>Ignore reserve to level-up: <strong>"+showIfUnchecked(RX6_getValue("allowStaminaToLevelUp"))+"</strong><br>------------------Health Tab-------------------<br>Enable auto-heal: <strong>"+
showIfUnchecked(RX6_getValue("autoHeal"))+"</strong><br>--Heal in: <strong>"+locations[RX6_getValue("healLocation")]+"</strong><br>--When health falls below: <strong>"+RX6_getValue("healthLevel")+"</strong><br>--autoUse Power Packs to Heal: <strong>"+showIfUnchecked(RX6_getValue("autoPowerPackHeal"))+"</strong><br>----autoIgnore Power Packs when lacking stamina: <strong>"+showIfUnchecked(RX6_getValue("ignorePowerPackHeal"))+"</strong><br>----autoPowerPackHealTreshold: <strong>"+RX6_getValue("autoPowerPackHealTreshold")+
"</strong><br>--Heal in NY when BGF: <strong>"+showIfUnchecked(RX6_getValue("autoHealBackup"))+"</strong><br>Minimum Stamina Allowing auto-Heal(Fight then Rob switch): <strong>"+RX6_getValue("stamina_min_heal")+"</strong><br>Hide in Hospital: <strong>"+showIfUnchecked(RX6_getValue("hideInHospital"))+"</strong><br>--Heal if health is above 19: <strong>"+showIfUnchecked(RX6_getValue("forceHealOpt7"))+"</strong><br>--Heal after 5 minutes: <strong>"+showIfUnchecked(RX6_getValue("forceHealOpt5"))+"</strong><br>--Heal when stamina is full: <strong>"+
showIfUnchecked(RX6_getValue("forceHealOpt4"))+"</strong><br>--Heal when stamina can be spent: <strong>"+showIfUnchecked(RX6_getValue("forceHealOpt3"))+"</strong><br>Hitlist riding: <strong>"+showIfUnchecked(RX6_getValue("hideAttacks"))+"</strong><br>--Hitlist riding XP limit: <strong>"+RX6_getValue("rideHitlistXP")+"</strong><br>------------------Cash Tab-------------------<br>Collect Takes: <strong>"+showIfUnchecked(RX6_getValue("collectTakeNew York"))+"</strong><br>  -Next take in NY:"+timeLeftGM("takeHourNew York")+
"</strong><br>Collect BRAZIL Take: <strong>"+showIfUnchecked(RX6_getValue("collectTakeBrazil"))+"</strong><br>  -Next take in BRAZIL:"+timeLeftGM("takeHourBrazil")+"</strong><br>Collect CHICAGO Take: <strong>"+showIfUnchecked(RX6_getValue("collectTakeChicago"))+"</strong><br>  -Next take in CHICAGO:"+timeLeftGM("takeHourChicago")+"</strong><br>Collect LONDON Take: <strong>"+showIfUnchecked(RX6_getValue("collectTakeLondon"))+"</strong><br>  -Next take in LONDON:"+timeLeftGM("takeHourLondon")+"</strong><br>Collect SA Take: <strong>"+
showIfUnchecked(RX6_getValue("collectTakeSa"))+"</strong><br>  -Next take in SA:"+timeLeftGM("takeHourSouth Africa")+"</strong><br>Collect Parts: <strong>"+showIfUnchecked(RX6_getValue("collectParts"))+"</strong><br>  -Next take at :"+timeLeftGM("partsHour")+"</strong><br>";for(ctCount=0;ctCount<ctLength;ctCount++)propItemId=cityProperties[ctCount][ctGMId]+"Id",e+="Build from "+cityProperties[ctCount][ctTitle]+": <strong>"+showIfUnchecked(RX6_getValue(cityProperties[ctCount][ctGMId]))+"</strong><br>  Item Type: <strong>"+
cityProperties[ctCount][ctArray][RX6_getValue(propItemId,0)][0]+"</strong><br>";ctCount=0;for(cpLength=cityParts.length;ctCount<cpLength;ctCount++)propItemId=cityParts[ctCount][ptGMId]+"Id",e+=cityParts[ctCount][ptTitle]+": <strong>"+showIfUnchecked(RX6_getValue(cityParts[ctCount][ptGMId]))+"</strong><br>  Item Type: <strong>"+cityParts[ctCount][ptArray][RX6_getValue(propItemId,0)][0]+"</strong><br>";e+="Auto Upgrade Global Properties: <strong>"+showIfUnchecked(RX6_getValue("autoGlobalUpgrade"))+
"</strong><br>Ask for Brazil Parts: <strong>"+showIfUnchecked(RX6_getValue("askBrazilParts"))+"</strong><br>--Part Type: <strong>"+cityBrazilParts[RX6_getValue("askBrazilPartsId",0)][0]+"</strong><br>--Property Type: <strong>"+cityBrazilProps[RX6_getValue("askBrazilPropId",0)][0]+"</strong><br>Ask for Chicago Parts: <strong>"+showIfUnchecked(RX6_getValue("askChicagoParts"))+"</strong><br>--Part Type: <strong>"+cityChicagoParts[RX6_getValue("askChicagoPartsId",0)][0]+"</strong><br>--Property Type: <strong>"+
cityChicagoProps[RX6_getValue("askChicagoPropId",0)][0]+"</strong><br>Ask for London Parts: <strong>"+showIfUnchecked(RX6_getValue("askLondonParts"))+"</strong><br>--Part Type: <strong>"+cityLondonParts[RX6_getValue("askLondonPartsId",0)][0]+"</strong><br>--Property Type: <strong>"+cityLondonProps[RX6_getValue("askLondonPropId",0)][0]+"</strong><br>Ask for SA Parts: <strong>"+showIfUnchecked(RX6_getValue("askSaParts"))+"</strong><br>--Part Type: <strong>"+cityLondonParts[RX6_getValue("askSaPartsId",
0)][0]+"</strong><br>--Property Type: <strong>"+cityLondonProps[RX6_getValue("askSaPropId",0)][0]+"</strong><br>Auto Upgrade Limited Property: <strong>"+showIfUnchecked(RX6_getValue("autoLimitedParts"))+"</strong><br>Auto Upgrade Family Properties: <strong>"+showIfUnchecked(RX6_getValue("autoFamilyProperty"))+"</strong><br>";i=0;for(iLength=cities.length;i<iLength;i++)cities[i][CITY_CLOSED]||(e+="Enable auto-bank in "+cities[i][CITY_NAME]+": <strong>"+showIfUnchecked(RX6_getValue(cities[i][CITY_AUTOBANK]))+
"</strong><br>",e+="--Minimum deposit: "+cities[i][CITY_CASH_SYMBOL]+"<strong>"+RX6_getValue(cities[i][CITY_BANKCONFIG])+"</strong><br>");e+="Auto Upgrade Rykdo Bank: <strong>"+showIfUnchecked(RX6_getValue("autoSABank"))+"</strong><br>-  -  -  -  -  END SETTINGS DUMP  -  -  -  -  -";DEBUG(e)}catch(g){DEBUG(g)}}
function parsePlayerUpdates(a){var b=xpathFirst('.//div[@class="update_timestamp"]',a),b=b?b.innerHTML+" ":"",b=0==b.indexOf("0")?"":b,c=xpathFirst('.//div[@class="update_txt"]',a);if(!c)return addToLog("warning Icon","BUG DETECTED: Unable to read update text."),!0;var d=c.innerHTML,e=d.untag(),c=c.getElementsByTagName("a"),f,g;if(-1!=e.indexOf("your war"))addToLog("updateBad Icon",b+" "+d);else if(-1!=e.indexOf("attacked")){var h=1,d=linkToString(c[0],"user");1<c.length&&(d+=" "+linkToString(c[1],
"user"));a="Attacked";c[0]&&c[0].nextSibling&&c[0].nextSibling.nodeValue&&c[0].nextSibling.nodeValue.match(/(\d+) times/i)?(h=parseInt(RegExp.$1),a+=" "+RegExp.lastMatch):e.match(/(\d+) times/i)&&(h=parseInt(RegExp.$1),a+=" "+RegExp.lastMatch);a+=" by "+d;c=!1;if(e.match(/you won.*you gained.*?(\d+) experience points?.*?([A-Z]*?\$|\u00A2|\u00A3)([\d,]*\d)/i)){e=RegExp.$2+RegExp.$3;d=RegExp.$1;a+=' and <span class="good">WON</span>,gaining <span class="good">'+e+'</span> and <span class="good">'+d+
" experience</span>.";var l=parseCashLoc(e),e=parseCash(e),d=parseInt(d);RX6_setValue("passivetotalFightExpInt",String(GM_getIntValue("passivetotalFightExpInt",0)+d));RX6_setValue("passivefightWinCountInt",String(GM_getIntValue("passivefightWinCountInt",0)+h));c=!0;isGMChecked("hideAttacks")?(DEBUG("Riding Hitlist fight won."),RX6_setValue("currentHitXp",String(parseInt(RX6_getValue("currentHitXp",0)+d))),RX6_setValue("currentHitDollars",String(GM_getIntValue("currentHitDollars",0)+e)),DEBUG(a),isGMChecked("autoHeal")&&
(0==RX6_getValue("rideHitlistXP",0)&&0==d&&12<RX6_getValue("currentHitXp",0)?(DEBUG("Zero experience detected;turning off auto-heal.<br>(currentHitXp="+RX6_getValue("currentHitXp",0)+")"),RX6_setValue("autoHeal",0)):0<RX6_getValue("rideHitlistXP",0)&&RX6_getValue("currentHitXp",0)>=RX6_getValue("rideHitlistXP",0)&&(DEBUG(RX6_getValue("currentHitXp",0)+" experience accumulated;turning off auto-heal."),RX6_setValue("autoHeal",0)))):addToLog("updateGood Icon",b+a);e&&(RX6_setValue(cityStats[l][passivecashWins],
String(GM_getIntValue(cityStats[l][passivecashWins],0)+e)),c=!0)}else e.match(/([A-Z]*?\$|\u00A2|\u00A3)([\d,]*\d)/i)?(e=e.match(REGEX_CASH)[0],a+=' and <span class="bad">LOST</span>,losing <span class="bad">'+e+"</span>.",l=parseCashLoc(e),e=parseCash(e),RX6_setValue("passivefightLossCountInt",String(GM_getIntValue("passivefightLossCountInt",0)+h)),c=!0,isGMChecked("hideAttacks")?RX6_setValue("currentHitDollars",String(GM_getIntValue("currentHitDollars",0)-e)):addToLog("updateBad Icon",b+a),e&&(RX6_setValue(cityStats[l][passivecashLosses],
String(GM_getIntValue(cityStats[l][passivecashLosses],0)+e)),c=!0)):e.match(/taking (\d+) damage/i)?(a+=' and <span class="bad">LOST</span>,taking <span class="bad">'+RegExp.$1+"</span> damage.",addToLog("updateBad Icon",b+a)):addToLog("warning Icon","BUG DETECTED: Unable to read update win/loss.");c&&updateLogStats()}else if(-1!=e.indexOf("You were snuffed"))RX6_setValue("snuffCount",String(GM_getIntValue("snuffCount",0)+1)),c=!0,addToLog("updateBad Icon",b+'You <span class="bad">DIED</span>.'),
RX6_setValue("passivetotalFightExpInt",String(GM_getIntValue("passivetotalFightExpInt",0)-6));else if(-1!=e.indexOf("You were knocked out"))a=linkToString(c[0],"user"),d=linkToString(c[1],"attacker"),2<c.length&&(a+=" "+linkToString(c[1],"user"),d=linkToString(c[2],"attacker")),e=parseCash(e.split(" who claimed the ")[1]),a="Whacked by "+a+" who claimed the $"+makeCommaValue(parseInt(e))+" bounty set by "+d+".",RX6_setValue("whackedCount",String(parseInt(RX6_getValue("whackedCount",0)+1))),c=!0,isGMChecked("hideAttacks")&&
(DEBUG("Whacked riding hitlist."),RX6_setValue("currentHitXp",GM_getIntValue("currentHitXp",0)-6),RX6_setValue("totalHits",GM_getIntValue("totalHits",0)+1),RX6_setValue("totalXp",GM_getIntValue("totalXp",0)+GM_getIntValue("currentHitXp",0)),RX6_setValue("lastHitXp",GM_getIntValue("currentHitXp",0)),RX6_setValue("totalHitDollars",String(GM_getIntValue("currentHitDollars",0)+GM_getIntValue("totalHitDollars",0))),e=0>RX6_getValue("currentHitXp",0)?'<span class="bad">LOST '+RX6_getValue("currentHitXp",
0)+"</span>":'<span class="good">GAINED '+RX6_getValue("currentHitXp",0)+"</span>",0>GM_getIntValue("currentHitDollars",0)?(c='<span class="bad"> LOST $'+makeCommaValue(GM_getIntValue("currentHitDollars",0))+"</span>",addToLog("updateBad Icon",b+e+" experience and "+c+" on the hitlist.")):(c='<span class="good"> WON $'+makeCommaValue(GM_getIntValue("currentHitDollars",0))+"</span>",addToLog("updateGood Icon",b+e+" experience and "+c+" on the hitlist.")),DEBUG("Hitlist total values set;now clearing current values."),
RX6_setValue("currentHitXp",0),RX6_setValue("currentHitDollars","0"),DEBUG("Ensure that autoHeal is enabled."),RX6_setValue("autoHeal","checked")),addToLog("updateBad Icon",b+a);else if(-1!=e.indexOf("You were punched"))d=linkToString(c[0],"attacker"),1<c.length&&(d+=" "+linkToString(c[1],"attacker")),addToLog("updateBad Icon",b+("You were punched in the face by "+d+"."));else if(-1!=e.indexOf("You fought as"))a=linkToString(c[0],"user"),-1!=c[0].getAttribute("href").indexOf("xw_controller=clan")?
(a+=" "+linkToString(c[1],"user"),d=linkToString(c[2],"user"),3<c.length&&(d+=linkToString(c[3],"user"))):(d=linkToString(c[1],"user"),2<c.length&&(d+=linkToString(c[2],"user"))),e=e.match(REGEX_CASH)[0],addToLog("updateGood Icon",b+("You fought as "+a+"'s Capo and defeated "+d+',receiving <span class="good">'+e+"</span> for your efforts."));else if(-1!=e.indexOf("needs your help")){if(f=xpathFirst('.//a[contains(@onclick,"controller=stats")]',a),g=xpathFirst('.//a[contains(@href,"give_help")]',a))return Autoplay.fx=
function(){clickAction="help";clickContext={user:linkToString(f,"user"),help:linkToString(g)};clickElement(g);DEBUG("Clicked to help with a job.")},Autoplay.delay=getAutoPlayDelay(),Autoplay.start(),!1}else if(-1!=e.indexOf("went to war with")){if(f=xpathFirst('.//a[contains(@onclick,"controller=stats")]',a),g=xpathFirst('.//a[contains(text(),"Help out your friends")]',a))return Autoplay.fx=function(){clickContext={user:linkToString(f,"user"),help:linkToString(g)};clickElement(g);helpWar=!0;DEBUG("Clicked to help in war.")},
Autoplay.delay=getAutoPlayDelay(),Autoplay.start(),!1}else if(-1!=e.indexOf("needs more Burners")){if(f=xpathFirst('.//a[contains(@onclick,"controller=stats")]',a),g=xpathFirst('.//a[contains(@href,"action=call_for_help_get_phone")]',a))return Autoplay.fx=function(){clickAction="help burners";clickContext={user:linkToString(f,"user"),help:linkToString(g)};clickElement(g);DEBUG("Clicked to help with burners.")},Autoplay.delay=getAutoPlayDelay(),Autoplay.start(),!1}else if(e.match(/(.*) is close to completing a/i)||
e.match(/(.*) wants to build an awesome/i)||e.match(/(.*) has decided to upgrade/i)){var k=RegExp.$1;if(g=xpathFirst('.//a[contains(@onclick,"action=cs_help_item") or contains(@onclick,"action=cs_help_initial")]',a))return Autoplay.fx=function(){clickAction="help parts";clickContext={user:k,help:linkToString(g)};clickElement(g);DEBUG("Clicked to help with parts.")},Autoplay.delay=getAutoPlayDelay(),Autoplay.start(),!1}else if(-1!=e.indexOf("claimed your $"))a=linkToString(c[0],"user"),-1!=c[0].getAttribute("href").indexOf("xw_controller=clan")?
(a+=" "+linkToString(c[1],"user"),d=linkToString(c[2],"user"),3<c.length&&(d+=linkToString(c[3],"user"))):(d=linkToString(c[1],"user"),2<c.length&&(d+=linkToString(c[2],"user"))),a=a+" claimed your "+e.match(REGEX_CASH)[0]+" bounty on "+d+".",addToLog("updateGood Icon",b+a);else if(e.match(/you earned.*achievement/i))addToLog("updateGood Icon",b+d);else if(e.match(/earned some great items/i))DEBUG(b+d);else if(e.match(/earned the.*achievement/i))DEBUG(b+d);else if(e.match(/went to war with you/i))DEBUG(b+
d);else if(e.match(/declared war against you/i))addToLog("updateBad Icon",b+" "+d),GM_getIntValue("warMode",0)&&setGMTime("warTimer","00:10");else if(-1!=e.indexOf("war on your top mafia")){if(f=xpathFirst('.//a[contains(@onclick,"controller=stats")]',a),g=xpathFirst('.//a[contains(text(),"Fight Back")]',a))return Autoplay.fx=function(){clickContext={user:linkToString(f,"user"),help:linkToString(g)};clickElement(g);helpWar=!0;DEBUG("Clicked to help Top Mafia in war.")},Autoplay.delay=getAutoPlayDelay(),
Autoplay.start(),!1}else e.match(/mission has been completed/i)?DEBUG("found playerupdate mission notice: "+b+d):addToLog("info Icon",b+d);return!0}function getActionBox(a){return onHome()?(a=xpathFirst('.//div[@class="message_box_full_border" and contains(.,"'+a+'")]',innerPageElt))?a:!1:!1}function getActionLink(a,b){var c=xpathFirst('.//a[contains(.,"'+b+'")]',a);c||(c=xpathFirst('.//a//span[contains(.,"'+b+'")]',a));c||(c=xpathFirst('.//a//span//span[contains(.,"'+b+'")]',a));return c?c:!1}
function autoWishlist(){if(!onInventoryTab()&&!onCollectionsTab())return Autoplay.fx=function(){goInventoryNav()},Autoplay.start(),!0;if(!onCollectionsTab())return Autoplay.fx=function(){goCollectionsNav()},Autoplay.start(),!0;var a=GM_getFloatValue("autoShareWishlistTime",1),b=xpathFirst('.//div[@id="wishlist_share_button"]//a',innerPageElt);b?(clickElement(b),addToLog("info Icon","Clicked to share wishlist,sharing again in "+a+" hour(s)"),1==a?setGMTime("wishListTimer","1 hour"):setGMTime("wishListTimer",
a+" hours")):(addToLog("warning Icon","Unable to share your wishlist,will try later."),setGMTime("wishListTimer","2 hours"));return!1}
function autoWarAttack(){if(!GM_getIntValue("warMode",0))return!1;helpWar&&(RX6_setValue("logPlayerUpdatesCount",1+RX6_getValue("logPlayerUpdatesCount",0)),helpWar=!1);var a=$x('.//a[contains(@href,"xw_controller=war&xw_action=attack")]',innerPageElt);if(a){DEBUG("autoWarAttack - Enemy Targets Found.");var b=a[Math.floor(Math.random()*a.length)];if(b)return Autoplay.fx=function(){clickAction="war";clickContext=b;clickElement(b)},Autoplay.start(),DEBUG("autoWarAttack - Helped by attacking Selected Target in ongoing war."),
!0;DEBUG("autoWarAttack - Unable to Help: Invalid War Target in ongoing war...")}else DEBUG("autoWarAttack - Unable to Help: No Enemy Targets found for ongoing war...");return!1}
function autoWar(){if(!GM_getIntValue("warMode",0))return!1;Autoplay.delay=getAutoPlayDelay();if(!onWarTab())return Autoplay.fx=goWarTab,Autoplay.start(),!0;var a=xpathFirst('.//span[contains(@id,"war_timer")]',innerPageElt);if(a){var b="1 hour",c=a.innerHTML.untag();isNaN(c)&&(c=timeLeft(c));3600>c&&(b=a.innerHTML.untag());if(a=$x('.//a[contains(@href,"xw_controller=war&xw_action=attack")]',innerPageElt)){var d=a[Math.floor(Math.random()*a.length)];if(d)return Autoplay.fx=function(){clickAction=
"war";clickContext=d;clickElement(d)},Autoplay.start(),DEBUG("Attacked Selected Target in ongoing war."),!0}var e=xpathFirst('.//a[@class="sexy_button_new short white sexy_call_new" and contains(@onclick,"postFeedAndSendCallForHelp") and not(contains(@class,"skip"))]');if(e&&isGMChecked("autoGlobalPublishing"))return clickElement(e),Autoplay.fx=function(){clickAction="war";clickContext=e;clickElement(e)},Autoplay.start(),DEBUG("Clicked to ask for help in ongoing war."),setGMTime("warTimer",b),!1;
setGMTime("warTimer",b);return!1}(b=$x('.//a[contains(@href,"xw_action=declare_war")]',innerPageElt))&&(d=b[Math.floor(Math.random()*b.length)]);if(!d||d&&!d.getAttribute("onclick").match(/target_id=p%7C(\d+)/))return DEBUG("War elements appeared to have been changed by Zynga: return in 1 hour."),setGMTime("warTimer","1 hour"),!1;b=RegExp.$1;2==RX6_getValue("warMode",0)&&((a=getSavedList("autoWarTargetList"))&&a.length?(a=a[Math.floor(Math.random()*a.length)],d.setAttribute("onclick",d.getAttribute("onclick").replace(b,
a)),d.setAttribute("href",d.getAttribute("href").replace(b,a))):(addToLog("warning Icon","There are no targets in your Enemies List. Changing War Settings to War a Random Enemy."),RX6_setValue("warMode",1)));Autoplay.fx=function(){clickAction="war";clickContext=d;clickElement(d);DEBUG("Clicked to start a new war.")};Autoplay.start();return!0}
function onHome(){var a=xpathFirst('.//div[@id="arena-module"]'),b=xpathFirst('.//div[@id="brazil_jobs" and (contains(@style,"hidden") or contains(@style,"0px;"))]');return a&&b?!0:a?!1:xpathFirst('.//div[@class="playerupdate_box"]',innerPageElt)||document.getElementById("MainModule")||xpathFirst('.//div[@class="empire_module_title"]',innerPageElt)?!0:!1}function onWarTab(){return xpathFirst('.//li[contains(@class,"tab_on")]//a[contains(.,"Declare War")]',innerPageElt)?!0:!1}
function onPropertyNav(){return xpathFirst('.//*[@name="buy_props" or @id="flash_content_propertiesV2" or @id="propertyV2Help"]',innerPageElt)?!0:!1}function onCityPropertyNav(){return xpathFirst('.//*[@class="propertyTab propertyTabLocal propertyTabSelected"]',innerPageElt)?!0:!1}function onProfileNav(){return xpathFirst('.//li[contains(@class,"tab_off")]//a[contains(.,"Achievements")]',innerPageElt)?!0:!1}
function onMyMafiaNav(){return xpathFirst('.//li[contains(@class,"tab_first")]//a[contains(.,"Recruit")]',innerPageElt)||xpathFirst('.//li[contains(@class,"tab_first")]//a[contains(.,"Families")]',innerPageElt)?!0:!1}function onFightTab(){return xpathFirst('.//li[contains(@class,"tab_on")]//a[contains(.,"Fight")]',innerPageElt)||xpathFirst('.//div[@id="fv2_widget_wrapper"]')?!0:!1}
function onFightersTab(){return xpathFirst('.//div[@id="fv2_widget_wrapper"]')?!1:xpathFirst('.//li[contains(@class,"tab_on tab_middle")]//a[contains(.,"Fighters")]',innerPageElt)?!0:!1}function onRivalsTab(){return xpathFirst('.//div[@id="fv2_widget_wrapper"]')?!1:xpathFirst('.//li[contains(@class,"tab_on tab_middle")]//a[contains(.,"Rivals")]',innerPageElt)?!0:!1}function onHitlistTab(){return xpathFirst('.//table[@class="hit_list"]',innerPageElt)?!0:!1}
function onInventoryTab(){return xpathFirst('.//li[contains(@class,"tab_on")]//a[contains(.,"Inventory")]',innerPageElt)||xpathFirst('.//li[contains(@class,"tab_on")]//a[contains(.,"Items")]',innerPageElt)?!0:!1}function onLootTab(){return xpathFirst('.//li[contains(@class,"tab_on")]//a[contains(.,"Loot")]',innerPageElt)?!0:!1}function onCollectionsTab(){return xpathFirst('.//li[contains(@class,"tab_on")]//a[contains(@onclick,"xw_controller=collection")]',innerPageElt)?!0:!1}
function onMarketTab(){return xpathFirst('.//div[@id="marketplace"]',innerPageElt)?!0:!1}
function goHome(){ajaxHandling=!1;if(6>level||onHome())city==SA?goFightNav():goJobsNav();else{if($("#nav_link_home_unlock").length)return $("#nav_link_home_unlock a").trigger("click"),DEBUG("jqMethod:Switching Pages: clicked to go to 'Home'"),autoReload(!1,"goHome"),!0;var a=xpathFirst('.//div[@id="nav_link_home_unlock"]/a');a||(a=xpathFirst('.//div[@class="nav_link home_link"]/a[contains(@onclick,"xw_controller=index")]'));a||(DEBUG("Can't find home nav link to click. Using fallback method."),a=
makeElement("a",null,{onclick:'return do_ajax("inner_page",'+('"remote/html_server.php?xw_controller=index&xw_action=view&xw_city='+city+'"')+",1,1,0,0);return false;"}));if(!a){var a=xpathFirst('.//div[@id="arena-module"]'),b=xpathFirst('.//div[@id="brazil_jobs" and (contains(@style,"hidden") or contains(@style,"0px;"))]');if(a&&b)return destroyByID("inner_flag"),autoReload(!1,"goHome"),!0;if(a)return destroyByID("inner_flag"),autoReload(!1,"goHome"),clickElement(a),!0}if(!a)return!1;DEBUG("Switching Pages : clicked to go to 'Home'");
clickElement(a);autoReload(!1,"goHome");return!0}}function logEvent(a,b,c,d,e){}function getHelp(a,b,c,d,e){}function getListed(a){}
function goProfileNav(a){var b=a.profile;b&&b.getAttribute("href")||(b=xpathFirst('.//table[@class="main_table fight_table"]//a[contains(@href,"xw_controller=stats")]',innerPageElt));if(b&&b.getAttribute("href").match(/user=(\w+)/)){var c=b.getAttribute("href"),d=c.split("&user=")[1].split("'")[0].split("&")[0];a.id=a.id.replace("p|","");c=c.replace(d,encode64("p|"+a.id).replace(/=/g,"%3D"));c.match(/this.href/)&&(c=c.replace("this.href='http://mwfb.zynga.com/mwfb/","return do_ajax('inner_page','")+
",1,1,0,0);return false;");DEBUG("Clicked to load profile (id="+a.id+" from profile link)");b.setAttribute("href",c);clickElement(b)}else(b=xpathFirst('.//table[@class="main_table fight_table"]//a[contains(@href,"xw_controller=fight")]',innerPageElt))&&b.getAttribute("href").match(/opponent_id=(\w+)/)?(c=" return do_ajax('inner_page','remote/html_server.php?xw_controller=stats&xw_action=view&xw_city="+city+"&user="+a.id+"&ref=fight_list',1,1,0,0);return false;",b.setAttribute("href",c),clickElement(b),
DEBUG("Clicked to load profile (id="+a.id+" from attack button)")):(DEBUG("Could not find profile link"),goFightNav())}function goWarTab(){var a=xpathFirst('.//div[@class="tab_content"]//a[contains(.,"Declare War")]',innerPageElt);a?(clickElement(a),DEBUG('Clicked to go to "Declare War" page.'),autoReload(!1,"goWar")):goFightNav()}
function goBank(){var a=xpathFirst('.//a[@class="bank_deposit"]');a?(clickElement(a),DEBUG("Clicked to go to bank."),autoReload(!1,"goBank")):addToLog("warning Icon","Can't find bank link to click.")}
function goJobsNav(){ajaxHandling=!1;var a=xpathFirst('.//div[@id="nav_link_jobs_unlock"]/a');a||(a=xpathFirst('//div[@class="nav_link jobs_link"]/a[contains(@onclick,"xw_controller=job")]'));a||(a=xpathFirst('.//a[@class="header_job_button"]',mastheadElt));if(!a){var a=xpathFirst('.//div[@id="job-module"]'),b=xpathFirst('.//div[@id="brazil_jobs" and (contains(@style,"hidden") or contains(@style,"0px;"))]');if(a&&b)return destroyByID("inner_flag"),autoReload(!1,"goHome"),clickElement(a),!0;if(a)return autoReload(!1,
"goHome"),destroyByID("inner_flag"),!0}a||(DEBUG("Can't find jobs nav link to click. Using fallback method."),a=makeElement("a",null,{onclick:'return do_ajax("inner_page",'+('"remote/html_server.php?xw_controller=job&xw_action=view&xw_city='+city+'"')+",1,1,0,0);return false;"}));if(!a)return!1;clickElement(a);DEBUG("Switching Pages : clicked to go to 'Jobs'");autoReload(!1,"goJobs");return!0}
function goInventoryNav(){var a=xpathFirst('//div[@class="nav_link inventory_link"]/a');a||(a=xpathFirst('.//a[@class="header_inventory_button"]',mastheadElt));a||(a=xpathFirst('.//div[@id="nav_link_inventory_unlock"]//a',mastheadElt));if(!a)return addToLog("warning Icon","Can't find Inventory nav link to click."),!1;clickElement(a);DEBUG("Clicked to go to Inventory.");autoReload(!1,"goInventory");return!0}
function goCollectionsNav(){var a=makeElement("a",null,{onclick:'return do_ajax("inner_page","remote/html_server.php?xw_controller=collection&xw_action=view&xw_city=1",1,1,0,0);return false;'});if(a)return clickElement(a),DEBUG("Clicked to go to Collections tab."),autoReload(!1,"goCollect"),!0;addToLog("warning Icon","Can't find Collections nav link to click.");return!1}
function goJobTab(a){var b;colorDEBUG("goJobTab",caq);var c=currentJobTab();colorDEBUG("goJobTab currentTab: "+c+" vs tabno: "+a,caq);if(-1==c&&city!=SA)return goJobsNav();if(c==a)return!0;colorDEBUG("CurrentTab: "+c+" and we need to go to Tab: "+a,caq);if(isNewCity(city)){if(!isSecretDistrict(city,a)&&city!=SA&&(b=xpathFirst('.//div[@district_id="'+a+'"]'),!b))return colorDEBUG("CurrentTab: "+c+" and we need to go to Tab: "+a+",but this tab is not available (yet) !",caq),!1;if(b=makeElement("a",
null,{onclick:'return do_ajax("inner_page","remote/html_server.php?xw_controller=job&xw_action=view&xw_city='+cities[city][CITY_NUMBER]+"&tab="+a+'",1,1 ,0,0);return false;'}))return DEBUG("Click RX6 link to open district: "+a),clickElement(b),autoReload(!1,"goJobTab"),!0;DEBUG("CurrentTab: "+c+" and we need to go to Tab: "+a+",but this tab is not available (yet) !");return!1}var d=0;city==NY&&(d=6>a?0:1);var e=0;city==NY&&(e=6>c?0:1);DEBUG("goJobTab: city="+city+" currentBar="+e+" currentTab="+c+
" barno="+d+" tabno="+a);if(e!=d)return city==NY&&(b=1==e?"Easy Jobs":"More Jobs"),b=xpathFirst('.//ul[contains(@id,"jobs_bar")]//a[contains(text(),"'+b+'")]',innerPageElt),DEBUG("Clicked to go to job bar "+d+". "),clickElement(b),autoReload(!1,"goJobTabBar"),!0;(b=xpathFirst('.//ul[@id="jobs_bar'+d+'"]//a[contains(@onclick,"&story_tab='+a+'") or contains(@onclick,"&episode_tab='+a+'") or contains(@onclick,"&tab='+a+'")]',innerPageElt))||(b=xpathFirst('.//li[@id="tab_'+a+'"]//a[contains(@onclick,"&story_tab='+
a+'") or contains(@onclick,"&episode_tab='+a+'") or contains(@onclick,"&tab='+a+'")]',innerPageElt));b||(b=xpathFirst('.//li[@id="tab_'+a+'"]//a[contains(@onclick,"tab='+a+'")]',innerPageElt));b||(b=xpathFirst('.//li[@id="tab_'+a+'"]//span[contains(text(),"Locked")]',innerPageElt));if(!b)return DEBUG("BUG DETECTED: Can't find job bar "+d+",tab "+a+" link to click. Currently on job bar "+e+",tab "+c+"."),!1;clickElement(b);DEBUG("Clicked to go to job tab "+a+".");autoReload(!1,"goJobTab");return!0}
function goJobTabPath(a){var b;if(currentJobTabPath()==a)return!0;b=xpathFirst('.//a[contains(@onclick,"ExpertMapController.changePath('+a+');")]');if(!b)return!1;clickElement(b);destroyByID("job_path_flag");DEBUG(" job,Clicked to go to tab "+a+" in gojobtabpath elt-b="+b.innerHTML);autoReload(!1,"goJobTab");return!0}
function logJobResponse(a){isGMChecked("TestChanges")&&RX6_setValue("jobResult",JSON.stringify(a));try{var b=a.city-1,c=a.name.replace(/\\/g,"").trim().clean(),d=parseInt(a.energy);JSON.stringify(a.extraData);var e=a.experience,f=parseInt(a.extraData.bonusExperience);f&&(e+="+"+f+" (Mastermind Bonus)");var g=makeCommaValue(parseCash(a.cash)),f=0;a.extraData.bonusCash&&(f=makeCommaValue(parseCash(a.extraData.bonusCash)));var h=makeCommaValue(parseCash(a.cashUsed)),l="RX6 spent ",l=d?l+('<span class="user">'+
d+" energy</span>"):l+'<span class="user">no energy</span> <span class="good">(Wheelman Bonus)</span>';h&&"0"!=h&&(l+=' and <span class="bad">'+cities[b][CITY_CASH_SYMBOL]+h+"</span>");l+=' to perform <span class="job">'+c+"</span>";g&&"0"!=g?(f&&(g+="+"+cities[b][CITY_CASH_SYMBOL]+f+" (Bagman Bonus)"),l+=',earning <span class="good">'+cities[b][CITY_CASH_SYMBOL]+g+'</span> and <span class="good">'+e+" experience</span>"):e&&(l+=',earning <span class="good">'+e+" experience</span>");l+=".";jobMasteryPercent=
parseInt(a.masteryTotal);var k=a.mastered;(100<=jobMasteryPercent||k)&&!isGMChecked("repeatJob")&&(l+=" Job 100% mastered !");l&&addToLog("process Icon",l)}catch(q){}}function bgBuyItems(a){mwap_do_ajax("job","buy_required_items","",a,"",jobCallback)}function bgKeelBandit(a,b,c){mwap_do_ajax("Job","eliminateBandit","",c+"&xw_person="+xw_user+"&stage="+b+"&job="+a,"",jobCallback)}
function bgDoJob(a,b){isGMChecked("droneModeFightFight")&&checkDroneStatus();var c=missions[a][MISSION_NUMBER],d=missions[a][MISSION_CITY],e=missions[a][MISSION_ENERGY],f="&job="+c+"&tab="+missions[a][MISSION_TAB]+"&clkdiv=btn_dojob_"+c,g=b.getAttribute("href"),g=g.substr(g.indexOf("?")+1),h=111;if(isGMChecked("autoMissionBlasterSpeed")){var l=!1,k=1,q=1,r=RX6_getValue("autoMissionBlasterSpeedSet",1);"0.0"!=RX6_getValue("selectTier","0.0")&&(r=4,l=!0,addToLog("info Icon","Master District Job complete: "+
jobMasteryPercent),l&&95<=jobMasteryPercent&&(r=1));energy/e<r&&(r=Math.floor(energy/e));if(isGMChecked("droneModeFightFight")&&!l&&1>=Math.ceil(ptsToNextLevel/(energy+stamina)*100)/100&&10<stamina)return;d==SA&&3E3<e&&(r=1,h=2E3);var p=function(){isGMChecked("autoMission")&&(l&&95<=jobMasteryPercent&&(r=1),isGMChecked("droneModeFightFight")&&!l?1>=checkDroneStatus()&&10<stamina?(p=null,k=r+1):mwap_do_ajax("job","dojob",d,f,g,jobCallback):mwap_do_ajax("job","dojob",d,f,g,jobCallback),k++,k<r&&0!=
$("#resumeButton").length&&window.setTimeout(p,h))};var s=function(){if(isGMChecked("autoMission")&&(l&&95<=jobMasteryPercent&&(r=1),isGMChecked("droneModeFightFight")&&!l?1>=checkDroneStatus()&&10<stamina?(s=null,k=r+1,busterTimer2=null):mwap_do_ajaxEbuster("job","dojob",d,f,g,jobCallback):mwap_do_ajaxEbuster("job","dojob",d,f,g,jobCallback),q++,q<r)){var a=Math.ceil(ptsToNextLevel/(energy+stamina)*100)/100,b=$("#resumeButton").length;1.3<a&&1E3<energy&&isGMChecked("autoMissionBlasterMega")&&!l&&
0!=b&&(busterTimer2=window.setTimeout(s,h))}};window.setTimeout(p,0);1.3<Math.ceil(ptsToNextLevel/(energy+stamina)*100)/100&&1E3<energy&&isGMChecked("autoMissionBlasterMega")&&!l&&(busterTimer2=window.setTimeout(s,0))}else mwap_do_ajax("job","dojob",d,f,g,jobCallback);/repeat single */}
function jobCallback(a,b,c,d,e,f,g){colorDEBUG("jobCallBack action: "+b,caq);if(e){if(/ERROR 500: response never closed/.test(g.responseText))return doAutoPlay(),!1;if("dojob"==b)if(isJsonString(g.responseText)){jsonresult=JSON.parse(g.responseText);jsonPageUpdate(jsonresult);if(jsonresult.hasOwnProperty("jobResult")){colorDEBUG("dojob : jobResult",cgr);var h=jsonresult.jobResult,l=h.name.replace(/\\/g,"").trim().clean();jobMasteryPercent=parseInt(h.masteryTotal);var k=parseInt(h.masteryIncrease);
d=h.mastered;a=!1;if(100<=jobMasteryPercent||d)a=!0,jobMasteryPercent=100;DEBUG("Job "+l+" is now "+jobMasteryPercent+"% mastered,mastery increased by "+k+"%.");logJobResponse(h);k=!1;h.hasOwnProperty("loot")&&(k=logLootDrops(h.loot,"newcity"));if(k){var q=!0,r=[];requirementJob.forEach(function(a){a[1].toUpperCase().trim().clean()==l.toUpperCase().trim().clean()&&r.push(a[0])});var p=getSavedList("itemList");if(0==r.length||"undefined"==typeof p[0]||0==p.length||!1==q)DEBUG("No relevant loot found or no needed items in required item list.");
else for(;k=r.pop();)for(DEBUG("Checking to see if "+k+" is needed."),d=0;d<p.length;d++)-1!=k.indexOf(p[d].trim())?(DEBUG("Check ! "+k+" is the item we are looking for."),removeSavedListItem("itemList",k),removeJobForItem("jobsToDo",k),a=!1,popJob()):DEBUG("Oops ! "+k+" is NOT the item we are looking for.")}d=RX6_getValue("cashNeeded",0);isNaN(d)?(k=parseInt(jsonresult.user_fields.user_cash)+parseInt(jsonresult.user_fields.user_bank_balance),d=parseCash(d),k>=d?(DEBUG("Cash Needed : "+d+" vs "+k+
" : seems you have enough to switch jobs",cgr),RX6_setValue("cashNeeded",0),RX6_setValue("savedMjobs",JSON.stringify([])),popJob()):(a=!1,DEBUG("Cash Needed : "+d+" vs "+k+" : seems you still don't have enough to switch jobs",cgr))):0==d&&(RX6_setValue("cashNeeded",-1),RX6_setValue("savedMjobs",JSON.stringify([])),popJob());b=!1;if(h.hasOwnProperty("lootBandit")){var s=missions.searchArray(l,0)[0],k=missions[s][MISSION_ENERGY],t=missions[s][MISSION_CITY];g=["setUnknown","setXPBandit","setCashBandit",
"setJobBandit"];k=h.lootBandit;for(bKey in k)if(!isNaN(bKey)&&k[bKey]&&k[bKey].hasOwnProperty("type")){lootDiv=document.createElement("div");lootDiv.innerHTML=k[bKey].markup.replace(/[\t\r\n]/g,"");(d=xpathFirst('.//div[@class="consumed-stats"]',lootDiv))&&colorDEBUG("consumed-stats: "+d.innerHTML);(d=xpathFirst('.//div[@class="bandit-status-icon"]',lootDiv))&&colorDEBUG("bandit-status-icon: "+d.innerHTML);(d=xpathFirst('.//div[@class="crew-used-msg"]',lootDiv))&&colorDEBUG("crew-used-msg: "+d.innerHTML);
if(d=xpathFirst(".//script",lootDiv))d.innerHTML.match(/time_left:\s?(\d+),/)&&colorDEBUG("time_left: "+RegExp.$1),d.innerHTML.match(/MW.Ajax.request\((.+)\);/)&&colorDEBUG("autoEliminate: "+RegExp.$1);var u=parseInt(k[bKey].type);c=RX6_getValue(g[u],1);colorDEBUG("jobLootBandit Type: "+u+"="+g[u]+" saved value: "+c);d=e=!1;switch(u){case 1:1==c&&(e=!0);2==c&&(d=!0);break;case 2:1==c&&(e=!0);2==c&&(d=!0);break;case 3:0==c?b=!0:1==c?e=!0:2==c&&(d=b=!0);break;default:colorDEBUG("!!! Unkown banditSetting !!!",
cre)}if(e)return colorDEBUG("PROCESSING jobLootBandit Type: "+u+"="+g[u]+" / "+c,cgr),h.temp="",k[bKey].markup.match(/&tmp=(.+)&xw_person/)&&(h.temp="&tmp="+RegExp.$1),bgKeelBandit(h.id,h.tab,h.temp),!0;if(d)return h.temp="",k[bKey].markup.match(/&tmp=(.+)&xw_person/)&&(h.temp="&tmp="+RegExp.$1),function(){setTimeout(function(){bgKeelBandit(h.id,h.tab,h.temp);addToLog("info Icon","RX6 just keeeeeeeeeeeled the Bandit from timer: ",u)},3E4)}(),!0;colorDEBUG("IGNORING jobLootBandit Type: "+u+"="+g[u]+
" / "+c,cre)}b&&popJob()}if((b||a)&&!isGMChecked("repeatJob"))return!1;doAutoPlay();return!1}if(jsonresult.hasOwnProperty("data")){colorDEBUG("dojob : data",cgr);s=RX6_getValue("selectMission");a=missions[s][MISSION_NAME];f=missions[s][MISSION_TAB];isNewCity(missions[s][MISSION_CITY])&&missions[s][MISSION_TABPATH]&&(f=missions[s][MISSION_TABPATH]);var v=missions[s][MISSION_NUMBER];if(void 0!==typeof jsonresult.data.impulseBuy.message){b=jsonresult.data.impulseBuy.message;if(-1!=b.indexOf("loot drops")){colorDEBUG("Seems RX6 needs (some) items to perform: "+
a);k=document.createElement("div");k.innerHTML=b;var k=xpathFirst('.//ul[@class="item_list"]//li[@class="clearfix"]',k),w=/(.+)\u00D7/i.exec(k.innerHTML.untag())[1];if(w){addToLog("info Icon",'Item(s) required to perform <span class="job">'+a+'</span>: <span class="loot">'+w+"</span>.");var p=getSavedList("itemList"),D=getSavedList("jobsToDo","");-1==D.indexOf(a)?(D.push(a),DEBUG("Saving "+a+" for later. Fetching pre-req items first."),setSavedList("jobsToDo",D)):DEBUG(a+" already saved for later. Fetching pre-req items first.");
q=!1;requirementJob.forEach(function(a){level>=cities[a[2]][CITY_LEVEL]&&a[0].toUpperCase().trim()==w.toUpperCase().trim()&&(D.push(a[1]),p.push(w.trim()),q=!0,jobFound=a[1])});if(q)return setSavedList("itemList",p.unique()),setSavedList("jobsToDo",D),popJob(),Autoplay.fx=autoMission,Autoplay.start(),!1;DEBUG(w+" not found in the requirement job array.")}}else if(-1!=b.indexOf("Bandit")){colorDEBUG("jobMessage:"+b);colorDEBUG("request.responseText:<br>"+g.responseText);g=["setUnknown","setXPBandit",
"setCashBandit","setJobBandit"];u=1;-1!=b.indexOf("Cash")&&(u=2);-1!=b.indexOf("Job")&&(u=3);c=RX6_getValue(g[u],1);colorDEBUG("jobLootBandit Type: "+u+"="+g[u]+" saved value: "+c);e=b=!1;0==c?b=!0:1==c?e=!0:2==c&&energy<k&&(e=!0);if(e)return mwap_do_ajax("Job","eliminateBandit",d,"&xw_person="+xw_user+"&stage="+f+"&job="+v,"",jobCallback),!0;b&&popJob();Autoplay.fx=autoMission;Autoplay.start();return!1}if(-1!=b.indexOf("following items")){colorDEBUG("Seems RX6 needs (some) items to perform: "+a);
k=document.createElement("div");k.innerHTML=b;if(-1!=b.indexOf("need more cash"))return d=xpathFirst('.//span[@class="bad"]',k),k=xpathFirst('.//span[@class="money"]',k),k=parseCash(d.innerHTML.untag())-parseCash(k.innerHTML.untag()),RX6_setValue("cashNeeded",cities[t][CITY_CASH_SYMBOL]+makeCommaValue(k)),addToLog("warning Icon",'RX6 needs <span class="bad">'+cities[t][CITY_CASH_SYMBOL]+makeCommaValue(k)+'</span> to perform <span class="job">'+a+"</span>."),D=getSavedList("jobsToDo",""),-1==D.indexOf(a)?
(D.push(a),DEBUG("Saving "+a+" for later. Looking for a better cash job first."),setSavedList("jobsToDo",D)):DEBUG(a+" already saved for later. Looking for a better cash job first."),k=JSON.parse(RX6_getValue("savedMjobs",JSON.stringify([]))),0==k.length&&(k=missions),a=function(a,b,c){return b!=s&&c[b][MISSION_CITY]==t&&""==c[b][MISSION_BONUSJOB]&&c[b][MISSION_TAB]<=jobTab?1:0},k=k.filter(a),0==k.length&&missions.filter(a),k.sort(function(a,b){return b[MISSION_CR]-a[MISSION_CR]}),a=k.shift(),D.push(a[0]),
setSavedList("jobsToDo",D),RX6_setValue("savedMjobs",JSON.stringify(k)),popJob(),doAutoPlay(),!1;k=document.createElement("div");k.innerHTML=b;g=$x('.//ul[@class="item_list"]//li[@class="clearfix"]',k);b="";d=0;for(iLength=g.length;d<iLength;d++)b&&(b+=" and "),b+='<span class="loot">'+g[d].innerHTML.untag()+"</span>";addToLog("info Icon",'Item(s) required to perform <span class="job">'+a+"</span>: "+b+".");a=xpathFirst('.//a[contains(@class,"impulse_buy_purchase") and not(contains(@style,"hidden"))]',
k).getAttribute("href");a="&tmp="+/&tmp=(.+)/.exec(a)[1];bgBuyItems(a);return!0}}}else colorDEBUG("dojob : unknown response: "+g.responseText,cre)}else colorDEBUG("response for dojob is not json: "+g.responseText,cre);else if("eliminateBandit"==b)isJsonString(g.responseText)&&(s=RX6_getValue("selectMission"),t=missions[s][MISSION_CITY],jsonresult=JSON.parse(g.responseText),jsonPageUpdate(jsonresult),a=jsonresult.data,k=document.createElement("div"),k.innerHTML=a.info.reward,d=a=0,g=xpathFirst('.//div[contains(@class,"reward")]//div[contains(@class,"item_card_mini")]',
k),(b=xpathFirst('.//div[contains(@class,"reward-xp")]',k))&&(d=b.innerHTML.untag().digitize()),(k=xpathFirst('.//div[contains(@class,"reward-cash")]',k))&&(a=cities[t][CITY_CASH_SYMBOL]+makeCommaValue(k.innerHTML.untag().digitize())),k="RX6 succesfully eliminate the bandit",a&&(k+=',earning <span class="good">'+a+"</span>",d&&(k+=" and ")),d&&(a||(k+=","),k+='earning <span class="good">'+d+" experience</span>."),g&&(k+='<br><span class="loot">'+g.innerHTML+"</span>"),addToLog("process Icon",k));
else if("buy_required_items"==b&&isJsonString(g.responseText)&&(s=RX6_getValue("selectMission"),a=missions[s][MISSION_NAME],jsonresult=JSON.parse(g.responseText),jsonPageUpdate(jsonresult),void 0!==typeof jsonresult.data.impulseBuy.message)){b=jsonresult.data.impulseBuy.message;k=document.createElement("div");k.innerHTML=b;k=$x(".//ul//li",k);g="";d=0;for(iLength=k.length;d<iLength;d++)g&&(g+=" and "),g+='<span class="loot">'+k[d].innerHTML.untag()+"</span>";jsonresult.data.impulseBuy.success?addToLog("yeah Icon",
"RX6 just bought the following items: "+g+' to perform <span class="job">'+a+"</span>."):(addToLog("omg Icon","RX6 failed to buy the following items: "+g+' to perform <span class="job">'+a+"</span>."),popjob())}}doAutoPlay();return!1}
function goJob(a,b){var c;try{var d=missions.searchArray(b,0)[0];if(!missions[d])return!1;if(isNewCity(city))return autoReload(!1,"newCity goJob"),(c=xpathFirst('.//div[@class="job"]//a[contains(@href,"job='+a+'&")]',innerPageElt))||(c=xpathFirst('.//div[@id="job-id-'+a+'"]//a[contains(@href,"job='+a+'&")]',innerPageElt)),c?(bgDoJob(d,c),!0):!1;a=missions[d][MISSION_NUMBER];var e=getJobRow(b,innerPageElt);if(c=xpathFirst('.//a[(contains(@href,"xw_action=dojob") or contains(@onclick,"panelButtonDoJob") or contains(@onclick,"displayBossConfirm")) and not(contains(.,"Ask"))]',
e)){clickAction="job";clickContext=[a,b];suspendBank=!1;if(isGMChecked("autoMissionBlasterSpeed")){var d=!1,f=RX6_getValue("autoMissionBlasterSpeedSet",1);"0.0"!=RX6_getValue("selectTier","0.0")&&(f=1,d=!0);if(isGMChecked("droneModeFightFight")&&!d){var g=Math.ceil(ptsToNextLevel/(energy+stamina)*100)/100;if(1>=g&&10<stamina)return;1.5>=g&&10<=stamina&&(f=1.1>=g?1:1.2>=g?2:1.3>=g?3:5,addToLog("info Icon","KamiDrone Mode: Breaking Engery Loop Blaster - getting close to Combined 1:1 Ratio | Speed Factor:"+
f))}for(g=0;g<f;g++)clickElement(c),DEBUG("goJob - job Clicked to perform: "+b)}else clickElement(c);DEBUG("goJob - job Clicked to perform: "+b);return!0}DEBUG("goJob -  UNABLE to perform: "+b);return!1}catch(h){DEBUG("goJob Error: "+h)}}
function goFightNav(){var a=xpathFirst('.//div[@id="nav_link_fight_unlock"]//a',menubarElt);if(!a){for(var b=$x('//div[@class="nav_link fight_link"]//a'),c=0,d=b.length;c<d;++c)if(b[c].scrollWidth){a=b[c];break}if(!a){addToLog("warning Icon","Can't find fight nav link to click.");return}}clickElement(a);DEBUG("Clicked to go to fights.");autoReload(!1,"goFight")}
function goFightTab(){var a=xpathFirst('.//div[@class="tab_content"]//a[contains(.,"Fight")]',innerPageElt);a?(clickElement(a),DEBUG("Clicked to go to fight tab."),autoReload(!1,"goFight")):goFightNav()}function goFightersTab(){var a=xpathFirst('.//div[@class="minitab_content"]//a[contains(.,"Fighters")]',innerPageElt);a?(clickElement(a),DEBUG("Clicked to go to fighters tab."),autoReload(!1,"goFight")):goFightNav()}
function goRivalsTab(){var a=xpathFirst('.//div[@class="minitab_content"]//a[contains(.,"Rivals")]',innerPageElt);a?(clickElement(a),DEBUG("Clicked to go to rivals tab."),autoReload(!1,"goFight")):goFightNav()}function goHitlistTab(){var a=xpathFirst('.//div[@class="tab_content"]//a[contains(.,"Hitlist")]',innerPageElt);a?(clickElement(a),DEBUG("Clicked to go to hitlist."),autoReload(!1,"goHit")):goFightNav()}
function goPropertyNav(){var a=new_header?xpathFirst('//a[@class="header_properties_button"]'):xpathFirst('.//span[@id="nav_link_properties"]//a',menubarElt);a?(clickElement(a),DEBUG("Clicked to go to properties."),autoReload(!1,"goProperty")):addToLog("warning Icon","Can't find properties nav link to click.")}
function goDeleteNews(){var a=xpathFirst('.//a[contains(@onclick,"xw_action=deletenews") and contains(text(),"Clear")]',innerPageElt);a?(clickElement(a),RX6_setValue("logPlayerUpdatesCount",0),DEBUG("Clicked to delete news."),autoReload(!1,"goNews")):DEBUG("Can't find Clear Updates link to click. ")}
function generateTemps(a){var b="",c="",d="",e="";isUndefined(a)||(e=parseInt((new Date).getTime().toString().substring(0,10)),-1==a.indexOf("xw_person")&&(b="&xw_person="+xw_user),-1==a.indexOf("cb")&&(c="&cb="+xw_user+e),-1==a.indexOf("tmp")&&(d="&tmp="+e),e=b+c+d);return e}
function goLocation(a){if(a==city)return DEBUG("Already in "+cities[a][CITY_NAME]+"."),!0;if(cities[a][CITY_CLOSED])return addToLog("warning Icon","WARNING: You are not allowed to travel to "+cities[a][CITY_NAME]+" : city is closed."),!1;if(level<cities[a][CITY_LEVEL])return addToLog("warning Icon","WARNING: Current level does not allow travel to "+cities[a][CITY_NAME]+"."),!1;var b=xpathFirst('//div[@id="southafrica_splash_page_top"]//a[@class="sexy_button_new medium white" and contains(@onclick,"destination=10")]');
if(b)return clickElement(b),DEBUG("Clicked to ENTER "+cities[a][CITY_NAME]+"."),autoReload(!1,"enterCity"),!0;if(b=xpathFirst('//div[@id="travel_menu"]//a[contains(.,"'+cities[a][CITY_NAME]+'")]'))return clickElement(b),DEBUG("Clicked to TRAVEL to "+cities[a][CITY_NAME]+"."),autoReload(!1,"goCity"),!0;DEBUG("Unable to find "+cities[a][CITY_NAME]+" travel link. ");return!1}
function saveFightStatistics(a,b,c,d){var e=city;a=parseInt(a);var f=parseCash(d);d=parseCashLoc(d);a&&(RX6_setValue("totalExpInt",String(GM_getIntValue("totalExpInt",0)+a)),RX6_setValue(cityStats[e][fightExp],String(GM_getIntValue(cityStats[e][fightExp],0)+a)));0<b&&(RX6_setValue("fightWinCountInt",String(GM_getIntValue("fightWinCountInt",0)+b)),RX6_setValue("totalWinDollarsInt",String(GM_getIntValue("totalWinDollarsInt",0)+f)),RX6_setValue(cityStats[e][fightWins],String(GM_getIntValue(cityStats[e][fightWins],
0)+a)),RX6_setValue(cityStats[d][cashWins],String(GM_getIntValue(cityStats[d][cashWins],0)+f)));0<c&&(RX6_setValue("fightLossCountInt",String(GM_getIntValue("fightLossCountInt",0)+c)),RX6_setValue(cityStats[e][fightLosses],String(GM_getIntValue(cityStats[e][fightLosses],0)+c)));0==b&&(RX6_setValue("totalLossDollarsInt",String(GM_getIntValue("totalLossDollarsInt",0)+f)),RX6_setValue(cityStats[d][cashLosses],String(GM_getIntValue(cityStats[d][cashLosses],0)+f)))}
function checkFBAccessToken(){access_token||(0==RX6_getValue("rx6FBToken","0")?(unsafeWindow.FB.init({appId:"10979261223",status:!0,cookie:!0,frictionlessRequests:!0}),access_token=unsafeWindow.FB.getAuthResponse().accessToken,RX6_setValue("rx6FBToken",access_token),acesss_token=RX6_getValue("rx6FBToken","0"),addToLog("yeah Icon",acesss_token+" come one!!!")):access_token=RX6_getValue("rx6FBToken","0"));timeLeftGM("fbTokenRefreshTimer")||(setGMTime("fbTokenRefreshTimer","00:38:05"),addToLog("yeah Icon",
"Time set "+timeLeftGM("fbTokenRefreshTimer")),unsafeWindow.FB.init({appId:"10979261223",status:!0,cookie:!0,frictionlessRequests:!0}),access_token=unsafeWindow.FB.getAuthResponse().accessToken,RX6_setValue("rx6FBToken",access_token),acesss_token=RX6_getValue("rx6FBToken","0"))}
function rxComment(a,b,c,d){if(a&&b&&gvar.isGreaseMonkey){var e;window.setTimeout(function(){a==RX6_getValue("trackid",0)?addToLog("info Icon","Publishing Ices as Comment to your wall:<br>"+d):addToLog("info Icon","Publishing Ices as Comment to: "+a+"<br>"+d);checkFBAccessToken();try{GM_xmlhttpRequest({method:"POST",url:"https://graph.facebook.com/"+a+"_"+b+"/comments?access_token="+access_token,data:"message="+encodeURIComponent(d),timeout:1E4,onload:function(a){try{e=JSON.parse(a.responseText);
var b=e.id.split("_");try{window.setTimeout(function(){RX6_setValue(String(b[0]),JSON.stringify([String(b[1]),0]))},0)}catch(c){gmLog("rxComment RX6_setValue error: "+c),RX6_setValue("autoIceStack",0)}}catch(d){gmLog("rxComment Error in response parsing INNER?"+d.message),RX6_setValue("autoIceStack",0)}}})}catch(c){gmLog("rxComment Error in post request? "+c.message),RX6_setValue("autoIceStack",0)}},c)}}
function rxPublish(a,b,c){a&&gvar.isGreaseMonkey&&window.setTimeout(function(){var b=RX6_getValue("autoPostIceMessage","");a==RX6_getValue("trackid",0)?addToLog("info Icon","Publishing Ices to your wall:<br>"+c):addToLog("info Icon","Publishing Ices to: "+a+"<br>"+c);1<b.length&&(c=c+"\n\n\n"+b);checkFBAccessToken();try{GM_xmlhttpRequest({method:"POST",url:"https://graph.facebook.com/"+a+"/feed?access_token="+access_token,data:"message="+encodeURIComponent(c),timeout:1E4,onload:function(a){try{var b=
JSON.parse(a.responseText).id.split("_");try{window.setTimeout(function(){RX6_setValue(String(b[0]),JSON.stringify([String(b[1]),0]))},0)}catch(c){gmLog("rxPublish RX6_setValue error: "+c),RX6_setValue("autoIceStack",0)}}catch(d){gmLog("rxpublish Error in response parsing INNER?"+d.message),RX6_setValue("autoIceStack",0)}}})}catch(e){gmLog("rxpublish Error in response parsing? "+e.message),RX6_setValue("autoIceStack",0)}},b)}
function addToIceList(a,b){var c=0,d=getSavedList(a+"List");d.push(b);var e=GM_getIntValue("autoIcePublishFrequency")?GM_getIntValue("autoIcePublishFrequency"):1;if(d.length>=e)for(;d.length>=e;){var f=d.splice(0,e),g="";n=0;for(nLength=f.length;n<nLength;n++)g=f[n]+".\n"+g;f=RX6_getValue(a,0);isGMChecked("autoIceStack")&&isJsonString(f)?(f=JSON.parse(f),f[0]&&parseInt(f[1])<GM_getIntValue("autoIceStackFrequency",4)?(RX6_setValue(String(a),JSON.stringify([String(f[0]),++f[1]])),rxComment(a,f[0],1E3*
c,g)):rxPublish(a,1E3*c,g)):rxPublish(a,1E3*c,g);c++}setSavedList(a+"List",d)}
function logFightOutcome(a,b){try{var c=isNewCity(city)?5:1,d="0",e="0",f,g,h,l,k,q="",r="",p="",s="",t="",u="",v=!1,w="",D=0,F=0,B="",H="",z="",A="",G="",E=a.logName,C=a.level;a.title&&(E=a.title+" "+E);C="RX6 fought "+E+",a level "+C;a.charClass&&(C+=" "+a.charClass);var O=0,J=0;if(b){colorDEBUG("logFightOutcome - respJSON");b.hasOwnProperty("fight_result")&&(fightResult=b.fight_result);var M=fightResult.isWin?1:0;M?O=1:J=1;fightResult.is_power_attack&&(ca=parseInt(fightResult.power_attack.won),
U=parseInt(fightResult.power_attack.lost),O=ca*c,J=U*c);var S=parseInt(fightResult.cash_city)-1;if(b.popup&&/My Event Ices/.test(b.popup)){var Q=b.popup.indexOf("My Event Ices"),R=b.popup.indexOf("</span>",Q),A=b.popup.slice(Q,R).replace(/[^0-9]/g,"");b.popup.match(/\s(\d+)\smore ices needed/)&&(G=RegExp.$1)}fightResult.cash?(d=String(fightResult.cash).digitize(),d=cities[S][CITY_CASH_SYMBOL]+makeCommaValue(d)):d=cities[S][CITY_CASH_SYMBOL]+makeCommaValue(0);fightResult.experience&&(e=fightResult.experience);
fightResult.defender.is_killed&&(g=!0);fightResult.defender.is_iced&&(f=!0);if(fightResult.defender.you_iced||fightResult.you_just_iced||fightResult.you_just_killed)if(isGMChecked("TestChanges")&&RX6_setValue("iceScoredResult",JSON.stringify(fightResult)),l=!0,D=parseInt(fightResult.total_ice_count),bragCount=parseInt(fightResult.ices_so_far),F=parseInt(fightResult.ices_target),B=D,bragCount&&F&&(B+=" ("+bragCount+" of "+F+")"),fightResult.feed_js&&-1!=fightResult.feed_js.indexOf("description:'")&&
(H=fightResult.feed_js,z=eval("("+/var feed = (.+?); MW\.Feed/.exec(H)[1]+")"))){myFeeds=JSON.parse(RX6_getValue("myFeeds",JSON.stringify([])));50<myFeeds.length&&myFeeds.shift();myFeeds.push(z.description.split(". Need")[0].split(". Think")[0]);RX6_setValue("myFeeds",JSON.stringify(myFeeds));var I=z.description.split(". Need")[0].split(". Think")[0];isGMChecked("autoPubWall")&&RX6_getValue("trackid",0)&&addToIceList(RX6_getValue("trackid"),I);if(isGMChecked("autoPubClanGroupIce")&&RX6_getValue("autoPubClanGroupID"))for(var K=
getSavedList("autoPubClanGroupID"),c=0,V=K.length;c<V;++c){var Z=K[c].split(","),Y=Z[0],D=!0;if(1<Z.length)for(D=!1,j=1,jLength=Z.length;j<jLength;j++)if(-1!=I.indexOf(Z[j])){D=!0;break}D&&addToIceList(Y,I)}}fightResult.ice_was_just_stolen&&(isGMChecked("TestChanges")&&RX6_setValue("iceStolenResult",JSON.stringify(fightResult)),h=!0,q=fightResult.thief_id.digitize(),v=fightResult.thief_isInMafia,p=fightResult.thief_name,s=",a "+fightResult.thief_class,s.match(/(\d+)/)&&(r=RegExp.$1),r=isNaN(r)?9999:
parseInt(r));fightResult.defender.iced_self&&(k=!0)}else{colorDEBUG("logFightOutcome - fight_wrapper");var ea=xpathFirst('.//div[@id="fight_wrapper"]',innerPageElt),ba=xpathFirst('.//div[@id="wrapper_items_won"]',ea),ha=xpathFirst('.//div[@id="attacker_fight_status" and contains(@class,"good") and contains(text(),"Won")]',ea);xpathFirst('.//div[@id="attacker_fight_status" and contains(@class,"bad")  and (contains(text(),"LOST") or contains(text(),"Lost"))]',ea);M=0;fightResultElt=xpathFirst('.//img[contains(@src,"youwin")]',
ba);if(ha||fightResultElt)M=1;var ca=0<M?1:0,U=0==M?1:0,W=xpathFirst('.//span[@class="good" and contains(text(),"Win")]',ba);W&&(wonFightsTxt=W.innerHTML.untag(),wonFightsTxt.match(/(\d+)/)&&(ca=parseInt(RegExp.$1)));var X=xpathFirst('.//span[@class="bad" and contains(text(),"Loss")]',ba);X&&(lostFightsTxt=X.innerHTML.untag(),lostFightsTxt.match(/(\d+)/)&&(U=parseInt(RegExp.$1)));var O=ca*c,J=U*c,P=xpathFirst('.//td[contains(@class,"cash_icon")]',ba);P&&(d=P.innerHTML.untag(),d=d.match(REGEX_CASH)?
RegExp.lastMatch:d);var y=xpathFirst('.//td[@class="experience"]',ba);y&&(e=y.innerHTML.untag());var N=xpathFirst('.//div[contains(@id,"fv2_defender") and contains(@style,"block")]',ea);if(N){defenderStatEltId=N.id;switch(defenderStatEltId){case "fv2_defender_overlay_stolen":h=!0;break;case "fv2_defender_overlay_iced":f=l=!0;break;case "fv2_defender_overlay_killed":g=l=!0;break;case "fv2_defender_iced_self":targetIce=k=!0;break;case "fv2_defender_was_iced":f=!0}if(l){playerLevel=parseInt(document.getElementById("user_level").innerHTML.untag());
var T=document.getElementById("wrapper_attacker");if(T){var ga=T.innerHTML,ga=ga.replace(/<[^>]*>/g,""),ga=ga.untag();playerName=/(won|lost)*\s*?(.+)\s*?level/i.exec(ga)[2];RX6_setValue("playerName",playerName);RX6_setValue("playerLevel",playerLevel)}var fa=xpathFirst('.//div[@class="fv2_defender_overlay_next_count"]',N);fa&&(B=fa.innerHTML,B.match(/(\d+)\//)&&(D=parseInt(RegExp.$1)))}}}ca&&(C+='. You <span class="good">WON</span> ',1==ca?C+=" the fight":C+=ca+" fights");U&&(C+='. You <span class="bad">LOST</span> ',
1==U?C+="the fight":C+=U+" fights");M?(C+=' and gained <span class="good">'+e+' experience</span> and <span class="good">'+d+"</span>.",addToLog("yeah Icon",C)):(C="0"!=d?C+(',losing <span class="bad">'+d+'</span>. You still gained <span class="good">'+e+" experience</span>."):0!=e?C+('. You still gained <span class="good">'+e+" experience</span>."):C+".",addToLog("omg Icon",C));C="";isGMChecked("noStats")||(M=0,isNaN(e)||(M=parseInt(e)),saveFightStatistics(M,O,J,d),updateLogStats());if(k)addToLog("iced Icon",
"Apparently "+E+' <span style="color:#00FFFF;">ICED</span> himself. Getting next target. ');else if(l)d="",g?(C=' RX6 <span class="bad">KILLED</span> '+E,d="killedMobster Icon",RX6_setValue("myKills",GM_getIntValue("myKills",0)+1)):f&&(C=' RX6 <span style="color:#00FFFF;">ICED</span> '+E,d="iced Icon",RX6_setValue("myIces",GM_getIntValue("myIces",0)+1)),updateMDK(),C=B?C+(',bringing your current iceCount to <span style="color:#00FFFF;">'+B+"</span>."):C+".",A&&(C+='<br>Current Event Count: <span style="color:#00FFFF;">'+
A+"</span>."),G&&(C+=' Still needing <span style="color:#00FFFF;">'+G+"</span> ICES to complete this event."),addToLog(d,C);else if(h){if(!q&&(N=xpathFirst('.//div[@id="fv2_defender_overlay_stolen" and contains(@style,"block")]',ea))){t=xpathFirst('.//a[contains(@href,"xw_controller=clan")]',N);u=xpathFirst('.//a[contains(@href,"xw_controller=stats")]',N);t&&(p=linkToString(t,"user")+" ");if(u){var p=p+linkToString(u,"user"),ka;u.hasAttribute("href")&&(ka=u.getAttribute("href"));ka.match(/(user|opponent_id)\=(.+)/)&&
(q=decodeID(RegExp.$2))}var L=xpathFirst('.//div[@class="fv2_defender_overlay_level"]',N);L||(L=xpathFirst('.//div[contains(text(),"Level")]',N));L&&(s=",a "+L.innerHTML.untag(),s.match(/(\d+)/)&&(r=RegExp.$1),r=isNaN(r)?9999:parseInt(r))}if(p)if(addToLog("iceStolen Icon",'Your ICE was stolen by <span class="user">'+p+"</span>"+s+"."),isGMChecked("fightIceStealers"))if(v)addToLog("omg Icon","Skipping the Revenge on "+p+s+" for stealing your Ice. part of your mafia");else{var da=GM_getIntValue("fightLevelMax",
500);RX6_getValue("fightLevelMaxRelative",!1)&&(da+=level);if(r<=da)if(isGMChecked("fightNames")&&isGMChecked("fightAvoidNames")&&isFamily(decodeHTMLEntities(p),STAMINA_HOW_FIGHT_RANDOM))addToLog("process Icon","Skipping the Revenge on "+p+s+" for stealing your Ice. avoidNames checked");else{if(opponent=new Player,opponent.profile=u,opponent.familyElt=t,opponent.nameElt=u,opponent.id=q,opponent.level=r,opponent.name=p,opponent.logName=p,opponent.mafia="501",opponent.fightsDone=0,opponent.level=r,
autoFight.revengeTarget=opponent,w=xpathFirst('.//div[@id="fv2_defender_overlay_stolen_btn"]//a'))return RX6_setValue("revengebutton",w.getAttribute("href")),Autoplay.fx=function(){clickAction="fight";clickContext=autoFight.revengeTarget;DEBUG("Clicking to take Revenge on "+p+s+" for stealing your Ice.");clickElement(w);addToLog("process Icon","Clicked to take Revenge on "+p+s+" for stealing your Ice.")},Autoplay.delay=noDelay,Autoplay.start(),!1}else addToLog("process Icon","Skipping the Revenge on "+
p+s+" for stealing your Ice. deemed to strong (max. level: "+da+")")}else colorDEBUG("fightIceStealers unchecked or in family battle - no revenge");else colorDEBUG("Revenge Overlay Ice Stolen not Found !",cre)}else a.iced&&(addToLog("info Icon",E+' was already <span style="color:#00FFFF;">ICED</span>. Getting next target.'),bgAlreadyIced=!0);setNextFightCity()}catch(Ba){DEBUG("fightErr:"+Ba)}}
function logLootDrops(a,b){if(isGMChecked("hideRX6LogLoot"))return"";if("loot"==b){var c=0,d="";for(x in a){g=document.createElement("div");g.innerHTML=String(a[x]).replace(/[\t\r\n]/g,"");var e=$x('.//div[@class="item_card_mini fake_item_card"]',g);if(e&&0<e.length)for(h=0,iLength=e.length;h<iLength;h++)var f=e[h].innerHTML.untag(),c=c+parseInt(f.digitize());if((f=$x('.//div[contains(@class,"item_card_mini") and not(contains(@class,"fake_item_card"))]//img',g))&&0<f.length)for(j=0,jLength=f.length;j<
jLength;j++)e=f[j],e=e.parentNode,d+='<div class="lootImg">'+e.innerHTML+"</div>",e=e.parentNode,(e=xpathFirst('.//div[contains(@class,"shadow")]',e))&&(d+="X2")}c&&addToLog("vc Icon",'You gained <span class="good">'+c+" </span> Victory Coin(s)");d&&addToLog("lootbag Icon",d)}"stats"==b&&(d="",a.skill_atk&&(curAttack=parseInt(String(a.skill_atk).replace(",","")),RX6_setValue("curAttack",curAttack)),a.skill_def&&(curDefense=parseInt(String(a.skill_def).replace(",","")),RX6_setValue("curDefense",curDefense)),
a.group_atk&&(curAttackEquip=parseInt(String(a.group_atk).replace(",",""))),a.group_def&&(curDefenseEquip=parseInt(String(a.group_def).replace(",",""))),g=curAttackEquip-prevAttackEquip,c=curDefenseEquip-prevDefenseEquip,g&&(d+='Equipment Attack Strength: <span class="loot">'+curAttackEquip+'</span> : <span class="good">+'+g+"</span> (was: "+prevAttackEquip+")<br>"),c&&(d+='Equipment Defense Strength: <span class="loot">'+curDefenseEquip+'</span> : <span class="good">+'+c+"</span> (was: "+prevDefenseEquip+
")<br>"),prevAttackEquip=curAttackEquip,prevDefenseEquip=curDefenseEquip,RX6_setValue("curAttackEquip",curAttackEquip),RX6_setValue("curDefenseEquip",curDefenseEquip),d&&addToLog("process Icon",d),!0==$("#arena_content").dialog("isOpen")&&goHome());if("oldschool"==b&&(c=$x('.//div[@class="fightV2_items_won"]/div[contains(@id,"fv2_gained_loot")]',a))&&0<c.length){d=f="";h=0;for(iLength=c.length;h<iLength;h++)if(xpathFirst('.//div[@class="item_card_mini fake_item_card"]',c[h]))f=f?f+(","+c[h].innerHTML.untag()):
"Loot Found: "+c[h].innerHTML.untag();else if(e=xpathFirst(".//img",c[h])){var g=e.parentNode;g&&(d=d?d+('<div class="lootItem">'+g.innerHTML+"</div>"):'Loot Found:<br><div class="lootItem">'+g.innerHTML+"</div>")}f&&addToLog("lootbag Icon",f);d&&addToLog("lootbag Icon",d)}if("newcity"==b){var c=!1,d="",h;for(h in a)if(!isNaN(h)&&(c=!0,g=document.createElement("div"),g.innerHTML=String(a[h]).replace(/[\t\r\n]/g,""),(f=$x(".//img",g))&&0<f.length))for(c=!0,j=0,jLength=f.length;j<jLength;j++)e=f[j],
e=e.parentNode,d+='<div class="lootImg">'+e.innerHTML+"</div>",xpathFirst('.//div[contains(.,"4x Loot")]',g)?d+="X4":(e=xpathFirst('.//div[contains(@class,"shadow")]',g))&&(d+="X2");d&&addToLog("lootbag Icon",d);return c}}
function logFightResponse(a,b){try{var c=RX6_getValue("fightMaxAttacks",0),d=RX6_getValue("droneModefightMaxAttacks",0);RX6_getValue("droneModefightHealthPctMin",0);RX6_getValue("fightHealthMax",0);RX6_getValue("fightHealthPctMax",0);if("fv2_widget_wrapper"==a.id){var e=xpathFirst('.//span[contains(@id,"user_health")]');health=parseInt(e.innerHTML);var f=xpathFirst('.//div[@id="fight_wrapper"]',innerPageElt);f||(f=a);b.wrapperUpdate(f);b.skip||b.healthUpdate();(fightDetails="You attacked "+b.logName+
"<br>Won: "+b.fightsWon+",Lost: "+b.fightsLost+",xp: "+b.totalXP+"="+b.fightsRatio+",Cash: "+b.lastCash)&&addToLog("info Icon",fightDetails);logLootDrops(a,"oldschool")}else a.hasAttribute("class")&&"fight_results"==a.getAttribute("class")?(b.skip=!0,b.lastWon=-1):b.skip=!0;autoHeal(1);if(!b.skip)if(RX6_getValue("fnirInyhrSum",returnValue())==parseXMLResponse()&&(!b.skip&&c&&b.fightsTotal>c||!b.skip&&d&&b.fightsTotal>d)&&(b.avoid=!0),b.avoid){if(setFightOpponentAvoid(b),b.skip=!0,!b.iced&&-1!=b.id.indexOf("p|")){var g=
b.id.digitize();getHelp(g,b.shortName,b.level,b.clanID,b.clan)}}else b.iced&&(b.skip=!0);b.skip||canSpendStamina()&&!(6>=ptsToNextLevel)||(b.skip=!0);b.skip||(c=0,c=getStaminaMode()==STAMINA_HOW_FIGHT_LIST_BG?RX6_getValue("reattackThresholdList",0):RX6_getValue("reattackThreshold",0),b.skip=0!=c&&(parseCash(b.lastCash)<c||-1==b.lastCash.indexOf(cities[city][CITY_CASH_SYMBOL])),b.skip&&colorDEBUG("SKIPPING the attack on "+b.name+" INVALID cashGainTxt: "+b.lastCash,cre));if(!b.skip){var h=15*b.cm,c=
0,c=(staminaElt=document.getElementById("user_stamina"))?parseInt(staminaElt.innerHTML):unsafeWindow.User.stamina,l;isGMChecked("staminaPowerattack")&&c>=h?(l=b.powerButton,b.powerAttack=!0):(b.powerAttack=!1,h=b.cm,c>=h?l=b.attackButton:addToLog("warning Icon","Lack of Stamina."));if(l){var k=l.getAttribute("href"),k=k.replace(/click_amt=\d+/,staminaSpendStrength),k=k.replace("use_boost=1","use_boost=0"),f=0;if(GM_getIntValue("useFightBoosts",0)){var q=xpathFirst('.//span[@class="boost_wgt_boost_count"]',
doc);q&&(f=parseInt(q.innerHTML));f&&(k=k.replace("use_boost=0","use_boost=1"))}l.setAttribute("href",k);l.setAttribute("onclick",'do_ajax("innerpage",\''+k+"',1,0,,);return false;");clickContext=b;clickAction="fight";Autoplay.delay=500;Autoplay.fx=function(){clickElement(l);colorDEBUG("autoFight - Clicked to REPEAT the "+l.innerHTML+" attack on "+b.name+".",cye)};Autoplay.start();return!0}}if(!isNaN(b.lastWon)){try{(0<=b.lastWon||0>b.lastWon&&b.fightsTotal)&&logFightOutcome(b);if(isGMChecked("autoGlobalPublishing")&&
!timeLeftGM("askFightBoostsTimer")&&xpathFirst('.//div[@class="fv2_boost_ask_allowed" and not(contains(@style,"none"))]',f)){var r=xpathFirst('.//div[@class="fv2_boost_ask_action"]//a',f);r&&(clickElement(r),setGMTime("askFightBoostsTimer","01:00:05"))}if(!autoFight.revengeTarget){var p=xpathFirst('.//a[@class="close" and contains(@onclick,"CloseJS")]',f);p&&(clickElement(p),xpathFirst('.//div[@id="fv2_widget_wrapper" and contains(@style,"none")]',innerPageElt)&&destroyByID("fv2_widget_wrapper"))}}catch(s){}RX6_getValue("staminaSpendHow")==
getStaminaMode()&&cycleSavedList("pfightlist");return!0}colorDEBUG("logFightResponse - other Response");var t=a.innerHTML,u=t.untag();if(u.match(/you won/i)){var v=xpathFirst('.//div[@class="fightres_stats"]',a);if(v){var w=xpathFirst('.//div[@class="sexy_cash good"]',v),D=xpathFirst('.//div[@class="fightres_experience good"]',v),F=xpathFirst('.//div[@class="fightres_damage"]',v);addToLog("yeah Icon","You"+F.innerHTML+',gaining <span class="good">'+w.innerHTML+'</span> and <span class="good">'+D.innerHTML+
"</span>")}}else if(u.match(/you cannot fight|part of your mafia/i))b.id&&(DEBUG("Opponent ("+b.id+") is part of your mafia. Avoiding."),setFightOpponentAvoid(b));else if(u.match(/You just set/)){cycleSavedList("pautoHitOpponentList");addToLog("yeah Icon",t);isGMChecked("bgAutoHitCheck")&&setGMTime("bgAutoHitTime","01:00");var B=xpathFirst('//a[@id="fb_dialog_cancel_button"]');if(B)return Autoplay.fx=function(){clickElement(B);DEBUG("Clicked Dismissed Popup!")},Autoplay.start(),!0}else u.match(/There is already a bounty/)||
u.match(/You can\'t add/)?(cycleSavedList("pautoHitOpponentList"),isGMChecked("bgAutoHitCheck")&&setGMTime("bgAutoHitTime","01:00")):-1!=u.indexOf("too weak")?addToLog("info Icon",'<span style="color:#FF9999;">Too weak to fight.</span>'):DEBUG("Unrecognized fight response:"+u);RX6_getValue("staminaSpendHow")==getStaminaMode()&&cycleSavedList("pfightlist")}catch(H){colorDEBUG("respError: "+H)}return!1}
function createAjaxPage(a,b,c){a&&(ajaxHandling=!0);var d=a?SCRIPT.ajaxIDSync:SCRIPT.ajaxIDAsync,e=document.getElementById(d);e&&e.parentNode.removeChild(e);observer&&observer.disconnect();e=makeElement("div",null,{id:d,style:"display: none;"});a||(ajaxAction=b,ajaxContext=c);document.getElementById("verytop").insertBefore(e,document.getElementById("verytop").firstChild);observer||(observer=new MutationObserver(function(a){a.forEach(function(a){handleAjaxModified(a.target)})}));observer.observe(e,
observerConfig);return d}function handleAjaxModified(a){observer&&observer.disconnect();window.setTimeout(function(){ajaxPageChanged(a)},400)}
function ajaxPageChanged(a){if(a){var b=a.id==SCRIPT.ajaxIDSync?!0:!1,c=a.innerHTML;a.parentNode.removeChild(a);var d;b?(a=clickAction,d=clickContext,clickContext=clickAction=void 0):(a=ajaxAction,d=ajaxContext,ajaxContext=ajaxAction=void 0);ajaxHandling=!1;if(!logJSONResponse(b,c,a,d))try{doAutoPlay()}catch(e){DEBUG("BUG DETECTED (ajaxPageChanged->doAutoPlay): "+e+". Reloading."),autoReload(!0,"error !logJSONResponse")}}}
function logJSONResponse(a,b,c,d){ajaxHandling=!1;if("goHome"==c)return!1;colorDEBUG("logJSONResponse ("+c+") default fx: goHome,delay: "+Autoplay.delay,cte);autoReload(!1,"logJSONResponse");var e=b,e=b.untag(),f,g;try{if(isJsonString(e))try{f=JSON.parse(e),f.hasOwnProperty("data")&&(g="object"==typeof f.data?f.data:JSON.parse(f.data)),jsonPageUpdate(f)}catch(h){colorDEBUG("responseText is invalid JSON <br>"+h)}"quick withdraw"!=c||isNaN(d)||(d=parseInt(d),cashElt=document.getElementById("user_cash_"+
cities[d][CITY_ALIAS]));switch(c){case "autoStatAllocation":return DEBUG("autoStatAllocation results "+e),!1;case "load battlepage":return!1;case "icecheck profile":var l=!/is already dead or too weak!/.test(e);d&&(d.setAttribute("style","background: "+(l?"green;":"red;")),d.setAttribute("title",(l?"Target is alive":"Target is iced")+",click to refresh."),d.addEventListener("click",customizeProfile,!1),DEBUG("Successfully set target status: "+(l?"alive.":"iced.")));return!1;case "build limited":var k=
d.propCount,q=cityProperties[k][ctTitle],r=cityProperties[k][ctGMId]+"Timer";""!=e?(addToLog("process Icon",q+": "+e),setGMTime(r,"18 hours")):(addToLog("warning Icon",q+": RX6 can not craft yet."),setGMTime(r,"1 hour"));return!1;case "build other":var k=d.propCount,p=cityProperties[k][ctGMId],q=cityProperties[k][ctTitle],r=cityProperties[k][ctGMId]+"Timer",s=cities[cityProperties[k][ctPropCity]][CITY_NAME];DEBUG("Make "+s+": "+d.itemName+" - "+d.buildType+".");if(!g)return DEBUG("Unexpected result from buidl other"),
!1;var l=f=0,t=g.purchase_message,t=t.replace(/port/gi,q);addToLog("lootbag Icon",t);if(e.match(/cannot be purchased/i)||e.match(/cannot purchase/i))return DEBUG(d.itemName+" can not be build,disabling"),RX6_setValue(p,0),!1;if(e.match(/available_purchases(.+?)(\d+?),/i)&&(f=parseFloat(RegExp.$2),DEBUG("Available Purchases Left: "+RegExp.$2),f))return!1;e.match(/purchase_refresh_rate(.+?)(\d+?),/i)&&(f=parseFloat(RegExp.$2),DEBUG("Refresh Rate: "+RegExp.$2));e.match(/last_purchase_time_stamp(.+?)(\d+?),/i)&&
(l=parseFloat(RegExp.$2),DEBUG("timeStamp: "+RegExp.$2));if(f&&l){var e=l+f,u=Math.round((new Date).getTime()/1E3);DEBUG("Current: "+u);if(u<e){var v=parseFloat(e)-parseFloat(u)+10;DEBUG("timeLeft: "+v);var w=secondsToHMS(v);1==w?w+=" hour":w+=" hours";setGMTime(r,w);DEBUG("Parsed JSONResponse for "+s+" Item. Timer "+r+" reset for "+w+".")}else setGMTime(r,"2 hours"),DEBUG("Parsed JSONResponse for "+s+" Item. Timer reset for 2 hours.")}else setGMTime(r,"2 hours"),DEBUG("Parsing JSONResponse for "+
s+" Item FAILED. Timer reset for 2 hours.");return!1;case "quick withdraw":var D="<br>Remaining Bank Balance: "+cities[d][CITY_CASH_SYMBOL]+makeCommaValue(void 0);addToLog("warning Icon","Disabling autoMission:<br>You don't have enough money to do "+missions[RX6_getValue("selectMission",1)][MISSION_NAME]+"."+D);RX6_setValue("autoMission",0);update_nrg_stam();return!1;case "marketplace":var F=xpathFirst('.//div[@id="responseContainer"]');F||(F=makeElement("div",document.getElementById("final_wrapper"),
{id:"responseContainer",style:"display:none;"}));F.innerHTML=b;var B=makeElement("div",null,{id:"marketInfo",style:"clear:both;width: 745px;","class":"clearfix"}),H=makeElement("div",B,{id:"FightClubModule",style:"float: left;width: 735px;","class":"empire_module_header"}),z=makeElement("div",H,{"class":"empire_module_title"});makeElement("span",z).appendChild(document.createTextNode("Fight Club"));var A=xpathFirst('.//img[contains(@src,"victory_icon.gif")]',F);A&&(vcElt=A.parentNode)&&(makeElement("div",
z,{style:"float:right;margin-right:15px"}).innerHTML+=vcElt.innerHTML);var G=xpathFirst('.//div[@class="fightmastery_meter"]',F);G&&(makeElement("div",z,{"class":"fightmastery_meter",style:"float:right;margin-right:45px;margin-top:-1px;"}).innerHTML+=G.innerHTML);var E=xpathFirst('.//div[@id="full_list"]',F);if(E){var C=makeElement("div",H,{style:"width: 729px;padding: 5px;float: none;","class":"playerupdate_box"}),O=makeElement("div",C),J=$x('.//div[contains(@style,"relative") and contains(.,"Energy Refill")]',
E);if(0<J.length){for(i=J.length-1;0<=i;i--)secondElt=J[i].firstChild.nextSibling,fourthElt=J[i].firstChild.nextSibling.nextSibling.nextSibling,itemListElt=makeElement("div",null,{style:"float: left;width: 340px;height:125px;border:1px dotted #484848;padding:10px;"}),O.insertBefore(itemListElt,O.firstChild),itemListElt.innerHTML=secondElt.innerHTML+fourthElt.innerHTML;makeElement("div",B,{style:'float: left;background: url("http://mwfb.static.zgncdn.com/mwfb/graphics/empire/shadow_upper_right.png") no-repeat scroll 0% 0% transparent;height: 8px;width: 8px;'});
makeElement("div",B,{style:'float: left;background: url("http://mwfb.static.zgncdn.com/mwfb/graphics/empire/shadow_right_side.png") repeat-y scroll 0% 0% transparent;height: 125px;width: 8px;'});makeElement("div",B,{style:'float: left;background: url("http://mwfb.static.zgncdn.com/mwfb/graphics/empire/shadow_lower_left.png") repeat scroll 0% 0% transparent;height: 8px;width: 8px;'});makeElement("div",B,{style:'float: left;background: url("http://mwfb.static.zgncdn.com/mwfb/graphics/empire/shadow_bottom.png") repeat scroll 0% 0% transparent;height: 8px;width: 727px;'});
makeElement("div",B,{style:'float: left;background: url("http://mwfb.static.zgncdn.com/mwfb/graphics/empire/shadow_lower_right.png") repeat scroll 0% 0% transparent;height: 8px;width: 8px;'})}}d.appendChild(B);return!1;default:return colorDEBUG('BUG DETECTED: Unrecognized JSON action "'+c+'".<br>'+e),!1}}catch(M){return DEBUG("Exception (logJSONResponse): "+M+",autoplay: "+a+",action: "+c),colorDEBUG("Exception (logJSONResponse): "+M+",autoplay: "+a+",action: "+c+",context: "+d+",response: <br>"+
b),!1}}
function logResponse(a,b,c){if("goHome"==b)return!1;var d;Autoplay.fx=goHome;Autoplay.delay=getAutoPlayDelay();colorDEBUG("logResponse ("+b+") default fx: goHome,delay: "+Autoplay.delay,cte);if("fight"==b){autoReload(!1,"logResponse - fight");var e=xpathFirst('.//div[@id="fv2_widget_wrapper"]',a);e||(e=xpathFirst('.//div[@class="fight_results"]',a));return e||RX6_getValue("staminaSpendHow")!=getStaminaMode()?logFightResponse(e,c):(cycleSavedList("pfightlist"),!1)}if("load clan"==b&&(DEBUG("Are we on the clan page we want to be on?"),onClanNav(RX6_getValue("AutoBattleClanID",
0))))if(DEBUG("Looking for Challenge Link"),e=xpathFirst('.//a[contains(@href,"xw_controller=epicBattle&xw_action=challengePop")]',a))DEBUG("We found the challenge button,clicking it"),setGMTime("autoBattleTimer","60:00"),clickAction="battlePop",clickElement(e);else return DEBUG("No Challenge Popup found check again in 10 minutes"),setGMTime("autoBattleTimer","10:00"),Autoplay.delay=getAutoPlayDelay(),Autoplay.start(),!0;if("load battlepage"==b)return!1;if("load battlecollect"==b&&onBattlePage(1)){DEBUG("Looking for Battle Collect Link");
if(e=xpathFirst('.//a[contains(@onclick,"xw_controller=epicBattle&xw_action=getResults") and contains(.,"Collect")]'))return DEBUG("Found a Battle Collect link clicking it"),setGMTime("autoBattleCollectTimer","05:00"),clickElement(e),Autoplay.delay=getAutoPlayDelay(),Autoplay.start(),!0;DEBUG("No Battle Collect link found");setGMTime("autoBattleCollectTimer","60:00");Autoplay.delay=getAutoPlayDelay();Autoplay.start();return!1}d||(d=xpathFirst('.//div[@id="default_id_box"]',a));d||(d=xpathFirst('.//div[@class="job_results"]',
a));d||(d=xpathFirst('.//div[contains(@class,"message_body")]',a));d||(d=xpathFirst('.//div[contains(@class,"job_controller")]',contentRoweElt));d||(d=xpathFirst('.//div[@id="msg_box_div_1"]',a));d||(d=xpathFirst('.//div[@id="mbox_generic_1"]',a));d||(d=xpathFirst('.//div[@id="bank_messages"]',appLayoutElt));d||(d=xpathFirst('.//div[@id="hospital_message"]',appLayoutElt));d||(d=xpathFirst('.//div[@id="'+c+'" and @class="rob_slot"]',a));d||(d=xpathFirst('.//div[@class="rob_board"]',a));d||(d=xpathFirst('.//div[@class="chop_build_final"]',
appLayoutElt));d||(d=xpathFirst('.//table[@class="messages"]',a));if("withdraw"==b&&c)return autoBankWithdraw(c),Autoplay.start(),!0;if(!d){if("load clan"==b||"load battlecollect"==b||"battlePop"==b)return!0;if("autohit"==b)return!1;if("fight"==b)return colorDEBUG(" we have passed all message boxes but have action (multi)fight  ",cbl),RX6_getValue("staminaSpendHow")==getStaminaMode()&&cycleSavedList("pfightlist"),!1;d=a}skipStaminaSpend=!1;var f=d?d.innerHTML:"",e=f.untag(),g;switch(b){case "load battlecollect":DEBUG("We have a load battlecollect message box to handle.. doing nothing..");
break;case "autoStatAllocation":DEBUG("autoStatAllocation results");break;case "operationsTask":q=!1;if(opsInfo=getOperationsInfo(c,c.slot,"result"))opsInfo.taskFailed?(f='RX6 failed to performed <span class="job">'+opsInfo.name+"/"+opsInfo.taskName+"</span>.",addToLog("updateBad Icon",f+".")):(e="",opsInfo.nrgNeeded&&(e='<span class="user">'+opsInfo.nrgNeeded+" energy</span>"),opsInfo.stamNeeded&&(e&&(e+=" and "),e+='<span class="bad">'+opsInfo.stamNeeded+" stamina</span>"),f="RX6 used "+e+' to perform <span class="job">'+
opsInfo.name+" / "+opsInfo.taskName+'</span>,gaining <span class="good">'+opsInfo.xp+" experience</span>",opsInfo.cash&&(f+=' and <span class="good">'+cities[opsInfo.cashCity][CITY_CASH_SYMBOL]+opsInfo.cash+"</span>"),opsInfo.cashNeeded&&(f+=". RX6 "+(e?"also":"")+' used <span class="bad">'+cities[opsInfo.cashNeededCity][CITY_CASH_SYMBOL]+opsInfo.cashNeeded+"</span>"),DEBUG("Operation is "+opsInfo.taskMastery+" % Mastered"),addToLog("process Icon",f+"."));break;case "bossjob":break;case "upgradeNY":addToLog("info Icon",
"NY Property Bought / Upgraded");break;case "job":try{var h;xpGainElt=(xpGainElt=xpathFirst('.//dd[@class="message_experience"]',d))?xpGainElt:xpathFirst('.//dd[@class="experience"]',d);var l="job"+c[0];jobName=c[1];var k=xpathFirst('.//div[@id="'+l+'"]',a);h=xpathFirst('.//div[@id="'+l+'"]//div[@class="mastery_bar"]//p',a);l="";jobMasteryPercent=0;var q=!1;h&&"0.0"!=RX6_getValue("selectTier","0.0")&&(jobMasteryPercent=parseInt(h.innerHTML.digitize()),DEBUG(" Job "+jobName+" is "+jobMasteryPercent+
"% Mastered."),100==l&&(l=". Job 100% Mastered",q=!0));if(xpGainElt){var r=parseInt(xpGainElt.innerHTML);if(r){var p=xpathFirst('.//div[@class="message_experience"]',d);p&&(r+="+"+parseInt(p.innerHTML));r+=" Experience"}g='RX6 performed <span class="job">'+jobName+'</span> earning <span class="good">'+r+"</span>";var f="",s=$x('.//dd[@class="message_cash"]',d);for(i=0;i<s.length;i++)f+=s[i].innerHTML;0==s.length&&(cashGainElt=xpathFirst('.//dd[contains(@class,"cash_icon")]',d))&&(f=cashGainElt.innerHTML,
f=f.match(REGEX_CASH)?cities[city][CITY_CASH_SYMBOL]+RegExp.lastMatch:cities[city][CITY_CASH_SYMBOL]+f);f.match(/(.+?)\s+?\(You now have/i)&&(f=RegExp.$1);f&&(g+=' and <span class="good">'+f+"</span>");var t=xpathFirst('.//dt[@class="message_cash bad"]',d);t||(t=xpathFirst('.//div[@class="job_uses"]//dd[contains(@class,"cash_icon")]',d));if(t){var u=t.innerHTML.untag();u.match(/(.+?)\s+?Bribes/)&&(u=RegExp.$1);g+=',spending <span class="bad">'+cities[city][CITY_CASH_SYMBOL]+u+"</span>"}l&&(g+=l);
g+=".";if(-1!=e.indexOf("you spent no energy")||-1!=e.indexOf("No energy cost")||-1!=e.indexOf("You Spent: 0"))g+=' <span class="good">Wheelman Bonus</span>: RX6 spent no energy on this job.';addToLog("process Icon",g);g="";var v=xpathFirst('.//dd[@class="stamina"]',d);v&&(g+=" Stamina spent: "+v.innerHTML.untag()+".");var w=xpathFirst('.//dd[@class="energy"]',d);w&&(nrgSpendTxt=w.innerHTML.untag(),g=-1!=nrgSpendTxt.indexOf("Mastery")?g+(" "+w.innerHTML.untag()+"."):g+(" Energy spent: "+w.innerHTML.untag()+
"."));g&&DEBUG(g);jobCombo(a);h?jobLoot(k):jobLoot(a);e.match(/You have mastered all (.+) of this tier\./i)&&addToLog("info Icon","Congrats : You have mastered "+RegExp.$1+" of this tier.");e.match(/.*(An*.+was added to your inventory[^.]*.)/i)&&addToLog("lootbag Icon",RegExp.$1);var D=parseInt(xpGainElt.innerHTML),F=GM_getIntValue("autoAskJobHelpMinExp");if(isGMChecked("autoAskJobHelp")&&(!F||D>=F)){var B=xpathFirst('.//div[@class="message_buttons"]//span[@class="sexy_jobhelp"]',d);B||(B=xpathFirst('.//div[@class="message_buttons"]//a[@class="sexy_button_new short white sexy_call_new" and contains(.,"Let Friends Get a Bonus")]',
d));if(B)return Autoplay.fx=function(){clickElement(B);addToLog("process Icon",'Asked for help with <span class="job">'+missions[RX6_getValue("selectMission")][MISSION_NAME]+"</span>.")},Autoplay.start(),!0}}else-1!=e.indexOf("You are not high enough level to do this job")?(addToLog("warning Icon","You are not high enough level to do "+missions[RX6_getValue("selectMission",1)][MISSION_NAME]+"."),addToLog("warning Icon","Job processing will stop"),RX6_setValue("autoMission",0),update_nrg_stam()):-1!=
e.indexOf("Success")?addToLog("process Icon",f):-1!=e.indexOf("Missing")?getJobRowItems(jobName)&&(DEBUG("RX6 needs some items to perform jobid="+jobid+" / selectMission="+RX6_getValue("selectMission",1)),jobid!=RX6_getValue("selectMission",1)&&(Autoplay.fx=autoMission)):DEBUG("Unrecognized job response.");q&&(Autoplay.fx=goJobsNav);Autoplay.start();break}catch(H){colorDEBUG("jobResponse error: "+H)}break;case "hitman":if(-1!=e.indexOf("someone else took out")){DEBUG(f);break}a=-1!=e.indexOf("You knocked out");
if(-1!=e.indexOf("You WON")){if(e.match(/gained.*?([A-Z]*?\$|\u00A2|\u00A3)([\d,]*\d)/i),g=RegExp.$1+RegExp.$2,f=e.match(/\d+\s+experience\s+points?/i),addToLog("yeah Icon","RX6 hit "+linkToString(c.profile,"user")+' and <span class="good">WON</span>. You gained <span class="good">'+g+'</span> and <span class="good">'+f+"</span>."),g=parseCash(g),RX6_setValue("hitmanWinCountInt",RX6_getValue("hitmanWinCountInt",0)+1),RX6_setValue("hitmanWinDollarsInt",String(GM_getIntValue("hitmanWinDollarsInt",0)+
g)),RX6_setValue("totalExpInt",RX6_getValue("totalExpInt",0)+parseInt(f)),RX6_setValue("totalWinDollarsInt",String(GM_getIntValue("totalWinDollarsInt",0)+g)),RX6_setValue("cashWinsNY",String(GM_getIntValue("cashWinsNY",0)+g)),!a&&canSpendStamina()&&6<ptsToNextLevel){var z;isGMChecked("staminaPowerattack")&&(z=xpathFirst('.//a[contains(.,"Power Attack")]',d));z||(z=xpathFirst('.//a[contains(.,"Attack Again")]',d));if(z)return Autoplay.fx=function(){clickAction=b;clickContext=c;clickElement(z);DEBUG("Clicked to repeat the hit on "+
clickContext.name+" ("+clickContext.id+").")},isGMChecked("noStats")||updateLogStats(STAMINA_HOW_HITMAN),Autoplay.delay=noDelay,Autoplay.start(),!0}}else-1!=e.indexOf("You LOST")?(e.match(/lost.*?([A-Z]*?\$|\u00A2|\u00A3)([\d,]*\d)/i),f=RegExp.$1+RegExp.$2,g="RX6 hit "+linkToString(c.profile,"user")+' and <span class="bad">LOST</span>. You lost <span class="bad">'+f+"</span>.",f=parseCash(f),RX6_setValue("hitmanLossCountInt",RX6_getValue("hitmanLossCountInt",0)+1),RX6_setValue("hitmanLossDollarsInt",
String(GM_getIntValue("hitmanLossDollarsInt",0)+f)),RX6_setValue("totalLossDollarsInt",String(GM_getIntValue("totalLossDollarsInt",0)+f)),RX6_setValue("fightLoss$NY",String(GM_getIntValue("fightLoss$NY",0)+f)),c.id&&(setHitmanOpponentAvoid(c),g+=" Avoiding."),addToLog("omg Icon",g)):-1!=e.indexOf("This player is currently part of your mafia")?c.id&&setHitmanOpponentAvoid(c):DEBUG(f);-1!=e.indexOf("You were snuffed")&&addToLog("updateBad Icon",'You <span class="bad">DIED</span>.');a&&(c.id&&addSavedListItem("hitmanListKilled",
c.id,100),e="",c.payerFamily&&(e=linkToString(opponent.payerFamily,"user")+" "),c.payerName&&(e=linkToString(opponent.payerName,"user")),addToLog("killedMobster Icon",'RX6 <span class="bad">KILLED</span> '+linkToString(c.profile,"user")+' and collected the <span class="money">'+c.bounty+"</span> bounty set by "+e+"."),RX6_setValue("hitmanWinCountInt",RX6_getValue("hitmanWinCountInt",0)+1),RX6_setValue("hitmanWinDollarsInt",String(GM_getIntValue("hitmanWinDollarsInt",0)+parseCash(c.bounty))),RX6_setValue("totalWinDollarsInt",
String(GM_getIntValue("totalWinDollarsInt",0)+parseCash(c.bounty))),RX6_setValue("cashWinsNY",String(GM_getIntValue("cashWinsNY",0)+parseCash(c.bounty))));isGMChecked("noStats")||updateLogStats(STAMINA_HOW_HITMAN);break;case "war":if(-1!=e.indexOf("Target user is not a friend")||-1!=e.indexOf("Target user does not exist"))removeSavedListItem("autoWarTargetList",c.target_id),addToLog("warning Icon","Invalid war target (id="+c.target_id+"). Removing from list.");else if(-1!=e.indexOf("is already at war with someone else"))2==
RX6_getValue("warMode",0)?(cycleSavedList("autoWarTargetList"),addToLog("info Icon",f.split(".")[0]+". Cycling warlist.")):addToLog("info Icon",f.split(".")[0]+". Getting new target.");else if(-1!=e.indexOf("You successfully betrayed")){addToLog("omg Icon",f.split("<br><br>")[0]+"</div>");break}else if(-1!=e.indexOf("You successfully declared war"))cycleSavedList("autoWarTargetList"),addToLog("yeah Icon",f);else if(-1!=e.indexOf("WON")||-1!=e.indexOf("LOST"))d=-1!=e.indexOf("LOST")?"omg Icon":"yeah Icon",
-1!=e.indexOf("to winning this war.")&&addToLog(d,f.split("to winning this war.")[0]+"to winning this war.</div>");helpWar&&(RX6_setValue("logPlayerUpdatesCount",1+RX6_getValue("logPlayerUpdatesCount",0)),helpWar=!1);setGMTime("warTimer","00:00");Autoplay.fx=goWarTab;Autoplay.start();return!0;case "help":var A=xpathFirst('.//a[contains(.,"Help ")]',d);if(A)return Autoplay.fx=function(){clickElement(A);clickAction="help";clickContext=c},Autoplay.delay=getAutoPlayDelay(),Autoplay.start(),!0;RX6_setValue("logPlayerUpdatesCount",
1+RX6_getValue("logPlayerUpdatesCount",0));g=linkToString(xpathFirst('.//a[contains(@onclick,"xw_controller=stats&xw_action=view")]',d),"user");c&&!g&&(g=c.user);-1!=e.indexOf("not your friend")||-1!=e.indexOf("You need to be friends")||-1!=e.indexOf("to help on a job.")?addToLog("info Icon","Failed to help"+(g?" "+g:"")+"with job. Reason: not friends."):-1!=e.indexOf("You are too late")?addToLog("info Icon","You are too late to help "+(g?" "+g:"")+" with this job."):-1!=e.indexOf("already helped")?
addToLog("info Icon","Already helped "+g+" with this job."):-1!=e.indexOf("You received")||-1!=e.indexOf("You helped")?(d=e.match(REGEX_CASH),f=0,e.match(/(\d+)\s+experience\s+points?/i)&&(f=parseInt(RegExp.$1)),-1!=e.indexOf("Special Bonus")&&(e=e.split("gained a ")[1],addToLog("lootbag Icon",'Found a <span class="loot">'+e.split(".<span")[0]+"</span> while helping on a job.")),g='You received <span class="good">'+d+'</span> and <span class="good">'+f+" experience</span> for helping "+g+" complete the job.",
RX6_setValue("passivetotalJobExpInt",GM_getIntValue("passivetotalJobExpInt",0)+f),addToLog("updateGood Icon",g),isGMChecked("noStats")||updateLogStats()):-1!=e.indexOf("25 friends")?addToLog("info Icon","Failed to help"+(g?" "+g:"")+" with job. Reason: already helped 25 friends for the day in that city."):addToLog("info Icon","WARNING: Not sure what happened when trying to help"+(g?" "+g:"")+"."+(c?" "+c.help:"")+" Perhaps you interfered by clicking on something?");Autoplay.start();return!0;case "help burners":if(A=
xpathFirst('.//a[contains(.,"Accept")]',d))return Autoplay.fx=function(){clickElement(A);clickAction="help burners";clickContext=c},Autoplay.delay=getAutoPlayDelay(),Autoplay.start(),!0;RX6_setValue("logPlayerUpdatesCount",1+RX6_getValue("logPlayerUpdatesCount",0));addToLog("info Icon",e);Autoplay.start();return!0;case "help parts":if(A=xpathFirst('.//a[contains(.,"Send Item")]',d))return Autoplay.fx=function(){clickElement(A);clickAction="help parts";clickContext=c},Autoplay.delay=getAutoPlayDelay(),
Autoplay.start(),!0;DEBUG("Parsing parts help.");RX6_setValue("logPlayerUpdatesCount",1+RX6_getValue("logPlayerUpdatesCount",0));-1!=e.indexOf("You sent ")&&addToLog("info Icon","RX6 sent "+f.split("You sent ")[1].split("</div>")[0]);Autoplay.start();return!0;case "withdraw":e.match(/withdrew/i)?addToLog(cities[city][CITY_CASH_CSS],f):DEBUG(f);(e=xpathFirst('//div[@id="bank_popup"]'))&&e.parentNode&&closePopup(e.parentNode,"Bank Popup");break;case "buy item":addToLog("info Icon",f.untag());break;
case "build item":d=c.propCount;e=cityProperties[d][ctTitle];d=cityProperties[d][ctGMId]+"Timer";/You cannot craft/i.test(f)||/You do not have/i.test(f)||/You need a higher/i.test(f)?(f=e+": "+f,setGMTime(d,"1 hour"),addToLog("warning Icon",f)):(setGMTime(d,"18 hours"),f.match(/You got (.+?)\./)?(e='RX6 built <span class="loot">'+RegExp.$1+"</span>.",f.match(/You gained:(.+?) close/)&&(e+=" You gained "+RegExp.$1+"."),addToLog("lootbag Icon",e)):addToLog("lootbag Icon",f));break;default:colorDEBUG('BUG DETECTED: Unrecognized action "'+
b+'".',cre),DEBUG("Unrecognized Action :"+f)}return!1}
function closePopup(a,b){if(!a)return DEBUG("Can not close "+b+" : popupElt undefined !"),!1;var c=document.getElementById("fb_dialog_cancel_button");c&&(DEBUG("Skipping "+b+" popup: "+a.id+"."),clickElement(c));(c=xpathFirst('.//a[contains(@class,"close")]',a))||(c=xpathFirst('.//a[@class="sexy_button_new medium black skip" or contains(.,"Cancel")]',a));c&&(DEBUG("Closing "+b+" popup: "+a.id+"."),clickElement(c));a.parentNode&&(DEBUG("Removing "+b+" popup: "+a.id+"."),a.parentNode.removeChild(a));
return!0}
function ignoreAllGifts(){var a=xpathFirst('.//input[@id="ignoreAllTxt"]'),b;a&&(b=a.value);var c=xpathFirst('.//input[@id="ignoreAllQty"]'),d=a=0;c&&(a=c.value.digitize());c=$x('.//li[contains(@id,"zmc_section_") and contains(@class,"gift") and contains(.,"'+b+'")]');if(a&&c&&0<c.length){d=c.length;a>d&&(a=d);alert("Removing "+a+" of "+d+' gifts containing "'+b+'".');for(i=0;i<a;i++){var e=xpathFirst('.//a[@class="ignore" and contains(.,"Ignore")]',c[i]);e&&clickElement(e)}alert(a+" of "+d+' gifts containing "'+
b+'" have been deleted.')}else alert("NO Gifts have been deleted.")}
function acceptAllGifts(){var a=xpathFirst('.//input[@id="ignoreAllTxt"]'),b;a&&(b=a.value);var c=xpathFirst('.//input[@id="ignoreAllQty"]'),d=a=0;c&&(a=c.value.digitize());var e=$x('.//li[contains(@id,"zmc_section_") and contains(@class,"gift") and contains(.,"'+b+'")]');if(a&&e&&0<e.length){d=e.length;a>d&&(a=d);alert("Accepting "+a+" of "+d+' gifts containing "'+b+'".');for(i=0;i<a;i++){var c=e[i],f=xpathFirst('.//a[@class="acceptonly" and contains(.,"ACCEPT GIFT")]',c);f?clickElement(f):(f=xpathFirst('.//a[@class="sexy_button_new medium white" and contains(.,"Accept Gift")]',
c))?clickElement(f):(f=xpathFirst('.//a[@class="sexy_button_new medium white" and contains(.,"Accept")]',c))&&clickElement(f)}alert(a+" of "+d+' gifts containing "'+b+'" have been accepted.')}else thislink=!1;if(!thislink)if(e=$x('.//li[contains(@id,"zmc_section_") and contains(@class,"help") and contains(.,"'+b+'")]'),a&&e&&0<e.length){d=e.length;a>d&&(a=d);alert("Accepting "+a+" of "+d+' non-gifts containing "'+b+'".');for(i=0;i<a;i++)c=e[i],(f=xpathFirst('.//a[@class="sexy_button_new medium white" and contains(.,"Accept")]',
c))&&clickElement(f);alert(a+" of "+d+' non-gifts containing "'+b+'" have been accepted.')}else alert("Nothing Found to accept...")}
function handlePopups(){for(var a=document.getElementsByClassName("unclickableMask"),b=0,c=a.length;b<c;b++)a[b].parentNode.removeChild(a[b]);if(running&&!timeLeftGM("bulletStopTimer"))if(xpathFirst('.//div[@id="LoadingOverlay" and contains(@style,"block")]'))try{var d=0,d=unsafeWindow.setInterval(function(){$(document).ready(function(a){document.getElementById("LoadingOverlay")&&(document.getElementById("final_wrapper").removeChild(document.getElementById("LoadingOverlay")),document.getElementById("LoadingBackground")&&
document.getElementById("final_wrapper").removeChild(document.getElementById("LoadingBackground")))});unsafeWindow.clearInterval(d)},1E3)}catch(e){}else try{var f=String($("#LoadingOverlay").attr("onclick"));$("#LoadingOverlay").attr("onclick","$('#LoadingBackground,#LoadingOverlay').hide();"+f).find("a").text("Kill Revolver!")}catch(g){}try{var h=xpathFirst('.//div[@id="currentTab"]',appLayoutElt);h&&RX6_setValue("currentTab",h.innerHTML);if(!running&&xpathFirst('.//div[@id="mfs_container"]'))return setGMTime("requestTimer",
"00:30"),handleRequests(!0),!0;var l=xpathFirst('.//div[@id="requests_toaster" and contains(@style,"block")]');if(l){var k=xpathFirst('.//div[@id="requests_toaster_txt"]',l);k&&addToLog("process Icon",'RX6 sent out <span class="good">'+k.innerHTML.untag().digitize()+"</span> request(s).");inRequests=!1;return closePopup(l,"Requests")}var q=$x('.//div[@class="buy_prompt"]',appLayoutElt);if(running&&q&&0<q.length)for(var b=0,r=q.length;b<r;++b)if(q[b]&&q[b].scrollWidth&&0<q[b].innerHTML.length){var p=
q[b];return closePopup(p,"Buy Prompt")}q=$x('.//div[contains(@id,"socialMissionFail") and @class="socialMissionTryAgain" and contains(@style,"block")]',appLayoutElt);if(running&&q&&0<q.length)for(b=0,r=q.length;b<r;++b)if(q[b]&&q[b].scrollWidth&&0<q[b].innerHTML.length){var p=q[b],s;isGMChecked("AutoRetryOperations")?(s=xpathFirst('.//a[contains(@onclick,"tryAgain") and contains(.,"Start")]',p),DEBUG("Clicking to retry expired operation")):(s=xpathFirst('.//a[contains(@onclick,"tryAgain") and contains(.,"Close")]',
p),DEBUG("Clicking to close expired operation"));s&&clickElement(s);return!0}q=$x('.//div[contains(@id,"zy_popup_box") and not(@class="zy_popup_box_bg") and contains(@style,"block")]',appLayoutElt);if(running&&q&&0<q.length)for(b=0,r=q.length;b<r;++b)if(q[b]&&q[b].scrollWidth&&0<q[b].innerHTML.length){p=q[b];if(s=xpathFirst('.//div[@class="achievement_message_text"]',p))if(s.innerHTML.untag().match(/you earned(.+)share/i)&&addToLog("yeah Icon","RX6 earned "+RegExp.$1+"."),isGMChecked("autoGlobalPublishing")&&
(s=xpathFirst('.//a[contains(@class,"sexy_achievement_new") and contains(.,"Share the wealth")]',p)))clickElement(s),DEBUG("Clicked to share Achievement Bonus");return closePopup(p,"Achievement Popup")}var t=xpathFirst('.//div[@class="chapter_jobs_container"]',appLayoutElt);if(t){var u=t.parentNode.parentNode;popParentTxt=u.getAttribute("style");var v=$x(".//tr",t);if(!v||0==v.length||-1==popParentTxt.indexOf("challenge")||-1!=popParentTxt.indexOf("display: none"))return!1;for(var w=0,D=v.length;w<
D;++w){var F=v[w];if(!xpathFirst('.//span[@id="flagged"]',F)){var B=0,H=xpathFirst('.//div[@class="fl job_energy_req"]',F);if(H){nrgEltTxt=H.innerHTML.untag();nrgEltTxt.match(/(\d+) Energy/i)&&(B=parseInt(RegExp.$1));var z=xpathFirst('.//span[@class="job_exp_payout"]',F);if(z){var A=z.innerHTML.untag();A.match(/(\d+)/i)&&(xpReward=parseInt(RegExp.$1));var G=Math.round(xpReward/B*100)/100;xpathFirst('.//span[@id="ratio_xp"]',z.parentNode)||(makeElement("br",z.parentNode),makeElement("span",z.parentNode,
{id:"ratio_xp",style:"color:#FF0000;font-size: 10px"}).appendChild(document.createTextNode("Pays "+G+"x")))}var E=xpathFirst('.//div[@class="challenge_progress_numbers"]',F);if(E&&(masteryEltTxt=E.innerHTML.untag(),masteryEltTxt.match(/(\d+)\%/i)&&(masteryPct=parseInt(RegExp.$1)),100==masteryPct)){var C=xpathFirst('.//span[contains(text(),"Do Job")]',F);C&&(C.innerHTML="Finished")}makeElement("span",F,{id:"flagged",style:"display:none"}).appendChild(document.createTextNode("Flag"))}}}if(isGMChecked("challengeMission")&&
running){popupTimer&&(window.clearInterval(popupTimer),popupTimer=window.setInterval(handlePopups,3E3));var O=xpathFirst('.//div[@id="challenge_messages"]',u);O&&addToLog("info Icon",O.innerHTML.untag());var J=xpathFirst('.//a[contains(@onclick,"postChallengeChapterFeed")]',u);if(J){clickElement(J);return}var M=xpathFirst('.//a[contains(@onclick,"challenge_messages") and contains(.,"OK")]',u);if(M){clickElement(M);return}var S=xpathFirst('.//a[contains(@onclick,"challenge_crew_dropdown")]',u);if(S&&
!timeLeftGM("autoAskChallengeCrewTimer")){var Q=S.innerHTML.untag();colorDEBUG("crewLink found :"+Q,caq);var R=0,I=0;if(Q.match(/(\d+)\/(\d+)/)&&(R=RegExp.$1,I=RegExp.$2,R<I)){var K=xpathFirst('.//a[@id="btn_crew_request" and contains(@selector,"challenge_mission_crew_recruit")]');if(K){inRequests=!1;setGMTime("requestTimer","00:30");setGMTime("autoAskChallengeCrewTimer","00:15:00");colorDEBUG("clicking to open challenge mission crew request popup",caq);clickElement(K);return}}}if(!xpathFirst('.//div[@id="challenge_mission_crew_recruit"]//div[@class="request_mfs_pop"]')){var V=
xpathFirst('.//div[@class="heat_progressbar"]//div',t);if(V){var Z=V.getAttribute("style");heatBarIndicator=-1!=Z.indexOf("green_heat")?0:-1!=Z.indexOf("orange_heat")?1:2;var Y=0,ea=GM_getValue("challengeMissionIndex",0);if(heatBarIndicator<=ea){var ba=xpathFirst('.//span[@id="gate_item_count"]',t);ba&&(neededItemsEltTxt=ba.innerHTML.untag(),neededItemsEltTxt.match(/x(\d+)/i)&&parseInt(RegExp.$1));var ha=xpathFirst('.//td[@class="chapter_jobs_tabs active_tab"]//a',u);ha&&(chapterEltTxt=ha.innerHTML.untag(),
chapterEltTxt.match(/Chapter (\d+)/i)&&(Y=parseInt(RegExp.$1)),colorDEBUG("challenge missions - currentChapter: "+Y,"#74BBFB"));w=0;for(D=v.length;w<D;++w)if(F=v[w],C=xpathFirst('.//span[contains(text(),"Do Job")]',F)){var ca=xpathFirst("./td/div",F),z=xpathFirst('.//span[@class="job_exp_payout"]',F),A=z.innerHTML.untag();A.match(/(\d+)/i)&&(xpReward=parseInt(RegExp.$1));B=0;if(H=xpathFirst('.//div[@class="fl job_energy_req"]',F))nrgEltTxt=H.innerHTML.untag(),nrgEltTxt.match(/(\d+) Energy/i)&&(B=
parseInt(RegExp.$1));if(ca&&xpReward&&B<energy){addToLog("process Icon",'You performed Challenge Job <span class="job">'+ca.innerHTML.untag()+'</span>,gaining <span class="good">'+xpReward+" experience</span>.");clickElement(C);return}addToLog("omg Icon","RX6 could not do the selected Challenge Mission Job: "+w+".")}else DEBUG("Skipping Challenge mission Job: "+w+". Locked, Finished or Items missing.");if(3>Y){var U=Y+1,W=xpathFirst('.//td[contains(@class,"chapter_jobs_tabs")]//a[contains(@onclick,"stage='+
U+'")]',u);if(W){DEBUG(" Trying Next Chapter: "+U+" - "+W.innerHTML);clickElement(W);return}DEBUG("NO Next Chapter: Leaving for now.")}else DEBUG("NO Jobs to do ATM: Leaving for now.")}else DEBUG("ProgressbarTxt heat : SITUATION OVERHEATED: Leaving for now.")}popupTimer&&(window.clearInterval(popupTimer),popupTimer=window.setInterval(handlePopups,1500));Autoplay.delay=150;Autoplay.start();autoReload(!1,"challenge mission");return closePopup(u,"challenge mission")}}}var X=$x('.//div[(contains(@id,"pop_box") and contains(@style,"block")) or contains(@id,"mystery")]',
appLayoutElt);if(X&&0<X.length)for(b=0,r=X.length;b<r;++b)if(p=X[b]){var P=p.innerHTML,y=P.untag().toLowerCase();if(-1==P.indexOf("fight_wrapper"))if(running){if((-1!=P.indexOf('id="marketplace"')||-1!=P.indexOf('id="original_buyframe_popup"')||-1!=P.indexOf("marketplace_title.png")||-1!=P.indexOf("giftcard_iframe")||-1!=P.indexOf("newbuyer_congrats")||-1!=P.indexOf("xw_controller=hospital")||-1!=P.indexOf("Build Complete")||-1!=P.indexOf('id="ChopShopCarousel"')||-1!=P.indexOf('class="account_settings_title"')||
-1!=P.indexOf('class="exp_discount_main"')||-1!=P.indexOf("this wave has ended")||-1!=P.indexOf("xw_controller=SubscriptionPlan")||-1!=P.indexOf('id="lbox_iframe"')||-1!=y.indexOf("wishlist is full")||-1!=y.indexOf("cooldown")||-1!=y.indexOf("buy now order")||-1!=y.indexOf("drag to reorder them")||-1!=y.indexOf("vengeance pack")||-1!=y.indexOf("hunt down")||-1!=y.indexOf("go to Fight")||-1!=y.indexOf("attack hunter"))&&-1==y.indexOf("select a consumable to use")&&-1==y.indexOf("crew requests"))return closePopup(p,
"Annoying Zollipops stuff");if(xpathFirst('.//div[@id="bank_popup_new"]',p)){var N="1 hour";colorDEBUG("RX6 SA Bank Popup");if(isGMChecked("autoSABank")){var T=xpathFirst('.//div[@class="global_button"]//a[@id="upgrade_bank"]',p);if(T){clickElement(T);colorDEBUG("clicked to upgrade SA Bank");return}colorDEBUG("SA Bank not upgradable");var ga=xpathFirst('.//div[@class="congrats_popup" and not(contains(@style,"none"))]',p);if(ga){addToLog("info Icon",ga.innerHTML.untag());return}var fa=$x('.//a[contains(@id,"bank_consumable_ask_btn_") and not(contains(@class,"disabled"))]',
p);if(fa&&fa.length){b=0;for(r=fa.length;b<r;b++)colorDEBUG("clicking askElt "+b),clickElement(fa[b]);N="24 hours"}else{var ka=xpathFirst('.//span[contains(@id,"bank_consumable_ask_btn") and contains(@id,"timer")]',p);ka&&(N=ka.innerHTML.untag())}colorDEBUG("timeReset: "+N);setGMTime("autoSABankTimer",N);return closePopup(p,"SA Bank Upgrade")}}if(-1!=y.indexOf("challenge mission is currently unavailable"))return GM_setValue("challengeMission",0),closePopup(p,"No Challenge Mission");var L=xpathFirst('.//div[@class="df_rwd_txt_container"]',
p);if(L)return addToLog("lootbag Icon",'RX6 collected your Daily Fix Reward: <span class="loot">'+L.innerHTML.untag()+"</span>."),closePopup(p,"Daily Fix Reward");if(xpathFirst('.//div[@id="pop_brazil_district_mastered"]',p)){var da="",Ba=xpathFirst('.//div[@id="map_boss_fight_victory"]//p',p);Ba&&(da+=Ba.innerHTML);var Ma=xpathFirst('.//div[@id="pop_brazil_district_mastered"]//div[contains(@class,"rewards")]//div[contains(@style,"mw_awardbox.png")]',p);Ma&&(da+=Ma.innerHTML);da&&addToLog("lootbag Icon",
da);if("0.0"!=RX6_getValue("selectTier","0.0")&&isGMChecked("switchDistrict")){colorDEBUG("switch District is enabled.");var Ca=RX6_getValue("selectTier","0.0").split("."),Da=parseInt(Ca[0]),Qa=parseInt(Ca[1])+1;if(Qa<missionTabs[Da].length){colorDEBUG("next district is available - switch to next district.");for(var db=[],b=0,r=missions.length;b<r;b++)Da==missions[b][MISSION_CITY]&&Qa==missions[b][MISSION_TAB]&&db.push(b);setSavedList("masteryJobsList",db);RX6_setValue("selectTier",Da+"."+Qa)}else colorDEBUG("next district NOT available - ignore switch district.")}if((aa=
xpathFirst('.//a[not(contains(@class,"disabled") and contains(@href,"xw_action=mastery_feed_success")]',p))&&isGMChecked("autoGlobalPublishing")){DEBUG("clicked to share district mastery success");clickElement(aa);return}if(aa=xpathFirst('.//a[contains(@class,"short") and contains(@onclick,"brazil_district_mastered")]',p)){DEBUG("clicked to continue after district mastery success");clickElement(aa);return}return closePopup(p,"district mastery")}var Ha=xpathFirst('.//div[@id="bossWinPop"]',p);if(Ha){districtBoss=
!1;var gb=xpathFirst('.//div[@class="textFields"]',Ha);gb&&addToLog("yeah Icon","RX6 defeated "+gb.innerHTML.untag());var hb=xpathFirst('.//div[@class="bossRewards"]//p',Ha);hb&&addToLog("lootbag Icon",hb.parentNode.innerHTML);var fb=xpathFirst('.//a[contains(@onclick,"returnToJobs") and contains(.,"Go Back")]',Ha);fb&&clickElement(fb);return closePopup(p,"district boss defeated")}var cb=xpathFirst('.//div[@id="role_select_bg"]',p);if(cb)return DEBUG("Found Battle Popup"),(aa=xpathFirst('.//a[@class="rightArrow" and contains(.,"FIGHT")]',
cb))&&clickElement(aa),closePopup(p,"Battle Popup");var ja=xpathFirst('.//div[contains(@id,"upgradeDiv") and not(contains(@style,"none"))]',p);if(ja){var Ga=ja.id.digitize();if(Ga){var eb=1,za=$x('.//div[contains(@class,"upgrade_card_amounts")]',p);if(za&&za.length&&3==za.length){var Ia=xpathFirst('.//span[contains(@id,"buy_one_part_have")]',za[2]),Ja=xpathFirst('.//span[contains(@id,"buy_one_part_need")]',za[2]);Ia&&Ja&&(parseInt(Ia.innerHTML)==parseInt(Ja.innerHTML)?(DEBUG("Limited Parts,FULL!!!!  We have: "+
Ia.innerHTML+" We Need: "+Ja.innerHTML),eb=2):DEBUG("Limited Parts,We have: "+Ia.innerHTML+" We Need: "+Ja.innerHTML))}var Ka=$x('.//a[contains(@onclick,"postfeedforproperty_part")]',p),la="8 hours";if(Ka&&Ka.length){var Jb=Ka[Ka.length-eb];DEBUG("Clicking Ask Limited Property Element");clickElement(Jb)}la="1 hour";colorDEBUG("resetting askLimitedPartsTimer for "+Ga+" to "+la,caq);setGMTime("askLimitedPartsTimer"+Ga,la);return closePopup(p,"Upgrade Limited Property: "+Ga)}var ib=ja.id.replace("upgradeDiv",
""),Aa=0,jb=!1;ctCount=0;for(cpLength=cityParts.length;ctCount<cpLength;ctCount++)colorDEBUG("verifying: "+cityParts[ctCount][ptPropPopup]+" vs "+ib),cityParts[ctCount][ptPropPopup]==ib&&(Aa=ctCount,jb=!0);if(!jb)return;var Ra=cityParts[Aa][ptGMId]+"Id",kb=RX6_getValue(Ra,0),pa=cityParts[Aa][ptProp],lb=cityParts[Aa][ptArray],Sa=cityParts[Aa][ptTimer],la="8 hours",La=lb[kb][0],Ra=lb[kb][1],qa,ra;if(isGMChecked("autoGlobalUpgrade")){colorDEBUG("try upgrading");var sa=xpathFirst('.//div[@class="pop_box" and contains(@style,"block")]//a[contains(@class,"sexy_announce ask_parts_callback_button") and contains(@onclick,"popBuildModFeed_bye")]');
if(sa)return colorDEBUG("ask for help before continuing to upgrade your global property: "+pa,caq),!0;if(sa=xpathFirst('.//div[@class="pop_box" and contains(@style,"block")]//a[contains(@class,"sexy_button_new short white") and contains(@onclick,"MW.Popup.hide")]'))return colorDEBUG("share upgrade news before continuing to upgrade your global property: "+pa,caq),!0;(qa=xpathFirst('.//div[contains(@class,"propLevel")]',ja))&&colorDEBUG("upgrade your global property: "+pa+" - "+qa.innerHTML.untag());
if((qa=xpathFirst('.//div[contains(@id,"cs_build_or_upgrade") and not(contains(@style,"none"))]//a[contains(@class,"green") and contains(.,"Upgrade") and not(contains(@href,"action=cs_gf_buy"))]',ja))&&!qa.hasAttribute("RX6"))return clickElement(qa),colorDEBUG("clicked to upgrade your global property: "+pa),qa.setAttribute("RX6","RX6"),!0;addToLog("warning Icon","Your "+pa+" could not be upgraded for free.");var Ea=$x('.//div[contains(@class,"upgrade_card_amounts")]',ja),Ta=0;if(Ea&&Ea.length)for(colorDEBUG("found "+
Ea.length+" possible items needed for upgrading"),j=0,jLength=Ea.length;j<jLength;j++){var ma=Ea[j],R=parseInt(xpathFirst('.//span[contains(@id,"buy_one_part_have")]',ma).innerHTML),I=parseInt(xpathFirst('.//span[contains(@id,"buy_one_part_need")]',ma).innerHTML),Ua=I-R;Ua>Ta&&(ma=ma.parentNode,colorDEBUG("seems more items are still needed to be able to upgrade: "+xpathFirst('.//div[@class="upgrade_card_name"]',ma).innerHTML.untag()),ra=xpathFirst('.//a[contains(@onclick,"propertyAskItem")]',ma))&&
(La=xpathFirst('.//div[@class="upgrade_card_name"]',ma).innerHTML.untag(),colorDEBUG("overriding user settings to ask for the more needed part: "+La+" needing: "+Ua,cre),Ta=Ua)}else return colorDEBUG("RX6 could not find upgrade buttons: retrying."),!0;ra?colorDEBUG("Most needed part :"+La+" needing: "+Ta):colorDEBUG("RX6 can not ask for most needed part atm: trying from user settings")}ra||(ra=xpathFirst('.//a[contains(@onclick,"(propertyAskItem'+Ra+')")]',ja));ra&&(clickElement(ra),addToLog("info Icon",
'RX6 asked for <span class="loot">'+La+'</span> to upgrade your <span class="property">'+pa+"</span>."));la="1 hour";colorDEBUG("Resetting "+Sa+" for "+la);Sa&&setGMTime(Sa,la);return closePopup(p,"Upgrade Global Property")}if(-1!=y.indexOf("opened a red mystery bag")||-1!=y.indexOf("share mystery bonus")){var Fa=xpathFirst('.//div[@class="mystery_bag_drop_item"]/div',p);Fa||(Fa=xpathFirst('.//div[contains(@class,"mystery")]/div',p));if(Fa){var ta='RX6 collected the following item from a red mystery bag or mystery bonus: <span class="loot">'+
Fa.innerHTML.untag().trim()+'</span>.<br><div class="lootImg">'+Fa.innerHTML+"</div>";addToLog("lootbag Icon",ta)}return closePopup(p,"Mystery Bag/Bonus Drop")}if(-1!=P.indexOf("BattleResultsController"))return DEBUG("Found BattleRewards Popup"),(aa=xpathFirst('.//a[contains(@onclick,"BattleResultsController.collectReward") and contains(.,"Collect")]',p))?(DEBUG("Found collect link to click,boom!"),clickElement(aa)):DEBUG("No collect link found :("),closePopup(p,"Battle Collect");if(-1!=P.indexOf("epic_battle_collect")||
-1!=y.indexOf("clan/battle")){DEBUG("Found BattleRewards Item Popup");var ua=xpathFirst('.//div[contains(@class,"item_with_preview")]',p);ua||(ua=xpathFirst('.//div[contains(@style,"item_with_preview")]',p));if(ua){var va='Family Battle Reward:<br><div class="lootImg">'+ua.innerHTML+"</div>";addToLog("lootbag Icon",va)}return closePopup(p,"Battle Collect Item")}if(-1!=y.indexOf("you cleared the full board"))return logRobResult(p),closePopup(p,"Robbing Board Popup");var mb=xpathFirst('.//span[@id="level_up_skill"]',
p);if(mb)if(isGMChecked("autoStat")){var Va=0,Va=parseInt(mb.innerHTML),na=autoStatVars(Va);if(Va&&""!=na[0]&&0!=na[1]){var Kb="remote/html_server.php?xw_controller=stats&xw_action=upgrade&upgrade_key="+na[0]+"&upgrade_amt="+na[1]+"&no_load=1&source=level_up_popup",Lb=createAjaxPage(!0);if(aa=makeElement("a",null,{onclick:'return do_ajax("'+Lb+'","'+Kb+'",1,0,null,update_level_up_skill);return false;'})){var Wa=na[0].replace("max_",""),nb=eval(Wa.toUpperCase()+"_STAT"),Mb=Wa.toLowerCase()+" Icon",
wa=isNaN(na[1])?1:parseInt(na[1]);GM_setValue("nextStat",(nb+1)%4);switch(nb){case ATTACK_STAT:curAttack+=wa;break;case DEFENSE_STAT:curDefense+=wa;break;case HEALTH_STAT:maxHealth+=wa;break;case ENERGY_STAT:maxEnergy+=wa;break;case STAMINA_STAT:maxStamina+=wa}addToLog(Mb,'<span style="color:#885588;">'+Wa+" increased by "+wa+" point(s).</span>");clickAction="autoStatAllocation";clickElement(aa);return}}}else DEBUG("Skill Poinst Allocation OFF");if(y.match(/(you are now level|promoted to level) (\d+)/i))return level=
RegExp.$2,checkLevel(),addToLog("info Icon",'You were promoted to level <span class="good">'+level+"</span>"),closePopup(p,"Level Up Bonus");var ob=$x('.//a[contains(@onclick,"postFeedAndSendSocialList") and contains(.,"Post")]',p);if(ob&&0<ob.length)return closePopup(p,"Level Up Bonus Sharing");if(-1!=y.indexOf("not involved in this mission"))return closePopup(p,"Not in Operation");if(-1!=y.indexOf("start operation")){var xa=xpathFirst('.//a[@class="sexy_button_new medium white" and contains(@onclick,"postCelebrateFeed")]',
p);xa||(xa=xpathFirst('.//a[@class="sexy_button_new medium white" and contains(@onclick,"startMission")]',p));xa&&isGMChecked("autoStartMyOps")&&(clickElement(xa),DEBUG("Popup Process: OPERATIONS - Started a new Operation"));return closePopup(p,"Start New Operation")}if(-1!=y.indexOf("invite friends"))return(xa=xpathFirst('.//a[@class="sexy_button_new medium white" and contains(@onclick,"postCelebrateFeed")]',p))&&isGMChecked("autoStartMyOps")&&(clickElement(xa),DEBUG("Popup Process: OPERATIONS - Started My own Operation")),
closePopup(p,"Inviting Friends on Operation Start");if(-1!=y.indexOf("failed to give reward"))return DEBUG("Popup Process: OPERATIONS - Claim Rewards Failed"),closePopup(p,"Claim Operations Rewards Failed");if(-1!=y.indexOf("completed the operation")){DEBUG("Popup Process: OPERATIONS - Claim Rewards : "+p.id);for(var pb=$x('.//td[@class="collectPopLootItem"]',p),va="",b=0;b<pb.length;++b)var qb=$x('.//div[contains(@style,"center")]',pb[b]),rb=qb[0].innerHTML.untag(),sb=qb[1].innerHTML,va=va?va+('<br><span class="loot">'+
rb+"</span> ("+sb+")"):'<span class="loot">'+rb+"</span> ("+sb+")";addToLog("lootbag Icon","Operation Rewards :<br>"+va);if(!isGMChecked("autoGlobalPublishing"))return closePopup(p,"Operations Rewards Claimed")}var tb=xpathFirst('.//a[@class="sexy_button_new medium white sexy_call_new" and contains(@onclick,"postCelebrateFeed")]',p);if(tb)return isGMChecked("autoGlobalPublishing")&&(clickElement(tb),DEBUG("Popup Process: OPERATIONS - Share Rewards")),closePopup(p,"Operations Rewards Claimed and Shared");
if(-1!=y.indexOf("won the fight")||-1!=y.indexOf("lost the fight"))return closePopup(p,"Succesfull War Attack");if(-1!=y.indexOf("have already helped"))return closePopup(p,"Already Helped");if(-1!=y.indexOf("war is already over"))return closePopup(p,"War already over");if(-1!=y.indexOf("a mafia request"))return closePopup(p,"War Not in Mafia");var ub=xpathFirst('.//a[@class="sexy_button_new short white sexy_call_new" and contains(@onclick,"attemptFeed")]',p);if(ub)return isGMChecked("autoGlobalPublishing")&&
(clickElement(ub),DEBUG("Popup Process: WAR - Declare War Publishing")),closePopup(p,"War Declaration Popup");if(-1!=y.indexOf("help to take out all 7"))return(eltHelp=xpathFirst('.//a[contains(.,"Ask Friends for Help")]',p))&&isGMChecked("autoGlobalPublishing")&&(clickElement(eltHelp),DEBUG("Popup Process: WAR - Ask Friends for Help Publishing")),closePopup(p,"War Help Popup");if(-1!=y.indexOf("share victory coins")){var Xa=$x('.//a[@class="sexy_button_new short white" and contains(@onclick,"postWarWin")]',
p);if(Xa&&isGMChecked("autoGlobalPublishing"))for(b=0;b<Xa.length>0;++b)warRewardButton=Xa[b],clickElement(warRewardButton),DEBUG("Popup Process: WAR - Reward Friends (Share Coins) for Help Publishing");return closePopup(p,"War Reward (Share Coins) Popup")}var Ya=xpathFirst('.//div[@id="fscr_mastery_reward_wrapper"]',p);if(Ya)try{var Na,vb,wb,xb,yb,Za,zb=xpathFirst('.//div[@id="fscr_mastery_item_name"]');zb&&(Na=zb.innerHTML.untag());var ya=xpathFirst('.//div[@class="ice item_card_mini superior item_with_preview"]',
Ya);ya&&(vb=xpathFirst(".//img",ya).getAttribute("src"),wb=xpathFirst('.//div[@class="attack]',ya).innerHTML.untag(),xb=xpathFirst('.//div[@class="defense]',ya).innerHTML.untag());xpathFirst('.//div[@class="fight_badge"]',Ya)&&(yb=xpathFirst(".//img",ya).getAttribute("src"),Za=xpathFirst(".//img",ya).getAttribute("title"));addToLog("lootbag Icon","Ice Season Reward: "+Na+' (span class="attack">'+wb+'<span><span class="defense">'+xb+'</span><br><div class="lootImg"><img src="'+yb+'" title="'+Za+'"alt="'+
Za+'" /></div><div class="lootImg"><img src="'+vb+'" title="'+Na+'"alt="'+Na+'"/></div>');return closePopup(p,"Ice / Fight Season Reward")}catch(Nb){colorDEBUG("fs Error: "+Nb)}var ia=xpathFirst('.//div[@id="octo_congrats"]');if(ia)try{colorDEBUG("octo_congrats",cye);var Ob=xpathFirst('.//div[@class="octo_item_name"]',ia),Pb=xpathFirst('.//div[@class="octo_item_stat"]//div[@class="attack octo_left"]',ia),Qb=xpathFirst('.//div[@class="octo_item_stat"]//div[@class="defense octo_right"]',ia);addToLog("lootbag Icon",
"RX6 successfully collected a "+Ob.innerHTML+' (<span class="attack">'+Pb.innerHTML+'<span> <span class="defense">'+Qb.innerHTML+"</span>) from Richie's Stash.");var Ab=xpathFirst('.//a[contains(@id,"oc_brag_feed_btn")]',ia);if(Ab){colorDEBUG("clicked to brag");clickElement(Ab);return}return closePopup(ia,"Richie's Stash - congrats")}catch(Rb){colorDEBUG("stash error: "+Rb,cye)}else if(ia=xpathFirst('.//div[@id="octo_build"]',p)){colorDEBUG("octo_build",cye);var $a=xpathFirst('.//div[contains(@class,"show")]//a[contains(@id,"octo_item_build_button") and contains(@onclick,"is_buildable=1")]',
ia);if($a){var Sb=xpathFirst('.//div[@class="octo_item_name"]',$a.parentNode.parentNode.parentNode).innerHTML.trim();clickElement($a);colorDEBUG("clicked to build : "+Sb+" (Richie's Stash Parts)");return}colorDEBUG("octo_build: no items to build",cye);var ab=xpathFirst('.//a[contains(@id,"octocraft_parts_feed_btn") and @onclick!="return false;"]',ia);if(ab){var Tb=xpathFirst('.//div[@class="consumable_name"]',ab.parentNode.parentNode.parentNode.parentNode).innerHTML.trim();clickElement(ab);colorDEBUG("clicked to ask for : "+
Tb+" (Richie's Stash Parts)");return closePopup(p,"Richie's Stash - Ask")}colorDEBUG("octo_build: no items to ask for",cye);for(var Bb=$x('.//span[contains(@id,"octocraft_parts_feed_btn") and contains(@id,"timer")]',p),Oa=3600,b=0,r=Bb.length;b<r;b++){var Cb=timeLeft(Bb[b].innerHTML.untag());Cb<Oa&&(Oa=Cb)}setGMTime("autoBuildStashTimer",secondsToHMS(Oa));colorDEBUG("octo_build: autoBuildStashTimer reset for "+secondsToHMS(Oa),cye);popupTimer&&(window.clearInterval(popupTimer),popupTimer=window.setInterval(handlePopups,
1500));return closePopup(p,"Richie's Stash - Timer")}if(y.match(/congratulations/i)){var Pa=$x('.//div[@style="margin: 10px;text-align: center;"]',p);if(Pa&&Pa.length){ta="";b=0;for(r=Pa.length;b<r;b++)ta+=Pa[b].innerHTML;ta&&addToLog("lootbag Icon",'RX6 crafted the following item:<br><div class="lootImg">'+ta+"</div>")}return closePopup(p,"Crafting")}if((eltHelp=xpathFirst('.//a[contains(@class,"sexy_button_new") and contains(.,"Share")]',p))&&isGMChecked("autoGlobalPublishing")&&-1==y.indexOf("my event ices"))return clickElement(eltHelp),
closePopup(p,"Share Themed Event Items");if((eltHelp=xpathFirst('.//a[contains(@class,"sexy_button_new") and contains(.,"Tell your friends")]',p))&&isGMChecked("autoGlobalPublishing")){var oa=xpathFirst('.//img[@class="item_with_preview"]',p);oa&&(rewardName=oa.getAttribute("title"),oa=oa.parentNode,oa=oa.innerHTML,addToLog("lootbag Icon",'RX6 Collected a <span class="loot">'+rewardName+'</span>:<br><div class="lootImg">'+oa+"</div>"));clickElement(eltHelp);DEBUG("Popup Process: Share Themed Event Items - "+
y+" / "+eltHelp.innerHTML);return closePopup(p,"Share Themed Event Items")}if(y.match(/you found (.*) loot event./i)||y.match(/you found all (.*) in action./))return y.match(/you found (.*) loot event./i)?logtxt='RX6 found <span class="loot">'+RegExp.$1+"<span> from a loot event.":y.match(/you found all (.*) in action./)&&(logtxt='RX6 found <span class="loot">'+RegExp.$1+"</span> in action."),logtxt&&addToLog("yeah Icon",logtxt),closePopup(p,"Loot Event");if(-1!=y.indexOf("close_suggestor_iframe")&&
!timeLeftGM("requestTimer"))return colorDEBUG("requestTimer expired: trying to close Free Gift Selector popup"),closePopup(p,"Free Gift Suggestor");if(isGMChecked("autoAskCityCrew")&&-1!=y.indexOf("send city crew requests")||isGMChecked("challengeMission")&&-1!=y.indexOf("mission crew requests")){colorDEBUG("city / challenge mission crew requests");if(inRequests){if(!timeLeftGM("requestTimer"))return colorDEBUG("requestTimer expired: trying to close City Crew Selector popup"),inRequests=!1,closePopup(p,
"autoAskCityCrew Requests");return}setGMTime("requestTimer","00:30");var Db=xpathFirst('.//div[@id="mfs_tab_2" and contains(@class,"inactive")]');if(Db){clickElement(Db);return}var Eb=xpathFirst('.//a[@class="sexy_button_new medium orange" and contains(@onclick,"MW.Request.submitMFS") and contains(.,"SEND REQUESTS")]');crewMembers=$x('.//div[@class="mfs_selectable"]//li[@class="mfs_add" and not(contains(@style,"none"))]');if(0<crewMembers.length&&Eb&&!inRequests){colorDEBUG("request button and #"+
crewMembers.length+" found");inRequests=!0;var Fb=xpathFirst('.//a[@id="selectMaxButton" and not (contains(@class,"disabled"))]');if(Fb)clickElement(Fb);else if(50<crewMembers.length){var Gb=randomArray(50,0,crewMembers.length-1);j=0;for(jLength=Gb.length;j<jLength;j++)clickElement(crewMembers[Gb[j]])}else for(b=0,r=crewMembers.length;b<r;b++)clickElement(crewMembers[b]);clickElement(Eb)}else colorDEBUG("no request button or #"+crewMembers.length+" found - reset timer."),setGMTime("requestTimer",
"00:00");if(0==crewMembers.length||!timeLeftGM("requestTimer"))return colorDEBUG("requestTimer expired: trying to close City Crew Selector popup"),inRequests=!1,closePopup(p,"autoAskCityCrew Requests");return}if(-1!=y.indexOf("level mastered"))return(sa=xpathFirst('.//a[@class="sexy_button_new short green sexy_announce" and contains(@onclick,"post_mastery_feed")]',p))&&isGMChecked("autoGlobalPublishing")&&(clickElement(sa),DEBUG("Popup Process: Robbing/Fighting Level Mastery - Tell Your Friends")),
closePopup(p,"Robbing/Fighting Level Mastered");if(sa=xpathFirst('.//a[contains(@class,"sexy_announce ask_parts_callback_button") and contains(@onclick,"popBuildModFeed_bye")]',p))return clickElement(sa),DEBUG("Popup Process: Global Properties Upgrade - Ask for Help and Let Friends Get a Bonus"),closePopup(p,"Global Properties Upgrade");if(ja=xpathFirst('.//div[contains(@id,"upgradeDiv") and not(contains(@style,"none"))]',p))return;if(xpathFirst('.//div[@class="rux-quest-popup"]',p)){var Hb=xpathFirst('.//a[@id="continue-button"]',
p);if(Hb)clickElement(Hb);else return closePopup(p,"Quest Popup")}if(-1!=y.indexOf("paypal"))return closePopup(p,"Paypal");if(-1!=P.indexOf("xw_action=buyframe_popup")||-1!=y.indexOf("div.buyframe_pop_box"))return closePopup(p,"Buy Reward Points");if(-1!=y.indexOf("treasure chest"))return closePopup(p,"Treasure Chest");if(-1!=y.indexOf("keep winning"))return closePopup(p,"Robbery Keep Winning");if(-1!=y.indexOf("tired of losing"))return closePopup(p,"Robbery Tired of Losing");if(-1!=y.indexOf("friend to be in your mafia and help"))return closePopup(p,
"Grow your Mafia");if(-1!=y.indexOf("not have enough"))return closePopup(p,"not enough health,stamina or energy");if(-1!=y.indexOf("out of")&&-1==y.indexOf("the bank"))return closePopup(p,"out of health,stamina or energy");if(-1!=y.indexOf("you helped in"))return closePopup(p,"You helped in");var Ub=xpathFirst('.//div[@id="let_there_be_space"]',p),Vb=xpathFirst('.//div[@id="request_ifc"]',p);if(Ub&&Vb)return closePopup(p,"increase your mafia");if(-1!=y.indexOf("total requests"))return closePopup(p,
"ZMC popup");if(-1!=y.indexOf("postfeedandsendfightbrag"))return closePopup(p,"Ice Event popup");if(!isGMChecked("autoIgnorePopups")){if(isGMChecked("autoClosePopups"))return closePopup(p,"autoClosing (autoProcess) Unknown");if(isGMChecked("autoProcessPopups"))return(ua=xpathFirst('.//div[contains(@style,"item_with_preview")]',p))&&addToLog("lootbag Icon",ua.innerHTML),(eltButton=xpathFirst('.//a[contains(@class,"sexy_button_new") and not(contains(@class,"buy")) and not (contains(.,"Refill")) and not (contains(.,"Buy")) and not (contains(.,"RP")) and not (contains(.,"Purchase"))]',
p))?(DEBUG("Tried to process the following popup ("+eltButton.innerHTML+"):<br>"+y),clickElement(eltButton)):DEBUG("Could not process the following popup :<br>"+y),closePopup(p,"autoClosing (autoProcess) Unknown")}}else if(-1!=y.indexOf("total requests")){var bb=xpathFirst('.//ul[@id="zmc_message_list_ul"]',p),Wb=xpathFirst('.//span[@id="ignoreAllfromZMC"]',p);xpathFirst('.//span[@id="acceptAllfromZMC"]',p);if(bb&&!Wb){var Ib=makeElement("li",null,{style:"width:98%;padding:5px 0px 1px 0px;text-align:center;margin-top:3px"});
title="Process All Gifts from ZMC";var aa=makeElement("span",Ib,{id:"ignoreAllfromZMC",title:title,style:"font-size:11px"});aa.appendChild(document.createTextNode(title+" containing : "));id="ignoreAllTxt";title="Process Gifts from ZMC - Search String";makeElement("input",aa,{type:"text",id:id,title:title,value:"Giddy Atkinson",style:"width: 140px;font-size:10px"});aa.appendChild(document.createTextNode("     Max. Quantity : "));id="ignoreAllQty";title="Maximum Quantity: ";makeElement("input",aa,
{type:"text",id:id,title:title,value:250,style:"width: 26px;"});id="ignoreAllLink";eltA=makeElement("a",aa,{id:id,href:"#",alt:title,title:title,type:"button",role:"button","class":"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only",style:"padding:3px;width:70px;margin-left:5px"});eltA.appendChild(document.createTextNode("Ignore"));id="acceptAllLink";eltB=makeElement("a",aa,{id:id,href:"#",alt:title,title:title,type:"button",role:"button","class":"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only",
style:"padding:3px;width:70px;margin-left:5px"});eltB.appendChild(document.createTextNode("Accept"));eltA.addEventListener("click",ignoreAllGifts,!1);eltB.addEventListener("click",acceptAllGifts,!1);bb.insertBefore(Ib,bb.firstChild)}}}else return closePopup(p,"autoClosing empty popups")}catch(Xb){DEBUG("Error @handlePopups: "+Xb)}return!1}
function updateScript(){try{GM_xmlhttpRequest({method:"GET",url:SCRIPT.metadata+"?"+Math.random(),onload:function(a){200==a.status&&a.responseText.match(/@version\s+(\d+).(\d+).(\d+)/)&&(a=RegExp.$1+"."+RegExp.$2+"."+RegExp.$3,a!=SCRIPT.version?window.confirm("Version "+a+" is available!\n\nDo you want to install this version?\n")&&(window.location.href=SCRIPT.url):alert("You already have the latest version: "+a))}})}catch(a){DEBUG("BUG DETECTED (updateScript): "+a)}}
function clearSettings(){if("function"==typeof GM_listValues&&"function"==typeof GM_deleteValue)for(var a="fnirInyhrString fnirInyhr fnirInyhrPermissions fnirInyhrVersion fnirInyhrOK fnirInyhrSum isRunning version currentLevel itemLog enableDebug".split(" "),b=GM_listValues(),c=0,d=null;d=b[c];c++)0<=a.indexOf(d)||0<=d.indexOf("Timer")?gmLog("keeping :"+d):GM_deleteValue(d);else alert("In order to do this you need at least GreaseMonkey version: 0.8.20090123.1. Please upgrade and try again.")}
function setSavedList(a,b){RX6_setValue(a,b.join("\n"))}function getSavedList(a){return(a=String(RX6_getValue(a,"")))?a.split("\n"):[]}function addSavedListItem(a,b,c){var d=getSavedList(a);if(-1==d.indexOf(b)){d.push(b);if(0<c)for(;c<d.length;)d.shift();setSavedList(a,d)}}function removeSavedListItem(a,b){var c=getSavedList(a),d=c.indexOf(b);return-1!=d?(c.splice(d,1),setSavedList(a,c),!0):!1}
function removeJobForItem(a,b){var c=getSavedList(a,""),d=0;if(0<c.length){var e=c[c.length-1];requirementJob.forEach(function(c){c[1]==e&&requirementJob[d][0]==b&&removeSavedListItem(a,requirementJob[d][1]);d++})}}function cycleSavedList(a){var b=String(RX6_getValue(a,""));if(""!=b&&0!=b.length&&(b=b.split("\n"),0!=b.length)){var c=b.shift();c&&b.push(c);RX6_setValue(a,b.join("\n"))}}function stripURI(a){a=a.split('"')[1];return a.replace('" />',"")}
function showIfUnchecked(a){return"checked"!=a?"unchecked":a}function showIfSelected(a){return"checked"==a?"selected":"unselected"}function showIfRelative(a){return"checked"==RX6_getValue(a)?"relative":"absolute"}
function linkToString(a,b){if(!a)return a;var c=function(a){if(a.match(/user=/)){var b=a.split("user=")[1].split("'")[0].split("&")[0];a=a.replace(b,decodeID(b))}return a},d="<a";b&&(d+=' class="'+b+'"');if(a.hasAttribute("onclick")){var e=a.getAttribute("onclick");e&&(d+=' onclick="'+c(e)+'"')}return d+=' href="'+c(a.href)+'">'+a.innerHTML+"</a>"}function decodeHTMLEntities(a){if(!a)return a;scratchpad.innerHTML=a;return scratchpad.value}
function clickElement(a){try{if(a){var b=document.createEvent("MouseEvents");b.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null);a.dispatchEvent(b)}else colorDEBUG("BUG DETECTED: Null element passed to clickElement().",cre)}catch(c){}}
function mouseOverElement(a){try{if(a){var b=document.createEvent("MouseEvents");b.initMouseEvent("mouseover",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null);a.dispatchEvent(b)}else colorDEBUG("BUG DETECTED: Null element passed to mouseOverElement().",cre)}catch(c){}}
function mouseOutElement(a){try{if(a){var b=document.createEvent("MouseEvents");b.initMouseEvent("mouseout",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null);a.dispatchEvent(b)}else colorDEBUG("BUG DETECTED: Null element passed to mouseOutElement().",cre)}catch(c){}}
function checkEltId(a){return!a||-1==a.indexOf("countdown")&&-1==a.indexOf("timer")&&-1==a.indexOf("ask_for_job_help_time")&&-1==a.indexOf("zmc_event_count")&&-1==a.indexOf("googleAds")&&-1==a.indexOf("ps_mwap_promo_banner")&&-1==a.indexOf("FeaturedEventsModule")&&-1==a.indexOf("propv2-collectall")&&-1==a.indexOf("jobboard_module")&&-1==a.indexOf("fs_time_remain_title")&&-1==a.indexOf("user_")&&-1==a.indexOf("empire_featured")&&-1==a.indexOf("group_BuyHPTime")?!1:!0}
function ignoreElement(a){var b=a.parentNode;return b&&checkEltId(b.id)||checkEltId(a.id)?!0:!1}function xpathFirst(a,b){return document.evaluate(a,b||document,null,XPathResult.ANY_UNORDERED_NODE_TYPE,null).singleNodeValue}function $x(a,b){for(var c,d=[],e=document.evaluate(a,b||document,null,XPathResult.UNORDERED_NODE_ITERATOR_TYPE,null);c=e.iterateNext();)d.push(c);return d}function xpath(a,b){return document.evaluate(a,null==b?document:b,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null)}
function toggleCheckElt(a){if(isGMChecked(a))return RX6_setValue(a,0),!1;RX6_setValue(a,"checked");return!0}function defaultCheckBoxElementArray(a,b){for(var c=0;c<a.length;c++)RX6_setValue(a[c],b)}function saveCheckBoxElementArray(a){for(var b=0;b<a.length;b++)document.getElementById(a[b])?saveCheckBoxElement(a[b]):RX6_setValue(a[b],0)}function saveCheckBoxElement(a){if(!0===document.getElementById(a).checked)return RX6_setValue(a,"checked"),!0;RX6_setValue(a,0);return!1}
function saveElementArray(a){for(var b=0;b<a.length;b++)saveElement(a[b])}
function saveElement(a){if(document.getElementById(a[0]))switch(a[1]){case 1:RX6_setValue(a[0],document.getElementById(a[0]).selectedIndex?document.getElementById(a[0]).selectedIndex:0);break;case 2:RX6_setValue(a[0],document.getElementById(a[0]).value?document.getElementById(a[0]).value:0);break;case 3:RX6_setValue(a[0],!0===document.getElementById(a[0]).checked?"checked":0);break;case 4:RX6_setValue(a[0],a[2]?a[2]:0);break;default:RX6_setValue(a[0],document.getElementById(a[0]))}else if(5==a[1]&&
document.getElementsByName(a[0])){var b=document.getElementsByName(a[0]);for(i=0;i<b.length;i++)if(!0==b[i].checked){RX6_setValue(a[0],parseInt(b[i].value));break}}else RX6_setValue(a[0],0)}
function returnElement(a,b){var c=0;if(document.getElementById(a[0]))switch(a[1]){case 1:c=document.getElementById(a[0]).selectedIndex?document.getElementById(a[0]).selectedIndex:0;break;case 2:c=document.getElementById(a[0]).value?document.getElementById(a[0]).value:0;break;case 3:c=!0===document.getElementById(a[0]).checked?"checked":0;break;case 4:c=a[2]?a[2]:0;break;default:c=document.getElementById(a[0])}isUndefined(b)||(isNaN(c)?c=b:(c=parseFloat(c),0>c&&(c=0)));return c}
function GM_getIntValue(a,b){isNaN(b)&&(b=0);var c=RX6_getValue(a,b);return isNaN(c)?0:parseInt(c)}function GM_getFloatValue(a,b){isNaN(b)&&(b=0);var c=RX6_getValue(a,b);return isNaN(c)?0:parseFloat(c)}function isGMEqual(a,b){return RX6_getValue(a)+""==b+""}function isGMChecked(a){return isGMEqual(a,"checked")}function isGMUndefined(a){return isUndefined(RX6_getValue(a))}function isUndefined(a){return"undefined"==a+""}
function makeElement(a,b,c,d,e){a=document.createElement(a);if(null!=c)for(var f in c)a.setAttribute(f,c[f]);null!=d&&"checked"==RX6_getValue(d,e)&&a.setAttribute("checked","checked");b&&b.appendChild(a);return a}function destroyByID(a){(a=document.getElementById(a))&&a.parentNode.removeChild(a)}function remakeElement(a,b,c,d,e){c.id&&destroyByID(c.id);return makeElement(a,b,c,d,e)}
function getBrowserWindowSize(){document.body&&document.body.offsetWidth&&(winW=document.body.offsetWidth);winH=document.body.offsetHeight;"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth&&(winW=document.documentElement.offsetWidth);winH=document.documentElement.offsetHeight;window.innerWidth&&window.innerHeight&&(winW=window.innerWidth);winH=window.innerHeight}function isNewCity(a){return a==BRAZIL||a==CHICAGO||a==LONDON||a==SA?!0:!1}
function isSecretDistrict(a,b){switch(a){case BRAZIL:return 8<b?!0:!1;case CHICAGO:return 6<b?!0:!1;case LONDON:return 10<b?!0:!1;case SA:return 10<b?!0:!1;default:return!1}}function parseCash(a){"string"==typeof a&&(a=a.trim().replace(/K$/,"00"),a=a.trim().replace(/K/,"0"),a=a.trim().digitize());return parseInt(a)}
function parseCashLoc(a){if("string"==typeof a&&a.match(/([A-Z]*?\$|\u00A2|\u00A3)[\d,]*\d/))switch(RegExp.$1){case "BRL$":return BRAZIL;case "\u00a2":return CHICAGO;case "\u00a3":return LONDON;case "R":return SA}return NY}function makeCommaValue(a){a=String(a);return a==(a=a.replace(/^(.*\s)?(\d+)(\d{3}\b)/,"$1$2,$3"))?a:makeCommaValue(a)}function getGMTime(a){var b=RX6_getValue(a,0),b=Date.parse(b);b||(setGMTime(a,"00:00:00"),b=RX6_getValue(a,0),b=Date.parse(b));return b/1E3}
function setGMTime(a,b){var c=new Date;c.setMilliseconds(0);"now"!=b&&c.setTime(c.getTime()+1E3*timeLeft(b));RX6_setValue(a,c.toString())}function timeLeftGM(a){a=getGMTime(a);var b=new Date;b.setMilliseconds(0);return Math.max(a-b.getTime()/1E3,0)}
function timeLeft(a){if(!a)return 0;var b=0,c=[],c=a.split(":");if(2==c.length)b=60*parseInt(c[0])+parseInt(c[1]);else if(3==c.length)b=3600*parseInt(c[0])+60*parseInt(c[1])+parseInt(c[2]);else if(1==c.length)for(c=a.split(" and "),i=0;i<c.length;i++)if(spaceIndex=c[i].indexOf(" "),-1!=spaceIndex)if(firstPart=c[i].substring(0,spaceIndex),secondPart=c[i].substring(spaceIndex+1,c[i].length),"minutes"==secondPart||"minute"==secondPart)b+=60*parseInt(firstPart);else if("seconds"==secondPart||"second"==
secondPart)b+=parseInt(firstPart);else if("hours"==secondPart||"hour"==secondPart)b+=parseInt(3600*firstPart);else if("days"==secondPart||"day"==secondPart)b+=parseInt(86400*firstPart);return b}function getCurrentTime(){return Math.round((new Date).getTime()/1E3/60)}function secondsToHMS(a){a=Number(a);if(isNaN(a))return 0;var b=Math.floor(a/3600),c=Math.floor(a%3600/60);a=Math.floor(a%3600%60);return(0<b?b+":":"")+(0<c?(0<b&&10>c?"0":"")+c+":":"00:")+(10>a?"0":"")+a}
function getHoursTime(a){return secondsToHMS(timeLeftGM(a))}function isJsonString(a){try{JSON.parse(a)}catch(b){return!1}return!0}function decodeID(a){a=unescape(a);isNaN(a)&&(a=decode64(a));return a}
function decode64(a){var b="",c,d,e="",f,g="",h=0;/[^A-Za-z0-9\+\/\=]/g.exec(a)&&DEBUG("Invalid character(s) found in input ("+a+"). Expect errors in decoding.");a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");do c=keyStr.indexOf(a.charAt(h++)),d=keyStr.indexOf(a.charAt(h++)),f=keyStr.indexOf(a.charAt(h++)),g=keyStr.indexOf(a.charAt(h++)),c=c<<2|d>>4,d=(d&15)<<4|f>>2,e=(f&3)<<6|g,b+=String.fromCharCode(c),64!=f&&(b+=String.fromCharCode(d)),64!=g&&(b+=String.fromCharCode(e));while(h<a.length);return b}
function encode64(a){var b="",c,d,e="",f,g,h="",l=0;do c=a.charCodeAt(l++),d=a.charCodeAt(l++),e=a.charCodeAt(l++),f=c>>2,c=(c&3)<<4|d>>4,g=(d&15)<<2|e>>6,h=e&63,isNaN(d)?g=h=64:isNaN(e)&&(h=64),b=b+keyStr.charAt(f)+keyStr.charAt(c)+keyStr.charAt(g)+keyStr.charAt(h);while(l<a.length);return b}function onOperationsNav(){return xpathFirst('.//div[@id="socialMissionNav"]//a',innerPageElt)?!0:!1}
function goOperationsNav(){var a=xpathFirst('.//div[@id="nav_link_events_unlock"]//a',menubarElt);return a?(clickElement(a),!0):!1}function onOperationsTab(a,b){var c=xpathFirst('.//a[@id="'+a+'" and contains(@onclick,"controller=socialmission") and contains(@style,"menu_item_hover")]',innerPageElt);if(c)return!0;c=xpathFirst('.//a[@id="'+a+'" and contains(@onclick,"controller=socialmission")]',innerPageElt);return"go"==b?(clickElement(c),!0):!1}
function checkmyMissions(a){var b="";"start"==a&&(b="startMission");"remove"==a&&(b="showTryAgain");return(a="join"==a?xpathFirst('.//div[@class="socialMission"]//a[contains(@class,"sexy_button_new short") and contains(@onclick,"joinMission" )]',innerPageElt):"continue"==a?xpathFirst('.//div[@class="doTaskModule" and not (contains(@style,"none"))]//a[contains(@class,"sexy_button_new medium") and contains(@onclick,"closeTask" )]',innerPageElt):xpathFirst('.//div[@class="socialMission"]//a[contains(@class,"sexy_button_new medium") and contains(@onclick,"'+
b+'" )]',innerPageElt))?(destroyByID("inner_flag"),clickElement(a),!0):!1}
function getOperationsInfo(a,b,c){a.container=xpathFirst('.//div[@id="socialMission_'+a.id+'" and @class="socialMission"]');if(!a.container)return"undefined";a.name=xpathFirst('.//div[@class="missionName"]',a.container).innerHTML.untag().capitalize().trim();a.emptySlot=xpathFirst('.//div[@class="missionTaskImage" and contains(@style,"silhoutte_thmb")]',a.container);if("basic"==c)return a;a.slot=b;a.module=xpathFirst('.//div[@id="missionTask_'+a.slot+"_"+a.id+'_module"]',a.container);if(b=xpathFirst('.//div[@class="doTaskName"]',
a.module))a.taskName=b.innerHTML.untag();if(b=xpathFirst('.//div[@class="doTaskMastery"]//p',a.module))a.taskMastery=b.innerHTML.untag().digitize();if(b=xpathFirst('.//div[@class="doTaskPaysModule"]//dd[contains(@class,"experience")]',a.module))a.xp=b.innerHTML.untag();if(b=xpathFirst('.//div[@class="doTaskPaysModule"]//dd[contains(@class,"cash")]',a.module))a.cash=b.innerHTML.untag(),b.className.match(/(.+?)_cash_icon/i)&&(b=RegExp.$1.replace("southafrica","sa"),a.cashCity=cities.searchArray(b,1)[0]);
a.nrgNeeded=0;if(b=xpathFirst('.//div[@class="doTaskUsesModule"]//dd[contains(@class,"energy")]',a.module))a.nrgNeeded=b.innerHTML.untag();a.stamNeeded=0;if(b=xpathFirst('.//div[@class="doTaskUsesModule"]//dd[contains(@class,"stamina")]',a.module))a.stamNeeded=b.innerHTML.untag();a.cashNeeded=0;if(b=xpathFirst('.//div[@class="doTaskUsesModule"]//dd[contains(@class,"cash")]',a.module))a.cashNeeded=b.innerHTML.untag(),b.className.match(/(.+?)_cash_icon/i)&&(b=RegExp.$1.replace("southafrica","sa"),a.cashNeededCity=
cities.searchArray(b,1)[0]);a.taskResult="";a.taskFailed=!1;"result"==c&&(b=xpathFirst('.//div[@class="task_results"]',a.module))&&(a.taskResult=b.innerHTML.untag(),"FAILURE"==a.taskResult&&(a.taskFailed=!0));checkOperationsInfo(a);a.doable?colorDEBUG("getOperationsInfo doable"):colorDEBUG("getOperationsInfo NOT doable",cre);return a}
function checkOperationsInfo(a){a.doable=!1;if(!(100==a.taskMastery||a.nrgNeeded&&(energy<a.nrgNeeded||energy-a.nrgNeeded<SpendMissionEnergy.floor)||a.stamNeeded&&(stamina<a.stamNeeded||stamina-a.stamNeeded<SpendMissionStamina.floor))){if(a.neededCash){if(a.neededCashCity!=city)return Autoplay.fx=function(){goLocation(a.neededCashCity)},Autoplay.start(),!1;if(0<parseCash(a.neededCash)-parseCash(cities[city][CITY_CASH])+4*parseCash(a.neededCash))return suspendBank=!0,autoBankWithdraw(cashDiff),Autoplay.fx=
GoFamilyTab,Autoplay.start(),!1}a.doable=!0}}function askOperationsHelp(){var a=xpathFirst('.//a[contains(@class,"ask_for_help") and contains(@onclick,"postAskHelpFeed")]',innerPageElt);if(a){var b=a.id.replace("sm_action_button_","");opsInfo=new Operations(b);opsInfo=getOperationsInfo(opsInfo,"","basic");if(opsInfo.emptySlot)return clickElement(a),addToLog("updateGood Icon",'RX6 asked for help on Operation: <span class="job">'+opsInfo.name+"</span>."),!0}return!1}
function collectOperationsRewards(){var a=xpathFirst('.//a[@class="sexy_button_new medium green" and contains(@onclick,"collectReward")]',innerPageElt);a&&(clickElement(a),DEBUG("Clicked to Claim Operations Rewards on Operation."));return!1}
function goOperationsSubTab(a,b){var c=xpathFirst('.//a[@class="'+a+' " and contains(@onclick,"viewPage")]',innerPageElt);return c?(DEBUG("goOperationsSubTab: "+a+" button FOUND."),"go"==b&&(clickElement(c),DEBUG("goOperationsSubTab: going to "+a+" page.")),!0):!1}
function closeExpiredOperations(){var a=xpathFirst('.//div[@class="missionBoxRight"]//a[@class="sexy_button_new medium white" and contains(@onclick,"removeMission") and not (contains(@style,"none"))]',innerPageElt);a||(a=xpathFirst('.//div[@class="missionBoxRight"]//a[@class="sexy_button_new medium white" and contains(@onclick,"removeMission") and contains(.,"Close")]',innerPageElt));return a?(DEBUG("Clicked to Close an Operation."),clickElement(a),goOperationsSubTab("left","go"),!0):!1}
function canStartOperationsTask(a){colorDEBUG("canStartOperationsTask - mode: "+(a?"true":"false"),cre);if((a=a?$x('.//a[contains(@onclick,"startTask") and contains(@class,"do_job") and not(contains(@id,"hover"))]',innerPageElt):$x('.//a[contains(@onclick,"startTask") and contains(@class,"do_job") and contains(@id,"hover")]',innerPageElt))&&0<a.length)for(i=0,iLength=a.length;i<iLength;i++){var b=a[i],c=b.id.replace("sm_action_button_hover_","").replace("sm_action_button_",""),d=/'(.+)'/.exec(b.getAttribute("onclick"))[1],
e=d.split(",")[1].digitize();DEBUG("canStartOperationsTask - FOUND "+c+" - "+d+" - "+e,caq);if(b.hasAttribute("disabled"))return DEBUG("canStartOperationsTask - operations Module already OPEN",caq),opsInfo=new Operations(c),opsInfo=getOperationsInfo(opsInfo,e,"do"),opsInfo.doable?!0:!1;opsInfo=new Operations(c);opsInfo=getOperationsInfo(opsInfo,e,"start");if(opsInfo.doable)return DEBUG("canStartOperationsTask "+opsInfo.name+" - clicking start button",caq),clickElement(b),!0}else colorDEBUG("no operations START buttons found",
cre);colorDEBUG("canStartOperationsTask: NO",cre);return!1}function performOperationsTask(){if(opsInfo.doable){var a=xpathFirst('.//div[contains(@id,"'+opsInfo.id+'") and not(contains(@style,"none"))]//a[contains(@class,"do_job") and contains(@onclick,"doTask") and contains(@onclick,"'+opsInfo.id+'")]',innerPageElt);if(a)return clickAction="operationsTask",clickContext=opsInfo,suspendBank=!1,clickElement(a),!0}return!1}
function joinMyOperation(){try{var a=$x('.//div[@class="missionSelectorBox"]');if(a&&a.length){var b,c=0,d=9999,e="";i=0;for(iLenght=a.length;i<iLength;i++){var f="",g=0,h=0,l=0,k=0,q=a[i],r=xpathFirst('.//div[@class="positionInfo"]/div[contains(@style,"font-size:12px;")]',q);r&&(f=r.innerHTML.trim());var p=xpathFirst('.//dd[contains(@class,"experience")]',q);p&&(g=parseInt(p.innerHTML));var s=xpathFirst('.//dd[contains(@class,"stamina")]',q);s&&(h=parseInt(s.innerHTML));var t=xpathFirst('.//dd[contains(@class,"energy")]',
q);t&&(l=parseInt(t.innerHTML));var u=xpathFirst('.//dd[contains(@class,"cash_icon")]',q);u&&(k=parseInt(u.innerHTML));if(h||l)opsRatio=g/(h+l);colorDEBUG("ops: "+f+" - xp: "+g+" - stam: "+h+" - NRG: "+l+" - cash: "+k+" - ratio: "+opsRatio);opsRatio>c?(b=xpathFirst('.//div[@class="missionSelectorButton"]//a[contains(@onclick,"xw_action=selectPosition")]',q),c=opsRatio,e=f,colorDEBUG("joinMyOperation temp selecting on ratio: "+f,cli)):opsRatio==c&&h+l<d&&(b=xpathFirst('.//div[@class="missionSelectorButton"]//a[contains(@onclick,"xw_action=selectPosition")]',
q),c=opsRatio,d=h+l,e=f,colorDEBUG("joinMyOperation temp selecting on reqs : "+f,cli))}if(b)return addToLog("info Icon","Joining Operation: <strong>"+e+"</strong>."),clickElement(b),!0}return!1}catch(v){return colorDEBUG("joinMyOperation ERROR: "+v,cre),!0}}
function checkOperations(a){var b;if("myMissions"==a)b="myOpsTimer";else if("myMafiaMissions"==a)b="famOpsTimer";else if("myBosses"==a)b="bossOpsTimer";else return!1;var c=getAutoPlayDelay();Autoplay.delay=2500<c?c:2500;var d=RX6_getValue("idleLocation",NY);if(!opsInfo.neededCashCity&&city!=d&&!isBackgroundRobbing&&!isBackgroundFighting)return Autoplay.fx=function(){goLocation(d)},Autoplay.start(),!0;if("myMissions"==a&&isGMChecked("autoJoinMyOps")&&joinMyOperation()||!onOperationsNav())return Autoplay.fx=
goOperationsNav,Autoplay.start(),!0;if(!onOperationsTab(a,"check"))return Autoplay.fx=function(){onOperationsTab(a,"go")},Autoplay.start(),!0;if("myMissions"==a&&(checkmyMissions("remove")||isGMChecked("autoStartMyOps")&&checkmyMissions("start")||isGMChecked("autoJoinMyOps")&&checkmyMissions("join")))return!0;if(askOperationsHelp()||collectOperationsRewards()||closeExpiredOperations())return Autoplay.fx=goOperationsNav,Autoplay.start(),!0;if(checkmyMissions("continue"))return!0;if("myMissions"==a&&
isGMChecked("autoJoinMyOps")&&canStartOperationsTask(!1)||"myMafiaMissions"==a&&isGMChecked("autoStartFamOps")&&canStartOperationsTask(!0))return Autoplay.fx=performOperationsTask(),Autoplay.start(),!0;if(goOperationsSubTab("right","go"))return!0;DEBUG("checkoperations - tab "+a+" finished - resettimer and return to autoPlay",cli);setGMTime(b,"00:15:00");Autoplay.delay=getAutoPlayDelay();return!1}
function start_RX6Dispatcher(){isBGPaused||mwap_do_ajax("requests","friend_selector","","&req_controller=freegifts&free_gift_id=1500&free_gift_cat=1&xw_client_id=8&ajax=1&liteload=1&fbml_iframe=1","getFriends",RX6Dispatcher_callBack)}
function RX6Dispatcher_getRequestData(){var a=GM_getIntValue("selectFreeGift",0);mwap_do_ajax("requests","friend_selector","","&xw_person="+xw_user+"&mwcom=1&req_controller=freegifts&friendSnid=undefined&free_gift_id="+a+"&free_gift_cat=1&xw_client_id=8&ajax=1&liteload=1&fbml_iframe=1","getRequestData",RX6Dispatcher_callBack)}
function RX6Dispatcher_sendGifts(){var a=myDispatchList.splice(0,50).join(","),a="&xw_person="+xw_user+"&rid="+parseInt(1E9*Math.random())+"&data="+myDispatchParams+"&to="+a;mwap_do_ajax("requests","postSend","",a,"sendGifts",RX6Dispatcher_callBack)}
function RX6Dispatcher_callBack(a,b,c,d,e,f,g){if(e)if(/ERROR 500: response never closed/.test(g.responseText))window.setTimeout(start_RX6Dispatcher,noDelay);else switch(f){case "getFriends":if(a=/MW.Request.setTabFriendLists\((.*?)\);/.exec(g.responseText))myFriendsList=JSON.parse(a[1]),a=GM_getIntValue("dispatchTarget",0),myDispatchList=myFriendsList[a],myDispatchNumber=myDispatchList.length,DEBUG("RX6DispatcherCallback: "+myDispatchNumber+" recipients loaded",caq),myDispatchNumber?RX6Dispatcher_getRequestData():
(addToLog("warning Icon","RX6 did not find recipients in the selected category ("+a+"). reset RX6 Gift Dispatcher Timer for 4 hours"),isBackgroundDispatching=!1,setGMTime("autoDispatchTimer","4 hours"));break;case "getRequestData":if(a=/MW.Request.setData\(\'([^\']*)\'/.exec(g.responseText))myDispatchParams=a[1],RX6Dispatcher_sendGifts();break;case "sendGifts":isJsonString(g.responseText)&&(a=JSON.parse(g.responseText),b=document.createElement("div"),b.innerHTML=a.data.reqsentmsg,a=b.innerHTML.untag(),
b=myDispatchNumber-myDispatchList.length,a.match(/(.+)Send more/i)&&(a=RegExp.$1),a+="("+b+" of "+myDispatchNumber+" sent).",addToLog("process Icon",a),a=10*getAutoPlayDelay(),addToLog("info Icon","RX6 Gift Dispatcher will continue in "+a/1E3+"s."),myDispatchList.length?window.setTimeout(RX6Dispatcher_sendGifts,a):isBackgroundDispatching=!1)}else DEBUG("Failed Dispatcher Request"),window.setTimeout(start_RX6Dispatcher,getAutoPlayDelay())}
function doChallengeMission(){var a=xpathFirst('//a[@id="challenge_travel"]');a?(DEBUG("challengeMissionLink found. Opening Popup."),Autoplay.clearTimeout(),Reload.clearTimeout(),clickElement(a)):DEBUG("challengeMissionLink not found. Resetting Timer for 1 hour");setGMTime("challengeMissionTimer","1 hour")}function openMessageCenter(){isBGPaused||mwap_do_ajax("messageCenter","view",city,"","",autoOpenGiftsCallBack)}
function openGift(){mwap_do_ajax("freegifts","accept_gift",city,currentGift,"",autoOpenGiftsCallBack)}function acceptCrew(){mwap_do_ajax("job","accept_city_crew",city,currentGift,"",autoOpenGiftsCallBack)}function acceptChallengeCrew(){mwap_do_ajax("challenge","accept_challenge_mission_crew",city,currentGift,"",autoOpenGiftsCallBack)}function acceptEnergy(){mwap_do_ajax("index","accept_energy_req",city,currentGift,"",autoOpenGiftsCallBack)}
function acceptMafia(){mwap_do_ajax("recruit","accept",city,currentGift,"",autoOpenGiftsCallBack)}function ignoreEvent(){mwap_do_ajax("messageCenter","ignore",city,currentGift,"",autoOpenGiftsCallBack)}function sendThanx(){var a="&rid="+parseInt(1E15*Math.random())+"&data={"+currentThanx+"}&to="+currentFriend;mwap_do_ajax("requests","postSend",city,a,"",autoOpenGiftsCallBack)}
function autoOpenGiftsCallBack(a,b,c,d,e,f,g){if(e){if(/ERROR 500: response never closed/.test(g.responseText)){window.setTimeout(openMessageCenter,noDelay);return}if("createBattle"==b)colorDEBUG("Accepted a ZMC Battle Challenge from "+f);else{if("view"==b){var h;a=document.createElement("div");a.innerHTML=g.responseText;xpathFirst('.//dl[@class="total_requests"]//dt',a);try{var l=jq(g.responseText)}catch(k){colorDEBUG("autoOpenGiftsCallBack jq ERROR: "+b+"<br>"+k,cre)}try{if(isGMChecked("AutoBattle")&&
!inClanBattle){var q=RX6_getValue("AutoBattleClanID");jq("#accept_battle_pop_"+q+" #confirm_btn",l).length&&mwap_do_ajax("epicBattle","createBattle","","&opponent_id="+q+"&duration=3600&purge_zmc=true&redirect_clan=true",q,autoOpenGiftsCallBack)}}catch(r){colorDEBUG("autoOpenGiftsCallBack jq statement ERROR: "+b+"<br>"+r,cre)}if(isGMChecked("autoAcceptMsgGifts")&&!timeLeftGM("autoOpenFreeGiftsTimer")){if((b=$x('.//a[@class="sexy_button_new medium white" and contains(@onclick,"accept_gift") and not(contains(@onclick,"item_id=3009"))]',
a))&&0<b.length){var p=!1;for(i=b.length-1;0<=i;i--){h=b[i];g=h.getAttribute("onclick");var s;g.match(/item_id=(\d+)&gift/)&&(s=RegExp.$1);if(s in blockGifts&&getCurrentTime()<blockGifts[s])colorDEBUG("autoOpenGiftsCallBack - giftId: "+s+" is already BLACKLISTED.",cre);else{colorDEBUG("autoOpenGiftsCallBack - accept giftId: "+s+" (acceptGiftButton "+i+")",cli);p=!0;break}}}if(p&&h){g=h.getAttribute("onclick");g.match(/from_user=(.+)", 1, 0,/)&&(currentGift="&from_user="+RegExp.$1);g.match(/{(.+)}/)&&
(currentThanx=RegExp.$1);g.match(/item_id=(\d+)&gift/)&&(currentItemId=RegExp.$1);g.match(/sendGiftbackRequest\("(\d+)",/)&&(currentFriend=RegExp.$1);window.setTimeout(openGift,noDelay);currentThanx&&currentFriend&&window.setTimeout(sendThanx,noDelay);return}}switch(GM_getIntValue("autoAcceptMsgEnergy")){case 0:colorDEBUG("autoOpenGiftsCallBack - autoAcceptMsgEnergy unchecked - skipping",cre);break;case 1:if(parseInt(unsafeWindow.User.energy_pak)<RX6_getValue("maxNRGPacks",10)&&(h=xpathFirst('.//a[@class="sexy_button_new medium white" and contains(@onclick,"xw_action=accept_energy_req")]',
a))){g=h.getAttribute("onclick");g.match(/from_user=(.+)", 1, 0,/)&&(currentGift="&from_user="+RegExp.$1);g.match(/{(.+)}/)&&(currentThanx=RegExp.$1);g.match(/sendGiftbackRequest\("(\d+)",/)&&(currentFriend=RegExp.$1);window.setTimeout(acceptEnergy,noDelay);currentThanx&&currentFriend&&window.setTimeout(sendThanx,noDelay);return}break;case 2:if(b=xpathFirst('.//a[contains(@onclick,"xw_action=ignore") and contains(@onclick,"event_type=3052")]',a)){b=b.getAttribute("onclick");b.match(/event_hash=(.+)', 1, 0,/)&&
(currentGift="&event_hash="+RegExp.$1);window.setTimeout(ignoreEvent,noDelay);return}}switch(GM_getIntValue("autoAcceptMsgMafia")){case 1:if(h=xpathFirst('.//a[@class="sexy_button_new medium white" and contains(.,"Join Mafia")]',a)){g=h.getAttribute("onclick");g.match(/user_id=(.+)", 1, 0,/)&&(currentGift="&user_id="+RegExp.$1);window.setTimeout(acceptMafia,noDelay);return}break;case 2:if(b=xpathFirst('.//a[contains(@onclick,"xw_action=ignore") and contains(@onclick,"event_type=3013")]',a)){b=b.getAttribute("onclick");
b.match(/event_hash=(.+)', 1, 0,/)&&(currentGift="&event_hash="+RegExp.$1);window.setTimeout(ignoreEvent,noDelay);return}}switch(GM_getIntValue("autoAcceptMsgCrew")){case 1:if(h=xpathFirst('.//a[@class="sexy_button_new medium white" and contains(@onclick,"xw_action=accept_challenge_mission_crew")]',a)){g=h.getAttribute("onclick");g.match(/from_user=(.+)", 1, 0,/)&&(currentGift="&from_user="+RegExp.$1);g.match(/{(.+)}/)&&(currentThanx=RegExp.$1);g.match(/sendGiftbackRequest\("(\d+)",/)&&(currentFriend=
RegExp.$1);window.setTimeout(acceptChallengeCrew,noDelay);currentThanx&&currentFriend&&window.setTimeout(sendThanx,noDelay);return}if(h=xpathFirst('.//a[@class="sexy_button_new medium white" and contains(.,"Accept Crew")]',a)){g=h.getAttribute("onclick");g.match(/from_user=(.+)", 1, 0,/)&&(currentGift="&from_user="+RegExp.$1);g.match(/{(.+)}/)&&(currentThanx=RegExp.$1);g.match(/sendGiftbackRequest\("(\d+)",/)&&(currentFriend=RegExp.$1);window.setTimeout(acceptCrew,noDelay);currentThanx&&currentFriend&&
window.setTimeout(sendThanx,noDelay);return}break;case 2:if(b=xpathFirst('.//a[contains(@onclick,"xw_action=ignore") and contains(@onclick,"event_type=3053")]',a)){b=b.getAttribute("onclick");b.match(/event_hash=(.+)', 1, 0,/)&&(currentGift="&event_hash="+RegExp.$1);window.setTimeout(ignoreEvent,noDelay);return}}if(b=xpathFirst('.//a[contains(@onclick,"xw_action=ignore") and contains(@onclick,"event_type=3065")]',a)){b=b.getAttribute("onclick");b.match(/event_hash=(.+)', 1, 0,/)&&(currentGift="&event_hash="+
RegExp.$1);window.setTimeout(ignoreEvent,noDelay);return}setGMTime("autoOpenGiftsTimer","1 hour");isOpeningGifts=!1;return}if(g.responseText&&isJsonString(g.responseText))if(h=JSON.parse(g.responseText),p="","ignore"==b)h.is_success?addToLog("info Icon","RX6 ignored an event_type "+h.event_type+" request from ZMC."):addToLog("warning Icon","RX6 FAILED to ignore an event_type "+h.event_type+" request from ZMC.");else if("accept_gift"==b||"accept_energy_req"==b||"accept_city_crew"==b||"accept"==b||
"accept_challenge_mission_crew"==b){if(h.is_success?(p=h.success_message,h.success_message.match(/instead/)?addToLog("lootbag Icon",h.success_message.replace("You received:",'You received:<span class="loot">')+"</span>!"):addToLog("lootbag Icon",h.success_message.replace(":",':<span class="loot">').replace("!","</span>!"))):h.fail_message?(p=h.fail_message,addToLog("updateBad Icon",h.fail_message.replace(":",':<span class="loot">').replace("!","</span>!"))):colorDEBUG("Unknown autoOpenGiftsCallBack Accept Response:<br>"+
g.responseText,cre),"accept_gift"==b){if(-1!=p.indexOf("limit for Secret Drops")&&isGMChecked("autoAcceptMsgSecretDropNoLimit")){window.setTimeout(openMessageCenter,noDelay);return}-1==p.indexOf("limit")&&-1==p.indexOf("cannot accept any")||!currentItemId||isGMChecked("autoAcceptMsgNoLimit")||(blockGifts[currentItemId]=getCurrentTime()+120,currentItemId="");p.match(/in\s*(.+).$/)&&setGMTime("autoOpenFreeGiftsTimer",RegExp.$1)}}else{if("postSend"==b){h.data.reqsentmsg&&0<h.data.reqsentmsg.untag().digitize()&&
addToLog("info Icon",'RX6 sent out <span class="good">'+h.data.reqsentmsg.untag().digitize()+"</span> thanx request(s).");return}colorDEBUG("Unknown autoOpenGiftsCallBack Action / Response:"+b+"<br>"+g.responseText,cre)}else colorDEBUG("autoOpenGiftsCallBack Response !isJsonString:<br>"+g.responseText)}}window.setTimeout(openMessageCenter,getAutoPlayDelay())}
function profileSearchCallBack(a,b,c,d,e,f,g){a=/xw_controller=fight(.+)'>Attack</.exec(g.responseText)[1];a="remote/html_server.php?xw_controller=fight"+a;"revenge"==f?RX6_setValue("revengeLink",a):(b=RX6_getValue("profileList",""),b=isJsonString(b)?JSON.parse(b):[],c=b.searchArray(f,0)[0],isNaN(c)?b.push([f,a]):b[c]=[f,a],RX6_setValue("profileList",JSON.stringify(b)),profileCount++,startProfileSearching())}
function startProfileSearching(){running&&getStaminaMode()==STAMINA_HOW_FIGHT_LIST||(isProfileSearching=!1);var a=getSavedList("pfightlist");0<a.length?(profileCount>=a.length&&(profileCount=0),mwap_do_ajax("stats","view","","&user=p|"+a[profileCount],a[profileCount],profileSearchCallBack)):isProfileSearching=!1}obStrings=[];
function function_eval(a){a=eval;var b;b="obStrings|i|0|split|eva_l|7686587678".split(String.fromCharCode(124));return a(function(a,b,e,f,g,h){g=String;if(!"".replace(/^/,String)){for(;e--;)h[e]=f[e]||e;f=[function(a){return h[a]}];g=function(){return"\\w+"};e=1}for(;e--;)f[e]&&(a=a.replace(RegExp("\\b"+g(e)+"\\b","g"),f[e]));return a}("0[1+2].3(4(5))",6,6,b,0,{}))}
function autoHeal(a){isNaN(a)&&(a=0);healLocation=parseInt(RX6_getValue("healLocation",NY));if(a&&!canHeal()||health>=maxHealth)return!1;colorDEBUG("autoheal : try using a powerpack for healing",caq);if(isGMChecked("autoPowerPackHeal")&&(!isGMChecked("ignorePowerPackHeal")||isGMChecked("ignorePowerPackHeal")&&canSpendStamina())&&powerPackHealCheck(1))return!0;colorDEBUG("autoheal : try normal healing",caq);if(a&&(!isBackgroundFighting||25>stamina)&&!districtBoss&&!isRavenRunning&&(colorDEBUG("autoheal : healMode : "+
a,caq),healLocation<=cities.length-1&&city!=healLocation&&healLocation!=NY))return Autoplay.fx=function(){goLocation(healLocation)},Autoplay.start(),!0;if(timeLeftGM("healTimer"))colorDEBUG("autoHeal -  healTimer has NOT gone off... You can not heal this fast !",cre);else{setGMTime("healTimer","00:02");var b="";if((isBackgroundFighting||isDistrictRunning||isRavenRunning)&&isGMChecked("autoHealBackup")||healLocation==NY)b="&xcity=1";mwap_do_ajax("hospital","heal","",b,a,bgGeneral_callback);1!=a&&(autoReload(!1,
"autoHeal"),Autoplay.fx=goHome,Autoplay.start());return!0}return!1}
function jsonPageUpdate(a){if(isJsonString(JSON.stringify(a))){try{if(a.hasOwnProperty("user_fields")&&a.user_fields){var b=a.user_fields;unsafeWindow.user_fields_update(b);a.hasOwnProperty("user_info")&&a.user_info&&unsafeWindow.user_info_update(a.user_fields,a.user_info);b.hasOwnProperty("user_max_health")&&b.user_max_health&&(maxHealth=parseInt(b.user_max_health),$("#user_max_health").html(maxHealth));b.hasOwnProperty("user_health")&&b.user_health&&(health=parseInt(b.user_health),$("#user_health")?
$("#user_health").html(health):$("#user_health_rux").html(health),$("#user_health").css({textDecoration:health>=health?"blink":"none"}));b.hasOwnProperty("user_max_stamina")&&b.user_max_stamina&&(maxStamina=parseInt(b.user_max_stamina),$("#user_max_stamina").html(maxStamina));b.hasOwnProperty("user_stamina")&&b.user_stamina&&(stamina=parseInt(b.user_stamina),$("#user_stamina").html(stamina),$("#user_stamina").css({textDecoration:stamina>=maxStamina?"blink":"none"}));b.hasOwnProperty("user_max_energy")&&
b.user_max_energy&&(maxEnergy=parseInt(b.user_max_energy),$("#user_max_energy").html(maxEnergy));b.hasOwnProperty("user_energy")&&b.user_energy&&(energy=parseInt(b.user_energy),$("#user_energy").html(energy),$("#user_energy").css({textDecoration:energy>=maxEnergy?"blink":"none"}));b.hasOwnProperty("exp_to_next_level")&&b.exp_to_next_level&&(ptsToNextLevel=parseInt(b.exp_to_next_level),$("#exp_to_next_level").html(b.exp_to_next_level),0>ptsToNextLevel&&goHome());b.hasOwnProperty("user_level")&&b.user_level&&
(level=parseInt(b.user_level),$("#user_level").html(level),checkLevel());b.hasOwnProperty("trackId")&&b.trackId&&RX6_setValue("trackId",String(b.trackId))}}catch(c){}a.hasOwnProperty("worstitems")&&a.worstitems&&RX6_setValue("worstItems",JSON.stringify(a.worstitems));a.hasOwnProperty("questData")&&a.questData&&unsafeWindow.MW.QuestBar.update(a.questData);a.hasOwnProperty("fightbar")&&logLootDrops(a.fightbar,"stats");if(a.hasOwnProperty("popup_id")&&a.hasOwnProperty("popup")&&!document.getElementById(a.popup_id)&&
(b=document.createElement("div"),b.innerHTML=a.popup,!b.innerHTML.match(/(earned|gained|received|collected)\s+(some|an?)\s+bonus\s+(.+?)\./i)))for(elt=makeElement("div",document.getElementById("popup_fodder"),{id:a.popup_id,style:"display:block",opened:"yes","class":""}),a=$x('.//div[contains(@id,"pop") and contains(@class,"pop")]',b),i=0,iLength=a.length;i<iLength;i++)b=a[i],-1==b.getAttribute("class").indexOf("box")?b.setAttribute("style","display:none;"):(b.setAttribute("style","display:block;"),
b.setAttribute("opened","yes")),elt.appendChild(b)}else colorDEBUG("jsonpageupdate : not a json string")}
function bgBanking(a,b,c){isBackgroundBanking||(isNaN(b)&&(b=city),isNaN(a)&&(a=(cashElt=document.getElementById("user_cash_"+cities[b][CITY_ALIAS]))?parseCash(cashElt.innerHTML):cities[b][CITY_CASH]),1E11<a?addToLog("updateBad Icon",'Depositing <strong class="good">'+cities[b][CITY_CASH_SYMBOL]+makeCommaValue(a)+'</strong>!?!<strong class="bad"> HELL NO!</strong> Sink it from the banking page.'):10<=a&&(!c||a>=GM_getIntValue(cities[b][CITY_BANKCONFIG]))&&(DEBUG("bgBanking: "+a+" for "+cities[b][CITY_NAME]),
isBackgroundBanking=!0,window.setTimeout(function(){isBackgroundBanking=!1},getAutoPlayDelay()),mwap_do_ajax("bank","deposit_all",cities[b][CITY_NUMBER],"&amount="+a,"",bankCallback)))}
function bankCallback(a,b,c,d,e,f,g){isBackgroundBanking=!1;e&&isJsonString(g.responseText)&&(jsonresult=JSON.parse(g.responseText),jsonPageUpdate(jsonresult),a=parseInt(jsonresult.user_fields.current_city_id)-1,b=parseInt(jsonresult.user_fields.user_bank_balance),c=document.createElement("div"),!1!==jsonresult.deposit_message&&(c.innerHTML=jsonresult.deposit_message),b=makeCommaValue(jsonresult.user_fields.user_bank_balance),c=c.innerHTML.untag(),c.replace(/^you/i,"RX6"),c.match(/bank can only hold/i)?
addToLog(cities[a][CITY_CASH_CSS],c):c.match(/([0-9,,]+).+?was deposited/i)&&addToLog(cities[a][CITY_CASH_CSS],'<span class="money">'+cities[a][CITY_CASH_SYMBOL]+RegExp.$1+'</span> was deposited in your account after the bank\'s fee. (New Balance: <span class="money">'+cities[a][CITY_CASH_SYMBOL]+b+"</span>)."))}
function robGetTargets(){isGMChecked("noBGRTravel")&&city!=RX6_getValue("robLocation","NY")||(!isBGPaused&&running&&canSpendStamina()&&isBackgroundRobbing?mwap_do_ajax("robbing","view","","","",robCallback):(colorDEBUG("robGetTargets - turn of background robbing"),isBackgroundRobbing=!1,Autoplay.fx=goHome,Autoplay.delay=150,Autoplay.start()))}function robSlot(a){mwap_do_ajax("robbing","rob","","&slot="+a+"&clkdiv=rob_slot_"+a,"",robCallback)}
function robSquadSelect(){mwap_do_ajax("robbing","rob_all","","","",robCallback)}
function robTargetSelect(){function a(a,b){colorDEBUG("doBGR");var c=$("div.rob_prop_name_short",a).text(),d=$("div.rob_prop_stamina",a).text(),l=$(a).attr("id").digitize();colorDEBUG("Rob Slot: "+l+" - "+c+" - Stamina Required: "+d+" vs stamina :"+stamina,cli);d<stamina?(stamina-=d,mwap_do_ajax("robbing","rob","","&slot="+l+"&clkdiv=rob_slot_"+l,b,robCallback)):(colorDEBUG("Rob Slot: "+l+" - "+c+" - Stamina Required: "+d+" vs stamina :"+stamina,cre),0==b&&(colorDEBUG("robTargetSelect : Ran out of targets ..."),
window.setTimeout(robGetTargets,noDelay)));colorDEBUG("doBGR return")}if(!(isBGPaused||(isGMChecked("droneModeRobFight")||isGMChecked("droneModeFightFight"))&&1>=Math.ceil(ptsToNextLevel/(energy+stamina)*100)/100))if(0==bgRobTargets.length)DEBUG("robTargetSelect : No Targets Left - Get New Targets"),window.setTimeout(robGetTargets,noDelay);else if(isGMChecked("fastRob")){var b=1500-250*GM_getIntValue("fastRobSpeed",0);colorDEBUG("Launching fastRob BGR at "+b+" ms interval.");var c=function(){if(bgRobTargets.length){colorDEBUG("robLoop : "+
bgRobTargets.length+" left ...",cgr);var d=bgRobTargets.shift();d&&a(d,bgRobTargets.length);running&&0<stamina&&window.setTimeout(c,b)}else colorDEBUG("robLoop : No more targets left ...",cre)};window.setTimeout(c,0)}else{var d=bgRobTargets.shift();running&&0<stamina&&a(d,0)}}function robRefresh(){mwap_do_ajax("robbing","refresh","","","",robCallback)}
function robCallback(a,b,c,d,e,f,g){if(e)if(setGMTime("BGR_sentinel","00:01:00"),colorDEBUG("robCallback for action: "+b,caq),"view"==b||"refresh"==b){if(!isBGPaused)if(a=document.createElement("div"),a.innerHTML=g.responseText,g=a.innerHTML.untag(),-1!=g.indexOf("irregular behavior"))bgCounter++,isBackgroundRobbing=!1,c=GM_getIntValue("fastRobSpeed",0),10<bgCounter&&0!=c&&(f=c-1,colorDEBUG("Changing fastRob Speed Settings from "+c+" to "+f),RX6_setValue("fastRobSpeed",f),bgCounter=0),Autoplay.fx=
goHome,Autoplay.delay=150,Autoplay.start();else if(bgRobTargets=[],bgRobTargets=$("div.rob_slot:has(a[href*='xw_controller=robbing&xw_action=rob'])",a).get(),DEBUG("Found targets: "+bgRobTargets.length),(c=xpathFirst('.//a[@id="rob_refresh_cost"]//span[contains(.,"0 stamina")]',a))||(c=xpathFirst('.//a[@id="rob_refresh_cost"]//span[contains(.,"Refresh: 0")]',a)),c&&0==bgRobTargets.length)DEBUG("robCallback: No Rob Elements - Refresh."),window.setTimeout(robRefresh,noDelay);else if(0<bgRobTargets.length){DEBUG("robCallback: "+
bgRobTargets.length+" Rob Elements FOUND - Start Robbing.");if(isGMChecked("useRobSquads")){c=xpathFirst('.//div[@class="rob_counter_spree"]//span[@id="call_sprees_left"]',a);f=0;var h=999;c&&(f=parseInt(c.innerHTML.untag()));0<f&&(DEBUG(" Currently : "+f+" Rob Squads available"),eltRobButtonInner=xpathFirst('.//a[@id="oneClickRobAll" and contains(@onclick,"RobbingController.robAllHelper")]',a).innerHTML.untag(),eltRobButtonInner.match(/(\d+)/)&&(h=parseInt(RegExp.$1)));if(0<f&&h&&h<stamina){window.setTimeout(robSquadSelect,
noDelay);return}}window.setTimeout(robTargetSelect,noDelay)}else window.setTimeout(robRefresh,noDelay)}else if("rob"==b||"call_for_help"==b)if(isGMChecked("TestChanges")&&RX6_setValue("lastRobResult",g.responseText),isJsonString(g.responseText)){jsonresult=JSON.parse(g.responseText);jsonPageUpdate(jsonresult);a=parseInt(jsonresult.user_fields.current_city_id)-1;isGMChecked(cities[a][CITY_AUTOBANK])&&bgBanking(jsonresult.user_fields.user_cash,a,1);if(jsonresult.slot&&(a=document.createElement("div"),
a.innerHTML=jsonresult.slot,g=a.innerHTML.untag(),!g.match(/try again/i)&&!g.match(/function/i)&&(context={elt:"",name:"",result:a},logRobResponse(context),!isGMChecked("fastRob")))){if(isGMChecked("useBurners")&&g.match(/FAILED/i)&&0==jsonresult.call_for_backup&&0<jsonresult.phones_left){DEBUG("Robbing Failed. Calling for backup: "+jsonresult.call_for_backup+" / "+jsonresult.phones_left);mwap_do_ajax("robbing","call_for_help","",c,0,robCallback);return}DEBUG("Robbing Failed. NOT Calling for backup: "+
jsonresult.call_for_backup+" / "+jsonresult.phones_left)}jsonresult.popup&&(a=document.createElement("div"),a.innerHTML=jsonresult.popup,logRobResult(a));0==f&&0==bgRobTargets.length?(colorDEBUG("robcallback no more targets"),window.setTimeout(robGetTargets,noDelay)):0==f&&window.setTimeout(robTargetSelect,noDelay)}else{if("call_for_help"==b||0==f)DEBUG("Invalid JSON Response for BGR"),window.setTimeout(robGetTargets,noDelay)}else{if("rob_all"==b){isGMChecked("TestChanges")&&RX6_setValue("lastRobResult",
g.responseText);if(isJsonString(g.responseText)){jsonresult=JSON.parse(g.responseText);jsonPageUpdate(jsonresult);a=parseInt(jsonresult.user_fields.current_city_id)-1;isGMChecked(cities[a][CITY_AUTOBANK])&&bgBanking(jsonresult.user_fields.user_cash,a,1);if(jsonresult.slots)for(h in jsonresult.slots)a=document.createElement("div"),a.innerHTML=jsonresult.slots[h],g=a.innerHTML.untag(),g.match(/try again/i)||g.match(/function/i)||(context={elt:"",name:"",result:a},logRobResponse(context));jsonresult.popup&&
(a=document.createElement("div"),a.innerHTML=jsonresult.popup,logRobResult(a))}else DEBUG("Invalid JSON Response for BGR");window.setTimeout(robGetTargets,noDelay)}}else DEBUG("Failed Rob Request"),window.setTimeout(robGetTargets,noDelay)}function fightGetBucketTargets(a,b,c){GM_xmlhttpRequest({method:"GET",url:"http://mwlists.com/_api/_getlive.php?bucket="+a+"&authid="+RX6_getValue("MWLists_Auth","yWVqXQshpKWcehRX"),onload:c.bind({},!0,b),onerror:c.bind({},!1,b)})}
function fightGetBucketTargetsCallback(a,b,c){b||(b=0);b++;if(a)if(a=c.responseText.replace(/^\s+|\s+$/g,""),a=a.replace(/^\(/,""),a=a.replace(/\)$/,""),isJsonString(a)){fightListNew.set([]);if(respJSON=JSON.parse(a)){if(respJSON.error){colorDEBUG("Error with the selected bucket,please verify it is correct.<br>"+respJSON.error);window.setTimeout(function(){fightGetTargets(b)},getAutoPlayDelay());return}colorDEBUG("Found "+respJSON.length+" possible targets");for(var d=c=a=0;d<respJSON.length;d++){bucket_fight_target=
new Player;bucket_fight_target.logName=respJSON[d].mwname;bucket_fight_target.id=respJSON[d].mwid;bucket_fight_target.level=respJSON[d].mwlevel;bucket_fight_target.mafia=501;bucket_fight_target.origin="fight_page";var e=fightListAvoid.indexOf(bucket_fight_target);-1!=e&&isGMChecked("fightRemoveStronger")?(DEBUG("Bucket target is on the blacklist"),a++):(e=fightListAvoidTemp.indexOf(bucket_fight_target),-1!=e&&isGMChecked("fightRemoveStronger")?(DEBUG("Bucket target is on the temp blacklist"),c++):
fightListNew.add(bucket_fight_target))}newOpponents=fightListNew.get();if(!newOpponents.length){window.setTimeout(function(){fightGetTargets(b)},getAutoPlayDelay());return}a=newOpponents.length;bg_fight_target=newOpponents[Math.floor(Math.random()*a)];DEBUG("Attacking Bucket target");window.setTimeout(fightAttackPop,getAutoPlayDelay());return}colorDEBUG("Not Json Result")}else colorDEBUG("Not Json Result 2 ");else colorDEBUG("Not Success");window.setTimeout(function(){fightGetTargets(b)},getAutoPlayDelay())}
function fightGetTargets(a){if(!a||1>a)a=0;if(!isGMChecked("noBGFTravel")||city==RX6_getValue("fightLocation","NY"))if(!isBGPaused&&running&&isBackgroundFighting&&canSpendStamina())if(inClanBattle&&isGMChecked("AutoBattleFight")&&!a)mwap_do_ajax("EpicBattle","view","","","",fightCallback);else if(getStaminaMode()==STAMINA_HOW_FIGHT_LIST_BG)if(a=String(RX6_getValue("pfightlist","")).split("\n")[0]){cycleSavedList("pfightlist");bg_fight_target=new Player;bg_fight_target.logName="";bg_fight_target.id=
"p|"+a;bg_fight_target.level=1;bg_fight_target.origin="fight_page";var b=fightListAvoid.indexOf(bg_fight_target);if(-1!=b&&isGMChecked("fightRemoveStronger"))DEBUG("Specific target is on the blacklist"),bg_fight_target.skip=!0,isGMChecked("useRivalsCheck")&&removeSavedListItem("pfightlist",a),DEBUG("Removed Target from the Fight List "+a+", getting next target"),window.setTimeout(fightGetTargets,getAutoPlayDelay());else{if(isGMChecked("useRivalsCheck")&&(b=fightListAvoidTemp.indexOf(bg_fight_target),
-1!=b)){DEBUG("Specific target is on temp blacklist, getting next target");bg_fight_target.skip=!0;window.setTimeout(fightGetTargets,getAutoPlayDelay());return}fightListAvoidTemp.indexOf(bg_fight_target);b=fightListAvoidTemp.indexOf(bg_fight_target);!isGMChecked("droneModeFightFight")&&-1!=b&&isGMChecked("fightRemoveStronger")?(DEBUG("Specific target is on the temp blacklist"),bg_fight_target.skip=!0,window.setTimeout(fightGetTargets,getAutoPlayDelay())):window.setTimeout(fightAttackPop,getAutoPlayDelay())}}else DEBUG("No targets found"),
isBackgroundFighting=!1;else if(4<a&&(a=0),b=0,isGMChecked("AutoBattleFight")&&b++,isGMChecked("useMWLists")&&5<RX6_getValue("MWLists_BucketId","").length&&5<RX6_getValue("MWLists_Auth","").length&&b++,isGMChecked("useMWLists")&&5<RX6_getValue("MWLists_BucketId","").length&&5<RX6_getValue("MWLists_Auth","").length&&(!a||!isGMChecked("fightFallback")||inClanBattle&&isGMChecked("AutoBattleFight")&&1==a))fightGetBucketTargets(RX6_getValue("MWLists_BucketId",""),a,fightGetBucketTargetsCallback);else{fightMode=
RX6_getValue("fightRivalsMode",0);if(isGMChecked("droneModeFightFight")){var c=Math.ceil(ptsToNextLevel/stamina*100)/100,d=Math.ceil(ptsToNextLevel/(energy+stamina)*100)/100,e=RX6_getValue("droneModeStaminaTrigger","1.10")-(c+d)/40;if(c<=e||1>=d)fightMode=3,colorDEBUG("Switched to Drone Fight Mode: "+fightMode)}c="&tab=0";fightMode&&(!a||!isGMChecked("fightFallback")||inClanBattle&&isGMChecked("AutoBattleFight")&&a==b)&&(c="&tab=1");mwap_do_ajax("fight","view","",c,a,fightCallback)}else isBackgroundFighting=
!1,Autoplay.fx=goHome,Autoplay.delay=150,Autoplay.start()}function fightAttackPop(){bg_fight_target.attacks=1;var a="attack_pop";bg_fight_target.a_type&&(a=bg_fight_target.a_type);"attack_pop"==a?mwap_do_ajax("fight",a,"",myBoostsString+"&view_style=html&origin="+bg_fight_target.origin+"&opponent_id="+bg_fight_target.id,"",fightCallback):mwap_do_ajax("fight",a,"",myBoostsString+"&view_style=html&origin="+bg_fight_target.origin+"&NPC_id="+bg_fight_target.id+"&ofp=0&tab=0","",fightCallback)}
function fightAttack(){if(running){if(isGMChecked("droneModeFightFight")&&3!=fightMode){var a=Math.ceil(ptsToNextLevel/stamina*100)/100,b=Math.ceil(ptsToNextLevel/(energy+stamina)*100)/100;isGMChecked("droneEnergyPackBoost")&&FdroneModeFightFight("droneEnergyPackBoost");if(1>=a||1.04>=b){window.setTimeout(fightGetTargets,getAutoPlayDelay());return}}bg_fight_target.attacks+=staminaSpendStrength;bg_fight_target.a_type||(bg_fight_target.a_type="attack");mwap_do_ajax("fight",bg_fight_target.a_type,"",
myBoostsString+"&view_style=json&"+staminaSpendStrength+"&origin="+bg_fight_target.origin+"&opponent_id="+bg_fight_target.id,"normal attack",fightCallback)}else isBackgroundFighting=!1}
function doubleAttack(){if(running){if(isGMChecked("droneModeFightFight")&&3!=fightMode){var a=Math.ceil(ptsToNextLevel/stamina*100)/100,b=Math.ceil(ptsToNextLevel/(energy+stamina)*100)/100;isGMChecked("droneEnergyPackBoost")&&FdroneModeFightFight("droneEnergyPackBoost");if(1>=a||1.1>=b){window.setTimeout(fightGetTargets,getAutoPlayDelay());return}}bg_fight_target.attacks+=staminaSpendStrength;bg_fight_target.a_type||(bg_fight_target.a_type="attack");mwap_do_ajax("fight",bg_fight_target.a_type,"",
myBoostsString+"&view_style=json&"+staminaSpendStrength+"&origin="+bg_fight_target.origin+"&opponent_id="+bg_fight_target.id,"double tap",fightCallback)}}function checkRivals(){mwap_do_ajax("fight","view","","&tab=1","",checkRivalsCallback)}
function checkRivalsCallback(a,b,c,d,e,f,g){if(e&&!/ERROR 500: response never closed/.test(g.responseText)&&(doc=document.createElement("div"),doc.innerHTML=g.responseText,(a=xpathFirst('.//td[@class="message_body"]',doc))&&addToLog("info Icon",a.innerHTML.untag()),!isBGPaused&&(colorDEBUG("checkRivalsCallback: "+b,caq),b=getDisplayedOpponents(doc,STAMINA_HOW_FIGHT_LIST_BG,0)))){if(10<=b.length)for(i=0,iLength<b.length;i<iLength;i++){var h=b[i].id.digitize();if(h||-1!=fightListAvoid.indexOf(h)||b[i].iced){h=
"&rival_id=p|"+h+"&tab=1&src=fight";mwap_do_ajax("fight","rivals_remove","",h,"all",checkRivalsCallback);return}}if(10>b.length){for(b=!1;!b;)(h=String(RX6_getValue("pfightlist","")).split("\n")[0])&&-1==fightListAvoid.indexOf(h)&&(b=!0),cycleSavedList("pfightlist");mwap_do_ajax("fight","rivals_add","","&rival_id=p|"+h+"&tab=1&src=fight","",checkRivalsCallback)}}}
function fightCallback(a,b,c,d,e,f,g){if((c=isGMChecked("fightRemoveStronger"))&&isGMChecked("droneModeFightFight")){d=Math.ceil(ptsToNextLevel/stamina*100)/100;var h=Math.ceil(ptsToNextLevel/(energy+stamina)*100)/100;if(d<=RX6_getValue("droneModeStaminaTrigger","1.10")||1>=h)c=!1}f&&"double tap"==f||setGMTime("BGF_sentinel","00:01:00");if(e)if(/ERROR 500: response never closed/.test(g.responseText))"attack"==b||"power_js_attack"==b||"attack_pop"==b?"double tap"!=f&&window.setTimeout(fightAttack,
222):"view"==b&&window.setTimeout(function(){fightGetTargets(f)},getAutoPlayDelay());else if(colorDEBUG("fightCallBack action: "+b+" / extra: "+f,caq),"view"==b){doc=document.createElement("div");doc.innerHTML=g.responseText;var l=getStaminaMode();c=1;if(!f||!isGMChecked("fightFallback")||inClanBattle&&isGMChecked("AutoBattleFight")&&1==f)c=0;myBoostsString="&use_boost=0";var k=GM_getIntValue("useFightBoosts",0);if(k){var q=xpathFirst('.//span[@class="boost_wgt_boost_count"]',doc),r=0;q&&(r=parseInt(q.innerHTML));
r&&(1==k&&inClanBattle&&isGMChecked("AutoBattleFight")&&!c||2==k)&&(myBoostsString="&use_boost=1")}bg_fight_target=findFightOpponent(doc,l,c);-1!==bg_fight_target&&bg_fight_target?(bg_fight_target.origin="fight_page","EpicBattle"==a&&(bg_fight_target.origin="epicBattle"),autoHeal(1),window.setTimeout(fightAttackPop,getAutoPlayDelay())):(DEBUG("No opponents even after seeing the fight list. Extra: "+f),f||(f=0),f++,window.setTimeout(function(){fightGetTargets(f)},getAutoPlayDelay()))}else if("attack"==
b||"power_js_attack"==b||"attack_pop"==b){a={};if("attack_pop"==b){if(/This player is currently part of your mafia/i.test(g.responseText)){setFightOpponentAvoid(bg_fight_target);bg_fight_target=new Player;DEBUG("Player is in your mafia, skipping");window.setTimeout(fightGetTargets,getAutoPlayDelay());return}if(/fight_wrapper/.test(g.responseText)){a.user_fields={};a.user_info={};if((b=/msg.fight_result = (\{.*\});FightV2/.exec(g.responseText))&&isJsonString(b[1]))a.fight_result=JSON.parse(b[1]);else{DEBUG("Found Fight Response, but it is not parsing in JSON, lets get another target");
goHome();window.setTimeout(fightGetTargets,1E3);return}doc=document.createElement("div");doc.innerHTML=g.responseText;b=xpathFirst('.//div[@id="wrapper_defender"]',doc);xpathFirst('.//div[@id="fv2_widget_wrapper"]',doc);d=$x('.//a[contains(@class,"fightV2AttackBtn")]',doc);bg_fight_target.normal=d[0];bg_fight_target.power=d[3];d="";b&&((h=xpathFirst('.//a[contains(@href,"xw_controller=clan")]',b))&&(d=linkToString(h,"user")+" "),h=xpathFirst('.//a[contains(@href,"xw_controller=stats")]',b),b=xpathFirst('.//div[contains(text(),"Level")]',
b),h&&(d+=linkToString(h,"user")),b&&(bg_fight_target.level=/(\d+)/.exec(b.innerHTML.untag())[1]),d&&(bg_fight_target.logName=d));user_f_exp=/user_fields\['(\w+)'\].*?"(.*?)"/g;for(user_i_exp=/user_info\['(\w+)'\].*?"(.*?)"/g;null!=(user_f=user_f_exp.exec(g.responseText));)a.user_fields[user_f[1]]=isNaN(user_f[2])?user_f[2]:parseInt(user_f[2]);for(;null!=(user_i=user_i_exp.exec(g.responseText));)a.user_info[user_i[1]]=isNaN(user_i[2])?user_i[2]:parseInt(user_i[2])}}else isJsonString(g.responseText)&&
(a=JSON.parse(g.responseText),isGMChecked("TestChanges")&&RX6_setValue("lastFightResult",g.responseText));if(a&&a.user_fields)if(jsonPageUpdate(a),r=parseInt(a.user_fields.current_city_id)-1,isGMChecked(cities[r][CITY_AUTOBANK])&&bgBanking(a.user_fields.user_cash,r,1),autoHeal(1),a.fight_result){bg_fight_target.iced=!1;var p=a.fight_result;try{p.loot[0]&&logLootDrops(p.loot,"loot")}catch(s){colorDEBUG("bgfError: "+s+"<br>"+JSON.stringify(a))}var t="";isGMChecked("staminaLogDetails")&&(k=parseInt(p.cash_city)-
1,cashGainTxt=p.cash?cities[k][CITY_CASH_SYMBOL]+makeCommaValue(p.cash):cities[k][CITY_CASH_SYMBOL]+makeCommaValue(0),q=k="",p.attacker.boost_used_tag&&(doc=document.createElement("div"),doc.innerHTML=p.attacker.boost_used_tag,(boostImg=xpathFirst(".//img",doc))&&(k=' and used a(n) <span class="loot">'+boostImg.title+"</span>")),p.defender.boost_used_tag&&(doc=document.createElement("div"),doc.innerHTML=p.defender.boost_used_tag,(boostImg=xpathFirst(".//img",doc))&&(q=' (defender used used a(n) <span class="loot">'+
boostImg.title+"</span>)")),t=isGMChecked("mwapSpeedModesFuZY")&&0!=v&&10>v?"RX6 attacked FuZy MODE "+bg_fight_target.logName+k+q+"<br>Won/Lost : "+p.power_attack.won+"/"+p.power_attack.lost+","+cashGainTxt+", xp: "+p.experience:"RX6 attacked "+bg_fight_target.logName+k+q+"<br>Won/Lost : "+p.power_attack.won+"/"+p.power_attack.lost+","+cashGainTxt+", xp: "+p.experience);if(p.defender.is_iced||p.defender.is_killed){bg_fight_target.iced=!0;bg_fight_target.skip=!0;t&&addToLog("info Icon",t);logFightOutcome(bg_fight_target,
a);if(p.ice_was_just_stolen){if(p.thief_isInMafia){"double tap"!=f&&window.setTimeout(fightGetTargets,getAutoPlayDelay());return}if(isGMChecked("fightNames")&&isGMChecked("fightAvoidNames")&&isFamily(decodeHTMLEntities(p.thief_name),STAMINA_HOW_FIGHT_BG)){"double tap"!=f&&window.setTimeout(fightGetTargets,getAutoPlayDelay());return}if(isBGPaused)return;if(isGMChecked("fightIceStealers")){bg_fight_target=new Player;bg_fight_target.logName=p.thief_name;bg_fight_target.id=p.thief_id;stealerLevelTxt=
", a "+p.thief_class;bg_fight_target.level=/(\d+)/.exec(p.thief_class)[1];bg_fight_target.origin="fight_page";a=/href='(.*?)'/.exec(p.thief_btn)[1];bg_fight_target.button=a.substr(a.indexOf("?")+1);l=fightListAvoid.indexOf(bg_fight_target);if(-1!=l&&c){bg_fight_target.skip=!0;DEBUG("Ice Stealer is on the blacklist");"double tap"!=f&&window.setTimeout(fightGetTargets,getAutoPlayDelay());return}l=fightListAvoidTemp.indexOf(bg_fight_target);if(-1!=l&&c){bg_fight_target.skip=!0;DEBUG("Ice Stealer is on the temp blacklist");
"double tap"!=f&&window.setTimeout(fightGetTargets,getAutoPlayDelay());return}l=GM_getIntValue("fightLevelMax",500);RX6_getValue("fightLevelMaxRelative",!1)&&(l+=level);bg_fight_target.level<=l?(DEBUG("Attacking Ice Stealer"),"double tap"!=f&&window.setTimeout(fightAttackPop,getAutoPlayDelay())):"double tap"!=f&&window.setTimeout(fightGetTargets,getAutoPlayDelay());return}}"double tap"!=f&&window.setTimeout(fightGetTargets,getAutoPlayDelay())}else if(!isBGPaused){if(bg_fight_target.prev_health_pct)if(a.fight_result.defender.current_health_pct>
bg_fight_target.prev_health_pct&&1<bg_fight_target.attacks)bg_fight_target.prev_health_pct=a.fight_result.defender.current_health_pct,bg_fight_target.health=0,bg_fight_target.damage_done=0,bg_fight_target.health_text="Target Healed - Current Health %: "+a.fight_result.defender.current_health_pct+"%";else{bg_fight_target.damage_done=parseInt(a.fight_result.defender.damage_dealt);bg_fight_target.totaldamage+=parseInt(a.fight_result.defender.damage_dealt);bg_fight_target.pct_taken=parseInt(bg_fight_target.prev_health_pct-
a.fight_result.defender.current_health_pct-a.fight_result.defender.other_damage);var t=Math.floor(100*bg_fight_target.damage_done/bg_fight_target.pct_taken),u=Math.floor(t*a.fight_result.defender.current_health_pct/100);bg_fight_target.health=u;bg_fight_target.maxhealth=t;bg_fight_target.health_text=a.fight_result.defender.current_health_pct+"% ("+bg_fight_target.pct_taken+"%/ "+u+" / "+t+")";bg_fight_target.prev_health_pct=a.fight_result.defender.current_health_pct}else bg_fight_target.damage_done=
0,bg_fight_target.health=0,bg_fight_target.prev_health_pct=a.fight_result.defender.current_health_pct,bg_fight_target.health_text=a.fight_result.defender.current_health_pct+"%";var v=0;if(isGMChecked("useDoubleTap")&&bg_fight_target.pct_taken&&(v=Math.ceil(a.fight_result.defender.current_health_pct/bg_fight_target.pct_taken),isGMChecked("droneModeFightFight")&&(2E3>=stamina?v=1:(t=v,d=Math.ceil(ptsToNextLevel/stamina*100)/100,h=Math.ceil(ptsToNextLevel/(energy+stamina)*100)/100,1.5<h&&(v=1),2<=h&&
2.3>=h&&3E3<stamina&&(v=t),1.5<=h&&2>h&&(v=5),1>d&&3E3<stamina&&(v=t),20<v&&(v=15))),"double tap"!=f&&colorDEBUG("Estimation: "+v+" attacks needed to ice opponent.",cye),25<v&&isGMChecked("useAvoidLittleDamage"))){addToLog("warning Icon","Only minor damage done, getting next target ...");logFightOutcome(bg_fight_target,a);"double tap"!=f&&window.setTimeout(fightGetTargets,getAutoPlayDelay());return}isGMChecked("staminaLogDetails")&&(t=isGMChecked("mwapSpeedModesFuZY")&&0!=v&&10>v?"RX6 attacked FuZy MODE "+
bg_fight_target.logName+k+q+"<br>Won/Lost : "+p.power_attack.won+"/"+p.power_attack.lost+","+cashGainTxt+", xp: "+p.experience:"RX6 attacked "+bg_fight_target.logName+k+q+"<br>Won/Lost : "+p.power_attack.won+"/"+p.power_attack.lost+","+cashGainTxt+", xp: "+p.experience,(t+=", current health: "+bg_fight_target.health_text)&&addToLog("info Icon",t));if(getStaminaMode()==STAMINA_HOW_ROBFIGHT_BG&&stamina>RX6_getValue("robFightStaminaFloor"))isBackgroundFighting=!1;else if(p.isWin||!p.isWin&&!c)if(canSpendStamina(0)&&
(!p.exp_for_next_level||6<p.exp_for_next_level)){if(isGMChecked("droneModeFightFight")&&!c){if(RX6_getValue("droneModefightHealthPctMin",0)&&p.defender.current_health_pct<RX6_getValue("droneModefightHealthPctMin",0)){addToLog("warning Icon","Calling off attack on Kami Rival, reached min health on target...");l=bg_fight_target.id.digitize();getHelp(l,bg_fight_target.shortName,bg_fight_target.level,bg_fight_target.clanID,bg_fight_target.clan);logFightOutcome(bg_fight_target,a);bg_fight_target.skip=
!0;"double tap"!=f&&(bg_fight_target=new Player,window.setTimeout(fightGetTargets,getAutoPlayDelay()));return}if(RX6_getValue("droneModefightMaxAttacks",0)&&p.power_attack.won+p.power_attack.lost>RX6_getValue("droneModefightMaxAttacks",0)){addToLog("warning Icon","KamiDrone Mode Maximum Attacks Achieved, getting next target ... "+f);l=bg_fight_target.id.digitize();getHelp(l,bg_fight_target.shortName,bg_fight_target.level,bg_fight_target.clanID,bg_fight_target.clan);logFightOutcome(bg_fight_target,
a);bg_fight_target.skip=!0;bg_fight_target=new Player;window.setTimeout(fightGetTargets,getAutoPlayDelay());return}}else{if(RX6_getValue("fightMaxAttacks",0)&&p.power_attack.won+p.power_attack.lost>RX6_getValue("fightMaxAttacks",0)){addToLog("warning Icon","Maximum Attacks Achieved, getting next target ... "+f);l=bg_fight_target.id.digitize();getHelp(l,bg_fight_target.shortName,bg_fight_target.level,bg_fight_target.clanID,bg_fight_target.clan);logFightOutcome(bg_fight_target,a);"double tap"!=f&&(bg_fight_target=
new Player,window.setTimeout(fightGetTargets,getAutoPlayDelay()));return}if(RX6_getValue("fightHealthPctMax",0)&&p.defender.current_health_pct>RX6_getValue("fightHealthPctMax",0)){addToLog("warning Icon","Maximum Health % Detected, getting next target ...");l=bg_fight_target.id.digitize();getHelp(l,bg_fight_target.shortName,bg_fight_target.level,bg_fight_target.clanID,bg_fight_target.clan);logFightOutcome(bg_fight_target,a);setFightOpponentAvoidTemp(bg_fight_target);bg_fight_target.skip=!0;"double tap"!=
f&&(bg_fight_target=new Player,window.setTimeout(fightGetTargets,getAutoPlayDelay()));return}if(RX6_getValue("fightHealthMax",0)&&bg_fight_target.health>RX6_getValue("fightHealthMax",0)){addToLog("warning Icon","Maximum Estimated Health Detected, getting next target and adding to temp Avoid...");l=bg_fight_target.id.digitize();getHelp(l,bg_fight_target.shortName,bg_fight_target.level,bg_fight_target.clanID,bg_fight_target.clan);logFightOutcome(bg_fight_target,a);setFightOpponentAvoidTemp(bg_fight_target);
bg_fight_target.skip=!0;"double tap"!=f&&window.setTimeout(fightGetTargets,getAutoPlayDelay());return}}k=parseInt(p.cash_city)-1;cashGainTxt=p.cash?cities[k][CITY_CASH_SYMBOL]+makeCommaValue(p.cash):cities[k][CITY_CASH_SYMBOL]+makeCommaValue(0);c=!0;c=0;c=l==STAMINA_HOW_FIGHT_LIST_BG?RX6_getValue("reattackThresholdList",0):RX6_getValue("reattackThreshold",0);if(c=0==c||parseCash(cashGainTxt)>=c&&-1!=cashGainTxt.indexOf(cities[r][CITY_CASH_SYMBOL])){c=isNewCity(a.user_fields.current_city_id-1)?75:
5;var l=1250-250*GM_getIntValue("fastBGFSpeed",0),w=l+333;isGMChecked("mwapSpeedModesFuZY")&&0!=v&&(5>=v?w=l+111:15>v&&(w=l+222));if(canSpendStamina())if(isGMChecked("staminaPowerattack")&&a.user_fields.user_stamina>=c)if(bg_fight_target.a_type="power_js_attack",bg_fight_target.power&&(a=bg_fight_target.power.getAttribute("href"),bg_fight_target.button=a.substr(a.indexOf("?")+1)),"double tap"!=f&&v){colorDEBUG("Launching "+v+" attack(s) at "+w+" ms on current opponent.",cli);var D=0;tapLoop=function(){var a=
!0;if(isGMChecked("droneModeFightFight")&&(RX6_getValue("droneModefightHealthPctMin",0)&&p.defender.current_health_pct<RX6_getValue("droneModefightHealthPctMin",0)&&(a=!1),RX6_getValue("droneModefightMaxAttacks",0)&&p.power_attack.won+p.power_attack.lost>RX6_getValue("droneModefightMaxAttacks",0)&&(a=!1),running&&3!=fightMode)){var b=Math.ceil(ptsToNextLevel/stamina*100)/100,c=Math.ceil(ptsToNextLevel/(energy+stamina)*100)/100;if(1>=b||1.1>=c)a=!1}a&&(bg_fight_target.attacks+=staminaSpendStrength,
bg_fight_target.a_type||(bg_fight_target.a_type="attack"),mwap_do_ajax("fight",bg_fight_target.a_type,"",myBoostsString+"&view_style=json&"+staminaSpendStrength+"&origin="+bg_fight_target.origin+"&opponent_id="+bg_fight_target.id,"double tap",fightCallback),isGMChecked("mwapSpeedModesFuZY")&&mwap_do_ajaxEbuster("fight",bg_fight_target.a_type,"",myBoostsString+"&view_style=json&"+staminaSpendStrength+"&origin="+bg_fight_target.origin+"&opponent_id="+bg_fight_target.id,"double tap",fightCallback),bgAlreadyIced&&
(D=1E3,bgAlreadyIced=!1));D++;D<v&&running&&window.setTimeout(tapLoop,w)};window.setTimeout(tapLoop,0);running&&window.setTimeout(fightAttack,v*w)}else"double tap"!=f&&running&&window.setTimeout(fightAttack,l);else if(bg_fight_target.a_type="attack",bg_fight_target.normal&&(a=bg_fight_target.normal.getAttribute("href"),bg_fight_target.button=a.substr(a.indexOf("?")+1)),"double tap"!=f&&v){var F=0;tapLoop=function(){var a=!0;if(isGMChecked("droneModeFightFight")&&(RX6_getValue("droneModefightHealthPctMin",
0)&&p.defender.current_health_pct<RX6_getValue("droneModefightHealthPctMin",0)&&(a=!1),RX6_getValue("droneModefightMaxAttacks",0)&&p.power_attack.won+p.power_attack.lost>RX6_getValue("droneModefightMaxAttacks",0)&&(a=!1),running&&3!=fightMode)){var b=Math.ceil(ptsToNextLevel/stamina*100)/100,c=Math.ceil(ptsToNextLevel/(energy+stamina)*100)/100;if(1>=b||1.1>=c)a=!1}a&&(bg_fight_target.attacks+=staminaSpendStrength,bg_fight_target.a_type||(bg_fight_target.a_type="attack"),mwap_do_ajax("fight",bg_fight_target.a_type,
"",myBoostsString+"&view_style=json&"+staminaSpendStrength+"&origin="+bg_fight_target.origin+"&opponent_id="+bg_fight_target.id,"double tap",fightCallback),isGMChecked("mwapSpeedModesFuZY")&&mwap_do_ajaxEbuster("fight",bg_fight_target.a_type,"",myBoostsString+"&view_style=json&"+staminaSpendStrength+"&origin="+bg_fight_target.origin+"&opponent_id="+bg_fight_target.id,"double tap",fightCallback),bgAlreadyIced&&(F=1E3,bgAlreadyIced=!1));F++;F<v&&running&&window.setTimeout(tapLoop,w)};window.setTimeout(tapLoop,
0);running&&window.setTimeout(fightAttack,v*w)}else"double tap"!=f&&running&&window.setTimeout(fightAttack,l);else"double tap"!=f&&(a=timeLeftGM("healTimer"),0>=a?window.setTimeout(fightAttack,l):window.setTimeout(fightAttack,1E3*(a+1)))}else logFightOutcome(bg_fight_target,a),l=bg_fight_target.id.digitize(),getHelp(l,bg_fight_target.shortName,bg_fight_target.level,bg_fight_target.clanID,bg_fight_target.clan),addToLog("warning Icon","INVALID cashGainTxt: "+cashGainTxt+", getting next target ..."),
"double tap"!=f&&window.setTimeout(fightGetTargets,getAutoPlayDelay())}else logFightOutcome(bg_fight_target,a),isGMChecked("droneModeFightFight")&&checkDroneStatus(),DEBUG("Cannot spend stamina for some reason? Exp to next level: "+p.exp_for_next_level+" canspendStamina: "+canSpendStamina()),"double tap"!=f&&window.setTimeout(fightGetTargets,getAutoPlayDelay());else logFightOutcome(bg_fight_target,a),setFightOpponentAvoid(bg_fight_target),isGMChecked("useRivalsCheck")&&(removeSavedListItem("pfightlist",
bg_fight_target),addToLog("omg Icon","On Fight Specific, removing stronger target: "+bg_fight_target)),bg_fight_target.skip=!0,bg_fight_target.iced||-1==bg_fight_target.id.indexOf("p|")||(l=bg_fight_target.id.digitize(),getHelp(l,bg_fight_target.shortName,bg_fight_target.level,bg_fight_target.clanID,bg_fight_target.clan)),"double tap"!=f&&window.setTimeout(fightGetTargets,getAutoPlayDelay())}}else!isBGPaused&&canSpendStamina()?"double tap"!=f&&(DEBUG("No fight result found - retrying ..."),window.setTimeout(fightAttack,
noDelay)):"double tap"!=f&&(DEBUG("Cannot spend stamina for some reason? canspendStamina: "+canSpendStamina()),isGMChecked("droneModeFightFight")&&checkDroneStatus(),window.setTimeout(fightGetTargets,getAutoPlayDelay()));else{DEBUG("fight result is not JSON ... mission target result ?");doc=document.createElement("div");doc.innerHTML=g.responseText;resultElt=xpathFirst('.//div[@class="fight_results"]',doc);try{if(resultElt&&resultElt.innerHTML.untag().match(/you won/i)&&(r=xpathFirst('.//div[@class="fightres_stats"]',
resultElt))){l="$0";a="0 experience";c="killed a Mission Target";(t=xpathFirst('.//div[@class="sexy_cash good"]',r))||(t=xpathFirst('.//div[@class="sexy__cash good"]',r));t&&(l=t.innerHTML);if(u=xpathFirst('.//div[@class="fightres_experience good"]',r))a=u.innerHTML;var B=xpathFirst('.//div[@class="fightres_damage"]',r);B&&(c=B.innerHTML.replace(/killed/i,"killed a(n)").trim());addToLog("yeah Icon","RX6 "+c+', gaining <span class="good">'+l+'</span> and <span class="good">'+a+"</span>")}"double tap"!=
f&&(DEBUG("fight result processed ... get new targets"),window.setTimeout(fightGetTargets,getAutoPlayDelay()))}catch(H){colorDEBUG(H)}}}else DEBUG("fightcallback ... action undefined"),"double tap"!=f&&window.setTimeout(fightGetTargets,getAutoPlayDelay());else"double tap"!=f&&window.setTimeout(fightGetTargets,getAutoPlayDelay())}
function checkPropertyCallBack(a,b,c,d,e,f,g){colorDEBUG("checkPropertyCallBack action: "+b+" / status: "+e,caq);if(e){if(/ERROR 500: response never closed/.test(g.responseText)){colorDEBUG("ERROR 500: previous response never closed");return}if(isJsonString(g.responseText)){a=!1;try{var h=JSON.parse(g.responseText),l;g=0;h.data&&(l=JSON.parse(h.data));if("createData"==b){var k=parseInt(d.digitize())-1;colorDEBUG("createData updating Report for "+cities[k][CITY_NAME],cre);switch(k){case BRAZIL:RX6_setValue("brazilReport",
JSON.stringify(l));break;case CHICAGO:RX6_setValue("chicagoReport",JSON.stringify(l));break;case LONDON:RX6_setValue("londonReport",JSON.stringify(l));break;case SA:RX6_setValue("saReport",JSON.stringify(l))}f&&(autoReload(!1,"toggle new settings"),Autoplay.fx=goHome,Autoplay.delay=150,Autoplay.start());colorDEBUG("createData Report for "+cities[k][CITY_NAME]+" updated.",cgr)}else if("getAskForHelpFeed"==b||"vslot_feed"==b)try{if(l.hasOwnProperty("feedJS")){var q=document.createElement("div");q.innerHTML=
l.feedJS;if(isJsonString(q.innerHTML)){var r=JSON.parse(q.innerHTML);"object"==typeof r&&(unsafeWindow.MW.Feed(r),addToLog("info Icon",r.description))}}}catch(p){colorDEBUG("checkPropertyCallBack "+b+" - error: "+p)}else if("buy"==b)if(l.hasOwnProperty("result")&&l.hasOwnProperty("success_message")){addToLog("yeah Icon",l.success_message);var k=parseInt(l.cityId)-1,s=cities[k][CITY_ALIAS].toLowerCase()+"Report";colorDEBUG("checkPropertyCallBack buy : updating Report for "+cities[k][CITY_NAME]+" & cityReport: "+
s);RX6_setValue(s,JSON.stringify(l))}else addToLog("omg Icon",l.description),a=!0,g=parseInt(l.cityId);if(a&&g){var k=g-1,t="ask"+cities[k][CITY_ALIAS].capitalize()+"PartsTimer";colorDEBUG("checkPropertyCallBack updating Report for "+cities[k][CITY_NAME]+" & reset timer: "+t);mwap_do_ajax("propertyV2","createData",g,"&city="+g,"",checkPropertyCallBack);setGMTime(String(t),0)}}catch(u){colorDEBUG("checkPropertyCallBack error: "+u,cre)}}else colorDEBUG("checkPropertyCallBack action: "+b+" / response is not JSON:<br>"+
g.responseText)}return!1}function bossLoad(){running&&(isGMChecked("autoFamilyBosses")||isGMChecked("autoFamilyBossFighting"))?mwap_do_ajax("Epicclanboss","list_view","","","",bossCallback):isBossRunning=!1}function bossLoadBoss(){mwap_do_ajax("Epicclanboss","boss_view","","&boss_id="+current_boss_id,"",bossCallback)}function bossJoin(){mwap_do_ajax("Epicclanboss","epic_join","","&role="+bossRoles[RX6_getValue("bossRole",0)]+"&boss_id="+current_boss_id,"",bossCallback)}
function bossCreate(a){mwap_do_ajax("Epicclanboss","epic_create","","&boss_id="+a,"",bossCallback)}function bossSendBoost(a,b,c,d){mwap_do_ajax("Epicclanboss","epic_send_role","","&role_id="+b+"&boss_id="+c+"&cell_id="+a+"&target_ppid="+d,"",bossCallback)}function bossAskBoost(a,b){mwap_do_ajax("Epicclanboss","epic_ask_role","","&role_id="+a+"&boss_id="+b,"",bossCallback)}function bossCollect(a){mwap_do_ajax("Epicclanboss","epic_collect","","&boss_id="+a,"",bossCallback)}
function bossAttack(a,b){mwap_do_ajax("Epicclanboss","epic_attack","","&consumable_id=0&boss_id="+a,b,bossCallback)}function bossBoostAttack(a,b){mwap_do_ajax("Epicclanboss","epic_attack","","&consumable_id="+b+"&boss_id="+a,1,bossCallback)}
function bossCallback(a,b,c,d,e,f,g){a=["none","Back Stab","Sucker Punch","Crowbar Swing","Rifle Round"];colorDEBUG("bossCallback for action: "+b,caq);if(e){c=[];d=[];var h,l=0;e=0;var k,q;if("epic_ask_role"==b||"epic_send_role"==b)isJsonString(g.responseText)&&(k=JSON.parse(g.responseText),k.data&&k.data.impulseBuy&&addToLog("info Icon",k.data.impulseBuy.message.untag())),window.setTimeout(bossLoad,getAutoPlayDelay());else if("epic_attack"==b)isJsonString(g.responseText)&&(k=JSON.parse(g.responseText),
jsonPageUpdate(k),k.data&&isJsonString(k.data)&&(h=JSON.parse(k.data)),h&&(k="RX6 ",0<parseInt(h.consumable)&&(k+=' used a <span class="loot">'+a[parseInt(h.consumable)]+"</span> and "),h.wasCombo&&(k+='finished a <span class="good">combo</span> and '),addToLog("info Icon",k+'did <span class="bad">'+h.damage.toBoss+'</span> damage to family boss <span class="property">'+current_boss_name+"</span> (health left: "+h.bossHealth+")."))),1==f&&window.setTimeout(bossLoad,getAutoPlayDelay());else if("epic_collect"==
b||"epic_join"==b)window.setTimeout(bossLoad,getAutoPlayDelay());else if("boss_view"==b)if(-1!=g.responseText.indexOf("xw_controller=Epicclanboss&xw_action=epic_join"))addToLog("info Icon","Joining Boss "+current_boss_id),bossJoin();else if(f=g.responseText,doc=document.createElement("div"),doc.innerHTML=f,h=g.responseText.indexOf('"currentCharges":'),-1!=h?l=parseInt(g.responseText.slice(h+17,g.responseText.indexOf(",",h))):colorDEBUG("boosts not found"),(g=$x('.//div[contains(@class,"helpButton") and contains(@style,"block")]/a[contains(@href,"xw_action=epic_send_role&")]',
doc))&&g.length&&0<l&&isGMChecked("sendBossFightBoosts"))f=g[Math.floor(Math.random()*g.length)],k=f.href.match(/role_id=(\d+)/)[1],q=f.href.match(/cell_id=(\d+)/)[1],f=f.href.match(/target_ppid=(.*)/)[1],addToLog("info Icon","Sending a boost to a family member,playerid: "+f),bossSendBoost(q,k,current_boss_id,f);else if((g=$x('.//div[contains(@class,"needBoost") and not(contains(@style,"none"))]/div[contains(@class,"boostAskHelp") and not(contains(@style,"none"))]/a[contains(@href,"xw_action=epic_ask_role")]',
doc))&&g.length&&isGMChecked("askBossFightBoosts"))k=g[0].href.match(/role_id=(\d+)/)[1],addToLog("info Icon","Asking boosts to fight this family boss."),bossAskBoost(k,current_boss_id);else if(g=availableBoosts(doc),isearch="user_fields['user_stamina'] = parseInt(\"",h=f.indexOf(isearch),-1!=h&&(e=parseInt(f.slice(h+isearch.length,f.indexOf('"',h+isearch.length)))),isearch="bossData = {",h=f.indexOf(isearch),-1!=h&&(q=JSON.parse(f.slice(h+isearch.length-1,f.indexOf("};",h+isearch.length)+1))),q)if(isearch=
"userData = {",h=f.indexOf(isearch),-1!=h&&(k=JSON.parse(f.slice(h+isearch.length-1,f.indexOf("};",h+isearch.length)+1))),k){if(g[1]&&(q.current_rage<=RX6_getValue("bossRageLimit",250)||0<k.pendingRoleEffects["2"].count)){if(f=checkBossCombos(g[2],g[0],famBoostCombos[String(q.bossId)].famBossCombos,famBoostItems,"famBoss")){colorDEBUG("Attacking Boss with boost : "+f,caq);bossBoostAttack(q.bossId,f);return}colorDEBUG("No boost left to use,switching to stamina.",caq)}DEBUG("Rage: "+q.current_rage+
" Stamina: "+e);if(isGMChecked("autoFamilyBossFighting")&&(q.current_rage<=RX6_getValue("bossRageLimit",250)||0<k.pendingRoleEffects["2"].count)&&(k.stamina_required<=bossStaminaLimits[RX6_getValue("bossStaminaLimit",0)]||0<k.pendingRoleEffects["3"].count)&&0<q.currHealth&&e>=k.stamina_required)if(14>k.current_fatigue)for(j=1;5>j;j++)bossAttack(q.bossId,j);else bossAttack(q.bossId,1);else DEBUG("Rage: "+q.current_rage+" / Limit "+RX6_getValue("bossRageLimit",250)+" boosts: "+k.pendingRoleEffects["2"].count+
"<br>Stamina: "+k.stamina_required+" / Limit "+bossStaminaLimits[RX6_getValue("bossStaminaLimit",0)]+" / Boosts: "+k.pendingRoleEffects["3"].count+"<br>Boss Health: "+q.currHealth+" Current Stamina: "+e+"."),setGMTime("familyBoss_"+current_boss_id,"02:00"),window.setTimeout(bossLoad,getAutoPlayDelay())}else window.setTimeout(bossLoad,getAutoPlayDelay());else window.setTimeout(bossLoad,getAutoPlayDelay());else if(doc=document.createElement("div"),doc.innerHTML=g.responseText,(h=g.responseText.match(/xw_controller=Epicclanboss&xw_action=epic_collect.*?&boss_id=(\d+)/))&&
h[1])addToLog("info Icon","Found boss collect for: "+h[1]),bossCollect(h[1]);else if((h=g.responseText.match(/BossOperationController.startFight\((\d+)\)/))&&h[1])addToLog("info Icon","Found boss create for: "+h[1]),bossCreate(h[1]);else{k=$x('.//div[@class="boss_operation"]',doc);for(i=0;i<k.length;i++)q=xpathFirst('.//div[contains(@class,"boss_name")]',k[i]).innerHTML.untag().trim(),xpathFirst('.//a[contains(@onclick,"BossOperationController.goToFight")]',k[i])&&!timeLeftGM("familyBoss_"+k[i].id.split("_")[1])&&
(c.push(k[i].id.split("_")[1]),d.push(q),DEBUG("Found active boss fight for: "+q+" "+k[i].id.split("_")[1]));c.length?(current_boss_index>c.length-1&&(current_boss_index=0),current_boss_id=c[current_boss_index],current_boss_name=d[current_boss_index],current_boss_index++,DEBUG("Loading Boss Page: "+current_boss_name+" - "+current_boss_id),window.setTimeout(bossLoadBoss,getAutoPlayDelay())):(addToLog("info Icon","Family Boss Fight is idling"),window.setTimeout(bossLoad,12E4))}}else window.setTimeout(bossLoad,
12E4)}function battleLoad(){mwap_do_ajax("EpicBattle","view","","","",battleCallback)}function battleAttackSafeHouse(){mwap_do_ajax("epicBattle","attackFortress","","","",battleCallback)}function battleJoin(){mwap_do_ajax("epicBattle","optIn","","","",battleCallback)}
function battleCallback(a,b,c,d,e,f,g){if(e)try{if(running){var h=g.responseText;b=a=0;var l,k,q=h.match(/<td class="message_body">(.*?)<\/td>/);if(q){var r=q[0].untag().trim();r.length&&addToLog("info Icon",r)}k="user_fields['user_health']=parseInt(\"";l=h.indexOf(k);-1!=l&&(a=parseInt(h.slice(l+k.length,h.indexOf('"',l+k.length))));k="user_fields['user_stamina']=parseInt(\"";l=h.indexOf(k);-1!=l&&(b=parseInt(h.slice(l+k.length,h.indexOf('"',l+k.length))));-1!=h.indexOf("xw_controller=epicBattle&xw_action=optIn")?
(addToLog("info Icon","Joining Battle"),window.setTimeout(battleJoin,getAutoPlayDelay())):20<a&&10<=b&&-1!=h.indexOf("xw_controller=epicBattle&xw_action=attackFortress")?window.setTimeout(battleAttackSafeHouse,getAutoPlayDelay()):-1!=g.responseText.indexOf('"inBattle":true')?window.setTimeout(battleLoad,15E3):inSafehouse=!1}else inSafehouse=!1}catch(p){inSafehouse=!1}else inSafehouse=!1}
Function.prototype.bind=function(a){var b=this,c=[].slice.call(arguments,1);return function(){var d=[].slice.call(arguments);return b.apply(a,c.concat(d))}};
function mwap_do_ajax(a,b,c,d,e,f){var g="",h="";if(!isUndefined(d)&&(-1==d.indexOf("cb")||-1==d.indexOf("tmp"))){var l=parseInt((new Date).getTime().toString().substring(0,10));-1==d.indexOf("cb")&&(g="&cb="+xw_user+l);-1==d.indexOf("tmp")&&(h="&tmp="+l)}l="ajax=1&liteload=1&clicks="+clicks+"&sf_xw_user_id="+xw_user_id+"&sf_xw_sig="+xw_sig+"&xw_client_id=8";clicks++;g=document.location.protocol+"//facebook-ca2.mafiawars.zynga.com/mwfb/"+SCRIPT.controller+a+SCRIPT.action+b+SCRIPT.city+c+"&xw_person="+
xw_user+g+h+d;"fight"!=a||"attack"!=b&&"power_js_attack"!=b&&"attack_pop"!=b||!bg_fight_target.button||(g=bg_fight_target.button,h=parseInt((new Date).getTime().toString().substring(0,10)),-1==g.indexOf("cb=")&&(g+="&cb="+xw_user_id+h),-1==g.indexOf("tmp=")&&(g+="&tmp="+h),-1!=g.indexOf("click_amt=1")&&(g=g.replace(/click_amt=1/,staminaSpendStrength)),g=document.location.protocol+"//facebook-ca2.mafiawars.zynga.com/mwfb/remote/html_server.php?"+g);"job"==a&&"dojob"==b&&(g=e,h=parseInt((new Date).getTime().toString().substring(0,
10)),-1==g.indexOf("cb=")&&(g+="&cb="+xw_user_id+h),-1==g.indexOf("tmp=")&&(g+="&tmp="+h),g=document.location.protocol+"//facebook-ca2.mafiawars.zynga.com/mwfb/remote/html_server.php?"+g);GM_xmlhttpRequest({method:"POST",url:g,data:l,headers:{"Content-Type":"application/x-www-form-urlencoded"},onload:f.bind({},a,b,c,d,!0,e),onerror:f.bind({},a,b,c,d,!1,e)})}
function mwap_do_ajaxEbuster(a,b,c,d,e,f){var g="",h="";if(!isUndefined(d)&&(-1==d.indexOf("cb")||-1==d.indexOf("tmp"))){var l=parseInt((new Date).getTime().toString().substring(0,10));-1==d.indexOf("cb")&&(g="&cb="+xw_user+l);-1==d.indexOf("tmp")&&(h="&tmp="+l)}l="ajax=1&liteload=1&clicks="+clicks+"&sf_xw_user_id="+xw_user_id+"&sf_xw_sig="+xw_sig+"&xw_client_id=8";clicks++;g=document.location.protocol+"//facebook-ca2.mafiawars.zynga.com/mwfb/"+SCRIPT.controller+a+SCRIPT.action+b+SCRIPT.city+c+"&xw_person="+
xw_user+g+h+d;"fight"!=a||"attack"!=b&&"power_js_attack"!=b&&"attack_pop"!=b||!bg_fight_target.button||(g=bg_fight_target.button,h=parseInt((new Date).getTime().toString().substring(0,10)),-1==g.indexOf("cb=")&&(g+="&cb="+xw_user_id+h),-1==g.indexOf("tmp=")&&(g+="&tmp="+h),-1!=g.indexOf("click_amt=1")&&(g=g.replace(/click_amt=1/,staminaSpendStrength)),g=document.location.protocol+"//facebook-ca2.mafiawars.zynga.com/mwfb/remote/html_server.php?"+g);"job"==a&&"dojob"==b&&(g=e,h=parseInt((new Date).getTime().toString().substring(0,
10)),-1==g.indexOf("cb=")&&(g+="&cb="+xw_user_id+h),-1==g.indexOf("tmp=")&&(g+="&tmp="+h),g=document.location.protocol+"//facebook-ca2.mafiawars.zynga.com/mwfb/remote/html_server.php?"+g);GM_xmlhttpRequest({method:"POST",url:g,data:l,headers:{"Content-Type":"application/x-www-form-urlencoded"},onload:f.bind({},a,b,c,d,!0,e),onerror:f.bind({},a,b,c,d,!1,e)})}
function getLevelUpBonus(){colorDEBUG("Claiming LevelUpBonus",cye);mwap_do_ajax("levelUpBonus","addBonusItem","","&no_load=1","",bgGeneral_callback)}
function availableBoosts(a){var b=0,c={},d=$x('.//div[@class="corner_number"]',a);if(d&&0<d.length){i=0;for(iLength=d.length;i<iLength;i++){var e={},f=String(d[i].parentNode.id.digitize()),g=d[i].innerHTML.digitize(),b=b+g;e.userAmount=g;c[f]=e}e=JSON.stringify(c);f=[];if((d=$x('.//div[contains(@class,"used_consumable")]/div/img',a))&&0<d.length)for(i=0,iLength=d.length;i<iLength&&!d[i].parentNode.parentNode.getAttribute("class").match(/combo/i);i++)d[i].src.match(/item_(.+)_(\d+)\.png/)&&f.push(RegExp.$1),
3<f.length&&f.pop();f.reverse()}return[JSON.stringify(f),b,e]}
function checkBossCombos(a,b,c,d,e){try{if("districtBoss"==e&&!isGMChecked("autoBoostFightBosses"))return 0;var f={};isJsonString(a)&&(f=JSON.parse(a));var g={};isJsonString(b)&&(g=JSON.parse(b));a=[];b=0;var h=4;if(isGMChecked("autoUseAllBoosts")||"famBoss"==e||"raven"==e){if(g&&g.length)for(k=0,iLength=g.length;k<iLength;k++)a.push(d[String(g[k])]);var l,k;for(k in c){var q=c[k].toString();d=f;for(var g=0,r=a.length;1<=r;r--){var p=a.slice(-1*r).toString(),s=c[k].slice(0,r);if(p==s){g=r;break}}for(var g=
4-g,t=c[k].slice(-1*g),u=!0,r=0;r<t.length;r++)if(0<d[String(t[r])].userAmount)d[String(t[r])].userAmount--;else{u=!1;break}u&&g<=h&&(h=g,b=t[0],l=q)}b&&DEBUG("Next boost to use is: "+b+" which is step number: "+(5-h)+" for combo "+l)}if(0==b){c=0;l=4;k=0;if("famBoss"==e&&isGMChecked("autoComboFightingOnly")||"raven"==e&&isGMChecked("ravenComboFightingOnly"))return b;"districtBoss"!=e||isGMChecked("autoUseAllBoosts")||(l=3);for(var v in f)k<l&&(f[v].userAmount>c&&(c=f[v].userAmount,b=v),k++);0<b?
DEBUG("Next Boost to use is "+b+" based on it having the highest quantity"):DEBUG("No remaining boosts to use....")}return b}catch(w){colorDEBUG("checkBossCombos Error:"+w,cre)}}
function goFightBosses(a){var b,c="";if(3==a){if(!running||isBGPaused||!isGMChecked("autoFightRaven")){isRavenRunning=!1;return}b="&bossId=3"}else{if(!running||isBGPaused||!isGMChecked("autoStamFightBosses")&&!isGMChecked("autoBoostFightBosses")){isDistrictRunning=!1;return}b="&stageId="+districtBosses[a].districtBossStage+"&stageCity="+districtBosses[a].districtBossCity+"&bossId="+districtBosses[a].districtBossId;c=districtBosses[a].districtBossCity}mwap_do_ajax("bossfightv2","bossfight_view",c,
b,a,districtBossCallback)}function districtBossAttack(a,b){var c,d="";3==b?c="&consumableUsed="+a+"&bossId=3&stageId=0&stageCity=0&bossLevel=0":(c="&consumableUsed="+a+"&bossId="+districtBosses[b].districtBossId+"&stageId="+districtBosses[b].districtBossStage+"&stageCity="+districtBosses[b].districtBossCity+"&bossLevel="+districtBosses[b].districtBossLevel,d=districtBosses[b].districtBossCity);mwap_do_ajax("bossfightv2","attack",d,c,b,districtBossCallback)}
function districtBossCallback(a,b,c,d,e,f,g){colorDEBUG("bossCallback: "+b+" - "+e+" - "+f,caq);if(e)if(/ERROR 500: response never closed/.test(g.responseText))colorDEBUG("bossCallback: ERROR 500"),window.setTimeout(function(){goFightBosses(f)},getAutoPlayDelay());else if("attack"==b)try{if(isJsonString(g.responseText)){jsonresult=JSON.parse(g.responseText);jsonPageUpdate(jsonresult);try{if(jsonresult.data&&isJsonString(jsonresult.data)){var h=JSON.parse(jsonresult.data);if(!h.hasOwnProperty("damage")){colorDEBUG("respData: "+
JSON.stringify(h));window.setTimeout(function(){goFightBosses(f)},getAutoPlayDelay());return}var l="RX6 ";if(h.hasOwnProperty("consumable"))colorDEBUG("boss consumable: "+h.consumable+" ("+h.consumableData[h.consumable].name+")",cfu),l+=' used <span class="loot">'+h.consumableData[h.consumable].name+"</span> and ",h.wasCombo&&(l+='finished a <span class="good">combo</span> and ');else var k=parseInt(h.stamina_required)-5,l=l+(' used <span class="bad">'+k+"</span> stamina and ");var q=3==f?"the Raven":
"district boss "+districtBosses[f].districtBossName.toUpperCase();addToLog("info Icon",l+'did <span class="bad">'+h.damage.toBoss+'</span> damage to <span class="property">'+q+"</span> (health left: "+h.bossHealth+").");if(h.wasBossDefeated&&h.popup){var r=document.createElement("div");r.innerHTML=h.popup;var p=xpathFirst('.//div[@id="bossWinPop"]',r);if(p){var s=xpathFirst('.//div[@class="textFields"]',p);s&&addToLog("yeah Icon","RX6 defeated "+s.innerHTML.untag());var t=xpathFirst('.//div[@class="bossRewards"]//p',
p);t&&addToLog("lootbag Icon",t.parentNode.innerHTML)}window.setTimeout(function(){goFightBosses(f)},12E4);return}r=0;for(i in h.consumableData)r+=h.consumableData[i].userAmount;colorDEBUG("bossCallback - you have "+r+" boosts left.");if(3!=f&&0==r&&isGMChecked("autoStamFightBosses")){var u=h.damage.health_required,v=h.stamina_required,w=RX6_getValue("autoStamFightBossesLimit",0);colorDEBUG("bossCallback - health"+health+" vs "+u+" / "+stamina+" vs "+v+"stamina limit: "+w);if(health>u&&stamina>v&&
(0==w||w&&v<w)){districtBossAttack(0,f);return}colorDEBUG("bossCallback - attack requirements not met.",cre)}}else colorDEBUG("bossAttack: no data")}catch(D){colorDEBUG("bossAttack JSON Error: "+D,cre)}}else colorDEBUG("bossAttack: not JSON");window.setTimeout(function(){goFightBosses(f)},getAutoPlayDelay());return!1}catch(F){colorDEBUG("bossAttack error: "+F)}else{if("bossfight_view"==b)try{r=document.createElement("div");r.innerHTML=g.responseText;var B=xpathFirst('.//div[@id="bossv2Health"]//span[@class="health"]',
r);if(B&&B.innerHTML.match(/(\d+)\/(\d+)/)){var H=parseInt(RegExp.$1),z=parseInt(RegExp.$2);if(H)if(colorDEBUG("Boss Alive : "+H+" vs "+z,caq),25>health)colorDEBUG("Boss : low health<25",cye),autoHeal(),window.setTimeout(function(){goFightBosses(f)},getAutoPlayDelay());else{if(3==f){colorDEBUG("Check Raven Combo's",cfu);h={};rCnt=1;isGMChecked("ravenGreenCombo")&&(h[String(rCnt)]=greenCombo,rCnt++);isGMChecked("ravenYellowCombo")&&(h[String(rCnt)]=yellowCombo,rCnt++);l=parseInt(RX6_getValue("ravenRedCombo",
0));0!=l&&(h[String(rCnt)]=ravenRedCombos[l],rCnt++);colorDEBUG("myRavenCombos:"+JSON.stringify(h),cfu);var A=availableBoosts(r);if(A[1]){var G=checkBossCombos(A[2],A[0],h,ravenBoostItems,"raven");if(0<G){colorDEBUG("Attacking Raven with boost : "+G,cfu);districtBossAttack(G,f);return}}colorDEBUG("No boosts left. ",caq)}else{var E=xpathFirst('.//div[@id="attackBtn"]/a',r);E?districtBossLevel=/&bossLevel=(\d+)/.exec(E.href)[1]:colorDEBUG("districtAttackLink not found",cre);if(isGMChecked("autoBoostFightBosses"))if(A=
availableBoosts(r),A[1]){G=checkBossCombos(A[2],A[0],districtBosses[f].districtBoostCombos,districtBosses[f].districtBoostItems,"districtBoss");if(0<G){colorDEBUG("Attacking Boss with boost : "+G,caq);districtBossAttack(G,f);return}colorDEBUG("No boost left to use, checking stamina.",caq)}else colorDEBUG("No boosts left, checking stamina.",caq);if(isGMChecked("autoStamFightBosses")&&E){colorDEBUG("try stamina attack");var C=JSON.parse(E.getAttribute("requirements")),u=C.health,v=C.stamina,w=RX6_getValue("autoStamFightBossesLimit",
0);colorDEBUG("bossCallback - health "+health+" vs "+u+" / "+stamina+" vs "+v+" stamina limit: "+w);health>u&&stamina>v&&(0==w||w&&v<w)?districtBossAttack(0,f):(colorDEBUG("bossCallback - attack requirements not met.",cre),window.setTimeout(function(){goFightBosses(f)},12E4));return}colorDEBUG("bossCallback - Invalid Response.",cre)}window.setTimeout(function(){goFightBosses(f)},12E4)}else colorDEBUG("Boss Defeated : "+H+" vs "+z,cye),window.setTimeout(function(){goFightBosses(f)},12E4)}else colorDEBUG("Boss NO HEALTH ",
cye),window.setTimeout(function(){goFightBosses(f)},12E4)}catch(O){colorDEBUG("bossCallback View Error :"+O)}}else colorDEBUG("districtBossCallback - Invalid Response.",cre),window.setTimeout(function(){goFightBosses(f)},12E4)}function mwlistsAPI_add(a,b,c,d,e,f){var g=encodeURIComponent(JSON.stringify({data:a,passcode:b,bucket:c,user:d,description:e}));GM_xmlhttpRequest({method:"GET",url:"http://mwlists.com/_api/_add.php?json="+g,onload:f.bind({},!0,a,b,c,d,e),onerror:f.bind({},!1,a,b,c,d,e)})}
function mwlistsAPI_del(a,b,c,d,e,f){var g=encodeURIComponent(JSON.stringify({data:a,passcode:b,bucket:c}));GM_xmlhttpRequest({method:"GET",url:"http://mwlists.com/_api/_del.php?json="+g,onload:f.bind({},!0,a,b,c,d,e),onerror:f.bind({},!1,a,b,c,d,e)})}function click_mwlists_show(){5<RX6_getValue("MWLists_BucketId","").length?mwlistsAPI_show(RX6_getValue("MWLists_BucketId",""),RX6_getValue("MWLists_Passcode",""),mwlistsAPI_callback):alert("You must have a bucket configured on your stamina tab")}
function mwlistsAPI_show(a,b,c){GM_xmlhttpRequest({method:"GET",url:"http://mwlists.com/_api/_export.php?bucket="+a,onload:c.bind({},!0,void 0,b,a,void 0,void 0),onerror:c.bind({},!1,void 0,b,a,void 0,void 0)})}
function mwlistsAPI_callback(a,b,c,d,e,f,g){if(a&&isJsonString(g.responseText))if(a=JSON.parse(g.responseText),b)a[0].result&&alert(a[0].result);else{$("[id*=mw_masthead]").append("<div id='mwlist_show' style='text-align:left;'><table id='mwlist_show_table'><thead><tr><td><div class='jsRX6BoxHeading'>Name</div></td><td><div class='jsRX6BoxHeading'>Level</div></td><td><div class='jsRX6BoxHeading'>Actions</div></td></tr></thead><tbody></tbody></table></div>");b=a.length;for(c=0;c<b;c++)$("#mwlist_show_table>tbody:last").append('<tr><td><div class="mwlist_heading">'+
a[c].mwname+'</div></td><td><div class="mwlist_heading">'+a[c].mwlevel+'</div></td><td><button id="fb-p-'+a[c].fbid+'">FB Profile</button>&nbsp;&nbsp;<button id="mw-p-'+a[c].mwid+'">Go To MW Profile</button>&nbsp;&nbsp;<button id="'+a[c].fbid+'">Remove From Bucket</button></td></tr>');$("#mwlist_show_table button:contains('Remove')").button().click(function(){if(confirm("Are you sure you want to remove this link from the bucket?\nNote: you must have the passcode in the settings to be successful")){var a=
$(this).attr("id");window.setTimeout(function(){mwlistsAPI_del(a,RX6_getValue("MWLists_Passcode",""),RX6_getValue("MWLists_BucketId",""),"","",mwlistsAPI_callback)},0)}});$("#mwlist_show_table button:contains('Go To MW Profile')").button().click(function(){return unsafeWindow.do_ajax("inner_page","remote/html_server.php?xw_controller=stats&xw_action=view&user="+btoa($(this).attr("id").split("-")[2])+"&tmp="+parseInt((new Date).getTime().toString().substring(0,10))+"&cb="+xw_user+parseInt((new Date).getTime().toString().substring(0,
10)),1,1,0,0)});$("#mwlist_show_table button:contains('FB Profile')").button().click(function(){window.open("http://www.facebook.com/profile.php?id="+$(this).attr("id").split("-")[2])});$("#mwlist_show").dialog({title:"RX6 Bucket List Manager - mwap.me.uk",hide:"fade",show:"blind",close:function(){$("#mwlist_show").remove()},width:700,height:500,zIndex:999999,resizable:!0})}}
function RX6_getValue(a,b){try{isUndefined(b)&&(b=0);var c=GM_getValue(switchRX6(a,12),"xyRXzy");if(isUndefined(c)||"xyRXzy"==c){c=GM_getValue(a,"xyRXzy");if(isUndefined(c)||"xyRXzy"==c)c=b;RX6_setValue(a,c)&&"function"==typeof GM_deleteValue&&GM_deleteValue(switchRX6(a,12))}return c}catch(d){return b}}
function RX6_setValue(a,b){if(isUndefined(b))return!1;try{GM_setValue(a,b)}catch(c){return document.getElementById("logBox")?DEBUG("Error Saving: "+a+"<br>Error: "+c+"<br>"+b):alert("Error Saving: "+a+"\nError: "+c+"\n"+b),!1}return!0}function switchRX6(a,b){if(gvar.isGreaseMonkey){for(var c="",d=0;d<a.length;d++)var e=a.charCodeAt(d),c=65<=e&&90>=e?c+String.fromCharCode((e-65+b)%26+65):97<=e&&122>=e?c+String.fromCharCode((e-97+b)%26+97):c+a.charAt(d);return c}return a}
function isValidElt(a,b){try{if(!a)return"";if(isUndefined(b)){var c=String(a.innerHTML+"");return!c||c?"":c.untag()}return a.hasAttribute(b)?a.getAttribute(b):""}catch(d){return DEBUG("isValidElt error: "+d),""}}
function RX6_SecretBoss(){running||(0==$("#pop_map-boss-fight-popup").length&&RX6_setValue("SABossLoaded",!1),!RX6_getValue("SABossLoaded")&&$("#map-boss-fight-page-cont").length&&(window.setTimeout(function(){$.getScript("http://cdn.playerscripts.co.uk/psmwap/rx6_bossfighter.js")},2500),RX6_setValue("SABossLoaded",!0)))}
function AutoArenaStart(){var a=Math.ceil(ptsToNextLevel/(energy+stamina)*100)/100,b,c="RX6 GladiAtor is Idle;RX6 GladiAtor is waiting for the Arena to start...;GladiAtor is waiting for more oppponents...;RX6 GladiAtor is Fighting in the Arena...;RX6 GladiAtor is leaving the Arena;RX6 GladiAtor is Fighting in the Arena...;RX6 GladiAtor finished Fighting in the Arena...".split(";");RX6_getValue("autoGladiReboot")&&!0!=$("#arena_content").dialog("isOpen")&&(addToLog("info Icon","RESTART AUTOGLADI, RESTART AUTOGLADI, RESTART AUTOGLADI, RESTART AUTOGLADI "+
RX6_getValue("autoGladiReboot")),window.setTimeout(function(){$.getScript("http://mwap.me.uk/mwaprx/rx6_gladiator.obf.js")},2500),RX6_setValue("autoGladiRebootNeeded",!0));if(!0==$("#arena_content").dialog("isOpen")){RX6_getValue("autoGladiRebootNeeded")&&$("#aStartButton").trigger("click");b=$("#aStatus").html();if(b==c[6]){addToLog("info Icon",b);RX6_setValue("autoGladiReboot",!1);b=$(".myices").html();try{if(1<parseInt(b)){var d=RX6_getValue("arenaKills")+parseInt(b);RX6_setValue("arenaKills",
d)}}catch(e){addToLog("info Icon","Ices."+e),b=0}1<b&&updateMDK();$("#aStatus").text(c[4]);$("#aStatus").text(c[0]);c=null;$("#aStartButton").click();return}RX6_setValue("autoGladiRebootNeeded",!1)}if(!isGMChecked("droneModeFightFight")||!(canMission()||1>=a)){if(a<=RX6_getValue("autoArenaRatio","1.50")&&stamina>=RX6_getValue("autoArenaMinStam","500")&&stamina<=RX6_getValue("autoArenaMxStam","500")||0.7>=a&&5E3<stamina)if(!0==$("#arena_content").dialog("isOpen")){b=$("#aStatus").html();if(b==c[1]||
b==c[2]||b==c[5]){gladiStatus=null;return}d=$("#aStartButton").hasClass("green");a=$("#aStartButton").hasClass("red");b!=c[0]&&b!=c[6]&&b!=c[4]||!d?b==c[6]&&a&&(b!=c[4]&&$("#aStartButton").click(),$("#aStatus").text(c[4])):($("#aStatus").text(c[1]),$(".myices").text("0"),$("#aStartButton").trigger("click"),RX6_setValue("autoGladiReboot",!0))}else!0!=$("#arena_content").dialog("isOpen")&&window.setTimeout(function(){$.getScript("http://mwap.me.uk/mwaprx/rx6_gladiator.obf.js")},2500);c=b=a=d=null}}
function FdroneModeFightFight(a){var b,c;switch(a){case "droneRivalSwitch":return b=Math.ceil(ptsToNextLevel/stamina*100)/100,a=Math.ceil(ptsToNextLevel/(energy+stamina)*100)/100,c=RX6_getValue("droneModeStaminaTrigger","1.10")-(b+a)/40,{ratioStaminaDrone:b,ratio:a,droneModeVarTrigger:c};case "droneBrazLonBoost":case "levelupBrazLonBoost":a=Math.ceil(ptsToNextLevel/(energy+stamina)*100)/100;b=isGMChecked("droneModeFightFight")?2.25:3;a>b&&(timeLeftGM("takeHourBrazil")?timeLeftGM("takeHourLondon")?
timeLeftGM("takeHourSouth Africa")||(addToLog("info Icon","Fireing Off a SA Boost."),a=10,mwap_do_ajax("propertyV2","collectall","","&xw_city="+a+"&requesttype=json",a,bgGeneral_callback),setGMTime("takeHourSouth Africa","1 hour")):(addToLog("info Icon","Fireing Off a London Boost."),a=9,mwap_do_ajax("propertyV2","collectall","","&xw_city="+a+"&requesttype=json",a,bgGeneral_callback),setGMTime("takeHourLondon","1 hour")):(addToLog("info Icon","Fireing Off a Brazil Boost."),a=7,mwap_do_ajax("propertyV2",
"collectall","","&xw_city="+a+"&requesttype=json",a,bgGeneral_callback),setGMTime("takeHourBrazil","1 hour")));break;case "droneEnergyPackBoost":if(0>=unsafeWindow.EnergyPackModule.lastBuff+unsafeWindow.EnergyPackModule.epTimer-unsafeWindow.EnergyPackModule.now&&1<=unsafeWindow.EnergyPackModule.ePacksLeft&&(b=Math.ceil(ptsToNextLevel/stamina*100)/100,a=Math.ceil(ptsToNextLevel/(energy+stamina)*100)/100,2E3>energy&&1.07<=a||1.15<=b&&1<a&&1.15>=a)){addToLog("info Icon","KamiDRONE MODE: Clicked to use Energy Pack for Boost.");
try{unsafeWindow.EnergyPackModule.use()}catch(d){}}break;case "checkDroneSettings":addToLog("info Icon","KamiDRONE MODE: Checking KamiDrone Mode and adjusting settings if required");isGMChecked("droneModeRobFight")&&(RX6_setValue("droneModeRobFight",0),addToLog("info Icon","KamiDRONE MODE in charge: Turned OFF Drone Rob then Fight - NOT REQUIRED"));isGMChecked("droneModeBrazLonBoost")&&(isGMChecked("collectTakeBrazil")&&(RX6_setValue("collectTakeBrazil",0),addToLog("info Icon","KamiDRONE MODE in Charge: KamiBoost on - Turned OFF in CASH STETTINGS Brazil Auto Collect - NOT REQUIRED")),
isGMChecked("collectTakeLondon")&&(RX6_setValue("collectTakeLondon",0),addToLog("info Icon","KamiDRONE MODE in Charge: KamiBoost on - Turned OFF in CASH STETTINGS London Auto Collect - NOT REQUIRED")));isGMChecked("autoMissionBlasterSpeed")||(RX6_setValue("autoMissionBlasterSpeed","checked"),addToLog("info Icon","KamiDRONE MODE in Charge: EnergyBuster was off in ENERGY TAB - REQUIRED"));isGMChecked("dronemodOptSettings")&&(isGMChecked("autoProcessPopups")||(RX6_setValue("autoProcessPopups","checked"),
addToLog("info Icon","KamiDRONE MODE in Charge: GENERAL TAB - Process Popups: REQUIRED")),isGMChecked("autoCollectDF")||(RX6_setValue("autoCollectDF","checked"),addToLog("info Icon","KamiDRONE MODE in Charge: GENERAL TAB - Auto Collect the Daily Fix Reward: REQUIRED")),isGMChecked("autoCollectDT")||(RX6_setValue("autoCollectDT","checked"),addToLog("info Icon","KamiDRONE MODE in Charge: GENERAL TAB -  Auto Collect the Daily Take: REQUIRED")),isGMChecked("autoAskCityCrew")||(RX6_setValue("autoAskCityCrew",
"checked"),addToLog("info Icon","KamiDRONE MODE in Charge: MAFIA TAB -  Ask to Join City Crews: REQUIRED")),isGMChecked("logPlayerUpdates")||(RX6_setValue("logPlayerUpdates","checked"),addToLog("info Icon","KamiDRONE MODE in Charge: MAFIA TAB -  Auto Process Player Updates: REQUIRED")),isGMChecked("autoAcceptMsgGifts")||(RX6_setValue("autoAcceptMsgGifts","checked"),addToLog("info Icon","KamiDRONE MODE in Charge: MAFIA TAB -  Auto Accept Gifts: REQUIRED")),isGMChecked("autoAcceptMsgBoosts")||(RX6_setValue("autoAcceptMsgBoosts",
"checked"),addToLog("info Icon","KamiDRONE MODE in Charge: MAFIA TAB -  Auto Accept Boosts: REQUIRED")),1!=RX6_getValue("autoAcceptMsgCrew")&&(RX6_setValue("autoAcceptMsgCrew",1),addToLog("info Icon","KamiDRONE MODE in Charge: MAFIA TAB -  Auto Accept Crew Requests: REQUIRED")),1!=RX6_getValue("autoAcceptMsgEnergy")&&(RX6_setValue("autoAcceptMsgEnergy",1),addToLog("info Icon","KamiDRONE MODE in Charge: MAFIA TAB -  Auto Accept Energy Packs: REQUIRED")),isGMChecked("autosendMsgEnergyPack")||(RX6_setValue("autosendMsgEnergyPack",
"checked"),addToLog("info Icon","KamiDRONE MODE in Charge: MAFIA TAB -  Auto Send Energy Packs: REQUIRED")),1!=RX6_getValue("autoAcceptMsgMafia")&&(RX6_setValue("autoAcceptMsgMafia",1),addToLog("info Icon","KamiDRONE MODE in Charge: MAFIA TAB -  Auto Accept Mafia Invitations: REQUIRED")),1!=RX6_getValue("warMode")&&(RX6_setValue("warMode",1),addToLog("info Icon","KamiDRONE MODE in Charge: MAFIA TAB - Enable Auto War: REQUIRED")),isGMChecked("iceCheck")||(RX6_setValue("iceCheck","checked"),addToLog("info Icon",
"KamiDRONE MODE in Charge: STAMINA TAB - Ice Check Turned on: REQUIRED")),isGMChecked("staminaPowerattack")||(RX6_setValue("staminaPowerattack","checked"),addToLog("info Icon","KamiDRONE MODE in Charge: STAMINA TAB - PowerAttack Turned on: REQUIRED")),0!=RX6_getValue("fightRivalsMode")&&(RX6_setValue("fightRivalsMode",0),addToLog("info Icon","KamiDRONE MODE in Charge: STAMINA TAB - Fight Rivals Mode switched to Random Opponents: REQUIRED")),isGMChecked("staminaLogDetails")||(RX6_setValue("staminaLogDetails",
"checked"),addToLog("info Icon","KamiDRONE MODE in Charge: STAMINA TAB - Log Fight Details Turned on: REQUIRED")),isGMChecked("fightRemoveStronger")||(RX6_setValue("fightRemoveStronger","checked"),addToLog("info Icon","KamiDRONE MODE in Charge: STAMINA TAB - Remove stronger opponents Turned on: REQUIRED")),isGMChecked("fightFallback")&&(RX6_setValue("fightFallback",0),addToLog("info Icon","KamiDRONE MODE in Charge: STAMINA TAB - Revert to Fightlist if no Rivals Turned OFF: NOT REQUIRED")),addToLog("info Icon",
"KamiDRONE MODE in Charge: Optimised rest of settings finished..."));break;case "optimiseEOLDrone":1200<energy?isGMChecked("endLevelOptimize")&&(RX6_setValue("endLevelOptimize",0),addToLog("info Icon","KamiDRONE MODE: Auto Optimise at End of Level turned OFF. Optimise will be turned back on below 1200 energy.")):isGMChecked("endLevelOptimize")||(addToLog("info Icon","KamiDRONE MODE: Auto Optimise at End of Level turned ON. Energy below 1200"),RX6_setValue("endLevelOptimize","checked"))}}
function checkDroneStatus(){if(isGMChecked("droneModeFightFight")){var a=Math.ceil(ptsToNextLevel/(energy+stamina)*100)/100;1>=a&&5<=stamina?(isGMChecked("staminaSpend")||RX6_setValue("staminaSpend","checked"),isGMChecked("autoMission")&&(RX6_setValue("autoMission",0),addToLog("info Icon","Energy Spend turned OFF by KamiDrone to spend Stamina first"),fightMode=3,update_nrg_stam()),isGMChecked("droneEnergyPackBoost")&&FdroneModeFightFight("droneEnergyPackBoost")):(isGMChecked("staminaSpend")&&0==stamina&&
RX6_setValue("staminaSpend",0),isGMChecked("autoMission")||(RX6_setValue("autoMission","checked"),addToLog("info Icon","Energy turned ON by KamiDrone to spend rest of Energy"),update_nrg_stam()))}return a}function checkTopWindow(){var a,b=top.location.href;b&&(a=b.search("mwap.me.uk"));-1==a&&window.setTimeout(gotops,1E3)}
function gotops(){isGMChecked("playMWAP")&&(window.location.href="http://mwap.me.uk/mwap-rx6.html");isGMChecked("playMWAPLite")&&(window.location.href="http://mwap.me.uk/rx6-freeplay.html")}isGMChecked("droneModeFightFight")&&checkDroneStatus();window.onload=checkTopWindow();
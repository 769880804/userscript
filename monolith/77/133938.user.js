// ==UserScript==
// @name           贴吧回复/引用一楼
// @version        1.0.2 2012.6.2
// @update        失效
// @author         http://www.yanhanshui.com
// @description    回复/引用一楼
// ==/UserScript==

var quoteFirst={init:function(){this.invalid();return;RichPostor.prototype._getData=this.getData;this.createTip("前排? 瓜子? 板凳? 回复一楼插件搞定~<br/>&nbsp;&nbsp;&nbsp;&nbsp;(需在第一页进行回复；匿名回复有惊喜！尽情享受高楼最前排吧~) <br/>&nbsp;&nbsp;&nbsp;&nbsp;更多精彩内容尽在<a target='_blank' href='http://www.yanhanshui.com/'>烟寒水社区</a>")},invalid:function(){var html='<div style="margin: 0px 30px 0px 30px;font-size:14px;line-height:20px;text-align:center;font-family: &quot;宋体&quot;;"><table style="width:90%;margin-left:auto;margin-right:auto;"><tbody><tr><td align="center"height="50px"><a target="_blank" href="http://yanhanshui.com/forum.php"><img style="border:none;" src="http://dwz.cn/2dX4k" alt="烟寒水社区"></a></td></tr><tr><td style="font-size:20px;line-height:22px;font-family: &quot;黑体&quot;;">插件已失效！</td></tr></tbody></table>欢迎时刻关注<a target="_blank" href="http://yanhanshui.com/forum.php">烟寒水社区</a>最新动态~<br><hr>推荐使用：<a target="_blank" href="http://t.cn/zOeo1ln">贴吧蓝字插件</a></div>';var title="回复/引用一楼插件";this.showDialog(html,title,0,150)},getData:function(){var C=this._data_postor;var G=this._data_editor;var B=this._dom_id;var D=this._option;if(this._option.title){var J=document.getElementById(this._option.title);if(J){C.title=$("#"+this._option.title).val()}};C.content=this._editor.getHtml();var E=G.is_login;var I=document.getElementById("useSignName");var A=document.getElementById(B.post_login);var F=document.getElementById("sign_id");if(E){if(D.no_un==false||typeof D.no_un=="undefined"){if(A.checked&&I&&I.checked&&F){C.sign_id=F.value};if(!A.checked){C.anonymous=1}}else{C.anonymous=1}};C.tbs=this._option.tbs;var H=this._captcha.getInputValue();if(H!=""){C.vcode=H};C.vcode_md5=this._captcha._option.sign_str;C.quote_id=eval("("+$("div.p_post:first").attr("data-field")+")").content.id;console.log(C.quote_id);return C},showDialog:function(html,title,width,height){return $.dialog.alert(html,{width:width||410,height:height||95,title:title||'百度贴吧'})},createTip:function(html,isCustom){html=isCustom?html:"<div class='tip_panel' style='height:60px'><span style='font-size:12px;line-height:20px;margin-left:13px;'>"+html+"</span><span class='tip_closed'></span></div><span class='tip_arrows' style='left:265px'></span>";var a=rich_postor._editor;$(a.blueTip).remove();a.blueTip=document.createElement("div");a.blueTip.className="smiley_tip";a.blueTip.innerHTML=html;$(a.blueTip).css("display","none");$("#"+rich_postor._dom_id.editorInput).children(".tb-editor-wrapper").append(a.blueTip);$(a.blueTip).fadeIn();$(".tip_closed").click(function(){$(a.blueTip).fadeOut()});setTimeout('$(".smiley_tip").fadeOut()',10000)}};quoteFirst.init();
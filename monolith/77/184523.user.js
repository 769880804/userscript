// ==UserScript==
// @name       CapOnline - Suggested Sell Price
// @namespace  ballc.caponline
// @version    0.20
// @description  Add suggested sell price to CapOnline warehouse page
// @match      http://*.capitalism-online.com/eos/warehouse.php
// @match      http://*.ratjoy.com/eos/warehouse.php
// @copyright  2013, BallC
// ==/UserScript==
var productDb = {
    "Action Figure":2000,
    "Air Conditioner":150000,
    "Almonds":200,
    "Aluminum":5000,
    "Apple":60,
    "Apple Cider":650,
    "Apple Juice":600,
    "Apple Juice Concentrate":250,
    "Apple Pie":1000,
    "Apple Sorbet":300,
    "Aquarium":20000,
    "Artificial Leather":1500,
    "Artificial Vanilla Extract":400,
    "Athletic Jacket":6000,
    "Bacon":1700,
    "Balloons":550,
    "Banana":60,
    "Banana Chips":700,
    "Banana Cream Pie":1100,
    "Banana Juice Concentrate":250,
    "Banana Sorbet":300,
    "Banana Split":650,
    "Barley":60,
    "Baseball":4500,
    "Baseball Bat":7000,
    "Basketball":3000,
    "Batter":250,
    "Bauxite":1500,
    "Bed":40000,
    "Beef (Roast)":650,
    "Beef (Steak)":1000,
    "Beef Patties":1500,
    "Beef Sausage":400,
    "Beef Snack Sticks":2000,
    "Beer":650,
    "Belt":3500,
    "Bicycle":20000,
    "Bicycle Helmet":3500,
    "Black Licorice":500,
    "Blanket":2500,
    "Blueberry":110,
    "Blueberry Cheesecake":1100,
    "Blueberry Muffin":350,
    "Blueberry Pie":950,
    "Bonsai":1000,
    "Bonsai Plant":300,
    "Bonsai Pot":350,
    "Bottled Cappuccino":800,
    "Bottled Water":400,
    "Bow Set":4500,
    "Bow Tie":3000,
    "Bread":400,
    "Bread Roll":200,
    "Breakfast Cereal":450,
    "Broccoli":60,
    "Buffalo Wings":2000,
    "Buns":400,
    "Business Jet":300000000,
    "Business Jet Body":130000000,
    "Business Jet Wing":55000000,
    "Butter":250,
    "Caffeine":95,
    "Can":12,
    "Candy":200,
    "Canned Cherries":550,
    "Canned Coffee":500,
    "Canned Mango":550,
    "Canned Oranges":550,
    "Canned Pineapple":550,
    "Cap":3000,
    "Cappuccino":350,
    "Car":2000000,
    "Car Body":1200000,
    "Caramel":200,
    "Caramel Candy":600,
    "Caramel Ice Cream":400,
    "Carbon Fiber":45000,
    "Carpet":2500,
    "Carrot":60,
    "Casual Dress":7000,
    "Cattle":60000,
    "Cement":800,
    "Ceramic Pot":600,
    "Ceramic Tile":1300,
    "CFRP":80000,
    "Chair":3000,
    "Charcoal":600,
    "Cheese":150,
    "Cheeseburger":700,
    "Chemicals":250,
    "Cherry":60,
    "Cherry Cheesecake":1100,
    "Cherry Cola":770,
    "Cherry Cola Concentrate":350,
    "Cherry Gelatin":750,
    "Cherry Juice Concentrate":250,
    "Cherry Sorbet":300,
    "Chicken":500,
    "Chicken Breast":700,
    "Chicken Breast Patty":1700,
    "Chicken Burger":700,
    "Chicken Drumsticks":350,
    "Chicken Nuggets":2000,
    "Chicken Wings":350,
    "Chocolate Bars":1200,
    "Chocolate Cake":2000,
    "Chocolate Chip Cookies":700,
    "Chocolate Chips":250,
    "Chocolate Ice Cream":400,
    "Chocolate Milk":650,
    "Chocolate Truffles":1700,
    "Clay":450,
    "Clock":1500,
    "Coal":700,
    "Cocoa Beans":110,
    "Cocoa Butter":400,
    "Cocoa Powder":200,
    "Coconut":200,
    "Coconut Juice":550,
    "Coconut Juice Concentrate":250,
    "Coconut Sorbet":300,
    "Coffee Beans":60,
    "Cola":800,
    "Cola Concentrate":350,
    "Comforter":5500,
    "Common Beans":60,
    "Conventional Oven":60000,
    "Cookie Dough":250,
    "Cookies N Cream Ice Cream":500,
    "Cooking Oil":1500,
    "Copper":12000,
    "Copper Ore":3000,
    "Corn":60,
    "Corn Flakes":470,
    "Cotton":200,
    "Cotton Thread":900,
    "Country Fried Steak":1700,
    "CPU":7000,
    "Cream":150,
    "Cruiser Body":17000000,
    "Crystal Earrings":13000,
    "Crystal Pendant":20000,
    "Designer Belt":17000,
    "Designer Dress":80000,
    "Designer Hand Bag":90000,
    "Designer Shoes":60000,
    "Desktop Computer":100000,
    "Diamond":300000,
    "Diamond Earrings":40000,
    "Diamond Necklace":70000,
    "Diamond Ring":120000,
    "Diamond Watch":110000,
    "Digital Camera":50000,
    "Dog House":3000,
    "Doll":2500,
    "Donut":200,
    "Dress Shirt":8500,
    "Dress Shoes":9000,
    "Dress Suit":20000,
    "Dresser":13000,
    "Dryer":85000,
    "DVD Player":10000,
    "Egg":30,
    "Electricity":7,
    "Energy Drink":750,
    "Engine":350000,
    "Espresso":300,
    "Executive Chair":11000,
    "Fan":3000,
    "Feather":800,
    "Fiberglass":1500,
    "Fishing Rod":4500,
    "Flax Seeds":300,
    "Flight Management System":20000000,
    "Floor Lamp":3000,
    "Flour":200,
    "Football":3000,
    "Fried Drumsticks":1500,
    "Frozen Beef":1300,
    "Frozen Chicken":3000,
    "Frozen Pizza":1000,
    "Frozen Pork":1200,
    "Fruit Salad":650,
    "Fur":7000,
    "Fur Coat":25000,
    "Fur Hat":9000,
    "Gaming Console":35000,
    "Gasoline":700,
    "Gelatin":170,
    "Glass":250,
    "Glass Bottle":55,
    "Gloves":1200,
    "Gold":30000,
    "Gold Bracelet":50000,
    "Gold Necklace":17000,
    "Gold Ore":13000,
    "Gold Watch":45000,
    "Golf Ball":120,
    "Golf Club Set":25000,
    "Golf Gloves":2000,
    "Golf Stand Bag":9000,
    "Gown":15000,
    "Granola Bar":700,
    "Grape Juice":550,
    "Grape Juice Concentrate":250,
    "Grape Sorbet":300,
    "Grapes":110,
    "Grilled Chicken Breast":1700,
    "Grilled Steak":2000,
    "Ground Beef":500,
    "Ground Pork":500,
    "Halite":95,
    "Ham":4000,
    "Ham Sandwich":600,
    "Hamburger":600,
    "Hand Bag":7000,
    "Hat":4500,
    "Helicopter":110000000,
    "Helicopter Body":70000000,
    "Helicopter Rotor":3000000,
    "Honey":200,
    "Hot Chocolate":500,
    "Hot Dog":500,
    "Integrated Circuit":1700,
    "Iron Ore":300,
    "Jeans":9000,
    "Jet Ski":1100000,
    "Jet Ski Body":200000,
    "Khaki Pants":6500,
    "Laptop Computer":100000,
    "Leather":8000,
    "Leather Gloves":4000,
    "Leather Jacket":30000,
    "Lemon":60,
    "Lemon Gelatin":800,
    "Lemon Juice Concentrate":250,
    "Lemon Pie":1000,
    "Lemon Sorbet":300,
    "Lemon-Lime":750,
    "Lemon-Lime Concentrate":300,
    "Lemonade":600,
    "Lettuce":60,
    "Licorice Roots":110,
    "Light Bulb":200,
    "Lime":60,
    "Lime Gelatin":800,
    "Lime Juice Concentrate":250,
    "Lime Sorbet":300,
    "Limeade":600,
    "Limestone":200,
    "Linen Thread":1200,
    "Lumber":4000,
    "Malt Vinegar":150,
    "Mango":110,
    "Mango Juice":550,
    "Mango Juice Concentrate":250,
    "Mango Sorbet":300,
    "Mattress":10000,
    "Mayonnaise":800,
    "Microprocessor":350,
    "Microwave Oven":13000,
    "Milk":47,
    "Milk Chocolate Bar":1200,
    "Milk in a Carton":350,
    "Milk in a Jug":500,
    "Mineral":70,
    "Mirror":25000,
    "Monitor":20000,
    "Motherboard":30000,
    "Motorcycle":1500000,
    "Motorcycle Body":700000,
    "Mustard":650,
    "Mustard Seeds":150,
    "Natural Gas":110,
    "Neapolitan Ice Cream":500,
    "Necktie":2500,
    "Nightstand":4000,
    "Nylon":400,
    "Nylon Thread":800,
    "Oat":60,
    "Oatmeal":200,
    "Oatmeal Raisin Cookie":650,
    "Orange":60,
    "Orange Gelatin":750,
    "Orange Juice":550,
    "Orange Juice Concentrate":250,
    "Orange Sorbet":300,
    "Paper":300,
    "Paper Carton":12,
    "Paper Napkin":130,
    "Paper Towel":300,
    "Passenger Jet":5000000000,
    "Passenger Jet Body":2000000000,
    "Passenger Jet Wing":750000000,
    "Pastry Dough":250,
    "Peanut Butter":400,
    "Peanuts":60,
    "Pepper":550,
    "Personal Jet":200000000,
    "Personal Jet Body":65000000,
    "Personal Jet Wing":35000000,
    "Petroleum":2500,
    "Pig":6000,
    "Pillow":4000,
    "Pi√±a Colada":800,
    "Pineapple":110,
    "Pineapple Gelatin":750,
    "Pineapple Juice":550,
    "Pineapple Juice Concentrate":250,
    "Pineapple Sorbet":300,
    "Pizza":2000,
    "Plastic":650,
    "Plastic Bottle":30,
    "Plastic Jar":30,
    "Plastic Jug":50,
    "Polyester":400,
    "Polyester Thread":750,
    "Pork":550,
    "Pork Chop":700,
    "Pork Sausage":400,
    "Pork Skin":110,
    "Portable Heater":10000,
    "Pot Roast":1300,
    "Potato":60,
    "Power Boat":4000000,
    "Power Boat Body":1700000,
    "Power Cruiser":30000000,
    "Printer":20000,
    "Propeller":130000,
    "Pumpkin":400,
    "Pumpkin Pie":950,
    "Quartz":500,
    "Radio":4000,
    "Raisin":400,
    "Remote Controlled Car":7000,
    "Rice":60,
    "Roast Beef":1300,
    "Roast Beef Sandwich":600,
    "Roasted Pork Chop":1500,
    "Root Beer":750,
    "Root Beer Concentrate":350,
    "Rotisserie Chicken":2000,
    "Row Boat":120000,
    "Rubber":800,
    "Rubber Duck":800,
    "Rubik's Cube":1500,
    "Rug":11000,
    "Rum":450,
    "Sailboat":1700000,
    "Sails":250000,
    "Salami":1100,
    "Salt":170,
    "Sapphire":1700,
    "Scanner":20000,
    "Scarf":4000,
    "Seats":50000,
    "Sheet":3500,
    "Shorts":3500,
    "Side-By-Side Refrigerator":170000,
    "Silica Sand":130,
    "Silicon":1500,
    "Silk":500,
    "Silk Thread":2000,
    "Silver":11000,
    "Silver Bracelet":20000,
    "Silver Necklace":10000,
    "Silver Ore":4000,
    "Skirt":3500,
    "Sleeping Bag":6500,
    "Snorkel":2500,
    "Soccer Ball":3000,
    "Socks":2500,
    "Sport Shoes":5000,
    "Sport Watch":2500,
    "Steak Taco":700,
    "Steel":8000,
    "Stockings":3000,
    "Strawberry":60,
    "Strawberry Banana Cake":2000,
    "Strawberry Banana Smoothie":800,
    "Strawberry Gelatin":750,
    "Strawberry Ice Cream":400,
    "Strawberry Juice Concentrate":250,
    "Strawberry Milk":700,
    "Strawberry Pie":1000,
    "Strawberry Sorbet":300,
    "Stuffed Animal":2000,
    "Sugar":250,
    "Sugar Cane":170,
    "Sunglasses":3500,
    "Surfboard":45000,
    "SUV":2000000,
    "SUV Body":1200000,
    "Sweater":4500,
    "Swim Fin":4000,
    "Swim Goggle":2000,
    "Swim Suit":9500,
    "T-Shirt":2000,
    "Table":15000,
    "Table Lamp":2000,
    "Tennis Ball":250,
    "Tennis Racquet":4000,
    "Tiramisu":2000,
    "Titanium":25000,
    "Titanium Alloy":35000,
    "Titanium Ore":2500,
    "Toilet":25000,
    "Toilet Bowl":7000,
    "Toilet Tank":3500,
    "Toilet Tissue":1200,
    "Tomato":75,
    "Tomato Ketchup":450,
    "Top-Freezer Refrigerator":85000,
    "Tortilla":500,
    "Tortilla Chips":900,
    "Towel":1700,
    "Toy Keyboard":5000,
    "Truck":3000000,
    "Truck Body":1500000,
    "Tungsten Ore":11000,
    "Tungsten Powder":400,
    "Turbine Engine":1500000,
    "TV":50000,
    "Van":2500000,
    "Van Body":1300000,
    "Vanilla Beans":650,
    "Vanilla Cake":2000,
    "Vanilla Extract":1300,
    "Vanilla Ice Cream":350,
    "Vanilla Milk":700,
    "Vinyl":300,
    "Vinyl Thread":1100,
    "Wallet":3000,
    "Washer":70000,
    "Water":7,
    "Water Gun":3000,
    "Watermelon":400,
    "Watermelon Juice":550,
    "Watermelon Juice Concentrate":250,
    "Watermelon Sorbet":300,
    "Wedding Dress":20000,
    "Wheat":60,
    "Wheel":12000,
    "Whipped Cream":170,
    "White Vinegar":300,
    "Whole Chicken":2000,
    "Wig":3500,
    "Window AC":25000,
    "Wine":1500,
    "Wood Floor":2000,
    "Wool":350,
    "Wool Coat":25000,
    "Wool Yarn":1500,
    "Yogurt":250,
    "Water (Filtered)":20
};

function addSuggestedSellPrice() {
    var tableHeaderRow = $("#wh_table thead tr");
    if (tableHeaderRow.find("td").length == 7)
    {
	    tableHeaderRow.find("td:nth-child(6)").after("<td>Suggested Price</td>");
    }
    
    $("#wh_table tr:gt(0)").each(function() {
        var row = $(this);
        if (row.find("td").length == 8)
        {
            var productName = row.find("td.warehouse_prod_name").text();
            var productQuality = parseFloat(row.find("td:nth-child(3)").text());
            var productBaseValue = productDb[productName] / 100;
            var suggestedPrice = (productBaseValue * (1 + productQuality / 50)).toFixed(2);
            
            row.find("td:nth-child(7)").after("<td><a class='setUnitPrice' title='" + suggestedPrice + "'>$" + formatNumReadable(suggestedPrice) + "</a></td>");
            row.find("td:last-child").css("white-space", "nowrap");
            
            var productQuantityCell = row.find("td:nth-child(4)");
            productQuantityCell.html("<a class='setQuantity'>" + productQuantityCell.text() + "</a>");
        }
    });
}

$(document).on("click", "a.setUnitPrice", function() {
    var row = $(this).closest("tr");
    $(this).closest("tr").find("input[id^=sell_price_]").val($(this).attr('title'));
});

$(document).on("click", "a.setQuantity", function() {
    var row = $(this).closest("tr");
    $(this).closest("tr").find("input[id^=sell_quantity_]").val($(this).text());
});

GM_addStyle(".default_table td{padding: 3px !important}");
$(document).ajaxStop(addSuggestedSellPrice);
